{
  "version": 3,
  "sources": [
    "vendor/require.js",
    "vendor/knockout-3.5.1.js",
    "vendor/knockout-postbox.js",
    "vendor/jquery-3.5.1.js",
    "vendor/jquery.validate.js",
    "vendor/jquery.validate.unobtrusive.js",
    "vendor/jquery.numeric.js",
    "vendor/jquery-migrate-3.3.1.js",
    "fxnet/common/utils/handlers/general.js",
    "global/UrlResolver.js",
    "vendor/q.js",
    "fxnet/common/utils/handlers/AjaxError.js",
    "fxnet/common/utils/handlers/Ajaxer.js",
    "fxnet/common/utils/handlers/HashTable.js",
    "fxnet/uilayer/modules/StateObject.js",
    "SystemNotificationEvents!StateObject",
    "fxnet/LogicLayer/GeneralManager/ShutDownHandler.js",
    "fxnet/dataaccesslayer/dalCommon.js",
    "fxnet/common/utils/handlers/Logger.js",
    "fxnet/common/utils/handlers/jsonhelper.js",
    "vendor/knockout.validation.js",
    "fxnet/uilayer/uilayerhelpers/ObservableCustomExtender.js",
    "fxnet/Common/Utils/Extensions/Object.js",
    "fxnet/Common/Utils/Extensions/Array.js",
    "fxnet/Common/Utils/Extensions/Date.js",
    "fxnet/Common/Utils/Extensions/String.js",
    "fxnet/Common/Utils/Extensions/Number.js",
    "fxnet/common/utils/handlers/format.js",
    "tracking/EventRaiser.js",
    "tracking/PerformanceDataCollector.js",
    "fxnet/LogicLayer/GeneralManager/Dictionary.js",
    "fxnet/common/utils/handlers/Delegate.js",
    "fxnet/common/utils/handlers/Instrument.js",
    "fxnet/common/utils/handlers/StringBuilder.js",
    "fxnet/dataaccesslayer/dalorder.js",
    "fxnet/logiclayer/initialdatamanagers/DealsAmountsManager.js",
    "fxnet/uilayer/managers/profileinstruments.js",
    "fxnet/uilayer/modules/systeminfo.js",
    "fxnet/Common/constants/enums/DataMembersPositions.js",
    "fxnet/logiclayer/initialdatamanagers/InstrumentsManager.js",
    "fxnet/logiclayer/initialdatamanagers/SymbolsManager.js",
    "fxnet/devices/mobile/enums/ViewsEnums.js",
    "fxnet/Common/constants/enums/enums.js",
    "fxnet/devices/mobile/configuration/Containers.js",
    "fxnet/dataaccesslayer/dalcustomer.js",
    "fxnet/logiclayer/initialdatamanagers/Customer.js",
    "fxnet/common/utils/handlers/Cookie.js",
    "fxnet/uilayer/modules/ThemeSettings.js",
    "vendor/text.js",
    "fxnet/uilayer/modules/environmentData.js",
    "fxnet/loader.js",
    "fxnet/Common/constants/enums/loginlogoutreasonenum.js",
    "fxnet/preloader.js",
    "Tracking/Internal/TrackingEvents.js",
    "tracking/EventsCollector.js",
    "tracking/TrackingCommonData.js",
    "global/browser.js",
    "IM!StateObject",
    "global/apiIM.js",
    "vendor/latinize.js",
    "fxnet/common/constants/consts/Const.js",
    "fxnet/common/config/common.config.js",
    "fxnet/devices/mobile/configuration/require.config.js",
    "fxnet/logiclayer/cachemanagers/ClientStateFlagsManager.js",
    "fxnet/logiclayer/cachemanagers/PortfolioStaticManager.js",
    "fxnet/dataaccesslayer/dalCompliance.js",
    "fxnet/uilayer/uilayerhelpers/KOExtensions.js",
    "fxnet/uilayer/uilayerhelpers/ObservableHashTable.js",
    "fxnet/LogicLayer/GeneralManager/StatesManager.js",
    "fxnet/devices/mobile/uilayer/managers/StatesManager.js",
    "fxnet/Common/constants/enums/alertenums.js",
    "FxNet/uilayer/viewmodels/SeamlessPermissionsBase.js",
    "fxnet/devices/mobile/modules/SeamlessPermissionsModule.js",
    "fxnet/uilayer/modules/permissionsmodule.js",
    "fxnet/uilayer/modules/KoComponentLoader.js",
    "fxnet/common/utils/handlers/RequireError.js",
    "ViewsManager!StateObject",
    "fxnet/LogicLayer/GeneralManager/ErrorManager.js",
    "fxnet/common/utils/handlers/websocketstate.js",
    "fxnet/common/utils/handlers/websocketconnection.js",
    "fxnet/devices/mobile/uilayer/alerts/Alert.js",
    "fxnet/devices/mobile/uilayer/alerts/ExitAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/BonusAlert.js",
    "global/storagefactory.js",
    "fxnet/devices/mobile/uilayer/alerts/CloseDealConfirmationAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/ClosePositionsConfirmation.js",
    "fxnet/devices/mobile/uilayer/alerts/ServerResponseAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/SimpleClientAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/MaxIdleTimeAlertWrapper.js",
    "fxnet/devices/mobile/uilayer/alerts/DoubleLoginAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/DoubleLoginAlertWrapper.js",
    "fxnet/devices/mobile/uilayer/alerts/ExposureCoverageAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/MinEquityAlertWrapper.js",
    "fxnet/devices/mobile/uilayer/alerts/GeneralOkCancelAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/GeneralOkAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/ClientStateAlertExposureAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/ClientStateAlertExposureCoverageAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/ClientStateAlertSystemMode.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/ClientStateAlertApplicationClosing.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/PortfolioAlertAmlStatus.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/PortfolioAlertIsActive.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/PortfolioAlertIsDemo.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/PortfolioAlertIsReal.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/PortfolioAlertKycStatus.js",
    "fxnet/devices/mobile/uilayer/alerts/serverevents/PortfolioAlertCddStatus.js",
    "fxnet/dataaccesslayer/dalKycClientQuestionnaire.js",
    "fxnet/uilayer/alerts/QuestionnaireValidationAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/CddQuestionnaireAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/FingerprintLoginActivatedAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/ScanFingerprintLoginOptionConfirmationAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/AddFingerprintLoginOptionConfirmationAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/RemoveFingerprintLoginOptionConfirmationAlert.js",
    "fxnet/uilayer/alerts/MultipleDealsClosedConfirmation.js",
    "fxnet/uilayer/alerts/RemoveCreditCardConfirmationAlert.js",
    "fxnet/LogicLayer/GeneralManager/RegistrationManager.js",
    "fxnet/common/utils/handlers/SyncRequestHelper.js",
    "fxnet/dataaccesslayer/dalClientState.js",
    "Csm!StateObject",
    "fxnet/logiclayer/cachemanagers/AjaxCacheManager.js",
    "DealerParams!StateObject",
    "fxnet/dataaccesslayer/dalCustomerProfile.js",
    "fxnet/uilayer/managers/CustomerProfileManager.js",
    "fxnet/dataaccesslayer/dalsocketclientstate.js",
    "fxnet/logiclayer/cachemanagers/SocketCacheManager.js",
    "global/debounce.js",
    "fxnet/dataaccesslayer/dalNotificationData.js",
    "fxnet/logiclayer/cachemanagers/NotificationsManager.js",
    "fxnet/logiclayer/cachemanagers/ClientStateHolderManager.js",
    "fxnet/logiclayer/cachemanagers/InstrumentVolumeManager.js",
    "fxnet/logiclayer/cachemanagers/NetExposureManager.js",
    "fxnet/logiclayer/cachemanagers/QuotesManager.js",
    "fxnet/common/utils/handlers/limit.js",
    "fxnet/logiclayer/cachemanagers/activelimitsmanager.js",
    "fxnet/common/utils/handlers/Deal.js",
    "fxnet/logiclayer/cachemanagers/dealsmanager.js",
    "fxnet/logiclayer/cachemanagers/bonusmanager.js",
    "PerformaceEvents!StateObject",
    "fxnet/logiclayer/cachemanagers/clientstatedataprocessor.js",
    "fxnet/logiclayer/cachemanagers/CacheManager.js",
    "FxNet/LogicLayer/Deal/DealLifeCycle.js",
    "fxnet/uilayer/alerts/LimitsServerResponseAlert.js",
    "fxnet/uilayer/alerts/DealAddServerResponseAlert.js",
    "fxnet/uilayer/alerts/DealsClosedServerResponseAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/GeneralCancelableAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/PopupClientQuestionnaireAlert.js",
    "fxnet/uilayer/alerts/KnowledgeQuestionnaireAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/DeviceNotSupportFingerprintAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/DepositSuccessAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/HelpAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/DepositConfirmationEmailSentAlert.js",
    "fxnet/uilayer/alerts/PriceAlertServerResponseAlert.js",
    "fxnet/uilayer/alerts/PriceAlertClosedServerResponseAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/IframeAlert.js",
    "fxnet/uilayer/alerts/SessionEndedAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/DepositConfirmationSignatureAlert.js",
    "fxnet/devices/mobile/uilayer/alerts/AlertFactory.js",
    "fxnet/uilayer/managers/AlertsManager.js",
    "fxnet/devices/mobile/uilayer/managers/AlertsManager.js",
    "fxnet/devices/mobile/uilayer/alerts/MaxIdleTimeAlert.js",
    "fxnet/LogicLayer/GeneralManager/ActivitySupervisor.js",
    "fxnet/uilayer/uilayerhelpers/ObservableHelper.js",
    "fxnet/devices/mobile/configuration/initconfiguration.js",
    "vendor/jquery.history.js",
    "fxnet/uilayer/managers/historymanager.js",
    "FxNet/uilayer/viewmodels/dialogs/DialogViewModel.js",
    "fxnet/uilayer/managers/PopUpManager.js",
    "fxnet/uilayer/managers/AmlPopupManager.js",
    "FxNet/uilayer/viewmodels/payments/ComplianceBeforeDeposit.js",
    "fxnet/uilayer/managers/ViewsRouterManager.js",
    "fxnet/LogicLayer/DeepLink/DeepLinkParameterValidator.js",
    "fxnet/LogicLayer/DeepLink/DeepLinkParameterConverter.js",
    "fxnet/LogicLayer/GeneralManager/locationWrapper.js",
    "fxnet/devices/mobile/enums/routes.js",
    "fxnet/LogicLayer/DeepLink/DeepLinkHandler.js",
    "fxnet/uilayer/managers/viewsmanager.js",
    "FxNet/uilayer/viewmodels/ViewModelBase.js",
    "fxnet/dataaccesslayer/dalInstruments.js",
    "fxnet/uilayer/modules/FavoriteInstrumentsManager.js",
    "fxnet/common/utils/handlers/languageHelper.js",
    "fxnet/uilayer/managers/instrumentTranslationsManager.js",
    "vendor/jquery-ui.js",
    "vendor/jquery.ui.touch-punc.js",
    "vendor/knockout-sortable.js",
    "FxNet/uilayer/viewmodels/QuotesViewModel.js",
    "fxnet/dataaccesslayer/dalInitialData.js",
    "fxnet/Common/constants/enums/LoginLogoutReasonEnum.js",
    "fxnet/LogicLayer/GeneralManager/LocalStoreDoubleTabsListener.js",
    "fxnet/devices/mobile/uilayer/managers/LocalStoreDoubleTabsListener.js",
    "fxnet/logiclayer/initialdatamanagers/InitialDataManager.js",
    "fxnet/uilayer/managers/PresetBuilder.js",
    "fxnet/uilayer/managers/PresetCollectionBuilder.js",
    "fxnet/uilayer/managers/PresetCategoryBuilder.js",
    "fxnet/uilayer/modules/PresetsManager.js",
    "FxNet/Common/Constants/Collections/PresetsDefinitions.js",
    "FxNet/uilayer/viewmodels/QuotesPresetViewModel.js",
    "fxnet/dataaccesslayer/dalAccountingActions.js",
    "fxnet/uilayer/uilayerhelpers/observabledataset.js",
    "FxNet/uilayer/viewmodels/BalanceViewModel.js",
    "FxNet/uilayer/viewmodels/NetExposureViewModel.js",
    "FxNet/uilayer/viewmodels/AccountMarketViewModel.js",
    "fxnet/LogicLayer/GeneralManager/errormanager.js",
    "fxnet/dataaccesslayer/dalActivityLog.js",
    "FxNet/uilayer/viewmodels/ActivityLogViewModel.js",
    "FxNet/uilayer/viewmodels/MarginStatusViewModel.js",
    "FxNet/LogicLayer/Deal/DealPermissions.js",
    "ClosedDeals!StateObject",
    "fxnet/uilayer/managers/CollectionNavigateManager.js",
    "FxNet/uilayer/viewmodels/ClosedDealDetailsViewModel.js",
    "FxNet/uilayer/viewmodels/AccountBalanceViewModel.js",
    "fxnet/devices/mobile/uilayer/managers/ViewModelsManager.js",
    "fxnet/Common/constants/enums/paymentsconfigsettings.js",
    "fxnet/uilayer/managers/PopupInNewWindowManager.js",
    "fxnet/uilayer/managers/PopupInAlertManager.js",
    "fxnet/devices/mobile/configuration/PaymentsConfiguration.js",
    "fxnet/devices/mobile/configuration/mobilePatches.js",
    "fxnet/devices/mobile/enums/Consts.js",
    "fxnet/common/constants/consts/depositconstants.js",
    "fxnet/uilayer/uilayerhelpers/customkobindings/KoCustomBindings.js",
    "fxnet/devices/mobile/uilayer/uilayerhelpers/keyboard-status.js",
    "global/swipe.js",
    "vendor/normalize-scroll-left.js",
    "fxnet/devices/mobile/uilayer/uilayerhelpers/KoCustomBindings.js",
    "Tracking/Internal/TrackingData.js",
    "vendor/globalize.js",
    "fxnet/devices/mobile/configuration/PlugInConfiguration.js",
    "PostLoginAlerts!StateObject",
    "fxnet/devices/mobile/modules/PostLoginAlertController.js",
    "fxnet/dataaccesslayer/dalRetention.js",
    "SessionSupervisor!StateObject",
    "fxnet/uilayer/managers/RetentionManager.js",
    "fxnet/LogicLayer/GeneralManager/SessionSupervisor.js",
    "tracking/loggers/datalayer.js",
    "tracking/googleTagManager.js",
    "tracking/loggers/gglanalitycsconfigs.js",
    "tracking/loggers/fxeventslogger.js",
    "tracking/loggers/fbeventslogger.js",
    "FxNet/uilayer/modules/LoadDictionaryContent.js",
    "HotJarConfig!LoadDictionaryContent",
    "tracking/loggers/hotjareventslogger.js",
    "SnapEngageConfig!LoadDictionaryContent",
    "tracking/loggers/snapengagechat.js",
    "tracking/loggers/pagenocaptcha.js",
    "tracking/loggers/pagewithcaptcha.js",
    "tracking/loggers/gglanalyticslogger.js",
    "tracking/loggers/fxtracking.lib.js",
    "Tracking/Internal/TradingEventsHandler.js",
    "fxnet/fxnet.js",
    "fxnet/devices/mobile/Configuration/config.js",
    "contentdata!LoadDictionaryContent",
    "fxnet/devices/mobile/configuration/app.js",
    "../../../../../../../../module-create.js",
    "../../../../../../../../module-insertRequire.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7nVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACznDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC70BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACngBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnJA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnhDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3nCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7ZA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACv2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACx5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1ZA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9HA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtOA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1CA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpHA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzwFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxpfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzCA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7RA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3BA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACn7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC74BA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnCA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnEA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxFA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1gDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChDA;AACA;AACA,ACFA;AACA;AACA",
  "file": "preloader-mobile.js",
  "sourcesContent": [
    "/** vim: et:ts=4:sw=4:sts=4\r\n * @license RequireJS 2.3.6 Copyright jQuery Foundation and other contributors.\r\n * Released under MIT license, https://github.com/requirejs/requirejs/blob/master/LICENSE\r\n */\r\n//Not using strict: uneven strict support in browsers, #392, and causes\r\n//problems with requirejs.exec()/transpiler plugins that may not be strict.\r\n/*jslint regexp: true, nomen: true, sloppy: true */\r\n/*global window, navigator, document, importScripts, setTimeout, opera */\r\n\r\nvar requirejs, require, define;\r\n(function (global, setTimeout) {\r\n    var req, s, head, baseElement, dataMain, src,\r\n        interactiveScript, currentlyAddingScript, mainScript, subPath,\r\n        version = '2.3.6',\r\n        commentRegExp = /\\/\\*[\\s\\S]*?\\*\\/|([^:\"'=]|^)\\/\\/.*$/mg,\r\n        cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]+)[\"']\\s*\\)/g,\r\n        jsSuffixRegExp = /\\.js$/,\r\n        currDirRegExp = /^\\.\\//,\r\n        op = Object.prototype,\r\n        ostring = op.toString,\r\n        hasOwn = op.hasOwnProperty,\r\n        isBrowser = !!(typeof window !== 'undefined' && typeof navigator !== 'undefined' && window.document),\r\n        isWebWorker = !isBrowser && typeof importScripts !== 'undefined',\r\n        //PS3 indicates loaded and complete, but need to wait for complete\r\n        //specifically. Sequence is 'loading', 'loaded', execution,\r\n        // then 'complete'. The UA check is unfortunate, but not sure how\r\n        //to feature test w/o causing perf issues.\r\n        readyRegExp = isBrowser && navigator.platform === 'PLAYSTATION 3' ?\r\n            /^complete$/ : /^(complete|loaded)$/,\r\n        defContextName = '_',\r\n        //Oh the tragedy, detecting opera. See the usage of isOpera for reason.\r\n        isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]',\r\n        contexts = {},\r\n        cfg = {},\r\n        globalDefQueue = [],\r\n        useInteractive = false;\r\n\r\n    //Could match something like ')//comment', do not lose the prefix to comment.\r\n    function commentReplace(match, singlePrefix) {\r\n        return singlePrefix || '';\r\n    }\r\n\r\n    function isFunction(it) {\r\n        return ostring.call(it) === '[object Function]';\r\n    }\r\n\r\n    function isArray(it) {\r\n        return ostring.call(it) === '[object Array]';\r\n    }\r\n\r\n    /**\r\n     * Helper function for iterating over an array. If the func returns\r\n     * a true value, it will break out of the loop.\r\n     */\r\n    function each(ary, func) {\r\n        if (ary) {\r\n            var i;\r\n            for (i = 0; i < ary.length; i += 1) {\r\n                if (ary[i] && func(ary[i], i, ary)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Helper function for iterating over an array backwards. If the func\r\n     * returns a true value, it will break out of the loop.\r\n     */\r\n    function eachReverse(ary, func) {\r\n        if (ary) {\r\n            var i;\r\n            for (i = ary.length - 1; i > -1; i -= 1) {\r\n                if (ary[i] && func(ary[i], i, ary)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function hasProp(obj, prop) {\r\n        return hasOwn.call(obj, prop);\r\n    }\r\n\r\n    function getOwn(obj, prop) {\r\n        return hasProp(obj, prop) && obj[prop];\r\n    }\r\n\r\n    /**\r\n     * Cycles over properties in an object and calls a function for each\r\n     * property value. If the function returns a truthy value, then the\r\n     * iteration is stopped.\r\n     */\r\n    function eachProp(obj, func) {\r\n        var prop;\r\n        for (prop in obj) {\r\n            if (hasProp(obj, prop)) {\r\n                if (func(obj[prop], prop)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Simple function to mix in properties from source into target,\r\n     * but only if target does not already have a property of the same name.\r\n     */\r\n    function mixin(target, source, force, deepStringMixin) {\r\n        if (source) {\r\n            eachProp(source, function (value, prop) {\r\n                if (force || !hasProp(target, prop)) {\r\n                    if (deepStringMixin && typeof value === 'object' && value &&\r\n                        !isArray(value) && !isFunction(value) &&\r\n                        !(value instanceof RegExp)) {\r\n\r\n                        if (!target[prop]) {\r\n                            target[prop] = {};\r\n                        }\r\n                        mixin(target[prop], value, force, deepStringMixin);\r\n                    } else {\r\n                        target[prop] = value;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        return target;\r\n    }\r\n\r\n    //Similar to Function.prototype.bind, but the 'this' object is specified\r\n    //first, since it is easier to read/figure out what 'this' will be.\r\n    function bind(obj, fn) {\r\n        return function () {\r\n            return fn.apply(obj, arguments);\r\n        };\r\n    }\r\n\r\n    function scripts() {\r\n        return document.getElementsByTagName('script');\r\n    }\r\n\r\n    function defaultOnError(err) {\r\n        throw err;\r\n    }\r\n\r\n    //Allow getting a global that is expressed in\r\n    //dot notation, like 'a.b.c'.\r\n    function getGlobal(value) {\r\n        if (!value) {\r\n            return value;\r\n        }\r\n        var g = global;\r\n        each(value.split('.'), function (part) {\r\n            g = g[part];\r\n        });\r\n        return g;\r\n    }\r\n\r\n    /**\r\n     * Constructs an error with a pointer to an URL with more information.\r\n     * @param {String} id the error ID that maps to an ID on a web page.\r\n     * @param {String} message human readable error.\r\n     * @param {Error} [err] the original error, if there is one.\r\n     *\r\n     * @returns {Error}\r\n     */\r\n    function makeError(id, msg, err, requireModules) {\r\n        var e = new Error(msg + '\\nhttps://requirejs.org/docs/errors.html#' + id);\r\n        e.requireType = id;\r\n        e.requireModules = requireModules;\r\n        if (err) {\r\n            e.originalError = err;\r\n        }\r\n        return e;\r\n    }\r\n\r\n    if (typeof define !== 'undefined') {\r\n        //If a define is already in play via another AMD loader,\r\n        //do not overwrite.\r\n        return;\r\n    }\r\n\r\n    if (typeof requirejs !== 'undefined') {\r\n        if (isFunction(requirejs)) {\r\n            //Do not overwrite an existing requirejs instance.\r\n            return;\r\n        }\r\n        cfg = requirejs;\r\n        requirejs = undefined;\r\n    }\r\n\r\n    //Allow for a require config object\r\n    if (typeof require !== 'undefined' && !isFunction(require)) {\r\n        //assume it is a config object.\r\n        cfg = require;\r\n        require = undefined;\r\n    }\r\n\r\n    function newContext(contextName) {\r\n        var inCheckLoaded, Module, context, handlers,\r\n            checkLoadedTimeoutId,\r\n            config = {\r\n                //Defaults. Do not set a default for map\r\n                //config to speed up normalize(), which\r\n                //will run faster if there is no default.\r\n                waitSeconds: 7,\r\n                baseUrl: './',\r\n                paths: {},\r\n                bundles: {},\r\n                pkgs: {},\r\n                shim: {},\r\n                config: {}\r\n            },\r\n            registry = {},\r\n            //registry of just enabled modules, to speed\r\n            //cycle breaking code when lots of modules\r\n            //are registered, but not activated.\r\n            enabledRegistry = {},\r\n            undefEvents = {},\r\n            defQueue = [],\r\n            defined = {},\r\n            urlFetched = {},\r\n            bundlesMap = {},\r\n            requireCounter = 1,\r\n            unnormalizedCounter = 1;\r\n\r\n        /**\r\n         * Trims the . and .. from an array of path segments.\r\n         * It will keep a leading path segment if a .. will become\r\n         * the first path segment, to help with module name lookups,\r\n         * which act like paths, but can be remapped. But the end result,\r\n         * all paths that use this function should look normalized.\r\n         * NOTE: this method MODIFIES the input array.\r\n         * @param {Array} ary the array of path segments.\r\n         */\r\n        function trimDots(ary) {\r\n            var i, part;\r\n            for (i = 0; i < ary.length; i++) {\r\n                part = ary[i];\r\n                if (part === '.') {\r\n                    ary.splice(i, 1);\r\n                    i -= 1;\r\n                } else if (part === '..') {\r\n                    // If at the start, or previous value is still ..,\r\n                    // keep them so that when converted to a path it may\r\n                    // still work when converted to a path, even though\r\n                    // as an ID it is less than ideal. In larger point\r\n                    // releases, may be better to just kick out an error.\r\n                    if (i === 0 || (i === 1 && ary[2] === '..') || ary[i - 1] === '..') {\r\n                        continue;\r\n                    } else if (i > 0) {\r\n                        ary.splice(i - 1, 2);\r\n                        i -= 2;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Given a relative module name, like ./something, normalize it to\r\n         * a real name that can be mapped to a path.\r\n         * @param {String} name the relative name\r\n         * @param {String} baseName a real name that the name arg is relative\r\n         * to.\r\n         * @param {Boolean} applyMap apply the map config to the value. Should\r\n         * only be done if this normalization is for a dependency ID.\r\n         * @returns {String} normalized name\r\n         */\r\n        function normalize(name, baseName, applyMap) {\r\n            var pkgMain, mapValue, nameParts, i, j, nameSegment, lastIndex,\r\n                foundMap, foundI, foundStarMap, starI, normalizedBaseParts,\r\n                baseParts = (baseName && baseName.split('/')),\r\n                map = config.map,\r\n                starMap = map && map['*'];\r\n\r\n            //Adjust any relative paths.\r\n            if (name) {\r\n                name = name.split('/');\r\n                lastIndex = name.length - 1;\r\n\r\n                // If wanting node ID compatibility, strip .js from end\r\n                // of IDs. Have to do this here, and not in nameToUrl\r\n                // because node allows either .js or non .js to map\r\n                // to same file.\r\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\r\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\r\n                }\r\n\r\n                // Starts with a '.' so need the baseName\r\n                if (name[0].charAt(0) === '.' && baseParts) {\r\n                    //Convert baseName to array, and lop off the last part,\r\n                    //so that . matches that 'directory' and not name of the baseName's\r\n                    //module. For instance, baseName of 'one/two/three', maps to\r\n                    //'one/two/three.js', but we want the directory, 'one/two' for\r\n                    //this normalization.\r\n                    normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);\r\n                    name = normalizedBaseParts.concat(name);\r\n                }\r\n\r\n                trimDots(name);\r\n                name = name.join('/');\r\n            }\r\n\r\n            //Apply map config if available.\r\n            if (applyMap && map && (baseParts || starMap)) {\r\n                nameParts = name.split('/');\r\n\r\n                outerLoop: for (i = nameParts.length; i > 0; i -= 1) {\r\n                    nameSegment = nameParts.slice(0, i).join('/');\r\n\r\n                    if (baseParts) {\r\n                        //Find the longest baseName segment match in the config.\r\n                        //So, do joins on the biggest to smallest lengths of baseParts.\r\n                        for (j = baseParts.length; j > 0; j -= 1) {\r\n                            mapValue = getOwn(map, baseParts.slice(0, j).join('/'));\r\n\r\n                            //baseName segment has config, find if it has one for\r\n                            //this name.\r\n                            if (mapValue) {\r\n                                mapValue = getOwn(mapValue, nameSegment);\r\n                                if (mapValue) {\r\n                                    //Match, update name to the new value.\r\n                                    foundMap = mapValue;\r\n                                    foundI = i;\r\n                                    break outerLoop;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    //Check for a star map match, but just hold on to it,\r\n                    //if there is a shorter segment match later in a matching\r\n                    //config, then favor over this star map.\r\n                    if (!foundStarMap && starMap && getOwn(starMap, nameSegment)) {\r\n                        foundStarMap = getOwn(starMap, nameSegment);\r\n                        starI = i;\r\n                    }\r\n                }\r\n\r\n                if (!foundMap && foundStarMap) {\r\n                    foundMap = foundStarMap;\r\n                    foundI = starI;\r\n                }\r\n\r\n                if (foundMap) {\r\n                    nameParts.splice(0, foundI, foundMap);\r\n                    name = nameParts.join('/');\r\n                }\r\n            }\r\n\r\n            // If the name points to a package's name, use\r\n            // the package main instead.\r\n            pkgMain = getOwn(config.pkgs, name);\r\n\r\n            return pkgMain ? pkgMain : name;\r\n        }\r\n\r\n        function removeScript(name) {\r\n            if (isBrowser) {\r\n                each(scripts(), function (scriptNode) {\r\n                    if (scriptNode.getAttribute('data-requiremodule') === name &&\r\n                        scriptNode.getAttribute('data-requirecontext') === context.contextName) {\r\n                        scriptNode.parentNode.removeChild(scriptNode);\r\n                        return true;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        function hasPathFallback(id) {\r\n            var pathConfig = getOwn(config.paths, id);\r\n            if (pathConfig && isArray(pathConfig) && pathConfig.length > 1) {\r\n                //Pop off the first array value, since it failed, and\r\n                //retry\r\n                pathConfig.shift();\r\n                context.require.undef(id);\r\n\r\n                //Custom require that does not do map translation, since\r\n                //ID is \"absolute\", already mapped/resolved.\r\n                context.makeRequire(null, {\r\n                    skipMap: true\r\n                })([id]);\r\n\r\n                return true;\r\n            }\r\n        }\r\n\r\n        //Turns a plugin!resource to [plugin, resource]\r\n        //with the plugin being undefined if the name\r\n        //did not have a plugin prefix.\r\n        function splitPrefix(name) {\r\n            var prefix,\r\n                index = name ? name.indexOf('!') : -1;\r\n            if (index > -1) {\r\n                prefix = name.substring(0, index);\r\n                name = name.substring(index + 1, name.length);\r\n            }\r\n            return [prefix, name];\r\n        }\r\n\r\n        /**\r\n         * Creates a module mapping that includes plugin prefix, module\r\n         * name, and path. If parentModuleMap is provided it will\r\n         * also normalize the name via require.normalize()\r\n         *\r\n         * @param {String} name the module name\r\n         * @param {String} [parentModuleMap] parent module map\r\n         * for the module name, used to resolve relative names.\r\n         * @param {Boolean} isNormalized: is the ID already normalized.\r\n         * This is true if this call is done for a define() module ID.\r\n         * @param {Boolean} applyMap: apply the map config to the ID.\r\n         * Should only be true if this map is for a dependency.\r\n         *\r\n         * @returns {Object}\r\n         */\r\n        function makeModuleMap(name, parentModuleMap, isNormalized, applyMap) {\r\n            var url, pluginModule, suffix, nameParts,\r\n                prefix = null,\r\n                parentName = parentModuleMap ? parentModuleMap.name : null,\r\n                originalName = name,\r\n                isDefine = true,\r\n                normalizedName = '';\r\n\r\n            //If no name, then it means it is a require call, generate an\r\n            //internal name.\r\n            if (!name) {\r\n                isDefine = false;\r\n                name = '_@r' + (requireCounter += 1);\r\n            }\r\n\r\n            nameParts = splitPrefix(name);\r\n            prefix = nameParts[0];\r\n            name = nameParts[1];\r\n\r\n            if (prefix) {\r\n                prefix = normalize(prefix, parentName, applyMap);\r\n                pluginModule = getOwn(defined, prefix);\r\n            }\r\n\r\n            //Account for relative paths if there is a base name.\r\n            if (name) {\r\n                if (prefix) {\r\n                    if (isNormalized) {\r\n                        normalizedName = name;\r\n                    } else if (pluginModule && pluginModule.normalize) {\r\n                        //Plugin is loaded, use its normalize method.\r\n                        normalizedName = pluginModule.normalize(name, function (name) {\r\n                            return normalize(name, parentName, applyMap);\r\n                        });\r\n                    } else {\r\n                        // If nested plugin references, then do not try to\r\n                        // normalize, as it will not normalize correctly. This\r\n                        // places a restriction on resourceIds, and the longer\r\n                        // term solution is not to normalize until plugins are\r\n                        // loaded and all normalizations to allow for async\r\n                        // loading of a loader plugin. But for now, fixes the\r\n                        // common uses. Details in #1131\r\n                        normalizedName = name.indexOf('!') === -1 ?\r\n                            normalize(name, parentName, applyMap) :\r\n                            name;\r\n                    }\r\n                } else {\r\n                    //A regular module.\r\n                    normalizedName = normalize(name, parentName, applyMap);\r\n\r\n                    //Normalized name may be a plugin ID due to map config\r\n                    //application in normalize. The map config values must\r\n                    //already be normalized, so do not need to redo that part.\r\n                    nameParts = splitPrefix(normalizedName);\r\n                    prefix = nameParts[0];\r\n                    normalizedName = nameParts[1];\r\n                    isNormalized = true;\r\n\r\n                    url = context.nameToUrl(normalizedName);\r\n                }\r\n            }\r\n\r\n            //If the id is a plugin id that cannot be determined if it needs\r\n            //normalization, stamp it with a unique ID so two matching relative\r\n            //ids that may conflict can be separate.\r\n            suffix = prefix && !pluginModule && !isNormalized ?\r\n                '_unnormalized' + (unnormalizedCounter += 1) :\r\n                '';\r\n\r\n            return {\r\n                prefix: prefix,\r\n                name: normalizedName,\r\n                parentMap: parentModuleMap,\r\n                unnormalized: !!suffix,\r\n                url: url,\r\n                originalName: originalName,\r\n                isDefine: isDefine,\r\n                id: (prefix ?\r\n                    prefix + '!' + normalizedName :\r\n                    normalizedName) + suffix\r\n            };\r\n        }\r\n\r\n        function getModule(depMap) {\r\n            var id = depMap.id,\r\n                mod = getOwn(registry, id);\r\n\r\n            if (!mod) {\r\n                mod = registry[id] = new context.Module(depMap);\r\n            }\r\n\r\n            return mod;\r\n        }\r\n\r\n        function on(depMap, name, fn) {\r\n            var id = depMap.id,\r\n                mod = getOwn(registry, id);\r\n\r\n            if (hasProp(defined, id) &&\r\n                (!mod || mod.defineEmitComplete)) {\r\n                if (name === 'defined') {\r\n                    fn(defined[id]);\r\n                }\r\n            } else {\r\n                mod = getModule(depMap);\r\n                if (mod.error && name === 'error') {\r\n                    fn(mod.error);\r\n                } else {\r\n                    mod.on(name, fn);\r\n                }\r\n            }\r\n        }\r\n\r\n        function onError(err, errback) {\r\n            var ids = err.requireModules,\r\n                notified = false;\r\n\r\n            if (errback) {\r\n                errback(err);\r\n            } else {\r\n                each(ids, function (id) {\r\n                    var mod = getOwn(registry, id);\r\n                    if (mod) {\r\n                        //Set error on module, so it skips timeout checks.\r\n                        mod.error = err;\r\n                        if (mod.events.error) {\r\n                            notified = true;\r\n                            mod.emit('error', err);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (!notified) {\r\n                    req.onError(err);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Internal method to transfer globalQueue items to this context's\r\n         * defQueue.\r\n         */\r\n        function takeGlobalQueue() {\r\n            //Push all the globalDefQueue items into the context's defQueue\r\n            if (globalDefQueue.length) {\r\n                each(globalDefQueue, function (queueItem) {\r\n                    var id = queueItem[0];\r\n                    if (typeof id === 'string') {\r\n                        context.defQueueMap[id] = true;\r\n                    }\r\n                    defQueue.push(queueItem);\r\n                });\r\n                globalDefQueue = [];\r\n            }\r\n        }\r\n\r\n        handlers = {\r\n            'require': function (mod) {\r\n                if (mod.require) {\r\n                    return mod.require;\r\n                } else {\r\n                    return (mod.require = context.makeRequire(mod.map));\r\n                }\r\n            },\r\n            'exports': function (mod) {\r\n                mod.usingExports = true;\r\n                if (mod.map.isDefine) {\r\n                    if (mod.exports) {\r\n                        return (defined[mod.map.id] = mod.exports);\r\n                    } else {\r\n                        return (mod.exports = defined[mod.map.id] = {});\r\n                    }\r\n                }\r\n            },\r\n            'module': function (mod) {\r\n                if (mod.module) {\r\n                    return mod.module;\r\n                } else {\r\n                    return (mod.module = {\r\n                        id: mod.map.id,\r\n                        uri: mod.map.url,\r\n                        config: function () {\r\n                            return getOwn(config.config, mod.map.id) || {};\r\n                        },\r\n                        exports: mod.exports || (mod.exports = {})\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        function cleanRegistry(id) {\r\n            //Clean up machinery used for waiting modules.\r\n            delete registry[id];\r\n            delete enabledRegistry[id];\r\n        }\r\n\r\n        function breakCycle(mod, traced, processed) {\r\n            var id = mod.map.id;\r\n\r\n            if (mod.error) {\r\n                mod.emit('error', mod.error);\r\n            } else {\r\n                traced[id] = true;\r\n                each(mod.depMaps, function (depMap, i) {\r\n                    var depId = depMap.id,\r\n                        dep = getOwn(registry, depId);\r\n\r\n                    //Only force things that have not completed\r\n                    //being defined, so still in the registry,\r\n                    //and only if it has not been matched up\r\n                    //in the module already.\r\n                    if (dep && !mod.depMatched[i] && !processed[depId]) {\r\n                        if (getOwn(traced, depId)) {\r\n                            mod.defineDep(i, defined[depId]);\r\n                            mod.check(); //pass false?\r\n                        } else {\r\n                            breakCycle(dep, traced, processed);\r\n                        }\r\n                    }\r\n                });\r\n                processed[id] = true;\r\n            }\r\n        }\r\n\r\n        function checkLoaded() {\r\n            var err, usingPathFallback,\r\n                waitInterval = config.waitSeconds * 1000,\r\n                //It is possible to disable the wait interval by using waitSeconds of 0.\r\n                expired = waitInterval && (context.startTime + waitInterval) < new Date().getTime(),\r\n                noLoads = [],\r\n                reqCalls = [],\r\n                stillLoading = false,\r\n                needCycleCheck = true;\r\n\r\n            //Do not bother if this call was a result of a cycle break.\r\n            if (inCheckLoaded) {\r\n                return;\r\n            }\r\n\r\n            inCheckLoaded = true;\r\n\r\n            //Figure out the state of all the modules.\r\n            eachProp(enabledRegistry, function (mod) {\r\n                var map = mod.map,\r\n                    modId = map.id;\r\n\r\n                //Skip things that are not enabled or in error state.\r\n                if (!mod.enabled) {\r\n                    return;\r\n                }\r\n\r\n                if (!map.isDefine) {\r\n                    reqCalls.push(mod);\r\n                }\r\n\r\n                if (!mod.error) {\r\n                    //If the module should be executed, and it has not\r\n                    //been inited and time is up, remember it.\r\n                    if (!mod.inited && expired) {\r\n                        if (hasPathFallback(modId)) {\r\n                            usingPathFallback = true;\r\n                            stillLoading = true;\r\n                        } else {\r\n                            noLoads.push(modId);\r\n                            removeScript(modId);\r\n                        }\r\n                    } else if (!mod.inited && mod.fetched && map.isDefine) {\r\n                        stillLoading = true;\r\n                        if (!map.prefix) {\r\n                            //No reason to keep looking for unfinished\r\n                            //loading. If the only stillLoading is a\r\n                            //plugin resource though, keep going,\r\n                            //because it may be that a plugin resource\r\n                            //is waiting on a non-plugin cycle.\r\n                            return (needCycleCheck = false);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (expired && noLoads.length) {\r\n                //If wait time expired, throw error of unloaded modules.\r\n                err = makeError('timeout', 'Load timeout for modules: ' + noLoads, null, noLoads);\r\n                err.contextName = context.contextName;\r\n                return onError(err);\r\n            }\r\n\r\n            //Not expired, check for a cycle.\r\n            if (needCycleCheck) {\r\n                each(reqCalls, function (mod) {\r\n                    breakCycle(mod, {}, {});\r\n                });\r\n            }\r\n\r\n            //If still waiting on loads, and the waiting load is something\r\n            //other than a plugin resource, or there are still outstanding\r\n            //scripts, then just try back later.\r\n            if ((!expired || usingPathFallback) && stillLoading) {\r\n                //Something is still waiting to load. Wait for it, but only\r\n                //if a timeout is not already in effect.\r\n                if ((isBrowser || isWebWorker) && !checkLoadedTimeoutId) {\r\n                    checkLoadedTimeoutId = setTimeout(function () {\r\n                        checkLoadedTimeoutId = 0;\r\n                        checkLoaded();\r\n                    }, 50);\r\n                }\r\n            }\r\n\r\n            inCheckLoaded = false;\r\n        }\r\n\r\n        Module = function (map) {\r\n            this.events = getOwn(undefEvents, map.id) || {};\r\n            this.map = map;\r\n            this.shim = getOwn(config.shim, map.id);\r\n            this.depExports = [];\r\n            this.depMaps = [];\r\n            this.depMatched = [];\r\n            this.pluginMaps = {};\r\n            this.depCount = 0;\r\n\r\n            /* this.exports this.factory\r\n               this.depMaps = [],\r\n               this.enabled, this.fetched\r\n            */\r\n        };\r\n\r\n        Module.prototype = {\r\n            init: function (depMaps, factory, errback, options) {\r\n                options = options || {};\r\n\r\n                //Do not do more inits if already done. Can happen if there\r\n                //are multiple define calls for the same module. That is not\r\n                //a normal, common case, but it is also not unexpected.\r\n                if (this.inited) {\r\n                    return;\r\n                }\r\n\r\n                this.factory = factory;\r\n\r\n                if (errback) {\r\n                    //Register for errors on this module.\r\n                    this.on('error', errback);\r\n                } else if (this.events.error) {\r\n                    //If no errback already, but there are error listeners\r\n                    //on this module, set up an errback to pass to the deps.\r\n                    errback = bind(this, function (err) {\r\n                        this.emit('error', err);\r\n                    });\r\n                }\r\n\r\n                //Do a copy of the dependency array, so that\r\n                //source inputs are not modified. For example\r\n                //\"shim\" deps are passed in here directly, and\r\n                //doing a direct modification of the depMaps array\r\n                //would affect that config.\r\n                this.depMaps = depMaps && depMaps.slice(0);\r\n\r\n                this.errback = errback;\r\n\r\n                //Indicate this module has be initialized\r\n                this.inited = true;\r\n\r\n                this.ignore = options.ignore;\r\n\r\n                //Could have option to init this module in enabled mode,\r\n                //or could have been previously marked as enabled. However,\r\n                //the dependencies are not known until init is called. So\r\n                //if enabled previously, now trigger dependencies as enabled.\r\n                if (options.enabled || this.enabled) {\r\n                    //Enable this module and dependencies.\r\n                    //Will call this.check()\r\n                    this.enable();\r\n                } else {\r\n                    this.check();\r\n                }\r\n            },\r\n\r\n            defineDep: function (i, depExports) {\r\n                //Because of cycles, defined callback for a given\r\n                //export can be called more than once.\r\n                if (!this.depMatched[i]) {\r\n                    this.depMatched[i] = true;\r\n                    this.depCount -= 1;\r\n                    this.depExports[i] = depExports;\r\n                }\r\n            },\r\n\r\n            fetch: function () {\r\n                if (this.fetched) {\r\n                    return;\r\n                }\r\n                this.fetched = true;\r\n\r\n                context.startTime = (new Date()).getTime();\r\n\r\n                var map = this.map;\r\n\r\n                //If the manager is for a plugin managed resource,\r\n                //ask the plugin to load it now.\r\n                if (this.shim) {\r\n                    context.makeRequire(this.map, {\r\n                        enableBuildCallback: true\r\n                    })(this.shim.deps || [], bind(this, function () {\r\n                        return map.prefix ? this.callPlugin() : this.load();\r\n                    }));\r\n                } else {\r\n                    //Regular dependency.\r\n                    return map.prefix ? this.callPlugin() : this.load();\r\n                }\r\n            },\r\n\r\n            load: function () {\r\n                var url = this.map.url;\r\n\r\n                //Regular dependency.\r\n                if (!urlFetched[url]) {\r\n                    urlFetched[url] = true;\r\n                    context.load(this.map.id, url);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Checks if the module is ready to define itself, and if so,\r\n             * define it.\r\n             */\r\n            check: function () {\r\n                if (!this.enabled || this.enabling) {\r\n                    return;\r\n                }\r\n\r\n                var err, cjsModule,\r\n                    id = this.map.id,\r\n                    depExports = this.depExports,\r\n                    exports = this.exports,\r\n                    factory = this.factory;\r\n\r\n                if (!this.inited) {\r\n                    // Only fetch if not already in the defQueue.\r\n                    if (!hasProp(context.defQueueMap, id)) {\r\n                        this.fetch();\r\n                    }\r\n                } else if (this.error) {\r\n                    this.emit('error', this.error);\r\n                } else if (!this.defining) {\r\n                    //The factory could trigger another require call\r\n                    //that would result in checking this module to\r\n                    //define itself again. If already in the process\r\n                    //of doing that, skip this work.\r\n                    this.defining = true;\r\n\r\n                    if (this.depCount < 1 && !this.defined) {\r\n                        if (isFunction(factory)) {\r\n                            //If there is an error listener, favor passing\r\n                            //to that instead of throwing an error. However,\r\n                            //only do it for define()'d  modules. require\r\n                            //errbacks should not be called for failures in\r\n                            //their callbacks (#699). However if a global\r\n                            //onError is set, use that.\r\n                            if ((this.events.error && this.map.isDefine) ||\r\n                                req.onError !== defaultOnError) {\r\n                                try {\r\n                                    exports = context.execCb(id, factory, depExports, exports);\r\n                                } catch (e) {\r\n                                    err = e;\r\n                                }\r\n                            } else {\r\n                                exports = context.execCb(id, factory, depExports, exports);\r\n                            }\r\n\r\n                            // Favor return value over exports. If node/cjs in play,\r\n                            // then will not have a return value anyway. Favor\r\n                            // module.exports assignment over exports object.\r\n                            if (this.map.isDefine && exports === undefined) {\r\n                                cjsModule = this.module;\r\n                                if (cjsModule) {\r\n                                    exports = cjsModule.exports;\r\n                                } else if (this.usingExports) {\r\n                                    //exports already set the defined value.\r\n                                    exports = this.exports;\r\n                                }\r\n                            }\r\n\r\n                            if (err) {\r\n                                err.requireMap = this.map;\r\n                                err.requireModules = this.map.isDefine ? [this.map.id] : null;\r\n                                err.requireType = this.map.isDefine ? 'define' : 'require';\r\n                                return onError((this.error = err));\r\n                            }\r\n\r\n                        } else {\r\n                            //Just a literal value\r\n                            exports = factory;\r\n                        }\r\n\r\n                        this.exports = exports;\r\n\r\n                        if (this.map.isDefine && !this.ignore) {\r\n                            defined[id] = exports;\r\n\r\n                            if (req.onResourceLoad) {\r\n                                var resLoadMaps = [];\r\n                                each(this.depMaps, function (depMap) {\r\n                                    resLoadMaps.push(depMap.normalizedMap || depMap);\r\n                                });\r\n                                req.onResourceLoad(context, this.map, resLoadMaps);\r\n                            }\r\n                        }\r\n\r\n                        //Clean up\r\n                        cleanRegistry(id);\r\n\r\n                        this.defined = true;\r\n                    }\r\n\r\n                    //Finished the define stage. Allow calling check again\r\n                    //to allow define notifications below in the case of a\r\n                    //cycle.\r\n                    this.defining = false;\r\n\r\n                    if (this.defined && !this.defineEmitted) {\r\n                        this.defineEmitted = true;\r\n                        this.emit('defined', this.exports);\r\n                        this.defineEmitComplete = true;\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            callPlugin: function () {\r\n                var map = this.map,\r\n                    id = map.id,\r\n                    //Map already normalized the prefix.\r\n                    pluginMap = makeModuleMap(map.prefix);\r\n\r\n                //Mark this as a dependency for this plugin, so it\r\n                //can be traced for cycles.\r\n                this.depMaps.push(pluginMap);\r\n\r\n                on(pluginMap, 'defined', bind(this, function (plugin) {\r\n                    var load, normalizedMap, normalizedMod,\r\n                        bundleId = getOwn(bundlesMap, this.map.id),\r\n                        name = this.map.name,\r\n                        parentName = this.map.parentMap ? this.map.parentMap.name : null,\r\n                        localRequire = context.makeRequire(map.parentMap, {\r\n                            enableBuildCallback: true\r\n                        });\r\n\r\n                    //If current map is not normalized, wait for that\r\n                    //normalized name to load instead of continuing.\r\n                    if (this.map.unnormalized) {\r\n                        //Normalize the ID if the plugin allows it.\r\n                        if (plugin.normalize) {\r\n                            name = plugin.normalize(name, function (name) {\r\n                                return normalize(name, parentName, true);\r\n                            }) || '';\r\n                        }\r\n\r\n                        //prefix and name should already be normalized, no need\r\n                        //for applying map config again either.\r\n                        normalizedMap = makeModuleMap(map.prefix + '!' + name,\r\n                            this.map.parentMap,\r\n                            true);\r\n                        on(normalizedMap,\r\n                            'defined', bind(this, function (value) {\r\n                                this.map.normalizedMap = normalizedMap;\r\n                                this.init([], function () { return value; }, null, {\r\n                                    enabled: true,\r\n                                    ignore: true\r\n                                });\r\n                            }));\r\n\r\n                        normalizedMod = getOwn(registry, normalizedMap.id);\r\n                        if (normalizedMod) {\r\n                            //Mark this as a dependency for this plugin, so it\r\n                            //can be traced for cycles.\r\n                            this.depMaps.push(normalizedMap);\r\n\r\n                            if (this.events.error) {\r\n                                normalizedMod.on('error', bind(this, function (err) {\r\n                                    this.emit('error', err);\r\n                                }));\r\n                            }\r\n                            normalizedMod.enable();\r\n                        }\r\n\r\n                        return;\r\n                    }\r\n\r\n                    //If a paths config, then just load that file instead to\r\n                    //resolve the plugin, as it is built into that paths layer.\r\n                    if (bundleId) {\r\n                        this.map.url = context.nameToUrl(bundleId);\r\n                        this.load();\r\n                        return;\r\n                    }\r\n\r\n                    load = bind(this, function (value) {\r\n                        this.init([], function () { return value; }, null, {\r\n                            enabled: true\r\n                        });\r\n                    });\r\n\r\n                    load.error = bind(this, function (err) {\r\n                        this.inited = true;\r\n                        this.error = err;\r\n                        err.requireModules = [id];\r\n\r\n                        //Remove temp unnormalized modules for this module,\r\n                        //since they will never be resolved otherwise now.\r\n                        eachProp(registry, function (mod) {\r\n                            if (mod.map.id.indexOf(id + '_unnormalized') === 0) {\r\n                                cleanRegistry(mod.map.id);\r\n                            }\r\n                        });\r\n\r\n                        onError(err);\r\n                    });\r\n\r\n                    //Allow plugins to load other code without having to know the\r\n                    //context or how to 'complete' the load.\r\n                    load.fromText = bind(this, function (text, textAlt) {\r\n                        /*jslint evil: true */\r\n                        var moduleName = map.name,\r\n                            moduleMap = makeModuleMap(moduleName),\r\n                            hasInteractive = useInteractive;\r\n\r\n                        //As of 2.1.0, support just passing the text, to reinforce\r\n                        //fromText only being called once per resource. Still\r\n                        //support old style of passing moduleName but discard\r\n                        //that moduleName in favor of the internal ref.\r\n                        if (textAlt) {\r\n                            text = textAlt;\r\n                        }\r\n\r\n                        //Turn off interactive script matching for IE for any define\r\n                        //calls in the text, then turn it back on at the end.\r\n                        if (hasInteractive) {\r\n                            useInteractive = false;\r\n                        }\r\n\r\n                        //Prime the system by creating a module instance for\r\n                        //it.\r\n                        getModule(moduleMap);\r\n\r\n                        //Transfer any config to this other module.\r\n                        if (hasProp(config.config, id)) {\r\n                            config.config[moduleName] = config.config[id];\r\n                        }\r\n\r\n                        try {\r\n                            req.exec(text);\r\n                        } catch (e) {\r\n                            return onError(makeError('fromtexteval',\r\n                                'fromText eval for ' + id +\r\n                                ' failed: ' + e,\r\n                                e,\r\n                                [id]));\r\n                        }\r\n\r\n                        if (hasInteractive) {\r\n                            useInteractive = true;\r\n                        }\r\n\r\n                        //Mark this as a dependency for the plugin\r\n                        //resource\r\n                        this.depMaps.push(moduleMap);\r\n\r\n                        //Support anonymous modules.\r\n                        context.completeLoad(moduleName);\r\n\r\n                        //Bind the value of that module to the value for this\r\n                        //resource ID.\r\n                        localRequire([moduleName], load);\r\n                    });\r\n\r\n                    //Use parentName here since the plugin's name is not reliable,\r\n                    //could be some weird string with no path that actually wants to\r\n                    //reference the parentName's path.\r\n                    plugin.load(map.name, localRequire, load, config);\r\n                }));\r\n\r\n                context.enable(pluginMap, this);\r\n                this.pluginMaps[pluginMap.id] = pluginMap;\r\n            },\r\n\r\n            enable: function () {\r\n                enabledRegistry[this.map.id] = this;\r\n                this.enabled = true;\r\n\r\n                //Set flag mentioning that the module is enabling,\r\n                //so that immediate calls to the defined callbacks\r\n                //for dependencies do not trigger inadvertent load\r\n                //with the depCount still being zero.\r\n                this.enabling = true;\r\n\r\n                //Enable each dependency\r\n                each(this.depMaps, bind(this, function (depMap, i) {\r\n                    var id, mod, handler;\r\n\r\n                    if (typeof depMap === 'string') {\r\n                        //Dependency needs to be converted to a depMap\r\n                        //and wired up to this module.\r\n                        depMap = makeModuleMap(depMap,\r\n                            (this.map.isDefine ? this.map : this.map.parentMap),\r\n                            false,\r\n                            !this.skipMap);\r\n                        this.depMaps[i] = depMap;\r\n\r\n                        handler = getOwn(handlers, depMap.id);\r\n\r\n                        if (handler) {\r\n                            this.depExports[i] = handler(this);\r\n                            return;\r\n                        }\r\n\r\n                        this.depCount += 1;\r\n\r\n                        on(depMap, 'defined', bind(this, function (depExports) {\r\n                            if (this.undefed) {\r\n                                return;\r\n                            }\r\n                            this.defineDep(i, depExports);\r\n                            this.check();\r\n                        }));\r\n\r\n                        if (this.errback) {\r\n                            on(depMap, 'error', bind(this, this.errback));\r\n                        } else if (this.events.error) {\r\n                            // No direct errback on this module, but something\r\n                            // else is listening for errors, so be sure to\r\n                            // propagate the error correctly.\r\n                            on(depMap, 'error', bind(this, function (err) {\r\n                                this.emit('error', err);\r\n                            }));\r\n                        }\r\n                    }\r\n\r\n                    id = depMap.id;\r\n                    mod = registry[id];\r\n\r\n                    //Skip special modules like 'require', 'exports', 'module'\r\n                    //Also, don't call enable if it is already enabled,\r\n                    //important in circular dependency cases.\r\n                    if (!hasProp(handlers, id) && mod && !mod.enabled) {\r\n                        context.enable(depMap, this);\r\n                    }\r\n                }));\r\n\r\n                //Enable each plugin that is used in\r\n                //a dependency\r\n                eachProp(this.pluginMaps, bind(this, function (pluginMap) {\r\n                    var mod = getOwn(registry, pluginMap.id);\r\n                    if (mod && !mod.enabled) {\r\n                        context.enable(pluginMap, this);\r\n                    }\r\n                }));\r\n\r\n                this.enabling = false;\r\n\r\n                this.check();\r\n            },\r\n\r\n            on: function (name, cb) {\r\n                var cbs = this.events[name];\r\n                if (!cbs) {\r\n                    cbs = this.events[name] = [];\r\n                }\r\n                cbs.push(cb);\r\n            },\r\n\r\n            emit: function (name, evt) {\r\n                each(this.events[name], function (cb) {\r\n                    cb(evt);\r\n                });\r\n                if (name === 'error') {\r\n                    //Now that the error handler was triggered, remove\r\n                    //the listeners, since this broken Module instance\r\n                    //can stay around for a while in the registry.\r\n                    delete this.events[name];\r\n                }\r\n            }\r\n        };\r\n\r\n        function callGetModule(args) {\r\n            //Skip modules already defined.\r\n            if (!hasProp(defined, args[0])) {\r\n                getModule(makeModuleMap(args[0], null, true)).init(args[1], args[2]);\r\n            }\r\n        }\r\n\r\n        function removeListener(node, func, name, ieName) {\r\n            //Favor detachEvent because of IE9\r\n            //issue, see attachEvent/addEventListener comment elsewhere\r\n            //in this file.\r\n            if (node.detachEvent && !isOpera) {\r\n                //Probably IE. If not it will throw an error, which will be\r\n                //useful to know.\r\n                if (ieName) {\r\n                    node.detachEvent(ieName, func);\r\n                }\r\n            } else {\r\n                node.removeEventListener(name, func, false);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Given an event from a script node, get the requirejs info from it,\r\n         * and then removes the event listeners on the node.\r\n         * @param {Event} evt\r\n         * @returns {Object}\r\n         */\r\n        function getScriptData(evt) {\r\n            //Using currentTarget instead of target for Firefox 2.0's sake. Not\r\n            //all old browsers will be supported, but this one was easy enough\r\n            //to support and still makes sense.\r\n            var node = evt.currentTarget || evt.srcElement;\r\n\r\n            //Remove the listeners once here.\r\n            removeListener(node, context.onScriptLoad, 'load', 'onreadystatechange');\r\n            removeListener(node, context.onScriptError, 'error');\r\n\r\n            return {\r\n                node: node,\r\n                id: node && node.getAttribute('data-requiremodule')\r\n            };\r\n        }\r\n\r\n        function intakeDefines() {\r\n            var args;\r\n\r\n            //Any defined modules in the global queue, intake them now.\r\n            takeGlobalQueue();\r\n\r\n            //Make sure any remaining defQueue items get properly processed.\r\n            while (defQueue.length) {\r\n                args = defQueue.shift();\r\n                if (args[0] === null) {\r\n                    return onError(makeError('mismatch', 'Mismatched anonymous define() module: ' +\r\n                        args[args.length - 1]));\r\n                } else {\r\n                    //args are id, deps, factory. Should be normalized by the\r\n                    //define() function.\r\n                    callGetModule(args);\r\n                }\r\n            }\r\n            context.defQueueMap = {};\r\n        }\r\n\r\n        context = {\r\n            config: config,\r\n            contextName: contextName,\r\n            registry: registry,\r\n            defined: defined,\r\n            urlFetched: urlFetched,\r\n            defQueue: defQueue,\r\n            defQueueMap: {},\r\n            Module: Module,\r\n            makeModuleMap: makeModuleMap,\r\n            nextTick: req.nextTick,\r\n            onError: onError,\r\n\r\n            /**\r\n             * Set a configuration for the context.\r\n             * @param {Object} cfg config object to integrate.\r\n             */\r\n            configure: function (cfg) {\r\n                //Make sure the baseUrl ends in a slash.\r\n                if (cfg.baseUrl) {\r\n                    if (cfg.baseUrl.charAt(cfg.baseUrl.length - 1) !== '/') {\r\n                        cfg.baseUrl += '/';\r\n                    }\r\n                }\r\n\r\n                // Convert old style urlArgs string to a function.\r\n                if (typeof cfg.urlArgs === 'string') {\r\n                    var urlArgs = cfg.urlArgs;\r\n                    cfg.urlArgs = function (id, url) {\r\n                        return (url.indexOf('?') === -1 ? '?' : '&') + urlArgs;\r\n                    };\r\n                }\r\n\r\n                //Save off the paths since they require special processing,\r\n                //they are additive.\r\n                var shim = config.shim,\r\n                    objs = {\r\n                        paths: true,\r\n                        bundles: true,\r\n                        config: true,\r\n                        map: true\r\n                    };\r\n\r\n                eachProp(cfg, function (value, prop) {\r\n                    if (objs[prop]) {\r\n                        if (!config[prop]) {\r\n                            config[prop] = {};\r\n                        }\r\n                        mixin(config[prop], value, true, true);\r\n                    } else {\r\n                        config[prop] = value;\r\n                    }\r\n                });\r\n\r\n                //Reverse map the bundles\r\n                if (cfg.bundles) {\r\n                    eachProp(cfg.bundles, function (value, prop) {\r\n                        each(value, function (v) {\r\n                            if (v !== prop) {\r\n                                bundlesMap[v] = prop;\r\n                            }\r\n                        });\r\n                    });\r\n                }\r\n\r\n                //Merge shim\r\n                if (cfg.shim) {\r\n                    eachProp(cfg.shim, function (value, id) {\r\n                        //Normalize the structure\r\n                        if (isArray(value)) {\r\n                            value = {\r\n                                deps: value\r\n                            };\r\n                        }\r\n                        if ((value.exports || value.init) && !value.exportsFn) {\r\n                            value.exportsFn = context.makeShimExports(value);\r\n                        }\r\n                        shim[id] = value;\r\n                    });\r\n                    config.shim = shim;\r\n                }\r\n\r\n                //Adjust packages if necessary.\r\n                if (cfg.packages) {\r\n                    each(cfg.packages, function (pkgObj) {\r\n                        var location, name;\r\n\r\n                        pkgObj = typeof pkgObj === 'string' ? { name: pkgObj } : pkgObj;\r\n\r\n                        name = pkgObj.name;\r\n                        location = pkgObj.location;\r\n                        if (location) {\r\n                            config.paths[name] = pkgObj.location;\r\n                        }\r\n\r\n                        //Save pointer to main module ID for pkg name.\r\n                        //Remove leading dot in main, so main paths are normalized,\r\n                        //and remove any trailing .js, since different package\r\n                        //envs have different conventions: some use a module name,\r\n                        //some use a file name.\r\n                        config.pkgs[name] = pkgObj.name + '/' + (pkgObj.main || 'main')\r\n                            .replace(currDirRegExp, '')\r\n                            .replace(jsSuffixRegExp, '');\r\n                    });\r\n                }\r\n\r\n                //If there are any \"waiting to execute\" modules in the registry,\r\n                //update the maps for them, since their info, like URLs to load,\r\n                //may have changed.\r\n                eachProp(registry, function (mod, id) {\r\n                    //If module already has init called, since it is too\r\n                    //late to modify them, and ignore unnormalized ones\r\n                    //since they are transient.\r\n                    if (!mod.inited && !mod.map.unnormalized) {\r\n                        mod.map = makeModuleMap(id, null, true);\r\n                    }\r\n                });\r\n\r\n                //If a deps array or a config callback is specified, then call\r\n                //require with those args. This is useful when require is defined as a\r\n                //config object before require.js is loaded.\r\n                if (cfg.deps || cfg.callback) {\r\n                    context.require(cfg.deps || [], cfg.callback);\r\n                }\r\n            },\r\n\r\n            makeShimExports: function (value) {\r\n                function fn() {\r\n                    var ret;\r\n                    if (value.init) {\r\n                        ret = value.init.apply(global, arguments);\r\n                    }\r\n                    return ret || (value.exports && getGlobal(value.exports));\r\n                }\r\n                return fn;\r\n            },\r\n\r\n            makeRequire: function (relMap, options) {\r\n                options = options || {};\r\n\r\n                function localRequire(deps, callback, errback) {\r\n                    var id, map, requireMod;\r\n\r\n                    if (options.enableBuildCallback && callback && isFunction(callback)) {\r\n                        callback.__requireJsBuild = true;\r\n                    }\r\n\r\n                    if (typeof deps === 'string') {\r\n                        if (isFunction(callback)) {\r\n                            //Invalid call\r\n                            return onError(makeError('requireargs', 'Invalid require call'), errback);\r\n                        }\r\n\r\n                        //If require|exports|module are requested, get the\r\n                        //value for them from the special handlers. Caveat:\r\n                        //this only works while module is being defined.\r\n                        if (relMap && hasProp(handlers, deps)) {\r\n                            return handlers[deps](registry[relMap.id]);\r\n                        }\r\n\r\n                        //Synchronous access to one module. If require.get is\r\n                        //available (as in the Node adapter), prefer that.\r\n                        if (req.get) {\r\n                            return req.get(context, deps, relMap, localRequire);\r\n                        }\r\n\r\n                        //Normalize module name, if it contains . or ..\r\n                        map = makeModuleMap(deps, relMap, false, true);\r\n                        id = map.id;\r\n\r\n                        if (!hasProp(defined, id)) {\r\n                            return onError(makeError('notloaded', 'Module name \"' +\r\n                                id +\r\n                                '\" has not been loaded yet for context: ' +\r\n                                contextName +\r\n                                (relMap ? '' : '. Use require([])')));\r\n                        }\r\n                        return defined[id];\r\n                    }\r\n\r\n                    //Grab defines waiting in the global queue.\r\n                    intakeDefines();\r\n\r\n                    //Mark all the dependencies as needing to be loaded.\r\n                    context.nextTick(function () {\r\n                        //Some defines could have been added since the\r\n                        //require call, collect them.\r\n                        intakeDefines();\r\n\r\n                        requireMod = getModule(makeModuleMap(null, relMap));\r\n\r\n                        //Store if map config should be applied to this require\r\n                        //call for dependencies.\r\n                        requireMod.skipMap = options.skipMap;\r\n\r\n                        requireMod.init(deps, callback, errback, {\r\n                            enabled: true\r\n                        });\r\n\r\n                        checkLoaded();\r\n                    });\r\n\r\n                    return localRequire;\r\n                }\r\n\r\n                mixin(localRequire, {\r\n                    isBrowser: isBrowser,\r\n\r\n                    /**\r\n                     * Converts a module name + .extension into an URL path.\r\n                     * *Requires* the use of a module name. It does not support using\r\n                     * plain URLs like nameToUrl.\r\n                     */\r\n                    toUrl: function (moduleNamePlusExt) {\r\n                        var ext,\r\n                            index = moduleNamePlusExt.lastIndexOf('.'),\r\n                            segment = moduleNamePlusExt.split('/')[0],\r\n                            isRelative = segment === '.' || segment === '..';\r\n\r\n                        //Have a file extension alias, and it is not the\r\n                        //dots from a relative path.\r\n                        if (index !== -1 && (!isRelative || index > 1)) {\r\n                            ext = moduleNamePlusExt.substring(index, moduleNamePlusExt.length);\r\n                            moduleNamePlusExt = moduleNamePlusExt.substring(0, index);\r\n                        }\r\n\r\n                        return context.nameToUrl(normalize(moduleNamePlusExt,\r\n                            relMap && relMap.id, true), ext, true);\r\n                    },\r\n\r\n                    defined: function (id) {\r\n                        return hasProp(defined, makeModuleMap(id, relMap, false, true).id);\r\n                    },\r\n\r\n                    specified: function (id) {\r\n                        id = makeModuleMap(id, relMap, false, true).id;\r\n                        return hasProp(defined, id) || hasProp(registry, id);\r\n                    }\r\n                });\r\n\r\n                //Only allow undef on top level require calls\r\n                if (!relMap) {\r\n                    localRequire.undef = function (id) {\r\n                        //Bind any waiting define() calls to this context,\r\n                        //fix for #408\r\n                        takeGlobalQueue();\r\n\r\n                        var map = makeModuleMap(id, relMap, true),\r\n                            mod = getOwn(registry, id);\r\n\r\n                        mod.undefed = true;\r\n                        removeScript(id);\r\n\r\n                        delete defined[id];\r\n                        delete urlFetched[map.url];\r\n                        delete undefEvents[id];\r\n\r\n                        //Clean queued defines too. Go backwards\r\n                        //in array so that the splices do not\r\n                        //mess up the iteration.\r\n                        eachReverse(defQueue, function (args, i) {\r\n                            if (args[0] === id) {\r\n                                defQueue.splice(i, 1);\r\n                            }\r\n                        });\r\n                        delete context.defQueueMap[id];\r\n\r\n                        if (mod) {\r\n                            //Hold on to listeners in case the\r\n                            //module will be attempted to be reloaded\r\n                            //using a different config.\r\n                            if (mod.events.defined) {\r\n                                undefEvents[id] = mod.events;\r\n                            }\r\n\r\n                            cleanRegistry(id);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                return localRequire;\r\n            },\r\n\r\n            /**\r\n             * Called to enable a module if it is still in the registry\r\n             * awaiting enablement. A second arg, parent, the parent module,\r\n             * is passed in for context, when this method is overridden by\r\n             * the optimizer. Not shown here to keep code compact.\r\n             */\r\n            enable: function (depMap) {\r\n                var mod = getOwn(registry, depMap.id);\r\n                if (mod) {\r\n                    getModule(depMap).enable();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Internal method used by environment adapters to complete a load event.\r\n             * A load event could be a script load or just a load pass from a synchronous\r\n             * load call.\r\n             * @param {String} moduleName the name of the module to potentially complete.\r\n             */\r\n            completeLoad: function (moduleName) {\r\n                var found, args, mod,\r\n                    shim = getOwn(config.shim, moduleName) || {},\r\n                    shExports = shim.exports;\r\n\r\n                takeGlobalQueue();\r\n\r\n                while (defQueue.length) {\r\n                    args = defQueue.shift();\r\n                    if (args[0] === null) {\r\n                        args[0] = moduleName;\r\n                        //If already found an anonymous module and bound it\r\n                        //to this name, then this is some other anon module\r\n                        //waiting for its completeLoad to fire.\r\n                        if (found) {\r\n                            break;\r\n                        }\r\n                        found = true;\r\n                    } else if (args[0] === moduleName) {\r\n                        //Found matching define call for this script!\r\n                        found = true;\r\n                    }\r\n\r\n                    callGetModule(args);\r\n                }\r\n                context.defQueueMap = {};\r\n\r\n                //Do this after the cycle of callGetModule in case the result\r\n                //of those calls/init calls changes the registry.\r\n                mod = getOwn(registry, moduleName);\r\n\r\n                if (!found && !hasProp(defined, moduleName) && mod && !mod.inited) {\r\n                    if (config.enforceDefine && (!shExports || !getGlobal(shExports))) {\r\n                        if (hasPathFallback(moduleName)) {\r\n                            return;\r\n                        } else {\r\n                            return onError(makeError('nodefine',\r\n                                'No define call for ' + moduleName,\r\n                                null,\r\n                                [moduleName]));\r\n                        }\r\n                    } else {\r\n                        //A script that does not call define(), so just simulate\r\n                        //the call for it.\r\n                        callGetModule([moduleName, (shim.deps || []), shim.exportsFn]);\r\n                    }\r\n                }\r\n\r\n                checkLoaded();\r\n            },\r\n\r\n            /**\r\n             * Converts a module name to a file path. Supports cases where\r\n             * moduleName may actually be just an URL.\r\n             * Note that it **does not** call normalize on the moduleName,\r\n             * it is assumed to have already been normalized. This is an\r\n             * internal API, not a public one. Use toUrl for the public API.\r\n             */\r\n            nameToUrl: function (moduleName, ext, skipExt) {\r\n                var paths, syms, i, parentModule, url,\r\n                    parentPath, bundleId,\r\n                    pkgMain = getOwn(config.pkgs, moduleName);\r\n\r\n                if (pkgMain) {\r\n                    moduleName = pkgMain;\r\n                }\r\n\r\n                bundleId = getOwn(bundlesMap, moduleName);\r\n\r\n                if (bundleId) {\r\n                    return context.nameToUrl(bundleId, ext, skipExt);\r\n                }\r\n\r\n                //If a colon is in the URL, it indicates a protocol is used and it is just\r\n                //an URL to a file, or if it starts with a slash, contains a query arg (i.e. ?)\r\n                //or ends with .js, then assume the user meant to use an url and not a module id.\r\n                //The slash is important for protocol-less URLs as well as full paths.\r\n                if (req.jsExtRegExp.test(moduleName)) {\r\n                    //Just a plain path, not module name lookup, so just return it.\r\n                    //Add extension if it is included. This is a bit wonky, only non-.js things pass\r\n                    //an extension, this method probably needs to be reworked.\r\n                    url = moduleName + (ext || '');\r\n                } else {\r\n                    //A module that needs to be converted to a path.\r\n                    paths = config.paths;\r\n\r\n                    syms = moduleName.split('/');\r\n                    //For each module name segment, see if there is a path\r\n                    //registered for it. Start with most specific name\r\n                    //and work up from it.\r\n                    for (i = syms.length; i > 0; i -= 1) {\r\n                        parentModule = syms.slice(0, i).join('/');\r\n\r\n                        parentPath = getOwn(paths, parentModule);\r\n                        if (parentPath) {\r\n                            //If an array, it means there are a few choices,\r\n                            //Choose the one that is desired\r\n                            if (isArray(parentPath)) {\r\n                                parentPath = parentPath[0];\r\n                            }\r\n                            syms.splice(0, i, parentPath);\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    //Join the path parts together, then figure out if baseUrl is needed.\r\n                    url = syms.join('/');\r\n                    url += (ext || (/^data\\:|^blob\\:|\\?/.test(url) || skipExt ? '' : '.js'));\r\n                    url = (url.charAt(0) === '/' || url.match(/^[\\w\\+\\.\\-]+:/) ? '' : config.baseUrl) + url;\r\n                }\r\n\r\n                return config.urlArgs && !/^blob\\:/.test(url) ?\r\n                    url + config.urlArgs(moduleName, url) : url;\r\n            },\r\n\r\n            //Delegates to req.load. Broken out as a separate function to\r\n            //allow overriding in the optimizer.\r\n            load: function (id, url) {\r\n                req.load(context, id, url);\r\n            },\r\n\r\n            /**\r\n             * Executes a module callback function. Broken out as a separate function\r\n             * solely to allow the build system to sequence the files in the built\r\n             * layer in the right sequence.\r\n             *\r\n             * @private\r\n             */\r\n            execCb: function (name, callback, args, exports) {\r\n                return callback.apply(exports, args);\r\n            },\r\n\r\n            /**\r\n             * callback for script loads, used to check status of loading.\r\n             *\r\n             * @param {Event} evt the event from the browser for the script\r\n             * that was loaded.\r\n             */\r\n            onScriptLoad: function (evt) {\r\n                //Using currentTarget instead of target for Firefox 2.0's sake. Not\r\n                //all old browsers will be supported, but this one was easy enough\r\n                //to support and still makes sense.\r\n                if (evt.type === 'load' ||\r\n                    (readyRegExp.test((evt.currentTarget || evt.srcElement).readyState))) {\r\n                    //Reset interactive script so a script node is not held onto for\r\n                    //to long.\r\n                    interactiveScript = null;\r\n\r\n                    //Pull out the name of the module and the context.\r\n                    var data = getScriptData(evt);\r\n                    context.completeLoad(data.id);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * Callback for script errors.\r\n             */\r\n            onScriptError: function (evt) {\r\n                var data = getScriptData(evt);\r\n                if (!hasPathFallback(data.id)) {\r\n                    var parents = [];\r\n                    eachProp(registry, function (value, key) {\r\n                        if (key.indexOf('_@r') !== 0) {\r\n                            each(value.depMaps, function (depMap) {\r\n                                if (depMap.id === data.id) {\r\n                                    parents.push(key);\r\n                                    return true;\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                    return onError(makeError('scripterror', 'Script error for \"' + data.id +\r\n                        (parents.length ?\r\n                            '\", needed by: ' + parents.join(', ') :\r\n                            '\"'), evt, [data.id]));\r\n                }\r\n            }\r\n        };\r\n\r\n        context.require = context.makeRequire();\r\n        return context;\r\n    }\r\n\r\n    /**\r\n     * Main entry point.\r\n     *\r\n     * If the only argument to require is a string, then the module that\r\n     * is represented by that string is fetched for the appropriate context.\r\n     *\r\n     * If the first argument is an array, then it will be treated as an array\r\n     * of dependency string names to fetch. An optional function callback can\r\n     * be specified to execute when all of those dependencies are available.\r\n     *\r\n     * Make a local req variable to help Caja compliance (it assumes things\r\n     * on a require that are not standardized), and to give a short\r\n     * name for minification/local scope use.\r\n     */\r\n    req = requirejs = function (deps, callback, errback, optional) {\r\n\r\n        //Find the right context, use default\r\n        var context, config,\r\n            contextName = defContextName;\r\n\r\n        // Determine if have config object in the call.\r\n        if (!isArray(deps) && typeof deps !== 'string') {\r\n            // deps is a config object\r\n            config = deps;\r\n            if (isArray(callback)) {\r\n                // Adjust args if there are dependencies\r\n                deps = callback;\r\n                callback = errback;\r\n                errback = optional;\r\n            } else {\r\n                deps = [];\r\n            }\r\n        }\r\n\r\n        if (config && config.context) {\r\n            contextName = config.context;\r\n        }\r\n\r\n        context = getOwn(contexts, contextName);\r\n        if (!context) {\r\n            context = contexts[contextName] = req.s.newContext(contextName);\r\n        }\r\n\r\n        if (config) {\r\n            context.configure(config);\r\n        }\r\n\r\n        return context.require(deps, callback, errback);\r\n    };\r\n\r\n    /**\r\n     * Support require.config() to make it easier to cooperate with other\r\n     * AMD loaders on globally agreed names.\r\n     */\r\n    req.config = function (config) {\r\n        return req(config);\r\n    };\r\n\r\n    /**\r\n     * Execute something after the current tick\r\n     * of the event loop. Override for other envs\r\n     * that have a better solution than setTimeout.\r\n     * @param  {Function} fn function to execute later.\r\n     */\r\n    req.nextTick = typeof setTimeout !== 'undefined' ? function (fn) {\r\n        setTimeout(fn, 4);\r\n    } : function (fn) { fn(); };\r\n\r\n    /**\r\n     * Export require as a global, but only if it does not already exist.\r\n     */\r\n    if (!require) {\r\n        require = req;\r\n    }\r\n\r\n    req.version = version;\r\n\r\n    //Used to filter out dependencies that are already paths.\r\n    req.jsExtRegExp = /^\\/|:|\\?|\\.js$/;\r\n    req.isBrowser = isBrowser;\r\n    s = req.s = {\r\n        contexts: contexts,\r\n        newContext: newContext\r\n    };\r\n\r\n    //Create default context.\r\n    req({});\r\n\r\n    //Exports some context-sensitive methods on global require.\r\n    each([\r\n        'toUrl',\r\n        'undef',\r\n        'defined',\r\n        'specified'\r\n    ], function (prop) {\r\n        //Reference from contexts instead of early binding to default context,\r\n        //so that during builds, the latest instance of the default context\r\n        //with its config gets used.\r\n        req[prop] = function () {\r\n            var ctx = contexts[defContextName];\r\n            return ctx.require[prop].apply(ctx, arguments);\r\n        };\r\n    });\r\n\r\n    if (isBrowser) {\r\n        head = s.head = document.getElementsByTagName('head')[0];\r\n        //If BASE tag is in play, using appendChild is a problem for IE6.\r\n        //When that browser dies, this can be removed. Details in this jQuery bug:\r\n        //http://dev.jquery.com/ticket/2709\r\n        baseElement = document.getElementsByTagName('base')[0];\r\n        if (baseElement) {\r\n            head = s.head = baseElement.parentNode;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Any errors that require explicitly generates will be passed to this\r\n     * function. Intercept/override it if you want custom error handling.\r\n     * @param {Error} err the error object.\r\n     */\r\n    req.onError = defaultOnError;\r\n\r\n    /**\r\n     * Creates the node for the load command. Only used in browser envs.\r\n     */\r\n    req.createNode = function (config, moduleName, url) {\r\n        var node = config.xhtml ?\r\n            document.createElementNS('http://www.w3.org/1999/xhtml', 'html:script') :\r\n            document.createElement('script');\r\n        node.type = config.scriptType || 'text/javascript';\r\n        node.charset = 'utf-8';\r\n        node.async = true;\r\n        return node;\r\n    };\r\n\r\n    /**\r\n     * Does the request to load a module for the browser case.\r\n     * Make this a separate function to allow other environments\r\n     * to override it.\r\n     *\r\n     * @param {Object} context the require context to find state.\r\n     * @param {String} moduleName the name of the module.\r\n     * @param {Object} url the URL to the module.\r\n     */\r\n    req.load = function (context, moduleName, url) {\r\n        var config = (context && context.config) || {},\r\n            node;\r\n        if (isBrowser) {\r\n            //In the browser so use a script tag\r\n            node = req.createNode(config, moduleName, url);\r\n\r\n            node.setAttribute('data-requirecontext', context.contextName);\r\n            node.setAttribute('data-requiremodule', moduleName);\r\n\r\n            //Set up load listener. Test attachEvent first because IE9 has\r\n            //a subtle issue in its addEventListener and script onload firings\r\n            //that do not match the behavior of all other browsers with\r\n            //addEventListener support, which fire the onload event for a\r\n            //script right after the script execution. See:\r\n            //https://connect.microsoft.com/IE/feedback/details/648057/script-onload-event-is-not-fired-immediately-after-script-execution\r\n            //UNFORTUNATELY Opera implements attachEvent but does not follow the script\r\n            //script execution mode.\r\n            if (node.attachEvent &&\r\n                //Check if node.attachEvent is artificially added by custom script or\r\n                //natively supported by browser\r\n                //read https://github.com/requirejs/requirejs/issues/187\r\n                //if we can NOT find [native code] then it must NOT natively supported.\r\n                //in IE8, node.attachEvent does not have toString()\r\n                //Note the test for \"[native code\" with no closing brace, see:\r\n                //https://github.com/requirejs/requirejs/issues/273\r\n                !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) &&\r\n                !isOpera) {\r\n                //Probably IE. IE (at least 6-8) do not fire\r\n                //script onload right after executing the script, so\r\n                //we cannot tie the anonymous define call to a name.\r\n                //However, IE reports the script as being in 'interactive'\r\n                //readyState at the time of the define call.\r\n                useInteractive = true;\r\n\r\n                node.attachEvent('onreadystatechange', context.onScriptLoad);\r\n                //It would be great to add an error handler here to catch\r\n                //404s in IE9+. However, onreadystatechange will fire before\r\n                //the error handler, so that does not help. If addEventListener\r\n                //is used, then IE will fire error before load, but we cannot\r\n                //use that pathway given the connect.microsoft.com issue\r\n                //mentioned above about not doing the 'script execute,\r\n                //then fire the script load event listener before execute\r\n                //next script' that other browsers do.\r\n                //Best hope: IE10 fixes the issues,\r\n                //and then destroys all installs of IE 6-9.\r\n                //node.attachEvent('onerror', context.onScriptError);\r\n            } else {\r\n                node.addEventListener('load', context.onScriptLoad, false);\r\n                node.addEventListener('error', context.onScriptError, false);\r\n            }\r\n            node.src = url;\r\n\r\n            //Calling onNodeCreated after all properties on the node have been\r\n            //set, but before it is placed in the DOM.\r\n            if (config.onNodeCreated) {\r\n                config.onNodeCreated(node, config, moduleName, url);\r\n            }\r\n\r\n            //For some cache cases in IE 6-8, the script executes before the end\r\n            //of the appendChild execution, so to tie an anonymous define\r\n            //call to the module name (which is stored on the node), hold on\r\n            //to a reference to this node, but clear after the DOM insertion.\r\n            currentlyAddingScript = node;\r\n            if (baseElement) {\r\n                head.insertBefore(node, baseElement);\r\n            } else {\r\n                head.appendChild(node);\r\n            }\r\n            currentlyAddingScript = null;\r\n\r\n            return node;\r\n        } else if (isWebWorker) {\r\n            try {\r\n                //In a web worker, use importScripts. This is not a very\r\n                //efficient use of importScripts, importScripts will block until\r\n                //its script is downloaded and evaluated. However, if web workers\r\n                //are in play, the expectation is that a build has been done so\r\n                //that only one script needs to be loaded anyway. This may need\r\n                //to be reevaluated if other use cases become common.\r\n\r\n                // Post a task to the event loop to work around a bug in WebKit\r\n                // where the worker gets garbage-collected after calling\r\n                // importScripts(): https://webkit.org/b/153317\r\n                setTimeout(function () { }, 0);\r\n                importScripts(url);\r\n\r\n                //Account for anonymous modules\r\n                context.completeLoad(moduleName);\r\n            } catch (e) {\r\n                context.onError(makeError('importscripts',\r\n                    'importScripts failed for ' +\r\n                    moduleName + ' at ' + url,\r\n                    e,\r\n                    [moduleName]));\r\n            }\r\n        }\r\n    };\r\n\r\n    function getInteractiveScript() {\r\n        if (interactiveScript && interactiveScript.readyState === 'interactive') {\r\n            return interactiveScript;\r\n        }\r\n\r\n        eachReverse(scripts(), function (script) {\r\n            if (script.readyState === 'interactive') {\r\n                return (interactiveScript = script);\r\n            }\r\n        });\r\n        return interactiveScript;\r\n    }\r\n\r\n    //Look for a data-main script attribute, which could also adjust the baseUrl.\r\n    if (isBrowser && !cfg.skipDataMain) {\r\n        //Figure out baseUrl. Get it from the script tag with require.js in it.\r\n        eachReverse(scripts(), function (script) {\r\n            //Set the 'head' where we can append children by\r\n            //using the script's parent.\r\n            if (!head) {\r\n                head = script.parentNode;\r\n            }\r\n\r\n            //Look for a data-main attribute to set main script for the page\r\n            //to load. If it is there, the path to data main becomes the\r\n            //baseUrl, if it is not already set.\r\n            dataMain = script.getAttribute('data-main');\r\n            if (dataMain) {\r\n                //Preserve dataMain in case it is a path (i.e. contains '?')\r\n                mainScript = dataMain;\r\n\r\n                //Set final baseUrl if there is not already an explicit one,\r\n                //but only do so if the data-main value is not a loader plugin\r\n                //module ID.\r\n                if (!cfg.baseUrl && mainScript.indexOf('!') === -1) {\r\n                    //Pull off the directory of data-main for use as the\r\n                    //baseUrl.\r\n                    src = mainScript.split('/');\r\n                    mainScript = src.pop();\r\n                    subPath = src.length ? src.join('/') + '/' : './';\r\n\r\n                    cfg.baseUrl = subPath;\r\n                }\r\n\r\n                //Strip off any trailing .js since mainScript is now\r\n                //like a module name.\r\n                mainScript = mainScript.replace(jsSuffixRegExp, '');\r\n\r\n                //If mainScript is still a path, fall back to dataMain\r\n                if (req.jsExtRegExp.test(mainScript)) {\r\n                    mainScript = dataMain;\r\n                }\r\n\r\n                //Put the data-main script in the files to load.\r\n                cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript];\r\n\r\n                return true;\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * The function that handles definitions of modules. Differs from\r\n     * require() in that a string for the module should be the first argument,\r\n     * and the function to execute after dependencies are loaded should\r\n     * return a value to define the module corresponding to the first argument's\r\n     * name.\r\n     */\r\n    define = function (name, deps, callback) {\r\n        var node, context;\r\n\r\n        //Allow for anonymous modules\r\n        if (typeof name !== 'string') {\r\n            //Adjust args appropriately\r\n            callback = deps;\r\n            deps = name;\r\n            name = null;\r\n        }\r\n\r\n        //This module may not have dependencies\r\n        if (!isArray(deps)) {\r\n            callback = deps;\r\n            deps = null;\r\n        }\r\n\r\n        //If no name, and callback is a function, then figure out if it a\r\n        //CommonJS thing with dependencies.\r\n        if (!deps && isFunction(callback)) {\r\n            deps = [];\r\n            //Remove comments from the callback string,\r\n            //look for require calls, and pull them into the dependencies,\r\n            //but only if there are function args.\r\n            if (callback.length) {\r\n                callback\r\n                    .toString()\r\n                    .replace(commentRegExp, commentReplace)\r\n                    .replace(cjsRequireRegExp, function (match, dep) {\r\n                        deps.push(dep);\r\n                    });\r\n\r\n                //May be a CommonJS thing even without require calls, but still\r\n                //could use exports, and module. Avoid doing exports and module\r\n                //work though if it just needs require.\r\n                //REQUIRES the function to expect the CommonJS variables in the\r\n                //order listed below.\r\n                deps = (callback.length === 1 ? ['require'] : ['require', 'exports', 'module']).concat(deps);\r\n            }\r\n        }\r\n\r\n        //If in IE 6-8 and hit an anonymous define() call, do the interactive\r\n        //work.\r\n        if (useInteractive) {\r\n            node = currentlyAddingScript || getInteractiveScript();\r\n            if (node) {\r\n                if (!name) {\r\n                    name = node.getAttribute('data-requiremodule');\r\n                }\r\n                context = contexts[node.getAttribute('data-requirecontext')];\r\n            }\r\n        }\r\n\r\n        //Always save off evaluating the def call until the script onload handler.\r\n        //This allows multiple modules to be in a file without prematurely\r\n        //tracing dependencies, and allows for anonymous module support,\r\n        //where the module name is not known until the script onload event\r\n        //occurs. If no context, use the global queue, and get it processed\r\n        //in the onscript load callback.\r\n        if (context) {\r\n            context.defQueue.push([name, deps, callback]);\r\n            context.defQueueMap[name] = true;\r\n        } else {\r\n            globalDefQueue.push([name, deps, callback]);\r\n        }\r\n    };\r\n\r\n    define.amd = {\r\n        jQuery: true\r\n    };\r\n\r\n    /**\r\n     * Executes the text. Normally just uses eval, but can be modified\r\n     * to use a better, environment-specific call. Only used for transpiling\r\n     * loader plugins, not for plain JS modules.\r\n     * @param {String} text the text to execute/evaluate.\r\n     */\r\n    req.exec = function (text) {\r\n        /*jslint evil: true */\r\n        return eval(text);\r\n    };\r\n\r\n    //Set up with config info.\r\n    req(cfg);\r\n}(this, (typeof setTimeout === 'undefined' ? undefined : setTimeout)));\ndefine(\"vendor/require\", function(){});\n\n",
    "/*!\r\n * Knockout JavaScript library v3.5.1\r\n * (c) The Knockout.js team - http://knockoutjs.com/\r\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\r\n */\r\n\r\n(function() {(function(n){var A=this||(0,eval)(\"this\"),w=A.document,R=A.navigator,v=A.jQuery,H=A.JSON;v||\"undefined\"===typeof jQuery||(v=jQuery);(function(n){\"function\"===typeof define&&define.amd?define('knockout',[\"exports\",\"require\"],n):\"object\"===typeof exports&&\"object\"===typeof module?n(module.exports||exports):n(A.ko={})})(function(S,T){function K(a,c){return null===a||typeof a in W?a===c:!1}function X(b,c){var d;return function(){d||(d=a.a.setTimeout(function(){d=n;b()},c))}}function Y(b,c){var d;return function(){clearTimeout(d);\r\nd=a.a.setTimeout(b,c)}}function Z(a,c){c&&\"change\"!==c?\"beforeChange\"===c?this.pc(a):this.gb(a,c):this.qc(a)}function aa(a,c){null!==c&&c.s&&c.s()}function ba(a,c){var d=this.qd,e=d[r];e.ra||(this.Qb&&this.mb[c]?(d.uc(c,a,this.mb[c]),this.mb[c]=null,--this.Qb):e.I[c]||d.uc(c,a,e.J?{da:a}:d.$c(a)),a.Ja&&a.gd())}var a=\"undefined\"!==typeof S?S:{};a.b=function(b,c){for(var d=b.split(\".\"),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c};a.L=function(a,c,d){a[c]=d};a.version=\"3.5.1\";a.b(\"version\",\r\na.version);a.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1};a.a=function(){function b(a,b){for(var c in a)f.call(a,c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)f.call(b,c)&&(a[c]=b[c]);return a}function d(a,b){a.__proto__=b;return a}function e(b,c,d,e){var l=b[c].match(q)||[];a.a.D(d.match(q),function(b){a.a.Na(l,b,e)});b[c]=l.join(\" \")}var f=Object.prototype.hasOwnProperty,g={__proto__:[]}instanceof Array,h=\"function\"===typeof Symbol,m={},k={};m[R&&/Firefox\\/2/i.test(R.userAgent)?\r\n\"KeyboardEvent\":\"UIEvents\"]=[\"keyup\",\"keydown\",\"keypress\"];m.MouseEvents=\"click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\".split(\" \");b(m,function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)k[b[c]]=a});var l={propertychange:!0},p=w&&function(){for(var a=3,b=w.createElement(\"div\"),c=b.getElementsByTagName(\"i\");b.innerHTML=\"\\x3c!--[if gt IE \"+ ++a+\"]><i></i><![endif]--\\x3e\",c[0];);return 4<a?a:n}(),q=/\\S+/g,t;return{Jc:[\"authenticity_token\",/^__RequestVerificationToken(_.*)?$/],\r\nD:function(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a)},A:\"function\"==typeof Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Lb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return a[d];return n},Pa:function(b,c){var d=a.a.A(b,c);0<d?b.splice(d,1):0===d&&b.shift()},wc:function(b){var c=[];b&&a.a.D(b,function(b){0>a.a.A(c,b)&&c.push(b)});return c},Mb:function(a,\r\nb,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)d.push(b.call(c,a[e],e));return d},jb:function(a,b,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)b.call(c,a[e],e)&&d.push(a[e]);return d},Nb:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},Na:function(b,c,d){var e=a.a.A(a.a.bc(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},Ba:g,extend:c,setPrototypeOf:d,Ab:g?d:c,P:b,Ga:function(a,b,c){if(!a)return a;var d={},e;for(e in a)f.call(a,e)&&(d[e]=\r\nb.call(c,a[e],e,a));return d},Tb:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Yb:function(b){b=a.a.la(b);for(var c=(b[0]&&b[0].ownerDocument||w).createElement(\"div\"),d=0,e=b.length;d<e;d++)c.appendChild(a.oa(b[d]));return c},Ca:function(b,c){for(var d=0,e=b.length,l=[];d<e;d++){var k=b[d].cloneNode(!0);l.push(c?a.oa(k):k)}return l},va:function(b,c){a.a.Tb(b);if(c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},Xc:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],\r\nl=e.parentNode,k=0,f=c.length;k<f;k++)l.insertBefore(c[k],e);k=0;for(f=d.length;k<f;k++)a.removeNode(d[k])}},Ua:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);for(;1<a.length&&a[a.length-1].parentNode!==b;)a.length--;if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)a.push(c),c=c.nextSibling;a.push(d)}}return a},Zc:function(a,b){7>p?a.setAttribute(\"selected\",b):a.selected=b},Db:function(a){return null===a||a===n?\"\":a.trim?\r\na.trim():a.toString().replace(/^[\\s\\xa0]+|[\\s\\xa0]+$/g,\"\")},Ud:function(a,b){a=a||\"\";return b.length>a.length?!1:a.substring(0,b.length)===b},vd:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(1!==a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a&&a!=b;)a=a.parentNode;return!!a},Sb:function(b){return a.a.vd(b,b.ownerDocument.documentElement)},kd:function(b){return!!a.a.Lb(b,a.a.Sb)},R:function(a){return a&&\r\na.tagName&&a.tagName.toLowerCase()},Ac:function(b){return a.onError?function(){try{return b.apply(this,arguments)}catch(c){throw a.onError&&a.onError(c),c;}}:b},setTimeout:function(b,c){return setTimeout(a.a.Ac(b),c)},Gc:function(b){setTimeout(function(){a.onError&&a.onError(b);throw b;},0)},B:function(b,c,d){var e=a.a.Ac(d);d=l[c];if(a.options.useOnlyNativeEvents||d||!v)if(d||\"function\"!=typeof b.addEventListener)if(\"undefined\"!=typeof b.attachEvent){var k=function(a){e.call(b,a)},f=\"on\"+c;b.attachEvent(f,\r\nk);a.a.K.za(b,function(){b.detachEvent(f,k)})}else throw Error(\"Browser doesn't support addEventListener or attachEvent\");else b.addEventListener(c,e,!1);else t||(t=\"function\"==typeof v(b).on?\"on\":\"bind\"),v(b)[t](c,e)},Fb:function(b,c){if(!b||!b.nodeType)throw Error(\"element must be a DOM node when calling triggerEvent\");var d;\"input\"===a.a.R(b)&&b.type&&\"click\"==c.toLowerCase()?(d=b.type,d=\"checkbox\"==d||\"radio\"==d):d=!1;if(a.options.useOnlyNativeEvents||!v||d)if(\"function\"==typeof w.createEvent)if(\"function\"==\r\ntypeof b.dispatchEvent)d=w.createEvent(k[c]||\"HTMLEvents\"),d.initEvent(c,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d);else throw Error(\"The supplied element doesn't support dispatchEvent\");else if(d&&b.click)b.click();else if(\"undefined\"!=typeof b.fireEvent)b.fireEvent(\"on\"+c);else throw Error(\"Browser doesn't support triggering events\");else v(b).trigger(c)},f:function(b){return a.O(b)?b():b},bc:function(b){return a.O(b)?b.v():b},Eb:function(b,c,d){var l;c&&(\"object\"===typeof b.classList?\r\n(l=b.classList[d?\"add\":\"remove\"],a.a.D(c.match(q),function(a){l.call(b.classList,a)})):\"string\"===typeof b.className.baseVal?e(b.className,\"baseVal\",c,d):e(b,\"className\",c,d))},Bb:function(b,c){var d=a.a.f(c);if(null===d||d===n)d=\"\";var e=a.h.firstChild(b);!e||3!=e.nodeType||a.h.nextSibling(e)?a.h.va(b,[b.ownerDocument.createTextNode(d)]):e.data=d;a.a.Ad(b)},Yc:function(a,b){a.name=b;if(7>=p)try{var c=a.name.replace(/[&<>'\"]/g,function(a){return\"&#\"+a.charCodeAt(0)+\";\"});a.mergeAttributes(w.createElement(\"<input name='\"+\r\nc+\"'/>\"),!1)}catch(d){}},Ad:function(a){9<=p&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},wd:function(a){if(p){var b=a.style.width;a.style.width=0;a.style.width=b}},Pd:function(b,c){b=a.a.f(b);c=a.a.f(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},la:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Da:function(a){return h?Symbol(a):a},Zd:6===p,$d:7===p,W:p,Lc:function(b,c){for(var d=a.a.la(b.getElementsByTagName(\"input\")).concat(a.a.la(b.getElementsByTagName(\"textarea\"))),\r\ne=\"string\"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},l=[],k=d.length-1;0<=k;k--)e(d[k])&&l.push(d[k]);return l},Nd:function(b){return\"string\"==typeof b&&(b=a.a.Db(b))?H&&H.parse?H.parse(b):(new Function(\"return \"+b))():null},hc:function(b,c,d){if(!H||!H.stringify)throw Error(\"Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js\");\r\nreturn H.stringify(a.a.f(b),c,d)},Od:function(c,d,e){e=e||{};var l=e.params||{},k=e.includeFields||this.Jc,f=c;if(\"object\"==typeof c&&\"form\"===a.a.R(c))for(var f=c.action,h=k.length-1;0<=h;h--)for(var g=a.a.Lc(c,k[h]),m=g.length-1;0<=m;m--)l[g[m].name]=g[m].value;d=a.a.f(d);var p=w.createElement(\"form\");p.style.display=\"none\";p.action=f;p.method=\"post\";for(var q in d)c=w.createElement(\"input\"),c.type=\"hidden\",c.name=q,c.value=a.a.hc(a.a.f(d[q])),p.appendChild(c);b(l,function(a,b){var c=w.createElement(\"input\");\r\nc.type=\"hidden\";c.name=a;c.value=b;p.appendChild(c)});w.body.appendChild(p);e.submitter?e.submitter(p):p.submit();setTimeout(function(){p.parentNode.removeChild(p)},0)}}}();a.b(\"utils\",a.a);a.b(\"utils.arrayForEach\",a.a.D);a.b(\"utils.arrayFirst\",a.a.Lb);a.b(\"utils.arrayFilter\",a.a.jb);a.b(\"utils.arrayGetDistinctValues\",a.a.wc);a.b(\"utils.arrayIndexOf\",a.a.A);a.b(\"utils.arrayMap\",a.a.Mb);a.b(\"utils.arrayPushAll\",a.a.Nb);a.b(\"utils.arrayRemoveItem\",a.a.Pa);a.b(\"utils.cloneNodes\",a.a.Ca);a.b(\"utils.createSymbolOrString\",\r\na.a.Da);a.b(\"utils.extend\",a.a.extend);a.b(\"utils.fieldsIncludedWithJsonPost\",a.a.Jc);a.b(\"utils.getFormFields\",a.a.Lc);a.b(\"utils.objectMap\",a.a.Ga);a.b(\"utils.peekObservable\",a.a.bc);a.b(\"utils.postJson\",a.a.Od);a.b(\"utils.parseJson\",a.a.Nd);a.b(\"utils.registerEventHandler\",a.a.B);a.b(\"utils.stringifyJson\",a.a.hc);a.b(\"utils.range\",a.a.Pd);a.b(\"utils.toggleDomNodeCssClass\",a.a.Eb);a.b(\"utils.triggerEvent\",a.a.Fb);a.b(\"utils.unwrapObservable\",a.a.f);a.b(\"utils.objectForEach\",a.a.P);a.b(\"utils.addOrRemoveItem\",\r\na.a.Na);a.b(\"utils.setTextContent\",a.a.Bb);a.b(\"unwrap\",a.a.f);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this;if(1===arguments.length)return function(){return c.apply(a,arguments)};var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice(0);e.push.apply(e,arguments);return c.apply(a,e)}});a.a.g=new function(){var b=0,c=\"__ko__\"+(new Date).getTime(),d={},e,f;a.a.W?(e=function(a,e){var f=a[c];if(!f||\"null\"===f||!d[f]){if(!e)return n;f=a[c]=\"ko\"+b++;d[f]=\r\n{}}return d[f]},f=function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}):(e=function(a,b){var d=a[c];!d&&b&&(d=a[c]={});return d},f=function(a){return a[c]?(delete a[c],!0):!1});return{get:function(a,b){var c=e(a,!1);return c&&c[b]},set:function(a,b,c){(a=e(a,c!==n))&&(a[b]=c)},Ub:function(a,b,c){a=e(a,!0);return a[b]||(a[b]=c)},clear:f,Z:function(){return b++ +c}}};a.b(\"utils.domData\",a.a.g);a.b(\"utils.domData.clear\",a.a.g.clear);a.a.K=new function(){function b(b,c){var d=a.a.g.get(b,e);\r\nd===n&&c&&(d=[],a.a.g.set(b,e,d));return d}function c(c){var e=b(c,!1);if(e)for(var e=e.slice(0),k=0;k<e.length;k++)e[k](c);a.a.g.clear(c);a.a.K.cleanExternalData(c);g[c.nodeType]&&d(c.childNodes,!0)}function d(b,d){for(var e=[],l,f=0;f<b.length;f++)if(!d||8===b[f].nodeType)if(c(e[e.length]=l=b[f]),b[f]!==l)for(;f--&&-1==a.a.A(e,b[f]););}var e=a.a.g.Z(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{za:function(a,c){if(\"function\"!=typeof c)throw Error(\"Callback must be a function\");b(a,!0).push(c)},yb:function(c,\r\nd){var f=b(c,!1);f&&(a.a.Pa(f,d),0==f.length&&a.a.g.set(c,e,n))},oa:function(b){a.u.G(function(){f[b.nodeType]&&(c(b),g[b.nodeType]&&d(b.getElementsByTagName(\"*\")))});return b},removeNode:function(b){a.oa(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){v&&\"function\"==typeof v.cleanData&&v.cleanData([a])}}};a.oa=a.a.K.oa;a.removeNode=a.a.K.removeNode;a.b(\"cleanNode\",a.oa);a.b(\"removeNode\",a.removeNode);a.b(\"utils.domNodeDisposal\",a.a.K);a.b(\"utils.domNodeDisposal.addDisposeCallback\",\r\na.a.K.za);a.b(\"utils.domNodeDisposal.removeDisposeCallback\",a.a.K.yb);(function(){var b=[0,\"\",\"\"],c=[1,\"<table>\",\"</table>\"],d=[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],e=[1,\"<select multiple='multiple'>\",\"</select>\"],f={thead:c,tbody:c,tfoot:c,tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:d,th:d,option:e,optgroup:e},g=8>=a.a.W;a.a.ua=function(c,d){var e;if(v)if(v.parseHTML)e=v.parseHTML(c,d)||[];else{if((e=v.clean([c],d))&&e[0]){for(var l=e[0];l.parentNode&&11!==l.parentNode.nodeType;)l=l.parentNode;\r\nl.parentNode&&l.parentNode.removeChild(l)}}else{(e=d)||(e=w);var l=e.parentWindow||e.defaultView||A,p=a.a.Db(c).toLowerCase(),q=e.createElement(\"div\"),t;t=(p=p.match(/^(?:\\x3c!--.*?--\\x3e\\s*?)*?<([a-z]+)[\\s>]/))&&f[p[1]]||b;p=t[0];t=\"ignored<div>\"+t[1]+c+t[2]+\"</div>\";\"function\"==typeof l.innerShiv?q.appendChild(l.innerShiv(t)):(g&&e.body.appendChild(q),q.innerHTML=t,g&&q.parentNode.removeChild(q));for(;p--;)q=q.lastChild;e=a.a.la(q.lastChild.childNodes)}return e};a.a.Md=function(b,c){var d=a.a.ua(b,\r\nc);return d.length&&d[0].parentElement||a.a.Yb(d)};a.a.fc=function(b,c){a.a.Tb(b);c=a.a.f(c);if(null!==c&&c!==n)if(\"string\"!=typeof c&&(c=c.toString()),v)v(b).html(c);else for(var d=a.a.ua(c,b.ownerDocument),e=0;e<d.length;e++)b.appendChild(d[e])}})();a.b(\"utils.parseHtmlFragment\",a.a.ua);a.b(\"utils.setHtml\",a.a.fc);a.aa=function(){function b(c,e){if(c)if(8==c.nodeType){var f=a.aa.Uc(c.nodeValue);null!=f&&e.push({ud:c,Kd:f})}else if(1==c.nodeType)for(var f=0,g=c.childNodes,h=g.length;f<h;f++)b(g[f],\r\ne)}var c={};return{Xb:function(a){if(\"function\"!=typeof a)throw Error(\"You can only pass a function to ko.memoization.memoize()\");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return\"\\x3c!--[ko_memo:\"+b+\"]--\\x3e\"},bd:function(a,b){var f=c[a];if(f===n)throw Error(\"Couldn't find any memo with ID \"+a+\". Perhaps it's already been unmemoized.\");try{return f.apply(null,b||[]),!0}finally{delete c[a]}},cd:function(c,e){var f=\r\n[];b(c,f);for(var g=0,h=f.length;g<h;g++){var m=f[g].ud,k=[m];e&&a.a.Nb(k,e);a.aa.bd(f[g].Kd,k);m.nodeValue=\"\";m.parentNode&&m.parentNode.removeChild(m)}},Uc:function(a){return(a=a.match(/^\\[ko_memo\\:(.*?)\\]$/))?a[1]:null}}}();a.b(\"memoization\",a.aa);a.b(\"memoization.memoize\",a.aa.Xb);a.b(\"memoization.unmemoize\",a.aa.bd);a.b(\"memoization.parseMemoText\",a.aa.Uc);a.b(\"memoization.unmemoizeDomNodeAndDescendants\",a.aa.cd);a.na=function(){function b(){if(f)for(var b=f,c=0,d;h<f;)if(d=e[h++]){if(h>b){if(5E3<=\r\n++c){h=f;a.a.Gc(Error(\"'Too much recursion' after processing \"+c+\" task groups.\"));break}b=f}try{d()}catch(p){a.a.Gc(p)}}}function c(){b();h=f=e.length=0}var d,e=[],f=0,g=1,h=0;A.MutationObserver?d=function(a){var b=w.createElement(\"div\");(new MutationObserver(a)).observe(b,{attributes:!0});return function(){b.classList.toggle(\"foo\")}}(c):d=w&&\"onreadystatechange\"in w.createElement(\"script\")?function(a){var b=w.createElement(\"script\");b.onreadystatechange=function(){b.onreadystatechange=null;w.documentElement.removeChild(b);\r\nb=null;a()};w.documentElement.appendChild(b)}:function(a){setTimeout(a,0)};return{scheduler:d,zb:function(b){f||a.na.scheduler(c);e[f++]=b;return g++},cancel:function(a){a=a-(g-f);a>=h&&a<f&&(e[a]=null)},resetForTesting:function(){var a=f-h;h=f=e.length=0;return a},Sd:b}}();a.b(\"tasks\",a.na);a.b(\"tasks.schedule\",a.na.zb);a.b(\"tasks.runEarly\",a.na.Sd);a.Ta={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.$({read:b,write:function(e){clearTimeout(d);d=a.a.setTimeout(function(){b(e)},\r\nc)}})},rateLimit:function(a,c){var d,e,f;\"number\"==typeof c?d=c:(d=c.timeout,e=c.method);a.Hb=!1;f=\"function\"==typeof e?e:\"notifyWhenChangesStop\"==e?Y:X;a.ub(function(a){return f(a,d,c)})},deferred:function(b,c){if(!0!==c)throw Error(\"The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.\");b.Hb||(b.Hb=!0,b.ub(function(c){var e,f=!1;return function(){if(!f){a.na.cancel(e);e=a.na.zb(c);try{f=!0,b.notifySubscribers(n,\"dirty\")}finally{f=\r\n!1}}}}))},notify:function(a,c){a.equalityComparer=\"always\"==c?null:K}};var W={undefined:1,\"boolean\":1,number:1,string:1};a.b(\"extenders\",a.Ta);a.ic=function(b,c,d){this.da=b;this.lc=c;this.mc=d;this.Ib=!1;this.fb=this.Jb=null;a.L(this,\"dispose\",this.s);a.L(this,\"disposeWhenNodeIsRemoved\",this.l)};a.ic.prototype.s=function(){this.Ib||(this.fb&&a.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)};a.ic.prototype.l=function(b){this.Jb=b;a.a.K.za(b,this.fb=this.s.bind(this))};\r\na.T=function(){a.a.Ab(this,D);D.qb(this)};var D={qb:function(a){a.U={change:[]};a.sc=1},subscribe:function(b,c,d){var e=this;d=d||\"change\";var f=new a.ic(e,c?b.bind(c):b,function(){a.a.Pa(e.U[d],f);e.hb&&e.hb(d)});e.Qa&&e.Qa(d);e.U[d]||(e.U[d]=[]);e.U[d].push(f);return f},notifySubscribers:function(b,c){c=c||\"change\";\"change\"===c&&this.Gb();if(this.Wa(c)){var d=\"change\"===c&&this.ed||this.U[c].slice(0);try{a.u.xc();for(var e=0,f;f=d[e];++e)f.Ib||f.lc(b)}finally{a.u.end()}}},ob:function(){return this.sc},\r\nDd:function(a){return this.ob()!==a},Gb:function(){++this.sc},ub:function(b){var c=this,d=a.O(c),e,f,g,h,m;c.gb||(c.gb=c.notifySubscribers,c.notifySubscribers=Z);var k=b(function(){c.Ja=!1;d&&h===c&&(h=c.nc?c.nc():c());var a=f||m&&c.sb(g,h);m=f=e=!1;a&&c.gb(g=h)});c.qc=function(a,b){b&&c.Ja||(m=!b);c.ed=c.U.change.slice(0);c.Ja=e=!0;h=a;k()};c.pc=function(a){e||(g=a,c.gb(a,\"beforeChange\"))};c.rc=function(){m=!0};c.gd=function(){c.sb(g,c.v(!0))&&(f=!0)}},Wa:function(a){return this.U[a]&&this.U[a].length},\r\nBd:function(b){if(b)return this.U[b]&&this.U[b].length||0;var c=0;a.a.P(this.U,function(a,b){\"dirty\"!==a&&(c+=b.length)});return c},sb:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},toString:function(){return\"[object Object]\"},extend:function(b){var c=this;b&&a.a.P(b,function(b,e){var f=a.Ta[b];\"function\"==typeof f&&(c=f(c,e)||c)});return c}};a.L(D,\"init\",D.qb);a.L(D,\"subscribe\",D.subscribe);a.L(D,\"extend\",D.extend);a.L(D,\"getSubscriptionsCount\",D.Bd);a.a.Ba&&a.a.setPrototypeOf(D,\r\nFunction.prototype);a.T.fn=D;a.Qc=function(a){return null!=a&&\"function\"==typeof a.subscribe&&\"function\"==typeof a.notifySubscribers};a.b(\"subscribable\",a.T);a.b(\"isSubscribable\",a.Qc);a.S=a.u=function(){function b(a){d.push(e);e=a}function c(){e=d.pop()}var d=[],e,f=0;return{xc:b,end:c,cc:function(b){if(e){if(!a.Qc(b))throw Error(\"Only subscribable things can act as dependencies\");e.od.call(e.pd,b,b.fd||(b.fd=++f))}},G:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},qa:function(){if(e)return e.o.qa()},\r\nVa:function(){if(e)return e.o.Va()},Ya:function(){if(e)return e.Ya},o:function(){if(e)return e.o}}}();a.b(\"computedContext\",a.S);a.b(\"computedContext.getDependenciesCount\",a.S.qa);a.b(\"computedContext.getDependencies\",a.S.Va);a.b(\"computedContext.isInitial\",a.S.Ya);a.b(\"computedContext.registerDependency\",a.S.cc);a.b(\"ignoreDependencies\",a.Yd=a.u.G);var I=a.a.Da(\"_latestValue\");a.ta=function(b){function c(){if(0<arguments.length)return c.sb(c[I],arguments[0])&&(c.ya(),c[I]=arguments[0],c.xa()),this;\r\na.u.cc(c);return c[I]}c[I]=b;a.a.Ba||a.a.extend(c,a.T.fn);a.T.fn.qb(c);a.a.Ab(c,F);a.options.deferUpdates&&a.Ta.deferred(c,!0);return c};var F={equalityComparer:K,v:function(){return this[I]},xa:function(){this.notifySubscribers(this[I],\"spectate\");this.notifySubscribers(this[I])},ya:function(){this.notifySubscribers(this[I],\"beforeChange\")}};a.a.Ba&&a.a.setPrototypeOf(F,a.T.fn);var G=a.ta.Ma=\"__ko_proto__\";F[G]=a.ta;a.O=function(b){if((b=\"function\"==typeof b&&b[G])&&b!==F[G]&&b!==a.o.fn[G])throw Error(\"Invalid object that looks like an observable; possibly from another Knockout instance\");\r\nreturn!!b};a.Za=function(b){return\"function\"==typeof b&&(b[G]===F[G]||b[G]===a.o.fn[G]&&b.Nc)};a.b(\"observable\",a.ta);a.b(\"isObservable\",a.O);a.b(\"isWriteableObservable\",a.Za);a.b(\"isWritableObservable\",a.Za);a.b(\"observable.fn\",F);a.L(F,\"peek\",F.v);a.L(F,\"valueHasMutated\",F.xa);a.L(F,\"valueWillMutate\",F.ya);a.Ha=function(b){b=b||[];if(\"object\"!=typeof b||!(\"length\"in b))throw Error(\"The argument passed when initializing an observable array must be an array, or null, or undefined.\");b=a.ta(b);a.a.Ab(b,\r\na.Ha.fn);return b.extend({trackArrayChanges:!0})};a.Ha.fn={remove:function(b){for(var c=this.v(),d=[],e=\"function\"!=typeof b||a.O(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var g=c[f];if(e(g)){0===d.length&&this.ya();if(c[f]!==g)throw Error(\"Array modified during remove; cannot remove item\");d.push(g);c.splice(f,1);f--}}d.length&&this.xa();return d},removeAll:function(b){if(b===n){var c=this.v(),d=c.slice(0);this.ya();c.splice(0,c.length);this.xa();return d}return b?this.remove(function(c){return 0<=\r\na.a.A(b,c)}):[]},destroy:function(b){var c=this.v(),d=\"function\"!=typeof b||a.O(b)?function(a){return a===b}:b;this.ya();for(var e=c.length-1;0<=e;e--){var f=c[e];d(f)&&(f._destroy=!0)}this.xa()},destroyAll:function(b){return b===n?this.destroy(function(){return!0}):b?this.destroy(function(c){return 0<=a.a.A(b,c)}):[]},indexOf:function(b){var c=this();return a.a.A(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.ya(),this.v()[d]=c,this.xa())},sorted:function(a){var c=this().slice(0);\r\nreturn a?c.sort(a):c.sort()},reversed:function(){return this().slice(0).reverse()}};a.a.Ba&&a.a.setPrototypeOf(a.Ha.fn,a.ta.fn);a.a.D(\"pop push reverse shift sort splice unshift\".split(\" \"),function(b){a.Ha.fn[b]=function(){var a=this.v();this.ya();this.zc(a,b,arguments);var d=a[b].apply(a,arguments);this.xa();return d===a?this:d}});a.a.D([\"slice\"],function(b){a.Ha.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.Pc=function(b){return a.O(b)&&\"function\"==typeof b.remove&&\"function\"==\r\ntypeof b.push};a.b(\"observableArray\",a.Ha);a.b(\"isObservableArray\",a.Pc);a.Ta.trackArrayChanges=function(b,c){function d(){function c(){if(m){var d=[].concat(b.v()||[]),e;if(b.Wa(\"arrayChange\")){if(!f||1<m)f=a.a.Pb(k,d,b.Ob);e=f}k=d;f=null;m=0;e&&e.length&&b.notifySubscribers(e,\"arrayChange\")}}e?c():(e=!0,h=b.subscribe(function(){++m},null,\"spectate\"),k=[].concat(b.v()||[]),f=null,g=b.subscribe(c))}b.Ob={};c&&\"object\"==typeof c&&a.a.extend(b.Ob,c);b.Ob.sparse=!0;if(!b.zc){var e=!1,f=null,g,h,m=0,\r\nk,l=b.Qa,p=b.hb;b.Qa=function(a){l&&l.call(b,a);\"arrayChange\"===a&&d()};b.hb=function(a){p&&p.call(b,a);\"arrayChange\"!==a||b.Wa(\"arrayChange\")||(g&&g.s(),h&&h.s(),h=g=null,e=!1,k=n)};b.zc=function(b,c,d){function l(a,b,c){return k[k.length]={status:a,value:b,index:c}}if(e&&!m){var k=[],p=b.length,g=d.length,h=0;switch(c){case \"push\":h=p;case \"unshift\":for(c=0;c<g;c++)l(\"added\",d[c],h+c);break;case \"pop\":h=p-1;case \"shift\":p&&l(\"deleted\",b[h],h);break;case \"splice\":c=Math.min(Math.max(0,0>d[0]?p+d[0]:\r\nd[0]),p);for(var p=1===g?p:Math.min(c+(d[1]||0),p),g=c+g-2,h=Math.max(p,g),U=[],L=[],n=2;c<h;++c,++n)c<p&&L.push(l(\"deleted\",b[c],c)),c<g&&U.push(l(\"added\",d[n],c));a.a.Kc(L,U);break;default:return}f=k}}}};var r=a.a.Da(\"_state\");a.o=a.$=function(b,c,d){function e(){if(0<arguments.length){if(\"function\"===typeof f)f.apply(g.nb,arguments);else throw Error(\"Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.\");return this}g.ra||\r\na.u.cc(e);(g.ka||g.J&&e.Xa())&&e.ha();return g.X}\"object\"===typeof b?d=b:(d=d||{},b&&(d.read=b));if(\"function\"!=typeof d.read)throw Error(\"Pass a function that returns the value of the ko.computed\");var f=d.write,g={X:n,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:d.read,nb:c||d.owner,l:d.disposeWhenNodeIsRemoved||d.l||null,Sa:d.disposeWhen||d.Sa,Rb:null,I:{},V:0,Ic:null};e[r]=g;e.Nc=\"function\"===typeof f;a.a.Ba||a.a.extend(e,a.T.fn);a.T.fn.qb(e);a.a.Ab(e,C);d.pure?(g.wb=!0,g.J=!0,a.a.extend(e,da)):\r\nd.deferEvaluation&&a.a.extend(e,ea);a.options.deferUpdates&&a.Ta.deferred(e,!0);g.l&&(g.jc=!0,g.l.nodeType||(g.l=null));g.J||d.deferEvaluation||e.ha();g.l&&e.ja()&&a.a.K.za(g.l,g.Rb=function(){e.s()});return e};var C={equalityComparer:K,qa:function(){return this[r].V},Va:function(){var b=[];a.a.P(this[r].I,function(a,d){b[d.Ka]=d.da});return b},Vb:function(b){if(!this[r].V)return!1;var c=this.Va();return-1!==a.a.A(c,b)?!0:!!a.a.Lb(c,function(a){return a.Vb&&a.Vb(b)})},uc:function(a,c,d){if(this[r].wb&&\r\nc===this)throw Error(\"A 'pure' computed must not be called recursively\");this[r].I[a]=d;d.Ka=this[r].V++;d.La=c.ob()},Xa:function(){var a,c,d=this[r].I;for(a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&(c=d[a],this.Ia&&c.da.Ja||c.da.Dd(c.La)))return!0},Jd:function(){this.Ia&&!this[r].rb&&this.Ia(!1)},ja:function(){var a=this[r];return a.ka||0<a.V},Rd:function(){this.Ja?this[r].ka&&(this[r].sa=!0):this.Hc()},$c:function(a){if(a.Hb){var c=a.subscribe(this.Jd,this,\"dirty\"),d=a.subscribe(this.Rd,\r\nthis);return{da:a,s:function(){c.s();d.s()}}}return a.subscribe(this.Hc,this)},Hc:function(){var b=this,c=b.throttleEvaluation;c&&0<=c?(clearTimeout(this[r].Ic),this[r].Ic=a.a.setTimeout(function(){b.ha(!0)},c)):b.Ia?b.Ia(!0):b.ha(!0)},ha:function(b){var c=this[r],d=c.Sa,e=!1;if(!c.rb&&!c.ra){if(c.l&&!a.a.Sb(c.l)||d&&d()){if(!c.jc){this.s();return}}else c.jc=!1;c.rb=!0;try{e=this.zd(b)}finally{c.rb=!1}return e}},zd:function(b){var c=this[r],d=!1,e=c.wb?n:!c.V,d={qd:this,mb:c.I,Qb:c.V};a.u.xc({pd:d,\r\nod:ba,o:this,Ya:e});c.I={};c.V=0;var f=this.yd(c,d);c.V?d=this.sb(c.X,f):(this.s(),d=!0);d&&(c.J?this.Gb():this.notifySubscribers(c.X,\"beforeChange\"),c.X=f,this.notifySubscribers(c.X,\"spectate\"),!c.J&&b&&this.notifySubscribers(c.X),this.rc&&this.rc());e&&this.notifySubscribers(c.X,\"awake\");return d},yd:function(b,c){try{var d=b.Wc;return b.nb?d.call(b.nb):d()}finally{a.u.end(),c.Qb&&!b.J&&a.a.P(c.mb,aa),b.sa=b.ka=!1}},v:function(a){var c=this[r];(c.ka&&(a||!c.V)||c.J&&this.Xa())&&this.ha();return c.X},\r\nub:function(b){a.T.fn.ub.call(this,b);this.nc=function(){this[r].J||(this[r].sa?this.ha():this[r].ka=!1);return this[r].X};this.Ia=function(a){this.pc(this[r].X);this[r].ka=!0;a&&(this[r].sa=!0);this.qc(this,!a)}},s:function(){var b=this[r];!b.J&&b.I&&a.a.P(b.I,function(a,b){b.s&&b.s()});b.l&&b.Rb&&a.a.K.yb(b.l,b.Rb);b.I=n;b.V=0;b.ra=!0;b.sa=!1;b.ka=!1;b.J=!1;b.l=n;b.Sa=n;b.Wc=n;this.Nc||(b.nb=n)}},da={Qa:function(b){var c=this,d=c[r];if(!d.ra&&d.J&&\"change\"==b){d.J=!1;if(d.sa||c.Xa())d.I=null,d.V=\r\n0,c.ha()&&c.Gb();else{var e=[];a.a.P(d.I,function(a,b){e[b.Ka]=a});a.a.D(e,function(a,b){var e=d.I[a],m=c.$c(e.da);m.Ka=b;m.La=e.La;d.I[a]=m});c.Xa()&&c.ha()&&c.Gb()}d.ra||c.notifySubscribers(d.X,\"awake\")}},hb:function(b){var c=this[r];c.ra||\"change\"!=b||this.Wa(\"change\")||(a.a.P(c.I,function(a,b){b.s&&(c.I[a]={da:b.da,Ka:b.Ka,La:b.La},b.s())}),c.J=!0,this.notifySubscribers(n,\"asleep\"))},ob:function(){var b=this[r];b.J&&(b.sa||this.Xa())&&this.ha();return a.T.fn.ob.call(this)}},ea={Qa:function(a){\"change\"!=\r\na&&\"beforeChange\"!=a||this.v()}};a.a.Ba&&a.a.setPrototypeOf(C,a.T.fn);var N=a.ta.Ma;C[N]=a.o;a.Oc=function(a){return\"function\"==typeof a&&a[N]===C[N]};a.Fd=function(b){return a.Oc(b)&&b[r]&&b[r].wb};a.b(\"computed\",a.o);a.b(\"dependentObservable\",a.o);a.b(\"isComputed\",a.Oc);a.b(\"isPureComputed\",a.Fd);a.b(\"computed.fn\",C);a.L(C,\"peek\",C.v);a.L(C,\"dispose\",C.s);a.L(C,\"isActive\",C.ja);a.L(C,\"getDependenciesCount\",C.qa);a.L(C,\"getDependencies\",C.Va);a.xb=function(b,c){if(\"function\"===typeof b)return a.o(b,\r\nc,{pure:!0});b=a.a.extend({},b);b.pure=!0;return a.o(b,c)};a.b(\"pureComputed\",a.xb);(function(){function b(a,f,g){g=g||new d;a=f(a);if(\"object\"!=typeof a||null===a||a===n||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var h=a instanceof Array?[]:{};g.save(a,h);c(a,function(c){var d=f(a[c]);switch(typeof d){case \"boolean\":case \"number\":case \"string\":case \"function\":h[c]=d;break;case \"object\":case \"undefined\":var l=g.get(d);h[c]=l!==\r\nn?l:b(d,f,g)}});return h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);\"function\"==typeof a.toJSON&&b(\"toJSON\")}else for(c in a)b(c)}function d(){this.keys=[];this.values=[]}a.ad=function(c){if(0==arguments.length)throw Error(\"When calling ko.toJS, pass the object you want to convert.\");return b(c,function(b){for(var c=0;a.O(b)&&10>c;c++)b=b();return b})};a.toJSON=function(b,c,d){b=a.ad(b);return a.a.hc(b,c,d)};d.prototype={constructor:d,save:function(b,c){var d=a.a.A(this.keys,\r\nb);0<=d?this.values[d]=c:(this.keys.push(b),this.values.push(c))},get:function(b){b=a.a.A(this.keys,b);return 0<=b?this.values[b]:n}}})();a.b(\"toJS\",a.ad);a.b(\"toJSON\",a.toJSON);a.Wd=function(b,c,d){function e(c){var e=a.xb(b,d).extend({ma:\"always\"}),h=e.subscribe(function(a){a&&(h.s(),c(a))});e.notifySubscribers(e.v());return h}return\"function\"!==typeof Promise||c?e(c.bind(d)):new Promise(e)};a.b(\"when\",a.Wd);(function(){a.w={M:function(b){switch(a.a.R(b)){case \"option\":return!0===b.__ko__hasDomDataOptionValue__?\r\na.a.g.get(b,a.c.options.$b):7>=a.a.W?b.getAttributeNode(\"value\")&&b.getAttributeNode(\"value\").specified?b.value:b.text:b.value;case \"select\":return 0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex]):n;default:return b.value}},cb:function(b,c,d){switch(a.a.R(b)){case \"option\":\"string\"===typeof c?(a.a.g.set(b,a.c.options.$b,n),\"__ko__hasDomDataOptionValue__\"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c):(a.a.g.set(b,a.c.options.$b,c),b.__ko__hasDomDataOptionValue__=!0,b.value=\"number\"===\r\ntypeof c?c:\"\");break;case \"select\":if(\"\"===c||null===c)c=n;for(var e=-1,f=0,g=b.options.length,h;f<g;++f)if(h=a.w.M(b.options[f]),h==c||\"\"===h&&c===n){e=f;break}if(d||0<=e||c===n&&1<b.size)b.selectedIndex=e,6===a.a.W&&a.a.setTimeout(function(){b.selectedIndex=e},0);break;default:if(null===c||c===n)c=\"\";b.value=c}}}})();a.b(\"selectExtensions\",a.w);a.b(\"selectExtensions.readValue\",a.w.M);a.b(\"selectExtensions.writeValue\",a.w.cb);a.m=function(){function b(b){b=a.a.Db(b);123===b.charCodeAt(0)&&(b=b.slice(1,\r\n-1));b+=\"\\n,\";var c=[],d=b.match(e),p,q=[],h=0;if(1<d.length){for(var x=0,B;B=d[x];++x){var u=B.charCodeAt(0);if(44===u){if(0>=h){c.push(p&&q.length?{key:p,value:q.join(\"\")}:{unknown:p||q.join(\"\")});p=h=0;q=[];continue}}else if(58===u){if(!h&&!p&&1===q.length){p=q.pop();continue}}else if(47===u&&1<B.length&&(47===B.charCodeAt(1)||42===B.charCodeAt(1)))continue;else 47===u&&x&&1<B.length?(u=d[x-1].match(f))&&!g[u[0]]&&(b=b.substr(b.indexOf(B)+1),d=b.match(e),x=-1,B=\"/\"):40===u||123===u||91===u?++h:\r\n41===u||125===u||93===u?--h:p||q.length||34!==u&&39!==u||(B=B.slice(1,-1));q.push(B)}if(0<h)throw Error(\"Unbalanced parentheses, braces, or brackets\");}return c}var c=[\"true\",\"false\",\"null\",\"undefined\"],d=/^(?:[$_a-z][$\\w]*|(.+)(\\.\\s*[$_a-z][$\\w]*|\\[.+\\]))$/i,e=RegExp(\"\\\"(?:\\\\\\\\.|[^\\\"])*\\\"|'(?:\\\\\\\\.|[^'])*'|`(?:\\\\\\\\.|[^`])*`|/\\\\*(?:[^*]|\\\\*+[^*/])*\\\\*+/|//.*\\n|/(?:\\\\\\\\.|[^/])+/w*|[^\\\\s:,/][^,\\\"'`{}()/:[\\\\]]*[^\\\\s,\\\"'`{}()/:[\\\\]]|[^\\\\s]\",\"g\"),f=/[\\])\"'A-Za-z0-9_$]+$/,g={\"in\":1,\"return\":1,\"typeof\":1},\r\nh={};return{Ra:[],wa:h,ac:b,vb:function(e,f){function l(b,e){var f;if(!x){var k=a.getBindingHandler(b);if(k&&k.preprocess&&!(e=k.preprocess(e,b,l)))return;if(k=h[b])f=e,0<=a.a.A(c,f)?f=!1:(k=f.match(d),f=null===k?!1:k[1]?\"Object(\"+k[1]+\")\"+k[2]:f),k=f;k&&q.push(\"'\"+(\"string\"==typeof h[b]?h[b]:b)+\"':function(_z){\"+f+\"=_z}\")}g&&(e=\"function(){return \"+e+\" }\");p.push(\"'\"+b+\"':\"+e)}f=f||{};var p=[],q=[],g=f.valueAccessors,x=f.bindingParams,B=\"string\"===typeof e?b(e):e;a.a.D(B,function(a){l(a.key||a.unknown,\r\na.value)});q.length&&l(\"_ko_property_writers\",\"{\"+q.join(\",\")+\" }\");return p.join(\",\")},Id:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},eb:function(b,c,d,e,f){if(b&&a.O(b))!a.Za(b)||f&&b.v()===e||b(e);else if((b=c.get(\"_ko_property_writers\"))&&b[d])b[d](e)}}}();a.b(\"expressionRewriting\",a.m);a.b(\"expressionRewriting.bindingRewriteValidators\",a.m.Ra);a.b(\"expressionRewriting.parseObjectLiteral\",a.m.ac);a.b(\"expressionRewriting.preProcessBindings\",a.m.vb);a.b(\"expressionRewriting._twoWayBindings\",\r\na.m.wa);a.b(\"jsonExpressionRewriting\",a.m);a.b(\"jsonExpressionRewriting.insertPropertyAccessorsIntoJson\",a.m.vb);(function(){function b(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(d,e){for(var f=d,h=1,g=[];f=f.nextSibling;){if(c(f)&&(a.a.g.set(f,k,!0),h--,0===h))return g;g.push(f);b(f)&&h++}if(!e)throw Error(\"Cannot find closing comment tag to match: \"+d.nodeValue);return null}function e(a,b){var c=d(a,b);return c?\r\n0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&\"\\x3c!--test--\\x3e\"===w.createComment(\"test\").text,g=f?/^\\x3c!--\\s*ko(?:\\s+([\\s\\S]+))?\\s*--\\x3e$/:/^\\s*ko(?:\\s+([\\s\\S]+))?\\s*$/,h=f?/^\\x3c!--\\s*\\/ko\\s*--\\x3e$/:/^\\s*\\/ko\\s*$/,m={ul:!0,ol:!0},k=\"__ko_matchedEndComment__\";a.h={ea:{},childNodes:function(a){return b(a)?d(a):a.childNodes},Ea:function(c){if(b(c)){c=a.h.childNodes(c);for(var d=0,e=c.length;d<e;d++)a.removeNode(c[d])}else a.a.Tb(c)},va:function(c,d){if(b(c)){a.h.Ea(c);for(var e=\r\nc.nextSibling,f=0,k=d.length;f<k;f++)e.parentNode.insertBefore(d[f],e)}else a.a.va(c,d)},Vc:function(a,c){var d;b(a)?(d=a.nextSibling,a=a.parentNode):d=a.firstChild;d?c!==d&&a.insertBefore(c,d):a.appendChild(c)},Wb:function(c,d,e){e?(e=e.nextSibling,b(c)&&(c=c.parentNode),e?d!==e&&c.insertBefore(d,e):c.appendChild(d)):a.h.Vc(c,d)},firstChild:function(a){if(b(a))return!a.nextSibling||c(a.nextSibling)?null:a.nextSibling;if(a.firstChild&&c(a.firstChild))throw Error(\"Found invalid end comment, as the first child of \"+\r\na);return a.firstChild},nextSibling:function(d){b(d)&&(d=e(d));if(d.nextSibling&&c(d.nextSibling)){var f=d.nextSibling;if(c(f)&&!a.a.g.get(f,k))throw Error(\"Found end comment without a matching opening comment, as child of \"+d);return null}return d.nextSibling},Cd:b,Vd:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Sc:function(d){if(m[a.a.R(d)]){var f=d.firstChild;if(f){do if(1===f.nodeType){var k;k=f.firstChild;var h=null;if(k){do if(h)h.push(k);else if(b(k)){var g=e(k,!0);g?k=\r\ng:h=[k]}else c(k)&&(h=[k]);while(k=k.nextSibling)}if(k=h)for(h=f.nextSibling,g=0;g<k.length;g++)h?d.insertBefore(k[g],h):d.appendChild(k[g])}while(f=f.nextSibling)}}}}})();a.b(\"virtualElements\",a.h);a.b(\"virtualElements.allowedBindings\",a.h.ea);a.b(\"virtualElements.emptyNode\",a.h.Ea);a.b(\"virtualElements.insertAfter\",a.h.Wb);a.b(\"virtualElements.prepend\",a.h.Vc);a.b(\"virtualElements.setDomNodeChildren\",a.h.va);(function(){a.ga=function(){this.nd={}};a.a.extend(a.ga.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=\r\nb.getAttribute(\"data-bind\")||a.j.getComponentNameForNode(b);case 8:return a.h.Cd(b);default:return!1}},getBindings:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b):null;return a.j.tc(d,b,c,!1)},getBindingAccessors:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b,{valueAccessors:!0}):null;return a.j.tc(d,b,c,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute(\"data-bind\");case 8:return a.h.Vd(b);default:return null}},\r\nparseBindingsString:function(b,c,d,e){try{var f=this.nd,g=b+(e&&e.valueAccessors||\"\"),h;if(!(h=f[g])){var m,k=\"with($context){with($data||{}){return{\"+a.m.vb(b,e)+\"}}}\";m=new Function(\"$context\",\"$element\",k);h=f[g]=m}return h(c,d)}catch(l){throw l.message=\"Unable to parse bindings.\\nBindings value: \"+b+\"\\nMessage: \"+l.message,l;}}});a.ga.instance=new a.ga})();a.b(\"bindingProvider\",a.ga);(function(){function b(b){var c=(b=a.a.g.get(b,z))&&b.N;c&&(b.N=null,c.Tc())}function c(c,d,e){this.node=c;this.yc=\r\nd;this.kb=[];this.H=!1;d.N||a.a.K.za(c,b);e&&e.N&&(e.N.kb.push(c),this.Kb=e)}function d(a){return function(){return a}}function e(a){return a()}function f(b){return a.a.Ga(a.u.G(b),function(a,c){return function(){return b()[c]}})}function g(b,c,e){return\"function\"===typeof b?f(b.bind(null,c,e)):a.a.Ga(b,d)}function h(a,b){return f(this.getBindings.bind(this,a,b))}function m(b,c){var d=a.h.firstChild(c);if(d){var e,f=a.ga.instance,l=f.preprocessNode;if(l){for(;e=d;)d=a.h.nextSibling(e),l.call(f,e);\r\nd=a.h.firstChild(c)}for(;e=d;)d=a.h.nextSibling(e),k(b,e)}a.i.ma(c,a.i.H)}function k(b,c){var d=b,e=1===c.nodeType;e&&a.h.Sc(c);if(e||a.ga.instance.nodeHasBindings(c))d=p(c,null,b).bindingContextForDescendants;d&&!u[a.a.R(c)]&&m(d,c)}function l(b){var c=[],d={},e=[];a.a.P(b,function ca(f){if(!d[f]){var k=a.getBindingHandler(f);k&&(k.after&&(e.push(f),a.a.D(k.after,function(c){if(b[c]){if(-1!==a.a.A(e,c))throw Error(\"Cannot combine the following bindings, because they have a cyclic dependency: \"+e.join(\", \"));\r\nca(c)}}),e.length--),c.push({key:f,Mc:k}));d[f]=!0}});return c}function p(b,c,d){var f=a.a.g.Ub(b,z,{}),k=f.hd;if(!c){if(k)throw Error(\"You cannot apply bindings multiple times to the same element.\");f.hd=!0}k||(f.context=d);f.Zb||(f.Zb={});var g;if(c&&\"function\"!==typeof c)g=c;else{var p=a.ga.instance,q=p.getBindingAccessors||h,m=a.$(function(){if(g=c?c(d,b):q.call(p,b,d)){if(d[t])d[t]();if(d[B])d[B]()}return g},null,{l:b});g&&m.ja()||(m=null)}var x=d,u;if(g){var J=function(){return a.a.Ga(m?m():\r\ng,e)},r=m?function(a){return function(){return e(m()[a])}}:function(a){return g[a]};J.get=function(a){return g[a]&&e(r(a))};J.has=function(a){return a in g};a.i.H in g&&a.i.subscribe(b,a.i.H,function(){var c=(0,g[a.i.H])();if(c){var d=a.h.childNodes(b);d.length&&c(d,a.Ec(d[0]))}});a.i.pa in g&&(x=a.i.Cb(b,d),a.i.subscribe(b,a.i.pa,function(){var c=(0,g[a.i.pa])();c&&a.h.firstChild(b)&&c(b)}));f=l(g);a.a.D(f,function(c){var d=c.Mc.init,e=c.Mc.update,f=c.key;if(8===b.nodeType&&!a.h.ea[f])throw Error(\"The binding '\"+\r\nf+\"' cannot be used with virtual elements\");try{\"function\"==typeof d&&a.u.G(function(){var a=d(b,r(f),J,x.$data,x);if(a&&a.controlsDescendantBindings){if(u!==n)throw Error(\"Multiple bindings (\"+u+\" and \"+f+\") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.\");u=f}}),\"function\"==typeof e&&a.$(function(){e(b,r(f),J,x.$data,x)},null,{l:b})}catch(k){throw k.message='Unable to process binding \"'+f+\": \"+g[f]+'\"\\nMessage: '+k.message,\r\nk;}})}f=u===n;return{shouldBindDescendants:f,bindingContextForDescendants:f&&x}}function q(b,c){return b&&b instanceof a.fa?b:new a.fa(b,n,n,c)}var t=a.a.Da(\"_subscribable\"),x=a.a.Da(\"_ancestorBindingInfo\"),B=a.a.Da(\"_dataDependency\");a.c={};var u={script:!0,textarea:!0,template:!0};a.getBindingHandler=function(b){return a.c[b]};var J={};a.fa=function(b,c,d,e,f){function k(){var b=p?h():h,f=a.a.f(b);c?(a.a.extend(l,c),x in c&&(l[x]=c[x])):(l.$parents=[],l.$root=f,l.ko=a);l[t]=q;g?f=l.$data:(l.$rawData=\r\nb,l.$data=f);d&&(l[d]=f);e&&e(l,c,f);if(c&&c[t]&&!a.S.o().Vb(c[t]))c[t]();m&&(l[B]=m);return l.$data}var l=this,g=b===J,h=g?n:b,p=\"function\"==typeof h&&!a.O(h),q,m=f&&f.dataDependency;f&&f.exportDependencies?k():(q=a.xb(k),q.v(),q.ja()?q.equalityComparer=null:l[t]=n)};a.fa.prototype.createChildContext=function(b,c,d,e){!e&&c&&\"object\"==typeof c&&(e=c,c=e.as,d=e.extend);if(c&&e&&e.noChildContext){var f=\"function\"==typeof b&&!a.O(b);return new a.fa(J,this,null,function(a){d&&d(a);a[c]=f?b():b},e)}return new a.fa(b,\r\nthis,c,function(a,b){a.$parentContext=b;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)},e)};a.fa.prototype.extend=function(b,c){return new a.fa(J,this,null,function(c){a.a.extend(c,\"function\"==typeof b?b(c):b)},c)};var z=a.a.g.Z();c.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)};c.prototype.sd=function(b){a.a.Pa(this.kb,b);!this.kb.length&&this.H&&this.Cc()};c.prototype.Cc=function(){this.H=!0;this.yc.N&&!this.kb.length&&(this.yc.N=\r\nnull,a.a.K.yb(this.node,b),a.i.ma(this.node,a.i.pa),this.Tc())};a.i={H:\"childrenComplete\",pa:\"descendantsComplete\",subscribe:function(b,c,d,e,f){var k=a.a.g.Ub(b,z,{});k.Fa||(k.Fa=new a.T);f&&f.notifyImmediately&&k.Zb[c]&&a.u.G(d,e,[b]);return k.Fa.subscribe(d,e,c)},ma:function(b,c){var d=a.a.g.get(b,z);if(d&&(d.Zb[c]=!0,d.Fa&&d.Fa.notifySubscribers(b,c),c==a.i.H))if(d.N)d.N.Cc();else if(d.N===n&&d.Fa&&d.Fa.Wa(a.i.pa))throw Error(\"descendantsComplete event not supported for bindings on this node\");\r\n},Cb:function(b,d){var e=a.a.g.Ub(b,z,{});e.N||(e.N=new c(b,e,d[x]));return d[x]==e?d:d.extend(function(a){a[x]=e})}};a.Td=function(b){return(b=a.a.g.get(b,z))&&b.context};a.ib=function(b,c,d){1===b.nodeType&&a.h.Sc(b);return p(b,c,q(d))};a.ld=function(b,c,d){d=q(d);return a.ib(b,g(c,d,b),d)};a.Oa=function(a,b){1!==b.nodeType&&8!==b.nodeType||m(q(a),b)};a.vc=function(a,b,c){!v&&A.jQuery&&(v=A.jQuery);if(2>arguments.length){if(b=w.body,!b)throw Error(\"ko.applyBindings: could not find document.body; has the document been loaded?\");\r\n}else if(!b||1!==b.nodeType&&8!==b.nodeType)throw Error(\"ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node\");k(q(a,c),b)};a.Dc=function(b){return!b||1!==b.nodeType&&8!==b.nodeType?n:a.Td(b)};a.Ec=function(b){return(b=a.Dc(b))?b.$data:n};a.b(\"bindingHandlers\",a.c);a.b(\"bindingEvent\",a.i);a.b(\"bindingEvent.subscribe\",a.i.subscribe);a.b(\"bindingEvent.startPossiblyAsyncContentBinding\",a.i.Cb);a.b(\"applyBindings\",a.vc);a.b(\"applyBindingsToDescendants\",a.Oa);\r\na.b(\"applyBindingAccessorsToNode\",a.ib);a.b(\"applyBindingsToNode\",a.ld);a.b(\"contextFor\",a.Dc);a.b(\"dataFor\",a.Ec)})();(function(b){function c(c,e){var k=Object.prototype.hasOwnProperty.call(f,c)?f[c]:b,l;k?k.subscribe(e):(k=f[c]=new a.T,k.subscribe(e),d(c,function(b,d){var e=!(!d||!d.synchronous);g[c]={definition:b,Gd:e};delete f[c];l||e?k.notifySubscribers(b):a.na.zb(function(){k.notifySubscribers(b)})}),l=!0)}function d(a,b){e(\"getConfig\",[a],function(c){c?e(\"loadComponent\",[a,c],function(a){b(a,\r\nc)}):b(null,null)})}function e(c,d,f,l){l||(l=a.j.loaders.slice(0));var g=l.shift();if(g){var q=g[c];if(q){var t=!1;if(q.apply(g,d.concat(function(a){t?f(null):null!==a?f(a):e(c,d,f,l)}))!==b&&(t=!0,!g.suppressLoaderExceptions))throw Error(\"Component loaders must supply values by invoking the callback, not by returning values synchronously.\");}else e(c,d,f,l)}else f(null)}var f={},g={};a.j={get:function(d,e){var f=Object.prototype.hasOwnProperty.call(g,d)?g[d]:b;f?f.Gd?a.u.G(function(){e(f.definition)}):\r\na.na.zb(function(){e(f.definition)}):c(d,e)},Bc:function(a){delete g[a]},oc:e};a.j.loaders=[];a.b(\"components\",a.j);a.b(\"components.get\",a.j.get);a.b(\"components.clearCachedDefinition\",a.j.Bc)})();(function(){function b(b,c,d,e){function g(){0===--B&&e(h)}var h={},B=2,u=d.template;d=d.viewModel;u?f(c,u,function(c){a.j.oc(\"loadTemplate\",[b,c],function(a){h.template=a;g()})}):g();d?f(c,d,function(c){a.j.oc(\"loadViewModel\",[b,c],function(a){h[m]=a;g()})}):g()}function c(a,b,d){if(\"function\"===typeof b)d(function(a){return new b(a)});\r\nelse if(\"function\"===typeof b[m])d(b[m]);else if(\"instance\"in b){var e=b.instance;d(function(){return e})}else\"viewModel\"in b?c(a,b.viewModel,d):a(\"Unknown viewModel value: \"+b)}function d(b){switch(a.a.R(b)){case \"script\":return a.a.ua(b.text);case \"textarea\":return a.a.ua(b.value);case \"template\":if(e(b.content))return a.a.Ca(b.content.childNodes)}return a.a.Ca(b.childNodes)}function e(a){return A.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function f(a,b,c){\"string\"===typeof b.require?\r\nT||A.require?(T||A.require)([b.require],function(a){a&&\"object\"===typeof a&&a.Xd&&a[\"default\"]&&(a=a[\"default\"]);c(a)}):a(\"Uses require, but no AMD loader is present\"):c(b)}function g(a){return function(b){throw Error(\"Component '\"+a+\"': \"+b);}}var h={};a.j.register=function(b,c){if(!c)throw Error(\"Invalid configuration for \"+b);if(a.j.tb(b))throw Error(\"Component \"+b+\" is already registered\");h[b]=c};a.j.tb=function(a){return Object.prototype.hasOwnProperty.call(h,a)};a.j.unregister=function(b){delete h[b];\r\na.j.Bc(b)};a.j.Fc={getConfig:function(b,c){c(a.j.tb(b)?h[b]:null)},loadComponent:function(a,c,d){var e=g(a);f(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,c,f){b=g(b);if(\"string\"===typeof c)f(a.a.ua(c));else if(c instanceof Array)f(c);else if(e(c))f(a.a.la(c.childNodes));else if(c.element)if(c=c.element,A.HTMLElement?c instanceof HTMLElement:c&&c.tagName&&1===c.nodeType)f(d(c));else if(\"string\"===typeof c){var h=w.getElementById(c);h?f(d(h)):b(\"Cannot find element with ID \"+c)}else b(\"Unknown element type: \"+\r\nc);else b(\"Unknown template value: \"+c)},loadViewModel:function(a,b,d){c(g(a),b,d)}};var m=\"createViewModel\";a.b(\"components.register\",a.j.register);a.b(\"components.isRegistered\",a.j.tb);a.b(\"components.unregister\",a.j.unregister);a.b(\"components.defaultLoader\",a.j.Fc);a.j.loaders.push(a.j.Fc);a.j.dd=h})();(function(){function b(b,e){var f=b.getAttribute(\"params\");if(f){var f=c.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),f=a.a.Ga(f,function(c){return a.o(c,null,{l:b})}),g=a.a.Ga(f,\r\nfunction(c){var e=c.v();return c.ja()?a.o({read:function(){return a.a.f(c())},write:a.Za(e)&&function(a){c()(a)},l:b}):e});Object.prototype.hasOwnProperty.call(g,\"$raw\")||(g.$raw=f);return g}return{$raw:{}}}a.j.getComponentNameForNode=function(b){var c=a.a.R(b);if(a.j.tb(c)&&(-1!=c.indexOf(\"-\")||\"[object HTMLUnknownElement]\"==\"\"+b||8>=a.a.W&&b.tagName===c))return c};a.j.tc=function(c,e,f,g){if(1===e.nodeType){var h=a.j.getComponentNameForNode(e);if(h){c=c||{};if(c.component)throw Error('Cannot use the \"component\" binding on a custom element matching a component');\r\nvar m={name:h,params:b(e,f)};c.component=g?function(){return m}:m}}return c};var c=new a.ga;9>a.a.W&&(a.j.register=function(a){return function(b){return a.apply(this,arguments)}}(a.j.register),w.createDocumentFragment=function(b){return function(){var c=b(),f=a.j.dd,g;for(g in f);return c}}(w.createDocumentFragment))})();(function(){function b(b,c,d){c=c.template;if(!c)throw Error(\"Component '\"+b+\"' has no template\");b=a.a.Ca(c);a.h.va(d,b)}function c(a,b,c){var d=a.createViewModel;return d?d.call(a,\r\nb,c):b}var d=0;a.c.component={init:function(e,f,g,h,m){function k(){var a=l&&l.dispose;\"function\"===typeof a&&a.call(l);q&&q.s();p=l=q=null}var l,p,q,t=a.a.la(a.h.childNodes(e));a.h.Ea(e);a.a.K.za(e,k);a.o(function(){var g=a.a.f(f()),h,u;\"string\"===typeof g?h=g:(h=a.a.f(g.name),u=a.a.f(g.params));if(!h)throw Error(\"No component name specified\");var n=a.i.Cb(e,m),z=p=++d;a.j.get(h,function(d){if(p===z){k();if(!d)throw Error(\"Unknown component '\"+h+\"'\");b(h,d,e);var f=c(d,u,{element:e,templateNodes:t});\r\nd=n.createChildContext(f,{extend:function(a){a.$component=f;a.$componentTemplateNodes=t}});f&&f.koDescendantsComplete&&(q=a.i.subscribe(e,a.i.pa,f.koDescendantsComplete,f));l=f;a.Oa(d,e)}})},null,{l:e});return{controlsDescendantBindings:!0}}};a.h.ea.component=!0})();var V={\"class\":\"className\",\"for\":\"htmlFor\"};a.c.attr={update:function(b,c){var d=a.a.f(c())||{};a.a.P(d,function(c,d){d=a.a.f(d);var g=c.indexOf(\":\"),g=\"lookupNamespaceURI\"in b&&0<g&&b.lookupNamespaceURI(c.substr(0,g)),h=!1===d||null===\r\nd||d===n;h?g?b.removeAttributeNS(g,c):b.removeAttribute(c):d=d.toString();8>=a.a.W&&c in V?(c=V[c],h?b.removeAttribute(c):b[c]=d):h||(g?b.setAttributeNS(g,c,d):b.setAttribute(c,d));\"name\"===c&&a.a.Yc(b,h?\"\":d)})}};(function(){a.c.checked={after:[\"value\",\"attr\"],init:function(b,c,d){function e(){var e=b.checked,f=g();if(!a.S.Ya()&&(e||!m&&!a.S.qa())){var k=a.u.G(c);if(l){var q=p?k.v():k,z=t;t=f;z!==f?e&&(a.a.Na(q,f,!0),a.a.Na(q,z,!1)):a.a.Na(q,f,e);p&&a.Za(k)&&k(q)}else h&&(f===n?f=e:e||(f=n)),a.m.eb(k,\r\nd,\"checked\",f,!0)}}function f(){var d=a.a.f(c()),e=g();l?(b.checked=0<=a.a.A(d,e),t=e):b.checked=h&&e===n?!!d:g()===d}var g=a.xb(function(){if(d.has(\"checkedValue\"))return a.a.f(d.get(\"checkedValue\"));if(q)return d.has(\"value\")?a.a.f(d.get(\"value\")):b.value}),h=\"checkbox\"==b.type,m=\"radio\"==b.type;if(h||m){var k=c(),l=h&&a.a.f(k)instanceof Array,p=!(l&&k.push&&k.splice),q=m||l,t=l?g():n;m&&!b.name&&a.c.uniqueName.init(b,function(){return!0});a.o(e,null,{l:b});a.a.B(b,\"click\",e);a.o(f,null,{l:b});\r\nk=n}}};a.m.wa.checked=!0;a.c.checkedValue={update:function(b,c){b.value=a.a.f(c())}}})();a.c[\"class\"]={update:function(b,c){var d=a.a.Db(a.a.f(c()));a.a.Eb(b,b.__ko__cssValue,!1);b.__ko__cssValue=d;a.a.Eb(b,d,!0)}};a.c.css={update:function(b,c){var d=a.a.f(c());null!==d&&\"object\"==typeof d?a.a.P(d,function(c,d){d=a.a.f(d);a.a.Eb(b,c,d)}):a.c[\"class\"].update(b,c)}};a.c.enable={update:function(b,c){var d=a.a.f(c());d&&b.disabled?b.removeAttribute(\"disabled\"):d||b.disabled||(b.disabled=!0)}};a.c.disable=\r\n{update:function(b,c){a.c.enable.update(b,function(){return!a.a.f(c())})}};a.c.event={init:function(b,c,d,e,f){var g=c()||{};a.a.P(g,function(g){\"string\"==typeof g&&a.a.B(b,g,function(b){var k,l=c()[g];if(l){try{var p=a.a.la(arguments);e=f.$data;p.unshift(e);k=l.apply(e,p)}finally{!0!==k&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+\"Bubble\")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.c.foreach={Rc:function(b){return function(){var c=b(),d=a.a.bc(c);\r\nif(!d||\"number\"==typeof d.length)return{foreach:c,templateEngine:a.ba.Ma};a.a.f(c);return{foreach:d.data,as:d.as,noChildContext:d.noChildContext,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.ba.Ma}}},init:function(b,c){return a.c.template.init(b,a.c.foreach.Rc(c))},update:function(b,c,d,e,f){return a.c.template.update(b,a.c.foreach.Rc(c),d,e,f)}};a.m.Ra.foreach=!1;a.h.ea.foreach=\r\n!0;a.c.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if(\"activeElement\"in f){var g;try{g=f.activeElement}catch(l){g=f.body}e=g===b}f=c();a.m.eb(f,d,\"hasfocus\",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),g=e.bind(null,!1);a.a.B(b,\"focus\",f);a.a.B(b,\"focusin\",f);a.a.B(b,\"blur\",g);a.a.B(b,\"focusout\",g);b.__ko_hasfocusLastValue=!1},update:function(b,c){var d=!!a.a.f(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===\r\nd||(d?b.focus():b.blur(),!d&&b.__ko_hasfocusLastValue&&b.ownerDocument.body.focus(),a.u.G(a.a.Fb,null,[b,d?\"focusin\":\"focusout\"]))}};a.m.wa.hasfocus=!0;a.c.hasFocus=a.c.hasfocus;a.m.wa.hasFocus=\"hasfocus\";a.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.fc(b,c())}};(function(){function b(b,d,e){a.c[b]={init:function(b,c,h,m,k){var l,p,q={},t,x,n;if(d){m=h.get(\"as\");var u=h.get(\"noChildContext\");n=!(m&&u);q={as:m,noChildContext:u,exportDependencies:n}}x=(t=\r\n\"render\"==h.get(\"completeOn\"))||h.has(a.i.pa);a.o(function(){var h=a.a.f(c()),m=!e!==!h,u=!p,r;if(n||m!==l){x&&(k=a.i.Cb(b,k));if(m){if(!d||n)q.dataDependency=a.S.o();r=d?k.createChildContext(\"function\"==typeof h?h:c,q):a.S.qa()?k.extend(null,q):k}u&&a.S.qa()&&(p=a.a.Ca(a.h.childNodes(b),!0));m?(u||a.h.va(b,a.a.Ca(p)),a.Oa(r,b)):(a.h.Ea(b),t||a.i.ma(b,a.i.H));l=m}},null,{l:b});return{controlsDescendantBindings:!0}}};a.m.Ra[b]=!1;a.h.ea[b]=!0}b(\"if\");b(\"ifnot\",!1,!0);b(\"with\",!0)})();a.c.let={init:function(b,\r\nc,d,e,f){c=f.extend(c);a.Oa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.let=!0;var Q={};a.c.options={init:function(b){if(\"select\"!==a.a.R(b))throw Error(\"options binding applies only to SELECT elements\");for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.jb(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return\"function\"==d?b(a):\"string\"==d?a[b]:c}function g(c,d){if(x&&l)a.i.ma(b,a.i.H);else if(t.length){var e=\r\n0<=a.a.A(t,a.w.M(d[0]));a.a.Zc(d[0],e);x&&!e&&a.u.G(a.a.Fb,null,[b,\"change\"])}}var h=b.multiple,m=0!=b.length&&h?b.scrollTop:null,k=a.a.f(c()),l=d.get(\"valueAllowUnset\")&&d.has(\"value\"),p=d.get(\"optionsIncludeDestroyed\");c={};var q,t=[];l||(h?t=a.a.Mb(e(),a.w.M):0<=b.selectedIndex&&t.push(a.w.M(b.options[b.selectedIndex])));k&&(\"undefined\"==typeof k.length&&(k=[k]),q=a.a.jb(k,function(b){return p||b===n||null===b||!a.a.f(b._destroy)}),d.has(\"optionsCaption\")&&(k=a.a.f(d.get(\"optionsCaption\")),null!==\r\nk&&k!==n&&q.unshift(Q)));var x=!1;c.beforeRemove=function(a){b.removeChild(a)};k=g;d.has(\"optionsAfterRender\")&&\"function\"==typeof d.get(\"optionsAfterRender\")&&(k=function(b,c){g(0,c);a.u.G(d.get(\"optionsAfterRender\"),null,[c[0],b!==Q?b:n])});a.a.ec(b,q,function(c,e,g){g.length&&(t=!l&&g[0].selected?[a.w.M(g[0])]:[],x=!0);e=b.ownerDocument.createElement(\"option\");c===Q?(a.a.Bb(e,d.get(\"optionsCaption\")),a.w.cb(e,n)):(g=f(c,d.get(\"optionsValue\"),c),a.w.cb(e,a.a.f(g)),c=f(c,d.get(\"optionsText\"),g),\r\na.a.Bb(e,c));return[e]},c,k);if(!l){var B;h?B=t.length&&e().length<t.length:B=t.length&&0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex])!==t[0]:t.length||0<=b.selectedIndex;B&&a.u.G(a.a.Fb,null,[b,\"change\"])}(l||a.S.Ya())&&a.i.ma(b,a.i.H);a.a.wd(b);m&&20<Math.abs(m-b.scrollTop)&&(b.scrollTop=m)}};a.c.options.$b=a.a.g.Z();a.c.selectedOptions={init:function(b,c,d){function e(){var e=c(),f=[];a.a.D(b.getElementsByTagName(\"option\"),function(b){b.selected&&f.push(a.w.M(b))});a.m.eb(e,d,\"selectedOptions\",\r\nf)}function f(){var d=a.a.f(c()),e=b.scrollTop;d&&\"number\"==typeof d.length&&a.a.D(b.getElementsByTagName(\"option\"),function(b){var c=0<=a.a.A(d,a.w.M(b));b.selected!=c&&a.a.Zc(b,c)});b.scrollTop=e}if(\"select\"!=a.a.R(b))throw Error(\"selectedOptions binding applies only to SELECT elements\");var g;a.i.subscribe(b,a.i.H,function(){g?e():(a.a.B(b,\"change\",e),g=a.o(f,null,{l:b}))},null,{notifyImmediately:!0})},update:function(){}};a.m.wa.selectedOptions=!0;a.c.style={update:function(b,c){var d=a.a.f(c()||\r\n{});a.a.P(d,function(c,d){d=a.a.f(d);if(null===d||d===n||!1===d)d=\"\";if(v)v(b).css(c,d);else if(/^--/.test(c))b.style.setProperty(c,d);else{c=c.replace(/-(\\w)/g,function(a,b){return b.toUpperCase()});var g=b.style[c];b.style[c]=d;d===g||b.style[c]!=g||isNaN(d)||(b.style[c]=d+\"px\")}})}};a.c.submit={init:function(b,c,d,e,f){if(\"function\"!=typeof c())throw Error(\"The value for a submit binding must be a function\");a.a.B(b,\"submit\",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?\r\na.preventDefault():a.returnValue=!1)}})}};a.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Bb(b,c())}};a.h.ea.text=!0;(function(){if(A&&A.navigator){var b=function(a){if(a)return parseFloat(a[1])},c=A.navigator.userAgent,d,e,f,g,h;(d=A.opera&&A.opera.version&&parseInt(A.opera.version()))||(h=b(c.match(/Edge\\/([^ ]+)$/)))||b(c.match(/Chrome\\/([^ ]+)/))||(e=b(c.match(/Version\\/([^ ]+) Safari/)))||(f=b(c.match(/Firefox\\/([^ ]+)/)))||(g=a.a.W||b(c.match(/MSIE ([^ ]+)/)))||\r\n(g=b(c.match(/rv:([^ )]+)/)))}if(8<=g&&10>g)var m=a.a.g.Z(),k=a.a.g.Z(),l=function(b){var c=this.activeElement;(c=c&&a.a.g.get(c,k))&&c(b)},p=function(b,c){var d=b.ownerDocument;a.a.g.get(d,m)||(a.a.g.set(d,m,!0),a.a.B(d,\"selectionchange\",l));a.a.g.set(b,k,c)};a.c.textInput={init:function(b,c,k){function l(c,d){a.a.B(b,c,d)}function m(){var d=a.a.f(c());if(null===d||d===n)d=\"\";L!==n&&d===L?a.a.setTimeout(m,4):b.value!==d&&(y=!0,b.value=d,y=!1,v=b.value)}function r(){w||(L=b.value,w=a.a.setTimeout(z,\r\n4))}function z(){clearTimeout(w);L=w=n;var d=b.value;v!==d&&(v=d,a.m.eb(c(),k,\"textInput\",d))}var v=b.value,w,L,A=9==a.a.W?r:z,y=!1;g&&l(\"keypress\",z);11>g&&l(\"propertychange\",function(a){y||\"value\"!==a.propertyName||A(a)});8==g&&(l(\"keyup\",z),l(\"keydown\",z));p&&(p(b,A),l(\"dragend\",r));(!g||9<=g)&&l(\"input\",A);5>e&&\"textarea\"===a.a.R(b)?(l(\"keydown\",r),l(\"paste\",r),l(\"cut\",r)):11>d?l(\"keydown\",r):4>f?(l(\"DOMAutoComplete\",z),l(\"dragdrop\",z),l(\"drop\",z)):h&&\"number\"===b.type&&l(\"keydown\",r);l(\"change\",\r\nz);l(\"blur\",z);a.o(m,null,{l:b})}};a.m.wa.textInput=!0;a.c.textinput={preprocess:function(a,b,c){c(\"textInput\",a)}}})();a.c.uniqueName={init:function(b,c){if(c()){var d=\"ko_unique_\"+ ++a.c.uniqueName.rd;a.a.Yc(b,d)}}};a.c.uniqueName.rd=0;a.c.using={init:function(b,c,d,e,f){var g;d.has(\"as\")&&(g={as:d.get(\"as\"),noChildContext:d.get(\"noChildContext\")});c=f.createChildContext(c,g);a.Oa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.using=!0;a.c.value={init:function(b,c,d){var e=a.a.R(b),f=\"input\"==\r\ne;if(!f||\"checkbox\"!=b.type&&\"radio\"!=b.type){var g=[],h=d.get(\"valueUpdate\"),m=!1,k=null;h&&(\"string\"==typeof h?g=[h]:g=a.a.wc(h),a.a.Pa(g,\"change\"));var l=function(){k=null;m=!1;var e=c(),f=a.w.M(b);a.m.eb(e,d,\"value\",f)};!a.a.W||!f||\"text\"!=b.type||\"off\"==b.autocomplete||b.form&&\"off\"==b.form.autocomplete||-1!=a.a.A(g,\"propertychange\")||(a.a.B(b,\"propertychange\",function(){m=!0}),a.a.B(b,\"focus\",function(){m=!1}),a.a.B(b,\"blur\",function(){m&&l()}));a.a.D(g,function(c){var d=l;a.a.Ud(c,\"after\")&&\r\n(d=function(){k=a.w.M(b);a.a.setTimeout(l,0)},c=c.substring(5));a.a.B(b,c,d)});var p;p=f&&\"file\"==b.type?function(){var d=a.a.f(c());null===d||d===n||\"\"===d?b.value=\"\":a.u.G(l)}:function(){var f=a.a.f(c()),g=a.w.M(b);if(null!==k&&f===k)a.a.setTimeout(p,0);else if(f!==g||g===n)\"select\"===e?(g=d.get(\"valueAllowUnset\"),a.w.cb(b,f,g),g||f===a.w.M(b)||a.u.G(l)):a.w.cb(b,f)};if(\"select\"===e){var q;a.i.subscribe(b,a.i.H,function(){q?d.get(\"valueAllowUnset\")?p():l():(a.a.B(b,\"change\",l),q=a.o(p,null,{l:b}))},\r\nnull,{notifyImmediately:!0})}else a.a.B(b,\"change\",l),a.o(p,null,{l:b})}else a.ib(b,{checkedValue:c})},update:function(){}};a.m.wa.value=!0;a.c.visible={update:function(b,c){var d=a.a.f(c()),e=\"none\"!=b.style.display;d&&!e?b.style.display=\"\":!d&&e&&(b.style.display=\"none\")}};a.c.hidden={update:function(b,c){a.c.visible.update(b,function(){return!a.a.f(c())})}};(function(b){a.c[b]={init:function(c,d,e,f,g){return a.c.event.init.call(this,c,function(){var a={};a[b]=d();return a},e,f,g)}}})(\"click\");\r\na.ca=function(){};a.ca.prototype.renderTemplateSource=function(){throw Error(\"Override renderTemplateSource\");};a.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error(\"Override createJavaScriptEvaluatorBlock\");};a.ca.prototype.makeTemplateSource=function(b,c){if(\"string\"==typeof b){c=c||w;var d=c.getElementById(b);if(!d)throw Error(\"Cannot find template with ID \"+b);return new a.C.F(d)}if(1==b.nodeType||8==b.nodeType)return new a.C.ia(b);throw Error(\"Unknown template type: \"+b);};a.ca.prototype.renderTemplate=\r\nfunction(a,c,d,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,c,d,e)};a.ca.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data(\"isRewritten\")};a.ca.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data(\"isRewritten\",!0)};a.b(\"templateEngine\",a.ca);a.kc=function(){function b(b,c,d,h){b=a.m.ac(b);for(var m=a.m.Ra,k=0;k<b.length;k++){var l=b[k].key;if(Object.prototype.hasOwnProperty.call(m,\r\nl)){var p=m[l];if(\"function\"===typeof p){if(l=p(b[k].value))throw Error(l);}else if(!p)throw Error(\"This template engine does not support the '\"+l+\"' binding within its templates\");}}d=\"ko.__tr_ambtns(function($context,$element){return(function(){return{ \"+a.m.vb(b,{valueAccessors:!0})+\" } })()},'\"+d.toLowerCase()+\"')\";return h.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\\d*)(?:\\s+(?!data-bind\\s*=\\s*)[a-z0-9\\-]+(?:=(?:\\\"[^\\\"]*\\\"|\\'[^\\']*\\'|[^>]*))?)*\\s+)data-bind\\s*=\\s*([\"'])([\\s\\S]*?)\\3/gi,\r\nd=/\\x3c!--\\s*ko\\b\\s*([\\s\\S]*?)\\s*--\\x3e/g;return{xd:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.kc.Ld(b,c)},d)},Ld:function(a,f){return a.replace(c,function(a,c,d,e,l){return b(l,c,d,f)}).replace(d,function(a,c){return b(c,\"\\x3c!-- ko --\\x3e\",\"#comment\",f)})},md:function(b,c){return a.aa.Xb(function(d,h){var m=d.nextSibling;m&&m.nodeName.toLowerCase()===c&&a.ib(m,b,h)})}}}();a.b(\"__tr_ambtns\",a.kc.md);(function(){a.C={};a.C.F=function(b){if(this.F=b){var c=\r\na.a.R(b);this.ab=\"script\"===c?1:\"textarea\"===c?2:\"template\"==c&&b.content&&11===b.content.nodeType?3:4}};a.C.F.prototype.text=function(){var b=1===this.ab?\"text\":2===this.ab?\"value\":\"innerHTML\";if(0==arguments.length)return this.F[b];var c=arguments[0];\"innerHTML\"===b?a.a.fc(this.F,c):this.F[b]=c};var b=a.a.g.Z()+\"_\";a.C.F.prototype.data=function(c){if(1===arguments.length)return a.a.g.get(this.F,b+c);a.a.g.set(this.F,b+c,arguments[1])};var c=a.a.g.Z();a.C.F.prototype.nodes=function(){var b=this.F;\r\nif(0==arguments.length){var e=a.a.g.get(b,c)||{},f=e.lb||(3===this.ab?b.content:4===this.ab?b:n);if(!f||e.jd){var g=this.text();g&&g!==e.bb&&(f=a.a.Md(g,b.ownerDocument),a.a.g.set(b,c,{lb:f,bb:g,jd:!0}))}return f}e=arguments[0];this.ab!==n&&this.text(\"\");a.a.g.set(b,c,{lb:e})};a.C.ia=function(a){this.F=a};a.C.ia.prototype=new a.C.F;a.C.ia.prototype.constructor=a.C.ia;a.C.ia.prototype.text=function(){if(0==arguments.length){var b=a.a.g.get(this.F,c)||{};b.bb===n&&b.lb&&(b.bb=b.lb.innerHTML);return b.bb}a.a.g.set(this.F,\r\nc,{bb:arguments[0]})};a.b(\"templateSources\",a.C);a.b(\"templateSources.domElement\",a.C.F);a.b(\"templateSources.anonymousTemplate\",a.C.ia)})();(function(){function b(b,c,d){var e;for(c=a.h.nextSibling(c);b&&(e=b)!==c;)b=a.h.nextSibling(e),d(e,b)}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],g=e.parentNode,h=a.ga.instance,m=h.preprocessNode;if(m){b(e,f,function(a,b){var c=a.previousSibling,d=m.call(h,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e)return;e===f?c.push(e):\r\n(c.push(e,f),a.a.Ua(c,g))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.vc(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.aa.cd(b,[d])});a.a.Ua(c,g)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,f,h,m){m=m||{};var n=(b&&d(b)||f||{}).ownerDocument,B=m.templateEngine||g;a.kc.xd(f,B,n);f=B.renderTemplate(f,h,m,n);if(\"number\"!=typeof f.length||0<f.length&&\"number\"!=typeof f[0].nodeType)throw Error(\"Template engine must return an array of DOM nodes\");n=!1;switch(e){case \"replaceChildren\":a.h.va(b,\r\nf);n=!0;break;case \"replaceNode\":a.a.Xc(b,f);n=!0;break;case \"ignoreTargetNode\":break;default:throw Error(\"Unknown renderMode: \"+e);}n&&(c(f,h),m.afterRender&&a.u.G(m.afterRender,null,[f,h[m.as||\"$data\"]]),\"replaceChildren\"==e&&a.i.ma(b,a.i.H));return f}function f(b,c,d){return a.O(b)?b():\"function\"===typeof b?b(c,d):b}var g;a.gc=function(b){if(b!=n&&!(b instanceof a.ca))throw Error(\"templateEngine must inherit from ko.templateEngine\");g=b};a.dc=function(b,c,h,m,t){h=h||{};if((h.templateEngine||g)==\r\nn)throw Error(\"Set a template engine before calling renderTemplate\");t=t||\"replaceChildren\";if(m){var x=d(m);return a.$(function(){var g=c&&c instanceof a.fa?c:new a.fa(c,null,null,null,{exportDependencies:!0}),n=f(b,g.$data,g),g=e(m,t,n,g,h);\"replaceNode\"==t&&(m=g,x=d(m))},null,{Sa:function(){return!x||!a.a.Sb(x)},l:x&&\"replaceNode\"==t?x.parentNode:x})}return a.aa.Xb(function(d){a.dc(b,c,h,d,\"replaceNode\")})};a.Qd=function(b,d,g,h,m){function x(b,c){a.u.G(a.a.ec,null,[h,b,u,g,r,c]);a.i.ma(h,a.i.H)}\r\nfunction r(a,b){c(b,v);g.afterRender&&g.afterRender(b,a);v=null}function u(a,c){v=m.createChildContext(a,{as:z,noChildContext:g.noChildContext,extend:function(a){a.$index=c;z&&(a[z+\"Index\"]=c)}});var d=f(b,a,v);return e(h,\"ignoreTargetNode\",d,v,g)}var v,z=g.as,w=!1===g.includeDestroyed||a.options.foreachHidesDestroyed&&!g.includeDestroyed;if(w||g.beforeRemove||!a.Pc(d))return a.$(function(){var b=a.a.f(d)||[];\"undefined\"==typeof b.length&&(b=[b]);w&&(b=a.a.jb(b,function(b){return b===n||null===b||\r\n!a.a.f(b._destroy)}));x(b)},null,{l:h});x(d.v());var A=d.subscribe(function(a){x(d(),a)},null,\"arrayChange\");A.l(h);return A};var h=a.a.g.Z(),m=a.a.g.Z();a.c.template={init:function(b,c){var d=a.a.f(c());if(\"string\"==typeof d||\"name\"in d)a.h.Ea(b);else if(\"nodes\"in d){d=d.nodes||[];if(a.O(d))throw Error('The \"nodes\" option must be a plain, non-observable array.');var e=d[0]&&d[0].parentNode;e&&a.a.g.get(e,m)||(e=a.a.Yb(d),a.a.g.set(e,m,!0));(new a.C.ia(b)).nodes(e)}else if(d=a.h.childNodes(b),0<d.length)e=\r\na.a.Yb(d),(new a.C.ia(b)).nodes(e);else throw Error(\"Anonymous template defined, but no template content was provided\");return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=c();c=a.a.f(g);d=!0;e=null;\"string\"==typeof c?c={}:(g=\"name\"in c?c.name:b,\"if\"in c&&(d=a.a.f(c[\"if\"])),d&&\"ifnot\"in c&&(d=!a.a.f(c.ifnot)),d&&!g&&(d=!1));\"foreach\"in c?e=a.Qd(g,d&&c.foreach||[],c,b,f):d?(d=f,\"data\"in c&&(d=f.createChildContext(c.data,{as:c.as,noChildContext:c.noChildContext,exportDependencies:!0})),\r\ne=a.dc(g,d,c,b)):a.h.Ea(b);f=e;(c=a.a.g.get(b,h))&&\"function\"==typeof c.s&&c.s();a.a.g.set(b,h,!f||f.ja&&!f.ja()?n:f)}};a.m.Ra.template=function(b){b=a.m.ac(b);return 1==b.length&&b[0].unknown||a.m.Id(b,\"name\")?null:\"This template engine does not support anonymous templates nested within its templates\"};a.h.ea.template=!0})();a.b(\"setTemplateEngine\",a.gc);a.b(\"renderTemplate\",a.dc);a.a.Kc=function(a,c,d){if(a.length&&c.length){var e,f,g,h,m;for(e=f=0;(!d||e<d)&&(h=a[f]);++f){for(g=0;m=c[g];++g)if(h.value===\r\nm.value){h.moved=m.index;m.moved=h.index;c.splice(g,1);e=g=0;break}e+=g}}};a.a.Pb=function(){function b(b,d,e,f,g){var h=Math.min,m=Math.max,k=[],l,p=b.length,q,n=d.length,r=n-p||1,v=p+n+1,u,w,z;for(l=0;l<=p;l++)for(w=u,k.push(u=[]),z=h(n,l+r),q=m(0,l-1);q<=z;q++)u[q]=q?l?b[l-1]===d[q-1]?w[q-1]:h(w[q]||v,u[q-1]||v)+1:q+1:l+1;h=[];m=[];r=[];l=p;for(q=n;l||q;)n=k[l][q]-1,q&&n===k[l][q-1]?m.push(h[h.length]={status:e,value:d[--q],index:q}):l&&n===k[l-1][q]?r.push(h[h.length]={status:f,value:b[--l],index:l}):\r\n(--q,--l,g.sparse||h.push({status:\"retained\",value:d[q]}));a.a.Kc(r,m,!g.dontLimitMoves&&10*p);return h.reverse()}return function(a,d,e){e=\"boolean\"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];d=d||[];return a.length<d.length?b(a,d,\"added\",\"deleted\",e):b(d,a,\"deleted\",\"added\",e)}}();a.b(\"utils.compareArrays\",a.a.Pb);(function(){function b(b,c,d,h,m){var k=[],l=a.$(function(){var l=c(d,m,a.a.Ua(k,b))||[];0<k.length&&(a.a.Xc(k,l),h&&a.u.G(h,null,[d,l,m]));k.length=0;a.a.Nb(k,l)},null,{l:b,Sa:function(){return!a.a.kd(k)}});\r\nreturn{Y:k,$:l.ja()?l:n}}var c=a.a.g.Z(),d=a.a.g.Z();a.a.ec=function(e,f,g,h,m,k){function l(b){y={Aa:b,pb:a.ta(w++)};v.push(y);r||F.push(y)}function p(b){y=t[b];w!==y.pb.v()&&D.push(y);y.pb(w++);a.a.Ua(y.Y,e);v.push(y)}function q(b,c){if(b)for(var d=0,e=c.length;d<e;d++)a.a.D(c[d].Y,function(a){b(a,d,c[d].Aa)})}f=f||[];\"undefined\"==typeof f.length&&(f=[f]);h=h||{};var t=a.a.g.get(e,c),r=!t,v=[],u=0,w=0,z=[],A=[],C=[],D=[],F=[],y,I=0;if(r)a.a.D(f,l);else{if(!k||t&&t._countWaitingForRemove){var E=\r\na.a.Mb(t,function(a){return a.Aa});k=a.a.Pb(E,f,{dontLimitMoves:h.dontLimitMoves,sparse:!0})}for(var E=0,G,H,K;G=k[E];E++)switch(H=G.moved,K=G.index,G.status){case \"deleted\":for(;u<K;)p(u++);H===n&&(y=t[u],y.$&&(y.$.s(),y.$=n),a.a.Ua(y.Y,e).length&&(h.beforeRemove&&(v.push(y),I++,y.Aa===d?y=null:C.push(y)),y&&z.push.apply(z,y.Y)));u++;break;case \"added\":for(;w<K;)p(u++);H!==n?(A.push(v.length),p(H)):l(G.value)}for(;w<f.length;)p(u++);v._countWaitingForRemove=I}a.a.g.set(e,c,v);q(h.beforeMove,D);a.a.D(z,\r\nh.beforeRemove?a.oa:a.removeNode);var M,O,P;try{P=e.ownerDocument.activeElement}catch(N){}if(A.length)for(;(E=A.shift())!=n;){y=v[E];for(M=n;E;)if((O=v[--E].Y)&&O.length){M=O[O.length-1];break}for(f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M)}for(E=0;y=v[E];E++){y.Y||a.a.extend(y,b(e,g,y.Aa,m,y.pb));for(f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M);!y.Ed&&m&&(m(y.Aa,y.Y,y.pb),y.Ed=!0,M=y.Y[y.Y.length-1])}P&&e.ownerDocument.activeElement!=P&&P.focus();q(h.beforeRemove,C);for(E=0;E<C.length;++E)C[E].Aa=d;q(h.afterMove,D);\r\nq(h.afterAdd,F)}})();a.b(\"utils.setDomNodeChildrenFromArrayMapping\",a.a.ec);a.ba=function(){this.allowTemplateRewriting=!1};a.ba.prototype=new a.ca;a.ba.prototype.constructor=a.ba;a.ba.prototype.renderTemplateSource=function(b,c,d,e){if(c=(9>a.a.W?0:b.nodes)?b.nodes():null)return a.a.la(c.cloneNode(!0).childNodes);b=b.text();return a.a.ua(b,e)};a.ba.Ma=new a.ba;a.gc(a.ba.Ma);a.b(\"nativeTemplateEngine\",a.ba);(function(){a.$a=function(){var a=this.Hd=function(){if(!v||!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf(\"__\"))return 2}catch(a){}return 1}();\r\nthis.renderTemplateSource=function(b,e,f,g){g=g||w;f=f||{};if(2>a)throw Error(\"Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.\");var h=b.data(\"precompiled\");h||(h=b.text()||\"\",h=v.template(null,\"{{ko_with $item.koBindingContext}}\"+h+\"{{/ko_with}}\"),b.data(\"precompiled\",h));b=[e.$data];e=v.extend({koBindingContext:e},f.templateOptions);e=v.tmpl(h,b,e);e.appendTo(g.createElement(\"div\"));v.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return\"{{ko_code ((function() { return \"+\r\na+\" })()) }}\"};this.addTemplate=function(a,b){w.write(\"<script type='text/html' id='\"+a+\"'>\"+b+\"\\x3c/script>\")};0<a&&(v.tmpl.tag.ko_code={open:\"__.push($1 || '');\"},v.tmpl.tag.ko_with={open:\"with($1) {\",close:\"} \"})};a.$a.prototype=new a.ca;a.$a.prototype.constructor=a.$a;var b=new a.$a;0<b.Hd&&a.gc(b);a.b(\"jqueryTmplTemplateEngine\",a.$a)})()})})();})();\r\n\n",
    ";(function(factory) {\n    //CommonJS\n    if (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\") {\n        factory(require(\"knockout\"), exports);\n    //AMD\n    } else if (typeof define === \"function\" && define.amd) {\n        define('vendor/knockout-postbox',[\"knockout\", \"exports\"], factory);\n    //normal script tag\n    } else {\n        factory(ko, ko.postbox = {});\n    }\n}(function(ko, exports, undefined) {\n    var disposeTopicSubscription, existingSubscribe,\n        subscriptions = {},\n        subId = 1;\n\n    exports.subscriptions = subscriptions;\n\n    //create a global postbox that supports subscribing/publishing\n    ko.subscribable.call(exports);\n\n    //keep a cache of the latest value and subscribers\n    exports.topicCache = {};\n\n    //allow customization of the function used to serialize values for the topic cache\n    exports.serializer = ko.toJSON;\n\n    //wrap notifySubscribers passing topic first and caching latest value\n    exports.publish = function(topic, value) {\n        if (topic) {\n            //keep the value and a serialized version for comparison\n            exports.topicCache[topic] = {\n                value: value,\n                serialized: exports.serializer(value)\n            };\n            exports.notifySubscribers(value, topic);\n        }\n    };\n\n    //provide a subscribe API for the postbox that takes in the topic as first arg\n    existingSubscribe = exports.subscribe;\n    exports.subscribe = function(topic, action, target, initializeWithLatestValue) {\n        var subscription, current, existingDispose;\n\n        if (topic) {\n            if (typeof target === \"boolean\") {\n                initializeWithLatestValue = target;\n                target = undefined;\n            }\n\n            subscription = existingSubscribe.call(exports, action, target, topic);\n            subscription.subId = ++subId;\n            subscriptions[ subId ] = subscription;\n\n            if (initializeWithLatestValue) {\n                current = exports.topicCache[topic];\n\n                if (current !== undefined) {\n                    action.call(target, current.value);\n                }\n            }\n\n            existingDispose = subscription.dispose;\n            subscription.dispose = function() {\n                delete subscriptions[subscription.subId];\n                existingDispose.call(subscription);\n            };\n\n            return subscription;\n        }\n    };\n\n    //clean up all subscriptions and references\n    exports.reset = function() {\n        var subscription;\n\n        for (var id in subscriptions) {\n            if (subscriptions.hasOwnProperty(id)) {\n                subscription = subscriptions[id];\n\n                if (subscription && typeof subscription.dispose === \"function\") {\n                    subscription.dispose();\n                }\n            }\n        }\n\n        exports.topicCache = {};\n    };\n\n    //by default publish when the previous cached value does not equal the new value\n    exports.defaultComparer = function(newValue, cacheItem) {\n        return cacheItem && exports.serializer(newValue) === cacheItem.serialized;\n    };\n\n    //augment observables/computeds with the ability to automatically publish updates on a topic\n    ko.subscribable.fn.publishOn = function(topic, skipInitialOrEqualityComparer, equalityComparer) {\n        var skipInitialPublish, subscription, existingDispose;\n\n        if (topic) {\n            //allow passing the equalityComparer as the second argument\n            if (typeof skipInitialOrEqualityComparer === \"function\") {\n                equalityComparer = skipInitialOrEqualityComparer;\n            } else {\n                skipInitialPublish = skipInitialOrEqualityComparer;\n            }\n\n            equalityComparer = equalityComparer || exports.defaultComparer;\n\n            //remove any existing subs\n            disposeTopicSubscription.call(this, topic, \"publishOn\");\n\n            //keep a reference to the subscription, so we can stop publishing\n            subscription = this.subscribe(function(newValue) {\n                if (!equalityComparer.call(this, newValue, exports.topicCache[topic])) {\n                    exports.publish(topic, newValue);\n                }\n            }, this);\n\n            //track the subscription in case of a reset\n            subscription.id = ++subId;\n            subscriptions[subId] = subscription;\n\n            //ensure that we cleanup pointers to subscription on dispose\n            existingDispose = subscription.dispose;\n            subscription.dispose = function() {\n                delete this.postboxSubs[topic].publishOn;\n                delete subscriptions[subscription.id];\n\n                existingDispose.call(subscription);\n            }.bind(this);\n\n            this.postboxSubs[topic].publishOn = subscription;\n\n            //do an initial publish\n            if (!skipInitialPublish) {\n                exports.publish(topic, this());\n            }\n        }\n\n        return this;\n    };\n\n    //handle disposing a subscription used to publish or subscribe to a topic\n    disposeTopicSubscription = function(topic, type) {\n        var subs = this.postboxSubs = this.postboxSubs || {};\n        subs[topic] = subs[topic] || {};\n\n        if (subs[topic][type]) {\n            subs[topic][type].dispose();\n        }\n    };\n\n    //discontinue automatically publishing on a topic\n    ko.subscribable.fn.stopPublishingOn = function(topic) {\n        disposeTopicSubscription.call(this, topic, \"publishOn\");\n\n        return this;\n    };\n\n    //augment observables/computeds to automatically be updated by notifications on a topic\n    ko.subscribable.fn.subscribeTo = function(topic, initializeWithLatestValueOrTransform, transform) {\n        var initializeWithLatestValue, current, callback, subscription, existingDispose,\n            self = this;\n\n        //allow passing the filter as the second argument\n        if (typeof initializeWithLatestValueOrTransform === \"function\") {\n            transform = initializeWithLatestValueOrTransform;\n        } else {\n            initializeWithLatestValue = initializeWithLatestValueOrTransform;\n        }\n\n        if (topic && ko.isWriteableObservable(this)) {\n            //remove any existing subs\n            disposeTopicSubscription.call(this, topic, \"subscribeTo\");\n\n            //if specified, apply a filter function in the subscription\n            callback = function(newValue) {\n                self(transform ? transform.call(self, newValue) : newValue);\n            };\n\n            ////keep a reference to the subscription, so we can unsubscribe, if necessary\n            subscription = exports.subscribe(topic, callback);\n            this.postboxSubs[topic].subscribeTo = subscription;\n\n            //ensure that we cleanup pointers to subscription on dispose\n            existingDispose = subscription.dispose;\n            subscription.dispose = function() {\n                delete this.postboxSubs[topic].subscribeTo;\n                existingDispose.call(subscription);\n            }.bind(this);\n\n            if (initializeWithLatestValue) {\n                current = exports.topicCache[topic];\n\n                if (current !== undefined) {\n                    callback(current.value);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    //discontinue receiving updates on a topic\n    ko.subscribable.fn.unsubscribeFrom = function(topic) {\n        disposeTopicSubscription.call(this, topic, \"subscribeTo\");\n\n        return this;\n    };\n\n    // both subscribe and publish on the same topic\n    //   -allows the ability to sync an observable/writeable computed/observableArray between view models\n    //   -subscribeTo should really not use a filter function, as it would likely cause infinite recursion\n    ko.subscribable.fn.syncWith = function(topic, initializeWithLatestValue, skipInitialOrEqualityComparer, equalityComparer) {\n        this.subscribeTo(topic, initializeWithLatestValue).publishOn(topic, skipInitialOrEqualityComparer, equalityComparer);\n\n        return this;\n    };\n\n    ko.postbox = exports;\n}));\n\n",
    "/*!\r\n * jQuery JavaScript Library v3.5.1\r\n * https://jquery.com/\r\n *\r\n * Includes Sizzle.js\r\n * https://sizzlejs.com/\r\n *\r\n * Copyright JS Foundation and other contributors\r\n * Released under the MIT license\r\n * https://jquery.org/license\r\n *\r\n * Date: 2020-05-04T22:49Z\r\n */\r\n(function (global, factory) {\r\n\r\n    \"use strict\";\r\n\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n\r\n        // For CommonJS and CommonJS-like environments where a proper `window`\r\n        // is present, execute the factory and get jQuery.\r\n        // For environments that do not have a `window` with a `document`\r\n        // (such as Node.js), expose a factory as module.exports.\r\n        // This accentuates the need for the creation of a real `window`.\r\n        // e.g. var jQuery = require(\"jquery\")(window);\r\n        // See ticket #14549 for more info.\r\n        module.exports = global.document ?\r\n            factory(global, true) :\r\n            function (w) {\r\n                if (!w.document) {\r\n                    throw new Error(\"jQuery requires a window with a document\");\r\n                }\r\n                return factory(w);\r\n            };\r\n    } else {\r\n        factory(global);\r\n    }\r\n\r\n    // Pass this if window is not defined yet\r\n})(typeof window !== \"undefined\" ? window : this, function (window, noGlobal) {\r\n\r\n    // Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\r\n    // throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\r\n    // arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\r\n    // enough that all such attempts are guarded in a try block.\r\n    \"use strict\";\r\n\r\n    var arr = [];\r\n\r\n    var getProto = Object.getPrototypeOf;\r\n\r\n    var slice = arr.slice;\r\n\r\n    var flat = arr.flat ? function (array) {\r\n        return arr.flat.call(array);\r\n    } : function (array) {\r\n        return arr.concat.apply([], array);\r\n    };\r\n\r\n\r\n    var push = arr.push;\r\n\r\n    var indexOf = arr.indexOf;\r\n\r\n    var class2type = {};\r\n\r\n    var toString = class2type.toString;\r\n\r\n    var hasOwn = class2type.hasOwnProperty;\r\n\r\n    var fnToString = hasOwn.toString;\r\n\r\n    var ObjectFunctionString = fnToString.call(Object);\r\n\r\n    var support = {};\r\n\r\n    var isFunction = function isFunction(obj) {\r\n\r\n        // Support: Chrome <=57, Firefox <=52\r\n        // In some browsers, typeof returns \"function\" for HTML <object> elements\r\n        // (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\r\n        // We don't want to classify *any* DOM node as a function.\r\n        return typeof obj === \"function\" && typeof obj.nodeType !== \"number\";\r\n    };\r\n\r\n\r\n    var isWindow = function isWindow(obj) {\r\n        return obj != null && obj === obj.window;\r\n    };\r\n\r\n\r\n    var document = window.document;\r\n\r\n\r\n\r\n    var preservedScriptAttributes = {\r\n        type: true,\r\n        src: true,\r\n        nonce: true,\r\n        noModule: true\r\n    };\r\n\r\n    function DOMEval(code, node, doc) {\r\n        doc = doc || document;\r\n\r\n        var i, val,\r\n            script = doc.createElement(\"script\");\r\n\r\n        script.text = code;\r\n        if (node) {\r\n            for (i in preservedScriptAttributes) {\r\n\r\n                // Support: Firefox 64+, Edge 18+\r\n                // Some browsers don't support the \"nonce\" property on scripts.\r\n                // On the other hand, just using `getAttribute` is not enough as\r\n                // the `nonce` attribute is reset to an empty string whenever it\r\n                // becomes browsing-context connected.\r\n                // See https://github.com/whatwg/html/issues/2369\r\n                // See https://html.spec.whatwg.org/#nonce-attributes\r\n                // The `node.getAttribute` check was added for the sake of\r\n                // `jQuery.globalEval` so that it can fake a nonce-containing node\r\n                // via an object.\r\n                val = node[i] || node.getAttribute && node.getAttribute(i);\r\n                if (val) {\r\n                    script.setAttribute(i, val);\r\n                }\r\n            }\r\n        }\r\n        doc.head.appendChild(script).parentNode.removeChild(script);\r\n    }\r\n\r\n\r\n    function toType(obj) {\r\n        if (obj == null) {\r\n            return obj + \"\";\r\n        }\r\n\r\n        // Support: Android <=2.3 only (functionish RegExp)\r\n        return typeof obj === \"object\" || typeof obj === \"function\" ?\r\n            class2type[toString.call(obj)] || \"object\" :\r\n            typeof obj;\r\n    }\r\n    /* global Symbol */\r\n    // Defining this global in .eslintrc.json would create a danger of using the global\r\n    // unguarded in another place, it seems safer to define global only for this module\r\n\r\n\r\n\r\n    var\r\n        version = \"3.5.1\",\r\n\r\n        // Define a local copy of jQuery\r\n        jQuery = function (selector, context) {\r\n\r\n            // The jQuery object is actually just the init constructor 'enhanced'\r\n            // Need init if jQuery is called (just allow error to be thrown if not included)\r\n            return new jQuery.fn.init(selector, context);\r\n        };\r\n\r\n    jQuery.fn = jQuery.prototype = {\r\n\r\n        // The current version of jQuery being used\r\n        jquery: version,\r\n\r\n        constructor: jQuery,\r\n\r\n        // The default length of a jQuery object is 0\r\n        length: 0,\r\n\r\n        toArray: function () {\r\n            return slice.call(this);\r\n        },\r\n\r\n        // Get the Nth element in the matched element set OR\r\n        // Get the whole matched element set as a clean array\r\n        get: function (num) {\r\n\r\n            // Return all the elements in a clean array\r\n            if (num == null) {\r\n                return slice.call(this);\r\n            }\r\n\r\n            // Return just the one element from the set\r\n            return num < 0 ? this[num + this.length] : this[num];\r\n        },\r\n\r\n        // Take an array of elements and push it onto the stack\r\n        // (returning the new matched element set)\r\n        pushStack: function (elems) {\r\n\r\n            // Build a new jQuery matched element set\r\n            var ret = jQuery.merge(this.constructor(), elems);\r\n\r\n            // Add the old object onto the stack (as a reference)\r\n            ret.prevObject = this;\r\n\r\n            // Return the newly-formed element set\r\n            return ret;\r\n        },\r\n\r\n        // Execute a callback for every element in the matched set.\r\n        each: function (callback) {\r\n            return jQuery.each(this, callback);\r\n        },\r\n\r\n        map: function (callback) {\r\n            return this.pushStack(jQuery.map(this, function (elem, i) {\r\n                return callback.call(elem, i, elem);\r\n            }));\r\n        },\r\n\r\n        slice: function () {\r\n            return this.pushStack(slice.apply(this, arguments));\r\n        },\r\n\r\n        first: function () {\r\n            return this.eq(0);\r\n        },\r\n\r\n        last: function () {\r\n            return this.eq(-1);\r\n        },\r\n\r\n        even: function () {\r\n            return this.pushStack(jQuery.grep(this, function (_elem, i) {\r\n                return (i + 1) % 2;\r\n            }));\r\n        },\r\n\r\n        odd: function () {\r\n            return this.pushStack(jQuery.grep(this, function (_elem, i) {\r\n                return i % 2;\r\n            }));\r\n        },\r\n\r\n        eq: function (i) {\r\n            var len = this.length,\r\n                j = +i + (i < 0 ? len : 0);\r\n            return this.pushStack(j >= 0 && j < len ? [this[j]] : []);\r\n        },\r\n\r\n        end: function () {\r\n            return this.prevObject || this.constructor();\r\n        },\r\n\r\n        // For internal use only.\r\n        // Behaves like an Array's method, not like a jQuery method.\r\n        push: push,\r\n        sort: arr.sort,\r\n        splice: arr.splice\r\n    };\r\n\r\n    jQuery.extend = jQuery.fn.extend = function () {\r\n        var options, name, src, copy, copyIsArray, clone,\r\n            target = arguments[0] || {},\r\n            i = 1,\r\n            length = arguments.length,\r\n            deep = false;\r\n\r\n        // Handle a deep copy situation\r\n        if (typeof target === \"boolean\") {\r\n            deep = target;\r\n\r\n            // Skip the boolean and the target\r\n            target = arguments[i] || {};\r\n            i++;\r\n        }\r\n\r\n        // Handle case when target is a string or something (possible in deep copy)\r\n        if (typeof target !== \"object\" && !isFunction(target)) {\r\n            target = {};\r\n        }\r\n\r\n        // Extend jQuery itself if only one argument is passed\r\n        if (i === length) {\r\n            target = this;\r\n            i--;\r\n        }\r\n\r\n        for (; i < length; i++) {\r\n\r\n            // Only deal with non-null/undefined values\r\n            if ((options = arguments[i]) != null) {\r\n\r\n                // Extend the base object\r\n                for (name in options) {\r\n                    copy = options[name];\r\n\r\n                    // Prevent Object.prototype pollution\r\n                    // Prevent never-ending loop\r\n                    if (name === \"__proto__\" || target === copy) {\r\n                        continue;\r\n                    }\r\n\r\n                    // Recurse if we're merging plain objects or arrays\r\n                    if (deep && copy && (jQuery.isPlainObject(copy) ||\r\n                        (copyIsArray = Array.isArray(copy)))) {\r\n                        src = target[name];\r\n\r\n                        // Ensure proper type for the source value\r\n                        if (copyIsArray && !Array.isArray(src)) {\r\n                            clone = [];\r\n                        } else if (!copyIsArray && !jQuery.isPlainObject(src)) {\r\n                            clone = {};\r\n                        } else {\r\n                            clone = src;\r\n                        }\r\n                        copyIsArray = false;\r\n\r\n                        // Never move original objects, clone them\r\n                        target[name] = jQuery.extend(deep, clone, copy);\r\n\r\n                        // Don't bring in undefined values\r\n                    } else if (copy !== undefined) {\r\n                        target[name] = copy;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Return the modified object\r\n        return target;\r\n    };\r\n\r\n    jQuery.extend({\r\n\r\n        // Unique for each copy of jQuery on the page\r\n        expando: \"jQuery\" + (version + Math.random()).replace(/\\D/g, \"\"),\r\n\r\n        // Assume jQuery is ready without the ready module\r\n        isReady: true,\r\n\r\n        error: function (msg) {\r\n            throw new Error(msg);\r\n        },\r\n\r\n        noop: function () { },\r\n\r\n        isPlainObject: function (obj) {\r\n            var proto, Ctor;\r\n\r\n            // Detect obvious negatives\r\n            // Use toString instead of jQuery.type to catch host objects\r\n            if (!obj || toString.call(obj) !== \"[object Object]\") {\r\n                return false;\r\n            }\r\n\r\n            proto = getProto(obj);\r\n\r\n            // Objects with no prototype (e.g., `Object.create( null )`) are plain\r\n            if (!proto) {\r\n                return true;\r\n            }\r\n\r\n            // Objects with prototype are plain iff they were constructed by a global Object function\r\n            Ctor = hasOwn.call(proto, \"constructor\") && proto.constructor;\r\n            return typeof Ctor === \"function\" && fnToString.call(Ctor) === ObjectFunctionString;\r\n        },\r\n\r\n        isEmptyObject: function (obj) {\r\n            var name;\r\n\r\n            for (name in obj) {\r\n                return false;\r\n            }\r\n            return true;\r\n        },\r\n\r\n        // Evaluates a script in a provided context; falls back to the global one\r\n        // if not specified.\r\n        globalEval: function (code, options, doc) {\r\n            DOMEval(code, { nonce: options && options.nonce }, doc);\r\n        },\r\n\r\n        each: function (obj, callback) {\r\n            var length, i = 0;\r\n\r\n            if (isArrayLike(obj)) {\r\n                length = obj.length;\r\n                for (; i < length; i++) {\r\n                    if (callback.call(obj[i], i, obj[i]) === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                for (i in obj) {\r\n                    if (callback.call(obj[i], i, obj[i]) === false) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return obj;\r\n        },\r\n\r\n        // results is for internal usage only\r\n        makeArray: function (arr, results) {\r\n            var ret = results || [];\r\n\r\n            if (arr != null) {\r\n                if (isArrayLike(Object(arr))) {\r\n                    jQuery.merge(ret,\r\n                        typeof arr === \"string\" ?\r\n                            [arr] : arr\r\n                    );\r\n                } else {\r\n                    push.call(ret, arr);\r\n                }\r\n            }\r\n\r\n            return ret;\r\n        },\r\n\r\n        inArray: function (elem, arr, i) {\r\n            return arr == null ? -1 : indexOf.call(arr, elem, i);\r\n        },\r\n\r\n        // Support: Android <=4.0 only, PhantomJS 1 only\r\n        // push.apply(_, arraylike) throws on ancient WebKit\r\n        merge: function (first, second) {\r\n            var len = +second.length,\r\n                j = 0,\r\n                i = first.length;\r\n\r\n            for (; j < len; j++) {\r\n                first[i++] = second[j];\r\n            }\r\n\r\n            first.length = i;\r\n\r\n            return first;\r\n        },\r\n\r\n        grep: function (elems, callback, invert) {\r\n            var callbackInverse,\r\n                matches = [],\r\n                i = 0,\r\n                length = elems.length,\r\n                callbackExpect = !invert;\r\n\r\n            // Go through the array, only saving the items\r\n            // that pass the validator function\r\n            for (; i < length; i++) {\r\n                callbackInverse = !callback(elems[i], i);\r\n                if (callbackInverse !== callbackExpect) {\r\n                    matches.push(elems[i]);\r\n                }\r\n            }\r\n\r\n            return matches;\r\n        },\r\n\r\n        // arg is for internal usage only\r\n        map: function (elems, callback, arg) {\r\n            var length, value,\r\n                i = 0,\r\n                ret = [];\r\n\r\n            // Go through the array, translating each of the items to their new values\r\n            if (isArrayLike(elems)) {\r\n                length = elems.length;\r\n                for (; i < length; i++) {\r\n                    value = callback(elems[i], i, arg);\r\n\r\n                    if (value != null) {\r\n                        ret.push(value);\r\n                    }\r\n                }\r\n\r\n                // Go through every key on the object,\r\n            } else {\r\n                for (i in elems) {\r\n                    value = callback(elems[i], i, arg);\r\n\r\n                    if (value != null) {\r\n                        ret.push(value);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Flatten any nested arrays\r\n            return flat(ret);\r\n        },\r\n\r\n        // A global GUID counter for objects\r\n        guid: 1,\r\n\r\n        // jQuery.support is not used in Core but other projects attach their\r\n        // properties to it so it needs to exist.\r\n        support: support\r\n    });\r\n\r\n    if (typeof Symbol === \"function\") {\r\n        jQuery.fn[Symbol.iterator] = arr[Symbol.iterator];\r\n    }\r\n\r\n    // Populate the class2type map\r\n    jQuery.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),\r\n        function (_i, name) {\r\n            class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\r\n        });\r\n\r\n    function isArrayLike(obj) {\r\n\r\n        // Support: real iOS 8.2 only (not reproducible in simulator)\r\n        // `in` check used to prevent JIT error (gh-2145)\r\n        // hasOwn isn't used here due to false negatives\r\n        // regarding Nodelist length in IE\r\n        var length = !!obj && \"length\" in obj && obj.length,\r\n            type = toType(obj);\r\n\r\n        if (isFunction(obj) || isWindow(obj)) {\r\n            return false;\r\n        }\r\n\r\n        return type === \"array\" || length === 0 ||\r\n            typeof length === \"number\" && length > 0 && (length - 1) in obj;\r\n    }\r\n    var Sizzle =\r\n        /*!\r\n         * Sizzle CSS Selector Engine v2.3.5\r\n         * https://sizzlejs.com/\r\n         *\r\n         * Copyright JS Foundation and other contributors\r\n         * Released under the MIT license\r\n         * https://js.foundation/\r\n         *\r\n         * Date: 2020-03-14\r\n         */\r\n        (function (window) {\r\n            var i,\r\n                support,\r\n                Expr,\r\n                getText,\r\n                isXML,\r\n                tokenize,\r\n                compile,\r\n                select,\r\n                outermostContext,\r\n                sortInput,\r\n                hasDuplicate,\r\n\r\n                // Local document vars\r\n                setDocument,\r\n                document,\r\n                docElem,\r\n                documentIsHTML,\r\n                rbuggyQSA,\r\n                rbuggyMatches,\r\n                matches,\r\n                contains,\r\n\r\n                // Instance-specific data\r\n                expando = \"sizzle\" + 1 * new Date(),\r\n                preferredDoc = window.document,\r\n                dirruns = 0,\r\n                done = 0,\r\n                classCache = createCache(),\r\n                tokenCache = createCache(),\r\n                compilerCache = createCache(),\r\n                nonnativeSelectorCache = createCache(),\r\n                sortOrder = function (a, b) {\r\n                    if (a === b) {\r\n                        hasDuplicate = true;\r\n                    }\r\n                    return 0;\r\n                },\r\n\r\n                // Instance methods\r\n                hasOwn = ({}).hasOwnProperty,\r\n                arr = [],\r\n                pop = arr.pop,\r\n                pushNative = arr.push,\r\n                push = arr.push,\r\n                slice = arr.slice,\r\n\r\n                // Use a stripped-down indexOf as it's faster than native\r\n                // https://jsperf.com/thor-indexof-vs-for/5\r\n                indexOf = function (list, elem) {\r\n                    var i = 0,\r\n                        len = list.length;\r\n                    for (; i < len; i++) {\r\n                        if (list[i] === elem) {\r\n                            return i;\r\n                        }\r\n                    }\r\n                    return -1;\r\n                },\r\n\r\n                booleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|\" +\r\n                    \"ismap|loop|multiple|open|readonly|required|scoped\",\r\n\r\n                // Regular expressions\r\n\r\n                // http://www.w3.org/TR/css3-selectors/#whitespace\r\n                whitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\r\n\r\n                // https://www.w3.org/TR/css-syntax-3/#ident-token-diagram\r\n                identifier = \"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\r\n                    \"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",\r\n\r\n                // Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\r\n                attributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\r\n\r\n                    // Operator (capture 2)\r\n                    \"*([*^$|!~]?=)\" + whitespace +\r\n\r\n                    // \"Attribute values must be CSS identifiers [capture 5]\r\n                    // or strings [capture 3 or capture 4]\"\r\n                    \"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" +\r\n                    whitespace + \"*\\\\]\",\r\n\r\n                pseudos = \":(\" + identifier + \")(?:\\\\((\" +\r\n\r\n                    // To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\r\n                    // 1. quoted (capture 3; capture 4 or capture 5)\r\n                    \"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\r\n\r\n                    // 2. simple (capture 6)\r\n                    \"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\r\n\r\n                    // 3. anything else (capture 2)\r\n                    \".*\" +\r\n                    \")\\\\)|)\",\r\n\r\n                // Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\r\n                rwhitespace = new RegExp(whitespace + \"+\", \"g\"),\r\n                rtrim = new RegExp(\"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" +\r\n                    whitespace + \"+$\", \"g\"),\r\n\r\n                rcomma = new RegExp(\"^\" + whitespace + \"*,\" + whitespace + \"*\"),\r\n                rcombinators = new RegExp(\"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace +\r\n                    \"*\"),\r\n                rdescend = new RegExp(whitespace + \"|>\"),\r\n\r\n                rpseudo = new RegExp(pseudos),\r\n                ridentifier = new RegExp(\"^\" + identifier + \"$\"),\r\n\r\n                matchExpr = {\r\n                    \"ID\": new RegExp(\"^#(\" + identifier + \")\"),\r\n                    \"CLASS\": new RegExp(\"^\\\\.(\" + identifier + \")\"),\r\n                    \"TAG\": new RegExp(\"^(\" + identifier + \"|[*])\"),\r\n                    \"ATTR\": new RegExp(\"^\" + attributes),\r\n                    \"PSEUDO\": new RegExp(\"^\" + pseudos),\r\n                    \"CHILD\": new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" +\r\n                        whitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" +\r\n                        whitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\"),\r\n                    \"bool\": new RegExp(\"^(?:\" + booleans + \")$\", \"i\"),\r\n\r\n                    // For use in libraries implementing .is()\r\n                    // We use this for POS matching in `select`\r\n                    \"needsContext\": new RegExp(\"^\" + whitespace +\r\n                        \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\r\n                        \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\")\r\n                },\r\n\r\n                rhtml = /HTML$/i,\r\n                rinputs = /^(?:input|select|textarea|button)$/i,\r\n                rheader = /^h\\d$/i,\r\n\r\n                rnative = /^[^{]+\\{\\s*\\[native \\w/,\r\n\r\n                // Easily-parseable/retrievable ID or TAG or CLASS selectors\r\n                rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\r\n\r\n                rsibling = /[+~]/,\r\n\r\n                // CSS escapes\r\n                // http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\r\n                runescape = new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace + \"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\", \"g\"),\r\n                funescape = function (escape, nonHex) {\r\n                    var high = \"0x\" + escape.slice(1) - 0x10000;\r\n\r\n                    return nonHex ?\r\n\r\n                        // Strip the backslash prefix from a non-hex escape sequence\r\n                        nonHex :\r\n\r\n                        // Replace a hexadecimal escape sequence with the encoded Unicode code point\r\n                        // Support: IE <=11+\r\n                        // For values outside the Basic Multilingual Plane (BMP), manually construct a\r\n                        // surrogate pair\r\n                        high < 0 ?\r\n                            String.fromCharCode(high + 0x10000) :\r\n                            String.fromCharCode(high >> 10 | 0xD800, high & 0x3FF | 0xDC00);\r\n                },\r\n\r\n                // CSS string/identifier serialization\r\n                // https://drafts.csswg.org/cssom/#common-serializing-idioms\r\n                rcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\r\n                fcssescape = function (ch, asCodePoint) {\r\n                    if (asCodePoint) {\r\n\r\n                        // U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\r\n                        if (ch === \"\\0\") {\r\n                            return \"\\uFFFD\";\r\n                        }\r\n\r\n                        // Control characters and (dependent upon position) numbers get escaped as code points\r\n                        return ch.slice(0, -1) + \"\\\\\" +\r\n                            ch.charCodeAt(ch.length - 1).toString(16) + \" \";\r\n                    }\r\n\r\n                    // Other potentially-special ASCII characters get backslash-escaped\r\n                    return \"\\\\\" + ch;\r\n                },\r\n\r\n                // Used for iframes\r\n                // See setDocument()\r\n                // Removing the function wrapper causes a \"Permission Denied\"\r\n                // error in IE\r\n                unloadHandler = function () {\r\n                    setDocument();\r\n                },\r\n\r\n                inDisabledFieldset = addCombinator(\r\n                    function (elem) {\r\n                        return elem.disabled === true && elem.nodeName.toLowerCase() === \"fieldset\";\r\n                    },\r\n                    { dir: \"parentNode\", next: \"legend\" }\r\n                );\r\n\r\n            // Optimize for push.apply( _, NodeList )\r\n            try {\r\n                push.apply(\r\n                    (arr = slice.call(preferredDoc.childNodes)),\r\n                    preferredDoc.childNodes\r\n                );\r\n\r\n                // Support: Android<4.0\r\n                // Detect silently failing push.apply\r\n                // eslint-disable-next-line no-unused-expressions\r\n                arr[preferredDoc.childNodes.length].nodeType;\r\n            } catch (e) {\r\n                push = {\r\n                    apply: arr.length ?\r\n\r\n                        // Leverage slice if possible\r\n                        function (target, els) {\r\n                            pushNative.apply(target, slice.call(els));\r\n                        } :\r\n\r\n                        // Support: IE<9\r\n                        // Otherwise append directly\r\n                        function (target, els) {\r\n                            var j = target.length,\r\n                                i = 0;\r\n\r\n                            // Can't trust NodeList.length\r\n                            while ((target[j++] = els[i++])) { }\r\n                            target.length = j - 1;\r\n                        }\r\n                };\r\n            }\r\n\r\n            function Sizzle(selector, context, results, seed) {\r\n                var m, i, elem, nid, match, groups, newSelector,\r\n                    newContext = context && context.ownerDocument,\r\n\r\n                    // nodeType defaults to 9, since context defaults to document\r\n                    nodeType = context ? context.nodeType : 9;\r\n\r\n                results = results || [];\r\n\r\n                // Return early from calls with invalid selector or context\r\n                if (typeof selector !== \"string\" || !selector ||\r\n                    nodeType !== 1 && nodeType !== 9 && nodeType !== 11) {\r\n\r\n                    return results;\r\n                }\r\n\r\n                // Try to shortcut find operations (as opposed to filters) in HTML documents\r\n                if (!seed) {\r\n                    setDocument(context);\r\n                    context = context || document;\r\n\r\n                    if (documentIsHTML) {\r\n\r\n                        // If the selector is sufficiently simple, try using a \"get*By*\" DOM method\r\n                        // (excepting DocumentFragment context, where the methods don't exist)\r\n                        if (nodeType !== 11 && (match = rquickExpr.exec(selector))) {\r\n\r\n                            // ID selector\r\n                            if ((m = match[1])) {\r\n\r\n                                // Document context\r\n                                if (nodeType === 9) {\r\n                                    if ((elem = context.getElementById(m))) {\r\n\r\n                                        // Support: IE, Opera, Webkit\r\n                                        // TODO: identify versions\r\n                                        // getElementById can match elements by name instead of ID\r\n                                        if (elem.id === m) {\r\n                                            results.push(elem);\r\n                                            return results;\r\n                                        }\r\n                                    } else {\r\n                                        return results;\r\n                                    }\r\n\r\n                                    // Element context\r\n                                } else {\r\n\r\n                                    // Support: IE, Opera, Webkit\r\n                                    // TODO: identify versions\r\n                                    // getElementById can match elements by name instead of ID\r\n                                    if (newContext && (elem = newContext.getElementById(m)) &&\r\n                                        contains(context, elem) &&\r\n                                        elem.id === m) {\r\n\r\n                                        results.push(elem);\r\n                                        return results;\r\n                                    }\r\n                                }\r\n\r\n                                // Type selector\r\n                            } else if (match[2]) {\r\n                                push.apply(results, context.getElementsByTagName(selector));\r\n                                return results;\r\n\r\n                                // Class selector\r\n                            } else if ((m = match[3]) && support.getElementsByClassName &&\r\n                                context.getElementsByClassName) {\r\n\r\n                                push.apply(results, context.getElementsByClassName(m));\r\n                                return results;\r\n                            }\r\n                        }\r\n\r\n                        // Take advantage of querySelectorAll\r\n                        if (support.qsa &&\r\n                            !nonnativeSelectorCache[selector + \" \"] &&\r\n                            (!rbuggyQSA || !rbuggyQSA.test(selector)) &&\r\n\r\n                            // Support: IE 8 only\r\n                            // Exclude object elements\r\n                            (nodeType !== 1 || context.nodeName.toLowerCase() !== \"object\")) {\r\n\r\n                            newSelector = selector;\r\n                            newContext = context;\r\n\r\n                            // qSA considers elements outside a scoping root when evaluating child or\r\n                            // descendant combinators, which is not what we want.\r\n                            // In such cases, we work around the behavior by prefixing every selector in the\r\n                            // list with an ID selector referencing the scope context.\r\n                            // The technique has to be used as well when a leading combinator is used\r\n                            // as such selectors are not recognized by querySelectorAll.\r\n                            // Thanks to Andrew Dupont for this technique.\r\n                            if (nodeType === 1 &&\r\n                                (rdescend.test(selector) || rcombinators.test(selector))) {\r\n\r\n                                // Expand context for sibling selectors\r\n                                newContext = rsibling.test(selector) && testContext(context.parentNode) ||\r\n                                    context;\r\n\r\n                                // We can use :scope instead of the ID hack if the browser\r\n                                // supports it & if we're not changing the context.\r\n                                if (newContext !== context || !support.scope) {\r\n\r\n                                    // Capture the context ID, setting it first if necessary\r\n                                    if ((nid = context.getAttribute(\"id\"))) {\r\n                                        nid = nid.replace(rcssescape, fcssescape);\r\n                                    } else {\r\n                                        context.setAttribute(\"id\", (nid = expando));\r\n                                    }\r\n                                }\r\n\r\n                                // Prefix every selector in the list\r\n                                groups = tokenize(selector);\r\n                                i = groups.length;\r\n                                while (i--) {\r\n                                    groups[i] = (nid ? \"#\" + nid : \":scope\") + \" \" +\r\n                                        toSelector(groups[i]);\r\n                                }\r\n                                newSelector = groups.join(\",\");\r\n                            }\r\n\r\n                            try {\r\n                                push.apply(results,\r\n                                    newContext.querySelectorAll(newSelector)\r\n                                );\r\n                                return results;\r\n                            } catch (qsaError) {\r\n                                nonnativeSelectorCache(selector, true);\r\n                            } finally {\r\n                                if (nid === expando) {\r\n                                    context.removeAttribute(\"id\");\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // All others\r\n                return select(selector.replace(rtrim, \"$1\"), context, results, seed);\r\n            }\r\n\r\n            /**\r\n             * Create key-value caches of limited size\r\n             * @returns {function(string, object)} Returns the Object data after storing it on itself with\r\n             *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\r\n             *\tdeleting the oldest entry\r\n             */\r\n            function createCache() {\r\n                var keys = [];\r\n\r\n                function cache(key, value) {\r\n\r\n                    // Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\r\n                    if (keys.push(key + \" \") > Expr.cacheLength) {\r\n\r\n                        // Only keep the most recent entries\r\n                        delete cache[keys.shift()];\r\n                    }\r\n                    return (cache[key + \" \"] = value);\r\n                }\r\n                return cache;\r\n            }\r\n\r\n            /**\r\n             * Mark a function for special use by Sizzle\r\n             * @param {Function} fn The function to mark\r\n             */\r\n            function markFunction(fn) {\r\n                fn[expando] = true;\r\n                return fn;\r\n            }\r\n\r\n            /**\r\n             * Support testing using an element\r\n             * @param {Function} fn Passed the created element and returns a boolean result\r\n             */\r\n            function assert(fn) {\r\n                var el = document.createElement(\"fieldset\");\r\n\r\n                try {\r\n                    return !!fn(el);\r\n                } catch (e) {\r\n                    return false;\r\n                } finally {\r\n\r\n                    // Remove from its parent by default\r\n                    if (el.parentNode) {\r\n                        el.parentNode.removeChild(el);\r\n                    }\r\n\r\n                    // release memory in IE\r\n                    el = null;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Adds the same handler for all of the specified attrs\r\n             * @param {String} attrs Pipe-separated list of attributes\r\n             * @param {Function} handler The method that will be applied\r\n             */\r\n            function addHandle(attrs, handler) {\r\n                var arr = attrs.split(\"|\"),\r\n                    i = arr.length;\r\n\r\n                while (i--) {\r\n                    Expr.attrHandle[arr[i]] = handler;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Checks document order of two siblings\r\n             * @param {Element} a\r\n             * @param {Element} b\r\n             * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\r\n             */\r\n            function siblingCheck(a, b) {\r\n                var cur = b && a,\r\n                    diff = cur && a.nodeType === 1 && b.nodeType === 1 &&\r\n                        a.sourceIndex - b.sourceIndex;\r\n\r\n                // Use IE sourceIndex if available on both nodes\r\n                if (diff) {\r\n                    return diff;\r\n                }\r\n\r\n                // Check if b follows a\r\n                if (cur) {\r\n                    while ((cur = cur.nextSibling)) {\r\n                        if (cur === b) {\r\n                            return -1;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return a ? 1 : -1;\r\n            }\r\n\r\n            /**\r\n             * Returns a function to use in pseudos for input types\r\n             * @param {String} type\r\n             */\r\n            function createInputPseudo(type) {\r\n                return function (elem) {\r\n                    var name = elem.nodeName.toLowerCase();\r\n                    return name === \"input\" && elem.type === type;\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Returns a function to use in pseudos for buttons\r\n             * @param {String} type\r\n             */\r\n            function createButtonPseudo(type) {\r\n                return function (elem) {\r\n                    var name = elem.nodeName.toLowerCase();\r\n                    return (name === \"input\" || name === \"button\") && elem.type === type;\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Returns a function to use in pseudos for :enabled/:disabled\r\n             * @param {Boolean} disabled true for :disabled; false for :enabled\r\n             */\r\n            function createDisabledPseudo(disabled) {\r\n\r\n                // Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\r\n                return function (elem) {\r\n\r\n                    // Only certain elements can match :enabled or :disabled\r\n                    // https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\r\n                    // https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\r\n                    if (\"form\" in elem) {\r\n\r\n                        // Check for inherited disabledness on relevant non-disabled elements:\r\n                        // * listed form-associated elements in a disabled fieldset\r\n                        //   https://html.spec.whatwg.org/multipage/forms.html#category-listed\r\n                        //   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\r\n                        // * option elements in a disabled optgroup\r\n                        //   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\r\n                        // All such elements have a \"form\" property.\r\n                        if (elem.parentNode && elem.disabled === false) {\r\n\r\n                            // Option elements defer to a parent optgroup if present\r\n                            if (\"label\" in elem) {\r\n                                if (\"label\" in elem.parentNode) {\r\n                                    return elem.parentNode.disabled === disabled;\r\n                                } else {\r\n                                    return elem.disabled === disabled;\r\n                                }\r\n                            }\r\n\r\n                            // Support: IE 6 - 11\r\n                            // Use the isDisabled shortcut property to check for disabled fieldset ancestors\r\n                            return elem.isDisabled === disabled ||\r\n\r\n                                // Where there is no isDisabled, check manually\r\n                                /* jshint -W018 */\r\n                                elem.isDisabled !== !disabled &&\r\n                                inDisabledFieldset(elem) === disabled;\r\n                        }\r\n\r\n                        return elem.disabled === disabled;\r\n\r\n                        // Try to winnow out elements that can't be disabled before trusting the disabled property.\r\n                        // Some victims get caught in our net (label, legend, menu, track), but it shouldn't\r\n                        // even exist on them, let alone have a boolean value.\r\n                    } else if (\"label\" in elem) {\r\n                        return elem.disabled === disabled;\r\n                    }\r\n\r\n                    // Remaining elements are neither :enabled nor :disabled\r\n                    return false;\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Returns a function to use in pseudos for positionals\r\n             * @param {Function} fn\r\n             */\r\n            function createPositionalPseudo(fn) {\r\n                return markFunction(function (argument) {\r\n                    argument = +argument;\r\n                    return markFunction(function (seed, matches) {\r\n                        var j,\r\n                            matchIndexes = fn([], seed.length, argument),\r\n                            i = matchIndexes.length;\r\n\r\n                        // Match elements found at the specified indexes\r\n                        while (i--) {\r\n                            if (seed[(j = matchIndexes[i])]) {\r\n                                seed[j] = !(matches[j] = seed[j]);\r\n                            }\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Checks a node for validity as a Sizzle context\r\n             * @param {Element|Object=} context\r\n             * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\r\n             */\r\n            function testContext(context) {\r\n                return context && typeof context.getElementsByTagName !== \"undefined\" && context;\r\n            }\r\n\r\n            // Expose support vars for convenience\r\n            support = Sizzle.support = {};\r\n\r\n            /**\r\n             * Detects XML nodes\r\n             * @param {Element|Object} elem An element or a document\r\n             * @returns {Boolean} True iff elem is a non-HTML XML node\r\n             */\r\n            isXML = Sizzle.isXML = function (elem) {\r\n                var namespace = elem.namespaceURI,\r\n                    docElem = (elem.ownerDocument || elem).documentElement;\r\n\r\n                // Support: IE <=8\r\n                // Assume HTML when documentElement doesn't yet exist, such as inside loading iframes\r\n                // https://bugs.jquery.com/ticket/4833\r\n                return !rhtml.test(namespace || docElem && docElem.nodeName || \"HTML\");\r\n            };\r\n\r\n            /**\r\n             * Sets document-related variables once based on the current document\r\n             * @param {Element|Object} [doc] An element or document object to use to set the document\r\n             * @returns {Object} Returns the current document\r\n             */\r\n            setDocument = Sizzle.setDocument = function (node) {\r\n                var hasCompare, subWindow,\r\n                    doc = node ? node.ownerDocument || node : preferredDoc;\r\n\r\n                // Return early if doc is invalid or already selected\r\n                // Support: IE 11+, Edge 17 - 18+\r\n                // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                // two documents; shallow comparisons work.\r\n                // eslint-disable-next-line eqeqeq\r\n                if (doc == document || doc.nodeType !== 9 || !doc.documentElement) {\r\n                    return document;\r\n                }\r\n\r\n                // Update global variables\r\n                document = doc;\r\n                docElem = document.documentElement;\r\n                documentIsHTML = !isXML(document);\r\n\r\n                // Support: IE 9 - 11+, Edge 12 - 18+\r\n                // Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\r\n                // Support: IE 11+, Edge 17 - 18+\r\n                // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                // two documents; shallow comparisons work.\r\n                // eslint-disable-next-line eqeqeq\r\n                if (preferredDoc != document &&\r\n                    (subWindow = document.defaultView) && subWindow.top !== subWindow) {\r\n\r\n                    // Support: IE 11, Edge\r\n                    if (subWindow.addEventListener) {\r\n                        subWindow.addEventListener(\"unload\", unloadHandler, false);\r\n\r\n                        // Support: IE 9 - 10 only\r\n                    } else if (subWindow.attachEvent) {\r\n                        subWindow.attachEvent(\"onunload\", unloadHandler);\r\n                    }\r\n                }\r\n\r\n                // Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,\r\n                // Safari 4 - 5 only, Opera <=11.6 - 12.x only\r\n                // IE/Edge & older browsers don't support the :scope pseudo-class.\r\n                // Support: Safari 6.0 only\r\n                // Safari 6.0 supports :scope but it's an alias of :root there.\r\n                support.scope = assert(function (el) {\r\n                    docElem.appendChild(el).appendChild(document.createElement(\"div\"));\r\n                    return typeof el.querySelectorAll !== \"undefined\" &&\r\n                        !el.querySelectorAll(\":scope fieldset div\").length;\r\n                });\r\n\r\n                /* Attributes\r\n                ---------------------------------------------------------------------- */\r\n\r\n                // Support: IE<8\r\n                // Verify that getAttribute really returns attributes and not properties\r\n                // (excepting IE8 booleans)\r\n                support.attributes = assert(function (el) {\r\n                    el.className = \"i\";\r\n                    return !el.getAttribute(\"className\");\r\n                });\r\n\r\n                /* getElement(s)By*\r\n                ---------------------------------------------------------------------- */\r\n\r\n                // Check if getElementsByTagName(\"*\") returns only elements\r\n                support.getElementsByTagName = assert(function (el) {\r\n                    el.appendChild(document.createComment(\"\"));\r\n                    return !el.getElementsByTagName(\"*\").length;\r\n                });\r\n\r\n                // Support: IE<9\r\n                support.getElementsByClassName = rnative.test(document.getElementsByClassName);\r\n\r\n                // Support: IE<10\r\n                // Check if getElementById returns elements by name\r\n                // The broken getElementById methods don't pick up programmatically-set names,\r\n                // so use a roundabout getElementsByName test\r\n                support.getById = assert(function (el) {\r\n                    docElem.appendChild(el).id = expando;\r\n                    return !document.getElementsByName || !document.getElementsByName(expando).length;\r\n                });\r\n\r\n                // ID filter and find\r\n                if (support.getById) {\r\n                    Expr.filter[\"ID\"] = function (id) {\r\n                        var attrId = id.replace(runescape, funescape);\r\n                        return function (elem) {\r\n                            return elem.getAttribute(\"id\") === attrId;\r\n                        };\r\n                    };\r\n                    Expr.find[\"ID\"] = function (id, context) {\r\n                        if (typeof context.getElementById !== \"undefined\" && documentIsHTML) {\r\n                            var elem = context.getElementById(id);\r\n                            return elem ? [elem] : [];\r\n                        }\r\n                    };\r\n                } else {\r\n                    Expr.filter[\"ID\"] = function (id) {\r\n                        var attrId = id.replace(runescape, funescape);\r\n                        return function (elem) {\r\n                            var node = typeof elem.getAttributeNode !== \"undefined\" &&\r\n                                elem.getAttributeNode(\"id\");\r\n                            return node && node.value === attrId;\r\n                        };\r\n                    };\r\n\r\n                    // Support: IE 6 - 7 only\r\n                    // getElementById is not reliable as a find shortcut\r\n                    Expr.find[\"ID\"] = function (id, context) {\r\n                        if (typeof context.getElementById !== \"undefined\" && documentIsHTML) {\r\n                            var node, i, elems,\r\n                                elem = context.getElementById(id);\r\n\r\n                            if (elem) {\r\n\r\n                                // Verify the id attribute\r\n                                node = elem.getAttributeNode(\"id\");\r\n                                if (node && node.value === id) {\r\n                                    return [elem];\r\n                                }\r\n\r\n                                // Fall back on getElementsByName\r\n                                elems = context.getElementsByName(id);\r\n                                i = 0;\r\n                                while ((elem = elems[i++])) {\r\n                                    node = elem.getAttributeNode(\"id\");\r\n                                    if (node && node.value === id) {\r\n                                        return [elem];\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            return [];\r\n                        }\r\n                    };\r\n                }\r\n\r\n                // Tag\r\n                Expr.find[\"TAG\"] = support.getElementsByTagName ?\r\n                    function (tag, context) {\r\n                        if (typeof context.getElementsByTagName !== \"undefined\") {\r\n                            return context.getElementsByTagName(tag);\r\n\r\n                            // DocumentFragment nodes don't have gEBTN\r\n                        } else if (support.qsa) {\r\n                            return context.querySelectorAll(tag);\r\n                        }\r\n                    } :\r\n\r\n                    function (tag, context) {\r\n                        var elem,\r\n                            tmp = [],\r\n                            i = 0,\r\n\r\n                            // By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\r\n                            results = context.getElementsByTagName(tag);\r\n\r\n                        // Filter out possible comments\r\n                        if (tag === \"*\") {\r\n                            while ((elem = results[i++])) {\r\n                                if (elem.nodeType === 1) {\r\n                                    tmp.push(elem);\r\n                                }\r\n                            }\r\n\r\n                            return tmp;\r\n                        }\r\n                        return results;\r\n                    };\r\n\r\n                // Class\r\n                Expr.find[\"CLASS\"] = support.getElementsByClassName && function (className, context) {\r\n                    if (typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML) {\r\n                        return context.getElementsByClassName(className);\r\n                    }\r\n                };\r\n\r\n                /* QSA/matchesSelector\r\n                ---------------------------------------------------------------------- */\r\n\r\n                // QSA and matchesSelector support\r\n\r\n                // matchesSelector(:active) reports false when true (IE9/Opera 11.5)\r\n                rbuggyMatches = [];\r\n\r\n                // qSa(:focus) reports false when true (Chrome 21)\r\n                // We allow this because of a bug in IE8/9 that throws an error\r\n                // whenever `document.activeElement` is accessed on an iframe\r\n                // So, we allow :focus to pass through QSA all the time to avoid the IE error\r\n                // See https://bugs.jquery.com/ticket/13378\r\n                rbuggyQSA = [];\r\n\r\n                if ((support.qsa = rnative.test(document.querySelectorAll))) {\r\n\r\n                    // Build QSA regex\r\n                    // Regex strategy adopted from Diego Perini\r\n                    assert(function (el) {\r\n\r\n                        var input;\r\n\r\n                        // Select is set to empty string on purpose\r\n                        // This is to test IE's treatment of not explicitly\r\n                        // setting a boolean content attribute,\r\n                        // since its presence should be enough\r\n                        // https://bugs.jquery.com/ticket/12359\r\n                        docElem.appendChild(el).innerHTML = \"<a id='\" + expando + \"'></a>\" +\r\n                            \"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\r\n                            \"<option selected=''></option></select>\";\r\n\r\n                        // Support: IE8, Opera 11-12.16\r\n                        // Nothing should be selected when empty strings follow ^= or $= or *=\r\n                        // The test attribute must be unknown in Opera but \"safe\" for WinRT\r\n                        // https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\r\n                        if (el.querySelectorAll(\"[msallowcapture^='']\").length) {\r\n                            rbuggyQSA.push(\"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\");\r\n                        }\r\n\r\n                        // Support: IE8\r\n                        // Boolean attributes and \"value\" are not treated correctly\r\n                        if (!el.querySelectorAll(\"[selected]\").length) {\r\n                            rbuggyQSA.push(\"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\");\r\n                        }\r\n\r\n                        // Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\r\n                        if (!el.querySelectorAll(\"[id~=\" + expando + \"-]\").length) {\r\n                            rbuggyQSA.push(\"~=\");\r\n                        }\r\n\r\n                        // Support: IE 11+, Edge 15 - 18+\r\n                        // IE 11/Edge don't find elements on a `[name='']` query in some cases.\r\n                        // Adding a temporary attribute to the document before the selection works\r\n                        // around the issue.\r\n                        // Interestingly, IE 10 & older don't seem to have the issue.\r\n                        input = document.createElement(\"input\");\r\n                        input.setAttribute(\"name\", \"\");\r\n                        el.appendChild(input);\r\n                        if (!el.querySelectorAll(\"[name='']\").length) {\r\n                            rbuggyQSA.push(\"\\\\[\" + whitespace + \"*name\" + whitespace + \"*=\" +\r\n                                whitespace + \"*(?:''|\\\"\\\")\");\r\n                        }\r\n\r\n                        // Webkit/Opera - :checked should return selected option elements\r\n                        // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\r\n                        // IE8 throws error here and will not see later tests\r\n                        if (!el.querySelectorAll(\":checked\").length) {\r\n                            rbuggyQSA.push(\":checked\");\r\n                        }\r\n\r\n                        // Support: Safari 8+, iOS 8+\r\n                        // https://bugs.webkit.org/show_bug.cgi?id=136851\r\n                        // In-page `selector#id sibling-combinator selector` fails\r\n                        if (!el.querySelectorAll(\"a#\" + expando + \"+*\").length) {\r\n                            rbuggyQSA.push(\".#.+[+~]\");\r\n                        }\r\n\r\n                        // Support: Firefox <=3.6 - 5 only\r\n                        // Old Firefox doesn't throw on a badly-escaped identifier.\r\n                        el.querySelectorAll(\"\\\\\\f\");\r\n                        rbuggyQSA.push(\"[\\\\r\\\\n\\\\f]\");\r\n                    });\r\n\r\n                    assert(function (el) {\r\n                        el.innerHTML = \"<a href='' disabled='disabled'></a>\" +\r\n                            \"<select disabled='disabled'><option/></select>\";\r\n\r\n                        // Support: Windows 8 Native Apps\r\n                        // The type and name attributes are restricted during .innerHTML assignment\r\n                        var input = document.createElement(\"input\");\r\n                        input.setAttribute(\"type\", \"hidden\");\r\n                        el.appendChild(input).setAttribute(\"name\", \"D\");\r\n\r\n                        // Support: IE8\r\n                        // Enforce case-sensitivity of name attribute\r\n                        if (el.querySelectorAll(\"[name=d]\").length) {\r\n                            rbuggyQSA.push(\"name\" + whitespace + \"*[*^$|!~]?=\");\r\n                        }\r\n\r\n                        // FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\r\n                        // IE8 throws error here and will not see later tests\r\n                        if (el.querySelectorAll(\":enabled\").length !== 2) {\r\n                            rbuggyQSA.push(\":enabled\", \":disabled\");\r\n                        }\r\n\r\n                        // Support: IE9-11+\r\n                        // IE's :disabled selector does not pick up the children of disabled fieldsets\r\n                        docElem.appendChild(el).disabled = true;\r\n                        if (el.querySelectorAll(\":disabled\").length !== 2) {\r\n                            rbuggyQSA.push(\":enabled\", \":disabled\");\r\n                        }\r\n\r\n                        // Support: Opera 10 - 11 only\r\n                        // Opera 10-11 does not throw on post-comma invalid pseudos\r\n                        el.querySelectorAll(\"*,:x\");\r\n                        rbuggyQSA.push(\",.*:\");\r\n                    });\r\n                }\r\n\r\n                if ((support.matchesSelector = rnative.test((matches = docElem.matches ||\r\n                    docElem.webkitMatchesSelector ||\r\n                    docElem.mozMatchesSelector ||\r\n                    docElem.oMatchesSelector ||\r\n                    docElem.msMatchesSelector)))) {\r\n\r\n                    assert(function (el) {\r\n\r\n                        // Check to see if it's possible to do matchesSelector\r\n                        // on a disconnected node (IE 9)\r\n                        support.disconnectedMatch = matches.call(el, \"*\");\r\n\r\n                        // This should fail with an exception\r\n                        // Gecko does not error, returns false instead\r\n                        matches.call(el, \"[s!='']:x\");\r\n                        rbuggyMatches.push(\"!=\", pseudos);\r\n                    });\r\n                }\r\n\r\n                rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join(\"|\"));\r\n                rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join(\"|\"));\r\n\r\n                /* Contains\r\n                ---------------------------------------------------------------------- */\r\n                hasCompare = rnative.test(docElem.compareDocumentPosition);\r\n\r\n                // Element contains another\r\n                // Purposefully self-exclusive\r\n                // As in, an element does not contain itself\r\n                contains = hasCompare || rnative.test(docElem.contains) ?\r\n                    function (a, b) {\r\n                        var adown = a.nodeType === 9 ? a.documentElement : a,\r\n                            bup = b && b.parentNode;\r\n                        return a === bup || !!(bup && bup.nodeType === 1 && (\r\n                            adown.contains ?\r\n                                adown.contains(bup) :\r\n                                a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16\r\n                        ));\r\n                    } :\r\n                    function (a, b) {\r\n                        if (b) {\r\n                            while ((b = b.parentNode)) {\r\n                                if (b === a) {\r\n                                    return true;\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    };\r\n\r\n                /* Sorting\r\n                ---------------------------------------------------------------------- */\r\n\r\n                // Document order sorting\r\n                sortOrder = hasCompare ?\r\n                    function (a, b) {\r\n\r\n                        // Flag for duplicate removal\r\n                        if (a === b) {\r\n                            hasDuplicate = true;\r\n                            return 0;\r\n                        }\r\n\r\n                        // Sort on method existence if only one input has compareDocumentPosition\r\n                        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\r\n                        if (compare) {\r\n                            return compare;\r\n                        }\r\n\r\n                        // Calculate position if both inputs belong to the same document\r\n                        // Support: IE 11+, Edge 17 - 18+\r\n                        // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                        // two documents; shallow comparisons work.\r\n                        // eslint-disable-next-line eqeqeq\r\n                        compare = (a.ownerDocument || a) == (b.ownerDocument || b) ?\r\n                            a.compareDocumentPosition(b) :\r\n\r\n                            // Otherwise we know they are disconnected\r\n                            1;\r\n\r\n                        // Disconnected nodes\r\n                        if (compare & 1 ||\r\n                            (!support.sortDetached && b.compareDocumentPosition(a) === compare)) {\r\n\r\n                            // Choose the first element that is related to our preferred document\r\n                            // Support: IE 11+, Edge 17 - 18+\r\n                            // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                            // two documents; shallow comparisons work.\r\n                            // eslint-disable-next-line eqeqeq\r\n                            if (a == document || a.ownerDocument == preferredDoc &&\r\n                                contains(preferredDoc, a)) {\r\n                                return -1;\r\n                            }\r\n\r\n                            // Support: IE 11+, Edge 17 - 18+\r\n                            // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                            // two documents; shallow comparisons work.\r\n                            // eslint-disable-next-line eqeqeq\r\n                            if (b == document || b.ownerDocument == preferredDoc &&\r\n                                contains(preferredDoc, b)) {\r\n                                return 1;\r\n                            }\r\n\r\n                            // Maintain original order\r\n                            return sortInput ?\r\n                                (indexOf(sortInput, a) - indexOf(sortInput, b)) :\r\n                                0;\r\n                        }\r\n\r\n                        return compare & 4 ? -1 : 1;\r\n                    } :\r\n                    function (a, b) {\r\n\r\n                        // Exit early if the nodes are identical\r\n                        if (a === b) {\r\n                            hasDuplicate = true;\r\n                            return 0;\r\n                        }\r\n\r\n                        var cur,\r\n                            i = 0,\r\n                            aup = a.parentNode,\r\n                            bup = b.parentNode,\r\n                            ap = [a],\r\n                            bp = [b];\r\n\r\n                        // Parentless nodes are either documents or disconnected\r\n                        if (!aup || !bup) {\r\n\r\n                            // Support: IE 11+, Edge 17 - 18+\r\n                            // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                            // two documents; shallow comparisons work.\r\n                            /* eslint-disable eqeqeq */\r\n                            return a == document ? -1 :\r\n                                b == document ? 1 :\r\n                                    /* eslint-enable eqeqeq */\r\n                                    aup ? -1 :\r\n                                        bup ? 1 :\r\n                                            sortInput ?\r\n                                                (indexOf(sortInput, a) - indexOf(sortInput, b)) :\r\n                                                0;\r\n\r\n                            // If the nodes are siblings, we can do a quick check\r\n                        } else if (aup === bup) {\r\n                            return siblingCheck(a, b);\r\n                        }\r\n\r\n                        // Otherwise we need full lists of their ancestors for comparison\r\n                        cur = a;\r\n                        while ((cur = cur.parentNode)) {\r\n                            ap.unshift(cur);\r\n                        }\r\n                        cur = b;\r\n                        while ((cur = cur.parentNode)) {\r\n                            bp.unshift(cur);\r\n                        }\r\n\r\n                        // Walk down the tree looking for a discrepancy\r\n                        while (ap[i] === bp[i]) {\r\n                            i++;\r\n                        }\r\n\r\n                        return i ?\r\n\r\n                            // Do a sibling check if the nodes have a common ancestor\r\n                            siblingCheck(ap[i], bp[i]) :\r\n\r\n                            // Otherwise nodes in our document sort first\r\n                            // Support: IE 11+, Edge 17 - 18+\r\n                            // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                            // two documents; shallow comparisons work.\r\n                            /* eslint-disable eqeqeq */\r\n                            ap[i] == preferredDoc ? -1 :\r\n                                bp[i] == preferredDoc ? 1 :\r\n                                    /* eslint-enable eqeqeq */\r\n                                    0;\r\n                    };\r\n\r\n                return document;\r\n            };\r\n\r\n            Sizzle.matches = function (expr, elements) {\r\n                return Sizzle(expr, null, null, elements);\r\n            };\r\n\r\n            Sizzle.matchesSelector = function (elem, expr) {\r\n                setDocument(elem);\r\n\r\n                if (support.matchesSelector && documentIsHTML &&\r\n                    !nonnativeSelectorCache[expr + \" \"] &&\r\n                    (!rbuggyMatches || !rbuggyMatches.test(expr)) &&\r\n                    (!rbuggyQSA || !rbuggyQSA.test(expr))) {\r\n\r\n                    try {\r\n                        var ret = matches.call(elem, expr);\r\n\r\n                        // IE 9's matchesSelector returns false on disconnected nodes\r\n                        if (ret || support.disconnectedMatch ||\r\n\r\n                            // As well, disconnected nodes are said to be in a document\r\n                            // fragment in IE 9\r\n                            elem.document && elem.document.nodeType !== 11) {\r\n                            return ret;\r\n                        }\r\n                    } catch (e) {\r\n                        nonnativeSelectorCache(expr, true);\r\n                    }\r\n                }\r\n\r\n                return Sizzle(expr, document, null, [elem]).length > 0;\r\n            };\r\n\r\n            Sizzle.contains = function (context, elem) {\r\n\r\n                // Set document vars if needed\r\n                // Support: IE 11+, Edge 17 - 18+\r\n                // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                // two documents; shallow comparisons work.\r\n                // eslint-disable-next-line eqeqeq\r\n                if ((context.ownerDocument || context) != document) {\r\n                    setDocument(context);\r\n                }\r\n                return contains(context, elem);\r\n            };\r\n\r\n            Sizzle.attr = function (elem, name) {\r\n\r\n                // Set document vars if needed\r\n                // Support: IE 11+, Edge 17 - 18+\r\n                // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                // two documents; shallow comparisons work.\r\n                // eslint-disable-next-line eqeqeq\r\n                if ((elem.ownerDocument || elem) != document) {\r\n                    setDocument(elem);\r\n                }\r\n\r\n                var fn = Expr.attrHandle[name.toLowerCase()],\r\n\r\n                    // Don't get fooled by Object.prototype properties (jQuery #13807)\r\n                    val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ?\r\n                        fn(elem, name, !documentIsHTML) :\r\n                        undefined;\r\n\r\n                return val !== undefined ?\r\n                    val :\r\n                    support.attributes || !documentIsHTML ?\r\n                        elem.getAttribute(name) :\r\n                        (val = elem.getAttributeNode(name)) && val.specified ?\r\n                            val.value :\r\n                            null;\r\n            };\r\n\r\n            Sizzle.escape = function (sel) {\r\n                return (sel + \"\").replace(rcssescape, fcssescape);\r\n            };\r\n\r\n            Sizzle.error = function (msg) {\r\n                throw new Error(\"Syntax error, unrecognized expression: \" + msg);\r\n            };\r\n\r\n            /**\r\n             * Document sorting and removing duplicates\r\n             * @param {ArrayLike} results\r\n             */\r\n            Sizzle.uniqueSort = function (results) {\r\n                var elem,\r\n                    duplicates = [],\r\n                    j = 0,\r\n                    i = 0;\r\n\r\n                // Unless we *know* we can detect duplicates, assume their presence\r\n                hasDuplicate = !support.detectDuplicates;\r\n                sortInput = !support.sortStable && results.slice(0);\r\n                results.sort(sortOrder);\r\n\r\n                if (hasDuplicate) {\r\n                    while ((elem = results[i++])) {\r\n                        if (elem === results[i]) {\r\n                            j = duplicates.push(i);\r\n                        }\r\n                    }\r\n                    while (j--) {\r\n                        results.splice(duplicates[j], 1);\r\n                    }\r\n                }\r\n\r\n                // Clear input after sorting to release objects\r\n                // See https://github.com/jquery/sizzle/pull/225\r\n                sortInput = null;\r\n\r\n                return results;\r\n            };\r\n\r\n            /**\r\n             * Utility function for retrieving the text value of an array of DOM nodes\r\n             * @param {Array|Element} elem\r\n             */\r\n            getText = Sizzle.getText = function (elem) {\r\n                var node,\r\n                    ret = \"\",\r\n                    i = 0,\r\n                    nodeType = elem.nodeType;\r\n\r\n                if (!nodeType) {\r\n\r\n                    // If no nodeType, this is expected to be an array\r\n                    while ((node = elem[i++])) {\r\n\r\n                        // Do not traverse comment nodes\r\n                        ret += getText(node);\r\n                    }\r\n                } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\r\n\r\n                    // Use textContent for elements\r\n                    // innerText usage removed for consistency of new lines (jQuery #11153)\r\n                    if (typeof elem.textContent === \"string\") {\r\n                        return elem.textContent;\r\n                    } else {\r\n\r\n                        // Traverse its children\r\n                        for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\r\n                            ret += getText(elem);\r\n                        }\r\n                    }\r\n                } else if (nodeType === 3 || nodeType === 4) {\r\n                    return elem.nodeValue;\r\n                }\r\n\r\n                // Do not include comment or processing instruction nodes\r\n\r\n                return ret;\r\n            };\r\n\r\n            Expr = Sizzle.selectors = {\r\n\r\n                // Can be adjusted by the user\r\n                cacheLength: 50,\r\n\r\n                createPseudo: markFunction,\r\n\r\n                match: matchExpr,\r\n\r\n                attrHandle: {},\r\n\r\n                find: {},\r\n\r\n                relative: {\r\n                    \">\": { dir: \"parentNode\", first: true },\r\n                    \" \": { dir: \"parentNode\" },\r\n                    \"+\": { dir: \"previousSibling\", first: true },\r\n                    \"~\": { dir: \"previousSibling\" }\r\n                },\r\n\r\n                preFilter: {\r\n                    \"ATTR\": function (match) {\r\n                        match[1] = match[1].replace(runescape, funescape);\r\n\r\n                        // Move the given value to match[3] whether quoted or unquoted\r\n                        match[3] = (match[3] || match[4] ||\r\n                            match[5] || \"\").replace(runescape, funescape);\r\n\r\n                        if (match[2] === \"~=\") {\r\n                            match[3] = \" \" + match[3] + \" \";\r\n                        }\r\n\r\n                        return match.slice(0, 4);\r\n                    },\r\n\r\n                    \"CHILD\": function (match) {\r\n\r\n                        /* matches from matchExpr[\"CHILD\"]\r\n                            1 type (only|nth|...)\r\n                            2 what (child|of-type)\r\n                            3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\r\n                            4 xn-component of xn+y argument ([+-]?\\d*n|)\r\n                            5 sign of xn-component\r\n                            6 x of xn-component\r\n                            7 sign of y-component\r\n                            8 y of y-component\r\n                        */\r\n                        match[1] = match[1].toLowerCase();\r\n\r\n                        if (match[1].slice(0, 3) === \"nth\") {\r\n\r\n                            // nth-* requires argument\r\n                            if (!match[3]) {\r\n                                Sizzle.error(match[0]);\r\n                            }\r\n\r\n                            // numeric x and y parameters for Expr.filter.CHILD\r\n                            // remember that false/true cast respectively to 0/1\r\n                            match[4] = +(match[4] ?\r\n                                match[5] + (match[6] || 1) :\r\n                                2 * (match[3] === \"even\" || match[3] === \"odd\"));\r\n                            match[5] = +((match[7] + match[8]) || match[3] === \"odd\");\r\n\r\n                            // other types prohibit arguments\r\n                        } else if (match[3]) {\r\n                            Sizzle.error(match[0]);\r\n                        }\r\n\r\n                        return match;\r\n                    },\r\n\r\n                    \"PSEUDO\": function (match) {\r\n                        var excess,\r\n                            unquoted = !match[6] && match[2];\r\n\r\n                        if (matchExpr[\"CHILD\"].test(match[0])) {\r\n                            return null;\r\n                        }\r\n\r\n                        // Accept quoted arguments as-is\r\n                        if (match[3]) {\r\n                            match[2] = match[4] || match[5] || \"\";\r\n\r\n                            // Strip excess characters from unquoted arguments\r\n                        } else if (unquoted && rpseudo.test(unquoted) &&\r\n\r\n                            // Get excess from tokenize (recursively)\r\n                            (excess = tokenize(unquoted, true)) &&\r\n\r\n                            // advance to the next closing parenthesis\r\n                            (excess = unquoted.indexOf(\")\", unquoted.length - excess) - unquoted.length)) {\r\n\r\n                            // excess is a negative index\r\n                            match[0] = match[0].slice(0, excess);\r\n                            match[2] = unquoted.slice(0, excess);\r\n                        }\r\n\r\n                        // Return only captures needed by the pseudo filter method (type and argument)\r\n                        return match.slice(0, 3);\r\n                    }\r\n                },\r\n\r\n                filter: {\r\n\r\n                    \"TAG\": function (nodeNameSelector) {\r\n                        var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\r\n                        return nodeNameSelector === \"*\" ?\r\n                            function () {\r\n                                return true;\r\n                            } :\r\n                            function (elem) {\r\n                                return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\r\n                            };\r\n                    },\r\n\r\n                    \"CLASS\": function (className) {\r\n                        var pattern = classCache[className + \" \"];\r\n\r\n                        return pattern ||\r\n                            (pattern = new RegExp(\"(^|\" + whitespace +\r\n                                \")\" + className + \"(\" + whitespace + \"|$)\")) && classCache(\r\n                                    className, function (elem) {\r\n                                        return pattern.test(\r\n                                            typeof elem.className === \"string\" && elem.className ||\r\n                                            typeof elem.getAttribute !== \"undefined\" &&\r\n                                            elem.getAttribute(\"class\") ||\r\n                                            \"\"\r\n                                        );\r\n                                    });\r\n                    },\r\n\r\n                    \"ATTR\": function (name, operator, check) {\r\n                        return function (elem) {\r\n                            var result = Sizzle.attr(elem, name);\r\n\r\n                            if (result == null) {\r\n                                return operator === \"!=\";\r\n                            }\r\n                            if (!operator) {\r\n                                return true;\r\n                            }\r\n\r\n                            result += \"\";\r\n\r\n                            /* eslint-disable max-len */\r\n\r\n                            return operator === \"=\" ? result === check :\r\n                                operator === \"!=\" ? result !== check :\r\n                                    operator === \"^=\" ? check && result.indexOf(check) === 0 :\r\n                                        operator === \"*=\" ? check && result.indexOf(check) > -1 :\r\n                                            operator === \"$=\" ? check && result.slice(-check.length) === check :\r\n                                                operator === \"~=\" ? (\" \" + result.replace(rwhitespace, \" \") + \" \").indexOf(check) > -1 :\r\n                                                    operator === \"|=\" ? result === check || result.slice(0, check.length + 1) === check + \"-\" :\r\n                                                        false;\r\n                            /* eslint-enable max-len */\r\n\r\n                        };\r\n                    },\r\n\r\n                    \"CHILD\": function (type, what, _argument, first, last) {\r\n                        var simple = type.slice(0, 3) !== \"nth\",\r\n                            forward = type.slice(-4) !== \"last\",\r\n                            ofType = what === \"of-type\";\r\n\r\n                        return first === 1 && last === 0 ?\r\n\r\n                            // Shortcut for :nth-*(n)\r\n                            function (elem) {\r\n                                return !!elem.parentNode;\r\n                            } :\r\n\r\n                            function (elem, _context, xml) {\r\n                                var cache, uniqueCache, outerCache, node, nodeIndex, start,\r\n                                    dir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\r\n                                    parent = elem.parentNode,\r\n                                    name = ofType && elem.nodeName.toLowerCase(),\r\n                                    useCache = !xml && !ofType,\r\n                                    diff = false;\r\n\r\n                                if (parent) {\r\n\r\n                                    // :(first|last|only)-(child|of-type)\r\n                                    if (simple) {\r\n                                        while (dir) {\r\n                                            node = elem;\r\n                                            while ((node = node[dir])) {\r\n                                                if (ofType ?\r\n                                                    node.nodeName.toLowerCase() === name :\r\n                                                    node.nodeType === 1) {\r\n\r\n                                                    return false;\r\n                                                }\r\n                                            }\r\n\r\n                                            // Reverse direction for :only-* (if we haven't yet done so)\r\n                                            start = dir = type === \"only\" && !start && \"nextSibling\";\r\n                                        }\r\n                                        return true;\r\n                                    }\r\n\r\n                                    start = [forward ? parent.firstChild : parent.lastChild];\r\n\r\n                                    // non-xml :nth-child(...) stores cache data on `parent`\r\n                                    if (forward && useCache) {\r\n\r\n                                        // Seek `elem` from a previously-cached index\r\n\r\n                                        // ...in a gzip-friendly way\r\n                                        node = parent;\r\n                                        outerCache = node[expando] || (node[expando] = {});\r\n\r\n                                        // Support: IE <9 only\r\n                                        // Defend against cloned attroperties (jQuery gh-1709)\r\n                                        uniqueCache = outerCache[node.uniqueID] ||\r\n                                            (outerCache[node.uniqueID] = {});\r\n\r\n                                        cache = uniqueCache[type] || [];\r\n                                        nodeIndex = cache[0] === dirruns && cache[1];\r\n                                        diff = nodeIndex && cache[2];\r\n                                        node = nodeIndex && parent.childNodes[nodeIndex];\r\n\r\n                                        while ((node = ++nodeIndex && node && node[dir] ||\r\n\r\n                                            // Fallback to seeking `elem` from the start\r\n                                            (diff = nodeIndex = 0) || start.pop())) {\r\n\r\n                                            // When found, cache indexes on `parent` and break\r\n                                            if (node.nodeType === 1 && ++diff && node === elem) {\r\n                                                uniqueCache[type] = [dirruns, nodeIndex, diff];\r\n                                                break;\r\n                                            }\r\n                                        }\r\n\r\n                                    } else {\r\n\r\n                                        // Use previously-cached element index if available\r\n                                        if (useCache) {\r\n\r\n                                            // ...in a gzip-friendly way\r\n                                            node = elem;\r\n                                            outerCache = node[expando] || (node[expando] = {});\r\n\r\n                                            // Support: IE <9 only\r\n                                            // Defend against cloned attroperties (jQuery gh-1709)\r\n                                            uniqueCache = outerCache[node.uniqueID] ||\r\n                                                (outerCache[node.uniqueID] = {});\r\n\r\n                                            cache = uniqueCache[type] || [];\r\n                                            nodeIndex = cache[0] === dirruns && cache[1];\r\n                                            diff = nodeIndex;\r\n                                        }\r\n\r\n                                        // xml :nth-child(...)\r\n                                        // or :nth-last-child(...) or :nth(-last)?-of-type(...)\r\n                                        if (diff === false) {\r\n\r\n                                            // Use the same loop as above to seek `elem` from the start\r\n                                            while ((node = ++nodeIndex && node && node[dir] ||\r\n                                                (diff = nodeIndex = 0) || start.pop())) {\r\n\r\n                                                if ((ofType ?\r\n                                                    node.nodeName.toLowerCase() === name :\r\n                                                    node.nodeType === 1) &&\r\n                                                    ++diff) {\r\n\r\n                                                    // Cache the index of each encountered element\r\n                                                    if (useCache) {\r\n                                                        outerCache = node[expando] ||\r\n                                                            (node[expando] = {});\r\n\r\n                                                        // Support: IE <9 only\r\n                                                        // Defend against cloned attroperties (jQuery gh-1709)\r\n                                                        uniqueCache = outerCache[node.uniqueID] ||\r\n                                                            (outerCache[node.uniqueID] = {});\r\n\r\n                                                        uniqueCache[type] = [dirruns, diff];\r\n                                                    }\r\n\r\n                                                    if (node === elem) {\r\n                                                        break;\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n\r\n                                    // Incorporate the offset, then check against cycle size\r\n                                    diff -= last;\r\n                                    return diff === first || (diff % first === 0 && diff / first >= 0);\r\n                                }\r\n                            };\r\n                    },\r\n\r\n                    \"PSEUDO\": function (pseudo, argument) {\r\n\r\n                        // pseudo-class names are case-insensitive\r\n                        // http://www.w3.org/TR/selectors/#pseudo-classes\r\n                        // Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\r\n                        // Remember that setFilters inherits from pseudos\r\n                        var args,\r\n                            fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] ||\r\n                                Sizzle.error(\"unsupported pseudo: \" + pseudo);\r\n\r\n                        // The user may use createPseudo to indicate that\r\n                        // arguments are needed to create the filter function\r\n                        // just as Sizzle does\r\n                        if (fn[expando]) {\r\n                            return fn(argument);\r\n                        }\r\n\r\n                        // But maintain support for old signatures\r\n                        if (fn.length > 1) {\r\n                            args = [pseudo, pseudo, \"\", argument];\r\n                            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ?\r\n                                markFunction(function (seed, matches) {\r\n                                    var idx,\r\n                                        matched = fn(seed, argument),\r\n                                        i = matched.length;\r\n                                    while (i--) {\r\n                                        idx = indexOf(seed, matched[i]);\r\n                                        seed[idx] = !(matches[idx] = matched[i]);\r\n                                    }\r\n                                }) :\r\n                                function (elem) {\r\n                                    return fn(elem, 0, args);\r\n                                };\r\n                        }\r\n\r\n                        return fn;\r\n                    }\r\n                },\r\n\r\n                pseudos: {\r\n\r\n                    // Potentially complex pseudos\r\n                    \"not\": markFunction(function (selector) {\r\n\r\n                        // Trim the selector passed to compile\r\n                        // to avoid treating leading and trailing\r\n                        // spaces as combinators\r\n                        var input = [],\r\n                            results = [],\r\n                            matcher = compile(selector.replace(rtrim, \"$1\"));\r\n\r\n                        return matcher[expando] ?\r\n                            markFunction(function (seed, matches, _context, xml) {\r\n                                var elem,\r\n                                    unmatched = matcher(seed, null, xml, []),\r\n                                    i = seed.length;\r\n\r\n                                // Match elements unmatched by `matcher`\r\n                                while (i--) {\r\n                                    if ((elem = unmatched[i])) {\r\n                                        seed[i] = !(matches[i] = elem);\r\n                                    }\r\n                                }\r\n                            }) :\r\n                            function (elem, _context, xml) {\r\n                                input[0] = elem;\r\n                                matcher(input, null, xml, results);\r\n\r\n                                // Don't keep the element (issue #299)\r\n                                input[0] = null;\r\n                                return !results.pop();\r\n                            };\r\n                    }),\r\n\r\n                    \"has\": markFunction(function (selector) {\r\n                        return function (elem) {\r\n                            return Sizzle(selector, elem).length > 0;\r\n                        };\r\n                    }),\r\n\r\n                    \"contains\": markFunction(function (text) {\r\n                        text = text.replace(runescape, funescape);\r\n                        return function (elem) {\r\n                            return (elem.textContent || getText(elem)).indexOf(text) > -1;\r\n                        };\r\n                    }),\r\n\r\n                    // \"Whether an element is represented by a :lang() selector\r\n                    // is based solely on the element's language value\r\n                    // being equal to the identifier C,\r\n                    // or beginning with the identifier C immediately followed by \"-\".\r\n                    // The matching of C against the element's language value is performed case-insensitively.\r\n                    // The identifier C does not have to be a valid language name.\"\r\n                    // http://www.w3.org/TR/selectors/#lang-pseudo\r\n                    \"lang\": markFunction(function (lang) {\r\n\r\n                        // lang value must be a valid identifier\r\n                        if (!ridentifier.test(lang || \"\")) {\r\n                            Sizzle.error(\"unsupported lang: \" + lang);\r\n                        }\r\n                        lang = lang.replace(runescape, funescape).toLowerCase();\r\n                        return function (elem) {\r\n                            var elemLang;\r\n                            do {\r\n                                if ((elemLang = documentIsHTML ?\r\n                                    elem.lang :\r\n                                    elem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\"))) {\r\n\r\n                                    elemLang = elemLang.toLowerCase();\r\n                                    return elemLang === lang || elemLang.indexOf(lang + \"-\") === 0;\r\n                                }\r\n                            } while ((elem = elem.parentNode) && elem.nodeType === 1);\r\n                            return false;\r\n                        };\r\n                    }),\r\n\r\n                    // Miscellaneous\r\n                    \"target\": function (elem) {\r\n                        var hash = window.location && window.location.hash;\r\n                        return hash && hash.slice(1) === elem.id;\r\n                    },\r\n\r\n                    \"root\": function (elem) {\r\n                        return elem === docElem;\r\n                    },\r\n\r\n                    \"focus\": function (elem) {\r\n                        return elem === document.activeElement &&\r\n                            (!document.hasFocus || document.hasFocus()) &&\r\n                            !!(elem.type || elem.href || ~elem.tabIndex);\r\n                    },\r\n\r\n                    // Boolean properties\r\n                    \"enabled\": createDisabledPseudo(false),\r\n                    \"disabled\": createDisabledPseudo(true),\r\n\r\n                    \"checked\": function (elem) {\r\n\r\n                        // In CSS3, :checked should return both checked and selected elements\r\n                        // http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\r\n                        var nodeName = elem.nodeName.toLowerCase();\r\n                        return (nodeName === \"input\" && !!elem.checked) ||\r\n                            (nodeName === \"option\" && !!elem.selected);\r\n                    },\r\n\r\n                    \"selected\": function (elem) {\r\n\r\n                        // Accessing this property makes selected-by-default\r\n                        // options in Safari work properly\r\n                        if (elem.parentNode) {\r\n                            // eslint-disable-next-line no-unused-expressions\r\n                            elem.parentNode.selectedIndex;\r\n                        }\r\n\r\n                        return elem.selected === true;\r\n                    },\r\n\r\n                    // Contents\r\n                    \"empty\": function (elem) {\r\n\r\n                        // http://www.w3.org/TR/selectors/#empty-pseudo\r\n                        // :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\r\n                        //   but not by others (comment: 8; processing instruction: 7; etc.)\r\n                        // nodeType < 6 works because attributes (2) do not appear as children\r\n                        for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\r\n                            if (elem.nodeType < 6) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                        return true;\r\n                    },\r\n\r\n                    \"parent\": function (elem) {\r\n                        return !Expr.pseudos[\"empty\"](elem);\r\n                    },\r\n\r\n                    // Element/input types\r\n                    \"header\": function (elem) {\r\n                        return rheader.test(elem.nodeName);\r\n                    },\r\n\r\n                    \"input\": function (elem) {\r\n                        return rinputs.test(elem.nodeName);\r\n                    },\r\n\r\n                    \"button\": function (elem) {\r\n                        var name = elem.nodeName.toLowerCase();\r\n                        return name === \"input\" && elem.type === \"button\" || name === \"button\";\r\n                    },\r\n\r\n                    \"text\": function (elem) {\r\n                        var attr;\r\n                        return elem.nodeName.toLowerCase() === \"input\" &&\r\n                            elem.type === \"text\" &&\r\n\r\n                            // Support: IE<8\r\n                            // New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\r\n                            ((attr = elem.getAttribute(\"type\")) == null ||\r\n                                attr.toLowerCase() === \"text\");\r\n                    },\r\n\r\n                    // Position-in-collection\r\n                    \"first\": createPositionalPseudo(function () {\r\n                        return [0];\r\n                    }),\r\n\r\n                    \"last\": createPositionalPseudo(function (_matchIndexes, length) {\r\n                        return [length - 1];\r\n                    }),\r\n\r\n                    \"eq\": createPositionalPseudo(function (_matchIndexes, length, argument) {\r\n                        return [argument < 0 ? argument + length : argument];\r\n                    }),\r\n\r\n                    \"even\": createPositionalPseudo(function (matchIndexes, length) {\r\n                        var i = 0;\r\n                        for (; i < length; i += 2) {\r\n                            matchIndexes.push(i);\r\n                        }\r\n                        return matchIndexes;\r\n                    }),\r\n\r\n                    \"odd\": createPositionalPseudo(function (matchIndexes, length) {\r\n                        var i = 1;\r\n                        for (; i < length; i += 2) {\r\n                            matchIndexes.push(i);\r\n                        }\r\n                        return matchIndexes;\r\n                    }),\r\n\r\n                    \"lt\": createPositionalPseudo(function (matchIndexes, length, argument) {\r\n                        var i = argument < 0 ?\r\n                            argument + length :\r\n                            argument > length ?\r\n                                length :\r\n                                argument;\r\n                        for (; --i >= 0;) {\r\n                            matchIndexes.push(i);\r\n                        }\r\n                        return matchIndexes;\r\n                    }),\r\n\r\n                    \"gt\": createPositionalPseudo(function (matchIndexes, length, argument) {\r\n                        var i = argument < 0 ? argument + length : argument;\r\n                        for (; ++i < length;) {\r\n                            matchIndexes.push(i);\r\n                        }\r\n                        return matchIndexes;\r\n                    })\r\n                }\r\n            };\r\n\r\n            Expr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\r\n\r\n            // Add button/input type pseudos\r\n            for (i in { radio: true, checkbox: true, file: true, password: true, image: true }) {\r\n                Expr.pseudos[i] = createInputPseudo(i);\r\n            }\r\n            for (i in { submit: true, reset: true }) {\r\n                Expr.pseudos[i] = createButtonPseudo(i);\r\n            }\r\n\r\n            // Easy API for creating new setFilters\r\n            function setFilters() { }\r\n            setFilters.prototype = Expr.filters = Expr.pseudos;\r\n            Expr.setFilters = new setFilters();\r\n\r\n            tokenize = Sizzle.tokenize = function (selector, parseOnly) {\r\n                var matched, match, tokens, type,\r\n                    soFar, groups, preFilters,\r\n                    cached = tokenCache[selector + \" \"];\r\n\r\n                if (cached) {\r\n                    return parseOnly ? 0 : cached.slice(0);\r\n                }\r\n\r\n                soFar = selector;\r\n                groups = [];\r\n                preFilters = Expr.preFilter;\r\n\r\n                while (soFar) {\r\n\r\n                    // Comma and first run\r\n                    if (!matched || (match = rcomma.exec(soFar))) {\r\n                        if (match) {\r\n\r\n                            // Don't consume trailing commas as valid\r\n                            soFar = soFar.slice(match[0].length) || soFar;\r\n                        }\r\n                        groups.push((tokens = []));\r\n                    }\r\n\r\n                    matched = false;\r\n\r\n                    // Combinators\r\n                    if ((match = rcombinators.exec(soFar))) {\r\n                        matched = match.shift();\r\n                        tokens.push({\r\n                            value: matched,\r\n\r\n                            // Cast descendant combinators to space\r\n                            type: match[0].replace(rtrim, \" \")\r\n                        });\r\n                        soFar = soFar.slice(matched.length);\r\n                    }\r\n\r\n                    // Filters\r\n                    for (type in Expr.filter) {\r\n                        if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] ||\r\n                            (match = preFilters[type](match)))) {\r\n                            matched = match.shift();\r\n                            tokens.push({\r\n                                value: matched,\r\n                                type: type,\r\n                                matches: match\r\n                            });\r\n                            soFar = soFar.slice(matched.length);\r\n                        }\r\n                    }\r\n\r\n                    if (!matched) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // Return the length of the invalid excess\r\n                // if we're just parsing\r\n                // Otherwise, throw an error or return tokens\r\n                return parseOnly ?\r\n                    soFar.length :\r\n                    soFar ?\r\n                        Sizzle.error(selector) :\r\n\r\n                        // Cache the tokens\r\n                        tokenCache(selector, groups).slice(0);\r\n            };\r\n\r\n            function toSelector(tokens) {\r\n                var i = 0,\r\n                    len = tokens.length,\r\n                    selector = \"\";\r\n                for (; i < len; i++) {\r\n                    selector += tokens[i].value;\r\n                }\r\n                return selector;\r\n            }\r\n\r\n            function addCombinator(matcher, combinator, base) {\r\n                var dir = combinator.dir,\r\n                    skip = combinator.next,\r\n                    key = skip || dir,\r\n                    checkNonElements = base && key === \"parentNode\",\r\n                    doneName = done++;\r\n\r\n                return combinator.first ?\r\n\r\n                    // Check against closest ancestor/preceding element\r\n                    function (elem, context, xml) {\r\n                        while ((elem = elem[dir])) {\r\n                            if (elem.nodeType === 1 || checkNonElements) {\r\n                                return matcher(elem, context, xml);\r\n                            }\r\n                        }\r\n                        return false;\r\n                    } :\r\n\r\n                    // Check against all ancestor/preceding elements\r\n                    function (elem, context, xml) {\r\n                        var oldCache, uniqueCache, outerCache,\r\n                            newCache = [dirruns, doneName];\r\n\r\n                        // We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\r\n                        if (xml) {\r\n                            while ((elem = elem[dir])) {\r\n                                if (elem.nodeType === 1 || checkNonElements) {\r\n                                    if (matcher(elem, context, xml)) {\r\n                                        return true;\r\n                                    }\r\n                                }\r\n                            }\r\n                        } else {\r\n                            while ((elem = elem[dir])) {\r\n                                if (elem.nodeType === 1 || checkNonElements) {\r\n                                    outerCache = elem[expando] || (elem[expando] = {});\r\n\r\n                                    // Support: IE <9 only\r\n                                    // Defend against cloned attroperties (jQuery gh-1709)\r\n                                    uniqueCache = outerCache[elem.uniqueID] ||\r\n                                        (outerCache[elem.uniqueID] = {});\r\n\r\n                                    if (skip && skip === elem.nodeName.toLowerCase()) {\r\n                                        elem = elem[dir] || elem;\r\n                                    } else if ((oldCache = uniqueCache[key]) &&\r\n                                        oldCache[0] === dirruns && oldCache[1] === doneName) {\r\n\r\n                                        // Assign to newCache so results back-propagate to previous elements\r\n                                        return (newCache[2] = oldCache[2]);\r\n                                    } else {\r\n\r\n                                        // Reuse newcache so results back-propagate to previous elements\r\n                                        uniqueCache[key] = newCache;\r\n\r\n                                        // A match means we're done; a fail means we have to keep checking\r\n                                        if ((newCache[2] = matcher(elem, context, xml))) {\r\n                                            return true;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        return false;\r\n                    };\r\n            }\r\n\r\n            function elementMatcher(matchers) {\r\n                return matchers.length > 1 ?\r\n                    function (elem, context, xml) {\r\n                        var i = matchers.length;\r\n                        while (i--) {\r\n                            if (!matchers[i](elem, context, xml)) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                        return true;\r\n                    } :\r\n                    matchers[0];\r\n            }\r\n\r\n            function multipleContexts(selector, contexts, results) {\r\n                var i = 0,\r\n                    len = contexts.length;\r\n                for (; i < len; i++) {\r\n                    Sizzle(selector, contexts[i], results);\r\n                }\r\n                return results;\r\n            }\r\n\r\n            function condense(unmatched, map, filter, context, xml) {\r\n                var elem,\r\n                    newUnmatched = [],\r\n                    i = 0,\r\n                    len = unmatched.length,\r\n                    mapped = map != null;\r\n\r\n                for (; i < len; i++) {\r\n                    if ((elem = unmatched[i])) {\r\n                        if (!filter || filter(elem, context, xml)) {\r\n                            newUnmatched.push(elem);\r\n                            if (mapped) {\r\n                                map.push(i);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return newUnmatched;\r\n            }\r\n\r\n            function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\r\n                if (postFilter && !postFilter[expando]) {\r\n                    postFilter = setMatcher(postFilter);\r\n                }\r\n                if (postFinder && !postFinder[expando]) {\r\n                    postFinder = setMatcher(postFinder, postSelector);\r\n                }\r\n                return markFunction(function (seed, results, context, xml) {\r\n                    var temp, i, elem,\r\n                        preMap = [],\r\n                        postMap = [],\r\n                        preexisting = results.length,\r\n\r\n                        // Get initial elements from seed or context\r\n                        elems = seed || multipleContexts(\r\n                            selector || \"*\",\r\n                            context.nodeType ? [context] : context,\r\n                            []\r\n                        ),\r\n\r\n                        // Prefilter to get matcher input, preserving a map for seed-results synchronization\r\n                        matcherIn = preFilter && (seed || !selector) ?\r\n                            condense(elems, preMap, preFilter, context, xml) :\r\n                            elems,\r\n\r\n                        matcherOut = matcher ?\r\n\r\n                            // If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\r\n                            postFinder || (seed ? preFilter : preexisting || postFilter) ?\r\n\r\n                                // ...intermediate processing is necessary\r\n                                [] :\r\n\r\n                                // ...otherwise use results directly\r\n                                results :\r\n                            matcherIn;\r\n\r\n                    // Find primary matches\r\n                    if (matcher) {\r\n                        matcher(matcherIn, matcherOut, context, xml);\r\n                    }\r\n\r\n                    // Apply postFilter\r\n                    if (postFilter) {\r\n                        temp = condense(matcherOut, postMap);\r\n                        postFilter(temp, [], context, xml);\r\n\r\n                        // Un-match failing elements by moving them back to matcherIn\r\n                        i = temp.length;\r\n                        while (i--) {\r\n                            if ((elem = temp[i])) {\r\n                                matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    if (seed) {\r\n                        if (postFinder || preFilter) {\r\n                            if (postFinder) {\r\n\r\n                                // Get the final matcherOut by condensing this intermediate into postFinder contexts\r\n                                temp = [];\r\n                                i = matcherOut.length;\r\n                                while (i--) {\r\n                                    if ((elem = matcherOut[i])) {\r\n\r\n                                        // Restore matcherIn since elem is not yet a final match\r\n                                        temp.push((matcherIn[i] = elem));\r\n                                    }\r\n                                }\r\n                                postFinder(null, (matcherOut = []), temp, xml);\r\n                            }\r\n\r\n                            // Move matched elements from seed to results to keep them synchronized\r\n                            i = matcherOut.length;\r\n                            while (i--) {\r\n                                if ((elem = matcherOut[i]) &&\r\n                                    (temp = postFinder ? indexOf(seed, elem) : preMap[i]) > -1) {\r\n\r\n                                    seed[temp] = !(results[temp] = elem);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        // Add elements to results, through postFinder if defined\r\n                    } else {\r\n                        matcherOut = condense(\r\n                            matcherOut === results ?\r\n                                matcherOut.splice(preexisting, matcherOut.length) :\r\n                                matcherOut\r\n                        );\r\n                        if (postFinder) {\r\n                            postFinder(null, results, matcherOut, xml);\r\n                        } else {\r\n                            push.apply(results, matcherOut);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function matcherFromTokens(tokens) {\r\n                var checkContext, matcher, j,\r\n                    len = tokens.length,\r\n                    leadingRelative = Expr.relative[tokens[0].type],\r\n                    implicitRelative = leadingRelative || Expr.relative[\" \"],\r\n                    i = leadingRelative ? 1 : 0,\r\n\r\n                    // The foundational matcher ensures that elements are reachable from top-level context(s)\r\n                    matchContext = addCombinator(function (elem) {\r\n                        return elem === checkContext;\r\n                    }, implicitRelative, true),\r\n                    matchAnyContext = addCombinator(function (elem) {\r\n                        return indexOf(checkContext, elem) > -1;\r\n                    }, implicitRelative, true),\r\n                    matchers = [function (elem, context, xml) {\r\n                        var ret = (!leadingRelative && (xml || context !== outermostContext)) || (\r\n                            (checkContext = context).nodeType ?\r\n                                matchContext(elem, context, xml) :\r\n                                matchAnyContext(elem, context, xml));\r\n\r\n                        // Avoid hanging onto element (issue #299)\r\n                        checkContext = null;\r\n                        return ret;\r\n                    }];\r\n\r\n                for (; i < len; i++) {\r\n                    if ((matcher = Expr.relative[tokens[i].type])) {\r\n                        matchers = [addCombinator(elementMatcher(matchers), matcher)];\r\n                    } else {\r\n                        matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\r\n\r\n                        // Return special upon seeing a positional matcher\r\n                        if (matcher[expando]) {\r\n\r\n                            // Find the next relative operator (if any) for proper handling\r\n                            j = ++i;\r\n                            for (; j < len; j++) {\r\n                                if (Expr.relative[tokens[j].type]) {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            return setMatcher(\r\n                                i > 1 && elementMatcher(matchers),\r\n                                i > 1 && toSelector(\r\n\r\n                                    // If the preceding token was a descendant combinator, insert an implicit any-element `*`\r\n                                    tokens\r\n                                        .slice(0, i - 1)\r\n                                        .concat({ value: tokens[i - 2].type === \" \" ? \"*\" : \"\" })\r\n                                ).replace(rtrim, \"$1\"),\r\n                                matcher,\r\n                                i < j && matcherFromTokens(tokens.slice(i, j)),\r\n                                j < len && matcherFromTokens((tokens = tokens.slice(j))),\r\n                                j < len && toSelector(tokens)\r\n                            );\r\n                        }\r\n                        matchers.push(matcher);\r\n                    }\r\n                }\r\n\r\n                return elementMatcher(matchers);\r\n            }\r\n\r\n            function matcherFromGroupMatchers(elementMatchers, setMatchers) {\r\n                var bySet = setMatchers.length > 0,\r\n                    byElement = elementMatchers.length > 0,\r\n                    superMatcher = function (seed, context, xml, results, outermost) {\r\n                        var elem, j, matcher,\r\n                            matchedCount = 0,\r\n                            i = \"0\",\r\n                            unmatched = seed && [],\r\n                            setMatched = [],\r\n                            contextBackup = outermostContext,\r\n\r\n                            // We must always have either seed elements or outermost context\r\n                            elems = seed || byElement && Expr.find[\"TAG\"](\"*\", outermost),\r\n\r\n                            // Use integer dirruns iff this is the outermost matcher\r\n                            dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\r\n                            len = elems.length;\r\n\r\n                        if (outermost) {\r\n\r\n                            // Support: IE 11+, Edge 17 - 18+\r\n                            // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                            // two documents; shallow comparisons work.\r\n                            // eslint-disable-next-line eqeqeq\r\n                            outermostContext = context == document || context || outermost;\r\n                        }\r\n\r\n                        // Add elements passing elementMatchers directly to results\r\n                        // Support: IE<9, Safari\r\n                        // Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\r\n                        for (; i !== len && (elem = elems[i]) != null; i++) {\r\n                            if (byElement && elem) {\r\n                                j = 0;\r\n\r\n                                // Support: IE 11+, Edge 17 - 18+\r\n                                // IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\r\n                                // two documents; shallow comparisons work.\r\n                                // eslint-disable-next-line eqeqeq\r\n                                if (!context && elem.ownerDocument != document) {\r\n                                    setDocument(elem);\r\n                                    xml = !documentIsHTML;\r\n                                }\r\n                                while ((matcher = elementMatchers[j++])) {\r\n                                    if (matcher(elem, context || document, xml)) {\r\n                                        results.push(elem);\r\n                                        break;\r\n                                    }\r\n                                }\r\n                                if (outermost) {\r\n                                    dirruns = dirrunsUnique;\r\n                                }\r\n                            }\r\n\r\n                            // Track unmatched elements for set filters\r\n                            if (bySet) {\r\n\r\n                                // They will have gone through all possible matchers\r\n                                if ((elem = !matcher && elem)) {\r\n                                    matchedCount--;\r\n                                }\r\n\r\n                                // Lengthen the array for every element, matched or not\r\n                                if (seed) {\r\n                                    unmatched.push(elem);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        // `i` is now the count of elements visited above, and adding it to `matchedCount`\r\n                        // makes the latter nonnegative.\r\n                        matchedCount += i;\r\n\r\n                        // Apply set filters to unmatched elements\r\n                        // NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\r\n                        // equals `i`), unless we didn't visit _any_ elements in the above loop because we have\r\n                        // no element matchers and no seed.\r\n                        // Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\r\n                        // case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\r\n                        // numerically zero.\r\n                        if (bySet && i !== matchedCount) {\r\n                            j = 0;\r\n                            while ((matcher = setMatchers[j++])) {\r\n                                matcher(unmatched, setMatched, context, xml);\r\n                            }\r\n\r\n                            if (seed) {\r\n\r\n                                // Reintegrate element matches to eliminate the need for sorting\r\n                                if (matchedCount > 0) {\r\n                                    while (i--) {\r\n                                        if (!(unmatched[i] || setMatched[i])) {\r\n                                            setMatched[i] = pop.call(results);\r\n                                        }\r\n                                    }\r\n                                }\r\n\r\n                                // Discard index placeholder values to get only actual matches\r\n                                setMatched = condense(setMatched);\r\n                            }\r\n\r\n                            // Add matches to results\r\n                            push.apply(results, setMatched);\r\n\r\n                            // Seedless set matches succeeding multiple successful matchers stipulate sorting\r\n                            if (outermost && !seed && setMatched.length > 0 &&\r\n                                (matchedCount + setMatchers.length) > 1) {\r\n\r\n                                Sizzle.uniqueSort(results);\r\n                            }\r\n                        }\r\n\r\n                        // Override manipulation of globals by nested matchers\r\n                        if (outermost) {\r\n                            dirruns = dirrunsUnique;\r\n                            outermostContext = contextBackup;\r\n                        }\r\n\r\n                        return unmatched;\r\n                    };\r\n\r\n                return bySet ?\r\n                    markFunction(superMatcher) :\r\n                    superMatcher;\r\n            }\r\n\r\n            compile = Sizzle.compile = function (selector, match /* Internal Use Only */) {\r\n                var i,\r\n                    setMatchers = [],\r\n                    elementMatchers = [],\r\n                    cached = compilerCache[selector + \" \"];\r\n\r\n                if (!cached) {\r\n\r\n                    // Generate a function of recursive functions that can be used to check each element\r\n                    if (!match) {\r\n                        match = tokenize(selector);\r\n                    }\r\n                    i = match.length;\r\n                    while (i--) {\r\n                        cached = matcherFromTokens(match[i]);\r\n                        if (cached[expando]) {\r\n                            setMatchers.push(cached);\r\n                        } else {\r\n                            elementMatchers.push(cached);\r\n                        }\r\n                    }\r\n\r\n                    // Cache the compiled function\r\n                    cached = compilerCache(\r\n                        selector,\r\n                        matcherFromGroupMatchers(elementMatchers, setMatchers)\r\n                    );\r\n\r\n                    // Save selector and tokenization\r\n                    cached.selector = selector;\r\n                }\r\n                return cached;\r\n            };\r\n\r\n            /**\r\n             * A low-level selection function that works with Sizzle's compiled\r\n             *  selector functions\r\n             * @param {String|Function} selector A selector or a pre-compiled\r\n             *  selector function built with Sizzle.compile\r\n             * @param {Element} context\r\n             * @param {Array} [results]\r\n             * @param {Array} [seed] A set of elements to match against\r\n             */\r\n            select = Sizzle.select = function (selector, context, results, seed) {\r\n                var i, tokens, token, type, find,\r\n                    compiled = typeof selector === \"function\" && selector,\r\n                    match = !seed && tokenize((selector = compiled.selector || selector));\r\n\r\n                results = results || [];\r\n\r\n                // Try to minimize operations if there is only one selector in the list and no seed\r\n                // (the latter of which guarantees us context)\r\n                if (match.length === 1) {\r\n\r\n                    // Reduce context if the leading compound selector is an ID\r\n                    tokens = match[0] = match[0].slice(0);\r\n                    if (tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\r\n                        context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\r\n\r\n                        context = (Expr.find[\"ID\"](token.matches[0]\r\n                            .replace(runescape, funescape), context) || [])[0];\r\n                        if (!context) {\r\n                            return results;\r\n\r\n                            // Precompiled matchers will still verify ancestry, so step up a level\r\n                        } else if (compiled) {\r\n                            context = context.parentNode;\r\n                        }\r\n\r\n                        selector = selector.slice(tokens.shift().value.length);\r\n                    }\r\n\r\n                    // Fetch a seed set for right-to-left matching\r\n                    i = matchExpr[\"needsContext\"].test(selector) ? 0 : tokens.length;\r\n                    while (i--) {\r\n                        token = tokens[i];\r\n\r\n                        // Abort if we hit a combinator\r\n                        if (Expr.relative[(type = token.type)]) {\r\n                            break;\r\n                        }\r\n                        if ((find = Expr.find[type])) {\r\n\r\n                            // Search, expanding context for leading sibling combinators\r\n                            if ((seed = find(\r\n                                token.matches[0].replace(runescape, funescape),\r\n                                rsibling.test(tokens[0].type) && testContext(context.parentNode) ||\r\n                                context\r\n                            ))) {\r\n\r\n                                // If seed is empty or no tokens remain, we can return early\r\n                                tokens.splice(i, 1);\r\n                                selector = seed.length && toSelector(tokens);\r\n                                if (!selector) {\r\n                                    push.apply(results, seed);\r\n                                    return results;\r\n                                }\r\n\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Compile and execute a filtering function if one is not provided\r\n                // Provide `match` to avoid retokenization if we modified the selector above\r\n                (compiled || compile(selector, match))(\r\n                    seed,\r\n                    context,\r\n                    !documentIsHTML,\r\n                    results,\r\n                    !context || rsibling.test(selector) && testContext(context.parentNode) || context\r\n                );\r\n                return results;\r\n            };\r\n\r\n            // One-time assignments\r\n\r\n            // Sort stability\r\n            support.sortStable = expando.split(\"\").sort(sortOrder).join(\"\") === expando;\r\n\r\n            // Support: Chrome 14-35+\r\n            // Always assume duplicates if they aren't passed to the comparison function\r\n            support.detectDuplicates = !!hasDuplicate;\r\n\r\n            // Initialize against the default document\r\n            setDocument();\r\n\r\n            // Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\r\n            // Detached nodes confoundingly follow *each other*\r\n            support.sortDetached = assert(function (el) {\r\n\r\n                // Should return 1, but returns 4 (following)\r\n                return el.compareDocumentPosition(document.createElement(\"fieldset\")) & 1;\r\n            });\r\n\r\n            // Support: IE<8\r\n            // Prevent attribute/property \"interpolation\"\r\n            // https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\r\n            if (!assert(function (el) {\r\n                el.innerHTML = \"<a href='#'></a>\";\r\n                return el.firstChild.getAttribute(\"href\") === \"#\";\r\n            })) {\r\n                addHandle(\"type|href|height|width\", function (elem, name, isXML) {\r\n                    if (!isXML) {\r\n                        return elem.getAttribute(name, name.toLowerCase() === \"type\" ? 1 : 2);\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Support: IE<9\r\n            // Use defaultValue in place of getAttribute(\"value\")\r\n            if (!support.attributes || !assert(function (el) {\r\n                el.innerHTML = \"<input/>\";\r\n                el.firstChild.setAttribute(\"value\", \"\");\r\n                return el.firstChild.getAttribute(\"value\") === \"\";\r\n            })) {\r\n                addHandle(\"value\", function (elem, _name, isXML) {\r\n                    if (!isXML && elem.nodeName.toLowerCase() === \"input\") {\r\n                        return elem.defaultValue;\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Support: IE<9\r\n            // Use getAttributeNode to fetch booleans when getAttribute lies\r\n            if (!assert(function (el) {\r\n                return el.getAttribute(\"disabled\") == null;\r\n            })) {\r\n                addHandle(booleans, function (elem, name, isXML) {\r\n                    var val;\r\n                    if (!isXML) {\r\n                        return elem[name] === true ? name.toLowerCase() :\r\n                            (val = elem.getAttributeNode(name)) && val.specified ?\r\n                                val.value :\r\n                                null;\r\n                    }\r\n                });\r\n            }\r\n\r\n            return Sizzle;\r\n\r\n        })(window);\r\n\r\n\r\n\r\n    jQuery.find = Sizzle;\r\n    jQuery.expr = Sizzle.selectors;\r\n\r\n    // Deprecated\r\n    jQuery.expr[\":\"] = jQuery.expr.pseudos;\r\n    jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\r\n    jQuery.text = Sizzle.getText;\r\n    jQuery.isXMLDoc = Sizzle.isXML;\r\n    jQuery.contains = Sizzle.contains;\r\n    jQuery.escapeSelector = Sizzle.escape;\r\n\r\n\r\n\r\n\r\n    var dir = function (elem, dir, until) {\r\n        var matched = [],\r\n            truncate = until !== undefined;\r\n\r\n        while ((elem = elem[dir]) && elem.nodeType !== 9) {\r\n            if (elem.nodeType === 1) {\r\n                if (truncate && jQuery(elem).is(until)) {\r\n                    break;\r\n                }\r\n                matched.push(elem);\r\n            }\r\n        }\r\n        return matched;\r\n    };\r\n\r\n\r\n    var siblings = function (n, elem) {\r\n        var matched = [];\r\n\r\n        for (; n; n = n.nextSibling) {\r\n            if (n.nodeType === 1 && n !== elem) {\r\n                matched.push(n);\r\n            }\r\n        }\r\n\r\n        return matched;\r\n    };\r\n\r\n\r\n    var rneedsContext = jQuery.expr.match.needsContext;\r\n\r\n\r\n\r\n    function nodeName(elem, name) {\r\n\r\n        return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\r\n\r\n    };\r\n    var rsingleTag = (/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i);\r\n\r\n\r\n\r\n    // Implement the identical functionality for filter and not\r\n    function winnow(elements, qualifier, not) {\r\n        if (isFunction(qualifier)) {\r\n            return jQuery.grep(elements, function (elem, i) {\r\n                return !!qualifier.call(elem, i, elem) !== not;\r\n            });\r\n        }\r\n\r\n        // Single element\r\n        if (qualifier.nodeType) {\r\n            return jQuery.grep(elements, function (elem) {\r\n                return (elem === qualifier) !== not;\r\n            });\r\n        }\r\n\r\n        // Arraylike of elements (jQuery, arguments, Array)\r\n        if (typeof qualifier !== \"string\") {\r\n            return jQuery.grep(elements, function (elem) {\r\n                return (indexOf.call(qualifier, elem) > -1) !== not;\r\n            });\r\n        }\r\n\r\n        // Filtered directly for both simple and complex selectors\r\n        return jQuery.filter(qualifier, elements, not);\r\n    }\r\n\r\n    jQuery.filter = function (expr, elems, not) {\r\n        var elem = elems[0];\r\n\r\n        if (not) {\r\n            expr = \":not(\" + expr + \")\";\r\n        }\r\n\r\n        if (elems.length === 1 && elem.nodeType === 1) {\r\n            return jQuery.find.matchesSelector(elem, expr) ? [elem] : [];\r\n        }\r\n\r\n        return jQuery.find.matches(expr, jQuery.grep(elems, function (elem) {\r\n            return elem.nodeType === 1;\r\n        }));\r\n    };\r\n\r\n    jQuery.fn.extend({\r\n        find: function (selector) {\r\n            var i, ret,\r\n                len = this.length,\r\n                self = this;\r\n\r\n            if (typeof selector !== \"string\") {\r\n                return this.pushStack(jQuery(selector).filter(function () {\r\n                    for (i = 0; i < len; i++) {\r\n                        if (jQuery.contains(self[i], this)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }));\r\n            }\r\n\r\n            ret = this.pushStack([]);\r\n\r\n            for (i = 0; i < len; i++) {\r\n                jQuery.find(selector, self[i], ret);\r\n            }\r\n\r\n            return len > 1 ? jQuery.uniqueSort(ret) : ret;\r\n        },\r\n        filter: function (selector) {\r\n            return this.pushStack(winnow(this, selector || [], false));\r\n        },\r\n        not: function (selector) {\r\n            return this.pushStack(winnow(this, selector || [], true));\r\n        },\r\n        is: function (selector) {\r\n            return !!winnow(\r\n                this,\r\n\r\n                // If this is a positional/relative selector, check membership in the returned set\r\n                // so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\r\n                typeof selector === \"string\" && rneedsContext.test(selector) ?\r\n                    jQuery(selector) :\r\n                    selector || [],\r\n                false\r\n            ).length;\r\n        }\r\n    });\r\n\r\n\r\n    // Initialize a jQuery object\r\n\r\n\r\n    // A central reference to the root jQuery(document)\r\n    var rootjQuery,\r\n\r\n        // A simple way to check for HTML strings\r\n        // Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\r\n        // Strict HTML recognition (#11290: must start with <)\r\n        // Shortcut simple #id case for speed\r\n        rquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\r\n\r\n        init = jQuery.fn.init = function (selector, context, root) {\r\n            var match, elem;\r\n\r\n            // HANDLE: $(\"\"), $(null), $(undefined), $(false)\r\n            if (!selector) {\r\n                return this;\r\n            }\r\n\r\n            // Method init() accepts an alternate rootjQuery\r\n            // so migrate can support jQuery.sub (gh-2101)\r\n            root = root || rootjQuery;\r\n\r\n            // Handle HTML strings\r\n            if (typeof selector === \"string\") {\r\n                if (selector[0] === \"<\" &&\r\n                    selector[selector.length - 1] === \">\" &&\r\n                    selector.length >= 3) {\r\n\r\n                    // Assume that strings that start and end with <> are HTML and skip the regex check\r\n                    match = [null, selector, null];\r\n\r\n                } else {\r\n                    match = rquickExpr.exec(selector);\r\n                }\r\n\r\n                // Match html or make sure no context is specified for #id\r\n                if (match && (match[1] || !context)) {\r\n\r\n                    // HANDLE: $(html) -> $(array)\r\n                    if (match[1]) {\r\n                        context = context instanceof jQuery ? context[0] : context;\r\n\r\n                        // Option to run scripts is true for back-compat\r\n                        // Intentionally let the error be thrown if parseHTML is not present\r\n                        jQuery.merge(this, jQuery.parseHTML(\r\n                            match[1],\r\n                            context && context.nodeType ? context.ownerDocument || context : document,\r\n                            true\r\n                        ));\r\n\r\n                        // HANDLE: $(html, props)\r\n                        if (rsingleTag.test(match[1]) && jQuery.isPlainObject(context)) {\r\n                            for (match in context) {\r\n\r\n                                // Properties of context are called as methods if possible\r\n                                if (isFunction(this[match])) {\r\n                                    this[match](context[match]);\r\n\r\n                                    // ...and otherwise set as attributes\r\n                                } else {\r\n                                    this.attr(match, context[match]);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        return this;\r\n\r\n                        // HANDLE: $(#id)\r\n                    } else {\r\n                        elem = document.getElementById(match[2]);\r\n\r\n                        if (elem) {\r\n\r\n                            // Inject the element directly into the jQuery object\r\n                            this[0] = elem;\r\n                            this.length = 1;\r\n                        }\r\n                        return this;\r\n                    }\r\n\r\n                    // HANDLE: $(expr, $(...))\r\n                } else if (!context || context.jquery) {\r\n                    return (context || root).find(selector);\r\n\r\n                    // HANDLE: $(expr, context)\r\n                    // (which is just equivalent to: $(context).find(expr)\r\n                } else {\r\n                    return this.constructor(context).find(selector);\r\n                }\r\n\r\n                // HANDLE: $(DOMElement)\r\n            } else if (selector.nodeType) {\r\n                this[0] = selector;\r\n                this.length = 1;\r\n                return this;\r\n\r\n                // HANDLE: $(function)\r\n                // Shortcut for document ready\r\n            } else if (isFunction(selector)) {\r\n                return root.ready !== undefined ?\r\n                    root.ready(selector) :\r\n\r\n                    // Execute immediately if ready is not present\r\n                    selector(jQuery);\r\n            }\r\n\r\n            return jQuery.makeArray(selector, this);\r\n        };\r\n\r\n    // Give the init function the jQuery prototype for later instantiation\r\n    init.prototype = jQuery.fn;\r\n\r\n    // Initialize central reference\r\n    rootjQuery = jQuery(document);\r\n\r\n\r\n    var rparentsprev = /^(?:parents|prev(?:Until|All))/,\r\n\r\n        // Methods guaranteed to produce a unique set when starting from a unique set\r\n        guaranteedUnique = {\r\n            children: true,\r\n            contents: true,\r\n            next: true,\r\n            prev: true\r\n        };\r\n\r\n    jQuery.fn.extend({\r\n        has: function (target) {\r\n            var targets = jQuery(target, this),\r\n                l = targets.length;\r\n\r\n            return this.filter(function () {\r\n                var i = 0;\r\n                for (; i < l; i++) {\r\n                    if (jQuery.contains(this, targets[i])) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        closest: function (selectors, context) {\r\n            var cur,\r\n                i = 0,\r\n                l = this.length,\r\n                matched = [],\r\n                targets = typeof selectors !== \"string\" && jQuery(selectors);\r\n\r\n            // Positional selectors never match, since there's no _selection_ context\r\n            if (!rneedsContext.test(selectors)) {\r\n                for (; i < l; i++) {\r\n                    for (cur = this[i]; cur && cur !== context; cur = cur.parentNode) {\r\n\r\n                        // Always skip document fragments\r\n                        if (cur.nodeType < 11 && (targets ?\r\n                            targets.index(cur) > -1 :\r\n\r\n                            // Don't pass non-elements to Sizzle\r\n                            cur.nodeType === 1 &&\r\n                            jQuery.find.matchesSelector(cur, selectors))) {\r\n\r\n                            matched.push(cur);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return this.pushStack(matched.length > 1 ? jQuery.uniqueSort(matched) : matched);\r\n        },\r\n\r\n        // Determine the position of an element within the set\r\n        index: function (elem) {\r\n\r\n            // No argument, return index in parent\r\n            if (!elem) {\r\n                return (this[0] && this[0].parentNode) ? this.first().prevAll().length : -1;\r\n            }\r\n\r\n            // Index in selector\r\n            if (typeof elem === \"string\") {\r\n                return indexOf.call(jQuery(elem), this[0]);\r\n            }\r\n\r\n            // Locate the position of the desired element\r\n            return indexOf.call(this,\r\n\r\n                // If it receives a jQuery object, the first element is used\r\n                elem.jquery ? elem[0] : elem\r\n            );\r\n        },\r\n\r\n        add: function (selector, context) {\r\n            return this.pushStack(\r\n                jQuery.uniqueSort(\r\n                    jQuery.merge(this.get(), jQuery(selector, context))\r\n                )\r\n            );\r\n        },\r\n\r\n        addBack: function (selector) {\r\n            return this.add(selector == null ?\r\n                this.prevObject : this.prevObject.filter(selector)\r\n            );\r\n        }\r\n    });\r\n\r\n    function sibling(cur, dir) {\r\n        while ((cur = cur[dir]) && cur.nodeType !== 1) { }\r\n        return cur;\r\n    }\r\n\r\n    jQuery.each({\r\n        parent: function (elem) {\r\n            var parent = elem.parentNode;\r\n            return parent && parent.nodeType !== 11 ? parent : null;\r\n        },\r\n        parents: function (elem) {\r\n            return dir(elem, \"parentNode\");\r\n        },\r\n        parentsUntil: function (elem, _i, until) {\r\n            return dir(elem, \"parentNode\", until);\r\n        },\r\n        next: function (elem) {\r\n            return sibling(elem, \"nextSibling\");\r\n        },\r\n        prev: function (elem) {\r\n            return sibling(elem, \"previousSibling\");\r\n        },\r\n        nextAll: function (elem) {\r\n            return dir(elem, \"nextSibling\");\r\n        },\r\n        prevAll: function (elem) {\r\n            return dir(elem, \"previousSibling\");\r\n        },\r\n        nextUntil: function (elem, _i, until) {\r\n            return dir(elem, \"nextSibling\", until);\r\n        },\r\n        prevUntil: function (elem, _i, until) {\r\n            return dir(elem, \"previousSibling\", until);\r\n        },\r\n        siblings: function (elem) {\r\n            return siblings((elem.parentNode || {}).firstChild, elem);\r\n        },\r\n        children: function (elem) {\r\n            return siblings(elem.firstChild);\r\n        },\r\n        contents: function (elem) {\r\n            if (elem.contentDocument != null &&\r\n\r\n                // Support: IE 11+\r\n                // <object> elements with no `data` attribute has an object\r\n                // `contentDocument` with a `null` prototype.\r\n                getProto(elem.contentDocument)) {\r\n\r\n                return elem.contentDocument;\r\n            }\r\n\r\n            // Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\r\n            // Treat the template element as a regular one in browsers that\r\n            // don't support it.\r\n            if (nodeName(elem, \"template\")) {\r\n                elem = elem.content || elem;\r\n            }\r\n\r\n            return jQuery.merge([], elem.childNodes);\r\n        }\r\n    }, function (name, fn) {\r\n        jQuery.fn[name] = function (until, selector) {\r\n            var matched = jQuery.map(this, fn, until);\r\n\r\n            if (name.slice(-5) !== \"Until\") {\r\n                selector = until;\r\n            }\r\n\r\n            if (selector && typeof selector === \"string\") {\r\n                matched = jQuery.filter(selector, matched);\r\n            }\r\n\r\n            if (this.length > 1) {\r\n\r\n                // Remove duplicates\r\n                if (!guaranteedUnique[name]) {\r\n                    jQuery.uniqueSort(matched);\r\n                }\r\n\r\n                // Reverse order for parents* and prev-derivatives\r\n                if (rparentsprev.test(name)) {\r\n                    matched.reverse();\r\n                }\r\n            }\r\n\r\n            return this.pushStack(matched);\r\n        };\r\n    });\r\n    var rnothtmlwhite = (/[^\\x20\\t\\r\\n\\f]+/g);\r\n\r\n\r\n\r\n    // Convert String-formatted options into Object-formatted ones\r\n    function createOptions(options) {\r\n        var object = {};\r\n        jQuery.each(options.match(rnothtmlwhite) || [], function (_, flag) {\r\n            object[flag] = true;\r\n        });\r\n        return object;\r\n    }\r\n\r\n    /*\r\n     * Create a callback list using the following parameters:\r\n     *\r\n     *\toptions: an optional list of space-separated options that will change how\r\n     *\t\t\tthe callback list behaves or a more traditional option object\r\n     *\r\n     * By default a callback list will act like an event callback list and can be\r\n     * \"fired\" multiple times.\r\n     *\r\n     * Possible options:\r\n     *\r\n     *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\r\n     *\r\n     *\tmemory:\t\t\twill keep track of previous values and will call any callback added\r\n     *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\r\n     *\t\t\t\t\tvalues (like a Deferred)\r\n     *\r\n     *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\r\n     *\r\n     *\tstopOnFalse:\tinterrupt callings when a callback returns false\r\n     *\r\n     */\r\n    jQuery.Callbacks = function (options) {\r\n\r\n        // Convert options from String-formatted to Object-formatted if needed\r\n        // (we check in cache first)\r\n        options = typeof options === \"string\" ?\r\n            createOptions(options) :\r\n            jQuery.extend({}, options);\r\n\r\n        var // Flag to know if list is currently firing\r\n            firing,\r\n\r\n            // Last fire value for non-forgettable lists\r\n            memory,\r\n\r\n            // Flag to know if list was already fired\r\n            fired,\r\n\r\n            // Flag to prevent firing\r\n            locked,\r\n\r\n            // Actual callback list\r\n            list = [],\r\n\r\n            // Queue of execution data for repeatable lists\r\n            queue = [],\r\n\r\n            // Index of currently firing callback (modified by add/remove as needed)\r\n            firingIndex = -1,\r\n\r\n            // Fire callbacks\r\n            fire = function () {\r\n\r\n                // Enforce single-firing\r\n                locked = locked || options.once;\r\n\r\n                // Execute callbacks for all pending executions,\r\n                // respecting firingIndex overrides and runtime changes\r\n                fired = firing = true;\r\n                for (; queue.length; firingIndex = -1) {\r\n                    memory = queue.shift();\r\n                    while (++firingIndex < list.length) {\r\n\r\n                        // Run callback and check for early termination\r\n                        if (list[firingIndex].apply(memory[0], memory[1]) === false &&\r\n                            options.stopOnFalse) {\r\n\r\n                            // Jump to end and forget the data so .add doesn't re-fire\r\n                            firingIndex = list.length;\r\n                            memory = false;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Forget the data if we're done with it\r\n                if (!options.memory) {\r\n                    memory = false;\r\n                }\r\n\r\n                firing = false;\r\n\r\n                // Clean up if we're done firing for good\r\n                if (locked) {\r\n\r\n                    // Keep an empty list if we have data for future add calls\r\n                    if (memory) {\r\n                        list = [];\r\n\r\n                        // Otherwise, this object is spent\r\n                    } else {\r\n                        list = \"\";\r\n                    }\r\n                }\r\n            },\r\n\r\n            // Actual Callbacks object\r\n            self = {\r\n\r\n                // Add a callback or a collection of callbacks to the list\r\n                add: function () {\r\n                    if (list) {\r\n\r\n                        // If we have memory from a past run, we should fire after adding\r\n                        if (memory && !firing) {\r\n                            firingIndex = list.length - 1;\r\n                            queue.push(memory);\r\n                        }\r\n\r\n                        (function add(args) {\r\n                            jQuery.each(args, function (_, arg) {\r\n                                if (isFunction(arg)) {\r\n                                    if (!options.unique || !self.has(arg)) {\r\n                                        list.push(arg);\r\n                                    }\r\n                                } else if (arg && arg.length && toType(arg) !== \"string\") {\r\n\r\n                                    // Inspect recursively\r\n                                    add(arg);\r\n                                }\r\n                            });\r\n                        })(arguments);\r\n\r\n                        if (memory && !firing) {\r\n                            fire();\r\n                        }\r\n                    }\r\n                    return this;\r\n                },\r\n\r\n                // Remove a callback from the list\r\n                remove: function () {\r\n                    jQuery.each(arguments, function (_, arg) {\r\n                        var index;\r\n                        while ((index = jQuery.inArray(arg, list, index)) > -1) {\r\n                            list.splice(index, 1);\r\n\r\n                            // Handle firing indexes\r\n                            if (index <= firingIndex) {\r\n                                firingIndex--;\r\n                            }\r\n                        }\r\n                    });\r\n                    return this;\r\n                },\r\n\r\n                // Check if a given callback is in the list.\r\n                // If no argument is given, return whether or not list has callbacks attached.\r\n                has: function (fn) {\r\n                    return fn ?\r\n                        jQuery.inArray(fn, list) > -1 :\r\n                        list.length > 0;\r\n                },\r\n\r\n                // Remove all callbacks from the list\r\n                empty: function () {\r\n                    if (list) {\r\n                        list = [];\r\n                    }\r\n                    return this;\r\n                },\r\n\r\n                // Disable .fire and .add\r\n                // Abort any current/pending executions\r\n                // Clear all callbacks and values\r\n                disable: function () {\r\n                    locked = queue = [];\r\n                    list = memory = \"\";\r\n                    return this;\r\n                },\r\n                disabled: function () {\r\n                    return !list;\r\n                },\r\n\r\n                // Disable .fire\r\n                // Also disable .add unless we have memory (since it would have no effect)\r\n                // Abort any pending executions\r\n                lock: function () {\r\n                    locked = queue = [];\r\n                    if (!memory && !firing) {\r\n                        list = memory = \"\";\r\n                    }\r\n                    return this;\r\n                },\r\n                locked: function () {\r\n                    return !!locked;\r\n                },\r\n\r\n                // Call all callbacks with the given context and arguments\r\n                fireWith: function (context, args) {\r\n                    if (!locked) {\r\n                        args = args || [];\r\n                        args = [context, args.slice ? args.slice() : args];\r\n                        queue.push(args);\r\n                        if (!firing) {\r\n                            fire();\r\n                        }\r\n                    }\r\n                    return this;\r\n                },\r\n\r\n                // Call all the callbacks with the given arguments\r\n                fire: function () {\r\n                    self.fireWith(this, arguments);\r\n                    return this;\r\n                },\r\n\r\n                // To know if the callbacks have already been called at least once\r\n                fired: function () {\r\n                    return !!fired;\r\n                }\r\n            };\r\n\r\n        return self;\r\n    };\r\n\r\n\r\n    function Identity(v) {\r\n        return v;\r\n    }\r\n    function Thrower(ex) {\r\n        throw ex;\r\n    }\r\n\r\n    function adoptValue(value, resolve, reject, noValue) {\r\n        var method;\r\n\r\n        try {\r\n\r\n            // Check for promise aspect first to privilege synchronous behavior\r\n            if (value && isFunction((method = value.promise))) {\r\n                method.call(value).done(resolve).fail(reject);\r\n\r\n                // Other thenables\r\n            } else if (value && isFunction((method = value.then))) {\r\n                method.call(value, resolve, reject);\r\n\r\n                // Other non-thenables\r\n            } else {\r\n\r\n                // Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\r\n                // * false: [ value ].slice( 0 ) => resolve( value )\r\n                // * true: [ value ].slice( 1 ) => resolve()\r\n                resolve.apply(undefined, [value].slice(noValue));\r\n            }\r\n\r\n            // For Promises/A+, convert exceptions into rejections\r\n            // Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\r\n            // Deferred#then to conditionally suppress rejection.\r\n        } catch (value) {\r\n\r\n            // Support: Android 4.0 only\r\n            // Strict mode functions invoked without .call/.apply get global-object context\r\n            reject.apply(undefined, [value]);\r\n        }\r\n    }\r\n\r\n    jQuery.extend({\r\n\r\n        Deferred: function (func) {\r\n            var tuples = [\r\n\r\n                // action, add listener, callbacks,\r\n                // ... .then handlers, argument index, [final state]\r\n                [\"notify\", \"progress\", jQuery.Callbacks(\"memory\"),\r\n                    jQuery.Callbacks(\"memory\"), 2],\r\n                [\"resolve\", \"done\", jQuery.Callbacks(\"once memory\"),\r\n                    jQuery.Callbacks(\"once memory\"), 0, \"resolved\"],\r\n                [\"reject\", \"fail\", jQuery.Callbacks(\"once memory\"),\r\n                    jQuery.Callbacks(\"once memory\"), 1, \"rejected\"]\r\n            ],\r\n                state = \"pending\",\r\n                promise = {\r\n                    state: function () {\r\n                        return state;\r\n                    },\r\n                    always: function () {\r\n                        deferred.done(arguments).fail(arguments);\r\n                        return this;\r\n                    },\r\n                    \"catch\": function (fn) {\r\n                        return promise.then(null, fn);\r\n                    },\r\n\r\n                    // Keep pipe for back-compat\r\n                    pipe: function ( /* fnDone, fnFail, fnProgress */) {\r\n                        var fns = arguments;\r\n\r\n                        return jQuery.Deferred(function (newDefer) {\r\n                            jQuery.each(tuples, function (_i, tuple) {\r\n\r\n                                // Map tuples (progress, done, fail) to arguments (done, fail, progress)\r\n                                var fn = isFunction(fns[tuple[4]]) && fns[tuple[4]];\r\n\r\n                                // deferred.progress(function() { bind to newDefer or newDefer.notify })\r\n                                // deferred.done(function() { bind to newDefer or newDefer.resolve })\r\n                                // deferred.fail(function() { bind to newDefer or newDefer.reject })\r\n                                deferred[tuple[1]](function () {\r\n                                    var returned = fn && fn.apply(this, arguments);\r\n                                    if (returned && isFunction(returned.promise)) {\r\n                                        returned.promise()\r\n                                            .progress(newDefer.notify)\r\n                                            .done(newDefer.resolve)\r\n                                            .fail(newDefer.reject);\r\n                                    } else {\r\n                                        newDefer[tuple[0] + \"With\"](\r\n                                            this,\r\n                                            fn ? [returned] : arguments\r\n                                        );\r\n                                    }\r\n                                });\r\n                            });\r\n                            fns = null;\r\n                        }).promise();\r\n                    },\r\n                    then: function (onFulfilled, onRejected, onProgress) {\r\n                        var maxDepth = 0;\r\n                        function resolve(depth, deferred, handler, special) {\r\n                            return function () {\r\n                                var that = this,\r\n                                    args = arguments,\r\n                                    mightThrow = function () {\r\n                                        var returned, then;\r\n\r\n                                        // Support: Promises/A+ section 2.3.3.3.3\r\n                                        // https://promisesaplus.com/#point-59\r\n                                        // Ignore double-resolution attempts\r\n                                        if (depth < maxDepth) {\r\n                                            return;\r\n                                        }\r\n\r\n                                        returned = handler.apply(that, args);\r\n\r\n                                        // Support: Promises/A+ section 2.3.1\r\n                                        // https://promisesaplus.com/#point-48\r\n                                        if (returned === deferred.promise()) {\r\n                                            throw new TypeError(\"Thenable self-resolution\");\r\n                                        }\r\n\r\n                                        // Support: Promises/A+ sections 2.3.3.1, 3.5\r\n                                        // https://promisesaplus.com/#point-54\r\n                                        // https://promisesaplus.com/#point-75\r\n                                        // Retrieve `then` only once\r\n                                        then = returned &&\r\n\r\n                                            // Support: Promises/A+ section 2.3.4\r\n                                            // https://promisesaplus.com/#point-64\r\n                                            // Only check objects and functions for thenability\r\n                                            (typeof returned === \"object\" ||\r\n                                                typeof returned === \"function\") &&\r\n                                            returned.then;\r\n\r\n                                        // Handle a returned thenable\r\n                                        if (isFunction(then)) {\r\n\r\n                                            // Special processors (notify) just wait for resolution\r\n                                            if (special) {\r\n                                                then.call(\r\n                                                    returned,\r\n                                                    resolve(maxDepth, deferred, Identity, special),\r\n                                                    resolve(maxDepth, deferred, Thrower, special)\r\n                                                );\r\n\r\n                                                // Normal processors (resolve) also hook into progress\r\n                                            } else {\r\n\r\n                                                // ...and disregard older resolution values\r\n                                                maxDepth++;\r\n\r\n                                                then.call(\r\n                                                    returned,\r\n                                                    resolve(maxDepth, deferred, Identity, special),\r\n                                                    resolve(maxDepth, deferred, Thrower, special),\r\n                                                    resolve(maxDepth, deferred, Identity,\r\n                                                        deferred.notifyWith)\r\n                                                );\r\n                                            }\r\n\r\n                                            // Handle all other returned values\r\n                                        } else {\r\n\r\n                                            // Only substitute handlers pass on context\r\n                                            // and multiple values (non-spec behavior)\r\n                                            if (handler !== Identity) {\r\n                                                that = undefined;\r\n                                                args = [returned];\r\n                                            }\r\n\r\n                                            // Process the value(s)\r\n                                            // Default process is resolve\r\n                                            (special || deferred.resolveWith)(that, args);\r\n                                        }\r\n                                    },\r\n\r\n                                    // Only normal processors (resolve) catch and reject exceptions\r\n                                    process = special ?\r\n                                        mightThrow :\r\n                                        function () {\r\n                                            try {\r\n                                                mightThrow();\r\n                                            } catch (e) {\r\n\r\n                                                if (jQuery.Deferred.exceptionHook) {\r\n                                                    jQuery.Deferred.exceptionHook(e,\r\n                                                        process.stackTrace);\r\n                                                }\r\n\r\n                                                // Support: Promises/A+ section 2.3.3.3.4.1\r\n                                                // https://promisesaplus.com/#point-61\r\n                                                // Ignore post-resolution exceptions\r\n                                                if (depth + 1 >= maxDepth) {\r\n\r\n                                                    // Only substitute handlers pass on context\r\n                                                    // and multiple values (non-spec behavior)\r\n                                                    if (handler !== Thrower) {\r\n                                                        that = undefined;\r\n                                                        args = [e];\r\n                                                    }\r\n\r\n                                                    deferred.rejectWith(that, args);\r\n                                                }\r\n                                            }\r\n                                        };\r\n\r\n                                // Support: Promises/A+ section 2.3.3.3.1\r\n                                // https://promisesaplus.com/#point-57\r\n                                // Re-resolve promises immediately to dodge false rejection from\r\n                                // subsequent errors\r\n                                if (depth) {\r\n                                    process();\r\n                                } else {\r\n\r\n                                    // Call an optional hook to record the stack, in case of exception\r\n                                    // since it's otherwise lost when execution goes async\r\n                                    if (jQuery.Deferred.getStackHook) {\r\n                                        process.stackTrace = jQuery.Deferred.getStackHook();\r\n                                    }\r\n                                    window.setTimeout(process);\r\n                                }\r\n                            };\r\n                        }\r\n\r\n                        return jQuery.Deferred(function (newDefer) {\r\n\r\n                            // progress_handlers.add( ... )\r\n                            tuples[0][3].add(\r\n                                resolve(\r\n                                    0,\r\n                                    newDefer,\r\n                                    isFunction(onProgress) ?\r\n                                        onProgress :\r\n                                        Identity,\r\n                                    newDefer.notifyWith\r\n                                )\r\n                            );\r\n\r\n                            // fulfilled_handlers.add( ... )\r\n                            tuples[1][3].add(\r\n                                resolve(\r\n                                    0,\r\n                                    newDefer,\r\n                                    isFunction(onFulfilled) ?\r\n                                        onFulfilled :\r\n                                        Identity\r\n                                )\r\n                            );\r\n\r\n                            // rejected_handlers.add( ... )\r\n                            tuples[2][3].add(\r\n                                resolve(\r\n                                    0,\r\n                                    newDefer,\r\n                                    isFunction(onRejected) ?\r\n                                        onRejected :\r\n                                        Thrower\r\n                                )\r\n                            );\r\n                        }).promise();\r\n                    },\r\n\r\n                    // Get a promise for this deferred\r\n                    // If obj is provided, the promise aspect is added to the object\r\n                    promise: function (obj) {\r\n                        return obj != null ? jQuery.extend(obj, promise) : promise;\r\n                    }\r\n                },\r\n                deferred = {};\r\n\r\n            // Add list-specific methods\r\n            jQuery.each(tuples, function (i, tuple) {\r\n                var list = tuple[2],\r\n                    stateString = tuple[5];\r\n\r\n                // promise.progress = list.add\r\n                // promise.done = list.add\r\n                // promise.fail = list.add\r\n                promise[tuple[1]] = list.add;\r\n\r\n                // Handle state\r\n                if (stateString) {\r\n                    list.add(\r\n                        function () {\r\n\r\n                            // state = \"resolved\" (i.e., fulfilled)\r\n                            // state = \"rejected\"\r\n                            state = stateString;\r\n                        },\r\n\r\n                        // rejected_callbacks.disable\r\n                        // fulfilled_callbacks.disable\r\n                        tuples[3 - i][2].disable,\r\n\r\n                        // rejected_handlers.disable\r\n                        // fulfilled_handlers.disable\r\n                        tuples[3 - i][3].disable,\r\n\r\n                        // progress_callbacks.lock\r\n                        tuples[0][2].lock,\r\n\r\n                        // progress_handlers.lock\r\n                        tuples[0][3].lock\r\n                    );\r\n                }\r\n\r\n                // progress_handlers.fire\r\n                // fulfilled_handlers.fire\r\n                // rejected_handlers.fire\r\n                list.add(tuple[3].fire);\r\n\r\n                // deferred.notify = function() { deferred.notifyWith(...) }\r\n                // deferred.resolve = function() { deferred.resolveWith(...) }\r\n                // deferred.reject = function() { deferred.rejectWith(...) }\r\n                deferred[tuple[0]] = function () {\r\n                    deferred[tuple[0] + \"With\"](this === deferred ? undefined : this, arguments);\r\n                    return this;\r\n                };\r\n\r\n                // deferred.notifyWith = list.fireWith\r\n                // deferred.resolveWith = list.fireWith\r\n                // deferred.rejectWith = list.fireWith\r\n                deferred[tuple[0] + \"With\"] = list.fireWith;\r\n            });\r\n\r\n            // Make the deferred a promise\r\n            promise.promise(deferred);\r\n\r\n            // Call given func if any\r\n            if (func) {\r\n                func.call(deferred, deferred);\r\n            }\r\n\r\n            // All done!\r\n            return deferred;\r\n        },\r\n\r\n        // Deferred helper\r\n        when: function (singleValue) {\r\n            var\r\n\r\n                // count of uncompleted subordinates\r\n                remaining = arguments.length,\r\n\r\n                // count of unprocessed arguments\r\n                i = remaining,\r\n\r\n                // subordinate fulfillment data\r\n                resolveContexts = Array(i),\r\n                resolveValues = slice.call(arguments),\r\n\r\n                // the master Deferred\r\n                master = jQuery.Deferred(),\r\n\r\n                // subordinate callback factory\r\n                updateFunc = function (i) {\r\n                    return function (value) {\r\n                        resolveContexts[i] = this;\r\n                        resolveValues[i] = arguments.length > 1 ? slice.call(arguments) : value;\r\n                        if (!(--remaining)) {\r\n                            master.resolveWith(resolveContexts, resolveValues);\r\n                        }\r\n                    };\r\n                };\r\n\r\n            // Single- and empty arguments are adopted like Promise.resolve\r\n            if (remaining <= 1) {\r\n                adoptValue(singleValue, master.done(updateFunc(i)).resolve, master.reject,\r\n                    !remaining);\r\n\r\n                // Use .then() to unwrap secondary thenables (cf. gh-3000)\r\n                if (master.state() === \"pending\" ||\r\n                    isFunction(resolveValues[i] && resolveValues[i].then)) {\r\n\r\n                    return master.then();\r\n                }\r\n            }\r\n\r\n            // Multiple arguments are aggregated like Promise.all array elements\r\n            while (i--) {\r\n                adoptValue(resolveValues[i], updateFunc(i), master.reject);\r\n            }\r\n\r\n            return master.promise();\r\n        }\r\n    });\r\n\r\n\r\n    // These usually indicate a programmer mistake during development,\r\n    // warn about them ASAP rather than swallowing them by default.\r\n    var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\r\n\r\n    jQuery.Deferred.exceptionHook = function (error, stack) {\r\n\r\n        // Support: IE 8 - 9 only\r\n        // Console exists when dev tools are open, which can happen at any time\r\n        if (window.console && window.console.warn && error && rerrorNames.test(error.name)) {\r\n            window.console.warn(\"jQuery.Deferred exception: \" + error.message, error.stack, stack);\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n    jQuery.readyException = function (error) {\r\n        window.setTimeout(function () {\r\n            throw error;\r\n        });\r\n    };\r\n\r\n\r\n\r\n\r\n    // The deferred used on DOM ready\r\n    var readyList = jQuery.Deferred();\r\n\r\n    jQuery.fn.ready = function (fn) {\r\n\r\n        readyList\r\n            .then(fn)\r\n\r\n            // Wrap jQuery.readyException in a function so that the lookup\r\n            // happens at the time of error handling instead of callback\r\n            // registration.\r\n            .catch(function (error) {\r\n                jQuery.readyException(error);\r\n            });\r\n\r\n        return this;\r\n    };\r\n\r\n    jQuery.extend({\r\n\r\n        // Is the DOM ready to be used? Set to true once it occurs.\r\n        isReady: false,\r\n\r\n        // A counter to track how many items to wait for before\r\n        // the ready event fires. See #6781\r\n        readyWait: 1,\r\n\r\n        // Handle when the DOM is ready\r\n        ready: function (wait) {\r\n\r\n            // Abort if there are pending holds or we're already ready\r\n            if (wait === true ? --jQuery.readyWait : jQuery.isReady) {\r\n                return;\r\n            }\r\n\r\n            // Remember that the DOM is ready\r\n            jQuery.isReady = true;\r\n\r\n            // If a normal DOM Ready event fired, decrement, and wait if need be\r\n            if (wait !== true && --jQuery.readyWait > 0) {\r\n                return;\r\n            }\r\n\r\n            // If there are functions bound, to execute\r\n            readyList.resolveWith(document, [jQuery]);\r\n        }\r\n    });\r\n\r\n    jQuery.ready.then = readyList.then;\r\n\r\n    // The ready event handler and self cleanup method\r\n    function completed() {\r\n        document.removeEventListener(\"DOMContentLoaded\", completed);\r\n        window.removeEventListener(\"load\", completed);\r\n        jQuery.ready();\r\n    }\r\n\r\n    // Catch cases where $(document).ready() is called\r\n    // after the browser event has already occurred.\r\n    // Support: IE <=9 - 10 only\r\n    // Older IE sometimes signals \"interactive\" too soon\r\n    if (document.readyState === \"complete\" ||\r\n        (document.readyState !== \"loading\" && !document.documentElement.doScroll)) {\r\n\r\n        // Handle it asynchronously to allow scripts the opportunity to delay ready\r\n        window.setTimeout(jQuery.ready);\r\n\r\n    } else {\r\n\r\n        // Use the handy event callback\r\n        document.addEventListener(\"DOMContentLoaded\", completed);\r\n\r\n        // A fallback to window.onload, that will always work\r\n        window.addEventListener(\"load\", completed);\r\n    }\r\n\r\n\r\n\r\n\r\n    // Multifunctional method to get and set values of a collection\r\n    // The value/s can optionally be executed if it's a function\r\n    var access = function (elems, fn, key, value, chainable, emptyGet, raw) {\r\n        var i = 0,\r\n            len = elems.length,\r\n            bulk = key == null;\r\n\r\n        // Sets many values\r\n        if (toType(key) === \"object\") {\r\n            chainable = true;\r\n            for (i in key) {\r\n                access(elems, fn, i, key[i], true, emptyGet, raw);\r\n            }\r\n\r\n            // Sets one value\r\n        } else if (value !== undefined) {\r\n            chainable = true;\r\n\r\n            if (!isFunction(value)) {\r\n                raw = true;\r\n            }\r\n\r\n            if (bulk) {\r\n\r\n                // Bulk operations run against the entire set\r\n                if (raw) {\r\n                    fn.call(elems, value);\r\n                    fn = null;\r\n\r\n                    // ...except when executing function values\r\n                } else {\r\n                    bulk = fn;\r\n                    fn = function (elem, _key, value) {\r\n                        return bulk.call(jQuery(elem), value);\r\n                    };\r\n                }\r\n            }\r\n\r\n            if (fn) {\r\n                for (; i < len; i++) {\r\n                    fn(\r\n                        elems[i], key, raw ?\r\n                        value :\r\n                        value.call(elems[i], i, fn(elems[i], key))\r\n                    );\r\n                }\r\n            }\r\n        }\r\n\r\n        if (chainable) {\r\n            return elems;\r\n        }\r\n\r\n        // Gets\r\n        if (bulk) {\r\n            return fn.call(elems);\r\n        }\r\n\r\n        return len ? fn(elems[0], key) : emptyGet;\r\n    };\r\n\r\n\r\n    // Matches dashed string for camelizing\r\n    var rmsPrefix = /^-ms-/,\r\n        rdashAlpha = /-([a-z])/g;\r\n\r\n    // Used by camelCase as callback to replace()\r\n    function fcamelCase(_all, letter) {\r\n        return letter.toUpperCase();\r\n    }\r\n\r\n    // Convert dashed to camelCase; used by the css and data modules\r\n    // Support: IE <=9 - 11, Edge 12 - 15\r\n    // Microsoft forgot to hump their vendor prefix (#9572)\r\n    function camelCase(string) {\r\n        return string.replace(rmsPrefix, \"ms-\").replace(rdashAlpha, fcamelCase);\r\n    }\r\n    var acceptData = function (owner) {\r\n\r\n        // Accepts only:\r\n        //  - Node\r\n        //    - Node.ELEMENT_NODE\r\n        //    - Node.DOCUMENT_NODE\r\n        //  - Object\r\n        //    - Any\r\n        return owner.nodeType === 1 || owner.nodeType === 9 || !(+owner.nodeType);\r\n    };\r\n\r\n\r\n\r\n\r\n    function Data() {\r\n        this.expando = jQuery.expando + Data.uid++;\r\n    }\r\n\r\n    Data.uid = 1;\r\n\r\n    Data.prototype = {\r\n\r\n        cache: function (owner) {\r\n\r\n            // Check if the owner object already has a cache\r\n            var value = owner[this.expando];\r\n\r\n            // If not, create one\r\n            if (!value) {\r\n                value = {};\r\n\r\n                // We can accept data for non-element nodes in modern browsers,\r\n                // but we should not, see #8335.\r\n                // Always return an empty object.\r\n                if (acceptData(owner)) {\r\n\r\n                    // If it is a node unlikely to be stringify-ed or looped over\r\n                    // use plain assignment\r\n                    if (owner.nodeType) {\r\n                        owner[this.expando] = value;\r\n\r\n                        // Otherwise secure it in a non-enumerable property\r\n                        // configurable must be true to allow the property to be\r\n                        // deleted when data is removed\r\n                    } else {\r\n                        Object.defineProperty(owner, this.expando, {\r\n                            value: value,\r\n                            configurable: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n\r\n            return value;\r\n        },\r\n        set: function (owner, data, value) {\r\n            var prop,\r\n                cache = this.cache(owner);\r\n\r\n            // Handle: [ owner, key, value ] args\r\n            // Always use camelCase key (gh-2257)\r\n            if (typeof data === \"string\") {\r\n                cache[camelCase(data)] = value;\r\n\r\n                // Handle: [ owner, { properties } ] args\r\n            } else {\r\n\r\n                // Copy the properties one-by-one to the cache object\r\n                for (prop in data) {\r\n                    cache[camelCase(prop)] = data[prop];\r\n                }\r\n            }\r\n            return cache;\r\n        },\r\n        get: function (owner, key) {\r\n            return key === undefined ?\r\n                this.cache(owner) :\r\n\r\n                // Always use camelCase key (gh-2257)\r\n                owner[this.expando] && owner[this.expando][camelCase(key)];\r\n        },\r\n        access: function (owner, key, value) {\r\n\r\n            // In cases where either:\r\n            //\r\n            //   1. No key was specified\r\n            //   2. A string key was specified, but no value provided\r\n            //\r\n            // Take the \"read\" path and allow the get method to determine\r\n            // which value to return, respectively either:\r\n            //\r\n            //   1. The entire cache object\r\n            //   2. The data stored at the key\r\n            //\r\n            if (key === undefined ||\r\n                ((key && typeof key === \"string\") && value === undefined)) {\r\n\r\n                return this.get(owner, key);\r\n            }\r\n\r\n            // When the key is not a string, or both a key and value\r\n            // are specified, set or extend (existing objects) with either:\r\n            //\r\n            //   1. An object of properties\r\n            //   2. A key and value\r\n            //\r\n            this.set(owner, key, value);\r\n\r\n            // Since the \"set\" path can have two possible entry points\r\n            // return the expected data based on which path was taken[*]\r\n            return value !== undefined ? value : key;\r\n        },\r\n        remove: function (owner, key) {\r\n            var i,\r\n                cache = owner[this.expando];\r\n\r\n            if (cache === undefined) {\r\n                return;\r\n            }\r\n\r\n            if (key !== undefined) {\r\n\r\n                // Support array or space separated string of keys\r\n                if (Array.isArray(key)) {\r\n\r\n                    // If key is an array of keys...\r\n                    // We always set camelCase keys, so remove that.\r\n                    key = key.map(camelCase);\r\n                } else {\r\n                    key = camelCase(key);\r\n\r\n                    // If a key with the spaces exists, use it.\r\n                    // Otherwise, create an array by matching non-whitespace\r\n                    key = key in cache ?\r\n                        [key] :\r\n                        (key.match(rnothtmlwhite) || []);\r\n                }\r\n\r\n                i = key.length;\r\n\r\n                while (i--) {\r\n                    delete cache[key[i]];\r\n                }\r\n            }\r\n\r\n            // Remove the expando if there's no more data\r\n            if (key === undefined || jQuery.isEmptyObject(cache)) {\r\n\r\n                // Support: Chrome <=35 - 45\r\n                // Webkit & Blink performance suffers when deleting properties\r\n                // from DOM nodes, so set to undefined instead\r\n                // https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\r\n                if (owner.nodeType) {\r\n                    owner[this.expando] = undefined;\r\n                } else {\r\n                    delete owner[this.expando];\r\n                }\r\n            }\r\n        },\r\n        hasData: function (owner) {\r\n            var cache = owner[this.expando];\r\n            return cache !== undefined && !jQuery.isEmptyObject(cache);\r\n        }\r\n    };\r\n    var dataPriv = new Data();\r\n\r\n    var dataUser = new Data();\r\n\r\n\r\n\r\n    //\tImplementation Summary\r\n    //\r\n    //\t1. Enforce API surface and semantic compatibility with 1.9.x branch\r\n    //\t2. Improve the module's maintainability by reducing the storage\r\n    //\t\tpaths to a single mechanism.\r\n    //\t3. Use the same single mechanism to support \"private\" and \"user\" data.\r\n    //\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\r\n    //\t5. Avoid exposing implementation details on user objects (eg. expando properties)\r\n    //\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\r\n\r\n    var rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\r\n        rmultiDash = /[A-Z]/g;\r\n\r\n    function getData(data) {\r\n        if (data === \"true\") {\r\n            return true;\r\n        }\r\n\r\n        if (data === \"false\") {\r\n            return false;\r\n        }\r\n\r\n        if (data === \"null\") {\r\n            return null;\r\n        }\r\n\r\n        // Only convert to a number if it doesn't change the string\r\n        if (data === +data + \"\") {\r\n            return +data;\r\n        }\r\n\r\n        if (rbrace.test(data)) {\r\n            return JSON.parse(data);\r\n        }\r\n\r\n        return data;\r\n    }\r\n\r\n    function dataAttr(elem, key, data) {\r\n        var name;\r\n\r\n        // If nothing was found internally, try to fetch any\r\n        // data from the HTML5 data-* attribute\r\n        if (data === undefined && elem.nodeType === 1) {\r\n            name = \"data-\" + key.replace(rmultiDash, \"-$&\").toLowerCase();\r\n            data = elem.getAttribute(name);\r\n\r\n            if (typeof data === \"string\") {\r\n                try {\r\n                    data = getData(data);\r\n                } catch (e) { }\r\n\r\n                // Make sure we set the data so it isn't changed later\r\n                dataUser.set(elem, key, data);\r\n            } else {\r\n                data = undefined;\r\n            }\r\n        }\r\n        return data;\r\n    }\r\n\r\n    jQuery.extend({\r\n        hasData: function (elem) {\r\n            return dataUser.hasData(elem) || dataPriv.hasData(elem);\r\n        },\r\n\r\n        data: function (elem, name, data) {\r\n            return dataUser.access(elem, name, data);\r\n        },\r\n\r\n        removeData: function (elem, name) {\r\n            dataUser.remove(elem, name);\r\n        },\r\n\r\n        // TODO: Now that all calls to _data and _removeData have been replaced\r\n        // with direct calls to dataPriv methods, these can be deprecated.\r\n        _data: function (elem, name, data) {\r\n            return dataPriv.access(elem, name, data);\r\n        },\r\n\r\n        _removeData: function (elem, name) {\r\n            dataPriv.remove(elem, name);\r\n        }\r\n    });\r\n\r\n    jQuery.fn.extend({\r\n        data: function (key, value) {\r\n            var i, name, data,\r\n                elem = this[0],\r\n                attrs = elem && elem.attributes;\r\n\r\n            // Gets all values\r\n            if (key === undefined) {\r\n                if (this.length) {\r\n                    data = dataUser.get(elem);\r\n\r\n                    if (elem.nodeType === 1 && !dataPriv.get(elem, \"hasDataAttrs\")) {\r\n                        i = attrs.length;\r\n                        while (i--) {\r\n\r\n                            // Support: IE 11 only\r\n                            // The attrs elements can be null (#14894)\r\n                            if (attrs[i]) {\r\n                                name = attrs[i].name;\r\n                                if (name.indexOf(\"data-\") === 0) {\r\n                                    name = camelCase(name.slice(5));\r\n                                    dataAttr(elem, name, data[name]);\r\n                                }\r\n                            }\r\n                        }\r\n                        dataPriv.set(elem, \"hasDataAttrs\", true);\r\n                    }\r\n                }\r\n\r\n                return data;\r\n            }\r\n\r\n            // Sets multiple values\r\n            if (typeof key === \"object\") {\r\n                return this.each(function () {\r\n                    dataUser.set(this, key);\r\n                });\r\n            }\r\n\r\n            return access(this, function (value) {\r\n                var data;\r\n\r\n                // The calling jQuery object (element matches) is not empty\r\n                // (and therefore has an element appears at this[ 0 ]) and the\r\n                // `value` parameter was not undefined. An empty jQuery object\r\n                // will result in `undefined` for elem = this[ 0 ] which will\r\n                // throw an exception if an attempt to read a data cache is made.\r\n                if (elem && value === undefined) {\r\n\r\n                    // Attempt to get data from the cache\r\n                    // The key will always be camelCased in Data\r\n                    data = dataUser.get(elem, key);\r\n                    if (data !== undefined) {\r\n                        return data;\r\n                    }\r\n\r\n                    // Attempt to \"discover\" the data in\r\n                    // HTML5 custom data-* attrs\r\n                    data = dataAttr(elem, key);\r\n                    if (data !== undefined) {\r\n                        return data;\r\n                    }\r\n\r\n                    // We tried really hard, but the data doesn't exist.\r\n                    return;\r\n                }\r\n\r\n                // Set the data...\r\n                this.each(function () {\r\n\r\n                    // We always store the camelCased key\r\n                    dataUser.set(this, key, value);\r\n                });\r\n            }, null, value, arguments.length > 1, null, true);\r\n        },\r\n\r\n        removeData: function (key) {\r\n            return this.each(function () {\r\n                dataUser.remove(this, key);\r\n            });\r\n        }\r\n    });\r\n\r\n\r\n    jQuery.extend({\r\n        queue: function (elem, type, data) {\r\n            var queue;\r\n\r\n            if (elem) {\r\n                type = (type || \"fx\") + \"queue\";\r\n                queue = dataPriv.get(elem, type);\r\n\r\n                // Speed up dequeue by getting out quickly if this is just a lookup\r\n                if (data) {\r\n                    if (!queue || Array.isArray(data)) {\r\n                        queue = dataPriv.access(elem, type, jQuery.makeArray(data));\r\n                    } else {\r\n                        queue.push(data);\r\n                    }\r\n                }\r\n                return queue || [];\r\n            }\r\n        },\r\n\r\n        dequeue: function (elem, type) {\r\n            type = type || \"fx\";\r\n\r\n            var queue = jQuery.queue(elem, type),\r\n                startLength = queue.length,\r\n                fn = queue.shift(),\r\n                hooks = jQuery._queueHooks(elem, type),\r\n                next = function () {\r\n                    jQuery.dequeue(elem, type);\r\n                };\r\n\r\n            // If the fx queue is dequeued, always remove the progress sentinel\r\n            if (fn === \"inprogress\") {\r\n                fn = queue.shift();\r\n                startLength--;\r\n            }\r\n\r\n            if (fn) {\r\n\r\n                // Add a progress sentinel to prevent the fx queue from being\r\n                // automatically dequeued\r\n                if (type === \"fx\") {\r\n                    queue.unshift(\"inprogress\");\r\n                }\r\n\r\n                // Clear up the last queue stop function\r\n                delete hooks.stop;\r\n                fn.call(elem, next, hooks);\r\n            }\r\n\r\n            if (!startLength && hooks) {\r\n                hooks.empty.fire();\r\n            }\r\n        },\r\n\r\n        // Not public - generate a queueHooks object, or return the current one\r\n        _queueHooks: function (elem, type) {\r\n            var key = type + \"queueHooks\";\r\n            return dataPriv.get(elem, key) || dataPriv.access(elem, key, {\r\n                empty: jQuery.Callbacks(\"once memory\").add(function () {\r\n                    dataPriv.remove(elem, [type + \"queue\", key]);\r\n                })\r\n            });\r\n        }\r\n    });\r\n\r\n    jQuery.fn.extend({\r\n        queue: function (type, data) {\r\n            var setter = 2;\r\n\r\n            if (typeof type !== \"string\") {\r\n                data = type;\r\n                type = \"fx\";\r\n                setter--;\r\n            }\r\n\r\n            if (arguments.length < setter) {\r\n                return jQuery.queue(this[0], type);\r\n            }\r\n\r\n            return data === undefined ?\r\n                this :\r\n                this.each(function () {\r\n                    var queue = jQuery.queue(this, type, data);\r\n\r\n                    // Ensure a hooks for this queue\r\n                    jQuery._queueHooks(this, type);\r\n\r\n                    if (type === \"fx\" && queue[0] !== \"inprogress\") {\r\n                        jQuery.dequeue(this, type);\r\n                    }\r\n                });\r\n        },\r\n        dequeue: function (type) {\r\n            return this.each(function () {\r\n                jQuery.dequeue(this, type);\r\n            });\r\n        },\r\n        clearQueue: function (type) {\r\n            return this.queue(type || \"fx\", []);\r\n        },\r\n\r\n        // Get a promise resolved when queues of a certain type\r\n        // are emptied (fx is the type by default)\r\n        promise: function (type, obj) {\r\n            var tmp,\r\n                count = 1,\r\n                defer = jQuery.Deferred(),\r\n                elements = this,\r\n                i = this.length,\r\n                resolve = function () {\r\n                    if (!(--count)) {\r\n                        defer.resolveWith(elements, [elements]);\r\n                    }\r\n                };\r\n\r\n            if (typeof type !== \"string\") {\r\n                obj = type;\r\n                type = undefined;\r\n            }\r\n            type = type || \"fx\";\r\n\r\n            while (i--) {\r\n                tmp = dataPriv.get(elements[i], type + \"queueHooks\");\r\n                if (tmp && tmp.empty) {\r\n                    count++;\r\n                    tmp.empty.add(resolve);\r\n                }\r\n            }\r\n            resolve();\r\n            return defer.promise(obj);\r\n        }\r\n    });\r\n    var pnum = (/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/).source;\r\n\r\n    var rcssNum = new RegExp(\"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\");\r\n\r\n\r\n    var cssExpand = [\"Top\", \"Right\", \"Bottom\", \"Left\"];\r\n\r\n    var documentElement = document.documentElement;\r\n\r\n\r\n\r\n    var isAttached = function (elem) {\r\n        return jQuery.contains(elem.ownerDocument, elem);\r\n    },\r\n        composed = { composed: true };\r\n\r\n    // Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only\r\n    // Check attachment across shadow DOM boundaries when possible (gh-3504)\r\n    // Support: iOS 10.0-10.2 only\r\n    // Early iOS 10 versions support `attachShadow` but not `getRootNode`,\r\n    // leading to errors. We need to check for `getRootNode`.\r\n    if (documentElement.getRootNode) {\r\n        isAttached = function (elem) {\r\n            return jQuery.contains(elem.ownerDocument, elem) ||\r\n                elem.getRootNode(composed) === elem.ownerDocument;\r\n        };\r\n    }\r\n    var isHiddenWithinTree = function (elem, el) {\r\n\r\n        // isHiddenWithinTree might be called from jQuery#filter function;\r\n        // in that case, element will be second argument\r\n        elem = el || elem;\r\n\r\n        // Inline style trumps all\r\n        return elem.style.display === \"none\" ||\r\n            elem.style.display === \"\" &&\r\n\r\n            // Otherwise, check computed style\r\n            // Support: Firefox <=43 - 45\r\n            // Disconnected elements can have computed display: none, so first confirm that elem is\r\n            // in the document.\r\n            isAttached(elem) &&\r\n\r\n            jQuery.css(elem, \"display\") === \"none\";\r\n    };\r\n\r\n\r\n\r\n    function adjustCSS(elem, prop, valueParts, tween) {\r\n        var adjusted, scale,\r\n            maxIterations = 20,\r\n            currentValue = tween ?\r\n                function () {\r\n                    return tween.cur();\r\n                } :\r\n                function () {\r\n                    return jQuery.css(elem, prop, \"\");\r\n                },\r\n            initial = currentValue(),\r\n            unit = valueParts && valueParts[3] || (jQuery.cssNumber[prop] ? \"\" : \"px\"),\r\n\r\n            // Starting value computation is required for potential unit mismatches\r\n            initialInUnit = elem.nodeType &&\r\n                (jQuery.cssNumber[prop] || unit !== \"px\" && +initial) &&\r\n                rcssNum.exec(jQuery.css(elem, prop));\r\n\r\n        if (initialInUnit && initialInUnit[3] !== unit) {\r\n\r\n            // Support: Firefox <=54\r\n            // Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\r\n            initial = initial / 2;\r\n\r\n            // Trust units reported by jQuery.css\r\n            unit = unit || initialInUnit[3];\r\n\r\n            // Iteratively approximate from a nonzero starting point\r\n            initialInUnit = +initial || 1;\r\n\r\n            while (maxIterations--) {\r\n\r\n                // Evaluate and update our best guess (doubling guesses that zero out).\r\n                // Finish if the scale equals or crosses 1 (making the old*new product non-positive).\r\n                jQuery.style(elem, prop, initialInUnit + unit);\r\n                if ((1 - scale) * (1 - (scale = currentValue() / initial || 0.5)) <= 0) {\r\n                    maxIterations = 0;\r\n                }\r\n                initialInUnit = initialInUnit / scale;\r\n\r\n            }\r\n\r\n            initialInUnit = initialInUnit * 2;\r\n            jQuery.style(elem, prop, initialInUnit + unit);\r\n\r\n            // Make sure we update the tween properties later on\r\n            valueParts = valueParts || [];\r\n        }\r\n\r\n        if (valueParts) {\r\n            initialInUnit = +initialInUnit || +initial || 0;\r\n\r\n            // Apply relative offset (+=/-=) if specified\r\n            adjusted = valueParts[1] ?\r\n                initialInUnit + (valueParts[1] + 1) * valueParts[2] :\r\n                +valueParts[2];\r\n            if (tween) {\r\n                tween.unit = unit;\r\n                tween.start = initialInUnit;\r\n                tween.end = adjusted;\r\n            }\r\n        }\r\n        return adjusted;\r\n    }\r\n\r\n\r\n    var defaultDisplayMap = {};\r\n\r\n    function getDefaultDisplay(elem) {\r\n        var temp,\r\n            doc = elem.ownerDocument,\r\n            nodeName = elem.nodeName,\r\n            display = defaultDisplayMap[nodeName];\r\n\r\n        if (display) {\r\n            return display;\r\n        }\r\n\r\n        temp = doc.body.appendChild(doc.createElement(nodeName));\r\n        display = jQuery.css(temp, \"display\");\r\n\r\n        temp.parentNode.removeChild(temp);\r\n\r\n        if (display === \"none\") {\r\n            display = \"block\";\r\n        }\r\n        defaultDisplayMap[nodeName] = display;\r\n\r\n        return display;\r\n    }\r\n\r\n    function showHide(elements, show) {\r\n        var display, elem,\r\n            values = [],\r\n            index = 0,\r\n            length = elements.length;\r\n\r\n        // Determine new display value for elements that need to change\r\n        for (; index < length; index++) {\r\n            elem = elements[index];\r\n            if (!elem.style) {\r\n                continue;\r\n            }\r\n\r\n            display = elem.style.display;\r\n            if (show) {\r\n\r\n                // Since we force visibility upon cascade-hidden elements, an immediate (and slow)\r\n                // check is required in this first loop unless we have a nonempty display value (either\r\n                // inline or about-to-be-restored)\r\n                if (display === \"none\") {\r\n                    values[index] = dataPriv.get(elem, \"display\") || null;\r\n                    if (!values[index]) {\r\n                        elem.style.display = \"\";\r\n                    }\r\n                }\r\n                if (elem.style.display === \"\" && isHiddenWithinTree(elem)) {\r\n                    values[index] = getDefaultDisplay(elem);\r\n                }\r\n            } else {\r\n                if (display !== \"none\") {\r\n                    values[index] = \"none\";\r\n\r\n                    // Remember what we're overwriting\r\n                    dataPriv.set(elem, \"display\", display);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Set the display of the elements in a second loop to avoid constant reflow\r\n        for (index = 0; index < length; index++) {\r\n            if (values[index] != null) {\r\n                elements[index].style.display = values[index];\r\n            }\r\n        }\r\n\r\n        return elements;\r\n    }\r\n\r\n    jQuery.fn.extend({\r\n        show: function () {\r\n            return showHide(this, true);\r\n        },\r\n        hide: function () {\r\n            return showHide(this);\r\n        },\r\n        toggle: function (state) {\r\n            if (typeof state === \"boolean\") {\r\n                return state ? this.show() : this.hide();\r\n            }\r\n\r\n            return this.each(function () {\r\n                if (isHiddenWithinTree(this)) {\r\n                    jQuery(this).show();\r\n                } else {\r\n                    jQuery(this).hide();\r\n                }\r\n            });\r\n        }\r\n    });\r\n    var rcheckableType = (/^(?:checkbox|radio)$/i);\r\n\r\n    var rtagName = (/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i);\r\n\r\n    var rscriptType = (/^$|^module$|\\/(?:java|ecma)script/i);\r\n\r\n\r\n\r\n    (function () {\r\n        var fragment = document.createDocumentFragment(),\r\n            div = fragment.appendChild(document.createElement(\"div\")),\r\n            input = document.createElement(\"input\");\r\n\r\n        // Support: Android 4.0 - 4.3 only\r\n        // Check state lost if the name is set (#11217)\r\n        // Support: Windows Web Apps (WWA)\r\n        // `name` and `type` must use .setAttribute for WWA (#14901)\r\n        input.setAttribute(\"type\", \"radio\");\r\n        input.setAttribute(\"checked\", \"checked\");\r\n        input.setAttribute(\"name\", \"t\");\r\n\r\n        div.appendChild(input);\r\n\r\n        // Support: Android <=4.1 only\r\n        // Older WebKit doesn't clone checked state correctly in fragments\r\n        support.checkClone = div.cloneNode(true).cloneNode(true).lastChild.checked;\r\n\r\n        // Support: IE <=11 only\r\n        // Make sure textarea (and checkbox) defaultValue is properly cloned\r\n        div.innerHTML = \"<textarea>x</textarea>\";\r\n        support.noCloneChecked = !!div.cloneNode(true).lastChild.defaultValue;\r\n\r\n        // Support: IE <=9 only\r\n        // IE <=9 replaces <option> tags with their contents when inserted outside of\r\n        // the select element.\r\n        div.innerHTML = \"<option></option>\";\r\n        support.option = !!div.lastChild;\r\n    })();\r\n\r\n\r\n    // We have to close these tags to support XHTML (#13200)\r\n    var wrapMap = {\r\n\r\n        // XHTML parsers do not magically insert elements in the\r\n        // same way that tag soup parsers do. So we cannot shorten\r\n        // this by omitting <tbody> or other required elements.\r\n        thead: [1, \"<table>\", \"</table>\"],\r\n        col: [2, \"<table><colgroup>\", \"</colgroup></table>\"],\r\n        tr: [2, \"<table><tbody>\", \"</tbody></table>\"],\r\n        td: [3, \"<table><tbody><tr>\", \"</tr></tbody></table>\"],\r\n\r\n        _default: [0, \"\", \"\"]\r\n    };\r\n\r\n    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\r\n    wrapMap.th = wrapMap.td;\r\n\r\n    // Support: IE <=9 only\r\n    if (!support.option) {\r\n        wrapMap.optgroup = wrapMap.option = [1, \"<select multiple='multiple'>\", \"</select>\"];\r\n    }\r\n\r\n\r\n    function getAll(context, tag) {\r\n\r\n        // Support: IE <=9 - 11 only\r\n        // Use typeof to avoid zero-argument method invocation on host objects (#15151)\r\n        var ret;\r\n\r\n        if (typeof context.getElementsByTagName !== \"undefined\") {\r\n            ret = context.getElementsByTagName(tag || \"*\");\r\n\r\n        } else if (typeof context.querySelectorAll !== \"undefined\") {\r\n            ret = context.querySelectorAll(tag || \"*\");\r\n\r\n        } else {\r\n            ret = [];\r\n        }\r\n\r\n        if (tag === undefined || tag && nodeName(context, tag)) {\r\n            return jQuery.merge([context], ret);\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n\r\n    // Mark scripts as having already been evaluated\r\n    function setGlobalEval(elems, refElements) {\r\n        var i = 0,\r\n            l = elems.length;\r\n\r\n        for (; i < l; i++) {\r\n            dataPriv.set(\r\n                elems[i],\r\n                \"globalEval\",\r\n                !refElements || dataPriv.get(refElements[i], \"globalEval\")\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n    var rhtml = /<|&#?\\w+;/;\r\n\r\n    function buildFragment(elems, context, scripts, selection, ignored) {\r\n        var elem, tmp, tag, wrap, attached, j,\r\n            fragment = context.createDocumentFragment(),\r\n            nodes = [],\r\n            i = 0,\r\n            l = elems.length;\r\n\r\n        for (; i < l; i++) {\r\n            elem = elems[i];\r\n\r\n            if (elem || elem === 0) {\r\n\r\n                // Add nodes directly\r\n                if (toType(elem) === \"object\") {\r\n\r\n                    // Support: Android <=4.0 only, PhantomJS 1 only\r\n                    // push.apply(_, arraylike) throws on ancient WebKit\r\n                    jQuery.merge(nodes, elem.nodeType ? [elem] : elem);\r\n\r\n                    // Convert non-html into a text node\r\n                } else if (!rhtml.test(elem)) {\r\n                    nodes.push(context.createTextNode(elem));\r\n\r\n                    // Convert html into DOM nodes\r\n                } else {\r\n                    tmp = tmp || fragment.appendChild(context.createElement(\"div\"));\r\n\r\n                    // Deserialize a standard representation\r\n                    tag = (rtagName.exec(elem) || [\"\", \"\"])[1].toLowerCase();\r\n                    wrap = wrapMap[tag] || wrapMap._default;\r\n                    tmp.innerHTML = wrap[1] + jQuery.htmlPrefilter(elem) + wrap[2];\r\n\r\n                    // Descend through wrappers to the right content\r\n                    j = wrap[0];\r\n                    while (j--) {\r\n                        tmp = tmp.lastChild;\r\n                    }\r\n\r\n                    // Support: Android <=4.0 only, PhantomJS 1 only\r\n                    // push.apply(_, arraylike) throws on ancient WebKit\r\n                    jQuery.merge(nodes, tmp.childNodes);\r\n\r\n                    // Remember the top-level container\r\n                    tmp = fragment.firstChild;\r\n\r\n                    // Ensure the created nodes are orphaned (#12392)\r\n                    tmp.textContent = \"\";\r\n                }\r\n            }\r\n        }\r\n\r\n        // Remove wrapper from fragment\r\n        fragment.textContent = \"\";\r\n\r\n        i = 0;\r\n        while ((elem = nodes[i++])) {\r\n\r\n            // Skip elements already in the context collection (trac-4087)\r\n            if (selection && jQuery.inArray(elem, selection) > -1) {\r\n                if (ignored) {\r\n                    ignored.push(elem);\r\n                }\r\n                continue;\r\n            }\r\n\r\n            attached = isAttached(elem);\r\n\r\n            // Append to fragment\r\n            tmp = getAll(fragment.appendChild(elem), \"script\");\r\n\r\n            // Preserve script evaluation history\r\n            if (attached) {\r\n                setGlobalEval(tmp);\r\n            }\r\n\r\n            // Capture executables\r\n            if (scripts) {\r\n                j = 0;\r\n                while ((elem = tmp[j++])) {\r\n                    if (rscriptType.test(elem.type || \"\")) {\r\n                        scripts.push(elem);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return fragment;\r\n    }\r\n\r\n\r\n    var\r\n        rkeyEvent = /^key/,\r\n        rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,\r\n        rtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\r\n\r\n    function returnTrue() {\r\n        return true;\r\n    }\r\n\r\n    function returnFalse() {\r\n        return false;\r\n    }\r\n\r\n    // Support: IE <=9 - 11+\r\n    // focus() and blur() are asynchronous, except when they are no-op.\r\n    // So expect focus to be synchronous when the element is already active,\r\n    // and blur to be synchronous when the element is not already active.\r\n    // (focus and blur are always synchronous in other supported browsers,\r\n    // this just defines when we can count on it).\r\n    function expectSync(elem, type) {\r\n        return (elem === safeActiveElement()) === (type === \"focus\");\r\n    }\r\n\r\n    // Support: IE <=9 only\r\n    // Accessing document.activeElement can throw unexpectedly\r\n    // https://bugs.jquery.com/ticket/13393\r\n    function safeActiveElement() {\r\n        try {\r\n            return document.activeElement;\r\n        } catch (err) { }\r\n    }\r\n\r\n    function on(elem, types, selector, data, fn, one) {\r\n        var origFn, type;\r\n\r\n        // Types can be a map of types/handlers\r\n        if (typeof types === \"object\") {\r\n\r\n            // ( types-Object, selector, data )\r\n            if (typeof selector !== \"string\") {\r\n\r\n                // ( types-Object, data )\r\n                data = data || selector;\r\n                selector = undefined;\r\n            }\r\n            for (type in types) {\r\n                on(elem, type, selector, data, types[type], one);\r\n            }\r\n            return elem;\r\n        }\r\n\r\n        if (data == null && fn == null) {\r\n\r\n            // ( types, fn )\r\n            fn = selector;\r\n            data = selector = undefined;\r\n        } else if (fn == null) {\r\n            if (typeof selector === \"string\") {\r\n\r\n                // ( types, selector, fn )\r\n                fn = data;\r\n                data = undefined;\r\n            } else {\r\n\r\n                // ( types, data, fn )\r\n                fn = data;\r\n                data = selector;\r\n                selector = undefined;\r\n            }\r\n        }\r\n        if (fn === false) {\r\n            fn = returnFalse;\r\n        } else if (!fn) {\r\n            return elem;\r\n        }\r\n\r\n        if (one === 1) {\r\n            origFn = fn;\r\n            fn = function (event) {\r\n\r\n                // Can use an empty set, since event contains the info\r\n                jQuery().off(event);\r\n                return origFn.apply(this, arguments);\r\n            };\r\n\r\n            // Use same guid so caller can remove using origFn\r\n            fn.guid = origFn.guid || (origFn.guid = jQuery.guid++);\r\n        }\r\n        return elem.each(function () {\r\n            jQuery.event.add(this, types, fn, data, selector);\r\n        });\r\n    }\r\n\r\n    /*\r\n     * Helper functions for managing events -- not part of the public interface.\r\n     * Props to Dean Edwards' addEvent library for many of the ideas.\r\n     */\r\n    jQuery.event = {\r\n\r\n        global: {},\r\n\r\n        add: function (elem, types, handler, data, selector) {\r\n\r\n            var handleObjIn, eventHandle, tmp,\r\n                events, t, handleObj,\r\n                special, handlers, type, namespaces, origType,\r\n                elemData = dataPriv.get(elem);\r\n\r\n            // Only attach events to objects that accept data\r\n            if (!acceptData(elem)) {\r\n                return;\r\n            }\r\n\r\n            // Caller can pass in an object of custom data in lieu of the handler\r\n            if (handler.handler) {\r\n                handleObjIn = handler;\r\n                handler = handleObjIn.handler;\r\n                selector = handleObjIn.selector;\r\n            }\r\n\r\n            // Ensure that invalid selectors throw exceptions at attach time\r\n            // Evaluate against documentElement in case elem is a non-element node (e.g., document)\r\n            if (selector) {\r\n                jQuery.find.matchesSelector(documentElement, selector);\r\n            }\r\n\r\n            // Make sure that the handler has a unique ID, used to find/remove it later\r\n            if (!handler.guid) {\r\n                handler.guid = jQuery.guid++;\r\n            }\r\n\r\n            // Init the element's event structure and main handler, if this is the first\r\n            if (!(events = elemData.events)) {\r\n                events = elemData.events = Object.create(null);\r\n            }\r\n            if (!(eventHandle = elemData.handle)) {\r\n                eventHandle = elemData.handle = function (e) {\r\n\r\n                    // Discard the second event of a jQuery.event.trigger() and\r\n                    // when an event is called after a page has unloaded\r\n                    return typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\r\n                        jQuery.event.dispatch.apply(elem, arguments) : undefined;\r\n                };\r\n            }\r\n\r\n            // Handle multiple events separated by a space\r\n            types = (types || \"\").match(rnothtmlwhite) || [\"\"];\r\n            t = types.length;\r\n            while (t--) {\r\n                tmp = rtypenamespace.exec(types[t]) || [];\r\n                type = origType = tmp[1];\r\n                namespaces = (tmp[2] || \"\").split(\".\").sort();\r\n\r\n                // There *must* be a type, no attaching namespace-only handlers\r\n                if (!type) {\r\n                    continue;\r\n                }\r\n\r\n                // If event changes its type, use the special event handlers for the changed type\r\n                special = jQuery.event.special[type] || {};\r\n\r\n                // If selector defined, determine special event api type, otherwise given type\r\n                type = (selector ? special.delegateType : special.bindType) || type;\r\n\r\n                // Update special based on newly reset type\r\n                special = jQuery.event.special[type] || {};\r\n\r\n                // handleObj is passed to all event handlers\r\n                handleObj = jQuery.extend({\r\n                    type: type,\r\n                    origType: origType,\r\n                    data: data,\r\n                    handler: handler,\r\n                    guid: handler.guid,\r\n                    selector: selector,\r\n                    needsContext: selector && jQuery.expr.match.needsContext.test(selector),\r\n                    namespace: namespaces.join(\".\")\r\n                }, handleObjIn);\r\n\r\n                // Init the event handler queue if we're the first\r\n                if (!(handlers = events[type])) {\r\n                    handlers = events[type] = [];\r\n                    handlers.delegateCount = 0;\r\n\r\n                    // Only use addEventListener if the special events handler returns false\r\n                    if (!special.setup ||\r\n                        special.setup.call(elem, data, namespaces, eventHandle) === false) {\r\n\r\n                        if (elem.addEventListener) {\r\n                            elem.addEventListener(type, eventHandle);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (special.add) {\r\n                    special.add.call(elem, handleObj);\r\n\r\n                    if (!handleObj.handler.guid) {\r\n                        handleObj.handler.guid = handler.guid;\r\n                    }\r\n                }\r\n\r\n                // Add to the element's handler list, delegates in front\r\n                if (selector) {\r\n                    handlers.splice(handlers.delegateCount++, 0, handleObj);\r\n                } else {\r\n                    handlers.push(handleObj);\r\n                }\r\n\r\n                // Keep track of which events have ever been used, for event optimization\r\n                jQuery.event.global[type] = true;\r\n            }\r\n\r\n        },\r\n\r\n        // Detach an event or set of events from an element\r\n        remove: function (elem, types, handler, selector, mappedTypes) {\r\n\r\n            var j, origCount, tmp,\r\n                events, t, handleObj,\r\n                special, handlers, type, namespaces, origType,\r\n                elemData = dataPriv.hasData(elem) && dataPriv.get(elem);\r\n\r\n            if (!elemData || !(events = elemData.events)) {\r\n                return;\r\n            }\r\n\r\n            // Once for each type.namespace in types; type may be omitted\r\n            types = (types || \"\").match(rnothtmlwhite) || [\"\"];\r\n            t = types.length;\r\n            while (t--) {\r\n                tmp = rtypenamespace.exec(types[t]) || [];\r\n                type = origType = tmp[1];\r\n                namespaces = (tmp[2] || \"\").split(\".\").sort();\r\n\r\n                // Unbind all events (on this namespace, if provided) for the element\r\n                if (!type) {\r\n                    for (type in events) {\r\n                        jQuery.event.remove(elem, type + types[t], handler, selector, true);\r\n                    }\r\n                    continue;\r\n                }\r\n\r\n                special = jQuery.event.special[type] || {};\r\n                type = (selector ? special.delegateType : special.bindType) || type;\r\n                handlers = events[type] || [];\r\n                tmp = tmp[2] &&\r\n                    new RegExp(\"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\");\r\n\r\n                // Remove matching events\r\n                origCount = j = handlers.length;\r\n                while (j--) {\r\n                    handleObj = handlers[j];\r\n\r\n                    if ((mappedTypes || origType === handleObj.origType) &&\r\n                        (!handler || handler.guid === handleObj.guid) &&\r\n                        (!tmp || tmp.test(handleObj.namespace)) &&\r\n                        (!selector || selector === handleObj.selector ||\r\n                            selector === \"**\" && handleObj.selector)) {\r\n                        handlers.splice(j, 1);\r\n\r\n                        if (handleObj.selector) {\r\n                            handlers.delegateCount--;\r\n                        }\r\n                        if (special.remove) {\r\n                            special.remove.call(elem, handleObj);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Remove generic event handler if we removed something and no more handlers exist\r\n                // (avoids potential for endless recursion during removal of special event handlers)\r\n                if (origCount && !handlers.length) {\r\n                    if (!special.teardown ||\r\n                        special.teardown.call(elem, namespaces, elemData.handle) === false) {\r\n\r\n                        jQuery.removeEvent(elem, type, elemData.handle);\r\n                    }\r\n\r\n                    delete events[type];\r\n                }\r\n            }\r\n\r\n            // Remove data and the expando if it's no longer used\r\n            if (jQuery.isEmptyObject(events)) {\r\n                dataPriv.remove(elem, \"handle events\");\r\n            }\r\n        },\r\n\r\n        dispatch: function (nativeEvent) {\r\n\r\n            var i, j, ret, matched, handleObj, handlerQueue,\r\n                args = new Array(arguments.length),\r\n\r\n                // Make a writable jQuery.Event from the native event object\r\n                event = jQuery.event.fix(nativeEvent),\r\n\r\n                handlers = (\r\n                    dataPriv.get(this, \"events\") || Object.create(null)\r\n                )[event.type] || [],\r\n                special = jQuery.event.special[event.type] || {};\r\n\r\n            // Use the fix-ed jQuery.Event rather than the (read-only) native event\r\n            args[0] = event;\r\n\r\n            for (i = 1; i < arguments.length; i++) {\r\n                args[i] = arguments[i];\r\n            }\r\n\r\n            event.delegateTarget = this;\r\n\r\n            // Call the preDispatch hook for the mapped type, and let it bail if desired\r\n            if (special.preDispatch && special.preDispatch.call(this, event) === false) {\r\n                return;\r\n            }\r\n\r\n            // Determine handlers\r\n            handlerQueue = jQuery.event.handlers.call(this, event, handlers);\r\n\r\n            // Run delegates first; they may want to stop propagation beneath us\r\n            i = 0;\r\n            while ((matched = handlerQueue[i++]) && !event.isPropagationStopped()) {\r\n                event.currentTarget = matched.elem;\r\n\r\n                j = 0;\r\n                while ((handleObj = matched.handlers[j++]) &&\r\n                    !event.isImmediatePropagationStopped()) {\r\n\r\n                    // If the event is namespaced, then each handler is only invoked if it is\r\n                    // specially universal or its namespaces are a superset of the event's.\r\n                    if (!event.rnamespace || handleObj.namespace === false ||\r\n                        event.rnamespace.test(handleObj.namespace)) {\r\n\r\n                        event.handleObj = handleObj;\r\n                        event.data = handleObj.data;\r\n\r\n                        ret = ((jQuery.event.special[handleObj.origType] || {}).handle ||\r\n                            handleObj.handler).apply(matched.elem, args);\r\n\r\n                        if (ret !== undefined) {\r\n                            if ((event.result = ret) === false) {\r\n                                event.preventDefault();\r\n                                event.stopPropagation();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Call the postDispatch hook for the mapped type\r\n            if (special.postDispatch) {\r\n                special.postDispatch.call(this, event);\r\n            }\r\n\r\n            return event.result;\r\n        },\r\n\r\n        handlers: function (event, handlers) {\r\n            var i, handleObj, sel, matchedHandlers, matchedSelectors,\r\n                handlerQueue = [],\r\n                delegateCount = handlers.delegateCount,\r\n                cur = event.target;\r\n\r\n            // Find delegate handlers\r\n            if (delegateCount &&\r\n\r\n                // Support: IE <=9\r\n                // Black-hole SVG <use> instance trees (trac-13180)\r\n                cur.nodeType &&\r\n\r\n                // Support: Firefox <=42\r\n                // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\r\n                // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\r\n                // Support: IE 11 only\r\n                // ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\r\n                !(event.type === \"click\" && event.button >= 1)) {\r\n\r\n                for (; cur !== this; cur = cur.parentNode || this) {\r\n\r\n                    // Don't check non-elements (#13208)\r\n                    // Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\r\n                    if (cur.nodeType === 1 && !(event.type === \"click\" && cur.disabled === true)) {\r\n                        matchedHandlers = [];\r\n                        matchedSelectors = {};\r\n                        for (i = 0; i < delegateCount; i++) {\r\n                            handleObj = handlers[i];\r\n\r\n                            // Don't conflict with Object.prototype properties (#13203)\r\n                            sel = handleObj.selector + \" \";\r\n\r\n                            if (matchedSelectors[sel] === undefined) {\r\n                                matchedSelectors[sel] = handleObj.needsContext ?\r\n                                    jQuery(sel, this).index(cur) > -1 :\r\n                                    jQuery.find(sel, this, null, [cur]).length;\r\n                            }\r\n                            if (matchedSelectors[sel]) {\r\n                                matchedHandlers.push(handleObj);\r\n                            }\r\n                        }\r\n                        if (matchedHandlers.length) {\r\n                            handlerQueue.push({ elem: cur, handlers: matchedHandlers });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Add the remaining (directly-bound) handlers\r\n            cur = this;\r\n            if (delegateCount < handlers.length) {\r\n                handlerQueue.push({ elem: cur, handlers: handlers.slice(delegateCount) });\r\n            }\r\n\r\n            return handlerQueue;\r\n        },\r\n\r\n        addProp: function (name, hook) {\r\n            Object.defineProperty(jQuery.Event.prototype, name, {\r\n                enumerable: true,\r\n                configurable: true,\r\n\r\n                get: isFunction(hook) ?\r\n                    function () {\r\n                        if (this.originalEvent) {\r\n                            return hook(this.originalEvent);\r\n                        }\r\n                    } :\r\n                    function () {\r\n                        if (this.originalEvent) {\r\n                            return this.originalEvent[name];\r\n                        }\r\n                    },\r\n\r\n                set: function (value) {\r\n                    Object.defineProperty(this, name, {\r\n                        enumerable: true,\r\n                        configurable: true,\r\n                        writable: true,\r\n                        value: value\r\n                    });\r\n                }\r\n            });\r\n        },\r\n\r\n        fix: function (originalEvent) {\r\n            return originalEvent[jQuery.expando] ?\r\n                originalEvent :\r\n                new jQuery.Event(originalEvent);\r\n        },\r\n\r\n        special: {\r\n            load: {\r\n\r\n                // Prevent triggered image.load events from bubbling to window.load\r\n                noBubble: true\r\n            },\r\n            click: {\r\n\r\n                // Utilize native event to ensure correct state for checkable inputs\r\n                setup: function (data) {\r\n\r\n                    // For mutual compressibility with _default, replace `this` access with a local var.\r\n                    // `|| data` is dead code meant only to preserve the variable through minification.\r\n                    var el = this || data;\r\n\r\n                    // Claim the first handler\r\n                    if (rcheckableType.test(el.type) &&\r\n                        el.click && nodeName(el, \"input\")) {\r\n\r\n                        // dataPriv.set( el, \"click\", ... )\r\n                        leverageNative(el, \"click\", returnTrue);\r\n                    }\r\n\r\n                    // Return false to allow normal processing in the caller\r\n                    return false;\r\n                },\r\n                trigger: function (data) {\r\n\r\n                    // For mutual compressibility with _default, replace `this` access with a local var.\r\n                    // `|| data` is dead code meant only to preserve the variable through minification.\r\n                    var el = this || data;\r\n\r\n                    // Force setup before triggering a click\r\n                    if (rcheckableType.test(el.type) &&\r\n                        el.click && nodeName(el, \"input\")) {\r\n\r\n                        leverageNative(el, \"click\");\r\n                    }\r\n\r\n                    // Return non-false to allow normal event-path propagation\r\n                    return true;\r\n                },\r\n\r\n                // For cross-browser consistency, suppress native .click() on links\r\n                // Also prevent it if we're currently inside a leveraged native-event stack\r\n                _default: function (event) {\r\n                    var target = event.target;\r\n                    return rcheckableType.test(target.type) &&\r\n                        target.click && nodeName(target, \"input\") &&\r\n                        dataPriv.get(target, \"click\") ||\r\n                        nodeName(target, \"a\");\r\n                }\r\n            },\r\n\r\n            beforeunload: {\r\n                postDispatch: function (event) {\r\n\r\n                    // Support: Firefox 20+\r\n                    // Firefox doesn't alert if the returnValue field is not set.\r\n                    if (event.result !== undefined && event.originalEvent) {\r\n                        event.originalEvent.returnValue = event.result;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // Ensure the presence of an event listener that handles manually-triggered\r\n    // synthetic events by interrupting progress until reinvoked in response to\r\n    // *native* events that it fires directly, ensuring that state changes have\r\n    // already occurred before other listeners are invoked.\r\n    function leverageNative(el, type, expectSync) {\r\n\r\n        // Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add\r\n        if (!expectSync) {\r\n            if (dataPriv.get(el, type) === undefined) {\r\n                jQuery.event.add(el, type, returnTrue);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Register the controller as a special universal handler for all event namespaces\r\n        dataPriv.set(el, type, false);\r\n        jQuery.event.add(el, type, {\r\n            namespace: false,\r\n            handler: function (event) {\r\n                var notAsync, result,\r\n                    saved = dataPriv.get(this, type);\r\n\r\n                if ((event.isTrigger & 1) && this[type]) {\r\n\r\n                    // Interrupt processing of the outer synthetic .trigger()ed event\r\n                    // Saved data should be false in such cases, but might be a leftover capture object\r\n                    // from an async native handler (gh-4350)\r\n                    if (!saved.length) {\r\n\r\n                        // Store arguments for use when handling the inner native event\r\n                        // There will always be at least one argument (an event object), so this array\r\n                        // will not be confused with a leftover capture object.\r\n                        saved = slice.call(arguments);\r\n                        dataPriv.set(this, type, saved);\r\n\r\n                        // Trigger the native event and capture its result\r\n                        // Support: IE <=9 - 11+\r\n                        // focus() and blur() are asynchronous\r\n                        notAsync = expectSync(this, type);\r\n                        this[type]();\r\n                        result = dataPriv.get(this, type);\r\n                        if (saved !== result || notAsync) {\r\n                            dataPriv.set(this, type, false);\r\n                        } else {\r\n                            result = {};\r\n                        }\r\n                        if (saved !== result) {\r\n\r\n                            // Cancel the outer synthetic event\r\n                            event.stopImmediatePropagation();\r\n                            event.preventDefault();\r\n                            return result.value;\r\n                        }\r\n\r\n                        // If this is an inner synthetic event for an event with a bubbling surrogate\r\n                        // (focus or blur), assume that the surrogate already propagated from triggering the\r\n                        // native event and prevent that from happening again here.\r\n                        // This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the\r\n                        // bubbling surrogate propagates *after* the non-bubbling base), but that seems\r\n                        // less bad than duplication.\r\n                    } else if ((jQuery.event.special[type] || {}).delegateType) {\r\n                        event.stopPropagation();\r\n                    }\r\n\r\n                    // If this is a native event triggered above, everything is now in order\r\n                    // Fire an inner synthetic event with the original arguments\r\n                } else if (saved.length) {\r\n\r\n                    // ...and capture the result\r\n                    dataPriv.set(this, type, {\r\n                        value: jQuery.event.trigger(\r\n\r\n                            // Support: IE <=9 - 11+\r\n                            // Extend with the prototype to reset the above stopImmediatePropagation()\r\n                            jQuery.extend(saved[0], jQuery.Event.prototype),\r\n                            saved.slice(1),\r\n                            this\r\n                        )\r\n                    });\r\n\r\n                    // Abort handling of the native event\r\n                    event.stopImmediatePropagation();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    jQuery.removeEvent = function (elem, type, handle) {\r\n\r\n        // This \"if\" is needed for plain objects\r\n        if (elem.removeEventListener) {\r\n            elem.removeEventListener(type, handle);\r\n        }\r\n    };\r\n\r\n    jQuery.Event = function (src, props) {\r\n\r\n        // Allow instantiation without the 'new' keyword\r\n        if (!(this instanceof jQuery.Event)) {\r\n            return new jQuery.Event(src, props);\r\n        }\r\n\r\n        // Event object\r\n        if (src && src.type) {\r\n            this.originalEvent = src;\r\n            this.type = src.type;\r\n\r\n            // Events bubbling up the document may have been marked as prevented\r\n            // by a handler lower down the tree; reflect the correct value.\r\n            this.isDefaultPrevented = src.defaultPrevented ||\r\n                src.defaultPrevented === undefined &&\r\n\r\n                // Support: Android <=2.3 only\r\n                src.returnValue === false ?\r\n                returnTrue :\r\n                returnFalse;\r\n\r\n            // Create target properties\r\n            // Support: Safari <=6 - 7 only\r\n            // Target should not be a text node (#504, #13143)\r\n            this.target = (src.target && src.target.nodeType === 3) ?\r\n                src.target.parentNode :\r\n                src.target;\r\n\r\n            this.currentTarget = src.currentTarget;\r\n            this.relatedTarget = src.relatedTarget;\r\n\r\n            // Event type\r\n        } else {\r\n            this.type = src;\r\n        }\r\n\r\n        // Put explicitly provided properties onto the event object\r\n        if (props) {\r\n            jQuery.extend(this, props);\r\n        }\r\n\r\n        // Create a timestamp if incoming event doesn't have one\r\n        this.timeStamp = src && src.timeStamp || Date.now();\r\n\r\n        // Mark it as fixed\r\n        this[jQuery.expando] = true;\r\n    };\r\n\r\n    // jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\r\n    // https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\r\n    jQuery.Event.prototype = {\r\n        constructor: jQuery.Event,\r\n        isDefaultPrevented: returnFalse,\r\n        isPropagationStopped: returnFalse,\r\n        isImmediatePropagationStopped: returnFalse,\r\n        isSimulated: false,\r\n\r\n        preventDefault: function () {\r\n            var e = this.originalEvent;\r\n\r\n            this.isDefaultPrevented = returnTrue;\r\n\r\n            if (e && !this.isSimulated) {\r\n                e.preventDefault();\r\n            }\r\n        },\r\n        stopPropagation: function () {\r\n            var e = this.originalEvent;\r\n\r\n            this.isPropagationStopped = returnTrue;\r\n\r\n            if (e && !this.isSimulated) {\r\n                e.stopPropagation();\r\n            }\r\n        },\r\n        stopImmediatePropagation: function () {\r\n            var e = this.originalEvent;\r\n\r\n            this.isImmediatePropagationStopped = returnTrue;\r\n\r\n            if (e && !this.isSimulated) {\r\n                e.stopImmediatePropagation();\r\n            }\r\n\r\n            this.stopPropagation();\r\n        }\r\n    };\r\n\r\n    // Includes all common event props including KeyEvent and MouseEvent specific props\r\n    jQuery.each({\r\n        altKey: true,\r\n        bubbles: true,\r\n        cancelable: true,\r\n        changedTouches: true,\r\n        ctrlKey: true,\r\n        detail: true,\r\n        eventPhase: true,\r\n        metaKey: true,\r\n        pageX: true,\r\n        pageY: true,\r\n        shiftKey: true,\r\n        view: true,\r\n        \"char\": true,\r\n        code: true,\r\n        charCode: true,\r\n        key: true,\r\n        keyCode: true,\r\n        button: true,\r\n        buttons: true,\r\n        clientX: true,\r\n        clientY: true,\r\n        offsetX: true,\r\n        offsetY: true,\r\n        pointerId: true,\r\n        pointerType: true,\r\n        screenX: true,\r\n        screenY: true,\r\n        targetTouches: true,\r\n        toElement: true,\r\n        touches: true,\r\n\r\n        which: function (event) {\r\n            var button = event.button;\r\n\r\n            // Add which for key events\r\n            if (event.which == null && rkeyEvent.test(event.type)) {\r\n                return event.charCode != null ? event.charCode : event.keyCode;\r\n            }\r\n\r\n            // Add which for click: 1 === left; 2 === middle; 3 === right\r\n            if (!event.which && button !== undefined && rmouseEvent.test(event.type)) {\r\n                if (button & 1) {\r\n                    return 1;\r\n                }\r\n\r\n                if (button & 2) {\r\n                    return 3;\r\n                }\r\n\r\n                if (button & 4) {\r\n                    return 2;\r\n                }\r\n\r\n                return 0;\r\n            }\r\n\r\n            return event.which;\r\n        }\r\n    }, jQuery.event.addProp);\r\n\r\n    jQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function (type, delegateType) {\r\n        jQuery.event.special[type] = {\r\n\r\n            // Utilize native event if possible so blur/focus sequence is correct\r\n            setup: function () {\r\n\r\n                // Claim the first handler\r\n                // dataPriv.set( this, \"focus\", ... )\r\n                // dataPriv.set( this, \"blur\", ... )\r\n                leverageNative(this, type, expectSync);\r\n\r\n                // Return false to allow normal processing in the caller\r\n                return false;\r\n            },\r\n            trigger: function () {\r\n\r\n                // Force setup before trigger\r\n                leverageNative(this, type);\r\n\r\n                // Return non-false to allow normal event-path propagation\r\n                return true;\r\n            },\r\n\r\n            delegateType: delegateType\r\n        };\r\n    });\r\n\r\n    // Create mouseenter/leave events using mouseover/out and event-time checks\r\n    // so that event delegation works in jQuery.\r\n    // Do the same for pointerenter/pointerleave and pointerover/pointerout\r\n    //\r\n    // Support: Safari 7 only\r\n    // Safari sends mouseenter too often; see:\r\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=470258\r\n    // for the description of the bug (it existed in older Chrome versions as well).\r\n    jQuery.each({\r\n        mouseenter: \"mouseover\",\r\n        mouseleave: \"mouseout\",\r\n        pointerenter: \"pointerover\",\r\n        pointerleave: \"pointerout\"\r\n    }, function (orig, fix) {\r\n        jQuery.event.special[orig] = {\r\n            delegateType: fix,\r\n            bindType: fix,\r\n\r\n            handle: function (event) {\r\n                var ret,\r\n                    target = this,\r\n                    related = event.relatedTarget,\r\n                    handleObj = event.handleObj;\r\n\r\n                // For mouseenter/leave call the handler if related is outside the target.\r\n                // NB: No relatedTarget if the mouse left/entered the browser window\r\n                if (!related || (related !== target && !jQuery.contains(target, related))) {\r\n                    event.type = handleObj.origType;\r\n                    ret = handleObj.handler.apply(this, arguments);\r\n                    event.type = fix;\r\n                }\r\n                return ret;\r\n            }\r\n        };\r\n    });\r\n\r\n    jQuery.fn.extend({\r\n\r\n        on: function (types, selector, data, fn) {\r\n            return on(this, types, selector, data, fn);\r\n        },\r\n        one: function (types, selector, data, fn) {\r\n            return on(this, types, selector, data, fn, 1);\r\n        },\r\n        off: function (types, selector, fn) {\r\n            var handleObj, type;\r\n            if (types && types.preventDefault && types.handleObj) {\r\n\r\n                // ( event )  dispatched jQuery.Event\r\n                handleObj = types.handleObj;\r\n                jQuery(types.delegateTarget).off(\r\n                    handleObj.namespace ?\r\n                        handleObj.origType + \".\" + handleObj.namespace :\r\n                        handleObj.origType,\r\n                    handleObj.selector,\r\n                    handleObj.handler\r\n                );\r\n                return this;\r\n            }\r\n            if (typeof types === \"object\") {\r\n\r\n                // ( types-object [, selector] )\r\n                for (type in types) {\r\n                    this.off(type, selector, types[type]);\r\n                }\r\n                return this;\r\n            }\r\n            if (selector === false || typeof selector === \"function\") {\r\n\r\n                // ( types [, fn] )\r\n                fn = selector;\r\n                selector = undefined;\r\n            }\r\n            if (fn === false) {\r\n                fn = returnFalse;\r\n            }\r\n            return this.each(function () {\r\n                jQuery.event.remove(this, types, fn, selector);\r\n            });\r\n        }\r\n    });\r\n\r\n\r\n    var\r\n\r\n        // Support: IE <=10 - 11, Edge 12 - 13 only\r\n        // In IE/Edge using regex groups here causes severe slowdowns.\r\n        // See https://connect.microsoft.com/IE/feedback/details/1736512/\r\n        rnoInnerhtml = /<script|<style|<link/i,\r\n\r\n        // checked=\"checked\" or checked\r\n        rchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\r\n        rcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;\r\n\r\n    // Prefer a tbody over its parent table for containing new rows\r\n    function manipulationTarget(elem, content) {\r\n        if (nodeName(elem, \"table\") &&\r\n            nodeName(content.nodeType !== 11 ? content : content.firstChild, \"tr\")) {\r\n\r\n            return jQuery(elem).children(\"tbody\")[0] || elem;\r\n        }\r\n\r\n        return elem;\r\n    }\r\n\r\n    // Replace/restore the type attribute of script elements for safe DOM manipulation\r\n    function disableScript(elem) {\r\n        elem.type = (elem.getAttribute(\"type\") !== null) + \"/\" + elem.type;\r\n        return elem;\r\n    }\r\n    function restoreScript(elem) {\r\n        if ((elem.type || \"\").slice(0, 5) === \"true/\") {\r\n            elem.type = elem.type.slice(5);\r\n        } else {\r\n            elem.removeAttribute(\"type\");\r\n        }\r\n\r\n        return elem;\r\n    }\r\n\r\n    function cloneCopyEvent(src, dest) {\r\n        var i, l, type, pdataOld, udataOld, udataCur, events;\r\n\r\n        if (dest.nodeType !== 1) {\r\n            return;\r\n        }\r\n\r\n        // 1. Copy private data: events, handlers, etc.\r\n        if (dataPriv.hasData(src)) {\r\n            pdataOld = dataPriv.get(src);\r\n            events = pdataOld.events;\r\n\r\n            if (events) {\r\n                dataPriv.remove(dest, \"handle events\");\r\n\r\n                for (type in events) {\r\n                    for (i = 0, l = events[type].length; i < l; i++) {\r\n                        jQuery.event.add(dest, type, events[type][i]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // 2. Copy user data\r\n        if (dataUser.hasData(src)) {\r\n            udataOld = dataUser.access(src);\r\n            udataCur = jQuery.extend({}, udataOld);\r\n\r\n            dataUser.set(dest, udataCur);\r\n        }\r\n    }\r\n\r\n    // Fix IE bugs, see support tests\r\n    function fixInput(src, dest) {\r\n        var nodeName = dest.nodeName.toLowerCase();\r\n\r\n        // Fails to persist the checked state of a cloned checkbox or radio button.\r\n        if (nodeName === \"input\" && rcheckableType.test(src.type)) {\r\n            dest.checked = src.checked;\r\n\r\n            // Fails to return the selected option to the default selected state when cloning options\r\n        } else if (nodeName === \"input\" || nodeName === \"textarea\") {\r\n            dest.defaultValue = src.defaultValue;\r\n        }\r\n    }\r\n\r\n    function domManip(collection, args, callback, ignored) {\r\n\r\n        // Flatten any nested arrays\r\n        args = flat(args);\r\n\r\n        var fragment, first, scripts, hasScripts, node, doc,\r\n            i = 0,\r\n            l = collection.length,\r\n            iNoClone = l - 1,\r\n            value = args[0],\r\n            valueIsFunction = isFunction(value);\r\n\r\n        // We can't cloneNode fragments that contain checked, in WebKit\r\n        if (valueIsFunction ||\r\n            (l > 1 && typeof value === \"string\" &&\r\n                !support.checkClone && rchecked.test(value))) {\r\n            return collection.each(function (index) {\r\n                var self = collection.eq(index);\r\n                if (valueIsFunction) {\r\n                    args[0] = value.call(this, index, self.html());\r\n                }\r\n                domManip(self, args, callback, ignored);\r\n            });\r\n        }\r\n\r\n        if (l) {\r\n            fragment = buildFragment(args, collection[0].ownerDocument, false, collection, ignored);\r\n            first = fragment.firstChild;\r\n\r\n            if (fragment.childNodes.length === 1) {\r\n                fragment = first;\r\n            }\r\n\r\n            // Require either new content or an interest in ignored elements to invoke the callback\r\n            if (first || ignored) {\r\n                scripts = jQuery.map(getAll(fragment, \"script\"), disableScript);\r\n                hasScripts = scripts.length;\r\n\r\n                // Use the original fragment for the last item\r\n                // instead of the first because it can end up\r\n                // being emptied incorrectly in certain situations (#8070).\r\n                for (; i < l; i++) {\r\n                    node = fragment;\r\n\r\n                    if (i !== iNoClone) {\r\n                        node = jQuery.clone(node, true, true);\r\n\r\n                        // Keep references to cloned scripts for later restoration\r\n                        if (hasScripts) {\r\n\r\n                            // Support: Android <=4.0 only, PhantomJS 1 only\r\n                            // push.apply(_, arraylike) throws on ancient WebKit\r\n                            jQuery.merge(scripts, getAll(node, \"script\"));\r\n                        }\r\n                    }\r\n\r\n                    callback.call(collection[i], node, i);\r\n                }\r\n\r\n                if (hasScripts) {\r\n                    doc = scripts[scripts.length - 1].ownerDocument;\r\n\r\n                    // Reenable scripts\r\n                    jQuery.map(scripts, restoreScript);\r\n\r\n                    // Evaluate executable scripts on first document insertion\r\n                    for (i = 0; i < hasScripts; i++) {\r\n                        node = scripts[i];\r\n                        if (rscriptType.test(node.type || \"\") &&\r\n                            !dataPriv.access(node, \"globalEval\") &&\r\n                            jQuery.contains(doc, node)) {\r\n\r\n                            if (node.src && (node.type || \"\").toLowerCase() !== \"module\") {\r\n\r\n                                // Optional AJAX dependency, but won't run scripts if not present\r\n                                if (jQuery._evalUrl && !node.noModule) {\r\n                                    jQuery._evalUrl(node.src, {\r\n                                        nonce: node.nonce || node.getAttribute(\"nonce\")\r\n                                    }, doc);\r\n                                }\r\n                            } else {\r\n                                DOMEval(node.textContent.replace(rcleanScript, \"\"), node, doc);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return collection;\r\n    }\r\n\r\n    function remove(elem, selector, keepData) {\r\n        var node,\r\n            nodes = selector ? jQuery.filter(selector, elem) : elem,\r\n            i = 0;\r\n\r\n        for (; (node = nodes[i]) != null; i++) {\r\n            if (!keepData && node.nodeType === 1) {\r\n                jQuery.cleanData(getAll(node));\r\n            }\r\n\r\n            if (node.parentNode) {\r\n                if (keepData && isAttached(node)) {\r\n                    setGlobalEval(getAll(node, \"script\"));\r\n                }\r\n                node.parentNode.removeChild(node);\r\n            }\r\n        }\r\n\r\n        return elem;\r\n    }\r\n\r\n    jQuery.extend({\r\n        htmlPrefilter: function (html) {\r\n            return html;\r\n        },\r\n\r\n        clone: function (elem, dataAndEvents, deepDataAndEvents) {\r\n            var i, l, srcElements, destElements,\r\n                clone = elem.cloneNode(true),\r\n                inPage = isAttached(elem);\r\n\r\n            // Fix IE cloning issues\r\n            if (!support.noCloneChecked && (elem.nodeType === 1 || elem.nodeType === 11) &&\r\n                !jQuery.isXMLDoc(elem)) {\r\n\r\n                // We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\r\n                destElements = getAll(clone);\r\n                srcElements = getAll(elem);\r\n\r\n                for (i = 0, l = srcElements.length; i < l; i++) {\r\n                    fixInput(srcElements[i], destElements[i]);\r\n                }\r\n            }\r\n\r\n            // Copy the events from the original to the clone\r\n            if (dataAndEvents) {\r\n                if (deepDataAndEvents) {\r\n                    srcElements = srcElements || getAll(elem);\r\n                    destElements = destElements || getAll(clone);\r\n\r\n                    for (i = 0, l = srcElements.length; i < l; i++) {\r\n                        cloneCopyEvent(srcElements[i], destElements[i]);\r\n                    }\r\n                } else {\r\n                    cloneCopyEvent(elem, clone);\r\n                }\r\n            }\r\n\r\n            // Preserve script evaluation history\r\n            destElements = getAll(clone, \"script\");\r\n            if (destElements.length > 0) {\r\n                setGlobalEval(destElements, !inPage && getAll(elem, \"script\"));\r\n            }\r\n\r\n            // Return the cloned set\r\n            return clone;\r\n        },\r\n\r\n        cleanData: function (elems) {\r\n            var data, elem, type,\r\n                special = jQuery.event.special,\r\n                i = 0;\r\n\r\n            for (; (elem = elems[i]) !== undefined; i++) {\r\n                if (acceptData(elem)) {\r\n                    if ((data = elem[dataPriv.expando])) {\r\n                        if (data.events) {\r\n                            for (type in data.events) {\r\n                                if (special[type]) {\r\n                                    jQuery.event.remove(elem, type);\r\n\r\n                                    // This is a shortcut to avoid jQuery.event.remove's overhead\r\n                                } else {\r\n                                    jQuery.removeEvent(elem, type, data.handle);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        // Support: Chrome <=35 - 45+\r\n                        // Assign undefined instead of using delete, see Data#remove\r\n                        elem[dataPriv.expando] = undefined;\r\n                    }\r\n                    if (elem[dataUser.expando]) {\r\n\r\n                        // Support: Chrome <=35 - 45+\r\n                        // Assign undefined instead of using delete, see Data#remove\r\n                        elem[dataUser.expando] = undefined;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    jQuery.fn.extend({\r\n        detach: function (selector) {\r\n            return remove(this, selector, true);\r\n        },\r\n\r\n        remove: function (selector) {\r\n            return remove(this, selector);\r\n        },\r\n\r\n        text: function (value) {\r\n            return access(this, function (value) {\r\n                return value === undefined ?\r\n                    jQuery.text(this) :\r\n                    this.empty().each(function () {\r\n                        if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {\r\n                            this.textContent = value;\r\n                        }\r\n                    });\r\n            }, null, value, arguments.length);\r\n        },\r\n\r\n        append: function () {\r\n            return domManip(this, arguments, function (elem) {\r\n                if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {\r\n                    var target = manipulationTarget(this, elem);\r\n                    target.appendChild(elem);\r\n                }\r\n            });\r\n        },\r\n\r\n        prepend: function () {\r\n            return domManip(this, arguments, function (elem) {\r\n                if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {\r\n                    var target = manipulationTarget(this, elem);\r\n                    target.insertBefore(elem, target.firstChild);\r\n                }\r\n            });\r\n        },\r\n\r\n        before: function () {\r\n            return domManip(this, arguments, function (elem) {\r\n                if (this.parentNode) {\r\n                    this.parentNode.insertBefore(elem, this);\r\n                }\r\n            });\r\n        },\r\n\r\n        after: function () {\r\n            return domManip(this, arguments, function (elem) {\r\n                if (this.parentNode) {\r\n                    this.parentNode.insertBefore(elem, this.nextSibling);\r\n                }\r\n            });\r\n        },\r\n\r\n        empty: function () {\r\n            var elem,\r\n                i = 0;\r\n\r\n            for (; (elem = this[i]) != null; i++) {\r\n                if (elem.nodeType === 1) {\r\n\r\n                    // Prevent memory leaks\r\n                    jQuery.cleanData(getAll(elem, false));\r\n\r\n                    // Remove any remaining nodes\r\n                    elem.textContent = \"\";\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        clone: function (dataAndEvents, deepDataAndEvents) {\r\n            dataAndEvents = dataAndEvents == null ? false : dataAndEvents;\r\n            deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\r\n\r\n            return this.map(function () {\r\n                return jQuery.clone(this, dataAndEvents, deepDataAndEvents);\r\n            });\r\n        },\r\n\r\n        html: function (value) {\r\n            return access(this, function (value) {\r\n                var elem = this[0] || {},\r\n                    i = 0,\r\n                    l = this.length;\r\n\r\n                if (value === undefined && elem.nodeType === 1) {\r\n                    return elem.innerHTML;\r\n                }\r\n\r\n                // See if we can take a shortcut and just use innerHTML\r\n                if (typeof value === \"string\" && !rnoInnerhtml.test(value) &&\r\n                    !wrapMap[(rtagName.exec(value) || [\"\", \"\"])[1].toLowerCase()]) {\r\n\r\n                    value = jQuery.htmlPrefilter(value);\r\n\r\n                    try {\r\n                        for (; i < l; i++) {\r\n                            elem = this[i] || {};\r\n\r\n                            // Remove element nodes and prevent memory leaks\r\n                            if (elem.nodeType === 1) {\r\n                                jQuery.cleanData(getAll(elem, false));\r\n                                elem.innerHTML = value;\r\n                            }\r\n                        }\r\n\r\n                        elem = 0;\r\n\r\n                        // If using innerHTML throws an exception, use the fallback method\r\n                    } catch (e) { }\r\n                }\r\n\r\n                if (elem) {\r\n                    this.empty().append(value);\r\n                }\r\n            }, null, value, arguments.length);\r\n        },\r\n\r\n        replaceWith: function () {\r\n            var ignored = [];\r\n\r\n            // Make the changes, replacing each non-ignored context element with the new content\r\n            return domManip(this, arguments, function (elem) {\r\n                var parent = this.parentNode;\r\n\r\n                if (jQuery.inArray(this, ignored) < 0) {\r\n                    jQuery.cleanData(getAll(this));\r\n                    if (parent) {\r\n                        parent.replaceChild(elem, this);\r\n                    }\r\n                }\r\n\r\n                // Force callback invocation\r\n            }, ignored);\r\n        }\r\n    });\r\n\r\n    jQuery.each({\r\n        appendTo: \"append\",\r\n        prependTo: \"prepend\",\r\n        insertBefore: \"before\",\r\n        insertAfter: \"after\",\r\n        replaceAll: \"replaceWith\"\r\n    }, function (name, original) {\r\n        jQuery.fn[name] = function (selector) {\r\n            var elems,\r\n                ret = [],\r\n                insert = jQuery(selector),\r\n                last = insert.length - 1,\r\n                i = 0;\r\n\r\n            for (; i <= last; i++) {\r\n                elems = i === last ? this : this.clone(true);\r\n                jQuery(insert[i])[original](elems);\r\n\r\n                // Support: Android <=4.0 only, PhantomJS 1 only\r\n                // .get() because push.apply(_, arraylike) throws on ancient WebKit\r\n                push.apply(ret, elems.get());\r\n            }\r\n\r\n            return this.pushStack(ret);\r\n        };\r\n    });\r\n    var rnumnonpx = new RegExp(\"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\");\r\n\r\n    var getStyles = function (elem) {\r\n\r\n        // Support: IE <=11 only, Firefox <=30 (#15098, #14150)\r\n        // IE throws on elements created in popups\r\n        // FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\r\n        var view = elem.ownerDocument.defaultView;\r\n\r\n        if (!view || !view.opener) {\r\n            view = window;\r\n        }\r\n\r\n        return view.getComputedStyle(elem);\r\n    };\r\n\r\n    var swap = function (elem, options, callback) {\r\n        var ret, name,\r\n            old = {};\r\n\r\n        // Remember the old values, and insert the new ones\r\n        for (name in options) {\r\n            old[name] = elem.style[name];\r\n            elem.style[name] = options[name];\r\n        }\r\n\r\n        ret = callback.call(elem);\r\n\r\n        // Revert the old values\r\n        for (name in options) {\r\n            elem.style[name] = old[name];\r\n        }\r\n\r\n        return ret;\r\n    };\r\n\r\n\r\n    var rboxStyle = new RegExp(cssExpand.join(\"|\"), \"i\");\r\n\r\n\r\n\r\n    (function () {\r\n\r\n        // Executing both pixelPosition & boxSizingReliable tests require only one layout\r\n        // so they're executed at the same time to save the second computation.\r\n        function computeStyleTests() {\r\n\r\n            // This is a singleton, we need to execute it only once\r\n            if (!div) {\r\n                return;\r\n            }\r\n\r\n            container.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\r\n                \"margin-top:1px;padding:0;border:0\";\r\n            div.style.cssText =\r\n                \"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\r\n                \"margin:auto;border:1px;padding:1px;\" +\r\n                \"width:60%;top:1%\";\r\n            documentElement.appendChild(container).appendChild(div);\r\n\r\n            var divStyle = window.getComputedStyle(div);\r\n            pixelPositionVal = divStyle.top !== \"1%\";\r\n\r\n            // Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\r\n            reliableMarginLeftVal = roundPixelMeasures(divStyle.marginLeft) === 12;\r\n\r\n            // Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\r\n            // Some styles come back with percentage values, even though they shouldn't\r\n            div.style.right = \"60%\";\r\n            pixelBoxStylesVal = roundPixelMeasures(divStyle.right) === 36;\r\n\r\n            // Support: IE 9 - 11 only\r\n            // Detect misreporting of content dimensions for box-sizing:border-box elements\r\n            boxSizingReliableVal = roundPixelMeasures(divStyle.width) === 36;\r\n\r\n            // Support: IE 9 only\r\n            // Detect overflow:scroll screwiness (gh-3699)\r\n            // Support: Chrome <=64\r\n            // Don't get tricked when zoom affects offsetWidth (gh-4029)\r\n            div.style.position = \"absolute\";\r\n            scrollboxSizeVal = roundPixelMeasures(div.offsetWidth / 3) === 12;\r\n\r\n            documentElement.removeChild(container);\r\n\r\n            // Nullify the div so it wouldn't be stored in the memory and\r\n            // it will also be a sign that checks already performed\r\n            div = null;\r\n        }\r\n\r\n        function roundPixelMeasures(measure) {\r\n            return Math.round(parseFloat(measure));\r\n        }\r\n\r\n        var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\r\n            reliableTrDimensionsVal, reliableMarginLeftVal,\r\n            container = document.createElement(\"div\"),\r\n            div = document.createElement(\"div\");\r\n\r\n        // Finish early in limited (non-browser) environments\r\n        if (!div.style) {\r\n            return;\r\n        }\r\n\r\n        // Support: IE <=9 - 11 only\r\n        // Style of cloned element affects source element cloned (#8908)\r\n        div.style.backgroundClip = \"content-box\";\r\n        div.cloneNode(true).style.backgroundClip = \"\";\r\n        support.clearCloneStyle = div.style.backgroundClip === \"content-box\";\r\n\r\n        jQuery.extend(support, {\r\n            boxSizingReliable: function () {\r\n                computeStyleTests();\r\n                return boxSizingReliableVal;\r\n            },\r\n            pixelBoxStyles: function () {\r\n                computeStyleTests();\r\n                return pixelBoxStylesVal;\r\n            },\r\n            pixelPosition: function () {\r\n                computeStyleTests();\r\n                return pixelPositionVal;\r\n            },\r\n            reliableMarginLeft: function () {\r\n                computeStyleTests();\r\n                return reliableMarginLeftVal;\r\n            },\r\n            scrollboxSize: function () {\r\n                computeStyleTests();\r\n                return scrollboxSizeVal;\r\n            },\r\n\r\n            // Support: IE 9 - 11+, Edge 15 - 18+\r\n            // IE/Edge misreport `getComputedStyle` of table rows with width/height\r\n            // set in CSS while `offset*` properties report correct values.\r\n            // Behavior in IE 9 is more subtle than in newer versions & it passes\r\n            // some versions of this test; make sure not to make it pass there!\r\n            reliableTrDimensions: function () {\r\n                var table, tr, trChild, trStyle;\r\n                if (reliableTrDimensionsVal == null) {\r\n                    table = document.createElement(\"table\");\r\n                    tr = document.createElement(\"tr\");\r\n                    trChild = document.createElement(\"div\");\r\n\r\n                    table.style.cssText = \"position:absolute;left:-11111px\";\r\n                    tr.style.height = \"1px\";\r\n                    trChild.style.height = \"9px\";\r\n\r\n                    documentElement\r\n                        .appendChild(table)\r\n                        .appendChild(tr)\r\n                        .appendChild(trChild);\r\n\r\n                    trStyle = window.getComputedStyle(tr);\r\n                    reliableTrDimensionsVal = parseInt(trStyle.height) > 3;\r\n\r\n                    documentElement.removeChild(table);\r\n                }\r\n                return reliableTrDimensionsVal;\r\n            }\r\n        });\r\n    })();\r\n\r\n\r\n    function curCSS(elem, name, computed) {\r\n        var width, minWidth, maxWidth, ret,\r\n\r\n            // Support: Firefox 51+\r\n            // Retrieving style before computed somehow\r\n            // fixes an issue with getting wrong values\r\n            // on detached elements\r\n            style = elem.style;\r\n\r\n        computed = computed || getStyles(elem);\r\n\r\n        // getPropertyValue is needed for:\r\n        //   .css('filter') (IE 9 only, #12537)\r\n        //   .css('--customProperty) (#3144)\r\n        if (computed) {\r\n            ret = computed.getPropertyValue(name) || computed[name];\r\n\r\n            if (ret === \"\" && !isAttached(elem)) {\r\n                ret = jQuery.style(elem, name);\r\n            }\r\n\r\n            // A tribute to the \"awesome hack by Dean Edwards\"\r\n            // Android Browser returns percentage for some values,\r\n            // but width seems to be reliably pixels.\r\n            // This is against the CSSOM draft spec:\r\n            // https://drafts.csswg.org/cssom/#resolved-values\r\n            if (!support.pixelBoxStyles() && rnumnonpx.test(ret) && rboxStyle.test(name)) {\r\n\r\n                // Remember the original values\r\n                width = style.width;\r\n                minWidth = style.minWidth;\r\n                maxWidth = style.maxWidth;\r\n\r\n                // Put in the new values to get a computed value out\r\n                style.minWidth = style.maxWidth = style.width = ret;\r\n                ret = computed.width;\r\n\r\n                // Revert the changed values\r\n                style.width = width;\r\n                style.minWidth = minWidth;\r\n                style.maxWidth = maxWidth;\r\n            }\r\n        }\r\n\r\n        return ret !== undefined ?\r\n\r\n            // Support: IE <=9 - 11 only\r\n            // IE returns zIndex value as an integer.\r\n            ret + \"\" :\r\n            ret;\r\n    }\r\n\r\n\r\n    function addGetHookIf(conditionFn, hookFn) {\r\n\r\n        // Define the hook, we'll check on the first run if it's really needed.\r\n        return {\r\n            get: function () {\r\n                if (conditionFn()) {\r\n\r\n                    // Hook not needed (or it's not possible to use it due\r\n                    // to missing dependency), remove it.\r\n                    delete this.get;\r\n                    return;\r\n                }\r\n\r\n                // Hook needed; redefine it so that the support test is not executed again.\r\n                return (this.get = hookFn).apply(this, arguments);\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n    var cssPrefixes = [\"Webkit\", \"Moz\", \"ms\"],\r\n        emptyStyle = document.createElement(\"div\").style,\r\n        vendorProps = {};\r\n\r\n    // Return a vendor-prefixed property or undefined\r\n    function vendorPropName(name) {\r\n\r\n        // Check for vendor prefixed names\r\n        var capName = name[0].toUpperCase() + name.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            name = cssPrefixes[i] + capName;\r\n            if (name in emptyStyle) {\r\n                return name;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Return a potentially-mapped jQuery.cssProps or vendor prefixed property\r\n    function finalPropName(name) {\r\n        var final = jQuery.cssProps[name] || vendorProps[name];\r\n\r\n        if (final) {\r\n            return final;\r\n        }\r\n        if (name in emptyStyle) {\r\n            return name;\r\n        }\r\n        return vendorProps[name] = vendorPropName(name) || name;\r\n    }\r\n\r\n\r\n    var\r\n\r\n        // Swappable if display is none or starts with table\r\n        // except \"table\", \"table-cell\", or \"table-caption\"\r\n        // See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\r\n        rdisplayswap = /^(none|table(?!-c[ea]).+)/,\r\n        rcustomProp = /^--/,\r\n        cssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\r\n        cssNormalTransform = {\r\n            letterSpacing: \"0\",\r\n            fontWeight: \"400\"\r\n        };\r\n\r\n    function setPositiveNumber(_elem, value, subtract) {\r\n\r\n        // Any relative (+/-) values have already been\r\n        // normalized at this point\r\n        var matches = rcssNum.exec(value);\r\n        return matches ?\r\n\r\n            // Guard against undefined \"subtract\", e.g., when used as in cssHooks\r\n            Math.max(0, matches[2] - (subtract || 0)) + (matches[3] || \"px\") :\r\n            value;\r\n    }\r\n\r\n    function boxModelAdjustment(elem, dimension, box, isBorderBox, styles, computedVal) {\r\n        var i = dimension === \"width\" ? 1 : 0,\r\n            extra = 0,\r\n            delta = 0;\r\n\r\n        // Adjustment may not be necessary\r\n        if (box === (isBorderBox ? \"border\" : \"content\")) {\r\n            return 0;\r\n        }\r\n\r\n        for (; i < 4; i += 2) {\r\n\r\n            // Both box models exclude margin\r\n            if (box === \"margin\") {\r\n                delta += jQuery.css(elem, box + cssExpand[i], true, styles);\r\n            }\r\n\r\n            // If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\r\n            if (!isBorderBox) {\r\n\r\n                // Add padding\r\n                delta += jQuery.css(elem, \"padding\" + cssExpand[i], true, styles);\r\n\r\n                // For \"border\" or \"margin\", add border\r\n                if (box !== \"padding\") {\r\n                    delta += jQuery.css(elem, \"border\" + cssExpand[i] + \"Width\", true, styles);\r\n\r\n                    // But still keep track of it otherwise\r\n                } else {\r\n                    extra += jQuery.css(elem, \"border\" + cssExpand[i] + \"Width\", true, styles);\r\n                }\r\n\r\n                // If we get here with a border-box (content + padding + border), we're seeking \"content\" or\r\n                // \"padding\" or \"margin\"\r\n            } else {\r\n\r\n                // For \"content\", subtract padding\r\n                if (box === \"content\") {\r\n                    delta -= jQuery.css(elem, \"padding\" + cssExpand[i], true, styles);\r\n                }\r\n\r\n                // For \"content\" or \"padding\", subtract border\r\n                if (box !== \"margin\") {\r\n                    delta -= jQuery.css(elem, \"border\" + cssExpand[i] + \"Width\", true, styles);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Account for positive content-box scroll gutter when requested by providing computedVal\r\n        if (!isBorderBox && computedVal >= 0) {\r\n\r\n            // offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\r\n            // Assuming integer scroll gutter, subtract the rest and round down\r\n            delta += Math.max(0, Math.ceil(\r\n                elem[\"offset\" + dimension[0].toUpperCase() + dimension.slice(1)] -\r\n                computedVal -\r\n                delta -\r\n                extra -\r\n                0.5\r\n\r\n                // If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter\r\n                // Use an explicit zero to avoid NaN (gh-3964)\r\n            )) || 0;\r\n        }\r\n\r\n        return delta;\r\n    }\r\n\r\n    function getWidthOrHeight(elem, dimension, extra) {\r\n\r\n        // Start with computed style\r\n        var styles = getStyles(elem),\r\n\r\n            // To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).\r\n            // Fake content-box until we know it's needed to know the true value.\r\n            boxSizingNeeded = !support.boxSizingReliable() || extra,\r\n            isBorderBox = boxSizingNeeded &&\r\n                jQuery.css(elem, \"boxSizing\", false, styles) === \"border-box\",\r\n            valueIsBorderBox = isBorderBox,\r\n\r\n            val = curCSS(elem, dimension, styles),\r\n            offsetProp = \"offset\" + dimension[0].toUpperCase() + dimension.slice(1);\r\n\r\n        // Support: Firefox <=54\r\n        // Return a confounding non-pixel value or feign ignorance, as appropriate.\r\n        if (rnumnonpx.test(val)) {\r\n            if (!extra) {\r\n                return val;\r\n            }\r\n            val = \"auto\";\r\n        }\r\n\r\n\r\n        // Support: IE 9 - 11 only\r\n        // Use offsetWidth/offsetHeight for when box sizing is unreliable.\r\n        // In those cases, the computed value can be trusted to be border-box.\r\n        if ((!support.boxSizingReliable() && isBorderBox ||\r\n\r\n            // Support: IE 10 - 11+, Edge 15 - 18+\r\n            // IE/Edge misreport `getComputedStyle` of table rows with width/height\r\n            // set in CSS while `offset*` properties report correct values.\r\n            // Interestingly, in some cases IE 9 doesn't suffer from this issue.\r\n            !support.reliableTrDimensions() && nodeName(elem, \"tr\") ||\r\n\r\n            // Fall back to offsetWidth/offsetHeight when value is \"auto\"\r\n            // This happens for inline elements with no explicit setting (gh-3571)\r\n            val === \"auto\" ||\r\n\r\n            // Support: Android <=4.1 - 4.3 only\r\n            // Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)\r\n            !parseFloat(val) && jQuery.css(elem, \"display\", false, styles) === \"inline\") &&\r\n\r\n            // Make sure the element is visible & connected\r\n            elem.getClientRects().length) {\r\n\r\n            isBorderBox = jQuery.css(elem, \"boxSizing\", false, styles) === \"border-box\";\r\n\r\n            // Where available, offsetWidth/offsetHeight approximate border box dimensions.\r\n            // Where not available (e.g., SVG), assume unreliable box-sizing and interpret the\r\n            // retrieved value as a content box dimension.\r\n            valueIsBorderBox = offsetProp in elem;\r\n            if (valueIsBorderBox) {\r\n                val = elem[offsetProp];\r\n            }\r\n        }\r\n\r\n        // Normalize \"\" and auto\r\n        val = parseFloat(val) || 0;\r\n\r\n        // Adjust for the element's box model\r\n        return (val +\r\n            boxModelAdjustment(\r\n                elem,\r\n                dimension,\r\n                extra || (isBorderBox ? \"border\" : \"content\"),\r\n                valueIsBorderBox,\r\n                styles,\r\n\r\n                // Provide the current computed size to request scroll gutter calculation (gh-3589)\r\n                val\r\n            )\r\n        ) + \"px\";\r\n    }\r\n\r\n    jQuery.extend({\r\n\r\n        // Add in style property hooks for overriding the default\r\n        // behavior of getting and setting a style property\r\n        cssHooks: {\r\n            opacity: {\r\n                get: function (elem, computed) {\r\n                    if (computed) {\r\n\r\n                        // We should always get a number back from opacity\r\n                        var ret = curCSS(elem, \"opacity\");\r\n                        return ret === \"\" ? \"1\" : ret;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        // Don't automatically add \"px\" to these possibly-unitless properties\r\n        cssNumber: {\r\n            \"animationIterationCount\": true,\r\n            \"columnCount\": true,\r\n            \"fillOpacity\": true,\r\n            \"flexGrow\": true,\r\n            \"flexShrink\": true,\r\n            \"fontWeight\": true,\r\n            \"gridArea\": true,\r\n            \"gridColumn\": true,\r\n            \"gridColumnEnd\": true,\r\n            \"gridColumnStart\": true,\r\n            \"gridRow\": true,\r\n            \"gridRowEnd\": true,\r\n            \"gridRowStart\": true,\r\n            \"lineHeight\": true,\r\n            \"opacity\": true,\r\n            \"order\": true,\r\n            \"orphans\": true,\r\n            \"widows\": true,\r\n            \"zIndex\": true,\r\n            \"zoom\": true\r\n        },\r\n\r\n        // Add in properties whose names you wish to fix before\r\n        // setting or getting the value\r\n        cssProps: {},\r\n\r\n        // Get and set the style property on a DOM Node\r\n        style: function (elem, name, value, extra) {\r\n\r\n            // Don't set styles on text and comment nodes\r\n            if (!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style) {\r\n                return;\r\n            }\r\n\r\n            // Make sure that we're working with the right name\r\n            var ret, type, hooks,\r\n                origName = camelCase(name),\r\n                isCustomProp = rcustomProp.test(name),\r\n                style = elem.style;\r\n\r\n            // Make sure that we're working with the right name. We don't\r\n            // want to query the value if it is a CSS custom property\r\n            // since they are user-defined.\r\n            if (!isCustomProp) {\r\n                name = finalPropName(origName);\r\n            }\r\n\r\n            // Gets hook for the prefixed version, then unprefixed version\r\n            hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];\r\n\r\n            // Check if we're setting a value\r\n            if (value !== undefined) {\r\n                type = typeof value;\r\n\r\n                // Convert \"+=\" or \"-=\" to relative numbers (#7345)\r\n                if (type === \"string\" && (ret = rcssNum.exec(value)) && ret[1]) {\r\n                    value = adjustCSS(elem, name, ret);\r\n\r\n                    // Fixes bug #9237\r\n                    type = \"number\";\r\n                }\r\n\r\n                // Make sure that null and NaN values aren't set (#7116)\r\n                if (value == null || value !== value) {\r\n                    return;\r\n                }\r\n\r\n                // If a number was passed in, add the unit (except for certain CSS properties)\r\n                // The isCustomProp check can be removed in jQuery 4.0 when we only auto-append\r\n                // \"px\" to a few hardcoded values.\r\n                if (type === \"number\" && !isCustomProp) {\r\n                    value += ret && ret[3] || (jQuery.cssNumber[origName] ? \"\" : \"px\");\r\n                }\r\n\r\n                // background-* props affect original clone's values\r\n                if (!support.clearCloneStyle && value === \"\" && name.indexOf(\"background\") === 0) {\r\n                    style[name] = \"inherit\";\r\n                }\r\n\r\n                // If a hook was provided, use that value, otherwise just set the specified value\r\n                if (!hooks || !(\"set\" in hooks) ||\r\n                    (value = hooks.set(elem, value, extra)) !== undefined) {\r\n\r\n                    if (isCustomProp) {\r\n                        style.setProperty(name, value);\r\n                    } else {\r\n                        style[name] = value;\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                // If a hook was provided get the non-computed value from there\r\n                if (hooks && \"get\" in hooks &&\r\n                    (ret = hooks.get(elem, false, extra)) !== undefined) {\r\n\r\n                    return ret;\r\n                }\r\n\r\n                // Otherwise just get the value from the style object\r\n                return style[name];\r\n            }\r\n        },\r\n\r\n        css: function (elem, name, extra, styles) {\r\n            var val, num, hooks,\r\n                origName = camelCase(name),\r\n                isCustomProp = rcustomProp.test(name);\r\n\r\n            // Make sure that we're working with the right name. We don't\r\n            // want to modify the value if it is a CSS custom property\r\n            // since they are user-defined.\r\n            if (!isCustomProp) {\r\n                name = finalPropName(origName);\r\n            }\r\n\r\n            // Try prefixed name followed by the unprefixed name\r\n            hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];\r\n\r\n            // If a hook was provided get the computed value from there\r\n            if (hooks && \"get\" in hooks) {\r\n                val = hooks.get(elem, true, extra);\r\n            }\r\n\r\n            // Otherwise, if a way to get the computed value exists, use that\r\n            if (val === undefined) {\r\n                val = curCSS(elem, name, styles);\r\n            }\r\n\r\n            // Convert \"normal\" to computed value\r\n            if (val === \"normal\" && name in cssNormalTransform) {\r\n                val = cssNormalTransform[name];\r\n            }\r\n\r\n            // Make numeric if forced or a qualifier was provided and val looks numeric\r\n            if (extra === \"\" || extra) {\r\n                num = parseFloat(val);\r\n                return extra === true || isFinite(num) ? num || 0 : val;\r\n            }\r\n\r\n            return val;\r\n        }\r\n    });\r\n\r\n    jQuery.each([\"height\", \"width\"], function (_i, dimension) {\r\n        jQuery.cssHooks[dimension] = {\r\n            get: function (elem, computed, extra) {\r\n                if (computed) {\r\n\r\n                    // Certain elements can have dimension info if we invisibly show them\r\n                    // but it must have a current display style that would benefit\r\n                    return rdisplayswap.test(jQuery.css(elem, \"display\")) &&\r\n\r\n                        // Support: Safari 8+\r\n                        // Table columns in Safari have non-zero offsetWidth & zero\r\n                        // getBoundingClientRect().width unless display is changed.\r\n                        // Support: IE <=11 only\r\n                        // Running getBoundingClientRect on a disconnected node\r\n                        // in IE throws an error.\r\n                        (!elem.getClientRects().length || !elem.getBoundingClientRect().width) ?\r\n                        swap(elem, cssShow, function () {\r\n                            return getWidthOrHeight(elem, dimension, extra);\r\n                        }) :\r\n                        getWidthOrHeight(elem, dimension, extra);\r\n                }\r\n            },\r\n\r\n            set: function (elem, value, extra) {\r\n                var matches,\r\n                    styles = getStyles(elem),\r\n\r\n                    // Only read styles.position if the test has a chance to fail\r\n                    // to avoid forcing a reflow.\r\n                    scrollboxSizeBuggy = !support.scrollboxSize() &&\r\n                        styles.position === \"absolute\",\r\n\r\n                    // To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)\r\n                    boxSizingNeeded = scrollboxSizeBuggy || extra,\r\n                    isBorderBox = boxSizingNeeded &&\r\n                        jQuery.css(elem, \"boxSizing\", false, styles) === \"border-box\",\r\n                    subtract = extra ?\r\n                        boxModelAdjustment(\r\n                            elem,\r\n                            dimension,\r\n                            extra,\r\n                            isBorderBox,\r\n                            styles\r\n                        ) :\r\n                        0;\r\n\r\n                // Account for unreliable border-box dimensions by comparing offset* to computed and\r\n                // faking a content-box to get border and padding (gh-3699)\r\n                if (isBorderBox && scrollboxSizeBuggy) {\r\n                    subtract -= Math.ceil(\r\n                        elem[\"offset\" + dimension[0].toUpperCase() + dimension.slice(1)] -\r\n                        parseFloat(styles[dimension]) -\r\n                        boxModelAdjustment(elem, dimension, \"border\", false, styles) -\r\n                        0.5\r\n                    );\r\n                }\r\n\r\n                // Convert to pixels if value adjustment is needed\r\n                if (subtract && (matches = rcssNum.exec(value)) &&\r\n                    (matches[3] || \"px\") !== \"px\") {\r\n\r\n                    elem.style[dimension] = value;\r\n                    value = jQuery.css(elem, dimension);\r\n                }\r\n\r\n                return setPositiveNumber(elem, value, subtract);\r\n            }\r\n        };\r\n    });\r\n\r\n    jQuery.cssHooks.marginLeft = addGetHookIf(support.reliableMarginLeft,\r\n        function (elem, computed) {\r\n            if (computed) {\r\n                return (parseFloat(curCSS(elem, \"marginLeft\")) ||\r\n                    elem.getBoundingClientRect().left -\r\n                    swap(elem, { marginLeft: 0 }, function () {\r\n                        return elem.getBoundingClientRect().left;\r\n                    })\r\n                ) + \"px\";\r\n            }\r\n        }\r\n    );\r\n\r\n    // These hooks are used by animate to expand properties\r\n    jQuery.each({\r\n        margin: \"\",\r\n        padding: \"\",\r\n        border: \"Width\"\r\n    }, function (prefix, suffix) {\r\n        jQuery.cssHooks[prefix + suffix] = {\r\n            expand: function (value) {\r\n                var i = 0,\r\n                    expanded = {},\r\n\r\n                    // Assumes a single number if not a string\r\n                    parts = typeof value === \"string\" ? value.split(\" \") : [value];\r\n\r\n                for (; i < 4; i++) {\r\n                    expanded[prefix + cssExpand[i] + suffix] =\r\n                        parts[i] || parts[i - 2] || parts[0];\r\n                }\r\n\r\n                return expanded;\r\n            }\r\n        };\r\n\r\n        if (prefix !== \"margin\") {\r\n            jQuery.cssHooks[prefix + suffix].set = setPositiveNumber;\r\n        }\r\n    });\r\n\r\n    jQuery.fn.extend({\r\n        css: function (name, value) {\r\n            return access(this, function (elem, name, value) {\r\n                var styles, len,\r\n                    map = {},\r\n                    i = 0;\r\n\r\n                if (Array.isArray(name)) {\r\n                    styles = getStyles(elem);\r\n                    len = name.length;\r\n\r\n                    for (; i < len; i++) {\r\n                        map[name[i]] = jQuery.css(elem, name[i], false, styles);\r\n                    }\r\n\r\n                    return map;\r\n                }\r\n\r\n                return value !== undefined ?\r\n                    jQuery.style(elem, name, value) :\r\n                    jQuery.css(elem, name);\r\n            }, name, value, arguments.length > 1);\r\n        }\r\n    });\r\n\r\n\r\n    function Tween(elem, options, prop, end, easing) {\r\n        return new Tween.prototype.init(elem, options, prop, end, easing);\r\n    }\r\n    jQuery.Tween = Tween;\r\n\r\n    Tween.prototype = {\r\n        constructor: Tween,\r\n        init: function (elem, options, prop, end, easing, unit) {\r\n            this.elem = elem;\r\n            this.prop = prop;\r\n            this.easing = easing || jQuery.easing._default;\r\n            this.options = options;\r\n            this.start = this.now = this.cur();\r\n            this.end = end;\r\n            this.unit = unit || (jQuery.cssNumber[prop] ? \"\" : \"px\");\r\n        },\r\n        cur: function () {\r\n            var hooks = Tween.propHooks[this.prop];\r\n\r\n            return hooks && hooks.get ?\r\n                hooks.get(this) :\r\n                Tween.propHooks._default.get(this);\r\n        },\r\n        run: function (percent) {\r\n            var eased,\r\n                hooks = Tween.propHooks[this.prop];\r\n\r\n            if (this.options.duration) {\r\n                this.pos = eased = jQuery.easing[this.easing](\r\n                    percent, this.options.duration * percent, 0, 1, this.options.duration\r\n                );\r\n            } else {\r\n                this.pos = eased = percent;\r\n            }\r\n            this.now = (this.end - this.start) * eased + this.start;\r\n\r\n            if (this.options.step) {\r\n                this.options.step.call(this.elem, this.now, this);\r\n            }\r\n\r\n            if (hooks && hooks.set) {\r\n                hooks.set(this);\r\n            } else {\r\n                Tween.propHooks._default.set(this);\r\n            }\r\n            return this;\r\n        }\r\n    };\r\n\r\n    Tween.prototype.init.prototype = Tween.prototype;\r\n\r\n    Tween.propHooks = {\r\n        _default: {\r\n            get: function (tween) {\r\n                var result;\r\n\r\n                // Use a property on the element directly when it is not a DOM element,\r\n                // or when there is no matching style property that exists.\r\n                if (tween.elem.nodeType !== 1 ||\r\n                    tween.elem[tween.prop] != null && tween.elem.style[tween.prop] == null) {\r\n                    return tween.elem[tween.prop];\r\n                }\r\n\r\n                // Passing an empty string as a 3rd parameter to .css will automatically\r\n                // attempt a parseFloat and fallback to a string if the parse fails.\r\n                // Simple values such as \"10px\" are parsed to Float;\r\n                // complex values such as \"rotate(1rad)\" are returned as-is.\r\n                result = jQuery.css(tween.elem, tween.prop, \"\");\r\n\r\n                // Empty strings, null, undefined and \"auto\" are converted to 0.\r\n                return !result || result === \"auto\" ? 0 : result;\r\n            },\r\n            set: function (tween) {\r\n\r\n                // Use step hook for back compat.\r\n                // Use cssHook if its there.\r\n                // Use .style if available and use plain properties where available.\r\n                if (jQuery.fx.step[tween.prop]) {\r\n                    jQuery.fx.step[tween.prop](tween);\r\n                } else if (tween.elem.nodeType === 1 && (\r\n                    jQuery.cssHooks[tween.prop] ||\r\n                    tween.elem.style[finalPropName(tween.prop)] != null)) {\r\n                    jQuery.style(tween.elem, tween.prop, tween.now + tween.unit);\r\n                } else {\r\n                    tween.elem[tween.prop] = tween.now;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    // Support: IE <=9 only\r\n    // Panic based approach to setting things on disconnected nodes\r\n    Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\r\n        set: function (tween) {\r\n            if (tween.elem.nodeType && tween.elem.parentNode) {\r\n                tween.elem[tween.prop] = tween.now;\r\n            }\r\n        }\r\n    };\r\n\r\n    jQuery.easing = {\r\n        linear: function (p) {\r\n            return p;\r\n        },\r\n        swing: function (p) {\r\n            return 0.5 - Math.cos(p * Math.PI) / 2;\r\n        },\r\n        _default: \"swing\"\r\n    };\r\n\r\n    jQuery.fx = Tween.prototype.init;\r\n\r\n    // Back compat <1.8 extension point\r\n    jQuery.fx.step = {};\r\n\r\n\r\n\r\n\r\n    var\r\n        fxNow, inProgress,\r\n        rfxtypes = /^(?:toggle|show|hide)$/,\r\n        rrun = /queueHooks$/;\r\n\r\n    function schedule() {\r\n        if (inProgress) {\r\n            if (document.hidden === false && window.requestAnimationFrame) {\r\n                window.requestAnimationFrame(schedule);\r\n            } else {\r\n                window.setTimeout(schedule, jQuery.fx.interval);\r\n            }\r\n\r\n            jQuery.fx.tick();\r\n        }\r\n    }\r\n\r\n    // Animations created synchronously will run synchronously\r\n    function createFxNow() {\r\n        window.setTimeout(function () {\r\n            fxNow = undefined;\r\n        });\r\n        return (fxNow = Date.now());\r\n    }\r\n\r\n    // Generate parameters to create a standard animation\r\n    function genFx(type, includeWidth) {\r\n        var which,\r\n            i = 0,\r\n            attrs = { height: type };\r\n\r\n        // If we include width, step value is 1 to do all cssExpand values,\r\n        // otherwise step value is 2 to skip over Left and Right\r\n        includeWidth = includeWidth ? 1 : 0;\r\n        for (; i < 4; i += 2 - includeWidth) {\r\n            which = cssExpand[i];\r\n            attrs[\"margin\" + which] = attrs[\"padding\" + which] = type;\r\n        }\r\n\r\n        if (includeWidth) {\r\n            attrs.opacity = attrs.width = type;\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n\r\n    function createTween(value, prop, animation) {\r\n        var tween,\r\n            collection = (Animation.tweeners[prop] || []).concat(Animation.tweeners[\"*\"]),\r\n            index = 0,\r\n            length = collection.length;\r\n        for (; index < length; index++) {\r\n            if ((tween = collection[index].call(animation, prop, value))) {\r\n\r\n                // We're done with this property\r\n                return tween;\r\n            }\r\n        }\r\n    }\r\n\r\n    function defaultPrefilter(elem, props, opts) {\r\n        var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\r\n            isBox = \"width\" in props || \"height\" in props,\r\n            anim = this,\r\n            orig = {},\r\n            style = elem.style,\r\n            hidden = elem.nodeType && isHiddenWithinTree(elem),\r\n            dataShow = dataPriv.get(elem, \"fxshow\");\r\n\r\n        // Queue-skipping animations hijack the fx hooks\r\n        if (!opts.queue) {\r\n            hooks = jQuery._queueHooks(elem, \"fx\");\r\n            if (hooks.unqueued == null) {\r\n                hooks.unqueued = 0;\r\n                oldfire = hooks.empty.fire;\r\n                hooks.empty.fire = function () {\r\n                    if (!hooks.unqueued) {\r\n                        oldfire();\r\n                    }\r\n                };\r\n            }\r\n            hooks.unqueued++;\r\n\r\n            anim.always(function () {\r\n\r\n                // Ensure the complete handler is called before this completes\r\n                anim.always(function () {\r\n                    hooks.unqueued--;\r\n                    if (!jQuery.queue(elem, \"fx\").length) {\r\n                        hooks.empty.fire();\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        // Detect show/hide animations\r\n        for (prop in props) {\r\n            value = props[prop];\r\n            if (rfxtypes.test(value)) {\r\n                delete props[prop];\r\n                toggle = toggle || value === \"toggle\";\r\n                if (value === (hidden ? \"hide\" : \"show\")) {\r\n\r\n                    // Pretend to be hidden if this is a \"show\" and\r\n                    // there is still data from a stopped show/hide\r\n                    if (value === \"show\" && dataShow && dataShow[prop] !== undefined) {\r\n                        hidden = true;\r\n\r\n                        // Ignore all other no-op show/hide data\r\n                    } else {\r\n                        continue;\r\n                    }\r\n                }\r\n                orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem, prop);\r\n            }\r\n        }\r\n\r\n        // Bail out if this is a no-op like .hide().hide()\r\n        propTween = !jQuery.isEmptyObject(props);\r\n        if (!propTween && jQuery.isEmptyObject(orig)) {\r\n            return;\r\n        }\r\n\r\n        // Restrict \"overflow\" and \"display\" styles during box animations\r\n        if (isBox && elem.nodeType === 1) {\r\n\r\n            // Support: IE <=9 - 11, Edge 12 - 15\r\n            // Record all 3 overflow attributes because IE does not infer the shorthand\r\n            // from identically-valued overflowX and overflowY and Edge just mirrors\r\n            // the overflowX value there.\r\n            opts.overflow = [style.overflow, style.overflowX, style.overflowY];\r\n\r\n            // Identify a display type, preferring old show/hide data over the CSS cascade\r\n            restoreDisplay = dataShow && dataShow.display;\r\n            if (restoreDisplay == null) {\r\n                restoreDisplay = dataPriv.get(elem, \"display\");\r\n            }\r\n            display = jQuery.css(elem, \"display\");\r\n            if (display === \"none\") {\r\n                if (restoreDisplay) {\r\n                    display = restoreDisplay;\r\n                } else {\r\n\r\n                    // Get nonempty value(s) by temporarily forcing visibility\r\n                    showHide([elem], true);\r\n                    restoreDisplay = elem.style.display || restoreDisplay;\r\n                    display = jQuery.css(elem, \"display\");\r\n                    showHide([elem]);\r\n                }\r\n            }\r\n\r\n            // Animate inline elements as inline-block\r\n            if (display === \"inline\" || display === \"inline-block\" && restoreDisplay != null) {\r\n                if (jQuery.css(elem, \"float\") === \"none\") {\r\n\r\n                    // Restore the original display value at the end of pure show/hide animations\r\n                    if (!propTween) {\r\n                        anim.done(function () {\r\n                            style.display = restoreDisplay;\r\n                        });\r\n                        if (restoreDisplay == null) {\r\n                            display = style.display;\r\n                            restoreDisplay = display === \"none\" ? \"\" : display;\r\n                        }\r\n                    }\r\n                    style.display = \"inline-block\";\r\n                }\r\n            }\r\n        }\r\n\r\n        if (opts.overflow) {\r\n            style.overflow = \"hidden\";\r\n            anim.always(function () {\r\n                style.overflow = opts.overflow[0];\r\n                style.overflowX = opts.overflow[1];\r\n                style.overflowY = opts.overflow[2];\r\n            });\r\n        }\r\n\r\n        // Implement show/hide animations\r\n        propTween = false;\r\n        for (prop in orig) {\r\n\r\n            // General show/hide setup for this element animation\r\n            if (!propTween) {\r\n                if (dataShow) {\r\n                    if (\"hidden\" in dataShow) {\r\n                        hidden = dataShow.hidden;\r\n                    }\r\n                } else {\r\n                    dataShow = dataPriv.access(elem, \"fxshow\", { display: restoreDisplay });\r\n                }\r\n\r\n                // Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\r\n                if (toggle) {\r\n                    dataShow.hidden = !hidden;\r\n                }\r\n\r\n                // Show elements before animating them\r\n                if (hidden) {\r\n                    showHide([elem], true);\r\n                }\r\n\r\n                /* eslint-disable no-loop-func */\r\n\r\n                anim.done(function () {\r\n\r\n                    /* eslint-enable no-loop-func */\r\n\r\n                    // The final step of a \"hide\" animation is actually hiding the element\r\n                    if (!hidden) {\r\n                        showHide([elem]);\r\n                    }\r\n                    dataPriv.remove(elem, \"fxshow\");\r\n                    for (prop in orig) {\r\n                        jQuery.style(elem, prop, orig[prop]);\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Per-property setup\r\n            propTween = createTween(hidden ? dataShow[prop] : 0, prop, anim);\r\n            if (!(prop in dataShow)) {\r\n                dataShow[prop] = propTween.start;\r\n                if (hidden) {\r\n                    propTween.end = propTween.start;\r\n                    propTween.start = 0;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function propFilter(props, specialEasing) {\r\n        var index, name, easing, value, hooks;\r\n\r\n        // camelCase, specialEasing and expand cssHook pass\r\n        for (index in props) {\r\n            name = camelCase(index);\r\n            easing = specialEasing[name];\r\n            value = props[index];\r\n            if (Array.isArray(value)) {\r\n                easing = value[1];\r\n                value = props[index] = value[0];\r\n            }\r\n\r\n            if (index !== name) {\r\n                props[name] = value;\r\n                delete props[index];\r\n            }\r\n\r\n            hooks = jQuery.cssHooks[name];\r\n            if (hooks && \"expand\" in hooks) {\r\n                value = hooks.expand(value);\r\n                delete props[name];\r\n\r\n                // Not quite $.extend, this won't overwrite existing keys.\r\n                // Reusing 'index' because we have the correct \"name\"\r\n                for (index in value) {\r\n                    if (!(index in props)) {\r\n                        props[index] = value[index];\r\n                        specialEasing[index] = easing;\r\n                    }\r\n                }\r\n            } else {\r\n                specialEasing[name] = easing;\r\n            }\r\n        }\r\n    }\r\n\r\n    function Animation(elem, properties, options) {\r\n        var result,\r\n            stopped,\r\n            index = 0,\r\n            length = Animation.prefilters.length,\r\n            deferred = jQuery.Deferred().always(function () {\r\n\r\n                // Don't match elem in the :animated selector\r\n                delete tick.elem;\r\n            }),\r\n            tick = function () {\r\n                if (stopped) {\r\n                    return false;\r\n                }\r\n                var currentTime = fxNow || createFxNow(),\r\n                    remaining = Math.max(0, animation.startTime + animation.duration - currentTime),\r\n\r\n                    // Support: Android 2.3 only\r\n                    // Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\r\n                    temp = remaining / animation.duration || 0,\r\n                    percent = 1 - temp,\r\n                    index = 0,\r\n                    length = animation.tweens.length;\r\n\r\n                for (; index < length; index++) {\r\n                    animation.tweens[index].run(percent);\r\n                }\r\n\r\n                deferred.notifyWith(elem, [animation, percent, remaining]);\r\n\r\n                // If there's more to do, yield\r\n                if (percent < 1 && length) {\r\n                    return remaining;\r\n                }\r\n\r\n                // If this was an empty animation, synthesize a final progress notification\r\n                if (!length) {\r\n                    deferred.notifyWith(elem, [animation, 1, 0]);\r\n                }\r\n\r\n                // Resolve the animation and report its conclusion\r\n                deferred.resolveWith(elem, [animation]);\r\n                return false;\r\n            },\r\n            animation = deferred.promise({\r\n                elem: elem,\r\n                props: jQuery.extend({}, properties),\r\n                opts: jQuery.extend(true, {\r\n                    specialEasing: {},\r\n                    easing: jQuery.easing._default\r\n                }, options),\r\n                originalProperties: properties,\r\n                originalOptions: options,\r\n                startTime: fxNow || createFxNow(),\r\n                duration: options.duration,\r\n                tweens: [],\r\n                createTween: function (prop, end) {\r\n                    var tween = jQuery.Tween(elem, animation.opts, prop, end,\r\n                        animation.opts.specialEasing[prop] || animation.opts.easing);\r\n                    animation.tweens.push(tween);\r\n                    return tween;\r\n                },\r\n                stop: function (gotoEnd) {\r\n                    var index = 0,\r\n\r\n                        // If we are going to the end, we want to run all the tweens\r\n                        // otherwise we skip this part\r\n                        length = gotoEnd ? animation.tweens.length : 0;\r\n                    if (stopped) {\r\n                        return this;\r\n                    }\r\n                    stopped = true;\r\n                    for (; index < length; index++) {\r\n                        animation.tweens[index].run(1);\r\n                    }\r\n\r\n                    // Resolve when we played the last frame; otherwise, reject\r\n                    if (gotoEnd) {\r\n                        deferred.notifyWith(elem, [animation, 1, 0]);\r\n                        deferred.resolveWith(elem, [animation, gotoEnd]);\r\n                    } else {\r\n                        deferred.rejectWith(elem, [animation, gotoEnd]);\r\n                    }\r\n                    return this;\r\n                }\r\n            }),\r\n            props = animation.props;\r\n\r\n        propFilter(props, animation.opts.specialEasing);\r\n\r\n        for (; index < length; index++) {\r\n            result = Animation.prefilters[index].call(animation, elem, props, animation.opts);\r\n            if (result) {\r\n                if (isFunction(result.stop)) {\r\n                    jQuery._queueHooks(animation.elem, animation.opts.queue).stop =\r\n                        result.stop.bind(result);\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n\r\n        jQuery.map(props, createTween, animation);\r\n\r\n        if (isFunction(animation.opts.start)) {\r\n            animation.opts.start.call(elem, animation);\r\n        }\r\n\r\n        // Attach callbacks from options\r\n        animation\r\n            .progress(animation.opts.progress)\r\n            .done(animation.opts.done, animation.opts.complete)\r\n            .fail(animation.opts.fail)\r\n            .always(animation.opts.always);\r\n\r\n        jQuery.fx.timer(\r\n            jQuery.extend(tick, {\r\n                elem: elem,\r\n                anim: animation,\r\n                queue: animation.opts.queue\r\n            })\r\n        );\r\n\r\n        return animation;\r\n    }\r\n\r\n    jQuery.Animation = jQuery.extend(Animation, {\r\n\r\n        tweeners: {\r\n            \"*\": [function (prop, value) {\r\n                var tween = this.createTween(prop, value);\r\n                adjustCSS(tween.elem, prop, rcssNum.exec(value), tween);\r\n                return tween;\r\n            }]\r\n        },\r\n\r\n        tweener: function (props, callback) {\r\n            if (isFunction(props)) {\r\n                callback = props;\r\n                props = [\"*\"];\r\n            } else {\r\n                props = props.match(rnothtmlwhite);\r\n            }\r\n\r\n            var prop,\r\n                index = 0,\r\n                length = props.length;\r\n\r\n            for (; index < length; index++) {\r\n                prop = props[index];\r\n                Animation.tweeners[prop] = Animation.tweeners[prop] || [];\r\n                Animation.tweeners[prop].unshift(callback);\r\n            }\r\n        },\r\n\r\n        prefilters: [defaultPrefilter],\r\n\r\n        prefilter: function (callback, prepend) {\r\n            if (prepend) {\r\n                Animation.prefilters.unshift(callback);\r\n            } else {\r\n                Animation.prefilters.push(callback);\r\n            }\r\n        }\r\n    });\r\n\r\n    jQuery.speed = function (speed, easing, fn) {\r\n        var opt = speed && typeof speed === \"object\" ? jQuery.extend({}, speed) : {\r\n            complete: fn || !fn && easing ||\r\n                isFunction(speed) && speed,\r\n            duration: speed,\r\n            easing: fn && easing || easing && !isFunction(easing) && easing\r\n        };\r\n\r\n        // Go to the end state if fx are off\r\n        if (jQuery.fx.off) {\r\n            opt.duration = 0;\r\n\r\n        } else {\r\n            if (typeof opt.duration !== \"number\") {\r\n                if (opt.duration in jQuery.fx.speeds) {\r\n                    opt.duration = jQuery.fx.speeds[opt.duration];\r\n\r\n                } else {\r\n                    opt.duration = jQuery.fx.speeds._default;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Normalize opt.queue - true/undefined/null -> \"fx\"\r\n        if (opt.queue == null || opt.queue === true) {\r\n            opt.queue = \"fx\";\r\n        }\r\n\r\n        // Queueing\r\n        opt.old = opt.complete;\r\n\r\n        opt.complete = function () {\r\n            if (isFunction(opt.old)) {\r\n                opt.old.call(this);\r\n            }\r\n\r\n            if (opt.queue) {\r\n                jQuery.dequeue(this, opt.queue);\r\n            }\r\n        };\r\n\r\n        return opt;\r\n    };\r\n\r\n    jQuery.fn.extend({\r\n        fadeTo: function (speed, to, easing, callback) {\r\n\r\n            // Show any hidden elements after setting opacity to 0\r\n            return this.filter(isHiddenWithinTree).css(\"opacity\", 0).show()\r\n\r\n                // Animate to the value specified\r\n                .end().animate({ opacity: to }, speed, easing, callback);\r\n        },\r\n        animate: function (prop, speed, easing, callback) {\r\n            var empty = jQuery.isEmptyObject(prop),\r\n                optall = jQuery.speed(speed, easing, callback),\r\n                doAnimation = function () {\r\n\r\n                    // Operate on a copy of prop so per-property easing won't be lost\r\n                    var anim = Animation(this, jQuery.extend({}, prop), optall);\r\n\r\n                    // Empty animations, or finishing resolves immediately\r\n                    if (empty || dataPriv.get(this, \"finish\")) {\r\n                        anim.stop(true);\r\n                    }\r\n                };\r\n            doAnimation.finish = doAnimation;\r\n\r\n            return empty || optall.queue === false ?\r\n                this.each(doAnimation) :\r\n                this.queue(optall.queue, doAnimation);\r\n        },\r\n        stop: function (type, clearQueue, gotoEnd) {\r\n            var stopQueue = function (hooks) {\r\n                var stop = hooks.stop;\r\n                delete hooks.stop;\r\n                stop(gotoEnd);\r\n            };\r\n\r\n            if (typeof type !== \"string\") {\r\n                gotoEnd = clearQueue;\r\n                clearQueue = type;\r\n                type = undefined;\r\n            }\r\n            if (clearQueue) {\r\n                this.queue(type || \"fx\", []);\r\n            }\r\n\r\n            return this.each(function () {\r\n                var dequeue = true,\r\n                    index = type != null && type + \"queueHooks\",\r\n                    timers = jQuery.timers,\r\n                    data = dataPriv.get(this);\r\n\r\n                if (index) {\r\n                    if (data[index] && data[index].stop) {\r\n                        stopQueue(data[index]);\r\n                    }\r\n                } else {\r\n                    for (index in data) {\r\n                        if (data[index] && data[index].stop && rrun.test(index)) {\r\n                            stopQueue(data[index]);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                for (index = timers.length; index--;) {\r\n                    if (timers[index].elem === this &&\r\n                        (type == null || timers[index].queue === type)) {\r\n\r\n                        timers[index].anim.stop(gotoEnd);\r\n                        dequeue = false;\r\n                        timers.splice(index, 1);\r\n                    }\r\n                }\r\n\r\n                // Start the next in the queue if the last step wasn't forced.\r\n                // Timers currently will call their complete callbacks, which\r\n                // will dequeue but only if they were gotoEnd.\r\n                if (dequeue || !gotoEnd) {\r\n                    jQuery.dequeue(this, type);\r\n                }\r\n            });\r\n        },\r\n        finish: function (type) {\r\n            if (type !== false) {\r\n                type = type || \"fx\";\r\n            }\r\n            return this.each(function () {\r\n                var index,\r\n                    data = dataPriv.get(this),\r\n                    queue = data[type + \"queue\"],\r\n                    hooks = data[type + \"queueHooks\"],\r\n                    timers = jQuery.timers,\r\n                    length = queue ? queue.length : 0;\r\n\r\n                // Enable finishing flag on private data\r\n                data.finish = true;\r\n\r\n                // Empty the queue first\r\n                jQuery.queue(this, type, []);\r\n\r\n                if (hooks && hooks.stop) {\r\n                    hooks.stop.call(this, true);\r\n                }\r\n\r\n                // Look for any active animations, and finish them\r\n                for (index = timers.length; index--;) {\r\n                    if (timers[index].elem === this && timers[index].queue === type) {\r\n                        timers[index].anim.stop(true);\r\n                        timers.splice(index, 1);\r\n                    }\r\n                }\r\n\r\n                // Look for any animations in the old queue and finish them\r\n                for (index = 0; index < length; index++) {\r\n                    if (queue[index] && queue[index].finish) {\r\n                        queue[index].finish.call(this);\r\n                    }\r\n                }\r\n\r\n                // Turn off finishing flag\r\n                delete data.finish;\r\n            });\r\n        }\r\n    });\r\n\r\n    jQuery.each([\"toggle\", \"show\", \"hide\"], function (_i, name) {\r\n        var cssFn = jQuery.fn[name];\r\n        jQuery.fn[name] = function (speed, easing, callback) {\r\n            return speed == null || typeof speed === \"boolean\" ?\r\n                cssFn.apply(this, arguments) :\r\n                this.animate(genFx(name, true), speed, easing, callback);\r\n        };\r\n    });\r\n\r\n    // Generate shortcuts for custom animations\r\n    jQuery.each({\r\n        slideDown: genFx(\"show\"),\r\n        slideUp: genFx(\"hide\"),\r\n        slideToggle: genFx(\"toggle\"),\r\n        fadeIn: { opacity: \"show\" },\r\n        fadeOut: { opacity: \"hide\" },\r\n        fadeToggle: { opacity: \"toggle\" }\r\n    }, function (name, props) {\r\n        jQuery.fn[name] = function (speed, easing, callback) {\r\n            return this.animate(props, speed, easing, callback);\r\n        };\r\n    });\r\n\r\n    jQuery.timers = [];\r\n    jQuery.fx.tick = function () {\r\n        var timer,\r\n            i = 0,\r\n            timers = jQuery.timers;\r\n\r\n        fxNow = Date.now();\r\n\r\n        for (; i < timers.length; i++) {\r\n            timer = timers[i];\r\n\r\n            // Run the timer and safely remove it when done (allowing for external removal)\r\n            if (!timer() && timers[i] === timer) {\r\n                timers.splice(i--, 1);\r\n            }\r\n        }\r\n\r\n        if (!timers.length) {\r\n            jQuery.fx.stop();\r\n        }\r\n        fxNow = undefined;\r\n    };\r\n\r\n    jQuery.fx.timer = function (timer) {\r\n        jQuery.timers.push(timer);\r\n        jQuery.fx.start();\r\n    };\r\n\r\n    jQuery.fx.interval = 13;\r\n    jQuery.fx.start = function () {\r\n        if (inProgress) {\r\n            return;\r\n        }\r\n\r\n        inProgress = true;\r\n        schedule();\r\n    };\r\n\r\n    jQuery.fx.stop = function () {\r\n        inProgress = null;\r\n    };\r\n\r\n    jQuery.fx.speeds = {\r\n        slow: 600,\r\n        fast: 200,\r\n\r\n        // Default speed\r\n        _default: 400\r\n    };\r\n\r\n\r\n    // Based off of the plugin by Clint Helfers, with permission.\r\n    // https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\r\n    jQuery.fn.delay = function (time, type) {\r\n        time = jQuery.fx ? jQuery.fx.speeds[time] || time : time;\r\n        type = type || \"fx\";\r\n\r\n        return this.queue(type, function (next, hooks) {\r\n            var timeout = window.setTimeout(next, time);\r\n            hooks.stop = function () {\r\n                window.clearTimeout(timeout);\r\n            };\r\n        });\r\n    };\r\n\r\n\r\n    (function () {\r\n        var input = document.createElement(\"input\"),\r\n            select = document.createElement(\"select\"),\r\n            opt = select.appendChild(document.createElement(\"option\"));\r\n\r\n        input.type = \"checkbox\";\r\n\r\n        // Support: Android <=4.3 only\r\n        // Default value for a checkbox should be \"on\"\r\n        support.checkOn = input.value !== \"\";\r\n\r\n        // Support: IE <=11 only\r\n        // Must access selectedIndex to make default options select\r\n        support.optSelected = opt.selected;\r\n\r\n        // Support: IE <=11 only\r\n        // An input loses its value after becoming a radio\r\n        input = document.createElement(\"input\");\r\n        input.value = \"t\";\r\n        input.type = \"radio\";\r\n        support.radioValue = input.value === \"t\";\r\n    })();\r\n\r\n\r\n    var boolHook,\r\n        attrHandle = jQuery.expr.attrHandle;\r\n\r\n    jQuery.fn.extend({\r\n        attr: function (name, value) {\r\n            return access(this, jQuery.attr, name, value, arguments.length > 1);\r\n        },\r\n\r\n        removeAttr: function (name) {\r\n            return this.each(function () {\r\n                jQuery.removeAttr(this, name);\r\n            });\r\n        }\r\n    });\r\n\r\n    jQuery.extend({\r\n        attr: function (elem, name, value) {\r\n            var ret, hooks,\r\n                nType = elem.nodeType;\r\n\r\n            // Don't get/set attributes on text, comment and attribute nodes\r\n            if (nType === 3 || nType === 8 || nType === 2) {\r\n                return;\r\n            }\r\n\r\n            // Fallback to prop when attributes are not supported\r\n            if (typeof elem.getAttribute === \"undefined\") {\r\n                return jQuery.prop(elem, name, value);\r\n            }\r\n\r\n            // Attribute hooks are determined by the lowercase version\r\n            // Grab necessary hook if one is defined\r\n            if (nType !== 1 || !jQuery.isXMLDoc(elem)) {\r\n                hooks = jQuery.attrHooks[name.toLowerCase()] ||\r\n                    (jQuery.expr.match.bool.test(name) ? boolHook : undefined);\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                if (value === null) {\r\n                    jQuery.removeAttr(elem, name);\r\n                    return;\r\n                }\r\n\r\n                if (hooks && \"set\" in hooks &&\r\n                    (ret = hooks.set(elem, value, name)) !== undefined) {\r\n                    return ret;\r\n                }\r\n\r\n                elem.setAttribute(name, value + \"\");\r\n                return value;\r\n            }\r\n\r\n            if (hooks && \"get\" in hooks && (ret = hooks.get(elem, name)) !== null) {\r\n                return ret;\r\n            }\r\n\r\n            ret = jQuery.find.attr(elem, name);\r\n\r\n            // Non-existent attributes return null, we normalize to undefined\r\n            return ret == null ? undefined : ret;\r\n        },\r\n\r\n        attrHooks: {\r\n            type: {\r\n                set: function (elem, value) {\r\n                    if (!support.radioValue && value === \"radio\" &&\r\n                        nodeName(elem, \"input\")) {\r\n                        var val = elem.value;\r\n                        elem.setAttribute(\"type\", value);\r\n                        if (val) {\r\n                            elem.value = val;\r\n                        }\r\n                        return value;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        removeAttr: function (elem, value) {\r\n            var name,\r\n                i = 0,\r\n\r\n                // Attribute names can contain non-HTML whitespace characters\r\n                // https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\r\n                attrNames = value && value.match(rnothtmlwhite);\r\n\r\n            if (attrNames && elem.nodeType === 1) {\r\n                while ((name = attrNames[i++])) {\r\n                    elem.removeAttribute(name);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // Hooks for boolean attributes\r\n    boolHook = {\r\n        set: function (elem, value, name) {\r\n            if (value === false) {\r\n\r\n                // Remove boolean attributes when set to false\r\n                jQuery.removeAttr(elem, name);\r\n            } else {\r\n                elem.setAttribute(name, name);\r\n            }\r\n            return name;\r\n        }\r\n    };\r\n\r\n    jQuery.each(jQuery.expr.match.bool.source.match(/\\w+/g), function (_i, name) {\r\n        var getter = attrHandle[name] || jQuery.find.attr;\r\n\r\n        attrHandle[name] = function (elem, name, isXML) {\r\n            var ret, handle,\r\n                lowercaseName = name.toLowerCase();\r\n\r\n            if (!isXML) {\r\n\r\n                // Avoid an infinite loop by temporarily removing this function from the getter\r\n                handle = attrHandle[lowercaseName];\r\n                attrHandle[lowercaseName] = ret;\r\n                ret = getter(elem, name, isXML) != null ?\r\n                    lowercaseName :\r\n                    null;\r\n                attrHandle[lowercaseName] = handle;\r\n            }\r\n            return ret;\r\n        };\r\n    });\r\n\r\n\r\n\r\n\r\n    var rfocusable = /^(?:input|select|textarea|button)$/i,\r\n        rclickable = /^(?:a|area)$/i;\r\n\r\n    jQuery.fn.extend({\r\n        prop: function (name, value) {\r\n            return access(this, jQuery.prop, name, value, arguments.length > 1);\r\n        },\r\n\r\n        removeProp: function (name) {\r\n            return this.each(function () {\r\n                delete this[jQuery.propFix[name] || name];\r\n            });\r\n        }\r\n    });\r\n\r\n    jQuery.extend({\r\n        prop: function (elem, name, value) {\r\n            var ret, hooks,\r\n                nType = elem.nodeType;\r\n\r\n            // Don't get/set properties on text, comment and attribute nodes\r\n            if (nType === 3 || nType === 8 || nType === 2) {\r\n                return;\r\n            }\r\n\r\n            if (nType !== 1 || !jQuery.isXMLDoc(elem)) {\r\n\r\n                // Fix name and attach hooks\r\n                name = jQuery.propFix[name] || name;\r\n                hooks = jQuery.propHooks[name];\r\n            }\r\n\r\n            if (value !== undefined) {\r\n                if (hooks && \"set\" in hooks &&\r\n                    (ret = hooks.set(elem, value, name)) !== undefined) {\r\n                    return ret;\r\n                }\r\n\r\n                return (elem[name] = value);\r\n            }\r\n\r\n            if (hooks && \"get\" in hooks && (ret = hooks.get(elem, name)) !== null) {\r\n                return ret;\r\n            }\r\n\r\n            return elem[name];\r\n        },\r\n\r\n        propHooks: {\r\n            tabIndex: {\r\n                get: function (elem) {\r\n\r\n                    // Support: IE <=9 - 11 only\r\n                    // elem.tabIndex doesn't always return the\r\n                    // correct value when it hasn't been explicitly set\r\n                    // https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\r\n                    // Use proper attribute retrieval(#12072)\r\n                    var tabindex = jQuery.find.attr(elem, \"tabindex\");\r\n\r\n                    if (tabindex) {\r\n                        return parseInt(tabindex, 10);\r\n                    }\r\n\r\n                    if (\r\n                        rfocusable.test(elem.nodeName) ||\r\n                        rclickable.test(elem.nodeName) &&\r\n                        elem.href\r\n                    ) {\r\n                        return 0;\r\n                    }\r\n\r\n                    return -1;\r\n                }\r\n            }\r\n        },\r\n\r\n        propFix: {\r\n            \"for\": \"htmlFor\",\r\n            \"class\": \"className\"\r\n        }\r\n    });\r\n\r\n    // Support: IE <=11 only\r\n    // Accessing the selectedIndex property\r\n    // forces the browser to respect setting selected\r\n    // on the option\r\n    // The getter ensures a default option is selected\r\n    // when in an optgroup\r\n    // eslint rule \"no-unused-expressions\" is disabled for this code\r\n    // since it considers such accessions noop\r\n    if (!support.optSelected) {\r\n        jQuery.propHooks.selected = {\r\n            get: function (elem) {\r\n\r\n                /* eslint no-unused-expressions: \"off\" */\r\n\r\n                var parent = elem.parentNode;\r\n                if (parent && parent.parentNode) {\r\n                    parent.parentNode.selectedIndex;\r\n                }\r\n                return null;\r\n            },\r\n            set: function (elem) {\r\n\r\n                /* eslint no-unused-expressions: \"off\" */\r\n\r\n                var parent = elem.parentNode;\r\n                if (parent) {\r\n                    parent.selectedIndex;\r\n\r\n                    if (parent.parentNode) {\r\n                        parent.parentNode.selectedIndex;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    jQuery.each([\r\n        \"tabIndex\",\r\n        \"readOnly\",\r\n        \"maxLength\",\r\n        \"cellSpacing\",\r\n        \"cellPadding\",\r\n        \"rowSpan\",\r\n        \"colSpan\",\r\n        \"useMap\",\r\n        \"frameBorder\",\r\n        \"contentEditable\"\r\n    ], function () {\r\n        jQuery.propFix[this.toLowerCase()] = this;\r\n    });\r\n\r\n\r\n\r\n\r\n    // Strip and collapse whitespace according to HTML spec\r\n    // https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\r\n    function stripAndCollapse(value) {\r\n        var tokens = value.match(rnothtmlwhite) || [];\r\n        return tokens.join(\" \");\r\n    }\r\n\r\n\r\n    function getClass(elem) {\r\n        return elem.getAttribute && elem.getAttribute(\"class\") || \"\";\r\n    }\r\n\r\n    function classesToArray(value) {\r\n        if (Array.isArray(value)) {\r\n            return value;\r\n        }\r\n        if (typeof value === \"string\") {\r\n            return value.match(rnothtmlwhite) || [];\r\n        }\r\n        return [];\r\n    }\r\n\r\n    jQuery.fn.extend({\r\n        addClass: function (value) {\r\n            var classes, elem, cur, curValue, clazz, j, finalValue,\r\n                i = 0;\r\n\r\n            if (isFunction(value)) {\r\n                return this.each(function (j) {\r\n                    jQuery(this).addClass(value.call(this, j, getClass(this)));\r\n                });\r\n            }\r\n\r\n            classes = classesToArray(value);\r\n\r\n            if (classes.length) {\r\n                while ((elem = this[i++])) {\r\n                    curValue = getClass(elem);\r\n                    cur = elem.nodeType === 1 && (\" \" + stripAndCollapse(curValue) + \" \");\r\n\r\n                    if (cur) {\r\n                        j = 0;\r\n                        while ((clazz = classes[j++])) {\r\n                            if (cur.indexOf(\" \" + clazz + \" \") < 0) {\r\n                                cur += clazz + \" \";\r\n                            }\r\n                        }\r\n\r\n                        // Only assign if different to avoid unneeded rendering.\r\n                        finalValue = stripAndCollapse(cur);\r\n                        if (curValue !== finalValue) {\r\n                            elem.setAttribute(\"class\", finalValue);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        removeClass: function (value) {\r\n            var classes, elem, cur, curValue, clazz, j, finalValue,\r\n                i = 0;\r\n\r\n            if (isFunction(value)) {\r\n                return this.each(function (j) {\r\n                    jQuery(this).removeClass(value.call(this, j, getClass(this)));\r\n                });\r\n            }\r\n\r\n            if (!arguments.length) {\r\n                return this.attr(\"class\", \"\");\r\n            }\r\n\r\n            classes = classesToArray(value);\r\n\r\n            if (classes.length) {\r\n                while ((elem = this[i++])) {\r\n                    curValue = getClass(elem);\r\n\r\n                    // This expression is here for better compressibility (see addClass)\r\n                    cur = elem.nodeType === 1 && (\" \" + stripAndCollapse(curValue) + \" \");\r\n\r\n                    if (cur) {\r\n                        j = 0;\r\n                        while ((clazz = classes[j++])) {\r\n\r\n                            // Remove *all* instances\r\n                            while (cur.indexOf(\" \" + clazz + \" \") > -1) {\r\n                                cur = cur.replace(\" \" + clazz + \" \", \" \");\r\n                            }\r\n                        }\r\n\r\n                        // Only assign if different to avoid unneeded rendering.\r\n                        finalValue = stripAndCollapse(cur);\r\n                        if (curValue !== finalValue) {\r\n                            elem.setAttribute(\"class\", finalValue);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        toggleClass: function (value, stateVal) {\r\n            var type = typeof value,\r\n                isValidValue = type === \"string\" || Array.isArray(value);\r\n\r\n            if (typeof stateVal === \"boolean\" && isValidValue) {\r\n                return stateVal ? this.addClass(value) : this.removeClass(value);\r\n            }\r\n\r\n            if (isFunction(value)) {\r\n                return this.each(function (i) {\r\n                    jQuery(this).toggleClass(\r\n                        value.call(this, i, getClass(this), stateVal),\r\n                        stateVal\r\n                    );\r\n                });\r\n            }\r\n\r\n            return this.each(function () {\r\n                var className, i, self, classNames;\r\n\r\n                if (isValidValue) {\r\n\r\n                    // Toggle individual class names\r\n                    i = 0;\r\n                    self = jQuery(this);\r\n                    classNames = classesToArray(value);\r\n\r\n                    while ((className = classNames[i++])) {\r\n\r\n                        // Check each className given, space separated list\r\n                        if (self.hasClass(className)) {\r\n                            self.removeClass(className);\r\n                        } else {\r\n                            self.addClass(className);\r\n                        }\r\n                    }\r\n\r\n                    // Toggle whole class name\r\n                } else if (value === undefined || type === \"boolean\") {\r\n                    className = getClass(this);\r\n                    if (className) {\r\n\r\n                        // Store className if set\r\n                        dataPriv.set(this, \"__className__\", className);\r\n                    }\r\n\r\n                    // If the element has a class name or if we're passed `false`,\r\n                    // then remove the whole classname (if there was one, the above saved it).\r\n                    // Otherwise bring back whatever was previously saved (if anything),\r\n                    // falling back to the empty string if nothing was stored.\r\n                    if (this.setAttribute) {\r\n                        this.setAttribute(\"class\",\r\n                            className || value === false ?\r\n                                \"\" :\r\n                                dataPriv.get(this, \"__className__\") || \"\"\r\n                        );\r\n                    }\r\n                }\r\n            });\r\n        },\r\n\r\n        hasClass: function (selector) {\r\n            var className, elem,\r\n                i = 0;\r\n\r\n            className = \" \" + selector + \" \";\r\n            while ((elem = this[i++])) {\r\n                if (elem.nodeType === 1 &&\r\n                    (\" \" + stripAndCollapse(getClass(elem)) + \" \").indexOf(className) > -1) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n    var rreturn = /\\r/g;\r\n\r\n    jQuery.fn.extend({\r\n        val: function (value) {\r\n            var hooks, ret, valueIsFunction,\r\n                elem = this[0];\r\n\r\n            if (!arguments.length) {\r\n                if (elem) {\r\n                    hooks = jQuery.valHooks[elem.type] ||\r\n                        jQuery.valHooks[elem.nodeName.toLowerCase()];\r\n\r\n                    if (hooks &&\r\n                        \"get\" in hooks &&\r\n                        (ret = hooks.get(elem, \"value\")) !== undefined\r\n                    ) {\r\n                        return ret;\r\n                    }\r\n\r\n                    ret = elem.value;\r\n\r\n                    // Handle most common string cases\r\n                    if (typeof ret === \"string\") {\r\n                        return ret.replace(rreturn, \"\");\r\n                    }\r\n\r\n                    // Handle cases where value is null/undef or number\r\n                    return ret == null ? \"\" : ret;\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            valueIsFunction = isFunction(value);\r\n\r\n            return this.each(function (i) {\r\n                var val;\r\n\r\n                if (this.nodeType !== 1) {\r\n                    return;\r\n                }\r\n\r\n                if (valueIsFunction) {\r\n                    val = value.call(this, i, jQuery(this).val());\r\n                } else {\r\n                    val = value;\r\n                }\r\n\r\n                // Treat null/undefined as \"\"; convert numbers to string\r\n                if (val == null) {\r\n                    val = \"\";\r\n\r\n                } else if (typeof val === \"number\") {\r\n                    val += \"\";\r\n\r\n                } else if (Array.isArray(val)) {\r\n                    val = jQuery.map(val, function (value) {\r\n                        return value == null ? \"\" : value + \"\";\r\n                    });\r\n                }\r\n\r\n                hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];\r\n\r\n                // If set returns undefined, fall back to normal setting\r\n                if (!hooks || !(\"set\" in hooks) || hooks.set(this, val, \"value\") === undefined) {\r\n                    this.value = val;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    jQuery.extend({\r\n        valHooks: {\r\n            option: {\r\n                get: function (elem) {\r\n\r\n                    var val = jQuery.find.attr(elem, \"value\");\r\n                    return val != null ?\r\n                        val :\r\n\r\n                        // Support: IE <=10 - 11 only\r\n                        // option.text throws exceptions (#14686, #14858)\r\n                        // Strip and collapse whitespace\r\n                        // https://html.spec.whatwg.org/#strip-and-collapse-whitespace\r\n                        stripAndCollapse(jQuery.text(elem));\r\n                }\r\n            },\r\n            select: {\r\n                get: function (elem) {\r\n                    var value, option, i,\r\n                        options = elem.options,\r\n                        index = elem.selectedIndex,\r\n                        one = elem.type === \"select-one\",\r\n                        values = one ? null : [],\r\n                        max = one ? index + 1 : options.length;\r\n\r\n                    if (index < 0) {\r\n                        i = max;\r\n\r\n                    } else {\r\n                        i = one ? index : 0;\r\n                    }\r\n\r\n                    // Loop through all the selected options\r\n                    for (; i < max; i++) {\r\n                        option = options[i];\r\n\r\n                        // Support: IE <=9 only\r\n                        // IE8-9 doesn't update selected after form reset (#2551)\r\n                        if ((option.selected || i === index) &&\r\n\r\n                            // Don't return options that are disabled or in a disabled optgroup\r\n                            !option.disabled &&\r\n                            (!option.parentNode.disabled ||\r\n                                !nodeName(option.parentNode, \"optgroup\"))) {\r\n\r\n                            // Get the specific value for the option\r\n                            value = jQuery(option).val();\r\n\r\n                            // We don't need an array for one selects\r\n                            if (one) {\r\n                                return value;\r\n                            }\r\n\r\n                            // Multi-Selects return an array\r\n                            values.push(value);\r\n                        }\r\n                    }\r\n\r\n                    return values;\r\n                },\r\n\r\n                set: function (elem, value) {\r\n                    var optionSet, option,\r\n                        options = elem.options,\r\n                        values = jQuery.makeArray(value),\r\n                        i = options.length;\r\n\r\n                    while (i--) {\r\n                        option = options[i];\r\n\r\n                        /* eslint-disable no-cond-assign */\r\n\r\n                        if (option.selected =\r\n                            jQuery.inArray(jQuery.valHooks.option.get(option), values) > -1\r\n                        ) {\r\n                            optionSet = true;\r\n                        }\r\n\r\n                        /* eslint-enable no-cond-assign */\r\n                    }\r\n\r\n                    // Force browsers to behave consistently when non-matching value is set\r\n                    if (!optionSet) {\r\n                        elem.selectedIndex = -1;\r\n                    }\r\n                    return values;\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // Radios and checkboxes getter/setter\r\n    jQuery.each([\"radio\", \"checkbox\"], function () {\r\n        jQuery.valHooks[this] = {\r\n            set: function (elem, value) {\r\n                if (Array.isArray(value)) {\r\n                    return (elem.checked = jQuery.inArray(jQuery(elem).val(), value) > -1);\r\n                }\r\n            }\r\n        };\r\n        if (!support.checkOn) {\r\n            jQuery.valHooks[this].get = function (elem) {\r\n                return elem.getAttribute(\"value\") === null ? \"on\" : elem.value;\r\n            };\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n    // Return jQuery for attributes-only inclusion\r\n\r\n\r\n    support.focusin = \"onfocusin\" in window;\r\n\r\n\r\n    var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\r\n        stopPropagationCallback = function (e) {\r\n            e.stopPropagation();\r\n        };\r\n\r\n    jQuery.extend(jQuery.event, {\r\n\r\n        trigger: function (event, data, elem, onlyHandlers) {\r\n\r\n            var i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\r\n                eventPath = [elem || document],\r\n                type = hasOwn.call(event, \"type\") ? event.type : event,\r\n                namespaces = hasOwn.call(event, \"namespace\") ? event.namespace.split(\".\") : [];\r\n\r\n            cur = lastElement = tmp = elem = elem || document;\r\n\r\n            // Don't do events on text and comment nodes\r\n            if (elem.nodeType === 3 || elem.nodeType === 8) {\r\n                return;\r\n            }\r\n\r\n            // focus/blur morphs to focusin/out; ensure we're not firing them right now\r\n            if (rfocusMorph.test(type + jQuery.event.triggered)) {\r\n                return;\r\n            }\r\n\r\n            if (type.indexOf(\".\") > -1) {\r\n\r\n                // Namespaced trigger; create a regexp to match event type in handle()\r\n                namespaces = type.split(\".\");\r\n                type = namespaces.shift();\r\n                namespaces.sort();\r\n            }\r\n            ontype = type.indexOf(\":\") < 0 && \"on\" + type;\r\n\r\n            // Caller can pass in a jQuery.Event object, Object, or just an event type string\r\n            event = event[jQuery.expando] ?\r\n                event :\r\n                new jQuery.Event(type, typeof event === \"object\" && event);\r\n\r\n            // Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\r\n            event.isTrigger = onlyHandlers ? 2 : 3;\r\n            event.namespace = namespaces.join(\".\");\r\n            event.rnamespace = event.namespace ?\r\n                new RegExp(\"(^|\\\\.)\" + namespaces.join(\"\\\\.(?:.*\\\\.|)\") + \"(\\\\.|$)\") :\r\n                null;\r\n\r\n            // Clean up the event in case it is being reused\r\n            event.result = undefined;\r\n            if (!event.target) {\r\n                event.target = elem;\r\n            }\r\n\r\n            // Clone any incoming data and prepend the event, creating the handler arg list\r\n            data = data == null ?\r\n                [event] :\r\n                jQuery.makeArray(data, [event]);\r\n\r\n            // Allow special events to draw outside the lines\r\n            special = jQuery.event.special[type] || {};\r\n            if (!onlyHandlers && special.trigger && special.trigger.apply(elem, data) === false) {\r\n                return;\r\n            }\r\n\r\n            // Determine event propagation path in advance, per W3C events spec (#9951)\r\n            // Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\r\n            if (!onlyHandlers && !special.noBubble && !isWindow(elem)) {\r\n\r\n                bubbleType = special.delegateType || type;\r\n                if (!rfocusMorph.test(bubbleType + type)) {\r\n                    cur = cur.parentNode;\r\n                }\r\n                for (; cur; cur = cur.parentNode) {\r\n                    eventPath.push(cur);\r\n                    tmp = cur;\r\n                }\r\n\r\n                // Only add window if we got to document (e.g., not plain obj or detached DOM)\r\n                if (tmp === (elem.ownerDocument || document)) {\r\n                    eventPath.push(tmp.defaultView || tmp.parentWindow || window);\r\n                }\r\n            }\r\n\r\n            // Fire handlers on the event path\r\n            i = 0;\r\n            while ((cur = eventPath[i++]) && !event.isPropagationStopped()) {\r\n                lastElement = cur;\r\n                event.type = i > 1 ?\r\n                    bubbleType :\r\n                    special.bindType || type;\r\n\r\n                // jQuery handler\r\n                handle = (\r\n                    dataPriv.get(cur, \"events\") || Object.create(null)\r\n                )[event.type] &&\r\n                    dataPriv.get(cur, \"handle\");\r\n                if (handle) {\r\n                    handle.apply(cur, data);\r\n                }\r\n\r\n                // Native handler\r\n                handle = ontype && cur[ontype];\r\n                if (handle && handle.apply && acceptData(cur)) {\r\n                    event.result = handle.apply(cur, data);\r\n                    if (event.result === false) {\r\n                        event.preventDefault();\r\n                    }\r\n                }\r\n            }\r\n            event.type = type;\r\n\r\n            // If nobody prevented the default action, do it now\r\n            if (!onlyHandlers && !event.isDefaultPrevented()) {\r\n\r\n                if ((!special._default ||\r\n                    special._default.apply(eventPath.pop(), data) === false) &&\r\n                    acceptData(elem)) {\r\n\r\n                    // Call a native DOM method on the target with the same name as the event.\r\n                    // Don't do default actions on window, that's where global variables be (#6170)\r\n                    if (ontype && isFunction(elem[type]) && !isWindow(elem)) {\r\n\r\n                        // Don't re-trigger an onFOO event when we call its FOO() method\r\n                        tmp = elem[ontype];\r\n\r\n                        if (tmp) {\r\n                            elem[ontype] = null;\r\n                        }\r\n\r\n                        // Prevent re-triggering of the same event, since we already bubbled it above\r\n                        jQuery.event.triggered = type;\r\n\r\n                        if (event.isPropagationStopped()) {\r\n                            lastElement.addEventListener(type, stopPropagationCallback);\r\n                        }\r\n\r\n                        elem[type]();\r\n\r\n                        if (event.isPropagationStopped()) {\r\n                            lastElement.removeEventListener(type, stopPropagationCallback);\r\n                        }\r\n\r\n                        jQuery.event.triggered = undefined;\r\n\r\n                        if (tmp) {\r\n                            elem[ontype] = tmp;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return event.result;\r\n        },\r\n\r\n        // Piggyback on a donor event to simulate a different one\r\n        // Used only for `focus(in | out)` events\r\n        simulate: function (type, elem, event) {\r\n            var e = jQuery.extend(\r\n                new jQuery.Event(),\r\n                event,\r\n                {\r\n                    type: type,\r\n                    isSimulated: true\r\n                }\r\n            );\r\n\r\n            jQuery.event.trigger(e, null, elem);\r\n        }\r\n\r\n    });\r\n\r\n    jQuery.fn.extend({\r\n\r\n        trigger: function (type, data) {\r\n            return this.each(function () {\r\n                jQuery.event.trigger(type, data, this);\r\n            });\r\n        },\r\n        triggerHandler: function (type, data) {\r\n            var elem = this[0];\r\n            if (elem) {\r\n                return jQuery.event.trigger(type, data, elem, true);\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    // Support: Firefox <=44\r\n    // Firefox doesn't have focus(in | out) events\r\n    // Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\r\n    //\r\n    // Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\r\n    // focus(in | out) events fire after focus & blur events,\r\n    // which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\r\n    // Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\r\n    if (!support.focusin) {\r\n        jQuery.each({ focus: \"focusin\", blur: \"focusout\" }, function (orig, fix) {\r\n\r\n            // Attach a single capturing handler on the document while someone wants focusin/focusout\r\n            var handler = function (event) {\r\n                jQuery.event.simulate(fix, event.target, jQuery.event.fix(event));\r\n            };\r\n\r\n            jQuery.event.special[fix] = {\r\n                setup: function () {\r\n\r\n                    // Handle: regular nodes (via `this.ownerDocument`), window\r\n                    // (via `this.document`) & document (via `this`).\r\n                    var doc = this.ownerDocument || this.document || this,\r\n                        attaches = dataPriv.access(doc, fix);\r\n\r\n                    if (!attaches) {\r\n                        doc.addEventListener(orig, handler, true);\r\n                    }\r\n                    dataPriv.access(doc, fix, (attaches || 0) + 1);\r\n                },\r\n                teardown: function () {\r\n                    var doc = this.ownerDocument || this.document || this,\r\n                        attaches = dataPriv.access(doc, fix) - 1;\r\n\r\n                    if (!attaches) {\r\n                        doc.removeEventListener(orig, handler, true);\r\n                        dataPriv.remove(doc, fix);\r\n\r\n                    } else {\r\n                        dataPriv.access(doc, fix, attaches);\r\n                    }\r\n                }\r\n            };\r\n        });\r\n    }\r\n    var location = window.location;\r\n\r\n    var nonce = { guid: Date.now() };\r\n\r\n    var rquery = (/\\?/);\r\n\r\n\r\n\r\n    // Cross-browser xml parsing\r\n    jQuery.parseXML = function (data) {\r\n        var xml;\r\n        if (!data || typeof data !== \"string\") {\r\n            return null;\r\n        }\r\n\r\n        // Support: IE 9 - 11 only\r\n        // IE throws on parseFromString with invalid input.\r\n        try {\r\n            xml = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n        } catch (e) {\r\n            xml = undefined;\r\n        }\r\n\r\n        if (!xml || xml.getElementsByTagName(\"parsererror\").length) {\r\n            jQuery.error(\"Invalid XML: \" + data);\r\n        }\r\n        return xml;\r\n    };\r\n\r\n\r\n    var\r\n        rbracket = /\\[\\]$/,\r\n        rCRLF = /\\r?\\n/g,\r\n        rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\r\n        rsubmittable = /^(?:input|select|textarea|keygen)/i;\r\n\r\n    function buildParams(prefix, obj, traditional, add) {\r\n        var name;\r\n\r\n        if (Array.isArray(obj)) {\r\n\r\n            // Serialize array item.\r\n            jQuery.each(obj, function (i, v) {\r\n                if (traditional || rbracket.test(prefix)) {\r\n\r\n                    // Treat each array item as a scalar.\r\n                    add(prefix, v);\r\n\r\n                } else {\r\n\r\n                    // Item is non-scalar (array or object), encode its numeric index.\r\n                    buildParams(\r\n                        prefix + \"[\" + (typeof v === \"object\" && v != null ? i : \"\") + \"]\",\r\n                        v,\r\n                        traditional,\r\n                        add\r\n                    );\r\n                }\r\n            });\r\n\r\n        } else if (!traditional && toType(obj) === \"object\") {\r\n\r\n            // Serialize object item.\r\n            for (name in obj) {\r\n                buildParams(prefix + \"[\" + name + \"]\", obj[name], traditional, add);\r\n            }\r\n\r\n        } else {\r\n\r\n            // Serialize scalar item.\r\n            add(prefix, obj);\r\n        }\r\n    }\r\n\r\n    // Serialize an array of form elements or a set of\r\n    // key/values into a query string\r\n    jQuery.param = function (a, traditional) {\r\n        var prefix,\r\n            s = [],\r\n            add = function (key, valueOrFunction) {\r\n\r\n                // If value is a function, invoke it and use its return value\r\n                var value = isFunction(valueOrFunction) ?\r\n                    valueOrFunction() :\r\n                    valueOrFunction;\r\n\r\n                s[s.length] = encodeURIComponent(key) + \"=\" +\r\n                    encodeURIComponent(value == null ? \"\" : value);\r\n            };\r\n\r\n        if (a == null) {\r\n            return \"\";\r\n        }\r\n\r\n        // If an array was passed in, assume that it is an array of form elements.\r\n        if (Array.isArray(a) || (a.jquery && !jQuery.isPlainObject(a))) {\r\n\r\n            // Serialize the form elements\r\n            jQuery.each(a, function () {\r\n                add(this.name, this.value);\r\n            });\r\n\r\n        } else {\r\n\r\n            // If traditional, encode the \"old\" way (the way 1.3.2 or older\r\n            // did it), otherwise encode params recursively.\r\n            for (prefix in a) {\r\n                buildParams(prefix, a[prefix], traditional, add);\r\n            }\r\n        }\r\n\r\n        // Return the resulting serialization\r\n        return s.join(\"&\");\r\n    };\r\n\r\n    jQuery.fn.extend({\r\n        serialize: function () {\r\n            return jQuery.param(this.serializeArray());\r\n        },\r\n        serializeArray: function () {\r\n            return this.map(function () {\r\n\r\n                // Can add propHook for \"elements\" to filter or add form elements\r\n                var elements = jQuery.prop(this, \"elements\");\r\n                return elements ? jQuery.makeArray(elements) : this;\r\n            })\r\n                .filter(function () {\r\n                    var type = this.type;\r\n\r\n                    // Use .is( \":disabled\" ) so that fieldset[disabled] works\r\n                    return this.name && !jQuery(this).is(\":disabled\") &&\r\n                        rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) &&\r\n                        (this.checked || !rcheckableType.test(type));\r\n                })\r\n                .map(function (_i, elem) {\r\n                    var val = jQuery(this).val();\r\n\r\n                    if (val == null) {\r\n                        return null;\r\n                    }\r\n\r\n                    if (Array.isArray(val)) {\r\n                        return jQuery.map(val, function (val) {\r\n                            return { name: elem.name, value: val.replace(rCRLF, \"\\r\\n\") };\r\n                        });\r\n                    }\r\n\r\n                    return { name: elem.name, value: val.replace(rCRLF, \"\\r\\n\") };\r\n                }).get();\r\n        }\r\n    });\r\n\r\n\r\n    var\r\n        r20 = /%20/g,\r\n        rhash = /#.*$/,\r\n        rantiCache = /([?&])_=[^&]*/,\r\n        rheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\r\n\r\n        // #7653, #8125, #8152: local protocol detection\r\n        rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\r\n        rnoContent = /^(?:GET|HEAD)$/,\r\n        rprotocol = /^\\/\\//,\r\n\r\n        /* Prefilters\r\n         * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\r\n         * 2) These are called:\r\n         *    - BEFORE asking for a transport\r\n         *    - AFTER param serialization (s.data is a string if s.processData is true)\r\n         * 3) key is the dataType\r\n         * 4) the catchall symbol \"*\" can be used\r\n         * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\r\n         */\r\n        prefilters = {},\r\n\r\n        /* Transports bindings\r\n         * 1) key is the dataType\r\n         * 2) the catchall symbol \"*\" can be used\r\n         * 3) selection will start with transport dataType and THEN go to \"*\" if needed\r\n         */\r\n        transports = {},\r\n\r\n        // Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\r\n        allTypes = \"*/\".concat(\"*\"),\r\n\r\n        // Anchor tag for parsing the document origin\r\n        originAnchor = document.createElement(\"a\");\r\n    originAnchor.href = location.href;\r\n\r\n    // Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\r\n    function addToPrefiltersOrTransports(structure) {\r\n\r\n        // dataTypeExpression is optional and defaults to \"*\"\r\n        return function (dataTypeExpression, func) {\r\n\r\n            if (typeof dataTypeExpression !== \"string\") {\r\n                func = dataTypeExpression;\r\n                dataTypeExpression = \"*\";\r\n            }\r\n\r\n            var dataType,\r\n                i = 0,\r\n                dataTypes = dataTypeExpression.toLowerCase().match(rnothtmlwhite) || [];\r\n\r\n            if (isFunction(func)) {\r\n\r\n                // For each dataType in the dataTypeExpression\r\n                while ((dataType = dataTypes[i++])) {\r\n\r\n                    // Prepend if requested\r\n                    if (dataType[0] === \"+\") {\r\n                        dataType = dataType.slice(1) || \"*\";\r\n                        (structure[dataType] = structure[dataType] || []).unshift(func);\r\n\r\n                        // Otherwise append\r\n                    } else {\r\n                        (structure[dataType] = structure[dataType] || []).push(func);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    // Base inspection function for prefilters and transports\r\n    function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {\r\n\r\n        var inspected = {},\r\n            seekingTransport = (structure === transports);\r\n\r\n        function inspect(dataType) {\r\n            var selected;\r\n            inspected[dataType] = true;\r\n            jQuery.each(structure[dataType] || [], function (_, prefilterOrFactory) {\r\n                var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);\r\n                if (typeof dataTypeOrTransport === \"string\" &&\r\n                    !seekingTransport && !inspected[dataTypeOrTransport]) {\r\n\r\n                    options.dataTypes.unshift(dataTypeOrTransport);\r\n                    inspect(dataTypeOrTransport);\r\n                    return false;\r\n                } else if (seekingTransport) {\r\n                    return !(selected = dataTypeOrTransport);\r\n                }\r\n            });\r\n            return selected;\r\n        }\r\n\r\n        return inspect(options.dataTypes[0]) || !inspected[\"*\"] && inspect(\"*\");\r\n    }\r\n\r\n    // A special extend for ajax options\r\n    // that takes \"flat\" options (not to be deep extended)\r\n    // Fixes #9887\r\n    function ajaxExtend(target, src) {\r\n        var key, deep,\r\n            flatOptions = jQuery.ajaxSettings.flatOptions || {};\r\n\r\n        for (key in src) {\r\n            if (src[key] !== undefined) {\r\n                (flatOptions[key] ? target : (deep || (deep = {})))[key] = src[key];\r\n            }\r\n        }\r\n        if (deep) {\r\n            jQuery.extend(true, target, deep);\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n    /* Handles responses to an ajax request:\r\n     * - finds the right dataType (mediates between content-type and expected dataType)\r\n     * - returns the corresponding response\r\n     */\r\n    function ajaxHandleResponses(s, jqXHR, responses) {\r\n\r\n        var ct, type, finalDataType, firstDataType,\r\n            contents = s.contents,\r\n            dataTypes = s.dataTypes;\r\n\r\n        // Remove auto dataType and get content-type in the process\r\n        while (dataTypes[0] === \"*\") {\r\n            dataTypes.shift();\r\n            if (ct === undefined) {\r\n                ct = s.mimeType || jqXHR.getResponseHeader(\"Content-Type\");\r\n            }\r\n        }\r\n\r\n        // Check if we're dealing with a known content-type\r\n        if (ct) {\r\n            for (type in contents) {\r\n                if (contents[type] && contents[type].test(ct)) {\r\n                    dataTypes.unshift(type);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        // Check to see if we have a response for the expected dataType\r\n        if (dataTypes[0] in responses) {\r\n            finalDataType = dataTypes[0];\r\n        } else {\r\n\r\n            // Try convertible dataTypes\r\n            for (type in responses) {\r\n                if (!dataTypes[0] || s.converters[type + \" \" + dataTypes[0]]) {\r\n                    finalDataType = type;\r\n                    break;\r\n                }\r\n                if (!firstDataType) {\r\n                    firstDataType = type;\r\n                }\r\n            }\r\n\r\n            // Or just use first one\r\n            finalDataType = finalDataType || firstDataType;\r\n        }\r\n\r\n        // If we found a dataType\r\n        // We add the dataType to the list if needed\r\n        // and return the corresponding response\r\n        if (finalDataType) {\r\n            if (finalDataType !== dataTypes[0]) {\r\n                dataTypes.unshift(finalDataType);\r\n            }\r\n            return responses[finalDataType];\r\n        }\r\n    }\r\n\r\n    /* Chain conversions given the request and the original response\r\n     * Also sets the responseXXX fields on the jqXHR instance\r\n     */\r\n    function ajaxConvert(s, response, jqXHR, isSuccess) {\r\n        var conv2, current, conv, tmp, prev,\r\n            converters = {},\r\n\r\n            // Work with a copy of dataTypes in case we need to modify it for conversion\r\n            dataTypes = s.dataTypes.slice();\r\n\r\n        // Create converters map with lowercased keys\r\n        if (dataTypes[1]) {\r\n            for (conv in s.converters) {\r\n                converters[conv.toLowerCase()] = s.converters[conv];\r\n            }\r\n        }\r\n\r\n        current = dataTypes.shift();\r\n\r\n        // Convert to each sequential dataType\r\n        while (current) {\r\n\r\n            if (s.responseFields[current]) {\r\n                jqXHR[s.responseFields[current]] = response;\r\n            }\r\n\r\n            // Apply the dataFilter if provided\r\n            if (!prev && isSuccess && s.dataFilter) {\r\n                response = s.dataFilter(response, s.dataType);\r\n            }\r\n\r\n            prev = current;\r\n            current = dataTypes.shift();\r\n\r\n            if (current) {\r\n\r\n                // There's only work to do if current dataType is non-auto\r\n                if (current === \"*\") {\r\n\r\n                    current = prev;\r\n\r\n                    // Convert response if prev dataType is non-auto and differs from current\r\n                } else if (prev !== \"*\" && prev !== current) {\r\n\r\n                    // Seek a direct converter\r\n                    conv = converters[prev + \" \" + current] || converters[\"* \" + current];\r\n\r\n                    // If none found, seek a pair\r\n                    if (!conv) {\r\n                        for (conv2 in converters) {\r\n\r\n                            // If conv2 outputs current\r\n                            tmp = conv2.split(\" \");\r\n                            if (tmp[1] === current) {\r\n\r\n                                // If prev can be converted to accepted input\r\n                                conv = converters[prev + \" \" + tmp[0]] ||\r\n                                    converters[\"* \" + tmp[0]];\r\n                                if (conv) {\r\n\r\n                                    // Condense equivalence converters\r\n                                    if (conv === true) {\r\n                                        conv = converters[conv2];\r\n\r\n                                        // Otherwise, insert the intermediate dataType\r\n                                    } else if (converters[conv2] !== true) {\r\n                                        current = tmp[0];\r\n                                        dataTypes.unshift(tmp[1]);\r\n                                    }\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Apply converter (if not an equivalence)\r\n                    if (conv !== true) {\r\n\r\n                        // Unless errors are allowed to bubble, catch and return them\r\n                        if (conv && s.throws) {\r\n                            response = conv(response);\r\n                        } else {\r\n                            try {\r\n                                response = conv(response);\r\n                            } catch (e) {\r\n                                return {\r\n                                    state: \"parsererror\",\r\n                                    error: conv ? e : \"No conversion from \" + prev + \" to \" + current\r\n                                };\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return { state: \"success\", data: response };\r\n    }\r\n\r\n    jQuery.extend({\r\n\r\n        // Counter for holding the number of active queries\r\n        active: 0,\r\n\r\n        // Last-Modified header cache for next request\r\n        lastModified: {},\r\n        etag: {},\r\n\r\n        ajaxSettings: {\r\n            url: location.href,\r\n            type: \"GET\",\r\n            isLocal: rlocalProtocol.test(location.protocol),\r\n            global: true,\r\n            processData: true,\r\n            async: true,\r\n            contentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\r\n\r\n            /*\r\n            timeout: 0,\r\n            data: null,\r\n            dataType: null,\r\n            username: null,\r\n            password: null,\r\n            cache: null,\r\n            throws: false,\r\n            traditional: false,\r\n            headers: {},\r\n            */\r\n\r\n            accepts: {\r\n                \"*\": allTypes,\r\n                text: \"text/plain\",\r\n                html: \"text/html\",\r\n                xml: \"application/xml, text/xml\",\r\n                json: \"application/json, text/javascript\"\r\n            },\r\n\r\n            contents: {\r\n                xml: /\\bxml\\b/,\r\n                html: /\\bhtml/,\r\n                json: /\\bjson\\b/\r\n            },\r\n\r\n            responseFields: {\r\n                xml: \"responseXML\",\r\n                text: \"responseText\",\r\n                json: \"responseJSON\"\r\n            },\r\n\r\n            // Data converters\r\n            // Keys separate source (or catchall \"*\") and destination types with a single space\r\n            converters: {\r\n\r\n                // Convert anything to text\r\n                \"* text\": String,\r\n\r\n                // Text to html (true = no transformation)\r\n                \"text html\": true,\r\n\r\n                // Evaluate text as a json expression\r\n                \"text json\": JSON.parse,\r\n\r\n                // Parse text as xml\r\n                \"text xml\": jQuery.parseXML\r\n            },\r\n\r\n            // For options that shouldn't be deep extended:\r\n            // you can add your own custom options here if\r\n            // and when you create one that shouldn't be\r\n            // deep extended (see ajaxExtend)\r\n            flatOptions: {\r\n                url: true,\r\n                context: true\r\n            }\r\n        },\r\n\r\n        // Creates a full fledged settings object into target\r\n        // with both ajaxSettings and settings fields.\r\n        // If target is omitted, writes into ajaxSettings.\r\n        ajaxSetup: function (target, settings) {\r\n            return settings ?\r\n\r\n                // Building a settings object\r\n                ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) :\r\n\r\n                // Extending ajaxSettings\r\n                ajaxExtend(jQuery.ajaxSettings, target);\r\n        },\r\n\r\n        ajaxPrefilter: addToPrefiltersOrTransports(prefilters),\r\n        ajaxTransport: addToPrefiltersOrTransports(transports),\r\n\r\n        // Main method\r\n        ajax: function (url, options) {\r\n\r\n            // If url is an object, simulate pre-1.5 signature\r\n            if (typeof url === \"object\") {\r\n                options = url;\r\n                url = undefined;\r\n            }\r\n\r\n            // Force options to be an object\r\n            options = options || {};\r\n\r\n            var transport,\r\n\r\n                // URL without anti-cache param\r\n                cacheURL,\r\n\r\n                // Response headers\r\n                responseHeadersString,\r\n                responseHeaders,\r\n\r\n                // timeout handle\r\n                timeoutTimer,\r\n\r\n                // Url cleanup var\r\n                urlAnchor,\r\n\r\n                // Request state (becomes false upon send and true upon completion)\r\n                completed,\r\n\r\n                // To know if global events are to be dispatched\r\n                fireGlobals,\r\n\r\n                // Loop variable\r\n                i,\r\n\r\n                // uncached part of the url\r\n                uncached,\r\n\r\n                // Create the final options object\r\n                s = jQuery.ajaxSetup({}, options),\r\n\r\n                // Callbacks context\r\n                callbackContext = s.context || s,\r\n\r\n                // Context for global events is callbackContext if it is a DOM node or jQuery collection\r\n                globalEventContext = s.context &&\r\n                    (callbackContext.nodeType || callbackContext.jquery) ?\r\n                    jQuery(callbackContext) :\r\n                    jQuery.event,\r\n\r\n                // Deferreds\r\n                deferred = jQuery.Deferred(),\r\n                completeDeferred = jQuery.Callbacks(\"once memory\"),\r\n\r\n                // Status-dependent callbacks\r\n                statusCode = s.statusCode || {},\r\n\r\n                // Headers (they are sent all at once)\r\n                requestHeaders = {},\r\n                requestHeadersNames = {},\r\n\r\n                // Default abort message\r\n                strAbort = \"canceled\",\r\n\r\n                // Fake xhr\r\n                jqXHR = {\r\n                    readyState: 0,\r\n\r\n                    // Builds headers hashtable if needed\r\n                    getResponseHeader: function (key) {\r\n                        var match;\r\n                        if (completed) {\r\n                            if (!responseHeaders) {\r\n                                responseHeaders = {};\r\n                                while ((match = rheaders.exec(responseHeadersString))) {\r\n                                    responseHeaders[match[1].toLowerCase() + \" \"] =\r\n                                        (responseHeaders[match[1].toLowerCase() + \" \"] || [])\r\n                                            .concat(match[2]);\r\n                                }\r\n                            }\r\n                            match = responseHeaders[key.toLowerCase() + \" \"];\r\n                        }\r\n                        return match == null ? null : match.join(\", \");\r\n                    },\r\n\r\n                    // Raw string\r\n                    getAllResponseHeaders: function () {\r\n                        return completed ? responseHeadersString : null;\r\n                    },\r\n\r\n                    // Caches the header\r\n                    setRequestHeader: function (name, value) {\r\n                        if (completed == null) {\r\n                            name = requestHeadersNames[name.toLowerCase()] =\r\n                                requestHeadersNames[name.toLowerCase()] || name;\r\n                            requestHeaders[name] = value;\r\n                        }\r\n                        return this;\r\n                    },\r\n\r\n                    // Overrides response content-type header\r\n                    overrideMimeType: function (type) {\r\n                        if (completed == null) {\r\n                            s.mimeType = type;\r\n                        }\r\n                        return this;\r\n                    },\r\n\r\n                    // Status-dependent callbacks\r\n                    statusCode: function (map) {\r\n                        var code;\r\n                        if (map) {\r\n                            if (completed) {\r\n\r\n                                // Execute the appropriate callbacks\r\n                                jqXHR.always(map[jqXHR.status]);\r\n                            } else {\r\n\r\n                                // Lazy-add the new callbacks in a way that preserves old ones\r\n                                for (code in map) {\r\n                                    statusCode[code] = [statusCode[code], map[code]];\r\n                                }\r\n                            }\r\n                        }\r\n                        return this;\r\n                    },\r\n\r\n                    // Cancel the request\r\n                    abort: function (statusText) {\r\n                        var finalText = statusText || strAbort;\r\n                        if (transport) {\r\n                            transport.abort(finalText);\r\n                        }\r\n                        done(0, finalText);\r\n                        return this;\r\n                    }\r\n                };\r\n\r\n            // Attach deferreds\r\n            deferred.promise(jqXHR);\r\n\r\n            // Add protocol if not provided (prefilters might expect it)\r\n            // Handle falsy url in the settings object (#10093: consistency with old signature)\r\n            // We also use the url parameter if available\r\n            s.url = ((url || s.url || location.href) + \"\")\r\n                .replace(rprotocol, location.protocol + \"//\");\r\n\r\n            // Alias method option to type as per ticket #12004\r\n            s.type = options.method || options.type || s.method || s.type;\r\n\r\n            // Extract dataTypes list\r\n            s.dataTypes = (s.dataType || \"*\").toLowerCase().match(rnothtmlwhite) || [\"\"];\r\n\r\n            // A cross-domain request is in order when the origin doesn't match the current origin.\r\n            if (s.crossDomain == null) {\r\n                urlAnchor = document.createElement(\"a\");\r\n\r\n                // Support: IE <=8 - 11, Edge 12 - 15\r\n                // IE throws exception on accessing the href property if url is malformed,\r\n                // e.g. http://example.com:80x/\r\n                try {\r\n                    urlAnchor.href = s.url;\r\n\r\n                    // Support: IE <=8 - 11 only\r\n                    // Anchor's host property isn't correctly set when s.url is relative\r\n                    urlAnchor.href = urlAnchor.href;\r\n                    s.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\r\n                        urlAnchor.protocol + \"//\" + urlAnchor.host;\r\n                } catch (e) {\r\n\r\n                    // If there is an error parsing the URL, assume it is crossDomain,\r\n                    // it can be rejected by the transport if it is invalid\r\n                    s.crossDomain = true;\r\n                }\r\n            }\r\n\r\n            // Convert data if not already a string\r\n            if (s.data && s.processData && typeof s.data !== \"string\") {\r\n                s.data = jQuery.param(s.data, s.traditional);\r\n            }\r\n\r\n            // Apply prefilters\r\n            inspectPrefiltersOrTransports(prefilters, s, options, jqXHR);\r\n\r\n            // If request was aborted inside a prefilter, stop there\r\n            if (completed) {\r\n                return jqXHR;\r\n            }\r\n\r\n            // We can fire global events as of now if asked to\r\n            // Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\r\n            fireGlobals = jQuery.event && s.global;\r\n\r\n            // Watch for a new set of requests\r\n            if (fireGlobals && jQuery.active++ === 0) {\r\n                jQuery.event.trigger(\"ajaxStart\");\r\n            }\r\n\r\n            // Uppercase the type\r\n            s.type = s.type.toUpperCase();\r\n\r\n            // Determine if request has content\r\n            s.hasContent = !rnoContent.test(s.type);\r\n\r\n            // Save the URL in case we're toying with the If-Modified-Since\r\n            // and/or If-None-Match header later on\r\n            // Remove hash to simplify url manipulation\r\n            cacheURL = s.url.replace(rhash, \"\");\r\n\r\n            // More options handling for requests with no content\r\n            if (!s.hasContent) {\r\n\r\n                // Remember the hash so we can put it back\r\n                uncached = s.url.slice(cacheURL.length);\r\n\r\n                // If data is available and should be processed, append data to url\r\n                if (s.data && (s.processData || typeof s.data === \"string\")) {\r\n                    cacheURL += (rquery.test(cacheURL) ? \"&\" : \"?\") + s.data;\r\n\r\n                    // #9682: remove data so that it's not used in an eventual retry\r\n                    delete s.data;\r\n                }\r\n\r\n                // Add or update anti-cache param if needed\r\n                if (s.cache === false) {\r\n                    cacheURL = cacheURL.replace(rantiCache, \"$1\");\r\n                    uncached = (rquery.test(cacheURL) ? \"&\" : \"?\") + \"_=\" + (nonce.guid++) +\r\n                        uncached;\r\n                }\r\n\r\n                // Put hash and anti-cache on the URL that will be requested (gh-1732)\r\n                s.url = cacheURL + uncached;\r\n\r\n                // Change '%20' to '+' if this is encoded form body content (gh-2658)\r\n            } else if (s.data && s.processData &&\r\n                (s.contentType || \"\").indexOf(\"application/x-www-form-urlencoded\") === 0) {\r\n                s.data = s.data.replace(r20, \"+\");\r\n            }\r\n\r\n            // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\r\n            if (s.ifModified) {\r\n                if (jQuery.lastModified[cacheURL]) {\r\n                    jqXHR.setRequestHeader(\"If-Modified-Since\", jQuery.lastModified[cacheURL]);\r\n                }\r\n                if (jQuery.etag[cacheURL]) {\r\n                    jqXHR.setRequestHeader(\"If-None-Match\", jQuery.etag[cacheURL]);\r\n                }\r\n            }\r\n\r\n            // Set the correct header, if data is being sent\r\n            if (s.data && s.hasContent && s.contentType !== false || options.contentType) {\r\n                jqXHR.setRequestHeader(\"Content-Type\", s.contentType);\r\n            }\r\n\r\n            // Set the Accepts header for the server, depending on the dataType\r\n            jqXHR.setRequestHeader(\r\n                \"Accept\",\r\n                s.dataTypes[0] && s.accepts[s.dataTypes[0]] ?\r\n                    s.accepts[s.dataTypes[0]] +\r\n                    (s.dataTypes[0] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\") :\r\n                    s.accepts[\"*\"]\r\n            );\r\n\r\n            // Check for headers option\r\n            for (i in s.headers) {\r\n                jqXHR.setRequestHeader(i, s.headers[i]);\r\n            }\r\n\r\n            // Allow custom headers/mimetypes and early abort\r\n            if (s.beforeSend &&\r\n                (s.beforeSend.call(callbackContext, jqXHR, s) === false || completed)) {\r\n\r\n                // Abort if not done already and return\r\n                return jqXHR.abort();\r\n            }\r\n\r\n            // Aborting is no longer a cancellation\r\n            strAbort = \"abort\";\r\n\r\n            // Install callbacks on deferreds\r\n            completeDeferred.add(s.complete);\r\n            jqXHR.done(s.success);\r\n            jqXHR.fail(s.error);\r\n\r\n            // Get transport\r\n            transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR);\r\n\r\n            // If no transport, we auto-abort\r\n            if (!transport) {\r\n                done(-1, \"No Transport\");\r\n            } else {\r\n                jqXHR.readyState = 1;\r\n\r\n                // Send global event\r\n                if (fireGlobals) {\r\n                    globalEventContext.trigger(\"ajaxSend\", [jqXHR, s]);\r\n                }\r\n\r\n                // If request was aborted inside ajaxSend, stop there\r\n                if (completed) {\r\n                    return jqXHR;\r\n                }\r\n\r\n                // Timeout\r\n                if (s.async && s.timeout > 0) {\r\n                    timeoutTimer = window.setTimeout(function () {\r\n                        jqXHR.abort(\"timeout\");\r\n                    }, s.timeout);\r\n                }\r\n\r\n                try {\r\n                    completed = false;\r\n                    transport.send(requestHeaders, done);\r\n                } catch (e) {\r\n\r\n                    // Rethrow post-completion exceptions\r\n                    if (completed) {\r\n                        throw e;\r\n                    }\r\n\r\n                    // Propagate others as results\r\n                    done(-1, e);\r\n                }\r\n            }\r\n\r\n            // Callback for when everything is done\r\n            function done(status, nativeStatusText, responses, headers) {\r\n                var isSuccess, success, error, response, modified,\r\n                    statusText = nativeStatusText;\r\n\r\n                // Ignore repeat invocations\r\n                if (completed) {\r\n                    return;\r\n                }\r\n\r\n                completed = true;\r\n\r\n                // Clear timeout if it exists\r\n                if (timeoutTimer) {\r\n                    window.clearTimeout(timeoutTimer);\r\n                }\r\n\r\n                // Dereference transport for early garbage collection\r\n                // (no matter how long the jqXHR object will be used)\r\n                transport = undefined;\r\n\r\n                // Cache response headers\r\n                responseHeadersString = headers || \"\";\r\n\r\n                // Set readyState\r\n                jqXHR.readyState = status > 0 ? 4 : 0;\r\n\r\n                // Determine if successful\r\n                isSuccess = status >= 200 && status < 300 || status === 304;\r\n\r\n                // Get response data\r\n                if (responses) {\r\n                    response = ajaxHandleResponses(s, jqXHR, responses);\r\n                }\r\n\r\n                // Use a noop converter for missing script\r\n                if (!isSuccess && jQuery.inArray(\"script\", s.dataTypes) > -1) {\r\n                    s.converters[\"text script\"] = function () { };\r\n                }\r\n\r\n                // Convert no matter what (that way responseXXX fields are always set)\r\n                response = ajaxConvert(s, response, jqXHR, isSuccess);\r\n\r\n                // If successful, handle type chaining\r\n                if (isSuccess) {\r\n\r\n                    // Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\r\n                    if (s.ifModified) {\r\n                        modified = jqXHR.getResponseHeader(\"Last-Modified\");\r\n                        if (modified) {\r\n                            jQuery.lastModified[cacheURL] = modified;\r\n                        }\r\n                        modified = jqXHR.getResponseHeader(\"etag\");\r\n                        if (modified) {\r\n                            jQuery.etag[cacheURL] = modified;\r\n                        }\r\n                    }\r\n\r\n                    // if no content\r\n                    if (status === 204 || s.type === \"HEAD\") {\r\n                        statusText = \"nocontent\";\r\n\r\n                        // if not modified\r\n                    } else if (status === 304) {\r\n                        statusText = \"notmodified\";\r\n\r\n                        // If we have data, let's convert it\r\n                    } else {\r\n                        statusText = response.state;\r\n                        success = response.data;\r\n                        error = response.error;\r\n                        isSuccess = !error;\r\n                    }\r\n                } else {\r\n\r\n                    // Extract error from statusText and normalize for non-aborts\r\n                    error = statusText;\r\n                    if (status || !statusText) {\r\n                        statusText = \"error\";\r\n                        if (status < 0) {\r\n                            status = 0;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // Set data for the fake xhr object\r\n                jqXHR.status = status;\r\n                jqXHR.statusText = (nativeStatusText || statusText) + \"\";\r\n\r\n                // Success/Error\r\n                if (isSuccess) {\r\n                    deferred.resolveWith(callbackContext, [success, statusText, jqXHR]);\r\n                } else {\r\n                    deferred.rejectWith(callbackContext, [jqXHR, statusText, error]);\r\n                }\r\n\r\n                // Status-dependent callbacks\r\n                jqXHR.statusCode(statusCode);\r\n                statusCode = undefined;\r\n\r\n                if (fireGlobals) {\r\n                    globalEventContext.trigger(isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\r\n                        [jqXHR, s, isSuccess ? success : error]);\r\n                }\r\n\r\n                // Complete\r\n                completeDeferred.fireWith(callbackContext, [jqXHR, statusText]);\r\n\r\n                if (fireGlobals) {\r\n                    globalEventContext.trigger(\"ajaxComplete\", [jqXHR, s]);\r\n\r\n                    // Handle the global AJAX counter\r\n                    if (!(--jQuery.active)) {\r\n                        jQuery.event.trigger(\"ajaxStop\");\r\n                    }\r\n                }\r\n            }\r\n\r\n            return jqXHR;\r\n        },\r\n\r\n        getJSON: function (url, data, callback) {\r\n            return jQuery.get(url, data, callback, \"json\");\r\n        },\r\n\r\n        getScript: function (url, callback) {\r\n            return jQuery.get(url, undefined, callback, \"script\");\r\n        }\r\n    });\r\n\r\n    jQuery.each([\"get\", \"post\"], function (_i, method) {\r\n        jQuery[method] = function (url, data, callback, type) {\r\n\r\n            // Shift arguments if data argument was omitted\r\n            if (isFunction(data)) {\r\n                type = type || callback;\r\n                callback = data;\r\n                data = undefined;\r\n            }\r\n\r\n            // The url can be an options object (which then must have .url)\r\n            return jQuery.ajax(jQuery.extend({\r\n                url: url,\r\n                type: method,\r\n                dataType: type,\r\n                data: data,\r\n                success: callback\r\n            }, jQuery.isPlainObject(url) && url));\r\n        };\r\n    });\r\n\r\n    jQuery.ajaxPrefilter(function (s) {\r\n        var i;\r\n        for (i in s.headers) {\r\n            if (i.toLowerCase() === \"content-type\") {\r\n                s.contentType = s.headers[i] || \"\";\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    jQuery._evalUrl = function (url, options, doc) {\r\n        return jQuery.ajax({\r\n            url: url,\r\n\r\n            // Make this explicit, since user can override this through ajaxSetup (#11264)\r\n            type: \"GET\",\r\n            dataType: \"script\",\r\n            cache: true,\r\n            async: false,\r\n            global: false,\r\n\r\n            // Only evaluate the response if it is successful (gh-4126)\r\n            // dataFilter is not invoked for failure responses, so using it instead\r\n            // of the default converter is kludgy but it works.\r\n            converters: {\r\n                \"text script\": function () { }\r\n            },\r\n            dataFilter: function (response) {\r\n                jQuery.globalEval(response, options, doc);\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    jQuery.fn.extend({\r\n        wrapAll: function (html) {\r\n            var wrap;\r\n\r\n            if (this[0]) {\r\n                if (isFunction(html)) {\r\n                    html = html.call(this[0]);\r\n                }\r\n\r\n                // The elements to wrap the target around\r\n                wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);\r\n\r\n                if (this[0].parentNode) {\r\n                    wrap.insertBefore(this[0]);\r\n                }\r\n\r\n                wrap.map(function () {\r\n                    var elem = this;\r\n\r\n                    while (elem.firstElementChild) {\r\n                        elem = elem.firstElementChild;\r\n                    }\r\n\r\n                    return elem;\r\n                }).append(this);\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        wrapInner: function (html) {\r\n            if (isFunction(html)) {\r\n                return this.each(function (i) {\r\n                    jQuery(this).wrapInner(html.call(this, i));\r\n                });\r\n            }\r\n\r\n            return this.each(function () {\r\n                var self = jQuery(this),\r\n                    contents = self.contents();\r\n\r\n                if (contents.length) {\r\n                    contents.wrapAll(html);\r\n\r\n                } else {\r\n                    self.append(html);\r\n                }\r\n            });\r\n        },\r\n\r\n        wrap: function (html) {\r\n            var htmlIsFunction = isFunction(html);\r\n\r\n            return this.each(function (i) {\r\n                jQuery(this).wrapAll(htmlIsFunction ? html.call(this, i) : html);\r\n            });\r\n        },\r\n\r\n        unwrap: function (selector) {\r\n            this.parent(selector).not(\"body\").each(function () {\r\n                jQuery(this).replaceWith(this.childNodes);\r\n            });\r\n            return this;\r\n        }\r\n    });\r\n\r\n\r\n    jQuery.expr.pseudos.hidden = function (elem) {\r\n        return !jQuery.expr.pseudos.visible(elem);\r\n    };\r\n    jQuery.expr.pseudos.visible = function (elem) {\r\n        return !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);\r\n    };\r\n\r\n\r\n\r\n\r\n    jQuery.ajaxSettings.xhr = function () {\r\n        try {\r\n            return new window.XMLHttpRequest();\r\n        } catch (e) { }\r\n    };\r\n\r\n    var xhrSuccessStatus = {\r\n\r\n        // File protocol always yields status code 0, assume 200\r\n        0: 200,\r\n\r\n        // Support: IE <=9 only\r\n        // #1450: sometimes IE returns 1223 when it should be 204\r\n        1223: 204\r\n    },\r\n        xhrSupported = jQuery.ajaxSettings.xhr();\r\n\r\n    support.cors = !!xhrSupported && (\"withCredentials\" in xhrSupported);\r\n    support.ajax = xhrSupported = !!xhrSupported;\r\n\r\n    jQuery.ajaxTransport(function (options) {\r\n        var callback, errorCallback;\r\n\r\n        // Cross domain only allowed if supported through XMLHttpRequest\r\n        if (support.cors || xhrSupported && !options.crossDomain) {\r\n            return {\r\n                send: function (headers, complete) {\r\n                    var i,\r\n                        xhr = options.xhr();\r\n\r\n                    xhr.open(\r\n                        options.type,\r\n                        options.url,\r\n                        options.async,\r\n                        options.username,\r\n                        options.password\r\n                    );\r\n\r\n                    // Apply custom fields if provided\r\n                    if (options.xhrFields) {\r\n                        for (i in options.xhrFields) {\r\n                            xhr[i] = options.xhrFields[i];\r\n                        }\r\n                    }\r\n\r\n                    // Override mime type if needed\r\n                    if (options.mimeType && xhr.overrideMimeType) {\r\n                        xhr.overrideMimeType(options.mimeType);\r\n                    }\r\n\r\n                    // X-Requested-With header\r\n                    // For cross-domain requests, seeing as conditions for a preflight are\r\n                    // akin to a jigsaw puzzle, we simply never set it to be sure.\r\n                    // (it can always be set on a per-request basis or even using ajaxSetup)\r\n                    // For same-domain requests, won't change header if already provided.\r\n                    if (!options.crossDomain && !headers[\"X-Requested-With\"]) {\r\n                        headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n                    }\r\n\r\n                    // Set headers\r\n                    for (i in headers) {\r\n                        xhr.setRequestHeader(i, headers[i]);\r\n                    }\r\n\r\n                    // Callback\r\n                    callback = function (type) {\r\n                        return function () {\r\n                            if (callback) {\r\n                                callback = errorCallback = xhr.onload =\r\n                                    xhr.onerror = xhr.onabort = xhr.ontimeout =\r\n                                    xhr.onreadystatechange = null;\r\n\r\n                                if (type === \"abort\") {\r\n                                    xhr.abort();\r\n                                } else if (type === \"error\") {\r\n\r\n                                    // Support: IE <=9 only\r\n                                    // On a manual native abort, IE9 throws\r\n                                    // errors on any property access that is not readyState\r\n                                    if (typeof xhr.status !== \"number\") {\r\n                                        complete(0, \"error\");\r\n                                    } else {\r\n                                        complete(\r\n\r\n                                            // File: protocol always yields status 0; see #8605, #14207\r\n                                            xhr.status,\r\n                                            xhr.statusText\r\n                                        );\r\n                                    }\r\n                                } else {\r\n                                    complete(\r\n                                        xhrSuccessStatus[xhr.status] || xhr.status,\r\n                                        xhr.statusText,\r\n\r\n                                        // Support: IE <=9 only\r\n                                        // IE9 has no XHR2 but throws on binary (trac-11426)\r\n                                        // For XHR2 non-text, let the caller handle it (gh-2498)\r\n                                        (xhr.responseType || \"text\") !== \"text\" ||\r\n                                            typeof xhr.responseText !== \"string\" ?\r\n                                            { binary: xhr.response } :\r\n                                            { text: xhr.responseText },\r\n                                        xhr.getAllResponseHeaders()\r\n                                    );\r\n                                }\r\n                            }\r\n                        };\r\n                    };\r\n\r\n                    // Listen to events\r\n                    xhr.onload = callback();\r\n                    errorCallback = xhr.onerror = xhr.ontimeout = callback(\"error\");\r\n\r\n                    // Support: IE 9 only\r\n                    // Use onreadystatechange to replace onabort\r\n                    // to handle uncaught aborts\r\n                    if (xhr.onabort !== undefined) {\r\n                        xhr.onabort = errorCallback;\r\n                    } else {\r\n                        xhr.onreadystatechange = function () {\r\n\r\n                            // Check readyState before timeout as it changes\r\n                            if (xhr.readyState === 4) {\r\n\r\n                                // Allow onerror to be called first,\r\n                                // but that will not handle a native abort\r\n                                // Also, save errorCallback to a variable\r\n                                // as xhr.onerror cannot be accessed\r\n                                window.setTimeout(function () {\r\n                                    if (callback) {\r\n                                        errorCallback();\r\n                                    }\r\n                                });\r\n                            }\r\n                        };\r\n                    }\r\n\r\n                    // Create the abort callback\r\n                    callback = callback(\"abort\");\r\n\r\n                    try {\r\n\r\n                        // Do send the request (this may raise an exception)\r\n                        xhr.send(options.hasContent && options.data || null);\r\n                    } catch (e) {\r\n\r\n                        // #14683: Only rethrow if this hasn't been notified as an error yet\r\n                        if (callback) {\r\n                            throw e;\r\n                        }\r\n                    }\r\n                },\r\n\r\n                abort: function () {\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n    // Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\r\n    jQuery.ajaxPrefilter(function (s) {\r\n        if (s.crossDomain) {\r\n            s.contents.script = false;\r\n        }\r\n    });\r\n\r\n    // Install script dataType\r\n    jQuery.ajaxSetup({\r\n        accepts: {\r\n            script: \"text/javascript, application/javascript, \" +\r\n                \"application/ecmascript, application/x-ecmascript\"\r\n        },\r\n        contents: {\r\n            script: /\\b(?:java|ecma)script\\b/\r\n        },\r\n        converters: {\r\n            \"text script\": function (text) {\r\n                jQuery.globalEval(text);\r\n                return text;\r\n            }\r\n        }\r\n    });\r\n\r\n    // Handle cache's special case and crossDomain\r\n    jQuery.ajaxPrefilter(\"script\", function (s) {\r\n        if (s.cache === undefined) {\r\n            s.cache = false;\r\n        }\r\n        if (s.crossDomain) {\r\n            s.type = \"GET\";\r\n        }\r\n    });\r\n\r\n    // Bind script tag hack transport\r\n    jQuery.ajaxTransport(\"script\", function (s) {\r\n\r\n        // This transport only deals with cross domain or forced-by-attrs requests\r\n        if (s.crossDomain || s.scriptAttrs) {\r\n            var script, callback;\r\n            return {\r\n                send: function (_, complete) {\r\n                    script = jQuery(\"<script>\")\r\n                        .attr(s.scriptAttrs || {})\r\n                        .prop({ charset: s.scriptCharset, src: s.url })\r\n                        .on(\"load error\", callback = function (evt) {\r\n                            script.remove();\r\n                            callback = null;\r\n                            if (evt) {\r\n                                complete(evt.type === \"error\" ? 404 : 200, evt.type);\r\n                            }\r\n                        });\r\n\r\n                    // Use native DOM manipulation to avoid our domManip AJAX trickery\r\n                    document.head.appendChild(script[0]);\r\n                },\r\n                abort: function () {\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n    var oldCallbacks = [],\r\n        rjsonp = /(=)\\?(?=&|$)|\\?\\?/;\r\n\r\n    // Default jsonp settings\r\n    jQuery.ajaxSetup({\r\n        jsonp: \"callback\",\r\n        jsonpCallback: function () {\r\n            var callback = oldCallbacks.pop() || (jQuery.expando + \"_\" + (nonce.guid++));\r\n            this[callback] = true;\r\n            return callback;\r\n        }\r\n    });\r\n\r\n    // Detect, normalize options and install callbacks for jsonp requests\r\n    jQuery.ajaxPrefilter(\"json jsonp\", function (s, originalSettings, jqXHR) {\r\n\r\n        var callbackName, overwritten, responseContainer,\r\n            jsonProp = s.jsonp !== false && (rjsonp.test(s.url) ?\r\n                \"url\" :\r\n                typeof s.data === \"string\" &&\r\n                (s.contentType || \"\")\r\n                    .indexOf(\"application/x-www-form-urlencoded\") === 0 &&\r\n                rjsonp.test(s.data) && \"data\"\r\n            );\r\n\r\n        // Handle iff the expected data type is \"jsonp\" or we have a parameter to set\r\n        if (jsonProp || s.dataTypes[0] === \"jsonp\") {\r\n\r\n            // Get callback name, remembering preexisting value associated with it\r\n            callbackName = s.jsonpCallback = isFunction(s.jsonpCallback) ?\r\n                s.jsonpCallback() :\r\n                s.jsonpCallback;\r\n\r\n            // Insert callback into url or form data\r\n            if (jsonProp) {\r\n                s[jsonProp] = s[jsonProp].replace(rjsonp, \"$1\" + callbackName);\r\n            } else if (s.jsonp !== false) {\r\n                s.url += (rquery.test(s.url) ? \"&\" : \"?\") + s.jsonp + \"=\" + callbackName;\r\n            }\r\n\r\n            // Use data converter to retrieve json after script execution\r\n            s.converters[\"script json\"] = function () {\r\n                if (!responseContainer) {\r\n                    jQuery.error(callbackName + \" was not called\");\r\n                }\r\n                return responseContainer[0];\r\n            };\r\n\r\n            // Force json dataType\r\n            s.dataTypes[0] = \"json\";\r\n\r\n            // Install callback\r\n            overwritten = window[callbackName];\r\n            window[callbackName] = function () {\r\n                responseContainer = arguments;\r\n            };\r\n\r\n            // Clean-up function (fires after converters)\r\n            jqXHR.always(function () {\r\n\r\n                // If previous value didn't exist - remove it\r\n                if (overwritten === undefined) {\r\n                    jQuery(window).removeProp(callbackName);\r\n\r\n                    // Otherwise restore preexisting value\r\n                } else {\r\n                    window[callbackName] = overwritten;\r\n                }\r\n\r\n                // Save back as free\r\n                if (s[callbackName]) {\r\n\r\n                    // Make sure that re-using the options doesn't screw things around\r\n                    s.jsonpCallback = originalSettings.jsonpCallback;\r\n\r\n                    // Save the callback name for future use\r\n                    oldCallbacks.push(callbackName);\r\n                }\r\n\r\n                // Call if it was a function and we have a response\r\n                if (responseContainer && isFunction(overwritten)) {\r\n                    overwritten(responseContainer[0]);\r\n                }\r\n\r\n                responseContainer = overwritten = undefined;\r\n            });\r\n\r\n            // Delegate to script\r\n            return \"script\";\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n    // Support: Safari 8 only\r\n    // In Safari 8 documents created via document.implementation.createHTMLDocument\r\n    // collapse sibling forms: the second one becomes a child of the first one.\r\n    // Because of that, this security measure has to be disabled in Safari 8.\r\n    // https://bugs.webkit.org/show_bug.cgi?id=137337\r\n    support.createHTMLDocument = (function () {\r\n        var body = document.implementation.createHTMLDocument(\"\").body;\r\n        body.innerHTML = \"<form></form><form></form>\";\r\n        return body.childNodes.length === 2;\r\n    })();\r\n\r\n\r\n    // Argument \"data\" should be string of html\r\n    // context (optional): If specified, the fragment will be created in this context,\r\n    // defaults to document\r\n    // keepScripts (optional): If true, will include scripts passed in the html string\r\n    jQuery.parseHTML = function (data, context, keepScripts) {\r\n        if (typeof data !== \"string\") {\r\n            return [];\r\n        }\r\n        if (typeof context === \"boolean\") {\r\n            keepScripts = context;\r\n            context = false;\r\n        }\r\n\r\n        var base, parsed, scripts;\r\n\r\n        if (!context) {\r\n\r\n            // Stop scripts or inline event handlers from being executed immediately\r\n            // by using document.implementation\r\n            if (support.createHTMLDocument) {\r\n                context = document.implementation.createHTMLDocument(\"\");\r\n\r\n                // Set the base href for the created document\r\n                // so any parsed elements with URLs\r\n                // are based on the document's URL (gh-2965)\r\n                base = context.createElement(\"base\");\r\n                base.href = document.location.href;\r\n                context.head.appendChild(base);\r\n            } else {\r\n                context = document;\r\n            }\r\n        }\r\n\r\n        parsed = rsingleTag.exec(data);\r\n        scripts = !keepScripts && [];\r\n\r\n        // Single tag\r\n        if (parsed) {\r\n            return [context.createElement(parsed[1])];\r\n        }\r\n\r\n        parsed = buildFragment([data], context, scripts);\r\n\r\n        if (scripts && scripts.length) {\r\n            jQuery(scripts).remove();\r\n        }\r\n\r\n        return jQuery.merge([], parsed.childNodes);\r\n    };\r\n\r\n\r\n    /**\r\n     * Load a url into a page\r\n     */\r\n    jQuery.fn.load = function (url, params, callback) {\r\n        var selector, type, response,\r\n            self = this,\r\n            off = url.indexOf(\" \");\r\n\r\n        if (off > -1) {\r\n            selector = stripAndCollapse(url.slice(off));\r\n            url = url.slice(0, off);\r\n        }\r\n\r\n        // If it's a function\r\n        if (isFunction(params)) {\r\n\r\n            // We assume that it's the callback\r\n            callback = params;\r\n            params = undefined;\r\n\r\n            // Otherwise, build a param string\r\n        } else if (params && typeof params === \"object\") {\r\n            type = \"POST\";\r\n        }\r\n\r\n        // If we have elements to modify, make the request\r\n        if (self.length > 0) {\r\n            jQuery.ajax({\r\n                url: url,\r\n\r\n                // If \"type\" variable is undefined, then \"GET\" method will be used.\r\n                // Make value of this field explicit since\r\n                // user can override it through ajaxSetup method\r\n                type: type || \"GET\",\r\n                dataType: \"html\",\r\n                data: params\r\n            }).done(function (responseText) {\r\n\r\n                // Save response for use in complete callback\r\n                response = arguments;\r\n\r\n                self.html(selector ?\r\n\r\n                    // If a selector was specified, locate the right elements in a dummy div\r\n                    // Exclude scripts to avoid IE 'Permission Denied' errors\r\n                    jQuery(\"<div>\").append(jQuery.parseHTML(responseText)).find(selector) :\r\n\r\n                    // Otherwise use the full result\r\n                    responseText);\r\n\r\n                // If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\r\n                // but they are ignored because response was set above.\r\n                // If it fails, this function gets \"jqXHR\", \"status\", \"error\"\r\n            }).always(callback && function (jqXHR, status) {\r\n                self.each(function () {\r\n                    callback.apply(this, response || [jqXHR.responseText, status, jqXHR]);\r\n                });\r\n            });\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n\r\n\r\n    jQuery.expr.pseudos.animated = function (elem) {\r\n        return jQuery.grep(jQuery.timers, function (fn) {\r\n            return elem === fn.elem;\r\n        }).length;\r\n    };\r\n\r\n\r\n\r\n\r\n    jQuery.offset = {\r\n        setOffset: function (elem, options, i) {\r\n            var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\r\n                position = jQuery.css(elem, \"position\"),\r\n                curElem = jQuery(elem),\r\n                props = {};\r\n\r\n            // Set position first, in-case top/left are set even on static elem\r\n            if (position === \"static\") {\r\n                elem.style.position = \"relative\";\r\n            }\r\n\r\n            curOffset = curElem.offset();\r\n            curCSSTop = jQuery.css(elem, \"top\");\r\n            curCSSLeft = jQuery.css(elem, \"left\");\r\n            calculatePosition = (position === \"absolute\" || position === \"fixed\") &&\r\n                (curCSSTop + curCSSLeft).indexOf(\"auto\") > -1;\r\n\r\n            // Need to be able to calculate position if either\r\n            // top or left is auto and position is either absolute or fixed\r\n            if (calculatePosition) {\r\n                curPosition = curElem.position();\r\n                curTop = curPosition.top;\r\n                curLeft = curPosition.left;\r\n\r\n            } else {\r\n                curTop = parseFloat(curCSSTop) || 0;\r\n                curLeft = parseFloat(curCSSLeft) || 0;\r\n            }\r\n\r\n            if (isFunction(options)) {\r\n\r\n                // Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\r\n                options = options.call(elem, i, jQuery.extend({}, curOffset));\r\n            }\r\n\r\n            if (options.top != null) {\r\n                props.top = (options.top - curOffset.top) + curTop;\r\n            }\r\n            if (options.left != null) {\r\n                props.left = (options.left - curOffset.left) + curLeft;\r\n            }\r\n\r\n            if (\"using\" in options) {\r\n                options.using.call(elem, props);\r\n\r\n            } else {\r\n                if (typeof props.top === \"number\") {\r\n                    props.top += \"px\";\r\n                }\r\n                if (typeof props.left === \"number\") {\r\n                    props.left += \"px\";\r\n                }\r\n                curElem.css(props);\r\n            }\r\n        }\r\n    };\r\n\r\n    jQuery.fn.extend({\r\n\r\n        // offset() relates an element's border box to the document origin\r\n        offset: function (options) {\r\n\r\n            // Preserve chaining for setter\r\n            if (arguments.length) {\r\n                return options === undefined ?\r\n                    this :\r\n                    this.each(function (i) {\r\n                        jQuery.offset.setOffset(this, options, i);\r\n                    });\r\n            }\r\n\r\n            var rect, win,\r\n                elem = this[0];\r\n\r\n            if (!elem) {\r\n                return;\r\n            }\r\n\r\n            // Return zeros for disconnected and hidden (display: none) elements (gh-2310)\r\n            // Support: IE <=11 only\r\n            // Running getBoundingClientRect on a\r\n            // disconnected node in IE throws an error\r\n            if (!elem.getClientRects().length) {\r\n                return { top: 0, left: 0 };\r\n            }\r\n\r\n            // Get document-relative position by adding viewport scroll to viewport-relative gBCR\r\n            rect = elem.getBoundingClientRect();\r\n            win = elem.ownerDocument.defaultView;\r\n            return {\r\n                top: rect.top + win.pageYOffset,\r\n                left: rect.left + win.pageXOffset\r\n            };\r\n        },\r\n\r\n        // position() relates an element's margin box to its offset parent's padding box\r\n        // This corresponds to the behavior of CSS absolute positioning\r\n        position: function () {\r\n            if (!this[0]) {\r\n                return;\r\n            }\r\n\r\n            var offsetParent, offset, doc,\r\n                elem = this[0],\r\n                parentOffset = { top: 0, left: 0 };\r\n\r\n            // position:fixed elements are offset from the viewport, which itself always has zero offset\r\n            if (jQuery.css(elem, \"position\") === \"fixed\") {\r\n\r\n                // Assume position:fixed implies availability of getBoundingClientRect\r\n                offset = elem.getBoundingClientRect();\r\n\r\n            } else {\r\n                offset = this.offset();\r\n\r\n                // Account for the *real* offset parent, which can be the document or its root element\r\n                // when a statically positioned element is identified\r\n                doc = elem.ownerDocument;\r\n                offsetParent = elem.offsetParent || doc.documentElement;\r\n                while (offsetParent &&\r\n                    (offsetParent === doc.body || offsetParent === doc.documentElement) &&\r\n                    jQuery.css(offsetParent, \"position\") === \"static\") {\r\n\r\n                    offsetParent = offsetParent.parentNode;\r\n                }\r\n                if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\r\n\r\n                    // Incorporate borders into its offset, since they are outside its content origin\r\n                    parentOffset = jQuery(offsetParent).offset();\r\n                    parentOffset.top += jQuery.css(offsetParent, \"borderTopWidth\", true);\r\n                    parentOffset.left += jQuery.css(offsetParent, \"borderLeftWidth\", true);\r\n                }\r\n            }\r\n\r\n            // Subtract parent offsets and element margins\r\n            return {\r\n                top: offset.top - parentOffset.top - jQuery.css(elem, \"marginTop\", true),\r\n                left: offset.left - parentOffset.left - jQuery.css(elem, \"marginLeft\", true)\r\n            };\r\n        },\r\n\r\n        // This method will return documentElement in the following cases:\r\n        // 1) For the element inside the iframe without offsetParent, this method will return\r\n        //    documentElement of the parent window\r\n        // 2) For the hidden or detached element\r\n        // 3) For body or html element, i.e. in case of the html node - it will return itself\r\n        //\r\n        // but those exceptions were never presented as a real life use-cases\r\n        // and might be considered as more preferable results.\r\n        //\r\n        // This logic, however, is not guaranteed and can change at any point in the future\r\n        offsetParent: function () {\r\n            return this.map(function () {\r\n                var offsetParent = this.offsetParent;\r\n\r\n                while (offsetParent && jQuery.css(offsetParent, \"position\") === \"static\") {\r\n                    offsetParent = offsetParent.offsetParent;\r\n                }\r\n\r\n                return offsetParent || documentElement;\r\n            });\r\n        }\r\n    });\r\n\r\n    // Create scrollLeft and scrollTop methods\r\n    jQuery.each({ scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function (method, prop) {\r\n        var top = \"pageYOffset\" === prop;\r\n\r\n        jQuery.fn[method] = function (val) {\r\n            return access(this, function (elem, method, val) {\r\n\r\n                // Coalesce documents and windows\r\n                var win;\r\n                if (isWindow(elem)) {\r\n                    win = elem;\r\n                } else if (elem.nodeType === 9) {\r\n                    win = elem.defaultView;\r\n                }\r\n\r\n                if (val === undefined) {\r\n                    return win ? win[prop] : elem[method];\r\n                }\r\n\r\n                if (win) {\r\n                    win.scrollTo(\r\n                        !top ? val : win.pageXOffset,\r\n                        top ? val : win.pageYOffset\r\n                    );\r\n\r\n                } else {\r\n                    elem[method] = val;\r\n                }\r\n            }, method, val, arguments.length);\r\n        };\r\n    });\r\n\r\n    // Support: Safari <=7 - 9.1, Chrome <=37 - 49\r\n    // Add the top/left cssHooks using jQuery.fn.position\r\n    // Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\r\n    // Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\r\n    // getComputedStyle returns percent when specified for top/left/bottom/right;\r\n    // rather than make the css module depend on the offset module, just check for it here\r\n    jQuery.each([\"top\", \"left\"], function (_i, prop) {\r\n        jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition,\r\n            function (elem, computed) {\r\n                if (computed) {\r\n                    computed = curCSS(elem, prop);\r\n\r\n                    // If curCSS returns percentage, fallback to offset\r\n                    return rnumnonpx.test(computed) ?\r\n                        jQuery(elem).position()[prop] + \"px\" :\r\n                        computed;\r\n                }\r\n            }\r\n        );\r\n    });\r\n\r\n\r\n    // Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\r\n    jQuery.each({ Height: \"height\", Width: \"width\" }, function (name, type) {\r\n        jQuery.each({ padding: \"inner\" + name, content: type, \"\": \"outer\" + name },\r\n            function (defaultExtra, funcName) {\r\n\r\n                // Margin is only for outerHeight, outerWidth\r\n                jQuery.fn[funcName] = function (margin, value) {\r\n                    var chainable = arguments.length && (defaultExtra || typeof margin !== \"boolean\"),\r\n                        extra = defaultExtra || (margin === true || value === true ? \"margin\" : \"border\");\r\n\r\n                    return access(this, function (elem, type, value) {\r\n                        var doc;\r\n\r\n                        if (isWindow(elem)) {\r\n\r\n                            // $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\r\n                            return funcName.indexOf(\"outer\") === 0 ?\r\n                                elem[\"inner\" + name] :\r\n                                elem.document.documentElement[\"client\" + name];\r\n                        }\r\n\r\n                        // Get document width or height\r\n                        if (elem.nodeType === 9) {\r\n                            doc = elem.documentElement;\r\n\r\n                            // Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\r\n                            // whichever is greatest\r\n                            return Math.max(\r\n                                elem.body[\"scroll\" + name], doc[\"scroll\" + name],\r\n                                elem.body[\"offset\" + name], doc[\"offset\" + name],\r\n                                doc[\"client\" + name]\r\n                            );\r\n                        }\r\n\r\n                        return value === undefined ?\r\n\r\n                            // Get width or height on the element, requesting but not forcing parseFloat\r\n                            jQuery.css(elem, type, extra) :\r\n\r\n                            // Set width or height on the element\r\n                            jQuery.style(elem, type, value, extra);\r\n                    }, type, chainable ? margin : undefined, chainable);\r\n                };\r\n            });\r\n    });\r\n\r\n\r\n    jQuery.each([\r\n        \"ajaxStart\",\r\n        \"ajaxStop\",\r\n        \"ajaxComplete\",\r\n        \"ajaxError\",\r\n        \"ajaxSuccess\",\r\n        \"ajaxSend\"\r\n    ], function (_i, type) {\r\n        jQuery.fn[type] = function (fn) {\r\n            return this.on(type, fn);\r\n        };\r\n    });\r\n\r\n\r\n\r\n\r\n    jQuery.fn.extend({\r\n\r\n        bind: function (types, data, fn) {\r\n            return this.on(types, null, data, fn);\r\n        },\r\n        unbind: function (types, fn) {\r\n            return this.off(types, null, fn);\r\n        },\r\n\r\n        delegate: function (selector, types, data, fn) {\r\n            return this.on(types, selector, data, fn);\r\n        },\r\n        undelegate: function (selector, types, fn) {\r\n\r\n            // ( namespace ) or ( selector, types [, fn] )\r\n            return arguments.length === 1 ?\r\n                this.off(selector, \"**\") :\r\n                this.off(types, selector || \"**\", fn);\r\n        },\r\n\r\n        hover: function (fnOver, fnOut) {\r\n            return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);\r\n        }\r\n    });\r\n\r\n    jQuery.each((\"blur focus focusin focusout resize scroll click dblclick \" +\r\n        \"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\r\n        \"change select submit keydown keypress keyup contextmenu\").split(\" \"),\r\n        function (_i, name) {\r\n\r\n            // Handle event binding\r\n            jQuery.fn[name] = function (data, fn) {\r\n                return arguments.length > 0 ?\r\n                    this.on(name, null, data, fn) :\r\n                    this.trigger(name);\r\n            };\r\n        });\r\n\r\n\r\n\r\n\r\n    // Support: Android <=4.0 only\r\n    // Make sure we trim BOM and NBSP\r\n    var rtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\r\n\r\n    // Bind a function to a context, optionally partially applying any\r\n    // arguments.\r\n    // jQuery.proxy is deprecated to promote standards (specifically Function#bind)\r\n    // However, it is not slated for removal any time soon\r\n    jQuery.proxy = function (fn, context) {\r\n        var tmp, args, proxy;\r\n\r\n        if (typeof context === \"string\") {\r\n            tmp = fn[context];\r\n            context = fn;\r\n            fn = tmp;\r\n        }\r\n\r\n        // Quick check to determine if target is callable, in the spec\r\n        // this throws a TypeError, but we will just return undefined.\r\n        if (!isFunction(fn)) {\r\n            return undefined;\r\n        }\r\n\r\n        // Simulated bind\r\n        args = slice.call(arguments, 2);\r\n        proxy = function () {\r\n            return fn.apply(context || this, args.concat(slice.call(arguments)));\r\n        };\r\n\r\n        // Set the guid of unique handler to the same of original handler, so it can be removed\r\n        proxy.guid = fn.guid = fn.guid || jQuery.guid++;\r\n\r\n        return proxy;\r\n    };\r\n\r\n    jQuery.holdReady = function (hold) {\r\n        if (hold) {\r\n            jQuery.readyWait++;\r\n        } else {\r\n            jQuery.ready(true);\r\n        }\r\n    };\r\n    jQuery.isArray = Array.isArray;\r\n    jQuery.parseJSON = JSON.parse;\r\n    jQuery.nodeName = nodeName;\r\n    jQuery.isFunction = isFunction;\r\n    jQuery.isWindow = isWindow;\r\n    jQuery.camelCase = camelCase;\r\n    jQuery.type = toType;\r\n\r\n    jQuery.now = Date.now;\r\n\r\n    jQuery.isNumeric = function (obj) {\r\n\r\n        // As of jQuery 3.0, isNumeric is limited to\r\n        // strings and numbers (primitives or objects)\r\n        // that can be coerced to finite numbers (gh-2662)\r\n        var type = jQuery.type(obj);\r\n        return (type === \"number\" || type === \"string\") &&\r\n\r\n            // parseFloat NaNs numeric-cast false positives (\"\")\r\n            // ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\r\n            // subtraction forces infinities to NaN\r\n            !isNaN(obj - parseFloat(obj));\r\n    };\r\n\r\n    jQuery.trim = function (text) {\r\n        return text == null ?\r\n            \"\" :\r\n            (text + \"\").replace(rtrim, \"\");\r\n    };\r\n\r\n\r\n\r\n    // Register as a named AMD module, since jQuery can be concatenated with other\r\n    // files that may use define, but not via a proper concatenation script that\r\n    // understands anonymous AMD modules. A named AMD is safest and most robust\r\n    // way to register. Lowercase jquery is used because AMD module names are\r\n    // derived from file names, and jQuery is normally delivered in a lowercase\r\n    // file name. Do this after creating the global so that if an AMD module wants\r\n    // to call noConflict to hide this version of jQuery, it will work.\r\n\r\n    // Note that for maximum portability, libraries that are not jQuery should\r\n    // declare themselves as anonymous modules, and avoid setting a global if an\r\n    // AMD loader is present. jQuery is a special case. For more information, see\r\n    // https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\r\n\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(\"jquery\", [], function () {\r\n            return jQuery;\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n    var\r\n\r\n        // Map over jQuery in case of overwrite\r\n        _jQuery = window.jQuery,\r\n\r\n        // Map over the $ in case of overwrite\r\n        _$ = window.$;\r\n\r\n    jQuery.noConflict = function (deep) {\r\n        if (window.$ === jQuery) {\r\n            window.$ = _$;\r\n        }\r\n\r\n        if (deep && window.jQuery === jQuery) {\r\n            window.jQuery = _jQuery;\r\n        }\r\n\r\n        return jQuery;\r\n    };\r\n\r\n    // Expose jQuery and $ identifiers, even in AMD\r\n    // (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\r\n    // and CommonJS for browser emulators (#13566)\r\n    if (typeof noGlobal === \"undefined\") {\r\n        window.jQuery = window.$ = jQuery;\r\n    }\r\n\r\n\r\n\r\n\r\n    return jQuery;\r\n});\r\n\r\nif (typeof define === \"function\" && define.amd && define.amd.jQuery) {\r\n    define(\"vendor/jquery-3.5.1\", [], function () { return jQuery; });\r\n};\n",
    "/*!\r\n * jQuery Validation Plugin v1.19.2\r\n *\r\n * https://jqueryvalidation.org/\r\n *\r\n * Copyright (c) 2020 Jörn Zaefferer\r\n * Released under the MIT license\r\n */\r\n(function (factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define('vendor/jquery.validate',[\"jquery\"], factory);\r\n    } else if (typeof module === \"object\" && module.exports) {\r\n        module.exports = factory(require(\"jquery\"));\r\n    } else {\r\n        factory(jQuery);\r\n    }\r\n}(function ($) {\r\n\r\n    $.extend($.fn, {\r\n\r\n        // https://jqueryvalidation.org/validate/\r\n        validate: function (options) {\r\n\r\n            // If nothing is selected, return nothing; can't chain anyway\r\n            if (!this.length) {\r\n                if (options && options.debug && window.console) {\r\n                    console.warn(\"Nothing selected, can't validate, returning nothing.\");\r\n                }\r\n                return;\r\n            }\r\n\r\n            // Check if a validator for this form was already created\r\n            var validator = $.data(this[0], \"validator\");\r\n            if (validator) {\r\n                return validator;\r\n            }\r\n\r\n            // Add novalidate tag if HTML5.\r\n            this.attr(\"novalidate\", \"novalidate\");\r\n\r\n            validator = new $.validator(options, this[0]);\r\n            $.data(this[0], \"validator\", validator);\r\n\r\n            if (validator.settings.onsubmit) {\r\n\r\n                this.on(\"click.validate\", \":submit\", function (event) {\r\n\r\n                    // Track the used submit button to properly handle scripted\r\n                    // submits later.\r\n                    validator.submitButton = event.currentTarget;\r\n\r\n                    // Allow suppressing validation by adding a cancel class to the submit button\r\n                    if ($(this).hasClass(\"cancel\")) {\r\n                        validator.cancelSubmit = true;\r\n                    }\r\n\r\n                    // Allow suppressing validation by adding the html5 formnovalidate attribute to the submit button\r\n                    if ($(this).attr(\"formnovalidate\") !== undefined) {\r\n                        validator.cancelSubmit = true;\r\n                    }\r\n                });\r\n\r\n                // Validate the form on submit\r\n                this.on(\"submit.validate\", function (event) {\r\n                    if (validator.settings.debug) {\r\n\r\n                        // Prevent form submit to be able to see console output\r\n                        event.preventDefault();\r\n                    }\r\n\r\n                    function handle() {\r\n                        var hidden, result;\r\n\r\n                        // Insert a hidden input as a replacement for the missing submit button\r\n                        // The hidden input is inserted in two cases:\r\n                        //   - A user defined a `submitHandler`\r\n                        //   - There was a pending request due to `remote` method and `stopRequest()`\r\n                        //     was called to submit the form in case it's valid\r\n                        if (validator.submitButton && (validator.settings.submitHandler || validator.formSubmitted)) {\r\n                            hidden = $(\"<input type='hidden'/>\")\r\n                                .attr(\"name\", validator.submitButton.name)\r\n                                .val($(validator.submitButton).val())\r\n                                .appendTo(validator.currentForm);\r\n                        }\r\n\r\n                        if (validator.settings.submitHandler && !validator.settings.debug) {\r\n                            result = validator.settings.submitHandler.call(validator, validator.currentForm, event);\r\n                            if (hidden) {\r\n\r\n                                // And clean up afterwards; thanks to no-block-scope, hidden can be referenced\r\n                                hidden.remove();\r\n                            }\r\n                            if (result !== undefined) {\r\n                                return result;\r\n                            }\r\n                            return false;\r\n                        }\r\n                        return true;\r\n                    }\r\n\r\n                    // Prevent submit for invalid forms or custom submit handlers\r\n                    if (validator.cancelSubmit) {\r\n                        validator.cancelSubmit = false;\r\n                        return handle();\r\n                    }\r\n                    if (validator.form()) {\r\n                        if (validator.pendingRequest) {\r\n                            validator.formSubmitted = true;\r\n                            return false;\r\n                        }\r\n                        return handle();\r\n                    } else {\r\n                        validator.focusInvalid();\r\n                        return false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            return validator;\r\n        },\r\n\r\n        // https://jqueryvalidation.org/valid/\r\n        valid: function () {\r\n            var valid, validator, errorList;\r\n\r\n            if ($(this[0]).is(\"form\")) {\r\n                valid = this.validate().form();\r\n            } else {\r\n                errorList = [];\r\n                valid = true;\r\n                validator = $(this[0].form).validate();\r\n                this.each(function () {\r\n                    valid = validator.element(this) && valid;\r\n                    if (!valid) {\r\n                        errorList = errorList.concat(validator.errorList);\r\n                    }\r\n                });\r\n                validator.errorList = errorList;\r\n            }\r\n            return valid;\r\n        },\r\n\r\n        // https://jqueryvalidation.org/rules/\r\n        rules: function (command, argument) {\r\n            var element = this[0],\r\n                isContentEditable = typeof this.attr(\"contenteditable\") !== \"undefined\" && this.attr(\"contenteditable\") !== \"false\",\r\n                settings, staticRules, existingRules, data, param, filtered;\r\n\r\n            // If nothing is selected, return empty object; can't chain anyway\r\n            if (element == null) {\r\n                return;\r\n            }\r\n\r\n            if (!element.form && isContentEditable) {\r\n                element.form = this.closest(\"form\")[0];\r\n                element.name = this.attr(\"name\");\r\n            }\r\n\r\n            if (element.form == null) {\r\n                return;\r\n            }\r\n\r\n            if (command) {\r\n                settings = $.data(element.form, \"validator\").settings;\r\n                staticRules = settings.rules;\r\n                existingRules = $.validator.staticRules(element);\r\n                switch (command) {\r\n                    case \"add\":\r\n                        $.extend(existingRules, $.validator.normalizeRule(argument));\r\n\r\n                        // Remove messages from rules, but allow them to be set separately\r\n                        delete existingRules.messages;\r\n                        staticRules[element.name] = existingRules;\r\n                        if (argument.messages) {\r\n                            settings.messages[element.name] = $.extend(settings.messages[element.name], argument.messages);\r\n                        }\r\n                        break;\r\n                    case \"remove\":\r\n                        if (!argument) {\r\n                            delete staticRules[element.name];\r\n                            return existingRules;\r\n                        }\r\n                        filtered = {};\r\n                        $.each(argument.split(/\\s/), function (index, method) {\r\n                            filtered[method] = existingRules[method];\r\n                            delete existingRules[method];\r\n                        });\r\n                        return filtered;\r\n                }\r\n            }\r\n\r\n            data = $.validator.normalizeRules(\r\n                $.extend(\r\n                    {},\r\n                    $.validator.classRules(element),\r\n                    $.validator.attributeRules(element),\r\n                    $.validator.dataRules(element),\r\n                    $.validator.staticRules(element)\r\n                ), element);\r\n\r\n            // Make sure required is at front\r\n            if (data.required) {\r\n                param = data.required;\r\n                delete data.required;\r\n                data = $.extend({ required: param }, data);\r\n            }\r\n\r\n            // Make sure remote is at back\r\n            if (data.remote) {\r\n                param = data.remote;\r\n                delete data.remote;\r\n                data = $.extend(data, { remote: param });\r\n            }\r\n\r\n            return data;\r\n        }\r\n    });\r\n\r\n    // JQuery trim is deprecated, provide a trim method based on String.prototype.trim\r\n    var trim = function (str) {\r\n\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim#Polyfill\r\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\");\r\n    };\r\n\r\n    // Custom selectors\r\n    $.extend($.expr.pseudos || $.expr[\":\"], {\t\t// '|| $.expr[ \":\" ]' here enables backwards compatibility to jQuery 1.7. Can be removed when dropping jQ 1.7.x support\r\n\r\n        // https://jqueryvalidation.org/blank-selector/\r\n        blank: function (a) {\r\n            return !trim(\"\" + $(a).val());\r\n        },\r\n\r\n        // https://jqueryvalidation.org/filled-selector/\r\n        filled: function (a) {\r\n            var val = $(a).val();\r\n            return val !== null && !!trim(\"\" + val);\r\n        },\r\n\r\n        // https://jqueryvalidation.org/unchecked-selector/\r\n        unchecked: function (a) {\r\n            return !$(a).prop(\"checked\");\r\n        }\r\n    });\r\n\r\n    // Constructor for validator\r\n    $.validator = function (options, form) {\r\n        this.settings = $.extend(true, {}, $.validator.defaults, options);\r\n        this.currentForm = form;\r\n        this.init();\r\n    };\r\n\r\n    // https://jqueryvalidation.org/jQuery.validator.format/\r\n    $.validator.format = function (source, params) {\r\n        if (arguments.length === 1) {\r\n            return function () {\r\n                var args = $.makeArray(arguments);\r\n                args.unshift(source);\r\n                return $.validator.format.apply(this, args);\r\n            };\r\n        }\r\n        if (params === undefined) {\r\n            return source;\r\n        }\r\n        if (arguments.length > 2 && params.constructor !== Array) {\r\n            params = $.makeArray(arguments).slice(1);\r\n        }\r\n        if (params.constructor !== Array) {\r\n            params = [params];\r\n        }\r\n        $.each(params, function (i, n) {\r\n            source = source.replace(new RegExp(\"\\\\{\" + i + \"\\\\}\", \"g\"), function () {\r\n                return n;\r\n            });\r\n        });\r\n        return source;\r\n    };\r\n\r\n    $.extend($.validator, {\r\n\r\n        defaults: {\r\n            messages: {},\r\n            groups: {},\r\n            rules: {},\r\n            errorClass: \"error\",\r\n            pendingClass: \"pending\",\r\n            validClass: \"valid\",\r\n            errorElement: \"label\",\r\n            focusCleanup: false,\r\n            focusInvalid: true,\r\n            errorContainer: $([]),\r\n            errorLabelContainer: $([]),\r\n            onsubmit: true,\r\n            ignore: \":hidden\",\r\n            ignoreTitle: false,\r\n            onfocusin: function (element) {\r\n                this.lastActive = element;\r\n\r\n                // Hide error label and remove error class on focus if enabled\r\n                if (this.settings.focusCleanup) {\r\n                    if (this.settings.unhighlight) {\r\n                        this.settings.unhighlight.call(this, element, this.settings.errorClass, this.settings.validClass);\r\n                    }\r\n                    this.hideThese(this.errorsFor(element));\r\n                }\r\n            },\r\n            onfocusout: function (element) {\r\n                if (!this.checkable(element) && (element.name in this.submitted || !this.optional(element))) {\r\n                    this.element(element);\r\n                }\r\n            },\r\n            onkeyup: function (element, event) {\r\n\r\n                // Avoid revalidate the field when pressing one of the following keys\r\n                // Shift       => 16\r\n                // Ctrl        => 17\r\n                // Alt         => 18\r\n                // Caps lock   => 20\r\n                // End         => 35\r\n                // Home        => 36\r\n                // Left arrow  => 37\r\n                // Up arrow    => 38\r\n                // Right arrow => 39\r\n                // Down arrow  => 40\r\n                // Insert      => 45\r\n                // Num lock    => 144\r\n                // AltGr key   => 225\r\n                var excludedKeys = [\r\n                    16, 17, 18, 20, 35, 36, 37,\r\n                    38, 39, 40, 45, 144, 225\r\n                ];\r\n\r\n                if (event.which === 9 && this.elementValue(element) === \"\" || $.inArray(event.keyCode, excludedKeys) !== -1) {\r\n                    return;\r\n                } else if (element.name in this.submitted || element.name in this.invalid) {\r\n                    this.element(element);\r\n                }\r\n            },\r\n            onclick: function (element) {\r\n\r\n                // Click on selects, radiobuttons and checkboxes\r\n                if (element.name in this.submitted) {\r\n                    this.element(element);\r\n\r\n                    // Or option elements, check parent select in that case\r\n                } else if (element.parentNode.name in this.submitted) {\r\n                    this.element(element.parentNode);\r\n                }\r\n            },\r\n            highlight: function (element, errorClass, validClass) {\r\n                if (element.type === \"radio\") {\r\n                    this.findByName(element.name).addClass(errorClass).removeClass(validClass);\r\n                } else {\r\n                    $(element).addClass(errorClass).removeClass(validClass);\r\n                }\r\n            },\r\n            unhighlight: function (element, errorClass, validClass) {\r\n                if (element.type === \"radio\") {\r\n                    this.findByName(element.name).removeClass(errorClass).addClass(validClass);\r\n                } else {\r\n                    $(element).removeClass(errorClass).addClass(validClass);\r\n                }\r\n            }\r\n        },\r\n\r\n        // https://jqueryvalidation.org/jQuery.validator.setDefaults/\r\n        setDefaults: function (settings) {\r\n            $.extend($.validator.defaults, settings);\r\n        },\r\n\r\n        messages: {\r\n            required: \"This field is required.\",\r\n            remote: \"Please fix this field.\",\r\n            email: \"Please enter a valid email address.\",\r\n            url: \"Please enter a valid URL.\",\r\n            date: \"Please enter a valid date.\",\r\n            dateISO: \"Please enter a valid date (ISO).\",\r\n            number: \"Please enter a valid number.\",\r\n            digits: \"Please enter only digits.\",\r\n            equalTo: \"Please enter the same value again.\",\r\n            maxlength: $.validator.format(\"Please enter no more than {0} characters.\"),\r\n            minlength: $.validator.format(\"Please enter at least {0} characters.\"),\r\n            rangelength: $.validator.format(\"Please enter a value between {0} and {1} characters long.\"),\r\n            range: $.validator.format(\"Please enter a value between {0} and {1}.\"),\r\n            max: $.validator.format(\"Please enter a value less than or equal to {0}.\"),\r\n            min: $.validator.format(\"Please enter a value greater than or equal to {0}.\"),\r\n            step: $.validator.format(\"Please enter a multiple of {0}.\")\r\n        },\r\n\r\n        autoCreateRanges: false,\r\n\r\n        prototype: {\r\n\r\n            init: function () {\r\n                this.labelContainer = $(this.settings.errorLabelContainer);\r\n                this.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);\r\n                this.containers = $(this.settings.errorContainer).add(this.settings.errorLabelContainer);\r\n                this.submitted = {};\r\n                this.valueCache = {};\r\n                this.pendingRequest = 0;\r\n                this.pending = {};\r\n                this.invalid = {};\r\n                this.reset();\r\n\r\n                var currentForm = this.currentForm,\r\n                    groups = (this.groups = {}),\r\n                    rules;\r\n                $.each(this.settings.groups, function (key, value) {\r\n                    if (typeof value === \"string\") {\r\n                        value = value.split(/\\s/);\r\n                    }\r\n                    $.each(value, function (index, name) {\r\n                        groups[name] = key;\r\n                    });\r\n                });\r\n                rules = this.settings.rules;\r\n                $.each(rules, function (key, value) {\r\n                    rules[key] = $.validator.normalizeRule(value);\r\n                });\r\n\r\n                function delegate(event) {\r\n                    var isContentEditable = typeof $(this).attr(\"contenteditable\") !== \"undefined\" && $(this).attr(\"contenteditable\") !== \"false\";\r\n\r\n                    // Set form expando on contenteditable\r\n                    if (!this.form && isContentEditable) {\r\n                        this.form = $(this).closest(\"form\")[0];\r\n                        this.name = $(this).attr(\"name\");\r\n                    }\r\n\r\n                    // Ignore the element if it belongs to another form. This will happen mainly\r\n                    // when setting the `form` attribute of an input to the id of another form.\r\n                    if (currentForm !== this.form) {\r\n                        return;\r\n                    }\r\n\r\n                    var validator = $.data(this.form, \"validator\"),\r\n                        eventType = \"on\" + event.type.replace(/^validate/, \"\"),\r\n                        settings = validator.settings;\r\n                    if (settings[eventType] && !$(this).is(settings.ignore)) {\r\n                        settings[eventType].call(validator, this, event);\r\n                    }\r\n                }\r\n\r\n                $(this.currentForm)\r\n                    .on(\"focusin.validate focusout.validate keyup.validate\",\r\n                        \":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], \" +\r\n                        \"[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], \" +\r\n                        \"[type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], \" +\r\n                        \"[type='radio'], [type='checkbox'], [contenteditable], [type='button']\", delegate)\r\n\r\n                    // Support: Chrome, oldIE\r\n                    // \"select\" is provided as event.target when clicking a option\r\n                    .on(\"click.validate\", \"select, option, [type='radio'], [type='checkbox']\", delegate);\r\n\r\n                if (this.settings.invalidHandler) {\r\n                    $(this.currentForm).on(\"invalid-form.validate\", this.settings.invalidHandler);\r\n                }\r\n            },\r\n\r\n            // https://jqueryvalidation.org/Validator.form/\r\n            form: function () {\r\n                this.checkForm();\r\n                $.extend(this.submitted, this.errorMap);\r\n                this.invalid = $.extend({}, this.errorMap);\r\n                if (!this.valid()) {\r\n                    $(this.currentForm).triggerHandler(\"invalid-form\", [this]);\r\n                }\r\n                this.showErrors();\r\n                return this.valid();\r\n            },\r\n\r\n            checkForm: function () {\r\n                this.prepareForm();\r\n                for (var i = 0, elements = (this.currentElements = this.elements()); elements[i]; i++) {\r\n                    this.check(elements[i]);\r\n                }\r\n                return this.valid();\r\n            },\r\n\r\n            // https://jqueryvalidation.org/Validator.element/\r\n            element: function (element) {\r\n                var cleanElement = this.clean(element),\r\n                    checkElement = this.validationTargetFor(cleanElement),\r\n                    v = this,\r\n                    result = true,\r\n                    rs, group;\r\n\r\n                if (checkElement === undefined) {\r\n                    delete this.invalid[cleanElement.name];\r\n                } else {\r\n                    this.prepareElement(checkElement);\r\n                    this.currentElements = $(checkElement);\r\n\r\n                    // If this element is grouped, then validate all group elements already\r\n                    // containing a value\r\n                    group = this.groups[checkElement.name];\r\n                    if (group) {\r\n                        $.each(this.groups, function (name, testgroup) {\r\n                            if (testgroup === group && name !== checkElement.name) {\r\n                                cleanElement = v.validationTargetFor(v.clean(v.findByName(name)));\r\n                                if (cleanElement && cleanElement.name in v.invalid) {\r\n                                    v.currentElements.push(cleanElement);\r\n                                    result = v.check(cleanElement) && result;\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    rs = this.check(checkElement) !== false;\r\n                    result = result && rs;\r\n                    if (rs) {\r\n                        this.invalid[checkElement.name] = false;\r\n                    } else {\r\n                        this.invalid[checkElement.name] = true;\r\n                    }\r\n\r\n                    if (!this.numberOfInvalids()) {\r\n\r\n                        // Hide error containers on last error\r\n                        this.toHide = this.toHide.add(this.containers);\r\n                    }\r\n                    this.showErrors();\r\n\r\n                    // Add aria-invalid status for screen readers\r\n                    $(element).attr(\"aria-invalid\", !rs);\r\n                }\r\n\r\n                return result;\r\n            },\r\n\r\n            // https://jqueryvalidation.org/Validator.showErrors/\r\n            showErrors: function (errors) {\r\n                if (errors) {\r\n                    var validator = this;\r\n\r\n                    // Add items to error list and map\r\n                    $.extend(this.errorMap, errors);\r\n                    this.errorList = $.map(this.errorMap, function (message, name) {\r\n                        return {\r\n                            message: message,\r\n                            element: validator.findByName(name)[0]\r\n                        };\r\n                    });\r\n\r\n                    // Remove items from success list\r\n                    this.successList = $.grep(this.successList, function (element) {\r\n                        return !(element.name in errors);\r\n                    });\r\n                }\r\n                if (this.settings.showErrors) {\r\n                    this.settings.showErrors.call(this, this.errorMap, this.errorList);\r\n                } else {\r\n                    this.defaultShowErrors();\r\n                }\r\n            },\r\n\r\n            // https://jqueryvalidation.org/Validator.resetForm/\r\n            resetForm: function () {\r\n                if ($.fn.resetForm) {\r\n                    $(this.currentForm).resetForm();\r\n                }\r\n                this.invalid = {};\r\n                this.submitted = {};\r\n                this.prepareForm();\r\n                this.hideErrors();\r\n                var elements = this.elements()\r\n                    .removeData(\"previousValue\")\r\n                    .removeAttr(\"aria-invalid\");\r\n\r\n                this.resetElements(elements);\r\n            },\r\n\r\n            resetElements: function (elements) {\r\n                var i;\r\n\r\n                if (this.settings.unhighlight) {\r\n                    for (i = 0; elements[i]; i++) {\r\n                        this.settings.unhighlight.call(this, elements[i],\r\n                            this.settings.errorClass, \"\");\r\n                        this.findByName(elements[i].name).removeClass(this.settings.validClass);\r\n                    }\r\n                } else {\r\n                    elements\r\n                        .removeClass(this.settings.errorClass)\r\n                        .removeClass(this.settings.validClass);\r\n                }\r\n            },\r\n\r\n            numberOfInvalids: function () {\r\n                return this.objectLength(this.invalid);\r\n            },\r\n\r\n            objectLength: function (obj) {\r\n                /* jshint unused: false */\r\n                var count = 0,\r\n                    i;\r\n                for (i in obj) {\r\n\r\n                    // This check allows counting elements with empty error\r\n                    // message as invalid elements\r\n                    if (obj[i] !== undefined && obj[i] !== null && obj[i] !== false) {\r\n                        count++;\r\n                    }\r\n                }\r\n                return count;\r\n            },\r\n\r\n            hideErrors: function () {\r\n                this.hideThese(this.toHide);\r\n            },\r\n\r\n            hideThese: function (errors) {\r\n                errors.not(this.containers).text(\"\");\r\n                this.addWrapper(errors).hide();\r\n            },\r\n\r\n            valid: function () {\r\n                return this.size() === 0;\r\n            },\r\n\r\n            size: function () {\r\n                return this.errorList.length;\r\n            },\r\n\r\n            focusInvalid: function () {\r\n                if (this.settings.focusInvalid) {\r\n                    try {\r\n                        $(this.findLastActive() || this.errorList.length && this.errorList[0].element || [])\r\n                            .filter(\":visible\")\r\n                            .trigger(\"focus\")\r\n\r\n                            // Manually trigger focusin event; without it, focusin handler isn't called, findLastActive won't have anything to find\r\n                            .trigger(\"focusin\");\r\n                    } catch (e) {\r\n\r\n                        // Ignore IE throwing errors when focusing hidden elements\r\n                    }\r\n                }\r\n            },\r\n\r\n            findLastActive: function () {\r\n                var lastActive = this.lastActive;\r\n                return lastActive && $.grep(this.errorList, function (n) {\r\n                    return n.element.name === lastActive.name;\r\n                }).length === 1 && lastActive;\r\n            },\r\n\r\n            elements: function () {\r\n                var validator = this,\r\n                    rulesCache = {};\r\n\r\n                // Select all valid inputs inside the form (no submit or reset buttons)\r\n                return $(this.currentForm)\r\n                    .find(\"input, select, textarea, [contenteditable]\")\r\n                    .not(\":submit, :reset, :image, :disabled\")\r\n                    .not(this.settings.ignore)\r\n                    .filter(function () {\r\n                        var name = this.name || $(this).attr(\"name\"); // For contenteditable\r\n                        var isContentEditable = typeof $(this).attr(\"contenteditable\") !== \"undefined\" && $(this).attr(\"contenteditable\") !== \"false\";\r\n\r\n                        if (!name && validator.settings.debug && window.console) {\r\n                            console.error(\"%o has no name assigned\", this);\r\n                        }\r\n\r\n                        // Set form expando on contenteditable\r\n                        if (isContentEditable) {\r\n                            this.form = $(this).closest(\"form\")[0];\r\n                            this.name = name;\r\n                        }\r\n\r\n                        // Ignore elements that belong to other/nested forms\r\n                        if (this.form !== validator.currentForm) {\r\n                            return false;\r\n                        }\r\n\r\n                        // Select only the first element for each name, and only those with rules specified\r\n                        if (name in rulesCache || !validator.objectLength($(this).rules())) {\r\n                            return false;\r\n                        }\r\n\r\n                        rulesCache[name] = true;\r\n                        return true;\r\n                    });\r\n            },\r\n\r\n            clean: function (selector) {\r\n                return $(selector)[0];\r\n            },\r\n\r\n            errors: function () {\r\n                var errorClass = this.settings.errorClass.split(\" \").join(\".\");\r\n                return $(this.settings.errorElement + \".\" + errorClass, this.errorContext);\r\n            },\r\n\r\n            resetInternals: function () {\r\n                this.successList = [];\r\n                this.errorList = [];\r\n                this.errorMap = {};\r\n                this.toShow = $([]);\r\n                this.toHide = $([]);\r\n            },\r\n\r\n            reset: function () {\r\n                this.resetInternals();\r\n                this.currentElements = $([]);\r\n            },\r\n\r\n            prepareForm: function () {\r\n                this.reset();\r\n                this.toHide = this.errors().add(this.containers);\r\n            },\r\n\r\n            prepareElement: function (element) {\r\n                this.reset();\r\n                this.toHide = this.errorsFor(element);\r\n            },\r\n\r\n            elementValue: function (element) {\r\n                var $element = $(element),\r\n                    type = element.type,\r\n                    isContentEditable = typeof $element.attr(\"contenteditable\") !== \"undefined\" && $element.attr(\"contenteditable\") !== \"false\",\r\n                    val, idx;\r\n\r\n                if (type === \"radio\" || type === \"checkbox\") {\r\n                    return this.findByName(element.name).filter(\":checked\").val();\r\n                } else if (type === \"number\" && typeof element.validity !== \"undefined\") {\r\n                    return element.validity.badInput ? \"NaN\" : $element.val();\r\n                }\r\n\r\n                if (isContentEditable) {\r\n                    val = $element.text();\r\n                } else {\r\n                    val = $element.val();\r\n                }\r\n\r\n                if (type === \"file\") {\r\n\r\n                    // Modern browser (chrome & safari)\r\n                    if (val.substr(0, 12) === \"C:\\\\fakepath\\\\\") {\r\n                        return val.substr(12);\r\n                    }\r\n\r\n                    // Legacy browsers\r\n                    // Unix-based path\r\n                    idx = val.lastIndexOf(\"/\");\r\n                    if (idx >= 0) {\r\n                        return val.substr(idx + 1);\r\n                    }\r\n\r\n                    // Windows-based path\r\n                    idx = val.lastIndexOf(\"\\\\\");\r\n                    if (idx >= 0) {\r\n                        return val.substr(idx + 1);\r\n                    }\r\n\r\n                    // Just the file name\r\n                    return val;\r\n                }\r\n\r\n                if (typeof val === \"string\") {\r\n                    return val.replace(/\\r/g, \"\");\r\n                }\r\n                return val;\r\n            },\r\n\r\n            check: function (element) {\r\n                element = this.validationTargetFor(this.clean(element));\r\n\r\n                var rules = $(element).rules(),\r\n                    rulesCount = $.map(rules, function (n, i) {\r\n                        return i;\r\n                    }).length,\r\n                    dependencyMismatch = false,\r\n                    val = this.elementValue(element),\r\n                    result, method, rule, normalizer;\r\n\r\n                // Prioritize the local normalizer defined for this element over the global one\r\n                // if the former exists, otherwise user the global one in case it exists.\r\n                if (typeof rules.normalizer === \"function\") {\r\n                    normalizer = rules.normalizer;\r\n                } else if (typeof this.settings.normalizer === \"function\") {\r\n                    normalizer = this.settings.normalizer;\r\n                }\r\n\r\n                // If normalizer is defined, then call it to retreive the changed value instead\r\n                // of using the real one.\r\n                // Note that `this` in the normalizer is `element`.\r\n                if (normalizer) {\r\n                    val = normalizer.call(element, val);\r\n\r\n                    // Delete the normalizer from rules to avoid treating it as a pre-defined method.\r\n                    delete rules.normalizer;\r\n                }\r\n\r\n                for (method in rules) {\r\n                    rule = { method: method, parameters: rules[method] };\r\n                    try {\r\n                        result = $.validator.methods[method].call(this, val, element, rule.parameters);\r\n\r\n                        // If a method indicates that the field is optional and therefore valid,\r\n                        // don't mark it as valid when there are no other rules\r\n                        if (result === \"dependency-mismatch\" && rulesCount === 1) {\r\n                            dependencyMismatch = true;\r\n                            continue;\r\n                        }\r\n                        dependencyMismatch = false;\r\n\r\n                        if (result === \"pending\") {\r\n                            this.toHide = this.toHide.not(this.errorsFor(element));\r\n                            return;\r\n                        }\r\n\r\n                        if (!result) {\r\n                            this.formatAndAdd(element, rule);\r\n                            return false;\r\n                        }\r\n                    } catch (e) {\r\n                        if (this.settings.debug && window.console) {\r\n                            console.log(\"Exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method.\", e);\r\n                        }\r\n                        if (e instanceof TypeError) {\r\n                            e.message += \".  Exception occurred when checking element \" + element.id + \", check the '\" + rule.method + \"' method.\";\r\n                        }\r\n\r\n                        throw e;\r\n                    }\r\n                }\r\n                if (dependencyMismatch) {\r\n                    return;\r\n                }\r\n                if (this.objectLength(rules)) {\r\n                    this.successList.push(element);\r\n                }\r\n                return true;\r\n            },\r\n\r\n            // Return the custom message for the given element and validation method\r\n            // specified in the element's HTML5 data attribute\r\n            // return the generic message if present and no method specific message is present\r\n            customDataMessage: function (element, method) {\r\n                return $(element).data(\"msg\" + method.charAt(0).toUpperCase() +\r\n                    method.substring(1).toLowerCase()) || $(element).data(\"msg\");\r\n            },\r\n\r\n            // Return the custom message for the given element name and validation method\r\n            customMessage: function (name, method) {\r\n                var m = this.settings.messages[name];\r\n                return m && (m.constructor === String ? m : m[method]);\r\n            },\r\n\r\n            // Return the first defined argument, allowing empty strings\r\n            findDefined: function () {\r\n                for (var i = 0; i < arguments.length; i++) {\r\n                    if (arguments[i] !== undefined) {\r\n                        return arguments[i];\r\n                    }\r\n                }\r\n                return undefined;\r\n            },\r\n\r\n            // The second parameter 'rule' used to be a string, and extended to an object literal\r\n            // of the following form:\r\n            // rule = {\r\n            //     method: \"method name\",\r\n            //     parameters: \"the given method parameters\"\r\n            // }\r\n            //\r\n            // The old behavior still supported, kept to maintain backward compatibility with\r\n            // old code, and will be removed in the next major release.\r\n            defaultMessage: function (element, rule) {\r\n                if (typeof rule === \"string\") {\r\n                    rule = { method: rule };\r\n                }\r\n\r\n                var message = this.findDefined(\r\n                    this.customMessage(element.name, rule.method),\r\n                    this.customDataMessage(element, rule.method),\r\n\r\n                    // 'title' is never undefined, so handle empty string as undefined\r\n                    !this.settings.ignoreTitle && element.title || undefined,\r\n                    $.validator.messages[rule.method],\r\n                    \"<strong>Warning: No message defined for \" + element.name + \"</strong>\"\r\n                ),\r\n                    theregex = /\\$?\\{(\\d+)\\}/g;\r\n                if (typeof message === \"function\") {\r\n                    message = message.call(this, rule.parameters, element);\r\n                } else if (theregex.test(message)) {\r\n                    message = $.validator.format(message.replace(theregex, \"{$1}\"), rule.parameters);\r\n                }\r\n\r\n                return message;\r\n            },\r\n\r\n            formatAndAdd: function (element, rule) {\r\n                var message = this.defaultMessage(element, rule);\r\n\r\n                this.errorList.push({\r\n                    message: message,\r\n                    element: element,\r\n                    method: rule.method\r\n                });\r\n\r\n                this.errorMap[element.name] = message;\r\n                this.submitted[element.name] = message;\r\n            },\r\n\r\n            addWrapper: function (toToggle) {\r\n                if (this.settings.wrapper) {\r\n                    toToggle = toToggle.add(toToggle.parent(this.settings.wrapper));\r\n                }\r\n                return toToggle;\r\n            },\r\n\r\n            defaultShowErrors: function () {\r\n                var i, elements, error;\r\n                for (i = 0; this.errorList[i]; i++) {\r\n                    error = this.errorList[i];\r\n                    if (this.settings.highlight) {\r\n                        this.settings.highlight.call(this, error.element, this.settings.errorClass, this.settings.validClass);\r\n                    }\r\n                    this.showLabel(error.element, error.message);\r\n                }\r\n                if (this.errorList.length) {\r\n                    this.toShow = this.toShow.add(this.containers);\r\n                }\r\n                if (this.settings.success) {\r\n                    for (i = 0; this.successList[i]; i++) {\r\n                        this.showLabel(this.successList[i]);\r\n                    }\r\n                }\r\n                if (this.settings.unhighlight) {\r\n                    for (i = 0, elements = this.validElements(); elements[i]; i++) {\r\n                        this.settings.unhighlight.call(this, elements[i], this.settings.errorClass, this.settings.validClass);\r\n                    }\r\n                }\r\n                this.toHide = this.toHide.not(this.toShow);\r\n                this.hideErrors();\r\n                this.addWrapper(this.toShow).show();\r\n            },\r\n\r\n            validElements: function () {\r\n                return this.currentElements.not(this.invalidElements());\r\n            },\r\n\r\n            invalidElements: function () {\r\n                return $(this.errorList).map(function () {\r\n                    return this.element;\r\n                });\r\n            },\r\n\r\n            showLabel: function (element, message) {\r\n                var place, group, errorID, v,\r\n                    error = this.errorsFor(element),\r\n                    elementID = this.idOrName(element),\r\n                    describedBy = $(element).attr(\"aria-describedby\");\r\n\r\n                if (error.length) {\r\n\r\n                    // Refresh error/success class\r\n                    error.removeClass(this.settings.validClass).addClass(this.settings.errorClass);\r\n\r\n                    // Replace message on existing label\r\n                    error.html(message);\r\n                } else {\r\n\r\n                    // Create error element\r\n                    error = $(\"<\" + this.settings.errorElement + \">\")\r\n                        .attr(\"id\", elementID + \"-error\")\r\n                        .addClass(this.settings.errorClass)\r\n                        .html(message || \"\");\r\n\r\n                    // Maintain reference to the element to be placed into the DOM\r\n                    place = error;\r\n                    if (this.settings.wrapper) {\r\n\r\n                        // Make sure the element is visible, even in IE\r\n                        // actually showing the wrapped element is handled elsewhere\r\n                        place = error.hide().show().wrap(\"<\" + this.settings.wrapper + \"/>\").parent();\r\n                    }\r\n                    if (this.labelContainer.length) {\r\n                        this.labelContainer.append(place);\r\n                    } else if (this.settings.errorPlacement) {\r\n                        this.settings.errorPlacement.call(this, place, $(element));\r\n                    } else {\r\n                        place.insertAfter(element);\r\n                    }\r\n\r\n                    // Link error back to the element\r\n                    if (error.is(\"label\")) {\r\n\r\n                        // If the error is a label, then associate using 'for'\r\n                        error.attr(\"for\", elementID);\r\n\r\n                        // If the element is not a child of an associated label, then it's necessary\r\n                        // to explicitly apply aria-describedby\r\n                    } else if (error.parents(\"label[for='\" + this.escapeCssMeta(elementID) + \"']\").length === 0) {\r\n                        errorID = error.attr(\"id\");\r\n\r\n                        // Respect existing non-error aria-describedby\r\n                        if (!describedBy) {\r\n                            describedBy = errorID;\r\n                        } else if (!describedBy.match(new RegExp(\"\\\\b\" + this.escapeCssMeta(errorID) + \"\\\\b\"))) {\r\n\r\n                            // Add to end of list if not already present\r\n                            describedBy += \" \" + errorID;\r\n                        }\r\n                        $(element).attr(\"aria-describedby\", describedBy);\r\n\r\n                        // If this element is grouped, then assign to all elements in the same group\r\n                        group = this.groups[element.name];\r\n                        if (group) {\r\n                            v = this;\r\n                            $.each(v.groups, function (name, testgroup) {\r\n                                if (testgroup === group) {\r\n                                    $(\"[name='\" + v.escapeCssMeta(name) + \"']\", v.currentForm)\r\n                                        .attr(\"aria-describedby\", error.attr(\"id\"));\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                if (!message && this.settings.success) {\r\n                    error.text(\"\");\r\n                    if (typeof this.settings.success === \"string\") {\r\n                        error.addClass(this.settings.success);\r\n                    } else {\r\n                        this.settings.success(error, element);\r\n                    }\r\n                }\r\n                this.toShow = this.toShow.add(error);\r\n            },\r\n\r\n            errorsFor: function (element) {\r\n                var name = this.escapeCssMeta(this.idOrName(element)),\r\n                    describer = $(element).attr(\"aria-describedby\"),\r\n                    selector = \"label[for='\" + name + \"'], label[for='\" + name + \"'] *\";\r\n\r\n                // 'aria-describedby' should directly reference the error element\r\n                if (describer) {\r\n                    selector = selector + \", #\" + this.escapeCssMeta(describer)\r\n                        .replace(/\\s+/g, \", #\");\r\n                }\r\n\r\n                return this\r\n                    .errors()\r\n                    .filter(selector);\r\n            },\r\n\r\n            // See https://api.jquery.com/category/selectors/, for CSS\r\n            // meta-characters that should be escaped in order to be used with JQuery\r\n            // as a literal part of a name/id or any selector.\r\n            escapeCssMeta: function (string) {\r\n                return string.replace(/([\\\\!\"#$%&'()*+,./:;<=>?@\\[\\]^`{|}~])/g, \"\\\\$1\");\r\n            },\r\n\r\n            idOrName: function (element) {\r\n                return this.groups[element.name] || (this.checkable(element) ? element.name : element.id || element.name);\r\n            },\r\n\r\n            validationTargetFor: function (element) {\r\n\r\n                // If radio/checkbox, validate first element in group instead\r\n                if (this.checkable(element)) {\r\n                    element = this.findByName(element.name);\r\n                }\r\n\r\n                // Always apply ignore filter\r\n                return $(element).not(this.settings.ignore)[0];\r\n            },\r\n\r\n            checkable: function (element) {\r\n                return (/radio|checkbox/i).test(element.type);\r\n            },\r\n\r\n            findByName: function (name) {\r\n                return $(this.currentForm).find(\"[name='\" + this.escapeCssMeta(name) + \"']\");\r\n            },\r\n\r\n            getLength: function (value, element) {\r\n                switch (element.nodeName.toLowerCase()) {\r\n                    case \"select\":\r\n                        return $(\"option:selected\", element).length;\r\n                    case \"input\":\r\n                        if (this.checkable(element)) {\r\n                            return this.findByName(element.name).filter(\":checked\").length;\r\n                        }\r\n                }\r\n                return value.length;\r\n            },\r\n\r\n            depend: function (param, element) {\r\n                return this.dependTypes[typeof param] ? this.dependTypes[typeof param](param, element) : true;\r\n            },\r\n\r\n            dependTypes: {\r\n                \"boolean\": function (param) {\r\n                    return param;\r\n                },\r\n                \"string\": function (param, element) {\r\n                    return !!$(param, element.form).length;\r\n                },\r\n                \"function\": function (param, element) {\r\n                    return param(element);\r\n                }\r\n            },\r\n\r\n            optional: function (element) {\r\n                var val = this.elementValue(element);\r\n                return !$.validator.methods.required.call(this, val, element) && \"dependency-mismatch\";\r\n            },\r\n\r\n            startRequest: function (element) {\r\n                if (!this.pending[element.name]) {\r\n                    this.pendingRequest++;\r\n                    $(element).addClass(this.settings.pendingClass);\r\n                    this.pending[element.name] = true;\r\n                }\r\n            },\r\n\r\n            stopRequest: function (element, valid) {\r\n                this.pendingRequest--;\r\n\r\n                // Sometimes synchronization fails, make sure pendingRequest is never < 0\r\n                if (this.pendingRequest < 0) {\r\n                    this.pendingRequest = 0;\r\n                }\r\n                delete this.pending[element.name];\r\n                $(element).removeClass(this.settings.pendingClass);\r\n                if (valid && this.pendingRequest === 0 && this.formSubmitted && this.form()) {\r\n                    $(this.currentForm).submit();\r\n\r\n                    // Remove the hidden input that was used as a replacement for the\r\n                    // missing submit button. The hidden input is added by `handle()`\r\n                    // to ensure that the value of the used submit button is passed on\r\n                    // for scripted submits triggered by this method\r\n                    if (this.submitButton) {\r\n                        $(\"input:hidden[name='\" + this.submitButton.name + \"']\", this.currentForm).remove();\r\n                    }\r\n\r\n                    this.formSubmitted = false;\r\n                } else if (!valid && this.pendingRequest === 0 && this.formSubmitted) {\r\n                    $(this.currentForm).triggerHandler(\"invalid-form\", [this]);\r\n                    this.formSubmitted = false;\r\n                }\r\n            },\r\n\r\n            previousValue: function (element, method) {\r\n                method = typeof method === \"string\" && method || \"remote\";\r\n\r\n                return $.data(element, \"previousValue\") || $.data(element, \"previousValue\", {\r\n                    old: null,\r\n                    valid: true,\r\n                    message: this.defaultMessage(element, { method: method })\r\n                });\r\n            },\r\n\r\n            // Cleans up all forms and elements, removes validator-specific events\r\n            destroy: function () {\r\n                this.resetForm();\r\n\r\n                $(this.currentForm)\r\n                    .off(\".validate\")\r\n                    .removeData(\"validator\")\r\n                    .find(\".validate-equalTo-blur\")\r\n                    .off(\".validate-equalTo\")\r\n                    .removeClass(\"validate-equalTo-blur\")\r\n                    .find(\".validate-lessThan-blur\")\r\n                    .off(\".validate-lessThan\")\r\n                    .removeClass(\"validate-lessThan-blur\")\r\n                    .find(\".validate-lessThanEqual-blur\")\r\n                    .off(\".validate-lessThanEqual\")\r\n                    .removeClass(\"validate-lessThanEqual-blur\")\r\n                    .find(\".validate-greaterThanEqual-blur\")\r\n                    .off(\".validate-greaterThanEqual\")\r\n                    .removeClass(\"validate-greaterThanEqual-blur\")\r\n                    .find(\".validate-greaterThan-blur\")\r\n                    .off(\".validate-greaterThan\")\r\n                    .removeClass(\"validate-greaterThan-blur\");\r\n            }\r\n\r\n        },\r\n\r\n        classRuleSettings: {\r\n            required: { required: true },\r\n            email: { email: true },\r\n            url: { url: true },\r\n            date: { date: true },\r\n            dateISO: { dateISO: true },\r\n            number: { number: true },\r\n            digits: { digits: true },\r\n            creditcard: { creditcard: true }\r\n        },\r\n\r\n        addClassRules: function (className, rules) {\r\n            if (className.constructor === String) {\r\n                this.classRuleSettings[className] = rules;\r\n            } else {\r\n                $.extend(this.classRuleSettings, className);\r\n            }\r\n        },\r\n\r\n        classRules: function (element) {\r\n            var rules = {},\r\n                classes = $(element).attr(\"class\");\r\n\r\n            if (classes) {\r\n                $.each(classes.split(\" \"), function () {\r\n                    if (this in $.validator.classRuleSettings) {\r\n                        $.extend(rules, $.validator.classRuleSettings[this]);\r\n                    }\r\n                });\r\n            }\r\n            return rules;\r\n        },\r\n\r\n        normalizeAttributeRule: function (rules, type, method, value) {\r\n\r\n            // Convert the value to a number for number inputs, and for text for backwards compability\r\n            // allows type=\"date\" and others to be compared as strings\r\n            if (/min|max|step/.test(method) && (type === null || /number|range|text/.test(type))) {\r\n                value = Number(value);\r\n\r\n                // Support Opera Mini, which returns NaN for undefined minlength\r\n                if (isNaN(value)) {\r\n                    value = undefined;\r\n                }\r\n            }\r\n\r\n            if (value || value === 0) {\r\n                rules[method] = value;\r\n            } else if (type === method && type !== \"range\") {\r\n\r\n                // Exception: the jquery validate 'range' method\r\n                // does not test for the html5 'range' type\r\n                rules[method] = true;\r\n            }\r\n        },\r\n\r\n        attributeRules: function (element) {\r\n            var rules = {},\r\n                $element = $(element),\r\n                type = element.getAttribute(\"type\"),\r\n                method, value;\r\n\r\n            for (method in $.validator.methods) {\r\n\r\n                // Support for <input required> in both html5 and older browsers\r\n                if (method === \"required\") {\r\n                    value = element.getAttribute(method);\r\n\r\n                    // Some browsers return an empty string for the required attribute\r\n                    // and non-HTML5 browsers might have required=\"\" markup\r\n                    if (value === \"\") {\r\n                        value = true;\r\n                    }\r\n\r\n                    // Force non-HTML5 browsers to return bool\r\n                    value = !!value;\r\n                } else {\r\n                    value = $element.attr(method);\r\n                }\r\n\r\n                this.normalizeAttributeRule(rules, type, method, value);\r\n            }\r\n\r\n            // 'maxlength' may be returned as -1, 2147483647 ( IE ) and 524288 ( safari ) for text inputs\r\n            if (rules.maxlength && /-1|2147483647|524288/.test(rules.maxlength)) {\r\n                delete rules.maxlength;\r\n            }\r\n\r\n            return rules;\r\n        },\r\n\r\n        dataRules: function (element) {\r\n            var rules = {},\r\n                $element = $(element),\r\n                type = element.getAttribute(\"type\"),\r\n                method, value;\r\n\r\n            for (method in $.validator.methods) {\r\n                value = $element.data(\"rule\" + method.charAt(0).toUpperCase() + method.substring(1).toLowerCase());\r\n\r\n                // Cast empty attributes like `data-rule-required` to `true`\r\n                if (value === \"\") {\r\n                    value = true;\r\n                }\r\n\r\n                this.normalizeAttributeRule(rules, type, method, value);\r\n            }\r\n            return rules;\r\n        },\r\n\r\n        staticRules: function (element) {\r\n            var rules = {},\r\n                validator = $.data(element.form, \"validator\");\r\n\r\n            if (validator.settings.rules) {\r\n                rules = $.validator.normalizeRule(validator.settings.rules[element.name]) || {};\r\n            }\r\n            return rules;\r\n        },\r\n\r\n        normalizeRules: function (rules, element) {\r\n\r\n            // Handle dependency check\r\n            $.each(rules, function (prop, val) {\r\n\r\n                // Ignore rule when param is explicitly false, eg. required:false\r\n                if (val === false) {\r\n                    delete rules[prop];\r\n                    return;\r\n                }\r\n                if (val.param || val.depends) {\r\n                    var keepRule = true;\r\n                    switch (typeof val.depends) {\r\n                        case \"string\":\r\n                            keepRule = !!$(val.depends, element.form).length;\r\n                            break;\r\n                        case \"function\":\r\n                            keepRule = val.depends.call(element, element);\r\n                            break;\r\n                    }\r\n                    if (keepRule) {\r\n                        rules[prop] = val.param !== undefined ? val.param : true;\r\n                    } else {\r\n                        $.data(element.form, \"validator\").resetElements($(element));\r\n                        delete rules[prop];\r\n                    }\r\n                }\r\n            });\r\n\r\n            // Evaluate parameters\r\n            $.each(rules, function (rule, parameter) {\r\n                rules[rule] = $.isFunction(parameter) && rule !== \"normalizer\" ? parameter(element) : parameter;\r\n            });\r\n\r\n            // Clean number parameters\r\n            $.each([\"minlength\", \"maxlength\"], function () {\r\n                if (rules[this]) {\r\n                    rules[this] = Number(rules[this]);\r\n                }\r\n            });\r\n            $.each([\"rangelength\", \"range\"], function () {\r\n                var parts;\r\n                if (rules[this]) {\r\n                    if (Array.isArray(rules[this])) {\r\n                        rules[this] = [Number(rules[this][0]), Number(rules[this][1])];\r\n                    } else if (typeof rules[this] === \"string\") {\r\n                        parts = rules[this].replace(/[\\[\\]]/g, \"\").split(/[\\s,]+/);\r\n                        rules[this] = [Number(parts[0]), Number(parts[1])];\r\n                    }\r\n                }\r\n            });\r\n\r\n            if ($.validator.autoCreateRanges) {\r\n\r\n                // Auto-create ranges\r\n                if (rules.min != null && rules.max != null) {\r\n                    rules.range = [rules.min, rules.max];\r\n                    delete rules.min;\r\n                    delete rules.max;\r\n                }\r\n                if (rules.minlength != null && rules.maxlength != null) {\r\n                    rules.rangelength = [rules.minlength, rules.maxlength];\r\n                    delete rules.minlength;\r\n                    delete rules.maxlength;\r\n                }\r\n            }\r\n\r\n            return rules;\r\n        },\r\n\r\n        // Converts a simple string to a {string: true} rule, e.g., \"required\" to {required:true}\r\n        normalizeRule: function (data) {\r\n            if (typeof data === \"string\") {\r\n                var transformed = {};\r\n                $.each(data.split(/\\s/), function () {\r\n                    transformed[this] = true;\r\n                });\r\n                data = transformed;\r\n            }\r\n            return data;\r\n        },\r\n\r\n        // https://jqueryvalidation.org/jQuery.validator.addMethod/\r\n        addMethod: function (name, method, message) {\r\n            $.validator.methods[name] = method;\r\n            $.validator.messages[name] = message !== undefined ? message : $.validator.messages[name];\r\n            if (method.length < 3) {\r\n                $.validator.addClassRules(name, $.validator.normalizeRule(name));\r\n            }\r\n        },\r\n\r\n        // https://jqueryvalidation.org/jQuery.validator.methods/\r\n        methods: {\r\n\r\n            // https://jqueryvalidation.org/required-method/\r\n            required: function (value, element, param) {\r\n\r\n                // Check if dependency is met\r\n                if (!this.depend(param, element)) {\r\n                    return \"dependency-mismatch\";\r\n                }\r\n                if (element.nodeName.toLowerCase() === \"select\") {\r\n\r\n                    // Could be an array for select-multiple or a string, both are fine this way\r\n                    var val = $(element).val();\r\n                    return val && val.length > 0;\r\n                }\r\n                if (this.checkable(element)) {\r\n                    return this.getLength(value, element) > 0;\r\n                }\r\n                return value !== undefined && value !== null && value.length > 0;\r\n            },\r\n\r\n            // https://jqueryvalidation.org/email-method/\r\n            email: function (value, element) {\r\n\r\n                // From https://html.spec.whatwg.org/multipage/forms.html#valid-e-mail-address\r\n                // Retrieved 2014-01-14\r\n                // If you have a problem with this implementation, report a bug against the above spec\r\n                // Or use custom methods to implement your own email validation\r\n                return this.optional(element) || /^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value);\r\n            },\r\n\r\n            // https://jqueryvalidation.org/url-method/\r\n            url: function (value, element) {\r\n\r\n                // Copyright (c) 2010-2013 Diego Perini, MIT licensed\r\n                // https://gist.github.com/dperini/729294\r\n                // see also https://mathiasbynens.be/demo/url-regex\r\n                // modified to allow protocol-relative URLs\r\n                return this.optional(element) || /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(value);\r\n            },\r\n\r\n            // https://jqueryvalidation.org/date-method/\r\n            date: (function () {\r\n                var called = false;\r\n\r\n                return function (value, element) {\r\n                    if (!called) {\r\n                        called = true;\r\n                        if (this.settings.debug && window.console) {\r\n                            console.warn(\r\n                                \"The `date` method is deprecated and will be removed in version '2.0.0'.\\n\" +\r\n                                \"Please don't use it, since it relies on the Date constructor, which\\n\" +\r\n                                \"behaves very differently across browsers and locales. Use `dateISO`\\n\" +\r\n                                \"instead or one of the locale specific methods in `localizations/`\\n\" +\r\n                                \"and `additional-methods.js`.\"\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString());\r\n                };\r\n            }()),\r\n\r\n            // https://jqueryvalidation.org/dateISO-method/\r\n            dateISO: function (value, element) {\r\n                return this.optional(element) || /^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])$/.test(value);\r\n            },\r\n\r\n            // https://jqueryvalidation.org/number-method/\r\n            number: function (value, element) {\r\n                return this.optional(element) || /^(?:-?\\d+|-?\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test(value);\r\n            },\r\n\r\n            // https://jqueryvalidation.org/digits-method/\r\n            digits: function (value, element) {\r\n                return this.optional(element) || /^\\d+$/.test(value);\r\n            },\r\n\r\n            // https://jqueryvalidation.org/minlength-method/\r\n            minlength: function (value, element, param) {\r\n                var length = Array.isArray(value) ? value.length : this.getLength(value, element);\r\n                return this.optional(element) || length >= param;\r\n            },\r\n\r\n            // https://jqueryvalidation.org/maxlength-method/\r\n            maxlength: function (value, element, param) {\r\n                var length = Array.isArray(value) ? value.length : this.getLength(value, element);\r\n                return this.optional(element) || length <= param;\r\n            },\r\n\r\n            // https://jqueryvalidation.org/rangelength-method/\r\n            rangelength: function (value, element, param) {\r\n                var length = Array.isArray(value) ? value.length : this.getLength(value, element);\r\n                return this.optional(element) || (length >= param[0] && length <= param[1]);\r\n            },\r\n\r\n            // https://jqueryvalidation.org/min-method/\r\n            min: function (value, element, param) {\r\n                return this.optional(element) || value >= param;\r\n            },\r\n\r\n            // https://jqueryvalidation.org/max-method/\r\n            max: function (value, element, param) {\r\n                return this.optional(element) || value <= param;\r\n            },\r\n\r\n            // https://jqueryvalidation.org/range-method/\r\n            range: function (value, element, param) {\r\n                return this.optional(element) || (value >= param[0] && value <= param[1]);\r\n            },\r\n\r\n            // https://jqueryvalidation.org/step-method/\r\n            step: function (value, element, param) {\r\n                var type = $(element).attr(\"type\"),\r\n                    errorMessage = \"Step attribute on input type \" + type + \" is not supported.\",\r\n                    supportedTypes = [\"text\", \"number\", \"range\"],\r\n                    re = new RegExp(\"\\\\b\" + type + \"\\\\b\"),\r\n                    notSupported = type && !re.test(supportedTypes.join()),\r\n                    decimalPlaces = function (num) {\r\n                        var match = (\"\" + num).match(/(?:\\.(\\d+))?$/);\r\n                        if (!match) {\r\n                            return 0;\r\n                        }\r\n\r\n                        // Number of digits right of decimal point.\r\n                        return match[1] ? match[1].length : 0;\r\n                    },\r\n                    toInt = function (num) {\r\n                        return Math.round(num * Math.pow(10, decimals));\r\n                    },\r\n                    valid = true,\r\n                    decimals;\r\n\r\n                // Works only for text, number and range input types\r\n                // TODO find a way to support input types date, datetime, datetime-local, month, time and week\r\n                if (notSupported) {\r\n                    throw new Error(errorMessage);\r\n                }\r\n\r\n                decimals = decimalPlaces(param);\r\n\r\n                // Value can't have too many decimals\r\n                if (decimalPlaces(value) > decimals || toInt(value) % toInt(param) !== 0) {\r\n                    valid = false;\r\n                }\r\n\r\n                return this.optional(element) || valid;\r\n            },\r\n\r\n            // https://jqueryvalidation.org/equalTo-method/\r\n            equalTo: function (value, element, param) {\r\n\r\n                // Bind to the blur event of the target in order to revalidate whenever the target field is updated\r\n                var target = $(param);\r\n                if (this.settings.onfocusout && target.not(\".validate-equalTo-blur\").length) {\r\n                    target.addClass(\"validate-equalTo-blur\").on(\"blur.validate-equalTo\", function () {\r\n                        $(element).valid();\r\n                    });\r\n                }\r\n                return value === target.val();\r\n            },\r\n\r\n            // https://jqueryvalidation.org/remote-method/\r\n            remote: function (value, element, param, method) {\r\n                if (this.optional(element)) {\r\n                    return \"dependency-mismatch\";\r\n                }\r\n\r\n                method = typeof method === \"string\" && method || \"remote\";\r\n\r\n                var previous = this.previousValue(element, method),\r\n                    validator, data, optionDataString;\r\n\r\n                if (!this.settings.messages[element.name]) {\r\n                    this.settings.messages[element.name] = {};\r\n                }\r\n                previous.originalMessage = previous.originalMessage || this.settings.messages[element.name][method];\r\n                this.settings.messages[element.name][method] = previous.message;\r\n\r\n                param = typeof param === \"string\" && { url: param } || param;\r\n                optionDataString = $.param($.extend({ data: value }, param.data));\r\n                if (previous.old === optionDataString) {\r\n                    return previous.valid;\r\n                }\r\n\r\n                previous.old = optionDataString;\r\n                validator = this;\r\n                this.startRequest(element);\r\n                data = {};\r\n                data[element.name] = value;\r\n                $.ajax($.extend(true, {\r\n                    mode: \"abort\",\r\n                    port: \"validate\" + element.name,\r\n                    dataType: \"json\",\r\n                    data: data,\r\n                    context: validator.currentForm,\r\n                    success: function (response) {\r\n                        var valid = response === true || response === \"true\",\r\n                            errors, message, submitted;\r\n\r\n                        validator.settings.messages[element.name][method] = previous.originalMessage;\r\n                        if (valid) {\r\n                            submitted = validator.formSubmitted;\r\n                            validator.resetInternals();\r\n                            validator.toHide = validator.errorsFor(element);\r\n                            validator.formSubmitted = submitted;\r\n                            validator.successList.push(element);\r\n                            validator.invalid[element.name] = false;\r\n                            validator.showErrors();\r\n                        } else {\r\n                            errors = {};\r\n                            message = response || validator.defaultMessage(element, { method: method, parameters: value });\r\n                            errors[element.name] = previous.message = message;\r\n                            validator.invalid[element.name] = true;\r\n                            validator.showErrors(errors);\r\n                        }\r\n                        previous.valid = valid;\r\n                        validator.stopRequest(element, valid);\r\n                    }\r\n                }, param));\r\n                return \"pending\";\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    // Ajax mode: abort\r\n    // usage: $.ajax({ mode: \"abort\"[, port: \"uniqueport\"]});\r\n    // if mode:\"abort\" is used, the previous request on that port (port can be undefined) is aborted via XMLHttpRequest.abort()\r\n\r\n    var pendingRequests = {},\r\n        ajax;\r\n\r\n    // Use a prefilter if available (1.5+)\r\n    if ($.ajaxPrefilter) {\r\n        $.ajaxPrefilter(function (settings, _, xhr) {\r\n            var port = settings.port;\r\n            if (settings.mode === \"abort\") {\r\n                if (pendingRequests[port]) {\r\n                    pendingRequests[port].abort();\r\n                }\r\n                pendingRequests[port] = xhr;\r\n            }\r\n        });\r\n    } else {\r\n\r\n        // Proxy ajax\r\n        ajax = $.ajax;\r\n        $.ajax = function (settings) {\r\n            var mode = (\"mode\" in settings ? settings : $.ajaxSettings).mode,\r\n                port = (\"port\" in settings ? settings : $.ajaxSettings).port;\r\n            if (mode === \"abort\") {\r\n                if (pendingRequests[port]) {\r\n                    pendingRequests[port].abort();\r\n                }\r\n                pendingRequests[port] = ajax.apply(this, arguments);\r\n                return pendingRequests[port];\r\n            }\r\n            return ajax.apply(this, arguments);\r\n        };\r\n    }\r\n    return $;\r\n}));\n",
    "// Unobtrusive validation support library for jQuery and jQuery Validate\r\n// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n// @version <placeholder>\r\n\r\n/*jslint white: true, browser: true, onevar: true, undef: true, nomen: true, eqeqeq: true, plusplus: true, bitwise: true, regexp: true, newcap: true, immed: true, strict: false */\r\n/*global document: false, jQuery: false */\r\n\r\n(function (factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define('vendor/jquery.validate.unobtrusive',['vendor/jquery.validate'], factory);\r\n    } else if (typeof module === 'object' && module.exports) {\r\n        // CommonJS-like environments that support module.exports     \r\n        module.exports = factory(require('vendor/jquery.validate'));\r\n    } else {\r\n        // Browser global\r\n        jQuery.validator.unobtrusive = factory(jQuery);\r\n    }\r\n}(function ($) {\r\n    var $jQval = $.validator,\r\n        adapters,\r\n        data_validation = \"unobtrusiveValidation\";\r\n\r\n    function setValidationValues(options, ruleName, value) {\r\n        options.rules[ruleName] = value;\r\n        if (options.message) {\r\n            options.messages[ruleName] = options.message;\r\n        }\r\n    }\r\n\r\n    function splitAndTrim(value) {\r\n        return value.replace(/^\\s+|\\s+$/g, \"\").split(/\\s*,\\s*/g);\r\n    }\r\n\r\n    function escapeAttributeValue(value) {\r\n        // As mentioned on http://api.jquery.com/category/selectors/\r\n        return value.replace(/([!\"#$%&'()*+,./:;<=>?@\\[\\\\\\]^`{|}~])/g, \"\\\\$1\");\r\n    }\r\n\r\n    function getModelPrefix(fieldName) {\r\n        return fieldName.substr(0, fieldName.lastIndexOf(\".\") + 1);\r\n    }\r\n\r\n    function appendModelPrefix(value, prefix) {\r\n        if (value.indexOf(\"*.\") === 0) {\r\n            value = value.replace(\"*.\", prefix);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    function onError(error, inputElement) {  // 'this' is the form element\r\n        var container = $(this).find(\"[data-valmsg-for='\" + escapeAttributeValue(inputElement[0].name) + \"']\"),\r\n            replaceAttrValue = container.attr(\"data-valmsg-replace\"),\r\n            replace = replaceAttrValue ? JSON.parse(replaceAttrValue) !== false : null;\r\n\r\n        container.removeClass(\"field-validation-valid\").addClass(\"field-validation-error\");\r\n        error.data(\"unobtrusiveContainer\", container);\r\n\r\n        if (replace) {\r\n            container.empty();\r\n            error.removeClass(\"input-validation-error\").appendTo(container);\r\n        }\r\n        else {\r\n            error.hide();\r\n        }\r\n    }\r\n\r\n    function onErrors(event, validator) {  // 'this' is the form element\r\n        var container = $(this).find(\"[data-valmsg-summary=true]\"),\r\n            list = container.find(\"ul\");\r\n\r\n        if (list && list.length && validator.errorList.length) {\r\n            list.empty();\r\n            container.addClass(\"validation-summary-errors\").removeClass(\"validation-summary-valid\");\r\n\r\n            $.each(validator.errorList, function () {\r\n                $(\"<li />\").html(this.message).appendTo(list);\r\n            });\r\n        }\r\n    }\r\n\r\n    function onSuccess(error) {  // 'this' is the form element\r\n        var container = error.data(\"unobtrusiveContainer\");\r\n\r\n        if (container) {\r\n            var replaceAttrValue = container.attr(\"data-valmsg-replace\"),\r\n                replace = replaceAttrValue ? $.parseJSON(replaceAttrValue) : null;\r\n\r\n            container.addClass(\"field-validation-valid\").removeClass(\"field-validation-error\");\r\n            error.removeData(\"unobtrusiveContainer\");\r\n\r\n            if (replace) {\r\n                container.empty();\r\n            }\r\n        }\r\n    }\r\n\r\n    function onReset(event) {  // 'this' is the form element\r\n        var $form = $(this),\r\n            key = '__jquery_unobtrusive_validation_form_reset';\r\n        if ($form.data(key)) {\r\n            return;\r\n        }\r\n        // Set a flag that indicates we're currently resetting the form.\r\n        $form.data(key, true);\r\n        try {\r\n            $form.data(\"validator\").resetForm();\r\n        } finally {\r\n            $form.removeData(key);\r\n        }\r\n\r\n        $form.find(\".validation-summary-errors\")\r\n            .addClass(\"validation-summary-valid\")\r\n            .removeClass(\"validation-summary-errors\");\r\n        $form.find(\".field-validation-error\")\r\n            .addClass(\"field-validation-valid\")\r\n            .removeClass(\"field-validation-error\")\r\n            .removeData(\"unobtrusiveContainer\")\r\n            .find(\">*\")  // If we were using valmsg-replace, get the underlying error\r\n            .removeData(\"unobtrusiveContainer\");\r\n    }\r\n\r\n    function validationInfo(form) {\r\n        var $form = $(form),\r\n            result = $form.data(data_validation),\r\n            onResetProxy = $.proxy(onReset, form),\r\n            defaultOptions = $jQval.unobtrusive.options || {},\r\n            execInContext = function (name, args) {\r\n                var func = defaultOptions[name];\r\n                func && $.isFunction(func) && func.apply(form, args);\r\n            };\r\n\r\n        if (!result) {\r\n            result = {\r\n                options: {  // options structure passed to jQuery Validate's validate() method\r\n                    errorClass: defaultOptions.errorClass || \"input-validation-error\",\r\n                    errorElement: defaultOptions.errorElement || \"span\",\r\n                    errorPlacement: function () {\r\n                        onError.apply(form, arguments);\r\n                        execInContext(\"errorPlacement\", arguments);\r\n                    },\r\n                    invalidHandler: function () {\r\n                        onErrors.apply(form, arguments);\r\n                        execInContext(\"invalidHandler\", arguments);\r\n                    },\r\n                    messages: {},\r\n                    rules: {},\r\n                    success: function () {\r\n                        onSuccess.apply(form, arguments);\r\n                        execInContext(\"success\", arguments);\r\n                    }\r\n                },\r\n                attachValidation: function () {\r\n                    $form\r\n                        .off(\"reset.\" + data_validation, onResetProxy)\r\n                        .on(\"reset.\" + data_validation, onResetProxy)\r\n                        .validate(this.options);\r\n                },\r\n                validate: function () {  // a validation function that is called by unobtrusive Ajax\r\n                    $form.validate();\r\n                    return $form.valid();\r\n                }\r\n            };\r\n            $form.data(data_validation, result);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    $jQval.unobtrusive = {\r\n        adapters: [],\r\n\r\n        parseElement: function (element, skipAttach) {\r\n            /// <summary>\r\n            /// Parses a single HTML element for unobtrusive validation attributes.\r\n            /// </summary>\r\n            /// <param name=\"element\" domElement=\"true\">The HTML element to be parsed.</param>\r\n            /// <param name=\"skipAttach\" type=\"Boolean\">[Optional] true to skip attaching the\r\n            /// validation to the form. If parsing just this single element, you should specify true.\r\n            /// If parsing several elements, you should specify false, and manually attach the validation\r\n            /// to the form when you are finished. The default is false.</param>\r\n            var $element = $(element),\r\n                form = $element.parents(\"form\")[0],\r\n                valInfo, rules, messages;\r\n\r\n            if (!form) {  // Cannot do client-side validation without a form\r\n                return;\r\n            }\r\n\r\n            valInfo = validationInfo(form);\r\n            valInfo.options.rules[element.name] = rules = {};\r\n            valInfo.options.messages[element.name] = messages = {};\r\n\r\n            $.each(this.adapters, function () {\r\n                var prefix = \"data-val-\" + this.name,\r\n                    message = $element.attr(prefix),\r\n                    paramValues = {};\r\n\r\n                if (message !== undefined) {  // Compare against undefined, because an empty message is legal (and falsy)\r\n                    prefix += \"-\";\r\n\r\n                    $.each(this.params, function () {\r\n                        paramValues[this] = $element.attr(prefix + this);\r\n                    });\r\n\r\n                    this.adapt({\r\n                        element: element,\r\n                        form: form,\r\n                        message: message,\r\n                        params: paramValues,\r\n                        rules: rules,\r\n                        messages: messages\r\n                    });\r\n                }\r\n            });\r\n\r\n            $.extend(rules, { \"__dummy__\": true });\r\n\r\n            if (!skipAttach) {\r\n                valInfo.attachValidation();\r\n            }\r\n        },\r\n\r\n        parse: function (selector) {\r\n            /// <summary>\r\n            /// Parses all the HTML elements in the specified selector. It looks for input elements decorated\r\n            /// with the [data-val=true] attribute value and enables validation according to the data-val-*\r\n            /// attribute values.\r\n            /// </summary>\r\n            /// <param name=\"selector\" type=\"String\">Any valid jQuery selector.</param>\r\n\r\n            // $forms includes all forms in selector's DOM hierarchy (parent, children and self) that have at least one\r\n            // element with data-val=true\r\n            var $selector = $(selector),\r\n                $forms = $selector.parents()\r\n                    .addBack()\r\n                    .filter(\"form\")\r\n                    .add($selector.find(\"form\"))\r\n                    .has(\"[data-val=true]\");\r\n\r\n            $selector.find(\"[data-val=true]\").each(function () {\r\n                $jQval.unobtrusive.parseElement(this, true);\r\n            });\r\n\r\n            $forms.each(function () {\r\n                var info = validationInfo(this);\r\n                if (info) {\r\n                    info.attachValidation();\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    adapters = $jQval.unobtrusive.adapters;\r\n\r\n    adapters.add = function (adapterName, params, fn) {\r\n        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation.</summary>\r\n        /// <param name=\"adapterName\" type=\"String\">The name of the adapter to be added. This matches the name used\r\n        /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>\r\n        /// <param name=\"params\" type=\"Array\" optional=\"true\">[Optional] An array of parameter names (strings) that will\r\n        /// be extracted from the data-val-nnnn-mmmm HTML attributes (where nnnn is the adapter name, and\r\n        /// mmmm is the parameter name).</param>\r\n        /// <param name=\"fn\" type=\"Function\">The function to call, which adapts the values from the HTML\r\n        /// attributes into jQuery Validate rules and/or messages.</param>\r\n        /// <returns type=\"jQuery.validator.unobtrusive.adapters\" />\r\n        if (!fn) {  // Called with no params, just a function\r\n            fn = params;\r\n            params = [];\r\n        }\r\n        this.push({ name: adapterName, params: params, adapt: fn });\r\n        return this;\r\n    };\r\n\r\n    adapters.addBool = function (adapterName, ruleName) {\r\n        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where\r\n        /// the jQuery Validate validation rule has no parameter values.</summary>\r\n        /// <param name=\"adapterName\" type=\"String\">The name of the adapter to be added. This matches the name used\r\n        /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>\r\n        /// <param name=\"ruleName\" type=\"String\" optional=\"true\">[Optional] The name of the jQuery Validate rule. If not provided, the value\r\n        /// of adapterName will be used instead.</param>\r\n        /// <returns type=\"jQuery.validator.unobtrusive.adapters\" />\r\n        return this.add(adapterName, function (options) {\r\n            setValidationValues(options, ruleName || adapterName, true);\r\n        });\r\n    };\r\n\r\n    adapters.addMinMax = function (adapterName, minRuleName, maxRuleName, minMaxRuleName, minAttribute, maxAttribute) {\r\n        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where\r\n        /// the jQuery Validate validation has three potential rules (one for min-only, one for max-only, and\r\n        /// one for min-and-max). The HTML parameters are expected to be named -min and -max.</summary>\r\n        /// <param name=\"adapterName\" type=\"String\">The name of the adapter to be added. This matches the name used\r\n        /// in the data-val-nnnn HTML attribute (where nnnn is the adapter name).</param>\r\n        /// <param name=\"minRuleName\" type=\"String\">The name of the jQuery Validate rule to be used when you only\r\n        /// have a minimum value.</param>\r\n        /// <param name=\"maxRuleName\" type=\"String\">The name of the jQuery Validate rule to be used when you only\r\n        /// have a maximum value.</param>\r\n        /// <param name=\"minMaxRuleName\" type=\"String\">The name of the jQuery Validate rule to be used when you\r\n        /// have both a minimum and maximum value.</param>\r\n        /// <param name=\"minAttribute\" type=\"String\" optional=\"true\">[Optional] The name of the HTML attribute that\r\n        /// contains the minimum value. The default is \"min\".</param>\r\n        /// <param name=\"maxAttribute\" type=\"String\" optional=\"true\">[Optional] The name of the HTML attribute that\r\n        /// contains the maximum value. The default is \"max\".</param>\r\n        /// <returns type=\"jQuery.validator.unobtrusive.adapters\" />\r\n        return this.add(adapterName, [minAttribute || \"min\", maxAttribute || \"max\"], function (options) {\r\n            var min = options.params.min,\r\n                max = options.params.max;\r\n\r\n            if (min && max) {\r\n                setValidationValues(options, minMaxRuleName, [min, max]);\r\n            }\r\n            else if (min) {\r\n                setValidationValues(options, minRuleName, min);\r\n            }\r\n            else if (max) {\r\n                setValidationValues(options, maxRuleName, max);\r\n            }\r\n        });\r\n    };\r\n\r\n    adapters.addSingleVal = function (adapterName, attribute, ruleName) {\r\n        /// <summary>Adds a new adapter to convert unobtrusive HTML into a jQuery Validate validation, where\r\n        /// the jQuery Validate validation rule has a single value.</summary>\r\n        /// <param name=\"adapterName\" type=\"String\">The name of the adapter to be added. This matches the name used\r\n        /// in the data-val-nnnn HTML attribute(where nnnn is the adapter name).</param>\r\n        /// <param name=\"attribute\" type=\"String\">[Optional] The name of the HTML attribute that contains the value.\r\n        /// The default is \"val\".</param>\r\n        /// <param name=\"ruleName\" type=\"String\" optional=\"true\">[Optional] The name of the jQuery Validate rule. If not provided, the value\r\n        /// of adapterName will be used instead.</param>\r\n        /// <returns type=\"jQuery.validator.unobtrusive.adapters\" />\r\n        return this.add(adapterName, [attribute || \"val\"], function (options) {\r\n            setValidationValues(options, ruleName || adapterName, options.params[attribute]);\r\n        });\r\n    };\r\n\r\n    $jQval.addMethod(\"__dummy__\", function (value, element, params) {\r\n        return true;\r\n    });\r\n\r\n    $jQval.addMethod(\"regex\", function (value, element, params) {\r\n        var match;\r\n        if (this.optional(element)) {\r\n            return true;\r\n        }\r\n\r\n        match = new RegExp(params).exec(value);\r\n        return (match && (match.index === 0) && (match[0].length === value.length));\r\n    });\r\n\r\n    $jQval.addMethod(\"nonalphamin\", function (value, element, nonalphamin) {\r\n        var match;\r\n        if (nonalphamin) {\r\n            match = value.match(/\\W/g);\r\n            match = match && match.length >= nonalphamin;\r\n        }\r\n        return match;\r\n    });\r\n\r\n    if ($jQval.methods.extension) {\r\n        adapters.addSingleVal(\"accept\", \"mimtype\");\r\n        adapters.addSingleVal(\"extension\", \"extension\");\r\n    } else {\r\n        // for backward compatibility, when the 'extension' validation method does not exist, such as with versions\r\n        // of JQuery Validation plugin prior to 1.10, we should use the 'accept' method for\r\n        // validating the extension, and ignore mime-type validations as they are not supported.\r\n        adapters.addSingleVal(\"extension\", \"extension\", \"accept\");\r\n    }\r\n\r\n    adapters.addSingleVal(\"regex\", \"pattern\");\r\n    adapters.addBool(\"creditcard\").addBool(\"date\").addBool(\"digits\").addBool(\"email\").addBool(\"number\").addBool(\"url\");\r\n    adapters.addMinMax(\"length\", \"minlength\", \"maxlength\", \"rangelength\").addMinMax(\"range\", \"min\", \"max\", \"range\");\r\n    adapters.addMinMax(\"minlength\", \"minlength\").addMinMax(\"maxlength\", \"minlength\", \"maxlength\");\r\n    adapters.add(\"equalto\", [\"other\"], function (options) {\r\n        var prefix = getModelPrefix(options.element.name),\r\n            other = options.params.other,\r\n            fullOtherName = appendModelPrefix(other, prefix),\r\n            element = $(options.form).find(\":input\").filter(\"[name='\" + escapeAttributeValue(fullOtherName) + \"']\")[0];\r\n\r\n        setValidationValues(options, \"equalTo\", element);\r\n    });\r\n    adapters.add(\"required\", function (options) {\r\n        // jQuery Validate equates \"required\" with \"mandatory\" for checkbox elements\r\n        if (options.element.tagName.toUpperCase() !== \"INPUT\" || options.element.type.toUpperCase() !== \"CHECKBOX\") {\r\n            setValidationValues(options, \"required\", true);\r\n        }\r\n    });\r\n    adapters.add(\"remote\", [\"url\", \"type\", \"additionalfields\"], function (options) {\r\n        var value = {\r\n            url: options.params.url,\r\n            type: options.params.type || \"GET\",\r\n            data: {}\r\n        },\r\n            prefix = getModelPrefix(options.element.name);\r\n\r\n        $.each(splitAndTrim(options.params.additionalfields || options.element.name), function (i, fieldName) {\r\n            var paramName = appendModelPrefix(fieldName, prefix);\r\n            value.data[paramName] = function () {\r\n                var field = $(options.form).find(\":input\").filter(\"[name='\" + escapeAttributeValue(paramName) + \"']\");\r\n                // For checkboxes and radio buttons, only pick up values from checked fields.\r\n                if (field.is(\":checkbox\")) {\r\n                    return field.filter(\":checked\").val() || field.filter(\":hidden\").val() || '';\r\n                }\r\n                else if (field.is(\":radio\")) {\r\n                    return field.filter(\":checked\").val() || '';\r\n                }\r\n                return field.val();\r\n            };\r\n        });\r\n\r\n        setValidationValues(options, \"remote\", value);\r\n    });\r\n    adapters.add(\"password\", [\"min\", \"nonalphamin\", \"regex\"], function (options) {\r\n        if (options.params.min) {\r\n            setValidationValues(options, \"minlength\", options.params.min);\r\n        }\r\n        if (options.params.nonalphamin) {\r\n            setValidationValues(options, \"nonalphamin\", options.params.nonalphamin);\r\n        }\r\n        if (options.params.regex) {\r\n            setValidationValues(options, \"regex\", options.params.regex);\r\n        }\r\n    });\r\n    adapters.add(\"fileextensions\", [\"extensions\"], function (options) {\r\n        setValidationValues(options, \"extension\", options.params.extensions);\r\n    });\r\n\r\n    $(function () {\r\n        $jQval.unobtrusive.parse(document);\r\n    });\r\n\r\n    return $jQval.unobtrusive;\r\n}));\n",
    "/*\r\n *\r\n * Copyright (c) 2006-2011 Sam Collett (http://www.texotela.co.uk)\r\n * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)\r\n * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.\r\n * \r\n * Version 1.3\r\n * Demo: http://www.texotela.co.uk/code/jquery/numeric/\r\n *\r\n */\r\n(function($) {\r\n/*\r\n * Allows only valid characters to be entered into input boxes.\r\n * Note: fixes value when pasting via Ctrl+V, but not when using the mouse to paste\r\n  *      side-effect: Ctrl+A does not work, though you can still use the mouse to select (or double-click to select all)\r\n *\r\n * @name     numeric\r\n * @param    config      { decimal : \".\" , negative : true }\r\n * @param    callback     A function that runs if the number is not valid (fires onblur)\r\n * @author   Sam Collett (http://www.texotela.co.uk)\r\n * @example  $(\".numeric\").numeric();\r\n * @example  $(\".numeric\").numeric(\",\"); // use , as separater\r\n * @example  $(\".numeric\").numeric({ decimal : \",\" }); // use , as separator\r\n * @example  $(\".numeric\").numeric({ negative : false }); // do not allow negative values\r\n * @example  $(\".numeric\").numeric(null, callback); // use default values, pass on the 'callback' function\r\n *\r\n */\r\n$.fn.numeric = function(config, callback)\r\n{\r\n\tif(typeof config === 'boolean')\r\n\t{\r\n\t\tconfig = { decimal: config };\r\n\t}\r\n\tconfig = config || {};\r\n\t// if config.negative undefined, set to true (default is to allow negative numbers)\r\n\tif(typeof config.negative == \"undefined\") config.negative = true;\r\n\t// set decimal point\r\n\tvar decimal = (config.decimal === false) ? \"\" : config.decimal || \".\";\r\n\t// allow negatives\r\n\tvar negative = (config.negative === true) ? true : false;\r\n\t// callback function\r\n\tvar callback = typeof callback == \"function\" ? callback : function(){};\r\n\t// set data and methods\r\n\treturn this.data(\"numeric.decimal\", decimal).data(\"numeric.negative\", negative).data(\"numeric.callback\", callback).keypress($.fn.numeric.keypress).keyup($.fn.numeric.keyup).blur($.fn.numeric.blur);\r\n}\r\n\r\n$.fn.numeric.keypress = function(e)\r\n{\r\n\t// get decimal character and determine if negatives are allowed\r\n\tvar decimal = $.data(this, \"numeric.decimal\");\r\n\tvar negative = $.data(this, \"numeric.negative\");\r\n\t// get the key that was pressed\r\n\tvar key = e.charCode ? e.charCode : e.keyCode ? e.keyCode : 0;\r\n\t// allow enter/return key (only when in an input box)\r\n\tif(key == 13 && this.nodeName.toLowerCase() == \"input\")\r\n\t{\r\n\t\treturn true;\r\n\t}\r\n\telse if(key == 13)\r\n\t{\r\n\t\treturn false;\r\n\t}\r\n\tvar allow = false;\r\n\t// allow Ctrl+A\r\n\tif((e.ctrlKey && key == 97 /* firefox */) || (e.ctrlKey && key == 65) /* opera */) return true;\r\n\t// allow Ctrl+X (cut)\r\n\tif((e.ctrlKey && key == 120 /* firefox */) || (e.ctrlKey && key == 88) /* opera */) return true;\r\n\t// allow Ctrl+C (copy)\r\n\tif((e.ctrlKey && key == 99 /* firefox */) || (e.ctrlKey && key == 67) /* opera */) return true;\r\n\t// allow Ctrl+Z (undo)\r\n\tif((e.ctrlKey && key == 122 /* firefox */) || (e.ctrlKey && key == 90) /* opera */) return true;\r\n\t// allow or deny Ctrl+V (paste), Shift+Ins\r\n\tif((e.ctrlKey && key == 118 /* firefox */) || (e.ctrlKey && key == 86) /* opera */\r\n\t|| (e.shiftKey && key == 45)) return true;\r\n\t// if a number was not pressed\r\n\tif(key < 48 || key > 57)\r\n\t{\r\n\t\t/* '-' only allowed at start and if negative numbers allowed */\r\n\t\tif(this.value.indexOf(\"-\") != 0 && negative && key == 45 && (this.value.length == 0 || ($.fn.getSelectionStart(this)) == 0)) return true;\r\n\t\t/* only one decimal separator allowed */\r\n\t\tif(decimal && key == decimal.charCodeAt(0) && this.value.indexOf(decimal) != -1)\r\n\t\t{\r\n\t\t\tallow = false;\r\n\t\t}\r\n\t\t// check for other keys that have special purposes\r\n\t\tif(\r\n\t\t\tkey != 8 /* backspace */ &&\r\n\t\t\tkey != 9 /* tab */ &&\r\n\t\t\tkey != 13 /* enter */ &&\r\n\t\t\tkey != 35 /* end */ &&\r\n\t\t\tkey != 36 /* home */ &&\r\n\t\t\tkey != 37 /* left */ &&\r\n\t\t\tkey != 39 /* right */ &&\r\n\t\t\tkey != 46 /* del */\r\n\t\t)\r\n\t\t{\r\n\t\t\tallow = false;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t// for detecting special keys (listed above)\r\n\t\t\t// IE does not support 'charCode' and ignores them in keypress anyway\r\n\t\t\tif(typeof e.charCode != \"undefined\")\r\n\t\t\t{\r\n\t\t\t\t// special keys have 'keyCode' and 'which' the same (e.g. backspace)\r\n\t\t\t\tif(e.keyCode == e.which && e.which != 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tallow = true;\r\n\t\t\t\t\t// . and delete share the same code, don't allow . (will be set to true later if it is the decimal point)\r\n\t\t\t\t\tif(e.which == 46) allow = false;\r\n\t\t\t\t}\r\n\t\t\t\t// or keyCode != 0 and 'charCode'/'which' = 0\r\n\t\t\t\telse if(e.keyCode != 0 && e.charCode == 0 && e.which == 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tallow = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// if key pressed is the decimal and it is not already in the field\r\n\t\tif(decimal && key == decimal.charCodeAt(0))\r\n\t\t{\r\n\t\t\tif(this.value.indexOf(decimal) == -1)\r\n\t\t\t{\r\n\t\t\t\tallow = true;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tallow = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tallow = true;\r\n\t}\r\n\treturn allow;\r\n}\r\n\r\n$.fn.numeric.keyup = function(e)\r\n{\r\n\tvar val = this.value;\r\n\tif(val.length > 0)\r\n\t{\r\n\t\t// get carat (cursor) position\r\n\t\tvar carat = $.fn.getSelectionStart(this);\r\n\t\t// get decimal character and determine if negatives are allowed\r\n\t\tvar decimal = $.data(this, \"numeric.decimal\");\r\n\t\tvar negative = $.data(this, \"numeric.negative\");\r\n\t\t\r\n\t\t// prepend a 0 if necessary\r\n\t\tif(decimal != \"\")\r\n\t\t{\r\n\t\t\t// find decimal point\r\n\t\t\tvar dot = val.indexOf(decimal);\r\n\t\t\t// if dot at start, add 0 before\r\n\t\t\tif(dot == 0)\r\n\t\t\t{\r\n\t\t\t\tthis.value = \"0\" + val;\r\n\t\t\t}\r\n\t\t\t// if dot at position 1, check if there is a - symbol before it\r\n\t\t\tif(dot == 1 && val.charAt(0) == \"-\")\r\n\t\t\t{\r\n\t\t\t\tthis.value = \"-0\" + val.substring(1);\r\n\t\t\t}\r\n\t\t\tval = this.value;\r\n\t\t}\r\n\t\t\r\n\t\t// if pasted in, only allow the following characters\r\n\t\tvar validChars = [0,1,2,3,4,5,6,7,8,9,'-',decimal];\r\n\t\t// get length of the value (to loop through)\r\n\t\tvar length = val.length;\r\n\t\t// loop backwards (to prevent going out of bounds)\r\n\t\tfor(var i = length - 1; i >= 0; i--)\r\n\t\t{\r\n\t\t\tvar ch = val.charAt(i);\r\n\t\t\t// remove '-' if it is in the wrong place\r\n\t\t\tif(i != 0 && ch == \"-\")\r\n\t\t\t{\r\n\t\t\t\tval = val.substring(0, i) + val.substring(i + 1);\r\n\t\t\t}\r\n\t\t\t// remove character if it is at the start, a '-' and negatives aren't allowed\r\n\t\t\telse if(i == 0 && !negative && ch == \"-\")\r\n\t\t\t{\r\n\t\t\t\tval = val.substring(1);\r\n\t\t\t}\r\n\t\t\tvar validChar = false;\r\n\t\t\t// loop through validChars\r\n\t\t\tfor(var j = 0; j < validChars.length; j++)\r\n\t\t\t{\r\n\t\t\t\t// if it is valid, break out the loop\r\n\t\t\t\tif(ch == validChars[j])\r\n\t\t\t\t{\r\n\t\t\t\t\tvalidChar = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// if not a valid character, or a space, remove\r\n\t\t\tif(!validChar || ch == \" \")\r\n\t\t\t{\r\n\t\t\t\tval = val.substring(0, i) + val.substring(i + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t\t// remove extra decimal characters\r\n\t\tvar firstDecimal = val.indexOf(decimal);\r\n\t\tif(firstDecimal > 0)\r\n\t\t{\r\n\t\t\tfor(var i = length - 1; i > firstDecimal; i--)\r\n\t\t\t{\r\n\t\t\t\tvar ch = val.charAt(i);\r\n\t\t\t\t// remove decimal character\r\n\t\t\t\tif(ch == decimal)\r\n\t\t\t\t{\r\n\t\t\t\t\tval = val.substring(0, i) + val.substring(i + 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// set the value and prevent the cursor moving to the end\r\n\t\tthis.value = val;\r\n\t\t$.fn.setSelection(this, carat);\r\n\t}\r\n}\r\n\r\n$.fn.numeric.blur = function()\r\n{\r\n\tvar decimal = $.data(this, \"numeric.decimal\");\r\n\tvar callback = $.data(this, \"numeric.callback\");\r\n\tvar val = this.value;\r\n\tif(val != \"\")\r\n\t{\r\n\t\tvar re = new RegExp(\"^\\\\d+$|\\\\d*\" + decimal + \"\\\\d+\");\r\n\t\tif(!re.exec(val))\r\n\t\t{\r\n\t\t\tcallback.apply(this);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n$.fn.removeNumeric = function()\r\n{\r\n    return this.data(\"numeric.decimal\", null).data(\"numeric.negative\", null).data(\"numeric.callback\", null).unbind(\"keypress\", $.fn.numeric.keypress).unbind(\"keyup\", $.fn.numeric.keyup).unbind(\"blur\", $.fn.numeric.blur);\r\n}\r\n\r\n// Based on code from http://javascript.nwbox.com/cursor_position/ (Diego Perini <dperini@nwbox.com>)\r\n$.fn.getSelectionStart = function(o)\r\n{\r\n    if (o.createTextRange && document.selection) {\r\n        var r = document.selection.createRange().duplicate();\r\n        r.moveEnd('character', o.value.length);\r\n        if (r.text == '')\r\n            return o.value.length;\r\n        return o.value.lastIndexOf(r.text);\r\n    } else {\r\n        try { return o.selectionStart; }\r\n        catch (e) { return 0; }\r\n    }\r\n}\r\n\r\n// set the selection, o is the object (input), p is the position ([start, end] or just start)\r\n$.fn.setSelection = function(o, p)\r\n{\r\n\t// if p is number, start and end are the same\r\n\tif(typeof p == \"number\") p = [p, p];\r\n\t// only set if p is an array of length 2\r\n\tif(p && p.constructor == Array && p.length == 2)\r\n\t{\r\n\t\tif (o.createTextRange)\r\n\t\t{\r\n\t\t\tvar r = o.createTextRange();\r\n\t\t\tr.collapse(true);\r\n\t\t\tr.moveStart('character', p[0]);\r\n\t\t\tr.moveEnd('character', p[1]);\r\n\t\t\tr.select();\r\n\t\t}\r\n\t\telse {\r\n\t\t\to.focus();\r\n\t\t\ttry{\r\n\t\t\t\tif(o.setSelectionRange) {\r\n\t\t\t\t\to.setSelectionRange(p[0], p[1]);\r\n\t\t\t\t}\r\n\t\t\t} catch(e) {\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n})(jQuery);\ndefine(\"vendor/jquery.numeric\", [\"jquery\"], (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.jquery;\n    };\n}(this)));\n\n",
    "/*!\n * jQuery Migrate - v3.3.1 - 2020-06-25T01:07Z\n * Copyright OpenJS Foundation and other contributors\n */\n\n(function (factory) {\n    \"use strict\";\n\n    if (typeof (isJsUnitTest) !== \"undefined\" && isJsUnitTest) {\n        return true;\n    }\n\n    if (typeof define === \"function\" && define.amd) {\n\n        // AMD. Register as an anonymous module.\n        define('vendor/jquery-migrate-3.3.1',[\"jquery\"], function (jQuery) {\n            return factory(jQuery, window);\n        });\n    } else if (typeof module === \"object\" && module.exports) {\n\n        // Node/CommonJS\n        // eslint-disable-next-line no-undef\n        module.exports = factory(require(\"jquery\"), window);\n    } else {\n\n        // Browser globals\n        factory(jQuery, window);\n    }\n})(function (jQuery, window) {\n    \"use strict\";\n\n    jQuery.migrateVersion = \"3.3.1\";\n\n    // Returns 0 if v1 == v2, -1 if v1 < v2, 1 if v1 > v2\n    function compareVersions(v1, v2) {\n        var i,\n            rVersionParts = /^(\\d+)\\.(\\d+)\\.(\\d+)/,\n            v1p = rVersionParts.exec(v1) || [],\n            v2p = rVersionParts.exec(v2) || [];\n\n        for (i = 1; i <= 3; i++) {\n            if (+v1p[i] > +v2p[i]) {\n                return 1;\n            }\n            if (+v1p[i] < +v2p[i]) {\n                return -1;\n            }\n        }\n        return 0;\n    }\n\n    function jQueryVersionSince(version) {\n        return compareVersions(jQuery.fn.jquery, version) >= 0;\n    }\n\n    (function () {\n\n        // Support: IE9 only\n        // IE9 only creates console object when dev tools are first opened\n        // IE9 console is a host object, callable but doesn't have .apply()\n        if (!window.console || !window.console.log) {\n            return;\n        }\n\n        // Need jQuery 3.0.0+ and no older Migrate loaded\n        if (!jQuery || !jQueryVersionSince(\"3.0.0\")) {\n            window.console.log(\"JQMIGRATE: jQuery 3.0.0+ REQUIRED\");\n        }\n        if (jQuery.migrateWarnings) {\n            window.console.log(\"JQMIGRATE: Migrate plugin loaded multiple times\");\n        }\n\n        // Show a message on the console so devs know we're active\n        window.console.log(\"JQMIGRATE: Migrate is installed\" +\n            (jQuery.migrateMute ? \"\" : \" with logging active\") +\n            \", version \" + jQuery.migrateVersion);\n\n    })();\n\n    var warnedAbout = {};\n\n    // By default each warning is only reported once.\n    jQuery.migrateDeduplicateWarnings = true;\n\n    // List of warnings already given; public read only\n    jQuery.migrateWarnings = [];\n\n    // Set to false to disable traces that appear with warnings\n    if (jQuery.migrateTrace === undefined) {\n        jQuery.migrateTrace = true;\n    }\n\n    // Forget any warnings we've already given; public\n    jQuery.migrateReset = function () {\n        warnedAbout = {};\n        jQuery.migrateWarnings.length = 0;\n    };\n\n    function migrateWarn(msg) {\n        var console = window.console,\n            warningsToIgnore = [\"HTML tags must be properly nested and closed:\", \"jQuery.isFunction() is deprecated\"];\n\n        if (!jQuery.migrateDeduplicateWarnings || !warnedAbout[msg]) {\n            if (console && console.warn && !jQuery.migrateMute) {\n                if (warningsToIgnore.indexOf(msg) == -1 && msg.indexOf(warningsToIgnore[0]) == -1) {\n                    warnedAbout[msg] = true;\n                    jQuery.migrateWarnings.push(msg);\n\n                    // console.warn(\"JQMIGRATE: \" + msg);\n                    // if (jQuery.migrateTrace && console.trace) {\n                    //     console.trace();\n                    // }\n                }\n            }\n        }\n    }\n\n    function migrateWarnProp(obj, prop, value, msg) {\n        Object.defineProperty(obj, prop, {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                migrateWarn(msg);\n                return value;\n            },\n            set: function (newValue) {\n                migrateWarn(msg);\n                value = newValue;\n            }\n        });\n    }\n\n    function migrateWarnFunc(obj, prop, newFunc, msg) {\n        obj[prop] = function () {\n            migrateWarn(msg);\n            return newFunc.apply(this, arguments);\n        };\n    }\n\n    if (window.document.compatMode === \"BackCompat\") {\n\n        // JQuery has never supported or tested Quirks Mode\n        migrateWarn(\"jQuery is not compatible with Quirks Mode\");\n    }\n\n    var findProp,\n        class2type = {},\n        oldInit = jQuery.fn.init,\n        oldFind = jQuery.find,\n\n        rattrHashTest = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/,\n        rattrHashGlob = /\\[(\\s*[-\\w]+\\s*)([~|^$*]?=)\\s*([-\\w#]*?#[-\\w#]*)\\s*\\]/g,\n\n        // Support: Android <=4.0 only\n        // Make sure we trim BOM and NBSP\n        rtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\n    jQuery.fn.init = function (arg1) {\n        var args = Array.prototype.slice.call(arguments);\n\n        if (typeof arg1 === \"string\" && arg1 === \"#\") {\n\n            // JQuery( \"#\" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0\n            migrateWarn(\"jQuery( '#' ) is not a valid selector\");\n            args[0] = [];\n        }\n\n        return oldInit.apply(this, args);\n    };\n    jQuery.fn.init.prototype = jQuery.fn;\n\n    jQuery.find = function (selector) {\n        var args = Array.prototype.slice.call(arguments);\n\n        // Support: PhantomJS 1.x\n        // String#match fails to match when used with a //g RegExp, only on some strings\n        if (typeof selector === \"string\" && rattrHashTest.test(selector)) {\n\n            // The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0\n            // First see if qS thinks it's a valid selector, if so avoid a false positive\n            try {\n                window.document.querySelector(selector);\n            } catch (err1) {\n\n                // Didn't *look* valid to qSA, warn and try quoting what we think is the value\n                selector = selector.replace(rattrHashGlob, function (_, attr, op, value) {\n                    return \"[\" + attr + op + \"\\\"\" + value + \"\\\"]\";\n                });\n\n                // If the regexp *may* have created an invalid selector, don't update it\n                // Note that there may be false alarms if selector uses jQuery extensions\n                try {\n                    window.document.querySelector(selector);\n                    migrateWarn(\"Attribute selector with '#' must be quoted: \" + args[0]);\n                    args[0] = selector;\n                } catch (err2) {\n                    migrateWarn(\"Attribute selector with '#' was not fixed: \" + args[0]);\n                }\n            }\n        }\n\n        return oldFind.apply(this, args);\n    };\n\n    // Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)\n    for (findProp in oldFind) {\n        if (Object.prototype.hasOwnProperty.call(oldFind, findProp)) {\n            jQuery.find[findProp] = oldFind[findProp];\n        }\n    }\n\n    // The number of elements contained in the matched element set\n    migrateWarnFunc(jQuery.fn, \"size\", function () {\n        return this.length;\n    },\n        \"jQuery.fn.size() is deprecated and removed; use the .length property\");\n\n    migrateWarnFunc(jQuery, \"parseJSON\", function () {\n        return JSON.parse.apply(null, arguments);\n    },\n        \"jQuery.parseJSON is deprecated; use JSON.parse\");\n\n    migrateWarnFunc(jQuery, \"holdReady\", jQuery.holdReady,\n        \"jQuery.holdReady is deprecated\");\n\n    migrateWarnFunc(jQuery, \"unique\", jQuery.uniqueSort,\n        \"jQuery.unique is deprecated; use jQuery.uniqueSort\");\n\n    // Now jQuery.expr.pseudos is the standard incantation\n    migrateWarnProp(jQuery.expr, \"filters\", jQuery.expr.pseudos,\n        \"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos\");\n    migrateWarnProp(jQuery.expr, \":\", jQuery.expr.pseudos,\n        \"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos\");\n\n    // Prior to jQuery 3.1.1 there were internal refs so we don't warn there\n    if (jQueryVersionSince(\"3.1.1\")) {\n        migrateWarnFunc(jQuery, \"trim\", function (text) {\n            return text == null ?\n                \"\" :\n                (text + \"\").replace(rtrim, \"\");\n        },\n            \"jQuery.trim is deprecated; use String.prototype.trim\");\n    }\n\n    // Prior to jQuery 3.2 there were internal refs so we don't warn there\n    if (jQueryVersionSince(\"3.2.0\")) {\n        migrateWarnFunc(jQuery, \"nodeName\", function (elem, name) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n        },\n            \"jQuery.nodeName is deprecated\");\n    }\n\n    if (jQueryVersionSince(\"3.3.0\")) {\n\n        migrateWarnFunc(jQuery, \"isNumeric\", function (obj) {\n\n            // As of jQuery 3.0, isNumeric is limited to\n            // strings and numbers (primitives or objects)\n            // that can be coerced to finite numbers (gh-2662)\n            var type = typeof obj;\n            return (type === \"number\" || type === \"string\") &&\n\n                // parseFloat NaNs numeric-cast false positives (\"\")\n                // ...but misinterprets leading-number strings, e.g. hex literals (\"0x...\")\n                // subtraction forces infinities to NaN\n                !isNaN(obj - parseFloat(obj));\n        },\n            \"jQuery.isNumeric() is deprecated\"\n        );\n\n        // Populate the class2type map\n        jQuery.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".\n            split(\" \"),\n            function (_, name) {\n                class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n            });\n\n        migrateWarnFunc(jQuery, \"type\", function (obj) {\n            if (obj == null) {\n                return obj + \"\";\n            }\n\n            // Support: Android <=2.3 only (functionish RegExp)\n            return typeof obj === \"object\" || typeof obj === \"function\" ?\n                class2type[Object.prototype.toString.call(obj)] || \"object\" :\n                typeof obj;\n        },\n            \"jQuery.type is deprecated\");\n\n        migrateWarnFunc(jQuery, \"isFunction\",\n            function (obj) {\n                return typeof obj === \"function\";\n            },\n            \"jQuery.isFunction() is deprecated\");\n\n        migrateWarnFunc(jQuery, \"isWindow\",\n            function (obj) {\n                return obj != null && obj === obj.window;\n            },\n            \"jQuery.isWindow() is deprecated\"\n        );\n\n        migrateWarnFunc(jQuery, \"isArray\", Array.isArray,\n            \"jQuery.isArray is deprecated; use Array.isArray\"\n        );\n    }\n\n    // Support jQuery slim which excludes the ajax module\n    if (jQuery.ajax) {\n\n        var oldAjax = jQuery.ajax;\n\n        jQuery.ajax = function () {\n            var jQXHR = oldAjax.apply(this, arguments);\n\n            // Be sure we got a jQXHR (e.g., not sync)\n            if (jQXHR.promise) {\n                migrateWarnFunc(jQXHR, \"success\", jQXHR.done,\n                    \"jQXHR.success is deprecated and removed\");\n                migrateWarnFunc(jQXHR, \"error\", jQXHR.fail,\n                    \"jQXHR.error is deprecated and removed\");\n                migrateWarnFunc(jQXHR, \"complete\", jQXHR.always,\n                    \"jQXHR.complete is deprecated and removed\");\n            }\n\n            return jQXHR;\n        };\n\n    }\n\n    var oldRemoveAttr = jQuery.fn.removeAttr,\n        oldToggleClass = jQuery.fn.toggleClass,\n        rmatchNonSpace = /\\S+/g;\n\n    jQuery.fn.removeAttr = function (name) {\n        var self = this;\n\n        jQuery.each(name.match(rmatchNonSpace), function (_i, attr) {\n            if (jQuery.expr.match.bool.test(attr)) {\n                migrateWarn(\"jQuery.fn.removeAttr no longer sets boolean properties: \" + attr);\n                self.prop(attr, false);\n            }\n        });\n\n        return oldRemoveAttr.apply(this, arguments);\n    };\n\n    jQuery.fn.toggleClass = function (state) {\n\n        // Only deprecating no-args or single boolean arg\n        if (state !== undefined && typeof state !== \"boolean\") {\n            return oldToggleClass.apply(this, arguments);\n        }\n\n        migrateWarn(\"jQuery.fn.toggleClass( boolean ) is deprecated\");\n\n        // Toggle entire class name of each element\n        return this.each(function () {\n            var className = this.getAttribute && this.getAttribute(\"class\") || \"\";\n\n            if (className) {\n                jQuery.data(this, \"__className__\", className);\n            }\n\n            // If the element has a class name or if we're passed `false`,\n            // then remove the whole classname (if there was one, the above saved it).\n            // Otherwise bring back whatever was previously saved (if anything),\n            // falling back to the empty string if nothing was stored.\n            if (this.setAttribute) {\n                this.setAttribute(\"class\",\n                    className || state === false ?\n                        \"\" :\n                        jQuery.data(this, \"__className__\") || \"\"\n                );\n            }\n        });\n    };\n\n    function camelCase(string) {\n        return string.replace(/-([a-z])/g, function (_, letter) {\n            return letter.toUpperCase();\n        });\n    }\n\n    var oldFnCss,\n        internalSwapCall = false,\n        ralphaStart = /^[a-z]/,\n\n        // The regex visualized:\n        //\n        //                         /----------\\\n        //                        |            |    /-------\\\n        //                        |  / Top  \\  |   |         |\n        //         /--- Border ---+-| Right  |-+---+- Width -+---\\\n        //        |                 | Bottom |                    |\n        //        |                  \\ Left /                     |\n        //        |                                               |\n        //        |                              /----------\\     |\n        //        |          /-------------\\    |            |    |- END\n        //        |         |               |   |  / Top  \\  |    |\n        //        |         |  / Margin  \\  |   | | Right  | |    |\n        //        |---------+-|           |-+---+-| Bottom |-+----|\n        //        |            \\ Padding /         \\ Left /       |\n        // BEGIN -|                                               |\n        //        |                /---------\\                    |\n        //        |               |           |                   |\n        //        |               |  / Min \\  |    / Width  \\     |\n        //         \\--------------+-|       |-+---|          |---/\n        //                           \\ Max /       \\ Height /\n        rautoPx = /^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;\n\n    // If this version of jQuery has .swap(), don't false-alarm on internal uses\n    if (jQuery.swap) {\n        jQuery.each([\"height\", \"width\", \"reliableMarginRight\"], function (_, name) {\n            var oldHook = jQuery.cssHooks[name] && jQuery.cssHooks[name].get;\n\n            if (oldHook) {\n                jQuery.cssHooks[name].get = function () {\n                    var ret;\n\n                    internalSwapCall = true;\n                    ret = oldHook.apply(this, arguments);\n                    internalSwapCall = false;\n                    return ret;\n                };\n            }\n        });\n    }\n\n    jQuery.swap = function (elem, options, callback, args) {\n        var ret, name,\n            old = {};\n\n        if (!internalSwapCall) {\n            migrateWarn(\"jQuery.swap() is undocumented and deprecated\");\n        }\n\n        // Remember the old values, and insert the new ones\n        for (name in options) {\n            old[name] = elem.style[name];\n            elem.style[name] = options[name];\n        }\n\n        ret = callback.apply(elem, args || []);\n\n        // Revert the old values\n        for (name in options) {\n            elem.style[name] = old[name];\n        }\n\n        return ret;\n    };\n\n    if (jQueryVersionSince(\"3.4.0\") && typeof Proxy !== \"undefined\") {\n\n        jQuery.cssProps = new Proxy(jQuery.cssProps || {}, {\n            set: function () {\n                migrateWarn(\"JQMIGRATE: jQuery.cssProps is deprecated\");\n                return Reflect.set.apply(this, arguments);\n            }\n        });\n    }\n\n    // Create a dummy jQuery.cssNumber if missing. It won't be used by jQuery but\n    // it will prevent code adding new keys to it unconditionally from crashing.\n    if (!jQuery.cssNumber) {\n        jQuery.cssNumber = {};\n    }\n\n    function isAutoPx(prop) {\n\n        // The first test is used to ensure that:\n        // 1. The prop starts with a lowercase letter (as we uppercase it for the second regex).\n        // 2. The prop is not empty.\n        return ralphaStart.test(prop) &&\n            rautoPx.test(prop[0].toUpperCase() + prop.slice(1));\n    }\n\n    oldFnCss = jQuery.fn.css;\n\n    jQuery.fn.css = function (name, value) {\n        var camelName,\n            origThis = this;\n        if (name && typeof name === \"object\" && !Array.isArray(name)) {\n            jQuery.each(name, function (n, v) {\n                jQuery.fn.css.call(origThis, n, v);\n            });\n        }\n        if (typeof value === \"number\") {\n            camelName = camelCase(name);\n            if (!isAutoPx(camelName) && !jQuery.cssNumber[camelName]) {\n                migrateWarn(\"Number-typed values are deprecated for jQuery.fn.css( \\\"\" +\n                    name + \"\\\", value )\");\n            }\n        }\n\n        return oldFnCss.apply(this, arguments);\n    };\n\n    var oldData = jQuery.data;\n\n    jQuery.data = function (elem, name, value) {\n        var curData, sameKeys, key;\n\n        // Name can be an object, and each entry in the object is meant to be set as data\n        if (name && typeof name === \"object\" && arguments.length === 2) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            sameKeys = {};\n            for (key in name) {\n                if (key !== camelCase(key)) {\n                    migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + key);\n                    curData[key] = name[key];\n                } else {\n                    sameKeys[key] = name[key];\n                }\n            }\n\n            oldData.call(this, elem, sameKeys);\n\n            return name;\n        }\n\n        // If the name is transformed, look for the un-transformed name in the data object\n        if (name && typeof name === \"string\" && name !== camelCase(name)) {\n            curData = jQuery.hasData(elem) && oldData.call(this, elem);\n            if (curData && name in curData) {\n                migrateWarn(\"jQuery.data() always sets/gets camelCased names: \" + name);\n                if (arguments.length > 2) {\n                    curData[name] = value;\n                }\n                return curData[name];\n            }\n        }\n\n        return oldData.apply(this, arguments);\n    };\n\n    // Support jQuery slim which excludes the effects module\n    if (jQuery.fx) {\n\n        var intervalValue, intervalMsg,\n            oldTweenRun = jQuery.Tween.prototype.run,\n            linearEasing = function (pct) {\n                return pct;\n            };\n\n        jQuery.Tween.prototype.run = function () {\n            if (jQuery.easing[this.easing].length > 1) {\n                migrateWarn(\n                    \"'jQuery.easing.\" + this.easing.toString() + \"' should use only one argument\"\n                );\n\n                jQuery.easing[this.easing] = linearEasing;\n            }\n\n            oldTweenRun.apply(this, arguments);\n        };\n\n        intervalValue = jQuery.fx.interval || 13;\n        intervalMsg = \"jQuery.fx.interval is deprecated\";\n\n        // Support: IE9, Android <=4.4\n        // Avoid false positives on browsers that lack rAF\n        // Don't warn if document is hidden, jQuery uses setTimeout (#292)\n        if (window.requestAnimationFrame) {\n            Object.defineProperty(jQuery.fx, \"interval\", {\n                configurable: true,\n                enumerable: true,\n                get: function () {\n                    if (!window.document.hidden) {\n                        migrateWarn(intervalMsg);\n                    }\n                    return intervalValue;\n                },\n                set: function (newValue) {\n                    migrateWarn(intervalMsg);\n                    intervalValue = newValue;\n                }\n            });\n        }\n\n    }\n\n    var oldLoad = jQuery.fn.load,\n        oldEventAdd = jQuery.event.add,\n        originalFix = jQuery.event.fix;\n\n    jQuery.event.props = [];\n    jQuery.event.fixHooks = {};\n\n    migrateWarnProp(jQuery.event.props, \"concat\", jQuery.event.props.concat,\n        \"jQuery.event.props.concat() is deprecated and removed\");\n\n    jQuery.event.fix = function (originalEvent) {\n        var event,\n            type = originalEvent.type,\n            fixHook = this.fixHooks[type],\n            props = jQuery.event.props;\n\n        if (props.length) {\n            migrateWarn(\"jQuery.event.props are deprecated and removed: \" + props.join());\n            while (props.length) {\n                jQuery.event.addProp(props.pop());\n            }\n        }\n\n        if (fixHook && !fixHook._migrated_) {\n            fixHook._migrated_ = true;\n            migrateWarn(\"jQuery.event.fixHooks are deprecated and removed: \" + type);\n            if ((props = fixHook.props) && props.length) {\n                while (props.length) {\n                    jQuery.event.addProp(props.pop());\n                }\n            }\n        }\n\n        event = originalFix.call(this, originalEvent);\n\n        return fixHook && fixHook.filter ? fixHook.filter(event, originalEvent) : event;\n    };\n\n    jQuery.event.add = function (elem, types) {\n\n        // This misses the multiple-types case but that seems awfully rare\n        if (elem === window && types === \"load\" && window.document.readyState === \"complete\") {\n            migrateWarn(\"jQuery(window).on('load'...) called after load event occurred\");\n        }\n        return oldEventAdd.apply(this, arguments);\n    };\n\n    jQuery.each([\"load\", \"unload\", \"error\"], function (_, name) {\n\n        jQuery.fn[name] = function () {\n            var args = Array.prototype.slice.call(arguments, 0);\n\n            // If this is an ajax load() the first arg should be the string URL;\n            // technically this could also be the \"Anything\" arg of the event .load()\n            // which just goes to show why this dumb signature has been deprecated!\n            // jQuery custom builds that exclude the Ajax module justifiably die here.\n            if (name === \"load\" && typeof args[0] === \"string\") {\n                return oldLoad.apply(this, args);\n            }\n\n            migrateWarn(\"jQuery.fn.\" + name + \"() is deprecated\");\n\n            args.splice(0, 0, name);\n            if (arguments.length) {\n                return this.on.apply(this, args);\n            }\n\n            // Use .triggerHandler here because:\n            // - load and unload events don't need to bubble, only applied to window or image\n            // - error event should not bubble to window, although it does pre-1.7\n            // See http://bugs.jquery.com/ticket/11820\n            this.triggerHandler.apply(this, args);\n            return this;\n        };\n\n    });\n\n    jQuery.each((\"blur focus focusin focusout resize scroll click dblclick \" +\n        \"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n        \"change select submit keydown keypress keyup contextmenu\").split(\" \"),\n        function (_i, name) {\n\n            // Handle event binding\n            jQuery.fn[name] = function (data, fn) {\n                migrateWarn(\"jQuery.fn.\" + name + \"() event shorthand is deprecated\");\n                return arguments.length > 0 ?\n                    this.on(name, null, data, fn) :\n                    this.trigger(name);\n            };\n        });\n\n    // Trigger \"ready\" event only once, on document ready\n    jQuery(function () {\n        jQuery(window.document).triggerHandler(\"ready\");\n    });\n\n    jQuery.event.special.ready = {\n        setup: function () {\n            if (this === window.document) {\n                migrateWarn(\"'ready' event is deprecated\");\n            }\n        }\n    };\n\n    jQuery.fn.extend({\n\n        bind: function (types, data, fn) {\n            migrateWarn(\"jQuery.fn.bind() is deprecated\");\n            return this.on(types, null, data, fn);\n        },\n        unbind: function (types, fn) {\n            migrateWarn(\"jQuery.fn.unbind() is deprecated\");\n            return this.off(types, null, fn);\n        },\n        delegate: function (selector, types, data, fn) {\n            migrateWarn(\"jQuery.fn.delegate() is deprecated\");\n            return this.on(types, selector, data, fn);\n        },\n        undelegate: function (selector, types, fn) {\n            migrateWarn(\"jQuery.fn.undelegate() is deprecated\");\n            return arguments.length === 1 ?\n                this.off(selector, \"**\") :\n                this.off(types, selector || \"**\", fn);\n        },\n        hover: function (fnOver, fnOut) {\n            migrateWarn(\"jQuery.fn.hover() is deprecated\");\n            return this.on(\"mouseenter\", fnOver).on(\"mouseleave\", fnOut || fnOver);\n        }\n    });\n\n    var rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,\n        origHtmlPrefilter = jQuery.htmlPrefilter,\n        makeMarkup = function (html) {\n            var doc = window.document.implementation.createHTMLDocument(\"\");\n            doc.body.innerHTML = html;\n            return doc.body && doc.body.innerHTML;\n        },\n        warnIfChanged = function (html) {\n            var changed = html.replace(rxhtmlTag, \"<$1></$2>\");\n            if (changed !== html && makeMarkup(html) !== makeMarkup(changed)) {\n                migrateWarn(\"HTML tags must be properly nested and closed: \" + html);\n            }\n        };\n\n    jQuery.UNSAFE_restoreLegacyHtmlPrefilter = function () {\n        jQuery.htmlPrefilter = function (html) {\n            warnIfChanged(html);\n            return html.replace(rxhtmlTag, \"<$1></$2>\");\n        };\n    };\n\n    jQuery.htmlPrefilter = function (html) {\n        warnIfChanged(html);\n        return origHtmlPrefilter(html);\n    };\n\n    var oldOffset = jQuery.fn.offset;\n\n    jQuery.fn.offset = function () {\n        var elem = this[0];\n\n        if (elem && (!elem.nodeType || !elem.getBoundingClientRect)) {\n            migrateWarn(\"jQuery.fn.offset() requires a valid DOM element\");\n            return arguments.length ? this : undefined;\n        }\n\n        return oldOffset.apply(this, arguments);\n    };\n\n    // Support jQuery slim which excludes the ajax module\n    // The jQuery.param patch is about respecting `jQuery.ajaxSettings.traditional`\n    // so it doesn't make sense for the slim build.\n    if (jQuery.ajax) {\n\n        var oldParam = jQuery.param;\n\n        jQuery.param = function (data, traditional) {\n            var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;\n\n            if (traditional === undefined && ajaxTraditional) {\n\n                migrateWarn(\"jQuery.param() no longer uses jQuery.ajaxSettings.traditional\");\n                traditional = ajaxTraditional;\n            }\n\n            return oldParam.call(this, data, traditional);\n        };\n\n    }\n\n    var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;\n\n    jQuery.fn.andSelf = function () {\n        migrateWarn(\"jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()\");\n        return oldSelf.apply(this, arguments);\n    };\n\n    // Support jQuery slim which excludes the deferred module in jQuery 4.0+\n    if (jQuery.Deferred) {\n\n        var oldDeferred = jQuery.Deferred,\n            tuples = [\n\n                // Action, add listener, callbacks, .then handlers, final state\n                [\"resolve\", \"done\", jQuery.Callbacks(\"once memory\"),\n                    jQuery.Callbacks(\"once memory\"), \"resolved\"],\n                [\"reject\", \"fail\", jQuery.Callbacks(\"once memory\"),\n                    jQuery.Callbacks(\"once memory\"), \"rejected\"],\n                [\"notify\", \"progress\", jQuery.Callbacks(\"memory\"),\n                    jQuery.Callbacks(\"memory\")]\n            ];\n\n        jQuery.Deferred = function (func) {\n            var deferred = oldDeferred(),\n                promise = deferred.promise();\n\n            deferred.pipe = promise.pipe = function ( /* fnDone, fnFail, fnProgress */) {\n                var fns = arguments;\n\n                migrateWarn(\"deferred.pipe() is deprecated\");\n\n                return jQuery.Deferred(function (newDefer) {\n                    jQuery.each(tuples, function (i, tuple) {\n                        var fn = typeof fns[i] === \"function\" && fns[i];\n\n                        // Deferred.done(function() { bind to newDefer or newDefer.resolve })\n                        // deferred.fail(function() { bind to newDefer or newDefer.reject })\n                        // deferred.progress(function() { bind to newDefer or newDefer.notify })\n                        deferred[tuple[1]](function () {\n                            var returned = fn && fn.apply(this, arguments);\n                            if (returned && typeof returned.promise === \"function\") {\n                                returned.promise()\n                                    .done(newDefer.resolve)\n                                    .fail(newDefer.reject)\n                                    .progress(newDefer.notify);\n                            } else {\n                                newDefer[tuple[0] + \"With\"](\n                                    this === promise ? newDefer.promise() : this,\n                                    fn ? [returned] : arguments\n                                );\n                            }\n                        });\n                    });\n                    fns = null;\n                }).promise();\n\n            };\n\n            if (func) {\n                func.call(deferred, deferred);\n            }\n\n            return deferred;\n        };\n\n        // Preserve handler of uncaught exceptions in promise chains\n        jQuery.Deferred.exceptionHook = oldDeferred.exceptionHook;\n\n    }\n\n    return jQuery;\n});\n",
    "var General = (function General() {\r\n    var self = {};\r\n\r\n    //-------------------------------------------------------------\r\n    // functionName\r\n    //-------------------------------------------------------------\r\n    self.functionName = function (CallerObject) {\r\n        var fn = CallerObject.toString();\r\n        var fname = fn.substring(fn.indexOf(\"function\") + 9, fn.indexOf(\"(\")) || \"anonymous\";\r\n\r\n        return fname;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // ref\r\n    //-------------------------------------------------------------\r\n    self.ref = function (id) {\r\n        return document.getElementById(id);\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // refByName\r\n    //-------------------------------------------------------------\r\n    self.refByName = function (name) {\r\n        return document.getElementsByName(name);\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // ArithmeticRound\r\n    //-------------------------------------------------------------\r\n    self.pow10cache = [1, 10, 100, 1000, 10000, 100000, 1000000, 10000000, 100000000, 1000000000];\r\n\r\n    self.RateRound = function (_rate, _precision) {\r\n        if (!self.isNumber(_rate))\r\n            return \"NA\";\r\n\r\n        var rateStr = _rate.toString();\r\n        var isNegative = rateStr[0] === '-';\r\n        var ratePos = isNegative ? rateStr.substring(1, rateStr.length) : rateStr;\r\n        var precision = _precision || 7;\r\n\r\n        if (self.lenAfterDelimeter(ratePos) == 0)\r\n            return isNegative ? 0 - parseInt(ratePos, 10) : parseInt(ratePos, 10);\r\n\r\n        var fractionLength = precision - self.lenBeforeDelimiter(ratePos) - 1;\r\n        var base = Math.pow(10, fractionLength);\r\n        var rounded = Math.round(self.toNumeric(ratePos) * base) / base;\r\n\r\n        return isNegative ? 0 - rounded : rounded;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // Trailing zeros\r\n    //-------------------------------------------------------------\r\n    self.trailingZeros = function (number, precision) {\r\n        if (!self.isNumber(number)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        if (number.toString().length < precision) {\r\n            var numFormated = number.toString().split('');\r\n\r\n            // add point/trailing zeroes\r\n            for (var i = numFormated.length; i < precision; i++) {\r\n                numFormated[i] = numFormated.join('').indexOf('.') < 0 ? '.' : '0';\r\n            }\r\n\r\n            // trim right point (.)\r\n            var numFrmStr = numFormated.join('');\r\n            number = numFrmStr.split('.')[1].length == 0 ? numFrmStr.replace('.', '') : numFrmStr;\r\n        }\r\n\r\n        return number.toString();\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // InRange\r\n    //-------------------------------------------------------------\r\n    self.InRange = function (rate, range) {\r\n        return (rate > range.far() && rate < range.near()) || (rate > range.near() && rate < range.far());\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // RateAndPipsAndLastClosePip\r\n    //-------------------------------------------------------------\r\n    self.RateAndPipsAndLastClosePip = function (rate, pips, lastPip) {\r\n        return { rate: rate, pips: pips, lastPip: lastPip };\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // Get length of the integer part number. Support negotive numbers.\r\n    //-------------------------------------------------------------\r\n    self.lenBeforeDelimiter = function (number) {\r\n        if (!self.isNumber(number)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        return Math.floor(Math.abs(number)).toString().length;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // Get length of the fractional part number\r\n    //-------------------------------------------------------------\r\n    self.lenAfterDelimeter = function (number) {\r\n\r\n        if (!self.isNumber(number)) {\r\n            return \"NA\";\r\n        }\r\n        var sNum = number.toString(),\r\n            x = sNum.split('.');\r\n\r\n        if (x.length == 1) // whole number\r\n            return 0;\r\n\r\n        return x[1].length;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // isInt\r\n    //-------------------------------------------------------------\r\n    self.isInt = function (x) {\r\n        var y = parseInt(x, 10);\r\n\r\n        if (isNaN(y))\r\n            return false;\r\n\r\n        return x == y;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // isEmpty\r\n    //-------------------------------------------------------------\r\n    self.isEmpty = function (x) {\r\n\r\n        if (x.length == 0 || x == '')\r\n            return true;\r\n\r\n        return false;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // isNumber\r\n    //-------------------------------------------------------------\r\n    self.isNumber = function (x) {\r\n        var y = parseFloat(x);\r\n\r\n        if (isNaN(y))\r\n            return false;\r\n\r\n        return x == y;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // isPos\r\n    //-------------------------------------------------------------\r\n    self.isPos = function (x) {\r\n        var y = 0;\r\n\r\n        if (self.isNumber(x))\r\n            y = parseFloat(x);\r\n\r\n        return y > 0;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // toInt\r\n    //-------------------------------------------------------------\r\n    self.toInt = function (str) {\r\n        var y = parseInt(str.replace(/,/g, \"\"), 10);\r\n\r\n        if (isNaN(y))\r\n            return \"NA\";\r\n\r\n        return y;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    //toNumeric\r\n    //-------------------------------------------------------------\r\n    self.toNumeric = function (str) {\r\n        if (!self.isDefinedType(str)) {\r\n            return;\r\n        }\r\n\r\n        if (self.isNullType(str)) {\r\n            return;\r\n        }\r\n\r\n        if (self.isNumberType(str)) {\r\n            return str;\r\n        }\r\n\r\n        var newstr = [];\r\n        for (var i = 0; i < str.length; i++) {\r\n            var s = str.substr(i, 1);\r\n\r\n            if (s !== \",\") {\r\n                newstr.push(s);\r\n            }\r\n        }\r\n\r\n        var strParse = parseFloat(newstr.join(\"\"));\r\n\r\n        if (isNaN(strParse)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        return strParse;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // toBoolean\r\n    //-------------------------------------------------------------\r\n    self.toBoolean = function (value) {\r\n        if (self.isStringType(value)) {\r\n            if (value.toLowerCase() == \"false\") {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return Boolean(value);\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // getPageScroll ***********************\r\n    //-------------------------------------------------------------\r\n    self.PageYScroll = function () {\r\n        if (self.pageYOffset) {\r\n            return self.pageYOffset;\r\n        }\r\n\r\n        if (document.documentElement && document.documentElement.scrollTop) {\r\n            return document.documentElement.scrollTop;\r\n        }\r\n\r\n        return document.body.scrollTop;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // WinInfo\r\n    //-------------------------------------------------------------\r\n    self.WindowInfo = function () {\r\n        var win = { height: 0, width: 0, innerHeight: 0, yScroll: 0 };\r\n\r\n        win.height = Math.max($(document).height(),\r\n            $(window).height(), /* For opera: */\r\n            document.documentElement.clientHeight);\r\n\r\n        win.width = Math.max($(document).width(),\r\n            $(window).width(),  /* For opera: */\r\n            document.documentElement.clientWidth);\r\n\r\n        win.innerHeight = window.innerHeight || document.documentElement.offsetHeight;\r\n\r\n        win.yScroll = self.PageYScroll();\r\n\r\n        return win;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // BlockNonInteger\r\n    //-------------------------------------------------------------\r\n    self.BlockNonInteger = function (e) {\r\n        var key = \"\", reg = /\\d/;\r\n\r\n        e = e || window.event;\r\n\r\n        if (e.keyCode) {\r\n            key = e.keyCode;\r\n        }\r\n        else if (e.which) {\r\n            key = e.which;\r\n        }\r\n\r\n        //--------------------------------------\r\n\r\n        if (isNaN(key))\r\n            return true;\r\n\r\n        if (key == 8) // check for backspace\r\n            return true;\r\n\r\n        //--------------------------------------\r\n\r\n        var keychar = String.fromCharCode(key);\r\n        return reg.test(keychar);\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // pad\r\n    //-------------------------------------------------------------\r\n    self.pad = function (number, length) {\r\n        var str = String(number);\r\n\r\n        while (str.length < length) {\r\n            str = '0' + str;\r\n        }\r\n\r\n        return str;\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    // SplitDateTime  dd/mm/yy hh:mm:ss\r\n    //-------------------------------------------------------------\r\n    self.SplitDateTime = function (sDate) {\r\n        var fullDateStr,\r\n            fullTimeStr,\r\n            ddStr = \"01\",\r\n            mmStr = \"01\",\r\n            yyStr = \"1900\",\r\n            hhStr = \"00\",\r\n            minStr = \"00\",\r\n            ssStr = \"00\",\r\n            msStr = \"000\",\r\n            dateTimeParts = sDate.split(\" \"),\r\n            chunk = dateTimeParts.shift();\r\n\r\n        if (chunk) {\r\n            if (chunk.indexOf(\"/\") != -1) {\r\n                var dateParts = chunk.split(\"/\");\r\n\r\n                ddStr = dateParts[0] ? (dateParts[0].length == 2 ? dateParts[0] : \"0\" + dateParts[0]) : \"01\";\r\n                mmStr = dateParts[1] ? (dateParts[1].length == 2 ? dateParts[1] : \"0\" + dateParts[1]) : \"01\";\r\n                yyStr = dateParts[2] ? (dateParts[2].length == 4 ? dateParts[2] : \"20\" + dateParts[2]) : \"1900\";\r\n\r\n                // get next chunk\r\n                dateTimeParts.push(chunk);\r\n                chunk = dateTimeParts.shift();\r\n            }\r\n        }\r\n\r\n        //fullDateStr = ddStr + \"/\" + mmStr + \"/\" + ((yyStr.length > 2) ? yyStr : \"20\" + yyStr);\r\n        fullDateStr = ddStr + \"/\" + mmStr + \"/\" + yyStr;\r\n\r\n        if (chunk) {\r\n            if (chunk.indexOf(\":\") != -1) {\r\n                var timeParts = chunk.split(\":\");\r\n\r\n                hhStr = timeParts[0] ? (timeParts[0].length == 2 ? timeParts[0] : \"0\" + timeParts[0]) : \"00\";\r\n                minStr = timeParts[1] ? (timeParts[1].length == 2 ? timeParts[1] : \"0\" + timeParts[1]) : \"00\";\r\n                ssStr = timeParts[2] ? (timeParts[2].length == 2 ? timeParts[2] : \"0\" + timeParts[2]) : \"00\";\r\n                msStr = timeParts[3] ? timeParts[3] : \"000\";\r\n\r\n                dateTimeParts.push(chunk);\r\n            }\r\n        }\r\n\r\n        fullTimeStr = hhStr + \":\" + minStr + \":\" + ssStr;\r\n\r\n        return {\r\n            day: ddStr,\r\n            month: mmStr,\r\n            year: yyStr,\r\n            date: fullDateStr,\r\n            time: fullTimeStr,\r\n            hour: hhStr,\r\n            min: minStr,\r\n            sec: ssStr,\r\n            ms: msStr\r\n        };\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    //  fillHoursList - create an array of hours, from minimum to maximum\r\n    //-------------------------------------------------------------\r\n    self.fillHoursList = function (ddlHours, maxHour, maxMin, minHour) {\r\n        if (ddlHours) {\r\n            ddlHours.length = 0;\r\n\r\n            minHour = minHour || 0;\r\n\r\n            for (var i = minHour; i <= maxHour; i++) {\r\n                var item = ((i < 10) ? \"0\" + i : i) + \":00\";\r\n                ddlHours.push({ \"value\": item, \"text\": item });\r\n            }\r\n        }\r\n\r\n        if (maxMin != 0) {\r\n            var lastItem = ((maxHour < 10) ? \"0\" + maxHour : maxHour) + \":\" + ((maxMin < 10) ? \"0\" + maxMin : maxMin);\r\n            ddlHours.push({ \"value\": lastItem, \"text\": lastItem });\r\n        }\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    //  str2Date\r\n    //-------------------------------------------------------------\r\n    self.str2Date = function (date, format) {\r\n        if (!date) {\r\n            return null;\r\n        }\r\n\r\n        format = format || 'd/m/Y';\r\n\r\n        var parts = date.split(/\\W+/);\r\n\r\n        var against = format.split(/\\W+/), d, m, y, h, min, now = new Date();\r\n\r\n        for (var i = 0; i < parts.length; i++) {\r\n            switch (against[i]) {\r\n                case 'd': case 'e':\r\n                    d = parseInt(parts[i], 10);\r\n                    break;\r\n\r\n                case 'm':\r\n                    m = parseInt(parts[i], 10) - 1;\r\n                    break;\r\n\r\n                case 'Y': case 'y':\r\n                    y = parseInt(parts[i], 10);\r\n                    y += y > 100 ? 0 : (y < 29 ? 2000 : 1900);\r\n                    break;\r\n\r\n                case 'H': case 'I': case 'k': case 'l':\r\n                    h = parseInt(parts[i], 10);\r\n                    break;\r\n\r\n                case 'P': case 'p':\r\n                    if (/pm/i.test(parts[i]) && h < 12) {\r\n                        h += 12;\r\n                    } else if (/am/i.test(parts[i]) && h >= 12) {\r\n                        h -= 12;\r\n                    }\r\n                    break;\r\n\r\n                case 'M':\r\n                    min = parseInt(parts[i], 10);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return new Date(\r\n            typeof y === \"undefined\" ? now.getFullYear() : y,\r\n            typeof m === \"undefined\" ? now.getMonth() : m,\r\n            typeof d === \"undefined\" ? now.getDate() : d,\r\n            typeof h === \"undefined\" ? now.getHours() : h,\r\n            typeof min === \"undefined\" ? now.getMinutes() : min,\r\n            0\r\n        );\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    //  addSign < or > according to limit type and deal direction\r\n    //-------------------------------------------------------------\r\n    self.addSign = function (orderDir, limitType) {\r\n        if (orderDir !== eOrderDir.Sell && orderDir !== eOrderDir.Buy && orderDir !== eOrderDir.None) {\r\n            return \"NA\";\r\n        }\r\n\r\n        if (limitType === eLimitType.StopLoss)\r\n            return (orderDir == eOrderDir.Sell) ? \">\" : \"<\";\r\n\r\n        return (orderDir === eOrderDir.Sell) ? \"<\" : \">\";\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    //Compare two values with numeric or alphabetic order\r\n    //-------------------------------------------------------------\r\n    self.CompareValues = function (left, right, asc) {\r\n        if (self.isNumber(left) && self.isNumber(right))\r\n            return left == right ? 0 : (Number(left) < Number(right) ? -1 : 1) * (asc ? 1 : -1);\r\n        else\r\n            return left.toString().localeCompare(right);\r\n    };\r\n\r\n    //-------------------------------------------------------------\r\n    //  return string according to limit type SL: or TP:\r\n    //-------------------------------------------------------------\r\n    self.setrDirectionMessageText = function (limitType) {\r\n\r\n        if (limitType == eLimitType.StopLoss)\r\n            return Dictionary.GetItem(\"limtype1_short\") + \": \";\r\n        else if (limitType == eLimitType.TakeProfit)\r\n            return Dictionary.GetItem(\"limtype2_short\") + \": \";\r\n\r\n        return \"\";\r\n\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // divide the number given according to its size, return it with 2 decimal digits\r\n    // (in K case 1 decimal digit) and add B\\M\\K \r\n    //---------------------------------------------------------------\r\n    self.formatNumber = function (str, format) {\r\n        var noComma = str.replace(/,/g, '');\r\n\r\n        var r = Math.round(noComma * 10) / 10;\r\n        var abs = Math.abs(r);\r\n\r\n        if (abs > 999999999)\r\n            r = (r / 1000000000).toFixed(2) + Dictionary.GetItem(\"roundB\");\r\n        else if (abs > 999999)\r\n            r = (r / 1000000).toFixed(2) + Dictionary.GetItem(\"roundM\");\r\n        else if (format == \"K\" && abs > 9999) {\r\n            if (r % 1000 == 0)\r\n                r = (r / 1000);\r\n            else\r\n                r = (r / 1000).toFixed(1);\r\n            r += Dictionary.GetItem(\"roundK\");\r\n        }\r\n\r\n        return self.formatNumberWithThousandsSeparator(r);\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // return the number given according to its size, return it with 2 decimal digits and add B\\M\\K \r\n    //---------------------------------------------------------------\r\n    self.formatRoundM = function (str) {\r\n        return self.formatNumber(str, \"M\");\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // return the number given according to its size, return it with 2 decimal digits and add B\\M\\K \r\n    //---------------------------------------------------------------\r\n    self.formatWithThresholdAndDecimals = function (str, format) {\r\n        var noComma = str.replace(/,/g, '');\r\n        var r = Number(noComma).toFixed(2);\r\n        var abs = Math.abs(r);\r\n\r\n        if (abs > 999999999)\r\n            r = (r / 1000000000).toFixed(2) + Dictionary.GetItem(\"roundB\");\r\n        else if (abs > 999999)\r\n            r = (r / 1000000).toFixed(2) + Dictionary.GetItem(\"roundM\");\r\n        else if (format == \"K\" && abs > 9999) {\r\n            if (r % 1000 == 0)\r\n                r = (r / 1000);\r\n            else\r\n                r = (r / 1000).toFixed(1);\r\n            r += Dictionary.GetItem(\"roundK\");\r\n        }\r\n\r\n        return self.formatNumberWithThousandsSeparator(r);\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // if the passed number is above the threshold, the old rounding self.\r\n    // is applied. If not, we round to the second digit.\r\n    //---------------------------------------------------------------\r\n    self.formatRoundBasedOnThreshold = function (str, format) {\r\n        if (Math.abs(Number(str)) > cConfig.AmountRoundingThreshold) {\r\n            return self.formatWithThresholdAndDecimals(str, format);\r\n        }\r\n\r\n        var noComma = str.replace(/,/g, '');\r\n        var r = Number(noComma).toFixed(2);\r\n        return self.formatNumberWithThousandsSeparator(r);\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // if the passed number is above the threshold, the old rounding self.\r\n    // is applied. If not, we round to the second digit.\r\n    //---------------------------------------------------------------\r\n    self.formatRoundMBasedOnThreshold = function (str) {\r\n        return self.formatRoundBasedOnThreshold(str, \"M\");\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // add Thousands Separator \r\n    //---------------------------------------------------------------\r\n    self.formatNumberWithThousandsSeparator = function (value) {\r\n        return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // \r\n    //---------------------------------------------------------------\r\n    self.roundedNumberFromAmount = function (number) {\r\n        var noComma = number.toString().replace(/,/g, '');\r\n        var noDecimals = Math.round(noComma);\r\n        return noDecimals;\r\n    };\r\n\r\n    /////////////////////////////////////////////////////\r\n    // for old browsers\r\n\r\n    self.isNullType = function (value) {\r\n        return value === null;\r\n    };\r\n\r\n    self.isDefinedType = function (value) {\r\n        return typeof value !== 'undefined';\r\n    };\r\n\r\n    // TO DO: refactor the name, the method returns object not a true or false value\r\n    self.isDefinedNotNullTypeReturnType = function (value) {\r\n        if (value !== null && typeof value !== 'undefined')\r\n            return value;\r\n        else\r\n            return {};\r\n    };\r\n\r\n    self.isArrayType = function (value) {\r\n        // return typeof (value) == 'object' && (value instanceof Array);\r\n        return Object.prototype.toString.apply(value) == '[object Array]';\r\n    };\r\n\r\n    self.isStringType = function (value) {\r\n        return typeof (value) === 'string';\r\n    };\r\n\r\n    self.isBooleanType = function (value) {\r\n        return typeof (value) === 'boolean';\r\n    };\r\n\r\n    self.isNumberType = function (value) {\r\n        return typeof (value) === 'number' && isFinite(value);\r\n    };\r\n\r\n    self.isIntType = function (value) {\r\n        return self.isNumberType(value) && parseInt(value, 10) == value;\r\n    };\r\n\r\n    self.isNullOrUndefined = function (value) {\r\n        if (!self.isDefinedType(value)) {\r\n            return true;\r\n        }\r\n\r\n        if (self.isNullType(value)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    self.isEmptyType = function (value) {\r\n        return self.isEmptyValue(value);\r\n    };\r\n\r\n    self.isEmptyValue = function (value) {\r\n        if (!self.isDefinedType(value)) {\r\n            return true;\r\n        }\r\n\r\n        if (self.isNullType(value)) {\r\n            return true;\r\n        }\r\n\r\n        if (self.isArrayType(value) && value.length < 1) {\r\n            return true;\r\n        }\r\n\r\n        if (self.isStringType(value) && value.length < 1) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    self.isPrimitiveType = function (value) {\r\n        return self.isStringType(value) || self.isNumberType(value) || self.isBooleanType(value);\r\n    };\r\n\r\n    self.isObjectType = function (value) {\r\n        return !!value && Object.prototype.toString.apply(value) === '[object Object]';\r\n    };\r\n\r\n    self.isDateType = function (value) {\r\n        return Object.prototype.toString.apply(value) === '[object Date]';\r\n    };\r\n\r\n    self.isRegExpType = function (value) {\r\n        return Object.prototype.toString.apply(value) == '[object RegExp]';\r\n    };\r\n\r\n    self.isFunctionType = function (value) {\r\n        // return Object.prototype.toString.apply(value) === '[object Function]';\r\n        return typeof value === \"function\"; // faster (http://jsperf.com/comparing-underscore-js-isfunction-with-typeof-function/2)\r\n    };\r\n\r\n    self.isIterableType = function (value) {\r\n        if (self.isArrayType(value) || value.callee) {\r\n            return true;\r\n        }\r\n\r\n        if (/NodeList|HTMLCollection/.test(Object.prototype.toString.call(value))) {\r\n            return true;\r\n        }\r\n\r\n        return ((typeof value.nextNode != 'undefined' || value.item) && self.isNumberType(value.length)) || false;\r\n    };\r\n\r\n    self.eachType = function (array, fn, scope) {\r\n        if (self.isEmptyValue(array)) {\r\n            return;\r\n        }\r\n\r\n        if (!self.isIterableType(array) || self.isPrimitiveType(array)) {\r\n            array = [array];\r\n        }\r\n\r\n        for (var i = 0, len = array.length; i < len; i++) {\r\n            if (fn.apply(scope || array[i], [array[i], i, array]) === false) {\r\n                return;\r\n            }\r\n        }\r\n    };\r\n\r\n    self.iterateType = function (obj, fn, scope) {\r\n        if (self.isEmptyValue(obj)) {\r\n            return;\r\n        }\r\n\r\n        if (self.isIterableType(obj)) {\r\n            self.eachType(obj, fn, scope);\r\n            return;\r\n        }\r\n        else if (self.isObjectType(obj)) {\r\n            for (var prop in obj) {\r\n                if (obj.hasOwnProperty(prop)) {\r\n                    if (fn.apply(scope || obj, [prop, obj[prop], obj]) === false) {\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    ///////////////////////////////////////////////\r\n    // Extend an object\r\n    /**\r\n     * Copies all the properties of config to obj.\r\n     * @param {Object} target The receiver of the properties\r\n     * @param {Object} source The source of the properties\r\n     * @param {Object} defaults A different object that will also be applied for default values\r\n     * @return {Object} returns obj\r\n     */\r\n    self.extendType = function (target, source, defaults) {\r\n        if (defaults) {\r\n            self.extendType(target, defaults);\r\n        }\r\n\r\n        if (target && source && typeof source == 'object') {\r\n            for (var propName in source) {\r\n                if (source.hasOwnProperty(propName)) {\r\n                    target[propName] = source[propName];\r\n                }\r\n            }\r\n        }\r\n\r\n        return target;\r\n    };\r\n\r\n    /**\r\n     * Copies all the properties of config to obj if they don't already exist.\r\n     * @param {Object} target The receiver of the properties\r\n     * @param {Object} source The source of the properties\r\n     * @return {Object} returns obj\r\n     */\r\n    self.extendIfType = function (target, source) {\r\n        if (target) {\r\n            for (var propName in source) {\r\n                if (source.hasOwnProperty(propName)) {\r\n                    if (!self.isDefinedType(target[propName])) {\r\n                        target[propName] = source[propName];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return target;\r\n    };\r\n\r\n    /**\r\n     * from JQGeneral.js\r\n     */\r\n    self.cloneHardCopy = function (object) {\r\n        return $.extend(true, {}, object);\r\n    };\r\n\r\n    ///////////////////////////////////////////////\r\n    //\r\n    // URL functions\r\n    //\r\n    /**\r\n     * Takes an object and converts it to an encoded URL. e.g. Ext.urlEncode({foo: 1, bar: 2}); would return \"foo=1&bar=2\".  Optionally, property values can be arrays, instead of keys and the resulting string that's returned will contain a name/value pair for each array value.\r\n     * @param {Object} obj\r\n     * @param {String} prefix (optional) A prefix to add to the url encoded string\r\n     * @return {String}\r\n     */\r\n    self.urlEncode = function (obj, prefix) {\r\n        var empty,\r\n            buffer = [],\r\n            encode = encodeURIComponent;\r\n\r\n        self.iterateType(obj, function (key, item) {\r\n            empty = self.isEmptyValue(item);\r\n            self.eachType(empty ? key : item, function (value) {\r\n                buffer.push('&', encode(key), '=', (!self.isEmptyValue(value) && (value != key || !empty)) ? (self.isDateType(value) ? encode(value).replace(/\"/g, '') : encode(value)) : '');\r\n            });\r\n        });\r\n\r\n        if (!prefix) {\r\n            buffer.shift();\r\n            prefix = '';\r\n        }\r\n        else if (prefix.lastIndexOf('?') == -1) {\r\n            buffer.shift();\r\n            prefix += '?';\r\n        }\r\n\r\n        return prefix + buffer.join('');\r\n    };\r\n\r\n    /**\r\n     * Takes an encoded URL and and converts it to an object. \r\n     * @param {String} urlString\r\n     * @param {Boolean} overwrite (optional) Items of the same name will overwrite previous values instead of creating an an array (Defaults to false).\r\n     * @return {Object} A literal with members\r\n     */\r\n    self.urlDecode = function (urlString, overwrite) {\r\n        if (urlString.length < 1) {\r\n            return {};\r\n        }\r\n\r\n        urlString = urlString.split(\"#\")[0];\r\n\r\n        var obj = {},\r\n            pairs = urlString.slice(urlString.indexOf('?') + 1).split('&'),\r\n            decode = decodeURIComponent,\r\n            name,\r\n            value;\r\n\r\n        for (var i = 0, len = pairs.length; i < len; i++) {\r\n            var pair = pairs[i].split('=');\r\n            name = pair[0];\r\n            value = decode(pair[1]);\r\n            obj[name] = overwrite || !obj[name] ? value : [].concat(obj[name]).concat(value);\r\n        }\r\n\r\n        return obj;\r\n    };\r\n\r\n    ///////////////////////////////////////////////\r\n    /**\r\n     * @param {String} str The string to escape\r\n     * @return (String) The escaped string\r\n     */\r\n    self.escapeRe = function (str) {\r\n        return str.replace(/([-.*+?^${}()|[\\]\\/\\\\])/g, \"\\\\$1\");\r\n    };\r\n\r\n    self.emptyFn = function () { };\r\n\r\n    /* eslint no-extend-native: 0 */\r\n    Function.prototype.override = function (func) {\r\n        if (!self.isFunctionType(func)) {\r\n            throw new SyntaxError(\"self.is required\");\r\n        }\r\n\r\n        var superFunction = self;\r\n\r\n        return function () {\r\n            self.superFunction = superFunction;\r\n\r\n            return func.apply(self, arguments);\r\n        };\r\n    };\r\n\r\n    Boolean.parse = function (str) {\r\n        if (self.isStringType(str)) {\r\n            str = String(str).toLowerCase();\r\n\r\n            var boolmap = {\r\n                \"no\": false,\r\n                \"false\": false,\r\n                \"yes\": true,\r\n                \"true\": true\r\n            };\r\n\r\n            if (str in boolmap) {\r\n                return boolmap[str];\r\n            }\r\n        }\r\n\r\n        return !!str;\r\n    };\r\n\r\n    self.simulatedContentStringLegth = function (text, font) {\r\n        var f = font || '23px arial',\r\n            o = $('<div>' + text + '</div>')\r\n                .css({ 'position': 'absolute', 'float': 'left', 'white-space': 'nowrap', 'visibility': 'hidden', 'font': f })\r\n                .appendTo($('body')),\r\n            w = o.width();\r\n\r\n        o.remove();\r\n\r\n        return w;\r\n    };\r\n\r\n    /**\r\n     * Determines if two objects or two values are equivalent. Supports value types, regular expressions, arrays and\r\n     * objects.\r\n     *\r\n     * Two objects or values are considered equivalent if at least one of the following is true:\r\n     *\r\n     * * Both objects or values pass `===` comparison.\r\n     * * Both objects or values are of the same type and all of their properties pass `===` comparison.\r\n     * * Both values are NaN. (In JavasScript, NaN == NaN => false. But we consider two NaN as equal)\r\n     * * Both values represent the same regular expression (In JavasScript,\r\n     *   /abc/ == /abc/ => false. But we consider two regular expressions as equal when their textual\r\n     *   representation matches).\r\n     *\r\n     * During a property comparison, properties of `function` type are ignored.\r\n     *\r\n     * @param {*} o1 Object or value to compare.\r\n     * @param {*} o2 Object or value to compare.\r\n     * @returns {boolean} True if arguments are equal.\r\n     */\r\n    self.equals = function (o1, o2) {\r\n        if (o1 === o2) {\r\n            return true;\r\n        }\r\n\r\n        if (o1 === null || o2 === null) {\r\n            return false;\r\n        }\r\n\r\n        /* eslint no-self-compare: 0 */\r\n        if (o1 !== o1 && o2 !== o2) {\r\n            return true; // NaN === NaN\r\n        }\r\n\r\n        var t1 = typeof o1,\r\n            t2 = typeof o2,\r\n            length,\r\n            key,\r\n            keySet;\r\n\r\n        if (t1 == t2) {\r\n            if (t1 == 'object') {\r\n                if (self.isArrayType(o1)) {\r\n                    if (!self.isArrayType(o2)) {\r\n                        return false;\r\n                    }\r\n\r\n                    if ((length = o1.length) == o2.length) {\r\n                        for (key = 0; key < length; key++) {\r\n                            if (!self.equals(o1[key], o2[key])) {\r\n                                return false;\r\n                            }\r\n                        }\r\n\r\n                        return true;\r\n                    }\r\n                } else if (self.isDateType(o1)) {\r\n                    return self.isDateType(o2) && o1.getTime() == o2.getTime();\r\n                } else if (self.isRegExpType(o1) && self.isRegExpType(o2)) {\r\n                    return o1.toString() == o2.toString();\r\n                } else if (self.isArrayType(o2)) {\r\n                    return false;\r\n                } else {\r\n                    keySet = {};\r\n\r\n                    for (key in o1) {\r\n                        if (self.isFunctionType(o1[key])) {\r\n                            continue;\r\n                        }\r\n\r\n                        if (!self.equals(o1[key], o2[key])) {\r\n                            return false;\r\n                        }\r\n\r\n                        keySet[key] = true;\r\n                    }\r\n\r\n                    for (key in o2) {\r\n                        if (!keySet.hasOwnProperty(key) && typeof o2[key] !== \"undefined\" && !self.isFunctionType(o2[key])) {\r\n                            return false;\r\n                        }\r\n                    }\r\n\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    self.argsToArray = function (input) {\r\n        var args = [];\r\n\r\n        for (var i = 0, length = input.length; i < length; i++) {\r\n            args[i] = input[i];\r\n        }\r\n\r\n        return args;\r\n    };\r\n\r\n    self.getKeyByValue = function (object, value) {\r\n        for (var key in object) {\r\n            if (object.hasOwnProperty(key) && object[key] === value) {\r\n                return key;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    self.padNumber = function (number) {\r\n        return ('0' + number).slice(-2);\r\n    };\r\n\r\n    self.extractNumberFromString = function (str) {\r\n        if (self.isEmptyValue(str)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        var arrayOfStrings = str.match(/[+-]?\\d+(\\.\\d+)?/g);\r\n\r\n        if (typeof arrayOfStrings === \"undefined\" || arrayOfStrings === null) {\r\n            return \"NA\";\r\n        }\r\n\r\n        return parseFloat(arrayOfStrings.join(''));\r\n    };\r\n\r\n    self.createGuid = function () {\r\n        function s4() {\r\n            return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\r\n        }\r\n\r\n        return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\r\n    };\r\n\r\n    self.extractGuid = function (url) {\r\n        var hashPos = url.indexOf('#');\r\n        var guid = \"\";\r\n\r\n        if (hashPos !== -1) {\r\n            var hashStrArray = url.substring(hashPos, url.length).split('&');\r\n\r\n            for (var i = 0; i < hashStrArray.length; i++) {\r\n                if (hashStrArray[i].indexOf('guid') !== -1) {\r\n                    guid = hashStrArray[i].split('=')[1];\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return guid;\r\n    };\r\n\r\n    self.objectFirst = function (container, filterCallback) {\r\n        if (!container || !filterCallback || !self.isFunctionType(filterCallback)) {\r\n            return null;\r\n        }\r\n\r\n        if (self.isArrayType(container)) {\r\n            for (var i = 0, j = container.length; i < j; i++)\r\n                if (filterCallback(container[i], i)) {\r\n                    return container[i];\r\n                }\r\n\r\n            return null;\r\n        }\r\n\r\n        for (var item in container) {\r\n            if (!container.hasOwnProperty(item)) {\r\n                continue;\r\n            }\r\n\r\n            if (filterCallback(container[item])) {\r\n                return container[item];\r\n            }\r\n        }\r\n\r\n        return null;\r\n    };\r\n\r\n    self.objectFilter = function (container, filterCallback) {\r\n        if (!container || !filterCallback || !self.isFunctionType(filterCallback)) {\r\n            return null;\r\n        }\r\n\r\n        if (self.isArrayType(container)) {\r\n            return container.filter(filterCallback);\r\n        }\r\n\r\n        var result = [];\r\n\r\n        for (var item in container) {\r\n            if (!container.hasOwnProperty(item)) {\r\n                continue;\r\n            }\r\n\r\n            if (filterCallback(container[item])) {\r\n                result.push(container[item]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    self.objectContainsKey = function (container, key) {\r\n        if (!container) {\r\n            return null;\r\n        }\r\n\r\n        for (var item in container) {\r\n            if (!container.hasOwnProperty(item)) {\r\n                continue;\r\n            }\r\n\r\n            if (item == key) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    self.objectContainsValue = function (container, value) {\r\n        if (!container) {\r\n            return null;\r\n        }\r\n\r\n        for (var item in container) {\r\n            if (!container.hasOwnProperty(item)) {\r\n                continue;\r\n            }\r\n\r\n            if (container[item] == value) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    self.objectMap = function (container, mapCallback) {\r\n        if (!container || !mapCallback || !self.isFunctionType(mapCallback)) {\r\n            return null;\r\n        }\r\n\r\n        if (self.isArrayType(container)) {\r\n            return container.map(mapCallback);\r\n        }\r\n\r\n        var result = [];\r\n\r\n        for (var item in container) {\r\n            if (!container.hasOwnProperty(item)) {\r\n                continue;\r\n            }\r\n\r\n            result.push(mapCallback(container[item]));\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    self.objectToArray = function (container) {\r\n        if (!container) {\r\n            return null;\r\n        }\r\n\r\n        if (self.isArrayType(container)) {\r\n            return container;\r\n        }\r\n\r\n        var result = [];\r\n\r\n        for (var item in container) {\r\n            if (!container.hasOwnProperty(item)) {\r\n                continue;\r\n            }\r\n\r\n            result.push(container[item]);\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n    self.disposeArray = function (disposablesArray) {\r\n        if (!self.isArrayType(disposablesArray)) {\r\n            throw new Error('Input parameter is not an array');\r\n        }\r\n\r\n        var disposableObject;\r\n\r\n        for (var i = 0, j = disposablesArray.length; i < j; i++) {\r\n            disposableObject = disposablesArray[i];\r\n\r\n            if (disposableObject && self.isFunctionType(disposableObject.dispose)) {\r\n                disposableObject.dispose();\r\n            }\r\n        }\r\n\r\n        disposablesArray.length = 0;\r\n    };\r\n\r\n    self.containsHtmlTags = function (inputString) {\r\n        return /<[a-z][\\s\\S]*>/i.test(inputString);\r\n    };\r\n\r\n    self.isPromiseFulfilled = function (promise) {\r\n        return promise.inspect().state === \"fulfilled\";\r\n    };\r\n\r\n    self.addGMTSuffix = function (inputString) {\r\n        return inputString + ' GMT';\r\n    };\r\n\r\n    self.clone = function (object) {\r\n        function F() { }\r\n        F.prototype = object;\r\n        return new F();\r\n    };\r\n\r\n    self.extendClass = function (parentClass, inheritedClass) {\r\n        /* eslint no-proto: 0 */\r\n        if (typeof parentClass !== \"function\") {\r\n            throw new Error(\"Argument exception: parentClass is not a function.\");\r\n        }\r\n\r\n        if (typeof inheritedClass !== \"function\") {\r\n            throw new Error(\"Argument exception: inheritedClass is not a function.\");\r\n        }\r\n\r\n        var Class = function () {\r\n            var args = self.argsToArray(arguments);\r\n            var obj = {};\r\n            var parent = new (Function.prototype.bind.apply(parentClass, [null].concat(args)))();\r\n\r\n            obj.parent = parent;\r\n            obj.__proto__ = parent;\r\n\r\n            var child = inheritedClass.apply(obj, args);\r\n\r\n            Object.assign(obj, child);\r\n\r\n            return obj;\r\n        };\r\n\r\n        return Class;\r\n    };\r\n\r\n    return self;\r\n}());\r\n\ndefine(\"handlers/general\", (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function () {\r\n\t\t\t\treturn this.General;\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.General;\n    };\n}(this)));\n\n",
    "var UrlResolver = (function () {\r\n\tvar brokerID = null;\r\n\r\n\tvar module = {\r\n\t\tmemoizedValues: {},\r\n\t\tgetVersion: function () {\r\n\t\t\tif (this.memoizedValues[\"version\"]) {\r\n\t\t\t\treturn this.memoizedValues[\"version\"];\r\n\t\t\t} else {\r\n\t\t\t\treturn (this.memoizedValues[\"version\"] =\r\n\t\t\t\t\t(document.cookie.match(/(^|; )Version=([^;]+)/i) || \"\")[2] || \"\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetLanguage: function () {\r\n\t\t\tif (this.memoizedValues[\"language\"]) {\r\n\t\t\t\treturn this.memoizedValues[\"language\"];\r\n\t\t\t} else {\r\n\t\t\t\treturn (this.memoizedValues[\"language\"] =\r\n\t\t\t\t\t(document.cookie.match(/(^|; )Language=([^;]+)/i) || \"\")[2] || \"\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetLanguageId: function () {\r\n\t\t\tif (this.memoizedValues[\"languageId\"]) {\r\n\t\t\t\treturn this.memoizedValues[\"languageId\"];\r\n\t\t\t} else {\r\n\t\t\t\treturn (this.memoizedValues[\"languageId\"] =\r\n\t\t\t\t\t(document.cookie.match(/(^|; )LID=([^;]*)/i) || \"\")[2] || \"\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetCdnPath: function () {\r\n\t\t\tif (this.memoizedValues[\"cdnPath\"]) {\r\n\t\t\t\treturn this.memoizedValues[\"cdnPath\"];\r\n\t\t\t} else {\r\n\t\t\t\treturn (this.memoizedValues[\"cdnPath\"] = (document.cookie.match(/(^|; )CDN=([^;]*)/i) || \"\")[2] || \"\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetApplicationType: function () {\r\n\t\t\tif (this.memoizedValues[\"applicationType\"]) {\r\n\t\t\t\treturn this.memoizedValues[\"applicationType\"];\r\n\t\t\t} else {\r\n\t\t\t\tvar viewMode = (document.cookie.match(/(^|; )ViewMode=([^;]*)/i) || 0)[2] || \"\";\r\n\r\n\t\t\t\tif (viewMode.toLowerCase() === \"mobile\") {\r\n\t\t\t\t\treturn (this.memoizedValues[\"applicationType\"] = \"mobile\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (this.memoizedValues[\"applicationType\"] = \"web\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetDefaultBroker: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )DB=([\\d]+)B/i) || \"\")[2] || \"0\";\r\n\t\t},\r\n\t\tgetBroker: function () {\r\n\t\t\tif (brokerID === null) {\r\n\t\t\t\tbrokerID = (document.cookie.match(/(^|; )B=([\\d]+)B\\|/i) || \"\")[2] || \"\";\r\n\t\t\t}\r\n\t\t\treturn brokerID;\r\n\t\t},\r\n\t\tgetFolderForInstruments: function () {\r\n\t\t\tvar isDemo = (document.cookie.match(/(^|; )B=.*\\|(DM)\\|/i) || \"\")[2] === \"DM\";\r\n\r\n\t\t\tif (isDemo) {\r\n\t\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\d]+)RF\\|/i) || \"\")[2] || \"0\";\r\n\t\t\t}\r\n\r\n\t\t\treturn this.getFolder();\r\n\t\t},\r\n\t\tgetFolder: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\d]+)F\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetFuturesPermission: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\w]+)FP\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetSharesPermission: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\w]+)SP\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetShowTestInstruments: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\w]+)TST\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetInstrumentsVersion: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\d]+)\\-VER\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetVersionHash: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\w]+)\\-H\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetDealAmountsVersion: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\d]+)\\-DVER\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetDealAmountsHash: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\w]+)\\-DH\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetMinDealsVersion: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\d]+)\\-MVER\\|/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetMinDealGroupId: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )MinDealGroupId=([^;]*)/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetMinDealsHash: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\w]+)\\-MH/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetIsAutoLogin: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )B=.*\\|([\\d]+)\\-AL/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\tgetApplicationRelativePath: function () {\r\n\t\t\treturn '/webpl3';\r\n\t\t\tif (this.memoizedValues[\"getApplicationRelativePath\"]) {\r\n\t\t\t\treturn this.memoizedValues[\"getApplicationRelativePath\"];\r\n\t\t\t} else {\r\n\t\t\t\treturn (this.memoizedValues[\"getApplicationRelativePath\"] = window.location.pathname\r\n\t\t\t\t\t.substring(0, window.location.pathname.indexOf(\"/\", 1))\r\n\t\t\t\t\t.toLowerCase());\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetStaticPath: function () {\r\n\t\t\treturn this.combine(this.getCdnPath(), this.getApplicationRelativePath());\r\n\t\t},\r\n\t\tgetAssetsPath: function () {\r\n\t\t\treturn this.combine(this.getStaticPath(), \"assets\", this.getVersion());\r\n\t\t},\r\n\t\tgetOriginJSPath: function (filename) {\r\n\t\t\treturn this.combine(\"assets\", this.getVersion(), \"js\", filename || \"\");\r\n\t\t},\r\n\t\tgetStaticJSPath: function (filename) {\r\n\t\t\treturn this.combine(this.getAssetsPath(), \"js\", filename || \"\");\r\n\t\t},\r\n\t\tgetStaticJSActionPath: function (controller, action) {\r\n\t\t\treturn this.combine(this.getAssetsPath(), controller, action + \".js\");\r\n\t\t},\r\n\t\tgetImagePath: function (filename, hasLanguage, hasBroker) {\r\n\t\t\tfilename = filename || \"\";\r\n\r\n\t\t\tvar lang = hasLanguage === true ? this.getLanguage() : \"Default\";\r\n\t\t\tvar broker = hasBroker === true ? \"Broker\" + this.getDefaultBroker() : \"AllBrokers\";\r\n\r\n\t\t\treturn this.combine(\r\n\t\t\t\tthis.getAssetsPath(),\r\n\t\t\t\t\"skins\",\r\n\t\t\t\tthis.getApplicationType(),\r\n\t\t\t\tbroker,\r\n\t\t\t\tlang,\r\n\t\t\t\t\"img\",\r\n\t\t\t\tfilename\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetImageSharedPath: function (filename) {\r\n\t\t\tfilename = filename || \"\";\r\n\r\n\t\t\treturn this.combine(this.getAssetsPath(), \"skins\", \"Shared\", \"svg\", filename);\r\n\t\t},\r\n\t\tgetStaticParams: function () {\r\n\t\t\tvar domain = window.location.host.replace(':9005',''),\r\n\t\t\t\tapplicationType = this.getApplicationType(),\r\n\t\t\t\tbrokerId = this.getBroker(),\r\n\t\t\t\tlanguageId = this.getLanguageId();\r\n\r\n\t\t\treturn this.combine(domain, applicationType, brokerId, languageId);\r\n\t\t},\r\n\t\tgetStaticFilePath: function () {\r\n\t\t\treturn this.combine(this.getStaticPath(), this.getStaticParams());\r\n\t\t},\r\n\t\tgetStaticResourcePath: function (resource) {\r\n\t\t\treturn this.combine(this.getStaticPath(), this.getStaticParams(), this.getVersion(), resource + \".js\");\r\n\t\t},\r\n\t\tgetContentPath: function (resource) {\r\n\t\t\treturn this.combine(\r\n\t\t\t\tthis.getStaticPath(),\r\n\t\t\t\tthis.getStaticParams(),\r\n\t\t\t\tthis.getVersion(),\r\n\t\t\t\tthis.getDefaultBroker(),\r\n\t\t\t\tresource + \".js\"\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetHostName: function (url) {\r\n\t\t\tvar match = url.match(/:\\/\\/([^\\/]*)/i);\r\n\r\n\t\t\tif (\r\n\t\t\t\ttypeof match !== \"undefined\" &&\r\n\t\t\t\tmatch !== null &&\r\n\t\t\t\tmatch.length > 1 &&\r\n\t\t\t\ttypeof match[1] === \"string\" &&\r\n\t\t\t\tmatch[1].length > 0\r\n\t\t\t) {\r\n\t\t\t\treturn match[1];\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetRedirectPath: function () {\r\n\t\t\treturn \"Account/Redirect\";\r\n\t\t},\r\n\t\tgetRedirectUrl: function (action, queryString) {\r\n\t\t\treturn this.combine(\r\n\t\t\t\tthis.getApplicationRelativePath(),\r\n\t\t\t\tthis.getRedirectPath(),\r\n\t\t\t\taction,\r\n\t\t\t\tqueryString ? \"?\" + queryString : String.empty\r\n\t\t\t);\r\n\t\t},\r\n\t\tgetInstrumentsUrl: function (version, hash) {\r\n\t\t\tvar action = \"Instruments/\";\r\n\r\n\t\t\taction += \"fu\" + this.getFuturesPermission();\r\n\t\t\taction += \"-s\" + this.getSharesPermission();\r\n\t\t\taction += \"-fo\" + this.getFolderForInstruments();\r\n\t\t\taction += \"-br\" + this.getBroker();\r\n\t\t\taction += \"-tst\" + this.getShowTestInstruments();\r\n\t\t\taction += \"-v\" + (version || this.getInstrumentsVersion());\r\n\t\t\taction += \"-h\" + (hash || this.getVersionHash());\r\n\r\n\t\t\treturn action;\r\n\t\t},\r\n\t\tgetInstrumentsFromOriginUrl: function () {\r\n\t\t\tvar action = \"InitialData/InstrumentsFromOrigin\";\r\n\r\n\t\t\taction += \"?futuresPermission=\" + this.getFuturesPermission();\r\n\t\t\taction += \"&stocksPermission=\" + this.getSharesPermission();\r\n\t\t\taction += \"&folderId=\" + this.getFolderForInstruments();\r\n\t\t\taction += \"&brokerId=\" + this.getBroker();\r\n\t\t\taction += \"&includeTestInstruments=\" + this.getShowTestInstruments();\r\n\r\n\t\t\treturn action;\r\n\t\t},\r\n\t\tgetMinDealAmountsUrl: function (groupId, version, hash) {\r\n\t\t\tvar action = \"MinDealAmounts/\";\r\n\r\n\t\t\taction += \"g\" + groupId;\r\n\t\t\taction += \"-v\" + (version || this.getMinDealsVersion());\r\n\t\t\taction += \"-h\" + (hash || this.getMinDealsHash());\r\n\r\n\t\t\treturn action;\r\n\t\t},\r\n\t\tgetDealAmountsUrl: function (version, hash) {\r\n\t\t\tvar action = \"DealAmounts/\";\r\n\t\t\taction += \"v\" + (version || this.getDealAmountsVersion());\r\n\t\t\taction += \"-h\" + (hash || this.getDealAmountsHash());\r\n\r\n\t\t\treturn action;\r\n\t\t},\r\n\t\tgetStaticInitialDataInstrumentsUrl: function (version, hash) {\r\n\t\t\treturn this.combine(this.getAssetsPath(), \"InitialData\", this.getInstrumentsUrl(version, hash) + \".js\");\r\n\t\t},\r\n\t\tgetStaticInitialDataDealAmountsUrl: function (version, hash) {\r\n\t\t\treturn this.combine(this.getAssetsPath(), \"InitialData\", this.getDealAmountsUrl(version, hash) + \".js\");\r\n\t\t},\r\n\t\tgetStaticInitialDataMinDealAmountsUrl: function (groupId, version, hash) {\r\n\t\t\treturn this.combine(\r\n\t\t\t\tthis.getAssetsPath(),\r\n\t\t\t\t\"InitialData\",\r\n\t\t\t\tthis.getMinDealAmountsUrl(groupId, version, hash) + \".js\"\r\n\t\t\t);\r\n\t\t},\r\n\t\tisCors: function (requestUrl) {\r\n\t\t\tvar currDomain = \"\"; //window.location.host;\r\n\t\t\tvar requestDomain = this.getHostName(requestUrl);\r\n\r\n\t\t\treturn requestDomain !== null && currDomain !== requestDomain;\r\n\t\t},\r\n\t\tcombine: function () {\r\n\t\t\tvar input = [].slice.call(arguments, 0),\r\n\t\t\t\toutput = input\r\n\t\t\t\t\t.filter(function (item) {\r\n\t\t\t\t\t\treturn typeof item !== \"undefined\" && item !== null && item !== \"\";\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.join(\"/\");\r\n\r\n\t\t\toutput = output.replace(/:\\/(?=[^\\/])/g, \"://\"); // make sure that protocol is followed by 2 slashes\r\n\t\t\toutput = output.replace(/([^:\\s\\%\\3\\A])\\/+/g, \"$1/\"); // remove consecutive slashes\r\n\t\t\toutput = output.replace(/\\/(\\?|&|#[^!]|$)/g, \"$1\"); // remove trailing slash before parameters or hash\r\n\t\t\toutput = output.replace(/(\\?.+)\\?/g, \"$1&\"); // replace ? in parameters with &\r\n\r\n\t\t\treturn output;\r\n\t\t},\r\n\t\tgetHashParameters: function () {\r\n\t\t\tvar hashData = {\r\n\t\t\t\tconnectionToken: \"\",\r\n\t\t\t\tjwtToken: \"\",\r\n\t\t\t\tdealerCurrency: null,\r\n\t\t\t\tdealerAdvancedWalletView: null,\r\n\t\t\t\tCSMPushEnabled: \"\",\r\n\t\t\t};\r\n\r\n\t\t\tif (window.location.hash && window.location.hash.indexOf(\"$\") > -1) {\r\n\t\t\t\tvar hashParams = window.location.hash.slice(1).split(\"$\");\r\n\r\n\t\t\t\tfor (var i = 0; i < hashParams.length; i++) {\r\n\t\t\t\t\tif (hashParams[i].indexOf(\"ct=\") !== -1) {\r\n\t\t\t\t\t\thashData.connectionToken = hashParams[i].substring(3, hashParams[i].length);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hashParams[i].indexOf(\"jt=\") !== -1) {\r\n\t\t\t\t\t\thashData.jwtToken = hashParams[i].substring(3, hashParams[i].length);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hashParams[i].indexOf(\"dc=\") !== -1) {\r\n\t\t\t\t\t\thashData.dealerCurrency = parseInt(hashParams[i].substring(3, hashParams[i].length));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hashParams[i].indexOf(\"av=\") !== -1) {\r\n\t\t\t\t\t\thashData.dealerAdvancedWalletView = parseInt(hashParams[i].substring(3, hashParams[i].length));\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hashParams[i].indexOf(\"en=\") !== -1) {\r\n\t\t\t\t\t\thashData.CSMPushEnabled = hashParams[i].substring(3, hashParams[i].length);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\twindow.location.hash = \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn hashData;\r\n\t\t},\r\n\t\tgetContentStyleBrokerId: function () {\r\n\t\t\treturn (document.cookie.match(/(^|; )CS=([^;]*)/i) || \"\")[2] || \"\";\r\n\t\t},\r\n\t\trndKey: \"rnd\",\r\n\t\tregexRndKey: /[?|&]rnd=0.\\d+/g,\r\n\t\trndMaxValue: 9007199254740991,\r\n\t\tgetRndKeyValue: function () {\r\n\t\t\tif (window.location.host.indexOf(\"9005\") > -1)\r\n\t\t\t{\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\t\t\treturn module.rndKey + \"=0.\" + Math.floor(Math.random() * module.rndMaxValue);\r\n\t\t},\r\n\t\tgetUrlWithRndKeyValue: function (url) {\r\n\t\t\turl = url.replace(module.regexRndKey, \"\");\r\n\t\t\tvar randomPrefix = url.indexOf(\"?\") < 0 ? \"?\" : \"&\";\r\n\r\n            url = url + randomPrefix + module.getRndKeyValue();\r\n            return url;\r\n        },\r\n        getChatBotResourcesPath: function () {\r\n            return UrlResolver.getStaticJSPath() + \"/fx-chatbot/\";\r\n        },\r\n        isNativeIos: function () {\r\n            return new RegExp(\"(^|; )NativeIosApp=true\", \"i\").test(document.cookie);\r\n        },\r\n        isNativeAndoid: function () {\r\n            return new RegExp(\"(^|; )NativeAndroidApp=true\", \"i\").test(document.cookie);\r\n        },\r\n        getMinDealGroupId: function () {\r\n            return (document.cookie.match(/(^|; )MinDealGroupId=([^;]*)/i) || \"\")[2] || \"\";\r\n        }\r\n    };\r\n\r\n\treturn module;\r\n})();\r\n\r\n\r\n\r\n(function (root, factory) {\r\n\tif (typeof define === \"function\" && define.amd) {\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\tdefine('global/UrlResolver',[], factory);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\troot = factory();\r\n\t}\r\n})(typeof self !== \"undefined\" ? self : this, function () {\r\n\t// Use b in some fashion.\r\n\r\n\t// Just return a value to define the module export.\r\n\t// This example returns an object, but the module\r\n\t// can return a function as the exported value.\r\n\treturn UrlResolver;\r\n});\r\n\n",
    "// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2012 Kris Kowal under the terms of the MIT\n * license found at http://github.com/kriskowal/q/raw/master/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\r\n    \"use strict\";\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\r\n        bootstrap(\"promise\", definition);\n\n        // CommonJS\n    } else if (typeof exports === \"object\" && typeof module === \"object\") {\r\n        module.exports = definition();\n\n        // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\r\n        define('Q',definition);\n\n        // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\r\n        if (!ses.ok()) {\r\n            return;\r\n        } else {\r\n            ses.makeQ = definition;\r\n        }\n\n        // <script>\n    } else if (typeof window !== \"undefined\" || typeof self !== \"undefined\") {\n        // Prefer window over self for add-on scripts. Use self for\n        // non-windowed contexts.\n        var global = typeof window !== \"undefined\" ? window : self;\n\n        // Get the `window` object, save the previous Q global\n        // and initialize Q as a global.\n        var previousQ = global.Q;\n        global.Q = definition();\n\n        // Add a noConflict function so Q can be removed from the\n        // global namespace.\n        global.Q.noConflict = function () {\r\n            global.Q = previousQ;\n            return this;\r\n        };\r\n\n    } else {\r\n        throw new Error(\"This environment was not anticipated by Q. Please file a bug.\");\r\n    }\r\n\n})(function () {\r\n    \"use strict\";\n\n    var hasStacks = false;\n    try {\r\n        throw new Error();\r\n    } catch (e) {\r\n        hasStacks = !!e.stack;\r\n    }\n\n    // All code after this point will be filtered from stack traces reported\n    // by Q.\n    var qStartingLine = captureLine();\n    var qFileName;\n\n    // shims\n\n    // used for fallback in \"allResolved\"\n    var noop = function () { };\n\n    // Use the fastest possible means to execute a task in a future turn\n    // of the event loop.\n    var nextTick = (function () {\n        // linked list of tasks (single, with head node)\n        var head = { task: void 0, next: null };\n        var tail = head;\n        var flushing = false;\n        var requestTick = void 0;\n        var isNodeJS = false;\n        // queue for late tasks, used by unhandled rejection tracking\n        var laterQueue = [];\n\n        function flush() {\n            /* jshint loopfunc: true */\n            var task, domain;\n\n            while (head.next) {\r\n                head = head.next;\n                task = head.task;\n                head.task = void 0;\n                domain = head.domain;\n\n                if (domain) {\r\n                    head.domain = void 0;\n                    domain.enter();\r\n                }\n                runSingle(task, domain);\r\n\n            }\n            while (laterQueue.length) {\r\n                task = laterQueue.pop();\n                runSingle(task);\r\n            }\n            flushing = false;\r\n        }\n        // runs a single function in the async queue\n        function runSingle(task, domain) {\r\n            try {\r\n                task();\r\n\n            } catch (e) {\r\n                if (isNodeJS) {\n                    // In node, uncaught exceptions are considered fatal errors.\n                    // Re-throw them synchronously to interrupt flushing!\n\n                    // Ensure continuation if the uncaught exception is suppressed\n                    // listening \"uncaughtException\" events (as domains does).\n                    // Continue in next event to avoid tick recursion.\n                    if (domain) {\r\n                        domain.exit();\r\n                    }\n                    setTimeout(flush, 0);\n                    if (domain) {\r\n                        domain.enter();\r\n                    }\n\n                    throw e;\r\n\n                } else {\n                    // In browsers, uncaught exceptions are not fatal.\n                    // Re-throw them asynchronously to avoid slow-downs.\n                    setTimeout(function () {\r\n                        throw e;\r\n                    }, 0);\r\n                }\r\n            }\n\n            if (domain) {\r\n                domain.exit();\r\n            }\r\n        }\n\n        nextTick = function (task) {\r\n            tail = tail.next = {\r\n                task: task,\n                domain: isNodeJS && process.domain,\n                next: null\r\n            };\n\n            if (!flushing) {\r\n                flushing = true;\n                requestTick();\r\n            }\r\n        };\n\n        if (typeof process === \"object\" &&\n            process.toString() === \"[object process]\" && process.nextTick) {\n            // Ensure Q is in a real Node environment, with a `process.nextTick`.\n            // To see through fake Node environments:\n            // * Mocha test runner - exposes a `process` global without a `nextTick`\n            // * Browserify - exposes a `process.nexTick` function that uses\n            //   `setTimeout`. In this case `setImmediate` is preferred because\n            //    it is faster. Browserify's `process.toString()` yields\n            //   \"[object Object]\", while in a real Node environment\n            //   `process.nextTick()` yields \"[object process]\".\n            isNodeJS = true;\n\n            requestTick = function () {\r\n                process.nextTick(flush);\r\n            };\r\n\n        } else if (typeof setImmediate === \"function\") {\n            // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n            if (typeof window !== \"undefined\") {\r\n                requestTick = setImmediate.bind(window, flush);\r\n            } else {\r\n                requestTick = function () {\r\n                    setImmediate(flush);\r\n                };\r\n            }\r\n\n        } else if (typeof MessageChannel !== \"undefined\") {\n            // modern browsers\n            // http://www.nonblocking.io/2011/06/windownexttick.html\n            var channel = new MessageChannel();\n            // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n            // working message ports the first time a page loads.\n            channel.port1.onmessage = function () {\r\n                requestTick = requestPortTick;\n                channel.port1.onmessage = flush;\n                flush();\r\n            };\n            var requestPortTick = function () {\n                // Opera requires us to provide a message payload, regardless of\n                // whether we use it.\n                channel.port2.postMessage(0);\r\n            };\n            requestTick = function () {\r\n                setTimeout(flush, 0);\n                requestPortTick();\r\n            };\r\n\n        } else {\n            // old browsers\n            requestTick = function () {\r\n                setTimeout(flush, 0);\r\n            };\r\n        }\n        // runs a task after all other tasks have been run\n        // this is useful for unhandled rejection tracking that needs to happen\n        // after all `then`d tasks have been run.\n        nextTick.runAfter = function (task) {\r\n            laterQueue.push(task);\n            if (!flushing) {\r\n                flushing = true;\n                requestTick();\r\n            }\r\n        };\n        return nextTick;\r\n    })();\n\n    // Attempt to make generics safe in the face of downstream\n    // modifications.\n    // There is no situation where this is necessary.\n    // If you need a security guarantee, these primordials need to be\n    // deeply frozen anyway, and if you don’t need a security guarantee,\n    // this is just plain paranoid.\n    // However, this **might** have the nice side-effect of reducing the size of\n    // the minified code by reducing x.call() to merely x()\n    // See Mark Miller’s explanation of what this does.\n    // http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\n    var call = Function.call;\n    function uncurryThis(f) {\r\n        return function () {\r\n            return call.apply(f, arguments);\r\n        };\r\n    }\n    // This is equivalent, but slower:\n    // uncurryThis = Function_bind.bind(Function_bind.call);\n    // http://jsperf.com/uncurrythis\n\n    var array_slice = uncurryThis(Array.prototype.slice);\n\n    var array_reduce = uncurryThis(\n        Array.prototype.reduce || function (callback, basis) {\r\n            var index = 0,\n                length = this.length;\n            // concerning the initial value, if one is not provided\n            if (arguments.length === 1) {\n                // seek to the first value in the array, accounting\n                // for the possibility that is is a sparse array\n                do {\r\n                    if (index in this) {\r\n                        basis = this[index++];\n                        break;\r\n                    }\n                    if (++index >= length) {\r\n                        throw new TypeError();\r\n                    }\r\n                } while (1);\r\n            }\n            // reduce\n            for (; index < length; index++) {\n                // account for the possibility that the array is sparse\n                if (index in this) {\r\n                    basis = callback(basis, this[index], index);\r\n                }\r\n            }\n            return basis;\r\n        }\n    );\n\n    var array_indexOf = uncurryThis(\n        Array.prototype.indexOf || function (value) {\n            // not a very good shim, but good enough for our one use of it\n            for (var i = 0; i < this.length; i++) {\r\n                if (this[i] === value) {\r\n                    return i;\r\n                }\r\n            }\n            return -1;\r\n        }\n    );\n\n    var array_map = uncurryThis(\n        Array.prototype.map || function (callback, thisp) {\r\n            var self = this;\n            var collect = [];\n            array_reduce(self, function (undefined, value, index) {\r\n                collect.push(callback.call(thisp, value, index, self));\r\n            }, void 0);\n            return collect;\r\n        }\n    );\n\n    var object_create = Object.create || function (prototype) {\r\n        function Type() { }\n        Type.prototype = prototype;\n        return new Type();\r\n    };\n\n    var object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\n    var object_keys = Object.keys || function (object) {\r\n        var keys = [];\n        for (var key in object) {\r\n            if (object_hasOwnProperty(object, key)) {\r\n                keys.push(key);\r\n            }\r\n        }\n        return keys;\r\n    };\n\n    var object_toString = uncurryThis(Object.prototype.toString);\n\n    function isObject(value) {\r\n        return value === Object(value);\r\n    }\n\n    // generator related shims\n\n    // FIXME: Remove this function once ES6 generators are in SpiderMonkey.\n    function isStopIteration(exception) {\r\n        return (\n            object_toString(exception) === \"[object StopIteration]\" ||\n            exception instanceof QReturnValue\n        );\r\n    }\n\n    // FIXME: Remove this helper and Q.return once ES6 generators are in\n    // SpiderMonkey.\n    var QReturnValue;\n    if (typeof ReturnValue !== \"undefined\") {\r\n        QReturnValue = ReturnValue;\r\n    } else {\r\n        QReturnValue = function (value) {\r\n            this.value = value;\r\n        };\r\n    }\n\n    // long stack traces\n\n    var STACK_JUMP_SEPARATOR = \"From previous event:\";\n\n    function makeStackTraceLong(error, promise) {\n        // If possible, transform the error stack trace by removing Node and Q\n        // cruft, then concatenating with the stack trace of `promise`. See #57.\n        if (hasStacks &&\n            promise.stack &&\n            typeof error === \"object\" &&\n            error !== null &&\n            error.stack &&\n            error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1\n        ) {\r\n            var stacks = [];\n            for (var p = promise; !!p; p = p.source) {\r\n                if (p.stack) {\r\n                    stacks.unshift(p.stack);\r\n                }\r\n            }\n            stacks.unshift(error.stack);\n\n            var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n            error.stack = filterStackString(concatedStacks);\r\n        }\r\n    }\n\n    function filterStackString(stackString) {\r\n        var lines = stackString.split(\"\\n\");\n        var desiredLines = [];\n        for (var i = 0; i < lines.length; ++i) {\r\n            var line = lines[i];\n\n            if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\r\n                desiredLines.push(line);\r\n            }\r\n        }\n        return desiredLines.join(\"\\n\");\r\n    }\n\n    function isNodeFrame(stackLine) {\r\n        return stackLine.indexOf(\"(module.js:\") !== -1 ||\n               stackLine.indexOf(\"(node.js:\") !== -1;\r\n    }\n\n    function getFileNameAndLineNumber(stackLine) {\n        // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n        // In IE10 function name can have spaces (\"Anonymous function\") O_o\n        var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n        if (attempt1) {\r\n            return [attempt1[1], Number(attempt1[2])];\r\n        }\n\n        // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n        var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n        if (attempt2) {\r\n            return [attempt2[1], Number(attempt2[2])];\r\n        }\n\n        // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n        var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n        if (attempt3) {\r\n            return [attempt3[1], Number(attempt3[2])];\r\n        }\r\n    }\n\n    function isInternalFrame(stackLine) {\r\n        var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n        if (!fileNameAndLineNumber) {\r\n            return false;\r\n        }\n\n        var fileName = fileNameAndLineNumber[0];\n        var lineNumber = fileNameAndLineNumber[1];\n\n        return fileName === qFileName &&\n            lineNumber >= qStartingLine &&\n            lineNumber <= qEndingLine;\r\n    }\n\n    // discover own file name and line number range for filtering stack\n    // traces\n    function captureLine() {\r\n        if (!hasStacks) {\r\n            return;\r\n        }\n\n        try {\r\n            throw new Error();\r\n        } catch (e) {\r\n            var lines = e.stack.split(\"\\n\");\n            var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n            var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n            if (!fileNameAndLineNumber) {\r\n                return;\r\n            }\n\n            qFileName = fileNameAndLineNumber[0];\n            return fileNameAndLineNumber[1];\r\n        }\r\n    }\n\n    function deprecate(callback, name, alternative) {\r\n        return function () {\r\n            if (typeof console !== \"undefined\" &&\n                typeof console.warn === \"function\") {\r\n                console.warn(name + \" is deprecated, use \" + alternative +\n                             \" instead.\", new Error(\"\").stack);\r\n            }\n            return callback.apply(callback, arguments);\r\n        };\r\n    }\n\n    // end of shims\n    // beginning of real work\n\n    /**\n     * Constructs a promise for an immediate reference, passes promises through, or\n     * coerces promises from different systems.\n     * @param value immediate reference or promise\n     */\n    function Q(value) {\n        // If the object is already a Promise, return it directly.  This enables\n        // the resolve function to both be used to created references from objects,\n        // but to tolerably coerce non-promises to promises.\n        if (value instanceof Promise) {\r\n            return value;\r\n        }\n\n        // assimilate thenables\n        if (isPromiseAlike(value)) {\r\n            return coerce(value);\r\n        } else {\r\n            return fulfill(value);\r\n        }\r\n    }\n    Q.resolve = Q;\n\n    /**\n     * Performs a task in a future turn of the event loop.\n     * @param {Function} task\n     */\n    Q.nextTick = nextTick;\n\n    /**\n     * Controls whether or not long stack traces will be on\n     */\n    Q.longStackSupport = false;\n\n    // enable long stacks if Q_DEBUG is set\n    if (typeof process === \"object\" && process && process.env && process.env.Q_DEBUG) {\r\n        Q.longStackSupport = true;\r\n    }\n\n    /**\n     * Constructs a {promise, resolve, reject} object.\n     *\n     * `resolve` is a callback to invoke with a more resolved value for the\n     * promise. To fulfill the promise, invoke `resolve` with any value that is\n     * not a thenable. To reject the promise, invoke `resolve` with a rejected\n     * thenable, or invoke `reject` with the reason directly. To resolve the\n     * promise to another thenable, thus putting it in the same state, invoke\n     * `resolve` with that other thenable.\n     */\n    Q.defer = defer;\n    function defer() {\n        // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n        // been resolved.  If it is \"undefined\", it has been resolved.  Each\n        // element of the messages array is itself an array of complete arguments to\n        // forward to the resolved promise.  We coerce the resolution value to a\n        // promise using the `resolve` function because it handles both fully\n        // non-thenable values and other thenables gracefully.\n        var messages = [], progressListeners = [], resolvedPromise;\n\n        var deferred = object_create(defer.prototype);\n        var promise = object_create(Promise.prototype);\n\n        promise.promiseDispatch = function (resolve, op, operands) {\r\n            var args = array_slice(arguments);\n            if (messages) {\r\n                messages.push(args);\n                if (op === \"when\" && operands[1]) { // progress operand\n                    progressListeners.push(operands[1]);\r\n                }\r\n            } else {\r\n                Q.nextTick(function () {\r\n                    resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\r\n                });\r\n            }\r\n        };\n\n        // XXX deprecated\n        promise.valueOf = function () {\r\n            if (messages) {\r\n                return promise;\r\n            }\n            var nearerValue = nearer(resolvedPromise);\n            if (isPromise(nearerValue)) {\r\n                resolvedPromise = nearerValue; // shorten chain\n            }\n            return nearerValue;\r\n        };\n\n        promise.inspect = function () {\r\n            if (!resolvedPromise) {\r\n                return { state: \"pending\" };\r\n            }\n            return resolvedPromise.inspect();\r\n        };\n\n        if (Q.longStackSupport && hasStacks) {\r\n            try {\r\n                throw new Error();\r\n            } catch (e) {\n                // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n                // accessor around; that causes memory leaks as per GH-111. Just\n                // reify the stack trace as a string ASAP.\n                //\n                // At the same time, cut off the first line; it's always just\n                // \"[object Promise]\\n\", as per the `toString`.\n                promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\r\n            }\r\n        }\n\n        // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n        // consolidating them into `become`, since otherwise we'd create new\n        // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n        function become(newPromise) {\r\n            resolvedPromise = newPromise;\n            promise.source = newPromise;\n\n            array_reduce(messages, function (undefined, message) {\r\n                Q.nextTick(function () {\r\n                    newPromise.promiseDispatch.apply(newPromise, message);\r\n                });\r\n            }, void 0);\n\n            messages = void 0;\n            progressListeners = void 0;\r\n        }\n\n        deferred.promise = promise;\n        deferred.resolve = function (value) {\r\n            if (resolvedPromise) {\r\n                return;\r\n            }\n\n            become(Q(value));\r\n        };\n\n        deferred.fulfill = function (value) {\r\n            if (resolvedPromise) {\r\n                return;\r\n            }\n\n            become(fulfill(value));\r\n        };\n        deferred.reject = function (reason) {\r\n            if (resolvedPromise) {\r\n                return;\r\n            }\n\n            become(reject(reason));\r\n        };\n        deferred.notify = function (progress) {\r\n            if (resolvedPromise) {\r\n                return;\r\n            }\n\n            array_reduce(progressListeners, function (undefined, progressListener) {\r\n                Q.nextTick(function () {\r\n                    progressListener(progress);\r\n                });\r\n            }, void 0);\r\n        };\n\n        return deferred;\r\n    }\n\n    /**\n     * Creates a Node-style callback that will resolve or reject the deferred\n     * promise.\n     * @returns a nodeback\n     */\n    defer.prototype.makeNodeResolver = function () {\r\n        var self = this;\n        return function (error, value) {\r\n            if (error) {\r\n                self.reject(error);\r\n            } else if (arguments.length > 2) {\r\n                self.resolve(array_slice(arguments, 1));\r\n            } else {\r\n                self.resolve(value);\r\n            }\r\n        };\r\n    };\n\n    /**\n     * @param resolver {Function} a function that returns nothing and accepts\n     * the resolve, reject, and notify functions for a deferred.\n     * @returns a promise that may be resolved with the given resolve and reject\n     * functions, or rejected by a thrown exception in resolver\n     */\n    Q.Promise = promise; // ES6\n    Q.promise = promise;\n    function promise(resolver) {\r\n        if (typeof resolver !== \"function\") {\r\n            throw new TypeError(\"resolver must be a function.\");\r\n        }\n        var deferred = defer();\n        try {\r\n            resolver(deferred.resolve, deferred.reject, deferred.notify);\r\n        } catch (reason) {\r\n            deferred.reject(reason);\r\n        }\n        return deferred.promise;\r\n    }\n\n    promise.race = race; // ES6\n    promise.all = all; // ES6\n    promise.reject = reject; // ES6\n    promise.resolve = Q; // ES6\n\n    // XXX experimental.  This method is a way to denote that a local value is\n    // serializable and should be immediately dispatched to a remote upon request,\n    // instead of passing a reference.\n    Q.passByCopy = function (object) {\n        //freeze(object);\n        //passByCopies.set(object, true);\n        return object;\r\n    };\n\n    Promise.prototype.passByCopy = function () {\n        //freeze(object);\n        //passByCopies.set(object, true);\n        return this;\r\n    };\n\n    /**\n     * If two promises eventually fulfill to the same value, promises that value,\n     * but otherwise rejects.\n     * @param x {Any*}\n     * @param y {Any*}\n     * @returns {Any*} a promise for x and y if they are the same, but a rejection\n     * otherwise.\n     *\n     */\n    Q.join = function (x, y) {\r\n        return Q(x).join(y);\r\n    };\n\n    Promise.prototype.join = function (that) {\r\n        return Q([this, that]).spread(function (x, y) {\r\n            if (x === y) {\n                // TODO: \"===\" should be Object.is or equiv\n                return x;\r\n            } else {\r\n                throw new Error(\"Can't join: not the same: \" + x + \" \" + y);\r\n            }\r\n        });\r\n    };\n\n    /**\n     * Returns a promise for the first of an array of promises to become settled.\n     * @param answers {Array[Any*]} promises to race\n     * @returns {Any*} the first promise to be settled\n     */\n    Q.race = race;\n    function race(answerPs) {\r\n        return promise(function (resolve, reject) {\n            // Switch to this once we can assume at least ES5\n            // answerPs.forEach(function (answerP) {\n            //     Q(answerP).then(resolve, reject);\n            // });\n            // Use this in the meantime\n            for (var i = 0, len = answerPs.length; i < len; i++) {\r\n                Q(answerPs[i]).then(resolve, reject);\r\n            }\r\n        });\r\n    }\n\n    Promise.prototype.race = function () {\r\n        return this.then(Q.race);\r\n    };\n\n    /**\n     * Constructs a Promise with a promise descriptor object and optional fallback\n     * function.  The descriptor contains methods like when(rejected), get(name),\n     * set(name, value), post(name, args), and delete(name), which all\n     * return either a value, a promise for a value, or a rejection.  The fallback\n     * accepts the operation name, a resolver, and any further arguments that would\n     * have been forwarded to the appropriate method above had a method been\n     * provided with the proper name.  The API makes no guarantees about the nature\n     * of the returned object, apart from that it is usable whereever promises are\n     * bought and sold.\n     */\n    Q.makePromise = Promise;\n    function Promise(descriptor, fallback, inspect) {\r\n        if (fallback === void 0) {\r\n            fallback = function (op) {\r\n                return reject(new Error(\n                    \"Promise does not support operation: \" + op\n                ));\r\n            };\r\n        }\n        if (inspect === void 0) {\r\n            inspect = function () {\r\n                return { state: \"unknown\" };\r\n            };\r\n        }\n\n        var promise = object_create(Promise.prototype);\n\n        promise.promiseDispatch = function (resolve, op, args) {\r\n            var result;\n            try {\r\n                if (descriptor[op]) {\r\n                    result = descriptor[op].apply(promise, args);\r\n                } else {\r\n                    result = fallback.call(promise, op, args);\r\n                }\r\n            } catch (exception) {\r\n                result = reject(exception);\r\n            }\n            if (resolve) {\r\n                resolve(result);\r\n            }\r\n        };\n\n        promise.inspect = inspect;\n\n        // XXX deprecated `valueOf` and `exception` support\n        if (inspect) {\r\n            var inspected = inspect();\n            if (inspected.state === \"rejected\") {\r\n                promise.exception = inspected.reason;\r\n            }\n\n            promise.valueOf = function () {\r\n                var inspected = inspect();\n                if (inspected.state === \"pending\" ||\n                    inspected.state === \"rejected\") {\r\n                    return promise;\r\n                }\n                return inspected.value;\r\n            };\r\n        }\n\n        return promise;\r\n    }\n\n    Promise.prototype.toString = function () {\r\n        return \"[object Promise]\";\r\n    };\n\n    Promise.prototype.then = function (fulfilled, rejected, progressed) {\r\n        var self = this;\n        var deferred = defer();\n        var done = false;   // ensure the untrusted promise makes at most a\n        // single call to one of the callbacks\n\n        function _fulfilled(value) {\r\n            try {\r\n                return typeof fulfilled === \"function\" ? fulfilled(value) : value;\r\n            } catch (exception) {\r\n                return reject(exception);\r\n            }\r\n        }\n\n        function _rejected(exception) {\r\n            if (typeof rejected === \"function\") {\r\n                makeStackTraceLong(exception, self);\n                try {\r\n                    return rejected(exception);\r\n                } catch (newException) {\r\n                    return reject(newException);\r\n                }\r\n            }\n            return reject(exception);\r\n        }\n\n        function _progressed(value) {\r\n            return typeof progressed === \"function\" ? progressed(value) : value;\r\n        }\n\n        Q.nextTick(function () {\r\n            self.promiseDispatch(function (value) {\r\n                if (done) {\r\n                    return;\r\n                }\n                done = true;\n\n                deferred.resolve(_fulfilled(value));\r\n            }, \"when\", [function (exception) {\r\n                if (done) {\r\n                    return;\r\n                }\n                done = true;\n\n                deferred.resolve(_rejected(exception));\r\n            }]);\r\n        });\n\n        // Progress propagator need to be attached in the current tick.\n        self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\r\n            var newValue;\n            var threw = false;\n            try {\r\n                newValue = _progressed(value);\r\n            } catch (e) {\r\n                threw = true;\n                if (Q.onerror) {\r\n                    Q.onerror(e);\r\n                } else {\r\n                    throw e;\r\n                }\r\n            }\n\n            if (!threw) {\r\n                deferred.notify(newValue);\r\n            }\r\n        }]);\n\n        return deferred.promise;\r\n    };\n\n    Q.tap = function (promise, callback) {\r\n        return Q(promise).tap(callback);\r\n    };\n\n    /**\n     * Works almost like \"finally\", but not called for rejections.\n     * Original resolution value is passed through callback unaffected.\n     * Callback may return a promise that will be awaited for.\n     * @param {Function} callback\n     * @returns {Q.Promise}\n     * @example\n     * doSomething()\n     *   .then(...)\n     *   .tap(console.log)\n     *   .then(...);\n     */\n    Promise.prototype.tap = function (callback) {\r\n        callback = Q(callback);\n\n        return this.then(function (value) {\r\n            return callback.fcall(value).thenResolve(value);\r\n        });\r\n    };\n\n    /**\n     * Registers an observer on a promise.\n     *\n     * Guarantees:\n     *\n     * 1. that fulfilled and rejected will be called only once.\n     * 2. that either the fulfilled callback or the rejected callback will be\n     *    called, but not both.\n     * 3. that fulfilled and rejected will not be called in this turn.\n     *\n     * @param value      promise or immediate reference to observe\n     * @param fulfilled  function to be called with the fulfilled value\n     * @param rejected   function to be called with the rejection exception\n     * @param progressed function to be called on any progress notifications\n     * @return promise for the return value from the invoked callback\n     */\n    Q.when = when;\n    function when(value, fulfilled, rejected, progressed) {\r\n        return Q(value).then(fulfilled, rejected, progressed);\r\n    }\n\n    Promise.prototype.thenResolve = function (value) {\r\n        return this.then(function () { return value; });\r\n    };\n\n    Q.thenResolve = function (promise, value) {\r\n        return Q(promise).thenResolve(value);\r\n    };\n\n    Promise.prototype.thenReject = function (reason) {\r\n        return this.then(function () { throw reason; });\r\n    };\n\n    Q.thenReject = function (promise, reason) {\r\n        return Q(promise).thenReject(reason);\r\n    };\n\n    /**\n     * If an object is not a promise, it is as \"near\" as possible.\n     * If a promise is rejected, it is as \"near\" as possible too.\n     * If it’s a fulfilled promise, the fulfillment value is nearer.\n     * If it’s a deferred promise and the deferred has been resolved, the\n     * resolution is \"nearer\".\n     * @param object\n     * @returns most resolved (nearest) form of the object\n     */\n\n    // XXX should we re-do this?\n    Q.nearer = nearer;\n    function nearer(value) {\r\n        if (isPromise(value)) {\r\n            var inspected = value.inspect();\n            if (inspected.state === \"fulfilled\") {\r\n                return inspected.value;\r\n            }\r\n        }\n        return value;\r\n    }\n\n    /**\n     * @returns whether the given object is a promise.\n     * Otherwise it is a fulfilled value.\n     */\n    Q.isPromise = isPromise;\n    function isPromise(object) {\r\n        return object instanceof Promise;\r\n    }\n\n    Q.isPromiseAlike = isPromiseAlike;\n    function isPromiseAlike(object) {\r\n        return isObject(object) && typeof object.then === \"function\";\r\n    }\n\n    /**\n     * @returns whether the given object is a pending promise, meaning not\n     * fulfilled or rejected.\n     */\n    Q.isPending = isPending;\n    function isPending(object) {\r\n        return isPromise(object) && object.inspect().state === \"pending\";\r\n    }\n\n    Promise.prototype.isPending = function () {\r\n        return this.inspect().state === \"pending\";\r\n    };\n\n    /**\n     * @returns whether the given object is a value or fulfilled\n     * promise.\n     */\n    Q.isFulfilled = isFulfilled;\n    function isFulfilled(object) {\r\n        return !isPromise(object) || object.inspect().state === \"fulfilled\";\r\n    }\n\n    Promise.prototype.isFulfilled = function () {\r\n        return this.inspect().state === \"fulfilled\";\r\n    };\n\n    /**\n     * @returns whether the given object is a rejected promise.\n     */\n    Q.isRejected = isRejected;\n    function isRejected(object) {\r\n        return isPromise(object) && object.inspect().state === \"rejected\";\r\n    }\n\n    Promise.prototype.isRejected = function () {\r\n        return this.inspect().state === \"rejected\";\r\n    };\n\n    //// BEGIN UNHANDLED REJECTION TRACKING\n\n    // This promise library consumes exceptions thrown in handlers so they can be\n    // handled by a subsequent promise.  The exceptions get added to this array when\n    // they are created, and removed when they are handled.  Note that in ES6 or\n    // shimmed environments, this would naturally be a `Set`.\n    var unhandledReasons = [];\n    var unhandledRejections = [];\n    var reportedUnhandledRejections = [];\n    var trackUnhandledRejections = true;\n\n    function resetUnhandledRejections() {\r\n        unhandledReasons.length = 0;\n        unhandledRejections.length = 0;\n\n        if (!trackUnhandledRejections) {\r\n            trackUnhandledRejections = true;\r\n        }\r\n    }\n\n    function trackRejection(promise, reason) {\r\n        if (!trackUnhandledRejections) {\r\n            return;\r\n        }\n        if (typeof process === \"object\" && typeof process.emit === \"function\") {\r\n            Q.nextTick.runAfter(function () {\r\n                if (array_indexOf(unhandledRejections, promise) !== -1) {\r\n                    process.emit(\"unhandledRejection\", reason, promise);\n                    reportedUnhandledRejections.push(promise);\r\n                }\r\n            });\r\n        }\n\n        unhandledRejections.push(promise);\n        if (reason && typeof reason.stack !== \"undefined\") {\r\n            unhandledReasons.push(reason.stack);\r\n        } else {\r\n            unhandledReasons.push(\"(no stack) \" + reason);\r\n        }\r\n    }\n\n    function untrackRejection(promise) {\r\n        if (!trackUnhandledRejections) {\r\n            return;\r\n        }\n\n        var at = array_indexOf(unhandledRejections, promise);\n        if (at !== -1) {\r\n            if (typeof process === \"object\" && typeof process.emit === \"function\") {\r\n                Q.nextTick.runAfter(function () {\r\n                    var atReport = array_indexOf(reportedUnhandledRejections, promise);\n                    if (atReport !== -1) {\r\n                        process.emit(\"rejectionHandled\", unhandledReasons[at], promise);\n                        reportedUnhandledRejections.splice(atReport, 1);\r\n                    }\r\n                });\r\n            }\n            unhandledRejections.splice(at, 1);\n            unhandledReasons.splice(at, 1);\r\n        }\r\n    }\n\n    Q.resetUnhandledRejections = resetUnhandledRejections;\n\n    Q.getUnhandledReasons = function () {\n        // Make a copy so that consumers can't interfere with our internal state.\n        return unhandledReasons.slice();\r\n    };\n\n    Q.stopUnhandledRejectionTracking = function () {\r\n        resetUnhandledRejections();\n        trackUnhandledRejections = false;\r\n    };\n\n    resetUnhandledRejections();\n\n    //// END UNHANDLED REJECTION TRACKING\n\n    /**\n     * Constructs a rejected promise.\n     * @param reason value describing the failure\n     */\n    Q.reject = reject;\n    function reject(reason) {\r\n        var rejection = Promise({\r\n            \"when\": function (rejected) {\n                // note that the error has been handled\n                if (rejected) {\r\n                    untrackRejection(this);\r\n                }\n                return rejected ? rejected(reason) : this;\r\n            }\r\n        }, function fallback() {\r\n            return this;\r\n        }, function inspect() {\r\n            return { state: \"rejected\", reason: reason };\r\n        });\n\n        // Note that the reason has not been handled.\n        trackRejection(rejection, reason);\n\n        return rejection;\r\n    }\n\n    /**\n     * Constructs a fulfilled promise for an immediate reference.\n     * @param value immediate reference\n     */\n    Q.fulfill = fulfill;\n    function fulfill(value) {\r\n        return Promise({\r\n            \"when\": function () {\r\n                return value;\r\n            },\n            \"get\": function (name) {\r\n                return value[name];\r\n            },\n            \"set\": function (name, rhs) {\r\n                value[name] = rhs;\r\n            },\n            \"delete\": function (name) {\r\n                delete value[name];\r\n            },\n            \"post\": function (name, args) {\n                // Mark Miller proposes that post with no name should apply a\n                // promised function.\n                if (name === null || name === void 0) {\r\n                    return value.apply(void 0, args);\r\n                } else {\r\n                    return value[name].apply(value, args);\r\n                }\r\n            },\n            \"apply\": function (thisp, args) {\r\n                return value.apply(thisp, args);\r\n            },\n            \"keys\": function () {\r\n                return object_keys(value);\r\n            }\r\n        }, void 0, function inspect() {\r\n            return { state: \"fulfilled\", value: value };\r\n        });\r\n    }\n\n    /**\n     * Converts thenables to Q promises.\n     * @param promise thenable promise\n     * @returns a Q promise\n     */\n    function coerce(promise) {\r\n        var deferred = defer();\n        Q.nextTick(function () {\r\n            try {\r\n                promise.then(deferred.resolve, deferred.reject, deferred.notify);\r\n            } catch (exception) {\r\n                deferred.reject(exception);\r\n            }\r\n        });\n        return deferred.promise;\r\n    }\n\n    /**\n     * Annotates an object such that it will never be\n     * transferred away from this process over any promise\n     * communication channel.\n     * @param object\n     * @returns promise a wrapping of that object that\n     * additionally responds to the \"isDef\" message\n     * without a rejection.\n     */\n    Q.master = master;\n    function master(object) {\r\n        return Promise({\r\n            \"isDef\": function () { }\r\n        }, function fallback(op, args) {\r\n            return dispatch(object, op, args);\r\n        }, function () {\r\n            return Q(object).inspect();\r\n        });\r\n    }\n\n    /**\n     * Spreads the values of a promised array of arguments into the\n     * fulfillment callback.\n     * @param fulfilled callback that receives variadic arguments from the\n     * promised array\n     * @param rejected callback that receives the exception if the promise\n     * is rejected.\n     * @returns a promise for the return value or thrown exception of\n     * either callback.\n     */\n    Q.spread = spread;\n    function spread(value, fulfilled, rejected) {\r\n        return Q(value).spread(fulfilled, rejected);\r\n    }\n\n    Promise.prototype.spread = function (fulfilled, rejected) {\r\n        return this.all().then(function (array) {\r\n            return fulfilled.apply(void 0, array);\r\n        }, rejected);\r\n    };\n\n    /**\n     * The async function is a decorator for generator functions, turning\n     * them into asynchronous generators.  Although generators are only part\n     * of the newest ECMAScript 6 drafts, this code does not cause syntax\n     * errors in older engines.  This code should continue to work and will\n     * in fact improve over time as the language improves.\n     *\n     * ES6 generators are currently part of V8 version 3.19 with the\n     * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n     * for longer, but under an older Python-inspired form.  This function\n     * works on both kinds of generators.\n     *\n     * Decorates a generator function such that:\n     *  - it may yield promises\n     *  - execution will continue when that promise is fulfilled\n     *  - the value of the yield expression will be the fulfilled value\n     *  - it returns a promise for the return value (when the generator\n     *    stops iterating)\n     *  - the decorated function returns a promise for the return value\n     *    of the generator or the first rejected promise among those\n     *    yielded.\n     *  - if an error is thrown in the generator, it propagates through\n     *    every following yield until it is caught, or until it escapes\n     *    the generator function altogether, and is translated into a\n     *    rejection for the promise returned by the decorated generator.\n     */\n    Q.async = async;\n    function async(makeGenerator) {\r\n        return function () {\n            // when verb is \"send\", arg is a value\n            // when verb is \"throw\", arg is an exception\n            function continuer(verb, arg) {\r\n                var result;\n\n                // Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n                // engine that has a deployed base of browsers that support generators.\n                // However, SM's generators use the Python-inspired semantics of\n                // outdated ES6 drafts.  We would like to support ES6, but we'd also\n                // like to make it possible to use generators in deployed browsers, so\n                // we also support Python-style generators.  At some point we can remove\n                // this block.\n\n                if (typeof StopIteration === \"undefined\") {\n                    // ES6 Generators\n                    try {\r\n                        result = generator[verb](arg);\r\n                    } catch (exception) {\r\n                        return reject(exception);\r\n                    }\n                    if (result.done) {\r\n                        return Q(result.value);\r\n                    } else {\r\n                        return when(result.value, callback, errback);\r\n                    }\r\n                } else {\n                    // SpiderMonkey Generators\n                    // FIXME: Remove this case when SM does ES6 generators.\n                    try {\r\n                        result = generator[verb](arg);\r\n                    } catch (exception) {\r\n                        if (isStopIteration(exception)) {\r\n                            return Q(exception.value);\r\n                        } else {\r\n                            return reject(exception);\r\n                        }\r\n                    }\n                    return when(result, callback, errback);\r\n                }\r\n            }\n            var generator = makeGenerator.apply(this, arguments);\n            var callback = continuer.bind(continuer, \"next\");\n            var errback = continuer.bind(continuer, \"throw\");\n            return callback();\r\n        };\r\n    }\n\n    /**\n     * The spawn function is a small wrapper around async that immediately\n     * calls the generator and also ends the promise chain, so that any\n     * unhandled errors are thrown instead of forwarded to the error\n     * handler. This is useful because it's extremely common to run\n     * generators at the top-level to work with libraries.\n     */\n    Q.spawn = spawn;\n    function spawn(makeGenerator) {\r\n        Q.done(Q.async(makeGenerator)());\r\n    }\n\n    // FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n    /**\n     * Throws a ReturnValue exception to stop an asynchronous generator.\n     *\n     * This interface is a stop-gap measure to support generator return\n     * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n     * generators like Chromium 29, just use \"return\" in your generator\n     * functions.\n     *\n     * @param value the return value for the surrounding generator\n     * @throws ReturnValue exception with the value.\n     * @example\n     * // ES6 style\n     * Q.async(function* () {\n     *      var foo = yield getFooPromise();\n     *      var bar = yield getBarPromise();\n     *      return foo + bar;\n     * })\n     * // Older SpiderMonkey style\n     * Q.async(function () {\n     *      var foo = yield getFooPromise();\n     *      var bar = yield getBarPromise();\n     *      Q.return(foo + bar);\n     * })\n     */\n    Q[\"return\"] = _return;\n    function _return(value) {\r\n        throw new QReturnValue(value);\r\n    }\n\n    /**\n     * The promised function decorator ensures that any promise arguments\n     * are settled and passed as values (`this` is also settled and passed\n     * as a value).  It will also ensure that the result of a function is\n     * always a promise.\n     *\n     * @example\n     * var add = Q.promised(function (a, b) {\n     *     return a + b;\n     * });\n     * add(Q(a), Q(B));\n     *\n     * @param {function} callback The function to decorate\n     * @returns {function} a function that has been decorated.\n     */\n    Q.promised = promised;\n    function promised(callback) {\r\n        return function () {\r\n            return spread([this, all(arguments)], function (self, args) {\r\n                return callback.apply(self, args);\r\n            });\r\n        };\r\n    }\n\n    /**\n     * sends a message to a value in a future turn\n     * @param object* the recipient\n     * @param op the name of the message operation, e.g., \"when\",\n     * @param args further arguments to be forwarded to the operation\n     * @returns result {Promise} a promise for the result of the operation\n     */\n    Q.dispatch = dispatch;\n    function dispatch(object, op, args) {\r\n        return Q(object).dispatch(op, args);\r\n    }\n\n    Promise.prototype.dispatch = function (op, args) {\r\n        var self = this;\n        var deferred = defer();\n        Q.nextTick(function () {\r\n            self.promiseDispatch(deferred.resolve, op, args);\r\n        });\n        return deferred.promise;\r\n    };\n\n    /**\n     * Gets the value of a property in a future turn.\n     * @param object    promise or immediate reference for target object\n     * @param name      name of property to get\n     * @return promise for the property value\n     */\n    Q.get = function (object, key) {\r\n        return Q(object).dispatch(\"get\", [key]);\r\n    };\n\n    Promise.prototype.get = function (key) {\r\n        return this.dispatch(\"get\", [key]);\r\n    };\n\n    /**\n     * Sets the value of a property in a future turn.\n     * @param object    promise or immediate reference for object object\n     * @param name      name of property to set\n     * @param value     new value of property\n     * @return promise for the return value\n     */\n    Q.set = function (object, key, value) {\r\n        return Q(object).dispatch(\"set\", [key, value]);\r\n    };\n\n    Promise.prototype.set = function (key, value) {\r\n        return this.dispatch(\"set\", [key, value]);\r\n    };\n\n    /**\n     * Deletes a property in a future turn.\n     * @param object    promise or immediate reference for target object\n     * @param name      name of property to delete\n     * @return promise for the return value\n     */\n    Q.del = // XXX legacy\n    Q[\"delete\"] = function (object, key) {\r\n        return Q(object).dispatch(\"delete\", [key]);\r\n    };\n\n    Promise.prototype.del = // XXX legacy\n    Promise.prototype[\"delete\"] = function (key) {\r\n        return this.dispatch(\"delete\", [key]);\r\n    };\n\n    /**\n     * Invokes a method in a future turn.\n     * @param object    promise or immediate reference for target object\n     * @param name      name of method to invoke\n     * @param value     a value to post, typically an array of\n     *                  invocation arguments for promises that\n     *                  are ultimately backed with `resolve` values,\n     *                  as opposed to those backed with URLs\n     *                  wherein the posted value can be any\n     *                  JSON serializable object.\n     * @return promise for the return value\n     */\n    // bound locally because it is used by other methods\n    Q.mapply = // XXX As proposed by \"Redsandro\"\n    Q.post = function (object, name, args) {\r\n        return Q(object).dispatch(\"post\", [name, args]);\r\n    };\n\n    Promise.prototype.mapply = // XXX As proposed by \"Redsandro\"\n    Promise.prototype.post = function (name, args) {\r\n        return this.dispatch(\"post\", [name, args]);\r\n    };\n\n    /**\n     * Invokes a method in a future turn.\n     * @param object    promise or immediate reference for target object\n     * @param name      name of method to invoke\n     * @param ...args   array of invocation arguments\n     * @return promise for the return value\n     */\n    Q.send = // XXX Mark Miller's proposed parlance\n    Q.mcall = // XXX As proposed by \"Redsandro\"\n    Q.invoke = function (object, name /*...args*/) {\r\n        return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\r\n    };\n\n    Promise.prototype.send = // XXX Mark Miller's proposed parlance\n    Promise.prototype.mcall = // XXX As proposed by \"Redsandro\"\n    Promise.prototype.invoke = function (name /*...args*/) {\r\n        return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\r\n    };\n\n    /**\n     * Applies the promised function in a future turn.\n     * @param object    promise or immediate reference for target function\n     * @param args      array of application arguments\n     */\n    Q.fapply = function (object, args) {\r\n        return Q(object).dispatch(\"apply\", [void 0, args]);\r\n    };\n\n    Promise.prototype.fapply = function (args) {\r\n        return this.dispatch(\"apply\", [void 0, args]);\r\n    };\n\n    /**\n     * Calls the promised function in a future turn.\n     * @param object    promise or immediate reference for target function\n     * @param ...args   array of application arguments\n     */\n    Q[\"try\"] =\n    Q.fcall = function (object /* ...args*/) {\r\n        return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\r\n    };\n\n    Promise.prototype.fcall = function (/*...args*/) {\r\n        return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\r\n    };\n\n    /**\n     * Binds the promised function, transforming return values into a fulfilled\n     * promise and thrown errors into a rejected one.\n     * @param object    promise or immediate reference for target function\n     * @param ...args   array of application arguments\n     */\n    Q.fbind = function (object /*...args*/) {\r\n        var promise = Q(object);\n        var args = array_slice(arguments, 1);\n        return function fbound() {\r\n            return promise.dispatch(\"apply\", [\n                this,\n                args.concat(array_slice(arguments))\n            ]);\r\n        };\r\n    };\n    Promise.prototype.fbind = function (/*...args*/) {\r\n        var promise = this;\n        var args = array_slice(arguments);\n        return function fbound() {\r\n            return promise.dispatch(\"apply\", [\n                this,\n                args.concat(array_slice(arguments))\n            ]);\r\n        };\r\n    };\n\n    /**\n     * Requests the names of the owned properties of a promised\n     * object in a future turn.\n     * @param object    promise or immediate reference for target object\n     * @return promise for the keys of the eventually settled object\n     */\n    Q.keys = function (object) {\r\n        return Q(object).dispatch(\"keys\", []);\r\n    };\n\n    Promise.prototype.keys = function () {\r\n        return this.dispatch(\"keys\", []);\r\n    };\n\n    /**\n     * Turns an array of promises into a promise for an array.  If any of\n     * the promises gets rejected, the whole array is rejected immediately.\n     * @param {Array*} an array (or promise for an array) of values (or\n     * promises for values)\n     * @returns a promise for an array of the corresponding values\n     */\n    // By Mark Miller\n    // http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\n    Q.all = all;\n    function all(promises) {\r\n        return when(promises, function (promises) {\r\n            var pendingCount = 0;\n            var deferred = defer();\n            array_reduce(promises, function (undefined, promise, index) {\r\n                var snapshot;\n                if (\n                    isPromise(promise) &&\n                    (snapshot = promise.inspect()).state === \"fulfilled\"\n                ) {\r\n                    promises[index] = snapshot.value;\r\n                } else {\r\n                    ++pendingCount;\n                    when(\n                        promise,\n                        function (value) {\r\n                            promises[index] = value;\n                            if (--pendingCount === 0) {\r\n                                deferred.resolve(promises);\r\n                            }\r\n                        },\n                        deferred.reject,\n                        function (progress) {\r\n                            deferred.notify({ index: index, value: progress });\r\n                        }\n                    );\r\n                }\r\n            }, void 0);\n            if (pendingCount === 0) {\r\n                deferred.resolve(promises);\r\n            }\n            return deferred.promise;\r\n        });\r\n    }\n\n    Promise.prototype.all = function () {\r\n        return all(this);\r\n    };\n\n    /**\n     * Returns the first resolved promise of an array. Prior rejected promises are\n     * ignored.  Rejects only if all promises are rejected.\n     * @param {Array*} an array containing values or promises for values\n     * @returns a promise fulfilled with the value of the first resolved promise,\n     * or a rejected promise if all promises are rejected.\n     */\n    Q.any = any;\n\n    function any(promises) {\r\n        if (promises.length === 0) {\r\n            return Q.resolve();\r\n        }\n\n        var deferred = Q.defer();\n        var pendingCount = 0;\n        array_reduce(promises, function (prev, current, index) {\r\n            var promise = promises[index];\n\n            pendingCount++;\n\n            when(promise, onFulfilled, onRejected, onProgress);\n            function onFulfilled(result) {\r\n                deferred.resolve(result);\r\n            }\n            function onRejected() {\r\n                pendingCount--;\n                if (pendingCount === 0) {\r\n                    deferred.reject(new Error(\n                        \"Can't get fulfillment value from any promise, all \" +\n                        \"promises were rejected.\"\n                    ));\r\n                }\r\n            }\n            function onProgress(progress) {\r\n                deferred.notify({\r\n                    index: index,\n                    value: progress\r\n                });\r\n            }\r\n        }, undefined);\n\n        return deferred.promise;\r\n    }\n\n    Promise.prototype.any = function () {\r\n        return any(this);\r\n    };\n\n    /**\n     * Waits for all promises to be settled, either fulfilled or\n     * rejected.  This is distinct from `all` since that would stop\n     * waiting at the first rejection.  The promise returned by\n     * `allResolved` will never be rejected.\n     * @param promises a promise for an array (or an array) of promises\n     * (or values)\n     * @return a promise for an array of promises\n     */\n    Q.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\n    function allResolved(promises) {\r\n        return when(promises, function (promises) {\r\n            promises = array_map(promises, Q);\n            return when(all(array_map(promises, function (promise) {\r\n                return when(promise, noop, noop);\r\n            })), function () {\r\n                return promises;\r\n            });\r\n        });\r\n    }\n\n    Promise.prototype.allResolved = function () {\r\n        return allResolved(this);\r\n    };\n\n    /**\n     * @see Promise#allSettled\n     */\n    Q.allSettled = allSettled;\n    function allSettled(promises) {\r\n        return Q(promises).allSettled();\r\n    }\n\n    /**\n     * Turns an array of promises into a promise for an array of their states (as\n     * returned by `inspect`) when they have all settled.\n     * @param {Array[Any*]} values an array (or promise for an array) of values (or\n     * promises for values)\n     * @returns {Array[State]} an array of states for the respective values.\n     */\n    Promise.prototype.allSettled = function () {\r\n        return this.then(function (promises) {\r\n            return all(array_map(promises, function (promise) {\r\n                promise = Q(promise);\n                function regardless() {\r\n                    return promise.inspect();\r\n                }\n                return promise.then(regardless, regardless);\r\n            }));\r\n        });\r\n    };\n\n    /**\n     * Captures the failure of a promise, giving an oportunity to recover\n     * with a callback.  If the given promise is fulfilled, the returned\n     * promise is fulfilled.\n     * @param {Any*} promise for something\n     * @param {Function} callback to fulfill the returned promise if the\n     * given promise is rejected\n     * @returns a promise for the return value of the callback\n     */\n    Q.fail = // XXX legacy\n    Q[\"catch\"] = function (object, rejected) {\r\n        return Q(object).then(void 0, rejected);\r\n    };\n\n    Promise.prototype.fail = // XXX legacy\n    Promise.prototype[\"catch\"] = function (rejected) {\r\n        return this.then(void 0, rejected);\r\n    };\n\n    /**\n     * Attaches a listener that can respond to progress notifications from a\n     * promise's originating deferred. This listener receives the exact arguments\n     * passed to ``deferred.notify``.\n     * @param {Any*} promise for something\n     * @param {Function} callback to receive any progress notifications\n     * @returns the given promise, unchanged\n     */\n    Q.progress = progress;\n    function progress(object, progressed) {\r\n        return Q(object).then(void 0, void 0, progressed);\r\n    }\n\n    Promise.prototype.progress = function (progressed) {\r\n        return this.then(void 0, void 0, progressed);\r\n    };\n\n    /**\n     * Provides an opportunity to observe the settling of a promise,\n     * regardless of whether the promise is fulfilled or rejected.  Forwards\n     * the resolution to the returned promise when the callback is done.\n     * The callback can return a promise to defer completion.\n     * @param {Any*} promise\n     * @param {Function} callback to observe the resolution of the given\n     * promise, takes no arguments.\n     * @returns a promise for the resolution of the given promise when\n     * ``fin`` is done.\n     */\n    Q.fin = // XXX legacy\n    Q[\"finally\"] = function (object, callback) {\r\n        return Q(object)[\"finally\"](callback);\r\n    };\n\n    Promise.prototype.fin = // XXX legacy\n    Promise.prototype[\"finally\"] = function (callback) {\r\n        if (!callback || typeof callback.apply !== \"function\") {\r\n            throw new Error(\"Can't apply finally callback\");\r\n        }\n        callback = Q(callback);\n        return this.then(function (value) {\r\n            return callback.fcall().then(function () {\r\n                return value;\r\n            });\r\n        }, function (reason) {\n            // TODO attempt to recycle the rejection with \"this\".\n            return callback.fcall().then(function () {\r\n                throw reason;\r\n            });\r\n        });\r\n    };\n\n    /**\n     * Terminates a chain of promises, forcing rejections to be\n     * thrown as exceptions.\n     * @param {Any*} promise at the end of a chain of promises\n     * @returns nothing\n     */\n    Q.done = function (object, fulfilled, rejected, progress) {\r\n        return Q(object).done(fulfilled, rejected, progress);\r\n    };\n\n    Promise.prototype.done = function (fulfilled, rejected, progress) {\r\n        var onUnhandledError = function (error) {\n            // forward to a future turn so that ``when``\n            // does not catch it and turn it into a rejection.\n            Q.nextTick(function () {\r\n                makeStackTraceLong(error, promise);\n                if (Q.onerror) {\r\n                    Q.onerror(error);\r\n                } else {\r\n                    throw error;\r\n                }\r\n            });\r\n        };\n\n        // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n        var promise = fulfilled || rejected || progress ?\n            this.then(fulfilled, rejected, progress) :\n            this;\n\n        if (typeof process === \"object\" && process && process.domain) {\r\n            onUnhandledError = process.domain.bind(onUnhandledError);\r\n        }\n\n        promise.then(void 0, onUnhandledError);\r\n    };\n\n    /**\n     * Causes a promise to be rejected if it does not get fulfilled before\n     * some milliseconds time out.\n     * @param {Any*} promise\n     * @param {Number} milliseconds timeout\n     * @param {Any*} custom error message or Error object (optional)\n     * @returns a promise for the resolution of the given promise if it is\n     * fulfilled before the timeout, otherwise rejected.\n     */\n    Q.timeout = function (object, ms, error) {\r\n        return Q(object).timeout(ms, error);\r\n    };\n\n    Promise.prototype.timeout = function (ms, error) {\r\n        var deferred = defer();\n        var timeoutId = setTimeout(function () {\r\n            if (!error || \"string\" === typeof error) {\r\n                error = new Error(error || \"Timed out after \" + ms + \" ms\");\n                error.code = \"ETIMEDOUT\";\r\n            }\n            deferred.reject(error);\r\n        }, ms);\n\n        this.then(function (value) {\r\n            clearTimeout(timeoutId);\n            deferred.resolve(value);\r\n        }, function (exception) {\r\n            clearTimeout(timeoutId);\n            deferred.reject(exception);\r\n        }, deferred.notify);\n\n        return deferred.promise;\r\n    };\n\n    /**\n     * Returns a promise for the given value (or promised value), some\n     * milliseconds after it resolved. Passes rejections immediately.\n     * @param {Any*} promise\n     * @param {Number} milliseconds\n     * @returns a promise for the resolution of the given promise after milliseconds\n     * time has elapsed since the resolution of the given promise.\n     * If the given promise rejects, that is passed immediately.\n     */\n    Q.delay = function (object, timeout) {\r\n        if (timeout === void 0) {\r\n            timeout = object;\n            object = void 0;\r\n        }\n        return Q(object).delay(timeout);\r\n    };\n\n    Promise.prototype.delay = function (timeout) {\r\n        return this.then(function (value) {\r\n            var deferred = defer();\n            setTimeout(function () {\r\n                deferred.resolve(value);\r\n            }, timeout);\n            return deferred.promise;\r\n        });\r\n    };\n\n    /**\n     * Passes a continuation to a Node function, which is called with the given\n     * arguments provided as an array, and returns a promise.\n     *\n     *      Q.nfapply(FS.readFile, [__filename])\n     *      .then(function (content) {\n     *      })\n     *\n     */\n    Q.nfapply = function (callback, args) {\r\n        return Q(callback).nfapply(args);\r\n    };\n\n    Promise.prototype.nfapply = function (args) {\r\n        var deferred = defer();\n        var nodeArgs = array_slice(args);\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\r\n    };\n\n    /**\n     * Passes a continuation to a Node function, which is called with the given\n     * arguments provided individually, and returns a promise.\n     * @example\n     * Q.nfcall(FS.readFile, __filename)\n     * .then(function (content) {\n     * })\n     *\n     */\n    Q.nfcall = function (callback /*...args*/) {\r\n        var args = array_slice(arguments, 1);\n        return Q(callback).nfapply(args);\r\n    };\n\n    Promise.prototype.nfcall = function (/*...args*/) {\r\n        var nodeArgs = array_slice(arguments);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\r\n    };\n\n    /**\n     * Wraps a NodeJS continuation passing function and returns an equivalent\n     * version that returns a promise.\n     * @example\n     * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n     * .then(console.log)\n     * .done()\n     */\n    Q.nfbind =\n    Q.denodeify = function (callback /*...args*/) {\r\n        var baseArgs = array_slice(arguments, 1);\n        return function () {\r\n            var nodeArgs = baseArgs.concat(array_slice(arguments));\n            var deferred = defer();\n            nodeArgs.push(deferred.makeNodeResolver());\n            Q(callback).fapply(nodeArgs).fail(deferred.reject);\n            return deferred.promise;\r\n        };\r\n    };\n\n    Promise.prototype.nfbind =\n    Promise.prototype.denodeify = function (/*...args*/) {\r\n        var args = array_slice(arguments);\n        args.unshift(this);\n        return Q.denodeify.apply(void 0, args);\r\n    };\n\n    Q.nbind = function (callback, thisp /*...args*/) {\r\n        var baseArgs = array_slice(arguments, 2);\n        return function () {\r\n            var nodeArgs = baseArgs.concat(array_slice(arguments));\n            var deferred = defer();\n            nodeArgs.push(deferred.makeNodeResolver());\n            function bound() {\r\n                return callback.apply(thisp, arguments);\r\n            }\n            Q(bound).fapply(nodeArgs).fail(deferred.reject);\n            return deferred.promise;\r\n        };\r\n    };\n\n    Promise.prototype.nbind = function (/*thisp, ...args*/) {\r\n        var args = array_slice(arguments, 0);\n        args.unshift(this);\n        return Q.nbind.apply(void 0, args);\r\n    };\n\n    /**\n     * Calls a method of a Node-style object that accepts a Node-style\n     * callback with a given array of arguments, plus a provided callback.\n     * @param object an object that has the named method\n     * @param {String} name name of the method of object\n     * @param {Array} args arguments to pass to the method; the callback\n     * will be provided by Q and appended to these arguments.\n     * @returns a promise for the value or error\n     */\n    Q.nmapply = // XXX As proposed by \"Redsandro\"\n    Q.npost = function (object, name, args) {\r\n        return Q(object).npost(name, args);\r\n    };\n\n    Promise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\n    Promise.prototype.npost = function (name, args) {\r\n        var nodeArgs = array_slice(args || []);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n        return deferred.promise;\r\n    };\n\n    /**\n     * Calls a method of a Node-style object that accepts a Node-style\n     * callback, forwarding the given variadic arguments, plus a provided\n     * callback argument.\n     * @param object an object that has the named method\n     * @param {String} name name of the method of object\n     * @param ...args arguments to pass to the method; the callback will\n     * be provided by Q and appended to these arguments.\n     * @returns a promise for the value or error\n     */\n    Q.nsend = // XXX Based on Mark Miller's proposed \"send\"\n    Q.nmcall = // XXX Based on \"Redsandro's\" proposal\n    Q.ninvoke = function (object, name /*...args*/) {\r\n        var nodeArgs = array_slice(arguments, 2);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n        return deferred.promise;\r\n    };\n\n    Promise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\n    Promise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\n    Promise.prototype.ninvoke = function (name /*...args*/) {\r\n        var nodeArgs = array_slice(arguments, 1);\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n        return deferred.promise;\r\n    };\n\n    /**\n     * If a function would like to support both Node continuation-passing-style and\n     * promise-returning-style, it can end its internal promise chain with\n     * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n     * elects to use a nodeback, the result will be sent there.  If they do not\n     * pass a nodeback, they will receive the result promise.\n     * @param object a result (or a promise for a result)\n     * @param {Function} nodeback a Node.js-style callback\n     * @returns either the promise or nothing\n     */\n    Q.nodeify = nodeify;\n    function nodeify(object, nodeback) {\r\n        return Q(object).nodeify(nodeback);\r\n    }\n\n    Promise.prototype.nodeify = function (nodeback) {\r\n        if (nodeback) {\r\n            this.then(function (value) {\r\n                Q.nextTick(function () {\r\n                    nodeback(null, value);\r\n                });\r\n            }, function (error) {\r\n                Q.nextTick(function () {\r\n                    nodeback(error);\r\n                });\r\n            });\r\n        } else {\r\n            return this;\r\n        }\r\n    };\n\n    Q.noConflict = function () {\r\n        throw new Error(\"Q.noConflict only works when Q is used as a global\");\r\n    };\n\n    // All code before this point will be filtered from stack traces.\n    var qEndingLine = captureLine();\n\n    return Q;\r\n\n});\n\n",
    "function AjaxError(httpStatus, message, requestUrl, responseSnippet) {\r\n\tthis.httpStatus = httpStatus;\r\n\tthis.message = message;\r\n\tthis.requestUrl = requestUrl;\r\n\tthis.responseSnippet = encodeURI(responseSnippet);\r\n\r\n\tif (!Error.captureStackTrace) {\r\n\t\tthis.stack = new Error().stack;\r\n\t} else {\r\n\t\tError.captureStackTrace(this, this.constructor);\r\n\t}\r\n}\r\n\r\nAjaxError.prototype = Object.create(Error.prototype);\r\nAjaxError.prototype.constructor = AjaxError;\r\nAjaxError.prototype.toString = function () {\r\n\treturn (\r\n\t\tthis.httpStatus +\r\n\t\t\" \" +\r\n\t\tthis.message +\r\n\t\t(this.requestUrl ? \" \" + this.requestUrl : \"\") +\r\n\t\t(this.responseSnippet ? \" \" + this.responseSnippet : \"\")\r\n\t);\r\n};\r\n\r\nAjaxError.fromXHR = function (xhr, message, requestUrl) {\r\n\tmessage +=\r\n\t\t\"; xhr (statusText: \" +\r\n\t\txhr.statusText +\r\n\t\t\", responseType: \" +\r\n\t\t(xhr.responseType === \"\" ? \"text\" : xhr.responseType) +\r\n\t\t\", status:\" +\r\n\t\txhr.status +\r\n\t\t\")\";\r\n\treturn new AjaxError(xhr.status, message, requestUrl);\r\n};\r\n\r\ndefine('handlers/AjaxError',[], function () {\r\n\treturn AjaxError;\r\n});\r\n\n",
    "/* global UrlResolver, AjaxError, General, Q*/\r\nfunction TAjaxerStatus(state, data) {\r\n    this.State = state || eAjaxerState.None;\r\n    this.Data = data || null;\r\n}\r\n\r\nfunction TAjaxer(rti) {\r\n    var self = this,\r\n        httpRequest = createXhrObject(),\r\n        defaultMaxRetries = 0,\r\n        defaultMaxRetriesGet = 5,\r\n        retryInterval = rti ? rti : 1000,\r\n        isStopRetry = false,\r\n        retryTimer = null,\r\n        appRelativePath = UrlResolver.getApplicationRelativePath();\r\n\r\n    function createXhrObject() {\r\n        var xhr;\r\n\r\n        if (window.XMLHttpRequest) {\r\n            xhr = new XMLHttpRequest();\r\n        } else if (window.ActiveXObject) {\r\n            var versions = [\r\n                \"MSXML2.XmlHttp.6.0\",\r\n                \"MSXML2.XmlHttp.5.0\",\r\n                \"MSXML2.XmlHttp.4.0\",\r\n                \"MSXML2.XmlHttp.3.0\",\r\n                \"MSXML2.XmlHttp.2.0\",\r\n                \"Microsoft.XmlHttp\",\r\n                \"Microsoft.XMLHTTP\" // old\r\n            ];\r\n\r\n            for (var i = 0; i < versions.length; i++) {\r\n                try {\r\n                    xhr = new ActiveXObject(versions[i]);\r\n                } catch (e) {\r\n                    // empty\r\n                }\r\n            }\r\n        }\r\n\r\n        return xhr;\r\n    }\r\n\r\n    function prepareDeferred(onResolve, onReject, onNotify) {\r\n        var deferred = Q.defer();\r\n\r\n        // Normalize the handlers\r\n        onResolve = General.isFunctionType(onResolve) ? onResolve : General.emptyFn;\r\n        onReject = General.isFunctionType(onReject) ? onReject : General.emptyFn;\r\n        onNotify = General.isFunctionType(onNotify) ? onNotify : General.emptyFn;\r\n\r\n        // attach progress handler to original promise, bind it with the deferred\r\n        deferred.promise.progress(onNotify.bind(self, deferred));\r\n\r\n        // re-assign the promise to the deferred object, the onResolve might throw errors as well\r\n        deferred.promise = deferred.promise.then(function (originalResponse) {\r\n            var onResolveValue = onResolve.call(self, originalResponse);\r\n            return onResolveValue || originalResponse;\r\n        });\r\n\r\n        // attach fail handler\r\n        deferred.promise.fail(function (error) {\r\n            onReject.call(self, error);\r\n            throw error;\r\n        });\r\n\r\n        return deferred;\r\n    }\r\n\r\n    function onRetry(methodToRetry, defer, status) {\r\n        status.State = status.State || eAjaxerState.None;\r\n\r\n        if (status.State === eAjaxerState.Retry) {\r\n            stopRetry();\r\n\r\n            if (!General.isFunctionType(methodToRetry)) {\r\n                return;\r\n            }\r\n\r\n            // Call the methodToRetry with extra parameter - the deferred object\r\n            retryTimer = setTimeout(methodToRetry.bind(self, defer), retryInterval);\r\n        }\r\n    }\r\n\r\n    function getMethod(callerInfo, url, params, onComplete, onError, tryCounter, customMaxRetries, sla, noCache, deferred) {\r\n        noCache = General.isBooleanType(noCache) ? noCache : true;\r\n        tryCounter = tryCounter || 1;\r\n\r\n        var maxRetries = General.isNumber(customMaxRetries) ? Number(customMaxRetries) : defaultMaxRetriesGet,\r\n            requestTime = Date.now(),\r\n            onNotify;\r\n\r\n        // If the deferred is defined, then the method is invoked from a RETRY attempt\r\n        if (!deferred) {\r\n            onNotify = function (defer, state) {\r\n                tryCounter += 1;\r\n\r\n                var methodToRetry = getMethod.bind(self,\r\n                    state.Data.callerInfo,\r\n                    state.Data.url,\r\n                    null, // params already on the url query string //state.Data.params,\r\n                    state.Data.onComplete,\r\n                    state.Data.onError,\r\n                    tryCounter,\r\n                    state.Data.maxRetries,\r\n                    state.Data.SLA,\r\n                    null,\r\n                    defer);\r\n\r\n                onRetry(methodToRetry, defer, state);\r\n            };\r\n\r\n            deferred = prepareDeferred(onComplete, onError, onNotify);\r\n        }\r\n\r\n        if (!httpRequest) {\r\n            deferred.reject(new Error(\"AJAXER (\" +\r\n                \"description: XMLHttpRequest could not be created, \" +\r\n                \"callerInfo: \" + callerInfo + \", \" +\r\n                \"url: \" + url + \", \" +\r\n                \"params: \" + params + \", \" +\r\n                \"request time: \" + requestTime + \", \" +\r\n                \"tryCounter: \" + tryCounter + \", \" +\r\n                \"maxRetries: \" + maxRetries + \", \" +\r\n                \"SLA: \" + sla + \",\" +\r\n                \"noCahe: \" + noCache + \")\"\r\n            ));\r\n        } else {\r\n            if (params) {\r\n                url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + params;\r\n            }\r\n\r\n            httpRequest.open(\"GET\", getUrl(url, noCache), true);\r\n\r\n            if (!UrlResolver.isCors(url)) {\r\n                httpRequest.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n                httpRequest.setRequestHeader(\"Accept\", \"application/json\");\r\n            }\r\n\r\n            httpRequest.onreadystatechange = onReadyStateChanged.bind(httpRequest, callerInfo, url, params, tryCounter, maxRetries, deferred, sla, requestTime);\r\n            httpRequest.send();\r\n        }\r\n\r\n        return deferred.promise;\r\n    }\r\n\r\n    function postMethod(callerInfo, url, params, onComplete, onError, tryCounter, customMaxRetries, sla, deferred) {\r\n        tryCounter = tryCounter || 1;\r\n\r\n        var maxRetries = General.isNumber(customMaxRetries) ? Number(customMaxRetries) : defaultMaxRetries,\r\n            requestTime = Date.now(),\r\n            onNotify;\r\n\r\n        // If the deferred is defined, then the method is invoked from a RETRY attempt\r\n        if (!deferred) {\r\n            onNotify = function (defer, state) {\r\n                tryCounter += 1;\r\n\r\n                var methodToRetry = postMethod.bind(self,\r\n                    state.Data.callerInfo,\r\n                    state.Data.url,\r\n                    state.Data.params,\r\n                    state.Data.onComplete,\r\n                    state.Data.onError,\r\n                    tryCounter,\r\n                    state.Data.maxRetries,\r\n                    state.Data.SLA,\r\n                    defer);\r\n\r\n                onRetry(methodToRetry, defer, state);\r\n            };\r\n\r\n            deferred = prepareDeferred(onComplete, onError, onNotify);\r\n        }\r\n\r\n        if (!httpRequest) {\r\n            deferred.reject(new Error(\"AJAXER (\" +\r\n                \"description: XMLHttpRequest could not be created, \" +\r\n                \"callerInfo: \" + callerInfo + \", \" +\r\n                \"url: \" + url + \", \" +\r\n                \"params: \" + params + \", \" +\r\n                \"request time: \" + requestTime + \", \" +\r\n                \"tryCounter: \" + tryCounter + \", \" +\r\n                \"maxRetries: \" + maxRetries + \", \" +\r\n                \"SLA: \" + sla + \")\"\r\n            ));\r\n        } else if (params) {\r\n            // here we check if the user request a security token when not authenticated(initialized)\r\n            // to prevent a call for security token that which will return an error\r\n            var pattern = /SecurityToken/i;\r\n            var result = params.match(pattern);\r\n\r\n            if (result && !$customer.isAuthenticated()) {\r\n                deferred.reject(new Error(\"AJAXER (\" +\r\n                    \"description: Request is not authenticated, \" +\r\n                    \"callerInfo: \" + callerInfo + \", \" +\r\n                    \"url: \" + url + \", \" +\r\n                    \"params: \" + params + \", \" +\r\n                    \"request time: \" + requestTime + \", \" +\r\n                    \"tryCounter: \" + tryCounter + \", \" +\r\n                    \"maxRetries: \" + maxRetries + \", \" +\r\n                    \"SLA: \" + sla + \")\"\r\n                ));\r\n            }\r\n        }\r\n\r\n        if (deferred.promise.isPending()) {\r\n            var noCache = true;\r\n\r\n            httpRequest.open(\"POST\", getUrl(url, noCache), true);\r\n            httpRequest.onreadystatechange = onReadyStateChanged.bind(httpRequest, callerInfo, url, params, tryCounter, maxRetries, deferred, sla, requestTime);\r\n            if (!UrlResolver.isCors(url)) {\r\n                httpRequest.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n                httpRequest.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            }\r\n            httpRequest.send(params);\r\n        }\r\n\r\n        return deferred.promise;\r\n    }\r\n\r\n    function jsonPostMethod(callerInfo, url, params, onComplete, onError, tryCounter, customMaxRetries, sla, deferred) {\r\n        tryCounter = tryCounter || 1;\r\n\r\n        var maxRetries = General.isNumber(customMaxRetries) ? Number(customMaxRetries) : defaultMaxRetries,\r\n            requestTime = Date.now(),\r\n            onNotify;\r\n\r\n        // If the deferred is defined, then the method is invoked from a RETRY attempt\r\n        if (!deferred) {\r\n            onNotify = function (defer, state) {\r\n                tryCounter += 1;\r\n\r\n                var methodToRetry = jsonPostMethod.bind(self,\r\n                    state.Data.callerInfo,\r\n                    state.Data.url,\r\n                    state.Data.params,\r\n                    state.Data.onComplete,\r\n                    state.Data.onError,\r\n                    tryCounter,\r\n                    state.Data.maxRetries,\r\n                    state.Data.SLA,\r\n                    defer);\r\n\r\n                onRetry(methodToRetry, defer, state);\r\n            };\r\n\r\n            deferred = prepareDeferred(onComplete, onError, onNotify);\r\n        }\r\n\r\n        if (!httpRequest) {\r\n            deferred.reject(new Error(\"AJAXER (\" +\r\n                \"description: XMLHttpRequest could not be created, \" +\r\n                \"callerInfo: \" + callerInfo + \", \" +\r\n                \"url: \" + url + \", \" +\r\n                \"params: \" + params + \", \" +\r\n                \"request time: \" + requestTime + \", \" +\r\n                \"tryCounter: \" + tryCounter + \", \" +\r\n                \"maxRetries: \" + maxRetries + \", \" +\r\n                \"SLA: \" + sla + \")\"\r\n            ));\r\n        } else {\r\n            var noCache = true;\r\n            httpRequest.open(\"POST\", getUrl(url, noCache), true);\r\n            httpRequest.onreadystatechange = onReadyStateChanged.bind(httpRequest, callerInfo, url, params, tryCounter, maxRetries, deferred, sla, requestTime, noCache);\r\n\r\n            if (!UrlResolver.isCors(url)) {\r\n                httpRequest.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n                httpRequest.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\r\n            }\r\n\r\n            httpRequest.send(params);\r\n        }\r\n\r\n        return deferred.promise;\r\n    }\r\n\r\n    function onReadyStateChanged(callerInfo, url, params, tryCounter, maxRetries, deferred, sla, requestTime) {\r\n        var xhr = this,\r\n            virtualUrl = getUrl(url),\r\n            responseTime,\r\n            duration;\r\n\r\n        if (xhr.readyState == 4) {\r\n            responseTime = Date.now();\r\n            duration = responseTime - requestTime;\r\n            var headers = (xhr.getAllResponseHeaders) ? xhr.getAllResponseHeaders() : '';\r\n            switch (xhr.status) {\r\n                case 200:\r\n                    if (sla && requestTime && duration > sla) {\r\n                        // SLA has been compromised\r\n                        deferred.notify(new TAjaxerStatus(eAjaxerState.SlaCompromised, {\r\n                            url: virtualUrl,\r\n                            params: params,\r\n                            \"request time\": requestTime,\r\n                            \"response time\": responseTime,\r\n                            duration: duration,\r\n                            callerInfo: callerInfo,\r\n                            tryCounter: tryCounter,\r\n                            maxRetries: maxRetries,\r\n                            SLA: sla\r\n                        }));\r\n                    }\r\n\r\n                    if (xhr.responseText) {\r\n                        if (xhr.responseText.indexOf(\"\\\"result\\\":\\\"ServerError\\\"\") != -1) {\r\n                            ErrorManager.onError(virtualUrl, \"Server Error\", eErrorSeverity.high);\r\n                        } else if (xhr.responseText.indexOf(\"\\\"result\\\":\\\"SecurityError\\\"\") != -1) {\r\n                            ErrorManager.onError(virtualUrl, \"Security Error\", eErrorSeverity.high);\r\n                        } else if (xhr.responseText.indexOf(\"\\\"result\\\":\\\"ServiceError\\\"\") != -1) {\r\n                            ErrorManager.onError(virtualUrl, \"Service Unavailable\", eErrorSeverity.low);\r\n                        } else if (xhr.responseText.indexOf(\"\\\"status\\\":\\\"ServerError\\\"\") != -1) {\r\n                            deferred.reject(new AjaxError(\"Http500\", headers, url));\r\n                        }\r\n\r\n                        deferred.resolve(xhr.responseText);\r\n                    }\r\n                    break;\r\n                case 401: // Unauthorized\r\n                case 403: // Forbidden\r\n                case 420: // Version outdated\r\n                    deferred.reject(new AjaxError(xhr.status, \"http\" + xhr.status, url));\r\n                    break;\r\n                case 417: // Double request\r\n                    deferred.reject(new AjaxError(xhr.status, \"AJAXER (\" +\r\n                        \"description: Double request for resource \\\"\" + url + \"\\\", \" +\r\n                        \"callerInfo: \" + callerInfo + \", \" +\r\n                        \"url: \" + url + \", \" +\r\n                        \"params: \" + params + \", \" +\r\n                        \"request time: \" + requestTime + \", \" +\r\n                        \"response time: \" + responseTime + \", \" +\r\n                        \"duration: \" + duration + \", \" +\r\n                        \"tryCounter: \" + tryCounter + \", \" +\r\n                        \"maxRetries: \" + maxRetries + \", \" +\r\n                        \"SLA: \" + sla + \")\"\r\n                    ));\r\n                    break;\r\n                case 424: // Version mismatch \r\n                    if (!isStopRetry && tryCounter < maxRetries) {\r\n                        // RETRY\r\n                        deferred.notify(new TAjaxerStatus(eAjaxerState.Retry, {\r\n                            url: virtualUrl,\r\n                            params: params,\r\n                            \"request time\": requestTime,\r\n                            \"response time\": responseTime,\r\n                            duration: duration,\r\n                            callerInfo: callerInfo,\r\n                            tryCounter: tryCounter,\r\n                            maxRetries: maxRetries,\r\n                            SLA: sla\r\n                        }));\r\n                    } else {\r\n                        deferred.reject(AjaxError.fromXHR(xhr, \"AJAXER (\" +\r\n                            \"description: Version mismatch for resource \\\"\" + url + \"\\\", \" +\r\n                            \"callerInfo: \" + callerInfo + \", \" +\r\n                            \"url: \" + url + \", \" +\r\n                            \"params: \" + params + \", \" +\r\n                            \"request time: \" + requestTime + \", \" +\r\n                            \"response time: \" + responseTime + \", \" +\r\n                            \"duration: \" + duration + \", \" +\r\n                            \"tryCounter: \" + tryCounter + \", \" +\r\n                            \"maxRetries: \" + maxRetries + \", \" +\r\n                            \"SLA: \" + sla + \")\"\r\n                        ));\r\n                    }\r\n                    break;\r\n                case 0: // Aborted request before getting the response\r\n                    if (!isStopRetry && tryCounter < maxRetries) {\r\n                        // RETRY\r\n                        deferred.notify(new TAjaxerStatus(eAjaxerState.Retry, {\r\n                            url: virtualUrl,\r\n                            params: params,\r\n                            \"request time\": requestTime,\r\n                            \"response time\": responseTime,\r\n                            duration: duration,\r\n                            callerInfo: callerInfo,\r\n                            tryCounter: tryCounter,\r\n                            maxRetries: maxRetries,\r\n                            SLA: sla\r\n                        }));\r\n                    } else {\r\n                        deferred.reject(AjaxError.fromXHR(xhr, \"AJAXER (\" +\r\n                            \"description: Request was aborted for resource \\\"\" + url + \"\\\", \" +\r\n                            \"callerInfo: \" + callerInfo + \", \" +\r\n                            \"url: \" + url + \", \" +\r\n                            \"params: \" + params + \", \" +\r\n                            \"request time: \" + requestTime + \", \" +\r\n                            \"response time: \" + responseTime + \", \" +\r\n                            \"duration: \" + duration + \", \" +\r\n                            \"tryCounter: \" + tryCounter + \", \" +\r\n                            \"maxRetries: \" + maxRetries + \", \" +\r\n                            \"SLA: \" + sla + \")\" + \"response headers: \" + headers\r\n                        ));\r\n                    }\r\n                    break;\r\n                default:\r\n                    if (!isStopRetry && tryCounter < maxRetries) {\r\n                        // RETRY\r\n                        deferred.notify(new TAjaxerStatus(eAjaxerState.Retry, {\r\n                            url: virtualUrl,\r\n                            params: params,\r\n                            \"request time\": requestTime,\r\n                            \"response time\": responseTime,\r\n                            duration: duration,\r\n                            callerInfo: callerInfo,\r\n                            tryCounter: tryCounter,\r\n                            maxRetries: maxRetries,\r\n                            SLA: sla\r\n                        }));\r\n                    } else {\r\n                        deferred.reject(new AjaxError(xhr.status, \"AJAXER (\" +\r\n                            \"description: Request failed for resource \\\"\" + url + \"\\\", status code was \" + xhr.status + \", \" +\r\n                            \"callerInfo: \" + callerInfo + \", \" +\r\n                            \"url: \" + url + \", \" +\r\n                            \"params: \" + params + \", \" +\r\n                            \"request time: \" + requestTime + \", \" +\r\n                            \"response time: \" + responseTime + \", \" +\r\n                            \"duration: \" + duration + \", \" +\r\n                            \"tryCounter: \" + tryCounter + \", \" +\r\n                            \"maxRetries: \" + maxRetries + \", \" +\r\n                            \"SLA: \" + sla + \")\" + \"response headers: \" + headers\r\n                        ));\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getUrl(url, noCache) {\r\n        var random = String.empty,\r\n            prefix;\r\n\r\n        \r\n        var isdevelopermode = url.indexOf('.js') === -1 && url.indexOf('.html') === -1 && url.indexOf(port) === -1;   \r\n\r\n        if (noCache && !isdevelopermode) {\r\n            url = UrlResolver.getUrlWithRndKeyValue(url);\r\n        }\r\n\r\n        prefix = (url.startsWith(appRelativePath) || url.startsWith('http'))\r\n            ? String.empty\r\n            : appRelativePath;\r\n\r\n        var port = 9005;  \r\n        \r\n/*         if (isdevelopermode && url.indexOf(port) === -1){\r\n            prefix = \"http://traderlocal.iforex.com:\" + port + \"/webpl3\"\r\n        } */\r\n        \r\n\r\n        return UrlResolver.combine(prefix, url, random);\r\n    }\r\n\r\n    function stopRetry(force) {\r\n        isStopRetry = !!force;\r\n\r\n        if (retryTimer) {\r\n            clearTimeout(retryTimer);\r\n            retryTimer = null;\r\n        }\r\n    }\r\n\r\n    function abort() {\r\n        if (httpRequest) {\r\n            stopRetry();\r\n            httpRequest.abort();\r\n        }\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n    // When you don't need to chain, you should use these methods\r\n    function getMethodDone() {\r\n        var promise = getMethod.apply(self, arguments);\r\n        promise.done();\r\n    }\r\n\r\n    function postMethodDone() {\r\n        var promise = postMethod.apply(self, arguments);\r\n        promise.done();\r\n    }\r\n\r\n    function jsonPostMethodDone() {\r\n        var promise = jsonPostMethod.apply(self, arguments);\r\n        promise.done();\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    return {\r\n        abort: abort,\r\n        get: getMethodDone,\r\n        post: postMethodDone,\r\n        jsonPost: jsonPostMethodDone,\r\n        promises: {\r\n            abort: abort,\r\n            get: getMethod,\r\n            post: postMethod,\r\n            jsonPost: jsonPostMethod\r\n        }\r\n    };\r\n}\r\n;\ndefine(\"handlers/Ajaxer\", [\"Q\",\"handlers/AjaxError\",\"global/UrlResolver\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (q) {\r\n\t\t\t\tQ = q;\r\n\t\t\t\treturn this.TAjaxer;\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TAjaxer;\n    };\n}(this)));\n\n",
    "/* global General */\r\nfunction THashTable() {\r\n    var length = 0;\r\n    var container = {};\r\n\r\n    function removeItem(key) {\r\n        if (container.hasOwnProperty(key) && General.isDefinedType(container[key])) {\r\n            length -= 1;\r\n\r\n            delete container[key];\r\n        }\r\n    }\r\n\r\n    function getItem(key) {\r\n        if (container.hasOwnProperty(key) && General.isDefinedType(container[key])) {\r\n            return container[key];\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    function foreach(delegate) {\r\n        for (var key in container) {\r\n            if (container.hasOwnProperty(key)) {\r\n                if (delegate(key, container[key]) === false) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function filter(callback) {\r\n        var result = new THashTable();\r\n\r\n        for (var key in container) {\r\n            if (container.hasOwnProperty(key)) {\r\n                if (callback(key, container[key])) {\r\n                    result.SetItem(key, container[key]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    function find(callback) {\r\n        var result = new THashTable();\r\n\r\n        for (var key in container) {\r\n            if (container.hasOwnProperty(key)) {\r\n                if (callback(key, container[key])) {\r\n                    result.SetItem(key, container[key]);\r\n\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    function setItem(key, value) {\r\n        if (General.isDefinedType(value)) {\r\n            if (!General.isDefinedType(container[key])) {\r\n                length += 1;\r\n                container[key] = value;\r\n            }\r\n        }\r\n    }\r\n\r\n    function overrideItem(key, value) {\r\n        if (hasItem(key)) {\r\n            if (General.isDefinedType(value)) {\r\n                container[key] = value;\r\n            }\r\n        }\r\n        else {\r\n            setItem(key, value);\r\n        }\r\n    }\r\n\r\n    function firstItem() {\r\n        for (var key in container) {\r\n            if (container.hasOwnProperty(key)) {\r\n                return container[key];\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    function hasItem(key) {\r\n        return container.hasOwnProperty(key) && General.isDefinedType(container[key]);\r\n    }\r\n\r\n    function hasItems() {\r\n        return length > 0;\r\n    }\r\n\r\n    function clear() {\r\n        for (var key in container) {\r\n            if (container.hasOwnProperty(key)) {\r\n                if (!General.isNullOrUndefined(container[key]) && General.isFunctionType(container[key].dispose)) {\r\n                    container[key].dispose();\r\n                }\r\n\r\n                delete container[key];\r\n            }\r\n        }\r\n\r\n        length = 0;\r\n    }\r\n\r\n    function count() {\r\n        return length;\r\n    }\r\n\r\n    function sort(field, asc) {\r\n        /* eslint no-array-constructor: 0 */\r\n        var res = [],\r\n            tmp = [],\r\n            item,\r\n            fieldValue;\r\n\r\n        for (var key in container) {\r\n            if (!container.hasOwnProperty(key)) {\r\n                continue;\r\n            }\r\n\r\n            item = container[key];\r\n\r\n            if (item !== null && typeof item === 'object') {\r\n                fieldValue = item[field];\r\n\r\n                if (General.isNumber(fieldValue) || General.isStringType(fieldValue)) {\r\n                    tmp.push(new Array(fieldValue, key));\r\n                }\r\n            }\r\n        }\r\n\r\n        //---------------------------------------\r\n\r\n        for (var i = 1, n = tmp.length; i < n; i++) {\r\n            for (var j = 0; j < n - i; j++) {\r\n                if (tmp[j][0] > tmp[j + 1][0]) {\r\n                    var tempVal = tmp[j];\r\n                    tmp[j] = tmp[j + 1];\r\n                    tmp[j + 1] = tempVal;\r\n                }\r\n            }\r\n        }\r\n\r\n        //---------------------------------------\r\n\r\n        for (var t = 0; t < tmp.length; t++) {\r\n            res[t] = tmp[t][1];\r\n        }\r\n\r\n        return asc ? res : res.reverse();\r\n    }\r\n\r\n    return {\r\n        count: count,\r\n        Sort: sort,\r\n        Clear: clear,\r\n        GetItem: getItem,\r\n        SetItem: setItem,\r\n        HasItem: hasItem,\r\n        OverrideItem: overrideItem,\r\n        RemoveItem: removeItem,\r\n        Container: container,\r\n        firstItem: firstItem,\r\n        hasItems: hasItems,\r\n        ForEach: foreach,\r\n        Filter: filter,\r\n        Find: find\r\n    };\r\n}\r\n\r\ndefine(\r\n    'handlers/HashTable',\r\n    [\r\n        'handlers/general'\r\n    ],\r\n    function () {\r\n        return THashTable\r\n    }\r\n);\r\n\n",
    "define(\r\n    'StateObject',\r\n    [\r\n        'handlers/HashTable',\r\n        'handlers/general'\r\n    ],\r\n    function (hashTable, general) {\r\n        function StateObject(name) {\r\n            this._data = [];\r\n            this._keys = [];\r\n            this._name = name;\r\n            this._currentListeners = {};\r\n            this._nextListeners = {};\r\n        }\r\n\r\n        StateObject.prototype.containsKey = function (name) {\r\n            var index = this._keys.indexOf(name);\r\n\r\n            return index >= 0;\r\n        };\r\n\r\n        StateObject.prototype.set = function (name, value) {\r\n            var index = this._keys.indexOf(name);\r\n\r\n            if (index !== -1 && index < this._data.length) {\r\n                return this.get(name);\r\n            }\r\n\r\n            this._keys.push(name);\r\n\r\n            index = this._data.push(value) - 1;\r\n\r\n            this._nextListeners[name] = this._currentListeners[name] = [];\r\n\r\n            return this._data[index];\r\n        };\r\n\r\n        StateObject.prototype.update = function (name, value) {\r\n            var index = this._keys.indexOf(name);\r\n            var listener;\r\n\r\n            var listeners = this._currentListeners[name] = this._nextListeners[name];\r\n            if (listeners) {\r\n                for (var i = 0, ii = listeners.length; i < ii; i++) {\r\n                    listener = listeners[i];\r\n                    listener(value);\r\n                }\r\n            }\r\n\r\n            if (index !== -1 && index < this._data.length) {\r\n                this._data[index] = value;\r\n                return this._data[index];\r\n            }\r\n\r\n            return this.set(name, value);\r\n        };\r\n\r\n        StateObject.prototype.get = function (name) {\r\n            var index = this._keys.indexOf(name);\r\n\r\n            if (index !== -1 && index < this._data.length) {\r\n                return this._data[index];\r\n            }\r\n\r\n            return null;\r\n        };\r\n\r\n        StateObject.prototype.unset = function (name) {\r\n            var index = this._keys.indexOf(name);\r\n\r\n            if (index !== -1 && index < this._data.length) {\r\n                this._keys.splice(index, 1);\r\n                this._data.splice(index, 1);\r\n            }\r\n        };\r\n\r\n        StateObject.prototype.getAll = function () {\r\n            var obj = {};\r\n\r\n            for (var index = 0; index < this._keys.length; index++) {\r\n                obj[this._keys[index]] = this._data[index];\r\n            }\r\n\r\n            return obj;\r\n        };\r\n\r\n        StateObject.prototype.subscribe = function (name, listener) {\r\n            var index = this._keys.indexOf(name);\r\n\r\n            if (index === -1) {\r\n                this.set(name, null);\r\n            }\r\n\r\n            if (typeof listener !== 'function') {\r\n                throw new ReferenceError('Expected listener to be a function.');\r\n            }\r\n\r\n            if (this._nextListeners[name] === this._currentListeners[name]) {\r\n                this._nextListeners[name] = this._currentListeners[name].slice();\r\n            }\r\n\r\n            this._nextListeners[name].push(listener);\r\n\r\n            return unsubscribe.bind(this, name, listener);\r\n        };\r\n\r\n        function unsubscribe(name, listener) {\r\n            if (this._nextListeners[name] === this._currentListeners[name] && general.isArrayType(this._currentListeners[name])) {\r\n                this._nextListeners[name] = this._currentListeners[name].slice();\r\n            }\r\n\r\n            if (general.isArrayType(this._nextListeners[name])) {\r\n                var listenerIndex = this._nextListeners[name].indexOf(listener);\r\n                this._nextListeners[name].splice(listenerIndex, 1);\r\n            }\r\n        }\r\n\r\n        StateObject.prototype.clear = function () {\r\n            this._data = [];\r\n            this._keys = [];\r\n            this._currentListeners = {};\r\n            this._nextListeners = {};\r\n        }\r\n\r\n        var store = new hashTable();\r\n\r\n        return {\r\n            load: function (stateObjectName, req, onload, config) {\r\n                if (config && config.isBuild) {\r\n                    onload(null);\r\n                    return;\r\n                }\r\n\r\n                var key = stateObjectName.toLowerCase(),\r\n                    stateObject;\r\n\r\n                if (!store.HasItem(key)) {\r\n                    stateObject = new StateObject(stateObjectName);\r\n                    store.SetItem(key, stateObject);\r\n                }\r\n\r\n                onload(store.GetItem(key));\r\n            }\r\n        };\r\n    }\r\n);\r\n\n",
    "\n",
    "define(\r\n    'generalmanagers/ShutDownHandler',\r\n    [\r\n        'require',\r\n        'StateObject!SystemNotificationEvents'\r\n    ],\r\n    function(require) {\r\n        var stateObject = require('StateObject!SystemNotificationEvents');\r\n\r\n        function ShutDownHandler() {\r\n            var areServicesStarted = true;\r\n\r\n            function stopRunningServices() {\r\n                if (areServicesStarted) {\r\n                    stateObject.update(eShutDownHandlerTopics.stopClientStateManagerCalls);\r\n                    stateObject.update(eShutDownHandlerTopics.stopKeepAliveCalls);\r\n                    stateObject.update(eShutDownHandlerTopics.stopGetRatesRecentWebCalls);\r\n                    stateObject.update(eShutDownHandlerTopics.stopGetActiveIMCalls);\r\n                }\r\n\r\n                areServicesStarted = false;\r\n            }\r\n\r\n            function restartStoppedServices() {\r\n                if (!areServicesStarted) {\r\n                    stateObject.update(eShutDownHandlerTopics.restartClientStateManagerCalls);\r\n                    stateObject.update(eShutDownHandlerTopics.restartGetActiveIMCalls);\r\n                    stateObject.update(eShutDownHandlerTopics.restartGetRatesRecentWebCalls);\r\n                    stateObject.update(eShutDownHandlerTopics.restartGetActiveIMCalls);\r\n                }\r\n\r\n                areServicesStarted = true;\r\n            }\r\n\r\n            return {\r\n                StopRunningServices: stopRunningServices,\r\n                RestartStoppedServices: restartStoppedServices\r\n            };\r\n        }\r\n\r\n        return new ShutDownHandler();\r\n    }\r\n);\n",
    "define(\"dataaccess/dalCommon\", [\r\n\t\"global/UrlResolver\",\r\n\t\"handlers/general\",\r\n\t\"handlers/Ajaxer\",\r\n\t\"generalmanagers/ShutDownHandler\",\r\n], function dalCommonClass(urlResolver, general, TAjaxer, ShutDownHandler) {\r\n\tfunction checkAjaxerStatus(status) {\r\n\t\tstatus.State = status.State || eAjaxerState.None;\r\n\r\n\t\tif (status.State === eAjaxerState.Retry) {\r\n\t\t\t// console.log('Retry the last request: ' + JSON.stringify(status.Data));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction logout(reason) { \r\n\t\tFxNet.SessionStorage.removeItem(\"TrackingSessionId\");\r\n\r\n\t\tif (typeof $cacheManager !== \"undefined\" && $cacheManager) {\r\n\t\t\t$cacheManager.Unregister();\r\n\t\t}\r\n\r\n\t\tif (ShutDownHandler) {\r\n\t\t\tShutDownHandler.StopRunningServices();\r\n\t\t}\r\n \r\n\t\tvar reasonqs = reason ? \"?\" + reason : \"\";\r\n\r\n\t\twindow.location = urlResolver.combine(\r\n\t\t\turlResolver.getApplicationRelativePath(),\r\n\t\t\t\"Account/Logout\",\r\n\t\t\t($initialDataManager.prop.csmg || \"\") + reasonqs\r\n\t\t);\r\n\t}\r\n\r\n\tfunction login(reason) {\r\n\t\tdebugger;\r\n\t\tFxNet.SessionStorage.removeItem(\"TrackingSessionId\");\r\n\r\n\t\tvar reasonqs = reason ? \"?\" + reason : \"\";\r\n\r\n\t\twindow.location = urlResolver.combine(urlResolver.getApplicationRelativePath(), \"Account/Login\", reasonqs);\r\n\t}\r\n\r\n\tfunction exit(reason) {\r\n\t\tFxNet.SessionStorage.removeItem(\"TrackingSessionId\");\r\n\r\n\t\tif (typeof $cacheManager !== \"undefined\" && $cacheManager) {\r\n\t\t\t$cacheManager.Unregister();\r\n\t\t}\r\n\r\n\t\tvar reasonqs = reason ? \"?\" + reason : \"\";\r\n\r\n\t\tif (ShutDownHandler) {\r\n\t\t\tShutDownHandler.StopRunningServices();\r\n\t\t}\r\n\r\n\t\twindow.location = urlResolver.combine(\r\n\t\t\turlResolver.getApplicationRelativePath(),\r\n\t\t\t\"Account/Exit\",\r\n\t\t\t($initialDataManager.prop.csmg || \"\") + reasonqs\r\n\t\t);\r\n\t}\r\n\r\n\tfunction getJWTLogin() {\r\n\t\tvar ajaxer = new TAjaxer();\r\n\t\tvar params = \"\";\r\n\t\tvar promise = ajaxer.promises.get(\r\n\t\t\t\"dalCommon/GetJWTLogin\",\r\n\t\t\t\"account/GetJWTLogin\",\r\n\t\t\tparams,\r\n\t\t\tnull,\r\n\t\t\tfunction (error) {\r\n\t\t\t\tErrorManager.onError(\"dalCommon/getGwtToken\", \"\", eErrorSeverity.low);\r\n\t\t\t\tpromise.reject(error);\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn promise;\r\n\t}\r\n\r\n\tfunction keepAlive(callback) {\r\n\t\tvar ajaxer = new TAjaxer();\r\n\t\tvar params = \"\";\r\n\r\n\t\tvar promise = ajaxer.promises.get(\r\n\t\t\t\"dalCommon/keepAlive\",\r\n\t\t\t\"api/clientstate/KeepAlive\",\r\n\t\t\tparams,\r\n\t\t\tcallback,\r\n\t\t\tfunction () {\r\n\t\t\t\tErrorManager.onError(\"dalCommon/keepAlive\", \"\", eErrorSeverity.high);\r\n\t\t\t},\r\n\t\t\t0,\r\n\t\t\t1000\r\n\t\t);\r\n\r\n\t\tpromise.progress(checkAjaxerStatus).done();\r\n\t}\r\n\r\n\tvar switchClickedOnce = false;\r\n\r\n\tfunction switchAccount() {\r\n\t\tif (switchClickedOnce) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitchClickedOnce = true;\r\n\t\tif (typeof $cacheManager !== \"undefined\" && $cacheManager) {\r\n\t\t\t$cacheManager.Unregister();\r\n\t\t}\r\n\r\n\t\tif (ShutDownHandler) {\r\n\t\t\tShutDownHandler.StopRunningServices();\r\n\t\t}\r\n\r\n\t\twindow.location.replace(\r\n\t\t\turlResolver.combine(\r\n\t\t\t\turlResolver.getApplicationRelativePath(),\r\n\t\t\t\t\"Account/Switch?\" + urlResolver.getRndKeyValue()\r\n\t\t\t)\r\n\t\t);\r\n\t}\r\n\r\n\tfunction addLog(source, message) {\r\n\t\tvar ajaxer = new TAjaxer();\r\n\t\tvar params = JSON.stringify({\r\n\t\t\tloggedErrorString: JSON.stringify({ Location: source, Info: message }),\r\n\t\t});\r\n\r\n\t\treturn ajaxer.promises.jsonPost(\"Error/logError\", \"Error/Log\", params).fail(function () {});\r\n\t}\r\n\r\n\tfunction addWarning(source, message) {\r\n\t\tvar ajaxer = new TAjaxer();\r\n\t\tvar params = JSON.stringify({\r\n\t\t\tloggedErrorString: JSON.stringify({ Location: source, Info: message }),\r\n\t\t});\r\n\r\n\t\treturn ajaxer.promises.jsonPost(\"Warning/logWarning\", \"Error/Warn\", params).fail(function () {});\r\n\t}\r\n\r\n\tfunction addInfo(source, message) {\r\n\t\tvar ajaxer = new TAjaxer();\r\n\t\tvar params = JSON.stringify({\r\n\t\t\tloggedErrorString: JSON.stringify({ Location: source, Info: message }),\r\n\t\t});\r\n\r\n\t\treturn ajaxer.promises.jsonPost(\"logInfo\", \"Error/Info\", params);\r\n\t}\r\n\r\n\tfunction logUploadActivityMessage(errorType, errorDetails, frameGuid) {\r\n\t\tvar ajaxer = new TAjaxer();\r\n\t\tvar params = JSON.stringify({ errorType: errorType, errorDetails: errorDetails, frameGuid: frameGuid });\r\n\r\n\t\tajaxer.jsonPost(\r\n\t\t\t\"Error/WriteUploadErrorActivityLog\",\r\n\t\t\t\"Error/WriteUploadErrorActivityLog\",\r\n\t\t\tparams,\r\n\t\t\tgeneral.emptyFn,\r\n\t\t\tfunction () {\r\n\t\t\t\tErrorManager.onError(\"Error/WriteUploadErrorActivityLog\", \"\", eErrorSeverity.medium);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction logFrameNotLoadedMessage(errorType, errorDetails, frameGuid) {\r\n\t\tlogUploadActivityMessage(errorType, errorDetails, frameGuid);\r\n\t}\r\n\r\n\tfunction logUploadCommunication(messageType, message, action) {\r\n\t\tvar ajaxer = new TAjaxer(),\r\n\t\t\tparams = JSON.stringify({ messageType: messageType, message: message, action: action });\r\n\r\n\t\tajaxer.jsonPost(\r\n\t\t\t\"Error/LogUploadCommunication\",\r\n\t\t\t\"Error/LogUploadCommunication\",\r\n\t\t\tparams,\r\n\t\t\tgeneral.emptyFn,\r\n\t\t\tfunction () {\r\n\t\t\t\tErrorManager.onError(\"Error/LogUploadCommunication\", \"\", eErrorSeverity.medium);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction writeInfoLog(messageType, message, action) {\r\n\t\tvar ajaxer = new TAjaxer(),\r\n\t\t\tparams = JSON.stringify({ messageType: messageType, message: message, action: action });\r\n\r\n\t\tajaxer.jsonPost(\"Error/WriteInfoLog\", \"Error/WriteInfoLog\", params, general.emptyFn, function (error) {\r\n\t\t\tErrorManager.onWarning(\"Error/WriteInfoLog\", error, eErrorSeverity.medium);\r\n\t\t});\r\n\t}\r\n\r\n\tvar module = (dalCommon = {\r\n\t\tGetJWTLogin: getJWTLogin,\r\n\t\tAddInfo: addInfo,\r\n\t\tAddLog: addLog,\r\n\t\tAddWarning: addWarning,\r\n\t\tLogout: logout,\r\n\t\tLogin: login,\r\n\t\tSwitchAccount: switchAccount,\r\n\t\tExit: exit,\r\n\t\tKeepAlive: keepAlive,\r\n\t\tLogUploadActivityMessage: logUploadActivityMessage,\r\n\t\tLogUploadCommunication: logUploadCommunication,\r\n\t\tLogFrameNotLoadedMessage: logFrameNotLoadedMessage,\r\n\t\tWriteInfoLog: writeInfoLog,\r\n\t});\r\n\r\n\treturn module;\r\n});\r\n\n",
    "var Logger = function (dalCommon) {\r\n    return {\r\n        log: function log(source, message, callback, severity) {\r\n            severity = severity || eErrorSeverity.medium;\r\n\r\n            dalCommon\r\n                .AddLog(source, message)\r\n                .then(callback)\r\n                .done();\r\n        },\r\n        info: function info(source, message, callback) {\r\n            dalCommon.AddInfo(source, message)\r\n                .then(callback)\r\n                .done();\r\n        },\r\n        warn: function warn(source, message, callback, severity) {\r\n            severity = severity || eErrorSeverity.warning;\r\n\r\n            dalCommon\r\n                .AddWarning(source, message)\r\n                .then(callback)\r\n                .done();\r\n        },\r\n        error: function error(source, message, callback, severity) {\r\n            severity = severity || eErrorSeverity.low;\r\n\r\n            dalCommon\r\n                .AddLog(source, message)\r\n                .then(callback)\r\n                .done();\r\n        }\r\n    }\r\n};\r\n\ndefine(\"handlers/Logger\", [\"dataaccess/dalCommon\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (dc) {\r\n\t\t\t\treturn this.Logger(dc);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.Logger;\n    };\n}(this)));\n\n",
    "/*global eErrorSeverity */\r\ndefine(\r\n    \"JSONHelper\",\r\n    [\r\n        \"handlers/Logger\",\r\n        \"handlers/general\"\r\n    ],\r\n    function (logger, general) {\r\n        function JSONHelperClass() {\r\n            function strToJson(callerName, jsonString, errorSeverity, onErrorCallback) {\r\n                if (!general.isDefinedType(jsonString) ||\r\n                    general.isNumberType(jsonString) ||\r\n                    jsonString == '') {\r\n                    return null;\r\n                }\r\n\r\n                if (general.isObjectType(jsonString)) {\r\n                    return jsonString;\r\n                }\r\n\r\n                if (general.isNumber(jsonString)) {\r\n                    return Number(jsonString);\r\n                }\r\n\r\n                // default severity is 'high'- if severity is not given the severity is high\r\n                errorSeverity = errorSeverity || eErrorSeverity.medium;\r\n\r\n                try {\r\n                    return JSON.parse(jsonString);\r\n                } catch (err) {\r\n                    var msgJson = JSON.stringify({\r\n                        error: \"JSONHelper.STR2JSON threw an exception\",\r\n                        name: err.name,\r\n                        message: err.message,\r\n                        str: jsonString,\r\n                        stack: err.stack\r\n                    }, null, 4);\r\n\r\n                    logger.log(callerName, msgJson, onErrorCallback, errorSeverity);\r\n\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            function isValid(jsonString) {\r\n                if (!jsonString ||\r\n                    !general.isStringType(jsonString)) {\r\n                    return false;\r\n                }\r\n\r\n                if (general.isNumber(jsonString)) {\r\n                    return true;\r\n                }\r\n\r\n                if (jsonString.indexOf('[') < 0 &&\r\n                    jsonString.indexOf('{') < 0) {\r\n                    return false;\r\n                }\r\n\r\n                try {\r\n                    return !!JSON.parse(jsonString);\r\n                } catch (e) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            return {\r\n                STR2JSON: strToJson,\r\n                IsValid: isValid\r\n            };\r\n        }\r\n\r\n        JSONHelper = new JSONHelperClass();\r\n\r\n        return JSONHelper;\r\n    }\r\n);\r\n\r\n\n",
    "/*=============================================================================\r\n\tAuthor:\t\t\tEric M. Barnard - @ericmbarnard\t\t\t\t\t\t\t\t\r\n\tLicense:\t\tMIT (http://opensource.org/licenses/mit-license.php)\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\tDescription:\tValidation Library for KnockoutJS\t\t\t\t\t\t\t\r\n\tVersion:\t\t2.0.4\t\t\t\t\t\t\t\t\t\t\t\r\n===============================================================================\r\n*/\r\n/*globals require: false, exports: false, define: false, ko: false */\r\n\r\n(function (factory) {\r\n\t// Module systems magic dance.\r\n\r\n\tif (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\") {\r\n\t\t// CommonJS or Node: hard-coded dependency on \"knockout\"\r\n\t\tfactory(require(\"knockout\"), requre(\"JSONHelper\"), exports);\r\n\t} else if (typeof define === \"function\" && define[\"amd\"]) {\r\n\t\t// AMD anonymous module with hard-coded dependency on \"knockout\"\r\n\t\tdefine('vendor/knockout.validation',[\"knockout\", \"JSONHelper\", \"exports\"], factory);\r\n\t} else {\r\n\t\t// <script> tag: use the global `ko` object, attaching a `validation` property\r\n\t\tfactory(ko, JSONHelper, ko.validation = {});\r\n\t}\r\n}(function ( ko, JSONHelper, exports ) {\r\n\r\n\tif (typeof (ko) === 'undefined') {\r\n\t\tthrow new Error('Knockout is required, please ensure it is loaded before loading this validation plug-in');\r\n\t}\r\n\r\n\t// create our namespace object\r\n\tko.validation = exports;\r\n\r\n\tvar kv = ko.validation,\r\n\t\tkoUtils = ko.utils,\r\n\t\tunwrap = koUtils.unwrapObservable,\r\n\t\tforEach = koUtils.arrayForEach,\r\n\t\textend = koUtils.extend;\r\n;/*global ko: false*/\r\n\r\nvar defaults = {\r\n\tregisterExtenders: true,\r\n\tmessagesOnModified: true,\r\n\terrorsAsTitle: true,            // enables/disables showing of errors as title attribute of the target element.\r\n\terrorsAsTitleOnModified: false, // shows the error when hovering the input field (decorateElement must be true)\r\n\tmessageTemplate: null,\r\n\tinsertMessages: true,           // automatically inserts validation messages as <span></span>\r\n\tparseInputAttributes: false,    // parses the HTML5 validation attribute from a form element and adds that to the object\r\n\twriteInputAttributes: false,    // adds HTML5 input validation attributes to form elements that ko observable's are bound to\r\n\tdecorateInputElement: false,         // false to keep backward compatibility\r\n\tdecorateElementOnModified: true,// true to keep backward compatibility\r\n\terrorClass: null,               // single class for error message and element\r\n\terrorElementClass: 'validationElement',  // class to decorate error element\r\n\terrorMessageClass: 'validationMessage',  // class to decorate error message\r\n\tallowHtmlMessages: false,\t\t// allows HTML in validation messages\r\n\tgrouping: {\r\n\t\tdeep: false,        //by default grouping is shallow\r\n\t\tobservable: true,   //and using observables\r\n\t\tlive: false\t\t    //react to changes to observableArrays if observable === true\r\n\t},\r\n\tvalidate: {\r\n\t\t// throttle: 10\r\n\t}\r\n};\r\n\r\n// make a copy  so we can use 'reset' later\r\nvar configuration = extend({}, defaults);\r\n\r\nconfiguration.html5Attributes = ['required', 'pattern', 'min', 'max', 'step'];\r\nconfiguration.html5InputTypes = ['email', 'number', 'date'];\r\n\r\nconfiguration.reset = function () {\r\n\textend(configuration, defaults);\r\n};\r\n\r\nkv.configuration = configuration;\r\n;kv.utils = (function () {\r\n\tvar seedId = new Date().getTime();\r\n\r\n\tvar domData = {}; //hash of data objects that we reference from dom elements\r\n\tvar domDataKey = '__ko_validation__';\r\n\r\n\treturn {\r\n\t\tisArray: function (o) {\r\n\t\t\treturn o.isArray || Object.prototype.toString.call(o) === '[object Array]';\r\n\t\t},\r\n\t\tisObject: function (o) {\r\n\t\t\treturn o !== null && typeof o === 'object';\r\n\t\t},\r\n\t\tisNumber: function(o) {\r\n\t\t\treturn !isNaN(o);\r\n\t\t},\r\n\t\tisObservableArray: function(instance) {\r\n\t\t\treturn !!instance &&\r\n\t\t\t\t\ttypeof instance[\"remove\"] === \"function\" &&\r\n\t\t\t\t\ttypeof instance[\"removeAll\"] === \"function\" &&\r\n\t\t\t\t\ttypeof instance[\"destroy\"] === \"function\" &&\r\n\t\t\t\t\ttypeof instance[\"destroyAll\"] === \"function\" &&\r\n\t\t\t\t\ttypeof instance[\"indexOf\"] === \"function\" &&\r\n\t\t\t\t\ttypeof instance[\"replace\"] === \"function\";\r\n\t\t},\r\n\t\tvalues: function (o) {\r\n\t\t\tvar r = [];\r\n\t\t\tfor (var i in o) {\r\n\t\t\t\tif (o.hasOwnProperty(i)) {\r\n\t\t\t\t\tr.push(o[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn r;\r\n\t\t},\r\n\t\tgetValue: function (o) {\r\n\t\t\treturn (typeof o === 'function' ? o() : o);\r\n\t\t},\r\n\t\thasAttribute: function (node, attr) {\r\n\t\t\treturn node.getAttribute(attr) !== null;\r\n\t\t},\r\n\t\tgetAttribute: function (element, attr) {\r\n\t\t\treturn element.getAttribute(attr);\r\n\t\t},\r\n\t\tsetAttribute: function (element, attr, value) {\r\n\t\t\treturn element.setAttribute(attr, value);\r\n\t\t},\r\n\t\tisValidatable: function (o) {\r\n\t\t\treturn !!(o && o.rules && o.isValid && o.isModified);\r\n\t\t},\r\n\t\tinsertAfter: function (node, newNode) {\r\n\t\t\tnode.parentNode.insertBefore(newNode, node.nextSibling);\r\n\t\t},\r\n\t\tnewId: function () {\r\n\t\t\treturn seedId += 1;\r\n\t\t},\r\n\t\tgetConfigOptions: function (element) {\r\n\t\t\tvar options = kv.utils.contextFor(element);\r\n\r\n\t\t\treturn options || kv.configuration;\r\n\t\t},\r\n\t\tsetDomData: function (node, data) {\r\n\t\t\tvar key = node[domDataKey];\r\n\r\n\t\t\tif (!key) {\r\n\t\t\t\tnode[domDataKey] = key = kv.utils.newId();\r\n\t\t\t}\r\n\r\n\t\t\tdomData[key] = data;\r\n\t\t},\r\n\t\tgetDomData: function (node) {\r\n\t\t\tvar key = node[domDataKey];\r\n\r\n\t\t\tif (!key) {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\r\n\t\t\treturn domData[key];\r\n\t\t},\r\n\t\tcontextFor: function (node) {\r\n\t\t\tswitch (node.nodeType) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 8:\r\n\t\t\t\t\tvar context = kv.utils.getDomData(node);\r\n\t\t\t\t\tif (context) { return context; }\r\n\t\t\t\t\tif (node.parentNode) { return kv.utils.contextFor(node.parentNode); }\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn undefined;\r\n\t\t},\r\n\t\tisEmptyVal: function (val) {\r\n\t\t\tif (val === undefined) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (val === null) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif (val === \"\") {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tgetOriginalElementTitle: function (element) {\r\n\t\t\tvar savedOriginalTitle = kv.utils.getAttribute(element, 'data-orig-title'),\r\n\t\t\t\tcurrentTitle = element.title,\r\n\t\t\t\thasSavedOriginalTitle = kv.utils.hasAttribute(element, 'data-orig-title');\r\n\r\n\t\t\treturn hasSavedOriginalTitle ?\r\n\t\t\t\tsavedOriginalTitle : currentTitle;\r\n\t\t},\r\n\t\tasync: function (expr) {\r\n\t\t\tif (window.setImmediate) { window.setImmediate(expr); }\r\n\t\t\telse { window.setTimeout(expr, 0); }\r\n\t\t},\r\n\t\tforEach: function (object, callback) {\r\n\t\t\tif (kv.utils.isArray(object)) {\r\n\t\t\t\treturn forEach(object, callback);\r\n\t\t\t}\r\n\t\t\tfor (var prop in object) {\r\n\t\t\t\tif (object.hasOwnProperty(prop)) {\r\n\t\t\t\t\tcallback(object[prop], prop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}());\r\n;var api = (function () {\r\n\r\n\tvar isInitialized = 0,\r\n\t\tconfiguration = kv.configuration,\r\n\t\tutils = kv.utils;\r\n\r\n\tfunction cleanUpSubscriptions(context) {\r\n\t\tforEach(context.subscriptions, function (subscription) {\r\n\t\t\tsubscription.dispose();\r\n\t\t});\r\n\t\tcontext.subscriptions = [];\r\n\t}\r\n\r\n\tfunction dispose(context) {\r\n\t\tif (context.options.deep) {\r\n\t\t\tforEach(context.flagged, function (obj) {\r\n\t\t\t\tdelete obj.__kv_traversed;\r\n\t\t\t});\r\n\t\t\tcontext.flagged.length = 0;\r\n\t\t}\r\n\r\n\t\tif (!context.options.live) {\r\n\t\t\tcleanUpSubscriptions(context);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction traverseGraph(obj, context, level) {\r\n\t\tvar objValues = [],\r\n\t\t\tval = obj.peek ? obj.peek() : obj;\r\n\r\n\t\tif (obj.__kv_traversed === true) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (context.options.deep) {\r\n\t\t\tobj.__kv_traversed = true;\r\n\t\t\tcontext.flagged.push(obj);\r\n\t\t}\r\n\r\n\t\t//default level value depends on deep option.\r\n\t\tlevel = (level !== undefined ? level : context.options.deep ? 1 : -1);\r\n\r\n\t\t// if object is observable then add it to the list\r\n\t\tif (ko.isObservable(obj)) {\r\n\t\t\t// ensure it's validatable but don't extend validatedObservable because it\r\n\t\t\t// would overwrite isValid property.\r\n\t\t\tif (!obj.errors && !utils.isValidatable(obj)) {\r\n\t\t\t\tobj.extend({ validatable: true });\r\n\t\t\t}\r\n\t\t\tcontext.validatables.push(obj);\r\n\r\n\t\t\tif (context.options.live && utils.isObservableArray(obj)) {\r\n\t\t\t\tcontext.subscriptions.push(obj.subscribe(function () {\r\n\t\t\t\t\tcontext.graphMonitor.valueHasMutated();\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//get list of values either from array or object but ignore non-objects\r\n\t\t// and destroyed objects\r\n\t\tif (val && !val._destroy) {\r\n\t\t\tif (utils.isArray(val)) {\r\n\t\t\t\tobjValues = val;\r\n\t\t\t}\r\n\t\t\telse if (utils.isObject(val)) {\r\n\t\t\t\tobjValues = utils.values(val);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//process recursively if it is deep grouping\r\n\t\tif (level !== 0) {\r\n\t\t\tutils.forEach(objValues, function (observable) {\r\n\t\t\t\t//but not falsy things and not HTML Elements\r\n\t\t\t\tif (observable && !observable.nodeType && (!ko.isComputed(observable) || observable.rules)) {\r\n\t\t\t\t\ttraverseGraph(observable, context, level + 1);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction runTraversal(obj, context) {\r\n\t\tcontext.validatables = [];\r\n\t\tcleanUpSubscriptions(context);\r\n\t\ttraverseGraph(obj, context);\r\n\t\tdispose(context);\r\n\t}\r\n\r\n\tfunction collectErrors(array) {\r\n\t\tvar errors = [];\r\n\t\tforEach(array, function (observable) {\r\n\t\t\t// Do not collect validatedObservable errors\r\n\t\t\tif (utils.isValidatable(observable) && !observable.isValid()) {\r\n\t\t\t\t// Use peek because we don't want a dependency for 'error' property because it\r\n\t\t\t\t// changes before 'isValid' does. (Issue #99)\r\n\t\t\t\terrors.push(observable.error.peek());\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn errors;\r\n\t}\r\n\r\n\treturn {\r\n\t\t//Call this on startup\r\n\t\t//any config can be overridden with the passed in options\r\n\t\tinit: function (options, force) {\r\n\t\t\t//done run this multiple times if we don't really want to\r\n\t\t\tif (isInitialized > 0 && !force) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t//because we will be accessing options properties it has to be an object at least\r\n\t\t\toptions = options || {};\r\n\t\t\t//if specific error classes are not provided then apply generic errorClass\r\n\t\t\t//it has to be done on option so that options.errorClass can override default\r\n\t\t\t//errorElementClass and errorMessage class but not those provided in options\r\n\t\t\toptions.errorElementClass = options.errorElementClass || options.errorClass || configuration.errorElementClass;\r\n\t\t\toptions.errorMessageClass = options.errorMessageClass || options.errorClass || configuration.errorMessageClass;\r\n\r\n\t\t\textend(configuration, options);\r\n\r\n\t\t\tif (configuration.registerExtenders) {\r\n\t\t\t\tkv.registerExtenders();\r\n\t\t\t}\r\n\r\n\t\t\tisInitialized = 1;\r\n\t\t},\r\n\r\n\t\t// resets the config back to its original state\r\n\t\treset: kv.configuration.reset,\r\n\r\n\t\t// recursively walks a viewModel and creates an object that\r\n\t\t// provides validation information for the entire viewModel\r\n\t\t// obj -> the viewModel to walk\r\n\t\t// options -> {\r\n\t\t//\t  deep: false, // if true, will walk past the first level of viewModel properties\r\n\t\t//\t  observable: false // if true, returns a computed observable indicating if the viewModel is valid\r\n\t\t// }\r\n\t\tgroup: function group(obj, options) { // array of observables or viewModel\r\n\t\t\toptions = extend(extend({}, configuration.grouping), options);\r\n\r\n\t\t\tvar context = {\r\n\t\t\t\toptions: options,\r\n\t\t\t\tgraphMonitor: ko.observable(),\r\n\t\t\t\tflagged: [],\r\n\t\t\t\tsubscriptions: [],\r\n\t\t\t\tvalidatables: []\r\n\t\t\t};\r\n\r\n\t\t\tvar result = null;\r\n\r\n\t\t\t//if using observables then traverse structure once and add observables\r\n\t\t\tif (options.observable) {\r\n\t\t\t\tresult = ko.computed(function () {\r\n\t\t\t\t\tcontext.graphMonitor(); //register dependency\r\n\t\t\t\t\trunTraversal(obj, context);\r\n\t\t\t\t\treturn collectErrors(context.validatables);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse { //if not using observables then every call to error() should traverse the structure\r\n\t\t\t\tresult = function () {\r\n\t\t\t\t\trunTraversal(obj, context);\r\n\t\t\t\t\treturn collectErrors(context.validatables);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tresult.showAllMessages = function (show) { // thanks @heliosPortal\r\n\t\t\t\tif (show === undefined) {//default to true\r\n\t\t\t\t\tshow = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tresult.forEach(function (observable) {\r\n\t\t\t\t\tif (utils.isValidatable(observable)) {\r\n\t\t\t\t\t\tobservable.isModified(show);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tresult.isAnyMessageShown = function () {\r\n\t\t\t\tvar invalidAndModifiedPresent;\r\n\r\n\t\t\t\tinvalidAndModifiedPresent = !!result.find(function (observable) {\r\n\t\t\t\t\treturn utils.isValidatable(observable) && !observable.isValid() && observable.isModified();\r\n\t\t\t\t});\r\n\t\t\t\treturn invalidAndModifiedPresent;\r\n\t\t\t};\r\n\r\n\t\t\tresult.filter = function(predicate) {\r\n\t\t\t\tpredicate = predicate || function () { return true; };\r\n\t\t\t\t// ensure we have latest changes\r\n\t\t\t\tresult();\r\n\r\n\t\t\t\treturn koUtils.arrayFilter(context.validatables, predicate);\r\n\t\t\t};\r\n\r\n\t\t\tresult.find = function(predicate) {\r\n\t\t\t\tpredicate = predicate || function () { return true; };\r\n\t\t\t\t// ensure we have latest changes\r\n\t\t\t\tresult();\r\n\r\n\t\t\t\treturn koUtils.arrayFirst(context.validatables, predicate);\r\n\t\t\t};\r\n\r\n\t\t\tresult.forEach = function(callback) {\r\n\t\t\t\tcallback = callback || function () { };\r\n\t\t\t\t// ensure we have latest changes\r\n\t\t\t\tresult();\r\n\r\n\t\t\t\tforEach(context.validatables, callback);\r\n\t\t\t};\r\n\r\n\t\t\tresult.map = function(mapping) {\r\n\t\t\t\tmapping = mapping || function (item) { return item; };\r\n\t\t\t\t// ensure we have latest changes\r\n\t\t\t\tresult();\r\n\r\n\t\t\t\treturn koUtils.arrayMap(context.validatables, mapping);\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * @private You should not rely on this method being here.\r\n\t\t\t * It's a private method and it may change in the future.\r\n\t\t\t *\r\n\t\t\t * @description Updates the validated object and collects errors from it.\r\n\t\t\t */\r\n\t\t\tresult._updateState = function(newValue) {\r\n\t\t\t\tif (!utils.isObject(newValue)) {\r\n\t\t\t\t\tthrow new Error('An object is required.');\r\n\t\t\t\t}\r\n\t\t\t\tobj = newValue;\r\n\t\t\t\tif (options.observable) {\r\n\t\t\t\t\tcontext.graphMonitor.valueHasMutated();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\trunTraversal(newValue, context);\r\n\t\t\t\t\treturn collectErrors(context.validatables);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\tformatMessage: function (message, params, observable) {\r\n\t\t\tif (utils.isObject(params) && params.typeAttr) {\r\n\t\t\t\tparams = params.value;\r\n\t\t\t}\r\n\t\t\tif (typeof message === 'function') {\r\n\t\t\t\treturn message(params, observable);\r\n\t\t\t}\r\n\t\t\tvar replacements = unwrap(params);\r\n\t\t\tif (replacements == null) {\r\n\t\t\t\treplacements = [];\r\n\t\t\t}\r\n\t\t\tif (!utils.isArray(replacements)) {\r\n\t\t\t\treplacements = [replacements];\r\n\t\t\t}\r\n\t\t\treturn message.replace(/{(\\d+)}/gi, function(match, index) {\r\n\t\t\t\tif (typeof replacements[index] !== 'undefined') {\r\n\t\t\t\t\treturn replacements[index];\r\n\t\t\t\t}\r\n\t\t\t\treturn match;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// addRule:\r\n\t\t// This takes in a ko.observable and a Rule Context - which is just a rule name and params to supply to the validator\r\n\t\t// ie: kv.addRule(myObservable, {\r\n\t\t//\t\t  rule: 'required',\r\n\t\t//\t\t  params: true\r\n\t\t//\t  });\r\n\t\t//\r\n\t\taddRule: function (observable, rule) {\r\n\t\t\tobservable.extend({ validatable: true });\r\n\r\n\t\t\tvar hasRule = !!koUtils.arrayFirst(observable.rules(), function(item) {\r\n\t\t\t\treturn item.rule && item.rule === rule.rule;\r\n\t\t\t});\r\n\r\n\t\t\tif (!hasRule) {\r\n\t\t\t\t//push a Rule Context to the observables local array of Rule Contexts\r\n\t\t\t\tobservable.rules.push(rule);\r\n\t\t\t}\r\n\t\t\treturn observable;\r\n\t\t},\r\n\r\n\t\t// addAnonymousRule:\r\n\t\t// Anonymous Rules essentially have all the properties of a Rule, but are only specific for a certain property\r\n\t\t// and developers typically are wanting to add them on the fly or not register a rule with the 'kv.rules' object\r\n\t\t//\r\n\t\t// Example:\r\n\t\t// var test = ko.observable('something').extend{(\r\n\t\t//\t  validation: {\r\n\t\t//\t\t  validator: function(val, someOtherVal){\r\n\t\t//\t\t\t  return true;\r\n\t\t//\t\t  },\r\n\t\t//\t\t  message: \"Something must be really wrong!',\r\n\t\t//\t\t  params: true\r\n\t\t//\t  }\r\n\t\t//  )};\r\n\t\taddAnonymousRule: function (observable, ruleObj) {\r\n\t\t\tif (ruleObj['message'] === undefined) {\r\n\t\t\t\truleObj['message'] = 'Error';\r\n\t\t\t}\r\n\r\n\t\t\t//make sure onlyIf is honoured\r\n\t\t\tif (ruleObj.onlyIf) {\r\n\t\t\t\truleObj.condition = ruleObj.onlyIf;\r\n\t\t\t}\r\n\r\n\t\t\t//add the anonymous rule to the observable\r\n\t\t\tkv.addRule(observable, ruleObj);\r\n\t\t},\r\n\r\n\t\taddExtender: function (ruleName) {\r\n\t\t\tko.extenders[ruleName] = function (observable, params) {\r\n\t\t\t\t//params can come in a few flavors\r\n\t\t\t\t// 1. Just the params to be passed to the validator\r\n\t\t\t\t// 2. An object containing the Message to be used and the Params to pass to the validator\r\n\t\t\t\t// 3. A condition when the validation rule to be applied\r\n\t\t\t\t//\r\n\t\t\t\t// Example:\r\n\t\t\t\t// var test = ko.observable(3).extend({\r\n\t\t\t\t//\t  max: {\r\n\t\t\t\t//\t\t  message: 'This special field has a Max of {0}',\r\n\t\t\t\t//\t\t  params: 2,\r\n\t\t\t\t//\t\t  onlyIf: function() {\r\n\t\t\t\t//\t\t\treturn specialField.IsVisible();\r\n\t\t\t\t//\t\t  }\r\n\t\t\t\t//\t  }\r\n\t\t\t\t//  )};\r\n\t\t\t\t//\r\n\t\t\t\tif (params && (params.message || params.onlyIf)) { //if it has a message or condition object, then its an object literal to use\r\n\t\t\t\t\treturn kv.addRule(observable, {\r\n\t\t\t\t\t\trule: ruleName,\r\n\t\t\t\t\t\tmessage: params.message,\r\n\t\t\t\t\t\tparams: utils.isEmptyVal(params.params) ? true : params.params,\r\n\t\t\t\t\t\tcondition: params.onlyIf\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn kv.addRule(observable, {\r\n\t\t\t\t\t\trule: ruleName,\r\n\t\t\t\t\t\tparams: params\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t// loops through all kv.rules and adds them as extenders to\r\n\t\t// ko.extenders\r\n\t\tregisterExtenders: function () { // root extenders optional, use 'validation' extender if would cause conflicts\r\n\t\t\tif (configuration.registerExtenders) {\r\n\t\t\t\tfor (var ruleName in kv.rules) {\r\n\t\t\t\t\tif (kv.rules.hasOwnProperty(ruleName)) {\r\n\t\t\t\t\t\tif (!ko.extenders[ruleName]) {\r\n\t\t\t\t\t\t\tkv.addExtender(ruleName);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//creates a span next to the @element with the specified error class\r\n\t\tinsertValidationMessage: function (element) {\r\n\t\t\tvar span = document.createElement('SPAN');\r\n\t\t\tspan.className = utils.getConfigOptions(element).errorMessageClass;\r\n\t\t\tutils.insertAfter(element, span);\r\n\t\t\treturn span;\r\n\t\t},\r\n\r\n\t\t// if html-5 validation attributes have been specified, this parses\r\n\t\t// the attributes on @element\r\n\t\tparseInputValidationAttributes: function (element, valueAccessor) {\r\n\t\t\tforEach(kv.configuration.html5Attributes, function (attr) {\r\n\t\t\t\tif (utils.hasAttribute(element, attr)) {\r\n\r\n\t\t\t\t\tvar params = element.getAttribute(attr) || true;\r\n\r\n\t\t\t\t\tif (attr === 'min' || attr === 'max')\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// If we're validating based on the min and max attributes, we'll\r\n\t\t\t\t\t\t// need to know what the 'type' attribute is set to\r\n\t\t\t\t\t\tvar typeAttr = element.getAttribute('type');\r\n\t\t\t\t\t\tif (typeof typeAttr === \"undefined\" || !typeAttr)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t// From http://www.w3.org/TR/html-markup/input:\r\n\t\t\t\t\t\t\t//   An input element with no type attribute specified represents the\r\n\t\t\t\t\t\t\t//   same thing as an input element with its type attribute set to \"text\".\r\n\t\t\t\t\t\t\ttypeAttr = \"text\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparams = {typeAttr: typeAttr, value: params};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tkv.addRule(valueAccessor(), {\r\n\t\t\t\t\t\trule: attr,\r\n\t\t\t\t\t\tparams: params\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar currentType = element.getAttribute('type');\r\n\t\t\tforEach(kv.configuration.html5InputTypes, function (type) {\r\n\t\t\t\tif (type === currentType) {\r\n\t\t\t\t\tkv.addRule(valueAccessor(), {\r\n\t\t\t\t\t\trule: (type === 'date') ? 'dateISO' : type,\r\n\t\t\t\t\t\tparams: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// writes html5 validation attributes on the element passed in\r\n\t\twriteInputValidationAttributes: function (element, valueAccessor) {\r\n\t\t\tvar observable = valueAccessor();\r\n\r\n\t\t\tif (!observable || !observable.rules) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar contexts = observable.rules(); // observable array\r\n\r\n\t\t\t// loop through the attributes and add the information needed\r\n\t\t\tforEach(kv.configuration.html5Attributes, function (attr) {\r\n\t\t\t\tvar ctx = koUtils.arrayFirst(contexts, function (ctx) {\r\n\t\t\t\t\treturn ctx.rule && ctx.rule.toLowerCase() === attr.toLowerCase();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (!ctx) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// we have a rule matching a validation attribute at this point\r\n\t\t\t\t// so lets add it to the element along with the params\r\n\t\t\t\tko.computed({\r\n\t\t\t\t\tread: function() {\r\n\t\t\t\t\t\tvar params = ko.unwrap(ctx.params);\r\n\r\n\t\t\t\t\t\t// we have to do some special things for the pattern validation\r\n\t\t\t\t\t\tif (ctx.rule === \"pattern\" && params instanceof RegExp) {\r\n\t\t\t\t\t\t\t// we need the pure string representation of the RegExpr without the //gi stuff\r\n\t\t\t\t\t\t\tparams = params.source;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\telement.setAttribute(attr, params);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdisposeWhenNodeIsRemoved: element\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tcontexts = null;\r\n\t\t},\r\n\r\n\t\t//take an existing binding handler and make it cause automatic validations\r\n\t\tmakeBindingHandlerValidatable: function (handlerName) {\r\n\t\t\tvar init = ko.bindingHandlers[handlerName].init;\r\n\r\n\t\t\tko.bindingHandlers[handlerName].init = function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n\r\n\t\t\t\tinit(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext);\r\n\r\n\t\t\t\treturn ko.bindingHandlers['validationCore'].init(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext);\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t// visit an objects properties and apply validation rules from a definition\r\n\t\tsetRules: function (target, definition) {\r\n\t\t\tvar setRules = function (target, definition) {\r\n\t\t\t\tif (!target || !definition) { return; }\r\n\r\n\t\t\t\tfor (var prop in definition) {\r\n\t\t\t\t\tif (!definition.hasOwnProperty(prop)) { continue; }\r\n\t\t\t\t\tvar ruleDefinitions = definition[prop];\r\n\r\n\t\t\t\t\t//check the target property exists and has a value\r\n\t\t\t\t\tif (!target[prop]) { continue; }\r\n\t\t\t\t\tvar targetValue = target[prop],\r\n\t\t\t\t\t\tunwrappedTargetValue = unwrap(targetValue),\r\n\t\t\t\t\t\trules = {},\r\n\t\t\t\t\t\tnonRules = {};\r\n\r\n\t\t\t\t\tfor (var rule in ruleDefinitions) {\r\n\t\t\t\t\t\tif (!ruleDefinitions.hasOwnProperty(rule)) { continue; }\r\n\t\t\t\t\t\tif (kv.rules[rule]) {\r\n\t\t\t\t\t\t\trules[rule] = ruleDefinitions[rule];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnonRules[rule] = ruleDefinitions[rule];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//apply rules\r\n\t\t\t\t\tif (ko.isObservable(targetValue)) {\r\n\t\t\t\t\t\ttargetValue.extend(rules);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//then apply child rules\r\n\t\t\t\t\t//if it's an array, apply rules to all children\r\n\t\t\t\t\tif (unwrappedTargetValue && utils.isArray(unwrappedTargetValue)) {\r\n\t\t\t\t\t\tfor (var i = 0; i < unwrappedTargetValue.length; i++) {\r\n\t\t\t\t\t\t\tsetRules(unwrappedTargetValue[i], nonRules);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//otherwise, just apply to this property\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetRules(unwrappedTargetValue, nonRules);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tsetRules(target, definition);\r\n\t\t}\r\n\t};\r\n\r\n}());\r\n\r\n// expose api publicly\r\nextend(ko.validation, api);\r\n;//Validation Rules:\r\n// You can view and override messages or rules via:\r\n// kv.rules[ruleName]\r\n//\r\n// To implement a custom Rule, simply use this template:\r\n// kv.rules['<custom rule name>'] = {\r\n//      validator: function (val, param) {\r\n//          <custom logic>\r\n//          return <true or false>;\r\n//      },\r\n//      message: '<custom validation message>' //optionally you can also use a '{0}' to denote a placeholder that will be replaced with your 'param'\r\n// };\r\n//\r\n// Example:\r\n// kv.rules['mustEqual'] = {\r\n//      validator: function( val, mustEqualVal ){\r\n//          return val === mustEqualVal;\r\n//      },\r\n//      message: 'This field must equal {0}'\r\n// };\r\n//\r\nkv.rules = {};\r\nkv.rules['required'] = {\r\n\tvalidator: function (val, required) {\r\n\t\tvar testVal;\r\n\r\n\t\tif (val === undefined || val === null) {\r\n\t\t\treturn !required;\r\n\t\t}\r\n\r\n\t\ttestVal = val;\r\n\t\tif (typeof (val) === 'string') {\r\n\t\t\tif (String.prototype.trim) {\r\n\t\t\t\ttestVal = val.trim();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttestVal = val.replace(/^\\s+|\\s+$/g, '');\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!required) {// if they passed: { required: false }, then don't require this\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn ((testVal + '').length > 0);\r\n\t},\r\n\tmessage: 'This field is required.'\r\n};\r\n\r\nfunction minMaxValidatorFactory(validatorName) {\r\n\tvar isMaxValidation = validatorName === \"max\";\r\n\r\n\treturn function (val, options) {\r\n\t\tif (kv.utils.isEmptyVal(val)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar comparisonValue, type;\r\n\t\tif (options.typeAttr === undefined) {\r\n\t\t\t// This validator is being called from javascript rather than\r\n\t\t\t// being bound from markup\r\n\t\t\ttype = \"text\";\r\n\t\t\tcomparisonValue = options;\r\n\t\t} else {\r\n\t\t\ttype = options.typeAttr;\r\n\t\t\tcomparisonValue = options.value;\r\n\t\t}\r\n\r\n\t\t// From http://www.w3.org/TR/2012/WD-html5-20121025/common-input-element-attributes.html#attr-input-min,\r\n\t\t// if the value is parseable to a number, then the minimum should be numeric\r\n\t\tif (!isNaN(comparisonValue) && !(comparisonValue instanceof Date)) {\r\n\t\t\ttype = \"number\";\r\n\t\t}\r\n\r\n\t\tvar regex, valMatches, comparisonValueMatches;\r\n\t\tswitch (type.toLowerCase()) {\r\n\t\t\tcase \"week\":\r\n\t\t\t\tregex = /^(\\d{4})-W(\\d{2})$/;\r\n\t\t\t\tvalMatches = val.match(regex);\r\n\t\t\t\tif (valMatches === null) {\r\n\t\t\t\t\tthrow new Error(\"Invalid value for \" + validatorName + \" attribute for week input.  Should look like \" +\r\n\t\t\t\t\t\t\"'2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min\");\r\n\t\t\t\t}\r\n\t\t\t\tcomparisonValueMatches = comparisonValue.match(regex);\r\n\t\t\t\t// If no regex matches were found, validation fails\r\n\t\t\t\tif (!comparisonValueMatches) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isMaxValidation) {\r\n\t\t\t\t\treturn (valMatches[1] < comparisonValueMatches[1]) || // older year\r\n\t\t\t\t\t\t// same year, older week\r\n\t\t\t\t\t\t((valMatches[1] === comparisonValueMatches[1]) && (valMatches[2] <= comparisonValueMatches[2]));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (valMatches[1] > comparisonValueMatches[1]) || // newer year\r\n\t\t\t\t\t\t// same year, newer week\r\n\t\t\t\t\t\t((valMatches[1] === comparisonValueMatches[1]) && (valMatches[2] >= comparisonValueMatches[2]));\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"month\":\r\n\t\t\t\tregex = /^(\\d{4})-(\\d{2})$/;\r\n\t\t\t\tvalMatches = val.match(regex);\r\n\t\t\t\tif (valMatches === null) {\r\n\t\t\t\t\tthrow new Error(\"Invalid value for \" + validatorName + \" attribute for month input.  Should look like \" +\r\n\t\t\t\t\t\t\"'2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min\");\r\n\t\t\t\t}\r\n\t\t\t\tcomparisonValueMatches = comparisonValue.match(regex);\r\n\t\t\t\t// If no regex matches were found, validation fails\r\n\t\t\t\tif (!comparisonValueMatches) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isMaxValidation) {\r\n\t\t\t\t\treturn ((valMatches[1] < comparisonValueMatches[1]) || // older year\r\n\t\t\t\t\t\t// same year, older month\r\n\t\t\t\t\t\t((valMatches[1] === comparisonValueMatches[1]) && (valMatches[2] <= comparisonValueMatches[2])));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (valMatches[1] > comparisonValueMatches[1]) || // newer year\r\n\t\t\t\t\t\t// same year, newer month\r\n\t\t\t\t\t\t((valMatches[1] === comparisonValueMatches[1]) && (valMatches[2] >= comparisonValueMatches[2]));\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"number\":\r\n\t\t\tcase \"range\":\r\n\t\t\t\tif (isMaxValidation) {\r\n\t\t\t\t\treturn (!isNaN(val) && parseFloat(val) < parseFloat(comparisonValue));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn (!isNaN(val) && parseFloat(val) > parseFloat(comparisonValue));\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tif (isMaxValidation) {\r\n\t\t\t\t\treturn val < comparisonValue;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn val > comparisonValue;\r\n\t\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nkv.rules['min'] = {\r\n\tvalidator: minMaxValidatorFactory(\"min\"),\r\n\tmessage: 'Please enter a value greater than or equal to {0}.'\r\n};\r\n\r\nkv.rules['max'] = {\r\n\tvalidator: minMaxValidatorFactory(\"max\"),\r\n\tmessage: 'Please enter a value less than or equal to {0}.'\r\n};\r\n\r\nkv.rules['minLength'] = {\r\n\tvalidator: function (val, minLength) {\r\n\t\tif(kv.utils.isEmptyVal(val)) { return true; }\r\n\t\tvar normalizedVal = kv.utils.isNumber(val) ? ('' + val) : val;\r\n\t\treturn normalizedVal.length >= minLength;\r\n\t},\r\n\tmessage: 'Please enter at least {0} characters.'\r\n};\r\n\r\nkv.rules['maxLength'] = {\r\n\tvalidator: function (val, maxLength) {\r\n\t\tif(kv.utils.isEmptyVal(val)) { return true; }\r\n\t\tvar normalizedVal = kv.utils.isNumber(val) ? ('' + val) : val;\r\n\t\treturn normalizedVal.length <= maxLength;\r\n\t},\r\n\tmessage: 'Please enter no more than {0} characters.'\r\n};\r\n\r\nkv.rules['pattern'] = {\r\n\tvalidator: function (val, regex) {\r\n\t\treturn kv.utils.isEmptyVal(val) || val.toString().match(regex) !== null;\r\n\t},\r\n\tmessage: 'Please check this value.'\r\n};\r\n\r\nkv.rules['step'] = {\r\n\tvalidator: function (val, step) {\r\n\r\n\t\t// in order to handle steps of .1 & .01 etc.. Modulus won't work\r\n\t\t// if the value is a decimal, so we have to correct for that\r\n\t\tif (kv.utils.isEmptyVal(val) || step === 'any') { return true; }\r\n\t\tvar dif = (val * 100) % (step * 100);\r\n\t\treturn Math.abs(dif) < 0.00001 || Math.abs(1 - dif) < 0.00001;\r\n\t},\r\n\tmessage: 'The value must increment by {0}.'\r\n};\r\n\r\nkv.rules['email'] = {\r\n\tvalidator: function (val, validate) {\r\n\t\tif (!validate) { return true; }\r\n\r\n\t\t//I think an empty email address is also a valid entry\r\n\t\t//if one want's to enforce entry it should be done with 'required: true'\r\n\t\treturn kv.utils.isEmptyVal(val) || (\r\n\t\t\t// jquery validate regex - thanks Scott Gonzalez\r\n\t\t\tvalidate && /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i.test(val)\r\n\t\t);\r\n\t},\r\n\tmessage: 'Please enter a proper email address.'\r\n};\r\n\r\nkv.rules['date'] = {\r\n\tvalidator: function (value, validate) {\r\n\t\tif (!validate) { return true; }\r\n\t\treturn kv.utils.isEmptyVal(value) || (validate && !/Invalid|NaN/.test(new Date(value)));\r\n\t},\r\n\tmessage: 'Please enter a proper date.'\r\n};\r\n\r\nkv.rules['dateISO'] = {\r\n\tvalidator: function (value, validate) {\r\n\t\tif (!validate) { return true; }\r\n\t\treturn kv.utils.isEmptyVal(value) || (validate && /^\\d{4}[-/](?:0?[1-9]|1[012])[-/](?:0?[1-9]|[12][0-9]|3[01])$/.test(value));\r\n\t},\r\n\tmessage: 'Please enter a proper date.'\r\n};\r\n\r\nkv.rules['number'] = {\r\n\tvalidator: function (value, validate) {\r\n\t\tif (!validate) { return true; }\r\n\t\treturn kv.utils.isEmptyVal(value) || (validate && /^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test(value));\r\n\t},\r\n\tmessage: 'Please enter a number.'\r\n};\r\n\r\nkv.rules['digit'] = {\r\n\tvalidator: function (value, validate) {\r\n\t\tif (!validate) { return true; }\r\n\t\treturn kv.utils.isEmptyVal(value) || (validate && /^\\d+$/.test(value));\r\n\t},\r\n\tmessage: 'Please enter a digit.'\r\n};\r\n\r\nkv.rules['phoneUS'] = {\r\n\tvalidator: function (phoneNumber, validate) {\r\n\t\tif (!validate) { return true; }\r\n\t\tif (kv.utils.isEmptyVal(phoneNumber)) { return true; } // makes it optional, use 'required' rule if it should be required\r\n\t\tif (typeof (phoneNumber) !== 'string') { return false; }\r\n\t\tphoneNumber = phoneNumber.replace(/\\s+/g, \"\");\r\n\t\treturn validate && phoneNumber.length > 9 && phoneNumber.match(/^(1-?)?(\\([2-9]\\d{2}\\)|[2-9]\\d{2})-?[2-9]\\d{2}-?\\d{4}$/);\r\n\t},\r\n\tmessage: 'Please specify a valid phone number.'\r\n};\r\n\r\nkv.rules['equal'] = {\r\n\tvalidator: function (val, params) {\r\n\t\tvar otherValue = params;\r\n\t\treturn val === kv.utils.getValue(otherValue);\r\n\t},\r\n\tmessage: 'Values must equal.'\r\n};\r\n\r\nkv.rules['notEqual'] = {\r\n\tvalidator: function (val, params) {\r\n\t\tvar otherValue = params;\r\n\t\treturn val !== kv.utils.getValue(otherValue);\r\n\t},\r\n\tmessage: 'Please choose another value.'\r\n};\r\n\r\n//unique in collection\r\n// options are:\r\n//    collection: array or function returning (observable) array\r\n//              in which the value has to be unique\r\n//    valueAccessor: function that returns value from an object stored in collection\r\n//              if it is null the value is compared directly\r\n//    external: set to true when object you are validating is automatically updating collection\r\nkv.rules['unique'] = {\r\n\tvalidator: function (val, options) {\r\n\t\tvar c = kv.utils.getValue(options.collection),\r\n\t\t\texternal = kv.utils.getValue(options.externalValue),\r\n\t\t\tcounter = 0;\r\n\r\n\t\tif (!val || !c) { return true; }\r\n\r\n\t\tkoUtils.arrayFilter(c, function (item) {\r\n\t\t\tif (val === (options.valueAccessor ? options.valueAccessor(item) : item)) { counter++; }\r\n\t\t});\r\n\t\t// if value is external even 1 same value in collection means the value is not unique\r\n\t\treturn counter < (!!external ? 1 : 2);\r\n\t},\r\n\tmessage: 'Please make sure the value is unique.'\r\n};\r\n\r\n//custom rules:\r\n\r\nkv.rules['rate'] = {\r\n    validator: function (value, validate) {\r\n        if (!validate) { return true; }\r\n        return kv.utils.isEmptyVal(value) || (validate && /^\\d*\\,?\\d*\\.?\\d*$/.test(value));\r\n    },\r\n    message: 'Invalid Rate'\r\n};\r\n\r\nkv.rules['amount'] = {\r\n    validator: function (value, validate) {\r\n        if (!validate) { return true; }\r\n        return kv.utils.isEmptyVal(value) || (validate && /^\\d*\\,?\\d*\\.?\\d*$/.test(value));\r\n    },\r\n    message: 'Invalid Amount'\r\n};\r\n\r\n\r\n   \r\n//********************************************\r\n//1. Number(str): Convert str to a number; the number may well have a fractional portion, or may be NaN.\r\n//2. Math.floor: Truncate the number (chops off any fractional portion).\r\n//3. String(...): Converts the result back into a normal decimal string.\r\n//4. ... === str: Compares that to the original string.\r\n//5. n > 0: Check that it's positive.    \r\n//********************************************\r\nkv.rules['positiveInteger'] = {\r\n    validator: function (value, validate) {\r\n         if (!validate) { return true; }\r\n        var n = Math.floor(Number(value));\r\n        return kv.utils.isEmptyVal(value) || (n == value && n > 0);\r\n    },\r\n    message: 'Invalid positiveInteger'\r\n};\r\n\r\nkv.rules['range'] = {\r\n    validator: function (value, range) {\r\n         if (!range) { return true; }\r\n        var isB;\r\n        if (range.isBetween == undefined)\r\n            isB = true;\r\n        else\r\n            isB = range.isBetween;\r\n        if (isB)\r\n            return (kv.utils.isEmptyVal(value) || (value > range.min && value < range.max));\r\n        else\r\n            return (kv.utils.isEmptyVal(value) || (value > range.min || value < range.max));\r\n    },\r\n    message: 'Invalid Range'\r\n};\r\n\r\nkv.rules['rangeInterval'] = {\r\n    validator: function (value, rangeinterval) {\r\n        if (!rangeinterval) { return true; }\r\n        \r\n         \r\n\r\n        var numericValue = typeof (value) === 'string' && value !== \"\"\r\n       ? Globalize.parseFloat(value)\r\n       : value;\r\n\r\n        var r1 = (numericValue > rangeinterval.minfar && numericValue < rangeinterval.minnear);\r\n        var r2 = (numericValue > rangeinterval.maxnear && numericValue < rangeinterval.maxfar);\r\n        var res = kv.utils.isEmptyVal(numericValue) || r1 || r2;\r\n        //window.console.log(\"value: \" + value + \"[ \" + rangeinterval.minfar + \" .. \" + rangeinterval.minnear + \" ] [\" + rangeinterval.maxnear + \"..\" + rangeinterval.maxfar + \" ] :\" + res);\r\n        return res;\r\n\r\n    },\r\n    message: 'Invalid rangeinterval'\r\n    // invalid IF value is outer interval:  [minfar...  minnear] [maxnear.. maxfar] \r\n    // ex: 1.1,1.25,1.6 are INVALID \r\n    // ex: 1.1,1.4 are VALID\r\n    // in the following range [1.0 .. 1.2] [1.3 .. 1.5]\r\n};\r\n\r\nkv.rules['in'] = {\r\n\tvalidator: function (val, params) {\r\n\t\tvar possibleValues = params;\r\n\t\treturn possibleValues.contains(val);\r\n\t},\r\n\tmessage: \"\"\r\n};\r\n\r\nkv.rules['asyncValidator'] = {\r\n\tasync: true,\r\n\tvalidator: function (val, func, callback) {\r\n\t\tfunc(val, function (data) {\r\n\t\t\tvar response = JSONHelper.STR2JSON(func.name, data);\r\n\t\t\tcallback(Boolean.parse(response));\r\n\t\t}, function () {\r\n\t\t\tcallback(false);\r\n\t\t});\r\n\r\n\t},\r\n\tmessage: \"\"\r\n};\r\n\r\nkv.rules['phoneNumber'] = {\r\n\tvalidator: function (phoneNumber, validate) {\r\n\t\tif (!validate) return true;\r\n\t\tif (typeof (phoneNumber) !== 'string') { return false; }\r\n\t\tif ((phoneNumber === \"\")) { return true; } // makes it optional, use 'required' rule if it should be required\r\n\t\t\r\n\t\treturn validate && phoneNumber.match(/^(?=(?:\\D*\\d){5,})(\\(?\\+?\\d{1,3}\\)?\\s*[-–]?\\s*)+\\d*$/);\r\n\t},\r\n\tmessage: 'Please specify a valid phone number'\r\n};\r\n\r\nkv.rules['minAge18'] = {\r\n\tvalidator: function (val, validate) {\r\n\t\tif (validate && (val.indexOf(\"undefined\") !== -1 || val.indexOf(\"...\") !== -1)) { return false; }\r\n\r\n\t\tvar formDateValues = val.split('/'),\r\n\t\t\tday = parseInt(formDateValues[0]),\r\n\t\t\tmonth = parseInt(formDateValues[1]),\r\n\t\t\tyear = parseInt(formDateValues[2]),\r\n\t\t\tcurrdate = new Date(),\r\n\t\t\tage = 18,\r\n\t\t\tformDate = (year + '-' + month + '-' + day).toString();\r\n\r\n\r\n\t\ttry {\r\n\t\t\tvar myDate = $.datepicker.parseDate(\"yy-mm-dd\", formDate);\r\n\t\t\tmonth = month - 1;\r\n\t\t\tmyDate.setFullYear(year, month, day);\r\n\t\t\tcurrdate.setFullYear(currdate.getFullYear() - age);\r\n\t\t\tif ((currdate - myDate) < 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\r\n\t\t} catch (e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t},\r\n\tmessage: 'You must be at least {0} years of age.'\r\n};\r\n\r\n\r\n//now register all of these!\r\n(function () {\r\n\tkv.registerExtenders();\r\n}());\r\n;// The core binding handler\r\n// this allows us to setup any value binding that internally always\r\n// performs the same functionality\r\nko.bindingHandlers['validationCore'] = (function () {\r\n\r\n\treturn {\r\n\t\tinit: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n\t\t\tvar config = kv.utils.getConfigOptions(element);\r\n\t\t\tvar observable = valueAccessor();\r\n\r\n\t\t\t// parse html5 input validation attributes, optional feature\r\n\t\t\tif (config.parseInputAttributes) {\r\n\t\t\t\tkv.utils.async(function () { kv.parseInputValidationAttributes(element, valueAccessor); });\r\n\t\t\t}\r\n\r\n\t\t\t// if requested insert message element and apply bindings\r\n\t\t\tif (config.insertMessages && kv.utils.isValidatable(observable)) {\r\n\r\n\t\t\t\t// insert the <span></span>\r\n\t\t\t\tvar validationMessageElement = kv.insertValidationMessage(element);\r\n\r\n\t\t\t\t// if we're told to use a template, make sure that gets rendered\r\n\t\t\t\tif (config.messageTemplate) {\r\n\t\t\t\t\tko.renderTemplate(config.messageTemplate, { field: observable }, null, validationMessageElement, 'replaceNode');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tko.applyBindingsToNode(validationMessageElement, { validationMessage: observable });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// write the html5 attributes if indicated by the config\r\n\t\t\tif (config.writeInputAttributes && kv.utils.isValidatable(observable)) {\r\n\r\n\t\t\t\tkv.writeInputValidationAttributes(element, valueAccessor);\r\n\t\t\t}\r\n\r\n\t\t\t// if requested, add binding to decorate element\r\n\t\t\tif (config.decorateInputElement && kv.utils.isValidatable(observable)) {\r\n\t\t\t\tko.applyBindingsToNode(element, { validationElement: observable });\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n}());\r\n\r\n// override for KO's default 'value', 'checked', 'textInput' and selectedOptions bindings\r\nkv.makeBindingHandlerValidatable(\"value\");\r\nkv.makeBindingHandlerValidatable(\"checked\");\r\nif (ko.bindingHandlers.textInput) {\r\n\tkv.makeBindingHandlerValidatable(\"textInput\");\r\n}\r\nkv.makeBindingHandlerValidatable(\"selectedOptions\");\r\n\r\n\r\nko.bindingHandlers['validationMessage'] = { // individual error message, if modified or post binding\r\n\tupdate: function (element, valueAccessor) {\r\n\t\tvar obsv = valueAccessor(),\r\n\t\t\tconfig = kv.utils.getConfigOptions(element),\r\n\t\t\tval = unwrap(obsv),\r\n\t\t\tmsg = null,\r\n\t\t\tisModified = false,\r\n\t\t\tisValid = false;\r\n\r\n\t\tif (obsv === null || typeof obsv === 'undefined') {\r\n\t\t\tthrow new Error('Cannot bind validationMessage to undefined value. data-bind expression: ' +\r\n\t\t\t\telement.getAttribute('data-bind'));\r\n\t\t}\r\n\r\n\t\tisModified = obsv.isModified && obsv.isModified();\r\n\t\tisValid = obsv.isValid && obsv.isValid();\r\n\r\n\t\tvar error = null;\r\n\t\tif (!config.messagesOnModified || isModified) {\r\n\t\t\terror = isValid ? null : obsv.error;\r\n\t\t}\r\n\r\n\t\tvar isVisible = !config.messagesOnModified || isModified ? !isValid : false;\r\n\t\tvar isCurrentlyVisible = element.style.display !== \"none\";\r\n\r\n\t\tif (config.allowHtmlMessages) {\r\n\t\t\tkoUtils.setHtml(element, error);\r\n\t\t} else {\r\n\t\t\tko.bindingHandlers.text.update(element, function () { return error; });\r\n\t\t}\r\n\r\n\t\tif (isCurrentlyVisible && !isVisible) {\r\n\t\t\telement.style.display = 'none';\r\n\t\t} else if (!isCurrentlyVisible && isVisible) {\r\n\t\t\telement.style.display = '';\r\n\t\t}\r\n\t}\r\n};\r\n\r\nko.bindingHandlers['validationElement'] = {\r\n\tupdate: function (element, valueAccessor, allBindingsAccessor) {\r\n\t\tvar obsv = valueAccessor(),\r\n\t\t\tconfig = kv.utils.getConfigOptions(element),\r\n\t\t\tval = unwrap(obsv),\r\n\t\t\tmsg = null,\r\n\t\t\tisModified = false,\r\n\t\t\tisValid = false;\r\n\r\n\t\tif (obsv === null || typeof obsv === 'undefined') {\r\n\t\t\tthrow new Error('Cannot bind validationElement to undefined value. data-bind expression: ' +\r\n\t\t\t\telement.getAttribute('data-bind'));\r\n\t\t}\r\n\r\n\t\tisModified = obsv.isModified && obsv.isModified();\r\n\t\tisValid = obsv.isValid && obsv.isValid();\r\n\r\n\t\t// create an evaluator function that will return something like:\r\n\t\t// css: { validationElement: true }\r\n\t\tvar cssSettingsAccessor = function () {\r\n\t\t\tvar css = {};\r\n\r\n\t\t\tvar shouldShow = ((!config.decorateElementOnModified || isModified) ? !isValid : false);\r\n\r\n\t\t\t// css: { validationElement: false }\r\n\t\t\tcss[config.errorElementClass] = shouldShow;\r\n\r\n\t\t\treturn css;\r\n\t\t};\r\n\r\n\t\t//add or remove class on the element;\r\n\t\tko.bindingHandlers.css.update(element, cssSettingsAccessor, allBindingsAccessor);\r\n\t\tif (!config.errorsAsTitle) { return; }\r\n\r\n\t\tko.bindingHandlers.attr.update(element, function () {\r\n\t\t\tvar\r\n\t\t\t\thasModification = !config.errorsAsTitleOnModified || isModified,\r\n\t\t\t\ttitle = kv.utils.getOriginalElementTitle(element);\r\n\r\n\t\t\tif (hasModification && !isValid) {\r\n\t\t\t\treturn { title: obsv.error, 'data-orig-title': title };\r\n\t\t\t} else if (!hasModification || isValid) {\r\n\t\t\t\treturn { title: title, 'data-orig-title': null };\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n\r\n// ValidationOptions:\r\n// This binding handler allows you to override the initial config by setting any of the options for a specific element or context of elements\r\n//\r\n// Example:\r\n// <div data-bind=\"validationOptions: { insertMessages: true, messageTemplate: 'customTemplate', errorMessageClass: 'mySpecialClass'}\">\r\n//      <input type=\"text\" data-bind=\"value: someValue\"/>\r\n//      <input type=\"text\" data-bind=\"value: someValue2\"/>\r\n// </div>\r\nko.bindingHandlers['validationOptions'] = (function () {\r\n\treturn {\r\n\t\tinit: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n\t\t\tvar options = unwrap(valueAccessor());\r\n\t\t\tif (options) {\r\n\t\t\t\tvar newConfig = extend({}, kv.configuration);\r\n\t\t\t\textend(newConfig, options);\r\n\r\n\t\t\t\t//store the validation options on the node so we can retrieve it later\r\n\t\t\t\tkv.utils.setDomData(element, newConfig);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}());\r\n;// Validation Extender:\r\n// This is for creating custom validation logic on the fly\r\n// Example:\r\n// var test = ko.observable('something').extend{(\r\n//      validation: {\r\n//          validator: function(val, someOtherVal){\r\n//              return true;\r\n//          },\r\n//          message: \"Something must be really wrong!',\r\n//          params: true\r\n//      }\r\n//  )};\r\nko.extenders['validation'] = function (observable, rules) { // allow single rule or array\r\n\tforEach(kv.utils.isArray(rules) ? rules : [rules], function (rule) {\r\n\t\t// the 'rule' being passed in here has no name to identify a core Rule,\r\n\t\t// so we add it as an anonymous rule\r\n\t\t// If the developer is wanting to use a core Rule, but use a different message see the 'addExtender' logic for examples\r\n\t\tkv.addAnonymousRule(observable, rule);\r\n\t});\r\n\treturn observable;\r\n};\r\n\r\n//This is the extender that makes a Knockout Observable also 'Validatable'\r\n//examples include:\r\n// 1. var test = ko.observable('something').extend({validatable: true});\r\n// this will ensure that the Observable object is setup properly to respond to rules\r\n//\r\n// 2. test.extend({validatable: false});\r\n// this will remove the validation properties from the Observable object should you need to do that.\r\nko.extenders['validatable'] = function (observable, options) {\r\n\tif (!kv.utils.isObject(options)) {\r\n\t\toptions = { enable: options };\r\n\t}\r\n\r\n\tif (!('enable' in options)) {\r\n\t\toptions.enable = true;\r\n\t}\r\n\r\n\tif (options.enable && !kv.utils.isValidatable(observable)) {\r\n\t\tvar config = kv.configuration.validate || {};\r\n\t\tvar validationOptions = {\r\n\t\t\tthrottleEvaluation : options.throttle || config.throttle\r\n\t\t};\r\n\r\n\t\tobservable.error = ko.observable(null); // holds the error message, we only need one since we stop processing validators when one is invalid\r\n\r\n\t\t// observable.rules:\r\n\t\t// ObservableArray of Rule Contexts, where a Rule Context is simply the name of a rule and the params to supply to it\r\n\t\t//\r\n\t\t// Rule Context = { rule: '<rule name>', params: '<passed in params>', message: '<Override of default Message>' }\r\n\t\tobservable.rules = ko.observableArray(); //holds the rule Contexts to use as part of validation\r\n\r\n\t\t//in case async validation is occurring\r\n\t\tobservable.isValidating = ko.observable(false);\r\n\r\n\t\t//the true holder of whether the observable is valid or not\r\n\t\tobservable.__valid__ = ko.observable(true);\r\n\r\n\t\tobservable.isModified = ko.observable(false);\r\n\r\n\t\t// a semi-protected observable\r\n\t\tobservable.isValid = ko.computed(observable.__valid__);\r\n\r\n\t\t//manually set error state\r\n\t\tobservable.setError = function (error) {\r\n\t\t\tvar previousError = observable.error.peek();\r\n\t\t\tvar previousIsValid = observable.__valid__.peek();\r\n\r\n\t\t\tobservable.error(error);\r\n\t\t\tobservable.__valid__(false);\r\n\r\n\t\t\tif (previousError !== error && !previousIsValid) {\r\n\t\t\t\t// if the observable was not valid before then isValid will not mutate,\r\n\t\t\t\t// hence causing any grouping to not display the latest error.\r\n\t\t\t\tobservable.isValid.notifySubscribers();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t//manually clear error state\r\n\t\tobservable.clearError = function () {\r\n\t\t\tobservable.error(null);\r\n\t\t\tobservable.__valid__(true);\r\n\t\t\treturn observable;\r\n\t\t};\r\n\r\n\t\t//subscribe to changes in the observable\r\n\t\tvar h_change = observable.subscribe(function () {\r\n\t\t\tobservable.isModified(true);\r\n\t\t});\r\n\r\n\t\t// we use a computed here to ensure that anytime a dependency changes, the\r\n\t\t// validation logic evaluates\r\n\t\tvar h_obsValidationTrigger = ko.computed(extend({\r\n\t\t\tread: function () {\r\n\t\t\t\tvar obs = observable(),\r\n\t\t\t\t\truleContexts = observable.rules();\r\n\r\n\t\t\t\tkv.validateObservable(observable);\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}, validationOptions));\r\n\r\n\t\textend(h_obsValidationTrigger, validationOptions);\r\n\r\n\t\tobservable._disposeValidation = function () {\r\n\t\t\t//first dispose of the subscriptions\r\n\t\t\tobservable.isValid.dispose();\r\n\t\t\tobservable.rules.removeAll();\r\n\t\t\th_change.dispose();\r\n\t\t\th_obsValidationTrigger.dispose();\r\n\r\n\t\t\tdelete observable['rules'];\r\n\t\t\tdelete observable['error'];\r\n\t\t\tdelete observable['isValid'];\r\n\t\t\tdelete observable['isValidating'];\r\n\t\t\tdelete observable['__valid__'];\r\n\t\t\tdelete observable['isModified'];\r\n            delete observable['setError'];\r\n            delete observable['clearError'];\r\n            delete observable['_disposeValidation'];\r\n\t\t};\r\n\t} else if (options.enable === false && observable._disposeValidation) {\r\n\t\tobservable._disposeValidation();\r\n\t}\r\n\treturn observable;\r\n};\r\n\r\nfunction validateSync(observable, rule, ctx) {\r\n\t//Execute the validator and see if its valid\r\n\tif (!rule.validator(observable(), (ctx.params === undefined ? true : unwrap(ctx.params)))) { // default param is true, eg. required = true\r\n\r\n\t\t//not valid, so format the error message and stick it in the 'error' variable\r\n\t\tobservable.setError(kv.formatMessage(\r\n\t\t\t\t\tctx.message || rule.message,\r\n\t\t\t\t\tunwrap(ctx.params),\r\n\t\t\t\t\tobservable));\r\n\t\treturn false;\r\n\t} else {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nfunction validateAsync(observable, rule, ctx) {\r\n\tobservable.isValidating(true);\r\n\r\n\tvar callBack = function (valObj) {\r\n\t\tvar isValid = false,\r\n\t\t\tmsg = '';\r\n\r\n\t\tif (!observable.__valid__()) {\r\n\r\n\t\t\t// since we're returning early, make sure we turn this off\r\n\t\t\tobservable.isValidating(false);\r\n\r\n\t\t\treturn; //if its already NOT valid, don't add to that\r\n\t\t}\r\n\r\n\t\t//we were handed back a complex object\r\n\t\tif (valObj['message']) {\r\n\t\t\tisValid = valObj.isValid;\r\n\t\t\tmsg = valObj.message;\r\n\t\t} else {\r\n\t\t\tisValid = valObj;\r\n\t\t}\r\n\r\n\t\tif (!isValid) {\r\n\t\t\t//not valid, so format the error message and stick it in the 'error' variable\r\n\t\t\tobservable.error(kv.formatMessage(\r\n\t\t\t\tmsg || ctx.message || rule.message,\r\n\t\t\t\tunwrap(ctx.params),\r\n\t\t\t\tobservable));\r\n\t\t\tobservable.__valid__(isValid);\r\n\t\t}\r\n\r\n\t\t// tell it that we're done\r\n\t\tobservable.isValidating(false);\r\n\t};\r\n\r\n\tkv.utils.async(function() {\r\n\t    //fire the validator and hand it the callback\r\n        rule.validator(observable(), ctx.params === undefined ? true : unwrap(ctx.params), callBack);\r\n\t});\r\n}\r\n\r\nkv.validateObservable = function (observable) {\r\n\tvar i = 0,\r\n\t\trule, // the rule validator to execute\r\n\t\tctx, // the current Rule Context for the loop\r\n\t\truleContexts = observable.rules(), //cache for iterator\r\n\t\tlen = ruleContexts.length; //cache for iterator\r\n\r\n\tfor (; i < len; i++) {\r\n\r\n\t\t//get the Rule Context info to give to the core Rule\r\n\t\tctx = ruleContexts[i];\r\n\r\n\t\t// checks an 'onlyIf' condition\r\n\t\tif (ctx.condition && !ctx.condition()) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\t//get the core Rule to use for validation\r\n\t\trule = ctx.rule ? kv.rules[ctx.rule] : ctx;\r\n\r\n\t\tif (rule['async'] || ctx['async']) {\r\n\t\t\t//run async validation\r\n\t\t\tvalidateAsync(observable, rule, ctx);\r\n\r\n\t\t} else {\r\n\t\t\t//run normal sync validation\r\n\t\t\tif (!validateSync(observable, rule, ctx)) {\r\n\t\t\t\treturn false; //break out of the loop\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//finally if we got this far, make the observable valid again!\r\n\tobservable.clearError();\r\n\treturn true;\r\n};\r\n;\r\nvar _locales = {};\r\nvar _currentLocale;\r\n\r\nkv.defineLocale = function(name, values) {\r\n\tif (name && values) {\r\n\t\t_locales[name.toLowerCase()] = values;\r\n\t\treturn values;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nkv.locale = function(name) {\r\n\tif (name) {\r\n\t\tname = name.toLowerCase();\r\n\r\n\t\tif (_locales.hasOwnProperty(name)) {\r\n\t\t\tkv.localize(_locales[name]);\r\n\t\t\t_currentLocale = name;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthrow new Error('Localization ' + name + ' has not been loaded.');\r\n\t\t}\r\n\t}\r\n\treturn _currentLocale;\r\n};\r\n\r\n//quick function to override rule messages\r\nkv.localize = function (msgTranslations) {\r\n\tvar rules = kv.rules;\r\n\r\n\t//loop the properties in the object and assign the msg to the rule\r\n\tfor (var ruleName in msgTranslations) {\r\n\t\tif (rules.hasOwnProperty(ruleName)) {\r\n\t\t\trules[ruleName].message = msgTranslations[ruleName];\r\n\t\t}\r\n\t}\r\n};\r\n\r\n// Populate default locale (this will make en-US.js somewhat redundant)\r\n(function() {\r\n\tvar localeData = {};\r\n\tvar rules = kv.rules;\r\n\r\n\tfor (var ruleName in rules) {\r\n\t\tif (rules.hasOwnProperty(ruleName)) {\r\n\t\t\tlocaleData[ruleName] = rules[ruleName].message;\r\n\t\t}\r\n\t}\r\n\tkv.defineLocale('en-us', localeData);\r\n})();\r\n\r\n// No need to invoke locale because the messages are already defined along with the rules for en-US\r\n_currentLocale = 'en-us';\r\n;/**\r\n * Possible invocations:\r\n * \t\tapplyBindingsWithValidation(viewModel)\r\n * \t\tapplyBindingsWithValidation(viewModel, options)\r\n * \t\tapplyBindingsWithValidation(viewModel, rootNode)\r\n *\t\tapplyBindingsWithValidation(viewModel, rootNode, options)\r\n */\r\nko.applyBindingsWithValidation = function (viewModel, rootNode, options) {\r\n\tvar node = document.body,\r\n\t\tconfig;\r\n\r\n\tif (rootNode && rootNode.nodeType) {\r\n\t\tnode = rootNode;\r\n\t\tconfig = options;\r\n\t}\r\n\telse {\r\n\t\tconfig = rootNode;\r\n\t}\r\n\r\n\tkv.init();\r\n\r\n\tif (config) {\r\n\t\tconfig = extend(extend({}, kv.configuration), config);\r\n\t\tkv.utils.setDomData(node, config);\r\n\t}\r\n\r\n\tko.applyBindings(viewModel, node);\r\n};\r\n\r\n//override the original applyBindings so that we can ensure all new rules and what not are correctly registered\r\nvar origApplyBindings = ko.applyBindings;\r\nko.applyBindings = function () {\r\n\tkv.init();\r\n\torigApplyBindings.apply(this, arguments);\r\n};\r\n\r\nko.validatedObservable = function (initialValue, options) {\r\n\tif (!options && !kv.utils.isObject(initialValue)) {\r\n\t\treturn ko.observable(initialValue).extend({ validatable: true });\r\n\t}\r\n\r\n\tvar obsv = ko.observable(initialValue);\r\n\tobsv.errors = kv.group(kv.utils.isObject(initialValue) ? initialValue : {}, options);\r\n\tobsv.isValid = ko.observable(obsv.errors().length === 0);\r\n\r\n\tif (ko.isObservable(obsv.errors)) {\r\n\t\tobsv.errors.subscribe(function(errors) {\r\n\t\t\tobsv.isValid(errors.length === 0);\r\n\t\t});\r\n\t}\r\n\telse {\r\n\t\tko.computed(obsv.errors).subscribe(function (errors) {\r\n\t\t\tobsv.isValid(errors.length === 0);\r\n\t\t});\r\n\t}\r\n\r\n\tobsv.subscribe(function(newValue) {\r\n\t\tif (!kv.utils.isObject(newValue)) {\r\n\t\t\t/*\r\n\t\t\t * The validation group works on objects.\r\n\t\t\t * Since the new value is a primitive (scalar, null or undefined) we need\r\n\t\t\t * to create an empty object to pass along.\r\n\t\t\t */\r\n\t\t\tnewValue = {};\r\n\t\t}\r\n\t\t// Force the group to refresh\r\n\t\tobsv.errors._updateState(newValue);\r\n\t\tobsv.isValid(obsv.errors().length === 0);\r\n\t});\r\n\r\n\treturn obsv;\r\n};\r\n;}));\n",
    "define(\r\n    'helpers/ObservableCustomExtender',\r\n    [\r\n        'knockout',\r\n        'handlers/general',\r\n        'vendor/knockout.validation'\r\n    ],\r\n    function (ko, general) {\r\n        ko.extenders.dirty = function dirtyKoExtender(target, startDirty) {\r\n            target.cleanValue = ko.observable(ko.toJS(target)); // the cleanValue is normalized\r\n            target.originalValue = target.cleanValue;\r\n            target.dirtyOverride = ko.observable(ko.utils.unwrapObservable(startDirty));\r\n\r\n            target.isDirty = ko.computed(function isDirtyHandler() {\r\n                // get normalized observable value\r\n                var currentValue = ko.toJS(this),\r\n                    cleanValue = this.cleanValue(),\r\n                    dirtyOverride = this.dirtyOverride(),\r\n                    result;\r\n\r\n                if (typeof currentValue == 'object') {\r\n                    result = dirtyOverride || !general.equals(currentValue, cleanValue);\r\n                }\r\n                else if (isNaN(currentValue) || isNaN(cleanValue)) {\r\n                    result = dirtyOverride || currentValue !== cleanValue;\r\n                }\r\n                else {\r\n                    result = dirtyOverride || Number(currentValue) != Number(cleanValue);\r\n                }\r\n\r\n                return result;\r\n            }, target);\r\n\r\n            target.markClean = function markClean() {\r\n                this.cleanValue(ko.toJS(this));\r\n                this.dirtyOverride(false);\r\n            };\r\n\r\n            target.markDirty = function markDirty() {\r\n                this.dirtyOverride(true);\r\n            };\r\n\r\n            return target;\r\n        };\r\n\r\n        ko.extenders.toNumericLength = function toNumericLengthKoExtender(target, options) {\r\n            if (options !== false && target) {\r\n                if (target.toNumericLengthSubscriber &&\r\n                    general.isFunctionType(target.toNumericLengthSubscriber.dispose)) {\r\n                    target.toNumericLengthSubscriber.dispose();\r\n                }\r\n\r\n                target.toNumericLengthSubscriber = target.subscribe(function (value) {\r\n                    var observable = this,\r\n                        maxValue = Number.MAX_SAFE_INTEGER,\r\n                        ranges = options.ranges,\r\n                        isAllowNAValue = ko.utils.unwrapObservable(options.isAllowNAValue),\r\n                        isForceCeil = ko.utils.unwrapObservable(options.isForceCeil),\r\n                        valueAsNumber = general.toNumeric(value);\r\n\r\n                    if (value === '') {\r\n                        return;\r\n                    }\r\n\r\n                    if (isAllowNAValue && value === 'NA') {\r\n                        return;\r\n                    }\r\n\r\n                    if (valueAsNumber != 'NA' && valueAsNumber <= maxValue) {\r\n                        valueAsNumber = Math.abs(valueAsNumber);\r\n                        var decimalDigits = getDecimalDigits(valueAsNumber, ranges),\r\n                            currentNumberOfDecimalDigits = general.lenAfterDelimeter(valueAsNumber);\r\n\r\n                        if (currentNumberOfDecimalDigits > decimalDigits) {\r\n                            var multiplier = Math.pow(10, decimalDigits);\r\n\r\n                            if (isForceCeil) {\r\n                                valueAsNumber = Math.ceil(valueAsNumber * multiplier) / multiplier;\r\n                            } else {\r\n                                valueAsNumber = Math.floor(valueAsNumber * multiplier) / multiplier;\r\n                            }\r\n                        }\r\n\r\n                        if (valueAsNumber != value) {\r\n                            observable(valueAsNumber);\r\n                        }\r\n                    }\r\n                    else {\r\n                        observable('');\r\n                    }\r\n                }, target);\r\n\r\n            }\r\n            else if (target && target.toNumericLengthSubscriber) {\r\n                target.toNumericLengthSubscriber.dispose();\r\n                target.toNumericLengthSubscriber = null;\r\n            }\r\n\r\n            function getDecimalDigits(value, ranges) {\r\n                var range = ranges.find(function (item) {\r\n                    return (value >= item.from && value < item.to);\r\n                });\r\n\r\n                return range.decimalDigits;\r\n            }\r\n\r\n            return target;\r\n        }\r\n\r\n        ko.extenders.amountValidation = function amountValidationKoExtender(target, options) {\r\n            if (options !== false && target) {\r\n                var dealsAmounts = ko.utils.unwrapObservable(options);\r\n                target.minAmount = ko.observable();\r\n                target.maxAmount = ko.observable();\r\n\r\n                target.minAmount(dealsAmounts.reduce(function (accumulator, value) {\r\n                    return Math.min(accumulator, value);\r\n                },\r\n                    dealsAmounts[0] || 0));\r\n\r\n                target.maxAmount(dealsAmounts.reduce(function (accumulator, value) {\r\n                    return Math.max(accumulator, value);\r\n                },\r\n                    dealsAmounts[dealsAmounts.length - 1] || 10000000000));\r\n\r\n                removeAmountValidation();\r\n\r\n                target.validationRule = ko.validation.addAnonymousRule(target, {\r\n                    validator: function (value) {\r\n                        var valueToCheck = general.toNumeric(value);\r\n                        if (isNaN(valueToCheck)) {\r\n                            valueToCheck = -1; // Invalid value for all possible cases\r\n                        }\r\n                        return target.minAmount() <= valueToCheck && valueToCheck <= target.maxAmount();\r\n                    },\r\n                    params: true\r\n                });\r\n            }\r\n            else if (options === false && target) {\r\n                removeAmountValidation();\r\n            }\r\n\r\n            function removeAmountValidation() {\r\n                if (general.isDefinedType(target.rules) && !general.isEmptyValue(target.validationRule)) {\r\n                    var prevValidationRule = target.rules().find(function (item) {\r\n                        return item.rule === target.validationRule;\r\n                    });\r\n\r\n                    if (prevValidationRule) {\r\n                        target.rules.remove(prevValidationRule);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        ko.extenders.empty = function emptyKoExtender(target, enable) {\r\n            if (enable && !target.isEmpty) {\r\n                target.isEmpty = ko.computed(function isEmptyHandler() {\r\n                    var value = ko.utils.unwrapObservable(this);\r\n                    return general.isEmptyValue(value);\r\n                }, target);\r\n            }\r\n            else if (target.isEmpty) {\r\n                target.isEmpty.dispose();\r\n            }\r\n\r\n            return target;\r\n        };\r\n\r\n        ko.extenders.triggerValidation = function triggerValidationKoExtender(target, enable) {\r\n            if (enable && ko.validation.utils.isValidatable(target)) {\r\n                target.triggerValidation = function triggerValidation() {\r\n                    var value = ko.utils.unwrapObservable(this);\r\n                    this.notifySubscribers(value);\r\n                };\r\n            }\r\n            else if (!enable && target.triggerValidation) {\r\n                target.triggerValidation = null;\r\n            }\r\n\r\n            return target;\r\n        };\r\n\r\n        // Tooltip validation can be added only for observable who extend ko validation \r\n        // The message for tooltip validation can be set in observable extend with a new value\r\n        ko.extenders.tooltipValidation = function tooltipValidationKoExtender(target, options) {\r\n            if (options !== false) {\r\n                target.tooltipClosed = ko.observable(false);\r\n                target.dummyObservable = ko.observable('');\r\n                target.tooltipVisible = ko.pureComputed(function tooltipVisibleHandler() {\r\n                    var showTooltip = this.showTooltip(),\r\n                        isValid = this.isValid(),\r\n                        isClosed = this.tooltipClosed();\r\n\r\n                    this.dummyObservable.notifySubscribers();\r\n\r\n                    return !isClosed && !isValid && showTooltip;\r\n                }, target);\r\n\r\n                target.showTooltip = ko.pureComputed(typeof options.showTooltip === 'function' ? options.showTooltip : function () { return true; });\r\n\r\n                target.closeTooltip = function closeTooltip() {\r\n                    this.tooltipClosed(true);\r\n                };\r\n\r\n                target.resetTooltip = function resetTooltip() {\r\n                    this.tooltipClosed(false);\r\n                };\r\n\r\n                target._selfSubscriber = target.subscribe(function () {\r\n                    this.tooltipClosed(false);\r\n                }, target);\r\n\r\n                target.tooltipMessage = ko.pureComputed(function tooltipMessageHandler() {\r\n                    this.dummyObservable();\r\n\r\n                    if (options.message) {\r\n                        return options.message;\r\n                    }\r\n\r\n                    return this.error;\r\n                }, target);\r\n\r\n                if (ko.validation.utils.isValidatable(target)) {\r\n                    if (options.notify === 'always') {\r\n                        target.__valid__ = target.__valid__.extend({ notify: 'always' });\r\n                        target.isValid = target.isValid.extend({ notify: 'always' });\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                var disposableProps = ['tooltipMessage', '_selfSubscriber', 'showTooltip', 'tooltipVisible'],\r\n                    nullableProps = ['resetTooltip', 'closeTooltip', 'dummyObservable', 'tooltipClosed'];\r\n                disposableProps.forEach(function (prop) {\r\n                    if (target[prop]) {\r\n                        target[prop].dispose();\r\n                        delete target[prop];\r\n                    }\r\n                });\r\n\r\n                nullableProps.forEach(function (prop) {\r\n                    if (target[prop]) {\r\n                        target[prop] = null;\r\n                        delete target[prop];\r\n                    }\r\n                });\r\n            }\r\n\r\n            return target;\r\n        };\r\n\r\n        /**\r\n         * Extend an observable to support incremental value update, \r\n         * adding increment and decrement methods on target observable\r\n         * \r\n         * For more details, see {@link ObservableExtenderTest.js}\r\n         * \r\n         * If options === false, then the incremental logic is removed from observable \r\n         * @param {ko.observable} target observable to extend\r\n         * @param {Object} options incremental values: units, tenths, hundreds, thousands\r\n         * @returns {ko.observable}  target\r\n         */\r\n        ko.extenders.incremental = function incrementalKoExtender(target, options) {\r\n            if (options !== false) {\r\n                options = options || {};\r\n\r\n                var defaults = {\r\n                    precision: 4,\r\n                    ranges: [\r\n                        { from: 0, to: 10, step: 1 }, // units\r\n                        { from: 10, to: 100, step: 5 }, // tens\r\n                        { from: 100, to: 1000, step: 50 }, // hundreds\r\n                        { from: 1000, to: Number.MAX_VALUE, step: 500 } // thousands\r\n                    ]\r\n                };\r\n\r\n                options = ko.utils.extend(defaults, options);\r\n\r\n                var getStepValue = function (currentValue) {\r\n                    var foundRange = options.ranges.find(function (item) {\r\n                        return currentValue >= item.from && currentValue < item.to;\r\n                    });\r\n\r\n                    if (!foundRange) {\r\n                        return 1;\r\n                    }\r\n\r\n                    return foundRange.step;\r\n                };\r\n\r\n                var normalizeValue = function (direction, value, precision) {\r\n                    value = Number(value);\r\n\r\n                    var multiplier = Math.pow(10, precision),\r\n                        currentStep = getStepValue(value),\r\n                        multipliedCurrentStep = Math.floor(currentStep * multiplier),\r\n                        multipliedValue = Math.floor(value * multiplier),\r\n                        valueToReturn = multipliedValue,\r\n                        newValue,\r\n                        mod;\r\n\r\n                    if (direction === 'up') {\r\n                        newValue = multipliedValue + multipliedCurrentStep;\r\n                        mod = newValue % multipliedCurrentStep;\r\n\r\n                        valueToReturn = newValue - mod;\r\n\r\n                    }\r\n                    else if (direction === 'down') {\r\n                        newValue = multipliedValue - multipliedCurrentStep;\r\n                        mod = newValue % multipliedCurrentStep;\r\n\r\n                        if (mod !== 0) {\r\n                            valueToReturn = multipliedValue - mod;\r\n                        }\r\n                        else {\r\n                            var nextStep = getStepValue(value - currentStep);\r\n                            var multipliedNextStep = nextStep * multiplier;\r\n\r\n                            valueToReturn = multipliedValue - multipliedNextStep;\r\n                        }\r\n                    }\r\n\r\n                    return valueToReturn / multiplier;\r\n                };\r\n\r\n                target.increment = function increment(doNotUpdate) {\r\n                    var newValue = normalizeValue('up', this(), options.precision);\r\n\r\n                    if (!doNotUpdate) {\r\n                        this(newValue);\r\n                    }\r\n\r\n                    return newValue;\r\n                };\r\n\r\n                target.decrement = function decrement(doNotUpdate) {\r\n                    var newValue = normalizeValue('down', this(), options.precision);\r\n\r\n                    if (!doNotUpdate) {\r\n                        this(newValue);\r\n                    }\r\n\r\n                    return newValue;\r\n                };\r\n\r\n                target.step = ko.computed(function () {\r\n                    return getStepValue(target());\r\n                });\r\n\r\n                // Extend ko.observable\r\n                ko.subscribable.fn.isIncremental = function isIncremental() {\r\n                    var observable = this;\r\n\r\n                    return (typeof observable.increment === 'function') && (typeof observable.decrement === 'function');\r\n                };\r\n            }\r\n            else {\r\n                if (target.step) {\r\n                    target.step.dispose();\r\n                }\r\n\r\n                target.step = null;\r\n                target.increment = null;\r\n                target.decrement = null;\r\n            }\r\n\r\n            return target;\r\n        }\r\n\r\n        return ko;\r\n    }\r\n);\r\n\n",
    "Object.keys = Object.keys || (function () {\r\n    var hasOwnProperty = Object.prototype.hasOwnProperty,\r\n        hasDontEnumBug = !{ toString: null}.propertyIsEnumerable(\"toString\"),\r\n        DontEnums = [\r\n            'toString',\r\n            'toLocaleString',\r\n            'valueOf',\r\n            'hasOwnProperty',\r\n            'isPrototypeOf',\r\n            'propertyIsEnumerable',\r\n            'constructor'\r\n        ],\r\n        DontEnumsLength = DontEnums.length;\r\n\r\n    return function (o) {\r\n        if (typeof o != \"object\" && typeof o != \"function\" || o === null)\r\n            throw new TypeError(\"Object.keys called on a non-object\");\r\n\r\n        var result = [];\r\n        for (var name in o) {\r\n            if (hasOwnProperty.call(o, name))\r\n                result.push(name);\r\n        }\r\n\r\n        if (hasDontEnumBug) {\r\n            for (var i = 0; i < DontEnumsLength; i++) {\r\n                if (hasOwnProperty.call(o, DontEnums[i]))\r\n                    result.push(DontEnums[i]);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n})();\r\n\r\nif (typeof Object.assign != 'function') {\r\n    // Must be writable: true, enumerable: false, configurable: true\r\n    Object.defineProperty(Object, \"assign\", {\r\n      value: function assign(target, varArgs) { // .length of function is 2\r\n        'use strict';\r\n        if (target == null) { // TypeError if undefined or null\r\n          throw new TypeError('Cannot convert undefined or null to object');\r\n        }\r\n  \r\n        var to = Object(target);\r\n  \r\n        for (var index = 1; index < arguments.length; index++) {\r\n          var nextSource = arguments[index];\r\n  \r\n          if (nextSource != null) { // Skip over if undefined or null\r\n            for (var nextKey in nextSource) {\r\n              // Avoid bugs when hasOwnProperty is shadowed\r\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                to[nextKey] = nextSource[nextKey];\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return to;\r\n      },\r\n      writable: true,\r\n      configurable: true\r\n    });\r\n}\r\n\r\n/*\r\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\r\nObject.create Polyfill\r\nThis polyfill covers the main use case which is creating a new object for which the prototype \r\nhas been chosen but doesn't take the second argument into account.\r\n*/\r\nif (typeof Object.create != 'function') {\r\n  Object.create = (function() {\r\n      var F = function() { };\r\n      return function(prototype) {\r\n          if (arguments.length > 1) {\r\n              throw Error('Second argument not supported');\r\n          }\r\n          if (typeof prototype != 'object') {\r\n              throw TypeError('Argument must be an object');\r\n          }\r\n          F.prototype = prototype;\r\n          var result = new F();\r\n          F.prototype = null;\r\n          return result;\r\n      };\r\n  })();\r\n}\r\n\r\nObject.isEmpty = Object.isEmpty || function(obj) {\r\n    return Object.keys(obj).length === 0 && JSON.stringify(obj) === JSON.stringify({});\r\n};\ndefine(\"extensions/Object\", function(){});\n\n",
    "/* eslint no-extend-native: 0 */\r\nfunction addMemberOnObject(memberName, memberDefinition, targetObject) {\r\n    if (typeof (Browser) !== \"undefined\" && Browser.isDefinePropertySupported()) {\r\n        Object.defineProperty(targetObject, memberName, {\r\n            value: memberDefinition,\r\n            writable: true,\r\n            enumerable: false,\r\n            configurable: true\r\n        });\r\n    } else {\r\n        targetObject[memberName] = memberDefinition;\r\n    }\r\n}\r\n\r\nfunction addMemberOnArrayPrototype(memberName, memberDefinition) {\r\n    addMemberOnObject(memberName, memberDefinition, Array.prototype);\r\n}\r\n\r\nfunction addMemberOnArray(memberName, memberDefinition) {\r\n    addMemberOnObject(memberName, memberDefinition, Array);\r\n}\r\n\r\naddMemberOnArrayPrototype(\"remove\",\r\n    function (group) {\r\n        var tmp = [];\r\n\r\n        for (var i = 0; i < this.length; i++) {\r\n            if (group.indexAt(this[i]) === -1) {\r\n                tmp.push(this[i]);\r\n            }\r\n        }\r\n\r\n        return tmp;\r\n    });\r\n\r\n//-------------------------------------------------------\r\n\r\naddMemberOnArrayPrototype(\"removeItem\",\r\n    function(key) {\r\n        var index = this.indexAt(key);\r\n\r\n        if (index > -1) {\r\n            this.splice(index, 1);\r\n        }\r\n    });\r\n\r\n//-------------------------------------------------------\r\n\r\naddMemberOnArrayPrototype(\"clear\",\r\n    function () {\r\n        while (this.length > 0) {\r\n            this.pop();\r\n        }\r\n    });\r\n\r\n//-------------------------------------------------------\r\n\r\naddMemberOnArrayPrototype(\"compareTo\",\r\n    function (testArr) {\r\n\r\n        if (this.length !== testArr.length)\r\n            return false;\r\n\r\n        for (var i = 0; i < testArr.length; i++) {\r\n            if (this[i].compare)\r\n                if(!this[i].compare(testArr[i]))\r\n                    return false;\r\n\r\n            if (this[i] !== testArr[i])\r\n                return false;\r\n        }\r\n\r\n        return true;\r\n    });\r\n\r\n//--------------------------------------------------------\r\n\r\naddMemberOnArrayPrototype(\"indexAt\", \r\n    function(what) {\r\n        var length = this.length,\r\n            i = 0;\r\n\r\n        while (i < length) {\r\n            if (this[i] === what) {\r\n                return i;\r\n            }\r\n\r\n            ++i;\r\n        }\r\n    \r\n        return -1;\r\n    });\r\n\r\n//--------------------------------------------------------\r\n\r\naddMemberOnArrayPrototype(\"addUnique\",\r\n    function (what) {\r\n        if (this.indexAt(what) === -1) {\r\n            this.push(what);\r\n        }\r\n\r\n        return this;\r\n    });\r\n\r\n//--------------------------------------------------------\r\n\r\naddMemberOnArrayPrototype(\"contains\", \r\n    function(obj) {\r\n        var i = this.length;\r\n    \r\n        while (i--) {\r\n            if (this[i] == obj) { // eslint-disable-line\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        return false;\r\n    });\r\n\r\n//--------------------------------------------------------\r\n\r\n// Polyfill\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray#Compatibility\r\n\r\nif (!Array.isArray) {\r\n    addMemberOnArray(\"isArray\", \r\n        function (arg) {\r\n            return Object.prototype.toString.call(arg) === '[object Array]';\r\n        });\r\n}\r\n\r\n\r\n//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find#Polyfill\r\nif (!Array.prototype.find) {\r\n    addMemberOnArrayPrototype(\"find\", \r\n        function (predicate) {\r\n            if (this == null) {\r\n                throw new TypeError('Array.prototype.find called on null or undefined');\r\n            }\r\n            if (typeof predicate !== 'function') {\r\n                throw new TypeError('predicate must be a function');\r\n            }\r\n            var list = Object(this);\r\n            var length = list.length >>> 0;\r\n            var thisArg = arguments[1];\r\n            var value;\r\n\r\n            for (var i = 0; i < length; i++) {\r\n                if (i in list) {\r\n                    value = list[i];\r\n                    if (predicate.call(thisArg, value, i, list)) {\r\n                        return value;\r\n                    }\r\n                }\r\n            }\r\n            return undefined;\r\n        });\r\n\r\n\r\n    //https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/filter#Compatibility\r\n    if (!Array.prototype.filter) {\r\n        addMemberOnArrayPrototype(\"filter\", \r\n            function (fun /*, thisArg */) {\r\n                \"use strict\";\r\n\r\n                if (this === void 0 || this === null)\r\n                    throw new TypeError();\r\n\r\n                var t = Object(this);\r\n                var len = t.length >>> 0;\r\n                if (typeof fun !== \"function\")\r\n                    throw new TypeError();\r\n\r\n                var res = [];\r\n                var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n                for (var i = 0; i < len; i++) {\r\n                    if (i in t) {\r\n                        var val = t[i];\r\n\r\n                        // NOTE: Technically this should Object.defineProperty at\r\n                        //       the next index, as push can be affected by\r\n                        //       properties on Object.prototype and Array.prototype.\r\n                        //       But that method's new, and collisions should be\r\n                        //       rare, so use the more-compatible alternative.\r\n                        if (fun.call(thisArg, val, i, t))\r\n                            res.push(val);\r\n                    }\r\n                }\r\n\r\n                return res;\r\n            });\r\n    }\r\n}\r\n//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex#Polyfill\r\nif (!Array.prototype.findIndex) {\r\n    Object.defineProperty(Array.prototype, 'findIndex', {\r\n        value: function (predicate) {\r\n            'use strict';\r\n            if (this == null) {\r\n                throw new TypeError('Array.prototype.findIndex called on null or undefined');\r\n            }\r\n            if (typeof predicate !== 'function') {\r\n                throw new TypeError('predicate must be a function');\r\n            }\r\n            var list = Object(this);\r\n            var length = list.length >>> 0;\r\n            var thisArg = arguments[1];\r\n            var value;\r\n\r\n            for (var i = 0; i < length; i++) {\r\n                value = list[i];\r\n                if (predicate.call(thisArg, value, i, list)) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        },\r\n        enumerable: false,\r\n        configurable: true,\r\n        writable: true\r\n    });\r\n}\r\n//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf#Polyfill\r\nif (!Array.prototype.indexOf) {\r\n    addMemberOnArrayPrototype(\"indexOf\", \r\n        function (searchElement, fromIndex) {\r\n\r\n            var k;\r\n\r\n            // 1. Let O be the result of calling ToObject passing\r\n            //    the this value as the argument.\r\n            if (this == null) {\r\n                throw new TypeError('\"this\" is null or not defined');\r\n            }\r\n\r\n            var O = Object(this);\r\n\r\n            // 2. Let lenValue be the result of calling the Get\r\n            //    internal method of O with the argument \"length\".\r\n            // 3. Let len be ToUint32(lenValue).\r\n            var len = O.length >>> 0;\r\n\r\n            // 4. If len is 0, return -1.\r\n            if (len === 0) {\r\n                return -1;\r\n            }\r\n\r\n            // 5. If argument fromIndex was passed let n be\r\n            //    ToInteger(fromIndex); else let n be 0.\r\n            var n = +fromIndex || 0;\r\n\r\n            if (Math.abs(n) === Infinity) {\r\n                n = 0;\r\n            }\r\n\r\n            // 6. If n >= len, return -1.\r\n            if (n >= len) {\r\n                return -1;\r\n            }\r\n\r\n            // 7. If n >= 0, then Let k be n.\r\n            // 8. Else, n<0, Let k be len - abs(n).\r\n            //    If k is less than 0, then let k be 0.\r\n            k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);\r\n\r\n            // 9. Repeat, while k < len\r\n            while (k < len) {\r\n                var kValue;\r\n                // a. Let Pk be ToString(k).\r\n                //   This is implicit for LHS operands of the in operator\r\n                // b. Let kPresent be the result of calling the\r\n                //    HasProperty internal method of O with argument Pk.\r\n                //   This step can be combined with c\r\n                // c. If kPresent is true, then\r\n                //    i.  Let elementK be the result of calling the Get\r\n                //        internal method of O with the argument ToString(k).\r\n                //   ii.  Let same be the result of applying the\r\n                //        Strict Equality Comparison Algorithm to\r\n                //        searchElement and elementK.\r\n                //  iii.  If same is true, return k.\r\n                if (k in O && O[k] === searchElement) {\r\n                    return k;\r\n                }\r\n                k++;\r\n            }\r\n            return -1;\r\n        });\r\n}\r\n\r\n//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map#Polyfill\r\nif (!Array.prototype.map) {\r\n    addMemberOnArrayPrototype(\"map\", \r\n        function (callback, thisArg) {\r\n\r\n            var T, A, k;\r\n\r\n            if (this == null) {\r\n                throw new TypeError(\" this is null or not defined\");\r\n            }\r\n\r\n            // 1. Let O be the result of calling ToObject passing the |this| value as the argument.\r\n            var O = Object(this);\r\n\r\n            // 2. Let lenValue be the result of calling the Get internal method of O with the argument \"length\".\r\n            // 3. Let len be ToUint32(lenValue).\r\n            var len = O.length >>> 0;\r\n\r\n            // 4. If IsCallable(callback) is false, throw a TypeError exception.\r\n            // See: http://es5.github.com/#x9.11\r\n            if (typeof callback !== \"function\") {\r\n                throw new TypeError(callback + \" is not a function\");\r\n            }\r\n\r\n            // 5. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n            if (arguments.length > 1) {\r\n                T = thisArg;\r\n            }\r\n\r\n            // 6. Let A be a new array created as if by the expression new Array( len) where Array is\r\n            // the standard built-in constructor with that name and len is the value of len.\r\n            A = new Array(len);\r\n\r\n            // 7. Let k be 0\r\n            k = 0;\r\n\r\n            // 8. Repeat, while k < len\r\n            while (k < len) {\r\n\r\n                var kValue, mappedValue;\r\n\r\n                // a. Let Pk be ToString(k).\r\n                //   This is implicit for LHS operands of the in operator\r\n                // b. Let kPresent be the result of calling the HasProperty internal method of O with argument Pk.\r\n                //   This step can be combined with c\r\n                // c. If kPresent is true, then\r\n                if (k in O) {\r\n\r\n                    // i. Let kValue be the result of calling the Get internal method of O with argument Pk.\r\n                    kValue = O[k];\r\n\r\n                    // ii. Let mappedValue be the result of calling the Call internal method of callback\r\n                    // with T as the this value and argument list containing kValue, k, and O.\r\n                    mappedValue = callback.call(T, kValue, k, O);\r\n\r\n                    // iii. Call the DefineOwnProperty internal method of A with arguments\r\n                    // Pk, Property Descriptor {Value: mappedValue, Writable: true, Enumerable: true, Configurable: true},\r\n                    // and false.\r\n\r\n                    // In browsers that support Object.defineProperty, use the following:\r\n                    // Object.defineProperty( A, k, { value: mappedValue, writable: true, enumerable: true, configurable: true });\r\n\r\n                    // For best browser support, use the following:\r\n                    A[k] = mappedValue;\r\n                }\r\n                // d. Increase k by 1.\r\n                k++;\r\n            }\r\n\r\n            // 9. return A\r\n            return A;\r\n        });\r\n}\r\n\r\nif (!Array.prototype.reduce) {\r\n    addMemberOnArrayPrototype(\"reduce\", {\r\n        value: function (callback /*, initialValue*/) {\r\n            if (this === null) {\r\n                throw new TypeError('Array.prototype.reduce ' +\r\n                  'called on null or undefined');\r\n            }\r\n            if (typeof callback !== 'function') {\r\n                throw new TypeError(callback + ' is not a function');\r\n            }\r\n\r\n            // 1. Let O be ? ToObject(this value).\r\n            var o = Object(this);\r\n\r\n            // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n            var len = o.length >>> 0;\r\n\r\n            // Steps 3, 4, 5, 6, 7      \r\n            var k = 0;\r\n            var value;\r\n\r\n            if (arguments.length >= 2) {\r\n                value = arguments[1];\r\n            } else {\r\n                while (k < len && !(k in o)) {\r\n                    k++;\r\n                }\r\n\r\n                // 3. If len is 0 and initialValue is not present,\r\n                //    throw a TypeError exception.\r\n                if (k >= len) {\r\n                    throw new TypeError('Reduce of empty array with no initial value');\r\n                }\r\n                value = o[k++];\r\n            }\r\n\r\n            // 8. Repeat, while k < len\r\n            while (k < len) {\r\n                // a. Let Pk be ! ToString(k).\r\n                // b. Let kPresent be ? HasProperty(O, Pk).\r\n                // c. If kPresent is true, then\r\n                //    i.  Let kValue be ? Get(O, Pk).\r\n                //    ii. Let accumulator be ? Call(\r\n                //          callbackfn, undefined,\r\n                //          « accumulator, kValue, k, O »).\r\n                if (k in o) {\r\n                    value = callback(value, o[k], k, o);\r\n                }\r\n\r\n                // d. Increase k by 1.      \r\n                k++;\r\n            }\r\n\r\n            // 9. Return accumulator.\r\n            return value;\r\n        }\r\n    });\r\n}\r\n\r\n//--------------------------------------------------------\r\n\r\naddMemberOnArrayPrototype(\"concatUnique\",\r\n    function (obj) {\r\n        if (!obj || Object.prototype.toString.apply(obj) !== '[object Array]' || typeof obj === 'undefined' || typeof (value) === 'string' || obj === null || obj.length < 1)\r\n        {\r\n            return this;\r\n        }\r\n        \r\n        var destinationArray = this;\r\n        return this.concat(obj.filter(function isNotContainedInOtherArray(item) { return destinationArray.indexOf(item) < 0; }))\r\n    });\r\n\r\naddMemberOnArrayPrototype(\"concatUniqueObject\",\r\n    function (obj) {\r\n        if (!obj || Object.prototype.toString.apply(obj) !== '[object Array]' || typeof obj === 'undefined' || typeof (value) === 'string' || obj === null || obj.length < 1)\r\n        {\r\n            return this;\r\n        }\r\n\r\n        var destinationArray = this;\r\n        return this.concat(obj.filter(function isNotContainedInOtherArray(item, index) {\r\n            return destinationArray.findIndex(\r\n                function (destItem) { return JSON.stringify(destItem) === JSON.stringify(item); }) === -1;\r\n        }));\r\n    });\r\n\r\n// find is needed for phantom js headless browser\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\r\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\r\nif (!Array.prototype.find) {\r\n    Object.defineProperty(Array.prototype, 'find', {\r\n        value: function (predicate) {\r\n            // 1. Let O be ? ToObject(this value).\r\n            if (this == null) {\r\n                throw new TypeError('\"this\" is null or not defined');\r\n            }\r\n\r\n            var o = Object(this);\r\n\r\n            // 2. Let len be ? ToLength(? Get(O, \"length\")).\r\n            var len = o.length >>> 0;\r\n\r\n            // 3. If IsCallable(predicate) is false, throw a TypeError exception.\r\n            if (typeof predicate !== 'function') {\r\n                throw new TypeError('predicate must be a function');\r\n            }\r\n\r\n            // 4. If thisArg was supplied, let T be thisArg; else let T be undefined.\r\n            var thisArg = arguments[1];\r\n\r\n            // 5. Let k be 0.\r\n            var k = 0;\r\n\r\n            // 6. Repeat, while k < len\r\n            while (k < len) {\r\n                // a. Let Pk be ! ToString(k).\r\n                // b. Let kValue be ? Get(O, Pk).\r\n                // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue, k, O »)).\r\n                // d. If testResult is true, return kValue.\r\n                var kValue = o[k];\r\n                if (predicate.call(thisArg, kValue, k, o)) {\r\n                    return kValue;\r\n                }\r\n                // e. Increase k by 1.\r\n                k++;\r\n            }\r\n\r\n            // 7. Return undefined.\r\n            return undefined;\r\n        },\r\n        configurable: true,\r\n        writable: true\r\n    });\r\n};\ndefine(\"extensions/Array\", function(){});\n\n",
    "var eDayOfWeek = {\r\n    Sunday: 0,\r\n    Monday: 1,\r\n    Tuesday: 2,\r\n    Wednesday: 3,\r\n    Thursday: 4,\r\n    Friday: 5,\r\n    Saturday: 6\r\n};\r\n\r\nfunction timeStamp() {\r\n    return (new Date).getTime();\r\n}\r\n\r\nDate.prototype.toDotNetString = function() {\r\n    return \"/Date(\" + this.getTime() + \")/\";\r\n};\r\n\r\nDate.prototype.AddSeconds = function(s) {\r\n    var miliSeconds = s * 1000;\r\n\r\n    this.setTime(this.getTime() + miliSeconds);\r\n\r\n    return this;\r\n};\r\n\r\nDate.prototype.AddDays = function (d) {\r\n    this.setDate(this.getDate() + d);\r\n\r\n    return this;\r\n};\r\n\r\nDate.prototype.AddWeeks = function (w) {\r\n    this.setDate(this.getDate() + w * 7);\r\n\r\n    return this;\r\n};\r\n\r\nDate.prototype.AddMonths = function (m) {\r\n    this.setMonth(this.getMonth() + m);\r\n\r\n    return this;\r\n};\r\n\r\nDate.prototype.addHours = function(h) {\r\n    this.setHours(this.getHours() + h);\r\n\r\n    return this;\r\n};\r\n\r\nDate.prototype.Clone = function() {\r\n    return new Date(this.getTime());\r\n};\r\n\r\nDate.prototype.ExtractDate = function () {\r\n    return this.getDate() + \"/\" + (this.getMonth() + 1) + \"/\" + this.getFullYear();\r\n};\r\n\r\nDate.prototype.ExtractDateUTC = function () {\r\n    return this.getUTCDate() + \"/\" + (this.getUTCMonth() + 1) + \"/\" + this.getUTCFullYear();\r\n};\r\n\r\nDate.prototype.ExtractDateShortYear = function () {\r\n    return General.pad((this.getDate()), 2) + \"/\" + General.pad((this.getMonth() + 1), 2) + \"/\" + this.getFullYear().toString().substr(2,2);\r\n};\r\n\r\nDate.prototype.ExtractDateLongYear = function () {\r\n    return General.pad((this.getDate()), 2) + \"/\" + General.pad((this.getMonth() + 1), 2) + \"/\" + this.getFullYear();\r\n};\r\n\r\nDate.prototype.ExtractUTCDateLongYear = function () {\r\n    return General.pad((this.getUTCDate()), 2) + \"/\" + General.pad((this.getUTCMonth() + 1), 2) + \"/\" + this.getFullYear();\r\n};\r\n\r\nDate.prototype.ExtractDateShortYearUTC = function () {\r\n    return  General.pad((this.getUTCDate()), 2) + \"/\" + General.pad((this.getUTCMonth() + 1), 2) + \"/\" + this.getUTCFullYear().toString().substr(2, 2);\r\n};\r\n\r\nDate.prototype.ExtractNextYearDate = function () {\r\n    return this.getDate() + \"/\" + (this.getMonth() + 1) + \"/\" + (this.getFullYear() + 1);\r\n};\r\n\r\nDate.prototype.ExtractHour = function () {\r\n\r\n    return this.getHours();\r\n};\r\n\r\nDate.prototype.ExtractTime = function () {\r\n    return General.pad(this.getHours(), 2) + \":\" + General.pad(this.getMinutes(), 2);\r\n};\r\n\r\nDate.prototype.ExtractTimeUTC = function () {\r\n    return General.pad(this.getUTCHours(), 2) + \":\" + General.pad(this.getUTCMinutes(), 2);\r\n};\r\n\r\nDate.prototype.ExtractFullTime = function () {\r\n    return General.pad(this.getHours(), 2) + \":\" + General.pad(this.getMinutes(), 2) + \":\" + General.pad(this.getSeconds(), 2);\r\n};\r\n\r\nDate.prototype.ExtractFullTimeUTC = function () {\r\n    return General.pad(this.getUTCHours(), 2) + \":\" + General.pad(this.getUTCMinutes(), 2) + \":\" + General.pad(this.getUTCSeconds(), 2);\r\n};\r\n\r\nDate.prototype.shortDateTime = function () {\r\n    return this.getDate() + \"/\" + (this.getMonth() + 1) + \"/\" + this.getFullYear() + \"  \" + this.getHours() + \":\" + this.getMinutes() + \":\" + this.getSeconds();\r\n};\r\n\r\nDate.prototype.ExtractDateShortMonthYear = function () {\r\n    return General.pad((this.getMonth() + 1), 2) + \"/\" + this.getFullYear().toString().substr(-2);\r\n};\r\n\r\nDate.prototype.AddYear = function (y) {\r\n    this.setFullYear(this.getFullYear() + y);\r\n    return this;\r\n};\r\n\r\nDate.prototype.compareTo = function (_date) {\r\n    if (typeof (_date) === 'string') {\r\n        _date = new Date(_date);\r\n    }\r\n\r\n    return this.valueOf() > _date.valueOf() ? 1 : 0;\r\n};\r\n\r\nDate.prototype.isWeekend = function () {\r\n    var day = this.getDay();\r\n\r\n    return day === eDayOfWeek.Sunday || day === eDayOfWeek.Saturday;\r\n};\r\n\r\nfunction datePad(number) {\r\n    if (number < 10) {\r\n        return '0' + number;\r\n    }\r\n\r\n    return number;\r\n}\r\n\r\nif (!Date.prototype.toISOString) {\r\n    (function () {\r\n        Date.prototype.toISOString = function () {\r\n            return this.getUTCFullYear() +\r\n                '-' + datePad(this.getUTCMonth() + 1) +\r\n                '-' + datePad(this.getUTCDate()) +\r\n                'T' + datePad(this.getUTCHours()) +\r\n                ':' + datePad(this.getUTCMinutes()) +\r\n                ':' + datePad(this.getUTCSeconds()) +\r\n              '.' + (this.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) +\r\n              'Z';\r\n        };\r\n    }());\r\n}\r\n\r\n(function () {\r\n    Date.prototype.toShortISOString = function () {\r\n        return this.getUTCFullYear() +\r\n            '-' + datePad(this.getUTCMonth() + 1) +\r\n            '-' + datePad(this.getUTCDate());\r\n    };\r\n}());\r\n\r\nDate.prototype.skipWeekendDays = function () {\r\n    if (this.getDay() === eDayOfWeek.Saturday) {\r\n        this.AddDays(2);\r\n        this.setHours(23);\r\n        this.setMinutes(59);\r\n    }\r\n\r\n    if (this.getDay() === eDayOfWeek.Sunday) {\r\n        this.AddDays(1);\r\n        this.setHours(23);\r\n        this.setMinutes(59);\r\n    }\r\n\r\n    return this;\r\n}\r\n\r\nDate.prototype.toLaterDate = function () {\r\n    this.AddDays(14);\r\n    this.setHours(23);\r\n    this.setMinutes(59);\r\n    this.setSeconds(0);\r\n\r\n    return this;\r\n}\r\n\r\nDate.prototype.getPureUTCDate = function() {\r\n    return new Date(this.getUTCDate(), this.getUTCMonth(), this.getUTCFullYear());\r\n}\r\n\r\nDate.prototype.isValid = function (y, m, d) {\r\n    this.setYear(y);\r\n    this.setDate(d);\r\n    this.setMonth(m - 1);\r\n\r\n    if (this.getDate() !== d || this.getMonth()+1 !== m || this.getFullYear() !== y) {\r\n        return false;\r\n    } else {\r\n        return true;\r\n    }\r\n};\ndefine(\"extensions/Date\", function(){});\n\n",
    "String.empty = '';\r\n\r\n//---------------------------------------------------\r\n\r\nString.format = function() {\r\n    var i,\r\n        exp1,\r\n        exp2;\r\n\r\n    if (typeof (arguments[1]) == 'object') {\r\n        //-- String.Format(\"{0} x {1}\", [12,13])\r\n        for (i = 0; i < arguments[1].length; i++) {\r\n            exp1 = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\r\n            arguments[0] = arguments[0].replace(exp1, arguments[1][i]);\r\n        }\r\n    } else {\r\n        //-- String.Format(\"{0} x {1}\", 12, 13) \r\n        for (i = 1; i < arguments.length; i++) {\r\n            exp2 = new RegExp('\\\\{' + (i - 1) + '\\\\}', 'gm');\r\n            arguments[0] = arguments[0].replace(exp2, arguments[i]);\r\n        }\r\n    }\r\n\r\n    return arguments[0];\r\n};\r\n\r\nString.prototype.round = function() {\r\n    var str = this;\r\n    if (str && str.length > 0) {\r\n        var noComma = str.replace(/,/g, '');\r\n        var rounded = Math.round(noComma);\r\n        if (!isNaN(rounded)) {\r\n            str = rounded.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n        }\r\n    }\r\n    return str;\r\n};\r\n\r\nString.prototype.sign = function () {\r\n    var noComma = this.replace(/,/g, ''),\r\n        integer = Math.round(noComma);\r\n    \r\n    if (isNaN(integer)) {\r\n        return 0;\r\n    }\r\n\r\n    return integer;\r\n};\r\n\r\nString.prototype.cleanComma = function () {\r\n    var noComma = this.replace(/,/g, '');\r\n\r\n    if (isNaN(noComma)) {\r\n        return 0;\r\n    }\r\n\r\n    return noComma;\r\n};\r\n\r\n\r\n/**\r\n* ReplaceAll by Fagner Brack (MIT Licensed)\r\n* Replaces all occurrences of a substring in a string\r\n*/\r\nString.prototype.replaceAll = function (token, newToken, ignoreCase) {\r\n    var str, i = -1, _token;\r\n    if ((str = this.toString()) && typeof token === \"string\") {\r\n        _token = ignoreCase === true ? token.toLowerCase() : undefined;\r\n        while ((i = (\r\n            _token !== undefined ?\r\n                str.toLowerCase().indexOf(\r\n                            _token,\r\n                            i >= 0 ? i + newToken.length : 0\r\n                ) : str.indexOf(\r\n                            token,\r\n                            i >= 0 ? i + newToken.length : 0\r\n                )\r\n        )) !== -1) {\r\n            str = str.substring(0, i)\r\n                    .concat(newToken)\r\n                    .concat(str.substring(i + token.length));\r\n        }\r\n    }\r\n    return str;\r\n};\r\n\r\nString.prototype.toNumeric = function () {\r\n    var str = this;\r\n    if (General.isNumberType(str))\r\n        return str;\r\n\r\n    var newstr = [];\r\n\r\n    for (var i = 0; i < str.length; i++) {\r\n        var s = str.substr(i, 1);\r\n\r\n        if (s !== \",\") {\r\n            newstr.push(s);\r\n        }\r\n    }\r\n\r\n    return parseFloat(newstr.join(\"\"));\r\n};\r\n\r\nif (!String.prototype.containsNotEmpty) {\r\n    String.prototype.containsNotEmpty = function () {\r\n        if (arguments && arguments[0].length > 0)\r\n            return String.prototype.indexOf.apply(this, arguments) !== -1;\r\n        else\r\n            return false;\r\n    };\r\n}\r\n\r\nif (!String.prototype.trim) {\r\n    String.prototype.trim = function () {\r\n        return this.replace(/^\\s+|\\s+$/g, '');\r\n    };\r\n}\r\n\r\nif (!String.prototype.capitalizeFirstLetter) {\r\n    String.prototype.capitalizeFirstLetter = function() {\r\n        return this.charAt(0).toUpperCase() + this.slice(1);\r\n    }\r\n}\r\n\r\nif (!String.prototype.startsWith) {\r\n    String.prototype.startsWith = function(searchString, position) {\r\n        return this.substr(position || 0, searchString.length) === searchString;\r\n    };\r\n}\r\n\r\nString.prototype.isRtlText = function () {\r\n    return cArabicChars.test(this);\r\n};\ndefine(\"extensions/String\", function(){});\n\n",
    "Number.toStr = function(number) {\r\n\tvar sNum = number.toString(); \r\n\r\n\tsNum += '';\r\n\r\n\tvar x = sNum.split('.');\r\n\tvar x1 = x[0];\r\n\tvar x2 = x.length > 1 ? '.' + x[1] : '';\r\n\r\n\tvar rgx = /(\\d+)(\\d{3})/;\r\n\r\n    while (rgx.test(x1)) {\r\n        x1 = x1.replace(rgx, '$1' + ',' + '$2');\r\n    }\r\n\r\n    return x1 + x2.substr(0,5);\r\n};\r\n\r\nNumber.fromStr = function (numberStr) {\r\n    var multiplier = 1;\r\n\r\n    if (!numberStr) {\r\n        return Number.NaN;\r\n    }\r\n\r\n    if (numberStr.indexOf(',') >= 0) {\r\n        numberStr = numberStr.replace(/,/g, '');\r\n    }\r\n    \r\n    if (numberStr.indexOf('M') >= 0) {\r\n        multiplier = 1000000;\r\n        numberStr = numberStr.replace(/M/g, '');\r\n    }\r\n    \r\n    if (numberStr.indexOf('K') >= 0) {\r\n        multiplier = 1000;\r\n        numberStr = numberStr.replace(/K/g, '');\r\n    }\r\n\r\n    return Number(numberStr) * multiplier;\r\n}\r\n\r\nNumber.prototype.sign = function () {\r\n    return Math.round(this);\r\n};\r\n\r\nif (typeof Number.MIN_SAFE_INTEGER !== 'number') {\r\n    Number.MIN_SAFE_INTEGER = -9007199254740991; //-(Math.pow(2, 53) - 1)  // \r\n}\r\n\r\nif (typeof Number.MAX_SAFE_INTEGER !== 'number') {\r\n    Number.MAX_SAFE_INTEGER = 9007199254740991; //Math.pow(2, 53) - 1 \r\n}\r\n\r\nif (typeof Number.MAX_INT32_SAFE_INTEGER !== 'number') {\r\n    Number.MAX_INT32_SAFE_INTEGER = 2147483647;\r\n};\ndefine(\"extensions/Number\", function(){});\n\n",
    "/* global General */\r\nvar Format = {\r\n    //--------------------------------------------------------------------\r\n    // If ‘digit’ param exists, return the number with 'digit' decimal digits, else floor it\r\n    //--------------------------------------------------------------------\r\n    toAmount: function (num, digit) {\r\n        if (!General.isNumber(num)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        num = Math.abs(Number(num));\r\n\r\n        if (digit) {\r\n            return num.toFixed(digit);\r\n        }\r\n        else {\r\n            return Math.floor(num);\r\n        }\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Return a whole number and round it if needed \r\n    //--------------------------------------------------------------------\r\n    toFixedAmount: function (num) {\r\n        var amount = General.roundedNumberFromAmount(num);\r\n\r\n        if (!General.isNumber(amount)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        return General.formatNumberWithThousandsSeparator(amount);\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Return number with Thousands Separator \r\n    //--------------------------------------------------------------------\r\n    toNumberWithThousandsSeparator: function (num, decimals, displayToken) {\r\n        var amount = General.toNumeric(num);\r\n\r\n        displayToken = !General.isDefinedType(displayToken) ? \"NA\" : displayToken;\r\n\r\n        if (!General.isNumber(amount)) {\r\n            return displayToken;\r\n        }\r\n\r\n        if (decimals >= 0) {\r\n            amount = amount.toFixed(decimals);\r\n        }\r\n\r\n        return General.formatNumberWithThousandsSeparator(amount);\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Return sign for a symbol id\r\n    //--------------------------------------------------------------------\r\n    toSign: function (symbolId) {\r\n        var formatCurrency = {\r\n                \"signNumber symbol\": function (arr, symbol) { arr.push(' ' + symbol); return arr.join(''); },\r\n                \"sign number symbol\": function (arr, symbol) { arr.splice(1, 0, ' '); arr.push(' ' + symbol); return arr.join(''); },\r\n                \"symbol signNumber\": function (arr, symbol) { arr.splice(0, 0, symbol + ' '); return arr.join(''); },\r\n                \"signSymbol number\": function (arr, symbol) { arr.splice(1, 0, symbol + ' '); return arr.join(''); },\r\n                \"symbolSignNumber\": function (arr, symbol) { arr.splice(0, 0, symbol); return arr.join(''); },\r\n            },\r\n            otherSymbol = $symbolsManager.GetSymbol(symbolId),\r\n            defaultSignObj = { sign: otherSymbol ? otherSymbol.name : \"\", isWithSpace: true, format: formatCurrency[\"symbol signNumber\"] },\r\n            currencySignsMap = {\r\n                '4': { currency: 'CHF', sign: '&#70;&#114;&#46;', isWithSpace: true, format: formatCurrency[\"symbol signNumber\"] },\r\n                '9': { currency: 'CZK', sign: '&#75;&#269;', isWithSpace: true, format: formatCurrency[\"sign number symbol\"] },\r\n                '14': { currency: 'EUR', sign: '&#8364;', isWithSpace: false, format: formatCurrency[\"symbol signNumber\"] },\r\n                '16': { currency: 'GBP', sign: '&#163;', isWithSpace: false, format: formatCurrency[\"signSymbol number\"] },\r\n                '18': { currency: 'HKD', sign: '&#36;', isWithSpace: false, format: formatCurrency[\"signSymbol number\"] },\r\n                '19': { currency: 'HUF', sign: '&#70;&#116;', isWithSpace: false, format: formatCurrency[\"sign number symbol\"] },\r\n                '20': { currency: 'ILS', sign: '&#8362;', isWithSpace: false, format: formatCurrency[\"symbol signNumber\"] },\r\n                '23': { currency: 'JPY', sign: '&#165;', isWithSpace: false, format: formatCurrency[\"signSymbol number\"] },\r\n                '24': { currency: 'MXN', sign: '&#36;', isWithSpace: false, format: formatCurrency[\"signSymbol number\"] },\r\n                '33': { currency: 'PLN', sign: '&#122;&#322;', isWithSpace: true, format: formatCurrency[\"sign number symbol\"] },\r\n                '34': { currency: 'LEI', sign: '&#108;&#101;&#105;', isWithSpace: true, format: formatCurrency[\"sign number symbol\"] },\r\n                '40': { currency: 'SEK', sign: '&#107;&#114;', isWithSpace: true, format: formatCurrency[\"sign number symbol\"] },\r\n                '46': { currency: 'TRY', sign: '&#8378;', isWithSpace: true, format: formatCurrency[\"sign number symbol\"] },\r\n                '47': { currency: 'USD', sign: '&#36;', isWithSpace: false, format: formatCurrency[\"symbol signNumber\"] },\r\n                '69': { currency: 'KRW', sign: '&#8361;', isWithSpace: false, format: formatCurrency[\"symbol signNumber\"] },\r\n                '77': { currency: 'RUB', sign: '&#8381;', isWithSpace: false, format: formatCurrency[\"signNumber symbol\"] },\r\n                '78': { currency: 'SAR', sign: '&#65020;', isWithSpace: false, format: formatCurrency[\"signNumber symbol\"] },\r\n            };\r\n\r\n        if (symbolId in currencySignsMap) {\r\n            defaultSignObj = currencySignsMap[symbolId];\r\n        }\r\n\r\n        return defaultSignObj;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns an formated number with the currency Sign\r\n    //--------------------------------------------------------------------\r\n    toNumberWithCurrency: function (value, formatOptions) {\r\n        formatOptions = formatOptions || {};\r\n        var maximumFractionDigits = 2,\r\n            minimumFractionDigits = 0;\r\n\r\n        if (!(General.isNumber(General.toNumeric(value)) && General.isDefinedType(formatOptions.currencyId))) {\r\n            return '';\r\n        }\r\n\r\n        if (General.isNumberType(formatOptions.decimals)) {\r\n            maximumFractionDigits = minimumFractionDigits = formatOptions.decimals;\r\n        }\r\n\r\n        var options = {\r\n                style: 'decimal',\r\n                useGrouping: General.isBooleanType(formatOptions.useGrouping) ? formatOptions.useGrouping : true,\r\n                maximumFractionDigits: General.isNumberType(formatOptions.maximumFractionDigits) ? formatOptions.maximumFractionDigits : maximumFractionDigits,\r\n                minimumFractionDigits: General.isNumberType(formatOptions.minimumFractionDigits) ? formatOptions.minimumFractionDigits : minimumFractionDigits\r\n            },\r\n            strNum = General.toNumeric(value).toString();\r\n\r\n        if (strNum.indexOf('.') < 0) {\r\n            strNum += '.00000000';\r\n        }\r\n\r\n        var retNumWithCurrecy = Number(strNum.substring(0, strNum.indexOf('.') + options.maximumFractionDigits + 1)).toLocaleString(\"en-GB\", options);\r\n\r\n        return Format.addCurrencyToNumber(retNumWithCurrecy, formatOptions.currencyId, value);\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Adds the currency to the specified number\r\n    //--------------------------------------------------------------------\r\n    addCurrencyToNumber: function (formatedNumber, currencyId, originalNumberValue) {\r\n        var symbol = Format.toSign(currencyId);\r\n\r\n        var arr = formatedNumber.split('-');\r\n\r\n        var sign = '';\r\n        if (General.isNumber(originalNumberValue)) {\r\n            sign = (0 <= Number(originalNumberValue)) ? '' : '-';\r\n        } else {\r\n            sign = (0 <= formatedNumber.indexOf('-')) ? '-' : '';\r\n        }\r\n        arr.splice(0, 0, sign);\r\n        formatedNumber = symbol.format(arr, symbol.sign);\r\n\r\n        return formatedNumber.trim().replace(' ', '&nbsp;');\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns an ammount formatted with the specified function (Format.toAmount for example)\r\n    // followed by the specified currency (if any).\r\n    //--------------------------------------------------------------------\r\n    toAmountWithCurrency: function (formatter, value, currency, isCurrencyBeforeValue) {\r\n        if (!formatter) {\r\n            formatter = Format.toAmount;\r\n        }\r\n\r\n        var formattedAmount = formatter(value);\r\n\r\n        if (currency && formattedAmount !== \"NA\") {\r\n            formattedAmount = isCurrencyBeforeValue\r\n                ? currency + ' ' + formattedAmount\r\n                : formattedAmount + ' ' + currency;\r\n        }\r\n\r\n        return formattedAmount;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns a number as rate, add zero's at the end if needed according to precision.\r\n    // If it gets instrumentId, it checks the decimal length of the specific rate, \r\n    // and according to that it calculates the total length of the rate,\r\n    // else, rate precision default is 7.\r\n    //--------------------------------------------------------------------\r\n    toRate: function (rateValue, needRound, instrumentId, decimals) {\r\n        if (!General.isNumber(rateValue)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        var ratePrecision = 7; // Default rate length\r\n        var rateStr = rateValue.toString();\r\n        var isNegative = rateStr[0] === '-';\r\n        var ratePos = isNegative ? rateStr.substring(1, rateStr.length) : rateStr;\r\n\r\n        if (!General.isDefinedType(decimals)) {\r\n            var instrument = $instrumentsManager.GetInstrument(instrumentId);\r\n            if (instrument) {\r\n                ratePrecision = General.lenBeforeDelimiter(ratePos.toString()) + instrument.DecimalDigit + 1;\r\n            }\r\n        } else {\r\n            ratePrecision = General.lenBeforeDelimiter(ratePos.toString()) + decimals + 1;\r\n        }\r\n\r\n        var rate = needRound ? General.RateRound(ratePos, ratePrecision).toString() : ratePos.toString();\r\n        rate = General.trailingZeros(rate, ratePrecision);\r\n\r\n        return isNegative ? '-' + rate : rate;\r\n    },\r\n\r\n    roundToPip: function (value, pipDigit, precision, dir) {\r\n        pipDigit = pipDigit || 0;\r\n        precision = precision || pipDigit > 0 ? pipDigit : 0;\r\n\r\n        var floatValue = parseFloat(value),\r\n            multiplier = Math.pow(10, pipDigit),\r\n            coefficient = (dir == \">\" ? 0.59 : -0.59),\r\n            pipsValue,\r\n            roundedToPip,\r\n            formattedToDecimals;\r\n\r\n        if (isNaN(floatValue)) {\r\n            return false;\r\n        }\r\n\r\n        pipsValue = floatValue * multiplier;\r\n\r\n        if (dir == \">\" || dir == \"<\") {\r\n            roundedToPip = Math.round(pipsValue + coefficient) / multiplier;\r\n        } else {\r\n            roundedToPip = Math.round(pipsValue) / multiplier;\r\n        }\r\n\r\n        formattedToDecimals = parseFloat(roundedToPip).toFixed(precision);\r\n\r\n        return formattedToDecimals;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns the average rate between bid and ask parameters given\r\n    //--------------------------------------------------------------------\r\n    toMidRate: function (bid, ask) {\r\n        if (!General.isNumber(bid) || !General.isNumber(ask)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        var midRate = (General.toNumeric(bid) + General.toNumeric(ask)) * 10 * 0.05; // Middle rate value calculation\r\n        var midRtPrecision = General.lenBeforeDelimiter(midRate) + // Middle rate length calculation\r\n            General.lenAfterDelimeter(bid) + parseInt(General.lenBeforeDelimiter(bid) < 0 ? 0 : 1);\r\n        var midRtRounded = General.RateRound(midRate, midRtPrecision); // Round rate\r\n\r\n        return General.trailingZeros(midRtRounded, midRtPrecision);\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns time '01:00:00' from date '13/12/2015 01:00:00'\r\n    //--------------------------------------------------------------------\r\n    toTime: function (date) {\r\n        if (General.isNullOrUndefined(date)) {\r\n            return \"\";\r\n        }\r\n\r\n        var timeVector = date.split(\" \");\r\n        var time = timeVector[1];\r\n\r\n        if (!General.isDefinedType(time)) {\r\n            time = '00:00:00';\r\n        }\r\n\r\n        return time;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Shorten the year to 2 digits. Example: for 'August 2016' will \r\n    // return '(August 16) '\r\n    //--------------------------------------------------------------------\r\n    toShortYear: function (monthAndYear) {\r\n        if (General.isNullOrUndefined(monthAndYear) || monthAndYear.trim().length === 0) {\r\n            return \"\";\r\n        }\r\n\r\n        var monthAndYearVector = monthAndYear.split(/\\s+/);\r\n        var year = monthAndYearVector[1];\r\n        var month = monthAndYearVector[0];\r\n\r\n        if (General.isNullOrUndefined(year) || !General.isDefinedType(month)) {\r\n            return \"(\" + monthAndYear + \") \";\r\n        }\r\n\r\n        return \"(\" + month + \" \" + year.substring(2) + \") \";\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns the rounded number without any decimals\r\n    //--------------------------------------------------------------------\r\n    toRoundNumber: function (num) {\r\n        if (!General.isNumber(num)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        return Math.round(num);\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns the number with 2 decimal digits and % sign\r\n    //--------------------------------------------------------------------\r\n    toPercent: function (num, hideNA) {\r\n        if (!General.isNumber(num)) {\r\n            return (hideNA) ? num : \"NA\";\r\n        }\r\n\r\n        num = Math.round(num * 100) / 100;\r\n\r\n        var sNum = String(num),\r\n            t = sNum.split('.');\r\n\r\n        if (t.length == 1) {\r\n            t[0] = t[0] == '-0' ? '0' : t[0];\r\n            return t[0] + '.00%';\r\n        }\r\n        if (t[1].length == 1) {\r\n            return t[0] + '.' + t[1] + '0%';\r\n        }\r\n\r\n        return t[0] + '.' + t[1].substring(0, 2) + '%';\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns the number with precision decimal digits and % sign\r\n    //--------------------------------------------------------------------\r\n    toPercentWithPrecision: function (num, precision) {\r\n        if (!General.isNumber(num)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        precision = precision || 2;\r\n\r\n        num = num.toFixed(precision);\r\n\r\n        return String(num) + \"%\";\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns the number the +/- sign and with 2 decimal digits and % sign\r\n    //--------------------------------------------------------------------\r\n    toSignedPercent: function (num, resultWhenValueIsInvalid) {\r\n        if (!General.isNumber(num)) {\r\n            return General.isNullOrUndefined(resultWhenValueIsInvalid) ? 'NA' : resultWhenValueIsInvalid;\r\n        }\r\n\r\n        var formattedNum = Format.toPercent(num);\r\n\r\n        return ((formattedNum === \"0.00%\" || formattedNum.indexOf('-') >= 0) ? '' : '+') + Format.toPercent(num);\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns the CC number in CC number format, as described(international or local)\r\n    //--------------------------------------------------------------------\r\n    toCCNumber: function (first6, last4) {\r\n        //' International cards format:   <first 6 digits>-XXXX-<last 4 digits>\r\n        //' Local cards format:           XXXX-<last 4 digits>\r\n\r\n        if (last4.length !== 4) {\r\n            return \"NA\";\r\n        }\r\n        if ((first6.length > 0) && (first6.length !== 6)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        return first6 + (first6.length > 0 ? '-' : '') + 'XXXX-' + last4;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    //  Add dot in case a value is in the right range\r\n    //--------------------------------------------------------------------\r\n    addDotInRange: function (value, rangeArray) {\r\n        var newVal = value,\r\n            inRange;\r\n\r\n        for (var i = 0; i < rangeArray.length; i++) {\r\n            var range = rangeArray[i];\r\n            var nearIsSmall = range.near() < range.far();\r\n            var low = nearIsSmall ? range.near() : range.far();\r\n            var high = nearIsSmall ? range.far() : range.near();\r\n            var lowFloor = Math.floor(low);\r\n            var highFloor = Math.floor(high);\r\n            inRange = newVal >= lowFloor && newVal <= highFloor;\r\n            if (inRange) {\r\n                return (newVal + '.');\r\n\r\n            }\r\n        }\r\n        return newVal;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Return the value given with sign (+/-)\r\n    //--------------------------------------------------------------------\r\n    toSignedNumericWithDecimals: function (amount, formatOptions) {\r\n        formatOptions = formatOptions || {};\r\n        formatOptions.decimals = General.isDefinedType(formatOptions.decimals) ? formatOptions.decimals : 2;\r\n        formatOptions.showThousandSeparator = !!formatOptions.showThousandSeparator;\r\n\r\n        var numericValue = General.toNumeric(amount);\r\n\r\n        if (!General.isNumber(numericValue)) {\r\n            return 'NA';\r\n        }\r\n\r\n        var stringValue = numericValue.toFixed(formatOptions.decimals),\r\n            signedValue = stringValue.indexOf(\"-\") !== -1 ? stringValue : \"+\" + stringValue;\r\n\r\n        if (formatOptions.showThousandSeparator) {\r\n            return General.formatNumberWithThousandsSeparator(signedValue);\r\n        }\r\n\r\n        return signedValue;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Return the number divided by 10,000\r\n    //--------------------------------------------------------------------\r\n    toKAmount: function (amount) {\r\n        if (!General.isNumber(amount)) {\r\n            return \"NA\";\r\n        }\r\n        return (Math.round((amount / 1000) * 10000) / 10000).toString();\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns milliseconds converted to second   \r\n    //--------------------------------------------------------------------\r\n    secToMil: function (sec) {\r\n        if (!General.isNumber(sec)) {\r\n            return \"NA\";\r\n        }\r\n        return (sec * 1000).toString();\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    // Returns the rate as it should be displayed  as 10th of pips,\r\n    // both for button display(first, middle, last) and for label display(first, last).\r\n    //--------------------------------------------------------------------\r\n    tenthOfPipSplitRate: function (sRate, instrumentId, specialFontStart, specialFontLength) {\r\n        var retVal = {\r\n            label: { first: '0', last: '0' },\r\n            button: { first: '0', middle: '0', last: '0' }\r\n        };\r\n\r\n        if (!General.isDefinedType(specialFontStart) || !General.isDefinedType(specialFontLength)) {\r\n            var instrument = $instrumentsManager.GetInstrument(instrumentId);\r\n\r\n            if (General.isNullOrUndefined(instrument)) {\r\n                return retVal;\r\n            }\r\n\r\n            specialFontStart = instrument.SpecialFontStart;\r\n            specialFontLength = instrument.SpecialFontLength;\r\n        }\r\n\r\n        var sNum = sRate.toString(),\r\n            SpecialFontStartPositionfromLeft = sNum.length - specialFontStart,\r\n            first = sNum.substring(0, SpecialFontStartPositionfromLeft),\r\n            second = sNum.substring(SpecialFontStartPositionfromLeft, SpecialFontStartPositionfromLeft + specialFontLength),\r\n            third = sNum.substring(SpecialFontStartPositionfromLeft + specialFontLength);\r\n\r\n\r\n        retVal.label.first = first + second;\r\n        retVal.label.last = third;\r\n\r\n        retVal.button.first = first;\r\n        retVal.button.middle = second;\r\n        retVal.button.last = third;\r\n\r\n        return retVal;\r\n    },\r\n\r\n    //--------------------------------------------------------------------\r\n    //   Returns the given value rounded with thousands separator. \r\n    //   if smaller then 10, returns with 1 decimal, if its zero returns “”.\r\n    //--------------------------------------------------------------------\r\n    formatDealAmount: function (value) {\r\n        var valueAsNumber = General.toNumeric(value);\r\n\r\n        if (!General.isNumber(valueAsNumber)) {\r\n            return \"NA\";\r\n        }\r\n\r\n        if (valueAsNumber == 0) {\r\n            return \"\";\r\n        }\r\n\r\n        if (valueAsNumber < 10) {\r\n            return valueAsNumber.toFixed(1);\r\n        }\r\n\r\n        return General.formatNumberWithThousandsSeparator(Math.round(valueAsNumber));\r\n    },\r\n\r\n    toDateTimeUTC: function (eventTime) {\r\n        var eventDate = new Date(eventTime);\r\n        return eventDate.ExtractDateShortYearUTC() + ' ' + eventDate.ExtractTimeUTC();\r\n    },\r\n\r\n    toDateTime: function (eventTime) {\r\n        if (!eventTime) {\r\n            return \"\";\r\n        }\r\n\r\n        var eventDate = new Date(eventTime);\r\n        return eventDate.ExtractDateShortYear() + ' ' + eventDate.ExtractTime();\r\n    },\r\n\r\n    toTimehhmm: function (eventTime) {\r\n        var eventDate = new Date(eventTime);\r\n        return eventDate.ExtractTimeUTC();\r\n    },\r\n\r\n    toLocaleDate: function (eventTime, lcid) {\r\n        var options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };\r\n        var eventDate = new Date(eventTime.split(\"T\")[0]);\r\n        return eventDate.toLocaleDateString(lcid, options);\r\n    },\r\n\r\n    rateWithPipTemplate: function (rate, instrumentId, smallFontClass) {\r\n        smallFontClass = smallFontClass || 'tenths';\r\n        if (General.isNullOrUndefined(rate) || General.isNullOrUndefined(instrumentId)) {\r\n            return 'N/A';\r\n        }\r\n        return '<span>' + Format.tenthOfPipSplitRate(rate, instrumentId).label.first\r\n            + '</span>'\r\n            + '<span class=\"' + smallFontClass + '\">'\r\n            + Format.tenthOfPipSplitRate(rate, instrumentId).label.last + '</span>';\r\n    },\r\n\r\n    toFullDateTimeUTC: function (time) {\r\n        var date = new Date(time);\r\n        return date.ExtractUTCDateLongYear() + ' ' + date.ExtractFullTimeUTC();\r\n    },\r\n\r\n    numberAddThousandSeparator: function (num, decimals, displayToken) {\r\n        var amount = General.toNumeric(num);\r\n\r\n        displayToken = !General.isDefinedType(displayToken) ? \"NA\" : displayToken;\r\n        decimals = General.isNumber(General.toNumeric(decimals)) ? General.toNumeric(decimals) : 0;\r\n\r\n        if (!General.isNumber(amount)) {\r\n            return displayToken;\r\n        }\r\n\r\n        amount = decimals > 0 ? amount.toFixed(decimals) : Math.floor(amount);\r\n\r\n        return General.formatNumberWithThousandsSeparator(amount);\r\n    }\r\n};\ndefine(\"handlers/format\", function(){});\n\n",
    "(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/EventRaiser',\r\n            [\r\n                'jquery'\r\n            ], factory);\r\n    } else if (typeof exports === 'object') {\r\n        // CommonJS\r\n        module.exports = factory();\r\n    } else {\r\n        // running in browser\r\n        root.TrackingEventRaiser = factory;\r\n    }\r\n})(typeof self !== 'undefined' ? self : this,\r\n    function TrackingEventRaiser() {\r\n        // IE<9 Date.now() fix\r\n        Date.now = Date.now || function () { return + new Date(); };\r\n\r\n        /**\r\n         * Adds a leading zero to a number\r\n         * @param {Number} number \r\n         * @returns {String}\r\n         */\r\n        function padNumber(number) {\r\n            return ('0' + number).slice(-2);\r\n        }\r\n\r\n        /**\r\n         * Formats a Date object as a `dd/mm/yyyy hh:mm:ss` string\r\n         * @param {Date} date \r\n         * @returns {String} \r\n         */\r\n        function formatEventDate(date) {\r\n            var formattedDateString = padNumber(date.getDate()) + '/' +\r\n                padNumber(date.getMonth() + 1) + '/' +\r\n                date.getFullYear() + ' ' +\r\n                padNumber(date.getHours()) + ':' +\r\n                padNumber(date.getMinutes()) + ':' +\r\n                padNumber(date.getSeconds());\r\n\r\n            return formattedDateString;\r\n        }\r\n\r\n        function getEventTime() {\r\n            var eventTime;\r\n\r\n            if (typeof $cacheManager !== 'undefined') {\r\n                eventTime = formatEventDate($cacheManager.ServerTime());\r\n            }\r\n            else {\r\n                eventTime = formatEventDate(new Date(Date.now() + (new Date().getTimezoneOffset() * 60 * 1000)));\r\n            }\r\n\r\n            return eventTime;\r\n        }\r\n\r\n        var eventData = {};\r\n\r\n        function addEventTime() {\r\n            eventData.EventTime = getEventTime();\r\n        }\r\n\r\n        function callGoogleApi() {\r\n            try {\r\n                window.dataLayer.push(getEventDataClone());\r\n            }\r\n            catch (ex) {\r\n                ErrorManager.onError('callGoogleApi', 'Google Tag Manager has failed for event: ' + eventData.event, eErrorSeverity.high);\r\n            }\r\n        }\r\n\r\n        function getEventDataClone() {\r\n            return $.extend(true, {}, eventData);\r\n        }\r\n\r\n        function clean() {\r\n            for (var prop in eventData) {\r\n                if (eventData.hasOwnProperty(prop)) {\r\n                    delete eventData[prop];\r\n                }\r\n            }\r\n        }\r\n\r\n        function raiseEvent() {\r\n            addEventTime();\r\n            callGoogleApi();\r\n            clean();\r\n        }\r\n\r\n        return {\r\n            eventData: eventData,\r\n            raiseEvent: raiseEvent,\r\n            formatEventDate: formatEventDate\r\n        };\r\n    }\r\n);\r\n\n",
    "var PerformanceDataCollector = function PerformanceDataCollector() {\r\n    var timestamps = {},\r\n        resourceList = (window.performance && window.performance.getEntriesByType) ? window.performance.getEntriesByType(\"resource\") : [];\r\n\r\n    function registerEventTimestamp(event) {\r\n        timestamps[event] = Date.now();\r\n    }\r\n\r\n    function getResourceTiming(resourceNamePattern) {\r\n        var resourceNameRegex = new RegExp(resourceNamePattern, \"gi\");\r\n        var duration = 0;\r\n\r\n        var resources = resourceList.filter(function(item) {\r\n            // filter by resource name\r\n            return resourceNameRegex.test(item.name);\r\n        });\r\n\r\n        if (resources && resources.length) {\r\n            resources.forEach(function(item) {\r\n                duration += (item.responseEnd - item.startTime);\r\n            });\r\n        }\r\n\r\n        return duration;\r\n    }\r\n\r\n    function isNewVersion() {\r\n        var isNew = false;\r\n\r\n        if (StorageFactory.isSupported(StorageFactory.eStorageType.local)) {\r\n            var cookieCurrentVersion = CookieHandler.ReadCookie('Version');\r\n            var localStorage = StorageFactory(StorageFactory.eStorageType.local);\r\n            var localStorageVersion = localStorage.getItem('fxnet_version');\r\n\r\n            if (localStorageVersion !== cookieCurrentVersion) {\r\n                isNew = true;\r\n                localStorage.setItem('fxnet_version', cookieCurrentVersion);\r\n            };\r\n        }\r\n\r\n        return isNew;\r\n    }\r\n\r\n    function loadEventEnd() {\r\n        var loadEventEndValue = \"\";\r\n\r\n        try {\r\n            loadEventEndValue = window.performance.timing.loadEventEnd;\r\n        } catch (e) {\r\n            ErrorManager.onWarning(\"window.performance.timing.loadEventEnd\",\r\n                \"window.performance.timing.loadEventEnd is not supported in this OS\");\r\n        }\r\n\r\n        return loadEventEndValue;\r\n    }\r\n\r\n    function responseEnd() {\r\n        var responseEndValue = \"\";\r\n\r\n        try {\r\n            responseEndValue = window.performance.timing.responseEnd;\r\n        } catch (e) {\r\n            ErrorManager.onWarning(\"window.performance.timing.responseEnd\",\r\n                \"window.performance.timing.responseEnd is not supported in this OS\");\r\n        }\r\n\r\n        return responseEndValue;\r\n    }\r\n\r\n    function fetchStart() {\r\n        var fetchStartValue = \"\";\r\n\r\n        try {\r\n            fetchStartValue = window.performance.timing.fetchStart;\r\n        } catch (e) {\r\n            ErrorManager.onWarning(\"window.performance.timing.responseEnd\",\r\n                \"window.performance.timing.fetchStart is not supported in this OS\");\r\n        }\r\n\r\n        return fetchStartValue;\r\n    }\r\n\r\n    return {\r\n        Timestamps: timestamps,\r\n        getResourceTiming: getResourceTiming,\r\n        isNewVersion: isNewVersion,\r\n        registerEventTimestamp: registerEventTimestamp,\r\n        loadEventEnd: loadEventEnd,\r\n        responseEnd: responseEnd,\r\n        fetchStart: fetchStart\r\n    };\r\n};\r\n\r\ndefine(\"tracking/PerformanceDataCollector\", [],function(){return PerformanceDataCollector() });\r\n\n",
    "/* global General */\r\nvar Dictionary = (function Dictionary() {\r\n    var _staticContent = {};\r\n\r\n    function getResourceName(resourceName) {\r\n        var _resourceName = resourceName || 'contentdata';\r\n        return _resourceName.toLowerCase()\r\n    }\r\n\r\n    function getItem(key, resourceName, defaultValue) {\r\n        resourceName = getResourceName(resourceName);\r\n\r\n        var value = '';\r\n\r\n        if (_staticContent.hasOwnProperty(resourceName)) {\r\n            value = _staticContent[resourceName][key];\r\n        }\r\n\r\n        if (!value && !defaultValue) {\r\n            value = String.format(\"***{0}\", key);\r\n            //  var warningMessage = 'Missing content for key: ' + key + ' and resource: ' + resourceName + ' on platform: ' + UrlResolver.getApplicationType();\r\n            // Logger.warn(\"DictionaryContent\", warningMessage, General.emptyFn, eErrorSeverity.warning);\r\n        }\r\n\r\n        if (!General.isNullOrUndefined(value)) {\r\n            if (!General.isNullOrUndefined(value)) {\r\n                return value;\r\n            }\r\n            else {\r\n                if (!General.isNullOrUndefined(defaultValue)) {\r\n                    return defaultValue;\r\n                }\r\n                else {\r\n                    return value;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return defaultValue || \"\";\r\n        }\r\n    }\r\n\r\n    function getAllItemsForResource(resourceName) {\r\n        var value = null;\r\n\r\n        if (_staticContent.hasOwnProperty(resourceName)) {\r\n            value = _staticContent[resourceName];\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    function getAllKeys(resourceName) {\r\n        var value = null;\r\n\r\n        resourceName = getResourceName(resourceName);\r\n\r\n        if (_staticContent.hasOwnProperty(resourceName)) {\r\n            value = Object.keys(_staticContent[resourceName]);\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    function getGlobalItem(key, defaultValue) {\r\n        return getItem(key, 'contentdata', defaultValue);\r\n    }\r\n\r\n    function addResource(resourceName, content) {\r\n        resourceName = getResourceName(resourceName);\r\n        _staticContent[resourceName] = content;\r\n    }\r\n\r\n    function getTemplate(key) {\r\n        var templatesStore = getInitializedTemplatesStore();\r\n        var value = templatesStore[key];\r\n\r\n        if (!value) {\r\n            value = String.format(\"***{0}\", key);\r\n        }\r\n\r\n        templatesStore[key] = value;\r\n\r\n        return value;\r\n    }\r\n\r\n    function getInitializedTemplatesStore() {\r\n        if (!systemInfo.templates) {\r\n            systemInfo.templates = {};\r\n        }\r\n\r\n        return systemInfo.templates;\r\n    }\r\n\r\n    function valueIsEmpty(key, resourceName) {\r\n        var _resourceName = getResourceName(resourceName);\r\n\r\n        if (!_staticContent.hasOwnProperty(_resourceName)) {\r\n            return true;\r\n        }\r\n\r\n        var value = _staticContent[_resourceName][key];\r\n\r\n        return General.isEmptyValue(value);\r\n    }\r\n\r\n    return {\r\n        AddResource: addResource,\r\n        GetItem: getItem,\r\n        GetAllKeys: getAllKeys,\r\n        GetAllItemsForResource: getAllItemsForResource,\r\n        GetGlobalItem: getGlobalItem,\r\n        GetTemplate: getTemplate,\r\n        ValueIsEmpty: valueIsEmpty\r\n    };\r\n}());\r\n\r\ndefine(\"Dictionary\", [],function () { return Dictionary });\n",
    "var TDelegate = function () {\r\n    var _items = [];\r\n\r\n    function add(func) {\r\n        if (typeof func === \"function\") {\r\n            _items.push(func);\r\n        }\r\n    }\r\n\r\n    function invoke() {\r\n        var tmpHandlers = _items.slice(0);\r\n        var len = tmpHandlers.length;\r\n        var args = [];\r\n\r\n        for (var i = 0, length = arguments.length; i < length; i++) {\r\n            args[i] = arguments[i];\r\n        }\r\n\r\n        for (var j = 0; j < len; j++) {\r\n            if (typeof tmpHandlers[j] === \"function\") {\r\n                tmpHandlers[j].apply(null, args);\r\n            }\r\n        }\r\n\r\n        tmpHandlers.length = 0;\r\n    }\r\n\r\n    function remove(func) {\r\n        var len = _items.length;\r\n\r\n        for (var i = 0; i < len; i++) {\r\n            if (_items[i] === func) {\r\n                _items.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    function flush() {\r\n        _items.splice(0);\r\n    }\r\n\r\n    function count() {\r\n        return _items.length;\r\n    }\r\n\r\n    return {\r\n        Add: add,\r\n        Invoke: invoke,\r\n        Remove: remove,\r\n        Flush: flush,\r\n        Count: count,\r\n    }\r\n}\r\n\r\ndefine(\"handlers/Delegate\", [],function () { return TDelegate });\r\n\n",
    "function Instrument(instrumentInfo, hasWeightedVolumeFactor, isOvernightOnForex) {\r\n    this.id = instrumentInfo[eInstruments.id];\r\n    this.ccyPair = instrumentInfo[eInstruments.ccyPair];\r\n    this.amountGroupId = instrumentInfo[eInstruments.amountGroupId];\r\n    this.factor = instrumentInfo[eInstruments.factor];\r\n    this.isTradable = instrumentInfo[eInstruments.tradable] == 1;\r\n    this.hasSignal = instrumentInfo[eInstruments.hasSignals] == 1;\r\n    this.signalName = instrumentInfo[eInstruments.signalName];\r\n    this.dealMinMaxAmounts = [];\r\n    this.defaultDealSize = instrumentInfo[eInstruments.defaultDealSize];\r\n    this.maxDeal = instrumentInfo[eInstruments.maxDeal];\r\n    this.SLMinDistance = instrumentInfo[eInstruments.SLMinDistance];\r\n    this.TPMinDistance = instrumentInfo[eInstruments.TPMinDistance];\r\n\r\n    this.DecimalDigit = instrumentInfo[eInstruments.DecimalDigit];\r\n    this.PipDigit = instrumentInfo[eInstruments.PipDigit];\r\n    this.SpecialFontStart = instrumentInfo[eInstruments.SpecialFontStart];\r\n    this.SpecialFontLength = instrumentInfo[eInstruments.SpecialFontLength];\r\n\r\n    this.instrumentTypeId = instrumentInfo[eInstruments.instrumentTypeId];\r\n    this.assetTypeId = instrumentInfo[eInstruments.assetTypeId];\r\n    this.expirationDate = instrumentInfo[eInstruments.expirationDate] === '' ? null : instrumentInfo[eInstruments.expirationDate];\r\n    //--------- future -----------------------------\r\n\r\n    this.isFuture = this.assetTypeId === eAssetType.Future;\r\n    this.isShare = this.assetTypeId === eAssetType.Share;\r\n    this.isForex = this.assetTypeId === eAssetType.Forex;\r\n    this.isStock = this.instrumentTypeId === eInstrumentType.Stocks;\r\n\r\n    this.futureValueDate = null;\r\n\r\n    //-------- symbols -----------------------------\r\n\r\n    this.baseSymbol = instrumentInfo[eInstruments.baseSymbolId];\r\n    this.otherSymbol = instrumentInfo[eInstruments.otherSymbolId];\r\n    this.baseSymbolName = instrumentInfo[eInstruments.ccyPair].toString().split(/\\//g)[0];\r\n    this.otherSymbolName = instrumentInfo[eInstruments.ccyPair].toString().split(/\\//g)[1];\r\n\r\n    this.exchangeInstrumentName = instrumentInfo[eInstruments.exchangeInstrumentName];\r\n    this.exchange = instrumentInfo[eInstruments.exchange];\r\n    this.contractMonthAndYear = instrumentInfo[eInstruments.contractMonthAndYear];\r\n    this.instrumentEnglishName = instrumentInfo[eInstruments.instrumentEnglishName];\r\n    this.weightedVolumeFactor = hasWeightedVolumeFactor ? parseFloat(instrumentInfo[eInstruments.weightedVolumeFactor]) : 1;\r\n    this.eventDate = instrumentInfo[eInstruments.eventDate];\r\n    this.eventAmount = instrumentInfo[eInstruments.eventAmount];\r\n    this.marketPriceTolerance = instrumentInfo[eInstruments.marketPriceTolerance];\r\n\r\n    this.isOvernightOnForex = isOvernightOnForex;\r\n}\r\n\r\ndefine(\"handlers/Instrument\", [],function(){ return Instrument });\n",
    "function StringBuilder() {\r\n    this._length = 0;\r\n    this._buffer = [];\r\n}\r\n\r\nStringBuilder.prototype.append = function(text) {\r\n    this._buffer[this._length] = text;\r\n    this._length += 1;\r\n};\r\n\r\nStringBuilder.prototype.toString = function() {\r\n    return this._buffer.join(\"\");\r\n};\r\n\r\nStringBuilder.prototype.isEmpty = function() {\r\n    return this._length === 0;\r\n};\ndefine(\"handlers/StringBuilder\", function(){});\n\n",
    "define('dataaccess/dalorder',[\r\n\t\"handlers/Ajaxer\",\r\n\t\"JSONHelper\",\r\n\t\"knockout\",\r\n\t\"global/UrlResolver\",\r\n\t\"handlers/general\",\r\n\t\"handlers/StringBuilder\",\r\n\t\"extensions/Date\",\r\n], function (tAjaxer, jsonhelper, ko, UrlResolver, General) {\r\n\tvar _lastTimeRequest = timeStamp();\r\n\r\n\tfunction openDeal(newDeal, callback) {\r\n\t\tvar ajaxer = new tAjaxer();\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = eOrderAction.NewDeal;\r\n\t\t\tvar result = analyzeResponse(responseText, eOrderActionType.NewDeal);\r\n\r\n\t\t\tcallback(result, callerId, newDeal.instrumentID, newDeal);\r\n\t\t};\r\n\r\n\t\tvar sb = new StringBuilder();\r\n\r\n\t\tsb.append(String.format(\"DealType={0}&\", newDeal.dealType));\r\n\t\tsb.append(String.format(\"InstrumentId={0}&\", newDeal.instrumentID));\r\n\t\tsb.append(String.format(\"Amount={0}&\", newDeal.amount));\r\n\t\tsb.append(String.format(\"MarketRate={0}&\", newDeal.marketRate));\r\n\t\tsb.append(String.format(\"OtherRateSeen={0}&\", newDeal.otherRateSeen));\r\n\t\tsb.append(String.format(\"OrderDirection={0}&\", newDeal.orderDir));\r\n\t\tsb.append(String.format(\"TakeProfitRate={0}&\", newDeal.tpRate));\r\n\t\tsb.append(String.format(\"StopLossRate={0}&\", newDeal.slRate));\r\n\t\tsb.append(String.format(\"SecurityToken={0}\", systemInfo.securityToken));\r\n\r\n\t\tajaxer.post(\"dalOrder/openDeal\", \"Deals/OpenDeal\", sb.toString(), OnLoadComplete, function (error) {\r\n\t\t\tErrorManager.onError(\"dalOrder/openDeal\", error.message, eErrorSeverity.medium);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction closeDeals(items, callback, config) {\r\n\t\tvar ajaxer = new tAjaxer(),\r\n\t\t\tfailCallback =\r\n\t\t\t\tconfig && config.hasOwnProperty(\"failCallback\") && typeof config.failCallback === \"function\"\r\n\t\t\t\t\t? config.failCallback\r\n\t\t\t\t\t: null;\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = eOrderAction.CloseDeal;\r\n\r\n\t\t\tvar result = analyzeResponse(responseText, eOrderActionType.CloseDeal);\r\n\t\t\tcallback(result, callerId, unWrappedItems);\r\n\t\t};\r\n\r\n\t\tvar sb = [],\r\n\t\t\tunWrappedItems = [];\r\n\t\tfor (var i = 0, len = items.length; i < len; i++) {\r\n\t\t\tunWrappedItems[i] = ko.toJS(items[i]);\r\n\t\t\tsb.push(\r\n\t\t\t\tString.format(\r\n\t\t\t\t\t\"{0}#{1}#{2}\",\r\n\t\t\t\t\tunWrappedItems[i].positionNumber,\r\n\t\t\t\t\tunWrappedItems[i].spotRate,\r\n\t\t\t\t\tunWrappedItems[i].fwPips\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tvar positions = sb.join(\"_\");\r\n\r\n\t\tajaxer.post(\r\n\t\t\t\"dalOrder/closeDeals\",\r\n\t\t\t\"Deals/CloseDeals\",\r\n\t\t\tString.format(\"positions={0}&SecurityToken={1}\", positions, systemInfo.securityToken),\r\n\t\t\tOnLoadComplete,\r\n\t\t\tfunction (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/closeDeals\", error.message, eErrorSeverity.medium);\r\n\t\t\t\tif (failCallback) {\r\n\t\t\t\t\tfailCallback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction addLimit(limit, callback, controller) {\r\n\t\tvar ajaxer = new tAjaxer(),\r\n\t\t\tdata = {\r\n\t\t\t\tlimit: limit,\r\n\t\t\t\tSecurityToken: systemInfo.securityToken,\r\n\t\t\t};\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = limit.mode === eLimitMode.PriceAlert ? eOrderAction.NewPriceAlert : eOrderAction.NewLimit;\r\n\t\t\tvar result = analyzeResponse(\r\n\t\t\t\tresponseText,\r\n\t\t\t\tlimit.mode === eLimitMode.PriceAlert ? eOrderActionType.NewPriceAlert : eOrderActionType.NewLimit\r\n\t\t\t);\r\n\r\n\t\t\tcallback(result, callerId, limit.instrumentID, limit);\r\n\t\t};\r\n\r\n\t\t//--------------------------------\r\n\t\tif (controller) {\r\n\t\t\tajaxer.jsonPost(\"dalOrder/addLimit\", \"Limits/AddLimit\", JSON.stringify(data), OnLoadComplete, function (\r\n\t\t\t\terror\r\n\t\t\t) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/addLimit\", error.message, eErrorSeverity.medium);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tajaxer.post(\r\n\t\t\t\t\"dalOrder/addLimit\",\r\n\t\t\t\t\"api/limits/AddLimit\",\r\n\t\t\t\tJSON.stringify(data),\r\n\t\t\t\tOnLoadComplete,\r\n\t\t\t\tfunction (error) {\r\n\t\t\t\t\tErrorManager.onError(\"dalOrder/addLimit\", error.message, eErrorSeverity.medium);\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction editLimit(limit, callback) {\r\n\t\tvar ajaxer = new tAjaxer(),\r\n\t\t\tdata = {\r\n\t\t\t\tlimit: limit,\r\n\t\t\t\tSecurityToken: systemInfo.securityToken,\r\n\t\t\t};\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = eOrderAction.EditLimit;\r\n\t\t\tvar result = analyzeResponse(responseText, eOrderActionType.EditLimit);\r\n\r\n\t\t\tcallback(result, callerId, limit);\r\n\t\t};\r\n\r\n\t\tajaxer.post(\r\n\t\t\t\"dalOrder/editLimit\",\r\n\t\t\t\"api/limits/EditLimit\",\r\n\t\t\tJSON.stringify(data),\r\n\t\t\tOnLoadComplete,\r\n\t\t\tfunction (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/editLimit\", error.message, eErrorSeverity.medium);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction saveLimits(limits, callback) {\r\n\t\tvar ajaxer = new tAjaxer(),\r\n\t\t\tdata = {\r\n\t\t\t\tlimits: limits,\r\n\t\t\t\tSecurityToken: systemInfo.securityToken,\r\n\t\t\t};\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = eOrderAction.SaveLimits;\r\n\t\t\tvar result = analyzeResponse(responseText);\r\n\t\t\tcallback(result, callerId, null, limits);\r\n\t\t};\r\n\r\n\t\tajaxer.post(\r\n\t\t\t\"dalOrder/editLimit\",\r\n\t\t\t\"api/limits/SaveLimits\",\r\n\t\t\tJSON.stringify(data),\r\n\t\t\tOnLoadComplete,\r\n\t\t\tfunction (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/saveLimits\", error.message, eErrorSeverity.medium);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction deleteLimit(limit, callback) {\r\n\t\tvar ajaxer = new tAjaxer(),\r\n\t\t\tdata = {\r\n\t\t\t\tlimit: limit,\r\n\t\t\t\tSecurityToken: systemInfo.securityToken,\r\n\t\t\t};\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = eOrderAction.DeleteLimit;\r\n\r\n\t\t\tvar result = analyzeResponse(\r\n\t\t\t\tresponseText,\r\n\t\t\t\tlimit.mode === eLimitMode.PriceAlert ? eOrderActionType.DeletePriceAlert : eOrderActionType.DeleteLimit\r\n\t\t\t);\r\n\t\t\tcallback(result, callerId, limit);\r\n\t\t};\r\n\r\n\t\tajaxer.post(\r\n\t\t\t\"dalOrder/deleteLimit\",\r\n\t\t\t\"api/limits/DeleteLimit\",\r\n\t\t\tJSON.stringify(data),\r\n\t\t\tOnLoadComplete,\r\n\t\t\tfunction (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/deleteLimit\", error.message, eErrorSeverity.medium);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction deleteLimits(limits, callback) {\r\n\t\tvar ajaxer = new tAjaxer(),\r\n\t\t\tdata = {\r\n\t\t\t\tlimits: limits,\r\n\t\t\t\tSecurityToken: systemInfo.securityToken,\r\n\t\t\t};\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = eOrderAction.DeleteLimit;\r\n\r\n\t\t\tvar result = analyzeResponse(\r\n\t\t\t\tresponseText,\r\n\t\t\t\tlimits[0].mode === eLimitMode.PriceAlert\r\n\t\t\t\t\t? eOrderActionType.DeletePriceAlert\r\n\t\t\t\t\t: eOrderActionType.DeleteLimit\r\n\t\t\t);\r\n\t\t\tcallback(result, callerId, limits);\r\n\t\t};\r\n\r\n\t\tajaxer.post(\r\n\t\t\t\"dalOrder/deleteLimits\",\r\n\t\t\t\"api/limits/DeleteLimits\",\r\n\t\t\tJSON.stringify(data),\r\n\t\t\tOnLoadComplete,\r\n\t\t\tfunction (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/deleteLimits\", error.message, eErrorSeverity.medium);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction deletePriceAlerts(priceAlerts, callback) {\r\n\t\tvar ajaxer = new tAjaxer(),\r\n\t\t\tdata = {\r\n\t\t\t\tlimits: priceAlerts,\r\n\t\t\t\tSecurityToken: systemInfo.securityToken,\r\n\t\t\t};\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar OnLoadComplete = function (responseText) {\r\n\t\t\tvar callerId = eOrderAction.DeleteLimit;\r\n\r\n\t\t\tvar result = analyzeResponse(\r\n\t\t\t\tresponseText,\r\n\t\t\t\tpriceAlerts[0].mode === eLimitMode.PriceAlert\r\n\t\t\t\t\t? eOrderActionType.DeletePriceAlert\r\n\t\t\t\t\t: eOrderActionType.DeleteLimit\r\n\t\t\t);\r\n\t\t\tcallback(result, callerId, priceAlerts);\r\n\t\t};\r\n\r\n\t\tajaxer.post(\r\n\t\t\t\"dalOrder/deleteLimits\",\r\n\t\t\t\"api/limits/DeleteLimits\",\r\n\t\t\tJSON.stringify(data),\r\n\t\t\tOnLoadComplete,\r\n\t\t\tfunction (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/deleteLimits\", error.message, eErrorSeverity.medium);\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tfunction cashBackVolumes() {\r\n\t\tvar ajaxer = new tAjaxer();\r\n\t\t_lastTimeRequest = timeStamp();\r\n\r\n\t\tvar params = new StringBuilder();\r\n\t\tparams.append(String.format(\"SecurityToken={0}\", systemInfo.securityToken));\r\n\r\n\t\tvar noCache = false;\r\n\t\treturn ajaxer.promises\r\n\t\t\t.get(\r\n\t\t\t\t\"dalOrder/cashBackVolumes\",\r\n\t\t\t\t\"Deals/CashBackGetVolumes\",\r\n\t\t\t\tparams.toString(),\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnoCache\r\n\t\t\t)\r\n\t\t\t.then(function (responseText) {\r\n\t\t\t\tvar result = analyzeResponse(responseText, eOrderActionType.CashBack);\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t})\r\n\t\t\t.fail(function (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/cashBackVolumes\", error.message, eErrorSeverity.medium);\r\n\r\n\t\t\t\tthrow error;\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction getDealMarginDetails(instrumentId) {\r\n\t\t_lastTimeRequest = timeStamp();\r\n\t\tvar ajaxer = tAjaxer();\r\n\r\n\t\tvar params = new StringBuilder();\r\n\t\tparams.append(String.format(\"instrumentId={0}\", instrumentId));\r\n\r\n\t\treturn ajaxer.promises\r\n\t\t\t.get(\r\n\t\t\t\t\"dalOrder/getDealMarginDetails\",\r\n\t\t\t\t\"Deals/GetDealMarginDetails\",\r\n\t\t\t\tparams.toString(),\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\t1,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tfalse\r\n\t\t\t)\r\n\t\t\t.then(analyzeResponse)\r\n\t\t\t.fail(function (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/getDealMarginDetails\", error.message, eErrorSeverity.medium);\r\n\r\n\t\t\t\tthrow error;\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction getMinDealAmounts() {\r\n\t\tvar ajaxer = new tAjaxer();\r\n\r\n\t\tvar minDealGroupId = UrlResolver.getMinDealGroupId();\r\n\t\tvar minDealsVersion = UrlResolver.getMinDealsVersion();\r\n\t\tvar minDealsHash = UrlResolver.getMinDealsHash();\r\n\r\n\t\tvar staticInitialDataMinDealAmountsUrl = function () {\r\n\t\t\treturn UrlResolver.getStaticInitialDataMinDealAmountsUrl(minDealGroupId, minDealsVersion, minDealsHash);\r\n\t\t};\r\n\r\n\t\tvar initialDataMinDealAmountsFromOriginUrl = function () {\r\n\t\t\treturn \"InitialData/MinDealAmountsFromOrigin?groupId=\" + minDealGroupId;\r\n\t\t};\r\n\r\n\t\treturn ajaxer.promises\r\n\t\t\t.get(\"TDALNotificationData/getMinDealAmounts\", staticInitialDataMinDealAmountsUrl())\r\n\t\t\t.then(analyzeResponse)\r\n\t\t\t.fail(function (headers) {\r\n\t\t\t\tErrorManager.onWarning(\r\n\t\t\t\t\t\"Min deal group version sync retry failed. Url: \" +\r\n\t\t\t\t\t\tstaticInitialDataMinDealAmountsUrl() +\r\n\t\t\t\t\t\t\". Headers: \" +\r\n\t\t\t\t\t\theaders\r\n\t\t\t\t);\r\n\r\n\t\t\t\treturn ajaxer.promises\r\n\t\t\t\t\t.get(\"TDALNotificationData/getMinDealAmounts\", initialDataMinDealAmountsFromOriginUrl())\r\n\t\t\t\t\t.then(analyzeResponse);\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction getOvernightFinancing(instrumentId, amount) {\r\n\t\t_lastTimeRequest = timeStamp();\r\n\t\tvar ajaxer = tAjaxer();\r\n\r\n\t\tvar params = new StringBuilder();\r\n\t\tparams.append(String.format(\"instrumentId={0}&\", instrumentId));\r\n\t\tparams.append(String.format(\"amount={0}\", amount));\r\n\r\n\t\treturn ajaxer.promises\r\n\t\t\t.get(\r\n\t\t\t\t\"dalOrder/getOvernightFinancing\",\r\n\t\t\t\t\"Deals/GetOvernightFinancing\",\r\n\t\t\t\tparams.toString(),\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull,\r\n\t\t\t\tfalse\r\n\t\t\t)\r\n\t\t\t.then(function (responseText) {\r\n\t\t\t\tvar result = analyzeResponse(responseText, eOrderActionType.GetOvernightFinancing);\r\n\r\n\t\t\t\treturn result;\r\n\t\t\t})\r\n\t\t\t.fail(function (error) {\r\n\t\t\t\tErrorManager.onError(\"dalOrder/getOvernightFinancing\", error.message, eErrorSeverity.medium);\r\n\r\n\t\t\t\tthrow error;\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction analyzeResponse(responseText, caller) {\r\n\t\tvar results = jsonhelper.STR2JSON(\"dalOreder:analyzeResponse\", responseText),\r\n\t\t\targs;\r\n\r\n\t\tif (!results) {\r\n\t\t\treturn [{ status: 0, msgKey: \"OrderError1\", itemId: \"\", arguments: null }];\r\n\t\t}\r\n\r\n\t\tresults.arguments = null;\r\n\t\t//if not array of results - make it as array if one result\r\n\t\tif (!results.length) {\r\n\t\t\tresults = [results];\r\n\t\t}\r\n\r\n\t\tfor (var i = 0, ii = results.length; i < ii; i++) {\r\n\t\t\tvar resultI = results[i];\r\n\r\n\t\t\tupdateMsgKey(resultI, General.isDefinedType(caller) ? caller : resultI.action);\r\n\r\n\t\t\tresultI.arguments = null;\r\n\r\n\t\t\t// parse additional arguments if exists\r\n\t\t\tif (resultI.responseArgumentsJson) {\r\n\t\t\t\targs = jsonhelper.STR2JSON(\"dalOreder:analyzeResponse\", resultI.responseArgumentsJson);\r\n\r\n\t\t\t\tif (Array.isArray(args)) {\r\n\t\t\t\t\tresultI.arguments = args;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresultI.arguments = [];\r\n\t\t\t\t\tresultI.arguments.push(args);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t}\r\n\r\n\tfunction updateMsgKey(result, caller) {\r\n\t\tif (result.status == eResult.Success) {\r\n\t\t\tif (caller == eOrderActionType.NewPriceAlert) {\r\n\t\t\t\tresult.msgKey = \"SuccessPriceAlertAdd\";\r\n\t\t\t} else if (caller == eOrderActionType.NewLimit) {\r\n\t\t\t\tresult.msgKey = \"SuccessLimitAdd\";\r\n\t\t\t} else if (caller == eOrderActionType.EditLimit) {\r\n\t\t\t\tresult.msgKey = \"SuccessLimitEdit\";\r\n\t\t\t} else if (caller == eOrderActionType.DeleteLimit) {\r\n\t\t\t\tresult.msgKey = \"SuccessLimitDelete\";\r\n\t\t\t} else if (caller == eOrderActionType.DeletePriceAlert) {\r\n\t\t\t\tresult.msgKey = \"SuccessPriceAlertDelete\";\r\n\t\t\t} else if (caller == eOrderActionType.NewDeal) {\r\n\t\t\t\tresult.msgKey = \"SuccessDealAdd\";\r\n\t\t\t} else if (caller == eOrderActionType.CloseDeal) {\r\n\t\t\t\tresult.msgKey = \"SuccessDealClose\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tresult.msgKey = result.result;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction lastTimeRequest() {\r\n\t\treturn _lastTimeRequest;\r\n\t}\r\n\r\n\tfunction resetTimeRequest() {\r\n\t\t_lastTimeRequest = timeStamp();\r\n\t}\r\n\r\n\treturn {\r\n\t\tOpenDeal: openDeal,\r\n\t\tCloseDeals: closeDeals,\r\n\t\tAddLimit: addLimit,\r\n\t\tEditLimit: editLimit,\r\n\t\tSaveLimits: saveLimits,\r\n\t\tDeleteLimit: deleteLimit,\r\n\t\tDeleteLimits: deleteLimits,\r\n\t\tDeletePriceAlerts: deletePriceAlerts,\r\n\t\tlastTimeRequest: lastTimeRequest,\r\n\t\tresetTimeRequest: resetTimeRequest,\r\n\t\tCashBackVolumesInfo: cashBackVolumes,\r\n\t\tGetDealMarginDetails: getDealMarginDetails,\r\n\t\tGetOvernightFinancing: getOvernightFinancing,\r\n\t\tGetMinDealAmounts: getMinDealAmounts,\r\n\t};\r\n});\r\n\n",
    "define(\r\n    'initdatamanagers/DealsAmountsManager',\r\n    [\r\n        'require',\r\n        'Q',\r\n        'handlers/general',\r\n        'handlers/HashTable',\r\n        'dataaccess/dalorder'\r\n    ],\r\n    function DealsAmountsManagerDef(require) {\r\n        var Q = require('Q'),\r\n            general = require('handlers/general'),\r\n            hashTable = require('handlers/HashTable'),\r\n            dalOrders = require('dataaccess/dalorder'),\r\n            minDealAmountsDefer = Q.defer();\r\n\r\n        function DealsAmountsManager() {\r\n            var minAmounts = new hashTable();\r\n\r\n            function init() {\r\n                getInitialMinDealAmounts();\r\n            }\r\n\r\n            function setCustomerMinDealsAmounts(minDealAmounts) {\r\n                if (!general.isEmptyValue(minDealAmounts)) {\r\n                    var i,\r\n                        length = minDealAmounts.length;\r\n\r\n                    for (i = 0; i < length; i++) {\r\n                        minAmounts.OverrideItem(minDealAmounts[i][eMinDealValue.instrumentID], general.toNumeric(minDealAmounts[i][eMinDealValue.minAmount]));\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updateMinDealAmounts(minDealAmounts) {\r\n                setCustomerMinDealsAmounts(minDealAmounts);\r\n            }\r\n\r\n            function getDealMinMaxAmounts(instrumentId, instrumentMaxDeal) {\r\n                var minAmount = minAmounts.GetItem(instrumentId);\r\n                var maxAmount = Number(instrumentMaxDeal.replace(/[^0-9\\.]+/g, \"\"));\r\n\r\n                if (minAmount > maxAmount) {\r\n                    minAmount = maxAmount;\r\n                }\r\n\r\n                return [minAmount, maxAmount];\r\n            }\r\n\r\n            function getInitialMinDealAmounts() {\r\n                return dalOrders.GetMinDealAmounts()\r\n                    .then(updateMinDealAmounts)\r\n                    .then(function () { minDealAmountsDefer.resolve(); });\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetDealMinMaxAmounts: getDealMinMaxAmounts,\r\n                UpdateMinDealAmounts: updateMinDealAmounts,\r\n                MinDealAmountsPromise: minDealAmountsDefer.promise\r\n            };\r\n        }\r\n\r\n        return new DealsAmountsManager();\r\n    }\r\n);\r\n\n",
    "define(\r\n    'managers/profileinstruments',\r\n    ['knockout', \"handlers/Delegate\",],\r\n    function ProfileInstrument(ko, delegate) {\r\n        var value = ko.observable({}),\r\n            onUpdate = new delegate();\r\n\r\n        function updateInstrumentAmount(instrument, amount) {\r\n            var profileInstr = value();\r\n            var found = false;\r\n\r\n            if (profileInstr.list) {\r\n                for (var i = 0; i < profileInstr.list.length; i++) {\r\n                    if (profileInstr.list[i].instrument == instrument) {\r\n                        profileInstr.list[i].defaultAmount = amount.toString();\r\n                        found = true;\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                profileInstr.list = [];\r\n            }\r\n\r\n            if (!found) {\r\n                profileInstr.list.push({ \"instrument\": instrument, \"defaultAmount\": amount.toString() });\r\n            }\r\n\r\n            profileInstr.selected = instrument;\r\n            value(profileInstr);\r\n        }\r\n\r\n        function getSelectedInstrument() {\r\n            return getAll().selected;\r\n        }\r\n\r\n        function getAll() {\r\n            return value();\r\n        }\r\n\r\n        function init(initValue) {\r\n            value(initValue);\r\n\r\n            value.subscribe(function(updatedValue) {\r\n                onUpdate.Invoke(updatedValue);\r\n            });\r\n        }\r\n\r\n        return {\r\n            Init: init,\r\n            OnUpdate: onUpdate,\r\n            GetAll: getAll,\r\n            GetSelected: getSelectedInstrument,\r\n            UpdateInstrumentAmount: updateInstrumentAmount\r\n        };\r\n    }\r\n);\r\n\r\n\n",
    "define(\r\n    'modules/systeminfo',\r\n    [\r\n        'require',\r\n        'handlers/general'\r\n    ],\r\n    function (require) {\r\n        var general = require('handlers/general');\r\n\r\n        window.systemInfo = window.systemInfo || {};\r\n\r\n        function save(property, value) {\r\n            if (general.isStringType(property) && property.length > 0 && general.isDefinedType(value)) {\r\n                if (Object.keys(window.systemInfo).length < 1) {\r\n                    // systemInfo was not initialized yet\r\n                    var obj = {};\r\n                    obj[property] = value;\r\n                    save(obj);\r\n                } else {\r\n                    window.systemInfo[property] = value;\r\n                }\r\n            } else if (general.isObjectType(property)) {\r\n                window.systemInfo = property;\r\n            }\r\n        }\r\n\r\n        function get(property, defaultValue) {\r\n            if (Object.keys(window.systemInfo).length > 0 && typeof window.systemInfo[property] !== 'undefined') {\r\n                return window.systemInfo[property];\r\n            }\r\n\r\n            return defaultValue;\r\n        }\r\n\r\n        return {\r\n            save: save,\r\n            get: get\r\n        };\r\n    }\r\n);\n",
    "var eClientState = {\r\n    portfolioStatic: 0,\r\n    portfolioSummary: 1,\r\n    flags: 2,\r\n    ticks: 3,\r\n    ohlcs: 4,\r\n    deals: 5,\r\n    limits: 6,\r\n    notifications: 7,\r\n    serverTime: 8,\r\n    bonus: 9\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eSubscriptionRequestFlags = {\r\n    Balance: 0,\r\n    ClientStateHolder: 1,\r\n    Deals: 2,\r\n    Exposures: 3,\r\n    Flags: 4,\r\n    Limits: 5,\r\n    Notifications: 6,\r\n    PL: 7,\r\n    PortfolioStatic: 8,\r\n    Quotes: 9,\r\n    TradingNotifications: 10,\r\n    All: 11\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar ePortfolioSummary = {\r\n    csHolder: 0,\r\n    dealPL: 1,\r\n    netExposure: 2,\r\n    isUpdated: 3,\r\n    instrumentVolumes: 4,\r\n    optionIndication: 5\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eInstruments = {\r\n    id: 0,\r\n    amountGroupId: 1,\r\n    factor: 2,\r\n    hasSignals: 3,\r\n    ccyPair: 4,\r\n    tradable: 5,\r\n    defaultDealSize: 6,\r\n    signalName: 7,\r\n    maxDeal: 8,\r\n    SLMinDistance: 9,\r\n    TPMinDistance: 10,\r\n    DecimalDigit: 11,\r\n    PipDigit: 12,\r\n    SpecialFontStart: 13,\r\n    SpecialFontLength: 14,\r\n    assetTypeId: 15,\r\n    expirationDate: 16,\r\n    instrumentTypeId: 17,\r\n    baseSymbolId: 18,\r\n    otherSymbolId: 19,\r\n    exchangeInstrumentName: 20,\r\n    exchange: 21,\r\n    contractMonthAndYear: 22,\r\n    instrumentEnglishName: 23,\r\n    weightedVolumeFactor: 24,\r\n    eventDate: 25,\r\n    eventAmount: 26,\r\n    marketPriceTolerance: 27\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eQuotes = {\r\n    instrumentID: 0,\r\n    bid: 1,\r\n    ask: 2,\r\n    open: 3,\r\n    high: 4,\r\n    low: 5,\r\n    tradeTime: 6,\r\n    state: 7,\r\n    close: 8\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eSymbol = {\r\n    id: 0,\r\n    name: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eExposure = {\r\n    symbolID: 0,\r\n    amount: 1,\r\n    accountSymbolAmount: 2,\r\n    status: 3\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eInstrumentVolume = {\r\n    InstrumentID: 0,\r\n    BaseSymbolNetExposure: 1,\r\n    OtherSymbolNetExposure: 2,\r\n    AccountSymbolAmount: 3,\r\n    RequiredMarginPercentage: 4,\r\n    UsedMargin: 5,\r\n    MarginUtilizationPercentage: 6,\r\n    AvailableMargin: 7,\r\n    MarginUtilizationStatus: 8,\r\n    Status: 9,\r\n    OrdersCounter: 10,\r\n    LastUpdate: 11,\r\n    BaseSymbolAmount: 12,\r\n    OtherSymbolAmount: 13\r\n};\r\n\r\nvar eMarginUtilizationStatus = {\r\n    NA: 0,\r\n    Low: 1,\r\n    Medium: 2,\r\n    High: 3\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar ePortfolioStatic = {\r\n    accountSymbol: 0,\r\n    maxExposure: 1,\r\n    securities: 2,\r\n    tradingBonus: 3,\r\n    pendingBonus: 4,\r\n    isActive: 5,\r\n    isDemo: 6,\r\n    kycStatus: 7,\r\n    amlStatus: 8,\r\n    pendingWithdrawals: 9,\r\n\r\n    pepStatus: 12,\r\n    cddStatus: 13,\r\n    pendingBonusType: 15,\r\n    pendingBonusVolumePercentage: 16,\r\n    kycReviewStatus: 17\r\n\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eCSHolder = {\r\n    accountBalance: 0,\r\n    equity: 1,\r\n    netExposure: 2,\r\n    margin: 3,\r\n    exposureCoverage: 4,\r\n    totalEquity: 5,\r\n    openPL: 6,\r\n    usedMargin: 7,\r\n    marginUtilizationPercentage: 8,\r\n    availableMargin: 9,\r\n    marginUtilizationStatus: 10\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eCSFlags = {\r\n    exposureCoverageAlert: 0,\r\n    equityAlert: 1,\r\n    exposureAlert: 2,\r\n    marketState: 3,\r\n    systemMode: 4,\r\n    isUpdated: 5,\r\n    limitMultiplier: 6\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eSystemMode = {\r\n    none: 0,\r\n    active: 1,\r\n    closing: 2,\r\n    inactive: 3,\r\n    shutdown: 4\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eCustomer = {\r\n    accountBaseSymbol: 0,\r\n    defaultCcy: 1,\r\n    email: 2,\r\n    accountNumber: 3,\r\n    language: 4,\r\n    dealPermit: 5,\r\n    accountsCcy: 6\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eLimit = {\r\n    instrumentID: 0,\r\n    orderID: 1,\r\n    positionNumber: 2,\r\n    orderDir: 3,\r\n    orderRate: 4,\r\n    buySymbolID: 5,\r\n    buyAmount: 6,\r\n    sellSymbolID: 7,\r\n    sellAmount: 8,\r\n    type: 9,\r\n    mode: 10,\r\n    expirationDate: 11,\r\n    entryTime: 12,\r\n    slRate: 13,\r\n    tpRate: 14,\r\n    otherLimitID: 15,\r\n    dealType: 16,\r\n    status: 17\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eHistoricalLimit = {\r\n    instrumentID: 0,\r\n    orderID: 1,\r\n    positionNumber: 2,\r\n    orderDir: 3,\r\n    orderRate: 4,\r\n    buySymbolID: 5,\r\n    buyAmount: 6,\r\n    sellSymbolID: 7,\r\n    sellAmount: 8,\r\n    type: 9,\r\n    mode: 10,\r\n    executionDate: 11,\r\n    entryTime: 12,\r\n    slRate: 13,\r\n    tpRate: 14,\r\n    status: 15\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eDeal = {\r\n    instrumentID: 0,\r\n    orderID: 1,\r\n    positionNumber: 2,\r\n    orderDir: 3,\r\n    orderRate: 4,\r\n    buySymbolID: 5,\r\n    buyAmount: 6,\r\n    sellSymbolID: 7,\r\n    sellAmount: 8,\r\n    valueDate: 9,\r\n    dealType: 10,\r\n    exeTime: 11,\r\n    slRate: 12,\r\n    slID: 13,\r\n    tpRate: 14,\r\n    tpID: 15,\r\n    additionalPL: 16,\r\n    status: 17,\r\n    spreadDiscount: 20\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eDealPL = {\r\n    instrumentID: 0,\r\n    dealID: 1,\r\n    spotRate: 2,\r\n    fwPips: 3,\r\n    closingRate: 4,\r\n    pl: 5,\r\n    lastUpdate: 6,\r\n    commission: 7\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eClosedDealsBase = {\r\n    orderID: 0,\r\n    positionNumber: 1,\r\n    instrumentID: 2,\r\n    buyAmount: 3,\r\n    sellAmount: 4,\r\n    orderDir: 5,\r\n    dealType: 6,\r\n    valueDate: 7,\r\n    executionTime: 8,\r\n    forwardPips: 9,\r\n    instrumentEnglishName: 10,\r\n    pipDigit: 11,\r\n    decimalDigit: 12,\r\n    specialFontStart: 13,\r\n    specialFontLength: 14\r\n};\r\n\r\nvar eClosedDeals = {\r\n    dealRate: 15,\r\n    pl: 16,\r\n    originalPosNum: 17,\r\n    plCCY: 18,\r\n    positionStart: 19,\r\n    additionalPL: 20\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eClosedDealsSummaries = {\r\n    orderRateOpen: 15,\r\n    orderRateClosed: 16,\r\n    pl: 17,\r\n    originalPosNum: 18,\r\n    plCCY: 19,\r\n    positionStart: 20,\r\n    additionalPL: 21,\r\n    spreadDiscount: 22,\r\n    commission: 23\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eAccountingAction = {\r\n    actionID: 0,\r\n    actionTypeID: 1,\r\n    symbolID: 2,\r\n    date: 3,\r\n    credit: 4,\r\n    debit: 5,\r\n    posNum: 6,\r\n    comment: 7,\r\n    balance: 8,\r\n    totalsum: 9\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eContractRollover = {\r\n    actionID: 0,\r\n    posNum: 1,\r\n    symbol: 2,\r\n    date: 3,\r\n    debit: 4,\r\n    credit: 5,\r\n    gap: 6,\r\n    closeMidRate: 7,\r\n    openMidRate: 8,\r\n    spread: 9\r\n};\r\n\r\n//-----------------------------------------------------\r\nvar eAccountingActionsCategory = {\r\n    All: 0,\r\n    Deposits: 1,\r\n    Withdrawals: 2,\r\n    DealPL: 3,\r\n    OvernightFinancing: 4,\r\n    General: 5,\r\n    OvernightHistory: 6,\r\n    ContractRollover: 7,\r\n    Dividend: 8\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eMinDealValue = {\r\n    instrumentID: 0,\r\n    groupID: 1,\r\n    minAmount: 2\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eActivityLog = {\r\n    MessageType: 0,\r\n    DateTime: 1,\r\n    SourceType: 2,\r\n    Message: 3\r\n};\r\n\r\nvar eExpiredOptions = {\r\n    InstrumentID: 0,\r\n    OptionID: 1,\r\n    Amount: 2,\r\n    AmountCCY: 3,\r\n    BaseCCY: 4,\r\n    OtherCCY: 5,\r\n    OpenRate: 6,\r\n    ServerRate: 7,\r\n    ITMReturn: 8,\r\n    OTMReturn: 9,\r\n    EqualReturn: 10,\r\n    OptionReturn: 11,\r\n    USDValue: 12,\r\n    ExpirationTime: 13,\r\n    TimeGenerated: 14,\r\n    ClosingRate: 15,\r\n    Direction: 16,\r\n    Distance: 17,\r\n    ExpirationBid: 18,\r\n    ExpirationAsk: 19,\r\n    ExpirationTradeTime: 20,\r\n    Canceled: 21\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eActivityLogFilterType = {\r\n    Positions: 1,\r\n    Limits: 2,\r\n    Account: 3,\r\n    Logins: 5\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eCreditCard = {\r\n    CardTypeID: 0,\r\n    Name: 1,\r\n    OrderID: 2,\r\n    Currencies: 3,\r\n    D3SecureStatus: 4,\r\n    DepositingActionType: 5\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eDepositCurrency = {\r\n    CurrencyID: 0,\r\n    SortOrderID: 1\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eDepositCurrencyWithValidation = {\r\n    CurrencyID: 0,\r\n    SortOrderID: 1,\r\n\r\n    MinAmount: 3,\r\n    MaxAmount: 4,\r\n    MaxAmlAmount: 5,\r\n};\r\n\r\n//-----------------------------------------------------\r\nvar eDepositErrorType = {\r\n    fieldValidation: 0,\r\n    upload: 1,\r\n    claim: 2,\r\n    isInvalidLuhn: 4,\r\n    ccTypeUnknown: 5\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar ePaymentAuthStatus = {\r\n    Disable: 0,\r\n    Optional: 1,\r\n    Required: 2\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eCardView = {\r\n    PaymentID: 0,\r\n    CardHolderName: 1,\r\n    Last4: 2,\r\n    CardNumberLength: 3,\r\n    ExpirationMonth: 4,\r\n    ExpirationYear: 5,\r\n    IsDefault: 6,\r\n    IsCVVRequired: 7,\r\n    CardTypeID: 8,\r\n    First6: 9,\r\n    CcGuid: 10\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eWireTransferCountry = {\r\n    CountryID: 0,\r\n    Name: 1\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eWireTransferCountryContainer = {\r\n    CountryID: 0,\r\n    Name: 1,\r\n    DefaultCurrencyID: 2,\r\n    DefaultCurrencyName: 3,\r\n    LocalCurrencies: 4,\r\n    InternationalCurrencies: 5\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eWireTransferBankCurrency = {\r\n    CurrencyID: 0,\r\n    SortOrderID: 1,\r\n    MinDeposit: 2\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eDepositResponse = {\r\n    RequestID: 0,\r\n    EngineStatusID: 1,\r\n    ValidationStatusID: 2,\r\n    ClearingStatusID: 3,\r\n    DepositingTransactionStatusID: 4,\r\n    CreditCardMaintenanceStatusID: 5,\r\n    DepositingRequest3DSecureStatusID: 6,\r\n    CreditCardAuthenticationModeID: 7,\r\n    MessageDetails: 8,\r\n    MoneybookersURL: 9,\r\n    D3SecureURL: 10,\r\n    WireTransferInvoiceInfo: 11,\r\n    GlobalCollectAPMURL: 12,\r\n    ConfirmationCode: 13,\r\n    ClearerRequestUrl: 14,\r\n    ClearerPostData: 15,\r\n    BaseClearerTypeId: 16,\r\n    TransactionDescriptor: 17,\r\n    ClearerUrlHash: 18,\r\n    Last4: 19\r\n};\r\n\r\nvar ePostData = {\r\n    Name: 0,\r\n    Value: 1\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eDepositEngineStatus = {\r\n    Pending: 10,\r\n    Valid: 20,\r\n    Success: 70,\r\n    CCStored: 80,\r\n    Finished: 100,\r\n    Failed: 200\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eDepositValidationStatus = {\r\n    CardIDNotFound: 1,\r\n    AccountNumberNotFound: 2,\r\n    Blocked: 3,\r\n    BadLuhn: 4,\r\n    UnkownCCType: 5,\r\n    MaxCCReached: 6,\r\n    Spoofing: 7,\r\n    DoubleUse: 8,\r\n    MinDeposit: 9,\r\n    MaxDeposit: 10,\r\n    DepositRangeValidationFailed: 11,\r\n    InvalidCardType: 12,\r\n    InvalidEmailFormat: 13,\r\n    CreditCardExpired: 14,\r\n    InvalidWMID: 15,\r\n    WMCurrencyMismatch: 16,\r\n    WMAmountMismatch: 17,\r\n    AMLComplianceDenied: 18,\r\n    RequestedCVVNotFound: 19,\r\n    InvalidMobileFormat: 20,\r\n    Valid: 21,\r\n    WhiteList: 23,\r\n    TransactionCancelledByUser: 25,\r\n    RefundableClearer: 26,\r\n    ExceededLimit: 27,\r\n    Unknown: 28,\r\n    MinMaxDepositBlocked: 29,\r\n    MeikoPayMaxAmount: 30,\r\n    InvalidConfiguration: 31,\r\n    CCBinCountryBlacklist: 32,\r\n    NoSupportedClearers: 33,\r\n    MaxCardTypeUSDAmount: 34,\r\n    ShowAdditionalPaymentOnFailedDeposit: 35\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eSecureFlow = {\r\n    Need: 0,\r\n    NotNeed: 1,\r\n    Failed: 2\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar ePaymentAuthMode = {\r\n    None: 1,\r\n    D3Secure: 2\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eClearingStatus = {\r\n    TransactionRequired: 0,\r\n    TransactionApproved: 1,\r\n    FailedOn3DMissing: 11,\r\n    FailedOnMoneybookersRequestCanceled: 7\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eWireTransferType = {\r\n    NA: 0,\r\n    Local: 1,\r\n    International: 2\r\n};\r\n\r\n//------------------Withdrawal----------------------\r\n\r\nvar eWithdrawalView = {\r\n    withdrawalID: 0,\r\n    actionID: 1,\r\n    amount: 2,\r\n    symbolID: 3,\r\n    requestDate: 4,\r\n    withdrawalStatus: 5,\r\n    rowVersion: 6,\r\n    accountMaxRowVersion: 7,\r\n    symbolName: 8,\r\n    bankName: 9,\r\n    bankAccount: 10,\r\n    bankAddress: 11,\r\n    bankCountryID: 12,\r\n    bankCountryName: 13,\r\n    bankBranch: 14,\r\n    bankBeneficiary: 15,\r\n    bankComments: 16\r\n};\r\n\r\nvar eWithdrawalStatus = {\r\n    NA: 0,\r\n    pendingWithdrawal: 1,\r\n    Approved: 2,\r\n    Rejected: 3,\r\n    processingWithdrawal: 4\r\n};\r\n//-----------------------------------------------------\r\n\r\nvar eDepositingRequest3DSecureStatus = {\r\n    WaitngForResponse: 0,\r\n    Enrolled: 1,\r\n    AttemptedNotEnrolled: 2,\r\n    NotEligible: 3,\r\n    NoSupportedClearers: 4\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eKeepAlive = {\r\n    Success: 0,\r\n    Error: 1\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eQuotesUIOrder = {\r\n    InstrumentID: 0,\r\n    DealAmount: 1\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eNotification = {\r\n    NotificationType: 0,\r\n    ItemId: 1,\r\n    RelatedItemId: 2,\r\n    Version: 3\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eTransactionsReports = {\r\n    PositionNumber: 0,\r\n    TransactionNumber: 1,\r\n    ExecutionDate: 2,\r\n    BuySell: 3,\r\n    Item: 4,\r\n    UnitPrice: 5,\r\n    QuantityTraded: 6,\r\n    TotalAmountCurrency: 7,\r\n    USDVolume: 8,\r\n    TypeOfOrder: 9,\r\n    OpenRolloverClose: 10,\r\n    BaseCur: 11,\r\n    OtherCur: 12,\r\n    Commission: 13,\r\n    InstrumentId: 14\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eInitialScreen = {\r\n    ScreenId: 0,\r\n    IsCustomScreen: 1\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar ePresetCategory = {\r\n    InstrumentType: 0,\r\n    Presets: 1\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar ePreset = {\r\n    PresetId: 0,\r\n    InstrumentType: 1,\r\n    IsSelected: 2\r\n};\r\n//-----------------------------------------------------\r\n\r\n// TradingSignal data\r\nvar eTradingSignal = {\r\n    signalId: 0,\r\n    signalTitle: 1,\r\n    signalDate: 2,\r\n    imagePath: 3,\r\n    mediumTermLevel: 4,\r\n    weekDelta: 5,\r\n    longTermLevel: 6,\r\n    monthDelta: 7,\r\n    summary: 8,\r\n    symbol: 9,\r\n    story: 10,\r\n    shortTerm: 11\r\n};\r\n\r\n// AlertSignal data\r\nvar eAlertSignal = {\r\n    ma20: 0,\r\n    ma50: 1,\r\n    ma20_50: 2,\r\n    macd_sl: 3,\r\n    macd_0: 4,\r\n    bollinger: 5,\r\n    rsi70: 6,\r\n    rsi30: 7,\r\n    volume: 8,\r\n    periodUnit: 9,\r\n    periodValue: 10,\r\n    id: 11,\r\n    symbol: 12,\r\n    dateTime: 13,\r\n    title: 14\r\n};\r\n\r\n// CandlestickSignal data\r\nvar eCandlestickSignal = {\r\n    candlestick: 0,\r\n    last: 1,\r\n    opinion: 2,\r\n    invalidation: 3,\r\n    id: 4,\r\n    symbol: 5,\r\n    dateTime: 6,\r\n    title: 7\r\n};\r\n\r\n// TechAnalysisSignal data\r\nvar eTechAnalysisSignal = {\r\n    week: 0,\r\n    weekDelta: 1,\r\n    month: 2,\r\n    monthDelta: 3,\r\n    id: 4,\r\n    symbol: 5,\r\n    dateTime: 6,\r\n    title: 7\r\n};\r\n\r\nvar eTicks = {\r\n    instrumentID: 0,\r\n    bid: 1,\r\n    ask: 2,\r\n    tradeTimeOffset: 3,\r\n    state: 4\r\n};\r\n\r\nvar eOhlc = {\r\n    instrumentID: 0,\r\n    open: 1,\r\n    close: 2,\r\n    high: 3,\r\n    low: 4\r\n};\r\n\r\nvar eBonus = {\r\n    amountBase: 0,\r\n    amountGivenBase: 1,\r\n    volumeUsd: 2,\r\n    startDate: 3,\r\n    endDate: 4,\r\n    accumulatedVolumeUsd: 5\r\n};\r\n\r\nvar eNameValuePairIndex = {\r\n    name: 0,\r\n    value: 1\r\n};\r\n\r\nvar eDepositResponseThreeDIndex = {\r\n    paReq: 0,\r\n    md: 1,\r\n    termUrl: 2,\r\n    acsUrl: 3,\r\n    requiresExtraRedirect: 4,\r\n};\r\n\ndefine(\"enums/DataMembersPositions\", function(){});\n\n",
    "define(\r\n    'initdatamanagers/InstrumentsManager',\r\n    [\r\n        'require',\r\n        'Q',\r\n        'handlers/general',\r\n        'handlers/Delegate',\r\n        'handlers/HashTable',\r\n        'handlers/Instrument',\r\n        'initdatamanagers/DealsAmountsManager',\r\n        'managers/profileinstruments',\r\n        'modules/systeminfo',\r\n        'enums/DataMembersPositions'\r\n    ],\r\n    function InstrumentsManagerDef(require) {\r\n        var Q = require('Q'),\r\n            general = require('handlers/general'),\r\n            delegate = require('handlers/Delegate'),\r\n            hashTable = require('handlers/HashTable'),\r\n            Instrument = require('handlers/Instrument'),\r\n            DealsAmountsManager = require('initdatamanagers/DealsAmountsManager'),\r\n            ProfileInstruments = require('managers/profileinstruments'),\r\n            systemInfo = require('modules/systeminfo');\r\n\r\n        //----------------------------------------------------------------------\r\n        // Instrument - extend\r\n        //----------------------------------------------------------------------\r\n\r\n        Instrument.prototype.isOvernightFinancing = function () {\r\n            // temporary logic, it suppose to be dependent on the spread group value (is zero \r\n            return this.isFuture || this.isShare || (this.isForex && this.isOvernightOnForex);\r\n        };\r\n\r\n        Instrument.prototype.getCorporateActionDate = function () {\r\n            // the corporate action date is equal to expiration date\r\n            if (this.isShare)\r\n                return this.expirationDate;\r\n            else\r\n                return null;\r\n        };\r\n\r\n        Instrument.prototype.getInstrumentDividendDate = function () {\r\n            if (this.isShare)\r\n                return this.eventDate;\r\n            else\r\n                return null;\r\n        };\r\n\r\n        Instrument.prototype.getInstrumentDividendAmount = function () {\r\n            if (this.isShare)\r\n                return this.eventAmount;\r\n            else\r\n                return null;\r\n        };\r\n\r\n        Instrument.prototype.getInstrumentRolloverDate = function () {\r\n            if (this.isFuture)\r\n                return this.eventDate;\r\n            else\r\n                return null;\r\n        };\r\n\r\n        Instrument.prototype.roundRateToPip = function (rate, orderDir, limitType) {\r\n            var sign = general.addSign(orderDir, limitType),\r\n                value = Format.roundToPip(rate, this.PipDigit, this.DecimalDigit, sign);\r\n\r\n            if (value === false) {\r\n                return '';\r\n            }\r\n\r\n            return value;\r\n        };\r\n\r\n        //----------------------------------------------------------------------\r\n        // InstrumentsManager\r\n        //----------------------------------------------------------------------\r\n        function InstrumentsManager() {\r\n            var instrumentIDs = [],\r\n                // todo consider union with presetInstruments see set customised preset method\r\n                customizedUiOrder = [],\r\n                quotesUiOrder = [],\r\n                instrumentList = new hashTable(),\r\n                presetInstruments = {},\r\n                enhancedInstruments = [],\r\n                onUiOrderChanged = new delegate(),\r\n                onFavoritesPresetChanged = new delegate(),\r\n                onEnhancedInstrumentsChange = new delegate(),\r\n                customerType,\r\n                hasWeightedVolumeFactor,\r\n                profileInstrumentList,\r\n                isOvernightOnForex;\r\n\r\n            //---------------------------------------------------------\r\n\r\n            function init(config) {\r\n                customerType = config.customerType;\r\n                profileInstrumentList = config.initialProfileInstrument.list;\r\n                hasWeightedVolumeFactor = config.hasWeightedVolumeFactor;\r\n                isOvernightOnForex = config.isOvernightOnForex;\r\n\r\n                setCustomizedUiOrder(config.customUiOrder);\r\n                setInitialPresets(config.customUiOrder, config.initialUiOrder, config.initialScreenId);\r\n\r\n                buildCollection();\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function clear() {\r\n                instrumentIDs.length = 0;\r\n                customizedUiOrder.length = 0;\r\n                quotesUiOrder.length = 0;\r\n                instrumentList.Clear();\r\n                presetInstruments = {};\r\n                enhancedInstruments.length = 0;\r\n                onUiOrderChanged.Flush();\r\n                onFavoritesPresetChanged.Flush();\r\n                onEnhancedInstrumentsChange.Flush();\r\n\r\n                customerType = null;\r\n                hasWeightedVolumeFactor = null;\r\n                isOvernightOnForex = null;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function setInitialPresets(customUiOrder, initialUiOrder, initialScreenId) {\r\n                var initialPresets = {};\r\n\r\n                initialPresets[ePresetType.PresetCustomized] = customUiOrder;\r\n                initialPresets[initialScreenId] = initialUiOrder;\r\n\r\n                setPresetIntruments(initialPresets);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function setPresetIntruments(fullPresetInstruments) {\r\n                var tmpPreset;\r\n\r\n                for (var presetId in fullPresetInstruments) {\r\n                    if (!fullPresetInstruments.hasOwnProperty(presetId)) {\r\n                        continue;\r\n                    }\r\n\r\n                    tmpPreset = fullPresetInstruments[presetId].map(function (instrument) {\r\n                        var presetItem = [];\r\n\r\n                        presetItem[eQuotesUIOrder.InstrumentID] = instrument[eQuotesUIOrder.InstrumentID];\r\n                        presetItem[eQuotesUIOrder.DealAmount] = instrument[eQuotesUIOrder.DealAmount].toLocaleString();\r\n\r\n                        return presetItem;\r\n                    });\r\n\r\n                    if (general.equals(presetInstruments[presetId], tmpPreset) === false) {\r\n                        presetInstruments[presetId] = tmpPreset;\r\n                    }\r\n                }\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n\r\n            function clearInstrumentDealMinMaxAmounts(updatedMinDealAmounts) {\r\n                var instruments = systemInfo.get('instruments') || [];\r\n\r\n                for (var i = 0, length = instruments.length; i < length; i++) {\r\n                    var instrument = new Instrument(instruments[i], hasWeightedVolumeFactor, isOvernightOnForex);\r\n\r\n                    instrument.dealMinMaxAmounts = [];\r\n                    instrumentList.OverrideItem(instrument.id, instrument);\r\n                }\r\n\r\n                DealsAmountsManager.UpdateMinDealAmounts(updatedMinDealAmounts);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n\r\n            function getUpdatedInstrumentWithDealMinMaxAmounts(instrumentId) {\r\n                var instrument = instrumentList.GetItem(instrumentId);\r\n\r\n                if (instrument.dealMinMaxAmounts.length > 0) {\r\n                    return Q({ dealMinMaxAmounts: instrument.dealMinMaxAmounts, defaultDealSize: instrument.defaultDealSize });\r\n                }\r\n\r\n                return DealsAmountsManager.MinDealAmountsPromise.then(function () {\r\n                    setInstrumentDealMinMaxAmounts(instrument);\r\n                    instrument = instrumentList.GetItem(instrumentId);\r\n\r\n                    return { dealMinMaxAmounts: instrument.dealMinMaxAmounts, defaultDealSize: instrument.defaultDealSize };\r\n                });\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function setInstrumentDealMinMaxAmounts(instrument) {\r\n                var defaultDealSize,\r\n                    filteredInstrumentFromProfile,\r\n                    length,\r\n                    i;\r\n\r\n                var quotesUIOrder = getCustomizedUiOrder();\r\n                instrument.dealMinMaxAmounts = DealsAmountsManager.GetDealMinMaxAmounts(instrument.id, instrument.maxDeal);\r\n\r\n                if (profileInstrumentList) {\r\n                    for (i = 0, length = profileInstrumentList.length; i < length; i++) {\r\n                        if (profileInstrumentList[i].instrument == instrument.id) {\r\n                            filteredInstrumentFromProfile = profileInstrumentList[i];\r\n\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (filteredInstrumentFromProfile) {\r\n                    defaultDealSize = filteredInstrumentFromProfile.defaultAmount;\r\n                } else {\r\n                    defaultDealSize = instrument.defaultDealSize;\r\n                    // Find the default deal size if it has been defined on UIQuotesSettings\r\n                    for (i = 0, length = quotesUIOrder.length; i < length; i++) {\r\n                        if (quotesUIOrder[i][eQuotesUIOrder.InstrumentID] == instrument.id) {\r\n                            defaultDealSize = quotesUIOrder[i][eQuotesUIOrder.DealAmount];\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (customerType === eCustomerType.TradingBonus) {\r\n                        defaultDealSize = instrument.dealMinMaxAmounts[0];\r\n                    }\r\n                }\r\n\r\n                // Find the nearest amount from the list\r\n                if (defaultDealSize) {\r\n\r\n                    var isDefaultDealSizeOnTheInterval = general.toNumeric(instrument.dealMinMaxAmounts[0]) <= general.toNumeric(defaultDealSize) && general.toNumeric(defaultDealSize) <= general.toNumeric(instrument.dealMinMaxAmounts[1]);\r\n\r\n                    if (isDefaultDealSizeOnTheInterval) {\r\n                        instrument.defaultDealSize = general.toNumeric(defaultDealSize);\r\n                    } else {\r\n                        //happens when defaultDealSize is less than instrument.dealMinMaxAmounts[0]\r\n                        instrument.defaultDealSize = instrument.dealMinMaxAmounts[0];\r\n                    }\r\n                } else {\r\n                    instrument.defaultDealSize = instrument.dealMinMaxAmounts[0];\r\n                }\r\n\r\n                instrumentList.OverrideItem(instrument.id, instrument);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function setInstrumentDealAmount(instrumentId, dealAmount) {\r\n                var instrument = instrumentList.GetItem(instrumentId);\r\n\r\n                if (instrument) {\r\n                    instrument.defaultDealSize = dealAmount;\r\n                    instrumentList.SetItem(instrumentId, instrument);\r\n                }\r\n\r\n                ProfileInstruments.UpdateInstrumentAmount(instrumentId, dealAmount);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrumentBySignalName(signalName) {\r\n                var returnInstrument;\r\n\r\n                instrumentList.ForEach(function (i, instrument) {\r\n                    if (instrument.signalName.trim().toLowerCase() == signalName.trim().toLowerCase()) {\r\n                        returnInstrument = instrument;\r\n                    }\r\n                });\r\n\r\n                return returnInstrument;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function buildCollection() {\r\n                var instruments = systemInfo.get('instruments') || [];\r\n\r\n                for (var i = 0, length = instruments.length; i < length; i++) {\r\n                    var instrument = new Instrument(instruments[i], hasWeightedVolumeFactor, isOvernightOnForex);\r\n\r\n                    if (instrument.isTradable) {\r\n                        instrumentIDs.push(instrument.id);\r\n                    }\r\n\r\n                    instrumentList.OverrideItem(instrument.id, instrument);\r\n                }\r\n\r\n                buildEnhancedInstrumentList();\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function buildEnhancedInstrumentList() {\r\n                instrumentList.ForEach(function (i, instrument) {\r\n                    if (!general.isDefinedType(instrument['id']) || instrument.weightedVolumeFactor <= 1) {\r\n                        return;\r\n                    }\r\n\r\n                    enhancedInstruments.push({\r\n                        id: instrument.id,\r\n                        weightedVolumeFactor: instrument.weightedVolumeFactor\r\n                    });\r\n                });\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function updateInstruments(instrumentsFromServer) {\r\n                var enhancedInstrumentListBackup = enhancedInstruments.splice(0);\r\n\r\n                systemInfo.save('instruments', instrumentsFromServer || []);\r\n\r\n                instrumentIDs.length = 0;\r\n                instrumentList.Clear();\r\n\r\n                buildCollection();\r\n\r\n                if (!general.equals(enhancedInstruments, enhancedInstrumentListBackup)) {\r\n                    onEnhancedInstrumentsChange.Invoke();\r\n                }\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrument(instrumentId) {\r\n                return instrumentList.GetItem(instrumentId);\r\n            }\r\n\r\n            function isInstrumentStock(instrumentId) {\r\n                var instrument = getInstrument(instrumentId);\r\n\r\n                if (!general.isNullOrUndefined(instrument)) {\r\n                    return instrument.isStock;\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrumentPropUsedForConversion(fromSymbolId, toSymbolId) {\r\n                var instrumentProp = null;\r\n\r\n                instrumentList.ForEach(function (i, instrument) {\r\n                    if (instrument.baseSymbol == fromSymbolId && instrument.otherSymbol == toSymbolId) {\r\n                        instrumentProp = { id: instrument.id, factor: instrument.factor, isOppositeInstrumentFound: false };\r\n                    }\r\n\r\n                    if (instrument.otherSymbol == fromSymbolId && instrument.baseSymbol == toSymbolId) {\r\n                        instrumentProp = { id: instrument.id, factor: instrument.factor, isOppositeInstrumentFound: true };\r\n                    }\r\n                });\r\n\r\n                return instrumentProp;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getEnhancedInstruments() {\r\n                return enhancedInstruments;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrumentName(instrumentId) {\r\n                var instrument = getInstrument(instrumentId);\r\n\r\n                if (instrument) {\r\n                    return instrument.ccyPair;\r\n                }\r\n\r\n                return instrumentId;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrumentAttribute(instrumentId, attrName) {\r\n                var instrument = getInstrument(instrumentId);\r\n\r\n                if (instrument) {\r\n                    return instrument[attrName];\r\n                }\r\n\r\n                return '';\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrumentIds() {\r\n                return instrumentIDs;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getCustomizedUiOrder() {\r\n                return customizedUiOrder;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getQuotesUiOrder() {\r\n                return quotesUiOrder;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getFavoriteInstruments(top) {\r\n                top = top || customizedUiOrder.length;\r\n\r\n                if (top > customizedUiOrder.length) {\r\n                    top = customizedUiOrder.length;\r\n                }\r\n\r\n                return getInstrumentsFromPreset(customizedUiOrder, ePresetType.PresetCustomized, top);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getMainMostPopularPresetIds() {\r\n                return [\r\n                    ePresetType.PresetMostPopular,\r\n                    ePresetType.PresetMostPopularWithoutFutures,\r\n                    ePresetType.PresetMostPopularCurrencies,\r\n                    ePresetType.PresetMostPopularWithoutShares,\r\n                    ePresetType.PresetMostPopularWithoutFuturesWithoutShares\r\n                ];\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getMainMostPopularPresetId() {\r\n                var mainMostPopularPresetIds = getMainMostPopularPresetIds();\r\n\r\n                var mostPopularPresetId = general.objectFirst(mainMostPopularPresetIds, function hasInstruments(presetId) {\r\n                    var preset = presetInstruments[presetId];\r\n\r\n                    return preset && preset.length > 0;\r\n                });\r\n\r\n                return mostPopularPresetId;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getMainMostPopularInstruments() {\r\n                var mostPopularPresetId = getMainMostPopularPresetId();\r\n\r\n                return getInstrumentsFromPreset(presetInstruments[mostPopularPresetId], mostPopularPresetId);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrumentsFromPreset(preset, presetId, count) {\r\n                var instruments = [],\r\n                    instrumentId,\r\n                    instrument;\r\n\r\n                if (general.isNullOrUndefined(preset)) {\r\n                    return instruments;\r\n                }\r\n\r\n                var length = count || preset.length;\r\n\r\n                for (var i = 0; i < length; i++) {\r\n                    instrumentId = preset[i][eQuotesUIOrder.InstrumentID];\r\n                    instrument = getInstrument(instrumentId);\r\n\r\n                    if (instrument) {\r\n                        instrument.presetId = presetId;\r\n                        instruments.push(instrument);\r\n                    }\r\n                }\r\n\r\n                return instruments;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function setQuotesUiOrder(uiOrder, skipRegister, listName) {\r\n                uiOrder = uiOrder || [];\r\n                listName = listName || eRegistrationListName.QuotesTable;\r\n                quotesUiOrder = uiOrder.slice(0);\r\n\r\n                if (!skipRegister) {\r\n                    onUiOrderChanged.Invoke(listName, quotesUiOrder);\r\n                }\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function setCustomizedUiOrder(uiOrder, skipUpdate) {\r\n                uiOrder = uiOrder || [];\r\n                customizedUiOrder = uiOrder.slice(0);\r\n\r\n                // todo union this ds in server if not breaking logic on editing custom\r\n                if (general.equals(presetInstruments[ePresetType.PresetCustomized], customizedUiOrder) === false && !skipUpdate) {\r\n                    presetInstruments[ePresetType.PresetCustomized] = customizedUiOrder;\r\n                    onFavoritesPresetChanged.Invoke();\r\n                }\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getPresetInstruments(presetId) {\r\n                if (typeof presetId !== 'undefined') {\r\n                    return presetInstruments[presetId];\r\n                }\r\n\r\n                return presetInstruments;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getUserDefaultInstrument() {\r\n                var instrumentId = 3631;\r\n                var profileInstrumentId = ProfileInstruments.GetSelected();\r\n\r\n                if (profileInstrumentId && getInstrument(profileInstrumentId)) {\r\n                    instrumentId = profileInstrumentId;\r\n                }\r\n\r\n                return instrumentId;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function foreachIntrument(handler) {\r\n                return instrumentList.ForEach(handler);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function hasIntrumentId(instrumentId) {\r\n                return instrumentList.HasItem(instrumentId);\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getPresetsForInstrument(instrumentId) {\r\n                var presetsList = [];\r\n\r\n                for (var presetId in presetInstruments) {\r\n                    if (!presetInstruments.hasOwnProperty(presetId)) {\r\n                        continue;\r\n                    }\r\n\r\n                    var instruments = presetInstruments[presetId];\r\n\r\n                    for (var idxInstrument = 0; idxInstrument < instruments.length; idxInstrument++) {\r\n                        if (instruments[idxInstrument][0] === instrumentId) {\r\n                            presetsList.push(presetId);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return presetsList;\r\n            }\r\n\r\n            //---------------------------------------------------------\r\n            function getInstrumentFirstChar(instrumentId) {\r\n                var instrument = getInstrument(instrumentId);\r\n\r\n                return instrument ? instrument.instrumentEnglishName.substring(0, 1) : '***';\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                Clear: clear,\r\n                SetPresetIntruments: setPresetIntruments,\r\n                GetInstrumentIds: getInstrumentIds,\r\n                GetCustomizedUiOrder: getCustomizedUiOrder,\r\n                SetCustomizedUiOrder: setCustomizedUiOrder,\r\n                GetQuotesUIOrder: getQuotesUiOrder,\r\n                SetQuotesUIOrder: setQuotesUiOrder,\r\n                ForeachInstrument: foreachIntrument,\r\n                GetEnhancedInstruments: getEnhancedInstruments,\r\n                GetInstrument: getInstrument,\r\n                HasInstrumentId: hasIntrumentId,\r\n                GetInstrumentPropUsedForConversion: getInstrumentPropUsedForConversion,\r\n                GetInstrumentName: getInstrumentName,\r\n                GetInstrumentAttribute: getInstrumentAttribute,\r\n                GetFavoriteInstruments: getFavoriteInstruments,\r\n                GetMainMostPopularInstruments: getMainMostPopularInstruments,\r\n                SetInstrumentDealAmount: setInstrumentDealAmount,\r\n                GetUpdatedInstrumentWithDealMinMaxAmounts: getUpdatedInstrumentWithDealMinMaxAmounts,\r\n                ResetInstrumentsDealAmounts: clearInstrumentDealMinMaxAmounts,\r\n                GetPresetInstruments: getPresetInstruments,\r\n                GetInstrumentBySignalName: getInstrumentBySignalName,\r\n                GetUserDefaultInstrumentId: getUserDefaultInstrument,\r\n                UpdateInstruments: updateInstruments,\r\n                OnUiOrderChanged: onUiOrderChanged,\r\n                OnEnhancedInstrumentsChange: onEnhancedInstrumentsChange,\r\n                OnFavoritesPresetChanged: onFavoritesPresetChanged,\r\n                GetPresetsForInstrument: getPresetsForInstrument,\r\n                GetInstrumentFirstChar: getInstrumentFirstChar,\r\n                IsInstrumentStock: isInstrumentStock,\r\n                GetMainMostPopularPresetId: getMainMostPopularPresetId\r\n            };\r\n        }\r\n\r\n        var module = window.$instrumentsManager = new InstrumentsManager();\r\n\r\n        return module;\r\n    }\r\n);\r\n\n",
    "define(\r\n    'initdatamanagers/SymbolsManager',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'handlers/Logger',\r\n        'handlers/HashTable',\r\n        'Dictionary',\r\n        'initdatamanagers/InstrumentsManager'\r\n    ],\r\n    function SymbolsManagerDef(require) {\r\n        var general = require('handlers/general'),\r\n            logger = require('handlers/Logger'),\r\n            hashTable = require('handlers/HashTable'),\r\n            dictionary = require('Dictionary'),\r\n            instrumentsManager = require('initdatamanagers/InstrumentsManager');\r\n\r\n        function Symbol(id, name) {\r\n            this.id = id;\r\n            this.name = name;\r\n        }\r\n\r\n        function SymbolsManager() {\r\n            var symbols = new hashTable();\r\n\r\n            function init(data) {\r\n                var staticSymbols = data;\r\n\r\n                if (!general.isEmptyValue(staticSymbols)) {\r\n                    for (var i = 0, ii = staticSymbols.length; i < ii; i++) {\r\n                        var item = staticSymbols[i];\r\n\r\n                        symbols.SetItem(item[eSymbol.id], new Symbol(item[eSymbol.id], item[eSymbol.name]));\r\n                    }\r\n                }\r\n            }\r\n\r\n            function getSymbol(id) {\r\n                var symbol = symbols.GetItem(id);\r\n\r\n                if (!symbol) {\r\n                    logger.log('TSymbolsManager/getSymbol', String.format('symbol {0} not exist', id));\r\n                }\r\n\r\n                return symbol;\r\n            }\r\n\r\n            function getTranslatedSymbolById(id) {\r\n                var symbol = dictionary.GetItem('symbol_' + id);\r\n\r\n                if (!symbol) {\r\n                    logger.log('TSymbolsManager/getSymbol', String.format('symbol {0} not exist', id));\r\n                }\r\n\r\n                return symbol;\r\n            }\r\n\r\n            function getTranslatedSymbolByName(name) {\r\n                var lowerCaseName = name ? name.toLowerCase() : '';\r\n                var symbol = dictionary.GetItem('symbolbyname_' + lowerCaseName);\r\n\r\n                if (!symbol) {\r\n                    logger.log('TSymbolsManager/getSymbol', String.format('symbol {0} not exist', name));\r\n                }\r\n\r\n                return symbol;\r\n            }\r\n\r\n            function extractSymbolsNames(instrumentId) {\r\n                var instrument = instrumentsManager.GetInstrument(instrumentId);\r\n\r\n                if (instrument) {\r\n                    return {\r\n                        'base': getTranslatedSymbolById(instrument.baseSymbol),\r\n                        'other': getTranslatedSymbolById(instrument.otherSymbol)\r\n                    };\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            return {\r\n                Symbols: symbols,\r\n                Init: init,\r\n                GetSymbol: getSymbol,\r\n                GetTranslatedSymbolById: getTranslatedSymbolById,\r\n                GetTranslatedSymbolByName: getTranslatedSymbolByName,\r\n                ExtractSymbolsNames: extractSymbolsNames\r\n            };\r\n        }\r\n\r\n        var module = window.$symbolsManager = new SymbolsManager();\r\n\r\n        return module;\r\n    }\r\n);\r\n\n",
    "var eForms = {\r\n    Quotes: 1,\r\n    OpenDeals: 2,\r\n    Limits: 3,\r\n    ClosedDeals: 4,\r\n    Wallet: 5,\r\n    ClosedDealDetails: 7,\r\n    Balance: 10,\r\n    NetExposure: 11,\r\n    Withdrawal: 12,\r\n    EditFavoriteInstruments: 13,\r\n    Deposit: 15,\r\n    EditClosingLimit: 16,\r\n    InternalContactUs: 17,\r\n    PendingWithdrawal: 18,\r\n    EditLimit: 20,\r\n    Menu: 21,\r\n    Charts: 23,\r\n    AddInstrument: 24,\r\n    ThirdParty: 25,\r\n    Aml: 26,\r\n    ClientQuestionnaire: 27,\r\n    UploadDocuments: 28,\r\n    TradingSignals: 30,\r\n    EconomicCalendar: 31,\r\n    TradingSignalDetails: 32,\r\n    EconomicCalendarFilter: 33,\r\n    ConcretePaymentForm: 34,\r\n    Transaction: 35,\r\n    CashBack: 50,\r\n    ChangePassword: 51,\r\n    NotificationsSettings: 52,\r\n    ClosedDealsFilter: 53,\r\n    CloseDeal: 54,\r\n    ContractRollover: 55,\r\n    AccountCardRecords: 56,\r\n    WithdrawalBankDetails: 57,\r\n    WithdrawalCCDetails: 58,\r\n    AccountCardRecordsCosts: 60,\r\n    EducationalTutorials: 61,\r\n    EducationalTutorialsAccess: 62,\r\n    SignalsDisclaimer: 63,\r\n    DepositSuccess: 64,\r\n    DepositPending: 65,\r\n    HelpDepositThankYou: 68,\r\n    HelpUploadDocuments: 70,\r\n    PriceAlerts: 71,\r\n    WireTransfer: 72,\r\n    WireTransferSuccess: 73,\r\n    NewPriceAlert: 74,\r\n    UserFlowMap: 75,\r\n    PersonalInformation: 77,\r\n    WithdrawalThankYou: 78,\r\n    FeedbackUs: 79,\r\n    DocumentVerificationModal: 80,\r\n    AccountPreferences: 81\r\n};\r\n\r\nvar eViewTypes = {\r\n    vQuotes: 1,\r\n    vOpenDeals: 2,\r\n    vLimits: 3,\r\n    vClosedDeals: 4,\r\n    vWallet: 5,\r\n    vNewDeal: 6,\r\n    vClosedDealDetails: 7,\r\n    vNewLimit: 9,\r\n    vBalance: 10,\r\n    vNetExposure: 11,\r\n    vWithdrawal: 12,\r\n    vEditFavoriteInstruments: 13,\r\n    vQuotesPreset: 14,\r\n    vEditClosingLimit: 16,\r\n    vContact: 17,\r\n    vPendingWithdrawal: 18,\r\n    vEditLimit: 20,\r\n    vMenu: 21,\r\n    vCharts: 23,\r\n    vAddInstrument: 24,\r\n    vTradingSummery: 25,\r\n    vSummeryView: 26,\r\n    vHomepageContent: 27,\r\n    vSideMenu: 28,\r\n    vChangePassword: 29,\r\n    vActivityLog: 31,\r\n    vPersonalDetails: 34,\r\n    vToolBar: 35,\r\n    vPageTitle: 36,\r\n    vClosedDealsSummaries: 39,\r\n    vCloseDeal: 40,\r\n    vRolledOver: 41,\r\n    vEditDealLimit: 42,\r\n    vOrderTabs: 43,\r\n    vMarginStatus: 44,\r\n    vViewAndPrintWithdrawal: 46,\r\n    vTransactionsReport: 47,\r\n    vRelatedPosition: 48,\r\n    vUploadDocuments: 49,\r\n    vThirdParty: 51,\r\n    vTradingSignals: 52,\r\n    vTradingSignalsTutorials: 53,\r\n    vDynamicHeader: 54,\r\n    vTutorials: 59,\r\n    vCreditCard3rdParty: 60,\r\n    vPaymentTypes: 61,\r\n    vEmpCashU: 62,\r\n    vEpaylinks: 63,\r\n    vSafeChargeCashier: 100,\r\n    vAmlStatus: 64,\r\n    vClientQuestionnaire: 65,\r\n    vMissingCustomerInformation: 66,\r\n    vAstropay: 69,\r\n    vNetellerGO: 70,\r\n    vPaySafeCard: 71,\r\n    vMoneyBookers: 72,\r\n    vConcretePaymentForm: 75,\r\n    vGlobalCollectAPM: 76,\r\n    vCashBack: 77,\r\n    vInatecAPMGiropay: 78,\r\n    vInatecAPMPrzelewy24: 79,\r\n    vMarketClosed: 80,\r\n    vNoAPIClearer: 81,\r\n    vEcoPayz: 82,\r\n    vSofortDirect: 83,\r\n    vClosedDealsFilter: 84,\r\n    vSignalsDisclaimer: 130,\r\n    vEconomicCalendar: 200,\r\n    vTradingSignalDetails: 201,\r\n    vEconomicCalendarFilter: 202,\r\n    vPopupHeader: 203,\r\n    vTransactionSwitcher: 204,\r\n    vKluwp: 205,\r\n    vNotificationsSettings: 206,\r\n    vRPN: 207,\r\n    vPayPal: 208,\r\n    vContractRollover: 209,\r\n    vAccountCardRecords: 210,\r\n    vWithdrawalBankDetails: 211,\r\n    vWithdrawalCCDetails: 212,\r\n    vAstropayCard: 213,\r\n    vInternalContactUs: 214,\r\n    vEducationalTutorialsSwitcher: 216,\r\n    vEducationalTutorialsAccess: 217,\r\n    vGenericCreditCard: 218,\r\n    vDepositSuccessThankYou: 219,\r\n    vDepositPendingThankYou: 220,\r\n    vHelpDepositThankYou: 223,\r\n    vHelpUploadDocuments: 225,\r\n    vPayRetailers: 226,\r\n    vPriceAlerts: 227,\r\n    vRisingSunAPM: 228,\r\n    vWireTransfer: 229,\r\n    vWireTransferSuccess: 230,\r\n    vNewPriceAlert: 231,\r\n    vUserFlowMap: 232,\r\n    vPersonalInformation: 234,\r\n    vJeton: 235,\r\n    vWithdrawalThankYou: 236,\r\n    vZotapayAPM: 237,\r\n    vBitWallet: 238,\r\n    vFeedbackUs: 239,\r\n    vDocumentVerificationModal: 240,\r\n    vAccountPreferences: 241,\r\n    vNuveiAPM: 242,\r\n    vGlobePay: 243,\r\n    vAstropayWallet: 244,\r\n    vPerfectMoney: 245\r\n};\r\n\r\nvar eTemplateNames = {\r\n    editLimitNavigator: 'deal-details-navigator'\r\n};\r\n\r\nvar eFullScreenControl = {};\r\n\r\nvar eFullScreenTogleControls = {};\r\n\r\nvar eSettingsViews = {\r\n    PersonalInformation: {\r\n        form: eForms.PersonalInformation,\r\n        viewId: eViewTypes.vPersonalInformation\r\n    },\r\n    AccountPreferences: {\r\n        form: eForms.AccountPreferences,\r\n        viewId: eViewTypes.vAccountPreferences\r\n    },\r\n    ChangePassword: {\r\n        form: eForms.ChangePassword,\r\n        viewId: eViewTypes.vChangePassword\r\n    },\r\n    NotificationsSettings: {\r\n        form: eForms.NotificationsSettings,\r\n        viewId: eViewTypes.vNotificationsSettings\r\n    }\r\n};\r\n\ndefine(\"customEnums/ViewsEnums\", function(){});\n\n",
    "var eResult = {\r\n    Error: 0,\r\n    Success: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eRequestMode = {\r\n    Initial: 0,\r\n    Correct: 1,\r\n    Failed: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eOrderResult = {\r\n    OK: 0,\r\n    Error: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eQuoteStates = {\r\n    None: 0,\r\n    Enabled: 1,\r\n    Locked: 2,\r\n    TimedOut: 3,\r\n    Disabled: 4,\r\n    Up: 5,\r\n    Down: 6,\r\n    NotChanged: 7\r\n};\r\n\r\nvar eHighLowStates = {\r\n    NA: 0,\r\n    MarketClosed: 1,\r\n    Active: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eMessages = {\r\n    InvalidLimitRate: 1,\r\n    LimitRateIsEmpty: 2,\r\n    TPRateNotInRange: 3,\r\n    SLRateNotInRange: 4,\r\n    InvalidTPRate: 5,\r\n    InvalidSLRate: 6,\r\n    InvalidDate: 7\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eOrderDir = {\r\n    Sell: 0,\r\n    Buy: 1,\r\n    None: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eStartSpinFrom = {\r\n    Below: 0,\r\n    Above: 1,\r\n    None: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDateFilter = {\r\n    Yesterday: 0,\r\n    Today: 1,\r\n    Tomorrow: 2,\r\n    ThisWeek: 3,\r\n    NextWeek: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eImportanceFilter = {\r\n    Low: 1,\r\n    Medium: 2,\r\n    Hight: 3\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eCountryFilter = {\r\n    AU: 0,\r\n    CA: 1,\r\n    CN: 2,\r\n    DE: 3,\r\n    EU: 4,\r\n    FR: 5,\r\n    IT: 6,\r\n    JP: 7,\r\n    NZ: 8,\r\n    CH: 9,\r\n    UK: 10,\r\n    US: 11\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eNewDealTool = {\r\n    None: 0,\r\n    Chart: 1,\r\n    MarketLiveInfo: 2,\r\n    EconomicCalendar: 3,\r\n    Signals: 4,\r\n    InstrumentInfo: 5\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eNewDealValue = {\r\n    Inline: 'Inline',\r\n    Popup: 'Popup',\r\n    None: 'None'\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDealPage = {\r\n    NewDeal: 'NewDeal',\r\n    NewLimitViewModel: 'NewLimitViewModel',\r\n    CloseDeal: 'CloseDeal',\r\n    EditClosingLimit: 'EditClosingLimit',\r\n    EditLimitViewModel: 'EditLimitViewModel',\r\n    EditIfDoneLimit: 'EditIfDoneLimit'\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eTrackingDealVersion = {\r\n    NewDealSlip: '2016',\r\n    OldDealSlip: ''\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eLimitType = {\r\n    None: 0,\r\n    StopLoss: 1,\r\n    TakeProfit: 2\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eLimitMode = {\r\n    None: 0,\r\n    OpenDeal: 1,\r\n    CloseDeal: 2,\r\n    Add: 3, // not used on client\r\n    PriceAlert: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eLimitValidationMode = {\r\n    All: 0,\r\n    Single: 1,\r\n    Amount: 2,\r\n    Rate: 3,\r\n    Percent: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eHistoryLimitRequest = {\r\n    All: 0,\r\n    Deleted: 1,\r\n    Edited: 2,\r\n    Expired: 3,\r\n    EitherOr: 4,\r\n    PositionClosed: 5,\r\n    Executed: 6,\r\n    EquityAlert: 7,\r\n    ExposureAlert: 8,\r\n    PositionMissing: 9,\r\n    CloseAllDeals: 10\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eStatus = {\r\n    New: 0,\r\n    Edited: 1,\r\n    Removed: 2,\r\n    Cancelled: 3\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eMarketState = {\r\n    Open: 1,\r\n    Close: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDealPLState = {\r\n    None: 0,\r\n    Up: 1,\r\n    Down: 2\r\n};\r\n\r\n//-----------------------------------------------------\r\n\r\nvar eMessageBoxIcon = {\r\n    Info: 0,\r\n    Error: 1,\r\n    Warning: 2,\r\n    Question: 3\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eAMLStatus = {\r\n    NotRequired: 0,\r\n    Unverified: 1,\r\n    Denied: 2,\r\n    Approved: 3,\r\n    Pending: 4,\r\n    Restricted: 5\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eKYCStatus = {\r\n    NotRequired: 0,\r\n    NotComplete: 1,\r\n    GaveUp: 2,\r\n    Complete: 3,\r\n    // new statuses\r\n    Passed: 4,\r\n    // warning required\r\n    Failed: 5,\r\n    // acknowledged\r\n    FailedAware: 6\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eCDDStatus = {\r\n    NotRequired: 1,\r\n    NotComplete: 2,\r\n    Complete: 3\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eCDDAccess = {\r\n    Restricted: 0,\r\n    Access: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eKYCReviewStatus = {\r\n    NotReviewed: 0,\r\n    Appropriate: 1,\r\n    Rejected: 2,\r\n    Experienced: 3,\r\n    Eligible: 4,\r\n    Review: 5,\r\n    Tested: 6,\r\n    Inappropriate: 7,\r\n    Unsuitable: 8\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eLocalStorageKeys = {\r\n    QuestionsAnswersCDDKYC: \"QuestionsAnswersCDDKYC\"\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar ePEPStatus = {\r\n    NotRequired: 1,\r\n    Required: 2,\r\n    No: 3,\r\n    Statement2a: 4,\r\n    Statement2b: 5,\r\n    Statement2c: 6,\r\n    Statement2d: 7,\r\n    Statement2e: 8,\r\n    Statement2f: 9,\r\n    Statement3: 10,\r\n    Statement4a: 11,\r\n    Statement4b: 12\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eSmartBannerStatus = {\r\n    Invisible: 0,\r\n    Visible: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eSmartBannerPosition = {\r\n    Wide: 'smartBannerWide',\r\n    Small: 'smartBannerSmall',\r\n    None: 'None'\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eAccountType = {\r\n    Pending: 0,\r\n    Active: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDialogType = {\r\n    Order: 0,\r\n    Other: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDealPermit = {\r\n    None: 0,\r\n    Islamic: 3,\r\n    SpotOnly: 4,\r\n    ZeroSpread: 17\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDealType = {\r\n    Spot: 2,\r\n    Islamic: 6,\r\n    Future: 7,\r\n    Share: 8\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eRowAlternatingStyle = {\r\n    EveryRow: 1,\r\n    EveryTwoRows: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eRateFormatStyle = {\r\n    SevenDigit: 1,\r\n    EightDigit: 2,\r\n    NineDigit: 3\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar exTypes = {\r\n    html: 0,\r\n    array: 1\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eBrowserType = {\r\n    chrome: 0,\r\n    safari: 1,\r\n    opera: 2,\r\n    ie: 3,\r\n    firefox: 4\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eDataStatus = {\r\n    partial: 0,\r\n    full: 1\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eFlagState = {\r\n    Initial: -1,\r\n    NotActive: 0,\r\n    Active: 1\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eViewMode = {\r\n    simple: 0,\r\n    advance: 1\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eErrorSeverity = {\r\n    warning: 0,\r\n    low: 1,\r\n    medium: 2,\r\n    high: 3,\r\n    critical: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eCustomerType = {\r\n    Standard: 1,\r\n    TradingBonus: 39\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eFolderType = {\r\n    TradingBonus: \"10\"\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eFolder = {\r\n    GameFolder: 10,\r\n    IntDebit: 39\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eUserRole = {\r\n    customer: \"FXnet_Customers\",\r\n    QA: \"FXnet_QA\"\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eRegulationStatus = {\r\n    customer: \"FXnet_Customers\",\r\n    QA: \"FXnet_QA\"\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eOrderAction = {\r\n    NewLimit: \"NewLimit\",\r\n    EditLimit: \"EditLimit\",\r\n    DeleteLimit: \"DeleteLimit\",\r\n    NewDeal: \"NewDeal\",\r\n    CloseDeal: \"CloseDeal\",\r\n    SaveLimits: \"SaveLimits\",\r\n    PendingBonus: \"PendingBonus\",\r\n    GetOvernightFinancing: \"GetOvernightFinancing\",\r\n    CashBack: \"CashBackGetVolumes\",\r\n    NewPriceAlert: \"NewPriceAlert\"\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eOrderActionType = {\r\n    None: 0,\r\n    NewLimit: 1,\r\n    EditLimit: 2,\r\n    DeleteLimit: 3,\r\n    NewDeal: 4,\r\n    CloseDeal: 5,\r\n    PendingBonus: 6,\r\n    NewPriceAlert: 7,\r\n    GetOvernightFinancing: 8,\r\n    CashBack: 9,\r\n    DeletePriceAlert: 10\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eTradingAgreement = {\r\n    Needed: 0,\r\n    NotNeeded: 1\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eKeepAliveError = {\r\n    None: 0,\r\n    HttpContextRequired: 1,\r\n    SessionMissingOrDuplicate: 2\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eTradingPermissions = {\r\n    Allowed: 3,\r\n    Required: 2,\r\n    Blocked: 1\r\n};\r\n\r\n//---------------------------------------------------\r\n\r\nvar eNotificationType = {\r\n    InstrumentEdited: 31,\r\n    AmountGroupEdited: 25,\r\n    MinDealGroupEdited: 46\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eScreenId = {\r\n    CreditCard: 1,\r\n    RegularWireTransfer: 2,\r\n    RealTimeWireTransfer: 3,\r\n    MoneyBooker: 4,\r\n    Cachu: 6\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDepositingActionType = {\r\n    NA: 0,\r\n    Regular: 1,\r\n    ForceDeposit: 2,\r\n    Moneybookers: 3,\r\n    PayPal: 5,\r\n    GlobalCollectAPM: 7,\r\n    WireTransfer: 20,\r\n    SafechargePPP: 31,\r\n    EmpCashU: 32,\r\n    SafeChargeCashier: 33,\r\n    Epaylinks: 34,\r\n    Astropay: 36,\r\n    NetellerGO: 37,\r\n    PaySafeCard: 38,\r\n    InatecAPM: 41,\r\n    NoAPIClearer: 42,\r\n    EcoPayz: 43,\r\n    SofortDirect: 44,\r\n    Kluwp: 45,\r\n    RPN: 46,\r\n    AstropayCard: 47,\r\n    PayRetailers: 48,\r\n    RisingSunAPM: 49,\r\n    Jeton: 50,\r\n    ZotapayAPM: 51,\r\n    BitWallet: 52,\r\n    NuveiAPM: 53,\r\n    GlobePay: 54,\r\n    AstropayWallet: 55,\r\n    PerfectMoney: 56\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDepositCreditCardType = {\r\n    Unknown: 0,\r\n    AmericanExpress: 1,\r\n    Diners: 2,\r\n    Discover: 3,\r\n    Jcb: 5,\r\n    Laser: 6,\r\n    Mastercard: 7,\r\n    Maestro: 8,\r\n    Solo: 9,\r\n    Switch: 10,\r\n    Visa: 13,\r\n    CUP: 43\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar ePaymentMethods = {\r\n    Regular: \"pmCreditCard\",\r\n    ForceDeposit: \"pmForceDeposit\",\r\n    Moneybookers: \"pmMoneyBooker\",\r\n    CashU: \"pmCashU\",\r\n    WireTransfer: \"pmRegularWireTransfer\"\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eCountryPaymentsInfosResponse = {\r\n    Country: 0,\r\n    DepositingActionType: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar ePaymentsChallengeWindowSize = {\r\n    Fullscreen: '05'\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChangePasswordStatus = {\r\n    None: 0,\r\n    Success: 1,\r\n    OldPasswordDoesNotMatch: 2,\r\n    NewPasswordsDoNotMatch: 3,\r\n    InvalidNewPassword: 4,\r\n    PreviousPasswordRecurrence: 5,\r\n    UserLockedOut: 7,\r\n    UserNotFound: 8\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eClientParams = {\r\n    Interval: 0,\r\n    Device: 1,\r\n    MaxIdleTime: 2,\r\n    IdleTimer: 3,\r\n    TutorialUrlTemplate: 4,\r\n    JsErrorBlacklistRegex: 5,\r\n    ClientStateLatencyInterval: 10\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eUIOrderType = {\r\n    Default: 0,\r\n    Custom: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eTileLayout = {\r\n    Single: 1,\r\n    Split: 2,\r\n    FourSplit: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartInstanceType = {\r\n    newDealSlip: 3,\r\n    newDealMobile: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartDirection = {\r\n    Same: 1,\r\n    Opposite: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartParentType = {\r\n    NewDeal: 0,\r\n    NewLimit: 1,\r\n    EditLimit: 2,\r\n    CloseDeal: 3,\r\n    EditClosingLimit: 4,\r\n    NewPriceAlert: 5\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartPeriod = {\r\n    Ticks: 0,\r\n    OneMinute: 1,\r\n    FiveMinutes: 2,\r\n    FifteenMinutes: 3,\r\n    ThirtyMinutes: 4,\r\n    OneHour: 5,\r\n    SixHours: 6,\r\n    TwelveHours: 7,\r\n    OneDay: 8,\r\n    OneWeek: 9,\r\n    OneMonth: 10,\r\n    TenSeconds: 11,\r\n    TwoHours: 12,\r\n    FourHours: 13\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartTimeFramesIds = {\r\n    'tick': '1T',\r\n    '1 Minute': '1M',\r\n    '5 Mintes': '5M',\r\n    '10 Minutes': '10M',\r\n    '15 Minutes': '15M',\r\n    '30 Minutes': '30M',\r\n    '1 Hour': '60M',\r\n    '2 Hours': '2H',\r\n    '4 Hours': '4H',\r\n    '5 Hours': '5H',\r\n    '6 Hours': '6H',\r\n    '7 Hours': '7H',\r\n    '8 Hours': '8H',\r\n    '9 Hours': '9H',\r\n    '10 Hours': '10H',\r\n    '12 Hours': '12H',\r\n    '14 Hours': '14H',\r\n    '1 Day': '1D',\r\n    '1 Week': '1W',\r\n    '1 Month': '1N',\r\n    '3 Months': '3N',\r\n    '6 Months': '6N',\r\n    '1 Year': '1Y'\r\n}\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartMode = {\r\n    Collapsed: 'collapsed',\r\n    Expanded: 'expanded'\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartRateType = {\r\n    Ask: 0,\r\n    Bid: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartPriceLineType = {\r\n    CurrentRate: 0,\r\n    LimitLevel: 1,\r\n    StopLoss: 2,\r\n    TakeProfit: 3,\r\n    OpenRate: 4,\r\n    PriceAlertRate: 5\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eChartCustomTemplates = {\r\n    mobile: 'customMobileTemplate',\r\n    mobileDark: 'customMobileTemplateDark',\r\n    web: 'customtemplate',\r\n    webDark: 'customtemplateDark',\r\n}\r\n\r\n//----------------------------------------------------\r\n\r\nvar eCandleHistoryProperites = {\r\n    date: 0,\r\n    open: 1,\r\n    high: 2,\r\n    low: 3,\r\n    close: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eTickHistoryProperites = {\r\n    date: 0,\r\n    rate: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eClientStateResult = {\r\n    NotFound: 0,\r\n    Success: 1,\r\n    Failed: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eOperationStatus = {\r\n    None: 0,\r\n    Success: 1,\r\n    RequestFailed: 2,\r\n    InternalServerError: 3,\r\n    ValidationFailed: 4,\r\n    ExportValidationFailed: 5\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eViewState = {\r\n    Initial: 0,\r\n    Start: 1,\r\n    Stop: 2,\r\n    Save: 3,\r\n    Update: 4,\r\n    Refresh: 5\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eLimitsType = {\r\n    Active: \"Active\",\r\n    Executed: \"Executed\",\r\n    Deleted: \"Deleted\"\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eCSFlagStates = {\r\n    NotActive: 0,\r\n    Active: 1,\r\n    MaintenanceMode: 3\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eFrameContentValidation = {\r\n    Available: 0,\r\n    NotAvailable: 1,\r\n    SecurityFailure: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eRegistrationListName = {\r\n    QuotesTable: \"QuotesTable\",\r\n    ContractQuotesTable: \"ContractQuotesTable\",\r\n    InBetweenQuote: \"InBetweenQuote\",\r\n    SingleQuote: \"SingleQuote\",\r\n    TradingSignals: \"TradingSignals\",\r\n    Search: \"Search\"\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eInstrumentType = {\r\n    Mixed: 0, // Main Tab\r\n    Currencies: 1,\r\n    Commodities: 2,\r\n    Indices: 3,\r\n    Shares: 4,\r\n    ETF: 8,\r\n    Crypto: 9,\r\n    Stocks: 10\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eAssetType = {\r\n    Forex: 1,\r\n    Future: 2,\r\n    Share: 3,\r\n    Interest: 4\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar ePresetType = {\r\n    PresetCustomized: 0,\r\n    PresetMostPopular: 2,\r\n    PresetMostPopularWithoutFutures: 1,\r\n\r\n    PresetMostPopularCurrencies: 3,\r\n    PresetUsdCurrencies: 4,\r\n    PresetEurCurrencies: 5,\r\n    PresetGbpCurrencies: 6,\r\n    PresetJpyCurrencies: 7,\r\n    PresetOtherCurrencies: 8,\r\n\r\n    PresetCommodities: 9,\r\n    PresetCommoditiesWithoutFutures: 10,\r\n\r\n    IndiciesMostPopular_NoShares: 11,\r\n    PresetShares: 12,\r\n\r\n    PresetSharesUS: 13,\r\n    PresetSharesGermany: 15,\r\n    PresetSharesSpain: 16,\r\n    PresetSharesItaly: 17,\r\n    PresetSharesUK: 20,\r\n    PresetSharesFrance: 21,\r\n    PresetSharesJapan: 22,\r\n    PresetSharesRussia: 23,\r\n    PresetCommoditiesAgricultural: 24,\r\n    PresetCommoditiesEnergy: 25,\r\n    PresetCommoditiesMetals: 26,\r\n    IndicesEurope_NoShares: 27,\r\n    IndicesNorthAmerica_NoShares: 28,\r\n    IndicesOther_NoShares: 29,\r\n    PresetSharesSouthCorea: 30,\r\n    PresetSharesNetherlands: 31,\r\n    PresetSharesSwitzerland: 32,\r\n    PresetSharesSweden: 33,\r\n    PresetSharesHongKong: 125,\r\n    PresetSharesAustralia: 126,\r\n    PresetSharesMexico: 127,\r\n    PresetSharesPoland: 128,\r\n    PresetSharesGreece: 129,\r\n    PresetSharesCzechRepublic: 130,\r\n    PresetSharesHungary: 131,\r\n    PresetSharesFinland: 132,\r\n    SharesSaudiArabia: 135,\r\n    PresetSharesIndia: 140,\r\n\r\n    // General Tab continued  Most with different permissions\r\n    PresetMostPopularWithoutShares: 18, //with future\r\n    PresetMostPopularWithoutFuturesWithoutShares: 19,\r\n\r\n    MainHot: 80,\r\n    CurrenciesHot: 81,\r\n    SharesHot: 82,\r\n    MainHot_NoShares: 83,\r\n    MainHot_NoSharesNoFutures: 84,\r\n    MainTopGainers: 85,\r\n    CurrenciesTopGainers: 86,\r\n    SharesTopGainers: 87,\r\n    MainTopGainers_NoShares: 88,\r\n    MainTopGainers_NoSharesNoFuture: 89,\r\n    MainTopLosers: 90,\r\n    CurrenciesTopLosers: 91,\r\n    SharesTopLosers: 92,\r\n    MainTopLosers_NoShares: 93,\r\n    MainTopLosers_NoSharesNoFutures: 94,\r\n    CommoditiesHot: 95,\r\n    CommoditiesTopGainers: 96,\r\n    CommoditiesTopLosers: 97,\r\n    IndicesHot_NoShares: 98,\r\n    IndicesTopGainers_NoShares: 99,\r\n    IndicesTopLosers_NoShares: 100,\r\n    MainHot_NoFutures: 101,\r\n    MainTopGainers_NoFutures: 102,\r\n    MainTopLosers_NoFutures: 103,\r\n    ETFMostPopular: 104,\r\n    ETFHot: 105,\r\n    ETFTopGainers: 106,\r\n    ETFTopLosers: 107,\r\n    ETFCommodities: 108,\r\n    ETFEquityCountries: 109,\r\n    ETFEquityIndices: 110,\r\n    ETFEquitySectors: 111,\r\n    ETFFixedIncome: 112,\r\n    IndicesMostPopular: 113,\r\n    IndicesHot: 114,\r\n    IndicesTopGainers: 115,\r\n    IndicesTopLosers: 116,\r\n    IndicesEurope: 117,\r\n    IndicesNorthAmerica: 118,\r\n    IndicesOther: 119,\r\n\r\n    CryptoMostPopular: 120,\r\n    CryptoHot: 121,\r\n    CryptoTopGainers: 122,\r\n    CryptoTopLosers: 123,\r\n    CryptoCurrencies: 124,\r\n\r\n    PresetNewReleases: 136,\r\n    PresetNewReleasesNoFutures: 137,\r\n    PresetNewReleasesNoShares: 138,\r\n    PresetNewReleasesNoSharesNoFutures: 139,\r\n    StocksMostPopular: 141\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar Operation = {\r\n    Add: 0,\r\n    Substruct: 1\r\n};\r\n\r\n// topics used for modelview message comunication using ko post-box extension\r\nvar eTopic = {\r\n    onCancelPendingRedrawal: 'onCancelPendingRedrawal',\r\n    onDoubleLoginEvent: 'onDoubleLoginEvent',\r\n    onDynamicScriptsLoaded: 'onDynamicScriptsLoaded',\r\n    onCustomQuotesSaved: 'onCustomQuotesSaved'\r\n};\r\n\r\nvar eShutDownHandlerTopics = {\r\n    stopClientStateManagerCalls: 'onStopClientStateManagerCalls',\r\n    stopKeepAliveCalls: 'onStopKeepAliveCalls',\r\n    stopGetActiveIMCalls: 'onStopGetActiveIMCalls',\r\n    stopGetRatesRecentWebCalls: 'stopGetRatesRecentWebCalls',\r\n    restartClientStateManagerCalls: 'onRestartClientStateManagerCalls',\r\n    restartKeepAliveCalls: 'onRestartKeepAliveCalls',\r\n    restartGetActiveIMCalls: 'onRestartGetActiveIMCalls',\r\n    restartGetRatesRecentWebCalls: 'restartGetRatesRecentWebCalls'\r\n};\r\n\r\nvar eAppEvents = {\r\n    formChangeEvent: 'formChangeEvent',\r\n    formChangedEvent: 'formChangedEvent',\r\n    amlStatusLoadedEvent: 'amlStatusLoadedEvent',\r\n    cddStatusLoadedEvent: 'cddStatusLoadedEvent',\r\n    dialogClosed: 'dialogClosed',\r\n    exportDataLoadedEvent: 'exportDataLoadedEvent',\r\n    rolledOverDataLoaded: 'rolledOverDataLoaded',\r\n    accountCardRecordsDataLoaded: 'accountCardRecordsDataLoaded',\r\n    contractRolloverDataLoaded: 'contractRolloverDataLoaded',\r\n    customerInformationLoadedEvent: 'customerInformationLoadedEvent',\r\n    depositConfirmationLoadedEvent: 'depositConfirmationLoadedEvent'\r\n};\r\n\r\nvar eGender = {\r\n    Female: \"F\",\r\n    Male: \"M\"\r\n};\r\n\r\nvar eClaimActionType = {\r\n    Save: 1,\r\n    Fetch: 2,\r\n    Update: 3,\r\n    Delete: 4\r\n};\r\n\r\nvar eClaimRecordType = {\r\n    photocopyOfIDPassport: 1,\r\n    utilityBill: 2,\r\n    creditCardPhotocopy: 3,\r\n    PhotocopyOfCardholdersID: 4,\r\n    CardHolderAuthorization: 5,\r\n    depositConfirmation: 6,\r\n    withdrawalConfirmation: 7,\r\n    generalDocument: 8,\r\n    AMLapproval: 9,\r\n    TaxCard: 10,\r\n    PEP: 11,\r\n    KeyManager: 12,\r\n    CreditCard: 13,\r\n    Agreement: 14,\r\n    BeneficiaryDeclaration: 15,\r\n    CVV: 16\r\n};\r\n\r\nvar ePostboxTopic = {\r\n    ClaimRequestFailed: \"ClaimRequestFailed\",\r\n    UploadCCNumberResult: \"UploadResult\",\r\n    CCNumberValidation: \"CCNumberValidation\",\r\n    CVVValidation: \"CVVValidation\",\r\n    StartTokenizationFlowIfCCValid: \"StartTokenizationFlowIfCCValid\",\r\n    UsedCCNumber: \"UsedCCNumber\",\r\n    ClearCCData: \"ClearCCData\",\r\n    CCNumberIframeReady: \"CCNumberIframeReady\",\r\n    SetSpinnerVisibility: \"SetSpinnerVisibility\",\r\n    PaymentDeposit: \"payment-deposit\",\r\n    PaymentFormValid: \"payment-formValid\",\r\n    EnableCCFormFieldsValidation: \"EnableCCFormFieldsValidation\",\r\n    ValidateCCIframeFields: \"ValidateCCIframeFields\",\r\n    ValidateCCIframeFieldsResult: \"ValidateCCIframeFieldsResult\",\r\n    ConcretePaymentData: \"ConcretePaymentData\",\r\n    ReloadConcretePayments: \"ReloadConcretePayments\",\r\n    ConcretePaymentSelectedCountry: \"ConcretePaymentSelectedCountry\",\r\n    MissingInfo: \"MissingInfo\",\r\n    PaymentButtonsVisible: \"ButtonsVisible\"\r\n};\r\n\r\nvar eConcretePaymentDataState = {\r\n    Pending: \"ConcretePaymentDataPending\",\r\n    Success: \"ConcretePaymentDataSuccess\"\r\n};\r\n\r\nvar eTokenizationError = {\r\n    frameNotLoaded: 0,\r\n    uploadError: 1,\r\n    claimError: 2,\r\n    frameNotLoadedDepositIntended: 3\r\n};\r\n\r\nvar eAjaxerState = {\r\n    None: 0,\r\n    Retry: 1,\r\n    SlaCompromised: 2\r\n};\r\n\r\nvar eUIVersion = {\r\n    Default: 0\r\n};\r\n\r\nvar eSignalType = {\r\n    TechnicalAnalysis: 1,\r\n    Alert: 2,\r\n    CandleStick: 3,\r\n    Pattern: 4\r\n};\r\n\r\nvar eDirections = {\r\n    Up: \"up\",\r\n    Down: \"down\",\r\n    Bold: \"bold\"\r\n};\r\n\r\nvar ePCIValidationType = {\r\n    StartDepositFlow: 0,\r\n    StartDepositValidation: 1,\r\n    ResetValidation: 2\r\n};\r\n\r\nvar eConcretePaymentCategory = {\r\n    Recommended: 0,\r\n    CreditCard: 1,\r\n    EPayments: 2,\r\n    BankTransfer: 3,\r\n    PrepaidCards: 4,\r\n    LastPayment: 5\r\n};\r\n\r\nvar eFxNetEvents = {\r\n    Init: 'fx-net-init-event',\r\n    Start: 'fx-net-start-event',\r\n    End: 'fx-net-end-event',\r\n    UiLayerStart: 'fx-net-ui-layer-start-event',\r\n    UiLayerEnd: 'fx-net-ui-layer-end-event',\r\n    CacheLoadStart: 'fx-net-start-cache-load-event',\r\n    CacheLoadEnd: 'fx-net-end-cache-load-event',\r\n    InitialDataStart: 'fx-net-start-initial-data-event',\r\n    InitialDataEnd: 'fx-net-end-initial-data-event',\r\n    WaitHtmlStart: 'fx-net-start-wait-html-event',\r\n    WaitHtmlEnd: 'fx-net-end-wait-html-event',\r\n    ApplyBindingsStart: 'fx-net-start-apply-bindings-event',\r\n    ApplyBindingsEnd: 'fx-net-end-apply-bindings-event',\r\n    SplashScreenRemoved: 'fx-net-splash-screen-removed',\r\n    ExposeUi: 'fx-net-expose-ui-event',\r\n    GtmConfigurationSet: 'fx-net-gtm-configuration-set',\r\n    ChartInit: 'fx-net-chart-instance-init',\r\n    ChartInitComplete: 'fx-net-chart-instance-init-complete',\r\n    ChartStart: 'fx-net-chart-instance-start',\r\n    ChartStartComplete: 'fx-net-chart-instance-start-complete',\r\n    ChartGetHistoryRequest: 'fx-net-chart-get-history-request',\r\n    ChartGetHistoryResponse: 'fx-net-chart-get-history-response',\r\n    FirstQuoteEvent: 'fx-net-first-quote-event',\r\n    Trading_Central_Added: 'Trading_Central_Added',\r\n    Trading_Central_Removed: 'Trading_Central_Removed'\r\n};\r\n\r\nvar eRefDomElementsIds = {\r\n    newDealRefParentTopElement: \"#AccSummaryEquityTitle\"\r\n};\r\n\r\nvar eAvailabilityState = {\r\n    Unknown: -1,\r\n    NotAvailable: 0,\r\n    Available: 1\r\n};\r\n\r\nvar eApplicationTypes = {\r\n    Web: 0,\r\n    Mobile: 1,\r\n    Dealer: 3\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eDeepLinkParameterType = {\r\n    Integer: 0,\r\n    Instrument: 1,\r\n    OrderDir: 2,\r\n    Tab: 3,\r\n    Form: 4,\r\n    LoginOption: 5,\r\n    View: 6,\r\n    SettingsView: 7,\r\n    String: 8\r\n};\r\n\r\nvar eTransactionSwitcher = {\r\n    None: 0,\r\n    NewDeal: 1,\r\n    NewLimit: 2,\r\n    NewPriceAlert: 4\r\n};\r\n\r\nvar eExpirationDateUIType = {\r\n    Select: 1,\r\n    RadioGroup: 2\r\n};\r\n\r\nvar ePresetsOrder = {\r\n    None: 0,\r\n    Ascending: 1,\r\n    Descending: 2\r\n};\r\n\r\nvar eConfigContentValues = {\r\n    False: \"0\",\r\n    True: \"1\"\r\n};\r\n\r\nvar ePlatformSwitch = {\r\n    Demo: \"demo\",\r\n    Real: \"real\",\r\n    None: \"none\"\r\n};\r\n\r\nvar ePendingBonusType = {\r\n    cashBack: 0,\r\n    spreadDiscount: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eHistoryStateType = {\r\n    ExitFullscren: 'exitfullscren',\r\n    EnterFullscren: 'enterfullscren',\r\n    CloseAlert: 'closealert',\r\n    CloseDialog: 'closedialog',\r\n    Invalid: 'invalid',\r\n    View: 'view',\r\n    Questionnaire: 'questionnaire',\r\n    Wizard: 'wizard'\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar ePopupType = {\r\n    Alert: 'alert',\r\n    Dialog: 'dialog'\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eNavigateDirection = {\r\n    Next: 0,\r\n    Prev: 1\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eSetLimitsTabs = {\r\n    None: 0,\r\n    Rate: 1,\r\n    Amount: 2,\r\n    NoTabs: 3,\r\n    Percent: 4\r\n};\r\n\r\nvar eUIScreens = {\r\n    FXNetMobileDefault: 11,\r\n    FXNetMobileTradingMajors: 12,\r\n    FXNetMobileTradingMinors: 13,\r\n    FXNetMobileEuroCrosses: 14,\r\n    FXNetMobileGBPCrosses: 15,\r\n    FXNetMobileJPYCrosses: 16,\r\n    FXNetMobileOtherCrosses: 17,\r\n    FXNetMobileCFD: 32,\r\n    FXNetMobileDefaultWithoutfutures: 33\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eWeekendFinancingTypes = {\r\n    None: 0,\r\n    Friday: 1,\r\n    Thursday: 2\r\n};\r\n\r\n//----------------------------------------------------\r\n\r\nvar eResourcesNames = {\r\n    ChartsResources: 'charts_resources',\r\n    FaqDeposit: 'faqdeposit',\r\n    FaqDepositThankYou: 'faqdepositthankyou',\r\n    Support: 'support',\r\n    FaqUploadDocuments: 'faquploaddocuments'\r\n};\r\n\r\nvar eStateObjectTopics = {\r\n    ReadyForUse: \"ReadyForUse\",\r\n    ToolsToggle: \"toolsToggle\",\r\n    SignalChartToggle: \"signalChartToggle\",\r\n    CsmOutOfDate: \"CsmOutOfDate\",\r\n    UserFlowChanged: \"UserFlowChanged\",\r\n    ClosedDealsUseFilters: 'ClosedDealsUseFilters',\r\n    ScmmFddLoaded: 'ScmmFddLoaded'\r\n}\r\n\r\nvar eQuestionnaireType = {\r\n    CDD: 0,\r\n    KYC: 1,\r\n    MIFID: 2\r\n};\r\n\r\nvar eAccountMode = {\r\n    None: \"0\",\r\n    Demo: \"1\",\r\n    Real: \"2\"\r\n};\r\n\r\nvar eEducationalTutorialsType = {\r\n    Basic: \"novice\",\r\n    Advanced: \"advanced\"\r\n};\r\n\r\nvar eWireTransferStatus = {\r\n    Pending: 3,\r\n    Approved: 4,\r\n    Canceled: 5,\r\n    ApprovalOnPending: 6,\r\n    CanceledPendingDeposit: 7\r\n};\r\n\r\nvar eUploadDocumentType = {\r\n    ProofOfID: 1,\r\n    ProofOfResidence: 2,\r\n    CreditCardCopy: 3,\r\n    DepositConfirmation: 6,\r\n    WithdrawalPendingRequest: 7,\r\n    OtherDocuments: 8,\r\n    TaxCard: 10\r\n};\r\n\r\nvar eUploadDocumentStatus = {\r\n    Approved: 1,\r\n    AwaitingDocument: 2,\r\n    Processing: 3,\r\n    Incomplete: 4,\r\n    NotRequired: 5,\r\n    AwaitingSignature: 6,\r\n    AwaitingSignatureHighAmount: 7\r\n};\r\n\r\nvar eCountryAttributes = {\r\n    Id: 0,\r\n    Name: 1,\r\n    IsActive: 2\r\n};\r\n\r\nvar eFormActions = {\r\n    newDeal: 'NewDeal',\r\n    newLimit: 'NewLimit',\r\n    deposit: 'Deposit'\r\n};\r\n\r\nvar eFixPosition = {\r\n    deletePosition: 1,\r\n    restorePosition: 0\r\n};\r\n\r\nvar registerParams = {\r\n    traderInstrumentId: 'trader_instrumentId=',\r\n    traderOrderDir: '&trader_orderdir=',\r\n    traderFrom: 'trader_from',\r\n};\r\n\r\nvar eUserFlowSteps = {\r\n    None: -1,\r\n    OpenedAnAccount: 0,\r\n    GeneralInforamtionQuestionnaire: 1,\r\n    TradingKnowledgeQuiz: 2,\r\n    ProofOfIdentity: 3,\r\n    FundYourAccount: 4,\r\n    Trade: 5\r\n};\r\nvar eUserStatus = {\r\n    NA: -1,\r\n    NotActivated: 0,\r\n    ReadyToTrade: 1,\r\n    ActiveLimited: 2,\r\n    Active: 3,\r\n    Restricted: 4,\r\n    Locked: 5\r\n};\r\nvar eStepStatus = {\r\n    NotActive: 0, // black\r\n    Seamless: 1, // gray\r\n    Error: 2, // red x\r\n    Restricted: 3, // red no entry\r\n    Available: 4, // blue\r\n    Complete: 5, // green\r\n    Hidden: 6\r\n};\r\nvar eCta = {\r\n    None: 0,\r\n    Seamless: 1,\r\n    ContactUs: 2,\r\n    ClientQuestionnaire: 3,\r\n    Deposit: 4,\r\n    UploadDocuments: 5\r\n};\r\n\r\nvar eAccountRedirectForms = {\r\n    WithdrawalAutomation: 1013,\r\n    WireTransfers: 1015,\r\n    NewApproveWireTransfer: 1016,\r\n    WithdrawalProcess: 1017,\r\n    ConvertBalance: 1018,\r\n    ConvertAccountLine: 1019,\r\n    GeneralAccountActions: 1020,\r\n    FixPosition: 1021\r\n};\r\n\r\nvar eRequestAccessType = {\r\n    Signals: 0,\r\n    VideoLessons: 1,\r\n    Tutorials: 2\r\n};\r\n\r\nvar eStateObjectAccessRequest = {\r\n    Signals: \"Signals\",\r\n    VideoLessons: \"VideoLessons\",\r\n    Tutorials: \"Tutorials\"\r\n};\r\n\r\nvar eAccessRequestStatus = {\r\n    RequestNotSubmitted: 1,\r\n    RequestSubmitted: 2,\r\n    ExtensionNotSubmitted: 3,\r\n    ExtensionSubmitted: 4\r\n};\r\n\r\nvar instrumentInfoProps = {\r\n    pipValue: 'pipValue',\r\n    pipWorth: 'pipWorth',\r\n    requiredMargin: 'requiredMargin',\r\n    offHoursRequiredMargin: 'offHoursRequiredMargin',\r\n    maximumLeverage: 'maximumLeverage',\r\n    minDealAmount: 'minDealAmount',\r\n    maxDealAmount: 'maxDealAmount',\r\n    marketPriceTolerance: 'marketPriceTolerance',\r\n    ofSell: 'ofSell',\r\n    ofBuy: 'ofBuy',\r\n    ofPercentageSell: 'ofPercentageSell',\r\n    ofPercentageBuy: 'ofPercentageBuy',\r\n    overnightFinancingGMT: 'overnightFinancingGMT',\r\n    rolloverDate: 'rolloverDate',\r\n    dividendDate: 'dividendDate',\r\n    dividendAmount: 'dividendAmount',\r\n    weekendFinancing: 'weekendFinancing'\r\n};\r\n\r\nvar eDealerParams = {\r\n    DealerCurrency: 'dealerCurrency',\r\n    DealerAdvancedWalletView: 'dealerAdvancedWalletView'\r\n};\r\n\r\nvar ePeriodTabs = {\r\n    None: -1,\r\n    Short: 0,\r\n    Medium: 1,\r\n    Long: 2\r\n};\r\n\r\nvar eMarketInfoPeriods = {\r\n    FiveMin: 1,\r\n    OneH: 2,\r\n    TwelveHours: 3,\r\n    Today: 4,\r\n    OneDay: 5,\r\n    OneWeek: 6,\r\n    TwoWeeks: 7,\r\n    ThisMonth: 8,\r\n    ThirtyDays: 9,\r\n    NinetyDays: 10,\r\n    FiftyTwoWeeks: 11,\r\n    ThisYear: 12\r\n};\r\n\r\nvar eRateIDataPositions = {\r\n    Id: 0,\r\n    High: 1,\r\n    Low: 2\r\n};\r\n\r\n\r\nvar eMarketInfoPrefixEvent = {\r\n    NewDeal: 'deal-slip',\r\n    NewLimitViewModel: 'limit-slip',\r\n    CloseDeal: 'close-deal',\r\n    EditLimitViewModel: 'edit-limit',\r\n    EditClosingLimit: 'edit-closing-limit'\r\n};\r\n\r\nvar eMarketInfoNameEvent = {\r\n    TradingSentiment: 'trading-sentiment',\r\n    MarketInfo: 'market-info',\r\n    HighLow: 'high-low',\r\n    InstrumentInfo: 'instrument-info'\r\n};\r\n\r\nvar eAccordionState = {\r\n    collapse: 'collapse',\r\n    expand: 'expand'\r\n};\r\n\r\nvar eMarketInfoEvents = {\r\n    DealSlipTradingSentimentCollapse: 'deal-slip-collapse-trading-sentiment',\r\n    DealSlipTradingSentimentExpand: 'deal-slip-expand-trading-sentiment',\r\n    DealSlipMarketInfoCollapse: 'deal-slip-collapse-market-info',\r\n    DealSlipMarketInfoExpand: 'deal-slip-expand-market-info',\r\n    DealSlipHighLowCollapse: 'deal-slip-collapse-high-low',\r\n    DealSlipHighLowExpand: 'deal-slip-expand-high-low',\r\n    DealSlipInstrumentInfoCollapse: 'deal-slip-collapse-instrument-info',\r\n    DealSlipInstrumentInfoExpand: 'deal-slip-expand-instrument-info',\r\n\r\n    LimitSlipTradingSentimentCollapse: 'limit-slip-collapse-trading-sentiment',\r\n    LimitSlipTradingSentimentExpand: 'limit-slip-expand-trading-sentiment',\r\n    LimitSlipMarketInfoCollapse: 'limit-slip-collapse-market-info',\r\n    LimitSlipMarketInfoExpand: 'limit-slip-expand-market-info',\r\n    LimitSlipHighLowCollapse: 'limit-slip-collapse-high-low',\r\n    LimitSlipHighLowExpand: 'limit-slip-expand-high-low',\r\n    LimitSlipInstrumentInfoCollapse: 'limit-slip-collapse-instrument-info',\r\n    LimitSlipInstrumentInfoExpand: 'limit-slip-expand-instrument-info',\r\n\r\n    CloseDealTradingSentimentCollapse: 'close-deal-collapse-trading-sentiment',\r\n    CloseDealTradingSentimentExpand: 'close-deal-expand-trading-sentiment',\r\n    CloseDealMarketInfoCollapse: 'close-deal-collapse-market-info',\r\n    CloseDealMarketInfoExpand: 'close-deal-expand-market-info',\r\n    CloseDealHighLowCollapse: 'close-deal-collapse-high-low',\r\n    CloseDealHighLowExpand: 'close-deal-expand-high-low',\r\n    CloseDealInstrumentInfoCollapse: 'close-deal-collapse-instrument-info',\r\n    CloseDealInstrumentInfoExpand: 'close-deal-expand-instrument-info',\r\n\r\n    EditClosingLimitTradingSentimentCollapse: 'edit-closing-limit-collapse-trading-sentiment',\r\n    EditClosingLimitTradingSentimentExpand: 'edit-closing-limit-expand-trading-sentiment',\r\n    EditClosingLimitMarketInfoCollapse: 'edit-closing-limit-collapse-market-info',\r\n    EditClosingLimitMarketInfoExpand: 'edit-closing-limit-expand-market-info',\r\n    EditClosingLimitHighLowCollapse: 'edit-closing-limit-collapse-high-low',\r\n    EditClosingLimitHighLowExpand: 'edit-closing-limit-expand-high-low',\r\n    EditClosingLimitInstrumentInfoCollapse: 'edit-closing-limit-collapse-instrument-info',\r\n    EditClosingLimitInstrumentInfoExpand: 'edit-closing-limit-expand-instrument-info',\r\n\r\n    EditLimitTradingSentimentCollapse: 'edit-limit-collapse-trading-sentiment',\r\n    EditLimitTradingSentimentExpand: 'edit-limit-expand-trading-sentiment',\r\n    EditLimitMarketInfoCollapse: 'edit-limit-collapse-market-info',\r\n    EditLimitMarketInfoExpand: 'edit-limit-expand-market-info',\r\n    EditLimitHighLowCollapse: 'edit-limit-collapse-high-low',\r\n    EditLimitHighLowExpand: 'edit-limit-expand-high-low',\r\n    EditLimitInstrumentInfoCollapse: 'edit-limit-collapse-instrument-info',\r\n    EditLimitInstrumentInfoExpand: 'edit-limit-expand-instrument-info'\r\n};\r\n\r\nvar eMarketInfoSectionsProps = {\r\n    tsArea: 0,\r\n    miArea: 1,\r\n    hlArea: 2,\r\n    iiArea: 3\r\n};\r\n\r\nvar eWithdrawalSteps = {\r\n    setAmount: 1,\r\n    setMethod: 2,\r\n    setBankDetails: 3,\r\n    setCreditCard: 4,\r\n    setApproval: 5\r\n};\r\n\r\nvar eWithdrawalMethods = {\r\n    card: 0,\r\n    bank: 1\r\n};\r\n\r\nvar eHelpcSections = {\r\n    default: 'helpc',\r\n    personalguide: 'pg'\r\n};\r\n\r\nvar eHowtoWthrough = {\r\n    quickTour: 'qpt',\r\n    foundAccount: 'fya',\r\n    openDeal: 'oad',\r\n    uploadDocument: 'uad'\r\n};\r\n\r\nvar eCustomerStateSuffix = {\r\n    seameless: '_seameless',\r\n    pending: '_pending',\r\n    live: '_live',\r\n    demo: '_demo'\r\n};\ndefine(\"enums/enums\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.eDepositingActionType;\n    };\n}(this)));\n\n",
    "define(\r\n    'configuration/Containers',\r\n    [\r\n        'require',\r\n        'customEnums/ViewsEnums',\r\n        'enums/enums',\r\n        'handlers/HashTable'\r\n    ],\r\n    function Containers(require) {\r\n        var THashTable = require('handlers/HashTable');\r\n        var viewsCollections = {};\r\n        var formsContainer = new THashTable();\r\n        var _uiVersion;\r\n        var independentViews = [\r\n            eViewTypes.vMissingCustomerInformation\r\n        ];\r\n\r\n        viewsCollections[eUIVersion.Default] = function () {\r\n            formsContainer.SetItem(eForms.Quotes, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vQuotes,\r\n                    eViewTypes.vMenu,\r\n                    eViewTypes.vMarketClosed,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vQuotesPreset\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.OpenDeals, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vOpenDeals,\r\n                    eViewTypes.vMenu,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Limits, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vLimits,\r\n                    eViewTypes.vMenu,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ClosedDeals, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vClosedDealsSummaries,\r\n                    eViewTypes.vMenu,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ClosedDealsFilter, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vClosedDealsFilter,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ContractRollover, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vContractRollover,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.AccountCardRecords, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vAccountCardRecords,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.AccountCardRecordsCosts, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vAccountCardRecords,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Wallet, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vWallet,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Transaction, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTransactionSwitcher,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.NewPriceAlert, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vNewPriceAlert,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ClosedDealDetails, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vClosedDealDetails,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Balance, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vBalance,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.NetExposure, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vNetExposure,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.CashBack, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vCashBack,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Withdrawal, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vWithdrawal,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.EditFavoriteInstruments, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vEditFavoriteInstruments,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.EditClosingLimit, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vEditClosingLimit,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.CloseDeal, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vCloseDeal,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.InternalContactUs, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vInternalContactUs,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.PendingWithdrawal, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vPendingWithdrawal,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.EditLimit, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vEditLimit,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Menu, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vMenu\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Deposit, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vPaymentTypes,\r\n                    eViewTypes.vMenu\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.DepositSuccess, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vDepositSuccessThankYou,\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.DepositPending, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vDepositPendingThankYou,\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ConcretePaymentForm, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vConcretePaymentForm\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Charts, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vCharts\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.AddInstrument, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vAddInstrument,\r\n                    eViewTypes.vTradingSummery\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ThirdParty, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vThirdParty\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.Aml, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vAmlStatus,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ClientQuestionnaire, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vClientQuestionnaire,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.ChangePassword, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vChangePassword\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.UploadDocuments, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vUploadDocuments\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.TradingSignals, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vTradingSignals\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.EconomicCalendar, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vEconomicCalendar\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.EconomicCalendarFilter, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vPopupHeader,\r\n                    eViewTypes.vEconomicCalendar,\r\n                    eViewTypes.vEconomicCalendarFilter\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.EducationalTutorials, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vEducationalTutorialsSwitcher\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.TradingSignalDetails, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vTradingSignalDetails\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.SignalsDisclaimer, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vPopupHeader,\r\n                    eViewTypes.vSignalsDisclaimer\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.NotificationsSettings, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vNotificationsSettings\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.WithdrawalBankDetails, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vWithdrawalBankDetails,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.WithdrawalCCDetails, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vWithdrawalCCDetails,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.HelpDepositThankYou, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vHelpDepositThankYou,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.HelpUploadDocuments, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vHelpUploadDocuments,\r\n                    eViewTypes.vPopupHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.EducationalTutorialsAccess, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vPopupHeader,\r\n                    eViewTypes.vEducationalTutorialsAccess\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.PriceAlerts, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vPriceAlerts\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.WireTransfer, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vWireTransfer\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.WireTransferSuccess, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vTradingSummery,\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vWireTransferSuccess\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.UserFlowMap, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vUserFlowMap\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.AccountPreferences, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vAccountPreferences\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.PersonalInformation, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vDynamicHeader,\r\n                    eViewTypes.vPersonalInformation\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.WithdrawalThankYou, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vWithdrawalThankYou,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.InternalContactUs, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vInternalContactUs,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.FeedbackUs, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vFeedbackUs,\r\n                    eViewTypes.vDynamicHeader\r\n                ]\r\n            });\r\n\r\n            formsContainer.SetItem(eForms.DocumentVerificationModal, {\r\n                \"mappedViews\": [\r\n                    eViewTypes.vPopupHeader,\r\n                    eViewTypes.vDocumentVerificationModal\r\n                ]\r\n            });\r\n\r\n        };\r\n\r\n        var getUiVersion = function () {\r\n            return _uiVersion;\r\n        };\r\n\r\n        var init = function (uiVersion) {\r\n            formsContainer.Clear();\r\n\r\n            if (typeof viewsCollections[uiVersion] === \"undefined\") {\r\n                // Fallback to First version\r\n                uiVersion = eUIVersion.Default;\r\n            }\r\n\r\n            viewsCollections[uiVersion]();\r\n\r\n            _uiVersion = uiVersion;\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            IndependentViews: independentViews,\r\n            Forms: formsContainer,\r\n            MainForm: eForms.Quotes,\r\n            UiVersion: getUiVersion\r\n        };\r\n    }\r\n);\n",
    "/* global General */\r\nvar TDALCustomer = function (jsonhelper, general) {\r\n    function getShouldChangePassword() {\r\n        var ajaxer = new TAjaxer(),\r\n            callerInfo = \"TDALCustomer/shouldChangePassword\";\r\n\r\n        return ajaxer.promises\r\n            .get(callerInfo, \"Customer/ShouldChangePassword\", \"\")\r\n            .then(processResponse)\r\n            .fail(onError.bind(null, callerInfo));\r\n    }\r\n\r\n    function processResponse(responseText) {\r\n        return jsonhelper.STR2JSON(\"TDALCustomer/processResponse\", responseText) || {};\r\n    }\r\n\r\n    function onError(callerInfo) {\r\n        ErrorManager.onError(callerInfo, \"\", eErrorSeverity.medium);\r\n    }\r\n\r\n    function getRequiredFieldsForDeposit(onSuccess) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        ajaxer.get(\"TDALCustomer/getRequiredFieldsForDeposit\", \"Customer/GetRequiredFieldsForDeposit\", \"\",\r\n            onSuccess,\r\n            function () { ErrorManager.onError(\"TDALCustomer/getRequiredFieldsForDeposit\", \"\", eErrorSeverity.medium); });\r\n    }\r\n\r\n    function updateMissingInformation(missingInformationModel, onSuccess) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        ajaxer.jsonPost(\"TDALCustomer/updateMissingInformation\",\r\n            \"Customer/UpdateMissingCustomerInformation\" + String.format(\"?SecurityToken={0}\", systemInfo.securityToken),\r\n            JSON.stringify(missingInformationModel),\r\n            onSuccess,\r\n            function (error) { ErrorManager.onError(\"TDALCustomer/updateMissingInformation\", error.message, eErrorSeverity.low); }, 0);\r\n    }\r\n\r\n    function isIdNumberValid(valueToValidate, onSuccess, onFailure) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        ajaxer.get(\"TDALCustomer/isIdNumberValid\", \"Customer/IsIdNumberValid?\" + String.format(\"valueToValidate={0}\", valueToValidate),\r\n            \"\",\r\n            onSuccess,\r\n            function () {\r\n                ErrorManager.onError(\"TDALCustomer/getRequiredFieldsForDeposit\", \"\", eErrorSeverity.medium);\r\n                onFailure();\r\n            });\r\n    }\r\n\r\n    function getCustomerSignalsPermissions() {\r\n        var ajaxer = new TAjaxer(),\r\n            callerInfo = \"TDALTradingSignals/getCustomerSignalsPermissions\";\r\n\r\n        return ajaxer.promises\r\n            .get(callerInfo, \"api/tradingsignals/GetClientSignalsPermissions\", \"\")\r\n            .then(processResponse)\r\n            .fail(onError.bind(null, callerInfo));\r\n    }\r\n\r\n    function getCustomerAgreementPhrase(OnLoadComplete) {\r\n        if (!General.isFunctionType(OnLoadComplete)) {\r\n            OnLoadComplete = general.emptyFn;\r\n        }\r\n\r\n        var ajaxer = new TAjaxer();\r\n        var params = \"countryID=\" + $customer.prop.countryID;\r\n\r\n        return ajaxer.promises\r\n            .get(\"TDALCustomer/getCustomerAgreementPhrase\", \"Account/AgreementPhrase\",\r\n                params,\r\n                OnLoadComplete,\r\n                function () {\r\n                    ErrorManager.onError(\"TDALCustomer/getCustomerAgreementPhrase\", \"\", eErrorSeverity.medium);\r\n                }\r\n            );\r\n    }\r\n\r\n    function getCustomerDetails() {\r\n        var ajaxer = new TAjaxer();\r\n\r\n\r\n        return ajaxer.promises\r\n            .get(\"TDALCustomer/getCustomerDetails\", 'customer/customerDetails',\r\n                null,\r\n                general.emptyFn,\r\n                function () {\r\n                    ErrorManager.onError(\"TDALCustomer/getCustomerDetails\", \"\", eErrorSeverity.medium);\r\n                }\r\n            );\r\n    }\r\n\r\n    function hasMissingInformation() {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        return ajaxer.promises\r\n            .get(\"TDALCustomer/getHasMissingInformation\", 'customer/hasMissingInformation',\r\n                null,\r\n                general.emptyFn,\r\n                function () {\r\n                    ErrorManager.onError(\"TDALCustomer/getHasMissingInformation\", \"\", eErrorSeverity.medium);\r\n                }\r\n            );\r\n    }\r\n\r\n    function getEducationalTutorials() {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        return ajaxer.promises\r\n            .get(\"TDALCustomer/getEducationalTutorials\", \"Tutorials/GetVideoLessons\",\r\n                null, null, null, 1, null, null, false\r\n            )\r\n            .then(function (responseText) {\r\n                return jsonhelper.STR2JSON(\"dalCustomer/getEducationalTutorials\", responseText);\r\n            })\r\n            .fail(function (error) {\r\n                ErrorManager.onError(\"TDALCustomer/getEducationalTutorials\", error.message, eErrorSeverity.medium);\r\n\r\n                throw error;\r\n            });\r\n    }\r\n\r\n    function getCustomer() {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        return ajaxer.promises\r\n            .get(\r\n                \"TDALCustomer/getCustomer\",\r\n                'customer/GetCustomer',\r\n                null)\r\n            .fail(function () {\r\n                ErrorManager.onError(\"TDALCustomer/getCustomerDetails\", \"\", eErrorSeverity.high);\r\n            })\r\n    }\r\n\r\n    function getToken() {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        return ajaxer.promises\r\n            .get(\r\n                \"GetToken\",\r\n                'Account/GetToken',\r\n                null)\r\n            .fail(function () {\r\n                ErrorManager.onError(\"TDALCustomer/getToken\", \"\", eErrorSeverity.high);\r\n            });\r\n    }\r\n\r\n    function initialScmmData(callback) {\r\n        var ajaxer = new TAjaxer();\r\n        return ajaxer.promises\r\n            .get('dalCustomer/initialScmmData', 'Compliance/InitialScmmDataGet')\r\n            .then(callback)\r\n            .fail(function (error) {\r\n                window.ErrorManager.onError('dalCustomer/initialScmmData', error.message, eErrorSeverity.medium);\r\n            });\r\n    }\r\n\r\n    return {\r\n        GetShouldChangePassword: getShouldChangePassword,\r\n        getCustomer: getCustomer,\r\n        GetCustomerDetails: getCustomerDetails,\r\n        GetRequiredFieldsForDeposit: getRequiredFieldsForDeposit,\r\n        IsIdNumberValid: isIdNumberValid,\r\n        UpdateMissingInformation: updateMissingInformation,\r\n        getCustomerSignalsPermissions: getCustomerSignalsPermissions,\r\n        GetCustomerAgreementPhrase: getCustomerAgreementPhrase,\r\n        HasMissingInformation: hasMissingInformation,\r\n        GetEducationalTutorials: getEducationalTutorials,\r\n        GetToken: getToken,\r\n        InitialScmmData: initialScmmData\r\n    };\r\n};\r\n\ndefine(\"dataaccess/dalcustomer\", [\"handlers/Ajaxer\",\"JSONHelper\",\"handlers/general\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (Ajaxer, jsonhelper, general) {\r\n\t\t\t\treturn this.TDALCustomer(jsonhelper, general);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TDALCustomer;\n    };\n}(this)));\n\n",
    "define(\"initdatamanagers/Customer\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"handlers/general\",\r\n\t\"initdatamanagers/SymbolsManager\",\r\n\t\"configuration/Containers\",\r\n\t\"dataaccess/dalcustomer\",\r\n\t\"global/UrlResolver\",\r\n\t\"JSONHelper\",\r\n\t\"Q\",\r\n\t\"handlers/Logger\",\r\n], function TCustomer(require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tlogger = require(\"handlers/Logger\"),\r\n\t\tSymbolsManager = require(\"initdatamanagers/SymbolsManager\"),\r\n\t\tContainers = require(\"configuration/Containers\"),\r\n\t\tdalCustomer = require(\"dataaccess/dalcustomer\"),\r\n\t\tJSONHelper = require(\"JSONHelper\"),\r\n\t\turlResolver = require(\"global/UrlResolver\"),\r\n\t\tQ = require(\"Q\");\r\n\r\n\tvar prop = {},\r\n\t\t_isAuthenticated = false,\r\n\t\tsignalsPermissionsPromise = Q.defer();\r\n\r\n\tfunction init(profileCustomer, defaultFirstPage, homePage, sjcKey) {\r\n\t\tprop.brokerType = \"3\";\r\n\t\tprop.email = profileCustomer.Email;\r\n\t\tprop.minPctEQXP = profileCustomer.MinPctEQXP;\r\n\t\tprop.selectedCcyId = ko.observable(profileCustomer.AccountBaseSymbol);\r\n\t\tprop.baseCcyId = ko.observable(profileCustomer.AccountBaseSymbol);\r\n\t\tprop.defaultCcy = ko.observable(SymbolsManager.GetTranslatedSymbolById(profileCustomer.AccountBaseSymbol));\r\n\t\tprop.sjcKey = sjcKey;\r\n\r\n\t\tprop.selectedCcyName = ko.computed(function () {\r\n\t\t\treturn SymbolsManager.GetTranslatedSymbolById(prop.selectedCcyId());\r\n\t\t});\r\n\r\n\t\tprop.baseCcyName = ko.computed(function () {\r\n\t\t\treturn SymbolsManager.GetTranslatedSymbolById(prop.baseCcyId());\r\n\t\t});\r\n\r\n\t\tprop.accountNumber = profileCustomer.AccountNumber;\r\n\t\tprop.language = profileCustomer.Language;\r\n\t\tprop.dealPermit = profileCustomer.DealPermit;\r\n\r\n\t\tprop.isQA = profileCustomer.isQA;\r\n\t\tprop.countryID = profileCustomer.CountryID;\r\n\t\tprop.brokerID = profileCustomer.BrokerID;\r\n\t\tprop.shareStatus = profileCustomer.StocksTradingPermission;\r\n\t\tprop.futureStatus = profileCustomer.FuturesTradingPermission;\r\n\t\tprop.interactiveMessagesToken = profileCustomer.InteractiveMessagesToken;\r\n\t\tprop.interactiveMessagesUrl = profileCustomer.InteractiveMessagesUrl;\r\n\t\tprop.ratesServiceHost = profileCustomer.RatesServiceHost;\r\n\t\tprop.hasTransactionsReport = profileCustomer.HasTransactionsReport;\r\n\r\n\t\tprop.tradingPermissions = setStartUpAndMainPageAndTradingPermissions(defaultFirstPage, homePage);\r\n\t\tprop.dateAdded = general.str2Date(profileCustomer.DateAdded);\r\n\t\tprop.isLive = Boolean.parse(profileCustomer.IsLive);\r\n\t\tprop.isPending = Boolean.parse(profileCustomer.IsPending);\r\n\r\n\t\tprop.isAccountExpired = profileCustomer.IsAccountExpired;\r\n\t\tprop.customerType = profileCustomer.AccountType;\r\n\r\n\t\tprop.SAProcess = profileCustomer.SAProcess;\r\n\t\tprop.serial = profileCustomer.Serial;\r\n\t\tprop.brokerName = profileCustomer.BrokerName;\r\n\t\tprop.brokerAllowLimitsOnNoRates = profileCustomer.BrokerAllowLimitsOnNoRates;\r\n\t\tprop.LiquidationPercentage = profileCustomer.LiquidationPercentage;\r\n\t\tprop.isDemo = Boolean.parse(profileCustomer.IsDemo);\r\n\t\tprop.hasActiveDemo = Boolean.parse(profileCustomer.HasActiveDemo);\r\n\r\n\t\tprop.signalsEndDate = profileCustomer.SignalsEndDate;\r\n\t\tprop.hasWeightedVolumeFactor = profileCustomer.HasWeightedVolumeFactor;\r\n\t\tprop.autoConvert = profileCustomer.AutoConvert;\r\n\r\n\t\tprop.isOvernightOnForex = profileCustomer.IsOvernightOnForex;\r\n\r\n\t\tprop.userName = profileCustomer.UserName;\r\n\t\tprop.firstName = profileCustomer.FirstName;\r\n\t\tprop.lastName = profileCustomer.LastName;\r\n\t\tprop.agreementType = profileCustomer.AgreementType;\r\n\t\tprop.signAgreementDate = general.str2Date(profileCustomer.SignAgreementDate);\r\n\t\tprop.hasMissingInformation = Boolean.parse(profileCustomer.HasMissingInformation);\r\n\t\tprop.sjcKey = profileCustomer.sjcKey;\r\n\r\n\t\tprop.idByShufti = profileCustomer.IDByShufti;\r\n\t\tprop.ubByShufti = profileCustomer.UBByShufti;\r\n\r\n\t\tprop.abTestings = {\r\n\t\t\tgroupsNames: profileCustomer.ABTestings.map(function (ab) {\r\n\t\t\t\treturn ab.GroupName;\r\n\t\t\t}),\r\n\t\t\ttestsNames: profileCustomer.ABTestings.map(function (ab) {\r\n\t\t\t\treturn ab.TestName;\r\n\t\t\t}),\r\n\t\t\tconfiguration: profileCustomer.ABTestings.reduce(function (accumulator, ab) {\r\n\t\t\t\treturn Object.assign(accumulator, JSON.parse(ab.Configuration));\r\n\t\t\t}, {}),\r\n\t\t};\r\n\r\n\t\tif (systemInfo.isNative && prop.abTestings.configuration[\"fx-feedback\"] !== false) {\r\n\t\t\tprop.abTestings.configuration[\"fx-feedback\"] = true;\r\n\t\t}\r\n\r\n\t\t// for smart client\r\n\t\tprop.compliance = profileCustomer.compliance;\r\n\t\tprop.maintenanceMarginPercentage = profileCustomer.maintenanceMargin;\r\n\r\n\t\t_isAuthenticated = true;\r\n\r\n\t\tprop.isAutologin = urlResolver.getIsAutoLogin();\r\n\r\n\t\tprop.isSeamless = profileCustomer.IsSeamless;\r\n\r\n\t\tprop.csmTrace = ko.observable(false);\r\n\r\n\t\tupdateSignalsPermissions().done();\r\n\t\tupdateShouldChangePassword();\r\n\t}\r\n\r\n\tfunction isAuthenticated() {\r\n\t\treturn _isAuthenticated;\r\n\t}\r\n\r\n  function hasAbTestConfig(propertyName) {\r\n\t  return !!prop.abTestings.configuration[propertyName];\r\n  }\r\n\r\n\r\n\t// mainPage: the main form based on client permission\r\n\t// startup form - the start up form based on the default form saved in database\r\n\t// defaultFirstPage - the saved page on the custoemr profile, should not be used other than this mapping\r\n\tfunction setStartUpAndMainPageAndTradingPermissions(defaultFirstPage, homePage) {\r\n\t\tvar tradingPermissions = {};\r\n\r\n\t\tif (!homePage) {\r\n\t\t\thomePage = Containers.MainForm;\r\n\t\t}\r\n\r\n\t\t//default not exists in client profile\r\n\t\tif (defaultFirstPage === 0) {\r\n\t\t\tdefaultFirstPage = Containers.MainForm;\r\n\t\t}\r\n\r\n\t\tprop.mainPage = homePage;\r\n\t\ttradingPermissions.hasTransactionsReport = prop.hasTransactionsReport == \"True\";\r\n\r\n\t\ttradingPermissions.isOnlyForexCustomer = true;\r\n\t\tprop.startUpForm = defaultFirstPage;\r\n\r\n\t\treturn tradingPermissions;\r\n\t}\r\n\r\n  function isAutologin() {\r\n      return !!prop.isAutologin;\r\n  }\r\n\r\n\r\n\tfunction logout() {\r\n\t\t_isAuthenticated = false;\r\n\t}\r\n\r\n\tfunction hasMissingAgreement() {\r\n\t\treturn prop.signAgreementDate === null && prop.agreementType === 0;\r\n\t}\r\n\r\n\tfunction updateMissingInformation(customerUpdated) {\r\n\t\tupdateCustomerDetails(customerUpdated);\r\n\t}\r\n\r\n\tfunction updateCustomerDetails(customerUpdated) {\r\n\t\tprop.userName = customerUpdated.UserName;\r\n\t\tprop.fullName = customerUpdated.FullName;\r\n\t\tprop.personalNumber = customerUpdated.PersonalNumber;\r\n\t\tprop.dateOfBirth = customerUpdated.DateOfBirth;\r\n\t\tprop.agreementType = customerUpdated.AgreementType;\r\n\t\tprop.signAgreementDate = general.str2Date(customerUpdated.SignAgreementDate);\r\n\t\tprop.hasMissingInformation = Boolean.parse(customerUpdated.HasMissingInformation);\r\n\t\tprop.idNumber = customerUpdated.IDNumber;\r\n\t\tprop.address = customerUpdated.Address;\r\n\t}\r\n\r\n\tfunction updateHasMissingInformation() {\r\n\t\tdalCustomer\r\n\t\t\t.HasMissingInformation()\r\n\t\t\t.then(function (response) {\r\n\t\t\t\tvar parsedResponse = JSONHelper.STR2JSON(\"customer:updateHasMissingInformation\", response);\r\n\t\t\t\tprop.hasMissingInformation = parsedResponse.HasMissingInformation;\r\n\t\t\t})\r\n\t\t\t.done();\r\n\t}\r\n\r\n\tfunction updateSignalsPermissions() {\r\n\t\treturn dalCustomer.getCustomerSignalsPermissions().then(setSignalsPermissions);\r\n\t}\r\n\r\n\tfunction setSignalsPermissions(signalsData) {\r\n\t\tprop.AreSignalsAllowed = signalsData && signalsData.status == eResult.Success && signalsData.result == \"True\";\r\n\t\tprop.signalsEndDate = prop.AreSignalsAllowed ? general.str2Date(signalsData.signalsEndDate).ExtractDate() : \"\";\r\n\t\tsignalsPermissionsPromise.resolve();\r\n\t}\r\n\r\n\tfunction updateShouldChangePassword() {\r\n\t\tdalCustomer.GetShouldChangePassword().then(setShouldChangePassword).done();\r\n\t}\r\n\r\n\tfunction setShouldChangePassword(data) {\r\n\t\tif (!general.isNullOrUndefined(data)) {\r\n\t\t\tprop.showSuggestionChangePassword = data.ShouldChangePassword;\r\n\t\t} else {\r\n\t\t\tlogger.warn(\"Customer\", \"Cannot set ShouldChangePassword because it is not available\");\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getCustomerDetails() {\r\n\t\treturn dalCustomer.GetCustomerDetails();\r\n\t}\r\n\r\n\tfunction getCustomer() {\r\n\t\treturn dalCustomer.getCustomer();\r\n\t}\r\n\r\n\tfunction getToken() {\r\n\t\treturn dalCustomer.GetToken();\r\n\t}\r\n\r\n  function initialScmmData(callback) {\r\n    return dalCustomer.InitialScmmData(callback);\r\n  }\r\n\tvar module = (window.$customer = {\r\n\t\tprop: prop,\r\n\t\tInit: init,\r\n\t\tisAuthenticated: isAuthenticated,\r\n\t\tisAutologin: isAutologin,\r\n\t\tLogout: logout,\r\n\t\tHasMissingAgreement: hasMissingAgreement,\r\n\t\tHasAbTestConfig: hasAbTestConfig,\r\n\t\tUpdateMissingInformation: updateMissingInformation,\r\n\t\tUpdateHasMissingInformation: updateHasMissingInformation,\r\n\t\tSignalsPermissionsReady: signalsPermissionsPromise.promise,\r\n\t\tGetCustomer: getCustomer,\r\n\t\tGetCustomerDetails: getCustomerDetails,\r\n\t\tGetToken: getToken,\r\n    InitialScmmData: initialScmmData\r\n\t});\r\n\r\n\treturn module;\r\n});\r\n\n",
    "var CookieHandler = {\r\n    \r\n    CookiesEnabled: function () {\r\n        try {\r\n            document.cookie = 'cookietest=1';\r\n            var cookiesEnabled = document.cookie.indexOf('cookietest=') !== -1;\r\n            document.cookie = 'cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT';\r\n            return cookiesEnabled;\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    CreateCookie: function (name, value, expireDate) {\r\n        var expires;\r\n\r\n        if (!value)\r\n            return;\r\n\r\n        if (expireDate)\r\n            expires = \"; expires=\" + expireDate.toGMTString();\r\n        else\r\n            expires = \"\";\r\n\r\n        document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n    },\r\n\r\n    //-----------------------------------------------------------\r\n\r\n    ReadCookie: function (name) {\r\n\r\n        var nameEQ = name + \"=\";\r\n        var ca = document.cookie.split(';');\r\n\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n            while (c.charAt(0) == ' ') c = c.substring(1, c.length);\r\n            if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\r\n        }\r\n        return null;\r\n    },\r\n\r\n    //-----------------------------------------------------------\r\n\r\n    EraseCookie: function (name) {\r\n        document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/\";\r\n    }\r\n};\r\n\ndefine(\"handlers/Cookie\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.CookieHandler;\n    };\n}(this)));\n\n",
    "define(\r\n    'modules/ThemeSettings',\r\n    [\r\n        'require',\r\n        'handlers/Cookie',\r\n        'handlers/general',\r\n    ],\r\n    function (require) {\r\n        var CookieHandler = require('handlers/Cookie'),\r\n            general = require('handlers/general'),\r\n            ThemeCookieName = 'Theme';\r\n\r\n        var ThemeSettings = function () {\r\n            var Themes = {\r\n                light: 'light',\r\n                dark: 'dark' \r\n            };\r\n \r\n            function getTheme() {\r\n                var ThemeCookie =  CookieHandler.ReadCookie(ThemeCookieName);\r\n                if (ThemeCookie){\r\n                    return ThemeCookie.split(\"|\")[0];\r\n                }\r\n                else{\r\n                    return Themes.light;\r\n                }\r\n            }\r\n            \r\n            function updateTheme(newTheme, callBack) {\r\n                updateThemeResources(newTheme);\r\n                CookieHandler.CreateCookie(ThemeCookieName, newTheme + '|false', (new Date()).AddMonths(6));\r\n\r\n                if (callBack && general.isFunctionType(callBack)) {\r\n                    callBack();\r\n                }\r\n            }\r\n\r\n            function updateThemeResources(newTheme) {\r\n                var currentTheme = getTheme(),\r\n                    allLinks = document.getElementsByTagName('link');\r\n\r\n                if (general.isNullOrUndefined(Themes[newTheme])) {\r\n                    return;\r\n                }\r\n\r\n                if (allLinks.length) {\r\n                    for (var i = 0; i < allLinks.length; i++) {\r\n                        var matchString = currentTheme + '.css',\r\n                            replaceString = newTheme + '.css',\r\n                            node = allLinks[i],\r\n                            href = node.getAttribute('href');\r\n\r\n                        if (href.indexOf(matchString) != -1 ) {\r\n                            node.href = href.replace(matchString, replaceString);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return {\r\n                Themes: Themes,\r\n                GetTheme: getTheme,\r\n                UpdateTheme: updateTheme\r\n            };\r\n        };\r\n\r\n        return ThemeSettings();\r\n    }\r\n);\r\n\n",
    "/**\r\n * @license text 2.0.16 Copyright jQuery Foundation and other contributors.\r\n * Released under MIT license, http://github.com/requirejs/text/LICENSE\r\n */\r\n/*jslint regexp: true */\r\n/*global require, XMLHttpRequest, ActiveXObject,\r\n  define, window, process, Packages,\r\n  java, location, Components, FileUtils */\r\n\r\ndefine('text', ['module'], function (module) {\r\n    'use strict';\r\n\r\n    var text, fs, Cc, Ci, xpcIsWindows,\r\n        progIds = ['Msxml2.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.4.0'],\r\n        xmlRegExp = /^\\s*<\\?xml(\\s)+version=[\\'\\\"](\\d)*.(\\d)*[\\'\\\"](\\s)*\\?>/im,\r\n        bodyRegExp = /<body[^>]*>\\s*([\\s\\S]+)\\s*<\\/body>/im,\r\n        hasLocation = typeof location !== 'undefined' && location.href,\r\n        defaultProtocol = hasLocation && location.protocol && location.protocol.replace(/\\:/, ''),\r\n        defaultHostName = hasLocation && location.hostname,\r\n        defaultPort = hasLocation && (location.port || undefined),\r\n        buildMap = {},\r\n        masterConfig = (module.config && module.config()) || {};\r\n\r\n    function useDefault(value, defaultValue) {\r\n        return value === undefined || value === '' ? defaultValue : value;\r\n    }\r\n\r\n    //Allow for default ports for http and https.\r\n    function isSamePort(protocol1, port1, protocol2, port2) {\r\n        if (port1 === port2) {\r\n            return true;\r\n        } else if (protocol1 === protocol2) {\r\n            if (protocol1 === 'http') {\r\n                return useDefault(port1, '80') === useDefault(port2, '80');\r\n            } else if (protocol1 === 'https') {\r\n                return useDefault(port1, '443') === useDefault(port2, '443');\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    text = {\r\n        version: '2.0.16',\r\n\r\n        strip: function (content) {\r\n            //Strips <?xml ...?> declarations so that external SVG and XML\r\n            //documents can be added to a document without worry. Also, if the string\r\n            //is an HTML document, only the part inside the body tag is returned.\r\n            if (content) {\r\n                content = content.replace(xmlRegExp, \"\");\r\n                var matches = content.match(bodyRegExp);\r\n                if (matches) {\r\n                    content = matches[1];\r\n                }\r\n            } else {\r\n                content = \"\";\r\n            }\r\n            return content;\r\n        },\r\n\r\n        jsEscape: function (content) {\r\n            return content.replace(/(['\\\\])/g, '\\\\$1')\r\n                .replace(/[\\f]/g, \"\\\\f\")\r\n                .replace(/[\\b]/g, \"\\\\b\")\r\n                .replace(/[\\n]/g, \"\\\\n\")\r\n                .replace(/[\\t]/g, \"\\\\t\")\r\n                .replace(/[\\r]/g, \"\\\\r\")\r\n                .replace(/[\\u2028]/g, \"\\\\u2028\")\r\n                .replace(/[\\u2029]/g, \"\\\\u2029\");\r\n        },\r\n\r\n        createXhr: masterConfig.createXhr || function () {\r\n            //Would love to dump the ActiveX crap in here. Need IE 6 to die first.\r\n            var xhr, i, progId;\r\n            if (typeof XMLHttpRequest !== \"undefined\") {\r\n                return new XMLHttpRequest();\r\n            } else if (typeof ActiveXObject !== \"undefined\") {\r\n                for (i = 0; i < 3; i += 1) {\r\n                    progId = progIds[i];\r\n                    try {\r\n                        xhr = new ActiveXObject(progId);\r\n                    } catch (e) { }\r\n\r\n                    if (xhr) {\r\n                        progIds = [progId];  // so faster next time\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return xhr;\r\n        },\r\n\r\n        /**\r\n         * Parses a resource name into its component parts. Resource names\r\n         * look like: module/name.ext!strip, where the !strip part is\r\n         * optional.\r\n         * @param {String} name the resource name\r\n         * @returns {Object} with properties \"moduleName\", \"ext\" and \"strip\"\r\n         * where strip is a boolean.\r\n         */\r\n        parseName: function (name) {\r\n            var modName, ext, temp,\r\n                strip = false,\r\n                index = name.lastIndexOf(\".\"),\r\n                isRelative = name.indexOf('./') === 0 ||\r\n                    name.indexOf('../') === 0;\r\n\r\n            if (index !== -1 && (!isRelative || index > 1)) {\r\n                modName = name.substring(0, index);\r\n                ext = name.substring(index + 1);\r\n            } else {\r\n                modName = name;\r\n            }\r\n\r\n            temp = ext || modName;\r\n            index = temp.indexOf(\"!\");\r\n            if (index !== -1) {\r\n                //Pull off the strip arg.\r\n                strip = temp.substring(index + 1) === \"strip\";\r\n                temp = temp.substring(0, index);\r\n                if (ext) {\r\n                    ext = temp;\r\n                } else {\r\n                    modName = temp;\r\n                }\r\n            }\r\n\r\n            return {\r\n                moduleName: modName,\r\n                ext: ext,\r\n                strip: strip\r\n            };\r\n        },\r\n\r\n        xdRegExp: /^((\\w+)\\:)?\\/\\/([^\\/\\\\]+)/,\r\n\r\n        /**\r\n         * Is an URL on another domain. Only works for browser use, returns\r\n         * false in non-browser environments. Only used to know if an\r\n         * optimized .js version of a text resource should be loaded\r\n         * instead.\r\n         * @param {String} url\r\n         * @returns Boolean\r\n         */\r\n        useXhr: function (url, protocol, hostname, port) {\r\n            var uProtocol, uHostName, uPort,\r\n                match = text.xdRegExp.exec(url);\r\n            if (!match) {\r\n                return true;\r\n            }\r\n            uProtocol = match[2];\r\n            uHostName = match[3];\r\n\r\n            uHostName = uHostName.split(':');\r\n            uPort = uHostName[1];\r\n            uHostName = uHostName[0];\r\n\r\n            return (!uProtocol || uProtocol === protocol) &&\r\n                (!uHostName || uHostName.toLowerCase() === hostname.toLowerCase()) &&\r\n                ((!uPort && !uHostName) || isSamePort(uProtocol, uPort, protocol, port));\r\n        },\r\n\r\n        finishLoad: function (name, strip, content, onLoad) {\r\n            content = strip ? text.strip(content) : content;\r\n            if (masterConfig.isBuild) {\r\n                buildMap[name] = content;\r\n            }\r\n            onLoad(content);\r\n        },\r\n\r\n        load: function (name, req, onLoad, config) {\r\n            //Name has format: some.module.filext!strip\r\n            //The strip part is optional.\r\n            //if strip is present, then that means only get the string contents\r\n            //inside a body tag in an HTML string. For XML/SVG content it means\r\n            //removing the <?xml ...?> declarations so the content can be inserted\r\n            //into the current doc without problems.\r\n\r\n            // Do not bother with the work if a build and text will\r\n            // not be inlined.\r\n            if (config && config.isBuild && !config.inlineText) {\r\n                onLoad();\r\n                return;\r\n            }\r\n\r\n            masterConfig.isBuild = config && config.isBuild;\r\n\r\n            var parsed = text.parseName(name),\r\n                nonStripName = parsed.moduleName +\r\n                    (parsed.ext ? '.' + parsed.ext : ''),\r\n                url = req.toUrl(nonStripName),\r\n                useXhr = (masterConfig.useXhr) ||\r\n                    text.useXhr;\r\n\r\n            // Do not load if it is an empty: url\r\n            if (url.indexOf('empty:') === 0) {\r\n                onLoad();\r\n                return;\r\n            }\r\n\r\n            //Load the text. Use XHR if possible and in a browser.\r\n            if (!hasLocation || useXhr(url, defaultProtocol, defaultHostName, defaultPort)) {\r\n                text.get(url, function (content) {\r\n                    text.finishLoad(name, parsed.strip, content, onLoad);\r\n                }, function (err) {\r\n                    if (onLoad.error) {\r\n                        onLoad.error(err);\r\n                    }\r\n                });\r\n            } else {\r\n                //Need to fetch the resource across domains. Assume\r\n                //the resource has been optimized into a JS module. Fetch\r\n                //by the module name + extension, but do not include the\r\n                //!strip part to avoid file system issues.\r\n                req([nonStripName], function (content) {\r\n                    text.finishLoad(parsed.moduleName + '.' + parsed.ext,\r\n                        parsed.strip, content, onLoad);\r\n                }, function (err) {\r\n                    if (onLoad.error) {\r\n                        onLoad.error(err);\r\n                    }\r\n                });\r\n            }\r\n        },\r\n\r\n        write: function (pluginName, moduleName, write, config) {\r\n            if (buildMap.hasOwnProperty(moduleName)) {\r\n                var content = text.jsEscape(buildMap[moduleName]);\r\n                write.asModule(pluginName + \"!\" + moduleName,\r\n                    \"define(function () { return '\" +\r\n                    content +\r\n                    \"';});\\n\");\r\n            }\r\n        },\r\n\r\n        writeFile: function (pluginName, moduleName, req, write, config) {\r\n            var parsed = text.parseName(moduleName),\r\n                extPart = parsed.ext ? '.' + parsed.ext : '',\r\n                nonStripName = parsed.moduleName + extPart,\r\n                //Use a '.js' file name so that it indicates it is a\r\n                //script that can be loaded across domains.\r\n                fileName = req.toUrl(parsed.moduleName + extPart) + '.js';\r\n\r\n            //Leverage own load() method to load plugin value, but only\r\n            //write out values that do not have the strip argument,\r\n            //to avoid any potential issues with ! in file names.\r\n            text.load(nonStripName, req, function (value) {\r\n                //Use own write() method to construct full module value.\r\n                //But need to create shell that translates writeFile's\r\n                //write() to the right interface.\r\n                var textWrite = function (contents) {\r\n                    return write(fileName, contents);\r\n                };\r\n                textWrite.asModule = function (moduleName, contents) {\r\n                    return write.asModule(moduleName, fileName, contents);\r\n                };\r\n\r\n                text.write(pluginName, nonStripName, textWrite, config);\r\n            }, config);\r\n        }\r\n    };\r\n\r\n    if (masterConfig.env === 'node' || (!masterConfig.env &&\r\n        typeof process !== \"undefined\" &&\r\n        process.versions &&\r\n        !!process.versions.node &&\r\n        !process.versions['node-webkit'] &&\r\n        !process.versions['atom-shell'])) {\r\n        //Using special require.nodeRequire, something added by r.js.\r\n        fs = require.nodeRequire('fs');\r\n\r\n        text.get = function (url, callback, errback) {\r\n            try {\r\n                var file = fs.readFileSync(url, 'utf8');\r\n                //Remove BOM (Byte Mark Order) from utf8 files if it is there.\r\n                if (file[0] === '\\uFEFF') {\r\n                    file = file.substring(1);\r\n                }\r\n                callback(file);\r\n            } catch (e) {\r\n                if (errback) {\r\n                    errback(e);\r\n                }\r\n            }\r\n        };\r\n    } else if (masterConfig.env === 'xhr' || (!masterConfig.env &&\r\n        text.createXhr())) {\r\n        text.get = function (url, callback, errback, headers) {\r\n            var xhr = text.createXhr(), header;\r\n            xhr.open('GET', url, true);\r\n\r\n            //Allow plugins direct access to xhr headers\r\n            if (headers) {\r\n                for (header in headers) {\r\n                    if (headers.hasOwnProperty(header)) {\r\n                        xhr.setRequestHeader(header.toLowerCase(), headers[header]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            //Allow overrides specified in config\r\n            if (masterConfig.onXhr) {\r\n                masterConfig.onXhr(xhr, url);\r\n            }\r\n\r\n            xhr.onreadystatechange = function (evt) {\r\n                var status, err;\r\n                //Do not explicitly handle errors, those should be\r\n                //visible via console output in the browser.\r\n                if (xhr.readyState === 4) {\r\n                    status = xhr.status || 0;\r\n                    if (status > 399 && status < 600) {\r\n                        //An http 4xx or 5xx error. Signal an error.\r\n                        err = new Error(url + ' HTTP status: ' + status);\r\n                        err.xhr = xhr;\r\n                        if (errback) {\r\n                            errback(err);\r\n                        }\r\n                    } else {\r\n                        callback(xhr.responseText);\r\n                    }\r\n\r\n                    if (masterConfig.onXhrComplete) {\r\n                        masterConfig.onXhrComplete(xhr, url);\r\n                    }\r\n                }\r\n            };\r\n            xhr.send(null);\r\n        };\r\n    } else if (masterConfig.env === 'rhino' || (!masterConfig.env &&\r\n        typeof Packages !== 'undefined' && typeof java !== 'undefined')) {\r\n        //Why Java, why is this so awkward?\r\n        text.get = function (url, callback) {\r\n            var stringBuffer, line,\r\n                encoding = \"utf-8\",\r\n                file = new java.io.File(url),\r\n                lineSeparator = java.lang.System.getProperty(\"line.separator\"),\r\n                input = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file), encoding)),\r\n                content = '';\r\n            try {\r\n                stringBuffer = new java.lang.StringBuffer();\r\n                line = input.readLine();\r\n\r\n                // Byte Order Mark (BOM) - The Unicode Standard, version 3.0, page 324\r\n                // http://www.unicode.org/faq/utf_bom.html\r\n\r\n                // Note that when we use utf-8, the BOM should appear as \"EF BB BF\", but it doesn't due to this bug in the JDK:\r\n                // http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058\r\n                if (line && line.length() && line.charAt(0) === 0xfeff) {\r\n                    // Eat the BOM, since we've already found the encoding on this file,\r\n                    // and we plan to concatenating this buffer with others; the BOM should\r\n                    // only appear at the top of a file.\r\n                    line = line.substring(1);\r\n                }\r\n\r\n                if (line !== null) {\r\n                    stringBuffer.append(line);\r\n                }\r\n\r\n                while ((line = input.readLine()) !== null) {\r\n                    stringBuffer.append(lineSeparator);\r\n                    stringBuffer.append(line);\r\n                }\r\n                //Make sure we return a JavaScript string and not a Java string.\r\n                content = String(stringBuffer.toString()); //String\r\n            } finally {\r\n                input.close();\r\n            }\r\n            callback(content);\r\n        };\r\n    } else if (masterConfig.env === 'xpconnect' || (!masterConfig.env &&\r\n        typeof Components !== 'undefined' && Components.classes &&\r\n        Components.interfaces)) {\r\n        //Avert your gaze!\r\n        Cc = Components.classes;\r\n        Ci = Components.interfaces;\r\n        Components.utils['import']('resource://gre/modules/FileUtils.jsm');\r\n        xpcIsWindows = ('@mozilla.org/windows-registry-key;1' in Cc);\r\n\r\n        text.get = function (url, callback) {\r\n            var inStream, convertStream, fileObj,\r\n                readData = {};\r\n\r\n            if (xpcIsWindows) {\r\n                url = url.replace(/\\//g, '\\\\');\r\n            }\r\n\r\n            fileObj = new FileUtils.File(url);\r\n\r\n            //XPCOM, you so crazy\r\n            try {\r\n                inStream = Cc['@mozilla.org/network/file-input-stream;1']\r\n                    .createInstance(Ci.nsIFileInputStream);\r\n                inStream.init(fileObj, 1, 0, false);\r\n\r\n                convertStream = Cc['@mozilla.org/intl/converter-input-stream;1']\r\n                    .createInstance(Ci.nsIConverterInputStream);\r\n                convertStream.init(inStream, \"utf-8\", inStream.available(),\r\n                    Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER);\r\n\r\n                convertStream.readString(inStream.available(), readData);\r\n                convertStream.close();\r\n                inStream.close();\r\n                callback(readData.value);\r\n            } catch (e) {\r\n                throw new Error((fileObj && fileObj.path || '') + ': ' + e);\r\n            }\r\n        };\r\n    }\r\n    return text;\r\n});\ndefine(\"vendor/text\", function(){});\n\n",
    "define(\"modules/environmentData\", [], function EnvironmentDataDef() {\r\n\tvar environmentData = {};\r\n\r\n\treturn {\r\n\t\tget: function () {\r\n\t\t\treturn environmentData;\r\n\t\t},\r\n\r\n\t\tset: function (ed) {\r\n\t\t\tObject.assign(environmentData, ed);\r\n\t\t},\r\n\t};\r\n});\r\n\n",
    "define('fxnet/loader',[\"global/UrlResolver\", \"handlers/AjaxError\"], function Loader(UrlResolver, AjaxError) {\r\n\tvar snippetLenghtThreshold = 20; // done to avoid waff responses and not to limit the response length\r\n\r\n\tfunction get(url, callback, contentType, nocache) {\r\n\t\tcallback = callback || function () {};\r\n\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\r\n\t\tif (nocache) {\r\n\t\t\turl += url.indexOf(\"?\") < 0 ? \"?\" : \"&\";\r\n\t\t\turl += UrlResolver.getRndKeyValue();\r\n\t\t}\r\n\r\n\t\txhr.onreadystatechange = function () {\r\n\t\t\tif (this.readyState !== 4) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar headers = xhr.getAllResponseHeaders ? xhr.getAllResponseHeaders() : \"\";\r\n\t\t\tif (this.status >= 200 && this.status < 400) {\r\n\t\t\t\tcallback(null, this.responseText || \"\");\r\n\t\t\t} else if (this.status === 401) {\r\n\t\t\t\tcallback(\r\n\t\t\t\t\tnew AjaxError(\r\n\t\t\t\t\t\tthis.status,\r\n\t\t\t\t\t\t\"unauthorized\",\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t\tthis.responseText.substring(0, snippetLenghtThreshold)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else if (this.status === 403) {\r\n\t\t\t\tcallback(\r\n\t\t\t\t\tnew AjaxError(this.status, \"forbidden\", url, this.responseText.substring(0, snippetLenghtThreshold))\r\n\t\t\t\t);\r\n\t\t\t} else if (this.status === 420) {\r\n\t\t\t\tcallback(\r\n\t\t\t\t\tnew AjaxError(\r\n\t\t\t\t\t\tthis.status,\r\n\t\t\t\t\t\t\"invalid_version\",\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t\tthis.responseText.substring(0, snippetLenghtThreshold)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else if (this.status === 417) {\r\n\t\t\t\tcallback(\r\n\t\t\t\t\tnew AjaxError(\r\n\t\t\t\t\t\tthis.status,\r\n\t\t\t\t\t\t\"double_request\",\r\n\t\t\t\t\t\turl,\r\n\t\t\t\t\t\tthis.responseText.substring(0, snippetLenghtThreshold)\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else if (this.status === 0) {\r\n\t\t\t\tcallback(new AjaxError(0, \"abort\" + \"response headers: \" + headers, url));\r\n\t\t\t} else {\r\n\t\t\t\tcallback(\r\n\t\t\t\t\tnew AjaxError(this.status, \"unknown\", url, this.responseText.substring(0, snippetLenghtThreshold))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\txhr.open(\"GET\", url, true);\r\n\r\n\t\tif (!UrlResolver.isCors(url)) {\r\n\t\t\tif (contentType) {\r\n\t\t\t\txhr.setRequestHeader(\"Content-Type\", contentType);\r\n\t\t\t}\r\n\t\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\t\t}\r\n\r\n\t\txhr.send();\r\n\t}\r\n\r\n\treturn {\r\n\t\tget: get,\r\n\t};\r\n});\r\n\n",
    "var eLoginLogoutReason = {\r\n\tuserDemand: 7770000,\r\n\tdoubleLogin: 7770001,\r\n\tFxDenied: 7770002,\r\n\tappClose: 7770003,\r\n\tidleTime: 7770004,\r\n\tclientStateError: 7770005,\r\n\tserverError: 7770006,\r\n\twebTrader_filepathNotAccessible: 7770007,\r\n\twebTrader_noViewModeCookie: 7770008,\r\n\twebTrader_noVersionCookie: 7770009,\r\n\twebTrader_noBrokerCookie: 7770010,\r\n\twebTrader_unsupportedError: 7770011,\r\n\tmobileTrader_filepathNotAccessible: 7770012,\r\n\tmobileTrader_noViewModeCookie: 7770013,\r\n\tmobileTrader_noVersionCookie: 7770014,\r\n\tmobileTrader_noBrokerCookie: 7770015,\r\n\tmobileTrader_unsupportedError: 7770016,\r\n\tpreloaderError_noVersion: 7770017,\r\n\tpreloaderError_noBroker: 7770018,\r\n\tpreloaderError_noLanguage: 7770019,\r\n\tpreloaderError_noStaticParams: 7770020,\r\n\tpreloaderError_ajaxHttp: 7770021,\r\n\tpreloaderError_other: 7770022,\r\n\tpreloaderError_jsonParse: 7770051,\r\n\terrorManager_httpError: 7770023,\r\n\talert_exitApp: 7770024,\r\n\tweb_exitAlert: 7770025,\r\n\tmobile_exitAlert: 7770026,\r\n\tweb_postLoginAlertController_serverError: 7770027,\r\n\tmobile_postLoginAlertController_serverError: 7770028,\r\n\tserverResponseAlert_exit: 7770029,\r\n\tinitialDataManager_dataError: 7770030,\r\n\tinitialDataManager_symbolsDataError: 7770031,\r\n\tdealAddServerResponseAlert_exit: 7770032,\r\n\tdealsClosed_serverResponseAlert_exit: 7770033,\r\n\tlimitsServerResponseAlert_exit: 7770034,\r\n\tactivitySupervisor_updateAsStay: 7770035,\r\n\tactivitySupervisor_exit: 7770036,\r\n\tactivitySupervisor_logout: 7770037,\r\n\tsessionSupervisor_keepAliveHttpContextRequired: 7770038,\r\n\tsessionSupervisor_keepAliveCompleteError: 7770039,\r\n\tweb_doubleLogin1: 7770040,\r\n\tweb_doubleLogin2: 7770041,\r\n\tweb_doubleLogin3: 7770042,\r\n\tmobile_doubleLogin1: 7770043,\r\n\tmobile_doubleLogin2: 7770044,\r\n\tmobile_doubleLogin3: 7770045,\r\n\tweb_registrationFailed: 7770046,\r\n\tmobile_registrationFailed: 7770047,\r\n\tforgotPasswordLogin: 7770048,\r\n\tconfirmLogin: 7770049,\r\n\tmobileTrader_nocontentStyleBrokerCookie: 7770050,\r\n\tchangePassword_NoToken: 7770108,\r\n};\r\n\r\ndefine('enums/loginlogoutreasonenum',[], function () {\r\n\treturn eLoginLogoutReason;\r\n});\r\n\n",
    "define('fxnet/preloader',[\r\n\t\"require\",\r\n\t\"vendor/text\",\r\n\t\"global/UrlResolver\",\r\n\t\"modules/environmentData\",\r\n\t\"Q\",\r\n\t\"fxnet/loader\",\r\n\t\"handlers/AjaxError\",\r\n\t\"enums/loginlogoutreasonenum\",\r\n], function (require, text, UrlResolver, ed, Q, loader, AjaxError, eLoginLogoutReason) {\r\n\tvar isPageUnloading = false,\r\n\t\thtmlLoadEvent,\r\n\t\tinitialDataLoadEvent,\r\n\t\tdataObjects = {\r\n\t\t\thtmlReady: false,\r\n\t\t\tinitialDataReady: false,\r\n\t\t\tinitialData: {},\r\n\t\t},\r\n\t\ttimestamps = {\r\n\t\t\tstart: Date.now(),\r\n\t\t\tend: 0,\r\n\t\t\tgetDuration: getPreloadDuration,\r\n\t\t\thtmlStart: 0,\r\n\t\t\thtmlEnd: 0,\r\n\t\t\tgetHtmlDuration: getHtmlDuration,\r\n\t\t\tinitialDataStart: 0,\r\n\t\t\tinitialDataEnd: 0,\r\n\t\t\tjsResourceFailureStart: 0,\r\n\t\t\tjsResourceFailureEnd: 0,\r\n\t\t\tgetInitialDataDuration: getInitialDataDuration,\r\n\t\t\tgetSocketConnectionDuration: getSocketConnectionDuration,\r\n\t\t\tgetSocketFromCompleteConnectionToFirstFrame: getSocketFromCompleteConnectionToFirstFrame,\r\n\t\t\tgetSocketFromCompleteConnectionToFirstQuote: getSocketFromCompleteConnectionToFirstQuote,\r\n\t\t\tsockets: {\r\n\t\t\t\tconnectionStart: 0,\r\n\t\t\t\tconnectionComplete: 0,\r\n\t\t\t\tfirstFrame: 0,\r\n\t\t\t\tfirstQuote: 0,\r\n\t\t\t},\r\n\t\t},\r\n\t\tversion,\r\n\t\tcachedVersion,\r\n\t\tlanguage = UrlResolver.getLanguage().toLowerCase(),\r\n\t\tcdnPath = UrlResolver.getCdnPath(),\r\n\t\tapplicationRelativePath = UrlResolver.getApplicationRelativePath(),\r\n\t\tapplicationType = UrlResolver.getApplicationType(),\r\n\t\tcontentStyleBrokerId = UrlResolver.getContentStyleBrokerId(),\r\n\t\tbrokerId = UrlResolver.getBroker(),\r\n\t\tminDealGroupId = UrlResolver.getMinDealGroupId(),\r\n\t\thashParams = UrlResolver.getHashParameters(),\r\n\t\tstaticParams = UrlResolver.getStaticParams();\r\n\r\n\twindow.addEventListener(\r\n\t\t\"beforeunload\",\r\n\t\tfunction beforeUnload() {\r\n\t\t\tisPageUnloading = true;\r\n\t\t},\r\n\t\tfalse\r\n\t);\r\n\r\n\tQ.longStackSupport = true;\r\n\tQ.onerror = catchAllErrorHandler;\r\n\r\n\tversion = cachedVersion = UrlResolver.getVersion();\r\n\r\n\texpireLoginReasonCookie();\r\n\r\n\tfunction loadBundlesConfig() {\r\n\t\tvar rPath =\r\n\t\t\tapplicationType === \"mobile\" ? \"mobile\" : window.environmentData.isDesktop === true ? \"desktop\" : \"web\";\r\n\t\treturn Q.Promise(function (resolve, reject) {\r\n\t\t\trequire([\"fxnet/common/config/bundles.\" + rPath + \".config\"], function () {\r\n\t\t\t\tresolve();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction loadRequireConfig() {\r\n\t\tvar rPath =\r\n\t\t\tapplicationType === \"mobile\"\r\n\t\t\t\t? \"fxnet/devices/mobile/configuration/require.config\"\r\n\t\t\t\t: window.environmentData.isDesktop === true\r\n\t\t\t\t? \"fxnet/devices/desktop/configuration/require.config\"\r\n\t\t\t\t: \"fxnet/devices/web/configuration/require.config\";\r\n\r\n\t\treturn Q.Promise(function (resolve, reject) {\r\n\t\t\trequire([rPath], function (executeConfig) {\r\n\t\t\t\texecuteConfig();\r\n\t\t\t\tresolve(true);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tif (!version) {\r\n\t\tredirectTo(eLoginLogoutReason.preloaderError_noVersion, \"login\", \"Version\");\r\n\t} else if (!contentStyleBrokerId) {\r\n\t\tredirectTo(eLoginLogoutReason.mobileTrader_nocontentStyleBrokerCookie, \"login\", \"StyleBroker\");\r\n\t} else if (!language) {\r\n\t\tredirectTo(eLoginLogoutReason.preloaderError_noLanguage, \"login\", \"Language\");\r\n\t} else if (!staticParams) {\r\n\t\tredirectTo(eLoginLogoutReason.preloaderError_noStaticParams, \"login\", \"StaticParams\");\r\n\t} else if (!brokerId) {\r\n\t\tredirectTo(eLoginLogoutReason.preloaderError_noBroker, \"login\", \"Broker\");\r\n\t} else {\r\n\t\tloadEnvironmentData()\r\n\t\t\t.then(loadRequireConfig)\r\n\t\t\t.then(loadBundlesConfig)\r\n\t\t\t.then(function checkVersion() {\r\n\t\t\t\tvar newVersion = UrlResolver.getVersion();\r\n\r\n\t\t\t\tif (newVersion !== cachedVersion) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t})\r\n\t\t\t.then(function initSocketConnection(isVersionValid) {\r\n\t\t\t\tif (!isVersionValid) {\r\n\t\t\t\t\twindow.location.assign(window.location.href.split(\"?\")[0] + \"?v=\" + version);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (window.isScmmBackOffice || window.environmentData.isDesktop) {\r\n\t\t\t\t\tloadApplication();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// we made this async, however we manually include it in web/mobile bundle\r\n\t\t\t\t\trequire([\"handlers/websocketconnection\"], function (SocketConnection) {\r\n\t\t\t\t\t\tSocketConnection.init(window.environmentData.CSMPushServiceUrl, timestamps, hashParams)\r\n\t\t\t\t\t\t\t.then(loadApplication)\r\n\t\t\t\t\t\t\t.catch(loadApplication)\r\n\t\t\t\t\t\t\t.done();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.done();\r\n\t}\r\n\r\n\tfunction expireLoginReasonCookie() {\r\n\t\tdocument.cookie = \"loginReason=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\r\n\t}\r\n\r\n\tfunction catchAllErrorHandler(err) {\r\n\t\tif (typeof window.onerror === \"function\" && err && err.message) {\r\n\t\t\twindow.onerror(err.message, \"\", 0, 0, err);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthrow err;\r\n\t}\r\n\r\n\tfunction loadApplication() {\r\n\t\tvar promiseArr;\r\n\t\tif (applicationType === \"mobile\") {\r\n\t\t\t// mobile\r\n\t\t\tpromiseArr = [\r\n\t\t\t\tloadInitialData(),\r\n\t\t\t\tloadScripts().then(loadNativeBundle),\r\n\t\t\t\tsetTitle(window.environmentData.Title),\r\n\t\t\t\tsetIcons(window.environmentData.Icons || []),\r\n\t\t\t\tgetAppStyles(),\r\n\t\t\t\tloadHtml(),\r\n\t\t\t];\r\n\t\t} else if (window.isScmmBackOffice) {\r\n\t\t\t// scmm\r\n\t\t\tpromiseArr = [\r\n\t\t\t\tloadInitialData(),\r\n\t\t\t\tloadScripts(),\r\n\t\t\t\tsetTitle(window.environmentData.Title),\r\n\t\t\t\tsetLabels(window.environmentData.Labels),\r\n\t\t\t\tsetIcons(window.environmentData.Icons || []),\r\n\t\t\t\tgetJScmmBackOfficeStyles(),\r\n\t\t\t\tloadHtml(),\r\n\t\t\t];\r\n\t\t} else {\r\n\t\t\t//web & desktop\r\n\t\t\tpromiseArr = [\r\n\t\t\t\tloadInitialData(),\r\n\t\t\t\tloadScripts(),\r\n\t\t\t\tsetTitle(window.environmentData.Title),\r\n\t\t\t\tsetLabels(window.environmentData.Labels),\r\n\t\t\t\tsetIcons(window.environmentData.Icons || []),\r\n\t\t\t\tgetJQueryStyles(),\r\n\t\t\t\tgetAppStyles(),\r\n\t\t\t\tloadHtml(),\r\n\t\t\t];\r\n\t\t}\r\n\r\n\t\treturn Q.all(promiseArr)\r\n\t\t\t.fail(function onFail(error) {\r\n\t\t\t\tif (\r\n\t\t\t\t\terror instanceof AjaxError &&\r\n\t\t\t\t\t(error.httpStatus === 401 ||\r\n\t\t\t\t\t\terror.httpStatus === 403 ||\r\n\t\t\t\t\t\terror.httpStatus === 420 ||\r\n\t\t\t\t\t\terror.httpStatus === 424)\r\n\t\t\t\t) {\r\n\t\t\t\t\tredirectTo(eLoginLogoutReason.preloaderError_ajaxHttp, \"login\", error.toString());\r\n\t\t\t\t} else {\r\n\t\t\t\t\tredirectTo(eLoginLogoutReason.preloaderError_other, \"logout\", error.toString());\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.finally(function onFinishedPreloading() {\r\n\t\t\t\ttimestamps.end = Date.now();\r\n\t\t\t})\r\n\t\t\t.done();\r\n\t}\r\n\r\n\tfunction parseHelper(jsonString) {\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(jsonString);\r\n\t\t} catch (err) {\r\n\t\t\tvar msgJson = JSON.stringify(\r\n\t\t\t\t{\r\n\t\t\t\t\terror: \"JSONHelper.STR2JSON threw an exception\",\r\n\t\t\t\t\tname: err.name,\r\n\t\t\t\t\tmessage: err.message,\r\n\t\t\t\t\tstr: jsonString.substr(0, 2500),\r\n\t\t\t\t\tstack: err.stack,\r\n\t\t\t\t},\r\n\t\t\t\tnull,\r\n\t\t\t\t4\r\n\t\t\t);\r\n\r\n\t\t\tredirectTo(eLoginLogoutReason.preloaderError_jsonParse, \"logout\", msgJson);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction loadEnvironmentData() {\r\n\t\tvar defer = Q.defer();\r\n\r\n\t\tloader.get(\r\n\t\t\tresolveEnvironmentDataUrl(),\r\n\t\t\tfunction onReceivedData(error, response) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\tthrow error;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// extend existing environmentData\r\n\t\t\t\t\twindow.environmentData = extend(parseHelper(response), window.environmentData);\r\n\r\n\t\t\t\t\tif (typeof window.isDesktop !== \"undefined\") {\r\n\t\t\t\t\t\twindow.environmentData.isDesktop = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// update the version\r\n\t\t\t\t\twindow.environmentData.version = window.version = version = UrlResolver.getVersion();\r\n\t\t\t\t\twindow.environmentData.jsCdnPath = cdnPath;\r\n\t\t\t\t\twindow.environmentData.jsImgPath = UrlResolver.getImagePath(\"\", false, true);\r\n\t\t\t\t\twindow.environmentData.isReady = true;\r\n\t\t\t\t\twindow.environmentData.dealerCurrency = hashParams.dealerCurrency;\r\n\t\t\t\t\twindow.environmentData.dealerAdvancedWalletView = hashParams.dealerAdvancedWalletView;\r\n\r\n\t\t\t\t\tif (/to=real/.test(location.search)) {\r\n\t\t\t\t\t\twindow.environmentData.switchToPlatform = \"real\";\r\n\t\t\t\t\t} else if (/to=demo/.test(location.search)) {\r\n\t\t\t\t\t\twindow.environmentData.switchToPlatform = \"demo\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twindow.systemInfo = {\r\n\t\t\t\t\t\tconfig: {},\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\ted.set(window.environmentData);\r\n\r\n\t\t\t\t\tdefer.resolve(\"environmentDataReady\");\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tdefer.reject(e);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\"application/json; charset=utf-8\"\r\n\t\t);\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\r\n\tfunction setTitle(titleText) {\r\n\t\tif (titleText) {\r\n\t\t\twindow.document.title = titleText;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setLabels(labels) {\r\n\t\tif (!labels) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar splashPage = document.getElementById(\"splash_page\");\r\n\t\tif (!splashPage) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar label;\r\n\t\tfor (var key in labels) {\r\n\t\t\tif (labels.hasOwnProperty(key)) {\r\n\t\t\t\tlabel = document.getElementById(key);\r\n\t\t\t\tif (label) {\r\n\t\t\t\t\tlabel.innerHTML = labels[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// override switch to platform label\r\n\t\tif (window.environmentData.switchToPlatform) {\r\n\t\t\tlabel = document.getElementById(\"lblSplashText\");\r\n\t\t\tif (label) {\r\n\t\t\t\tif (window.environmentData.switchToPlatform === \"demo\") {\r\n\t\t\t\t\tlabel.innerHTML = labels[\"lblSplashTextDemo\"] || \"%Your demo account is loading...\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tlabel.innerHTML = labels[\"lblSplashTextReal\"] || \"%Your real money account is loading...\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsplashPage.style.display = \"\";\r\n\t}\r\n\r\n\tfunction loadScripts() {\r\n\t\tvar rPath =\r\n\t\t\tapplicationType === \"mobile\"\r\n\t\t\t\t? \"fxnet/devices/mobile/configuration/app\"\r\n\t\t\t\t: window.environmentData.isDesktop === true\r\n\t\t\t\t? \"fxnet/devices/desktop/configuration/app\"\r\n\t\t\t\t: \"fxnet/devices/web/configuration/app\";\r\n\t\treturn Q.promise(function (resolve, reject) {\r\n\t\t\trequire([rPath], function (startFn) {\r\n\t\t\t\tif (typeof startFn === \"function\") {\r\n\t\t\t\t\twindow.environmentData.isDesktop === true\r\n\t\t\t\t\t\t? startFn(window.startForm, window.startCallback)\r\n\t\t\t\t\t\t: startFn();\r\n\t\t\t\t}\r\n\t\t\t\tresolve();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tfunction loadNativeBundle() {\r\n\t\treturn Q.Promise(function onNativeBundleLoad(resolve, reject) {\r\n\t\t\tvar fileName, filePath;\r\n\r\n            if (UrlResolver.isNativeIos()) {\r\n                fileName = \"nativeiosmain.js\";\r\n            } else if (UrlResolver.isNativeAndoid()) {\r\n                fileName = \"nativeandroidmain.js\";\r\n            } else {\r\n                resolve();\r\n                return;\r\n            }\r\n\r\n\t\t\tfilePath = UrlResolver.getStaticJSPath(fileName);\r\n\r\n\t\t\tloadJs(filePath, resolve, reject);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction loadJs(filePath, onLoad, onError) {\r\n\t\tvar script = document.createElement(\"script\");\r\n\t\tscript.src = filePath;\r\n\t\tscript.type = \"text/javascript\";\r\n\t\tscript.crossOrigin = \"anonymous\";\r\n\r\n\t\tscript.onerror = function onScriptError(e) {\r\n\t\t\tloadFailedJsAjax(filePath).then(function onRetryFulfilled(retryMessage) {\r\n\t\t\t\tvar error = new URIError(\r\n\t\t\t\t\t\"The script \" + e.target.src + \" is not accessible. Retry result: \" + retryMessage\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (typeof onError !== \"function\") {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tonError(error);\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tif (typeof onLoad === \"function\") {\r\n\t\t\tscript.onload = onLoad;\r\n\t\t}\r\n\r\n\t\tdocument.body.appendChild(script);\r\n\t}\r\n\r\n\tfunction loadFailedJsAjax(filePath) {\r\n\t\tvar defer = Q.defer();\r\n\r\n\t\ttimestamps.jsResourceFailureStart = Date.now();\r\n\r\n\t\tloader.get(filePath, function onFulfilled(error) {\r\n\t\t\ttimestamps.jsResourceFailureEnd = Date.now();\r\n\t\t\tif (error) {\r\n\t\t\t\tdefer.resolve(\r\n\t\t\t\t\t\"retry script loading failed with status \" +\r\n\t\t\t\t\t\terror.httpStatus +\r\n\t\t\t\t\t\t\". Snippet: \" +\r\n\t\t\t\t\t\terror.responseSnippet +\r\n\t\t\t\t\t\t\". Duration: \" +\r\n\t\t\t\t\t\t(timestamps.jsResourceFailureEnd - timestamps.jsResourceFailureStart) +\r\n\t\t\t\t\t\t\"ms.\"\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdefer.resolve(\r\n\t\t\t\t\t\"retry script loading successful. Duration: \" +\r\n\t\t\t\t\t\ttimestamps.jsResourceFailureEnd -\r\n\t\t\t\t\t\ttimestamps.jsResourceFailureStart\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\r\n\tfunction getAppStyles() {\r\n\t\tvar theme = \".\" + (window.ApplicationTheme || \"light|false\").split(\"|\")[0];\r\n\t\tvar url = UrlResolver.combine(\r\n\t\t\tUrlResolver.getAssetsPath(),\r\n\t\t\t\"skins\",\r\n\t\t\tapplicationType,\r\n\t\t\t\"broker\" + contentStyleBrokerId,\r\n\t\t\tlanguage,\r\n\t\t\t\"style\" + theme + \".css\"\r\n\t\t);\r\n\r\n\t\tloadCss(url);\r\n\t}\r\n\r\n\tfunction getJQueryStyles() {\r\n\t\tvar theme = \".\" + (window.ApplicationTheme || \"light|false\").split(\"|\")[0];\r\n\t\tvar url;\r\n\r\n\t\turl = UrlResolver.combine(UrlResolver.getAssetsPath(), \"skins/web/allbrokers/default/jquery\" + theme + \".css\");\r\n\r\n\t\tloadCss(url);\r\n\t}\r\n\r\n\tfunction getJScmmBackOfficeStyles() {\r\n\t\tvar url;\r\n\r\n\t\turl = UrlResolver.combine(UrlResolver.getAssetsPath(), \"Skins/Shared/backoffice/scmm/scmm.css\");\r\n\r\n\t\tloadCss(url);\r\n\t}\r\n\r\n\tfunction loadCss(href) {\r\n\t\tif (!href) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar head = document.getElementsByTagName(\"head\")[0],\r\n\t\t\tlink = document.createElement(\"link\");\r\n\r\n\t\tlink.rel = \"stylesheet\";\r\n\t\tlink.href = href;\r\n\r\n\t\thead.appendChild(link);\r\n\t}\r\n\r\n\tfunction setIcons(urls) {\r\n\t\tvar head = document.getElementsByTagName(\"head\")[0],\r\n\t\t\tlink,\r\n\t\t\ti;\r\n\r\n\t\tfor (i = 0; i < urls.length; i++) {\r\n\t\t\tif (urls[i] && urls[i].href) {\r\n\t\t\t\tlink = document.createElement(\"link\");\r\n\r\n\t\t\t\tlink.rel = urls[i].rel || \"icon\";\r\n\t\t\t\tlink.href = urls[i].href;\r\n\t\t\t\tlink.type = urls[i].type || \"image/png\";\r\n\r\n\t\t\t\thead.appendChild(link);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction loadInitialData() {\r\n\t\tvar self = this,\r\n\t\t\tdefer = Q.defer(),\r\n\t\t\tinitialDataArray = [\r\n\t\t\t\t{ type: \"Main\", url: resolveInitialDataUrl(\"GetData\"), nocache: true },\r\n\t\t\t\t{ type: \"Countries\", url: resolveStaticInitialDataUrl(\"Countries\") },\r\n\t\t\t\t{ type: \"Symbols\", url: resolveStaticInitialDataUrl(\"Symbols\") },\r\n\t\t\t\t{ type: \"Instruments\", url: resolveStaticInitialDataUrl(UrlResolver.getInstrumentsUrl()) },\r\n\t\t\t];\r\n\r\n\t\tfunction initialDataCallback(type, error, response) {\r\n\t\t\ttry {\r\n\t\t\t\tif (error && (error.httpStatus === 424 || error.httpStatus === 0 || error.httpStatus === 502)) {\r\n\t\t\t\t\tloader.get(\r\n\t\t\t\t\t\tUrlResolver.getInstrumentsFromOriginUrl(),\r\n\t\t\t\t\t\tinitialDataCallback.bind(self, \"Instruments\"),\r\n\t\t\t\t\t\t\"application/json; charset=utf-8\",\r\n\t\t\t\t\t\ttrue\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdataObjects.initialData[type] = parseHelper(response);\r\n\r\n\t\t\t\tinvokeInitialDataLoadEvent();\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdefer.reject(e);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction invokeInitialDataLoadEvent() {\r\n\t\t\tfor (var j = 0; j < initialDataArray.length; j++) {\r\n\t\t\t\tif (typeof dataObjects.initialData[initialDataArray[j].type] === \"undefined\") {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttimestamps.initialDataEnd = Date.now();\r\n\t\t\tdataObjects.initialDataReady = true;\r\n\r\n\t\t\tdefer.resolve(\"initialDataReady\");\r\n\t\t}\r\n\r\n\t\ttimestamps.initialDataStart = Date.now();\r\n\r\n\t\tfor (var i = 0; i < initialDataArray.length; i++) {\r\n\t\t\tloader.get(\r\n\t\t\t\tinitialDataArray[i].url,\r\n\t\t\t\tinitialDataCallback.bind(self, initialDataArray[i].type),\r\n\t\t\t\t\"application/json; charset=utf-8\",\r\n\t\t\t\tinitialDataArray[i].nocache\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn defer.promise.then(function onInitialDataLoaded(value) {\r\n\t\t\tif (typeof initialDataLoadEvent === \"function\") {\r\n\t\t\t\tinitialDataLoadEvent();\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction loadHtml() {\r\n\t\tvar defer = Q.defer(),\r\n\t\t\turl = resolveHtmlRequestUrl();\r\n\r\n\t\ttimestamps.htmlStart = Date.now();\r\n\r\n\t\tloader.get(url, function onLoadHtmlFulfilled(error, response) {\r\n\t\t\ttry {\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tthrow error;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar elementToUpdate = document.getElementById(\"mainTemplate\");\r\n\t\t\t\tif (elementToUpdate) {\r\n\t\t\t\t\telementToUpdate.innerHTML = response;\r\n\t\t\t\t\tdataObjects.htmlReady = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdefer.resolve(\"htmlReady\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\tdefer.reject(e);\r\n\t\t\t} finally {\r\n\t\t\t\ttimestamps.htmlEnd = Date.now();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn defer.promise.then(function onHtmlReady(value) {\r\n\t\t\tif (typeof htmlLoadEvent === \"function\") {\r\n\t\t\t\thtmlLoadEvent();\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction addLoginReasonCookie(reason) {\r\n\t\tif (reason) {\r\n\t\t\tvar d = new Date();\r\n\t\t\td.setTime(d.getTime() + 60000);\r\n\t\t\tdocument.cookie =\r\n\t\t\t\t\"loginReason=\" + encodeURIComponent(reason) + \";\" + (\"Expires=\" + d.toUTCString()) + \"; path=/\";\r\n\t\t}\r\n\t}\r\n\r\n\tfunction redirectTo(errorCode, location, message) {\r\n\t\tif (isPageUnloading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tisPageUnloading = true;\r\n\r\n\t\tif (message) {\r\n\t\t\taddLoginReasonCookie(message);\r\n\t\t}\r\n\r\n\t\twindow.location.replace(\r\n\t\t\tUrlResolver.combine(applicationRelativePath, \"account\", location, \"?reason=\" + errorCode)\r\n\t\t);\r\n\t}\r\n\r\n\tfunction resolveInitialDataUrl(action) {\r\n\t\tvar url = UrlResolver.combine(applicationRelativePath, \"InitialData\", action);\r\n\r\n\t\treturn url;\r\n\t}\r\n\r\n\tfunction resolveEnvironmentDataUrl() {\r\n\t\tvar url = UrlResolver.combine(\r\n\t\t\tUrlResolver.getStaticPath(),\r\n\t\t\tUrlResolver.getStaticParams(),\r\n\t\t\t\"initialdata-environmentdata-\" + applicationType + \".js?v=\" + version\r\n\t\t);\r\n\r\n\t\treturn url;\r\n\t}\r\n\r\n\tfunction resolveStaticInitialDataUrl(action) {\r\n\t\tvar url = UrlResolver.combine(UrlResolver.getAssetsPath(), \"InitialData\", action + \".js\");\r\n\r\n\t\treturn url;\r\n\t}\r\n\r\n\tfunction resolveHtmlRequestUrl() {\r\n\t\tvar url = UrlResolver.combine(\r\n\t\t\tUrlResolver.getStaticPath(),\r\n\t\t\tUrlResolver.getStaticParams(),\r\n\t\t\tminDealGroupId,\r\n\t\t\tversion,\r\n\t\t\t\"main.html\"\r\n\t\t);\r\n\r\n\t\treturn url;\r\n\t}\r\n\r\n\t// borrowed from knockout-3.4.0.js\r\n\tfunction extend(target, source) {\r\n\t\tif (source) {\r\n\t\t\tfor (var prop in source) {\r\n\t\t\t\tif (source.hasOwnProperty(prop)) {\r\n\t\t\t\t\ttarget[prop] = source[prop];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t}\r\n\r\n\tfunction setHtmlLoadEvent(callback) {\r\n\t\thtmlLoadEvent = callback;\r\n\t}\r\n\r\n\tfunction setInitialDataLoadEvent(callback) {\r\n\t\tinitialDataLoadEvent = callback;\r\n\t}\r\n\r\n\tfunction getHtmlDuration() {\r\n\t\treturn timestamps.htmlEnd - timestamps.htmlStart;\r\n\t}\r\n\r\n\tfunction getInitialDataDuration() {\r\n\t\treturn timestamps.initialDataEnd - timestamps.initialDataStart;\r\n\t}\r\n\r\n\tfunction getPreloadDuration() {\r\n\t\treturn timestamps.end - timestamps.start;\r\n\t}\r\n\r\n\tfunction getSocketConnectionDuration() {\r\n\t\tvar duration = timestamps.sockets.connectionComplete - timestamps.sockets.connectionStart;\r\n\t\treturn duration < 0 ? 0 : duration;\r\n\t}\r\n\r\n\tfunction getSocketFromCompleteConnectionToFirstFrame() {\r\n\t\tvar duration = timestamps.sockets.firstFrame - timestamps.sockets.connectionComplete;\r\n\t\treturn duration < 0 ? 0 : duration;\r\n\t}\r\n\r\n\tfunction getSocketFromCompleteConnectionToFirstQuote() {\r\n\t\tvar duration = timestamps.sockets.firstQuote - timestamps.sockets.connectionComplete;\r\n\t\treturn duration < 0 ? 0 : duration;\r\n\t}\r\n\r\n\treturn {\r\n\t\tSetInitialDataLoadEvent: setInitialDataLoadEvent,\r\n\t\tSetHtmlLoadEvent: setHtmlLoadEvent,\r\n\r\n\t\tDataObjects: dataObjects,\r\n\t\tTimestamps: timestamps,\r\n\t};\r\n});\r\n\n",
    "define(\"trackingIntExt/TrackingEvents\", [\r\n\t\"tracking/EventRaiser\",\r\n\t\"tracking/PerformanceDataCollector\",\r\n\t\"handlers/general\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"modules/ThemeSettings\",\r\n\t\"enums/enums\",\r\n\t\"fxnet/preloader\",\r\n], function TrackingEvents(eventRaiser, PerformanceDataCollector, general, customer, ThemeSettings) {\r\n\tvar Preloader = require(\"fxnet/preloader\");\r\n\tvar self = {};\r\n\r\n\tfunction removeParametersFromReferrerUrl(referrerUrl) {\r\n\t\treturn referrerUrl.split(\"?\")[0];\r\n\t}\r\n\r\n\tself.getCurrentEventData = function () {\r\n\t\treturn eventRaiser.eventData;\r\n\t};\r\n\r\n\tself[\"exposeUI\"] = function () {\r\n\t\tvar eventData = eventRaiser.eventData;\r\n\t\teventData.event = \"exposeUI\";\r\n\t\teventData.start = Date.now();\r\n\r\n\t\ttry {\r\n\t\t\t// Preloader\r\n\t\t\teventData.htmlFromCdnDuration = Preloader.Timestamps.getHtmlDuration();\r\n\t\t\teventData.initialDataDuration = Preloader.Timestamps.getInitialDataDuration();\r\n\r\n\t\t\t// Static resources\r\n\t\t\tvar contentLoadDuration = PerformanceDataCollector.getResourceTiming(\r\n\t\t\t\tUrlResolver.getContentPath(\"contentdata\")\r\n\t\t\t);\r\n\t\t\tvar cssLoadDuration = PerformanceDataCollector.getResourceTiming(\".*.css\");\r\n\t\t\tvar faviconLoadDuration = PerformanceDataCollector.getResourceTiming(\"favicon\");\r\n\t\t\tvar preloaderDuration = PerformanceDataCollector.getResourceTiming(\r\n\t\t\t\t\"assets/\" + window.version + \"/js/scripts/preloader.js\"\r\n\t\t\t);\r\n\t\t\tvar jsBundleLoadDuration =\r\n\t\t\t\tPerformanceDataCollector.getResourceTiming(\"assets/\" + window.version + \"/js/main.js\") +\r\n\t\t\t\tPerformanceDataCollector.getResourceTiming(\"assets/\" + window.version + \"/js/mobilemain.js\");\r\n\t\t\tvar styleCssLoadDuration = PerformanceDataCollector.getResourceTiming(\".*style.css\");\r\n\t\t\tvar mainHtmlLoadDuration = PerformanceDataCollector.getResourceTiming(\".*main.html\");\r\n\r\n\t\t\t// aggregate css, contentdata and favicon.ico -> header duration\r\n\r\n\t\t\teventData.cssLoadDuration = Math.ceil(cssLoadDuration);\r\n\t\t\teventData.contentLoadDuration = Math.ceil(contentLoadDuration);\r\n\t\t\teventData.bundleLoadDuration = Math.ceil(jsBundleLoadDuration);\r\n\t\t\teventData.preloaderDuration = Math.ceil(preloaderDuration);\r\n\t\t\teventData.faviconLoadDuration = Math.ceil(faviconLoadDuration);\r\n\r\n\t\t\teventData.networkDuration = getNetworkDuration();\r\n\t\t\teventData.domParseDuration = getDomParseDuration();\r\n\t\t\teventData.applicationStartDuration = getApplicationStartDuration();\r\n\r\n\t\t\teventData.managersInit =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.Start] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.Init];\r\n\r\n\t\t\t// is new version\r\n\t\t\teventData.loadedNewVersion = PerformanceDataCollector.isNewVersion();\r\n\r\n\t\t\t// avarage duration for 3 sample files: main.js/mobilemain.js bundle , main.html, style.css\r\n\t\t\teventData.average3FilesLoadDuration = Math.ceil(\r\n\t\t\t\t(styleCssLoadDuration + mainHtmlLoadDuration + jsBundleLoadDuration) / 3\r\n\t\t\t);\r\n\r\n\t\t\t// BEGIN Parallel\r\n\t\t\t// ------------------------------------\r\n\t\t\t// Duration of waiting for initial data\r\n\t\t\teventData.waitInitialDataDuration =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.InitialDataEnd] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.InitialDataStart];\r\n\r\n\t\t\t// Duration of waiting for apply bindings until html is available\r\n\t\t\teventData.waitHtmlDuration =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.WaitHtmlEnd] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.WaitHtmlStart];\r\n\r\n\t\t\t// Duration of ko.applyBindings\r\n\t\t\teventData.applyBindingsDuration =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ApplyBindingsEnd] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ApplyBindingsStart];\r\n\t\t\t// ------------------------------------\r\n\t\t\t// END Parallel\r\n\r\n\t\t\t// Duration of CacheManager\r\n\t\t\teventData.cacheLoadDuration =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.CacheLoadEnd] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.CacheLoadStart];\r\n\r\n\t\t\t// Duration of UiLayerManager\r\n\t\t\teventData.uiLayerDuration =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.UiLayerEnd] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.UiLayerStart];\r\n\r\n\t\t\t// Duration for initializing the applicationm\r\n\t\t\t// applicationInitDuration = MAX(waitInitialDataDuration, waitHtmlDuration, applyBindingsDuration) + cacheLoadDuration + uiLayerDuration + exposeUIDuration\r\n\t\t\teventData.applicationInitDuration =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.Init];\r\n\r\n\t\t\t// Duration between ko.applyBindings and splash screen removed\r\n\t\t\teventData.exposeUIDuration =\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi] -\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.SplashScreenRemoved];\r\n\r\n\t\t\teventData.loginDuration = getLoginDuration();\r\n\r\n\t\t\t// from expose UI to getting the first quote MAX(0, First Quote time - ExposeUI time)\r\n\t\t\teventData.fromExposeUiToFirstQuote = Math.max(\r\n\t\t\t\t0,\r\n\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.FirstQuoteEvent] -\r\n\t\t\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi]\r\n\t\t\t);\r\n\r\n\t\t\t// pure wesocket prformace events:\r\n\r\n\t\t\t// Socket connection duration\r\n\t\t\teventData.webSocketStartToComplete = Preloader.Timestamps.getSocketConnectionDuration();\r\n\r\n\t\t\teventData.webSocketCompleteConnectionToFirstQuote = Preloader.Timestamps.getSocketFromCompleteConnectionToFirstQuote();\r\n\r\n\t\t\teventData.webSocketsFromCompleteConnectionToFirstFrame = Preloader.Timestamps.getSocketFromCompleteConnectionToFirstFrame();\r\n\t\t} catch (e) {\r\n\t\t\teventData.duration = 0;\r\n\t\t\t// Re-throw the exception, it will be caught by ErrorManager\r\n\t\t\tthrow e;\r\n\t\t} finally {\r\n\t\t\teventRaiser.raiseEvent();\r\n\t\t}\r\n\t};\r\n\r\n\tfunction getNetworkDuration() {\r\n\t\tvar fetchStartValue = PerformanceDataCollector.fetchStart();\r\n\t\tvar responseEndValue = PerformanceDataCollector.responseEnd();\r\n\r\n\t\tif (responseEndValue === \"\" || fetchStartValue === \"\") {\r\n\t\t\treturn \"\";\r\n\t\t} else {\r\n\t\t\t// network transfer duration - we got all the aspx bytes\r\n\t\t\treturn responseEndValue - fetchStartValue;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getDomParseDuration() {\r\n\t\tvar responseEndValue = PerformanceDataCollector.responseEnd();\r\n\t\tvar loadEventEndValue = PerformanceDataCollector.loadEventEnd();\r\n\r\n\t\tif (loadEventEndValue === \"\" || responseEndValue === \"\") {\r\n\t\t\treturn \"\";\r\n\t\t} else {\r\n\t\t\t// domCompleted - bytes recieved (main aspx) , dom parsed including js on main page\r\n\t\t\treturn loadEventEndValue - responseEndValue;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getApplicationStartDuration(eventData) {\r\n\t\tvar loadEventEndValue = PerformanceDataCollector.loadEventEnd();\r\n\r\n\t\tif (loadEventEndValue === \"\") {\r\n\t\t\treturn \"\";\r\n\t\t} else {\r\n\t\t\t// Duration until application is started\r\n\t\t\treturn PerformanceDataCollector.Timestamps[eFxNetEvents.Init] - loadEventEndValue;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getLoginDuration() {\r\n\t\tvar fetchStartValue = PerformanceDataCollector.fetchStart();\r\n\t\tif (fetchStartValue === \"\") {\r\n\t\t\treturn \"\";\r\n\t\t} else {\r\n\t\t\t// Duration from login\r\n\t\t\treturn PerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi] - fetchStartValue;\r\n\t\t}\r\n\t}\r\n\r\n\tself[\"socket-connection-test\"] = function () {\r\n\t\teventRaiser.eventData.event = \"socket-connection-test\";\r\n\r\n\t\t//eventRaiser.eventData.socketFirstFrameDuration = Preloader.Timestamps.getSocketFirstFrameDuration();\r\n\r\n\t\t//eventRaiser.eventData.socketFirstQuoteDuration = Preloader.Timestamps.getSocketFirstQuoteDuration();\r\n\r\n\t\t// from expose UI to getting the first quote MAX(0, First Quote time - ExposeUI time)\r\n\t\t//eventRaiser.eventData.fromExposeUiToFirstQuote = Math.max(0, Preloader.Timestamps.webSocketFirstQuote - PerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi]);\r\n\r\n\t\t//eventRaiser.eventData.fromWebSocketTosAjaxFirstQuote = Math.max(0, Preloader.Timestamps.webSocketFirstQuote - PerformanceDataCollector.Timestamps[eFxNetEvents.FirstQuoteEvent]);\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-view\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-view\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Instrument = options.instrument;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.DisplayMode = options.displayMode;\r\n\t\teventRaiser.eventData.InstrumentStatus = options.instrumentStatus;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-interaction\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-interaction\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Element = options.element;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-submit\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-submit\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Instrument = options.instrument;\r\n\t\teventRaiser.eventData.DealSize = options.dealSize;\r\n\t\teventRaiser.eventData.StopLossType = options.stopLossType;\r\n\t\teventRaiser.eventData.TakeProfitType = options.takeProfitType;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.EnableSLLimit = options.enableSLLimit;\r\n\t\teventRaiser.eventData.EnableTPLimit = options.enableTPLimit;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\t\teventRaiser.eventData.Chart = options.chart;\r\n\t\teventRaiser.eventData.Theme = ThemeSettings.GetTheme();\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"switch-main-view\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"switch-main-view\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"new-deal-dragged\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"new-deal-dragged\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-switch-instrument\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-switch-instrument\";\r\n\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-switch-tab\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-switch-tab\";\r\n\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-expand-limit\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-expand-limit\";\r\n\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-collapse-limit\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-collapse-limit\";\r\n\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-expand-tools\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-expand-tools\";\r\n\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-collapse-tools\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-collapse-tools\";\r\n\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-chart-collapse-trade-ticket\"] = function () {\r\n\t\teventRaiser.eventData.event = \"deal-chart-collapse-trade-ticket\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-chart-expand-trade-ticket\"] = function () {\r\n\t\teventRaiser.eventData.event = \"deal-chart-expand-trade-ticket\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"new-limit-view\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"new-limit-view\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Instrument = options.instrument;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.DisplayMode = options.displayMode;\r\n\t\teventRaiser.eventData.InstrumentStatus = options.instrumentStatus;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"new-limit-submit\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"new-limit-submit\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"limit-slip-interaction\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"limit-slip-interaction\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Element = options.element;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\r\n\t\teventRaiser.eventData.SearchResult = options.SearchResult;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"witdrawal-view\"] = function () {\r\n\t\teventRaiser.eventData.event = \"withdrawal-view\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"withdrawal-interaction\"] = function () {\r\n\t\teventRaiser.eventData.event = \"withdrawal-interaction\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"withdrawal-submit\"] = function () {\r\n\t\teventRaiser.eventData.event = \"withdrawal-submit\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"withdrawal-cancel\"] = function () {\r\n\t\teventRaiser.eventData.event = \"withdrawal-cancel\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"withdrawal-print\"] = function () {\r\n\t\teventRaiser.eventData.event = \"withdrawal-print\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deposit-view\"] = function () {\r\n\t\teventRaiser.eventData.event = \"deposit-view\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deposit-interaction\"] = function () {\r\n\t\teventRaiser.eventData.event = \"deposit-interaction\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"agreement-view\"] = function () {\r\n\t\teventRaiser.eventData.event = \"agreement-view\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"agreement-first-interaction\"] = function () {\r\n\t\teventRaiser.eventData.event = \"agreement-first-interaction\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"agreement-submit\"] = function () {\r\n\t\teventRaiser.eventData.event = \"agreement-submit\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"agreement-success\"] = function () {\r\n\t\teventRaiser.eventData.event = \"agreement-success\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"registration-success\"] = function () {\r\n\t\teventRaiser.eventData.event = \"registration-success\";\r\n\t\teventRaiser.eventData.Referrer = removeParametersFromReferrerUrl(document.referrer);\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"login-success\"] = function (isAutologin) {\r\n\t\teventRaiser.eventData.event = \"login-success\";\r\n\t\teventRaiser.eventData.Referrer = removeParametersFromReferrerUrl(document.referrer);\r\n\t\teventRaiser.eventData.IsAutologin =\r\n\t\t\t!general.isEmptyType(isAutologin) && JSON.parse(isAutologin) === true ? true : false;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"forgot-password-success\"] = function () {\r\n\t\teventRaiser.eventData.event = \"forgot-password-success\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"withdrawal-success\"] = function () {\r\n\t\teventRaiser.eventData.event = \"withdrawal-success\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"View\"] = function () {\r\n\t\tvar currentViewId = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.event = \"View\";\r\n\t\teventRaiser.eventData.ViewId = currentViewId;\r\n\t\teventRaiser.eventData.RefferingView = window.tradingEventsHandler.getRefferingView();\r\n\t\teventRaiser.eventData.ActionSource = window.tradingEventsHandler.data.actionSource;\r\n\t\twindow.tradingEventsHandler.data.actionSource = \"Other\";\r\n\t\twindow.tradingEventsHandler.updateRefferingView(currentViewId);\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"instrument-advanced\"] = function () {\r\n\t\teventRaiser.eventData.event = \"instrument-advanced\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"instrument-simple\"] = function () {\r\n\t\teventRaiser.eventData.event = \"instrument-simple\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"information-maximize\"] = function () {\r\n\t\teventRaiser.eventData.event = \"information-maximize\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"information-minimize\"] = function () {\r\n\t\teventRaiser.eventData.event = \"information-minimize\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"account-summary-advanced\"] = function () {\r\n\t\teventRaiser.eventData.event = \"account-summary-advanced\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"account-summary-simple\"] = function () {\r\n\t\teventRaiser.eventData.event = \"account-summary-simple\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"summary-available-margin\"] = function () {\r\n\t\teventRaiser.eventData.event = \"account-summary-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Element = \"available margin\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"summary-pending-withdrawals\"] = function () {\r\n\t\teventRaiser.eventData.event = \"account-summary-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Element = \"pending withdrawals\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"summary-used-margin\"] = function () {\r\n\t\teventRaiser.eventData.event = \"account-summary-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Element = \"used margin\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"summary-margin-utilization\"] = function () {\r\n\t\teventRaiser.eventData.event = \"account-summary-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Element = \"margin utilization\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"cashback-from-wallet\"] = function () {\r\n\t\teventRaiser.eventData.event = \"account-summary-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Element = \"cash back\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"cashback-extra-info\"] = function () {\r\n\t\teventRaiser.eventData.event = \"cash-back-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Element = \"cash back extra-info\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"net-exposure-one-currency\"] = function () {\r\n\t\teventRaiser.eventData.event = \"net-exposure-one-currency\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Currency = customer.prop.selectedCcyName();\r\n\t\teventRaiser.eventData.Element = \"pending bonus\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"net-exposure-original-currency\"] = function () {\r\n\t\teventRaiser.eventData.event = \"net-exposure-original-currency\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-success\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-success\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.DisplayMode = options.displayMode;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.EnableSLLimit = options.enableSLLimit;\r\n\t\teventRaiser.eventData.EnableTPLimit = options.enableTPLimit;\r\n\t\teventRaiser.eventData.Instrument = options.instrument;\r\n\t\teventRaiser.eventData.Type = options.type;\r\n\t\teventRaiser.eventData.DealSize = options.dealSize;\r\n\t\teventRaiser.eventData.StopLossType = options.stopLossType;\r\n\t\teventRaiser.eventData.TakeProfitType = options.takeProfitType;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"new-limit-success\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"new-limit-success\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Instrument = options.instrument;\r\n\t\teventRaiser.eventData.Type = options.type;\r\n\t\teventRaiser.eventData.DealSize = options.dealSize;\r\n\t\teventRaiser.eventData.AdvancedView = options.advancedView;\r\n\t\teventRaiser.eventData.ExpirationType = options.expirationType;\r\n\t\teventRaiser.eventData.StopLossType = options.stopLossType;\r\n\t\teventRaiser.eventData.TakeProfitType = options.takeProfitType;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"change-currency\"] = function () {\r\n\t\teventRaiser.eventData.event = \"change-currency\";\r\n\t\teventRaiser.eventData.Currency = customer.prop.selectedCcyName();\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"change-language\"] = function () {\r\n\t\teventRaiser.eventData.event = \"change-language\";\r\n\t\teventRaiser.eventData.Language = CookieHandler.ReadCookie(\"Language\");\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"sign-out\"] = function () {\r\n\t\teventRaiser.eventData.event = \"sign-out\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"cancel-limit\"] = function () {\r\n\t\teventRaiser.eventData.event = \"cancel-limit\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"update-limit\"] = function () {\r\n\t\teventRaiser.eventData.event = \"update-limit\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"close-deal-selected\"] = function () {\r\n\t\teventRaiser.eventData.event = \"close-deal-selected\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Method = \"selected\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"close-deal\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"close-deal\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Method = \"deal\";\r\n\t\teventRaiser.eventData.Chart = options.chart;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"close-deal-success\"] = function () {\r\n\t\teventRaiser.eventData.event = \"close-deal-success\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.Method = \"deal\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"switch-tab\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"switch-tab\";\r\n\t\teventRaiser.eventData.CurrentView = options.viewId;\r\n\t\teventRaiser.eventData.TabName = options.presetName;\r\n\r\n\t\tif (options.hasOwnProperty(\"hierarchy\")) {\r\n\t\t\teventRaiser.eventData.Hierarchy = options.hierarchy;\r\n\t\t}\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-error\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-error\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Referrer = options.referrer;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Limit = options.Limit;\r\n\t\teventRaiser.eventData.Tools = options.Tools;\r\n\t\teventRaiser.eventData.Type = options.type;\r\n\t\teventRaiser.eventData.Reason = options.reason;\r\n\t\teventRaiser.eventData.NewDeal = eNewDealValue.Popup;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"new-limit-error\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"new-limit-error\";\r\n\r\n\t\teventRaiser.eventData.Version = options.version;\r\n\t\teventRaiser.eventData.Type = options.type;\r\n\t\teventRaiser.eventData.Reason = options.reason;\r\n\t\teventRaiser.eventData.ElapsedTime = options.ElapsedTime;\r\n\t\teventRaiser.eventData.SlipExpandedInfoAreas = options.SlipExpandedInfoAreas;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deposit-submit\"] = function () {\r\n\t\teventRaiser.eventData.event = \"deposit-submit\";\r\n\t\teventRaiser.eventData.DepositType = window.tradingEventsHandler.data.depositType;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deposit-success\"] = function () {\r\n\t\teventRaiser.eventData.event = \"deposit-success\";\r\n\t\teventRaiser.eventData.DepositType = window.tradingEventsHandler.data.depositType;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deposit-error\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"deposit-error\";\r\n\t\teventRaiser.eventData.Type = options.type;\r\n\t\teventRaiser.eventData.DepositType = window.tradingEventsHandler.data.depositType;\r\n\r\n\t\tif (options.hasOwnProperty(\"errorMessage\")) {\r\n\t\t\teventRaiser.eventData.ErrorMessage = encodeURI(options.errorMessage);\r\n\t\t}\r\n\r\n\t\tif (options.hasOwnProperty(\"errorMessageKey\")) {\r\n\t\t\teventRaiser.eventData.ErrorMessageKey = encodeURI(options.errorMessageKey);\r\n\t\t}\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"withdrawal-error\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"withdrawal-error\";\r\n\t\teventRaiser.eventData.Reason = options.reason;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"message-view\"] = function (messageDetails) {\r\n\t\teventRaiser.eventData.event = \"message-view\";\r\n\t\teventRaiser.eventData.Text = messageDetails.text;\r\n\t\teventRaiser.eventData.Type = messageDetails.type;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"sb-view-offer-clicked\"] = function (messageDetails) {\r\n\t\teventRaiser.eventData.event = \"sb-view-offer-clicked\";\r\n\t\teventRaiser.eventData.Text = messageDetails.text;\r\n\t\teventRaiser.eventData.Type = messageDetails.type;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"sb-deposit-clicked\"] = function (messageDetails) {\r\n\t\teventRaiser.eventData.event = \"sb-deposit-clicked\";\r\n\t\teventRaiser.eventData.Text = messageDetails.text;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"reward-cta-clicked\"] = function (messageDetails) {\r\n\t\teventRaiser.eventData.event = \"reward-cta-clicked\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"instrument-show-more\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"instrument-show-more\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Hierarchy = options.tabHierarchy;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"instrument-show-less\"] = function (options) {\r\n\t\teventRaiser.eventData.event = \"instrument-show-less\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.eventData.TabName = options.TabName;\r\n\t\teventRaiser.eventData.Hierarchy = options.tabHierarchy;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"show-sunday-banner-main\"] = function (bannerDetails) {\r\n\t\teventRaiser.eventData.event = \"show-sunday-banner-main\";\r\n\t\teventRaiser.eventData.Element = bannerDetails.Element;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"click-sunday-banner-button-main\"] = function (bannerDetails) {\r\n\t\teventRaiser.eventData.event = \"click-sunday-banner-button-main\";\r\n\t\teventRaiser.eventData.Element = bannerDetails.Element;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"search\"] = function (eventData) {\r\n\t\teventRaiser.eventData.event = \"search\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"search-interaction\"] = function (eventData) {\r\n\t\teventRaiser.eventData.event = \"search-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-search\"] = function (eventData) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-search\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-search-interaction\"] = function (eventData) {\r\n\t\teventRaiser.eventData.event = \"deal-slip-search-interaction\";\r\n\t\teventRaiser.eventData.CurrentView = window.tradingEventsHandler.data.viewId;\r\n\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"tutorial-events\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\teventRaiser.eventData.ViewID = window.tradingEventsHandler.data.viewId;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"signals-menu-click\"] = function () {\r\n\t\teventRaiser.eventData.event = \"signals-menu-click\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"signals-drill-down\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"signals-drill-down\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"signals-view-more\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"signals-view-more\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"signals-detail-new-deal\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"signals-detail-new-deal\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"short-term-signal-chart\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"short-term-signal-chart\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"economic-calendar-menu-click\"] = function () {\r\n\t\teventRaiser.eventData.event = \"economic-calendar-menu-click\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"questionnaire-navigation\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"questionnaire-navigation\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"questionnaire-question\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"questionnaire-question\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"questionnaire-start\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"questionnaire-start\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"questionnaire-quiz-start\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"questionnaire-quiz-start\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"questionnaire-faq\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"questionnaire-faq\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deposit-faq\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"deposit-faq\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"upload-documents-faq\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"upload-documents-faq\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"support-interaction\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"support-interaction\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-chart-interaction\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\teventRaiser.eventData.event = \"deal-slip-chart-interaction\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"chart-interaction\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"chart-interaction\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"favorite-instruments-add\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"favorite-instruments-add\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"favorite-instruments-remove\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"favorite-instruments-remove\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"favorite-instruments-reorder\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"favorite-instruments-reorder\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"view-sentiments\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"view-sentiments\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"closed-deals-events\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData.data);\r\n\r\n\t\teventRaiser.eventData.event = eventData.event + \"-closed-deals\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"notifications-settings-change\"] = function (eventData) {\r\n\t\teventRaiser.eventData.Element = eventData;\r\n\r\n\t\teventRaiser.eventData.event = \"notifications-settings-change\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"chart-performance\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.chartInitDuration =\r\n\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ChartInitComplete] -\r\n\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ChartInit];\r\n\t\teventRaiser.eventData.chartGeselftoryDuration =\r\n\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ChartGeselftoryResponse] -\r\n\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ChartGeselftoryRequest];\r\n\t\teventRaiser.eventData.chartStartDuration =\r\n\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ChartStartComplete] -\r\n\t\t\tPerformanceDataCollector.Timestamps[eFxNetEvents.ChartStart];\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"tools-chart\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"tools-chart-\" + eventRaiser.eventData.event;\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"start-callback-request-chat\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"start-callback-request-chat\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"hub-menu-close\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"hub-menu-close\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"hub-menu-open\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"hub-menu-open\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"hub-map-expand\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\r\n\t\teventRaiser.eventData.event = \"hub-map-expand\";\r\n\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"hub-map-collapse\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\teventRaiser.eventData.event = \"hub-map-collapse\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"price-alerts-menu-view\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\teventRaiser.eventData.event = \"price-alerts-menu-view\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"price-alert-create\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\teventRaiser.eventData.event = \"price-alert-create\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"price-alert-error\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\teventRaiser.eventData.event = \"price-alert-error\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"deal-slip-change-highlow-term\"] = function (eventData) {\r\n\t\teventRaiser.eventData.Element = eventData;\r\n\t\teventRaiser.eventData.event = \"deal-slip-change-highlow-term\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"help-center\"] = function (eventData) {\r\n\t\tif (eventData.element) {\r\n\t\t\teventRaiser.eventData.element = eventData.element;\r\n\t\t}\r\n\r\n\t\tif (eventData.tab) {\r\n\t\t\teventRaiser.eventData.tab = eventData.tab;\r\n\t\t}\r\n\r\n\t\teventRaiser.eventData.event = \"help-center-\" + eventData.event;\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tself[\"economic-calendar-trade-cta\"] = function (eventData) {\r\n\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\teventRaiser.eventData.event = \"economic-calendar-trade-cta\";\r\n\t\teventRaiser.raiseEvent();\r\n\t};\r\n\r\n\tvar registerEvents = function (eEvents) {\r\n\t\tObject.keys(eEvents).forEach(function (eKey) {\r\n\t\t\tvar eName = eEvents[eKey];\r\n\r\n\t\t\tself[eName] = function (eventData) {\r\n\t\t\t\tif (eventData) {\r\n\t\t\t\t\tObject.assign(eventRaiser.eventData, eventData);\r\n\t\t\t\t}\r\n\r\n\t\t\t\teventRaiser.eventData.event = eName;\r\n\t\t\t\teventRaiser.eventData.SlipExpandedInfoAreas = eventData.SlipExpandedInfoAreas;\r\n\t\t\t\teventRaiser.raiseEvent();\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\r\n\tregisterEvents(eMarketInfoEvents);\r\n\r\n\treturn self;\r\n});\r\n\n",
    "function TrackingEventsCollector(ko, eventsCollection, externalPages) {\r\n    var uiLoaded = false, scmmDataLoaded = false,\r\n        customerDataLoaded = false, eventsQueue = [], trackingGlobalData = {};;\r\n\r\n    function init(trackingData, evCollection) {\r\n        trackingGlobalData = trackingData;\r\n        eventsCollection = evCollection || eventsCollection;\r\n\r\n        if (externalPages) {\r\n            uiLoaded = true;\r\n            scmmDataLoaded = true;\r\n            customerDataLoaded = true;\r\n\r\n            // desktop specific elimination :\r\n            if (!window.environmentData || !window.environmentData.isDesktop) {\r\n                window.externalEventsCallbacks.add(consumeEvent);\r\n            }\r\n        }\r\n        else {\r\n            ko.postbox.subscribe('trading-event', consumeEvent);\r\n            ko.postbox.subscribe('ui-loaded', onUiFinishedLoading);\r\n            ko.postbox.subscribe('scmm-data-loaded', onScmmDataLoaded);\r\n            ko.postbox.subscribe('customer-data-loaded', onCustomerDataLoaded);\r\n        }\r\n    }\r\n\r\n    function onUiFinishedLoading() {\r\n        uiLoaded = true;\r\n\r\n        if (eventsResourcesLoaded()) {\r\n            executeAllQueuedEvents();\r\n        }\r\n\r\n        consumeEvent(\"exposeUI\");\r\n    }\r\n\r\n    function onScmmDataLoaded() {\r\n        scmmDataLoaded = true;\r\n\r\n        if (eventsResourcesLoaded()) {\r\n            executeAllQueuedEvents();\r\n        }\r\n    }\r\n\r\n    function onCustomerDataLoaded() {\r\n        customerDataLoaded = true;\r\n\r\n        if (eventsResourcesLoaded()) {\r\n            executeAllQueuedEvents();\r\n        }\r\n    }\r\n\r\n    function executeAllQueuedEvents() {\r\n        while( eventsQueue.length > 0){\r\n            var element = eventsQueue.shift();\r\n            consumeEvent(element.eventName, element.additionalData);\r\n\r\n        }\r\n        \r\n    }\r\n\r\n    function consumeEvent(eventName, additionalData) {\r\n        if (!eventsResourcesLoaded()) { // push events to queue if resources for the events did not load yet\r\n            eventsQueue.push({ eventName: eventName, additionalData: additionalData });\r\n            return;\r\n        }\r\n\r\n        addGlobalPropertiesToCurrentEvent();\r\n\r\n        //on smart client tracking\r\n        if (window.environmentData && window.environmentData.isDesktop) {\r\n            Object.assign(eventsCollection.getCurrentEventData(), additionalData);\r\n            eventsCollection.raiseEvent(eventName);\r\n            return;\r\n        }\r\n\r\n        eventsCollection[eventName](additionalData);\r\n    }\r\n\r\n    function eventsResourcesLoaded() {\r\n        return uiLoaded && scmmDataLoaded && customerDataLoaded;\r\n    }\r\n\r\n    function addGlobalPropertiesToCurrentEvent() {\r\n        Object.assign(eventsCollection.getCurrentEventData(), trackingGlobalData.getProperties());\r\n    }\r\n\r\n    return {\r\n        init: init,\r\n        consumeEvent: consumeEvent\r\n    };\r\n};\ndefine(\"tracking/EventsCollector\", [\"knockout\",\"trackingIntExt/TrackingEvents\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (ko, te) {\r\n\t\t\t\tvar trackingEventsCollector = this.TrackingEventsCollector(ko, te, false);\r\n\t\t\t\treturn trackingEventsCollector;\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TrackingEventsCollector;\n    };\n}(this)));\n\n",
    "var TrackingCommonData = function () {\r\n\treturn function (storage) {\r\n\t\tvar _sessionStorage = storage;\r\n\r\n\t\tfunction getCountryNameByIp() {\r\n\t\t\tif (typeof systemInfo !== \"undefined\") return systemInfo.countryNameByIP;\r\n\t\t\tif (window.Model !== \"undefined\") return window.Model.CountryNameByIP;\r\n\r\n\t\t\treturn \"\";\r\n\t\t}\r\n\r\n\t\tfunction getBrowserPropertyValue() {\r\n\t\t\tif (window.CookieHandler) {\r\n\t\t\t\tif (\r\n\t\t\t\t\twindow.CookieHandler.ReadCookie(\"NativeIosApp\") !== null &&\r\n\t\t\t\t\twindow.CookieHandler.ReadCookie(\"NativeIosApp\") === \"true\"\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn \"App iPhone\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\twindow.CookieHandler.ReadCookie(\"NativeAndroidApp\") != null &&\r\n\t\t\t\t\twindow.CookieHandler.ReadCookie(\"NativeAndroidApp\") === \"true\"\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn \"App Android\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn Browser.getBrowserName();\r\n\t\t}\r\n\r\n\t\tfunction getDevice() {\r\n\t\t\treturn window.environmentData && window.environmentData.isDesktop\r\n\t\t\t\t? \"Desktop\"\r\n\t\t\t\t: CookieHandler.ReadCookie(\"ViewMode\");\r\n\t\t}\r\n\r\n\t\tfunction renewTrackingSessionId() {\r\n\t\t\tvar newTrackingSessionId = Math.random();\r\n\t\t\t_sessionStorage.setItem(\"TrackingSessionId\", newTrackingSessionId.toString());\r\n\t\t}\r\n\r\n\t\tfunction getTrackingSessionId() {\r\n\t\t\tif (_sessionStorage.getItem(\"TrackingSessionId\") == null) {\r\n\t\t\t\trenewTrackingSessionId();\r\n\t\t\t}\r\n\r\n\t\t\treturn _sessionStorage.getItem(\"TrackingSessionId\");\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tIPCountry: getCountryNameByIp(),\r\n\t\t\tResolutionScreen: Browser.getScreenResolution(),\r\n\t\t\tOS: Browser.getOperatingSystemName(),\r\n\t\t\tOSVersion: Browser.getOperatingSystemNameAndVersion(),\r\n\t\t\tBrowser: getBrowserPropertyValue(),\r\n\t\t\tBrowserVersion: Browser.getBrowserVersion(),\r\n\t\t\tDevice: getDevice(),\r\n\t\t\tTrackingSessionId: getTrackingSessionId(),\r\n\t\t\tLanguage: CookieHandler.ReadCookie(\"Language\"),\r\n\t\t};\r\n\t};\r\n};\r\n\r\n(function (root, factory) {\r\n\tif (typeof define === \"function\" && define.amd) {\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\tdefine('tracking/TrackingCommonData',[], factory);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\troot = factory();\r\n\t}\r\n})(typeof self !== \"undefined\" ? self : this, function () {\r\n\t// Use b in some fashion.\r\n\r\n\t// Just return a value to define the module export.\r\n\t// This example returns an object, but the module\r\n\t// can return a function as the exported value.\r\n\treturn TrackingCommonData();\r\n});\r\n\n",
    "var Browser = (function () {\r\n    var inScopeWindowObject = window;\r\n    var iosDevices;\r\n\r\n    var getiosDevices = function () {\r\n        if (General.isNullOrUndefined(iosDevices)) {\r\n            iosDevices = {\r\n                older: {\r\n                    iphSeSimilar: inScopeWindowObject.screen.width === 320 && inScopeWindowObject.screen.height === 568 &&\r\n                        inScopeWindowObject.devicePixelRatio === 2\r\n                },\r\n                notch: {\r\n                    iphXSimilar: inScopeWindowObject.screen.width === 375 && inScopeWindowObject.screen.height === 812 &&\r\n                        inScopeWindowObject.devicePixelRatio === 3,\r\n                    iphXr: inScopeWindowObject.screen.width === 414 && inScopeWindowObject.screen.height === 896 &&\r\n                        inScopeWindowObject.devicePixelRatio === 2,\r\n                    iphXsMax: inScopeWindowObject.screen.width === 414 && inScopeWindowObject.screen.height === 896 &&\r\n                        inScopeWindowObject.devicePixelRatio === 3\r\n                }\r\n            };\r\n        }\r\n        return iosDevices;\r\n    };\r\n\r\n    var isIosnotchDevice = function () {\r\n        var iosDevices = getiosDevices();\r\n        return (iosDevices.notch.iphXSimilar ||\r\n            iosDevices.notch.iphXr || iosDevices.notch.iphXsMax);\r\n    };\r\n\r\n    var forceRepaintIosRotate = function () {\r\n        var styleTimeout, el = document.getElementById('main');\r\n        if (el && isIosnotchDevice()) {\r\n            if (typeof styleTimeout !== \"undefined\") {\r\n                clearTimeout(styleTimeout);\r\n            }\r\n            el.style.border = '1px solid transparent';\r\n            styleTimeout = setTimeout(function () {\r\n                el.style.border = '';\r\n            }, 200);\r\n        }\r\n    };\r\n\r\n    var isIEVersionGreaterThen = function (versionNumber) {\r\n\r\n        if (isSpartan()) return true;\r\n\r\n        // for test of IE lower than Spartan\r\n        return Number(getBrowserVersion()) > Number(versionNumber);\r\n    };\r\n\r\n    var isDefinePropertySupported = function () {\r\n        return typeof Object.defineProperty == 'function' &&\r\n            (!Browser.isInternetExplorer() || Browser.isIEVersionGreaterThen(8));\r\n    };\r\n\r\n    var isInternetExplorer = function (excludeEdge /*default false*/) {\r\n        var ua = inScopeWindowObject.navigator.userAgent;\r\n\r\n        var msie = ua.indexOf('MSIE ');\r\n        if (msie > 0) {\r\n            // IE 10 or older => return version number\r\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n        }\r\n\r\n        var trident = ua.indexOf('Trident/');\r\n        if (trident > 0) {\r\n            // IE 11 => return version number\r\n            var rv = ua.indexOf('rv:');\r\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n        }\r\n\r\n        if (excludeEdge) {\r\n            return false;\r\n        }\r\n\r\n        return isEdge();\r\n    };\r\n\r\n    var isEdge = function () {\r\n        var ua = inScopeWindowObject.navigator.userAgent;\r\n\r\n        var edge = ua.indexOf('Edge/');\r\n\r\n        if (edge > 0) {\r\n            // IE 12 => return version number\r\n            return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n        }\r\n\r\n        // other browser\r\n        return false;\r\n    };\r\n\r\n    var isSpartan = function () {\r\n        //Win10 IE browser Spartan introduced numeration like Chrome\r\n\r\n        var version = (getBrowserVersion().split('.').length > 2) ? getBrowserVersion().split('.')[0] : getBrowserVersion();\r\n        return Browser.isInternetExplorer() && Number(version) > 40;\r\n    };\r\n\r\n    var isOpera = function () {\r\n        return !!inScopeWindowObject.opera || inScopeWindowObject.navigator.userAgent.indexOf(' OPR/') >= 0;\r\n    };\r\n\r\n    var isSafari = function () {\r\n        return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n    };\r\n\r\n    var getBrowserData = function () {\r\n        var userAgent = inScopeWindowObject.navigator.userAgent,\r\n            match = userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\\/))\\/?\\s*(\\d+)/i) || [],\r\n            tempMatch;\r\n\r\n        if (/trident/i.test(match[1])) {\r\n            tempMatch = /\\brv[ :]+(\\d+)/g.exec(userAgent) || [];\r\n\r\n            return {\r\n                name: 'IE ',\r\n                version: (tempMatch[1] || '')\r\n            };\r\n        }\r\n\r\n        if (match[1] === 'Chrome') {\r\n            tempMatch = userAgent.match(/\\b(OPR|Edge)\\/(\\d+)/);\r\n\r\n            if (tempMatch != null) {\r\n                return {\r\n                    name: tempMatch.slice(1)[0].replace('OPR', 'Opera'),\r\n                    version: tempMatch.slice(1)[1]\r\n                };\r\n            }\r\n        }\r\n\r\n        match = match[2] ? [match[1], match[2]] : [navigator.appName, navigator.appVersion, '-?'];\r\n\r\n        if ((tempMatch = userAgent.match(/version\\/(\\d+)/i)) != null) {\r\n            match.splice(1, 1, tempMatch[1]);\r\n        }\r\n\r\n        return {\r\n            name: match[0],\r\n            version: match[1]\r\n        };\r\n    }\r\n\r\n    var getBrowserName = function () {\r\n        var browserName = getBrowserData().name;\r\n        if (isEdge()) return 'Edge';\r\n        if (isInternetExplorer(true)) return 'Internet Explorer';\r\n        if (isOpera()) return 'Opera';\r\n        if (isSafari()) return 'Safari';\r\n        if (browserName === 'Chrome') return 'Chrome';\r\n        if (browserName === 'Mozilla') return 'Mozilla';\r\n\r\n        return inScopeWindowObject.navigator.userAgent;\r\n    };\r\n\r\n    var getBrowserVersion = function () {\r\n        return getBrowserData().version;\r\n    };\r\n\r\n    var getOperatingSystemName = function () {\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Windows\") != -1) return \"Windows\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Mac\") != -1) return \"Mac/iOS\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"X11\") != -1) return \"UNIX\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Linux\") != -1) return \"Linux\";\r\n\r\n        return inScopeWindowObject.navigator.userAgent;\r\n    };\r\n\r\n    var isChromeOnIOS = function () {\r\n        return navigator.userAgent.indexOf('CriOS') !== -1;\r\n    };\r\n\r\n    var isMacOs = function () {\r\n        return navigator.userAgent.indexOf('Mac OS') !== -1;\r\n    };\r\n\r\n    var isSafariOnMacIOS = function () {\r\n        return isMacOs() && isSafari();\r\n    };\r\n\r\n    var isChrome = function () {\r\n        return navigator.userAgent.indexOf('Chrome') !== -1 && navigator.userAgent.indexOf('Edge') === -1;\r\n    };\r\n\r\n    var isChromium = function () {\r\n        return !General.isNullOrUndefined(window.chrome);\r\n    };\r\n\r\n    var isAndroidApp = function () {\r\n        var cookie = window.CookieHandler.ReadCookie('NativeAndroidApp');\r\n        return cookie !== null && cookie === 'true';\r\n    };\r\n\r\n    var isIosApp = function () {\r\n        var cookie = window.CookieHandler.ReadCookie('NativeIosApp');\r\n        return cookie !== null && cookie === 'true';\r\n    };\r\n\r\n    var getOperatingSystemNameAndVersion = function () {\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Windows NT 10.0\") != -1) return \"Windows 10\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Windows NT 6.2\") != -1) return \"Windows 8\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Windows NT 6.1\") != -1) return \"Windows 7\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Windows NT 6.0\") != -1) return \"Windows Vista\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Windows NT 5.1\") != -1) return \"Windows XP\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Windows NT 5.0\") != -1) return \"Windows 2000\";\r\n        if ((inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10_5\") != -1) ||\r\n            (inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10.5\") != -1)) return \"Mac 10.5\";\r\n        if ((inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10_6\") != -1) ||\r\n            (inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10.6\") != -1)) return \"Mac 10.6\";\r\n        if ((inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10_7\") != -1) ||\r\n            (inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10.7\") != -1)) return \"Mac 10.7\";\r\n        if ((inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10_8\") != -1) ||\r\n            (inScopeWindowObject.navigator.userAgent.indexOf(\"Mac OS X 10.8\") != -1)) return \"Mac 10.8\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"X11\") != -1) return \"UNIX\";\r\n        if (inScopeWindowObject.navigator.userAgent.indexOf(\"Linux\") != -1) return \"Linux\";\r\n\r\n        return inScopeWindowObject.navigator.userAgent;\r\n    };\r\n\r\n    var getScreenResolution = function () {\r\n        return inScopeWindowObject.screen.width + 'x' + inScopeWindowObject.screen.height;\r\n    };\r\n\r\n    var getLargestResolutionDimension = function () {\r\n        return Math.max(inScopeWindowObject.screen.width, inScopeWindowObject.screen.height);\r\n    };\r\n\r\n    var detectPassiveEventListenersSupport = function () {\r\n        try {\r\n            var options = Object.defineProperty({}, \"passive\", {\r\n                get: function () {\r\n                    passiveSupported = true;\r\n                }\r\n            });\r\n\r\n            window.addEventListener(\"test\", options, options);\r\n            window.removeEventListener(\"test\", options, options);\r\n        } catch (err) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n    var passiveSupported = detectPassiveEventListenersSupport();\r\n\r\n    var isPassiveEventListenersSupported = function () {\r\n        return passiveSupported;\r\n    };\r\n\r\n    /**\r\n    * https://stackoverflow.com/questions/21741841/detecting-ios-android-operating-system\r\n    * Determine the mobile operating system.\r\n    * This function returns one of 'iOS', 'Android', 'Windows Phone', or 'unknown'.\r\n    *\r\n    * @returns {String}\r\n    */\r\n    var getMobileOperatingSystem = function () {\r\n        var userAgent = navigator.userAgent || navigator.vendor || window.opera;\r\n\r\n        // Windows Phone must come first because its UA also contains \"Android\"\r\n        if (/windows phone/i.test(userAgent)) {\r\n            return \"Windows Phone\";\r\n        }\r\n\r\n        if (/android/i.test(userAgent)) {\r\n            return \"Android\";\r\n        }\r\n\r\n        // iOS detection from: http://stackoverflow.com/a/9039885/177710\r\n        if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\r\n            return \"iOS\";\r\n        }\r\n\r\n        return \"unknown\";\r\n    }\r\n\r\n    var isIeEdgePrivateMode = function () {\r\n        //IE or Edge don't have window.indexedDB\r\n        //window.MSPointerEvent is undefined in Edge\r\n\r\n        return (!window.indexedDB && (window.PointerEvent || window.MSPointerEvent));\r\n    }\r\n\r\n    var isSafariMobile = function () {\r\n        return navigator.userAgent.match(/(iPod|iPhone|iPad)/) && navigator.userAgent.match(/AppleWebKit/);\r\n    }\r\n\r\n    function getBrowserDetails() {\r\n        return {\r\n            screenColorDept: screen.colorDepth,\r\n            screenHeight: screen.height,\r\n            screenWidth: screen.width,\r\n            screenResolution: screen.pixelDepth,\r\n            javaEnabled: navigator.javaEnabled(),\r\n            javaScriptEnabled: true,\r\n            language: navigator.language,\r\n            timeZoneOffset: new Date().getTimezoneOffset(),\r\n            userAgent: navigator.userAgent.substr(0, 2048)\r\n        };\r\n    }\r\n\r\n    function getAllBrowserInfo() {\r\n        'use strict';\r\n\r\n        var module = {\r\n            options: [],\r\n            header: [navigator.platform, navigator.userAgent, navigator.appVersion, navigator.vendor, window.opera],\r\n            dataos: [\r\n                { name: 'Windows Phone', value: 'Windows Phone', version: 'OS' },\r\n                { name: 'Windows', value: 'Win', version: 'NT' },\r\n                { name: 'iPhone', value: 'iPhone', version: 'OS' },\r\n                { name: 'iPad', value: 'iPad', version: 'OS' },\r\n                { name: 'Kindle', value: 'Silk', version: 'Silk' },\r\n                { name: 'Android', value: 'Android', version: 'Android' },\r\n                { name: 'PlayBook', value: 'PlayBook', version: 'OS' },\r\n                { name: 'BlackBerry', value: 'BlackBerry', version: '/' },\r\n                { name: 'Macintosh', value: 'Mac', version: 'OS X' },\r\n                { name: 'Linux', value: 'Linux', version: 'rv' },\r\n                { name: 'Palm', value: 'Palm', version: 'PalmOS' }\r\n            ],\r\n            databrowser: [\r\n                { name: 'Chrome', value: 'Chrome', version: 'Chrome' },\r\n                { name: 'Firefox', value: 'Firefox', version: 'Firefox' },\r\n                { name: 'Safari', value: 'Safari', version: 'Version' },\r\n                { name: 'Internet Explorer', value: 'MSIE', version: 'MSIE' },\r\n                { name: 'Opera', value: 'Opera', version: 'Opera' },\r\n                { name: 'BlackBerry', value: 'CLDC', version: 'CLDC' },\r\n                { name: 'Mozilla', value: 'Mozilla', version: 'Mozilla' }\r\n            ],\r\n            init: function () {\r\n                var agent = this.header.join(' '),\r\n                    os = this.matchItem(agent, this.dataos),\r\n                    browser = this.matchItem(agent, this.databrowser);\r\n\r\n                return { os: os, browser: browser };\r\n            },\r\n            matchItem: function (string, data) {\r\n                var i = 0,\r\n                    j = 0,\r\n                    html = '',\r\n                    regex,\r\n                    regexv,\r\n                    match,\r\n                    matches,\r\n                    version;\r\n\r\n                for (i = 0; i < data.length; i += 1) {\r\n                    regex = new RegExp(data[i].value, 'i');\r\n                    match = regex.test(string);\r\n                    if (match) {\r\n                        regexv = new RegExp(data[i].version + '[- /:;]([\\\\d._]+)', 'i');\r\n                        matches = string.match(regexv);\r\n                        version = '';\r\n                        if (matches) { if (matches[1]) { matches = matches[1]; } }\r\n                        if (matches) {\r\n                            matches = matches.split(/[._]+/);\r\n                            for (j = 0; j < matches.length; j += 1) {\r\n                                if (j === 0) {\r\n                                    version += matches[j] + '.';\r\n                                } else {\r\n                                    version += matches[j];\r\n                                }\r\n                            }\r\n                        } else {\r\n                            version = '0';\r\n                        }\r\n                        return {\r\n                            name: data[i].name,\r\n                            version: parseFloat(version)\r\n                        };\r\n                    }\r\n                }\r\n                return { name: 'unknown', version: 0 };\r\n            }\r\n        };\r\n\r\n        return module.init();\r\n    }\r\n\r\n    return {\r\n        getMobileOperatingSystem: getMobileOperatingSystem,\r\n        isPassiveEventListenersSupported: isPassiveEventListenersSupported,\r\n        isInternetExplorer: isInternetExplorer,\r\n        isEdge: isEdge,\r\n        isIEVersionGreaterThen: isIEVersionGreaterThen,\r\n        isDefinePropertySupported: isDefinePropertySupported,\r\n        getBrowserName: getBrowserName,\r\n        getBrowserVersion: getBrowserVersion,\r\n        getOperatingSystemName: getOperatingSystemName,\r\n        getOperatingSystemNameAndVersion: getOperatingSystemNameAndVersion,\r\n        getScreenResolution: getScreenResolution,\r\n        getLargestResolutionDimension: getLargestResolutionDimension,\r\n        isChromeOnIOS: isChromeOnIOS,\r\n        isMacOs: isMacOs,\r\n        isSafariOnMacIOS: isSafariOnMacIOS,\r\n        isChrome: isChrome,\r\n        isChromium: isChromium,\r\n        isAndroidApp: isAndroidApp,\r\n        isIosApp: isIosApp,\r\n        replaceWindowWith: function (newWindow) { inScopeWindowObject = newWindow; },\r\n        isIeEdgePrivateMode: isIeEdgePrivateMode,\r\n        isSafariMobile: isSafariMobile,\r\n        getiosDevices: getiosDevices,\r\n        forceRepaintIosRotate: forceRepaintIosRotate,\r\n        getBrowserDetails: getBrowserDetails,\r\n        FullBrowserInfo: getAllBrowserInfo()\r\n    };\r\n})();\ndefine(\"global/browser\", function(){});\n\n",
    "\n",
    "/*global IMContainer:true*/\r\n/*eslint no-undef: 2*/\r\nvar _JSON2 = JSON;\r\n/*\t\r\njQuery pub/sub plugin by Peter Higgins (dante@dojotoolkit.org)\r\nLoosely based on Dojo publish/subscribe API, limited in scope. Rewritten blindly.\r\nOriginal is (c) Dojo Foundation 2004-2010. Released under either AFL or new BSD, see:\r\nhttp://dojofoundation.org/license for more information.\r\n*/\r\nfunction apiIM($) {\r\n\r\n    // the topic/subscription hash\r\n    var cache = {};\r\n\r\n    $.publish = function (/* String */topic, /* Array? */args) {\r\n        // summary: \r\n        //\t\tPublish some data on a named topic.\r\n        // topic: String\r\n        //\t\tThe channel to publish on\r\n        // args: Array?\r\n        //\t\tThe data to publish. Each array item is converted into an ordered\r\n        //\t\targuments on the subscribed functions. \r\n        //\r\n        // example:\r\n        //\t\tPublish stuff on '/some/topic'. Anything subscribed will be called\r\n        //\t\twith a function signature like: function(a,b,c){ ... }\r\n        //\r\n        //\t|\t\t$.publish(\"/some/topic\", [\"a\",\"b\",\"c\"]);\r\n        cache[topic] && $.each(cache[topic], function () {\r\n            try {\r\n                this.apply($, args || []);\r\n            } catch (e) {\r\n\r\n            }\r\n        });\r\n    };\r\n\r\n    $.subscribe = function (/* String */topic, /* Function */callback) {\r\n        // summary:\r\n        //\t\tRegister a callback on a named topic.\r\n        // topic: String\r\n        //\t\tThe channel to subscribe to\r\n        // callback: Function\r\n        //\t\tThe handler event. Anytime something is $.publish'ed on a \r\n        //\t\tsubscribed channel, the callback will be called with the\r\n        //\t\tpublished array as ordered arguments.\r\n        //\r\n        // returns: Array\r\n        //\t\tA handle which can be used to unsubscribe this particular subscription.\r\n        //\t\r\n        // example:\r\n        //\t|\t$.subscribe(\"/some/topic\", function(a, b, c){ /* handle data */ });\r\n        //\r\n        if (!cache[topic]) {\r\n            cache[topic] = [];\r\n        }\r\n        cache[topic].push(callback);\r\n        return [topic, callback]; // Array\r\n    };\r\n\r\n    $.unsubscribe = function (/* Array */handle) {\r\n        // summary:\r\n        //\t\tDisconnect a subscribed function for a topic.\r\n        // handle: Array\r\n        //\t\tThe return value from a $.subscribe call.\r\n        // example:\r\n        //\t|\tvar handle = $.subscribe(\"/something\", function(){});\r\n        //\t|\t$.unsubscribe(handle);\r\n\r\n        var t = handle[0];\r\n        cache[t] && $.each(cache[t], function (idx) {\r\n            if (this == handle[1]) {\r\n                cache[t].splice(idx, 1);\r\n            }\r\n        });\r\n    };\r\n    function InitAll(tokenIM, serviceBase, langId, requestInterval, uiActionCallbacks, requestIntervalMode, isAnnoncement, smartBannerCallback) {\r\n        $(document).ready(function () {\r\n            var im = new IMdataService();\r\n            var imLS = new IMlayoutService();\r\n\r\n            ConfigureIMDataAndLayoutServices(im, imLS, uiActionCallbacks, isAnnoncement, smartBannerCallback);\r\n\r\n            im.init(tokenIM, serviceBase, langId, requestInterval, requestIntervalMode, isAnnoncement);\r\n        });\r\n    }\r\n\r\n    function InitAllFallback(tokenIMUrl, serviceBase, langId, requestInterval, uiActionCallbacks, requestIntervalMode, isAnnoncement, smartBannerCallback) {\r\n        $(document).ready(function () {\r\n            var im = new IMdataService();\r\n            var imLS = new IMlayoutService();\r\n\r\n            ConfigureIMDataAndLayoutServices(im, imLS, uiActionCallbacks, isAnnoncement, smartBannerCallback);\r\n\r\n            var updateCurrentToken = function (currentToken) {\r\n                im.init(currentToken, serviceBase, langId, requestInterval, requestIntervalMode, isAnnoncement);\r\n            };\r\n            im.getTokenIM(tokenIMUrl, updateCurrentToken);\r\n        });\r\n    }\r\n\r\n    function ConfigureIMDataAndLayoutServices(im, imLS, uiActionCallbacks, isAnnouncement, smartBannerCallback) {\r\n        im.onErrorIM_Event(onErrorIM);\r\n        im.PopupCssClass.OverlayClass = 'bg_shadow'; //from the CSS file of content\r\n        im.PopupCssClass.PopupClass = 'popupContainer';\r\n        im.PopupCssClass.CloseClass = 'closePopUP';\r\n        if (isAnnouncement == \"false\") {\r\n            im.onReportIMAction_Event();\r\n            im.onReportIMStatus_Event();\r\n        }\r\n\r\n        imLS.init(im);\r\n        imLS.onCompleteShowIM_Subscribe();\r\n        imLS.onPopupClose_Subscribe();\r\n        if (isAnnouncement == \"false\") {\r\n            imLS.onIMUIAction_Subscribe(imLS.IMUIActionType.Deposit, uiActionCallbacks.deposit);\r\n            imLS.onIMUIAction_Subscribe(imLS.IMUIActionType.Accept, uiActionCallbacks.accept);\r\n            imLS.onIMUIAction_Subscribe(imLS.IMUIActionType.WalkThroughDeal, uiActionCallbacks.walkthrough);\r\n            imLS.onIMUIAction_Subscribe(imLS.IMUIActionType.PrivacyPolicy, uiActionCallbacks.privacypolicy);\r\n            imLS.onIMUIAction_Subscribe(imLS.IMUIActionType.imClosedDeals, uiActionCallbacks.imClosedDeals);\r\n            imLS.onIMUIAction_Subscribe(imLS.IMUIActionType.imOpenDeals, uiActionCallbacks.imOpenDeals);\r\n            imLS.onIMUIAction_Subscribe(imLS.IMUIActionType.imNewDeal, uiActionCallbacks.imNewDeal);\r\n        }\r\n        imLS.onSmartBanner_Subscribe(smartBannerCallback);\r\n    }\r\n\r\n    // functions for callback\r\n    var onErrorIM = function (topics, data) {\r\n    };\r\n\r\n\r\n    $.fn.center = function () {\r\n        this.css(\"position\", \"absolute\");\r\n        this.css(\"top\", ($(window).height() - this.height()) / 2 + $(window).scrollTop() + \"px\");\r\n        this.css(\"left\", ($(window).width() - this.width()) / 2 + $(window).scrollLeft() + \"px\");\r\n        return this;\r\n    };\r\n\r\n    $.fn.outerHTML = function (s) {\r\n        return s ? this.before(s).remove() : $(\"<p>\").append(this.eq(0).clone()).html();\r\n    };\r\n\r\n    return {\r\n        InitAll: InitAll,\r\n        InitAllFallback: InitAllFallback\r\n    }\r\n\r\n};\r\n\r\n\r\nfunction removeByValue(arr, property, val) {\r\n    if (arr != null) {\r\n        for (var i = 0; i < arr.length; i++) {\r\n            if (arr[i][property] == val) {\r\n                arr.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    return arr;\r\n}\r\n\r\n//-------------------------------------------------------\r\n// AttachEvent\r\n//-------------------------------------------------------\r\n// uglify mangle throw error.\r\nwindow.IMContainer = {\r\n    currentActiveProposition: null\r\n};\r\n\r\nvar IMdataService = function () {\r\n    var Token = null;\r\n    var TokenUrl = null;\r\n    var ServiceBase = null;\r\n    var RetryInterval = 1000;\r\n    var LanguageId = null;\r\n    var Req = null;\r\n    var self = this;\r\n    var Current = 0;\r\n    var ItemsCount = 0; // total number of items\r\n    var MaxRetries = 60;\r\n    var CurrentRetry = 0;\r\n    var RequestInterval = 15000;\r\n    var RequestIntervalMode = 1; // 0 Logon, 1 Ongoing\r\n    var Interval = 0;\r\n    var IsAnnoncement = false;\r\n    var CurrentRowVersion = null;\r\n    var currentActiveProposition = null;\r\n    var CustomerTrackingDetailsRetries = 5;\r\n\r\n    var PopupCssClass = {\r\n        // CSS Classes\r\n        PopupClass: 'popupContainer',\r\n        CloseClass: 'closePopUP',\r\n        OverlayClass: 'bg_shadow',\r\n        EnvelopePopupClass: '.new-msg-action',\r\n        EnvelopePopupClassMobile: '.envelope a',\r\n        SmartBannerWideClass: 'smartBannerWide',\r\n        SmartBannerSmallClass: 'smartBannerSmall',\r\n        smartBannerWideViewOfferClass: 'details',\r\n        smartBannerSmallViewOfferClass: 'smartBannerSmall'\r\n    };\r\n\r\n    var Events = {\r\n        onCompleteGetActiveIM: 'onCompleteGetActiveIM',\r\n        onCompleteShowIM: 'onCompleteShowIM',\r\n        onErrorIM: 'onErrorIM',\r\n        onPopupClose_Event: 'onPopupClose',\r\n        onReportIMAction: 'onReportIMAction',\r\n        onReportIMStatus: 'onReportIMStatus',\r\n        onSmartBanner: 'onSmartBanner',\r\n        stopGetActiveIMCalls: 'onStopGetActiveIMCalls',\r\n        restartGetActiveIMCalls: 'onRestartGetActiveIMCalls'\r\n    };\r\n\r\n    var init = function (token, serviceBase, languageId, requestInterval, requestIntervalMode, isAnnoncement) {\r\n        ServiceBase = serviceBase;\r\n        LanguageId = languageId;\r\n        RequestInterval = requestInterval;\r\n        RequestIntervalMode = requestIntervalMode;\r\n        IsAnnoncement = isAnnoncement;\r\n\r\n        IMclearInterval(Interval);\r\n        Token = token;\r\n\r\n        var isValidToken = false;\r\n        var pat = /^[a-z0-9]+$/i; // alpha-numeric\r\n\r\n        if (Token != null) {\r\n            isValidToken = pat.test(Token);\r\n        }\r\n\r\n        if (isValidToken == true) {\r\n            getActiveIM(Token, serviceBase, isAnnoncement);\r\n        }\r\n\r\n        if (typeof define !== \"function\" || !define.amd) {\r\n            return;\r\n        }\r\n\r\n        require([\"StateObject!SystemNotificationEvents\"], function setupStateObjectSubscribers(stateObject) {\r\n            stateObject.set(Events.stopGetActiveIMCalls, null);\r\n            stateObject.set(Events.restartGetActiveIMCalls, null);\r\n\r\n            stateObject.subscribe(Events.stopGetActiveIMCalls, function () {\r\n                IMclearInterval(Interval);\r\n            });\r\n\r\n            stateObject.subscribe(Events.restartGetActiveIMCalls, function () {\r\n                init(token, serviceBase, languageId, requestInterval, requestIntervalMode, isAnnoncement);\r\n            });\r\n        });\r\n    };\r\n\r\n    var proceedNextMessage = function () {\r\n        if (Current + 1 < ItemsCount) { // if there are additional messages show next\r\n            ++Current;\r\n            handleActiveIM();\r\n        } else {\r\n            RequestIntervalMode = 1;\r\n            if (Interval != 0) {\r\n                clearInterval(Interval);\r\n            }\r\n            Interval = setInterval(function () {\r\n                getActiveIM(Token, ServiceBase, IsAnnoncement);\r\n            }, RequestInterval);\r\n        }\r\n    };\r\n\r\n    var IMclearInterval = function (interval) {\r\n        clearInterval(interval);\r\n    };\r\n\r\n\r\n    var getTokenIM = function getTokenIM(tokenUrl, callback) {\r\n        $.ajax({\r\n            url: tokenUrl,\r\n            type: 'POST',\r\n            async: true,\r\n            success: callback\r\n        });\r\n    };\r\n\r\n    //  Not Explorer or explorer 10 \r\n    var getDataCORS = function (varUrl, varMethod, varData, onComplete) {\r\n\r\n        var version = getInternetExplorerVersion();\r\n        // IE8/9 can do cross domain with XDR (we have a different WCF endpoint and method)\r\n\r\n        var methodUrl = varUrl + \"/\" + varMethod;\r\n\r\n        var maxRetries = (varMethod == \"CustomerTrackingDetailsGet\") ? CustomerTrackingDetailsRetries : null;\r\n\r\n        // If from winforms browser control window.external has a value\r\n        if (version == -1 || version >= 10) {\r\n            getDataIE10(methodUrl, varData, onComplete, maxRetries);\r\n        } else if (version >= 8) {\r\n            // IE8/9 can do cross domain with XDR (we have a different WCF endpoint and method)\r\n            methodUrl = varUrl + \"/xdr/\" + varMethod + \"XDR\";\r\n            getDataIE8(methodUrl, varData, onComplete, maxRetries);\r\n        } else {\r\n            //alert(\"No support for IE7\");\r\n            // if not, IE7 and lower can't do cross domain\r\n            if (window.external) {\r\n                getDataIE8(methodUrl, varData, onComplete, maxRetries);\r\n            } else {\r\n                //alert(\"No support for IE7\");\r\n            }\r\n        }\r\n    }\r\n\r\n    // Regular Chrome or IE10\r\n    function getDataIE10(varUrl, varData, onComplete, maxRetries) {\r\n        $.ajax({\r\n            async: true,\r\n            type: 'POST',\r\n            url: varUrl,\r\n            data: varData,\r\n            contentType: \"application/json; charset=utf-8\",\r\n            dataType: 'json',\r\n            processData: true,\r\n            crossDomain: true,\r\n            success: function (data) { //On Successfull service call\r\n                if (onComplete != null) {\r\n                    if (maxRetries && data.Response === \"[]\" && maxRetries > 0) {\r\n                        maxRetries = maxRetries--;\r\n                        var getData = getDataIE10.bind(this, varUrl, varData, onComplete, maxRetries);\r\n                        setTimeout(getData, RetryInterval);\r\n                    }\r\n                    else {\r\n                        onComplete(data);\r\n                    }\r\n                } else {\r\n                    //alert(\"empty\");\r\n                }\r\n            },\r\n            error: function (xhr) {\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    // IE8 & 9 only Cross domain JSON request\r\n    function getDataIE8(varUrl, varData, onComplete, maxRetries) {\r\n        // IE8 & 9 only Cross domain JSON request\r\n        if (window.XDomainRequest) {\r\n            var xdr = new XDomainRequest();\r\n            if (xdr) {\r\n                xdr.onerror = function () {\r\n                    // alert('Error in getDataIE8');\r\n                };\r\n                xdr.ontimeout = function () {\r\n                    //  alert('Timeout in getDataIE8');\r\n                };\r\n                xdr.onprogress = function () {\r\n                    //  alert(\"XDR onprogress\");\r\n                    // alert(\"Error while getting data\");\r\n                };\r\n                xdr.onload = function () {\r\n                    var data = xdr.responseText;\r\n                    if (data == null || data == '') {\r\n                        // alert(\"Error while getting data\");\r\n                    } else {\r\n                        /*eslint no-undef: 2*/\r\n                        var datajson = JSON.parse(data);\r\n                        if (maxRetries && datajson.Response === \"[]\" && maxRetries > 0) {\r\n                            maxRetries = maxRetries--;\r\n                            var getData = getDataIE8.bind(this, varUrl, varData, onComplete, maxRetries);\r\n                            setTimeout(getData, RetryInterval);\r\n                        }\r\n                        onComplete(datajson);;\r\n                    }\r\n                }\r\n                xdr.timeout = 10000;\r\n                xdr.open(\"POST\", varUrl);\r\n                xdr.send(JSON.stringify(varData));\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    // Get Active messages\r\n    var getActiveIM = function (token, serviceBase, isAnnoncement) {\r\n        var myObject =\r\n        {\r\n            RequestToken: token,\r\n            Mode: RequestIntervalMode,\r\n            CurrentRowVersion: CurrentRowVersion\r\n        };\r\n\r\n        var json = _JSON2.stringify(myObject);\r\n        var method = \"GetActiveIM\";\r\n        getDataCORS(serviceBase, method, json, function () {\r\n            if (isAnnoncement == \"true\")\r\n                onGetActiveIMAnnoncementComplete.apply(self, arguments);\r\n            else\r\n                onGetActiveIMComplete.apply(self, arguments);\r\n        });\r\n    };\r\n\r\n    var onGetActiveIMComplete = function (responseText) {\r\n\r\n        Req = removeByValue(responseText, 'MessageType', '14');\r\n\r\n        if (Req != null && Req != '') {\r\n            ItemsCount = Req.length;\r\n            Current = 0;\r\n\r\n            if (Interval != 0) {\r\n                clearInterval(Interval);\r\n                Interval = 0;\r\n            }\r\n\r\n            handleActiveIM();\r\n        } else {\r\n            if (Interval == 0) {\r\n                proceedNextMessage();\r\n            }\r\n        }\r\n    };\r\n\r\n    var onGetActiveIMAnnoncementComplete = function (responseText) {\r\n\r\n        Req = removeByValue(responseText, 'MessageType', '17');\r\n        Req = removeByValue(Req, 'MessageType', '19');\r\n        Req = removeByValue(Req, 'MessageType', '21');\r\n        Req = removeByValue(Req, 'MessageType', '31');\r\n        Req = removeByValue(Req, 'MessageType', '32');\r\n        Req = removeByValue(Req, 'MessageType', '17');\r\n\r\n        if (Req != null && Req != '') {\r\n            ItemsCount = Req.length;\r\n            Current = 0;\r\n\r\n            if (Req[Current].ErrorCode == 1) {\r\n                if (ItemsCount > 0) {\r\n                    if (systemInfo.clientApplicationParams[eClientParams.Device] === \"FullSite\") {\r\n                        require([\"StateObject!IM\"], function (StateObject) {\r\n                            StateObject.update('message', 'new');\r\n\r\n                            $(document).on('click', PopupCssClass.EnvelopePopupClass, function () {\r\n                                showIM(Req[Current]);\r\n                                StateObject.update('message', 'no-new');\r\n                            });\r\n                        });\r\n                    }\r\n                    else {\r\n                        $(PopupCssClass.EnvelopePopupClassMobile).addClass('new');\r\n\r\n                        $(document).on('click', PopupCssClass.EnvelopePopupClassMobile, function () {\r\n                            showIM(Req[Current]);\r\n                            $(PopupCssClass.EnvelopePopupClassMobile).removeClass('new');\r\n                            $(PopupCssClass.EnvelopePopupClassMobile).addClass('no-new');\r\n                        });\r\n                    }\r\n                }\r\n                RequestIntervalMode = 1;\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    var handleActiveIM = function () {\r\n        if (Req[Current].ErrorCode == 1) { // ErrorCode == 1 customer exist\r\n            // Smart banner\r\n            if (Req[Current].MessageType == 17 && Req[Current].State == 0 && Req[Current].CurrentRowVersion != null) {\r\n                CurrentRowVersion = Req[Current].CurrentRowVersion;\r\n                currentActiveProposition = Req[Current];\r\n                IMContainer.currentActiveProposition = Req[Current];\r\n            }\r\n\r\n            if (Req[Current].State != 0 || (Req[Current].MessageType == 31 || Req[Current].MessageType == 32))\r\n                showIM(Req[Current]);\r\n            else\r\n                proceedNextMessage();\r\n\r\n            RequestIntervalMode = 1;\r\n        } else { // ErrorCode == 0 customer not exist\r\n            if (CurrentRetry + 1 < MaxRetries) {\r\n                setTimeout(function () { getActiveIM(Token, ServiceBase, IsAnnoncement); }, RetryInterval);\r\n                ++CurrentRetry;\r\n            }\r\n        }\r\n    };\r\n\r\n    // Show the message\r\n    var showIM = function (Request) {\r\n\r\n        if (Request != null) {\r\n            var myObject =\r\n            {\r\n                RequestToken: Token,\r\n                CustomerMessageID: Request.CustomerMessageID,\r\n                LanguageID: LanguageId,\r\n                IMMetaData: Request\r\n            };\r\n            var json = _JSON2.stringify(myObject);\r\n            var method = \"ShowIM\";\r\n            Req[Current] = Request;\r\n            getDataCORS(ServiceBase, method, json, onShowIMComplete);\r\n        }\r\n    };\r\n\r\n    var onShowIMComplete = function (responseText) {\r\n        if (responseText != null && responseText != '' && Req[Current]) {\r\n            $.publish(Events.onCompleteShowIM, [responseText, Req[Current].CustomerMessageID, responseText.Content, PopupCssClass, Current, ItemsCount, { req: Req }]);\r\n        }\r\n    };\r\n\r\n    // Report action to service\r\n    var ReportIMAction = function (args) {\r\n\r\n        if (Req != null) {\r\n            var myObject =\r\n            {\r\n                RequestToken: Token,\r\n                CustomerMessageID: args[0],\r\n                ActionTypeID: args[1]\r\n            };\r\n            var json = _JSON2.stringify(myObject);\r\n            var method = \"ReportIMAction\";\r\n            getDataCORS(ServiceBase, method, json, function () { onReportIMActionComplete.apply(self, arguments); });\r\n        }\r\n    };\r\n\r\n    var onReportIMActionComplete = function (responseText) {\r\n        if (responseText != null && responseText != '') {\r\n\r\n        }\r\n    };\r\n\r\n    var onReportIMAction_Event = function () {\r\n        $.subscribe(Events.onReportIMAction, function () { ReportIMAction(arguments); });\r\n    };\r\n\r\n\r\n    // Report status to service\r\n    var ReportIMStatus = function (args) {\r\n\r\n        if (Req != null) {\r\n            var myObject =\r\n            {\r\n                RequestToken: Token,\r\n                CustomerMessageID: args[0],\r\n                StatusID: args[1]\r\n            };\r\n            var json = _JSON2.stringify(myObject);\r\n            var method = \"ReportIMStatus\";\r\n            getDataCORS(ServiceBase, method, json, function () { onReportIMStatusComplete.apply(self, arguments); });\r\n        }\r\n    };\r\n\r\n    var onReportIMStatusComplete = function (responseText) {\r\n        if (responseText != null && responseText != '') {\r\n\r\n        }\r\n    };\r\n\r\n    var onReportIMStatus_Event = function () {\r\n        $.subscribe(Events.onReportIMStatus, function () { ReportIMStatus(arguments); });\r\n    };\r\n\r\n\r\n\r\n    var onErrorIM_Event = function (callback) {\r\n        if (callback && typeof (callback) === \"function\") {\r\n            $.subscribe(Events.onErrorIM, callback);\r\n        }\r\n    };\r\n\r\n    var onCompleteGetActiveIM_Event = function (callback) {\r\n        if (callback && typeof (callback) === \"function\") {\r\n            //$.subscribe(Events.onCompleteGetActiveIM, callback);\r\n        }\r\n    };\r\n\r\n    var onCompleteShowIM_Event = function (callback) {\r\n        if (callback && typeof (callback) === \"function\") {\r\n            $.subscribe(Events.onCompleteShowIM, callback);\r\n        }\r\n    };\r\n\r\n    // Returns the version of Internet Explorer or -1\r\n    var getInternetExplorerVersion = function ()\r\n    // Returns the version of Internet Explorer or -1\r\n    {\r\n        var rv = -1; // Return value non-explorer.\r\n        if (navigator.appName == 'Microsoft Internet Explorer') {\r\n            var ua = navigator.userAgent;\r\n            var re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\r\n            if (re.exec(ua) != null)\r\n                rv = parseFloat(RegExp.$1);\r\n        }\r\n        return rv;\r\n    }\r\n\r\n    return {\r\n        init: init,\r\n        onErrorIM_Event: onErrorIM_Event,\r\n        onCompleteGetActiveIM_Event: onCompleteGetActiveIM_Event,\r\n        onCompleteShowIM_Event: onCompleteShowIM_Event,\r\n        PopupCssClass: PopupCssClass,\r\n        Current: Current,\r\n        ItemsCount: ItemsCount,\r\n        Event_onCompleteShowIM: Events.onCompleteShowIM,\r\n        Events_onPopupClose_Event: Events.onPopupClose_Event,\r\n        showIM: showIM,\r\n        Events_onReportIMAction_Event: Events.onReportIMAction,\r\n        Events_onReportIMStatus_Event: Events.onReportIMStatus,\r\n        onReportIMAction_Event: onReportIMAction_Event,\r\n        onReportIMStatus_Event: onReportIMStatus_Event,\r\n        proceedNextMessage: proceedNextMessage,\r\n        IMclearInterval: IMclearInterval,\r\n        Interval: Interval,\r\n        getTokenIM: getTokenIM,\r\n        Events_onSmartBanner_Event: Events.onSmartBanner,\r\n        IsAnnoncement: IsAnnoncement,\r\n        CurrentActiveProposition: function () { return IMContainer.currentActiveProposition; }\r\n    };\r\n};\r\n\r\n\r\nvar IMlayoutService = function () {\r\n    var imDataService;\r\n    var CustomerCustomerMessageID = 0;\r\n\r\n    var init = function (im) { imDataService = im; };\r\n\r\n    var IMUIActionType = {\r\n        Deposit: 'deposit',\r\n        Notice: 'notice',\r\n        Accept: 'accept',\r\n        WalkThroughDeal: 'walkthroughdeal',\r\n        PrivacyPolicy: 'privacypolicy',\r\n        imClosedDeals: 'imClosedDeals',\r\n        imOpenDeals: 'imOpenDeals',\r\n        imNewDeal: 'imNewDeal'\r\n    };\r\n\r\n    var IMUIStatusType = {\r\n        Pending: 'pending',\r\n        Displayed: 'displayed',\r\n        Dismissed: 'dismissed',\r\n        Expired: 'expired'\r\n    };\r\n\r\n    var onCompleteShowIM_Subscribe = function () {\r\n        $.subscribe(imDataService.Event_onCompleteShowIM, function () {\r\n            ShowIMComplete(arguments);\r\n        });\r\n    };\r\n\r\n    var onPopupClose_Subscribe = function (callback) {\r\n        if (callback && typeof (callback) === \"function\") {\r\n            $.subscribe(imDataService.Events_onPopupClose_Event, callback);\r\n        }\r\n\r\n        $(document).on('click', (\".\" + imDataService.PopupCssClass.CloseClass), function (e) {\r\n            e.stopPropagation(); //This stops all propagation of the event in the bubbling phase\r\n            e.preventDefault();\r\n            IMPopupClose();\r\n        });\r\n        $(document).on('click', (\"#\" + imDataService.PopupCssClass.CloseClass), function (e) {\r\n            e.stopPropagation(); //This stops all propagation of the event in the bubbling phase\r\n            e.preventDefault();\r\n            IMPopupClose();\r\n        });\r\n    };\r\n\r\n    var onSmartBanner_Subscribe = function (callback) {\r\n        if (callback && typeof (callback) === \"function\") {\r\n            $.subscribe(imDataService.Events_onSmartBanner_Event, callback);\r\n        }\r\n    };\r\n\r\n\r\n    // Report action to service\r\n    var onIMUIAction_Subscribe = function (/* String */IMUIAction, /* Function */callback) {\r\n        if (callback && typeof (callback) === \"function\") {\r\n            $(document).on('click', \"#\" + (imDataService.PopupCssClass.PopupClass + \" .\" + IMUIAction), function () {\r\n                IMUIActionClick(IMUIAction);\r\n                IMPopupClose();\r\n            });\r\n\r\n            $.subscribe(IMUIAction, callback);\r\n        }\r\n    };\r\n\r\n    var IMUIActionClick = function (IMUIAction) {\r\n\r\n        var actionTypeId;\r\n        switch (IMUIAction.toLowerCase()) {\r\n            case IMUIActionType.Deposit:\r\n                actionTypeId = 2;\r\n                break;\r\n            case IMUIActionType.Notice:\r\n                actionTypeId = 3;\r\n                break;\r\n            case IMUIActionType.Accept:\r\n                actionTypeId = 5;\r\n                break;\r\n            case IMUIActionType.WalkThroughDeal:\r\n                actionTypeId = 6;\r\n                break;\r\n            case IMUIActionType.PrivacyPolicy:\r\n                actionTypeId = 7;\r\n                break;\r\n            case IMUIActionType.imClosedDeals:\r\n                actionTypeId = 8;\r\n                break;\r\n            case IMUIActionType.imOpenDeals:\r\n                actionTypeId = 9;\r\n                break;\r\n            case IMUIActionType.imNewDeal:\r\n                actionTypeId = 10;\r\n                break;\r\n            default:\r\n                actionTypeId = 2;\r\n        }\r\n\r\n        if (CustomerCustomerMessageID != null && CustomerCustomerMessageID != 0) {\r\n            $.publish(imDataService.Events_onReportIMAction_Event, [CustomerCustomerMessageID, actionTypeId]);\r\n        }\r\n\r\n        $.publish(IMUIAction, [IMUIAction]);\r\n    };\r\n\r\n\r\n    // Report status to service\r\n    var onIMUIStatus_Subscribe = function (/* String */IMUIStatus, /* Function */callback) {\r\n        $(document).on('click', (\"#\" + imDataService.PopupCssClass.PopupClass + \" .\" + IMUIStatus), function () {\r\n            IMUIStatusClick(IMUIStatus);\r\n            $(\".notice-box\").hide();\r\n        });\r\n\r\n        $.subscribe(IMUIStatus, callback);\r\n    };\r\n\r\n    var IMUIStatusClick = function (IMUIStatus) {\r\n\r\n        var statusTypeId;\r\n        switch (IMUIStatus.toLowerCase()) {\r\n            case IMUIStatusType.Pending:\r\n                statusTypeId = 0;\r\n                break;\r\n            case IMUIStatusType.Displayed:\r\n                statusTypeId = 1;\r\n                break;\r\n            case IMUIStatusType.Dismissed:\r\n                statusTypeId = 2;\r\n                break;\r\n            case IMUIStatusType.Expired:\r\n                statusTypeId = 3;\r\n                break;\r\n            default:\r\n                statusTypeId = 1;\r\n        }\r\n\r\n        if (CustomerCustomerMessageID != null && CustomerCustomerMessageID != 0) {\r\n            $.publish(imDataService.Events_onReportIMStatus_Event, [CustomerCustomerMessageID, statusTypeId]);\r\n        }\r\n        $.publish(IMUIStatus, [IMUIStatus]);\r\n    };\r\n\r\n\r\n    var ShowIMComplete = function (responseText) {\r\n        CustomerCustomerMessageID = 0;\r\n        if (responseText != null && responseText != '') {\r\n            var current = responseText[4];\r\n            var itemsCount = responseText[5];\r\n\r\n            showWin(responseText[2], responseText[3], responseText[6].req[current]);\r\n\r\n            CustomerCustomerMessageID = responseText[6].req[current].CustomerMessageID;\r\n\r\n            if (current < itemsCount) {\r\n                ++current;\r\n            } else {\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n    var IMPopupClose = function (responseText) {\r\n        $.publish(imDataService.Events_onPopupClose_Event, responseText, true);\r\n        $(\".\" + imDataService.PopupCssClass.PopupClass).hide();\r\n        $(\"#\" + imDataService.PopupCssClass.OverlayClass).hide();\r\n        require([\"StateObject!IM\"], function (StateObject) {\r\n            StateObject.update('IMPopUpVisible', false);\r\n        });\r\n        imDataService.proceedNextMessage();\r\n    };\r\n\r\n    var showWin = function (content, popupClass, req) {\r\n        var popup = $(\".\" + popupClass.PopupClass);\r\n        if (content != null && content != '') {\r\n\r\n            var cssLink = $(content).filter(\"link\").outerHTML();\r\n            if (cssLink != null && cssLink != '') {\r\n                var css = $('link[href*=\"' + encodeURI(cssLink) + '\"]').attr('id', 'im_css');\r\n                if ($(\"#im_css\").length == 0) {\r\n                    $(\"head\").append(css);\r\n                }\r\n                else {\r\n                    $('#im_css').remove();\r\n                    $(\"head\").append(css);\r\n                }\r\n            }\r\n\r\n            if (req.MessageType == 31 || req.MessageType == 32) {\r\n                var smartBannerClass = '';\r\n                if (req.MessageType == 31) {\r\n                    smartBannerClass = popupClass.SmartBannerWideClass;\r\n                }\r\n                else if (req.MessageType == 32) {\r\n                    smartBannerClass = popupClass.SmartBannerSmallClass;\r\n                }\r\n\r\n                if (imDataService.IsAnnoncement == false) {\r\n                    var viewOfferCallback = function () { imDataService.showIM(imDataService.CurrentActiveProposition()); };\r\n                    var dateObj = new Date(parseInt(req.ExpirationDate.replace('/Date(', '')));\r\n                    $.publish(imDataService.Events_onSmartBanner_Event, [dateObj, req.State, smartBannerClass, req.ContentKey, content, viewOfferCallback]);\r\n                }\r\n                imDataService.proceedNextMessage();\r\n            } else {\r\n                popup.hide();\r\n                $(\"#\" + popupClass.OverlayClass).hide();\r\n                popup.html(content);\r\n\r\n                require([\"StateObject!IM\"], function (StateObject) {\r\n                    StateObject.update('IMPopUpVisible', { MessageType: req.MessageType });\r\n                });\r\n\r\n                setTimeout(function () {\r\n                    popup.show();\r\n                    $(\"#\" + popupClass.OverlayClass).fadeIn(500);\r\n                }, 500);\r\n            }\r\n            imDataService.IMclearInterval(imDataService.Interval);\r\n        } else {\r\n            imDataService.proceedNextMessage();\r\n        }\r\n    };\r\n\r\n    return {\r\n        init: init,\r\n        showWin: showWin,\r\n        onCompleteShowIM_Subscribe: onCompleteShowIM_Subscribe,\r\n        onPopupClose_Subscribe: onPopupClose_Subscribe,\r\n        onIMUIAction_Subscribe: onIMUIAction_Subscribe,\r\n        onIMUIStatus_Subscribe: onIMUIStatus_Subscribe,\r\n        IMUIActionType: IMUIActionType,\r\n        IMUIStatusType: IMUIStatusType,\r\n        onSmartBanner_Subscribe: onSmartBanner_Subscribe\r\n    };\r\n\r\n};\r\n\r\n\r\n\r\n8;\ndefine(\"global/apiIM\", [\"jquery\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (jquery) {\r\n\t\t\t\treturn this.apiIM(jquery);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.apiIM;\n    };\n}(this)));\n\n",
    "(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define('vendor/latinize',factory);\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = factory();\n  } else {\n    // running in browser\n    root.latinize = factory();\n  }\n})(this, function() {\n\n  function latinize(str) {\n    if (typeof str === 'string') {\n      return str.replace(/[^A-Za-z0-9]/g, function(x) {\n        return latinize.characters[x] || x;\n      });\n    } else {\n      return str;\n    }\n  }\n\n  latinize.characters = {\n    'Á': 'A',\n    'Ă': 'A',\n    'Ắ': 'A',\n    'Ặ': 'A',\n    'Ằ': 'A',\n    'Ẳ': 'A',\n    'Ẵ': 'A',\n    'Ǎ': 'A',\n    'Â': 'A',\n    'Ấ': 'A',\n    'Ậ': 'A',\n    'Ầ': 'A',\n    'Ẩ': 'A',\n    'Ẫ': 'A',\n    'Ä': 'A',\n    'Ǟ': 'A',\n    'Ȧ': 'A',\n    'Ǡ': 'A',\n    'Ạ': 'A',\n    'Ȁ': 'A',\n    'À': 'A',\n    'Ả': 'A',\n    'Ȃ': 'A',\n    'Ā': 'A',\n    'Ą': 'A',\n    'Å': 'A',\n    'Ǻ': 'A',\n    'Ḁ': 'A',\n    'Ⱥ': 'A',\n    'Ã': 'A',\n    'Ꜳ': 'AA',\n    'Æ': 'AE',\n    'Ǽ': 'AE',\n    'Ǣ': 'AE',\n    'Ꜵ': 'AO',\n    'Ꜷ': 'AU',\n    'Ꜹ': 'AV',\n    'Ꜻ': 'AV',\n    'Ꜽ': 'AY',\n    'Ḃ': 'B',\n    'Ḅ': 'B',\n    'Ɓ': 'B',\n    'Ḇ': 'B',\n    'Ƀ': 'B',\n    'Ƃ': 'B',\n    'Ć': 'C',\n    'Č': 'C',\n    'Ç': 'C',\n    'Ḉ': 'C',\n    'Ĉ': 'C',\n    'Ċ': 'C',\n    'Ƈ': 'C',\n    'Ȼ': 'C',\n    'Ď': 'D',\n    'Ḑ': 'D',\n    'Ḓ': 'D',\n    'Ḋ': 'D',\n    'Ḍ': 'D',\n    'Ɗ': 'D',\n    'Ḏ': 'D',\n    'ǲ': 'D',\n    'ǅ': 'D',\n    'Đ': 'D',\n    'Ƌ': 'D',\n    'Ǳ': 'DZ',\n    'Ǆ': 'DZ',\n    'É': 'E',\n    'Ĕ': 'E',\n    'Ě': 'E',\n    'Ȩ': 'E',\n    'Ḝ': 'E',\n    'Ê': 'E',\n    'Ế': 'E',\n    'Ệ': 'E',\n    'Ề': 'E',\n    'Ể': 'E',\n    'Ễ': 'E',\n    'Ḙ': 'E',\n    'Ë': 'E',\n    'Ė': 'E',\n    'Ẹ': 'E',\n    'Ȅ': 'E',\n    'È': 'E',\n    'Ẻ': 'E',\n    'Ȇ': 'E',\n    'Ē': 'E',\n    'Ḗ': 'E',\n    'Ḕ': 'E',\n    'Ę': 'E',\n    'Ɇ': 'E',\n    'Ẽ': 'E',\n    'Ḛ': 'E',\n    'Ꝫ': 'ET',\n    'Ḟ': 'F',\n    'Ƒ': 'F',\n    'Ǵ': 'G',\n    'Ğ': 'G',\n    'Ǧ': 'G',\n    'Ģ': 'G',\n    'Ĝ': 'G',\n    'Ġ': 'G',\n    'Ɠ': 'G',\n    'Ḡ': 'G',\n    'Ǥ': 'G',\n    'Ḫ': 'H',\n    'Ȟ': 'H',\n    'Ḩ': 'H',\n    'Ĥ': 'H',\n    'Ⱨ': 'H',\n    'Ḧ': 'H',\n    'Ḣ': 'H',\n    'Ḥ': 'H',\n    'Ħ': 'H',\n    'Í': 'I',\n    'Ĭ': 'I',\n    'Ǐ': 'I',\n    'Î': 'I',\n    'Ï': 'I',\n    'Ḯ': 'I',\n    'İ': 'I',\n    'Ị': 'I',\n    'Ȉ': 'I',\n    'Ì': 'I',\n    'Ỉ': 'I',\n    'Ȋ': 'I',\n    'Ī': 'I',\n    'Į': 'I',\n    'Ɨ': 'I',\n    'Ĩ': 'I',\n    'Ḭ': 'I',\n    'Ꝺ': 'D',\n    'Ꝼ': 'F',\n    'Ᵹ': 'G',\n    'Ꞃ': 'R',\n    'Ꞅ': 'S',\n    'Ꞇ': 'T',\n    'Ꝭ': 'IS',\n    'Ĵ': 'J',\n    'Ɉ': 'J',\n    'Ḱ': 'K',\n    'Ǩ': 'K',\n    'Ķ': 'K',\n    'Ⱪ': 'K',\n    'Ꝃ': 'K',\n    'Ḳ': 'K',\n    'Ƙ': 'K',\n    'Ḵ': 'K',\n    'Ꝁ': 'K',\n    'Ꝅ': 'K',\n    'Ĺ': 'L',\n    'Ƚ': 'L',\n    'Ľ': 'L',\n    'Ļ': 'L',\n    'Ḽ': 'L',\n    'Ḷ': 'L',\n    'Ḹ': 'L',\n    'Ⱡ': 'L',\n    'Ꝉ': 'L',\n    'Ḻ': 'L',\n    'Ŀ': 'L',\n    'Ɫ': 'L',\n    'ǈ': 'L',\n    'Ł': 'L',\n    'Ǉ': 'LJ',\n    'Ḿ': 'M',\n    'Ṁ': 'M',\n    'Ṃ': 'M',\n    'Ɱ': 'M',\n    'Ń': 'N',\n    'Ň': 'N',\n    'Ņ': 'N',\n    'Ṋ': 'N',\n    'Ṅ': 'N',\n    'Ṇ': 'N',\n    'Ǹ': 'N',\n    'Ɲ': 'N',\n    'Ṉ': 'N',\n    'Ƞ': 'N',\n    'ǋ': 'N',\n    'Ñ': 'N',\n    'Ǌ': 'NJ',\n    'Ó': 'O',\n    'Ŏ': 'O',\n    'Ǒ': 'O',\n    'Ô': 'O',\n    'Ố': 'O',\n    'Ộ': 'O',\n    'Ồ': 'O',\n    'Ổ': 'O',\n    'Ỗ': 'O',\n    'Ö': 'O',\n    'Ȫ': 'O',\n    'Ȯ': 'O',\n    'Ȱ': 'O',\n    'Ọ': 'O',\n    'Ő': 'O',\n    'Ȍ': 'O',\n    'Ò': 'O',\n    'Ỏ': 'O',\n    'Ơ': 'O',\n    'Ớ': 'O',\n    'Ợ': 'O',\n    'Ờ': 'O',\n    'Ở': 'O',\n    'Ỡ': 'O',\n    'Ȏ': 'O',\n    'Ꝋ': 'O',\n    'Ꝍ': 'O',\n    'Ō': 'O',\n    'Ṓ': 'O',\n    'Ṑ': 'O',\n    'Ɵ': 'O',\n    'Ǫ': 'O',\n    'Ǭ': 'O',\n    'Ø': 'O',\n    'Ǿ': 'O',\n    'Õ': 'O',\n    'Ṍ': 'O',\n    'Ṏ': 'O',\n    'Ȭ': 'O',\n    'Ƣ': 'OI',\n    'Ꝏ': 'OO',\n    'Ɛ': 'E',\n    'Ɔ': 'O',\n    'Ȣ': 'OU',\n    'Ṕ': 'P',\n    'Ṗ': 'P',\n    'Ꝓ': 'P',\n    'Ƥ': 'P',\n    'Ꝕ': 'P',\n    'Ᵽ': 'P',\n    'Ꝑ': 'P',\n    'Ꝙ': 'Q',\n    'Ꝗ': 'Q',\n    'Ŕ': 'R',\n    'Ř': 'R',\n    'Ŗ': 'R',\n    'Ṙ': 'R',\n    'Ṛ': 'R',\n    'Ṝ': 'R',\n    'Ȑ': 'R',\n    'Ȓ': 'R',\n    'Ṟ': 'R',\n    'Ɍ': 'R',\n    'Ɽ': 'R',\n    'Ꜿ': 'C',\n    'Ǝ': 'E',\n    'Ś': 'S',\n    'Ṥ': 'S',\n    'Š': 'S',\n    'Ṧ': 'S',\n    'Ş': 'S',\n    'Ŝ': 'S',\n    'Ș': 'S',\n    'Ṡ': 'S',\n    'Ṣ': 'S',\n    'Ṩ': 'S',\n    'ß': 'ss',\n    'Ť': 'T',\n    'Ţ': 'T',\n    'Ṱ': 'T',\n    'Ț': 'T',\n    'Ⱦ': 'T',\n    'Ṫ': 'T',\n    'Ṭ': 'T',\n    'Ƭ': 'T',\n    'Ṯ': 'T',\n    'Ʈ': 'T',\n    'Ŧ': 'T',\n    'Ɐ': 'A',\n    'Ꞁ': 'L',\n    'Ɯ': 'M',\n    'Ʌ': 'V',\n    'Ꜩ': 'TZ',\n    'Ú': 'U',\n    'Ŭ': 'U',\n    'Ǔ': 'U',\n    'Û': 'U',\n    'Ṷ': 'U',\n    'Ü': 'U',\n    'Ǘ': 'U',\n    'Ǚ': 'U',\n    'Ǜ': 'U',\n    'Ǖ': 'U',\n    'Ṳ': 'U',\n    'Ụ': 'U',\n    'Ű': 'U',\n    'Ȕ': 'U',\n    'Ù': 'U',\n    'Ủ': 'U',\n    'Ư': 'U',\n    'Ứ': 'U',\n    'Ự': 'U',\n    'Ừ': 'U',\n    'Ử': 'U',\n    'Ữ': 'U',\n    'Ȗ': 'U',\n    'Ū': 'U',\n    'Ṻ': 'U',\n    'Ų': 'U',\n    'Ů': 'U',\n    'Ũ': 'U',\n    'Ṹ': 'U',\n    'Ṵ': 'U',\n    'Ꝟ': 'V',\n    'Ṿ': 'V',\n    'Ʋ': 'V',\n    'Ṽ': 'V',\n    'Ꝡ': 'VY',\n    'Ẃ': 'W',\n    'Ŵ': 'W',\n    'Ẅ': 'W',\n    'Ẇ': 'W',\n    'Ẉ': 'W',\n    'Ẁ': 'W',\n    'Ⱳ': 'W',\n    'Ẍ': 'X',\n    'Ẋ': 'X',\n    'Ý': 'Y',\n    'Ŷ': 'Y',\n    'Ÿ': 'Y',\n    'Ẏ': 'Y',\n    'Ỵ': 'Y',\n    'Ỳ': 'Y',\n    'Ƴ': 'Y',\n    'Ỷ': 'Y',\n    'Ỿ': 'Y',\n    'Ȳ': 'Y',\n    'Ɏ': 'Y',\n    'Ỹ': 'Y',\n    'Ź': 'Z',\n    'Ž': 'Z',\n    'Ẑ': 'Z',\n    'Ⱬ': 'Z',\n    'Ż': 'Z',\n    'Ẓ': 'Z',\n    'Ȥ': 'Z',\n    'Ẕ': 'Z',\n    'Ƶ': 'Z',\n    'Ĳ': 'IJ',\n    'Œ': 'OE',\n    'ᴀ': 'A',\n    'ᴁ': 'AE',\n    'ʙ': 'B',\n    'ᴃ': 'B',\n    'ᴄ': 'C',\n    'ᴅ': 'D',\n    'ᴇ': 'E',\n    'ꜰ': 'F',\n    'ɢ': 'G',\n    'ʛ': 'G',\n    'ʜ': 'H',\n    'ɪ': 'I',\n    'ʁ': 'R',\n    'ᴊ': 'J',\n    'ᴋ': 'K',\n    'ʟ': 'L',\n    'ᴌ': 'L',\n    'ᴍ': 'M',\n    'ɴ': 'N',\n    'ᴏ': 'O',\n    'ɶ': 'OE',\n    'ᴐ': 'O',\n    'ᴕ': 'OU',\n    'ᴘ': 'P',\n    'ʀ': 'R',\n    'ᴎ': 'N',\n    'ᴙ': 'R',\n    'ꜱ': 'S',\n    'ᴛ': 'T',\n    'ⱻ': 'E',\n    'ᴚ': 'R',\n    'ᴜ': 'U',\n    'ᴠ': 'V',\n    'ᴡ': 'W',\n    'ʏ': 'Y',\n    'ᴢ': 'Z',\n    'á': 'a',\n    'ă': 'a',\n    'ắ': 'a',\n    'ặ': 'a',\n    'ằ': 'a',\n    'ẳ': 'a',\n    'ẵ': 'a',\n    'ǎ': 'a',\n    'â': 'a',\n    'ấ': 'a',\n    'ậ': 'a',\n    'ầ': 'a',\n    'ẩ': 'a',\n    'ẫ': 'a',\n    'ä': 'a',\n    'ǟ': 'a',\n    'ȧ': 'a',\n    'ǡ': 'a',\n    'ạ': 'a',\n    'ȁ': 'a',\n    'à': 'a',\n    'ả': 'a',\n    'ȃ': 'a',\n    'ā': 'a',\n    'ą': 'a',\n    'ᶏ': 'a',\n    'ẚ': 'a',\n    'å': 'a',\n    'ǻ': 'a',\n    'ḁ': 'a',\n    'ⱥ': 'a',\n    'ã': 'a',\n    'ꜳ': 'aa',\n    'æ': 'ae',\n    'ǽ': 'ae',\n    'ǣ': 'ae',\n    'ꜵ': 'ao',\n    'ꜷ': 'au',\n    'ꜹ': 'av',\n    'ꜻ': 'av',\n    'ꜽ': 'ay',\n    'ḃ': 'b',\n    'ḅ': 'b',\n    'ɓ': 'b',\n    'ḇ': 'b',\n    'ᵬ': 'b',\n    'ᶀ': 'b',\n    'ƀ': 'b',\n    'ƃ': 'b',\n    'ɵ': 'o',\n    'ć': 'c',\n    'č': 'c',\n    'ç': 'c',\n    'ḉ': 'c',\n    'ĉ': 'c',\n    'ɕ': 'c',\n    'ċ': 'c',\n    'ƈ': 'c',\n    'ȼ': 'c',\n    'ď': 'd',\n    'ḑ': 'd',\n    'ḓ': 'd',\n    'ȡ': 'd',\n    'ḋ': 'd',\n    'ḍ': 'd',\n    'ɗ': 'd',\n    'ᶑ': 'd',\n    'ḏ': 'd',\n    'ᵭ': 'd',\n    'ᶁ': 'd',\n    'đ': 'd',\n    'ɖ': 'd',\n    'ƌ': 'd',\n    'ı': 'i',\n    'ȷ': 'j',\n    'ɟ': 'j',\n    'ʄ': 'j',\n    'ǳ': 'dz',\n    'ǆ': 'dz',\n    'é': 'e',\n    'ĕ': 'e',\n    'ě': 'e',\n    'ȩ': 'e',\n    'ḝ': 'e',\n    'ê': 'e',\n    'ế': 'e',\n    'ệ': 'e',\n    'ề': 'e',\n    'ể': 'e',\n    'ễ': 'e',\n    'ḙ': 'e',\n    'ë': 'e',\n    'ė': 'e',\n    'ẹ': 'e',\n    'ȅ': 'e',\n    'è': 'e',\n    'ẻ': 'e',\n    'ȇ': 'e',\n    'ē': 'e',\n    'ḗ': 'e',\n    'ḕ': 'e',\n    'ⱸ': 'e',\n    'ę': 'e',\n    'ᶒ': 'e',\n    'ɇ': 'e',\n    'ẽ': 'e',\n    'ḛ': 'e',\n    'ꝫ': 'et',\n    'ḟ': 'f',\n    'ƒ': 'f',\n    'ᵮ': 'f',\n    'ᶂ': 'f',\n    'ǵ': 'g',\n    'ğ': 'g',\n    'ǧ': 'g',\n    'ģ': 'g',\n    'ĝ': 'g',\n    'ġ': 'g',\n    'ɠ': 'g',\n    'ḡ': 'g',\n    'ᶃ': 'g',\n    'ǥ': 'g',\n    'ḫ': 'h',\n    'ȟ': 'h',\n    'ḩ': 'h',\n    'ĥ': 'h',\n    'ⱨ': 'h',\n    'ḧ': 'h',\n    'ḣ': 'h',\n    'ḥ': 'h',\n    'ɦ': 'h',\n    'ẖ': 'h',\n    'ħ': 'h',\n    'ƕ': 'hv',\n    'í': 'i',\n    'ĭ': 'i',\n    'ǐ': 'i',\n    'î': 'i',\n    'ï': 'i',\n    'ḯ': 'i',\n    'ị': 'i',\n    'ȉ': 'i',\n    'ì': 'i',\n    'ỉ': 'i',\n    'ȋ': 'i',\n    'ī': 'i',\n    'į': 'i',\n    'ᶖ': 'i',\n    'ɨ': 'i',\n    'ĩ': 'i',\n    'ḭ': 'i',\n    'ꝺ': 'd',\n    'ꝼ': 'f',\n    'ᵹ': 'g',\n    'ꞃ': 'r',\n    'ꞅ': 's',\n    'ꞇ': 't',\n    'ꝭ': 'is',\n    'ǰ': 'j',\n    'ĵ': 'j',\n    'ʝ': 'j',\n    'ɉ': 'j',\n    'ḱ': 'k',\n    'ǩ': 'k',\n    'ķ': 'k',\n    'ⱪ': 'k',\n    'ꝃ': 'k',\n    'ḳ': 'k',\n    'ƙ': 'k',\n    'ḵ': 'k',\n    'ᶄ': 'k',\n    'ꝁ': 'k',\n    'ꝅ': 'k',\n    'ĺ': 'l',\n    'ƚ': 'l',\n    'ɬ': 'l',\n    'ľ': 'l',\n    'ļ': 'l',\n    'ḽ': 'l',\n    'ȴ': 'l',\n    'ḷ': 'l',\n    'ḹ': 'l',\n    'ⱡ': 'l',\n    'ꝉ': 'l',\n    'ḻ': 'l',\n    'ŀ': 'l',\n    'ɫ': 'l',\n    'ᶅ': 'l',\n    'ɭ': 'l',\n    'ł': 'l',\n    'ǉ': 'lj',\n    'ſ': 's',\n    'ẜ': 's',\n    'ẛ': 's',\n    'ẝ': 's',\n    'ḿ': 'm',\n    'ṁ': 'm',\n    'ṃ': 'm',\n    'ɱ': 'm',\n    'ᵯ': 'm',\n    'ᶆ': 'm',\n    'ń': 'n',\n    'ň': 'n',\n    'ņ': 'n',\n    'ṋ': 'n',\n    'ȵ': 'n',\n    'ṅ': 'n',\n    'ṇ': 'n',\n    'ǹ': 'n',\n    'ɲ': 'n',\n    'ṉ': 'n',\n    'ƞ': 'n',\n    'ᵰ': 'n',\n    'ᶇ': 'n',\n    'ɳ': 'n',\n    'ñ': 'n',\n    'ǌ': 'nj',\n    'ó': 'o',\n    'ŏ': 'o',\n    'ǒ': 'o',\n    'ô': 'o',\n    'ố': 'o',\n    'ộ': 'o',\n    'ồ': 'o',\n    'ổ': 'o',\n    'ỗ': 'o',\n    'ö': 'o',\n    'ȫ': 'o',\n    'ȯ': 'o',\n    'ȱ': 'o',\n    'ọ': 'o',\n    'ő': 'o',\n    'ȍ': 'o',\n    'ò': 'o',\n    'ỏ': 'o',\n    'ơ': 'o',\n    'ớ': 'o',\n    'ợ': 'o',\n    'ờ': 'o',\n    'ở': 'o',\n    'ỡ': 'o',\n    'ȏ': 'o',\n    'ꝋ': 'o',\n    'ꝍ': 'o',\n    'ⱺ': 'o',\n    'ō': 'o',\n    'ṓ': 'o',\n    'ṑ': 'o',\n    'ǫ': 'o',\n    'ǭ': 'o',\n    'ø': 'o',\n    'ǿ': 'o',\n    'õ': 'o',\n    'ṍ': 'o',\n    'ṏ': 'o',\n    'ȭ': 'o',\n    'ƣ': 'oi',\n    'ꝏ': 'oo',\n    'ɛ': 'e',\n    'ᶓ': 'e',\n    'ɔ': 'o',\n    'ᶗ': 'o',\n    'ȣ': 'ou',\n    'ṕ': 'p',\n    'ṗ': 'p',\n    'ꝓ': 'p',\n    'ƥ': 'p',\n    'ᵱ': 'p',\n    'ᶈ': 'p',\n    'ꝕ': 'p',\n    'ᵽ': 'p',\n    'ꝑ': 'p',\n    'ꝙ': 'q',\n    'ʠ': 'q',\n    'ɋ': 'q',\n    'ꝗ': 'q',\n    'ŕ': 'r',\n    'ř': 'r',\n    'ŗ': 'r',\n    'ṙ': 'r',\n    'ṛ': 'r',\n    'ṝ': 'r',\n    'ȑ': 'r',\n    'ɾ': 'r',\n    'ᵳ': 'r',\n    'ȓ': 'r',\n    'ṟ': 'r',\n    'ɼ': 'r',\n    'ᵲ': 'r',\n    'ᶉ': 'r',\n    'ɍ': 'r',\n    'ɽ': 'r',\n    'ↄ': 'c',\n    'ꜿ': 'c',\n    'ɘ': 'e',\n    'ɿ': 'r',\n    'ś': 's',\n    'ṥ': 's',\n    'š': 's',\n    'ṧ': 's',\n    'ş': 's',\n    'ŝ': 's',\n    'ș': 's',\n    'ṡ': 's',\n    'ṣ': 's',\n    'ṩ': 's',\n    'ʂ': 's',\n    'ᵴ': 's',\n    'ᶊ': 's',\n    'ȿ': 's',\n    'ɡ': 'g',\n    'ᴑ': 'o',\n    'ᴓ': 'o',\n    'ᴝ': 'u',\n    'ť': 't',\n    'ţ': 't',\n    'ṱ': 't',\n    'ț': 't',\n    'ȶ': 't',\n    'ẗ': 't',\n    'ⱦ': 't',\n    'ṫ': 't',\n    'ṭ': 't',\n    'ƭ': 't',\n    'ṯ': 't',\n    'ᵵ': 't',\n    'ƫ': 't',\n    'ʈ': 't',\n    'ŧ': 't',\n    'ᵺ': 'th',\n    'ɐ': 'a',\n    'ᴂ': 'ae',\n    'ǝ': 'e',\n    'ᵷ': 'g',\n    'ɥ': 'h',\n    'ʮ': 'h',\n    'ʯ': 'h',\n    'ᴉ': 'i',\n    'ʞ': 'k',\n    'ꞁ': 'l',\n    'ɯ': 'm',\n    'ɰ': 'm',\n    'ᴔ': 'oe',\n    'ɹ': 'r',\n    'ɻ': 'r',\n    'ɺ': 'r',\n    'ⱹ': 'r',\n    'ʇ': 't',\n    'ʌ': 'v',\n    'ʍ': 'w',\n    'ʎ': 'y',\n    'ꜩ': 'tz',\n    'ú': 'u',\n    'ŭ': 'u',\n    'ǔ': 'u',\n    'û': 'u',\n    'ṷ': 'u',\n    'ü': 'u',\n    'ǘ': 'u',\n    'ǚ': 'u',\n    'ǜ': 'u',\n    'ǖ': 'u',\n    'ṳ': 'u',\n    'ụ': 'u',\n    'ű': 'u',\n    'ȕ': 'u',\n    'ù': 'u',\n    'ủ': 'u',\n    'ư': 'u',\n    'ứ': 'u',\n    'ự': 'u',\n    'ừ': 'u',\n    'ử': 'u',\n    'ữ': 'u',\n    'ȗ': 'u',\n    'ū': 'u',\n    'ṻ': 'u',\n    'ų': 'u',\n    'ᶙ': 'u',\n    'ů': 'u',\n    'ũ': 'u',\n    'ṹ': 'u',\n    'ṵ': 'u',\n    'ᵫ': 'ue',\n    'ꝸ': 'um',\n    'ⱴ': 'v',\n    'ꝟ': 'v',\n    'ṿ': 'v',\n    'ʋ': 'v',\n    'ᶌ': 'v',\n    'ⱱ': 'v',\n    'ṽ': 'v',\n    'ꝡ': 'vy',\n    'ẃ': 'w',\n    'ŵ': 'w',\n    'ẅ': 'w',\n    'ẇ': 'w',\n    'ẉ': 'w',\n    'ẁ': 'w',\n    'ⱳ': 'w',\n    'ẘ': 'w',\n    'ẍ': 'x',\n    'ẋ': 'x',\n    'ᶍ': 'x',\n    'ý': 'y',\n    'ŷ': 'y',\n    'ÿ': 'y',\n    'ẏ': 'y',\n    'ỵ': 'y',\n    'ỳ': 'y',\n    'ƴ': 'y',\n    'ỷ': 'y',\n    'ỿ': 'y',\n    'ȳ': 'y',\n    'ẙ': 'y',\n    'ɏ': 'y',\n    'ỹ': 'y',\n    'ź': 'z',\n    'ž': 'z',\n    'ẑ': 'z',\n    'ʑ': 'z',\n    'ⱬ': 'z',\n    'ż': 'z',\n    'ẓ': 'z',\n    'ȥ': 'z',\n    'ẕ': 'z',\n    'ᵶ': 'z',\n    'ᶎ': 'z',\n    'ʐ': 'z',\n    'ƶ': 'z',\n    'ɀ': 'z',\n    'ﬀ': 'ff',\n    'ﬃ': 'ffi',\n    'ﬄ': 'ffl',\n    'ﬁ': 'fi',\n    'ﬂ': 'fl',\n    'ĳ': 'ij',\n    'œ': 'oe',\n    'ﬆ': 'st',\n    'ₐ': 'a',\n    'ₑ': 'e',\n    'ᵢ': 'i',\n    'ⱼ': 'j',\n    'ₒ': 'o',\n    'ᵣ': 'r',\n    'ᵤ': 'u',\n    'ᵥ': 'v',\n    'ₓ': 'x',\n    'Ё': 'YO',\n    'Й': 'I',\n    'Ц': 'TS',\n    'У': 'U',\n    'К': 'K',\n    'Е': 'E',\n    'Н': 'N',\n    'Г': 'G',\n    'Ш': 'SH',\n    'Щ': 'SCH',\n    'З': 'Z',\n    'Х': 'H',\n    'Ъ': \"'\",\n    'ё': 'yo',\n    'й': 'i',\n    'ц': 'ts',\n    'у': 'u',\n    'к': 'k',\n    'е': 'e',\n    'н': 'n',\n    'г': 'g',\n    'ш': 'sh',\n    'щ': 'sch',\n    'з': 'z',\n    'х': 'h',\n    'ъ': \"'\",\n    'Ф': 'F',\n    'Ы': 'I',\n    'В': 'V',\n    'А': 'a',\n    'П': 'P',\n    'Р': 'R',\n    'О': 'O',\n    'Л': 'L',\n    'Д': 'D',\n    'Ж': 'ZH',\n    'Э': 'E',\n    'ф': 'f',\n    'ы': 'i',\n    'в': 'v',\n    'а': 'a',\n    'п': 'p',\n    'р': 'r',\n    'о': 'o',\n    'л': 'l',\n    'д': 'd',\n    'ж': 'zh',\n    'э': 'e',\n    'Я': 'Ya',\n    'Ч': 'CH',\n    'С': 'S',\n    'М': 'M',\n    'И': 'I',\n    'Т': 'T',\n    'Ь': \"'\",\n    'Б': 'B',\n    'Ю': 'YU',\n    'я': 'ya',\n    'ч': 'ch',\n    'с': 's',\n    'м': 'm',\n    'и': 'i',\n    'т': 't',\n    'ь': \"'\",\n    'б': 'b',\n    'ю': 'yu'\n  };\n\n  return latinize;\n});\n\n",
    "var cConfig = {\r\n    MaxConnectionFailure: 50,\r\n    AmountRoundingThreshold: 10\r\n};\r\n\r\nvar cTileLayout = {\r\n    FourTilesContainerMinWidth: 1024\r\n};\r\n\r\nvar cKeyCode = {\r\n    CtrlEnter: 10,\r\n    Enter: 13\r\n};\r\n\r\nvar cTextMarks = {\r\n    Ltr: '\\u200E',\r\n    ZeroWidthNoBreakSpace: '\\uFEFF'\r\n};\r\n\r\nvar cEmptyRate = '.....';\r\n\r\nvar cArabicChars = /[\\u0590-\\u05FF\\u0600-\\u06FF\\u0750-\\u077F\\uFB50-\\uFC3F\\uFE70-\\uFEFC]/;\r\n\ndefine(\"fxnet/common/constants/consts/Const\", function(){});\n\n",
    "require.config({\r\n\tshim: {\r\n\t\tProChart_Loader: {\r\n\t\t\texports: \"ProChart_Loader\",\r\n\t\t},\r\n\t\t\"handlers/Logger\": {\r\n\t\t\tdeps: [\"dataaccess/dalCommon\"],\r\n\t\t\texports: \"Logger\",\r\n\t\t\tinit: function (dc) {\r\n\t\t\t\treturn this.Logger(dc);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"handlers/Ajaxer\": {\r\n\t\t\tdeps: [\"Q\", \"handlers/AjaxError\", \"global/UrlResolver\"],\r\n\t\t\texports: \"TAjaxer\",\r\n\t\t\tinit: function (q) {\r\n\t\t\t\tQ = q;\r\n\t\t\t\treturn this.TAjaxer;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"handlers/SyncRequestHelper\": {\r\n\t\t\texports: \"SyncRequestHelper\",\r\n\t\t\tdeps: [\"global/UrlResolver\"],\r\n\t\t\tinit: function (q) {\r\n\t\t\t\tQ = q;\r\n\t\t\t\treturn this.SyncRequestHelper;\r\n\t\t\t},\r\n\t\t},\r\n\t\tjquery: {\r\n\t\t\tdeps: [\"vendor/jquery-3.5.1\"],\r\n\t\t\texports: \"jquery\",\r\n\t\t},\r\n\t\tjqueryMigrate: {\r\n\t\t\tdeps: [\"vendor/jquery-migrate-3.3.1\"],\r\n\t\t\texports: \"jquery\",\r\n\t\t},\r\n\t\t\"vendor/jquery.history\": {\r\n\t\t\tdeps: [\"jquery\"],\r\n\t\t\texports: \"History\",\r\n\t\t},\r\n\t\t\"vendor/jquery-ui\": {\r\n\t\t\tdeps: [\"jquery\"],\r\n\t\t\texports: \"jquery\",\r\n\t\t},\r\n\t\t\"vendor/knockout.validation\": {\r\n\t\t\tdeps: [\"knockout\", \"JSONHelper\"],\r\n\t\t\texports: \"ko\",\r\n\t\t},\r\n\t\t\"vendor/knockout-postbox\": {\r\n\t\t\tdeps: [\"knockout\"],\r\n\t\t\texports: \"ko\",\r\n\t\t},\r\n\t\t\"vendor/jquery.validate\": {\r\n\t\t\tdeps: [\"jquery\"],\r\n\t\t\texports: \"jquery\",\r\n\t\t},\r\n\t\t\"vendor/jquery.validate.unobtrusive\": {\r\n\t\t\tdeps: [\"jquery\", \"vendor/jquery.validate\"],\r\n\t\t\texports: \"jquery\",\r\n\t\t},\r\n\t\t\"vendor/jquery.numeric\": {\r\n\t\t\tdeps: [\"jquery\"],\r\n\t\t\texports: \"jquery\",\r\n\t\t},\r\n\t\t\"helpers/ObservableHashTable\": {\r\n\t\t\tdeps: [\"knockout\", \"helpers/KOExtensions\"],\r\n\t\t\texports: \"ObservableHashTable\",\r\n\t\t\tinit: function () {\r\n\t\t\t\treturn this.ObservableHashTable;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"helpers/observabledataset\": {\r\n\t\t\tdeps: [\"knockout\", \"JSONHelper\", \"helpers/ObservableHashTable\"],\r\n\t\t\texports: \"ObservableDataSet\",\r\n\t\t\tinit: function () {\r\n\t\t\t\treturn this.ObservableDataSet;\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t\"dataaccess/dalAccountingActions\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\", \"handlers/general\", \"handlers/Ajaxer\"],\r\n\t\t\texports: \"TDALAccountingActions\",\r\n\t\t\tinit: function (em, general) {\r\n\t\t\t\treturn this.TDALAccountingActions(em, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalWithdrawal\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\", \"handlers/general\"],\r\n\t\t\texports: \"TDALWithdrawal\",\r\n\t\t\tinit: function (em, general) {\r\n\t\t\t\treturn this.TDALWithdrawal(em, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalNotificationData\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\"],\r\n\t\t\texports: \"TDALNotificationData\",\r\n\t\t\tinit: function (em) {\r\n\t\t\t\treturn this.TDALNotificationData(em);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalInitialData\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\"],\r\n\t\t\texports: \"TDALInitialData\",\r\n\t\t\tinit: function (em) {\r\n\t\t\t\treturn this.TDALInitialData(em);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalActivityLog\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\", \"handlers/general\"],\r\n\t\t\texports: \"dalActivityLog\",\r\n\t\t\tinit: function (em, general) {\r\n\t\t\t\treturn this.dalActivityLog(em, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalTransactionsReport\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\", \"handlers/general\"],\r\n\t\t\texports: \"dalTransactionsReport\",\r\n\t\t\tinit: function (em, general) {\r\n\t\t\t\treturn this.dalTransactionsReport(em, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalTutorials\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\", \"handlers/general\"],\r\n\t\t\texports: \"TDALTutorials\",\r\n\t\t\tinit: function (em, general) {\r\n\t\t\t\treturn this.TDALTutorials(em, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalTradingSignals\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\", \"handlers/general\"],\r\n\t\t\texports: \"TDALTradingSignals\",\r\n\t\t\tinit: function (em, general) {\r\n\t\t\t\treturn this.TDALTradingSignals(em, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalClosedDeals\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\", \"handlers/general\"],\r\n\t\t\texports: \"TDALClosedDeals\",\r\n\t\t\tinit: function (em, general) {\r\n\t\t\t\treturn this.TDALClosedDeals(em, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalRetention\": {\r\n\t\t\tdeps: [\"generalmanagers/ErrorManager\"],\r\n\t\t\texports: \"TDALRetention\",\r\n\t\t\tinit: function (em) {\r\n\t\t\t\treturn this.TDALRetention(em);\r\n\t\t\t},\r\n\t\t},\r\n\t\tCreditCardManager: {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"knockout\",\r\n\t\t\t\t\"handlers/HashTable\",\r\n\t\t\t\t\"helpers/ObservableHashTable\",\r\n\t\t\t\t\"CreditCard\",\r\n\t\t\t\t\"FxNet/LogicLayer/Deposit/CreditCard/CreditCardView\",\r\n\t\t\t],\r\n\t\t\texports: \"TCreditCardManager\",\r\n\t\t\tinit: function (ko, obs, ht) {\r\n\t\t\t\treturn this.TCreditCardManager(ko, obs, ht);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"FxNet/LogicLayer/Deposit/CreditCard/CreditCardView\": {\r\n\t\t\texports: \"TCreditCardView\",\r\n\t\t},\r\n\t\t\"tracking/EventsCollector\": {\r\n\t\t\tdeps: [\"knockout\", \"trackingIntExt/TrackingEvents\"],\r\n\t\t\texports: \"TrackingEventsCollector\",\r\n\t\t\tinit: function (ko, te) {\r\n\t\t\t\tvar trackingEventsCollector = this.TrackingEventsCollector(ko, te, false);\r\n\t\t\t\treturn trackingEventsCollector;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"trackingIntExt/TradingEventsHandler\": {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"knockout\",\r\n\t\t\t\t\"trackingIntExt/TrackingData\",\r\n\t\t\t\t\"devicemanagers/ViewModelsManager\",\r\n\t\t\t\t\"handlers/general\",\r\n\t\t\t\t\"tracking/EventsCollector\",\r\n\t\t\t],\r\n\t\t\texports: \"TradingEventsHandler\",\r\n\t\t\tinit: function (ko, td, vm, ge, ec) {\r\n\t\t\t\treturn this.TradingEventsHandler(ko, td, vm, ge, ec);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"viewmodels/QuotesViewModel\": {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"knockout\",\r\n\t\t\t\t\"viewmodels/ViewModelBase\",\r\n\t\t\t\t\"handlers/general\",\r\n\t\t\t\t\"global/debounce\",\r\n\t\t\t\t\"Dictionary\",\r\n\t\t\t\t\"cachemanagers/QuotesManager\",\r\n\t\t\t\t\"modules/FavoriteInstrumentsManager\",\r\n\t\t\t\t\"managers/instrumentTranslationsManager\",\r\n\t\t\t\t\"modules/permissionsmodule\",\r\n\t\t\t\t\"handlers/Delegate\",\r\n\t\t\t\t\"devicemanagers/AlertsManager\",\r\n        \"cachemanagers/PortfolioStaticManager\",\r\n\t\t\t\t\"vendor/knockout-sortable\",\r\n\t\t\t\t\"enums/enums\",\r\n\t\t\t],\r\n\t\t\texports: \"QuotesViewModel\",\r\n\t\t\tinit: function (ko, vmb, gen, deb, dct, qtm, fim, itm, pm, deg, am, pfm) {\r\n\t\t\t\treturn this.QuotesViewModel(ko, vmb, gen, deb, dct, qtm, fim, itm, pm, deg, am, pfm);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"handlers/Cookie\": {\r\n\t\t\tdeps: [],\r\n\t\t\texports: \"CookieHandler\",\r\n\t\t},\r\n\t\t\"handlers/general\": {\r\n\t\t\tdeps: [],\r\n\t\t\texports: \"General\",\r\n\t\t\tinit: function () {\r\n\t\t\t\treturn this.General;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"deposit/DepositCurrency\": {\r\n\t\t\tdeps: [],\r\n\t\t\texports: \"TDepositCurrency\",\r\n\t\t\tinit: function () {\r\n\t\t\t\treturn this.TDepositCurrency;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"handlers/AmountConverter\": {\r\n\t\t\tdeps: [],\r\n\t\t\texports: \"AmountConverter\",\r\n\t\t\tinit: function () {\r\n\t\t\t\treturn this.AmountConverter;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalcustomer\": {\r\n\t\t\tdeps: [\"handlers/Ajaxer\", \"JSONHelper\", \"handlers/general\"],\r\n\t\t\texports: \"TDALCustomer\",\r\n\t\t\tinit: function (Ajaxer, jsonhelper, general) {\r\n\t\t\t\treturn this.TDALCustomer(jsonhelper, general);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t\"dataaccess/dalMarketState\": {\r\n\t\t\tdeps: [\"handlers/Ajaxer\", \"JSONHelper\", \"handlers/general\"],\r\n\t\t\texports: \"TDALMarketState\",\r\n\t\t\tinit: function (Ajaxer, jsonhelper, general) {\r\n\t\t\t\treturn this.TDALMarketState(jsonhelper, general);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalDemoAccount\": {\r\n\t\t\tdeps: [\"handlers/Ajaxer\", \"JSONHelper\"],\r\n\t\t\texports: \"TDALDemoAccount\",\r\n\t\t\tinit: function (Ajaxer, jsonhelper) {\r\n\t\t\t\treturn this.TDALDemoAccount(jsonhelper);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"dataaccess/dalInstruments\": {\r\n\t\t\tdeps: [\"handlers/Ajaxer\", \"JSONHelper\", \"handlers/general\", \"handlers/Logger\"],\r\n\t\t\texports: \"TDALInstruments\",\r\n\t\t\tinit: function (ajaxer, jsonHelper, general, logger) {\r\n\t\t\t\tvar ajx = new ajaxer();\r\n\t\t\t\treturn this.TDALInstruments(ajx, jsonHelper, general, logger);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"viewmodels/HeaderViewModel\": {\r\n\t\t\tdeps: [\"knockout\", \"modules/permissionsmodule\"],\r\n\t\t\texports: \"HeaderViewModel\",\r\n\t\t\tinit: function (ko, pm) {\r\n\t\t\t\treturn this.HeaderViewModel(pm);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"viewmodels/ViewAndPrintWithdrawalViewModel\": {\r\n\t\t\tdeps: [\"knockout\", \"viewmodels/ViewModelBase\", \"handlers/general\"],\r\n\t\t\texports: \"ViewAndPrintWithdrawalViewModel\",\r\n\t\t\tinit: function (ko, vmb, gen) {\r\n\t\t\t\treturn this.ViewAndPrintWithdrawalViewModel(ko, vmb, gen);\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t\"viewmodels/AccountMarketViewModel\": {\r\n\t\t\tdeps: [\"knockout\"],\r\n\t\t\texports: \"AccountMarketViewModel\",\r\n\t\t\tinit: function (ko) {\r\n\t\t\t\treturn this.AccountMarketViewModel(ko);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"viewmodels/ActivityLogViewModel\": {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"helpers/ObservableCustomExtender\",\r\n\t\t\t\t\"handlers/general\",\r\n\t\t\t\t\"dataaccess/dalActivityLog\",\r\n\t\t\t\t\"modules/systeminfo\",\r\n\t\t\t\t\"helpers/KOExtensions\",\r\n\t\t\t],\r\n\t\t\texports: \"ActivityLogViewModel\",\r\n\t\t\tinit: function (ko, general, dag, si) {\r\n\t\t\t\treturn this.ActivityLogViewModel(ko, general, dag, si);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"viewmodels/TradingSignalsTutorialsViewModel\": {\r\n\t\t\tdeps: [\"knockout\", \"viewmodels/ViewModelBase\", \"handlers/general\"],\r\n\t\t\texports: \"TradingSignalsTutorialsViewModel\",\r\n\t\t\tinit: function (ko, vmb, gen) {\r\n\t\t\t\treturn this.TradingSignalsTutorialsViewModel(ko, vmb, gen);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"viewmodels/SmartBannerViewModel\": {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"knockout\",\r\n\t\t\t\t\"handlers/general\",\r\n\t\t\t\t\"handlers/HashTable\",\r\n\t\t\t\t\"helpers/ObservableHashTable\",\r\n\t\t\t\t\"customEnums/ViewsEnums\",\r\n\t\t\t],\r\n\t\t\texports: \"SmartBannerViewModel\",\r\n\t\t\tinit: function (ko, general, ht, oht) {\r\n\t\t\t\treturn this.SmartBannerViewModel(ko, general, oht);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"viewmodels/CountDownModel\": {\r\n\t\t\tdeps: [\"knockout\"],\r\n\t\t\texports: \"CountDownModel\",\r\n\t\t\tinit: function (ko) {\r\n\t\t\t\treturn this.CountDownModel(ko);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"managers/PopupInNewWindowManager\": {\r\n\t\t\texports: \"PopupInNewWindowManager\",\r\n\t\t},\r\n\t\t\"global/apiIM\": {\r\n\t\t\tdeps: [\"jquery\"],\r\n\t\t\texports: \"apiIM\",\r\n\t\t\tinit: function (jquery) {\r\n\t\t\t\treturn this.apiIM(jquery);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"vendor/jcf.selectModule\": {\r\n\t\t\tdeps: [\"vendor/jcf\"],\r\n\t\t\texports: \"jcf.modules.Select\",\r\n\t\t\tinit: function (jcf) {\r\n\t\t\t\treturn this.jcfselect(jcf);\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"calculators/LimitValuesCalculator\": {\r\n\t\t\tdeps: [\"handlers/AmountConverter\"],\r\n\t\t\texports: \"LimitValuesCalculator\",\r\n\t\t\tinit: function () {\r\n\t\t\t\treturn this.LimitValuesCalculator;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"calculators/LimitRangeCalculator\": {\r\n\t\t\tdeps: [\"enums/enums\"],\r\n\t\t\texports: \"LimitRangesCalculator\",\r\n\t\t\tinit: function () {\r\n\t\t\t\treturn this.LimitRangesCalculator;\r\n\t\t\t},\r\n\t\t},\r\n\t\t\"enums/alertenums\": {\r\n\t\t\texports: \"AlertTypes\",\r\n\t\t},\r\n\t\t\"enums/enums\": {\r\n\t\t\texports: \"eDepositingActionType\",\r\n\t\t},\r\n\t\t\"global/swipe\": {\r\n\t\t\texports: \"swipe\",\r\n\t\t},\r\n\t\t\"vendor/globalize\": {\r\n\t\t\texports: \"Globalize\",\r\n\t\t},\r\n\t\t\"fx-core-api/StoreAPI\": {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"fx-core-api/core.runtime\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~KoBindings~StoreAPI\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~StoreAPI\",\r\n\t\t\t\t\"fx-core-api/vendors~StoreAPI\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~KoBindings\",\r\n\t\t\t\t\"fx-core-api/vendors~Components\",\r\n\t\t\t],\r\n\t\t\texports: \"Core.StoreAPI\",\r\n\t\t},\r\n\t\t\"fx-core-api/Components\": {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"fx-core-api/core.runtime\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~KoBindings~StoreAPI\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~KoBindings\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~StoreAPI\",\r\n\t\t\t\t\"fx-core-api/vendors~Components\",\r\n\t\t\t],\r\n\t\t\texports: \"Core.Components\",\r\n\t\t},\r\n\t\t\"fx-core-api/KoBindings\": {\r\n\t\t\tdeps: [\r\n\t\t\t\t\"fx-core-api/core.runtime\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~KoBindings~StoreAPI\",\r\n\t\t\t\t\"fx-core-api/vendors~Components~KoBindings\",\r\n\t\t\t],\r\n\t\t\texports: \"Core.KoBindings\",\r\n\t\t},\r\n\t\t\"Global/RevealPassword\": {\r\n\t\t\tdeps: [],\r\n\t\t\texports: \"RevealPassword\",\r\n\t\t},\r\n\t\t\"devicehelpers/adjustUiPerDevice\": {\r\n\t\t\tdeps: [],\r\n\t\t\texports: \"adjustUiPerDevice\",\r\n\t\t},\r\n\t\t\"Registration/Common/CustomerValidators\": {\r\n\t\t\tdeps: [\"vendor/jquery.validate\", \"vendor/jquery.validate.unobtrusive\"],\r\n\t\t\texports: \"CustomerValidators\",\r\n\t\t},\r\n\t\t\"handlers/limit\": {\r\n\t\t\tdeps: [],\r\n\t\t\texports: \"TLimit\",\r\n\t\t},\r\n\t},\r\n\t//name: \"fxnet/devices/mobile/configuration/startRequire\",\r\n\t//out: \"../../assets/20200413222717/js/main-built.mobile.js\",\r\n\tdeps: [\r\n\t\t\"vendor/knockout-postbox\",\r\n\t\t\"vendor/jquery.validate\",\r\n\t\t\"vendor/jquery.validate.unobtrusive\",\r\n\t\t\"vendor/jquery.numeric\",\r\n\t\t\"vendor/jquery-migrate-3.3.1\",\r\n\t\t\"helpers/ObservableCustomExtender\",\r\n\t\t\"extensions/Object\",\r\n\t\t\"extensions/Array\",\r\n\t\t\"extensions/Date\",\r\n\t\t\"extensions/String\",\r\n\t\t\"extensions/Number\",\r\n\t\t\"handlers/format\",\r\n\t\t\"handlers/general\",\r\n\t\t\"tracking/EventRaiser\",\r\n\t\t\"tracking/EventsCollector\",\r\n\t\t\"tracking/PerformanceDataCollector\",\r\n\t\t\"tracking/TrackingCommonData\",\r\n\t\t// Browser should be refactored into r.js - very few dependencies\r\n\t\t\"global/browser\",\r\n\t\t\"global/apiIM\",\r\n\t\t\"vendor/latinize\",\r\n\t\t\"enums/DataMembersPositions\",\r\n\t\t\"fxnet/common/constants/consts/Const\",\r\n\t],\r\n});\r\n\ndefine(\"fxnet/common/config/common.config\", function(){});\n\n",
    "define('fxnet/devices/mobile/configuration/require.config',[\"require\", \"modules/environmentData\", \"global/UrlResolver\", \"fxnet/common/config/common.config\"], function (\r\n\trequire\r\n) {\r\n\treturn function () {\r\n\t\tvar environmentData = require(\"modules/environmentData\").get(),\r\n\t\t\tUrlResolver = require(\"global/UrlResolver\"),\r\n\t\t\tappRelativePath = UrlResolver.getApplicationRelativePath(),\r\n\t\t\tstaticFilePath = UrlResolver.getStaticFilePath(),\r\n\t\t\tversion = \"v=\" + (environmentData.version || window.version || \"\");\r\n\r\n\t\t//coreAssetsConfig = require(\"fxnet/CoreAssetsConfig\");\r\n\t\t// var coreAssetsPaths = coreAssetsConfig.generatePaths('https://127.0.0.1:9000/');\r\n\t\t//var coreAssetsPaths = coreAssetsConfig.generatePaths(assestPath + \"/js/fx-core-api/\");\r\n\t\t//var shim = coreAssetsConfig.shim;\r\n\r\n\t\tvar coreAssetsPaths = {};\r\n\r\n\t\tvar baseConfig = {\r\n\t\t\tonNodeCreated: function (node) {\r\n\t\t\t\tnode.setAttribute(\"crossorigin\", \"anonymous\");\r\n\t\t\t},\r\n\t\t\turlArgs: version,\r\n\t\t\tbaseUrl: UrlResolver.combine(UrlResolver.getStaticJSPath(), \"scripts\"),\r\n\t\t\tconfig: {\r\n\t\t\t\ttext: {\r\n\t\t\t\t\tuseXhr: function () {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\tmap: {\r\n\t\t\t\t\"*\": {\r\n\t\t\t\t\tjquery: \"vendor/jquery-3.5.1\",\r\n\t\t\t\t\t\"vendor/jquery.signalR\": \"vendor/jquery.signalR-2.2.2.2\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tpaths: generatePath(),\r\n\t\t\twaitSeconds: 0,\r\n\t\t};\r\n\r\n\t\tfunction generatePath() {\r\n\t\t\tvar corePath = {\r\n\t\t\t\tknockout: \"vendor/knockout-3.5.1\",\r\n\t\t\t\tQ: \"vendor/q\",\r\n\t\t\t\tmanagers: \"fxnet/uilayer/managers\",\r\n\t\t\t\tdevicemanagers: \"fxnet/devices/mobile/uilayer/managers\",\r\n\t\t\t\twidgets: \"fxnet/uilayer/objects\",\r\n\t\t\t\tdevicewidgets: \"fxnet/devices/mobile/uilayer/objects\",\r\n\t\t\t\tgeneralmanagers: \"fxnet/LogicLayer/GeneralManager\",\r\n\t\t\t\tcachemanagers: \"fxnet/logiclayer/cachemanagers\",\r\n\t\t\t\tcalculators: \"fxnet/LogicLayer/LimitCalculator\",\r\n\t\t\t\tuserflow: \"fxnet/logiclayer/userflows\",\r\n\t\t\t\twithdrawal: \"fxnet/logiclayer/withdrawal\",\r\n\t\t\t\tmodules: \"fxnet/uilayer/modules\",\r\n\t\t\t\tcurrentAppFolder: \"fxnet/devices/mobile\",\r\n\t\t\t\tLoadDictionaryContent: \"fxnet/uilayer/modules/LoadDictionaryContent\",\r\n\t\t\t\tviewmodels: \"fxnet/uilayer/viewmodels\",\r\n\t\t\t\tdeviceviewmodels: \"fxnet/devices/mobile/uilayer/viewmodels\",\r\n\t\t\t\tdeviceviews: \"fxnet/devices/mobile/uilayer/views\",\r\n\t\t\t\tdevicecustommodules: \"fxnet/devices/mobile/modules\",\r\n\t\t\t\tpayments: \"fxnet/uilayer/viewmodels/payments\",\r\n\t\t\t\tDictionary: \"fxnet/LogicLayer/GeneralManager/Dictionary\",\r\n\t\t\t\tJSONHelper: \"fxnet/common/utils/handlers/jsonhelper\",\r\n\t\t\t\tdataaccess: \"fxnet/dataaccesslayer\",\r\n\t\t\t\tdevicealerts: \"fxnet/devices/mobile/uilayer/alerts\",\r\n\t\t\t\tinitdatamanagers: \"fxnet/logiclayer/initialdatamanagers\",\r\n\t\t\t\tconfiguration: \"fxnet/devices/mobile/configuration\",\r\n\t\t\t\talerts: \"fxnet/uilayer/alerts\",\r\n\t\t\t\thandlers: \"fxnet/common/utils/handlers\",\r\n\t\t\t\thelpers: \"fxnet/uilayer/uilayerhelpers\",\r\n\t\t\t\tdevicehelpers: \"fxnet/devices/mobile/uilayer/uilayerhelpers\",\r\n\t\t\t\tStateObject: \"fxnet/uilayer/modules/StateObject\",\r\n\t\t\t\tdeepLinks: \"fxnet/LogicLayer/DeepLink\",\r\n\t\t\t\tdevicecustomdeeplinks: \"fxnet/devices/mobile/logiclayer/deeplink\",\r\n\t\t\t\textensions: \"fxnet/Common/Utils/Extensions\",\r\n\t\t\t\tenums: \"fxnet/Common/constants/enums\",\r\n\t\t\t\tconstsenums: \"fxnet/common/constants/consts\",\r\n\t\t\t\tcustomEnums: \"fxnet/devices/mobile/enums\",\r\n\t\t\t\tProChart_Loader: \"AdvinionChart/ChartUI/init/prochart.loader.min\",\r\n\t\t\t\ttrackingIntExt: \"tracking/internal\",\r\n\t\t\t\tdeposit: \"fxnet/LogicLayer/Deposit\",\r\n\t\t\t\t\"partial-views\": staticFilePath,\r\n\t\t\t\tcontrollers: appRelativePath,\r\n\t\t\t\tassets: UrlResolver.getAssetsPath(),\r\n\t\t\t\twebHtml: UrlResolver.combine(staticFilePath, \"scripts/fxnet/devices/web/uilayer/views\"),\r\n\t\t\t\tmobileHtml: UrlResolver.combine(staticFilePath, \"scripts/fxnet/devices/mobile/uilayer/views\"),\r\n\t\t\t\thtml: UrlResolver.combine(staticFilePath, \"scripts/fxnet/uilayer/viewmodels\"),\r\n\t\t\t\temily: UrlResolver.combine(UrlResolver.getStaticJSPath(), \"emily\"),\r\n\t\t\t\t\"fx-core-api\": UrlResolver.combine(UrlResolver.getStaticJSPath(), \"fx-core-api\"),\r\n\t\t\t\thtml2canvas: \"vendor/html2canvas.min\",\r\n\t\t\t\tSignaturePad: \"vendor/signature_pad.min\",\r\n\t\t\t};\r\n\r\n\t\t\treturn Object.assign(corePath, coreAssetsPaths);\r\n\t\t}\r\n\t\trequirejs.config(baseConfig);\r\n\t};\r\n});\r\n\n",
    "define(\r\n    'cachemanagers/ClientStateFlagsManager',\r\n    [\r\n        'handlers/Delegate'\r\n    ],\r\n    function TClientStateFlagsManager(delegate) {\r\n        var onChange = new delegate(),\r\n            csFlags = {\r\n                exposureCoverageAlert: '',\r\n                equityAlert: '',\r\n                exposureAlert: '',\r\n                marketState: '',\r\n                systemMode: '',\r\n                limitMultiplier: ''\r\n            };\r\n\r\n        function processData(csflags) {\r\n            if (csflags[eCSFlags.isUpdated]) {\r\n                updateData(csflags);\r\n                onChange.Invoke(csFlags);\r\n            }\r\n        }\r\n\r\n        function updateData(csflags) {\r\n            csFlags.exposureCoverageAlert = csflags[eCSFlags.exposureCoverageAlert];\r\n            csFlags.equityAlert = csflags[eCSFlags.equityAlert];\r\n            csFlags.exposureAlert = csflags[eCSFlags.exposureAlert];\r\n            csFlags.marketState = csflags[eCSFlags.marketState];\r\n            csFlags.systemMode = csflags[eCSFlags.systemMode];\r\n            csFlags.limitMultiplier = csflags[eCSFlags.limitMultiplier];\r\n        }\r\n\r\n        return {\r\n            CSFlags: csFlags,\r\n            OnChange: onChange,\r\n            ProcessData: processData\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\r\n    \"cachemanagers/PortfolioStaticManager\",\r\n    \r\n    [\"handlers/Delegate\"],\r\n    function TPortfolioStaticManager(delegate) {\r\n        var onChange = new delegate(),\r\n            portfolio = {\r\n                maxExposure: 0,\r\n                securities: 0,\r\n                tradingBonus: 0,\r\n                pendingBonus: 0,\r\n                pendingWithdrawals: 0,\r\n                kycStatus: 0,\r\n                amlStatus: 0,\r\n                cddStatus: 0,\r\n                kycReviewStatus: 0,\r\n                isDemo: 0,\r\n                isActive: 0,\r\n                pepStatus: 0,\r\n                pendingBonusType: 0,\r\n                spreadDiscountVolumePercentage: 0\r\n            };\r\n\r\n        function processData(data) {\r\n            updateData(data);\r\n            onChange.Invoke(portfolio);\r\n        }\r\n\r\n        function updateData(data) {\r\n            portfolio.maxExposure = data[ePortfolioStatic.maxExposure];\r\n            portfolio.securities = data[ePortfolioStatic.securities];\r\n            portfolio.tradingBonus = data[ePortfolioStatic.tradingBonus];\r\n            portfolio.pendingBonus = data[ePortfolioStatic.pendingBonus];\r\n            portfolio.kycStatus = data[ePortfolioStatic.kycStatus];\r\n            portfolio.amlStatus = data[ePortfolioStatic.amlStatus];\r\n            portfolio.cddStatus = data[ePortfolioStatic.cddStatus];\r\n            portfolio.kycReviewStatus = data[ePortfolioStatic.kycReviewStatus];\r\n            portfolio.pendingWithdrawals = data[ePortfolioStatic.pendingWithdrawals];\r\n            portfolio.isDemo = data[ePortfolioStatic.isDemo] === 1;\r\n            portfolio.isActive = data[ePortfolioStatic.isActive] === 1;\r\n            portfolio.pepStatus = data[ePortfolioStatic.pepStatus];\r\n            portfolio.pendingBonusType = data[ePortfolioStatic.pendingBonusType];\r\n            portfolio.spreadDiscountVolumePercentage = data[ePortfolioStatic.pendingBonusVolumePercentage];\r\n        }\r\n\r\n        return {\r\n            Portfolio: portfolio,\r\n            OnChange: onChange,\r\n            ProcessData: processData\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'dataaccess/dalCompliance',\r\n    [\r\n        'require',\r\n        'Q',\r\n        'handlers/general',\r\n        'handlers/Ajaxer',\r\n        'JSONHelper'\r\n    ],\r\n    function (require) {\r\n        var Q = require('Q'),\r\n            JSONHelper = require('JSONHelper'),\r\n            general = require('handlers/general'),\r\n            TAjaxer = require('handlers/Ajaxer');\r\n\r\n        function onDalAjaxError(error, callerInfo) {\r\n            //using window. to avoid cyclic failure in r.js\r\n            window.ErrorManager.onError(callerInfo, error.message, eErrorSeverity.medium);\r\n        }\r\n\r\n        function setPepStatus(pepStatus, onLoadComplete) {\r\n            if (!general.isFunctionType(onLoadComplete)) {\r\n                onLoadComplete = general.emptyFn;\r\n            }\r\n\r\n            var ajaxer = new TAjaxer(),\r\n                params = 'dataPep=' + pepStatus;\r\n\r\n            ajaxer.post(\r\n                'TDALRegulation/setPepStatus',\r\n                'Compliance/SetPepComplianceStatus',\r\n                params,\r\n                onLoadComplete,\r\n                function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/setPepStatus', error.message, eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function getPepStatus(onLoadComplete) {\r\n            if (!general.isFunctionType(onLoadComplete)) {\r\n                onLoadComplete = general.emptyFn;\r\n            }\r\n\r\n            var ajaxer = new TAjaxer();\r\n\r\n            ajaxer.jsonPost(\r\n                'TDALRegulation/getPepStatus',\r\n                'Compliance/GetPepComplianceStatus',\r\n                null,\r\n                onLoadComplete,\r\n                function () {\r\n                    window.ErrorManager.onError('DalCompliance/getPepStatus', '', eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function getNotificationsSettings(onLoadComplete) {\r\n            if (!general.isFunctionType(onLoadComplete)) {\r\n                onLoadComplete = general.emptyFn;\r\n            }\r\n\r\n            var ajaxer = new TAjaxer();\r\n\r\n            return ajaxer.promises.get(\r\n                'TDALRegulation/getNotificationsSettings',\r\n                'Compliance/GetNotificationsSettings',\r\n                '',\r\n                onLoadComplete,\r\n                function () {\r\n                    window.ErrorManager.onError('DalCompliance/getNotificationsSettings', '', eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function setNotificationsSettings(notificationsSettings, onLoadComplete) {\r\n            if (!general.isFunctionType(onLoadComplete)) {\r\n                onLoadComplete = general.emptyFn;\r\n            }\r\n\r\n            var params = JSON.stringify(notificationsSettings);\r\n            var ajaxer = new TAjaxer();\r\n\r\n            return ajaxer.promises.jsonPost(\r\n                'TDALRegulation/setNotificationsSettings',\r\n                'Compliance/SetNotificationsSettings',\r\n                params,\r\n                onLoadComplete,\r\n                function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/setNotificationsSettings', error.message, eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function logUploadResult(params, onLoadComplete) {\r\n            var ajaxer = new TAjaxer();\r\n\r\n            ajaxer.jsonPost(\r\n                'TDALCompliance/LogUploadedDocsActionResult',\r\n                'Compliance/LogUploadedDocsActionResult',\r\n                JSON.stringify(params),\r\n                onLoadComplete,\r\n                function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/LogUploadedDocsActionResult', error.message, eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function logUserShouldCompleteCdd(getRequestData) {\r\n            var ajaxer = new TAjaxer();\r\n            var requestData = JSON.stringify(getRequestData());\r\n            var customerFailedAwareUrl = 'compliance/LogUserShouldCompleteCdd';\r\n\r\n            ajaxer.jsonPost(\r\n                'TDALCompliance/LogUserShouldCompleteCdd',\r\n                customerFailedAwareUrl,\r\n                requestData,\r\n                null,\r\n                function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/LogUserShouldCompleteCdd', error.message, eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function getVerificationDocumentUrl(uploadDocType) {\r\n            var ajaxer = new TAjaxer();\r\n\r\n            return ajaxer.promises\r\n                .get('TDALCompliance/getVerificationDocumentUrl', 'Compliance/GetVerificationDocumentUrl?uploadDocType=' + uploadDocType)\r\n                .fail(function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/getVerificationDocumentUrl', error.message, eErrorSeverity.medium);\r\n                });\r\n        }\r\n\r\n        function getUploadDocumentsData() {\r\n            var ajaxer = new TAjaxer();\r\n\r\n            return ajaxer.promises\r\n                .post('TDALCompliance/getUploadDocumentsData', 'Compliance/GetUploadDocumentsData', null)\r\n                .fail(function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/getUploadDocumentsData', error.message, eErrorSeverity.medium);\r\n                });\r\n        }\r\n\r\n        function getDocumentsDataForAccountHub() {\r\n            var ajaxer = new TAjaxer();\r\n\r\n            return ajaxer.promises\r\n                .post('TDALCompliance/getDocumentsDataForAccountHub', 'Compliance/GetDocumentsDataForAccountHub', null)\r\n                .fail(function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/getDocumentsDataForAccountHub', error.message, eErrorSeverity.medium);\r\n                });\r\n        }\r\n\r\n        function getwithdrawalrequeststatus(onLoadComplete) {\r\n            if (!general.isFunctionType(onLoadComplete)) {\r\n                onLoadComplete = general.emptyFn;\r\n            }\r\n\r\n            var ajaxer = new TAjaxer();\r\n\r\n            ajaxer.post(\r\n                'TDALCompliance/getwithdrawalrequeststatus',\r\n                'Compliance/GetWithdrawalRequestStatus',\r\n                null,\r\n                function (result) { onLoadComplete(JSONHelper.STR2JSON('WithdrawalViewModel/onLoadComplete', result, eErrorSeverity.medium)); },\r\n                function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/getwithdrawalrequeststatus', error.message, eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function sendDepositConfirmation(onLoadComplete) {\r\n            if (!general.isFunctionType(onLoadComplete)) {\r\n                onLoadComplete = general.emptyFn;\r\n            }\r\n\r\n            var ajaxer = new TAjaxer();\r\n\r\n            ajaxer.post(\r\n                'TDALCompliance/sendDepositConfirmation',\r\n                'Compliance/SendDepositConfirmation',\r\n                null,\r\n                onLoadComplete,\r\n                function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/SendDepositConfirmation', error.message, eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function sendExposureCoverage(coverage, onLoadComplete) {\r\n            if (!general.isFunctionType(onLoadComplete)) {\r\n                onLoadComplete = general.emptyFn;\r\n            }\r\n\r\n            var ajaxer = new TAjaxer();\r\n\r\n            ajaxer.post(\r\n                'TDALCompliance/SendExposureCoverage',\r\n                'Compliance/SendExposureCoverage',\r\n                coverage.toString(),\r\n                onLoadComplete,\r\n                function (error) {\r\n                    window.ErrorManager.onError('DalCompliance/SendExposureCoverage', error.message, eErrorSeverity.medium);\r\n                }\r\n            );\r\n        }\r\n\r\n        function sendRequestAccess(requestAccessType) {\r\n            var ajaxer = new TAjaxer();\r\n\r\n            return ajaxer.promises\r\n                .jsonPost(\r\n                    'TDALCompliance/RequestAccess',\r\n                    'Compliance/RequestAccess/?' + Math.random(),\r\n                    JSON.stringify({ RequestType: requestAccessType })\r\n                )\r\n                .then(JSON.parse)\r\n                .fail(function (error) {\r\n                    onDalAjaxError(error, 'TDALCompliance/RequestAccess');\r\n                    return Q.reject();\r\n                });\r\n        }\r\n\r\n        return {\r\n            setPepStatus: setPepStatus,\r\n            getPepStatus: getPepStatus,\r\n            logUploadResult: logUploadResult,\r\n            getNotificationsSettings: getNotificationsSettings,\r\n            setNotificationsSettings: setNotificationsSettings,\r\n            logUserShouldCompleteCdd: logUserShouldCompleteCdd,\r\n            getUploadDocumentsData: getUploadDocumentsData,\r\n            getDocumentsDataForAccountHub: getDocumentsDataForAccountHub,\r\n            getwithdrawalrequeststatus: getwithdrawalrequeststatus,\r\n            sendDepositConfirmation: sendDepositConfirmation,\r\n            sendExposureCoverage: sendExposureCoverage,\r\n            sendRequestAccess: sendRequestAccess,\r\n            getVerificationDocumentUrl: getVerificationDocumentUrl\r\n        };\r\n    }\r\n);\n",
    "define(\"helpers/KOExtensions\", ['knockout','handlers/general', 'vendor/knockout-postbox'], function(ko, general){\r\n    ko.observableArray.fn.pushSorted = function(sortPropName, asc, value) {\r\n        var array = this();\r\n        var rawValue = ko.toJS(value[sortPropName]);\r\n        var len = array.length;\r\n        var i = 0;\r\n\r\n        if (len > 0) {\r\n            var current = ko.toJS(array[len - 1][sortPropName]);\r\n            var comparison = general.CompareValues(current, rawValue, asc);\r\n            if (comparison <= 0) {\r\n                this.push(value);\r\n                return len - 1;\r\n            }\r\n\r\n            do {\r\n                current = ko.toJS(array[i][sortPropName]);\r\n                comparison = general.CompareValues(current, rawValue, asc);\r\n                if (comparison >= 0) {\r\n                    this.splice(i, 0, value);\r\n                    return i;\r\n                }\r\n\r\n            } while (i++ < len)\r\n        }\r\n\r\n        this.push(value);\r\n        return i;\r\n    };\r\n\r\n    ko.isObservableArray = function(instance) {\r\n        if (!instance)\r\n            return false;\r\n        return typeof instance[\"remove\"] == \"function\" &&\r\n            typeof instance[\"removeAll\"] == \"function\" &&\r\n            typeof instance[\"destroy\"] == \"function\" &&\r\n            typeof instance[\"destroyAll\"] == \"function\" &&\r\n            typeof instance[\"indexOf\"] == \"function\" &&\r\n            typeof instance[\"replace\"] == \"function\";\r\n    };\r\n\r\n    ko.observableArray.fn.sortByProperty = function(sortPropName, asc) {\r\n        this.sort(function(left, right) {\r\n            var rawLeft = ko.toJS(left[sortPropName]);\r\n            var rawRight = ko.toJS(right[sortPropName]);\r\n            return general.CompareValues(rawLeft, rawRight, asc);\r\n        });\r\n    };\r\n\r\n    ko.utils.updateShallowFrom = function(source, target, trackProperty) {\r\n        var propertyChanged = false;\r\n\r\n        for (var prop in source) {\r\n            if (source.hasOwnProperty(prop)) {\r\n                if (prop in target) {\r\n                    var rawValue = ko.toJS(source[prop]);\r\n                    var needsTracking = typeof(trackProperty) != 'undefined' && prop == trackProperty;\r\n\r\n                    if (ko.isObservable(target[prop])) {\r\n                        if (ko.isWriteableObservable(target[prop])) {\r\n                            if (target[prop]() != rawValue) {\r\n                                propertyChanged = needsTracking;\r\n                                target[prop](rawValue);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (target[prop] != rawValue) {\r\n                            propertyChanged = needsTracking;\r\n                            target[prop] = rawValue;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return propertyChanged;\r\n    };\r\n\r\n    ko.utils.updateDeepFrom = function (source, target, trackProperty) {\r\n        var propertyChanged = false;\r\n\r\n        for (var prop in source) {\r\n            if (source.hasOwnProperty(prop)) {\r\n                if (prop in target) {\r\n                    var rawValue = ko.toJS(source[prop]);\r\n                    var needsTracking = typeof (trackProperty) != 'undefined' && prop == trackProperty;\r\n\r\n                    if (ko.isObservable(target[prop])) {\r\n                        if (ko.isWriteableObservable(target[prop])) {\r\n                            propertyChanged = needsTracking;\r\n                            target[prop](rawValue);\r\n                        }\r\n                    } else {\r\n                        propertyChanged = needsTracking;\r\n                        target[prop] = rawValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return propertyChanged;\r\n    };\r\n\r\n    ko.utils.dirtyGroup = function (target, objects) {\r\n        if (!general.isObjectType(target)) {\r\n            target = {};\r\n        }\r\n        var group = [];\r\n        $.each(objects, function () {\r\n            group.push(this);\r\n        });\r\n        target.dirtyGroup = [];\r\n\r\n        var checkdirtygroup = function () {\r\n            ko.utils.arrayForEach(group, function (observable) {\r\n                if (observable && observable.isDirty()) target.dirtyGroup.push(observable);\r\n            });\r\n        };\r\n\r\n        //checkdirtygroup();\r\n\r\n        target.isDirty = ko.computed(function () {\r\n            target.dirtyGroup = [];\r\n            checkdirtygroup();\r\n            return target.dirtyGroup.length > 0;\r\n        });\r\n    };\r\n\r\n    ko.subscribable.fn.subscribeChanged = function (callback) {\r\n        var previousValue;\r\n\r\n        this.subscribe(function (_previousValue) {\r\n            previousValue = _previousValue;\r\n        }, null, 'beforeChange');\r\n\r\n        return this.subscribe(function (latestValue) {\r\n            callback(latestValue, previousValue);\r\n        });\r\n    };\r\n\r\n    \r\n    ko.extenders.asyncValidation = function (target, config) {\r\n        var cfg = ko.utils.extend({ withAsyncValidationFix: true },config);\r\n        if (cfg.withAsyncValidationFix) {\r\n            var normalIsValid = target.isValid;\r\n            target.isValid = function() {\r\n                return !target.isValidating() && normalIsValid.apply(this, arguments);\r\n            }\r\n        }\r\n        target.extend({ asyncValidator: cfg.asyncFunction });\r\n    };\r\n\r\n    ko.extenders.initialyVisible = function(target, config) {\r\n        if (config === true) {\r\n            target.isVisible = ko.observable(true);\r\n        } else {\r\n            target.isVisible = ko.observable(false);\r\n        }\r\n    };\r\n\r\n    require(['vendor/knockout.validation'],function(){\r\n        ko.validation.registerExtenders();\r\n    });\r\n    \r\n    (function(){\r\n        var emptySubscription = { dispose: function() {} };\r\n        var currentSubscriptions = {};\r\n\r\n        function subscribeSingleton(topic, action, target, initializeWithLatestValue) {\r\n            (currentSubscriptions[topic] || emptySubscription).dispose();\r\n\r\n            var newSub = ko.postbox.subscribe(topic, action, target, initializeWithLatestValue);\r\n            var originalDispose = newSub.dispose.bind(newSub);\r\n\r\n            newSub.dispose = function dispose() {\r\n                originalDispose();\r\n                delete currentSubscriptions[topic];\r\n            }\r\n\r\n            currentSubscriptions[topic] = newSub;\r\n\r\n            return newSub;\r\n        }\r\n\r\n        ko.postbox.subscribeSingleton = subscribeSingleton;\r\n    }());\r\n\r\n    ko.extenders.intersectArray = function (target, options) {\r\n        var intersectedArray = ko.pureComputed({\r\n            read: function() {\r\n                var firstArray = target();\r\n                if (!Array.isArray(firstArray) || firstArray.length <= 0) {\r\n                    return [];\r\n                }\r\n\r\n                /*eslint no-eq-null: 0*/\r\n                if (options == null || options.withArray == null) {\r\n                    return firstArray;\r\n                }\r\n\r\n                var secondArray = options.withArray();\r\n                if (!Array.isArray(secondArray) || secondArray.length <= 0) {\r\n                    if (options.allowEmptyArray){\r\n                        return [];\r\n                    }\r\n                    else {\r\n                        return firstArray;\r\n                    }\r\n                }\r\n\r\n                var prop = options.prop;\r\n                var withProp = options.withProp;\r\n                return ko.utils.arrayFilter(firstArray, function (firstItem) {\r\n                    return ko.utils.arrayFirst(secondArray, function (secondItem) {\r\n                        var firstItemCompareValue = (prop ? firstItem[prop] : firstItem).toString();\r\n                        var secondItemCompareValue = (withProp ? secondItem[withProp] : secondItem).toString();\r\n                        return firstItemCompareValue === secondItemCompareValue;\r\n                    });\r\n                });\r\n            },\r\n            write: function(value) {\r\n                target(value);\r\n            }\r\n        }).extend({ notify: 'always' });\r\n\r\n        return intersectedArray;\r\n    };\r\n    return ko\r\n});\n",
    "function ObservableHashTable(ko, general, _keyProperty, _sortingParams) {\r\n    var keyProperty = ko.observable(_keyProperty);\r\n    var array = ko.observableArray([]);\r\n    var keys = new THashTable(general);\r\n    var sortingParams = (typeof (_sortingParams) == 'undefined') ? { enabled: false, sortProperty: '', asc: true} : _sortingParams;\r\n    var sortPropreties = ko.observable(sortingParams);\r\n\r\n    var clear = function () {\r\n        keys.Clear();\r\n\r\n        ko.utils.arrayForEach(array(), function(item) {\r\n            if (item && typeof item.dispose === \"function\") {\r\n                item.dispose();\r\n            }\r\n        });\r\n\r\n        array.removeAll();\r\n    };\r\n\r\n    var getkey = function (value) {\r\n        var underlineValue = ko.unwrap(value);\r\n        return ko.toJS(underlineValue[keyProperty()]);\r\n    };\r\n\r\n    // isPeekMode (default = false ) is for AddRange\r\n    // get a reference to our underlying array, push to it, then call .valueHasMutated()\r\n    var checkAndAdd = function (value, index, isPeekMode) {\r\n        // push sorted is defined on ko.observableArray.fn.pushSorted\r\n        var targetArray = (isPeekMode && !sortingParams.enabled) ? array() : array;\r\n        var key = getkey(value);\r\n\r\n        if (!keys.HasItem(key)) {\r\n            if (sortingParams.enabled) {\r\n                targetArray.pushSorted(sortingParams.sortProperty, sortingParams.asc, value);\r\n            } else if (typeof index == 'number') {\r\n                targetArray.splice(index, 0, value);\r\n            } else {\r\n                targetArray.push(value);\r\n            }\r\n\r\n            keys.SetItem(key, value);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    var addAt = function (index, value) {\r\n        return checkAndAdd(value, index);\r\n    };\r\n\r\n    var add = function (value) {\r\n        return checkAndAdd(value);\r\n    };\r\n\r\n    //Adds the array of values to the internal observable collection with the rowBuilder function as an al\r\n    // see preformace improvement\r\n    // http://www.knockmeout.net/2012/04/knockoutjs-performance-gotcha.html\r\n    var addRange = function (arrayOfValues) {\r\n        for (var i = 0; i < arrayOfValues.length; i++) {\r\n            checkAndAdd(arrayOfValues[i], null, true);\r\n        }\r\n\r\n        // on sorted object the add range is notifying mutation on each item: no performance improvement here\r\n        if (!sortingParams.enabled) {\r\n            array.valueHasMutated();\r\n        }\r\n    };\r\n\r\n    var updateSorting = function (value) {\r\n        if (sortingParams.enabled) {\r\n            var item = value;\r\n            array.remove(item);\r\n            array.pushSorted(sortingParams.sortProperty, sortingParams.asc, value);\r\n        }\r\n    };\r\n\r\n    var update = function (key, value) {\r\n        var item = keys.GetItem(key);\r\n\r\n        if (item !== null && ko.utils.updateShallowFrom(value, item, sortingParams.sortProperty)) {\r\n            updateSorting(item);\r\n        }\r\n    };\r\n    //use this to update even if the item exists - good for subscribers to items\r\n    var updateAlways = function (key, value) {\r\n        var item = keys.GetItem(key);\r\n\r\n        if (item !== null && ko.utils.updateDeepFrom(value, item, sortingParams.sortProperty)) {\r\n            updateSorting(item);\r\n        }\r\n    };\r\n\r\n    var get = function (key) {\r\n        return keys.GetItem(key);\r\n    };\r\n\r\n    var contains = function (key) {\r\n        return keys.HasItem(key);\r\n    };\r\n\r\n    var remove = function (key) {\r\n        var item = keys.GetItem(key);\r\n\r\n        if (item === null) {\r\n            return false;\r\n        }\r\n\r\n        keys.RemoveItem(key);\r\n        array.remove(item);\r\n\r\n        return true;\r\n    };\r\n\r\n    var initialSort = function () {\r\n        array.sortByProperty(sortingParams.sortProperty, sortingParams.asc);\r\n    };\r\n\r\n    var reverse = function () {\r\n        array.reverse();\r\n    };\r\n\r\n    var setSorting = function (enabled, sortProperty, asc) {\r\n        var doInitialSort = ((!sortingParams.enabled && enabled) || (sortingParams.sortProperty != sortProperty));\r\n        var doReverse = (sortingParams.asc != asc);\r\n\r\n        sortingParams.enabled = enabled;\r\n        sortingParams.sortProperty = sortProperty;\r\n        sortingParams.asc = asc;\r\n\r\n        sortPropreties(sortingParams);\r\n\r\n        if (array().length > 1) {\r\n            if (doInitialSort)\r\n                initialSort();\r\n            else if (doReverse)\r\n                reverse();\r\n        }\r\n    };\r\n\r\n    var hasItems = function() {\r\n        return keys.hasItems();\r\n    };\r\n\r\n    return {\r\n        Clear: clear,\r\n        Add: add,\r\n        AddRange: addRange,\r\n        AddAt: addAt,\r\n        Update: update,\r\n        UpdateAlways: updateAlways,\r\n        Get: get,\r\n        Contains: contains,\r\n        Remove: remove,\r\n        SetSorting: setSorting,\r\n        SortProperties: sortPropreties,\r\n        Keys: keys,\r\n        HasItems: hasItems,\r\n        Values: array,\r\n        KeyProperty: keyProperty\r\n    };\r\n}\r\n\r\ndefine('helpers/ObservableHashTable', ['handlers/HashTable'], function(){ return ObservableHashTable });\r\n\n",
    "/* globals eUploadDocumentType, eUploadDocumentStatus */\r\ndefine(\r\n    'generalmanagers/StatesManager',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'handlers/general',\r\n        'initdatamanagers/Customer',\r\n        'cachemanagers/ClientStateFlagsManager',\r\n        'cachemanagers/PortfolioStaticManager',\r\n        'dataaccess/dalCompliance',\r\n        'Dictionary',\r\n        'helpers/ObservableHashTable',\r\n        'JSONHelper'\r\n    ],\r\n    function (require) {\r\n        var ko = require('knockout'),\r\n            general = require('handlers/general'),\r\n            Customer = require('initdatamanagers/Customer'),\r\n            ClientStateFlagsManager = require('cachemanagers/ClientStateFlagsManager'),\r\n            PortfolioStaticManager = require('cachemanagers/PortfolioStaticManager'),\r\n            Dictionary = require('Dictionary'),\r\n            dalCompliance = require('dataaccess/dalCompliance'),\r\n            JSONHelper = require('JSONHelper'),\r\n            observableHashTable = require('helpers/ObservableHashTable');\r\n\r\n        function StatesManager() {\r\n            var stateNamesPriorities = {\r\n                // the state names and priorities, the state container will initialize by this priority\r\n                SystemMode: 1,\r\n                DemoStatus: 2,\r\n                IsActive: 3,\r\n                AmlStatus: 4,\r\n                KycStatus: 5,\r\n                MarketState: 6,\r\n                EquityAlert: 7,\r\n                ExposureAlert: 8,\r\n                ExposureCoverageAlert: 9,\r\n                ServerErrorStatus: 10,\r\n                PepStatus: 11,\r\n                CddStatus: 12,\r\n                Forbidden: 13,\r\n                KycReviewStatus: 14,\r\n\r\n                //documents status\r\n                docProofOfID: 15,\r\n                docProofOfResidence: 16,\r\n                docCreditCardCopy: 17,\r\n                docDepositConfirmation: 18,\r\n                docWithdrawalPendingRequest: 19,\r\n                docTaxCard: 20,\r\n                docOtherDocuments: 21,\r\n\r\n                //customer 'flags'\r\n                Folder: 22,\r\n                FolderType: 23,\r\n                FolderTypeId: 24,\r\n                fxDenied: 25,\r\n                minDepositGroup: 26,\r\n                signAgreementDate: 27,\r\n                IsQuizPassed: 28,\r\n                UploadDocumentsAfterFirstDepositCountdown: 29,\r\n                SignAgreementCountdown: 30,\r\n                CDDRenewalCountdown: 31\r\n            };\r\n            var states = {};\r\n            var isGetDocumentsStatus = false;\r\n            var isGetDocumentsForAccountHubStatus = false;\r\n            var statesContainer = observableHashTable(ko, general, 'StateType', { enabled: true, sortProperty: 'Priority', asc: true });\r\n\r\n            function TState(type, value, priority) {\r\n                this.StateType = type;\r\n                this.Value = ko.observable(value);\r\n                this.Priority = priority;\r\n            }\r\n\r\n            function pushState(type, value, priority) {\r\n                var state = new TState(type, value, priority);\r\n\r\n                if (!statesContainer.Add(state)) {\r\n                    statesContainer.UpdateAlways(type, state);\r\n                }\r\n            }\r\n\r\n            function getStateValue(type) {\r\n                var state = statesContainer.Get(type);\r\n\r\n                if (state) {\r\n                    return state.Value;\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            function init() {\r\n                initStateValues();\r\n                initStatesObject();\r\n                registerToAPI();\r\n            }\r\n\r\n            function initStateValues() {\r\n                //need to initilize by the order of priorities\r\n\r\n                for (var stateName in stateNamesPriorities) {\r\n                    if (stateNamesPriorities.hasOwnProperty(stateName)) {\r\n                        pushState(stateNamesPriorities[stateName], eFlagState.Initial, stateNamesPriorities[stateName]);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function initStatesObject() {\r\n                //documents status\r\n                states.docProofOfID = getStateValue(stateNamesPriorities.docProofOfID);\r\n                states.docProofOfResidence = getStateValue(stateNamesPriorities.docProofOfResidence);\r\n                states.docCreditCardCopy = getStateValue(stateNamesPriorities.docCreditCardCopy);\r\n                states.docDepositConfirmation = getStateValue(stateNamesPriorities.docDepositConfirmation);\r\n                states.docWithdrawalPendingRequest = getStateValue(stateNamesPriorities.docWithdrawalPendingRequest);\r\n                states.docTaxCard = getStateValue(stateNamesPriorities.docTaxCard);\r\n                states.docOtherDocuments = getStateValue(stateNamesPriorities.docOtherDocuments);\r\n\r\n                //customer 'flags'\r\n                states.Folder = getStateValue(stateNamesPriorities.Folder);\r\n                states.FolderType = getStateValue(stateNamesPriorities.FolderType);\r\n                states.FolderTypeId = getStateValue(stateNamesPriorities.FolderTypeId);\r\n                states.fxDenied = getStateValue(stateNamesPriorities.fxDenied);\r\n                states.minDepositGroup = getStateValue(stateNamesPriorities.minDepositGroup);\r\n                states.signAgreementDate = getStateValue(stateNamesPriorities.signAgreementDate);\r\n\r\n                states.EquityAlert = getStateValue(stateNamesPriorities.EquityAlert);\r\n                states.ExposureAlert = getStateValue(stateNamesPriorities.ExposureAlert);\r\n                states.ExposureCoverageAlert = getStateValue(stateNamesPriorities.ExposureCoverageAlert);\r\n\r\n                states.MarketState = getStateValue(stateNamesPriorities.MarketState);\r\n                states.SystemMode = getStateValue(stateNamesPriorities.SystemMode);\r\n\r\n                states.IsActive = getStateValue(stateNamesPriorities.IsActive);\r\n                states.AmlStatus = getStateValue(stateNamesPriorities.AmlStatus);\r\n\r\n                states.DemoStatus = getStateValue(stateNamesPriorities.DemoStatus);\r\n                states.KycStatus = getStateValue(stateNamesPriorities.KycStatus);\r\n\r\n                states.PepStatus = getStateValue(stateNamesPriorities.PepStatus);\r\n                states.CddStatus = getStateValue(stateNamesPriorities.CddStatus);\r\n\r\n                states.KycReviewStatus = getStateValue(stateNamesPriorities.KycReviewStatus);\r\n\r\n                states.CDDRenewalCountdown = getStateValue(stateNamesPriorities.CDDRenewalCountdown);\r\n                states.SignAgreementCountdown = getStateValue(stateNamesPriorities.SignAgreementCountdown);\r\n                states.UploadDocumentsAfterFirstDepositCountdown = getStateValue(stateNamesPriorities.UploadDocumentsAfterFirstDepositCountdown);\r\n\r\n                states.isIntDebit = ko.computed(function () {\r\n                    return this.Folder() === eFolder.IntDebit;\r\n                }, states);\r\n\r\n                states.IsDemo = ko.computed(function () {\r\n                    return this.DemoStatus() === eFlagState.Active;\r\n                }, states);\r\n\r\n                states.IsMarketClosed = ko.computed(function () {\r\n                    return this.MarketState() === eCSFlagStates.NotActive;\r\n                }, states);\r\n\r\n                states.IsPortfolioInactive = ko.computed(function () {\r\n                    return this.IsActive() === false;\r\n                }, states);\r\n\r\n                states.IsAmlRestricted = ko.computed(function () {\r\n                    var res = this.AmlStatus();\r\n                    return res === eAMLStatus.Restricted || res === eAMLStatus.Unverified;\r\n                }, states);\r\n\r\n                states.IsAmlPending = ko.computed(function () {\r\n                    var res = this.AmlStatus();\r\n                    return res === eAMLStatus.Pending;\r\n                }, states);\r\n\r\n                states.IsKycStatusRequired = ko.computed(function () {\r\n                    var res = this.KycStatus();\r\n                    return res === eKYCStatus.NotComplete;\r\n                }, states);\r\n\r\n                states.IsKycReviewStatusRequired = ko.computed(function () {\r\n                    return (this.KycStatus() === eKYCStatus.Failed) && (this.KycReviewStatus() === eKYCReviewStatus.NotReviewed || this.KycReviewStatus() === eKYCReviewStatus.Review || this.KycReviewStatus() === eKYCReviewStatus.Tested);\r\n                }, states);\r\n\r\n                states.IsCddStatusNotComplete = ko.computed(function () {\r\n                    var res = this.CddStatus();\r\n                    return res === eCDDStatus.NotComplete;\r\n                }, states);\r\n\r\n                states.IsCddStatusRequired = ko.computed(function () {\r\n                    var res = this.CddStatus();\r\n                    return res === eCDDStatus.NotComplete || res === eCDDStatus.Complete;\r\n                }, states);\r\n\r\n                states.IsPepRequired = ko.computed(function () {\r\n                    return this.PepStatus() == ePEPStatus.Required;\r\n                }, states);\r\n\r\n                states.IsActiveButNotSinceTradingBonus = ko.computed(function () {\r\n                    return this.IsActive() == eFlagState.Active && Customer.prop.customerType !== eCustomerType.TradingBonus;\r\n                }, states);\r\n\r\n                states.IsTradingBonusGoingToCDDAfterDeposit = ko.computed(function () {\r\n                    var res = this.CddStatus();\r\n                    return (Dictionary.GetItem('TradingBonusGoesToCDDAfterDeposit', 'application_configuration') === '1' && Customer.prop.customerType === eCustomerType.TradingBonus && res === eCDDStatus.NotRequired);\r\n                }, states);\r\n\r\n                states.IsCddOrKycRequired = ko.computed(function () {\r\n                    return this.KycStatus() !== eKYCStatus.NotRequired || this.CddStatus() !== eCDDStatus.NotRequired;\r\n                }, states);\r\n\r\n                states.ServerErrorStatus = getStateValue(stateNamesPriorities.ServerErrorStatus).extend({ notify: 'always' });\r\n\r\n                states.Forbidden = getStateValue(stateNamesPriorities.Forbidden).extend({ notify: 'always' });\r\n\r\n                states.IsCddStatusNotRequired = ko.computed(function () {\r\n                    return this.CddStatus() === eCDDStatus.NotRequired;\r\n                }, states);\r\n\r\n                // should redirect to CDD\r\n                states.shouldCddRedirect = ko.computed(function () {\r\n                    return this.IsActive() == eFlagState.Active && (\r\n                        this.CddStatus() === eCDDStatus.NotComplete ||\r\n                        this.KycStatus() === eKYCStatus.NotComplete || (\r\n                            this.KycStatus() === eKYCStatus.Failed && (\r\n                                this.KycReviewStatus() === eKYCReviewStatus.NotReviewed ||\r\n                                this.KycReviewStatus() === eKYCReviewStatus.Review ||\r\n                                this.KycReviewStatus() === eKYCReviewStatus.Tested)\r\n                        )\r\n                    );\r\n                }, states);\r\n\r\n                states.IsQuizPassed = getStateValue(stateNamesPriorities.IsQuizPassed);\r\n\r\n                states.IsCDDRestricted = ko.observable(false);\r\n            }\r\n\r\n            function onCSFlagsChanged(csFlags) {\r\n                pushState(stateNamesPriorities.EquityAlert, csFlags.equityAlert, stateNamesPriorities['EquityAlert']);\r\n                pushState(stateNamesPriorities.ExposureAlert, csFlags.exposureAlert, stateNamesPriorities['ExposureAlert']);\r\n                pushState(stateNamesPriorities.ExposureCoverageAlert, csFlags.exposureCoverageAlert, stateNamesPriorities['ExposureCoverageAlert']);\r\n                pushState(stateNamesPriorities.MarketState, csFlags.marketState, stateNamesPriorities['MarketState']);\r\n                pushState(stateNamesPriorities.SystemMode, csFlags.systemMode, stateNamesPriorities['SystemMode']);\r\n            }\r\n\r\n            function onPortfolioStaticChanged(portfolioStatic) {\r\n                // The positions of pushState calls is important!\r\n                pushState(stateNamesPriorities.PepStatus, portfolioStatic.pepStatus, stateNamesPriorities['PepStatus']);\r\n                pushState(stateNamesPriorities.CddStatus, portfolioStatic.cddStatus, stateNamesPriorities['CddStatus']);\r\n                pushState(stateNamesPriorities.AmlStatus, portfolioStatic.amlStatus, stateNamesPriorities['AmlStatus']);\r\n                pushState(stateNamesPriorities.IsActive, portfolioStatic.isActive, stateNamesPriorities['IsActive']);\r\n                pushState(stateNamesPriorities.DemoStatus, portfolioStatic.isDemo ? eFlagState.Active : eFlagState.NotActive, stateNamesPriorities['DemoStatus']);\r\n                pushState(stateNamesPriorities.KycStatus, portfolioStatic.kycStatus, stateNamesPriorities['KycStatus']);\r\n                pushState(stateNamesPriorities.KycReviewStatus, portfolioStatic.kycReviewStatus, stateNamesPriorities['KycReviewStatus']);\r\n\r\n                updateCustomer();\r\n\r\n                updateCustomerData();\r\n            }\r\n\r\n            function updateCustomer() {\r\n                Customer\r\n                    .GetCustomer()\r\n                    .then(function (response) {\r\n                        var data = JSONHelper.STR2JSON('StatesManager:updateCustomer', response);\r\n\r\n                        if (!general.isNullOrUndefined(data)) {\r\n                            states.Folder(data.folder);\r\n                            states.FolderType(data.folderType);\r\n                            states.FolderTypeId(data.folderTypeId);\r\n                            states.fxDenied(data.allowFXnet == 0);\r\n                            states.minDepositGroup(data.minDepositGroup);\r\n                            states.signAgreementDate(general.str2Date(data.signAgreementDate));\r\n                            ko.postbox.publish('customer-data-loaded');\r\n                        }\r\n                    })\r\n                    .done();\r\n            }\r\n\r\n            function updateDocumentStatus() {\r\n                dalCompliance\r\n                    .getUploadDocumentsData()\r\n                    .then(processUploadDocumentsData);\r\n            }\r\n\r\n            function updateCustomerData() {\r\n                dalCompliance\r\n                    .getDocumentsDataForAccountHub()\r\n                    .then(processCustomerData);\r\n            }\r\n\r\n            function processUploadDocumentsData(data) {\r\n                var docs = JSONHelper.STR2JSON('StatesManager/processUploadDocumentsData', data, eErrorSeverity.medium);\r\n                if (docs) {\r\n                    processDocsData(docs);\r\n                }\r\n            }\r\n\r\n            function processCustomerData(data) {\r\n                var customerData = JSONHelper.STR2JSON('StatesManager/processCustomerData', data, eErrorSeverity.medium);\r\n\r\n                if (customerData) {\r\n                    if (customerData.DocumentsData) {\r\n                        processDocsData(customerData.DocumentsData);\r\n                    }\r\n\r\n                    processCustomerStatuses(customerData);\r\n                }\r\n            }\r\n\r\n            function processCustomerStatuses(customerData) {\r\n                states.IsQuizPassed(customerData.IsQuizPassed);\r\n\r\n                if (general.isNumber(customerData.CDDAccess)) {\r\n                    states.IsCDDRestricted(states.CddStatus() === eCDDStatus.Complete && customerData.CDDAccess === eCDDAccess.Restricted);\r\n                }\r\n\r\n                if (general.isNumber(customerData.UploadDocumentsAfterFirstDepositCountdown)) {\r\n                    states.UploadDocumentsAfterFirstDepositCountdown(customerData.UploadDocumentsAfterFirstDepositCountdown);\r\n                }\r\n\r\n                if (general.isNumber(customerData.SignAgreementCountdown)) {\r\n                    states.SignAgreementCountdown(customerData.SignAgreementCountdown);\r\n                }\r\n\r\n                if (general.isNumber(customerData.CDDRenewalCountdown)) {\r\n                    states.CDDRenewalCountdown(customerData.CDDRenewalCountdown);\r\n                }\r\n            }\r\n\r\n            function processDocsData(docs) {\r\n                if (docs.Data) {\r\n                    docs.Data.forEach(function (docDataFromServer) {\r\n                        if (docDataFromServer.DocumentTypeID === eUploadDocumentType.ProofOfID) {\r\n                            states.docProofOfID(docDataFromServer.DocumentStatus);\r\n                        }\r\n                        else if (docDataFromServer.DocumentTypeID === eUploadDocumentType.ProofOfResidence) {\r\n                            states.docProofOfResidence(docDataFromServer.DocumentStatus);\r\n                        }\r\n                        else if (docDataFromServer.DocumentTypeID === eUploadDocumentType.CreditCardCopy) {\r\n                            states.docCreditCardCopy(docDataFromServer.DocumentStatus);\r\n                        }\r\n                        else if (docDataFromServer.DocumentTypeID === eUploadDocumentType.DepositConfirmation) {\r\n                            states.docDepositConfirmation(docDataFromServer.DocumentStatus);\r\n                        }\r\n                        else if (docDataFromServer.DocumentTypeID === eUploadDocumentType.WithdrawalPendingRequest) {\r\n                            states.docWithdrawalPendingRequest(docDataFromServer.DocumentStatus);\r\n                        }\r\n                        else if (docDataFromServer.DocumentTypeID === eUploadDocumentType.TaxCard) {\r\n                            states.docTaxCard(docDataFromServer.DocumentStatus);\r\n                        }\r\n                        else if (docDataFromServer.DocumentTypeID === eUploadDocumentType.OtherDocuments) {\r\n                            states.docOtherDocuments(docDataFromServer.DocumentStatus);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            function registerToAPI() {\r\n                ClientStateFlagsManager.OnChange.Add(onCSFlagsChanged);\r\n                PortfolioStaticManager.OnChange.Add(onPortfolioStaticChanged);\r\n\r\n            }\r\n\r\n            function startGetDocumentsStatus() {\r\n                if (!isGetDocumentsStatus) {\r\n                    isGetDocumentsStatus = true;\r\n                    updateDocumentStatus();\r\n                }\r\n            }\r\n\r\n            function startGetCustomerData() {\r\n                if (!isGetDocumentsForAccountHubStatus) {\r\n                    isGetDocumentsForAccountHubStatus = true;\r\n                    updateCustomerData();\r\n                }\r\n            }\r\n\r\n            function initFromCustomer(customerCompliance) {\r\n                pushState(stateNamesPriorities.PepStatus, customerCompliance.PepStatus, stateNamesPriorities['PepStatus']);\r\n                pushState(stateNamesPriorities.CddStatus, customerCompliance.CddStatus, stateNamesPriorities['CddStatus']);\r\n                pushState(stateNamesPriorities.AmlStatus, customerCompliance.AmlStatus, stateNamesPriorities['AmlStatus']);\r\n                pushState(stateNamesPriorities.IsActive, customerCompliance.IsActive, stateNamesPriorities['IsActive']);\r\n                pushState(stateNamesPriorities.KycStatus, customerCompliance.KycStatus, stateNamesPriorities['KycStatus']);\r\n                pushState(stateNamesPriorities.KycReviewStatus, customerCompliance.KycReviewStatus, stateNamesPriorities['KycReviewStatus']);\r\n            }\r\n\r\n            function getStates() {\r\n                return states;\r\n            }\r\n\r\n            return {\r\n                StartGetDocumentsStatus: startGetDocumentsStatus,\r\n                StartGetCustomerData: startGetCustomerData,\r\n                Init: init,\r\n                StateValue: getStateValue,\r\n                States: states,\r\n                GetStates: getStates,\r\n                PushState: pushState,\r\n                StatePropertiesEnum: stateNamesPriorities, //  ComputedHandle: computedHandle\r\n                InitFromCustomer: initFromCustomer\r\n            };\r\n        }\r\n\r\n        var module = window.$statesManager = new StatesManager();\r\n\r\n        return module;\r\n    }\r\n);\n",
    "define('devicemanagers/StatesManager', ['generalmanagers/StatesManager'], function StatesManager(statesManager) {\r\n    return statesManager;\r\n});\n",
    "var AlertTypes = {\r\n    CloseDealAlert: 0,\r\n    ServerResponseAlert: 1,\r\n    SimpleClientAlert: 2,\r\n    MaxIdleTimeAlert: 3,\r\n    DoubleLoginAlert: 4,\r\n    ExposureCoverageAlert: 5,\r\n    MinEquityAlert: 6,\r\n    BonusAlert: 7,\r\n    ExitAlert: 8,\r\n    CCDeposit: 9,\r\n    ClientQuestionnaire: 10,\r\n    CddClientQuestionnaire: 11,\r\n    GeneralOkCancelAlert: 12,\r\n    ClosePositionsConfirmation: 13,\r\n    SignalsDisclaimerAlert: 14,\r\n    GeneralCancelableAlert: 15,\r\n    PopupClientQuestionnaire: 16,\r\n    DealsClosedServerResponseAlert: 17,\r\n    DealAddServerResponseAlert: 18,\r\n    LimitsServerResponseAlert: 19,\r\n    GeneralOkAlert: 20,\r\n    RemoveCreditCardConfirmationAlert: 27,\r\n    MultipleDealsClosedConfirmation: 28,\r\n    ClientKnowledgeQuestionnaire: 29,\r\n    RemoveFingerprintLoginOptionConfirmationAlert: 40,\r\n    AddFingerprintLoginOptionConfirmationAlert: 41,\r\n    ScanFingerprintLoginOptionConfirmationAlert: 42,\r\n    FingerprintLoginActivatedAlert: 43,\r\n    DeviceNotSupportFingerprintAlert: 44,\r\n    DepositSuccessAlert: 45,\r\n    HelpAlert: 46,\r\n    DepositConfirmationEmailSentAlert: 47,\r\n    ContactUsCTAAlert: 48,\r\n    TradingConfirmationRetryAlert: 49,\r\n    MultiplePriceAlertsClosedConfirmation: 50,\r\n    PriceAlertServerResponseAlert: 51,\r\n    PriceAlertClosedServerResponseAlert: 52,\r\n    IframeAlert: 53,\r\n    RequestAccessVideoLessonsAlert: 54,\r\n    RequestAccessTutorialsAlert: 55,\r\n    SessionEndedAlert: 56,\r\n    DepositConfirmationSignatureAlert: 57,\r\n    CreditCardNotApprovedAlert: 58,\r\n    DepositQuestionnaireAlert: 59\r\n};\r\n\r\nvar PostClientStatesLoginsAlerts = {\r\n    ExposureAlert: 21,\r\n    ExposureCoverageAlert: 22,\r\n    SystemMode: 23,\r\n    MarketState: 24,\r\n    SystemModeApplicationClosing: 25,\r\n    SystemModeApplicationShutDown: 26\r\n\r\n};\r\n\r\nvar PostPortfoliosLoginsAlerts = {\r\n    AmlStatus: 30,\r\n    IsActive: 31,\r\n    IsDemo: 32,\r\n    IsReal: 35,\r\n    KycStatus: 33,\r\n    PepStatus: 34\r\n};\r\n\r\nvar SaveWithdrawalResponseReturnType = {\r\n    NotPossible: 0,\r\n    EquityLimit: 1,\r\n    AmountLimit: 2,\r\n    Succeded: 3,\r\n    EquityChanged: 4,\r\n    HasOpenPos: 5,\r\n    BalanceError: 6,\r\n    TradingBonusTakeoutRequired: 7,\r\n    TradingBonusTakeoutRequiredRich: 8\r\n};\r\n\r\nvar KnowledgeAlertTypes = {\r\n    Retry: 0,\r\n    Review: 1,\r\n    Tested: 2,\r\n    Inappropriate: 3,\r\n    Unsuitable: 4\r\n};\ndefine(\"enums/alertenums\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.AlertTypes;\n    };\n}(this)));\n\n",
    "define(\r\n    \"viewmodels/SeamlessPermissionsBase\",\r\n    [\r\n        \"require\",\r\n        'handlers/general',\r\n        \"initdatamanagers/Customer\",\r\n        \"Dictionary\"\r\n    ],\r\n    function (require) {\r\n        var Customer = require(\"initdatamanagers/Customer\"),\r\n            general = require('handlers/general'),\r\n            Dictionary = require(\"Dictionary\");\r\n\r\n        var SeamlessPermissionsBase = function () {\r\n\r\n            function checkSeamless() {\r\n                return Customer.prop.isSeamless === true;\r\n            }\r\n\r\n\r\n            function registerLeadType(formId, actionName, args) {\r\n                var from = '';\r\n\r\n                if (formId && formId === eForms.Deposit) {\r\n                    from = \"&\" + registerParams.traderFrom + \"=\" + eFormActions.deposit;\r\n                }\r\n\r\n                if (!general.isNullOrUndefined(actionName)) {\r\n                    if (actionName.toLowerCase() === eFormActions.newDeal.toLowerCase()) {\r\n                        from = \"&\" + registerParams.traderFrom + \"=\" + eFormActions.newDeal;\r\n                    } else if (actionName.toLowerCase() === eFormActions.newLimit.toLowerCase()) {\r\n                        from = \"&\" + registerParams.traderFrom + \"=\" + eFormActions.newLimit;\r\n                    }\r\n                }\r\n               \r\n                if (args && args.register) {\r\n                    from += '&' + args.register;\r\n                }\r\n\r\n                require(['managers/viewsmanager'], function ($viewsManager) {\r\n                    window.location.href = Dictionary.GetItem(\"SeamlessRegisterLink\") + \"&saprocess=&trader_viewid=\" + $viewsManager.Activeform().type + from;\r\n                })\r\n            }\r\n\r\n            function isFormRestricted(eForm, allowedForms, allowedDemoForms) {\r\n                if (!checkSeamless())\r\n                    return false;\r\n                if (!Customer.prop.isDemo)\r\n                    return allowedForms.indexOf(eForm) < 0;\r\n                else\r\n                    return allowedForms.indexOf(eForm) < 0 && allowedDemoForms.indexOf(eForm) < 0; \r\n            }\r\n\r\n            function isFormVisibleRestricted(eForm, visibleRestrictedForms) {\r\n                if (!checkSeamless())\r\n                    return false;\r\n                return visibleRestrictedForms.indexOf(eForm) !== -1; \r\n            }\r\n\r\n            function isActionRestricted(actionName, restrictedActions, restrictedDemoActions) {\r\n                if (!checkSeamless())\r\n                    return false;\r\n                if (Customer.prop.isDemo === true)\r\n                    return restrictedDemoActions.indexOf(actionName) !== -1;\r\n                return restrictedActions.indexOf(actionName) !== -1;\r\n            }\r\n\r\n            function getMessage(formId) {\r\n                var message;\r\n                switch (formId) {\r\n                    case eForms.Deposit:\r\n                        message = Dictionary.GetItem('SeamlessRegisterDeposit');\r\n                        break;\r\n                    case eForms.Withdrawal:\r\n                        message = Dictionary.GetItem('SeamlessRegisterWithdrawal');\r\n                        break;\r\n                    case eForms.ClientQuestionnaire:\r\n                        message = Dictionary.GetItem('SeamlessRegisterQuestionnaire');\r\n                        break;\r\n                    default:\r\n                        message = Dictionary.GetItem('SeamlessRegister');\r\n                }\r\n                return message;\r\n            }\r\n\r\n            function redirectToAllowedForm(allowedForms, allowedDemoForms, visibleRestrictedForms) {\r\n                var eForm = $viewModelsManager.VManager.Activeform().type;\r\n                require(['managers/viewsmanager'], function ($viewsManager) {\r\n                    if (isFormRestricted(eForm, allowedForms, allowedDemoForms) || isFormVisibleRestricted(eForm, visibleRestrictedForms))\r\n                        $viewsManager.SwitchViewVisible(Customer.prop.mainPage);\r\n                });\r\n            }\r\n\r\n            return {\r\n                CheckSeamless: checkSeamless,\r\n                IsFormRestricted: isFormRestricted,\r\n                IsActionRestricted: isActionRestricted,\r\n                RegisterLeadType: registerLeadType,\r\n                GetMessage: getMessage,\r\n                IsFormVisibleRestricted: isFormVisibleRestricted,\r\n                RedirectToAllowedForm: redirectToAllowedForm\r\n            };\r\n        };\r\n        return SeamlessPermissionsBase; \r\n    }\r\n);\n",
    "define(\r\n    'devicecustommodules/SeamlessPermissionsModule',\r\n    [\r\n        'require',\r\n        'enums/alertenums',\r\n        'handlers/general',\r\n        'Dictionary',\r\n        'viewmodels/SeamlessPermissionsBase',\r\n        'customEnums/ViewsEnums'\r\n    ],\r\n    function SeamlessPermissionsModuleDef(require) {\r\n        var general = require('handlers/general'),\r\n            Dictionary = require('Dictionary'),\r\n            SeamlessPermissionsBase = require('viewmodels/SeamlessPermissionsBase');\r\n\r\n        var SeamlessPermissionsModule = general.extendClass(SeamlessPermissionsBase, function SeamlessPermissionsModuleClass() {\r\n            var parent = this.parent,\r\n                allowedForms = [eForms.Quotes, eForms.OpenDeals, eForms.Limits, eForms.ClosedDeals, eForms.ClosedDealsFilter, eForms.Balance, eForms.Wallet, eForms.NetExposure, eForms.InternalContactUs, eForms.Menu, eForms.Charts, eForms.EconomicCalendar, eForms.EconomicCalendarFilter, eForms.Transaction, eForms.EducationalTutorials, eForms.UserFlowMap],\r\n                allowedDemoForms = [eForms.OpenDeals, eForms.Limits, eForms.ClosedDeals, eForms.ClosedDealDetails, eForms.EditClosingLimit, eForms.EditLimit, eForms.CloseDeal, eForms.ClosedDealsFilter, eForms.ContractRollover, eForms.AccountCardRecords, eForms.CashBack, eForms.Balance];\r\n\r\n            var restrictedActions = [\r\n                'newDeal',\r\n                'newLimit',\r\n                'signals',\r\n                'logout',\r\n                'addFavorite'\r\n            ];\r\n\r\n            var restrictedDemoActions = [\r\n                'signals',\r\n                'logout'\r\n            ];\r\n\r\n            var visibleRestrictedForms = [eForms.EducationalTutorials];\r\n\r\n            function isFormVisibleRestricted(eForm) {\r\n                return parent.IsFormVisibleRestricted(eForm, visibleRestrictedForms);\r\n            }\r\n\r\n            function isFormRestricted(eForm) {\r\n                return parent.IsFormRestricted(eForm, allowedForms, allowedDemoForms);\r\n            }\r\n\r\n            function isActionRestricted(actionName) {\r\n                return parent.IsActionRestricted(actionName, restrictedActions, restrictedDemoActions);\r\n            }\r\n\r\n            function popAlert(formId, actionName, viewArgs) {\r\n                var message = parent.GetMessage(formId);\r\n\r\n                var buttonsProperties = {\r\n                    cancelButtonCallback: function () {\r\n                        parent.RedirectToAllowedForm(allowedForms, allowedDemoForms, visibleRestrictedForms);\r\n                    },\r\n                    okButtonCaption: Dictionary.GetItem('RegisterForFree'),\r\n                    okButtonCallback: function () {\r\n                        parent.RegisterLeadType(formId, actionName, viewArgs);\r\n                    }\r\n                };\r\n\r\n                require(['devicemanagers/AlertsManager'], function (alertsManager) {\r\n                    alertsManager.UpdateAlert(AlertTypes.GeneralOkCancelAlert,\r\n                        Dictionary.GetItem('PleaseNote'),\r\n                        message,\r\n                        null,\r\n                        buttonsProperties);\r\n\r\n                    alertsManager.PopAlert(AlertTypes.GeneralOkCancelAlert);\r\n                })\r\n            }\r\n\r\n            return {\r\n                CheckSeamless: parent.CheckSeamless,\r\n                PopAlert: popAlert,\r\n                IsFormRestricted: isFormRestricted,\r\n                IsActionRestricted: isActionRestricted,\r\n                RegisterLeadType: parent.RegisterLeadType,\r\n                IsFormVisibleRestricted: isFormVisibleRestricted\r\n            };\r\n        });\r\n\r\n        return new SeamlessPermissionsModule();\r\n    }\r\n);\n",
    "define(\r\n    'modules/permissionsmodule',\r\n    [\r\n        'require',\r\n        'modules/systeminfo',\r\n        'devicecustommodules/SeamlessPermissionsModule'\r\n    ],\r\n    function PermissionsModule(require) {\r\n        var systemInfo = require('modules/systeminfo'),\r\n            seamlessPermissionsModule = require('devicecustommodules/SeamlessPermissionsModule');\r\n\r\n        var actions = [\r\n            'commonLogout',\r\n            'uploadDocuments',\r\n            'chat',\r\n            'deposit',\r\n            'tutorials',\r\n            'apiIM',\r\n            'gtm',\r\n            'customerProfile',\r\n            'changePassword',\r\n            'notificationsSettings',\r\n            'addEditRemovePriceAlert',\r\n            'requestTradingSignalsAccess'\r\n        ];\r\n\r\n        function checkPermissions(actionName) {\r\n            if (isRestrictedUser() &&\r\n                actions.indexOf(actionName) !== -1) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        function checkActionAllowed(actionName, popAlert, actionArgs) {\r\n            if (seamlessPermissionsModule.IsActionRestricted(actionName)) {\r\n                if (popAlert) {\r\n                    seamlessPermissionsModule.PopAlert(null, actionName, actionArgs);\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        function checkFormPermissions(form, popAlert, formArgs) {\r\n            if (seamlessPermissionsModule.IsFormRestricted(form)) {\r\n                if (popAlert) {\r\n                    seamlessPermissionsModule.PopAlert(form, null, formArgs);\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            if (seamlessPermissionsModule.IsFormVisibleRestricted(form)) {\r\n                seamlessPermissionsModule.PopAlert(form, null, formArgs);\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        function isRestrictedUser() {\r\n            return systemInfo.get('isRestrictedUser', false);\r\n        }\r\n\r\n        function hasTradingPermission() {\r\n            return systemInfo.get('hasTradingPermission', false);\r\n        }\r\n\r\n        function isTradingUser() {\r\n            return isRestrictedUser() && hasTradingPermission();\r\n        }\r\n\r\n        function registerLeadType() {\r\n            seamlessPermissionsModule.RegisterLeadType();\r\n        }\r\n\r\n        return {\r\n            CheckPermissions: checkPermissions,\r\n            CheckFormPermissions: checkFormPermissions,\r\n            CheckActionAllowed: checkActionAllowed,\r\n            IsRestrictedUser: isRestrictedUser,\r\n            RegisterLeadType: registerLeadType,\r\n            IsTradingUser: isTradingUser\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    \"modules/KoComponentLoader\",\r\n    [\r\n        \"require\",\r\n        \"knockout\",\r\n        'handlers/general',\r\n        \"Q\"\r\n    ],\r\n    function(require) {\r\n        var ko = require(\"knockout\"),\r\n            general = require('handlers/general'),\r\n            Q = require(\"Q\");\r\n\r\n        function KoComponentLoader() {\r\n            var components = {};\r\n            var isRegistered = false;\r\n\r\n            var exists = function(name) {\r\n                return ko.components.isRegistered(name);\r\n            };\r\n\r\n            var preload = function(name) {\r\n                return Q.Promise(function(resolve, reject) {\r\n                    ko.components.get(name, function(component) {\r\n                        if (component) {\r\n                            resolve(component);\r\n                        } else {\r\n                            reject(new Error(String.format(\"'{0}' component could not be loaded.\")));\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n\r\n            var register = function() {\r\n                if (isRegistered) {\r\n                    return;\r\n                }\r\n\r\n                var loader = {\r\n                    loadComponent: function (componentName, config, callback) {\r\n                        components[componentName] = false;\r\n\r\n                        if (general.isArrayType(config.deps) && config.deps.length) {\r\n                            require(config.deps, function () {\r\n                                ko.components.defaultLoader.loadComponent(componentName, config, function() {\r\n                                    components[componentName] = true;\r\n                                    callback.apply(null, general.argsToArray(arguments));\r\n                                });\r\n                            });\r\n                        } else {\r\n                            ko.components.defaultLoader.loadComponent(componentName, config, function() {\r\n                                components[componentName] = true;\r\n                                callback.apply(null, general.argsToArray(arguments));\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n\r\n                ko.components.loaders.unshift(loader);\r\n            };\r\n\r\n            var unregister = function() {\r\n                if (isRegistered) {\r\n                    ko.components.loaders.shift();\r\n                }\r\n            };\r\n\r\n            return {\r\n                Register: register,\r\n                Unregister: unregister,\r\n                Preload: preload,\r\n                Exists: exists,\r\n                Components: components\r\n            };\r\n        }\r\n\r\n        return new KoComponentLoader();\r\n    }\r\n);\n",
    "define(\r\n    'handlers/RequireError',\r\n    [\r\n        \"require\",\r\n        \"initdatamanagers/Customer\",\r\n        'modules/KoComponentLoader'\r\n    ],\r\n    function (require) {\r\n        var Customer = require(\"initdatamanagers/Customer\"),\r\n            KoComponentLoader = require('modules/KoComponentLoader');\r\n\r\n        function RequireError(message, innerError) {\r\n            this.message = message;\r\n\r\n            if (!Error.captureStackTrace) {\r\n                this.stack = (new Error()).stack;\r\n            } else {\r\n                Error.captureStackTrace(this, this.constructor);\r\n            }\r\n\r\n            this.innerError = innerError;\r\n            this.loadedUrls = Object.keys(requirejs.s.contexts._.urlFetched);\r\n            this.pendingModules = Object.keys(requirejs.s.contexts._.registry);\r\n            this.loadedModules = Object.keys(requirejs.s.contexts._.defined);\r\n\r\n            var fxnetComponents = Object.keys(KoComponentLoader.Components);\r\n\r\n            this.loadedComponents = fxnetComponents.filter(function (name) {\r\n                return KoComponentLoader.Components[name] === true;\r\n            });\r\n            this.pendingComponents = fxnetComponents.filter(function (name) {\r\n                return KoComponentLoader.Components[name] === false;\r\n            });\r\n        }\r\n\r\n        RequireError.prototype = Object.create(Error.prototype);\r\n        RequireError.prototype.constructor = RequireError;\r\n        RequireError.prototype.getFullExceptionMessage = function () {\r\n            var self = this;\r\n\r\n            var messageObj = {\r\n                Message: self.message,\r\n                LoadedUrls: self.loadedUrls,\r\n                PendingModules: self.pendingModules,\r\n                //LoadedModules: self.loadedModules,\r\n                PendingComponents: self.pendingComponents,\r\n                //LoadedComponents: self.loadedComponents,\r\n                StackTrace: (self.stack || '').replace(self.message, '').replace(/\\n|\\r\\n/g, ' ').replace(/\\s\\s+/g, ' '),\r\n                AccountNumber: Customer.prop.accountNumber,\r\n                UserAgent: window.navigator.userAgent\r\n            };\r\n\r\n            return JSON.stringify(messageObj);\r\n        };\r\n\r\n        return RequireError;\r\n    }\r\n);\r\n\n",
    "\n",
    "/* eslint no-extend-native: 0 */\r\ndefine(\"generalmanagers/ErrorManager\", [\r\n\t\"require\",\r\n\t\"handlers/Logger\",\r\n\t\"handlers/general\",\r\n\t\"devicemanagers/StatesManager\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"modules/permissionsmodule\",\r\n\t\"global/UrlResolver\",\r\n\t\"handlers/RequireError\",\r\n\t\"StateObject!ViewsManager\",\r\n], function (require) {\r\n\tvar Logger = require(\"handlers/Logger\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tStatesManager = require(\"devicemanagers/StatesManager\"),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tpermissionsModule = require(\"modules/permissionsmodule\"),\r\n\t\tUrlResolver = require(\"global/UrlResolver\"),\r\n\t\tRequireError = require(\"handlers/RequireError\"),\r\n\t\tStateObject = require(\"StateObject!ViewsManager\");\r\n\r\n\tfunction ErrorManager() {\r\n\t\t// Extend Error prototype\r\n\t\tError.prototype.getFullExceptionMessage = function () {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar messageObj = {\r\n\t\t\t\tMessage: self.message,\r\n\t\t\t\tStackTrace: (self.stack || \"\")\r\n\t\t\t\t\t.replace(self.message, \"\")\r\n\t\t\t\t\t.replace(/\\n|\\r\\n/g, \" \")\r\n\t\t\t\t\t.replace(/\\s\\s+/g, \" \"),\r\n\t\t\t\tForm: \"\",\r\n\t\t\t\tViews: [],\r\n\t\t\t\tAccountNumber: Customer.prop.accountNumber,\r\n\t\t\t\tUserAgent: window.navigator.userAgent,\r\n\t\t\t};\r\n\r\n\t\t\tif (window.trackingData) {\r\n\t\t\t\tvar errorTrackingData = window.trackingData.getErrorTrackingData();\r\n\r\n\t\t\t\tfor (var trakingProperty in errorTrackingData) {\r\n\t\t\t\t\tif (errorTrackingData.hasOwnProperty(trakingProperty)) {\r\n\t\t\t\t\t\tmessageObj[trakingProperty] = errorTrackingData[trakingProperty];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tmessageObj.Form = general.urlDecode(window.location.search)[\"view\"] || \"\";\r\n\r\n\t\t\t\tif (StateObject) {\r\n\t\t\t\t\tmessageObj.Views = StateObject.get(\"ActiveViews\");\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// empty\r\n\t\t\t}\r\n\r\n\t\t\treturn JSON.stringify(messageObj);\r\n\t\t};\r\n\r\n\t\tfunction redirectTologin() {\r\n\t\t\twindow.location.replace(\r\n\t\t\t\tUrlResolver.combine(\r\n\t\t\t\t\tUrlResolver.getApplicationRelativePath(),\r\n\t\t\t\t\t\"account/login?reason=\" + eLoginLogoutReason.errorManager_httpError\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction handleHttpError(error) {\r\n\t\t\tif (error && (error.httpStatus === 403 || error.httpStatus === 401 || error.httpStatus === 420)) {\r\n\t\t\t\tif (permissionsModule.IsRestrictedUser()) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tredirectTologin();\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction onException(msg, url, lineNumber, columnNumber, error) {\r\n\t\t\tif (general.isNullOrUndefined(error)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif (handleHttpError(error)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif (error && typeof error.handler === \"function\") {\r\n\t\t\t\t// This is a custom error\r\n\t\t\t\terror.handler();\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\thandleUnknownException(msg, error);\r\n\r\n\t\t\tthrow error;\r\n\t\t}\r\n\r\n\t\tfunction handleUnknownException(msg, error) {\r\n\t\t\tif (typeof systemInfo !== \"undefined\" && typeof Logger !== \"undefined\") {\r\n\t\t\t\tvar blackList = systemInfo.clientApplicationParams\r\n\t\t\t\t\t? systemInfo.clientApplicationParams[eClientParams.JsErrorBlacklistRegex] || \"\"\r\n\t\t\t\t\t: \"\";\r\n\r\n\t\t\t\tvar blacklistReObj = new RegExp(blackList, \"i\");\r\n\r\n\t\t\t\tvar shouldIgnoreMessageLog =\r\n\t\t\t\t\tblackList.length > 0 &&\r\n\t\t\t\t\t((msg.length > 0 && blacklistReObj.test(msg)) ||\r\n\t\t\t\t\t\t(error && error.message.length > 0 && blacklistReObj.test(error.message)));\r\n\r\n\t\t\t\t// log the UnknownError if the error is not in the blacklist\r\n\t\t\t\tif (!shouldIgnoreMessageLog) {\r\n\t\t\t\t\tvar loggedMessage = (error && error.getFullExceptionMessage()) || msg;\r\n\t\t\t\t\tLogger.log(\"UnknownError\", loggedMessage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onError(functionName, strError, severityLevel) {\r\n\t\t\tseverityLevel = severityLevel || eErrorSeverity.low;\r\n\r\n\t\t\t/*if (strError === \"http403\") {\r\n\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\tStatesManager.StatePropertiesEnum.Forbidden,\r\n\t\t\t\t\teErrorSeverity.medium,\r\n\t\t\t\t\tStatesManager.StatePropertiesEnum[\"Forbidden\"]\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tswitch (severityLevel) {\r\n\t\t\t\t\tcase eErrorSeverity.critical:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.critical,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.high:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.high,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.medium:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.medium,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.low:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.low,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar error = {\r\n\t\t\t\t\tMessage: strError,\r\n\t\t\t\t\tAccountNumber: Customer.prop.accountNumber,\r\n\t\t\t\t\tUserAgent: window.navigator.userAgent,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tLogger.error(functionName, JSON.stringify(error), general.emptyFn, severityLevel);\r\n\t\t\t}*/\r\n\t\t}\r\n\r\n\t\tfunction onWarning(source, warningMessage) {\r\n\t\t\tvar warning = {\r\n\t\t\t\tMessage: warningMessage,\r\n\t\t\t\tAccountNumber: Customer.prop.accountNumber,\r\n\t\t\t\tUserAgent: window.navigator.userAgent,\r\n\t\t\t};\r\n\r\n\t\t\tLogger.warn(source, JSON.stringify(warning));\r\n\t\t}\r\n\r\n\t\tfunction getFullExceptionMessage(ex) {\r\n\t\t\treturn ex.getFullExceptionMessage();\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Utility function to create custom Error types\r\n\t\t *\r\n\t\t * To create a custom error type, derived from Error JS object\r\n\t\t *\r\n\t\t * @param {string} name an unique name for the newly custom error type\r\n\t\t * @param {function} handler a function used to handle the created type of error\r\n\t\t *\r\n\t\t * var myCustomError = ErrorManager.createErrorType(\"CustomError\", function() {\r\n\t\t *     // this keyword refers to the current error instance\r\n\t\t *     console.log(this.message);\r\n\t\t * });\r\n\t\t *\r\n\t\t * throw new myCustomError(\"This is a custom error\");\r\n\t\t *\r\n\t\t */\r\n\t\tfunction createErrorType(name, handler) {\r\n\t\t\tfunction BaseError(message) {\r\n\t\t\t\tthis.name = name;\r\n\t\t\t\tthis.message = message;\r\n\r\n\t\t\t\tif (!Error.captureStackTrace) {\r\n\t\t\t\t\tthis.stack = new Error().stack;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tError.captureStackTrace(this, this.constructor);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tBaseError.prototype = Object.create(Error.prototype);\r\n\t\t\tBaseError.prototype.name = name;\r\n\t\t\tBaseError.prototype.constructor = BaseError;\r\n\t\t\tBaseError.prototype.handler = typeof handler === \"function\" ? handler : function () {};\r\n\r\n\t\t\treturn BaseError;\r\n\t\t}\r\n\r\n\t\tfunction onRequireError(error) {\r\n\t\t\tif (error.requireType === \"mismatch\") {\r\n\t\t\t\tthrow new RequireError(\"Mismatched anonymous define() module\", error);\r\n\t\t\t}\r\n\r\n\t\t\tthrow error;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tgetFullExceptionMessage: getFullExceptionMessage,\r\n\t\t\tonRequireError: onRequireError,\r\n\t\t\tonError: onError,\r\n\t\t\tonWarning: onWarning,\r\n\t\t\tonException: onException,\r\n\t\t\tcreateErrorType: createErrorType,\r\n\t\t};\r\n\t}\r\n\r\n\tvar module = (window.ErrorManager = new ErrorManager());\r\n\r\n\treturn module;\r\n});\r\n\n",
    "define('handlers/websocketstate',[\"fxnet/loader\", \"global/UrlResolver\", \"Q\"], function (loader, urlResolver, Q) {\r\n\tvar empty = \"\";\r\n\r\n\tvar connectionData = {\r\n\t\tconnectionToken: empty,\r\n\t\tjwtToken: empty,\r\n\t\tCSMPushEnabled: empty,\r\n\t};\r\n\r\n\tvar states = {\r\n\t\tenabled: \"1\",\r\n\t\tdisabled: \"0\",\r\n\t};\r\n\r\n\tfunction init(params) {\r\n\t\tconnectionData.connectionToken = params.connectionToken || empty;\r\n\t\tconnectionData.jwtToken = params.jwtToken || empty;\r\n\t\tconnectionData.CSMPushEnabled = params.CSMPushEnabled || empty;\r\n\t}\r\n\r\n\tfunction isCSMPushServiceEnabled() {\r\n\t\treturn connectionData.CSMPushEnabled === states.enabled;\r\n\t}\r\n\r\n\tfunction getConnectionToken() {\r\n\t\treturn connectionData.connectionToken;\r\n\t}\r\n\r\n\tfunction getJwtToken() {\r\n\t\treturn connectionData.jwtToken;\r\n\t}\r\n\r\n\tfunction canConnect() {\r\n\t\treturn (\r\n\t\t\tisCSMPushServiceEnabled() &&\r\n\t\t\tconnectionData.jwtToken &&\r\n\t\t\tconnectionData.jwtToken.length > 0 &&\r\n\t\t\tconnectionData.connectionToken &&\r\n\t\t\tconnectionData.connectionToken.length > 0\r\n\t\t);\r\n\t}\r\n\r\n\tfunction tryConnect() {\r\n\t\tvar deferred = Q.defer();\r\n\r\n\t\tif (connectionData.CSMPushEnabled === states.disabled) {\r\n\t\t\tdeferred.reject(\"CSMPushService disabled for this account\");\r\n\t\t}\r\n\r\n\t\tif (canConnect()) {\r\n\t\t\tdeferred.resolve();\r\n\t\t}\r\n\r\n\t\tif (connectionData.CSMPushEnabled === empty) {\r\n\t\t\treturn loadJWT(deferred);\r\n\t\t}\r\n\r\n\t\treturn deferred.promise;\r\n\t}\r\n\r\n\t// if token is invalid (browser refresh), then go to server and bring one as fallback.\r\n\tfunction loadJWT(deferred) {\r\n\t\t//just in case, support calling this method without parent promise\r\n\t\tif (deferred === null || typeof deferred === \"undefined\") {\r\n\t\t\tdeferred = Q.defer();\r\n\t\t}\r\n\r\n\t\tloader.get(\r\n\t\t\turlResolver.combine(urlResolver.getApplicationRelativePath(), \"Account/GetJWTAndConnectionId\"),\r\n\t\t\tfunction (error, token) {\r\n\t\t\t\tif (error) {\r\n\t\t\t\t\tdeferred.reject(error);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdateConnectionData(token);\r\n\r\n\t\t\t\tif (!isCSMPushServiceEnabled()) {\r\n\t\t\t\t\tdeferred.reject(\"server refused web sockets\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdeferred.resolve();\r\n\t\t\t},\r\n\t\t\t\"application/json; charset=utf-8\",\r\n\t\t\ttrue\r\n\t\t);\r\n\r\n\t\treturn deferred.promise;\r\n\t}\r\n\r\n\tfunction updateConnectionData(result) {\r\n\t\tif (!result || result.indexOf(\"$\") === -1) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar _params = result.split(\"$\");\r\n\r\n\t\tfor (var i = 0; i < _params.length; i++) {\r\n\t\t\tvar param = _params[i].substring(3, _params[i].length);\r\n\r\n\t\t\tif (_params[i].indexOf(\"ct=\") !== -1) {\r\n\t\t\t\tconnectionData.connectionToken = param;\r\n\t\t\t}\r\n\r\n\t\t\tif (_params[i].indexOf(\"jt=\") !== -1) {\r\n\t\t\t\tconnectionData.jwtToken = param;\r\n\t\t\t}\r\n\r\n\t\t\tif (_params[i].indexOf(\"en=\") !== -1) {\r\n\t\t\t\tconnectionData.CSMPushEnabled = param;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction resetConnectionData() {\r\n\t\tconnectionData.connectionToken = empty;\r\n\t\tconnectionData.jwtToken = empty;\r\n\t\tconnectionData.CSMPushEnabled = empty;\r\n\t}\r\n\r\n\treturn {\r\n\t\tIsCSMPushServiceEnabled: isCSMPushServiceEnabled,\r\n\t\tGetConnectionToken: getConnectionToken,\r\n\t\tGetJwtToken: getJwtToken,\r\n\t\tCanConnect: canConnect,\r\n\t\tTryConnect: tryConnect,\r\n\t\tResetConnectionData: resetConnectionData,\r\n\t\tInit: init,\r\n\t};\r\n});\r\n\n",
    "/* global UrlResolver, ErrorManager, Loader,Q*/\r\n// singleton web socket connection wrapperisReady\r\n\r\ndefine('handlers/websocketconnection',[\r\n\t\"Q\",\r\n\t\"global/UrlResolver\",\r\n\t\"generalmanagers/ErrorManager\",\r\n\t\"fxnet/loader\",\r\n\t\"handlers/websocketstate\",\r\n], function (Q, UrlResolver, ErrorManager, Loader, wsState) {\r\n\tvar //_wsUrl,\r\n\t\t_socket = null,\r\n\t\t_timestamps,\r\n\t\thasStarted,\r\n\t\tmessageHandler,\r\n\t\treconnectedHandler,\r\n\t\tnotAvailableHandler,\r\n\t\tdisconnectedHandler,\r\n\t\tisShutDownMode = false,\r\n\t\tisStartMode = true,\r\n\t\tretriesOnDisconnectedFailedConnection = 0, // initial value\r\n\t\tdisconnectedMaxRetries = 1, // =1 on init and then =3 on network failure\r\n\t\treceiveActions = {\r\n\t\t\treconnected: \"reconnected\",\r\n\t\t\tack: \"ack\",\r\n\t\t\treconnectOnError: \"reconnectOnError\",\r\n\t\t\tdisconnect: \"disconnect\",\r\n\t\t},\r\n\t\tlastKeepAliveMsg,\r\n\t\tisNotFirstKeepAlive = false,\r\n\t\t//receiveTimeoutPeriod = 15,\r\n\t\treceiveKeepAliveTimeout = null,\r\n\t\tsocketConfig = null,\r\n\t\tdefaultKeepAlivePeriod = 5,\r\n\t\tdefaultKeepAliveBuffer = 1,\r\n\t\teventsCalledOnce,\r\n\t\tonDisconnectedIsAlreadyRunning = false;\r\n\r\n\tfunction log(message) {\r\n\t\tvar connectionToken = wsState.GetConnectionToken(),\r\n\t\t\tmessageData = {\r\n\t\t\t\tLocation: \"SocketConnection (\" + connectionToken + \") \",\r\n\t\t\t\tInfo: message,\r\n\t\t\t},\r\n\t\t\tparams = {\r\n\t\t\t\tloggedErrorString: JSON.stringify(messageData),\r\n\t\t\t},\r\n\t\t\txmlhttp = new XMLHttpRequest();\r\n\r\n\t\txmlhttp.open(\"POST\", UrlResolver.getUrlWithRndKeyValue(\"Error/Warn\"));\r\n\t\txmlhttp.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\r\n\t\txmlhttp.send(JSON.stringify(params));\r\n\t}\r\n\r\n\t//event - socket performace  event\r\n\t//value - current value for that event\r\n\t//conditionalInitValue -  for items that need to be updated once, update only when previous value equals to conditionalInitValue (0)\r\n\tfunction updatePerformanceCounter(event, value, conditionalInitValue) {\r\n\t\tif (_timestamps.sockets) {\r\n\t\t\tvar temp = _timestamps.sockets[event];\r\n\r\n\t\t\tif (typeof conditionalInitValue !== \"undefined\") {\r\n\t\t\t\tif (temp === conditionalInitValue) {\r\n\t\t\t\t\t_timestamps.sockets[event] = value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t_timestamps.sockets[event] = value;\r\n\t\t}\r\n\r\n\t\treturn; // for better code readability\r\n\t}\r\n\r\n\tfunction updatefirstFrameCounter(event) {\r\n\t\tif (!eventsCalledOnce[event]) {\r\n\t\t\tupdatePerformanceCounter(event, Date.now(), 0);\r\n\t\t\teventsCalledOnce[event] = true;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onReceived(messageEvent) {\r\n\t\t// time stamp on first frame\r\n\t\tupdatefirstFrameCounter(\"firstFrame\");\r\n\r\n\t\tif (messageEvent && messageEvent.data) {\r\n\t\t\tif (messageEvent.data === \"OK\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar messageData = JSON.parse(messageEvent.data);\r\n\t\t\tvar receivedMessage = { msgId: 0 };\r\n\r\n\t\t\tif (messageData && messageData.M && messageData.M.length > 0) {\r\n\t\t\t\tfor (var i = 0; i < messageData.M.length; i++) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tif (messageData.M[i] === \"OK\") {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar msgObj = JSON.parse(messageData.M[i]);\r\n\r\n\t\t\t\t\t\treceivedMessage.msgId = msgObj.msgId || receivedMessage.msgId;\r\n\r\n\t\t\t\t\t\tif (msgObj.clientStateResult) {\r\n\t\t\t\t\t\t\t// time stamp on first quote\r\n\t\t\t\t\t\t\tupdatefirstFrameCounter(\"firstQuote\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// acknowledgment action\r\n\t\t\t\t\t\tif (msgObj.action === receiveActions.ack) {\r\n\t\t\t\t\t\t\tsendAck(msgObj.msgId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//server error and it still connected but asks to reconnect - we will reconnect\r\n\t\t\t\t\t\telse if (msgObj.action === receiveActions.reconnected) {\r\n\t\t\t\t\t\t\tonReconnectedAction();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else if (msgObj.action === receiveActions.reconnectOnError) {\r\n\t\t\t\t\t\t\tonDisconnected();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} else if (msgObj.action === receiveActions.disconnect) {\r\n\t\t\t\t\t\t\tonDisconnected();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (messageHandler) {\r\n\t\t\t\t\t\t\tmessageHandler(msgObj);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (err) {\r\n\t\t\t\t\t\tlog(\"onReceived - failed to parse message data:\" + messageData.M[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tonReceivedKeepAlive(receivedMessage);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clearKeepAliveTimeInterval() {\r\n\t\tlog(\"clearKeepAliveTimeInterval\");\r\n\r\n\t\tif (receiveKeepAliveTimeout) {\r\n\t\t\tclearInterval(receiveKeepAliveTimeout);\r\n\t\t\treceiveKeepAliveTimeout = null;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onReceivedKeepAlive(message) {\r\n\t\tretriesOnDisconnectedFailedConnection = 0;\r\n\t\tlastKeepAliveMsg = { date: new Date(), id: message.msgId };\r\n\t}\r\n\r\n\tfunction checkKeepAlive() {\r\n\t\tif (!lastKeepAliveMsg) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar actualDate = new Date();\r\n\r\n\t\tvar timeBetweenMessages = Math.abs((actualDate.getTime() - lastKeepAliveMsg.date.getTime()) / 1000);\r\n\r\n\t\tif (\r\n\t\t\t!isStartMode &&\r\n\t\t\t!isShutDownMode &&\r\n\t\t\ttimeBetweenMessages > socketConfig.keepAlivePeriod + socketConfig.keepAliveBuffer &&\r\n\t\t\tisNotFirstKeepAlive\r\n\t\t) {\r\n\t\t\tlog(\r\n\t\t\t\t\"Time out...try to reconnect at: \" +\r\n\t\t\t\t\tactualDate +\r\n\t\t\t\t\t\", last keep alive message date: \" +\r\n\t\t\t\t\tlastKeepAliveMsg.date +\r\n\t\t\t\t\t\", last keep alive message id: \" +\r\n\t\t\t\t\tlastKeepAliveMsg.id\r\n\t\t\t);\r\n\t\t\tisNotFirstKeepAlive = false;\r\n\t\t\tonDisconnected();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tisNotFirstKeepAlive = true;\r\n\t}\r\n\r\n\tfunction onerror(event, source) {\r\n\t\ttry {\r\n\t\t\tif (typeof event !== \"undefined\" && typeof source !== \"undefined\") {\r\n\t\t\t\tlog(\r\n\t\t\t\t\t\"Socket_connection_error,source=\" +\r\n\t\t\t\t\t\tsource +\r\n\t\t\t\t\t\t\",reason=\" +\r\n\t\t\t\t\t\t(typeof event === \"string\"\r\n\t\t\t\t\t\t\t? event\r\n\t\t\t\t\t\t\t: (event.reason || \"CloseEvent\") +\r\n\t\t\t\t\t\t\t  \",code=\" +\r\n\t\t\t\t\t\t\t  (event.code || 0) +\r\n\t\t\t\t\t\t\t  \",wasClean=\" +\r\n\t\t\t\t\t\t\t  (event.wasClean || true) +\r\n\t\t\t\t\t\t\t  \",message=\" +\r\n\t\t\t\t\t\t\t  (event.message || \"\") +\r\n\t\t\t\t\t\t\t  \",target=\" +\r\n\t\t\t\t\t\t\t  (event.target || \"\"))\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\twsState.ResetConnectionData();\r\n\t\t\ttryCloseSocket(true);\r\n\t\t\thasStarted.reject(event);\r\n\t\t} catch (e) {\r\n\t\t\tif (e && e.message) {\r\n\t\t\t\tlog(\"onerror failed, error: \" + e.message);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction connect(error) {\r\n\t\ttry {\r\n\t\t\tif (!wsState.CanConnect()) {\r\n\t\t\t\thasStarted.reject(\"cannot connect\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tlog(\"get jwt failed, error: \" + error.message);\r\n\t\t\t\thasStarted.reject(error);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_timestamps.jwtComplete = Date.now();\r\n\r\n\t\t\t//account is not websockets abtesting and no session storage\r\n\t\t\tvar jwtToken = wsState.GetJwtToken(),\r\n\t\t\t\tconnectionToken = wsState.GetConnectionToken(),\r\n\t\t\t\turl =\r\n\t\t\t\t\t//_wsUrl +\r\n\t\t\t\t\t\"wss://csmdev.fihtrader.com/csmstream/connect?transport=webSockets&clientProtocol=1.5&connectionToken=\" +\r\n\t\t\t\t\tconnectionToken +\r\n\t\t\t\t\t\"&jwt=\" +\r\n\t\t\t\t\tjwtToken;\r\n\r\n\t\t\t_socket = new WebSocket(url);\r\n\r\n\t\t\t_socket.onerror = function (event) {\r\n\t\t\t\tonerror(event, \"socket_onerror\");\r\n\t\t\t};\r\n\r\n\t\t\t_socket.onopen = function onOpen() {\r\n\t\t\t\tupdatePerformanceCounter(\"connectionComplete\", Date.now());\r\n\r\n\t\t\t\tisStartMode = false;\r\n\t\t\t\tif (_socket.readyState === WebSocket.OPEN) {\r\n\t\t\t\t\tlog(\"start connection done, transport = webSockets\");\r\n\t\t\t\t\tdisconnectedMaxRetries = 25;\r\n\t\t\t\t\tretriesOnDisconnectedFailedConnection = 0;\r\n\t\t\t\t\thasStarted.resolve(true);\r\n\r\n\t\t\t\t\tif (!receiveKeepAliveTimeout) {\r\n\t\t\t\t\t\treceiveKeepAliveTimeout = setInterval(checkKeepAlive, socketConfig.keepAlivePeriod * 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\thasStarted.reject();\r\n\t\t\t};\r\n\r\n\t\t\t// set event handlers\r\n\t\t\t_socket.onmessage = onReceived;\r\n\t\t\t_socket.onclose = function (event) {\r\n\t\t\t\t// Only handle a socket close if the close is from the current socket.\r\n\t\t\t\t// Sometimes on disconnect the server will push down an onclose event\r\n\t\t\t\t// to an expired socket.\r\n\t\t\t\tif (this !== _socket) {\r\n\t\t\t\t\tlog(\"onclose called on a wrong socket instance\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!isStartMode && typeof event.wasClean !== \"undefined\" && event.wasClean === false) {\r\n\t\t\t\t\t// Ideally this would use the websocket.onerror handler (rather than checking wasClean in onclose) but\r\n\t\t\t\t\t// I found in some circumstances Chrome won't call onerror. This implementation seems to work on all browsers.\r\n\t\t\t\t\tonerror(event, \"socket_onclose_unclean_disconnect\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttryCloseSocket(true);\r\n\t\t\t\thasStarted.reject();\r\n\t\t\t};\r\n\t\t} catch (e) {\r\n\t\t\thasStarted.reject(e);\r\n\r\n\t\t\tif (e && e.message) {\r\n\t\t\t\tlog(\"start connection failed, error: \" + e.message);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tisStartMode = true;\r\n\t\tupdatePerformanceCounter(\"connectionStart\", Date.now());\r\n\t\thasStarted = Q.defer();\r\n\r\n\t\twsState\r\n\t\t\t.TryConnect()\r\n\t\t\t.then(connect)\r\n\t\t\t.catch(function onFallback(error) {\r\n\t\t\t\thasStarted.reject(error);\r\n\t\t\t})\r\n\t\t\t.done();\r\n\r\n\t\treturn hasStarted.promise;\r\n\t}\r\n\r\n\tfunction isConnected() {\r\n\t\treturn !socketIsNull() && _socket.readyState === WebSocket.OPEN;\r\n\t}\r\n\tfunction canSend(method) {\r\n\t\tvar isconnected = isConnected();\r\n\t\tvar isconnectionAvailable = !isShutDownMode && isconnected;\r\n\r\n\t\tif (!isconnectionAvailable) {\r\n\t\t\tlog(\r\n\t\t\t\t\"canSend=false\" +\r\n\t\t\t\t\t\",method=\" +\r\n\t\t\t\t\tmethod +\r\n\t\t\t\t\t\",isShutDownMode=\" +\r\n\t\t\t\t\tisShutDownMode +\r\n\t\t\t\t\t\",isconnected=\" +\r\n\t\t\t\t\tisconnected +\r\n\t\t\t\t\t\",sockeState=\" +\r\n\t\t\t\t\t(_socket === null ? \"null\" : _socket.readyState)\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn isconnectionAvailable;\r\n\t}\r\n\r\n\tfunction sendAck(msgId) {\r\n\t\tif (canSend(\"ack\")) {\r\n\t\t\t_socket.send(JSON.stringify({ ack: msgId }));\r\n\t\t}\r\n\t}\r\n\r\n\t//server send reconnect action\r\n\tfunction onReconnectedAction() {\r\n\t\tif (reconnectedHandler) {\r\n\t\t\treconnectedHandler();\r\n\t\t}\r\n\t}\r\n\t// #endregion Private methods\r\n\r\n\tfunction init(url, timestamps, hashParams) {\r\n\t\t_wsUrl = url.replace(\"https://\", \"wss://\").replace(\"http://\", \"ws://\");\r\n\t\t_timestamps = timestamps;\r\n\r\n\t\tsetDefaultConfig();\r\n\r\n\t\twsState.Init(hashParams);\r\n\t\treturn start();\r\n\t}\r\n\r\n\tfunction isNullOrNaN(value) {\r\n\t\treturn typeof value === \"undefined\" || value === null || value === \"\" || isNaN(parseFloat(value));\r\n\t}\r\n\r\n\tfunction setDefaultConfig() {\r\n\t\tvar csmPushServicekeepAlivePeriod = window.environmentData.csmPushServicekeepAlivePeriod;\r\n\t\tvar csmPushServicekeepAliveBuffer = window.environmentData.csmPushServicekeepAliveBuffer;\r\n\r\n\t\tsocketConfig = {\r\n\t\t\tkeepAlivePeriod: !isNullOrNaN(csmPushServicekeepAlivePeriod)\r\n\t\t\t\t? parseFloat(csmPushServicekeepAlivePeriod)\r\n\t\t\t\t: defaultKeepAlivePeriod,\r\n\t\t\tkeepAliveBuffer: !isNullOrNaN(csmPushServicekeepAliveBuffer)\r\n\t\t\t\t? parseFloat(csmPushServicekeepAliveBuffer)\r\n\t\t\t\t: defaultKeepAliveBuffer,\r\n\t\t};\r\n\t\tisShutDownMode = false;\r\n\t\tisStartMode = true;\r\n\t\tlastKeepAliveMsg = null;\r\n\t\teventsCalledOnce = {\r\n\t\t\tfirstFrame: false,\r\n\t\t\tfirstQuote: false,\r\n\t\t};\r\n\t}\r\n\r\n\tfunction socketIsNull() {\r\n\t\treturn _socket === null || typeof _socket === \"undefined\";\r\n\t}\r\n\r\n\tfunction tryCloseSocket(disposeOnly) {\r\n\t\tif (socketIsNull()) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tdisposeOnly = disposeOnly || false;\r\n\t\t_socket.onopen = null;\r\n\t\t_socket.onerror = null;\r\n\t\t_socket.onmessage = null;\r\n\t\t_socket.onclose = null;\r\n\t\tif (!disposeOnly) _socket.close();\r\n\t\t_socket = null;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction stopConnection(shutDownMode) {\r\n\t\tif (!tryCloseSocket()) return;\r\n\t\tif (shutDownMode) {\r\n\t\t\tclearKeepAliveTimeInterval();\r\n\t\t}\r\n\t\tvar stack = new Error().stack ? new Error().stack : \"not supported by this browser\";\r\n\t\tlog(\"stopping, stack: \" + stack.toString().substring(0, 1500));\r\n\t\tisShutDownMode = shutDownMode;\r\n\t}\r\n\r\n\tfunction onDisconnected() {\r\n\t\tif (onDisconnectedIsAlreadyRunning) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tonDisconnectedIsAlreadyRunning = true;\r\n\r\n\t\ttry {\r\n\t\t\tclearKeepAliveTimeInterval();\r\n\t\t\ttryCloseSocket();\r\n\r\n\t\t\tif (disconnectedHandler) {\r\n\t\t\t\tdisconnectedHandler();\r\n\t\t\t}\r\n\r\n\t\t\tif (isShutDownMode) {\r\n\t\t\t\tlog(\"disconnect reason: isShutDownMode\");\r\n\t\t\t} else if (isStartMode) {\r\n\t\t\t\tlog(\"disconnect reason: connection not successful on start\");\r\n\r\n\t\t\t\tif (hasStarted) {\r\n\t\t\t\t\thasStarted.reject(\"disconnected while is starting connection\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treconnect();\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tonDisconnectedIsAlreadyRunning = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction reconnect() {\r\n\t\tretriesOnDisconnectedFailedConnection += 1;\r\n\t\tif (retriesOnDisconnectedFailedConnection < 5 || retriesOnDisconnectedFailedConnection % 5 === 0) {\r\n\t\t\tlog(\"onDisconnected- retry: \" + retriesOnDisconnectedFailedConnection);\r\n\t\t}\r\n\r\n\t\tif (retriesOnDisconnectedFailedConnection <= disconnectedMaxRetries) {\r\n\t\t\twsState.ResetConnectionData();\r\n\t\t\tstart()\r\n\t\t\t\t.then(function () {\r\n\t\t\t\t\tonReconnected(retriesOnDisconnectedFailedConnection);\r\n\t\t\t\t\tonDisconnectedIsAlreadyRunning = false;\r\n\t\t\t\t})\r\n\t\t\t\t.fail(reconnect)\r\n\t\t\t\t.done();\r\n\t\t} else {\r\n\t\t\tvar errorMessage = \"socket disconnect max retries breached\";\r\n\r\n\t\t\tlog(errorMessage);\r\n\r\n\t\t\tif (notAvailableHandler) {\r\n\t\t\t\tnotAvailableHandler();\r\n\t\t\t}\r\n\r\n\t\t\tstopConnection(false);\r\n\t\t\tonDisconnectedIsAlreadyRunning = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onReconnected(retries) {\r\n\t\tif (reconnectedHandler) {\r\n\t\t\treconnectedHandler();\r\n\t\t}\r\n\r\n\t\tif (retries > 1) {\r\n\t\t\tlog(\"Reconnected after \" + retries + \" attempts\");\r\n\t\t}\r\n\t}\r\n\r\n\tfunction send(methodName, params) {\r\n\t\tif (canSend(methodName)) {\r\n\t\t\t_socket.send(JSON.stringify({ methodName: methodName, params: params }));\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tinit: init,\r\n\t\tsetNotAvailableHandler: function (fnHandler) {\r\n\t\t\tnotAvailableHandler = fnHandler;\r\n\t\t},\r\n\t\thasStarted: function () {\r\n\t\t\treturn hasStarted.promise;\r\n\t\t},\r\n\t\tsetMessageHandler: function (fnHandler) {\r\n\t\t\tmessageHandler = fnHandler;\r\n\t\t},\r\n\t\tsetReconnectedHandler: function (fnHandler) {\r\n\t\t\treconnectedHandler = fnHandler;\r\n\t\t},\r\n\t\tsetDisconnectedHandler: function (fnHandler) {\r\n\t\t\tdisconnectedHandler = fnHandler;\r\n\t\t},\r\n\t\tsend: send,\r\n\t\tstop: function () {\r\n\t\t\tstopConnection(true);\r\n\t\t},\r\n\t\tisConnected: isConnected,\r\n\t\tsetdisconnectedMaxRetries: function (maxRetries) {\r\n\t\t\tdisconnectedMaxRetries = maxRetries;\r\n\t\t},\r\n\t};\r\n});\r\n\n",
    "define(\"devicealerts/Alert\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"handlers/general\",\r\n\t\"Dictionary\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"handlers/Delegate\",\r\n\t\"cachemanagers/PortfolioStaticManager\",\r\n\t\"enums/loginlogoutreasonenum\",\r\n], function AlertBaseDef(require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tDictionary = require(\"Dictionary\"),\r\n\t\tcustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tdelegate = require(\"handlers/Delegate\"),\r\n\t\teLoginLogoutReason = require(\"enums/loginlogoutreasonenum\"),\r\n\t\tportfolioManager = require(\"cachemanagers/PortfolioStaticManager\");\r\n\tvar AlertBase = function AlertBaseClass() {\r\n\t\tvar visible = ko.observable(false),\r\n\t\t\ttitle = ko.observable(\"\"),\r\n\t\t\tbody = ko.observable(\"\"),\r\n\t\t\tmessages = ko.observableArray([]),\r\n\t\t\tdisableThisAlertByCookie = ko.observable(false),\r\n\t\t\tcaller = ko.observable(\"\"),\r\n\t\t\tbuttons = ko.observableArray([]),\r\n\t\t\tlinks = ko.observableArray([]),\r\n\t\t\ttheme = ko.observable(),\r\n\t\t\tonCloseAction = new delegate();\r\n\r\n\t\tvar injectDepositButtons = function () {\r\n\t\t\tvar thisAlert = this;\r\n\t\t\tthisAlert.buttons.removeAll();\r\n\t\t\tthisAlert.links.removeAll();\r\n\r\n\t\t\tif (!customer.prop.isDemo) {\r\n\t\t\t\tif (portfolioManager.Portfolio.pendingWithdrawals.sign() > 0) {\r\n\t\t\t\t\tthisAlert.buttons.push(\r\n\t\t\t\t\t\tnew thisAlert.buttonProperties(\r\n\t\t\t\t\t\t\tDictionary.GetItem(\"ViewCancel\"),\r\n\t\t\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t\t\tthisAlert.visible(false);\r\n\r\n\t\t\t\t\t\t\t\trequire([\"devicemanagers/ViewModelsManager\"], function (viewModelsManager) {\r\n\t\t\t\t\t\t\t\t\tviewModelsManager.VManager.SwitchViewVisible(eForms.PendingWithdrawal);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\"Pending\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthisAlert.buttons.push(\r\n\t\t\t\t\tnew thisAlert.buttonProperties(\r\n\t\t\t\t\t\tDictionary.GetItem(\"DepositeNow\"),\r\n\t\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t\trequire([\"devicemanagers/ViewModelsManager\"], function (viewModelsManager) {\r\n\t\t\t\t\t\t\t\tko.postbox.publish(\"action-source\", \"InsufficientAvailableMarginPopUp\");\r\n\t\t\t\t\t\t\t\tif (Browser.isChromeOnIOS()) {\r\n\t\t\t\t\t\t\t\t\tviewModelsManager.VManager.RedirectToForm(eForms.Deposit);\r\n\t\t\t\t\t\t\t\t\tthisAlert.visible(false);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthisAlert.visible(false);\r\n\t\t\t\t\t\t\t\t\tviewModelsManager.VManager.RedirectToForm(eForms.Deposit);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\"Deposite\"\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tthisAlert.links.push(\r\n\t\t\t\tnew thisAlert.linkProperties(\r\n\t\t\t\t\tDictionary.GetItem(\"NotNow\"),\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\t// patch for:\r\n\t\t\t\t\t\tif (Browser.isChromeOnIOS()) {\r\n\t\t\t\t\t\t\trequire([\"devicemanagers/ViewModelsManager\"], function (viewModelsManager) {\r\n\t\t\t\t\t\t\t\tviewModelsManager.VManager.SwitchViewVisible(customer.prop.mainPage, {});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthisAlert.visible(false);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"NotNow\"\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tvar addRedirectButton = function (text, css) {\r\n\t\t\tvar thisAlert = this;\r\n\t\t\tthisAlert.buttons.push(\r\n\t\t\t\tnew thisAlert.buttonProperties(\r\n\t\t\t\t\ttext,\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\tvar properties = thisAlert.properties,\r\n\t\t\t\t\t\t\tredirectToViewType,\r\n\t\t\t\t\t\t\tviewArgs;\r\n\r\n\t\t\t\t\t\tif (!general.isEmptyValue(properties.redirectToView)) {\r\n\t\t\t\t\t\t\tredirectToViewType = properties.redirectToView;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!general.isEmptyValue(properties.redirectToViewArgs)) {\r\n\t\t\t\t\t\t\tviewArgs = properties.redirectToViewArgs;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tviewArgs = \"\";\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthisAlert.visible(false);\r\n\r\n\t\t\t\t\t\tif (properties.enableButton) {\r\n\t\t\t\t\t\t\tproperties.enableButton(true);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!general.isEmptyValue(redirectToViewType)) {\r\n\t\t\t\t\t\t\tif (redirectToViewType === \"exit\") {\r\n\t\t\t\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.alert_exitApp);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trequire([\"devicemanagers/ViewModelsManager\"], function (viewModelsManager) {\r\n\t\t\t\t\t\t\t\t\tviewModelsManager.VManager.SwitchViewVisible(redirectToViewType, viewArgs);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcss\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\t// callback function\r\n\t\tvar closeMe = function (obj) {\r\n\t\t\tobj = obj || this;\r\n\t\t\tobj.visible(false);\r\n\r\n\t\t\tonCloseAction.Invoke();\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\talertName: \"devicealerts/Alert\",\r\n\t\t\ttheme: theme,\r\n\t\t\tvisible: visible,\r\n\t\t\tcaller: caller,\r\n\t\t\ttitle: title,\r\n\t\t\ticon: \"\",\r\n\t\t\tbody: body,\r\n\t\t\tmessages: messages,\r\n\t\t\tproperties: {},\r\n\t\t\tDisableThisAlertByCookie: disableThisAlertByCookie,\r\n\t\t\tNeedToCreateCookie: true,\r\n\t\t\tcookieName: \"\",\r\n\t\t\tbuttons: buttons,\r\n\t\t\tbuttonProperties: function (text, click, cssClass, idprop) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tonclick: click,\r\n\t\t\t\t\tcss_Class: cssClass,\r\n\t\t\t\t\tidprop: idprop,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tlinks: links,\r\n\t\t\tlinkProperties: function (text, click, cssClass) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttext: text,\r\n\t\t\t\t\tonclick: click,\r\n\t\t\t\t\tcss_Class: cssClass,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tinjectDepositButtons: injectDepositButtons,\r\n\t\t\taddRedirectButton: addRedirectButton,\r\n\t\t\tprepareForShow: function () {},\r\n\t\t\t// virtual override-able\r\n\t\t\thide: function () {\r\n\t\t\t\tif (visible()) {\r\n\t\t\t\t\tvisible(false);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshow: function () {\r\n\t\t\t\tthis.theme(this.properties.theme);\r\n\r\n\t\t\t\tif (this.prepareForShow) {\r\n\t\t\t\t\tthis.prepareForShow();\r\n\t\t\t\t}\r\n\t\t\t\tthis.visible(true);\r\n\t\t\t},\r\n\t\t\tonCloseAction: onCloseAction,\r\n\t\t\tonClose: closeMe,\r\n\t\t};\r\n\t};\r\n\treturn AlertBase;\r\n});\r\n\n",
    "define(\"devicealerts/ExitAlert\", [\r\n\t\"require\",\r\n\t\"devicealerts/Alert\",\r\n\t\"dataaccess/dalCommon\",\r\n\t\"Dictionary\",\r\n\t\"enums/loginlogoutreasonenum\",\r\n], function ExitAlertDef(require) {\r\n\tvar AlertBase = require(\"devicealerts/Alert\"),\r\n\t\tdalCommon = require(\"dataaccess/dalCommon\"),\r\n\t\teLoginLogoutReason = require(\"enums/loginlogoutreasonenum\"),\r\n\t\tDictionary = require(\"Dictionary\");\r\n\r\n var ExitAlert = function ExitAlertClass() {\r\n\t\tvar inheritedAlertInstance = new AlertBase();\r\n\r\n\t\tvar init = function () {\r\n\t\t\tinheritedAlertInstance.alertName = \"ExitAlert\";\r\n\t\t\tinheritedAlertInstance.visible(false);\r\n\t\t\tinheritedAlertInstance.body(Dictionary.GetItem(\"areyousurelogout\"));\r\n\r\n\t\t\tcreateButtons();\r\n\t\t};\r\n\r\n\t\tvar createButtons = function () {\r\n\t\t\tinheritedAlertInstance.buttons.removeAll();\r\n\r\n\t\t\tinheritedAlertInstance.buttons.push(\r\n\t\t\t\tnew inheritedAlertInstance.buttonProperties(\r\n\t\t\t\t\tDictionary.GetItem(\"ok\"),\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.mobile_exitAlert);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"Ok\"\r\n\t\t\t\t),\r\n\t\t\t\tnew inheritedAlertInstance.buttonProperties(\r\n\t\t\t\t\tDictionary.GetItem(\"cancel\"),\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\tinheritedAlertInstance.hide();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"Cancel\"\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tGetAlert: inheritedAlertInstance,\r\n\t\t};\r\n\t};\r\n\treturn ExitAlert;\r\n});\r\n\n",
    "define('devicealerts/BonusAlert', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var BonusAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = 'BonusAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(String.format(Dictionary.GetItem('pendingbonustext'), '', '', ''));\r\n\r\n\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n            new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"),\r\n             function () {\r\n                 inheritedAlertInstance.visible(false);\r\n             }, 'btnOk'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return BonusAlert;\r\n});\n",
    "function StorageFactory(storageType) {\r\n\tvar inMemoryStorage = {},\r\n\t\tisNativeSupported = StorageFactory.isSupported(storageType),\r\n\t\tstorage = (function () {\r\n\t\t\tif (isNativeSupported)\r\n\t\t\t\tswitch (storageType) {\r\n\t\t\t\t\tcase StorageFactory.eStorageType.session:\r\n\t\t\t\t\t\treturn window.sessionStorage;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase StorageFactory.eStorageType.local:\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn window.localStorage;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t})();\r\n\r\n\tfunction getItem(_key) {\r\n\t\tif (isNativeSupported) {\r\n\t\t\treturn storage.getItem(_key);\r\n\t\t}\r\n\t\treturn inMemoryStorage[_key] || null;\r\n\t}\r\n\r\n\tfunction setItem(_key, _value) {\r\n\t\tif (isNativeSupported) {\r\n\t\t\tstorage.setItem(_key, _value);\r\n\t\t} else {\r\n\t\t\tinMemoryStorage[_key] = _value;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction removeItem(_key) {\r\n\t\tif (isNativeSupported) {\r\n\t\t\tstorage.removeItem(_key);\r\n\t\t} else {\r\n\t\t\tdelete inMemoryStorage[_key];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction clear() {\r\n\t\tif (isNativeSupported) {\r\n\t\t\tstorage.clear();\r\n\t\t} else {\r\n\t\t\tinMemoryStorage = {};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction key(n) {\r\n\t\tif (isNativeSupported) {\r\n\t\t\treturn storage.key(n);\r\n\t\t} else {\r\n\t\t\treturn Object.keys(inMemoryStorage)[n] || null;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetItem: getItem,\r\n\t\tsetItem: setItem,\r\n\t\tremoveItem: removeItem,\r\n\t\tclear: clear,\r\n\t\tkey: key,\r\n\t};\r\n}\r\n\r\nStorageFactory.isSupported = function (storageType) {\r\n\ttry {\r\n\t\tvar storage = null;\r\n\t\tswitch (storageType) {\r\n\t\t\tcase StorageFactory.eStorageType.session:\r\n\t\t\t\tstorage = window.sessionStorage;\r\n\t\t\t\tbreak;\r\n\t\t\tcase StorageFactory.eStorageType.local:\r\n\t\t\tdefault:\r\n\t\t\t\tstorage = window.localStorage;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tvar _key = \"__tst_strg_key__\";\r\n\t\tstorage.setItem(_key, _key);\r\n\t\tstorage.removeItem(_key);\r\n\t\treturn true;\r\n\t} catch (e) {\r\n\t\treturn false;\r\n\t}\r\n};\r\n\r\nStorageFactory.eStorageType = {\r\n\tlocal: 0,\r\n\tsession: 1,\r\n};\r\n\r\n(function (root, factory) {\r\n\tif (typeof define === \"function\" && define.amd) {\r\n\t\t// AMD. Register as an anonymous module.\r\n\t\tdefine('global/storagefactory',[], factory);\r\n\t} else {\r\n\t\t// Browser globals\r\n\t\troot = factory();\r\n\t}\r\n})(typeof self !== \"undefined\" ? self : this, function () {\r\n\t// Use b in some fashion.\r\n\r\n\t// Just return a value to define the module export.\r\n\t// This example returns an object, but the module\r\n\t// can return a function as the exported value.\r\n\treturn StorageFactory;\r\n});\r\n\n",
    "define(\r\n    'devicealerts/CloseDealConfirmationAlert',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'devicealerts/Alert',\r\n        'Dictionary',\r\n        'initdatamanagers/InstrumentsManager',\r\n        'global/storagefactory'\r\n    ],\r\n    function CloseDealConfirmaionAlertDef(require) {\r\n        var ko = require('knockout'),\r\n            alertBase = require('devicealerts/Alert'),\r\n            storageFactory = require('global/storagefactory'),\r\n            instrumentsManager = require('initdatamanagers/InstrumentsManager'),\r\n            dictionary = require('Dictionary');\r\n\r\n        var CloseDealConfirmaionAlert = function CloseDealConfirmaionAlertClass() {\r\n            var inheritedAlertInstance = new alertBase(),\r\n                LS = storageFactory(storageFactory.eStorageType.local);\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = 'CloseDealConfirmationAlert';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = prepareForShow;\r\n                inheritedAlertInstance.hideConfirmation = ko.observable(false);\r\n                inheritedAlertInstance.dontshowagain = dictionary.GetItem('dontshowagain');\r\n                inheritedAlertInstance.title(dictionary.GetItem('CloseDeal'));\r\n                inheritedAlertInstance.body(dictionary.GetItem('closeSingleDealAlert'));\r\n            }\r\n\r\n            function getInstrumentData(instrumentId) {\r\n                var instrument = instrumentsManager.GetInstrument(instrumentId);\r\n\r\n                return {\r\n                    instrumentId: instrument.id,\r\n                    baseSymbolId: instrument.baseSymbolId,\r\n                    otherSymbolId: instrument.otherSymbolId\r\n                };\r\n            }\r\n\r\n            function prepareForShow() {\r\n                var self = this;\r\n\r\n                this.selectedData = this.properties.selectedData;\r\n                this.getInstrumentData = getInstrumentData;\r\n\r\n                this.confirmationCloseDeal = function onConfirmationCloseDeal() {\r\n                    if (inheritedAlertInstance.hideConfirmation()) {\r\n                        LS.setItem('hideConfCloseDeals', 'true');\r\n                    }\r\n\r\n                    inheritedAlertInstance.visible(false);\r\n                    self.properties.confirmationCloseDeal();\r\n                };\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return CloseDealConfirmaionAlert;\r\n    }\r\n);\r\n\r\n\n",
    "define(\"devicealerts/ClosePositionsConfirmation\", [\"require\", 'devicealerts/Alert'], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n\r\n    var ClosePositionsConfirmation = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var defaultProp = {};\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = \"ClosePositionsConfirmation\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.properties = defaultProp;\r\n\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n            new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"),\r\n             function () {\r\n                 inheritedAlertInstance.visible(false);\r\n             }, 'btnOk'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return ClosePositionsConfirmation;\r\n});\n",
    "define('devicealerts/ServerResponseAlert', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var ServerResponseAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = 'ServerResponseAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.addRedirectButton(Dictionary.GetItem(\"ok\"), 'btnCancel');\r\n        };\r\n\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return ServerResponseAlert;\r\n});\n",
    "define('devicealerts/SimpleClientAlert', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        Dictionary = require(\"Dictionary\");\r\n\r\n    var SimpleClientAlert = function() {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function() {\r\n            inheritedAlertInstance.alertName = 'SimpleClientAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"),\r\n                    function() {\r\n                        inheritedAlertInstance.visible(false);\r\n                    }, 'btnCancel'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return SimpleClientAlert;\r\n});\n",
    "define('devicealerts/MaxIdleTimeAlertWrapper', [\"require\", 'devicealerts/Alert'], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n\r\n    var MaxIdleTimeAlertWrapper = function () {\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = 'MaxIdleTimeAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem('MaxIdleTimeAlert'));\r\n            inheritedAlertInstance.title = Dictionary.GetItem(\"maxIdleTimeAlertTitle\");\r\n\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem(\"exit\"),\r\n                    function () {\r\n                        inheritedAlertInstance.onClose();\r\n                        ActivitySupervisor.Exit();\r\n                    },\r\n                    'Exit'\r\n                ),\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem(\"stay\"),\r\n                    function () {\r\n                        inheritedAlertInstance.onClose();\r\n                        ActivitySupervisor.UpdateStay();\r\n                    },\r\n                    'Stay'\r\n                )\r\n            );\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return MaxIdleTimeAlertWrapper;\r\n});\n",
    "define(\"devicealerts/DoubleLoginAlert\", [\r\n\t\"require\",\r\n\t\"devicemanagers/AlertsManager\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"dataaccess/dalCommon\",\r\n\t\"enums/loginlogoutreasonenum\",\r\n], function (require) {\r\n\tvar dalCommon = require(\"dataaccess/dalCommon\"),\r\n\t\teLoginLogoutReason = require(\"enums/loginlogoutreasonenum\"),\r\n\t\tcustomer = require(\"initdatamanagers/Customer\");\r\n\r\n\tvar DoubleLoginAlert = (function DoubleLoginAlertClass() {\r\n\t\tvar logoutTimer;\r\n\r\n\t\tfunction show() {\r\n\t\t\tvar AlertsManager = require(\"devicemanagers/AlertsManager\");\r\n\r\n\t\t\tif (!customer.isAutologin()) {\r\n\t\t\t\tlogoutTimer = setTimeout(function () {\r\n\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.mobile_doubleLogin1);\r\n\t\t\t\t}, 180000);\r\n\t\t\t}\r\n\r\n\t\t\tAlertsManager.UpdateAlert(AlertTypes.DoubleLoginAlert);\r\n\t\t\tAlertsManager.PopAlert(AlertTypes.DoubleLoginAlert);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tShow: show,\r\n\t\t\tLogoutTimer: logoutTimer,\r\n\t\t};\r\n\t})();\r\n\r\n\treturn DoubleLoginAlert;\r\n});\r\n\n",
    "define(\"devicealerts/DoubleLoginAlertWrapper\", [\r\n\t\"require\",\r\n\t\"devicealerts/Alert\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"dataaccess/dalCommon\",\r\n\t\"Dictionary\",\r\n\t\"handlers/general\",\r\n\t\"devicealerts/DoubleLoginAlert\",\r\n\t\"enums/loginlogoutreasonenum\",\r\n], function DoubleLoginAlertWrapperDef(require) {\r\n\tvar AlertBase = require(\"devicealerts/Alert\"),\r\n\t\tdalCommon = require(\"dataaccess/dalCommon\"),\r\n\t\tcustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tdictionary = require(\"Dictionary\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\teLoginLogoutReason = require(\"enums/loginlogoutreasonenum\"),\r\n\t\tdoubleLoginAlert = require(\"devicealerts/DoubleLoginAlert\");\r\n\r\n\tvar DoubleLoginAlertWrapper = function DoubleLoginAlertWrapperClass() {\r\n\t\tvar inheritedAlertInstance = new AlertBase();\r\n\t\tvar exitInProcess = false;\r\n\t\tvar alertBody = customer.isAutologin()\r\n\t\t\t? dictionary.GetItem(\"loginDoubleLogin\") + \" \" + dictionary.GetItem(\"loginDoubleLogin_Qus2\")\r\n\t\t\t: dictionary.GetItem(\"loginDoubleLogin\");\r\n\r\n\t\tfunction init() {\r\n\t\t\tinheritedAlertInstance.alertName = \"DoubleLoginAlert\";\r\n\t\t\tinheritedAlertInstance.visible(false);\r\n\t\t\tinheritedAlertInstance.body(alertBody);\r\n\t\t\tcreateButtons();\r\n\t\t}\r\n\r\n\t\tfunction createButtons() {\r\n\t\t\tinheritedAlertInstance.buttons.removeAll();\r\n\t\t\tinheritedAlertInstance.hide = exit;\r\n\r\n\t\t\tif (customer.isAutologin()) {\r\n\t\t\t\tinheritedAlertInstance.buttons.push(\r\n\t\t\t\t\tnew inheritedAlertInstance.buttonProperties(\r\n\t\t\t\t\t\tdictionary.GetItem(\"doubleLoginReconnect\"),\r\n\t\t\t\t\t\tgoToLogin,\r\n\t\t\t\t\t\t\"Login\"\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\r\n\t\t\t\tinheritedAlertInstance.buttons.push(\r\n\t\t\t\t\tnew inheritedAlertInstance.buttonProperties(dictionary.GetItem(\"exit\"), exit, \"Exit\")\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tinheritedAlertInstance.buttons.push(\r\n\t\t\t\t\tnew inheritedAlertInstance.buttonProperties(\r\n\t\t\t\t\t\tdictionary.GetItem(\"doubleLoginReconnect\"),\r\n\t\t\t\t\t\texit,\r\n\t\t\t\t\t\t\"Exit\"\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction goToLogin() {\r\n\t\t\tclearTimer();\r\n\t\t\twindow.location = \"Account/Login/\" + \"?reason=\" + eLoginLogoutReason.mobile_doubleLogin2;\r\n\t\t}\r\n\r\n\t\tfunction exit() {\r\n\t\t\tif (exitInProcess) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\texitInProcess = true;\r\n\t\t\tclearTimer();\r\n\r\n\t\t\tdalCommon.Exit(eLoginLogoutReason.mobile_doubleLogin3);\r\n\t\t}\r\n\r\n\t\tfunction clearTimer() {\r\n\t\t\tif (general.isDefinedType(doubleLoginAlert.LogoutTimer)) {\r\n\t\t\t\tclearTimeout(doubleLoginAlert.LogoutTimer);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tGetAlert: inheritedAlertInstance,\r\n\t\t};\r\n\t};\r\n\r\n\treturn DoubleLoginAlertWrapper;\r\n});\r\n\n",
    "define(\"devicealerts/ExposureCoverageAlert\", [\"require\", 'devicealerts/Alert', \"Dictionary\", \"initdatamanagers/Customer\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        Dictionary = require(\"Dictionary\"),\r\n        $customer = require(\"initdatamanagers/Customer\");\r\n\r\n    var ExposureCoverageAlert = function () {\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.name = 'ExposureCoverageAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem(\"lowMarginAlert\"));\r\n            createButtons();\r\n        };\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            if (!$customer.prop.isDemo)\r\n                inheritedAlertInstance.buttons.push(new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"DepositeNow\"),\r\n                    function () {\r\n                        require(['devicemanagers/ViewModelsManager'], function ($viewModelsManager) {\r\n                            $viewModelsManager.VManager.RedirectToForm(eForms.Deposit);\r\n                        });\r\n                        inheritedAlertInstance.visible(false);\r\n                    }, 'btnOk'));\r\n            inheritedAlertInstance.buttons.push(new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"cancel\"), function () {\r\n                inheritedAlertInstance.visible(false);\r\n            }, 'btnCancel'));\r\n        };\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return ExposureCoverageAlert;\r\n});\n",
    "define('devicealerts/MinEquityAlertWrapper', [\"require\", 'devicealerts/Alert'], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n\r\n    var MinEquityAlertWrapper = function () {\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = 'MinEquityAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.prepareForShow = prepareForShow;\r\n        };\r\n\r\n        var prepareForShow = function () {\r\n            inheritedAlertInstance.injectDepositButtons();\r\n        };\r\n\r\n        return {\r\n            GetAlert: inheritedAlertInstance,\r\n            Init: init\r\n        };\r\n    };\r\n    return MinEquityAlertWrapper;\r\n});\n",
    "define('devicealerts/GeneralOkCancelAlert', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var GeneralOkCancelAlert = function () {\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var prepareForShow = function () {\r\n            createButtons();\r\n        };\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = 'GeneralOkCancelAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.onClose = onClose;\r\n            inheritedAlertInstance.prepareForShow = prepareForShow;\r\n\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    inheritedAlertInstance.properties.okButtonCaption || Dictionary.GetItem(\"proceed\"),\r\n                    function () {\r\n                        inheritedAlertInstance.overwriteNavFlow = inheritedAlertInstance.properties.overwriteNavFlow;\r\n                        inheritedAlertInstance.visible(false);\r\n                        if (jQuery.isFunction(inheritedAlertInstance.properties.okButtonCallback) && !inheritedAlertInstance.overwriteNavFlow) {\r\n                            inheritedAlertInstance.properties.okButtonCallback();\r\n                        }\r\n                    },\r\n                    inheritedAlertInstance.properties.btnOkClass || 'btnOk'\r\n                ),\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    inheritedAlertInstance.properties.cancelButtonCaption || Dictionary.GetItem(\"cancel\"),\r\n                    function () {\r\n                        inheritedAlertInstance.overwriteNavFlow = false;\r\n                        inheritedAlertInstance.visible(false);\r\n\r\n                        if (jQuery.isFunction(inheritedAlertInstance.properties.cancelButtonCallback)) {\r\n                            inheritedAlertInstance.properties.cancelButtonCallback();\r\n                        }\r\n                    },\r\n                    inheritedAlertInstance.properties.btnCancelClass || 'btnCancel'\r\n                )\r\n            );\r\n        };\r\n\r\n        var onClose = function () {\r\n            inheritedAlertInstance.visible(false);\r\n\r\n            if (jQuery.isFunction(inheritedAlertInstance.properties.onClose)) {\r\n                inheritedAlertInstance.properties.onClose();\r\n            }\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n\r\n    return GeneralOkCancelAlert;\r\n});\r\n\n",
    "define('devicealerts/GeneralOkAlert', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var GeneralOkAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var prepareForShow = function () {\r\n            createButtons();\r\n        };\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = 'GeneralOkAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.onClose = onClose;\r\n            inheritedAlertInstance.prepareForShow = prepareForShow;\r\n\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    inheritedAlertInstance.properties.okButtonCaption || Dictionary.GetItem(\"ok\"),\r\n                    function () {\r\n                        inheritedAlertInstance.overwriteNavFlow = inheritedAlertInstance.properties.overwriteNavFlow;\r\n                        inheritedAlertInstance.visible(false);\r\n\r\n                        //on close do a cleanup\r\n                        inheritedAlertInstance.body('');\r\n                        inheritedAlertInstance.title('');\r\n                        inheritedAlertInstance.messages.removeAll();\r\n\r\n                        if (jQuery.isFunction(inheritedAlertInstance.properties.okButtonCallback) && !inheritedAlertInstance.overwriteNavFlow) {\r\n                            inheritedAlertInstance.properties.okButtonCallback();\r\n                        }\r\n                    },\r\n                    'btnOk'\r\n                ));\r\n        };\r\n\r\n        var onClose = function () {\r\n            inheritedAlertInstance.visible(false);\r\n\r\n            if (jQuery.isFunction(inheritedAlertInstance.properties.onClose)) {\r\n                inheritedAlertInstance.properties.onClose();\r\n            }\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return GeneralOkAlert;\r\n});\n",
    "define(\r\n    'devicealerts/serverevents/ClientStateAlertExposureAlert',\r\n    [\r\n        \"require\",\r\n        'devicealerts/Alert',\r\n        \"Dictionary\",\r\n        \"knockout\"\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert');\r\n        var ko = require(\"knockout\");\r\n        var Dictionary = require(\"Dictionary\");\r\n\r\n        var ClientStateAlertExposureAlert = function () {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            var init = function () {\r\n                inheritedAlertInstance.alertName = 'ClientStateAlertExposureAlert';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.body(Dictionary.GetItem('OrderError12'));\r\n                inheritedAlertInstance.popCounter = ko.observable(0);\r\n                createButtons();\r\n            };\r\n            var createButtons = function () {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\"Ok\",\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n                        }, 'btnCancel'));\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n        return ClientStateAlertExposureAlert;\r\n    }\r\n);\r\n\n",
    "define(\"devicealerts/serverevents/ClientStateAlertExposureCoverageAlert\", [\"require\", 'devicealerts/Alert', \"knockout\", \"Dictionary\", 'initdatamanagers/Customer'], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var customer = require('initdatamanagers/Customer');\r\n    var ko = require(\"knockout\");\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var ClientStateAlertExposureCoverageAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            var isMarginMaintenance = customer.prop.maintenanceMarginPercentage > 0;\r\n\r\n            inheritedAlertInstance.alertName = \"ClientStateAlertExposureCoverageAlert\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem(isMarginMaintenance ? \"lowMarginCallAlert2\" : \"lowMarginCallAlert\"));\r\n            inheritedAlertInstance.popCounter = ko.observable(0);\r\n            inheritedAlertInstance.prepareForShow = prepareForShow;\r\n\r\n        };\r\n\r\n        var prepareForShow = function () {\r\n            inheritedAlertInstance.injectDepositButtons();\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return ClientStateAlertExposureCoverageAlert;\r\n});\n",
    "define(\"devicealerts/serverevents/ClientStateAlertSystemMode\", [\r\n\t\"require\",\r\n\t\"devicealerts/Alert\",\r\n\t\"Dictionary\",\r\n\t\"enums/loginlogoutreasonenum\",\r\n], function (require) {\r\n\tvar AlertBase = require(\"devicealerts/Alert\");\r\n\tvar Dictionary = require(\"Dictionary\");\r\n\tvar eLoginLogoutReason = require(\"enums/loginlogoutreasonenum\");\r\n\r\n\tvar ClientStateAlertSystemMode = function () {\r\n\t\tvar inheritedAlertInstance = new AlertBase();\r\n\r\n\t\tvar init = function () {\r\n\t\t\tinheritedAlertInstance.alertName = \"devicealerts/serverevents/ClientStateAlertSystemMode\";\r\n\t\t\tinheritedAlertInstance.visible(false);\r\n\t\t\tinheritedAlertInstance.body(Dictionary.GetItem(\"maintenanceAlertContent\"));\r\n\t\t\tcreateButtons();\r\n\t\t};\r\n\t\tvar createButtons = function () {\r\n\t\t\tinheritedAlertInstance.buttons.removeAll();\r\n\t\t\tinheritedAlertInstance.buttons.push(\r\n\t\t\t\tnew inheritedAlertInstance.buttonProperties(\r\n\t\t\t\t\t\"Ok\",\r\n\t\t\t\t\tfunction () {\r\n\t\t\t\t\t\tinheritedAlertInstance.visible(false);\r\n\t\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.clientStateError);\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"btnCancel\"\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tGetAlert: inheritedAlertInstance,\r\n\t\t};\r\n\t};\r\n\r\n\treturn ClientStateAlertSystemMode;\r\n});\r\n\n",
    "define(\"devicealerts/serverevents/ClientStateAlertApplicationClosing\", [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var ClientStateAlertApplicationClosing = function() {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function() {\r\n            inheritedAlertInstance.alertName = \"ClientStateAlertApplicationClosing\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem('statusApplicationClosing'));\r\n            createButtons();\r\n        };\r\n        var createButtons = function() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\"Ok\",\r\n                    function() {\r\n                        inheritedAlertInstance.visible(false);\r\n                    }, 'btnCancel'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n\r\n    return ClientStateAlertApplicationClosing;\r\n});\n",
    "define(\"devicealerts/serverevents/PortfolioAlertAmlStatus\", [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n    \r\n    var PortfolioAlertAmlStatus = function() {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function() {\r\n            inheritedAlertInstance.alertName = 'PortfolioAlertAmlStatus';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem('AmlAlertContent'));\r\n            createButtons();\r\n        };\r\n        var createButtons = function() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"),\r\n                    function() {\r\n                        inheritedAlertInstance.visible(false);\r\n                    }, 'btnCancel'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return PortfolioAlertAmlStatus;\r\n});\r\n\n",
    "define(\r\n    'devicealerts/serverevents/PortfolioAlertIsActive',\r\n    [\r\n        \"require\",\r\n        'devicealerts/Alert',\r\n        \"Dictionary\"\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert');\r\n        var Dictionary = require(\"Dictionary\");\r\n\r\n        var PortfolioAlertIsActive = function () {\r\n\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            var init = function () {\r\n                inheritedAlertInstance.alertName = 'PortfolioAlertIsActive';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.body(Dictionary.GetItem(\"OrderError105\"));\r\n                //createButtons();\r\n\r\n                inheritedAlertInstance.prepareForShow = prepareForShow;\r\n            };\r\n\r\n            var prepareForShow = function () {\r\n                inheritedAlertInstance.injectDepositButtons();\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return PortfolioAlertIsActive;\r\n    }\r\n);\r\n\n",
    "define('devicealerts/serverevents/PortfolioAlertIsDemo', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n    \r\n    var PortfolioAlertIsDemo = function() {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function() {\r\n            inheritedAlertInstance.alertName = 'PortfolioAlertIsDemo';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem(\"demoLoginAlert\"));\r\n            inheritedAlertInstance.title(Dictionary.GetItem(\"demoLoginAlertTitle\"));\r\n            createButtons();\r\n        };\r\n        var createButtons = function() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"),\r\n                    function() {\r\n                        inheritedAlertInstance.visible(false);\r\n                    }, 'btnCancel'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return PortfolioAlertIsDemo;\r\n});\n",
    "define('devicealerts/serverevents/PortfolioAlertIsReal', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n    \r\n    var PortfolioAlertIsReal = function() {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function() {\r\n            inheritedAlertInstance.alertName = 'PortfolioAlertIsReal';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem(\"realLoginAlert\"));\r\n            inheritedAlertInstance.title(Dictionary.GetItem(\"realLoginAlertTitle\"));\r\n            createButtons();\r\n        };\r\n        var createButtons = function() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"),\r\n                    function() {\r\n                        inheritedAlertInstance.visible(false);\r\n                    }, 'btnCancel'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return PortfolioAlertIsReal;\r\n});\n",
    "define(\r\n    'devicealerts/serverevents/PortfolioAlertKycStatus',\r\n    [\r\n        'require',\r\n        'devicealerts/Alert',\r\n        'Dictionary'\r\n    ],\r\n    function PortfolioAlertKycStatusDef(require) {\r\n        var AlertBase = require('devicealerts/Alert');\r\n        var Dictionary = require('Dictionary');\r\n\r\n        var PortfolioAlertKycStatus = function PortfolioAlertKycStatusClass() {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            var init = function () {\r\n                inheritedAlertInstance.alertName = 'PortfolioAlertKycStatus';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.body(Dictionary.GetItem('OrderError106'));\r\n                createButtons();\r\n            };\r\n            var createButtons = function () {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(Dictionary.GetItem('ok'),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n                        }, 'btnCancel'));\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return PortfolioAlertKycStatus;\r\n    }\r\n);\n",
    "define(\"devicealerts/serverevents/PortfolioAlertCddStatus\", [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n    \r\n    var PortfolioAlertCddStatus = function() {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function() {\r\n            inheritedAlertInstance.alertName = 'PortfolioAlertCddStatus';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem('CddAlertContent'));\r\n            createButtons();\r\n        };\r\n        var createButtons = function() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"),\r\n                    function() {\r\n                        inheritedAlertInstance.visible(false);\r\n                    }, 'btnCancel'));\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return PortfolioAlertCddStatus;\r\n});\n",
    "define(\r\n    \"dataaccess/dalKycClientQuestionnaire\",\r\n    [\r\n        \"require\",\r\n        \"handlers/Ajaxer\",\r\n        'JSONHelper',\r\n        'handlers/general'\r\n    ],\r\n    function (require) {\r\n        var self = {},\r\n            callerInfo = 'dalKycClientQuestionnaire',\r\n            JSONHelper = require('JSONHelper'),\r\n            general = require('handlers/general'),\r\n            ajaxer = require('handlers/Ajaxer');\r\n\r\n        // public service api\r\n        self.post = function (customerAnswers, successFn, errorFn) {\r\n            var customerAnswersUrl = \"compliance/KycCustomerAnswers\";\r\n\r\n            new ajaxer().jsonPost(callerInfo, customerAnswersUrl, JSON.stringify(customerAnswers),\r\n                function (response) {\r\n                    var model = JSONHelper.STR2JSON(\"dalKycClientQuestionnaire:post\", response);\r\n\r\n                    if (general.isFunctionType(successFn)) {\r\n                        successFn(model);\r\n                    }\r\n                },\r\n                function (responseError) {\r\n                    if (general.isFunctionType(errorFn)) {\r\n                        errorFn(responseError);\r\n                    }\r\n                });\r\n        };\r\n\r\n        // public service api\r\n        self.postKycKnowledgeQuestionnaire = function (customerAnswers, successFn, errorFn) {\r\n            var customerAnswersUrl = \"compliance/KycKnowledgeCustomerAnswers\";\r\n\r\n            new ajaxer().jsonPost(callerInfo, customerAnswersUrl, JSON.stringify(customerAnswers),\r\n                function (response) {\r\n                    var model = JSONHelper.STR2JSON(\"dalKycClientQuestionnaire:postKycKnowledgeQuestionnaire\", response);\r\n\r\n                    if (general.isFunctionType(successFn)) {\r\n                        successFn(model);\r\n                    }\r\n                },\r\n                function (responseError) {\r\n                    if (general.isFunctionType(errorFn)) {\r\n                        errorFn(responseError);\r\n                    }\r\n                });\r\n        };\r\n\r\n        self.postCustomerFailedAware = function (onResponse) {\r\n            var customerFailedAwareUrl = \"compliance/CustomerFailedAware\";\r\n\r\n            new ajaxer().jsonPost(callerInfo, customerFailedAwareUrl, null, function (response) {\r\n                if (onResponse) {\r\n                    var responseObj = JSONHelper.STR2JSON(\"dalKycClientQuestionnaire:postCustomerFailedAware\", response);\r\n\r\n                    onResponse(responseObj);\r\n                }\r\n            });\r\n        };\r\n\r\n        self.get = function (successFn, errorFn) {\r\n            var getCustomerAnswersUrl = \"compliance/CustomerAnswers\";\r\n\r\n            new ajaxer().get(\r\n                callerInfo,\r\n                getCustomerAnswersUrl,\r\n                null,\r\n                function (response) {\r\n                    var serverModel = JSONHelper.STR2JSON(\"dalKycClientQuestionnaire:selfGet\", response);\r\n\r\n                    if (general.isFunctionType(successFn)) {\r\n                        successFn(serverModel);\r\n                    }\r\n                },\r\n                function (error) {\r\n                    if (general.isFunctionType(errorFn)) {\r\n                        errorFn(error);\r\n                    }\r\n\r\n                    throw new Error(\"Client Questionnaire Dal- ajax request failed:\" + getCustomerAnswersUrl);\r\n                }\r\n            );\r\n        };\r\n\r\n        return self;\r\n    }\r\n);\r\n\n",
    "/*\r\n * require\r\n * Enum.js for kycStatus\r\n * $viewModelsManager for $viewModelsManager.VManager.SwitchViewVisible\r\n */\r\ndefine(\r\n    'alerts/QuestionnaireValidationAlert',\r\n    [\r\n        \"require\",\r\n        'devicealerts/Alert',\r\n        \"Dictionary\",\r\n        \"dataaccess/dalKycClientQuestionnaire\",\r\n        'generalmanagers/StatesManager',\r\n        \"initdatamanagers/Customer\"\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert');\r\n        var Dictionary = require(\"Dictionary\");\r\n        var dal = require('dataaccess/dalKycClientQuestionnaire');\r\n        var statesManager = require('generalmanagers/StatesManager');\r\n        var customer = require(\"initdatamanagers/Customer\");\r\n\r\n        var QuestionnaireValidationAlert = function () {\r\n            // inheritance with Constructor function\r\n            var self = AlertBase.call(this),\r\n                alertsContents = {\r\n                    title: \"lblImportent\",\r\n                    messages: [\"KYC_Failed_p1\", \"KYC_Failed_p2\", \"KYC_Failed_p3\", \"KYC_Failed_p4\"],\r\n                    buttons: [\"btnIAmAware\", \"btnIAmExit\"]\r\n                };\r\n            var popUpManager = window.PopUpManager;\r\n            // public virtual: different implementation on desktop version where go to trading view is close current \r\n            // external window.\r\n            self.goToTradingView = function () {\r\n                require(['devicemanagers/ViewModelsManager'], function (viewModelsManager) {\r\n                    return viewModelsManager.VManager.SwitchViewVisible(customer.prop.startUpForm);\r\n                });\r\n            };\r\n\r\n            self.goToDepositView = function () {\r\n                require(['devicemanagers/ViewModelsManager'], function (viewModelsManager) {\r\n                    return viewModelsManager.VManager.RedirectToForm(eForms.Deposit);\r\n                });\r\n            };\r\n\r\n            self.defer = Q.defer();\r\n\r\n            self.alertName = \"ClientQuestionnaire\";\r\n            self.visible(false);\r\n\r\n            // implement alert interface\r\n            self.Init = function () { };\r\n\r\n            // implement alert interface\r\n            self.redirectAfterResponseAlert = function () {\r\n                // trading bonus or not deposit required - send to main\r\n                if (customer.prop.customerType === eCustomerType.TradingBonus || Dictionary.GetItem('preDepositRequired') !== \"1\") {\r\n                    self.goToTradingView();\r\n                    return;\r\n                } else {\r\n                    self.goToDepositView();\r\n                    return;\r\n                }\r\n            };\r\n\r\n            // public this manager main entry point\r\n            self.popAlert = function () {\r\n                var buttonProperties = self.buttonProperties,\r\n                    translatedMessages = [],\r\n                    i,\r\n                    len,\r\n                    failedAwareCallback = function () {\r\n                        if (!window.require) {\r\n                            throw new Error(\"KYC: logic error: compliance dal must be called after require is loaded\");\r\n                        }\r\n\r\n                        self.visible(false);\r\n                        dal.postCustomerFailedAware(function (responseObj) {\r\n                            if (!responseObj || (responseObj.status === 1 && responseObj.result === true)) {\r\n                                statesManager.States.KycStatus(eKYCStatus.FailedAware);\r\n                                self.defer.resolve();\r\n                            }\r\n                        });\r\n\r\n                    };\r\n\r\n                // create buttons\r\n\r\n                self.buttons.removeAll();\r\n\r\n                // 1. im aware button\r\n                self.buttons.push(buttonProperties(\r\n                    Dictionary.GetItem(alertsContents.buttons[0]),\r\n                    function () {\r\n                        failedAwareCallback();\r\n                        $statesManager.States.KycStatus(eKYCStatus.FailedAware);\r\n                    })\r\n                );\r\n\r\n                // 2. cancel button\r\n                self.buttons.push(buttonProperties(\r\n                    Dictionary.GetItem(alertsContents.buttons[1]),\r\n                    function () {\r\n\r\n                        if (Dictionary.GetItem('preDepositRequired', 'application_configuration') !== \"1\") {\r\n                            self.visible(false);\r\n                        } else {\r\n                            self.visible(false);\r\n                            popUpManager.ClosePopup();\r\n                        }\r\n                        self.defer.resolve();\r\n                    })\r\n                );\r\n\r\n\r\n                for (i = 0, len = alertsContents.messages.length; i < len; i++) {\r\n                    translatedMessages.push(Dictionary.GetItem(alertsContents.messages[i]));\r\n                }\r\n\r\n                // parameters : alertType, title, body, messages, properties, withoutLineBrakes\r\n                AlertsManager.UpdateAlert(\r\n                    AlertTypes.ClientQuestionnaire,\r\n                    Dictionary.GetItem(alertsContents.title),\r\n                    undefined, // eslint-disable-line\r\n                    translatedMessages\r\n                );\r\n\r\n\r\n                // show the alert\r\n                AlertsManager.PopAlert(AlertTypes.ClientQuestionnaire);\r\n\r\n                return self.defer.promise;\r\n            };\r\n\r\n            // implement alert base interface\r\n            self.GetAlert = self;\r\n\r\n            return self;\r\n        };\r\n\r\n        return QuestionnaireValidationAlert;\r\n    }\r\n);\r\n\n",
    "define('devicealerts/CddQuestionnaireAlert', [\"require\", 'handlers/general','devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        general = require('handlers/general'),\r\n        Dictionary = require(\"Dictionary\");\r\n\r\n    var CddQuestionnaireAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = \"CddClientQuestionnaire\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.body(Dictionary.GetItem('cddNOtCompleteTryOpenDeal'));\r\n            inheritedAlertInstance.title(Dictionary.GetItem('lblImportent'));\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem(\"btnCompleteQuestionnaire\"),\r\n                    function () {\r\n                        inheritedAlertInstance.visible(false);\r\n                        closeDialog();\r\n                        require(['devicemanagers/ViewModelsManager'], function ($viewModelsManager) {\r\n                            $viewModelsManager.VManager.SwitchViewVisible(eForms.ClientQuestionnaire);\r\n                        });\r\n                        \r\n                    },\r\n                    'btnCancel'\r\n                )\r\n            );\r\n        };\r\n\r\n        var closeDialog = function () {\r\n            if (general.isDefinedType(DialogViewModel)) {\r\n                DialogViewModel.close();\r\n            }\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n\r\n    };\r\n    return CddQuestionnaireAlert;\r\n});\r\n\r\n\n",
    "define(\r\n    'devicealerts/FingerprintLoginActivatedAlert',\r\n    [\r\n        'require',\r\n        'devicealerts/Alert',\r\n        'handlers/general'\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            general = require('handlers/general');\r\n\r\n        var FingerprintLoginActivatedAlert = function () {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = 'FingerprintLoginActivatedAlert';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = createButtons;\r\n            }\r\n\r\n            function createButtons() {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem('ok'),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n\r\n                            if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                                inheritedAlertInstance.properties.okButtonCallback();\r\n                            }\r\n                        },\r\n                        'btn',\r\n                        'fingerprint_ok'\r\n                    )\r\n                );\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return FingerprintLoginActivatedAlert;\r\n    }\r\n);\n",
    "define(\r\n    'devicealerts/ScanFingerprintLoginOptionConfirmationAlert',\r\n    [\r\n        'require',\r\n        'devicealerts/Alert',\r\n        'Dictionary',\r\n        'handlers/general'\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert');\r\n        var Dictionary = require('Dictionary'),\r\n            general = require('handlers/general');\r\n\r\n        var ScanFingerprintLoginOptionConfirmationAlert = function () {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = 'ScanFingerprintLoginOptionConfirmationAlert';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = createButtons;\r\n            }\r\n\r\n            function createButtons() {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem('cancel'),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n\r\n                            if (general.isFunctionType(inheritedAlertInstance.properties.cancelButtonCallback)) {\r\n                                inheritedAlertInstance.properties.cancelButtonCallback();\r\n                            }\r\n                        },\r\n                        'btnCancel',\r\n                        'fingerprint_cancel'\r\n                    )\r\n                );\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return ScanFingerprintLoginOptionConfirmationAlert;\r\n    }\r\n);\r\n\n",
    "define(\"devicealerts/AddFingerprintLoginOptionConfirmationAlert\", [\"require\", 'devicealerts/Alert', \"Dictionary\", 'handlers/general'], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        general= require('handlers/general'),\r\n        Dictionary = require(\"Dictionary\");\r\n        \r\n    var AddFingerprintLoginOptionConfirmationAlert = function () {\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        function init() {\r\n            inheritedAlertInstance.alertName = \"AddFingerprintLoginOptionConfirmationAlert\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.prepareForShow = createButtons;\r\n        }\r\n\r\n        function createButtons() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n\r\n            inheritedAlertInstance.buttons.push(\r\n\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem(\"cancel\"),\r\n                    function () {\r\n                        inheritedAlertInstance.visible(false);\r\n\r\n                        if (general.isFunctionType(inheritedAlertInstance.properties.cancelButtonCallback)) {\r\n                            inheritedAlertInstance.properties.cancelButtonCallback();\r\n                        }\r\n                    },\r\n                    'btn gray left',\r\n                    'fingerprint_close'\r\n                ),\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem('btnContinue'),\r\n                    function () {\r\n                        inheritedAlertInstance.visible(false);\r\n\r\n                        if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                            inheritedAlertInstance.properties.okButtonCallback();\r\n                        }\r\n                    },\r\n                    'btn right',\r\n                    'fingerprint_continue'\r\n                )\r\n            );\r\n        }\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return AddFingerprintLoginOptionConfirmationAlert;\r\n});\n",
    "define(\r\n    'devicealerts/RemoveFingerprintLoginOptionConfirmationAlert',\r\n    [\r\n        'require',\r\n        'devicealerts/Alert',\r\n        'Dictionary',\r\n        'handlers/general'\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            Dictionary = require('Dictionary'),\r\n            general = require('handlers/general');\r\n\r\n        var RemoveFingerprintLoginOptionConfirmationAlert = function () {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = 'RemoveFingerprintLoginOptionConfirmationAlert';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = createButtons;\r\n            }\r\n\r\n            function createButtons() {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem(inheritedAlertInstance.properties.okButtonCaption || 'depConfirmRemoveCC'),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n\r\n                            if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                                inheritedAlertInstance.properties.okButtonCallback();\r\n                            }\r\n                        },\r\n                        'btnOk',\r\n                        'fingerprint_ok',\r\n                        'fingerprint_ok_id'\r\n                    ),\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem(inheritedAlertInstance.properties.cancelButtonCaption || 'depCancelRemoveCC'),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n\r\n                            if (general.isFunctionType(inheritedAlertInstance.properties.cancelButtonCallback)) {\r\n                                inheritedAlertInstance.properties.cancelButtonCallback();\r\n                            }\r\n                        },\r\n                        'btnCancel',\r\n                        'fingerprint_cancel',\r\n                        'fingerprint_cancel_id'\r\n                    )\r\n                );\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return RemoveFingerprintLoginOptionConfirmationAlert;\r\n    }\r\n);\n",
    "define(\r\n    \"alerts/MultipleDealsClosedConfirmation\",\r\n    [\r\n        \"require\",\r\n        \"knockout\",\r\n        'handlers/general',\r\n        'devicealerts/Alert',\r\n        'initdatamanagers/InstrumentsManager',\r\n        \"Dictionary\"\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            ko = require(\"knockout\"),\r\n            general = require('handlers/general'),\r\n            Dictionary = require(\"Dictionary\"),\r\n            $instrumentsManager = require('initdatamanagers/InstrumentsManager');\r\n\r\n        var MultipleDealsClosedConfirmation = function () {\r\n            var inheritedAlertInstance = new AlertBase(),\r\n                LS = StorageFactory(StorageFactory.eStorageType.local);\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = 'alerts/MultipleDealsClosedConfirmation';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = prepareForShow;\r\n                inheritedAlertInstance.hideConfirmation = ko.observable(false);\r\n                inheritedAlertInstance.lblChecked = Dictionary.GetItem('dontshowagain');\r\n            }\r\n\r\n            function getInstrumentData(instrumentId) {\r\n                var instrument = $instrumentsManager.GetInstrument(instrumentId);\r\n\r\n                return {\r\n                    instrumentId: instrument.id,\r\n                    baseSymbolId: instrument.baseSymbol,\r\n                    otherSymbolId: instrument.otherSymbol\r\n                };\r\n            }\r\n\r\n            function prepareForShow() {\r\n                var self = this,\r\n                    storageName =  !general.isEmptyValue(this.properties.selectedData) &&\r\n                                    this.properties.selectedData[0].mode === eLimitMode.PriceAlert ?\r\n                                    'hideConfRemovePAlerts' : 'hideConfCloseDeals';\r\n                this.selectedData = this.properties.selectedData || [];\r\n\r\n                this.getInstrumentData = getInstrumentData;\r\n                this.confirmationCloseDeal = function () {\r\n                    if (inheritedAlertInstance.hideConfirmation()) {\r\n                        LS.setItem(storageName, 'true');\r\n                    }\r\n\r\n                    inheritedAlertInstance.visible(false);\r\n                    self.properties.confirmationCloseDeal();\r\n                };\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return MultipleDealsClosedConfirmation;\r\n    }\r\n);\n",
    "define(\r\n    'alerts/RemoveCreditCardConfirmationAlert',\r\n    [\r\n        \"require\",\r\n        'devicealerts/Alert',\r\n        'handlers/general'\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            general = require('handlers/general');\r\n\r\n        var RemoveCreditCardConfirmationAlert = function () {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = \"RemoveCreditCardConfirmationAlert\";\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = createButtons;\r\n            }\r\n\r\n            function createButtons() {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem(inheritedAlertInstance.properties.cancelButtonCaption || \"cancel\"),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n\r\n                            if (general.isFunctionType(inheritedAlertInstance.properties.cancelButtonCallback)) {\r\n                                inheritedAlertInstance.properties.cancelButtonCallback();\r\n                            }\r\n                        },\r\n                        'btnCancel colored'\r\n                    ),\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem(inheritedAlertInstance.properties.okButtonCaption || \"proceed\"),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n\r\n                            if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                                inheritedAlertInstance.properties.okButtonCallback();\r\n                            }\r\n                        },\r\n                        'btnOk'\r\n                    )\r\n                );\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n        return RemoveCreditCardConfirmationAlert;\r\n    }\r\n);\r\n\n",
    "define(\r\n    'generalmanagers/RegistrationManager',\r\n    [\r\n        'handlers/general',\r\n        'handlers/Delegate',\r\n        'handlers/HashTable',\r\n        'enums/DataMembersPositions'\r\n    ],\r\n    function RegistrationManager(general, delegate, hashtable) {\r\n        var onRegistrationListChanged = new delegate();\r\n        var registrationList = [];\r\n        var requests = new hashtable();\r\n\r\n        //------------------------------------------------\r\n        // check if fromList contains every element in to list\r\n        function compareListContents(fromList, toList) {\r\n            for (var i = 0, len = toList.length, instrument; i < len; i += 1) {\r\n                instrument = toList[i];\r\n                if (fromList.indexOf(instrument) < 0) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        //------------------------------------------------\r\n\r\n        function register(flag, isReinitialized) {\r\n            var requestList = buildRequestList();\r\n\r\n            if (isReinitialized || compareListContents(registrationList, requestList) !== true) {\r\n                registrationList = requestList.slice();\r\n\r\n                onRegistrationListChanged.Invoke(registrationList, flag, isReinitialized);\r\n            }\r\n        }\r\n\r\n        //------------------------------------------------\r\n\r\n        function buildRequestList() {\r\n            var list = [];\r\n\r\n            requests.ForEach(function iterator(key, val) {\r\n                if (val) {\r\n                    if (typeof val === 'object') {\r\n                        if (key == eRegistrationListName.QuotesTable || key == eRegistrationListName.Search) {\r\n                            for (var j = 0, len = val.length; j < len; j++) {\r\n                                list.addUnique(general.toNumeric(val[j][eQuotesUIOrder.InstrumentID]));\r\n                            }\r\n                        } else {\r\n                            for (var jj = 0, lenj = val.length; jj < lenj; jj++) {\r\n                                list.addUnique(general.toNumeric(val[jj]));\r\n                            }\r\n                        }\r\n                    } else {\r\n                        list.addUnique(general.toNumeric(val));\r\n                    }\r\n                }\r\n            });\r\n\r\n            return list;\r\n        }\r\n\r\n        //------------------------------------------------\r\n\r\n        function update(controlName, iList) {\r\n            requests.OverrideItem(controlName, iList);\r\n\r\n            register(eSubscriptionRequestFlags.All, false);\r\n        }\r\n\r\n        //------------------------------------------------\r\n\r\n        var module = window.$regManager = {\r\n            Register: register,\r\n            Update: update,\r\n            OnRegistrationListChanged: onRegistrationListChanged\r\n        };\r\n\r\n        return module;\r\n    }\r\n);\r\n\n",
    "/* global UrlResolver */\r\ndefine(\"handlers/SyncRequestHelper\", [\"global/UrlResolver\"], function (UrlResolver) {\r\n\tfunction SyncRequestHelper(requestUrl, params) {\r\n\t\tvar req,\r\n\t\t\tappRelativePath = UrlResolver.getApplicationRelativePath();\r\n\r\n\t\tif (window.XMLHttpRequest) {\r\n\t\t\treq = new XMLHttpRequest();\r\n\t\t} else if (window.ActiveXObject) {\r\n\t\t\tvar versions = [\r\n\t\t\t\t\"MSXML2.XmlHttp.6.0\",\r\n\t\t\t\t\"MSXML2.XmlHttp.5.0\",\r\n\t\t\t\t\"MSXML2.XmlHttp.4.0\",\r\n\t\t\t\t\"MSXML2.XmlHttp.3.0\",\r\n\t\t\t\t\"MSXML2.XmlHttp.2.0\",\r\n\t\t\t\t\"Microsoft.XmlHttp\",\r\n\t\t\t\t\"Microsoft.XMLHTTP\", // old\r\n\t\t\t];\r\n\r\n\t\t\tfor (var i = 0; i < versions.length; i++) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treq = new ActiveXObject(versions[i]);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// empty\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getUrl(url) {\r\n\t\t\tvar prefix;\r\n\r\n\t\t\turl = UrlResolver.getUrlWithRndKeyValue(url);\r\n\r\n\t\t\tprefix = url.startsWith(appRelativePath) || url.startsWith(\"http\") ? String.empty : appRelativePath;\r\n\r\n\t\t\treturn UrlResolver.combine(prefix, url);\r\n\t\t}\r\n\r\n\t\tif (req) {\r\n\t\t\treq.open(\"POST\", getUrl(requestUrl), false);\r\n\r\n\t\t\tif (params) {\r\n\t\t\t\t//here we check if the user request a security token when not authenticated(initialized)\r\n\t\t\t\t//to prevent a call for security token that which will return an error\r\n\t\t\t\tvar patt = /SecurityToken/i;\r\n\t\t\t\tvar result = params.match(patt);\r\n\r\n\t\t\t\tif (result && !$customer.isAuthenticated()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treq.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t\t\treq.send(params);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treq.send();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn req;\r\n\t}\r\n\r\n\treturn SyncRequestHelper;\r\n});\r\n\n",
    "define(\r\n    \"dataaccess/dalClientState\",\r\n    [\r\n        \"require\",\r\n        'generalmanagers/ErrorManager',\r\n        'handlers/SyncRequestHelper',\r\n        'handlers/Logger',\r\n        \"handlers/Ajaxer\"\r\n    ],\r\n    function (require) {\r\n        var ErrorManager = require('generalmanagers/ErrorManager'),\r\n            SyncRequestHelper = require('handlers/SyncRequestHelper'),\r\n            Logger = require('handlers/Logger');\r\n\r\n        function TDALClientState() {\r\n            var dataAjaxer = new TAjaxer(),\r\n                quotesAjaxer = new TAjaxer(),\r\n                clientStateSlaTimeout = systemInfo.slaTimeout || 1000,\r\n                maxRetries = 1000;\r\n\r\n            function logWrittenSuccessfully() {\r\n                clientStateSlaTimeout += 1000;\r\n            }\r\n\r\n            function checkAjaxerStatus(status) {\r\n                status.State = status.State || eAjaxerState.None;\r\n\r\n                if (status.State === eAjaxerState.SlaCompromised) {\r\n                    status.Data = status.Data || {};\r\n                    var warningMessage = \"SLA has been compromised: \" + JSON.stringify(status);\r\n\r\n                    if (typeof Logger !== 'undefined') {\r\n                        Logger.warn(\"TDALClientState\", warningMessage, logWrittenSuccessfully, eErrorSeverity.warning);\r\n                    }\r\n                }\r\n                else if (status.State === eAjaxerState.Retry) {\r\n                    // console.log(\"Retry the last request: \" + JSON.stringify(status.Data));\r\n                }\r\n            }\r\n\r\n            function getData(requestMode, OnLoadComplete) {\r\n                var promise = dataAjaxer.promises.get(\r\n                    \"TDALClientState/getData\",\r\n                    \"api/clientstate/GetData/\" + requestMode + '/' + $initialDataManager.prop.csmg,\r\n                    \"\",\r\n                    OnLoadComplete,\r\n                    function () {\r\n                        ErrorManager.onError(\"TDALClientState/getData\", \"\", eErrorSeverity.high);\r\n                    },\r\n                    0,\r\n                    maxRetries,\r\n                    clientStateSlaTimeout\r\n                );\r\n\r\n                promise.progress(checkAjaxerStatus)\r\n                    .done();\r\n            }\r\n\r\n            function getQuotesData(requestMode, OnLoadComplete) {\r\n                var promise = quotesAjaxer.promises.get(\r\n                    \"TDALClientState/getQuotesData\",\r\n                    \"api/clientstate/GetQuotesData/\" + requestMode + '/' + $initialDataManager.prop.csmg,\r\n                    \"\",\r\n                    OnLoadComplete,\r\n                    function () {\r\n                        ErrorManager.onError(\"TDALClientState/getQuotesData\", \"\", eErrorSeverity.high);\r\n                    },\r\n                    0,\r\n                    maxRetries,\r\n                    clientStateSlaTimeout\r\n                );\r\n\r\n                promise.progress(checkAjaxerStatus)\r\n                    .done();\r\n            }\r\n\r\n            function register(list) {\r\n                var params = \"SecurityToken=\" + systemInfo.securityToken;\r\n\r\n                return quotesAjaxer.promises.post(\"api/ClientState/Register\",\r\n                    \"api/clientstate/Register/\" + $initialDataManager.prop.csmg + \"?instruments=\" + JSON.stringify(list),\r\n                    params)\r\n                    .then(function (response) {\r\n                        return response.toString() === eOperationStatus.Success.toString();\r\n                    });\r\n            }\r\n\r\n            function unregister() {\r\n                var params = \"SecurityToken=\" + systemInfo.securityToken;\r\n                return quotesAjaxer.promises.post(\"api/ClientState/Unregister\",\r\n                    \"api/clientstate/Unregister/\" + $initialDataManager.prop.csmg,\r\n                    params)\r\n                    .then(function (response) {\r\n                        return response.toString() === eOperationStatus.Success.toString();\r\n                    });\r\n            }\r\n\r\n            function setDisplaySymbol(symbolId) {\r\n                var params = \"SecurityToken=\" + systemInfo.securityToken;\r\n                var response = SyncRequestHelper(\"api/clientstate/SetDisplaySymbol/\" + $initialDataManager.prop.csmg + \"/\" + symbolId, params);\r\n\r\n                if (response && response.status == 200) {\r\n                    return response.responseText == eOperationStatus.Success;\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            function getclientStateSlaTimeout() {\r\n                return clientStateSlaTimeout;\r\n            }\r\n\r\n            return {\r\n                GetData: getData,\r\n                GetQuotesData: getQuotesData,\r\n                Register: register,\r\n                Unregister: unregister,\r\n                SetDisplaySymbol: setDisplaySymbol,\r\n                GetclientStateSlaTimeout: getclientStateSlaTimeout\r\n            };\r\n        }\r\n\r\n        return new TDALClientState();\r\n    }\r\n);\r\n\n",
    "\n",
    "define(\r\n    'cachemanagers/AjaxCacheManager',\r\n    [\r\n        'require',\r\n        'Q',\r\n        'JSONHelper',\r\n        'dataaccess/dalClientState',\r\n        'handlers/general',\r\n        'generalmanagers/ErrorManager',\r\n        'StateObject!Csm',\r\n        'StateObject!SystemNotificationEvents',\r\n        \"handlers/Delegate\",\r\n    ],\r\n    function (require) {\r\n        var\r\n            Q = require('Q'),\r\n            JSONHelper = require('JSONHelper'),\r\n            general = require('handlers/general'),\r\n            dalClientState = require('dataaccess/dalClientState'),\r\n            ErrorManager = require('generalmanagers/ErrorManager'),\r\n            csmStateObject = require('StateObject!Csm'),\r\n            stateObject = require(\"StateObject!SystemNotificationEvents\"),\r\n            delegate = require(\"handlers/Delegate\");\r\n\r\n\r\n        function AjaxCacheManager(clientStateDataProcessor) {\r\n            var requestMode = eRequestMode.Initial,\r\n                stopAll = false,\r\n                csmTimerId = 0,\r\n                regTimerId = 0,\r\n                csmOutOfDateTimerId = 0,\r\n                lastUpdateTime = new Date().getTime(),\r\n                firstLoad = Q.defer(),\r\n                onLoadRequest = new delegate(),\r\n                onRegisterRequest = new delegate(),\r\n                forceInitial = false,\r\n                csmOutOfDateTimeoutCounter = 0;\r\n\r\n            function onLoadComplete(defer, mode, responseText) {\r\n                var response = JSONHelper.STR2JSON(\"CacheManager/onLoadComplete\", responseText, eErrorSeverity.high);\r\n                response = response || {};\r\n\r\n                if (response.status == eOperationStatus.Success) {\r\n                    response.clientStateResult = response.clientStateResult || eClientStateResult.NotFound;\r\n                    // on error register all\r\n                    if (response.clientStateResult != eClientStateResult.Success) {\r\n\r\n                        getRegistrationNextDataCall(function registrationNextDataCall() {\r\n                            onRegisterRequest.Invoke(eSubscriptionRequestFlags.All, true);\r\n                            csmStateObject.update(eStateObjectTopics.CsmOutOfDate, true);\r\n                        });\r\n                        defer.resolve();\r\n                    } else {\r\n                        var isReinitialized = mode === eRequestMode.Initial;\r\n\r\n                        processData(response.data, isReinitialized);\r\n\r\n                        csmStateObject.update(eStateObjectTopics.CsmOutOfDate, false);\r\n                        if (csmOutOfDateTimerId) {\r\n                            clearTimeout(csmOutOfDateTimerId);\r\n                            csmOutOfDateTimerId = 0;\r\n                        }\r\n                        defer.resolve();\r\n                    }\r\n                }\r\n\r\n                getCSMNextDataCall(function csmNextDataCall() {\r\n                    var clientStateLatencyInterval =\r\n                        parseInt(systemInfo.clientApplicationParams[eClientParams.ClientStateLatencyInterval]) +\r\n                        dalClientState.GetclientStateSlaTimeout();\r\n\r\n                    onLoadRequest.Invoke();\r\n\r\n                    csmOutOfDateTimerId = setTimeout(function onCsmOutOfDate() {\r\n                        csmOutOfDateTimeoutCounter += 1;\r\n                        ErrorManager.onWarning(\"AjaxerCacheManager\", 'CSM out-dated data: latency_of=' +\r\n                            clientStateLatencyInterval + \",counter=\" + csmOutOfDateTimeoutCounter);\r\n                        //csmStateObject.update(eStateObjectTopics.CsmOutOfDate, true);\r\n                    }, clientStateLatencyInterval);\r\n                });\r\n            }\r\n\r\n            function loadData(reqmode) {\r\n                var mode = general.isDefinedType(reqmode) ? reqmode : requestMode;\r\n                var defer = Q.defer();\r\n\r\n                if (!stopAll) {\r\n                    lastUpdateTime = new Date().getTime();\r\n                    dalClientState.GetData(mode, onLoadComplete.bind(this, defer, mode));\r\n                }\r\n\r\n                return defer.promise;\r\n            }\r\n\r\n            function setDisplaySymbol(newSymbol) {\r\n                if (dalClientState.SetDisplaySymbol(newSymbol)) {\r\n                    reloadInitialData(eSubscriptionRequestFlags.All);\r\n                }\r\n            }\r\n\r\n            function setRequestMode(state) {\r\n                if (state == eRequestMode.Initial) {\r\n                    requestMode = eRequestMode.Initial;\r\n                    //do not touch this param, its critical to sync between register and csm threads\r\n                    forceInitial = true;\r\n                } else {\r\n                    requestMode = eRequestMode.Correct;\r\n                }\r\n            }\r\n\r\n            function reloadInitialData(flags) {\r\n                switch (flags) {\r\n                    case eSubscriptionRequestFlags.Quotes:\r\n                        dalClientState.GetQuotesData(eRequestMode.Initial, onReLoadQuotesInitialComplete);\r\n                        break;\r\n                    case eSubscriptionRequestFlags.All:\r\n                        setRequestMode(eRequestMode.Initial);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n\r\n            function onReLoadQuotesInitialComplete(responseText) {\r\n                var response = JSONHelper.STR2JSON(\"CacheManager/onLoadInitialComplete\", responseText, eErrorSeverity.high);\r\n\r\n                if (response) {\r\n                    processData(response.data);\r\n                }\r\n            }\r\n\r\n            function processData(data, reinitialize) {\r\n                if (data && data.length > 0) {\r\n                    clientStateDataProcessor.processData(data, reinitialize);\r\n                    setRequestMode(eRequestMode.Correct);\r\n                }\r\n\r\n                firstLoad.resolve();\r\n            }\r\n\r\n            function calculateNextPeriod() {\r\n                var clientInterval = parseInt(systemInfo.clientApplicationParams[eClientParams.Interval]);\r\n                var nowTime = new Date().getTime();\r\n                var diff = nowTime - lastUpdateTime;\r\n                var nextUpdate = clientInterval - diff;\r\n                nextUpdate = nextUpdate < 0 ? 0 : nextUpdate;\r\n\r\n                return nextUpdate;\r\n            }\r\n\r\n            function getRegistrationNextDataCall(method) {\r\n                if (regTimerId) {\r\n                    clearTimeout(regTimerId);\r\n                    regTimerId = 0;\r\n                }\r\n\r\n                regTimerId = setTimeout(method, calculateNextPeriod());\r\n            }\r\n\r\n            function getCSMNextDataCall(method) {\r\n                if (csmTimerId) {\r\n                    clearTimeout(csmTimerId);\r\n                    csmTimerId = 0;\r\n                }\r\n                if (forceInitial) {\r\n                    setRequestMode(eRequestMode.Initial);// not neccesery, double check\r\n                    forceInitial = false;\r\n                }\r\n                csmTimerId = setTimeout(method, calculateNextPeriod(), requestMode);\r\n            }\r\n\r\n            function register(requestList, flag, isReinitialized) {\r\n                dalClientState.Register(requestList)\r\n                    .then(function (response) {\r\n                        if (response) {\r\n                            reloadInitialData(flag);\r\n                        } else if (isReinitialized) {\r\n                            setTimeout(function retryHandler() {\r\n                                onRegisterRequest.Invoke(eSubscriptionRequestFlags.All, true);\r\n                                csmStateObject.update(eStateObjectTopics.CsmOutOfDate, true);\r\n                            }, systemInfo.clientApplicationParams[eClientParams.Interval]);\r\n                        }\r\n                    })\r\n                    .done();\r\n            }\r\n\r\n            function unregister() {\r\n                whenLoadFinished()\r\n                    .then(function () {\r\n                        return dalClientState.Unregister();\r\n                    })\r\n                    .done();\r\n            }\r\n\r\n            function whenLoadFinished() {\r\n                return firstLoad.promise;\r\n            }\r\n            stateObject.set(eShutDownHandlerTopics.stopClientStateManagerCalls, null);\r\n            stateObject.subscribe(eShutDownHandlerTopics.stopClientStateManagerCalls, function () {\r\n                stopAll = true;\r\n\r\n                if (csmTimerId) {\r\n                    clearTimeout(csmTimerId);\r\n                    csmTimerId = 0;\r\n                }\r\n                if (regTimerId) {\r\n                    clearTimeout(regTimerId);\r\n                    regTimerId = 0;\r\n                }\r\n                if (csmOutOfDateTimerId) {\r\n                    clearTimeout(csmOutOfDateTimerId);\r\n                    csmOutOfDateTimerId = 0;\r\n                }\r\n            });\r\n\r\n            return {\r\n                Register: register,\r\n                Unregister: unregister,\r\n                LoadData: loadData,\r\n                SetDisplaySymbol: setDisplaySymbol,\r\n                LoadFinished: whenLoadFinished,\r\n\r\n                OnLoadRequest: onLoadRequest,\r\n                OnRegisterRequest: onRegisterRequest\r\n            };\r\n        }\r\n\r\n        return AjaxCacheManager;\r\n    }\r\n);\n",
    "\n",
    "define(\r\n    'dataaccess/dalCustomerProfile',\r\n    [\r\n        \"require\",\r\n        'generalmanagers/ErrorManager',\r\n        'handlers/general',\r\n        'JSONHelper'\r\n    ],\r\n    function DalCustomerProfileDef(require) {\r\n        var ErrorManager = require('generalmanagers/ErrorManager'),\r\n            JSONHelper = require('JSONHelper'),\r\n            general = require('handlers/general');\r\n\r\n        function DalCustomerProfile() {\r\n            function saveStartUpPage(clientProfileModel, onLoadComplete) {\r\n                if (!isValidModel(clientProfileModel)) {\r\n                    return;\r\n                }\r\n\r\n                var ajaxer = new TAjaxer(),\r\n                    params = JSON.stringify(clientProfileModel);\r\n\r\n                ajaxer.post(\r\n                    \"TDALCustomerProfile/SaveStartUpPage\",\r\n                    \"api/clientprofile/SaveStartUpPage\",\r\n                    params,\r\n                    onLoadComplete,\r\n                    function (error) {\r\n                        ErrorManager.onError(\"TDALCustomerProfile/SaveStartUpPage\", error.message, eErrorSeverity.medium);\r\n                    }\r\n                );\r\n            }\r\n\r\n            function saveProfile(clientProfileModel, onLoadComplete) {\r\n                if (!isValidModel(clientProfileModel)) {\r\n                    return;\r\n                }\r\n\r\n                var ajaxer = new TAjaxer(),\r\n                    params = JSON.stringify(clientProfileModel);\r\n\r\n\r\n                ajaxer.post(\r\n                    \"TDALCustomerProfile/SaveProfile\",\r\n                    \"api/clientprofile/SaveProfile\",\r\n                    params,\r\n                    onLoadComplete,\r\n                    function (error) {\r\n                        ErrorManager.onError(\"TDALCustomerProfile/SaveProfile\", error.message, eErrorSeverity.medium);\r\n                    },\r\n                    1,\r\n                    2\r\n                );\r\n            }\r\n\r\n            function saveSentimentsToProfileWebMobile(clientProfileModel, onLoadComplete) {\r\n                if (!isValidModel(clientProfileModel)) {\r\n                    return;\r\n                }\r\n\r\n                var ajaxer = new TAjaxer(),\r\n                    params = JSON.stringify(clientProfileModel);\r\n\r\n                ajaxer.post(\r\n                    \"TDALCustomerProfile/SaveProfileWebMobile\",\r\n                    \"api/clientprofile/SaveSentimentsToProfileWebMobile\",\r\n                    params,\r\n                    onLoadComplete,\r\n                    function (error) {\r\n                        ErrorManager.onError(\"TDALCustomerProfile/SaveSentimentsToProfileWebMobile\", error.message, eErrorSeverity.medium);\r\n                    }\r\n                );\r\n            }\r\n\r\n            function saveProfileInstrument(clientProfileModel, onLoadComplete) {\r\n                if (!isValidModel(clientProfileModel)) {\r\n                    return;\r\n                }\r\n\r\n                var ajaxer = new TAjaxer(),\r\n                    params = JSON.stringify(clientProfileModel);\r\n\r\n                ajaxer.post(\r\n                    \"TDALCustomerProfile/SaveProfile\",\r\n                    \"api/clientprofile/SaveProfileInstrument\",\r\n                    params,\r\n                    onLoadComplete,\r\n                    function (error) {\r\n                        ErrorManager.onError(\"TDALCustomerProfile/SaveProfileInstrument\", error.message, eErrorSeverity.medium);\r\n                    }\r\n                );\r\n            }\r\n\r\n            function saveClientScreen(clientProfileModel) {\r\n                if (!isValidModel(clientProfileModel)) {\r\n                    return;\r\n                }\r\n\r\n                var ajaxer = new TAjaxer(),\r\n                    params = JSON.stringify(clientProfileModel);\r\n\r\n                var method = \"TDALCustomerProfile/saveClientScreen\",\r\n                    url = \"api/clientprofile/UpdateScreen\";\r\n\r\n                return ajaxer.promises\r\n                    .post(method, url, params, null, null, 1, 2)\r\n                    .then(function (responseText) {\r\n                        checkAndLogServerError(method, params, responseText);\r\n                        return JSONHelper.STR2JSON(method + \"/onLoadComplete\", responseText);\r\n                    })\r\n                    .fail(function (error) {\r\n                        ErrorManager.onError(method, \"\", eErrorSeverity.medium);\r\n\r\n                        throw error;\r\n                    });\r\n            }\r\n\r\n            function checkAndLogServerError(method, params, serverResponse) {\r\n                if (serverResponse.indexOf(\"ServerError\") > -1) {\r\n                    ErrorManager.onWarning(method, \"Server Error; Params: \" + params);\r\n                }\r\n            }\r\n\r\n            function isValidModel(clientProfileModel) {\r\n                return !general.isEmptyValue(clientProfileModel) && !isEmptyObject(clientProfileModel);\r\n            }\r\n\r\n            function isEmptyObject(object) {\r\n                if (general.isNullOrUndefined(object)) {\r\n                    return true;\r\n                }\r\n\r\n                if (!general.isObjectType(object)) {\r\n                    return false;\r\n                }\r\n\r\n                return general.equals(object, {})\r\n            }\r\n\r\n            return {\r\n                SaveStartUpPage: saveStartUpPage,\r\n                SaveProfile: saveProfile,\r\n                SaveProfileInstrument: saveProfileInstrument,\r\n                SaveClientScreen: saveClientScreen,\r\n                SaveSentimentsToProfileWebMobile: saveSentimentsToProfileWebMobile\r\n            };\r\n        }\r\n\r\n        return new DalCustomerProfile();\r\n    }\r\n);\r\n\n",
    "define(\r\n    'managers/CustomerProfileManager',\r\n    [\r\n        'require',\r\n        'helpers/ObservableCustomExtender',\r\n        'dataaccess/dalCustomerProfile',\r\n        'managers/profileinstruments',\r\n        'modules/permissionsmodule',\r\n        'StateObject!DealerParams',\r\n        'JSONHelper'\r\n    ],\r\n    function CustomerProfileManager(require) {\r\n        var ko = require('helpers/ObservableCustomExtender'),\r\n            dalCustomerProfile = require('dataaccess/dalCustomerProfile'),\r\n            ProfileInstruments = require('managers/profileinstruments'),\r\n            stateObjectDealerParams = require('StateObject!DealerParams'),\r\n            JSONHelper = require('JSONHelper'),\r\n            permissionsModule = require('modules/permissionsmodule');\r\n\r\n        var profileCustomer = ko.observable({}).extend({ dirty: false }),\r\n            startUpForm = ko.observable(0).extend({ dirty: false }),\r\n            cashBackVolume = ko.observable(''),\r\n            maxCashBack = ko.observable(''),\r\n            lastSelectedPresetId = ko.observable(-1).extend({ dirty: false }),\r\n            period = 10000,\r\n            timeoutHold,\r\n            startUpFormChanged = new TDelegate(),\r\n            initialScreenChanged = new TDelegate(),\r\n            oldChart = {};\r\n\r\n        function setInitialAdvancedView() {\r\n            var isAdvanced = !!(\r\n                stateObjectDealerParams.get(eDealerParams.DealerAdvancedWalletView) ||\r\n                profileCustomer().advancedWalletView\r\n            );\r\n            updateIsAdvancedView(isAdvanced);\r\n        }\r\n\r\n        function updateIsAdvancedView(isAdvanced) {\r\n            var pc = profileCustomer();\r\n            pc.advancedWalletView = isAdvanced ? 1 : 0;\r\n            profileCustomer(pc);\r\n        }\r\n\r\n        function updateProfile() {\r\n            // disable if dealer mode\r\n            if (!permissionsModule.CheckPermissions('customerProfile')) {\r\n                return;\r\n            }\r\n            if (startUpForm.isDirty()) {\r\n                var defaultPageValue = startUpForm();\r\n                var clientProfileModel = {\r\n                    defaultFirstPage: defaultPageValue,\r\n                };\r\n\r\n                startUpForm.markClean();\r\n\r\n                startUpFormChanged.Invoke(startUpForm());\r\n\r\n                dalCustomerProfile.SaveStartUpPage(clientProfileModel);\r\n            }\r\n\r\n            if (profileCustomer.isDirty()) {\r\n                profileCustomer.markClean();\r\n                dalCustomerProfile.SaveProfile(profileCustomer());\r\n            }\r\n\r\n            if (lastSelectedPresetId.isDirty()) {\r\n                dalCustomerProfile\r\n                    .SaveClientScreen({ ScreenId: lastSelectedPresetId() })\r\n                    .then(function (result) {\r\n                        if (result && result.status == eOperationStatus.Success) {\r\n                            lastSelectedPresetId.markClean();\r\n                            initialScreenChanged.Invoke(lastSelectedPresetId());\r\n                        }\r\n                    })\r\n                    .done();\r\n            }\r\n\r\n            clearTimeout(timeoutHold);\r\n            timeoutHold = setTimeout(updateProfile, period);\r\n        }\r\n\r\n        function init(\r\n            _customerProfile,\r\n            _startUpForm,\r\n            _profileInstruments,\r\n            initialScreenId) {\r\n            lastSelectedPresetId(initialScreenId);\r\n            lastSelectedPresetId.markClean();\r\n\r\n            startUpForm(_startUpForm);\r\n            startUpForm.markClean();\r\n\r\n            ProfileInstruments.Init(_profileInstruments);\r\n            ProfileInstruments.OnUpdate.Add(function (value) {\r\n                dalCustomerProfile.SaveProfileInstrument(value);\r\n            });\r\n\r\n            processProfileCustomer(_customerProfile);\r\n            setInitialAdvancedView();\r\n\r\n            timeoutHold = setTimeout(updateProfile, period);\r\n        }\r\n\r\n        function processProfileCustomer(customerProfile) {\r\n            customerProfile = customerProfile || {};\r\n\r\n            if (\r\n                customerProfile.chartUserSettings ||\r\n                customerProfile.tileChartSettings ||\r\n                customerProfile.tileSettings ||\r\n                customerProfile.chartFavorites ||\r\n                customerProfile.chartIndicatorsSettings ||\r\n                customerProfile.chartsZoomSettings) {\r\n                // try to load from legacy\r\n                oldChart.chartUserSettings = customerProfile.chartUserSettings\r\n                    ? JSONHelper.STR2JSON(\"CustomerProfileManager:chartUserSettings\", customerProfile.chartUserSettings)\r\n                    : {};\r\n                oldChart.tileChartSettings = customerProfile.tileChartSettings\r\n                    ? JSONHelper.STR2JSON(\"CustomerProfileManager:tileChartSettings\", customerProfile.tileChartSettings)\r\n                    : [];\r\n                oldChart.tileSettings = customerProfile.tileSettings\r\n                    ? JSONHelper.STR2JSON(\"CustomerProfileManager:tileSettings\", customerProfile.tileSettings)\r\n                    : {};\r\n                oldChart.chartFavorites = customerProfile.chartFavorites\r\n                    ? JSONHelper.STR2JSON(\"CustomerProfileManager:chartFavorites\", customerProfile.chartFavorites)\r\n                    : {};\r\n                oldChart.chartIndicatorsSettings = customerProfile.chartIndicatorsSettings\r\n                    ? JSONHelper.STR2JSON(\"CustomerProfileManager:chartIndicatorsSettings\", customerProfile.chartIndicatorsSettings)\r\n                    : {};\r\n                oldChart.chartsZoomSettings = customerProfile.chartsZoomSettings\r\n                    ? JSONHelper.STR2JSON(\"CustomerProfileManager:chartsZoomSettings\", customerProfile.chartsZoomSettings)\r\n                    : {};\r\n\r\n                // delete legacy\r\n                delete customerProfile.chartUserSettings;\r\n                delete customerProfile.tileChartSettings;\r\n                delete customerProfile.tileSettings;\r\n                delete customerProfile.chartFavorites;\r\n                delete customerProfile.chartIndicatorsSettings;\r\n                delete customerProfile.chartsZoomSettings;\r\n\r\n                profileCustomer(customerProfile);\r\n            } else {\r\n                profileCustomer(customerProfile);\r\n                profileCustomer.markClean();\r\n            }\r\n        }\r\n\r\n        function getUiVersion() {\r\n            return profileCustomer().dealSlipVersion || eUIVersion.Default;\r\n        }\r\n\r\n        function dispose() {\r\n            startUpFormChanged.Flush();\r\n            initialScreenChanged.Flush();\r\n\r\n            clearTimeout(timeoutHold);\r\n        }\r\n\r\n        window.CustomerProfileManager = window.$customerProfileManager = {\r\n            ProfileCustomer: profileCustomer,\r\n            OldChart: function () {\r\n                return oldChart;\r\n            },\r\n            LastSelectedPresetId: lastSelectedPresetId,\r\n            UpdateIsAdvancedView: updateIsAdvancedView,\r\n            DefaultPage: startUpForm,\r\n            GetUiVersion: getUiVersion,\r\n            CashBackVolume: cashBackVolume,\r\n            MaxCashBack: maxCashBack,\r\n            Init: init,\r\n            Dispose: dispose,\r\n            Events: {\r\n                onStartUpFormChanged: startUpFormChanged,\r\n                onInitialScreenChanged: initialScreenChanged,\r\n            },\r\n        };\r\n\r\n        return window.CustomerProfileManager;\r\n    }\r\n);\r\n\n",
    "/* global eShutDownHandlerTopics, ko, eDealerParams */\r\ndefine(\"dataaccess/dalsocketclientstate\", [\r\n\t\"require\",\r\n\t\"StateObject!DealerParams\",\r\n\t\"managers/CustomerProfileManager\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"handlers/websocketconnection\",\r\n], function (require) {\r\n\tvar stateObjectDealerParams = require(\"StateObject!DealerParams\"),\r\n\t\tCustomerProfileManager = require(\"managers/CustomerProfileManager\"),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tSocketConnection = require(\"handlers/websocketconnection\");\r\n\t\t\r\n\r\n\tfunction TDALSocketClientState() {\r\n\t\tif (!SocketConnection.isConnected()) {\r\n\t\t\tthrow new Error(\"Cannot establish web socket connection\");\r\n\t\t}\r\n\r\n\t\tvar isFirstRegistration = true;\r\n\r\n\t\tvar register = function (list, flag, isReinitialized) {\r\n\t\t\tvar methodName,\r\n\t\t\t\tprofileCustomer = CustomerProfileManager.ProfileCustomer(),\r\n\t\t\t\tdealerCurrency = stateObjectDealerParams.get(eDealerParams.DealerCurrency);\r\n\t\t\tvar customCurrency = dealerCurrency || profileCustomer.displaySymbol;\r\n\t\t\tif (isFirstRegistration || flag === eSubscriptionRequestFlags.All || isReinitialized) {\r\n\t\t\t\tisFirstRegistration = false;\r\n\t\t\t\tmethodName = \"RegisterQuotesAndGetInitialAll\";\r\n\t\t\t\tvar cust = Customer.prop || {};\r\n\t\t\t\tSocketConnection.send(methodName, {\r\n\t\t\t\t\tinstruments: list,\r\n\t\t\t\t\tsymbol: customCurrency !== cust.baseCcyId() ? customCurrency : null,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tmethodName = \"RegisterQuotesAndGetInitialQuotes\";\r\n\t\t\t\tSocketConnection.send(methodName, {\r\n\t\t\t\t\tinstruments: list,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t};\r\n\r\n\t\tfunction unregister() {\r\n\t\t\tSocketConnection.send(\"Unregister\");\r\n\t\t}\r\n\r\n\t\tfunction setDisplaySymbol(symbolId) {\r\n\t\t\tSocketConnection.send(\"SetDisplaySymbol\", { symbol: symbolId });\r\n\t\t}\r\n\r\n\t\tfunction registerMessageCallback(fnHandler) {\r\n\t\t\tSocketConnection.setMessageHandler(fnHandler);\r\n\t\t}\r\n\r\n\t\tfunction registerReconnectedCallback(fnHandler) {\r\n\t\t\tSocketConnection.setReconnectedHandler(fnHandler);\r\n\t\t}\r\n\r\n\t\tfunction registerDisconnectedCallback(fnHandler) {\r\n\t\t\tSocketConnection.setDisconnectedHandler(fnHandler);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tregisterMessageCallback: registerMessageCallback,\r\n\t\t\tregisterReconnectedCallback: registerReconnectedCallback,\r\n\t\t\tregisterDisconnectedCallback: registerDisconnectedCallback,\r\n\t\t\tStopConnection: function () {\r\n\t\t\t\tSocketConnection.stop();\r\n\t\t\t},\r\n\t\t\tRegister: register,\r\n\t\t\tUnregister: unregister,\r\n\t\t\tSetDisplaySymbol: setDisplaySymbol,\r\n\t\t\tHasStarted: SocketConnection.hasStarted,\r\n\t\t};\r\n\t}\r\n\r\n\treturn TDALSocketClientState;\r\n});\r\n\n",
    "define(\r\n    'cachemanagers/SocketCacheManager',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'dataaccess/dalsocketclientstate',\r\n        'generalmanagers/ErrorManager',\r\n        'StateObject!SystemNotificationEvents',\r\n        \"handlers/Delegate\",\r\n        \"initdatamanagers/Customer\"\r\n    ],\r\n    function (require) {\r\n        var TDALSocketClientState = require('dataaccess/dalsocketclientstate'),\r\n            general = require('handlers/general'),\r\n            ErrorManager = require('generalmanagers/ErrorManager'),\r\n            stateObject = require(\"StateObject!SystemNotificationEvents\"),\r\n            delegate = require(\"handlers/Delegate\"),\r\n            customer = require(\"initdatamanagers/Customer\"),\r\n            csmStateObject = require('StateObject!Csm');\r\n\r\n        function SocketCacheManager(clientStateDataProcessor) {\r\n            var dalSocketClientState;\r\n            var firstLoad = Q.defer();\r\n            var onLoadRequest = new delegate();\r\n            var onRegisterRequest = new delegate();\r\n            \r\n            \r\n            // var clientStateBurstInterval = 100;\r\n            var messageGapThreshold = 1;\r\n            var prevMessageId = -1;\r\n            var prevMsgServerTime = null;\r\n            var prevMsgClientTime = null;\r\n\r\n            try {\r\n                dalSocketClientState = new TDALSocketClientState();\r\n                dalSocketClientState.registerMessageCallback(onLoadComplete);\r\n                dalSocketClientState.registerReconnectedCallback(onReconnected);\r\n                dalSocketClientState.registerDisconnectedCallback(onDisconnected);\r\n\r\n            } catch (e) {\r\n                ErrorManager.onError(\"SocketCacheManager/SocketCacheManager\", \"cannot establish socket connection\", eErrorSeverity.medium);\r\n                throw e;\r\n            }\r\n\r\n            function onReconnected() {\r\n                whenConnectionReady()\r\n                    .then(function () {\r\n                        onRegisterRequest.Invoke(eSubscriptionRequestFlags.All, true);\r\n                    }).then(function () {\r\n                        csmStateObject.update(eStateObjectTopics.CsmOutOfDate, false); \r\n                    })\r\n                    .done();\r\n            }\r\n\r\n            function onDisconnected() {\r\n                csmStateObject.update(eStateObjectTopics.CsmOutOfDate, true); \r\n            }\r\n\r\n            function messageNumberSequenced(msgId, msgServerTime) {\r\n                //if received initial start count again\r\n                //Initial: msgId=0, Update:msgId>0\r\n                if (!general.isNumber(msgId)) {\r\n                    return false;\r\n                }\r\n\r\n                var msgClientTime = new Date().toISOString();\r\n\r\n                if (msgId > 0 && prevMessageId > -1 && Math.abs(msgId - prevMessageId) > messageGapThreshold) {\r\n\r\n                    ErrorManager.onWarning(\"missed messages,\" +\r\n                        \"\\nprevious=\" + prevMessageId + \", serverTime: \" + prevMsgServerTime + \", clientTime: \" + prevMsgClientTime + \",\" +\r\n                        \"\\nnext=\" + msgId + \", serverTime: \" + msgServerTime + \", clientTime: \" + msgClientTime);\r\n\r\n                    onReconnected();\r\n                    prevMessageId = -1;\r\n\r\n                    return false;\r\n                }\r\n                prevMessageId = msgId;\r\n                prevMsgServerTime = msgServerTime;\r\n                prevMsgClientTime = msgClientTime;\r\n\r\n                return true;\r\n            }\r\n\r\n            function onLoadComplete(msgObj) {\r\n                //error message do not have msgid     \r\n                if (!general.isNullOrUndefined(msgObj.msgId) && !messageNumberSequenced(msgObj.msgId, msgObj.time)) {\r\n                    return;\r\n                }\r\n                var _isReinitialized = msgObj.message === \"INITIAL\";\r\n\r\n                if (_isReinitialized || (customer && customer.prop.csmTrace()) ){\r\n                    ErrorManager.onWarning(\"msgObj_mode: \" + msgObj.message + \", msgObj_id: \" + msgObj.msgId + \", msgObj_id: \" + msgObj.time);\r\n                }\r\n\r\n\r\n                onLoadRequest.Invoke();\r\n                processData(msgObj.data, _isReinitialized);\r\n            }\r\n\r\n            // supporting cache manager interface with nop that return fulfilled\r\n            function loadData() {\r\n                return Q.all([whenConnectionReady(), firstLoad.promise]);\r\n            }\r\n\r\n            function setDisplaySymbol(newSymbol) {\r\n                whenConnectionReady()\r\n                    .then(function () {\r\n                        dalSocketClientState.SetDisplaySymbol(newSymbol);\r\n                    })\r\n                    .done();\r\n            }\r\n\r\n            function processData(data, reinitialize) {\r\n                if (data && data.length > 0) {\r\n                    clientStateDataProcessor.processData(data, reinitialize);\r\n                }\r\n\r\n                firstLoad.resolve();\r\n            }\r\n\r\n            function register(requestList, flag, _isReinitialized) {\r\n                whenConnectionReady()\r\n                    .then(function () {\r\n                        dalSocketClientState.Register(requestList, flag, _isReinitialized);\r\n                    })\r\n                    .done();\r\n            }\r\n\r\n            function unregister() {}\r\n\r\n            function whenConnectionReady() {\r\n                return dalSocketClientState.HasStarted();\r\n            }\r\n\r\n            stateObject.set(eShutDownHandlerTopics.stopClientStateManagerCalls, null);\r\n            stateObject.subscribe(eShutDownHandlerTopics.stopClientStateManagerCalls, function () {\r\n                ErrorManager.onWarning(\"connection stop eShutDownHandlerTopics.stopClientStateManagerCalls\");\r\n                dalSocketClientState.StopConnection();\r\n            });\r\n\r\n            return {\r\n                Register: register,\r\n                LoadData: loadData,\r\n                Unregister: unregister,\r\n                SetDisplaySymbol: setDisplaySymbol,\r\n                LoadFinished: loadData,\r\n                OnLoadRequest: onLoadRequest,\r\n                OnRegisterRequest: onRegisterRequest\r\n            };\r\n        }\r\n\r\n        return SocketCacheManager;\r\n    }\r\n);\n",
    "// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\nfunction debounce(func, wait, immediate) {\r\n    var timeout;\r\n\r\n    return function debounceHandler() {\r\n        var context = this,\r\n            args = General.argsToArray(arguments);\r\n\r\n        function laterHandler() {\r\n            timeout = null;\r\n            if (!immediate) {\r\n                func.apply(context, args);\r\n            }\r\n        }\r\n\r\n        var callNow = immediate && !timeout;\r\n        clearTimeout(timeout);\r\n\r\n        timeout = setTimeout(laterHandler, wait);\r\n        if (callNow) {\r\n            func.apply(context, args);\r\n        }\r\n    };\r\n}\r\n\r\ndefine(\"global/debounce\", [],function(){ return debounce });\n",
    "var TDALNotificationData = function () {\r\n    function getUpdatedCacheElementsData(url) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        return ajaxer.promises.get(\"TDALNotificationData/getUpdatedCacheElementsData\", url, null, null, null, null, null, null, false);\r\n    }\r\n\r\n    return {\r\n        GetUpdatedCacheElementsData: getUpdatedCacheElementsData\r\n    };\r\n};\r\n\ndefine(\"dataaccess/dalNotificationData\", [\"generalmanagers/ErrorManager\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (em) {\r\n\t\t\t\treturn this.TDALNotificationData(em);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TDALNotificationData;\n    };\n}(this)));\n\n",
    "define(\r\n    'cachemanagers/NotificationsManager',\r\n    [\r\n        'require',\r\n        'JSONHelper',\r\n        'global/UrlResolver',\r\n        'global/debounce',\r\n        'handlers/Cookie',\r\n        'handlers/Delegate',\r\n        'generalmanagers/ErrorManager',\r\n        'dataaccess/dalNotificationData',\r\n        'enums/DataMembersPositions'\r\n    ],\r\n    function TNotificationManager(require) {\r\n        var JSONHelper = require('JSONHelper'),\r\n            UrlResolver = require('global/UrlResolver'),\r\n            debounce = require('global/debounce'),\r\n            CookieHandler = require('handlers/Cookie'),\r\n            delegate = require('handlers/Delegate'),\r\n            ErrorManager = require('generalmanagers/ErrorManager'),\r\n            dalNotificationData = require('dataaccess/dalNotificationData'),\r\n            onInstrumentsUpdated = new delegate(),\r\n            onMinDealAmountsUpdated = new delegate(),\r\n            notifications = [];\r\n\r\n        function processData(data) {\r\n            //loop trough all notications and raise the relevant events\r\n            for (var i = 0, length = data.length; i < length; i++) {\r\n                notifications[data[i][eNotification.NotificationType]].Invoke({ id: data[i][eNotification.ItemId], ver: data[i][eNotification.RelatedItemId], hash: data[i][eNotification.Version] });\r\n            }\r\n        }\r\n\r\n        //------------------------------------------------\r\n        // register the relevant delegates to each notification type\r\n        //------------------------------------------------\r\n        function notificationEvents() {\r\n            notifications[eNotificationType.InstrumentEdited] = new delegate();\r\n            notifications[eNotificationType.InstrumentEdited].Add(onInstrumentModified);\r\n\r\n            notifications[eNotificationType.MinDealGroupEdited] = new delegate();\r\n            notifications[eNotificationType.MinDealGroupEdited].Add(onMinDealGroupModified);\r\n        }\r\n\r\n        var getUpdatedData = debounce(function (url, version, notificationType) {\r\n            var context = getDataTypeToUpdate(notificationType);\r\n\r\n            dalNotificationData\r\n                .GetUpdatedCacheElementsData(url)\r\n                .then(function (responseText) {\r\n                    onUpdateDataComplete(version, context, responseText);\r\n                })\r\n                .fail(function () {\r\n                    ErrorManager.onWarning('NotificationsManager/onRetryUpdate' + context.updateditem, context.updateditem + ' version sync retry failed');\r\n                })\r\n                .done();\r\n        }, 5000);\r\n\r\n        function onMinDealGroupModified(newVersion) {\r\n            if (newVersion.id !== UrlResolver.getMinDealGroupId()) {\r\n                return;\r\n            }\r\n\r\n            if (newVersion.ver !== UrlResolver.getMinDealsVersion()) {\r\n                var url = UrlResolver.getStaticInitialDataMinDealAmountsUrl(newVersion.id, newVersion.ver, newVersion.hash);\r\n                getUpdatedData(url, newVersion, eNotificationType.MinDealGroupEdited);\r\n            }\r\n        }\r\n\r\n        function onInstrumentModified(newVersion) {\r\n            if (newVersion.ver !== UrlResolver.getInstrumentsVersion()) {\r\n                var url = UrlResolver.getStaticInitialDataInstrumentsUrl(newVersion.ver, newVersion.hash);\r\n                getUpdatedData(url, newVersion, eNotificationType.InstrumentEdited);\r\n            }\r\n        }\r\n\r\n        function onUpdateDataComplete(version, context, responseText) {\r\n            var data = JSONHelper.STR2JSON('NotificationsManager/onUpdate' + context.updateditem + 'Complete', responseText, eErrorSeverity.high);\r\n\r\n            if (data) {\r\n                CookieHandler.CreateCookie('B', CookieHandler.ReadCookie('B').replace(context.regex, '$1' + version.ver + '$3' + version.hash + '$5'), (new Date()).AddMonths(6));\r\n                context.callback.Invoke(data);\r\n            }\r\n        }\r\n\r\n        function getDataTypeToUpdate(notificationType) {\r\n            var regexstring;\r\n            var callback;\r\n            var prop;\r\n\r\n            var enumNameFromValue = function (val) {\r\n                for (prop in eNotificationType) {\r\n                    if (eNotificationType[prop] === val) {\r\n                        return prop;\r\n                    }\r\n                }\r\n            };\r\n\r\n            switch (notificationType) {\r\n                case eNotificationType.InstrumentEdited:\r\n                    callback = onInstrumentsUpdated;\r\n                    regexstring = /(.*\\|)([\\d]+)(-VER\\|)([\\w]+)(-H)/i;\r\n                    break;\r\n\r\n                case eNotificationType.MinDealGroupEdited:\r\n                    regexstring = /(.*\\|)([\\d]+)(-MVER\\|)([\\w]+)(-MH)/i;\r\n                    callback = onMinDealAmountsUpdated;\r\n                    break;\r\n            }\r\n\r\n            return { updateditem: enumNameFromValue(notificationType), regex: regexstring, callback: callback }\r\n        }\r\n\r\n        notificationEvents();\r\n\r\n        return {\r\n            ProcessData: processData,\r\n            OnInstrumentsUpdated: onInstrumentsUpdated,\r\n            OnMinDealAmountsUpdated: onMinDealAmountsUpdated\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\r\n    'cachemanagers/ClientStateHolderManager',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'handlers/Delegate',\r\n        'initdatamanagers/Customer'\r\n    ],\r\n    function ClientStateHolderManager(require) {\r\n        var general = require('handlers/general'),\r\n            delegate = require('handlers/Delegate'),\r\n            customer = require('initdatamanagers/Customer');\r\n\r\n        var onChange = new delegate(),\r\n            csHolder = {\r\n                accountBalance: 0,\r\n                equity: 0,\r\n                netExposure: 0,\r\n                margin: 0,\r\n                exposureCoverage: 0,\r\n                totalEquity: 0,\r\n                openPL: 0,\r\n                usedMargin: 0,\r\n                marginUtilizationPercentage: 0,\r\n                availableMargin: 0,\r\n                marginUtilizationStatus: 0,\r\n                maintenanceMargin: 0\r\n            };\r\n\r\n        function processData(data) {\r\n            updateData(data);\r\n            onChange.Invoke(csHolder);\r\n        }\r\n\r\n        function updateData(data) {\r\n            csHolder.accountBalance = data[eCSHolder.accountBalance];\r\n            csHolder.equity = data[eCSHolder.equity];\r\n            csHolder.netExposure = data[eCSHolder.netExposure];\r\n            csHolder.margin = data[eCSHolder.margin];\r\n            csHolder.exposureCoverage = data[eCSHolder.exposureCoverage];\r\n            csHolder.totalEquity = data[eCSHolder.totalEquity];\r\n            csHolder.openPL = data[eCSHolder.openPL];\r\n\r\n            csHolder.usedMargin = data[eCSHolder.usedMargin];\r\n\r\n            csHolder.maintenanceMargin = general.formatNumberWithThousandsSeparator(\r\n                (general.toNumeric(csHolder.usedMargin) * customer.prop.maintenanceMarginPercentage / 100).toFixed(2));\r\n\r\n            csHolder.marginUtilizationPercentage = data[eCSHolder.marginUtilizationPercentage];\r\n            csHolder.availableMargin = data[eCSHolder.availableMargin];\r\n            csHolder.marginUtilizationStatus = data[eCSHolder.marginUtilizationStatus];\r\n        }\r\n\r\n        return {\r\n            CSHolder: csHolder,\r\n            OnChange: onChange,\r\n            ProcessData: processData\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'cachemanagers/InstrumentVolumeManager',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'handlers/Delegate',\r\n        'handlers/HashTable'\r\n    ],\r\n    function InstrumentVolumeManager(require) {\r\n        var general = require('handlers/general'),\r\n            delegate = require('handlers/Delegate'),\r\n            hashTable = require('handlers/HashTable');\r\n\r\n        function InstrumentVolume() {\r\n            this.InstrumentID = 0;\r\n            this.BaseSymbolNetExposure = 0;\r\n            this.OtherSymbolNetExposure = 0;\r\n            this.AccountSymbolAmount = 0;\r\n            this.RequiredMarginPercentage = 0;\r\n            this.UsedMargin = 0;\r\n            this.MarginUtilizationPercentage = 0;\r\n            this.AvailableMargin = 0;\r\n            this.MarginUtilizationStatus = eMarginUtilizationStatus.NA;\r\n            this.Status = eStatus.Removed;\r\n            this.LastUpdate = '';\r\n            this.BaseSymbolAmount = 0;\r\n            this.OtherSymbolAmount = 0;\r\n        }\r\n\r\n        var instrumentVolumes = new hashTable();\r\n        var onChange = new delegate();\r\n\r\n        function update(item, delta) {\r\n            for (var prop in eInstrumentVolume) {\r\n                if (eInstrumentVolume.hasOwnProperty(prop)) {\r\n                    if (general.isDefinedType(item[prop])) {\r\n                        item[prop] = delta[eInstrumentVolume[prop]];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function create(data) {\r\n            var newItem = new InstrumentVolume();\r\n\r\n            update(newItem, data);\r\n\r\n            return newItem;\r\n        }\r\n\r\n        function processData(data) {\r\n            var items = { newItems: [], editedItems: [], removedItems: [] }\r\n\r\n            for (var i = 0, length = data.length; i < length; i++) {\r\n                var id = data[i][eInstrumentVolume.InstrumentID];\r\n\r\n                switch (data[i][eInstrumentVolume.Status]) {\r\n                    case eStatus.New:\r\n                    case eStatus.Edited:\r\n                        if (instrumentVolumes.GetItem(id)) {\r\n                            update(instrumentVolumes.GetItem(id), data[i]);\r\n                            items.editedItems.push(id);\r\n                        }\r\n                        else {\r\n                            instrumentVolumes.SetItem(id, create(data[i]));\r\n                            items.newItems.push(id);\r\n                        }\r\n                        break;\r\n\r\n                    case eStatus.Removed:\r\n                        if (instrumentVolumes.GetItem(id)) {\r\n                            instrumentVolumes.RemoveItem(id);\r\n                            items.removedItems.push(id);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n\r\n            onChange.Invoke(items);\r\n        }\r\n\r\n        return {\r\n            InstrumentVolumes: instrumentVolumes,\r\n            OnChange: onChange,\r\n            ProcessData: processData\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'cachemanagers/NetExposureManager',\r\n    [\r\n        'require',\r\n        'handlers/Delegate',\r\n        'handlers/HashTable'\r\n    ],\r\n    function NetExposureManager(require) {\r\n        var delegate = require('handlers/Delegate'),\r\n            hashTable = require('handlers/HashTable');\r\n\r\n        var exposures = new hashTable(),\r\n            onChange = new delegate();\r\n\r\n        function Exposure() {\r\n            this.symbolId = '';\r\n            this.amount = '';\r\n            this.accountSymbolAmount = '';\r\n            this.status = '';\r\n        }\r\n\r\n        function processData(data) {\r\n            var items = [],\r\n                i,\r\n                len = data.length,\r\n                item;\r\n\r\n            if (len > 0) {\r\n                for (i = 0; i < len; i++) {\r\n                    item = exposures.GetItem(data[i][eExposure.symbolID]);\r\n\r\n                    if (!item) {\r\n                        item = new Exposure();\r\n                        exposures.SetItem(data[i][eExposure.symbolID], item);\r\n                    }\r\n\r\n                    items.push(item);\r\n                    updateExposure(item, data[i]);\r\n                }\r\n\r\n                onChange.Invoke(items);\r\n            }\r\n        }\r\n\r\n        function updateExposure(exposure, data) {\r\n            exposure.symbolId = data[eExposure.symbolID];\r\n            exposure.amount = data[eExposure.amount];\r\n            exposure.accountSymbolAmount = data[eExposure.accountSymbolAmount];\r\n            exposure.status = data[eExposure.status];\r\n        }\r\n\r\n        return {\r\n            Exposures: exposures,\r\n            OnChange: onChange,\r\n            ProcessData: processData\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\r\n    'cachemanagers/QuotesManager',\r\n    [\r\n        'require',\r\n        'tracking/PerformanceDataCollector',\r\n        'handlers/HashTable',\r\n        'handlers/Delegate',\r\n        'enums/DataMembersPositions'\r\n    ],\r\n    function TQuotesManager(require) {\r\n        function TQuote(instrumentId) {\r\n            this.id = instrumentId;\r\n            this.bid = 0;\r\n            this.ask = '';\r\n            this.open = '';\r\n            this.high = '';\r\n            this.low = '';\r\n            this.highBid = '';\r\n            this.lowAsk = '';\r\n            this.tradeTime = '';\r\n            this.change = 0;\r\n            this.changePips = 0;\r\n            this.state = eQuoteStates.NotChanged;\r\n            this.close = '';\r\n        }\r\n\r\n        TQuote.prototype.isActive = function () {\r\n            return this.state !== eQuoteStates.Disabled && this.state !== eQuoteStates.TimedOut && this.state !== eQuoteStates.Locked;\r\n        }\r\n\r\n        var PerformanceDataCollector = require('tracking/PerformanceDataCollector');\r\n        var onChange = require('handlers/Delegate');\r\n        var quotes = require('handlers/HashTable');\r\n\r\n        onChange = new onChange();\r\n        quotes = new quotes();\r\n\r\n        onChange.Add(onFirstQuote);\r\n\r\n        function onFirstQuote() {\r\n            PerformanceDataCollector.registerEventTimestamp(eFxNetEvents.FirstQuoteEvent);\r\n            onChange.Remove(onFirstQuote);\r\n        }\r\n\r\n        function processTickData(data, serverTime) {\r\n            resetStates();\r\n\r\n            var delta = [];\r\n            for (var i = 0, length = data.length; i < length; i++) {\r\n                var quote = quotes.GetItem(data[i][eTicks.instrumentID]);\r\n\r\n                if (!quote) {\r\n                    quote = new TQuote(data[i][eTicks.instrumentID]);\r\n                    quotes.SetItem(quote.id, quote);\r\n                }\r\n\r\n                updateQuoteFromTick(quote, data[i], serverTime);\r\n                delta.push(quote.id);\r\n            }\r\n\r\n            onChange.Invoke(delta);\r\n        }\r\n\r\n        function processOhlcData(data) {\r\n            var delta = [];\r\n\r\n            for (var i = 0, length = data.length; i < length; i++) {\r\n                var quote = quotes.GetItem(data[i][eOhlc.instrumentID]);\r\n\r\n                if (!quote) {\r\n                    quote = new TQuote(data[i][eOhlc.instrumentID]);\r\n                    quotes.SetItem(quote.id, quote);\r\n                }\r\n\r\n                updateQuoteFromOhlc(quote, data[i]);\r\n                delta.push(quote.id);\r\n            }\r\n\r\n            onChange.Invoke(delta);\r\n        }\r\n\r\n        function resetStates() {\r\n            quotes.ForEach(function iterator(key, item) {\r\n                if (item.isActive()) {\r\n                    item.state = eQuoteStates.NotChanged;\r\n                }\r\n            });\r\n        }\r\n\r\n        function updateQuoteFromTick(quote, delta, serverTime) {\r\n            quote.state = getState(quote, delta);\r\n            quote.bid = delta[eTicks.bid];\r\n            quote.ask = delta[eTicks.ask];\r\n\r\n            if (serverTime) {\r\n                var currentTradeTime = new Date(serverTime.getTime());\r\n                currentTradeTime.AddSeconds(-delta[eTicks.tradeTimeOffset]);\r\n                quote.tradeTime = currentTradeTime.ExtractDateShortYear() + ' ' + currentTradeTime.ExtractFullTime();\r\n            }\r\n\r\n            quote.changePips = quote.bid - quote.close;\r\n            quote.change = (quote.close != 0) ? (quote.bid / quote.close - 1) * 100 : 0;\r\n        }\r\n\r\n        function updateQuoteFromOhlc(quote, delta) {\r\n            quote.open = delta[eOhlc.open];\r\n            quote.highBid = delta[eOhlc.high];\r\n            quote.lowAsk = delta[eOhlc.low];\r\n            quote.close = delta[eOhlc.close];\r\n        }\r\n\r\n        function getState(quote, delta) {\r\n            if (delta[eTicks.state] != eQuoteStates.Enabled) {\r\n                return delta[eTicks.state];\r\n            }\r\n\r\n            if (quote.bid < delta[eTicks.bid]) {\r\n                return eQuoteStates.Up;\r\n            }\r\n\r\n            if (quote.bid > delta[eTicks.bid]) {\r\n                return eQuoteStates.Down;\r\n            }\r\n\r\n            return eQuoteStates.NotChanged;\r\n        }\r\n\r\n        function removeItems(items) {\r\n            for (var i = 0, length = items.length; i < length; i++) {\r\n                quotes.Remove(items[i]);\r\n            }\r\n        }\r\n\r\n        var module = window.$quotesManager = {\r\n            OnChange: onChange,\r\n            Quotes: quotes,\r\n            ProcessTickData: processTickData,\r\n            ProcessOhlcData: processOhlcData,\r\n            GetState: getState,\r\n            RemoveItems: removeItems\r\n        };\r\n\r\n        return module;\r\n    }\r\n);\n",
    "function TLimit(orderID, data) {\r\n    data = data || [];\r\n\r\n    this.orderID = orderID;\r\n    this.instrumentID = data[eLimit.instrumentID];\r\n    this.baseSymbol = data[eLimit.baseSymbol];\r\n    this.otherSymbol = data[eLimit.otherSymbol];\r\n    this.positionNumber = data[eLimit.positionNumber];\r\n    this.accountNumber = data[eLimit.accountNumber];\r\n    this.orderDir = data[eLimit.orderDir];\r\n    this.orderRate = data[eLimit.orderRate];\r\n    this.buySymbolID = data[eLimit.buySymbolID];\r\n    this.buyAmount = data[eLimit.buyAmount];\r\n    this.sellSymbolID = data[eLimit.sellSymbolID];\r\n    this.sellAmount = data[eLimit.sellAmount];\r\n    this.type = data[eLimit.type];\r\n    this.mode = data[eLimit.mode];\r\n    this.expirationDate = data[eLimit.expirationDate];\r\n    this.entryTime = data[eLimit.entryTime];\r\n    this.slRate = data[eLimit.slRate];\r\n    this.tpRate = data[eLimit.tpRate];\r\n    this.otherLimitID = data[eLimit.otherLimitID];\r\n    this.status = \"\";\r\n}\r\n\r\nTLimit.prototype.Update = function(data) {\r\n    this.orderID = data[eLimit.orderID];\r\n    this.instrumentID = data[eLimit.instrumentID];\r\n    this.baseSymbol = data[eLimit.baseSymbol];\r\n    this.otherSymbol = data[eLimit.otherSymbol];\r\n    this.positionNumber = data[eLimit.positionNumber];\r\n    this.accountNumber = data[eLimit.accountNumber];\r\n    this.orderDir = data[eLimit.orderDir];\r\n    this.orderRate = data[eLimit.orderRate];\r\n    this.buySymbolID = data[eLimit.buySymbolID];\r\n    this.buyAmount = data[eLimit.buyAmount];\r\n    this.sellSymbolID = data[eLimit.sellSymbolID];\r\n    this.sellAmount = data[eLimit.sellAmount];\r\n    this.type = data[eLimit.type];\r\n    this.mode = data[eLimit.mode];\r\n    this.expirationDate = data[eLimit.expirationDate];\r\n    this.entryTime = data[eLimit.entryTime];\r\n    this.slRate = data[eLimit.slRate];\r\n    this.tpRate = data[eLimit.tpRate];\r\n    this.otherLimitID = data[eLimit.otherLimitID];\r\n};\ndefine(\"handlers/limit\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.TLimit;\n    };\n}(this)));\n\n",
    "define(\r\n    'cachemanagers/activelimitsmanager',\r\n    [\r\n        'handlers/Delegate',\r\n        'handlers/HashTable',\r\n        'handlers/limit'\r\n    ],\r\n    function ActiveLimitsManager(delegate, hashtable, tlimit) {\r\n        var onChange = new delegate(),\r\n            onPriceAlert = new delegate(),\r\n            limits = new hashtable();\r\n\r\n        function processData(data, isReinitialized) {\r\n            var items = { newLimits: [], editedLimits: [], removedLimits: [] };\r\n            var i, length, id, limit;\r\n\r\n            if (isReinitialized) {\r\n                limits.ForEach(function iterator(orderId) {\r\n                    var isInData = false,\r\n                        newData = [];\r\n\r\n                    for (i = 0, length = data.length; i < length; i++) {\r\n                        if (data[i][eLimit.orderID] == orderId) {\r\n                            isInData = true;\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    if (!isInData) {\r\n                        newData[eLimit.status] = eStatus.Removed;\r\n                        newData[eLimit.orderID] = orderId;\r\n\r\n                        data.push(newData);\r\n                    }\r\n                });\r\n            }\r\n\r\n            for (i = 0, length = data.length; i < length; i++) {\r\n                id = data[i][eLimit.orderID];\r\n                limit = limits.GetItem(id);\r\n\r\n                switch (data[i][eLimit.status]) {\r\n                    case eStatus.New:\r\n                    case eStatus.Edited:\r\n                        if (limit) {\r\n                            limit.Update(data[i]);\r\n                            items.editedLimits.push(id);\r\n                        }\r\n                        else {\r\n                            limit = new tlimit(id, data[i]);\r\n                            limits.SetItem(id, limit);\r\n                            items.newLimits.push(id);\r\n                        }\r\n                        break;\r\n\r\n                    case eStatus.Removed:\r\n                        if (limit) {\r\n                            limits.RemoveItem(id);\r\n                            items.removedLimits.push(id);\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n\r\n            onPriceAlert.Invoke(limits.Container);\r\n            onChange.Invoke(items);\r\n        }\r\n\r\n        var getPriceAlerts = function () {\r\n            return limits.Filter(function (orderId, limit) {\r\n                return limit.mode === eLimitMode.PriceAlert;\r\n            });\r\n        };\r\n\r\n        var hasPriceAlerts = function (instrumentId) {\r\n            return limits\r\n                .Find(function (orderId, limit) {\r\n                    return limit.instrumentID === instrumentId && limit.mode === eLimitMode.PriceAlert;\r\n                })\r\n                .hasItems();\r\n        };\r\n\r\n        return {\r\n            limits: limits,\r\n            GetPriceAlerts: getPriceAlerts,\r\n            HasPriceAlerts: hasPriceAlerts,\r\n\r\n            OnChange: onChange,\r\n            ProcessData: processData,\r\n            OnPriceAlert: onPriceAlert,\r\n        };\r\n    }\r\n);\r\n\n",
    "function TDeal(data, plData) {\r\n    data = data || [];\r\n    plData = plData || [];\r\n\r\n    this.instrumentID = data[eDeal.instrumentID];\r\n    this.orderID = data[eDeal.orderID];\r\n    this.baseSymbol = data[eDeal.baseSymbol];\r\n    this.otherSymbol = data[eDeal.otherSymbol];\r\n    this.positionNumber = data[eDeal.positionNumber];\r\n    this.accountNumber = data[eDeal.accountNumber];\r\n    this.orderDir = data[eDeal.orderDir];\r\n    this.orderRate = data[eDeal.orderRate];\r\n    this.orderRateNumeric = parseFloat((this.orderRate || '').replace(',', ''));\r\n    this.buySymbolID = data[eDeal.buySymbolID];\r\n    this.buyAmount = data[eDeal.buyAmount];\r\n    this.sellSymbolID = data[eDeal.sellSymbolID];\r\n    this.sellAmount = data[eDeal.sellAmount];\r\n    this.valueDate = data[eDeal.valueDate];\r\n    this.dealType = data[eDeal.dealType];\r\n    this.exeTime = data[eDeal.exeTime];\r\n    this.slRate = data[eDeal.slRate];\r\n    this.slID = data[eDeal.slID];\r\n    this.tpRate = data[eDeal.tpRate];\r\n    this.tpID = data[eDeal.tpID];\r\n    this.additionalPL = data[eDeal.additionalPL] || 0;\r\n    this.spreadDiscount = data[eDeal.spreadDiscount] || 0;\r\n\r\n    this.spotRate = plData[eDealPL.spotRate] || 0;\r\n    this.fwPips = plData[eDealPL.fwPips] || 0;\r\n    this.closingRate = plData[eDealPL.closingRate] || 0;\r\n    this.pl = plData[eDealPL.pl] || 0;\r\n    this.plNumeric = parseFloat((this.pl || '').replace(',', ''));\r\n    this.lastUpdate = plData[eDealPL.lastUpdate];\r\n    this.commission = plData[eDealPL.commission] || 0;\r\n\r\n}\r\n\r\nTDeal.prototype.Update = function(data) {\r\n    this.instrumentID = data[eDeal.instrumentID];\r\n    this.baseSymbol = data[eDeal.baseSymbol];\r\n    this.otherSymbol = data[eDeal.otherSymbol];\r\n    this.orderID = data[eDeal.orderID];\r\n    this.positionNumber = data[eDeal.positionNumber];\r\n    this.accountNumber = data[eDeal.accountNumber];\r\n    this.orderDir = data[eDeal.orderDir];\r\n    this.orderRate = data[eDeal.orderRate];\r\n    this.buySymbolID = data[eDeal.buySymbolID];\r\n    this.buyAmount = data[eDeal.buyAmount];\r\n    this.sellSymbolID = data[eDeal.sellSymbolID];\r\n    this.sellAmount = data[eDeal.sellAmount];\r\n    this.valueDate = data[eDeal.valueDate];\r\n    this.dealType = data[eDeal.dealType];\r\n    this.exeTime = data[eDeal.exeTime];\r\n    this.slRate = data[eDeal.slRate];\r\n    this.slID = data[eDeal.slID];\r\n    this.tpRate = data[eDeal.tpRate];\r\n    this.tpID = data[eDeal.tpID];\r\n    this.additionalPL = data[eDeal.additionalPL];\r\n    this.spreadDiscount = data[eDeal.spreadDiscount] || 0;\r\n};\r\n\r\nTDeal.prototype.UpdatePL = function(plData) {\r\n    this.spotRate = plData[eDealPL.spotRate];\r\n    this.fwPips = plData[eDealPL.fwPips];\r\n    this.closingRate = plData[eDealPL.closingRate];\r\n    this.pl = plData[eDealPL.pl];\r\n    this.lastUpdate = plData[eDealPL.lastUpdate];\r\n    this.commission = plData[eDealPL.commission]; \r\n    this.plNumeric = parseFloat((this.pl || '').replace(',', ''));\r\n};\r\n\r\n\r\ndefine(\"handlers/Deal\", [],function () { return TDeal });\n",
    "define(\r\n    'cachemanagers/dealsmanager',\r\n    [\r\n        'require',\r\n        'handlers/HashTable',\r\n        'handlers/Delegate',\r\n        'handlers/Deal'\r\n    ],\r\n    function DealsManagerDef(require) {\r\n        var hashtable = require('handlers/HashTable'),\r\n            delegate = require('handlers/Delegate'),\r\n            Deal = require('handlers/Deal');\r\n\r\n        function DealsManager() {\r\n            var deals = new hashtable(),\r\n                onDealsChange = new delegate(),\r\n                onDealsRemoved = new delegate(),\r\n                onDealsPLChange = new delegate();\r\n\r\n            function processDeals(data, isReinitialized) {\r\n                var items = { newItems: [], editedItems: [], removedItems: [] };\r\n                var i, length, id, deal;\r\n\r\n                if (isReinitialized) {\r\n                    deals.ForEach(function iterator(dealId) {\r\n                        var isInData = false,\r\n                            newData = [];\r\n\r\n                        for (var idx = 0, len = data.length; idx < len; idx++) {\r\n                            if (data[idx][eDeal.orderID] == dealId) {\r\n                                isInData = true;\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        if (!isInData) {\r\n                            newData[eDeal.status] = eStatus.Removed;\r\n                            newData[eDeal.orderID] = dealId;\r\n\r\n                            data.push(newData);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                for (i = 0, length = data.length; i < length; i++) {\r\n                    id = data[i][eDeal.orderID];\r\n                    deal = deals.GetItem(id);\r\n\r\n                    switch (data[i][eDeal.status]) {\r\n                        case eStatus.New:\r\n                        case eStatus.Edited:\r\n                            if (deal) {\r\n                                deal.Update(data[i]);\r\n                                items.editedItems.push(id);\r\n                            }\r\n                            else {\r\n                                deal = new Deal(data[i]);\r\n                                deals.SetItem(id, deal);\r\n                                items.newItems.push(id);\r\n                            }\r\n                            break;\r\n\r\n                        case eStatus.Removed:\r\n                            if (deal) {\r\n                                deals.RemoveItem(id);\r\n                                items.removedItems.push(id);\r\n                            }\r\n                            break;\r\n                    }\r\n                }\r\n\r\n                onDealsChange.Invoke(items);\r\n\r\n                if (items.removedItems.length) {\r\n                    onDealsRemoved.Invoke(items.removedItems);\r\n                }\r\n            }\r\n\r\n            function processDealsPL(plData) {\r\n                var dealsIDs = [],\r\n                    dealsObj = {},\r\n                    i, length,\r\n                    id,\r\n                    deal;\r\n\r\n                for (i = 0, length = plData.length; i < length; i++) {\r\n                    id = plData[i][eDealPL.dealID];\r\n                    deal = deals.GetItem(id);\r\n\r\n                    if (deal) {\r\n                        deal.UpdatePL(plData[i]);\r\n                        dealsIDs.push(deal.orderID);\r\n                        dealsObj[deal.orderID] = deal;\r\n                    }\r\n                }\r\n\r\n                onDealsPLChange.Invoke({ dealsIDs: dealsIDs, dealsObj: dealsObj });\r\n            }\r\n\r\n            return {\r\n                Deals: deals,\r\n                OnDealsChange: onDealsChange,\r\n                OnDealsRemoved: onDealsRemoved,\r\n                OnDealsPLChange: onDealsPLChange,\r\n                ProcessDeals: processDeals,\r\n                ProcessDealsPL: processDealsPL\r\n            };\r\n        }\r\n\r\n        return new DealsManager();\r\n    }\r\n);\r\n\n",
    "define(\r\n    'cachemanagers/bonusmanager',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'handlers/general',\r\n        'handlers/Delegate',\r\n        'enums/DataMembersPositions'\r\n    ],\r\n    function BonusManager(require) {\r\n        // model example: {'VolumeUsd': 10000000, 'AmountBase': 500, 'AmountGivenBase': 570, 'StartDate ': '01/01/2017', 'EndDate': '01/01/2018'}\r\n        var ko = require('knockout'),\r\n            general = require('handlers/general'),\r\n            delegate = require('handlers/Delegate');\r\n\r\n        var module = {};\r\n        module.onChange = new delegate();\r\n\r\n        module.bonus = ko.observable({\r\n            volumeUsd: null,\r\n            amountBase: null,\r\n            amountGivenBase: null,\r\n            startDate: null,\r\n            endDate: null,\r\n            accumulatedVolumeUsd: null\r\n        });\r\n\r\n        module.ProcessData = function (bonusData) {\r\n            module.bonus({\r\n                volumeUsd: general.toNumeric(bonusData[eBonus.volumeUsd]),\r\n                amountBase: general.toNumeric(bonusData[eBonus.amountBase]),\r\n                amountGivenBase: general.toNumeric(bonusData[eBonus.amountGivenBase]),\r\n                startDate: bonusData[eBonus.startDate],\r\n                endDate: bonusData[eBonus.endDate],\r\n                accumulatedVolumeUsd: general.toNumeric(bonusData[eBonus.accumulatedVolumeUsd])\r\n            });\r\n            module.onChange.Invoke();\r\n        }\r\n\r\n        return module;\r\n    }\r\n);\n",
    "\n",
    "define(\r\n    'cachemanagers/clientstatedataprocessor',\r\n    [\r\n        \"require\",\r\n        'handlers/general',\r\n        'cachemanagers/NotificationsManager',\r\n        'cachemanagers/ClientStateFlagsManager',\r\n        'cachemanagers/ClientStateHolderManager',\r\n        \"cachemanagers/PortfolioStaticManager\",\r\n        'cachemanagers/InstrumentVolumeManager',\r\n        'cachemanagers/NetExposureManager',\r\n        'cachemanagers/QuotesManager',\r\n        'cachemanagers/activelimitsmanager',\r\n        'cachemanagers/dealsmanager',\r\n        'cachemanagers/bonusmanager',\r\n        \"StateObject!PerformaceEvents\"\r\n    ],\r\n    function ClientStateDataProcessor(require) {\r\n        var serverTime = null,\r\n            general = require('handlers/general'),\r\n            quotesManager = require('cachemanagers/QuotesManager'),\r\n            activeLimits = require('cachemanagers/activelimitsmanager'),\r\n            dealsManager = require('cachemanagers/dealsmanager'),\r\n            notificationsManager = require('cachemanagers/NotificationsManager'),\r\n            netExposureManager = require('cachemanagers/NetExposureManager'),\r\n            portfolioStatic = require(\"cachemanagers/PortfolioStaticManager\"),\r\n            csFlags = require('cachemanagers/ClientStateFlagsManager'),\r\n            csHolder = require('cachemanagers/ClientStateHolderManager'),\r\n            instrumentVolumeManager = require('cachemanagers/InstrumentVolumeManager'),\r\n            bonusManager = require('cachemanagers/bonusmanager'),\r\n            stateObject = require(\"StateObject!PerformaceEvents\");\r\n\r\n        function processData(data, reinitialize) {\r\n            if (data && data.length > 0) {\r\n\r\n                if (data[eClientState.serverTime] && data[eClientState.serverTime].length > 0) {\r\n                    var splitDate = general.SplitDateTime(data[eClientState.serverTime]);\r\n                    serverTime = new Date(splitDate.year, splitDate.month - 1, splitDate.day, splitDate.hour, splitDate.min, splitDate.sec, splitDate.ms);\r\n                }\r\n\r\n                if (data[eClientState.portfolioStatic] && data[eClientState.portfolioStatic].length > 0) {\r\n                    portfolioStatic.ProcessData(data[eClientState.portfolioStatic]);\r\n                }\r\n\r\n                if (data[eClientState.ohlcs] && data[eClientState.ohlcs].length > 0) {\r\n                    quotesManager.ProcessOhlcData(data[eClientState.ohlcs]);\r\n                }\r\n\r\n                if (data[eClientState.ticks] && data[eClientState.ticks].length > 0) {\r\n                    quotesManager.ProcessTickData(data[eClientState.ticks], serverTime);\r\n                }\r\n\r\n                if (data[eClientState.flags] && data[eClientState.flags].length > 0) {\r\n                    csFlags.ProcessData(data[eClientState.flags]);\r\n                }\r\n\r\n                if (reinitialize || (data[eClientState.limits] && data[eClientState.limits].length > 0)) {\r\n                    activeLimits.ProcessData(data[eClientState.limits], reinitialize);\r\n                }\r\n\r\n                if (reinitialize || (data[eClientState.deals] && data[eClientState.deals].length > 0)) {\r\n                    dealsManager.ProcessDeals(data[eClientState.deals], reinitialize);\r\n                }\r\n\r\n                if (data[eClientState.portfolioSummary] && data[eClientState.portfolioSummary].length > 0) { //should check that portfolioSummary is not empty before accessing inner collections\r\n                    if (data[eClientState.portfolioSummary][ePortfolioSummary.dealPL].length > 0) {\r\n                        dealsManager.ProcessDealsPL(data[eClientState.portfolioSummary][ePortfolioSummary.dealPL]);\r\n                    }\r\n\r\n                    if (data[eClientState.portfolioSummary][ePortfolioSummary.csHolder].length > 0) {\r\n                        csHolder.ProcessData(data[eClientState.portfolioSummary][ePortfolioSummary.csHolder]);\r\n                    }\r\n\r\n                    if (data[eClientState.portfolioSummary][ePortfolioSummary.netExposure].length > 0) {\r\n                        netExposureManager.ProcessData(data[eClientState.portfolioSummary][ePortfolioSummary.netExposure]);\r\n                    }\r\n\r\n                    if (data[eClientState.portfolioSummary][ePortfolioSummary.instrumentVolumes].length > 0) {\r\n                        instrumentVolumeManager.ProcessData(data[eClientState.portfolioSummary][ePortfolioSummary.instrumentVolumes]);\r\n                    }\r\n                }\r\n\r\n                if (data[eClientState.notifications] && data[eClientState.notifications].length > 0) {\r\n                    notificationsManager.ProcessData(data[eClientState.notifications]);\r\n                }\r\n\r\n                if (data[eClientState.bonus] && data[eClientState.bonus].length > 0) {\r\n                    bonusManager.ProcessData(data[eClientState.bonus]);\r\n                }\r\n            }\r\n        }\r\n\r\n        function getServerTime() {\r\n            return serverTime;\r\n        }\r\n        stateObject.set('InitialDataLoadCompleted', null);\r\n        stateObject.subscribe('InitialDataLoadCompleted', function (initialServerTime) {\r\n            var splitDate = general.SplitDateTime(initialServerTime);\r\n            serverTime = new Date(splitDate.year, splitDate.month - 1, splitDate.day, splitDate.hour, splitDate.min, splitDate.sec);\r\n        });\r\n\r\n        return {\r\n            processData: processData,\r\n            ServerTime: getServerTime\r\n        };\r\n    }\r\n);\n",
    "/* global Preloader, SocketConnection*/\r\ndefine(\"cachemanagers/CacheManager\", [\r\n\t\"require\",\r\n\t\"Q\",\r\n\t\"generalmanagers/ErrorManager\",\r\n\t\"generalmanagers/RegistrationManager\",\r\n\t\"cachemanagers/AjaxCacheManager\",\r\n\t\"cachemanagers/SocketCacheManager\",\r\n\t\"cachemanagers/clientstatedataprocessor\",\r\n\t\"handlers/websocketconnection\",\r\n], function CacheManagerDef(require) {\r\n\tvar Q = require(\"Q\"),\r\n\t\tErrorManager = require(\"generalmanagers/ErrorManager\"),\r\n\t\tRegistrationManager = require(\"generalmanagers/RegistrationManager\"),\r\n\t\tAjaxCacheManager = require(\"cachemanagers/AjaxCacheManager\"),\r\n\t\tSocketCacheManager = require(\"cachemanagers/SocketCacheManager\"),\r\n\t\tClientStateDataProcessor = require(\"cachemanagers/clientstatedataprocessor\"),\r\n\t\tSocketConnection = require(\"handlers/websocketconnection\");\r\n\r\n\tfunction CacheManager() {\r\n\t\tvar isInstanceLoaded = Q.defer(),\r\n\t\t\tinstance;\r\n\r\n\t\tfunction init() {\r\n\t\t\tSocketConnection.hasStarted()\r\n\t\t\t\t.then(function onInit() {\r\n\t\t\t\t\tinstance = new SocketCacheManager(ClientStateDataProcessor);\r\n\r\n\t\t\t\t\tSocketConnection.setNotAvailableHandler(function notAvailableHandler() {\r\n\t\t\t\t\t\t// only for fallback during application run after cache manager init was called\r\n\t\t\t\t\t\tErrorManager.onWarning(\r\n\t\t\t\t\t\t\t\"SocketConnection\",\r\n\t\t\t\t\t\t\t\"Socket connection is not available when PushService is enabled, falling back to ajax\"\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tif (instance) {\r\n\t\t\t\t\t\t\tinstance = new AjaxCacheManager(ClientStateDataProcessor);\r\n\r\n\t\t\t\t\t\t\tinstance.OnRegisterRequest.Add(RegistrationManager.Register);\r\n\t\t\t\t\t\t\tinstance.OnLoadRequest.Add(function () {\r\n\t\t\t\t\t\t\t\tloadData().done();\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tinstance.LoadData().done();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tisInstanceLoaded.resolve();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(function onError() {\r\n\t\t\t\t\tinstance = new AjaxCacheManager(ClientStateDataProcessor);\r\n\t\t\t\t\tisInstanceLoaded.resolve();\r\n\r\n\t\t\t\t\tErrorManager.onWarning(\"SocketConnection\", \"WebSocket not supported\");\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\r\n\t\t\tisInstanceLoaded.promise\r\n\t\t\t\t.then(function setHandlers() {\r\n\t\t\t\t\tinstance.OnRegisterRequest.Add(RegistrationManager.Register);\r\n\t\t\t\t\tinstance.OnLoadRequest.Add(function () {\r\n\t\t\t\t\t\tloadData().done();\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\t\t}\r\n\r\n\t\tfunction loadData() {\r\n\t\t\treturn whenInstanceIsAvailable().then(function () {\r\n\t\t\t\treturn instance.LoadData();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction setDisplaySymbol(newSymbol) {\r\n\t\t\twhenInstanceIsAvailable()\r\n\t\t\t\t.then(function () {\r\n\t\t\t\t\tinstance.SetDisplaySymbol(newSymbol);\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\t\t}\r\n\r\n\t\tfunction loadFinished() {\r\n\t\t\treturn whenInstanceIsAvailable().then(function () {\r\n\t\t\t\treturn instance.LoadFinished;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction register(requestList, flag, isReinitialized) {\r\n\t\t\tloadFinished()\r\n\t\t\t\t.then(function () {\r\n\t\t\t\t\tinstance.Register(requestList, flag, isReinitialized);\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\t\t}\r\n\r\n\t\tfunction unregister() {\r\n\t\t\tloadFinished()\r\n\t\t\t\t.then(function () {\r\n\t\t\t\t\tinstance.Unregister();\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\t\t}\r\n\r\n\t\tfunction whenInstanceIsAvailable() {\r\n\t\t\treturn isInstanceLoaded.promise;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tRegister: register,\r\n\t\t\tUnregister: unregister,\r\n\t\t\tLoadData: loadData,\r\n\t\t\tSetDisplaySymbol: setDisplaySymbol,\r\n\t\t\tServerTime: ClientStateDataProcessor.ServerTime,\r\n\t\t};\r\n\t}\r\n\r\n\tvar module = (window.$cacheManager = new CacheManager());\r\n\r\n\treturn module;\r\n});\r\n\n",
    "define(\r\n    'FxNet/LogicLayer/Deal/DealLifeCycle',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'cachemanagers/CacheManager'\r\n    ],\r\n    function DealLifeCycle(require) {\r\n        var CacheManager = require('cachemanagers/CacheManager'),\r\n            general = require('handlers/general');\r\n\r\n        var getIslamicValueDateBeforeDeal = function(assetTypeId, dealPermit) {\r\n            var isDealOnIslamicAccount = (assetTypeId === eAssetType.Share || assetTypeId === eAssetType.Future) && dealPermit === eDealPermit.Islamic,\r\n                serverTime,\r\n                valueDate;\r\n\r\n            if (isDealOnIslamicAccount) {\r\n                serverTime = new Date(CacheManager.ServerTime().getTime());\r\n                valueDate = serverTime.toLaterDate().skipWeekendDays();\r\n                return valueDate;\r\n            }\r\n            return null;\r\n        };\r\n\r\n        var sharesIsCorporateActionDateSignificant_BeforeDeal = function(dealPermit, assetTypeId, corporateActionDate) {\r\n            return assetTypeId === eAssetType.Share &&\r\n            ((dealPermit !== eDealPermit.Islamic && !!corporateActionDate) ||\r\n            (dealPermit === eDealPermit.Islamic && !!corporateActionDate &&\r\n                general.str2Date(corporateActionDate, \"d/m/Y H:M\") < getIslamicValueDateBeforeDeal(assetTypeId, dealPermit)));\r\n        };\r\n\r\n        var sharesIsDividendDateSignificant_BeforeDeal = function(dealPermit, assetTypeId, corporateActionDate, dividendDate) {\r\n            return assetTypeId === eAssetType.Share &&\r\n            ((dealPermit !== eDealPermit.Islamic && !corporateActionDate && !!dividendDate) ||\r\n            (dealPermit === eDealPermit.Islamic && !corporateActionDate && !!dividendDate &&\r\n                general.str2Date(dividendDate, \"d/m/Y H:M\") < getIslamicValueDateBeforeDeal(assetTypeId, dealPermit)));\r\n        };\r\n\r\n        var futuresIsRolloverDateSignificant_BeforeDeal = function(dealPermit, assetTypeId, rolloverDate) {\r\n            return assetTypeId === eAssetType.Future &&\r\n            ((dealPermit !== eDealPermit.Islamic && !!rolloverDate) ||\r\n            (dealPermit === eDealPermit.Islamic && !!rolloverDate && general.str2Date(rolloverDate, \"d/m/Y H:M\") < getIslamicValueDateBeforeDeal(assetTypeId, dealPermit)));\r\n        };\r\n\r\n        var futuresIsRolloverDateSignificant_AfterDeal = function (assetTypeId, instrumentRolloverDate, valueDate) {\r\n            if (assetTypeId === eAssetType.Future && !!instrumentRolloverDate) \r\n                return (!valueDate || general.str2Date(instrumentRolloverDate, 'd,m,y,H,M,S') < general.str2Date(valueDate, 'd,m,y,H,M,S'));\r\n            return false;\r\n        };\r\n\r\n        var sharesIsCorporateActionDateSignificant_AfterDeal = function (assetTypeId, instrumentCorporateActionDate, valueDate) {\r\n            if (assetTypeId === eAssetType.Share && !!instrumentCorporateActionDate) \r\n                return (!valueDate ||\r\n                    general.str2Date(instrumentCorporateActionDate, 'd,m,y,H,M,S') < general.str2Date(valueDate, 'd,m,y,H,M,S'));\r\n            return false;\r\n        };\r\n\r\n        var sharesIsDividendDateSignificant_AfterDeal = function (assetTypeId, instrumentDividendDate, instrumentCorporateActionDate, valueDate) {\r\n            if (assetTypeId === eAssetType.Share && !!instrumentDividendDate && !instrumentCorporateActionDate) {\r\n                return (!valueDate ||\r\n                    general.str2Date(instrumentDividendDate, 'd,m,y,H,M,S') < general.str2Date(valueDate, 'd,m,y,H,M,S'));\r\n            }\r\n            return false;\r\n        };\r\n\r\n        return {\r\n            getIslamicValueDateBeforeDeal: getIslamicValueDateBeforeDeal,\r\n            sharesIsCorporateActionDateSignificant_BeforeDeal: sharesIsCorporateActionDateSignificant_BeforeDeal,\r\n            sharesIsDividendDateSignificant_BeforeDeal: sharesIsDividendDateSignificant_BeforeDeal,\r\n            futuresIsRolloverDateSignificant_BeforeDeal: futuresIsRolloverDateSignificant_BeforeDeal,\r\n            futuresIsRolloverDateSignificant_AfterDeal: futuresIsRolloverDateSignificant_AfterDeal,\r\n            sharesIsCorporateActionDateSignificant_AfterDeal: sharesIsCorporateActionDateSignificant_AfterDeal,\r\n            sharesIsDividendDateSignificant_AfterDeal: sharesIsDividendDateSignificant_AfterDeal\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\r\n    \"alerts/LimitsServerResponseAlert\",\r\n    [\r\n        \"require\",\r\n        'handlers/general',\r\n        'devicealerts/Alert',\r\n        \"FxNet/LogicLayer/Deal/DealLifeCycle\",\r\n        \"Dictionary\",\r\n        'initdatamanagers/InstrumentsManager'\r\n    ],\r\n    function LimitsServerResponseAlertDef(require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            general = require('handlers/general'),\r\n            lifeCycleModule = require(\"FxNet/LogicLayer/Deal/DealLifeCycle\"),\r\n            Dictionary = require(\"Dictionary\"),\r\n            $instrumentsManager = require('initdatamanagers/InstrumentsManager');\r\n\r\n        var LimitsServerResponseAlert = function LimitsServerResponseAlertClass() {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            var init = function () {\r\n                inheritedAlertInstance.alertName = \"LimitsServerResponseAlert\";\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = prepareForShow;\r\n                createButtons();\r\n            };\r\n\r\n            var prepareForShowSuccessLimitAdd = function (data, properties, messagesArr) {\r\n                var instrument = properties.instrument,\r\n                    valueDate = data.arguments && data.arguments.length > 0 ? data.arguments[0] : null;\r\n\r\n                if (general.isEmptyValue(valueDate) && !general.isEmptyValue(properties.valueDate)) {\r\n                    valueDate = properties.valueDate;\r\n                }\r\n\r\n                if (instrument && instrument.isFuture) {\r\n                    if (lifeCycleModule.futuresIsRolloverDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getInstrumentRolloverDate(), valueDate)) {\r\n                        messagesArr.push(String.format(Dictionary.GetItem(\"FutureSuccess\"), instrument.eventDate));\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                if (instrument && instrument.isShare) {\r\n                    if (lifeCycleModule.sharesIsCorporateActionDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getCorporateActionDate(), valueDate)) {\r\n                        messagesArr.push(String.format(Dictionary.GetItem(\"shareSuccessHasDate\"), instrument.getCorporateActionDate()));\r\n                    }\r\n                    else {\r\n                        if (lifeCycleModule.sharesIsDividendDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getInstrumentDividendDate(), instrument.getCorporateActionDate(), valueDate)) {\r\n                            messagesArr.push(String.format(Dictionary.GetItem(\"ShareDividendSuccess\"), instrument.getInstrumentDividendDate()));\r\n                        }\r\n                        else {\r\n                            messagesArr.push(String.format(Dictionary.GetItem(\"ShareSuccess2\"), $instrumentTranslationsManager.Long(instrument.id)));\r\n                        }\r\n                    }\r\n\r\n                    return;\r\n                }\r\n            };\r\n\r\n            var prepareForSuccessLimitEdit = function (data, properties, messagesArr) {\r\n                var instrument = properties.instrument,\r\n                    valueDate = data.arguments && data.arguments.length > 0 ? data.arguments[0] : null;\r\n\r\n                if (general.isEmptyValue(valueDate) && !general.isEmptyValue(properties.valueDate)) {\r\n                    valueDate = properties.valueDate;\r\n                }\r\n\r\n                if (instrument && instrument.isFuture) {\r\n                    if (lifeCycleModule.futuresIsRolloverDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getInstrumentRolloverDate(), valueDate)) {\r\n                        messagesArr.push(String.format(Dictionary.GetItem(\"FutureSuccess\"), instrument.eventDate));\r\n                    }\r\n\r\n                    return;\r\n                }\r\n\r\n                if (instrument && instrument.isShare) {\r\n                    if (lifeCycleModule.sharesIsCorporateActionDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getCorporateActionDate(), valueDate)) {\r\n                        messagesArr.push(String.format(Dictionary.GetItem(\"shareSuccessHasDate\"), instrument.getCorporateActionDate()));\r\n                    } else {\r\n                        if (lifeCycleModule.sharesIsDividendDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getInstrumentDividendDate(), instrument.getCorporateActionDate(), valueDate)) {\r\n                            messagesArr.push(String.format(Dictionary.GetItem(\"ShareDividendSuccess\"), instrument.getInstrumentDividendDate()));\r\n                        } else {\r\n                            messagesArr.push(String.format(Dictionary.GetItem(\"ShareSuccess2\"), $instrumentTranslationsManager.Long(instrument.id)));\r\n                        }\r\n                    }\r\n\r\n                    return;\r\n                }\r\n            };\r\n\r\n            var prepareForShow = function () {\r\n                var serverResults = this.properties.serverResponses;\r\n                this.dataRecords = serverResults;\r\n\r\n                if (!serverResults || !serverResults.length) {\r\n                    return;\r\n                }\r\n\r\n                var data = serverResults[0],\r\n                    instrument = $instrumentsManager.GetInstrument(data.instrumentId),\r\n                    dataRequested = this.properties.requestData;\r\n\r\n                general.extendType(data, {\r\n                    limitAmount: dataRequested.amount,\r\n                    limitLevel: data.limLevel,\r\n                    orderDir: data.direction ? \"1\" : \"0\",\r\n                    baseSymbolId: instrument ? instrument.baseSymbol : '',\r\n                    otherSymbolId: instrument ? instrument.otherSymbol : '',\r\n                    messages: [],\r\n\r\n                    type: general.isDefinedType(dataRequested.type) ? dataRequested.type : data.type,\r\n                    mode: general.isDefinedType(dataRequested.mode) ? dataRequested.mode : data.mode,\r\n                    action: general.isDefinedType(dataRequested.action) ? dataRequested.action : data.action,\r\n                    removedIfDoneSLRate: dataRequested.removedIfDoneSLRate,\r\n                    removedIfDoneTPRate: dataRequested.removedIfDoneTPRate\r\n                });\r\n\r\n                this.messages.removeAll();\r\n\r\n                switch (data.msgKey) {\r\n                    case \"SuccessLimitAdd\":\r\n                        this.title(Dictionary.GetItem(data.type == eLimitType.None ? \"NewLimit\" : \"AddLimit\"));\r\n                        this.body(Dictionary.GetItem(\"YourLimitWasAddedSuccessfully\"));\r\n                        prepareForShowSuccessLimitAdd(data, this.properties, this.messages);\r\n                        break;\r\n\r\n                    case \"SuccessLimitEdit\":\r\n                        this.title(Dictionary.GetItem(data.type == eLimitType.None ? \"UpdateLimit\" : \"EditStopLossTakeProfit\"));\r\n                        this.body(Dictionary.GetItem(data.type == eLimitType.None ? \"YourLimitWasUpdatedSuccessfully\" : \"YourStopLossTakeProfitWasUpdated\"));\r\n                        prepareForSuccessLimitEdit(data, this.properties, this.messages);\r\n                        break;\r\n\r\n                    case \"SuccessLimitDelete\":\r\n                        this.title(Dictionary.GetItem(\"RemoveLimit\"));\r\n                        this.body(Dictionary.GetItem(\"YourLimitWasRemoveddSuccessfully\"));\r\n                        break;\r\n                }\r\n            };\r\n\r\n            var createButtons = function () {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                // override base on Back => onOk\r\n                var onOk = inheritedAlertInstance.onBack = function () {\r\n                    var redirectToViewType,\r\n                        viewArgs = inheritedAlertInstance.properties.redirectToViewArgs || \"\";\r\n\r\n                    if (!general.isEmptyValue(inheritedAlertInstance.properties.redirectToView)) {\r\n                        redirectToViewType = inheritedAlertInstance.properties.redirectToView;\r\n                    }\r\n\r\n                    if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                        inheritedAlertInstance.properties.okButtonCallback();\r\n                    }\r\n\r\n                    inheritedAlertInstance.visible(false);\r\n\r\n                    if (!general.isEmptyValue(redirectToViewType)) {\r\n                        if (redirectToViewType === 'exit') {\r\n                            dalCommon.Logout(eLoginLogoutReason.limitsServerResponseAlert_exit);\r\n                        } else {\r\n                            require(['devicemanagers/ViewModelsManager'], function (viewModelsManager) {\r\n                                viewModelsManager.VManager.SwitchViewVisible(redirectToViewType, viewArgs);\r\n\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem(\"ok\"),\r\n                        onOk,\r\n                        'btnOk'\r\n                    )\r\n                );\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return LimitsServerResponseAlert;\r\n    }\r\n);\r\n\n",
    "define('alerts/DealAddServerResponseAlert', [\r\n    \"require\",\r\n    'handlers/general',\r\n    'devicealerts/Alert',\r\n    \"FxNet/LogicLayer/Deal/DealLifeCycle\",\r\n    \"Dictionary\"\r\n], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        general = require('handlers/general'),\r\n        lifeCycleModule = require(\"FxNet/LogicLayer/Deal/DealLifeCycle\"),\r\n        Dictionary = require(\"Dictionary\");\r\n\r\n    var DealAddServerResponseAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase(),\r\n            resourceName = \"alerts_deals\";\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = \"DealAddServerResponseAlert\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.prepareForShow = prepareForShow;\r\n            createButtons();\r\n        };\r\n\r\n        var parseExtraInfo = function (result, properties, messagesArr) {\r\n            var instrument = properties.instrument,\r\n                valueDate = result.arguments && result.arguments.length > 0 ? result.arguments[0] : null;\r\n\r\n            if (instrument && instrument.isFuture) {\r\n\r\n                if (lifeCycleModule.futuresIsRolloverDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getInstrumentRolloverDate(), valueDate)) {\r\n                    messagesArr.push(String.format(Dictionary.GetItem(\"FutureSuccess\"), instrument.eventDate));\r\n                }\r\n\r\n                return;\r\n            }\r\n            if (instrument && instrument.isShare) {\r\n\r\n                if (lifeCycleModule.sharesIsCorporateActionDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getCorporateActionDate(), valueDate)) {\r\n                    messagesArr.push(String.format(Dictionary.GetItem(\"shareSuccessHasDate\"), instrument.getCorporateActionDate()));\r\n                } else if (lifeCycleModule.sharesIsDividendDateSignificant_AfterDeal(instrument.assetTypeId, instrument.getInstrumentDividendDate(), instrument.getCorporateActionDate(), valueDate)) {\r\n                    messagesArr.push(String.format(Dictionary.GetItem(\"ShareDividendSuccess\"), instrument.getInstrumentDividendDate()));\r\n                } else {\r\n                    messagesArr.push(String.format(Dictionary.GetItem(\"ShareSuccess2\"), $instrumentTranslationsManager.Long(instrument.id)));\r\n                }\r\n\r\n\r\n                return;\r\n            }\r\n        }\r\n        var prepareForShow = function () {\r\n            this.resourceName = resourceName;\r\n            this.title(Dictionary.GetItem(\"OpenDeal\"));\r\n            this.messages.removeAll();\r\n\r\n            var serverResults = this.properties.serverResponses;\r\n            for (var idx = 0; idx < serverResults.length; idx++) {\r\n                var data = serverResults[idx],\r\n                    instrument = $instrumentsManager.GetInstrument(data.instrumentId);\r\n\r\n                parseExtraInfo(data, this.properties, this.messages);\r\n\r\n\r\n                general.extendType(data, {\r\n                    dealAmount: data.usdValue,\r\n                    openedRate: data.rateCalc,\r\n                    orderDir: data.direction ? \"1closed\" : \"0closed\",\r\n                    pl: '',\r\n                    baseSymbolId: instrument ? instrument.baseSymbol : '',\r\n                    otherSymbolId: instrument ? instrument.otherSymbol : '',\r\n                    slRate: Format.toRate(parseFloat(this.properties.requestData.slRate), false, data.instrumentId) || '',\r\n                    tpRate: Format.toRate(parseFloat(this.properties.requestData.tpRate), false, data.instrumentId) || ''\r\n                });\r\n            }\r\n\r\n            this.body(Dictionary.GetItem(\"SuccessDealOpen\")); //\"Your deal was opened successfully\"));\r\n            this.dataRecords = serverResults;\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n\r\n            // override base on Back => onOk\r\n            var onOk = inheritedAlertInstance.onBack = function () {\r\n                var redirectToViewType,\r\n                    viewArgs = inheritedAlertInstance.properties.redirectToViewArgs || \"\";\r\n\r\n                if (!general.isEmptyValue(inheritedAlertInstance.properties.redirectToView)) {\r\n                    redirectToViewType = inheritedAlertInstance.properties.redirectToView;\r\n                }\r\n\r\n                if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                    inheritedAlertInstance.properties.okButtonCallback();\r\n                }\r\n\r\n                inheritedAlertInstance.visible(false);\r\n\r\n                if (!general.isEmptyValue(redirectToViewType)) {\r\n                    if (redirectToViewType === 'exit') {\r\n                        dalCommon.Logout(eLoginLogoutReason.dealAddServerResponseAlert_exit);\r\n                    } else {\r\n                        require(['devicemanagers/ViewModelsManager'], function (viewModelsManager) {\r\n                            viewModelsManager.VManager.SwitchViewVisible(redirectToViewType, viewArgs);\r\n                        });\r\n                        \r\n                    }\r\n                }\r\n            };\r\n\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem(\"ok\"),\r\n                    onOk,\r\n                    'btnOk'\r\n                )\r\n            );\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return DealAddServerResponseAlert;\r\n});\n",
    "define(\r\n    'alerts/DealsClosedServerResponseAlert',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'devicealerts/Alert',\r\n        'Dictionary',\r\n        'initdatamanagers/InstrumentsManager',\r\n        'dataaccess/dalCommon',\r\n        'JSONHelper'\r\n    ],\r\n    function DealsClosedServerResponseAlertDef(require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            general = require('handlers/general'),\r\n            instrumentsManager = require('initdatamanagers/InstrumentsManager'),\r\n            Dictionary = require('Dictionary'),\r\n            JSONHelper = require('JSONHelper'),\r\n            dalCommon = require('dataaccess/dalCommon');\r\n\r\n        var DealsClosedServerResponseAlert = function DealsClosedServerResponseAlertClass() {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            var init = function () {\r\n                inheritedAlertInstance.alertName = 'DealsClosedServerResponseAlert';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = prepareForShow;\r\n                createButtons();\r\n            };\r\n\r\n            var prepareForShow = function () {\r\n                this.dataRecords = this.properties.serverResponses;\r\n                var title = (1 >= this.dataRecords.length) ? Dictionary.GetItem('CloseDealConfirmation') : Dictionary.GetItem('CloseDealsConfirmation');\r\n\r\n                this.title(title);\r\n\r\n                for (var idx = 0; idx < this.dataRecords.length; idx++) {\r\n                    var data = this.dataRecords[idx],\r\n                        requestItem = this.properties.requestData.find(function (item) {\r\n                            return item.positionNumber == data.itemId;\r\n                        });\r\n\r\n                    var instrument = instrumentsManager.GetInstrument(data.instrumentId ? data.instrumentId : (requestItem ? requestItem.instrumentID : '')),\r\n                        translateResult = function (result) {\r\n                            var msg = Dictionary.GetItem(result.msgKey || 'InternalError'),\r\n                                args = result.arguments;\r\n\r\n                            if (general.isNullOrUndefined(args)) {\r\n                                return msg;\r\n                            }\r\n\r\n                            return String.format(msg, args);\r\n                        };\r\n\r\n                    if (data.status !== eResult.Success) {\r\n                        switch (data.result) {\r\n                            case 'OrderError116':\r\n                            case 'OrderError120':\r\n                                data.arguments = JSONHelper.STR2JSON('DealsClosedServerResponseAlert:prepareForShow', data.responseArgumentsJson);\r\n\r\n                                var instrumentId = data.arguments.pop(),\r\n                                    translatedInstrument = $instrumentTranslationsManager.Long(instrumentId);\r\n\r\n                                if (translatedInstrument) {\r\n                                    data.arguments[0] = translatedInstrument;\r\n                                }\r\n\r\n                                instrument = $instrumentsManager.GetInstrument(instrumentId);\r\n                                data.msgKey = data.result;\r\n                                data.message = translateResult(data);\r\n                                break;\r\n\r\n                            default:\r\n                                var key = !general.isStringType(data.result) || Dictionary.ValueIsEmpty(data.result) ? 'InternalError' : data.result;\r\n                                data.message = Dictionary.GetItem(key);\r\n                                break;\r\n                        }\r\n                    }\r\n\r\n                    general.extendType(data, {\r\n                        amount: data.usdValue,\r\n                        openedRate: requestItem ? requestItem.dealRate || requestItem.orderRate : '',\r\n                        instrumentId: instrument ? instrument.id : '',\r\n                        closingRate: requestItem ? data.rateCalc : '',\r\n                        pl: data.plAccountCcy,\r\n                        orderDir: data.direction ? '1closed' : '0closed',\r\n                        baseSymbolId: instrument ? instrument.baseSymbol : '',\r\n                        otherSymbolId: instrument ? instrument.otherSymbol : ''\r\n                    });\r\n                }\r\n\r\n                var firstValidResult = general.objectFirst(this.dataRecords, function (result) {\r\n                    return result.status == 1;\r\n                });\r\n\r\n                this.plTotal = firstValidResult ? firstValidResult.bulkPlAccountCcy : '0';\r\n\r\n                this.rowsValid = this.dataRecords.reduce(function getSum(total, result) {\r\n                    return total + result.status;\r\n                }, 0);\r\n\r\n                var closedDealsSucceeded = this.dataRecords.filter(function (result) { return result.status == 1; }).length;\r\n\r\n                if (this.dataRecords.length <= 1) {\r\n                    if (0 < closedDealsSucceeded) {\r\n                        this.body(Dictionary.GetItem('YourDealWasClosedSuccessfully'));\r\n                    }\r\n                    else {\r\n                        this.body(Dictionary.GetItem('YourDealWasNotClosedSuccessfully'));\r\n                    }\r\n                }\r\n                else {\r\n                    this.body(String.format(Dictionary.GetItem('countOfYourDealsWhereClosedSuccessfully'), closedDealsSucceeded));\r\n                }\r\n            };\r\n\r\n            var createButtons = function () {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                // override base on Back => onOk\r\n                var onOk = inheritedAlertInstance.onBack = function () {\r\n                    var redirectToViewType,\r\n                        viewArgs = inheritedAlertInstance.properties.redirectToViewArgs || '';\r\n\r\n                    if (!general.isEmptyValue(inheritedAlertInstance.properties.redirectToView)) {\r\n                        redirectToViewType = inheritedAlertInstance.properties.redirectToView;\r\n                    }\r\n\r\n                    if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                        inheritedAlertInstance.properties.okButtonCallback();\r\n                    }\r\n\r\n                    inheritedAlertInstance.visible(false);\r\n\r\n                    if (!general.isEmptyValue(redirectToViewType)) {\r\n                        if (redirectToViewType === 'exit') {\r\n                            dalCommon.Logout(eLoginLogoutReason.dealsClosedServerResponseAlert_exit);\r\n                        }\r\n                        else {\r\n                            require(['devicemanagers/ViewModelsManager'], function (viewModelsManager) {\r\n                                viewModelsManager.VManager.SwitchViewVisible(redirectToViewType, viewArgs);\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem('ok'),\r\n                        onOk,\r\n                        'btnOk'\r\n                    )\r\n                );\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance,\r\n            };\r\n        };\r\n\r\n        return DealsClosedServerResponseAlert;\r\n    }\r\n);\n",
    "define('devicealerts/GeneralCancelableAlert', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var GeneralCancelableAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.setDefaultTitle = function () { }\r\n            inheritedAlertInstance.alertName = 'devicealerts/GeneralCancelableAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.title(Dictionary.GetItem(\"msgtype240\") || Dictionary.GetItem(\"GenericAlert\"));\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem(\"ok\"),\r\n                    function () {\r\n                        inheritedAlertInstance.visible(false);\r\n                    },\r\n                    'btnOk'\r\n                )\r\n            );\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return GeneralCancelableAlert;\r\n});\n",
    "define(\"devicealerts/PopupClientQuestionnaireAlert\", [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var PopupClientQuestionnaireAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = \"PopupClientQuestionnaire\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.title(Dictionary.GetItem('lblImportent'));\r\n\r\n        };\r\n\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n\r\n    };\r\n    return PopupClientQuestionnaireAlert;\r\n});\n",
    "define(\"alerts/KnowledgeQuestionnaireAlert\", [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        Dictionary = require(\"Dictionary\");\r\n\r\n    var KnowledgeQuestionnaireAlert = function () {\r\n        var self = AlertBase.call(this),\r\n            alertsContents = {\r\n                titles: [\"pleaseNoteTitle\", \"tradingKnowledgeTitle\", \"tradingKnowledgeTitle\", \"tradingKnowledgeTitle\", \"questionnaireTitle\"],\r\n                messages: [[\"KYC_Knowledge_Retry_p1\"], [\"KYC_Knowledge_Review_p1\"], [\"KYC_Knowledge_Tested_p1\"], [\"KYC_Knowledge_Inappropriate_p1\"], [\"KYC_Knowledge_Unsuitable_p1\"]],\r\n                buttons: [\"btnRetry\", \"btnContinue\", \"btnRetry\", \"btnContinue\", \"btnContinue\"]\r\n            };\r\n\r\n        self.alertName = \"ClientKnowledgeQuestionnaire\";\r\n        self.visible(false);\r\n\r\n        self.Init = function () { };\r\n\r\n        self.popAlert = function (kycKnowledgeCallback, knowledgeAlertType) {\r\n            var buttonProperties = self.buttonProperties,\r\n                translatedMessages = [], i, len;\r\n\r\n            self.buttons.removeAll();\r\n\r\n            self.buttons.push(buttonProperties(\r\n                Dictionary.GetItem(alertsContents.buttons[knowledgeAlertType]),\r\n                function () {\r\n                    self.visible(false);\r\n                    kycKnowledgeCallback();\r\n                })\r\n            );\r\n\r\n            for (i = 0, len = alertsContents.messages[knowledgeAlertType].length; i < len; i++) {\r\n                translatedMessages.push(Dictionary.GetItem(alertsContents.messages[knowledgeAlertType][i]));\r\n            }\r\n\r\n            AlertsManager.UpdateAlert(\r\n                AlertTypes.ClientKnowledgeQuestionnaire,\r\n                Dictionary.GetItem(alertsContents.titles[knowledgeAlertType]),\r\n                '',\r\n                translatedMessages\r\n            );\r\n\r\n            AlertsManager.PopAlert(AlertTypes.ClientKnowledgeQuestionnaire);\r\n        };\r\n\r\n        self.GetAlert = self;\r\n\r\n        return self;\r\n    };\r\n\r\n    return KnowledgeQuestionnaireAlert;\r\n});\r\n\n",
    "define(\"devicealerts/DeviceNotSupportFingerprintAlert\", [\"require\", 'devicealerts/Alert','handlers/general'], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        general = require('handlers/general');\r\n\r\n    var DeviceNotSupportFingerprintAlert = function () {\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        function init() {\r\n            inheritedAlertInstance.alertName = \"DeviceNotSupportFingerprintAlert\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.prepareForShow = createButtons;\r\n        }\r\n\r\n        function createButtons() {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n\r\n            inheritedAlertInstance.buttons.push(\r\n                new inheritedAlertInstance.buttonProperties(\r\n                    Dictionary.GetItem(\"ok\"),\r\n                    function () {\r\n                        inheritedAlertInstance.visible(false);\r\n\r\n                        if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                            inheritedAlertInstance.properties.okButtonCallback();\r\n                        }\r\n                    },\r\n                    'btn',\r\n                    'fingerprint_ok'\r\n                )\r\n            );\r\n        }\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n\r\n    return DeviceNotSupportFingerprintAlert;\r\n});\n",
    "define('devicealerts/DepositSuccessAlert', [\"require\", 'devicealerts/Alert', \"Dictionary\"], function (require) {\r\n    var AlertBase = require('devicealerts/Alert');\r\n    var Dictionary = require(\"Dictionary\");\r\n\r\n    var DepositSuccessAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = 'devicealerts/DepositSuccessAlert';\r\n            inheritedAlertInstance.visible(false);\r\n            createButtons();\r\n        };\r\n\r\n        var createButtons = function () {\r\n            inheritedAlertInstance.buttons.removeAll();\r\n            inheritedAlertInstance.addRedirectButton(Dictionary.GetItem(\"ok\"), 'btnCancel');\r\n        };\r\n\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n    return DepositSuccessAlert;\r\n});\n",
    "define(\r\n    'devicealerts/HelpAlert',\r\n    [\r\n        'require',\r\n        'devicealerts/Alert',\r\n    ],\r\n    function HelpAlertDef(require) {\r\n        var alertBase = require('devicealerts/Alert');\r\n\r\n        var HelpAlert = function HelpAlertClass() {\r\n            var inheritedAlertInstance = new alertBase();\r\n\r\n            var init = function () {\r\n                inheritedAlertInstance.alertName = 'HelpAlert';\r\n                inheritedAlertInstance.visible(false);\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return HelpAlert;\r\n    }\r\n);\r\n\n",
    "define(\r\n    \"devicealerts/DepositConfirmationEmailSentAlert\",\r\n    [\r\n        \"require\",\r\n        'handlers/general',\r\n        'devicealerts/Alert',\r\n        \"Dictionary\"\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            Dictionary = require(\"Dictionary\"),\r\n            general = require('handlers/general');\r\n\r\n        var DepositConfirmationEmailSentAlert = function () {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = \"DepositConfirmationEmailSentAlert\";\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = createButtons;\r\n            }\r\n\r\n            function createButtons() {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem(\"ok\"),\r\n                        function () {\r\n                            inheritedAlertInstance.visible(false);\r\n\r\n                            if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                                inheritedAlertInstance.properties.okButtonCallback();\r\n                            }\r\n                        },\r\n                        'btn'\r\n                    )\r\n                );\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return DepositConfirmationEmailSentAlert;\r\n    }\r\n);\r\n\n",
    "define(\"alerts/PriceAlertServerResponseAlert\", [\r\n\t\"require\",\r\n\t\"handlers/general\",\r\n\t\"devicealerts/Alert\",\r\n\t\"FxNet/LogicLayer/Deal/DealLifeCycle\",\r\n\t\"Dictionary\",\r\n\t\"handlers/Cookie\",\r\n\t\"initdatamanagers/InstrumentsManager\",\r\n\t\"modules/environmentData\",\r\n], function PriceAlertServerResponseAlertDef(require) {\r\n\tvar AlertBase = require(\"devicealerts/Alert\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tDictionary = require(\"Dictionary\"),\r\n\t\tCookieHandler = require(\"handlers/Cookie\"),\r\n\t\tinstrumentsManager = require(\"initdatamanagers/InstrumentsManager\"),\r\n\t\tenvironmentData = require(\"modules/environmentData\").get();\r\n\r\n\tvar PriceAlertServerResponseAlert = function PriceAlertServerResponseAlertClass() {\r\n\t\tvar inheritedAlertInstance = new AlertBase();\r\n\r\n\t\tfunction init() {\r\n\t\t\tinheritedAlertInstance.alertName = \"PriceAlertServerResponseAlert\";\r\n\t\t\tinheritedAlertInstance.visible(false);\r\n\t\t\tinheritedAlertInstance.prepareForShow = prepareForShow;\r\n\t\t\tcreateButtons();\r\n\t\t}\r\n\r\n\t\tfunction prepareForShow() {\r\n\t\t\tvar serverResults = this.properties.serverResponses;\r\n\t\t\tthis.dataRecords = serverResults;\r\n\r\n\t\t\tif (!serverResults || !serverResults.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar data = serverResults[0],\r\n\t\t\t\tinstrument = instrumentsManager.GetInstrument(data.instrumentId),\r\n\t\t\t\tdataRequested = this.properties.requestData;\r\n\r\n\t\t\tgeneral.extendType(data, {\r\n\t\t\t\tlimitLevel: data.limLevel,\r\n\t\t\t\torderDir: data.direction ? \"1\" : \"0\",\r\n\t\t\t\tbaseSymbolId: instrument ? instrument.baseSymbol : \"\",\r\n\t\t\t\totherSymbolId: instrument ? instrument.otherSymbol : \"\",\r\n\t\t\t\tmessages: [],\r\n\t\t\t\ttype: general.isDefinedType(dataRequested.type) ? dataRequested.type : data.type,\r\n\t\t\t\tmode: general.isDefinedType(dataRequested.mode) ? dataRequested.mode : data.mode,\r\n\t\t\t\taction: general.isDefinedType(dataRequested.action) ? dataRequested.action : data.action,\r\n\t\t\t});\r\n\r\n\t\t\tthis.messages.removeAll();\r\n\r\n\t\t\tswitch (data.msgKey) {\r\n\t\t\t\tcase \"OrderError20\":\r\n\t\t\t\t\tthis.title(Dictionary.GetItem(\"PleaseNote\"));\r\n\t\t\t\t\tthis.body(\"\");\r\n\t\t\t\t\tthis.messages.push(\r\n\t\t\t\t\t\tString.format(Dictionary.GetItem(\"priceAlertExceedAmount\"), environmentData.maxPriceAlertsCount)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.dataRecords.pop();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase \"OrderError22\":\r\n\t\t\t\t\tthis.title(Dictionary.GetItem(\"newPriceAlert\"));\r\n\t\t\t\t\tthis.body(\"\");\r\n\t\t\t\t\tthis.messages.push(\r\n\t\t\t\t\t\tString.format(\r\n\t\t\t\t\t\t\tDictionary.GetItem(\"generalPriceAlertFailure\"),\r\n\t\t\t\t\t\t\tenvironmentData.maxPriceAlertsCount\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.dataRecords.pop();\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\t//SuccessPriceAlertAdd\r\n\t\t\t\t\tthis.title(Dictionary.GetItem(\"priceAlertSet\"));\r\n\t\t\t\t\tthis.body(Dictionary.GetItem(\"priceAlertSetSuccessfully\"));\r\n\t\t\t\t\tthis.messages.push(Dictionary.GetItem(\"priceAlertNotificationsEnableNote\"));\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction createButtons() {\r\n\t\t\tinheritedAlertInstance.buttons.removeAll();\r\n\r\n\t\t\t// override base on Back => onOk\r\n\t\t\tvar onOk = (inheritedAlertInstance.onBack = function () {\r\n\t\t\t\tvar redirectToViewType,\r\n\t\t\t\t\tviewArgs = inheritedAlertInstance.properties.redirectToViewArgs || \"\";\r\n\r\n\t\t\t\t// redirect to price alert grid only on mobile\r\n\t\t\t\tif (\r\n\t\t\t\t\tCookieHandler.ReadCookie(\"ViewMode\").toLowerCase() === \"mobile\" &&\r\n\t\t\t\t\t!general.isEmptyValue(inheritedAlertInstance.properties.redirectToView)\r\n\t\t\t\t) {\r\n\t\t\t\t\tredirectToViewType = inheritedAlertInstance.properties.redirectToView;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n\t\t\t\t\tinheritedAlertInstance.properties.okButtonCallback();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tinheritedAlertInstance.visible(false);\r\n\r\n\t\t\t\tif (!general.isEmptyValue(redirectToViewType)) {\r\n\t\t\t\t\tif (redirectToViewType === \"exit\") {\r\n\t\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.limitsServerResponseAlert_exit);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trequire([\"devicemanagers/ViewModelsManager\"], function ($viewModelsManager) {\r\n\t\t\t\t\t\t\t$viewModelsManager.VManager.SwitchViewVisible(redirectToViewType, viewArgs);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tinheritedAlertInstance.buttons.push(\r\n\t\t\t\tnew inheritedAlertInstance.buttonProperties(Dictionary.GetItem(\"ok\"), onOk, \"btnOk\")\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tGetAlert: inheritedAlertInstance,\r\n\t\t};\r\n\t};\r\n\r\n\treturn PriceAlertServerResponseAlert;\r\n});\r\n\n",
    "define(\r\n    'alerts/PriceAlertClosedServerResponseAlert',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'devicealerts/Alert',\r\n        'Dictionary',\r\n        'initdatamanagers/InstrumentsManager'\r\n    ],\r\n    function PriceAlertClosedServerResponseAlertDef(require) {\r\n        var AlertBase = require('devicealerts/Alert');\r\n        var general = require('handlers/general');\r\n        var $instrumentsManager = require('initdatamanagers/InstrumentsManager');\r\n        var Dictionary = require('Dictionary');\r\n\r\n        var PriceAlertClosedServerResponseAlert = function PriceAlertClosedServerResponseAlertClass() {\r\n\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            var init = function () {\r\n                inheritedAlertInstance.alertName = 'PriceAlertClosedServerResponseAlert';\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = prepareForShow;\r\n                createButtons();\r\n            };\r\n\r\n            var prepareForShow = function () {\r\n                this.dataRecords = this.properties.serverResponses;\r\n\r\n                this.title(Dictionary.GetItem(1 >= this.dataRecords.length ? 'RemovePriceAlert' : 'RemovePriceAlerts'));\r\n\r\n\r\n                for (var idx = 0; idx < this.dataRecords.length; idx++) {\r\n                    var data = this.dataRecords[idx],\r\n                        requestItem = this.properties.find(function (item) {\r\n                            return item.orderID == data.itemId;\r\n                        });\r\n\r\n                    var instrument = $instrumentsManager.GetInstrument(data.instrumentId ? data.instrumentId : (requestItem ? requestItem.instrumentID : ''));\r\n                    if (data.status !== eResult.Success && this.dataRecords.length > 1) {\r\n                        data.message = Dictionary.GetItem(data.result);\r\n                    }\r\n\r\n                    Object.assign(data, {\r\n                        baseSymbolId: instrument ? instrument.baseSymbol : '',\r\n                        otherSymbolId: instrument ? instrument.otherSymbol : '',\r\n                        orderDir: requestItem.orderDir,\r\n                        orderRate: requestItem.orderRate,\r\n                        entryTime: requestItem.entryTime\r\n                    });\r\n                }\r\n\r\n                var closedPriceAlertsSucceeded = this.dataRecords.filter(function (result) { return result.status == eResult.Success; }).length;\r\n\r\n                if (this.dataRecords.length === 1) {\r\n                    if (closedPriceAlertsSucceeded === 1) {\r\n                        this.body(Dictionary.GetItem('YourPriceAlertWasClosedSuccessfully'));\r\n                    } else {\r\n                        data.status = 1;\r\n                        this.body(Dictionary.GetItem('YourPriceAlertWasNotClosedSuccessfully'));\r\n                    }\r\n                } else {\r\n                    this.body(String.format(Dictionary.GetItem('countOfYourPriceAlertsWhereClosedSuccessfully'), closedPriceAlertsSucceeded));\r\n                }\r\n            };\r\n\r\n            var createButtons = function () {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                // override base on Back => onOk\r\n                var onOk = inheritedAlertInstance.onBack = function () {\r\n                    var redirectToViewType,\r\n                        viewArgs = inheritedAlertInstance.properties.redirectToViewArgs || '';\r\n\r\n                    if (!general.isEmptyValue(inheritedAlertInstance.properties.redirectToView)) {\r\n                        redirectToViewType = inheritedAlertInstance.properties.redirectToView;\r\n                    }\r\n\r\n                    if (general.isFunctionType(inheritedAlertInstance.properties.okButtonCallback)) {\r\n                        inheritedAlertInstance.properties.okButtonCallback();\r\n                    }\r\n\r\n                    inheritedAlertInstance.visible(false);\r\n\r\n                    if (!general.isEmptyValue(redirectToViewType)) {\r\n                        if (redirectToViewType === 'exit') {\r\n                            dalCommon.Logout(eLoginLogoutReason.PriceAlertClosedServerResponseAlert_exit);\r\n                        } else {\r\n\r\n                            require(['devicemanagers/ViewModelsManager'], function ($viewModelsManager) {\r\n                                $viewModelsManager.VManager.SwitchViewVisible(redirectToViewType, viewArgs);\r\n                            });\r\n\r\n                        }\r\n                    }\r\n                };\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem('ok'),\r\n                        onOk,\r\n                        'btnOk'\r\n                    )\r\n                );\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance,\r\n            };\r\n        };\r\n        return PriceAlertClosedServerResponseAlert;\r\n    }\r\n);\r\n\n",
    "define(\"devicealerts/IframeAlert\", [\"require\", 'devicealerts/Alert', 'handlers/general'], function (require) {\r\n    var AlertBase = require('devicealerts/Alert'),\r\n        general = require('handlers/general');\r\n\r\n    var IframeAlert = function () {\r\n\r\n        var inheritedAlertInstance = new AlertBase();\r\n\r\n        var init = function () {\r\n            inheritedAlertInstance.alertName = \"IframeAlert\";\r\n            inheritedAlertInstance.visible(false);\r\n            inheritedAlertInstance.prepareForShow = prepareForShow;\r\n        };\r\n\r\n        var prepareForShow = function () {\r\n            this.onClose = function () {\r\n                inheritedAlertInstance.visible(false);\r\n\r\n                if (general.isFunctionType(this.properties.onCloseCallback)) {\r\n                    this.properties.onCloseCallback();\r\n                }\r\n            };\r\n        }\r\n\r\n        return {\r\n            Init: init,\r\n            GetAlert: inheritedAlertInstance\r\n        };\r\n    };\r\n\r\n    return IframeAlert;\r\n});\n",
    "define(\r\n    'alerts/SessionEndedAlert',\r\n    [\r\n        'devicealerts/Alert',\r\n        \"Dictionary\",\r\n        'handlers/general'\r\n    ],\r\n    function (AlertBase, Dictionary, general) {\r\n        function SessionEndedAlert() {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            function doCloseAction() {\r\n                if (general.isFunctionType(inheritedAlertInstance.properties.onCloseAction)) {\r\n                    inheritedAlertInstance.properties.onCloseAction();\r\n                }\r\n            }\r\n\r\n            function onOk() {\r\n                inheritedAlertInstance.onClose();\r\n            }\r\n\r\n            function createButtons() {\r\n                inheritedAlertInstance.buttons.removeAll();\r\n\r\n                inheritedAlertInstance.buttons.push(\r\n                    new inheritedAlertInstance.buttonProperties(\r\n                        Dictionary.GetItem(\"sessionEndedReconnectBtn\"),\r\n                        onOk,\r\n                        'btnOk'\r\n                    )\r\n                );\r\n            }\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = \"SessionEndedAlert\";\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.onCloseAction.Add(doCloseAction);\r\n\r\n                createButtons();\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            }\r\n        }\r\n\r\n        return SessionEndedAlert;\r\n    }\r\n);\r\n\n",
    "define(\r\n    'devicealerts/DepositConfirmationSignatureAlert',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'devicealerts/Alert',\r\n        'Dictionary'\r\n    ],\r\n    function (require) {\r\n        var AlertBase = require('devicealerts/Alert'),\r\n            general = require('handlers/general'),\r\n            Dictionary = require(\"Dictionary\");\r\n\r\n        var DepositConfirmationSignatureAlert = function () {\r\n            var inheritedAlertInstance = new AlertBase();\r\n\r\n            function init() {\r\n                inheritedAlertInstance.alertName = \"DepositConfirmationSignatureAlert\";\r\n                inheritedAlertInstance.visible(false);\r\n                inheritedAlertInstance.prepareForShow = prepareForShow;\r\n                inheritedAlertInstance.title(Dictionary.GetItem(\"CloseDeal\"));\r\n            }\r\n\r\n            function prepareForShow() {\r\n                this.uploadStringImage = this.properties.uploadStringImage;\r\n                this.withdrawalFlow = this.properties.withdrawalFlow;\r\n                this.overwriteNavFlow = this.properties.overwriteNavFlow;\r\n                this.closeAlert = closeAlert;\r\n            }\r\n\r\n            function closeAlert() {\r\n                if (!general.isEmptyValue(this.properties.preventOnCancel) && this.properties.preventOnCancel) {\r\n                    preventAlert(this.properties.preventOnCancelText);\r\n                } else {\r\n                    hideAlert();\r\n                }\r\n            }\r\n\r\n            function hideAlert() {\r\n                inheritedAlertInstance.overwriteNavFlow = false;\r\n                inheritedAlertInstance.visible(false);\r\n            }\r\n\r\n            function preventAlert(message) {\r\n                var props = {\r\n                    overwriteNavFlow: true,\r\n                    okButtonCallback: hideAlert,\r\n                    okButtonCaption: Dictionary.GetItem(\"ok\"),\r\n                    cancelButtonCaption: Dictionary.GetItem(\"cancel\"),\r\n                    btnOkClass: 'small-okBtn',\r\n                    btnCancelClass: 'small-cancelBtn'\r\n                };\r\n\r\n                AlertsManager.UpdateAlert(AlertTypes.GeneralOkCancelAlert, '', null, [message], props);\r\n                AlertsManager.PopAlert(AlertTypes.GeneralOkCancelAlert);\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                GetAlert: inheritedAlertInstance\r\n            };\r\n        };\r\n\r\n        return DepositConfirmationSignatureAlert;\r\n    }\r\n);\r\n\n",
    "define(\r\n    'devicealerts/AlertFactory',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'devicealerts/ExitAlert',\r\n        'devicealerts/BonusAlert',\r\n        'devicealerts/CloseDealConfirmationAlert',\r\n        'devicealerts/ClosePositionsConfirmation',\r\n        'devicealerts/ServerResponseAlert',\r\n        'devicealerts/SimpleClientAlert',\r\n        'devicealerts/MaxIdleTimeAlertWrapper',\r\n        'devicealerts/DoubleLoginAlertWrapper',\r\n        'devicealerts/ExposureCoverageAlert',\r\n        'devicealerts/MinEquityAlertWrapper',\r\n        'devicealerts/GeneralOkCancelAlert',\r\n        'devicealerts/GeneralOkAlert',\r\n        'devicealerts/serverevents/ClientStateAlertExposureAlert',\r\n        'devicealerts/serverevents/ClientStateAlertExposureCoverageAlert',\r\n        'devicealerts/serverevents/ClientStateAlertSystemMode',\r\n        'devicealerts/serverevents/ClientStateAlertApplicationClosing',\r\n        'devicealerts/serverevents/PortfolioAlertAmlStatus',\r\n        'devicealerts/serverevents/PortfolioAlertIsActive',\r\n        'devicealerts/serverevents/PortfolioAlertIsDemo',\r\n        'devicealerts/serverevents/PortfolioAlertIsReal',\r\n        'devicealerts/serverevents/PortfolioAlertKycStatus',\r\n        'devicealerts/serverevents/PortfolioAlertCddStatus',\r\n        'alerts/QuestionnaireValidationAlert',\r\n        'devicealerts/CddQuestionnaireAlert',\r\n        'devicealerts/FingerprintLoginActivatedAlert',\r\n        'devicealerts/ScanFingerprintLoginOptionConfirmationAlert',\r\n        'devicealerts/AddFingerprintLoginOptionConfirmationAlert',\r\n        'devicealerts/RemoveFingerprintLoginOptionConfirmationAlert',\r\n        'alerts/MultipleDealsClosedConfirmation',\r\n        'alerts/RemoveCreditCardConfirmationAlert',\r\n        'alerts/LimitsServerResponseAlert',\r\n        'alerts/DealAddServerResponseAlert',\r\n        'alerts/DealsClosedServerResponseAlert',\r\n        'devicealerts/GeneralCancelableAlert',\r\n        'devicealerts/PopupClientQuestionnaireAlert',\r\n        'alerts/KnowledgeQuestionnaireAlert',\r\n        'devicealerts/DeviceNotSupportFingerprintAlert',\r\n        'devicealerts/DepositSuccessAlert',\r\n        'devicealerts/HelpAlert',\r\n        'devicealerts/DepositConfirmationEmailSentAlert',\r\n        'alerts/PriceAlertServerResponseAlert',\r\n        'alerts/PriceAlertClosedServerResponseAlert',\r\n        'devicealerts/IframeAlert',\r\n        'alerts/SessionEndedAlert',\r\n        'devicealerts/DepositConfirmationSignatureAlert'\r\n    ],\r\n    function AlertFactoryDef(require) {\r\n        var ExitAlert = require('devicealerts/ExitAlert'),\r\n            BonusAlert = require('devicealerts/BonusAlert'),\r\n            CloseDealConfirmaionAlert = require('devicealerts/CloseDealConfirmationAlert'),\r\n            ClosePositionsConfirmation = require('devicealerts/ClosePositionsConfirmation'),\r\n            ServerResponseAlert = require('devicealerts/ServerResponseAlert'),\r\n            SimpleClientAlert = require('devicealerts/SimpleClientAlert'),\r\n            MaxIdleTimeAlertWrapper = require('devicealerts/MaxIdleTimeAlertWrapper'),\r\n            DoubleLoginAlertWrapper = require('devicealerts/DoubleLoginAlertWrapper'),\r\n            ExposureCoverageAlert = require('devicealerts/ExposureCoverageAlert'),\r\n            MinEquityAlertWrapper = require('devicealerts/MinEquityAlertWrapper'),\r\n            GeneralOkCancelAlert = require('devicealerts/GeneralOkCancelAlert'),\r\n            GeneralOkAlert = require('devicealerts/GeneralOkAlert'),\r\n            ClientStateAlertExposureAlert = require('devicealerts/serverevents/ClientStateAlertExposureAlert'),\r\n            ClientStateAlertExposureCoverageAlert = require('devicealerts/serverevents/ClientStateAlertExposureCoverageAlert'),\r\n            ClientStateAlertSystemMode = require('devicealerts/serverevents/ClientStateAlertSystemMode'),\r\n            ClientStateAlertApplicationClosing = require('devicealerts/serverevents/ClientStateAlertApplicationClosing'),\r\n            PortfolioAlertAmlStatus = require('devicealerts/serverevents/PortfolioAlertAmlStatus'),\r\n            PortfolioAlertIsActive = require('devicealerts/serverevents/PortfolioAlertIsActive'),\r\n            PortfolioAlertIsDemo = require('devicealerts/serverevents/PortfolioAlertIsDemo'),\r\n            PortfolioAlertIsReal = require('devicealerts/serverevents/PortfolioAlertIsReal'),\r\n            PortfolioAlertKycStatus = require('devicealerts/serverevents/PortfolioAlertKycStatus'),\r\n            PortfolioAlertCddStatus = require('devicealerts/serverevents/PortfolioAlertCddStatus'),\r\n            QuestionnaireValidationAlert = require('alerts/QuestionnaireValidationAlert'),\r\n            CddQuestionnaireAlert = require('devicealerts/CddQuestionnaireAlert'),\r\n            FingerprintLoginActivatedAlert = require('devicealerts/FingerprintLoginActivatedAlert'),\r\n            ScanFingerprintLoginOptionConfirmationAlert = require('devicealerts/ScanFingerprintLoginOptionConfirmationAlert'),\r\n            AddFingerprintLoginOptionConfirmationAlert = require('devicealerts/AddFingerprintLoginOptionConfirmationAlert'),\r\n            RemoveFingerprintLoginOptionConfirmationAlert = require('devicealerts/RemoveFingerprintLoginOptionConfirmationAlert'),\r\n            MultipleDealsClosedConfirmation = require('alerts/MultipleDealsClosedConfirmation'),\r\n            RemoveCreditCardConfirmationAlert = require('alerts/RemoveCreditCardConfirmationAlert'),\r\n            LimitsServerResponseAlert = require('alerts/LimitsServerResponseAlert'),\r\n            PriceAlertServerResponseAlert = require('alerts/PriceAlertServerResponseAlert'),\r\n            DealAddServerResponseAlert = require('alerts/DealAddServerResponseAlert'),\r\n            DealsClosedServerResponseAlert = require('alerts/DealsClosedServerResponseAlert'),\r\n            GeneralCancelableAlert = require('devicealerts/GeneralCancelableAlert'),\r\n            PopupClientQuestionnaireAlert = require('devicealerts/PopupClientQuestionnaireAlert'),\r\n            KnowledgeQuestionnaireAlert = require('alerts/KnowledgeQuestionnaireAlert'),\r\n            DeviceNotSupportFingerprintAlert = require('devicealerts/DeviceNotSupportFingerprintAlert'),\r\n            DepositSuccessAlert = require('devicealerts/DepositSuccessAlert'),\r\n            HelpAlert = require('devicealerts/HelpAlert'),\r\n            IframeAlert = require('devicealerts/IframeAlert'),\r\n            DepositConfirmationEmailSentAlert = require('devicealerts/DepositConfirmationEmailSentAlert'),\r\n            PriceAlertClosedServerResponseAlert = require('alerts/PriceAlertClosedServerResponseAlert'),\r\n            SessionEndedAlert = require('alerts/SessionEndedAlert'),\r\n            DepositConfirmationSignatureAlert = require('devicealerts/DepositConfirmationSignatureAlert');\r\n\r\n        function AlertFactory() {\r\n            //-------------- Alert Properties ----------------\r\n            var createAlert = function (alertType) {\r\n                var alert;\r\n\r\n                switch (alertType) {\r\n                    case AlertTypes.ExitAlert:\r\n                        alert = new ExitAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.BonusAlert:\r\n                        alert = new BonusAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.CloseDealAlert:\r\n                        alert = new CloseDealConfirmaionAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.ClosePositionsConfirmation:\r\n                        alert = new ClosePositionsConfirmation();\r\n                        break;\r\n\r\n                    case AlertTypes.ServerResponseAlert:\r\n                        alert = new ServerResponseAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.SimpleClientAlert:\r\n                        alert = new SimpleClientAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.MaxIdleTimeAlert:\r\n                        alert = new MaxIdleTimeAlertWrapper();\r\n                        break;\r\n\r\n                    case AlertTypes.DoubleLoginAlert:\r\n                        alert = new DoubleLoginAlertWrapper();\r\n                        break;\r\n\r\n                    case AlertTypes.ExposureCoverageAlert:\r\n                        alert = new ExposureCoverageAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.MinEquityAlert:\r\n                        alert = new MinEquityAlertWrapper();\r\n                        break;\r\n\r\n                    case AlertTypes.GeneralOkCancelAlert:\r\n                    case AlertTypes.DepositQuestionnaireAlert:\r\n                        alert = new GeneralOkCancelAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.GeneralOkAlert:\r\n                        alert = new GeneralOkAlert();\r\n                        break;\r\n\r\n                    //-------------------Post logins Client State Alerts   \r\n                    case PostClientStatesLoginsAlerts.ExposureAlert:\r\n                        alert = new ClientStateAlertExposureAlert();\r\n                        break;\r\n\r\n                    case PostClientStatesLoginsAlerts.ExposureCoverageAlert:\r\n                        alert = new ClientStateAlertExposureCoverageAlert();\r\n                        break;\r\n\r\n                    case PostClientStatesLoginsAlerts.SystemMode:\r\n                        alert = new ClientStateAlertSystemMode();\r\n                        break;\r\n\r\n                    case PostClientStatesLoginsAlerts.SystemModeApplicationClosing:\r\n                        alert = new ClientStateAlertApplicationClosing();\r\n                        break;\r\n\r\n                    //-------------------Post logins Client State Alerts   \r\n                    case PostPortfoliosLoginsAlerts.AmlStatus:\r\n                        alert = new PortfolioAlertAmlStatus();\r\n                        break;\r\n\r\n                    case PostPortfoliosLoginsAlerts.IsActive:\r\n                        alert = new PortfolioAlertIsActive();\r\n                        break;\r\n\r\n                    case PostPortfoliosLoginsAlerts.IsDemo:\r\n                        alert = new PortfolioAlertIsDemo();\r\n                        break;\r\n\r\n                    case PostPortfoliosLoginsAlerts.IsReal:\r\n                        alert = new PortfolioAlertIsReal();\r\n                        break;\r\n\r\n                    case PostPortfoliosLoginsAlerts.KycStatus:\r\n                        alert = new PortfolioAlertKycStatus();\r\n                        break;\r\n\r\n                    case PostPortfoliosLoginsAlerts.CddStatus:\r\n                        alert = new PortfolioAlertCddStatus();\r\n                        break;\r\n\r\n                    //-----------------------------------------\r\n                    case AlertTypes.ClientQuestionnaire:\r\n                        alert = new QuestionnaireValidationAlert();\r\n                        break;\r\n\r\n                    //-----------------------------------------\r\n                    case AlertTypes.ClientKnowledgeQuestionnaire:\r\n                        alert = new KnowledgeQuestionnaireAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.CddClientQuestionnaire:\r\n                        alert = new CddQuestionnaireAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.PopupClientQuestionnaire:\r\n                        alert = new PopupClientQuestionnaireAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.GeneralCancelableAlert:\r\n                        alert = new GeneralCancelableAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.DealsClosedServerResponseAlert:\r\n                        alert = new DealsClosedServerResponseAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.DealAddServerResponseAlert:\r\n                        alert = new DealAddServerResponseAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.LimitsServerResponseAlert:\r\n                        alert = new LimitsServerResponseAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.RemoveCreditCardConfirmationAlert:\r\n                        alert = new RemoveCreditCardConfirmationAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.MultipleDealsClosedConfirmation:\r\n                        alert = new MultipleDealsClosedConfirmation();\r\n                        break;\r\n\r\n                    case AlertTypes.RemoveFingerprintLoginOptionConfirmationAlert:\r\n                        alert = new RemoveFingerprintLoginOptionConfirmationAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.AddFingerprintLoginOptionConfirmationAlert:\r\n                        alert = new AddFingerprintLoginOptionConfirmationAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.ScanFingerprintLoginOptionConfirmationAlert:\r\n                        alert = new ScanFingerprintLoginOptionConfirmationAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.FingerprintLoginActivatedAlert:\r\n                        alert = new FingerprintLoginActivatedAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.DeviceNotSupportFingerprintAlert:\r\n                        alert = new DeviceNotSupportFingerprintAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.DepositSuccessAlert:\r\n                        alert = new DepositSuccessAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.HelpAlert:\r\n                        alert = new HelpAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.DepositConfirmationEmailSentAlert:\r\n                        alert = new DepositConfirmationEmailSentAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.PriceAlertServerResponseAlert:\r\n                        alert = new PriceAlertServerResponseAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.MultiplePriceAlertsClosedConfirmation:\r\n                        alert = new MultipleDealsClosedConfirmation();\r\n                        break;\r\n\r\n                    case AlertTypes.PriceAlertClosedServerResponseAlert:\r\n                        alert = new PriceAlertClosedServerResponseAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.IframeAlert:\r\n                        alert = new IframeAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.SessionEndedAlert:\r\n                        alert = new SessionEndedAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.DepositConfirmationSignatureAlert:\r\n                        alert = new DepositConfirmationSignatureAlert();\r\n                        break;\r\n\r\n                    case AlertTypes.CreditCardNotApprovedAlert:\r\n                        alert = new GeneralOkCancelAlert();\r\n                        break;\r\n                }\r\n\r\n                if (alert) {\r\n                    alert.Init();\r\n                    alert = alert.GetAlert;\r\n                }\r\n\r\n                return alert;\r\n            };\r\n\r\n            var setAlertProperties = function (alert, alertType, title, body, messages, properties) {\r\n                alert.messages.removeAll();\r\n\r\n                if (title) {\r\n                    alert.title(title);\r\n                }\r\n\r\n                if (body || body === '') {\r\n                    alert.body(body);\r\n                }\r\n\r\n                if (messages) {\r\n                    while (messages.length > 0) {\r\n                        alert.messages.push(messages.shift());\r\n                    }\r\n                }\r\n\r\n                if (properties) {\r\n                    alert.properties = properties;\r\n                } else {\r\n                    alert.properties = {};\r\n                }\r\n\r\n                return alert;\r\n            };\r\n\r\n            return {\r\n                CreateAlert: createAlert,\r\n                UpdateAlert: setAlertProperties\r\n            };\r\n        }\r\n\r\n        return AlertFactory;\r\n    }\r\n);\r\n\n",
    "define(\r\n    'managers/AlertsManager',\r\n    [\r\n        'require',\r\n        'enums/alertenums',\r\n        'devicealerts/AlertFactory',\r\n        'knockout',\r\n        'handlers/Delegate'\r\n    ],\r\n    function AlertsManagerDef(require) {\r\n        var AlertsManager = function AlertsManagerClass() {\r\n            var AlertFactory = require('devicealerts/AlertFactory'),\r\n                delegate = require('handlers/Delegate'),\r\n                ko = require('knockout');\r\n\r\n            var alertfactory = new AlertFactory(),\r\n                alerts = {},\r\n                alertCounter = ko.observable(0),\r\n                onShowAlert = new delegate(),\r\n                visiblePriorityAlerts = [],\r\n                priorityAlerts = [\r\n                    AlertTypes.MaxIdleTimeAlert,\r\n                    AlertTypes.DoubleLoginAlert,\r\n                    AlertTypes.SessionEndedAlert\r\n                ];\r\n\r\n            function visiblePriorityAlertOnClose() {\r\n                visiblePriorityAlerts.pop();\r\n            }\r\n\r\n            function priorityAlertCanBeShow() {\r\n                return 0 >= visiblePriorityAlerts.length;\r\n            }\r\n\r\n            var hasAlert = ko.computed(function () {\r\n                return alertCounter() > 0;\r\n            });\r\n\r\n            hasAlert.subscribe(function (value) {\r\n                if (value) {\r\n                    $('body').addClass('mobilePopupVisible');\r\n                } else {\r\n                    $('body').removeClass('mobilePopupVisible');\r\n                }\r\n            });\r\n\r\n            //-------------- public Methods -----------------------------\r\n\r\n            function getAlert(alertType) {\r\n                var alert = alerts[alertType];\r\n\r\n                if (!alert) {\r\n                    alert = alertfactory.CreateAlert(alertType);\r\n\r\n                    if (alert) {\r\n                        alerts[alertType] = alert;\r\n\r\n                        alert.visible.subscribe(function (isVisible) {\r\n                            if (isVisible) {\r\n                                alertCounter(alertCounter() + 1);\r\n                            } else {\r\n                                alertCounter(alertCounter() - 1);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return alerts[alertType];\r\n            }\r\n\r\n            function popAlert(alertType) {\r\n                var alert = getAlert(alertType);\r\n\r\n                if (alert && !alert.visible()) {\r\n                    if (priorityAlerts.indexOf(alertType) >= 0) {\r\n                        if (priorityAlertCanBeShow()) {\r\n                            alert.onCloseAction.Remove(visiblePriorityAlertOnClose);\r\n                            alert.onCloseAction.Add(visiblePriorityAlertOnClose);\r\n                            visiblePriorityAlerts.push(priorityAlerts.indexOf(alertType));\r\n                        } else {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    alert.show();\r\n\r\n                    onShowAlert.Invoke(alertType, alert);\r\n                }\r\n            }\r\n\r\n            function updateAlert(alertType, title, body, messages, properties, withoutLineBrakes) {\r\n                var alert = getAlert(alertType);\r\n                if (alert) {\r\n                    alertfactory.UpdateAlert(alert, alertType, title, body, messages, properties, withoutLineBrakes);\r\n                }\r\n            }\r\n\r\n            function showAlert(alertType, title, body, messages, properties, withoutLineBrakes) {\r\n                updateAlert(alertType, title, body, messages, properties, withoutLineBrakes);\r\n                popAlert(alertType);\r\n            }\r\n\r\n            return {\r\n                HasAlert: hasAlert,\r\n                PopAlert: popAlert,\r\n                GetAlert: getAlert,\r\n                UpdateAlert: updateAlert,\r\n                ShowAlert: showAlert,\r\n                OnShowAlert: onShowAlert\r\n            };\r\n        };\r\n\r\n        var module = window.AlertsManager = AlertsManager();\r\n        return module;\r\n    }\r\n);\n",
    "define('devicemanagers/AlertsManager', ['managers/AlertsManager'], function FxNet(alertsManager) {\r\n    return alertsManager;\r\n});\n",
    "define('devicealerts/MaxIdleTimeAlert', [\"require\", 'devicemanagers/AlertsManager'], function (require) {\r\n    var MaxIdleTimeAlert = (function () {\r\n        var AlertsManager = require('devicemanagers/AlertsManager');\r\n\r\n        var show = function () {\r\n            AlertsManager.UpdateAlert(AlertTypes.MaxIdleTimeAlert);\r\n            AlertsManager.PopAlert(AlertTypes.MaxIdleTimeAlert);\r\n        };\r\n\r\n        return {\r\n            Show: show\r\n        };\r\n    })();\r\n    return MaxIdleTimeAlert;\r\n});\r\n\n",
    "/*global timeStamp, setTimeout, clearTimout, systemInfo*/\r\ndefine(\r\n    \"generalmanagers/ActivitySupervisor\", \r\n    [\r\n        \"require\",\r\n        \"dataaccess/dalorder\",\r\n        'handlers/general',\r\n        \"dataaccess/dalCommon\",\r\n        'devicealerts/MaxIdleTimeAlert',\r\n        'extensions/Date',\r\n        'initdatamanagers/Customer',\r\n    ],\r\n    function (require) {\r\n        var \r\n            dalOrders = require(\"dataaccess/dalorder\"),\r\n            customer = require('initdatamanagers/Customer'),\r\n            general = require('handlers/general'),\r\n            dalCommon = require(\"dataaccess/dalCommon\"),\r\n            MaxIdleTimeAlert = require('devicealerts/MaxIdleTimeAlert');\r\n          \r\n\r\n        function ActivitySupervisor() {\r\n            var settingsMaxIdleTime = null,\r\n                settingsAlertTime = null,\r\n                checkActivityTimer = null,\r\n                lastCheckTime = timeStamp(),\r\n                stayAlertTimer = null,\r\n                settingTotalMaxIdleTime;\r\n\r\n            function check() {\r\n                // initialization:  wait till setting gets from server ////////////////\r\n                if (settingsMaxIdleTime === null && !general.isDefinedType(systemInfo.clientApplicationParams)) {\r\n                    setTimeout(check, 1000);\r\n                    return false;\r\n                }\r\n\r\n                // setting from server available: initialize\r\n                if (settingsMaxIdleTime === null) {\r\n                    settingsMaxIdleTime = parseInt(systemInfo.clientApplicationParams[eClientParams.MaxIdleTime], 10);\r\n                    settingsAlertTime = parseInt(systemInfo.clientApplicationParams[eClientParams.IdleTimer], 10);\r\n                    settingTotalMaxIdleTime = settingsMaxIdleTime + settingsAlertTime;\r\n                }\r\n                // initialization done ///////////\r\n\r\n                var isActive = checkActivity();\r\n\r\n                if (isActive) {\r\n                    checkActivityTimer = setTimeout(check, 30000);\r\n                    return true;\r\n                } else {\r\n                    var logoutTimeout = timeTillLogout()<0 ? 0: timeTillLogout();\r\n                    stayAlertTimer = setTimeout(logout, logoutTimeout);\r\n                    MaxIdleTimeAlert.Show();\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            function logout() {\r\n                if (checkActivityTimer) {\r\n                    clearTimeout(checkActivityTimer);\r\n                    checkActivityTimer = null;\r\n                }\r\n\r\n                if (stayAlertTimer) {\r\n                    clearTimeout(stayAlertTimer);\r\n                    stayAlertTimer = null;\r\n                }\r\n                \r\n                if (customer.isAutologin()) {\r\n                    dalCommon.Exit(eLoginLogoutReason.activitySupervisor_logout);\r\n                } else {\r\n                    dalCommon.Logout(eLoginLogoutReason.MaxIdleTimeAlert);\r\n                }\r\n            }\r\n\r\n            function exit() {\r\n                dalCommon.Exit(eLoginLogoutReason.activitySupervisor_exit);\r\n            }\r\n\r\n            function checkActivity() {\r\n                lastCheckTime = timeStamp();\r\n\r\n                return getIdleTime() < settingsMaxIdleTime;\r\n            }\r\n\r\n            function resetTimeRequest() {\r\n                if (timeStamp() - lastCheckTime > settingTotalMaxIdleTime) {\r\n                    logout();\r\n                }\r\n\r\n                dalOrders.resetTimeRequest();\r\n            }\r\n\r\n            function resumeChecking() {\r\n                dalOrders.resetTimeRequest();\r\n                check();\r\n            }\r\n\r\n            function updateAsStay() {\r\n                if (stayAlertTimer) {\r\n                    clearTimeout(stayAlertTimer);\r\n                    stayAlertTimer = null;\r\n                } else {\r\n                    dalCommon.Login(eLoginLogoutReason.activitySupervisor_updateAsStay);\r\n                }\r\n\r\n                resumeChecking();\r\n            }\r\n\r\n            function start() {\r\n                check();\r\n            }\r\n\r\n            function getIdleTime() {\r\n                return timeStamp() - dalOrders.lastTimeRequest();\r\n            }\r\n\r\n            // if positive than time has passed and need to logout, if negative time has not passed yet\r\n            function timeTillLogout() {\r\n                return settingTotalMaxIdleTime - getIdleTime();\r\n            }\r\n\r\n            //------------------------------------------------------\r\n            return {\r\n                Start: start,\r\n                ResetTimeRequest: resetTimeRequest,\r\n                UpdateStay: updateAsStay,\r\n                Logout: logout,\r\n                Exit: exit\r\n            };\r\n        }\r\n\r\n        var module = window.ActivitySupervisor = new ActivitySupervisor();\r\n\r\n        return module;\r\n    }\r\n);\n",
    "define(\r\n    'helpers/ObservableHelper',\r\n    [\r\n        \"require\",\r\n        \"knockout\",\r\n        'handlers/general',\r\n        'helpers/KOExtensions'\r\n    ],\r\n    function(require) {\r\n        var ko = require(\"knockout\"),\r\n            general = require('handlers/general');\r\n\r\n        function ObservableHelper() {\r\n            function generatePrimitiveTypeArray(koObj) {\r\n                var obj = [];\r\n\r\n                for (var key in koObj) {\r\n                    if (koObj.hasOwnProperty(key)) {\r\n                        if (!general.isFunctionType(koObj[key])) {\r\n                            obj[key] = koObj[key];\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return obj;\r\n            }\r\n\r\n            function cleanKoObservableSimpleObject(koObj, computablesDispose) {\r\n                var clonedObject = general.cloneHardCopy(koObj);\r\n\r\n                for (var key in clonedObject) {\r\n                    if (clonedObject.hasOwnProperty(key)) {\r\n                        var property = clonedObject[key];\r\n\r\n                        if (!general.isFunctionType(property)) {\r\n                            continue;\r\n                        }\r\n\r\n                        if (ko.isWriteableObservable(property)) {\r\n                            property(getEmptyPropertyValue(property));\r\n                        }\r\n\r\n                        if (computablesDispose && ko.isComputed(property)) {\r\n                            property.dispose();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return clonedObject;\r\n            }\r\n\r\n            function getEmptyPropertyValue(property) {\r\n                if (ko.isObservableArray(property)) {\r\n                    return [];\r\n                }\r\n\r\n                if (ko.isObservable(property)) {\r\n                    var value = ko.unwrap(property);\r\n\r\n                    if (general.isBooleanType(value)) {\r\n                        return false;\r\n                    }\r\n\r\n                    if (general.isObjectType(value)) {\r\n                        // if the observable contains an json object (like validation options)\r\n                        // just return the object\r\n                        return value;\r\n                    }\r\n                }\r\n\r\n                return \"\";\r\n            }\r\n\r\n            return {\r\n                GeneratePrimitiveTypeArray: generatePrimitiveTypeArray,\r\n                CleanKoObservableSimpleObject: cleanKoObservableSimpleObject\r\n            };\r\n        }\r\n\r\n        return new ObservableHelper();\r\n    }\r\n);\n",
    "/* global UrlResolver */\r\nvar InitConfiguration = function () {\r\n\tvar applicationConfiguration = {\r\n\t\tapplicationType: window.eApplicationTypes.Mobile,\r\n\t\tdoubleTabListenInterval: 500,\r\n\t};\r\n\r\n\tvar newDealConfiguration = {\r\n\t\tshowTools: true,\r\n\t\tonSuccessRedirectTo: eForms.OpenDeals,\r\n\t\tsetlimitsConfiguration: {\r\n\t\t\tdefaultTab: eSetLimitsTabs.NoTabs,\r\n\t\t\tparentView: eViewTypes.vNewDeal,\r\n\t\t},\r\n\t\tdealAmountPrefixKey: \"dealAmountLabel_\",\r\n\t\tprofileKeyForDefaultTab: \"defaultTab\",\r\n\t\tcurrentRateDirectionSwitch: false,\r\n\t\tchart: {\r\n\t\t\tdirection: eChartDirection.Same,\r\n\t\t\tallowDragLine: true,\r\n\t\t\tkeys: {\r\n\t\t\t\tstopLoss: \"chartline_StopLoss\",\r\n\t\t\t\ttakeProfit: \"chartline_TakeProfit\",\r\n\t\t\t\tcurrentRate: \"chartline_CurrentRate\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\r\n\tvar newLimitConfiguration = {\r\n\t\tshowTools: true,\r\n\t\tonSuccessRedirectTo: eForms.Limits,\r\n\t\tsetlimitsConfiguration: {\r\n\t\t\tdefaultTab: eSetLimitsTabs.NoTabs,\r\n\t\t\tparentView: eViewTypes.vNewLimit,\r\n\t\t},\r\n\t\tdealAmountPrefixKey: \"dealAmountLabel_\",\r\n\t\tprofileKeyForDefaultTab: \"defaultTab\",\r\n\t\tcurrentRateDirectionSwitch: false,\r\n\t\tchart: {\r\n\t\t\tdirection: eChartDirection.Same,\r\n\t\t\tallowDragLine: true,\r\n\t\t\tkeys: {\r\n\t\t\t\tstopLoss: \"chartline_IfDoneStopLoss\",\r\n\t\t\t\ttakeProfit: \"chartline_IfDoneTakeProfit\",\r\n\t\t\t\tcurrentRate: \"chartline_CurrentRate\",\r\n\t\t\t\tlimitLevel: \"chartline_LimitLevel\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\r\n\tvar editLimitSettingsConfiguration = {\r\n\t\tsetlimitsConfiguration: {\r\n\t\t\tdefaultTab: eSetLimitsTabs.NoTabs,\r\n\t\t},\r\n\t\tprofileKeyForDefaultTab: \"editLimitTab\",\r\n\t};\r\n\r\n\tvar closeDealSettingsConfiguration = {\r\n\t\tprofileKeyForDefaultTab: \"closeDealTab\",\r\n\t\tcurrentRateDirectionSwitch: true,\r\n\t\tchart: {\r\n\t\t\tdirection: eChartDirection.Opposite,\r\n\t\t\tallowDragLine: false,\r\n\t\t\tkeys: {\r\n\t\t\t\tstopLoss: \"chartline_StopLoss\",\r\n\t\t\t\ttakeProfit: \"chartline_TakeProfit\",\r\n\t\t\t\tcurrentRate: \"chartline_ClosingRate\",\r\n\t\t\t\topenRate: \"chartline_OpenRate\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\r\n\tvar editClosingLimitConfiguration = {\r\n\t\tsetlimitsConfiguration: {\r\n\t\t\tdefaultTab: eSetLimitsTabs.Rate,\r\n\t\t},\r\n\t\tprofileKeyForDefaultTab: \"editClosingLimitTab\",\r\n\t\tredirectToOpenDeals: true,\r\n\t\tcurrentRateDirectionSwitch: true,\r\n\t\tchart: {\r\n\t\t\tdirection: eChartDirection.Opposite,\r\n\t\t\tallowDragLine: true,\r\n\t\t\tkeys: {\r\n\t\t\t\tstopLoss: \"chartline_StopLoss\",\r\n\t\t\t\ttakeProfit: \"chartline_TakeProfit\",\r\n\t\t\t\tcurrentRate: \"chartline_ClosingRate\",\r\n\t\t\t\topenRate: \"chartline_OpenRate\",\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\r\n\tvar activeLimitsConfiguration = {\r\n\t\tdefaultLimitMode: eLimitMode.OpenDeal,\r\n\t};\r\n\r\n\tvar limitsConfiguration = {\r\n\t\tdefaultLimitType: eLimitsType.Active,\r\n\t};\r\n\r\n\tvar openDealsConfiguration = {\r\n\t\tcloseSelected: true,\r\n\t};\r\n\r\n\tvar marketInfoConfiguration = {\r\n\t\thubname: \"sentimentsHub\",\r\n\t};\r\n\r\n\tvar withdrawalConfiguration = {\r\n\t\twithdrawalRequestSuccessRedirectToView: eForms.Wallet,\r\n\t\tstepLoadFailRedirectView: eForms.Quotes,\r\n\t\twizardConfig: {\r\n\t\t\tdefaultForm: eForms.Withdrawal,\r\n\t\t\tdefaultStep: eWithdrawalSteps.setAmount,\r\n\t\t\tuseBrowserHistory: true,\r\n\t\t\tsteps: {\r\n\t\t\t\t1: {\r\n\t\t\t\t\tcomponent: \"fx-component-withdrawal-amount\",\r\n\t\t\t\t\tpreviousStep: {\r\n\t\t\t\t\t\tlabel: \"lblBack\",\r\n\t\t\t\t\t\tvalid: true,\r\n\t\t\t\t\t\tvisible: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnextStep: {\r\n\t\t\t\t\t\tlabel: \"lblContinue\",\r\n\t\t\t\t\t\tvalid: false,\r\n\t\t\t\t\t\tvisible: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t2: {\r\n\t\t\t\t\tcomponent: \"fx-component-withdrawal-method\",\r\n\t\t\t\t\tpreviousStep: {\r\n\t\t\t\t\t\tlabel: \"lblBack\",\r\n\t\t\t\t\t\tvalid: true,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnextStep: {\r\n\t\t\t\t\t\tlabel: \"lblContinue\",\r\n\t\t\t\t\t\tvalid: false,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t3: {\r\n\t\t\t\t\tcomponent: \"fx-component-withdrawal-setbankdetails\",\r\n\t\t\t\t\tpreviousStep: {\r\n\t\t\t\t\t\tlabel: \"lblBack\",\r\n\t\t\t\t\t\tvalid: true,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnextStep: {\r\n\t\t\t\t\t\tlabel: \"lblContinue\",\r\n\t\t\t\t\t\tvalid: false,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t4: {\r\n\t\t\t\t\tcomponent: \"fx-component-withdrawal-setccdetails\",\r\n\t\t\t\t\tpreviousStep: {\r\n\t\t\t\t\t\tlabel: \"lblBack\",\r\n\t\t\t\t\t\tvalid: true,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnextStep: {\r\n\t\t\t\t\t\tlabel: \"lblContinue\",\r\n\t\t\t\t\t\tvalid: false,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\t5: {\r\n\t\t\t\t\tcomponent: \"fx-component-withdrawal-setapproval\",\r\n\t\t\t\t\tpreviousStep: {\r\n\t\t\t\t\t\tlabel: \"lblBack\",\r\n\t\t\t\t\t\tvalid: true,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnextStep: {\r\n\t\t\t\t\t\tlabel: \"lblApprove\",\r\n\t\t\t\t\t\tvalid: false,\r\n\t\t\t\t\t\tvisible: true,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\r\n\tvar favoriteInstrumentsConfiguration = {\r\n\t\tfavoriteInstrumentsLimit: 50,\r\n\t};\r\n\r\n\tvar quotesPresetConfiguration = {\r\n\t\tareQuotesVisible: true,\r\n\t};\r\n\r\n\tvar pendingWithdrawalConfiguration = {};\r\n\r\n\tvar walletConfiguration = {\r\n\t\tformatConditionalVolume: true,\r\n\t\tuseAdvancedView: false,\r\n\t\tisVisibleUsedMargin: true,\r\n\t\tsupressDialogs: true,\r\n\t};\r\n\r\n\tvar balanceConfiguration = {\r\n\t\tpageSize: 20,\r\n\t};\r\n\r\n\tvar closedDealsConfiguration = {\r\n\t\tpageSize: 20,\r\n\t\tthreshold: 2000,\r\n\t};\r\n\r\n\tvar accountCardRecordsConfiguration = {\r\n\t\tpageSize: 20,\r\n\t};\r\n\r\n\tvar gtmConfiguration = {\r\n\t\tgtmContentKey: \"googleTagManagerId\",\r\n\t\tdisabledGTMToken: \"#\",\r\n\t};\r\n\r\n\tvar economicCalendarConfiguration = {\r\n\t\thubname: \"econoCalendarHub\",\r\n\t\teventsMaxImportance: 3,\r\n\t\tcontentKeySection: \"ec\",\r\n\t\tcontentKeyFilterPrefix: \"lbl\",\r\n\t\tmobilePageSize: 10,\r\n\t\tdefaultDateTab: eDateFilter.ThisWeek,\r\n\t\tinstrumentsToTrade: {\r\n\t\t\tau: [2817, 303, 279, 3585],\r\n\t\t\tca: [12035, 3587, 791, 4099],\r\n\t\t\tch: [4868, 12036, 1047, 3588],\r\n\t\t\tcn: [4912, 12037, 11013, 10757, 12050],\r\n\t\t\tde: [26894, 3631, 3607, 3600],\r\n\t\t\teu: [28174, 26894, 3631, 3607, 3600, 27406, 27662],\r\n\t\t\tfr: [27406, 3631, 3607, 3600],\r\n\t\t\tit: [27662, 3631, 3607, 3600],\r\n\t\t\tjp: [34839, 12055, 3607, 4119, 279],\r\n\t\t\tnz: [7727, 7703, 3614, 286, 4126],\r\n\t\t\tuk: [27152, 4143, 4119, 3600],\r\n\t\t\tus: [21807, 25391, 25135, 3631, 12055, 4143, 12035, 7215],\r\n\t\t},\r\n\t\tinvertedDirectionEvents: [\r\n\t\t\t2471280,\r\n\t\t\t195,\r\n\t\t\t2,\r\n\t\t\t4241147,\r\n\t\t\t55,\r\n\t\t\t73,\r\n\t\t\t181,\r\n\t\t\t185,\r\n\t\t\t192,\r\n\t\t\t1371097,\r\n\t\t\t1561129,\r\n\t\t\t1591134,\r\n\t\t\t1891180,\r\n\t\t\t2121218,\r\n\t\t\t2461277,\r\n\t\t\t2471280,\r\n\t\t\t2831382,\r\n\t\t\t3631549,\r\n\t\t\t3641551,\r\n\t\t\t3641552,\r\n\t\t\t4221618,\r\n\t\t\t4221619,\r\n\t\t\t4231627,\r\n\t\t\t4241147,\r\n\t\t\t4241150,\r\n\t\t\t2611297,\r\n\t\t\t2611423,\r\n\t\t\t121,\r\n\t\t],\r\n\t};\r\n\r\n\tvar signalsConfiguration = {\r\n\t\tpageSize: 10,\r\n\t};\r\n\r\n\tvar advinionChartConfiguration = {\r\n\t\trootPath: UrlResolver.getStaticJSPath(\"Scripts/AdvinionChart\"),\r\n\t\tcssLoaderPath:\r\n\t\t\tUrlResolver.getAssetsPath() + \"/Skins/Mobile/Broker\" + UrlResolver.getDefaultBroker() + \"/Default/\",\r\n\t};\r\n\r\n\tvar contractRolloverConfiguration = {\r\n\t\tdefaultPage: 1,\r\n\t\tpageSize: 100,\r\n\t};\r\n\r\n\tvar uploadDocumentsConfiguration = {\r\n\t\tinterWindowsCommunicationLimit: 30000,\r\n\t\tuploadFrameReloadTimeout: 10000,\r\n\t\tuploadFrameRetryCount: 3,\r\n\t};\r\n\r\n\tvar amlConfiguration = {\r\n\t\tcountriesWithDisabledUpload: [\"Hungary\"],\r\n\t\tcountriesWithVideoId: [\"Hungary\"],\r\n\t\tcountriesWithDisabledAlternativeSend: [\"Hungary\"],\r\n\t};\r\n\r\n\tvar thankYouConfiguration = {\r\n\t\tbrokersThatShouldShowAmlNotice: [\"3\"],\r\n\t};\r\n\r\n\tvar marketInfoSectionsConfiguration = {\r\n\t\ttsArea: true,\r\n\t\tmiArea: false,\r\n\t\thlArea: false,\r\n\t\tiiArea: false,\r\n\t};\r\n\r\n\tvar depositConfirmationConfiguration = {\r\n\t\texcludeList: {\r\n\t\t\tidList: [\"ClearAction\", \"SendActionContainer\", \"DisableOverlay\"],\r\n\t\t\ttagList: {\r\n\t\t\t\tIFRAME: null,\r\n\t\t\t\tLINK: {\r\n\t\t\t\t\trel: [\"dns-prefetch\", \"preconnect\", \"prefetch\", \"manifest\"],\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n\r\n\tvar autoCompleteConfiguration = {\r\n\t\tIEFirstSearchTimeOut: 3500,\r\n\t};\r\n\r\n\tvar personalGuideConfiguration = {\r\n\t\tDoNotShowForms: [\r\n\t\t\teForms.Deposit,\r\n\t\t\teForms.ConcretePaymentForm,\r\n\t\t\teForms.DepositConfirmation,\r\n\t\t\teForms.DepositPending,\r\n\t\t\teForms.DepositSuccess,\r\n\t\t],\r\n\t\tPersonalAssistants: {\r\n\t\t\tMax: {\r\n\t\t\t\tname: \"Max\",\r\n\t\t\t\tversion: \"6\",\r\n\t\t\t\tvariation: 2\r\n\t\t\t},\r\n\t\t\tLexi: {\r\n\t\t\t\tname: \"Lexi\",\r\n\t\t\t\tversion: \"2\",\r\n\t\t\t\tvariation: 2\r\n\t\t\t},\r\n\t\t\tMaxSA: {\r\n\t\t\t\tname: \"MaxSA\",\r\n\t\t\t\tversion: \"1\",\r\n\t\t\t\tvariation: 3\r\n\t\t\t},\r\n\t\t\tLexiTestVariation4: {\r\n\t\t\t\tname: \"Lexi\",\r\n\t\t\t\tversion: \"2\",\r\n\t\t\t\tvariation: 4\r\n\t\t\t},\r\n\t\t\tMaxTestVariation4: {\r\n\t\t\t\tname: \"Max\",\r\n\t\t\t\tversion: \"6\",\r\n\t\t\t\tvariation: 4\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\treturn {\r\n\t\tApplicationConfiguration: applicationConfiguration,\r\n\t\tNewDealConfiguration: newDealConfiguration,\r\n\t\tNewLimitConfiguration: newLimitConfiguration,\r\n\t\tEditLimitSettingsConfiguration: editLimitSettingsConfiguration,\r\n\t\tCloseDealSettingsConfiguration: closeDealSettingsConfiguration,\r\n\t\tEditClosingLimitConfiguration: editClosingLimitConfiguration,\r\n\r\n\t\tActiveLimitsConfiguration: activeLimitsConfiguration,\r\n\t\tLimitsConfiguration: limitsConfiguration,\r\n\t\tOpenDealsConfiguration: openDealsConfiguration,\r\n\t\tMarketInfoConfiguration: marketInfoConfiguration,\r\n\t\tWithdrawalConfiguration: withdrawalConfiguration,\r\n\t\tPendingWithdrawalConfiguration: pendingWithdrawalConfiguration,\r\n\t\tFavoriteInstrumentsConfiguration: favoriteInstrumentsConfiguration,\r\n\t\tQuotesPresetConfiguration: quotesPresetConfiguration,\r\n\t\tWalletConfiguration: walletConfiguration,\r\n\t\tBalanceConfiguration: balanceConfiguration,\r\n\t\tClosedDealsConfiguration: closedDealsConfiguration,\r\n\t\tAccountCardRecordsConfiguration: accountCardRecordsConfiguration,\r\n\r\n\t\tGTMConfiguration: gtmConfiguration,\r\n\t\tEconomicCalendarConfiguration: economicCalendarConfiguration,\r\n\t\tSignalsConfiguration: signalsConfiguration,\r\n\t\tContractRolloverConfiguration: contractRolloverConfiguration,\r\n\r\n\t\tAdvinionChartConfiguration: advinionChartConfiguration,\r\n\t\tUploadDocumentsConfiguration: uploadDocumentsConfiguration,\r\n\t\tAmlConfiguration: amlConfiguration,\r\n\t\tThankYouConfiguration: thankYouConfiguration,\r\n\t\tMarketInfoSectionsConfiguration: marketInfoSectionsConfiguration,\r\n\t\tDepositConfirmationConfiguration: depositConfirmationConfiguration,\r\n\r\n\t\tAutoCompleteConfiguration: autoCompleteConfiguration,\r\n\r\n\t\tPersonalGuideConfiguration: personalGuideConfiguration,\r\n\t};\r\n};\r\n\r\ndefine(\"configuration/initconfiguration\", [\"enums/enums\", \"customEnums/ViewsEnums\", \"global/UrlResolver\"], function () {\r\n\treturn InitConfiguration();\r\n});\r\n\n",
    "/**\r\n * History.js jQuery Adapter\r\n * @author Benjamin Arthur Lupton <contact@balupton.com>\r\n * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>\r\n * @license New BSD License <http://creativecommons.org/licenses/BSD/>\r\n */\r\n\r\n// Closure\r\n(function(window,undefined){\r\n\t\"use strict\";\r\n\r\n\t// Localise Globals\r\n\tvar\r\n\t\tHistory = window.History = window.History||{},\r\n\t\tjQuery = window.jQuery;\r\n\r\n\t// Check Existence\r\n\tif ( typeof History.Adapter !== 'undefined' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Add the Adapter\r\n\tHistory.Adapter = {\r\n\t\t/**\r\n\t\t * History.Adapter.bind(el,event,callback)\r\n\t\t * @param {Element|string} el\r\n\t\t * @param {string} event - custom and standard events\r\n\t\t * @param {function} callback\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tbind: function(el,event,callback){\r\n\t\t\tjQuery(el).bind(event,callback);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * History.Adapter.trigger(el,event)\r\n\t\t * @param {Element|string} el\r\n\t\t * @param {string} event - custom and standard events\r\n\t\t * @param {Object=} extra - a object of extra event data (optional)\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\ttrigger: function(el,event,extra){\r\n\t\t\tjQuery(el).trigger(event,extra);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * History.Adapter.extractEventData(key,event,extra)\r\n\t\t * @param {string} key - key for the event data to extract\r\n\t\t * @param {string} event - custom and standard events\r\n\t\t * @param {Object=} extra - a object of extra event data (optional)\r\n\t\t * @return {mixed}\r\n\t\t */\r\n\t\textractEventData: function(key,event,extra){\r\n\t\t\t// jQuery Native then jQuery Custom\r\n\t\t\tvar result = (event && event.originalEvent && event.originalEvent[key]) || (extra && extra[key]) || undefined;\r\n\r\n\t\t\t// Return\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * History.Adapter.onDomLoad(callback)\r\n\t\t * @param {function} callback\r\n\t\t * @return {void}\r\n\t\t */\r\n\t\tonDomLoad: function(callback) {\r\n\t\t\tjQuery(callback);\r\n\t\t}\r\n\t};\r\n\r\n\t// Try and Initialise History\r\n\tif ( typeof History.init !== 'undefined' ) {\r\n\t\tHistory.init();\r\n\t}\r\n\r\n})(window);\r\n\r\n/**\r\n * History.js HTML4 Support\r\n * Depends on the HTML5 Support\r\n * @author Benjamin Arthur Lupton <contact@balupton.com>\r\n * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>\r\n * @license New BSD License <http://creativecommons.org/licenses/BSD/>\r\n */\r\n\r\n(function(window,undefined){\r\n\t\"use strict\";\r\n\r\n\t// ========================================================================\r\n\t// Initialise\r\n\r\n\t// Localise Globals\r\n\tvar\r\n\t\tdocument = window.document, // Make sure we are using the correct document\r\n\t\tsetTimeout = window.setTimeout||setTimeout,\r\n\t\tclearTimeout = window.clearTimeout||clearTimeout,\r\n\t\tsetInterval = window.setInterval||setInterval,\r\n\t\tHistory = window.History = window.History||{}; // Public History Object\r\n\r\n\t// Check Existence\r\n\tif ( typeof History.initHtml4 !== 'undefined' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\r\n\t// ========================================================================\r\n\t// Initialise HTML4 Support\r\n\r\n\t// Initialise HTML4 Support\r\n\tHistory.initHtml4 = function(){\r\n\t\t// Initialise\r\n\t\tif ( typeof History.initHtml4.initialized !== 'undefined' ) {\r\n\t\t\t// Already Loaded\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tHistory.initHtml4.initialized = true;\r\n\t\t}\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Properties\r\n\r\n\t\t/**\r\n\t\t * History.enabled\r\n\t\t * Is History enabled?\r\n\t\t */\r\n\t\tHistory.enabled = true;\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Hash Storage\r\n\r\n\t\t/**\r\n\t\t * History.savedHashes\r\n\t\t * Store the hashes in an array\r\n\t\t */\r\n\t\tHistory.savedHashes = [];\r\n\r\n\t\t/**\r\n\t\t * History.isLastHash(newHash)\r\n\t\t * Checks if the hash is the last hash\r\n\t\t * @param {string} newHash\r\n\t\t * @return {boolean} true\r\n\t\t */\r\n\t\tHistory.isLastHash = function(newHash){\r\n\t\t\t// Prepare\r\n\t\t\tvar oldHash = History.getHashByIndex(),\r\n\t\t\t\tisLast;\r\n\r\n\t\t\t// Check\r\n\t\t\tisLast = newHash === oldHash;\r\n\r\n\t\t\t// Return isLast\r\n\t\t\treturn isLast;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.isHashEqual(newHash, oldHash)\r\n\t\t * Checks to see if two hashes are functionally equal\r\n\t\t * @param {string} newHash\r\n\t\t * @param {string} oldHash\r\n\t\t * @return {boolean} true\r\n\t\t */\r\n\t\tHistory.isHashEqual = function(newHash, oldHash){\r\n\t\t\tnewHash = encodeURIComponent(newHash).replace(/%25/g, \"%\");\r\n\t\t\toldHash = encodeURIComponent(oldHash).replace(/%25/g, \"%\");\r\n\t\t\treturn newHash === oldHash;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.saveHash(newHash)\r\n\t\t * Push a Hash\r\n\t\t * @param {string} newHash\r\n\t\t * @return {boolean} true\r\n\t\t */\r\n\t\tHistory.saveHash = function(newHash){\r\n\t\t\t// Check Hash\r\n\t\t\tif ( History.isLastHash(newHash) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Push the Hash\r\n\t\t\tHistory.savedHashes.push(newHash);\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getHashByIndex()\r\n\t\t * Gets a hash by the index\r\n\t\t * @param {integer} index\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tHistory.getHashByIndex = function(index){\r\n\t\t\t// Prepare\r\n\t\t\tvar hash = null;\r\n\r\n\t\t\t// Handle\r\n\t\t\tif ( typeof index === 'undefined' ) {\r\n\t\t\t\t// Get the last inserted\r\n\t\t\t\thash = History.savedHashes[History.savedHashes.length-1];\r\n\t\t\t}\r\n\t\t\telse if ( index < 0 ) {\r\n\t\t\t\t// Get from the end\r\n\t\t\t\thash = History.savedHashes[History.savedHashes.length+index];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Get from the beginning\r\n\t\t\t\thash = History.savedHashes[index];\r\n\t\t\t}\r\n\r\n\t\t\t// Return hash\r\n\t\t\treturn hash;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Discarded States\r\n\r\n\t\t/**\r\n\t\t * History.discardedHashes\r\n\t\t * A hashed array of discarded hashes\r\n\t\t */\r\n\t\tHistory.discardedHashes = {};\r\n\r\n\t\t/**\r\n\t\t * History.discardedStates\r\n\t\t * A hashed array of discarded states\r\n\t\t */\r\n\t\tHistory.discardedStates = {};\r\n\r\n\t\t/**\r\n\t\t * History.discardState(State)\r\n\t\t * Discards the state by ignoring it through History\r\n\t\t * @param {object} State\r\n\t\t * @return {true}\r\n\t\t */\r\n\t\tHistory.discardState = function(discardedState,forwardState,backState){\r\n\t\t\t//History.debug('History.discardState', arguments);\r\n\t\t\t// Prepare\r\n\t\t\tvar discardedStateHash = History.getHashByState(discardedState),\r\n\t\t\t\tdiscardObject;\r\n\r\n\t\t\t// Create Discard Object\r\n\t\t\tdiscardObject = {\r\n\t\t\t\t'discardedState': discardedState,\r\n\t\t\t\t'backState': backState,\r\n\t\t\t\t'forwardState': forwardState\r\n\t\t\t};\r\n\r\n\t\t\t// Add to DiscardedStates\r\n\t\t\tHistory.discardedStates[discardedStateHash] = discardObject;\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.discardHash(hash)\r\n\t\t * Discards the hash by ignoring it through History\r\n\t\t * @param {string} hash\r\n\t\t * @return {true}\r\n\t\t */\r\n\t\tHistory.discardHash = function(discardedHash,forwardState,backState){\r\n\t\t\t//History.debug('History.discardState', arguments);\r\n\t\t\t// Create Discard Object\r\n\t\t\tvar discardObject = {\r\n\t\t\t\t'discardedHash': discardedHash,\r\n\t\t\t\t'backState': backState,\r\n\t\t\t\t'forwardState': forwardState\r\n\t\t\t};\r\n\r\n\t\t\t// Add to discardedHash\r\n\t\t\tHistory.discardedHashes[discardedHash] = discardObject;\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.discardedState(State)\r\n\t\t * Checks to see if the state is discarded\r\n\t\t * @param {object} State\r\n\t\t * @return {bool}\r\n\t\t */\r\n\t\tHistory.discardedState = function(State){\r\n\t\t\t// Prepare\r\n\t\t\tvar StateHash = History.getHashByState(State),\r\n\t\t\t\tdiscarded;\r\n\r\n\t\t\t// Check\r\n\t\t\tdiscarded = History.discardedStates[StateHash]||false;\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn discarded;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.discardedHash(hash)\r\n\t\t * Checks to see if the state is discarded\r\n\t\t * @param {string} State\r\n\t\t * @return {bool}\r\n\t\t */\r\n\t\tHistory.discardedHash = function(hash){\r\n\t\t\t// Check\r\n\t\t\tvar discarded = History.discardedHashes[hash]||false;\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn discarded;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.recycleState(State)\r\n\t\t * Allows a discarded state to be used again\r\n\t\t * @param {object} data\r\n\t\t * @param {string} title\r\n\t\t * @param {string} url\r\n\t\t * @return {true}\r\n\t\t */\r\n\t\tHistory.recycleState = function(State){\r\n\t\t\t//History.debug('History.recycleState', arguments);\r\n\t\t\t// Prepare\r\n\t\t\tvar StateHash = History.getHashByState(State);\r\n\r\n\t\t\t// Remove from DiscardedStates\r\n\t\t\tif ( History.discardedState(State) ) {\r\n\t\t\t\tdelete History.discardedStates[StateHash];\r\n\t\t\t}\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// HTML4 HashChange Support\r\n\r\n\t\tif ( History.emulated.hashChange ) {\r\n\t\t\t/*\r\n\t\t\t * We must emulate the HTML4 HashChange Support by manually checking for hash changes\r\n\t\t\t */\r\n\r\n\t\t\t/**\r\n\t\t\t * History.hashChangeInit()\r\n\t\t\t * Init the HashChange Emulation\r\n\t\t\t */\r\n\t\t\tHistory.hashChangeInit = function(){\r\n\t\t\t\t// Define our Checker Function\r\n\t\t\t\tHistory.checkerFunction = null;\r\n\r\n\t\t\t\t// Define some variables that will help in our checker function\r\n\t\t\t\tvar lastDocumentHash = '',\r\n\t\t\t\t\tiframeId, iframe,\r\n\t\t\t\t\tlastIframeHash, checkerRunning,\r\n\t\t\t\t\tstartedWithHash = Boolean(History.getHash());\r\n\r\n\t\t\t\t// Handle depending on the browser\r\n\t\t\t\tif ( History.isInternetExplorer() ) {\r\n\t\t\t\t\t// IE6 and IE7\r\n\t\t\t\t\t// We need to use an iframe to emulate the back and forward buttons\r\n\r\n\t\t\t\t\t// Create iFrame\r\n\t\t\t\t\tiframeId = 'historyjs-iframe';\r\n\t\t\t\t\tiframe = document.createElement('iframe');\r\n\r\n\t\t\t\t\t// Adjust iFarme\r\n\t\t\t\t\t// IE 6 requires iframe to have a src on HTTPS pages, otherwise it will throw a\r\n\t\t\t\t\t// \"This page contains both secure and nonsecure items\" warning.\r\n\t\t\t\t\tiframe.setAttribute('id', iframeId);\r\n\t\t\t\t\tiframe.setAttribute('src', '#');\r\n\t\t\t\t\tiframe.style.display = 'none';\r\n\r\n\t\t\t\t\t// Append iFrame\r\n\t\t\t\t\tdocument.body.appendChild(iframe);\r\n\r\n\t\t\t\t\t// Create initial history entry\r\n\t\t\t\t\tiframe.contentWindow.document.open();\r\n\t\t\t\t\tiframe.contentWindow.document.close();\r\n\r\n\t\t\t\t\t// Define some variables that will help in our checker function\r\n\t\t\t\t\tlastIframeHash = '';\r\n\t\t\t\t\tcheckerRunning = false;\r\n\r\n\t\t\t\t\t// Define the checker function\r\n\t\t\t\t\tHistory.checkerFunction = function(){\r\n\t\t\t\t\t\t// Check Running\r\n\t\t\t\t\t\tif ( checkerRunning ) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Update Running\r\n\t\t\t\t\t\tcheckerRunning = true;\r\n\r\n\t\t\t\t\t\t// Fetch\r\n\t\t\t\t\t\tvar\r\n\t\t\t\t\t\t\tdocumentHash = History.getHash(),\r\n\t\t\t\t\t\t\tiframeHash = History.getHash(iframe.contentWindow.document);\r\n\r\n\t\t\t\t\t\t// The Document Hash has changed (application caused)\r\n\t\t\t\t\t\tif ( documentHash !== lastDocumentHash ) {\r\n\t\t\t\t\t\t\t// Equalise\r\n\t\t\t\t\t\t\tlastDocumentHash = documentHash;\r\n\r\n\t\t\t\t\t\t\t// Create a history entry in the iframe\r\n\t\t\t\t\t\t\tif ( iframeHash !== documentHash ) {\r\n\t\t\t\t\t\t\t\t//History.debug('hashchange.checker: iframe hash change', 'documentHash (new):', documentHash, 'iframeHash (old):', iframeHash);\r\n\r\n\t\t\t\t\t\t\t\t// Equalise\r\n\t\t\t\t\t\t\t\tlastIframeHash = iframeHash = documentHash;\r\n\r\n\t\t\t\t\t\t\t\t// Create History Entry\r\n\t\t\t\t\t\t\t\tiframe.contentWindow.document.open();\r\n\t\t\t\t\t\t\t\tiframe.contentWindow.document.close();\r\n\r\n\t\t\t\t\t\t\t\t// Update the iframe's hash\r\n\t\t\t\t\t\t\t\tiframe.contentWindow.document.location.hash = History.escapeHash(documentHash);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Trigger Hashchange Event\r\n\t\t\t\t\t\t\tHistory.Adapter.trigger(window,'hashchange');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// The iFrame Hash has changed (back button caused)\r\n\t\t\t\t\t\telse if ( iframeHash !== lastIframeHash ) {\r\n\t\t\t\t\t\t\t//History.debug('hashchange.checker: iframe hash out of sync', 'iframeHash (new):', iframeHash, 'documentHash (old):', documentHash);\r\n\r\n\t\t\t\t\t\t\t// Equalise\r\n\t\t\t\t\t\t\tlastIframeHash = iframeHash;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// If there is no iframe hash that means we're at the original\r\n\t\t\t\t\t\t\t// iframe state.\r\n\t\t\t\t\t\t\t// And if there was a hash on the original request, the original\r\n\t\t\t\t\t\t\t// iframe state was replaced instantly, so skip this state and take\r\n\t\t\t\t\t\t\t// the user back to where they came from.\r\n\t\t\t\t\t\t\tif (startedWithHash && iframeHash === '') {\r\n\t\t\t\t\t\t\t\tHistory.back();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t// Update the Hash\r\n\t\t\t\t\t\t\t\tHistory.setHash(iframeHash,false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Reset Running\r\n\t\t\t\t\t\tcheckerRunning = false;\r\n\r\n\t\t\t\t\t\t// Return true\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// We are not IE\r\n\t\t\t\t\t// Firefox 1 or 2, Opera\r\n\r\n\t\t\t\t\t// Define the checker function\r\n\t\t\t\t\tHistory.checkerFunction = function(){\r\n\t\t\t\t\t\t// Prepare\r\n\t\t\t\t\t\tvar documentHash = History.getHash()||'';\r\n\r\n\t\t\t\t\t\t// The Document Hash has changed (application caused)\r\n\t\t\t\t\t\tif ( documentHash !== lastDocumentHash ) {\r\n\t\t\t\t\t\t\t// Equalise\r\n\t\t\t\t\t\t\tlastDocumentHash = documentHash;\r\n\r\n\t\t\t\t\t\t\t// Trigger Hashchange Event\r\n\t\t\t\t\t\t\tHistory.Adapter.trigger(window,'hashchange');\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Return true\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Apply the checker function\r\n\t\t\t\tHistory.intervalList.push(setInterval(History.checkerFunction, History.options.hashChangeInterval));\r\n\r\n\t\t\t\t// Done\r\n\t\t\t\treturn true;\r\n\t\t\t}; // History.hashChangeInit\r\n\r\n\t\t\t// Bind hashChangeInit\r\n\t\t\tHistory.Adapter.onDomLoad(History.hashChangeInit);\r\n\r\n\t\t} // History.emulated.hashChange\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// HTML5 State Support\r\n\r\n\t\t// Non-Native pushState Implementation\r\n\t\tif ( History.emulated.pushState ) {\r\n\t\t\t/*\r\n\t\t\t * We must emulate the HTML5 State Management by using HTML4 HashChange\r\n\t\t\t */\r\n\r\n\t\t\t/**\r\n\t\t\t * History.onHashChange(event)\r\n\t\t\t * Trigger HTML5's window.onpopstate via HTML4 HashChange Support\r\n\t\t\t */\r\n\t\t\tHistory.onHashChange = function(event){\r\n\t\t\t\t//History.debug('History.onHashChange', arguments);\r\n\r\n\t\t\t\t// Prepare\r\n\t\t\t\tvar currentUrl = ((event && event.newURL) || History.getLocationHref()),\r\n\t\t\t\t\tcurrentHash = History.getHashByUrl(currentUrl),\r\n\t\t\t\t\tcurrentState = null,\r\n\t\t\t\t\tcurrentStateHash = null,\r\n\t\t\t\t\tcurrentStateHashExits = null,\r\n\t\t\t\t\tdiscardObject;\r\n\r\n\t\t\t\t// Check if we are the same state\r\n\t\t\t\tif ( History.isLastHash(currentHash) ) {\r\n\t\t\t\t\t// There has been no change (just the page's hash has finally propagated)\r\n\t\t\t\t\t//History.debug('History.onHashChange: no change');\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Reset the double check\r\n\t\t\t\tHistory.doubleCheckComplete();\r\n\r\n\t\t\t\t// Store our location for use in detecting back/forward direction\r\n\t\t\t\tHistory.saveHash(currentHash);\r\n\r\n\t\t\t\t// Expand Hash\r\n\t\t\t\tif ( currentHash && History.isTraditionalAnchor(currentHash) ) {\r\n\t\t\t\t\t//History.debug('History.onHashChange: traditional anchor', currentHash);\r\n\t\t\t\t\t// Traditional Anchor Hash\r\n\t\t\t\t\tHistory.Adapter.trigger(window,'anchorchange');\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create State\r\n\t\t\t\tcurrentState = History.extractState(History.getFullUrl(currentHash||History.getLocationHref()),true);\r\n\r\n\t\t\t\t// Check if we are the same state\r\n\t\t\t\tif ( History.isLastSavedState(currentState) ) {\r\n\t\t\t\t\t//History.debug('History.onHashChange: no change');\r\n\t\t\t\t\t// There has been no change (just the page's hash has finally propagated)\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create the state Hash\r\n\t\t\t\tcurrentStateHash = History.getHashByState(currentState);\r\n\r\n\t\t\t\t// Check if we are DiscardedState\r\n\t\t\t\tdiscardObject = History.discardedState(currentState);\r\n\t\t\t\tif ( discardObject ) {\r\n\t\t\t\t\t// Ignore this state as it has been discarded and go back to the state before it\r\n\t\t\t\t\tif ( History.getHashByIndex(-2) === History.getHashByState(discardObject.forwardState) ) {\r\n\t\t\t\t\t\t// We are going backwards\r\n\t\t\t\t\t\t//History.debug('History.onHashChange: go backwards');\r\n\t\t\t\t\t\tHistory.back(false);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// We are going forwards\r\n\t\t\t\t\t\t//History.debug('History.onHashChange: go forwards');\r\n\t\t\t\t\t\tHistory.forward(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Push the new HTML5 State\r\n\t\t\t\t//History.debug('History.onHashChange: success hashchange');\r\n\t\t\t\tHistory.pushState(currentState.data,currentState.title,encodeURI(currentState.url),false);\r\n\r\n\t\t\t\t// End onHashChange closure\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tHistory.Adapter.bind(window,'hashchange',History.onHashChange);\r\n\r\n\t\t\t/**\r\n\t\t\t * History.pushState(data,title,url)\r\n\t\t\t * Add a new State to the history object, become it, and trigger onpopstate\r\n\t\t\t * We have to trigger for HTML4 compatibility\r\n\t\t\t * @param {object} data\r\n\t\t\t * @param {string} title\r\n\t\t\t * @param {string} url\r\n\t\t\t * @return {true}\r\n\t\t\t */\r\n\t\t\tHistory.pushState = function(data,title,url,queue){\r\n\t\t\t\t//History.debug('History.pushState: called', arguments);\r\n\r\n\t\t\t\t// We assume that the URL passed in is URI-encoded, but this makes\r\n\t\t\t\t// sure that it's fully URI encoded; any '%'s that are encoded are\r\n\t\t\t\t// converted back into '%'s\r\n\t\t\t\turl = encodeURI(url).replace(/%25/g, \"%\");\r\n\r\n\t\t\t\t// Check the State\r\n\t\t\t\tif ( History.getHashByUrl(url) ) {\r\n\t\t\t\t\tthrow new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Handle Queueing\r\n\t\t\t\tif ( queue !== false && History.busy() ) {\r\n\t\t\t\t\t// Wait + Push to Queue\r\n\t\t\t\t\t//History.debug('History.pushState: we must wait', arguments);\r\n\t\t\t\t\tHistory.pushQueue({\r\n\t\t\t\t\t\tscope: History,\r\n\t\t\t\t\t\tcallback: History.pushState,\r\n\t\t\t\t\t\targs: arguments,\r\n\t\t\t\t\t\tqueue: queue\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Make Busy\r\n\t\t\t\tHistory.busy(true);\r\n\r\n\t\t\t\t// Fetch the State Object\r\n\t\t\t\tvar newState = History.createStateObject(data,title,url),\r\n\t\t\t\t\tnewStateHash = History.getHashByState(newState),\r\n\t\t\t\t\toldState = History.getState(false),\r\n\t\t\t\t\toldStateHash = History.getHashByState(oldState),\r\n\t\t\t\t\thtml4Hash = History.getHash(),\r\n\t\t\t\t\twasExpected = History.expectedStateId == newState.id;\r\n\r\n\t\t\t\t// Store the newState\r\n\t\t\t\tHistory.storeState(newState);\r\n\t\t\t\tHistory.expectedStateId = newState.id;\r\n\r\n\t\t\t\t// Recycle the State\r\n\t\t\t\tHistory.recycleState(newState);\r\n\r\n\t\t\t\t// Force update of the title\r\n\t\t\t\tHistory.setTitle(newState);\r\n\r\n\t\t\t\t// Check if we are the same State\r\n\t\t\t\tif ( newStateHash === oldStateHash ) {\r\n\t\t\t\t\t//History.debug('History.pushState: no change', newStateHash);\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Update HTML5 State\r\n\t\t\t\tHistory.saveState(newState);\r\n\r\n\t\t\t\t// Fire HTML5 Event\r\n\t\t\t\tif(!wasExpected)\r\n\t\t\t\t\tHistory.Adapter.trigger(window,'statechange');\r\n\r\n\t\t\t\t// Update HTML4 Hash\r\n\t\t\t\tif ( !History.isHashEqual(newStateHash, html4Hash) && !History.isHashEqual(newStateHash, History.getShortUrl(History.getLocationHref())) ) {\r\n\t\t\t\t\tHistory.setHash(newStateHash,false);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tHistory.busy(false);\r\n\r\n\t\t\t\t// End pushState closure\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * History.replaceState(data,title,url)\r\n\t\t\t * Replace the State and trigger onpopstate\r\n\t\t\t * We have to trigger for HTML4 compatibility\r\n\t\t\t * @param {object} data\r\n\t\t\t * @param {string} title\r\n\t\t\t * @param {string} url\r\n\t\t\t * @return {true}\r\n\t\t\t */\r\n\t\t\tHistory.replaceState = function(data,title,url,queue){\r\n\t\t\t\t//History.debug('History.replaceState: called', arguments);\r\n\r\n\t\t\t\t// We assume that the URL passed in is URI-encoded, but this makes\r\n\t\t\t\t// sure that it's fully URI encoded; any '%'s that are encoded are\r\n\t\t\t\t// converted back into '%'s\r\n\t\t\t\turl = encodeURI(url).replace(/%25/g, \"%\");\r\n\r\n\t\t\t\t// Check the State\r\n\t\t\t\tif ( History.getHashByUrl(url) ) {\r\n\t\t\t\t\tthrow new Error('History.js does not support states with fragment-identifiers (hashes/anchors).');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Handle Queueing\r\n\t\t\t\tif ( queue !== false && History.busy() ) {\r\n\t\t\t\t\t// Wait + Push to Queue\r\n\t\t\t\t\t//History.debug('History.replaceState: we must wait', arguments);\r\n\t\t\t\t\tHistory.pushQueue({\r\n\t\t\t\t\t\tscope: History,\r\n\t\t\t\t\t\tcallback: History.replaceState,\r\n\t\t\t\t\t\targs: arguments,\r\n\t\t\t\t\t\tqueue: queue\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Make Busy\r\n\t\t\t\tHistory.busy(true);\r\n\r\n\t\t\t\t// Fetch the State Objects\r\n\t\t\t\tvar newState        = History.createStateObject(data,title,url),\r\n\t\t\t\t\tnewStateHash = History.getHashByState(newState),\r\n\t\t\t\t\toldState        = History.getState(false),\r\n\t\t\t\t\toldStateHash = History.getHashByState(oldState),\r\n\t\t\t\t\tpreviousState   = History.getStateByIndex(-2);\r\n\r\n\t\t\t\t// Discard Old State\r\n\t\t\t\tHistory.discardState(oldState,newState,previousState);\r\n\r\n\t\t\t\t// If the url hasn't changed, just store and save the state\r\n\t\t\t\t// and fire a statechange event to be consistent with the\r\n\t\t\t\t// html 5 api\r\n\t\t\t\tif ( newStateHash === oldStateHash ) {\r\n\t\t\t\t\t// Store the newState\r\n\t\t\t\t\tHistory.storeState(newState);\r\n\t\t\t\t\tHistory.expectedStateId = newState.id;\r\n\t\r\n\t\t\t\t\t// Recycle the State\r\n\t\t\t\t\tHistory.recycleState(newState);\r\n\t\r\n\t\t\t\t\t// Force update of the title\r\n\t\t\t\t\tHistory.setTitle(newState);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Update HTML5 State\r\n\t\t\t\t\tHistory.saveState(newState);\r\n\r\n\t\t\t\t\t// Fire HTML5 Event\r\n\t\t\t\t\t//History.debug('History.pushState: trigger popstate');\r\n\t\t\t\t\tHistory.Adapter.trigger(window,'statechange');\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Alias to PushState\r\n\t\t\t\t\tHistory.pushState(newState.data,newState.title,newState.url,false);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// End replaceState closure\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\r\n\t\t} // History.emulated.pushState\r\n\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Initialise\r\n\r\n\t\t// Non-Native pushState Implementation\r\n\t\tif ( History.emulated.pushState ) {\r\n\t\t\t/**\r\n\t\t\t * Ensure initial state is handled correctly\r\n\t\t\t */\r\n\t\t\tif ( History.getHash() && !History.emulated.hashChange ) {\r\n\t\t\t\tHistory.Adapter.onDomLoad(function(){\r\n\t\t\t\t\tHistory.Adapter.trigger(window,'hashchange');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} // History.emulated.pushState\r\n\r\n\t}; // History.initHtml4\r\n\r\n\t// Try to Initialise History\r\n\tif ( typeof History.init !== 'undefined' ) {\r\n\t\tHistory.init();\r\n\t}\r\n\r\n})(window);\r\n/**\r\n * History.js Core\r\n * @author Benjamin Arthur Lupton <contact@balupton.com>\r\n * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>\r\n * @license New BSD License <http://creativecommons.org/licenses/BSD/>\r\n */\r\n\r\n(function(window,undefined){\r\n\t\"use strict\";\r\n\r\n\t// ========================================================================\r\n\t// Initialise\r\n\r\n\t// Localise Globals\r\n\tvar\r\n\t\tconsole = window.console||undefined, // Prevent a JSLint complain\r\n\t\tdocument = window.document, // Make sure we are using the correct document\r\n\t\tnavigator = window.navigator, // Make sure we are using the correct navigator\r\n\t\tsessionStorage = false, // sessionStorage\r\n\t\tsetTimeout = window.setTimeout,\r\n\t\tclearTimeout = window.clearTimeout,\r\n\t\tsetInterval = window.setInterval,\r\n\t\tclearInterval = window.clearInterval,\r\n\t\tJSON = window.JSON,\r\n\t\talert = window.alert,\r\n\t\tHistory = window.History = window.History||{}, // Public History Object\r\n\t\thistory = window.history; // Old History Object\r\n\r\n\ttry {\r\n\t\tsessionStorage = window.sessionStorage; // This will throw an exception in some browsers when cookies/localStorage are explicitly disabled (i.e. Chrome)\r\n\t\tsessionStorage.setItem('TEST', '1');\r\n\t\tsessionStorage.removeItem('TEST');\r\n\t} catch(e) {\r\n\t\tsessionStorage = false;\r\n\t}\r\n\r\n\t// MooTools Compatibility\r\n\tJSON.stringify = JSON.stringify||JSON.encode;\r\n\tJSON.parse = JSON.parse||JSON.decode;\r\n\r\n\t// Check Existence\r\n\tif ( typeof History.init !== 'undefined' ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Initialise History\r\n\tHistory.init = function(options){\r\n\t\t// Check Load Status of Adapter\r\n\t\tif ( typeof History.Adapter === 'undefined' ) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// Check Load Status of Core\r\n\t\tif ( typeof History.initCore !== 'undefined' ) {\r\n\t\t\tHistory.initCore();\r\n\t\t}\r\n\r\n\t\t// Check Load Status of HTML4 Support\r\n\t\tif ( typeof History.initHtml4 !== 'undefined' ) {\r\n\t\t\tHistory.initHtml4();\r\n\t\t}\r\n\r\n\t\t// Return true\r\n\t\treturn true;\r\n\t};\r\n\r\n\r\n\t// ========================================================================\r\n\t// Initialise Core\r\n\r\n\t// Initialise Core\r\n\tHistory.initCore = function(options){\r\n\t\t// Initialise\r\n\t\tif ( typeof History.initCore.initialized !== 'undefined' ) {\r\n\t\t\t// Already Loaded\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tHistory.initCore.initialized = true;\r\n\t\t}\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Options\r\n\r\n\t\t/**\r\n\t\t * History.options\r\n\t\t * Configurable options\r\n\t\t */\r\n\t\tHistory.options = History.options||{};\r\n\r\n\t\t/**\r\n\t\t * History.options.hashChangeInterval\r\n\t\t * How long should the interval be before hashchange checks\r\n\t\t */\r\n\t\tHistory.options.hashChangeInterval = History.options.hashChangeInterval || 100;\r\n\r\n\t\t/**\r\n\t\t * History.options.safariPollInterval\r\n\t\t * How long should the interval be before safari poll checks\r\n\t\t */\r\n\t\tHistory.options.safariPollInterval = History.options.safariPollInterval || 500;\r\n\r\n\t\t/**\r\n\t\t * History.options.doubleCheckInterval\r\n\t\t * How long should the interval be before we perform a double check\r\n\t\t */\r\n\t\tHistory.options.doubleCheckInterval = History.options.doubleCheckInterval || 500;\r\n\r\n\t\t/**\r\n\t\t * History.options.disableSuid\r\n\t\t * Force History not to append suid\r\n\t\t */\r\n\t\tHistory.options.disableSuid = History.options.disableSuid || false;\r\n\r\n\t\t/**\r\n\t\t * History.options.storeInterval\r\n\t\t * How long should we wait between store calls\r\n\t\t */\r\n\t\tHistory.options.storeInterval = History.options.storeInterval || 1000;\r\n\r\n\t\t/**\r\n\t\t * History.options.busyDelay\r\n\t\t * How long should we wait between busy events\r\n\t\t */\r\n\t\tHistory.options.busyDelay = History.options.busyDelay || 250;\r\n\r\n\t\t/**\r\n\t\t * History.options.debug\r\n\t\t * If true will enable debug messages to be logged\r\n\t\t */\r\n\t\tHistory.options.debug = History.options.debug || false;\r\n\r\n\t\t/**\r\n\t\t * History.options.initialTitle\r\n\t\t * What is the title of the initial state\r\n\t\t */\r\n\t\tHistory.options.initialTitle = History.options.initialTitle || document.title;\r\n\r\n\t\t/**\r\n\t\t * History.options.html4Mode\r\n\t\t * If true, will force HTMl4 mode (hashtags)\r\n\t\t */\r\n\t\tHistory.options.html4Mode = History.options.html4Mode || false;\r\n\r\n\t\t/**\r\n\t\t * History.options.delayInit\r\n\t\t * Want to override default options and call init manually.\r\n\t\t */\r\n\t\tHistory.options.delayInit = History.options.delayInit || false;\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Interval record\r\n\r\n\t\t/**\r\n\t\t * History.intervalList\r\n\t\t * List of intervals set, to be cleared when document is unloaded.\r\n\t\t */\r\n\t\tHistory.intervalList = [];\r\n\r\n\t\t/**\r\n\t\t * History.clearAllIntervals\r\n\t\t * Clears all setInterval instances.\r\n\t\t */\r\n\t\tHistory.clearAllIntervals = function(){\r\n\t\t\tvar i, il = History.intervalList;\r\n\t\t\tif (typeof il !== \"undefined\" && il !== null) {\r\n\t\t\t\tfor (i = 0; i < il.length; i++) {\r\n\t\t\t\t\tclearInterval(il[i]);\r\n\t\t\t\t}\r\n\t\t\t\tHistory.intervalList = null;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Debug\r\n\r\n\t\t/**\r\n\t\t * History.debug(message,...)\r\n\t\t * Logs the passed arguments if debug enabled\r\n\t\t */\r\n\t\tHistory.debug = function(){\r\n\t\t\tif ( (History.options.debug||false) ) {\r\n\t\t\t\tHistory.log.apply(History,arguments);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.log(message,...)\r\n\t\t * Logs the passed arguments\r\n\t\t */\r\n\t\tHistory.log = function(){\r\n\t\t\t// Prepare\r\n\t\t\tvar\r\n\t\t\t\tconsoleExists = !(typeof console === 'undefined' || typeof console.log === 'undefined' || typeof console.log.apply === 'undefined'),\r\n\t\t\t\ttextarea = document.getElementById('log'),\r\n\t\t\t\tmessage,\r\n\t\t\t\ti,n,\r\n\t\t\t\targs,arg\r\n\t\t\t\t;\r\n\r\n\t\t\t// Write to Console\r\n\t\t\tif ( consoleExists ) {\r\n\t\t\t\targs = Array.prototype.slice.call(arguments);\r\n\t\t\t\tmessage = args.shift();\r\n\t\t\t\tif ( typeof console.debug !== 'undefined' ) {\r\n\t\t\t\t\tconsole.debug.apply(console,[message,args]);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tconsole.log.apply(console,[message,args]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tmessage = (\"\\n\"+arguments[0]+\"\\n\");\r\n\t\t\t}\r\n\r\n\t\t\t// Write to log\r\n\t\t\tfor ( i=1,n=arguments.length; i<n; ++i ) {\r\n\t\t\t\targ = arguments[i];\r\n\t\t\t\tif ( typeof arg === 'object' && typeof JSON !== 'undefined' ) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\targ = JSON.stringify(arg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch ( Exception ) {\r\n\t\t\t\t\t\t// Recursive Object\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tmessage += \"\\n\"+arg+\"\\n\";\r\n\t\t\t}\r\n\r\n\t\t\t// Textarea\r\n\t\t\tif ( textarea ) {\r\n\t\t\t\ttextarea.value += message+\"\\n-----\\n\";\r\n\t\t\t\ttextarea.scrollTop = textarea.scrollHeight - textarea.clientHeight;\r\n\t\t\t}\r\n\t\t\t// No Textarea, No Console\r\n\t\t\telse if ( !consoleExists ) {\r\n\t\t\t\talert(message);\r\n\t\t\t}\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Emulated Status\r\n\r\n\t\t/**\r\n\t\t * History.getInternetExplorerMajorVersion()\r\n\t\t * Get's the major version of Internet Explorer\r\n\t\t * @return {integer}\r\n\t\t * @license Public Domain\r\n\t\t * @author Benjamin Arthur Lupton <contact@balupton.com>\r\n\t\t * @author James Padolsey <https://gist.github.com/527683>\r\n\t\t */\r\n\t\tHistory.getInternetExplorerMajorVersion = function(){\r\n\t\t\tvar result = History.getInternetExplorerMajorVersion.cached =\r\n\t\t\t\t\t(typeof History.getInternetExplorerMajorVersion.cached !== 'undefined')\r\n\t\t\t\t?\tHistory.getInternetExplorerMajorVersion.cached\r\n\t\t\t\t:\t(function(){\r\n\t\t\t\t\t\tvar v = 3,\r\n\t\t\t\t\t\t\t\tdiv = document.createElement('div'),\r\n\t\t\t\t\t\t\t\tall = div.getElementsByTagName('i');\r\n\t\t\t\t\t\twhile ( (div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->') && all[0] ) {}\r\n\t\t\t\t\t\treturn (v > 4) ? v : false;\r\n\t\t\t\t\t})()\r\n\t\t\t\t;\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.isInternetExplorer()\r\n\t\t * Are we using Internet Explorer?\r\n\t\t * @return {boolean}\r\n\t\t * @license Public Domain\r\n\t\t * @author Benjamin Arthur Lupton <contact@balupton.com>\r\n\t\t */\r\n\t\tHistory.isInternetExplorer = function(){\r\n\t\t\tvar result =\r\n\t\t\t\tHistory.isInternetExplorer.cached =\r\n\t\t\t\t(typeof History.isInternetExplorer.cached !== 'undefined')\r\n\t\t\t\t\t?\tHistory.isInternetExplorer.cached\r\n\t\t\t\t\t:\tBoolean(History.getInternetExplorerMajorVersion())\r\n\t\t\t\t;\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.emulated\r\n\t\t * Which features require emulating?\r\n\t\t */\r\n\r\n\t\tif (History.options.html4Mode) {\r\n\t\t\tHistory.emulated = {\r\n\t\t\t\tpushState : true,\r\n\t\t\t\thashChange: true\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\telse {\r\n\r\n\t\t\tHistory.emulated = {\r\n\t\t\t\tpushState: !Boolean(\r\n\t\t\t\t\twindow.history && window.history.pushState && window.history.replaceState\r\n\t\t\t\t\t&& !(\r\n\t\t\t\t\t\t(/ Mobile\\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i).test(navigator.userAgent) /* disable for versions of iOS before version 4.3 (8F190) */\r\n\t\t\t\t\t\t|| (/AppleWebKit\\/5([0-2]|3[0-2])/i).test(navigator.userAgent) /* disable for the mercury iOS browser, or at least older versions of the webkit engine */\r\n\t\t\t\t\t)\r\n\t\t\t\t),\r\n\t\t\t\thashChange: Boolean(\r\n\t\t\t\t\t!(('onhashchange' in window) || ('onhashchange' in document))\r\n\t\t\t\t\t||\r\n\t\t\t\t\t(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8)\r\n\t\t\t\t)\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * History.enabled\r\n\t\t * Is History enabled?\r\n\t\t */\r\n\t\tHistory.enabled = !History.emulated.pushState;\r\n\r\n\t\t/**\r\n\t\t * History.bugs\r\n\t\t * Which bugs are present\r\n\t\t */\r\n\t\tHistory.bugs = {\r\n\t\t\t/**\r\n\t\t\t * Safari 5 and Safari iOS 4 fail to return to the correct state once a hash is replaced by a `replaceState` call\r\n\t\t\t * https://bugs.webkit.org/show_bug.cgi?id=56249\r\n\t\t\t */\r\n\t\t\tsetHash: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\\/5([0-2]|3[0-3])/.test(navigator.userAgent)),\r\n\r\n\t\t\t/**\r\n\t\t\t * Safari 5 and Safari iOS 4 sometimes fail to apply the state change under busy conditions\r\n\t\t\t * https://bugs.webkit.org/show_bug.cgi?id=42940\r\n\t\t\t */\r\n\t\t\tsafariPoll: Boolean(!History.emulated.pushState && navigator.vendor === 'Apple Computer, Inc.' && /AppleWebKit\\/5([0-2]|3[0-3])/.test(navigator.userAgent)),\r\n\r\n\t\t\t/**\r\n\t\t\t * MSIE 6 and 7 sometimes do not apply a hash even it was told to (requiring a second call to the apply function)\r\n\t\t\t */\r\n\t\t\tieDoubleCheck: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 8),\r\n\r\n\t\t\t/**\r\n\t\t\t * MSIE 6 requires the entire hash to be encoded for the hashes to trigger the onHashChange event\r\n\t\t\t */\r\n\t\t\thashEscape: Boolean(History.isInternetExplorer() && History.getInternetExplorerMajorVersion() < 7)\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.isEmptyObject(obj)\r\n\t\t * Checks to see if the Object is Empty\r\n\t\t * @param {Object} obj\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tHistory.isEmptyObject = function(obj) {\r\n\t\t\tfor ( var name in obj ) {\r\n\t\t\t\tif ( obj.hasOwnProperty(name) ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.cloneObject(obj)\r\n\t\t * Clones a object and eliminate all references to the original contexts\r\n\t\t * @param {Object} obj\r\n\t\t * @return {Object}\r\n\t\t */\r\n\t\tHistory.cloneObject = function(obj) {\r\n\t\t\tvar hash,newObj;\r\n\t\t\tif ( obj ) {\r\n\t\t\t\thash = JSON.stringify(obj);\r\n\t\t\t\tnewObj = JSON.parse(hash);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnewObj = {};\r\n\t\t\t}\r\n\t\t\treturn newObj;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// URL Helpers\r\n\r\n\t\t/**\r\n\t\t * History.getRootUrl()\r\n\t\t * Turns \"http://mysite.com/dir/page.html?asd\" into \"http://mysite.com\"\r\n\t\t * @return {String} rootUrl\r\n\t\t */\r\n\t\tHistory.getRootUrl = function(){\r\n\t\t\t// Create\r\n\t\t\tvar rootUrl = document.location.protocol+'//'+(document.location.hostname||document.location.host);\r\n\t\t\tif ( document.location.port||false ) {\r\n\t\t\t\trootUrl += ':'+document.location.port;\r\n\t\t\t}\r\n\t\t\trootUrl += '/';\r\n\r\n\t\t\t// Return\r\n\t\t\treturn rootUrl;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getBaseHref()\r\n\t\t * Fetches the `href` attribute of the `<base href=\"...\">` element if it exists\r\n\t\t * @return {String} baseHref\r\n\t\t */\r\n\t\tHistory.getBaseHref = function(){\r\n\t\t\t// Create\r\n\t\t\tvar\r\n\t\t\t\tbaseElements = document.getElementsByTagName('base'),\r\n\t\t\t\tbaseElement = null,\r\n\t\t\t\tbaseHref = '';\r\n\r\n\t\t\t// Test for Base Element\r\n\t\t\tif ( baseElements.length === 1 ) {\r\n\t\t\t\t// Prepare for Base Element\r\n\t\t\t\tbaseElement = baseElements[0];\r\n\t\t\t\tbaseHref = baseElement.href.replace(/[^\\/]+$/,'');\r\n\t\t\t}\r\n\r\n\t\t\t// Adjust trailing slash\r\n\t\t\tbaseHref = baseHref.replace(/\\/+$/,'');\r\n\t\t\tif ( baseHref ) baseHref += '/';\r\n\r\n\t\t\t// Return\r\n\t\t\treturn baseHref;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getBaseUrl()\r\n\t\t * Fetches the baseHref or basePageUrl or rootUrl (whichever one exists first)\r\n\t\t * @return {String} baseUrl\r\n\t\t */\r\n\t\tHistory.getBaseUrl = function(){\r\n\t\t\t// Create\r\n\t\t\tvar baseUrl = History.getBaseHref()||History.getBasePageUrl()||History.getRootUrl();\r\n\r\n\t\t\t// Return\r\n\t\t\treturn baseUrl;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getPageUrl()\r\n\t\t * Fetches the URL of the current page\r\n\t\t * @return {String} pageUrl\r\n\t\t */\r\n\t\tHistory.getPageUrl = function(){\r\n\t\t\t// Fetch\r\n\t\t\tvar\r\n\t\t\t\tState = History.getState(false,false),\r\n\t\t\t\tstateUrl = (State||{}).url||History.getLocationHref(),\r\n\t\t\t\tpageUrl;\r\n\r\n\t\t\t// Create\r\n\t\t\tpageUrl = stateUrl.replace(/\\/+$/,'').replace(/[^\\/]+$/,function(part,index,string){\r\n\t\t\t\treturn (/\\./).test(part) ? part : part+'/';\r\n\t\t\t});\r\n\r\n\t\t\t// Return\r\n\t\t\treturn pageUrl;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getBasePageUrl()\r\n\t\t * Fetches the Url of the directory of the current page\r\n\t\t * @return {String} basePageUrl\r\n\t\t */\r\n\t\tHistory.getBasePageUrl = function(){\r\n\t\t\t// Create\r\n\t\t\tvar basePageUrl = (History.getLocationHref()).replace(/[#\\?].*/,'').replace(/[^\\/]+$/,function(part,index,string){\r\n\t\t\t\treturn (/[^\\/]$/).test(part) ? '' : part;\r\n\t\t\t}).replace(/\\/+$/,'')+'/';\r\n\r\n\t\t\t// Return\r\n\t\t\treturn basePageUrl;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getFullUrl(url)\r\n\t\t * Ensures that we have an absolute URL and not a relative URL\r\n\t\t * @param {string} url\r\n\t\t * @param {Boolean} allowBaseHref\r\n\t\t * @return {string} fullUrl\r\n\t\t */\r\n\t\tHistory.getFullUrl = function(url,allowBaseHref){\r\n\t\t\t// Prepare\r\n\t\t\tvar fullUrl = url, firstChar = url.substring(0,1);\r\n\t\t\tallowBaseHref = (typeof allowBaseHref === 'undefined') ? true : allowBaseHref;\r\n\r\n\t\t\t// Check\r\n\t\t\tif ( /[a-z]+\\:\\/\\//.test(url) ) {\r\n\t\t\t\t// Full URL\r\n\t\t\t}\r\n\t\t\telse if ( firstChar === '/' ) {\r\n\t\t\t\t// Root URL\r\n\t\t\t\tfullUrl = History.getRootUrl()+url.replace(/^\\/+/,'');\r\n\t\t\t}\r\n\t\t\telse if ( firstChar === '#' ) {\r\n\t\t\t\t// Anchor URL\r\n\t\t\t\tfullUrl = History.getPageUrl().replace(/#.*/,'')+url;\r\n\t\t\t}\r\n\t\t\telse if ( firstChar === '?' ) {\r\n\t\t\t\t// Query URL\r\n\t\t\t\tfullUrl = History.getPageUrl().replace(/[\\?#].*/,'')+url;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Relative URL\r\n\t\t\t\tif ( allowBaseHref ) {\r\n\t\t\t\t\tfullUrl = History.getBaseUrl()+url.replace(/^(\\.\\/)+/,'');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfullUrl = History.getBasePageUrl()+url.replace(/^(\\.\\/)+/,'');\r\n\t\t\t\t}\r\n\t\t\t\t// We have an if condition above as we do not want hashes\r\n\t\t\t\t// which are relative to the baseHref in our URLs\r\n\t\t\t\t// as if the baseHref changes, then all our bookmarks\r\n\t\t\t\t// would now point to different locations\r\n\t\t\t\t// whereas the basePageUrl will always stay the same\r\n\t\t\t}\r\n\r\n\t\t\t// Return\r\n\t\t\treturn fullUrl.replace(/\\#$/,'');\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getShortUrl(url)\r\n\t\t * Ensures that we have a relative URL and not a absolute URL\r\n\t\t * @param {string} url\r\n\t\t * @return {string} url\r\n\t\t */\r\n\t\tHistory.getShortUrl = function(url){\r\n\t\t\t// Prepare\r\n\t\t\tvar shortUrl = url, baseUrl = History.getBaseUrl(), rootUrl = History.getRootUrl();\r\n\r\n\t\t\t// Trim baseUrl\r\n\t\t\tif ( History.emulated.pushState ) {\r\n\t\t\t\t// We are in a if statement as when pushState is not emulated\r\n\t\t\t\t// The actual url these short urls are relative to can change\r\n\t\t\t\t// So within the same session, we the url may end up somewhere different\r\n\t\t\t\tshortUrl = shortUrl.replace(baseUrl,'');\r\n\t\t\t}\r\n\r\n\t\t\t// Trim rootUrl\r\n\t\t\tshortUrl = shortUrl.replace(rootUrl,'/');\r\n\r\n\t\t\t// Ensure we can still detect it as a state\r\n\t\t\tif ( History.isTraditionalAnchor(shortUrl) ) {\r\n\t\t\t\tshortUrl = './'+shortUrl;\r\n\t\t\t}\r\n\r\n\t\t\t// Clean It\r\n\t\t\tshortUrl = shortUrl.replace(/^(\\.\\/)+/g,'./').replace(/\\#$/,'');\r\n\r\n\t\t\t// Return\r\n\t\t\treturn shortUrl;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getLocationHref(document)\r\n\t\t * Returns a normalized version of document.location.href\r\n\t\t * accounting for browser inconsistencies, etc.\r\n\t\t *\r\n\t\t * This URL will be URI-encoded and will include the hash\r\n\t\t *\r\n\t\t * @param {object} document\r\n\t\t * @return {string} url\r\n\t\t */\r\n\t\tHistory.getLocationHref = function(doc) {\r\n\t\t\tdoc = doc || document;\r\n\r\n\t\t\t// most of the time, this will be true\r\n\t\t\tif (doc.URL === doc.location.href)\r\n\t\t\t\treturn doc.location.href;\r\n\r\n\t\t\t// some versions of webkit URI-decode document.location.href\r\n\t\t\t// but they leave document.URL in an encoded state\r\n\t\t\tif (doc.location.href === decodeURIComponent(doc.URL))\r\n\t\t\t\treturn doc.URL;\r\n\r\n\t\t\t// FF 3.6 only updates document.URL when a page is reloaded\r\n\t\t\t// document.location.href is updated correctly\r\n\t\t\tif (doc.location.hash && decodeURIComponent(doc.location.href.replace(/^[^#]+/, \"\")) === doc.location.hash)\r\n\t\t\t\treturn doc.location.href;\r\n\r\n\t\t\tif (doc.URL.indexOf('#') == -1 && doc.location.href.indexOf('#') != -1)\r\n\t\t\t\treturn doc.location.href;\r\n\t\t\t\r\n\t\t\treturn doc.URL || doc.location.href;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// State Storage\r\n\r\n\t\t/**\r\n\t\t * History.store\r\n\t\t * The store for all session specific data\r\n\t\t */\r\n\t\tHistory.store = {};\r\n\r\n\t\t/**\r\n\t\t * History.idToState\r\n\t\t * 1-1: State ID to State Object\r\n\t\t */\r\n\t\tHistory.idToState = History.idToState||{};\r\n\r\n\t\t/**\r\n\t\t * History.stateToId\r\n\t\t * 1-1: State String to State ID\r\n\t\t */\r\n\t\tHistory.stateToId = History.stateToId||{};\r\n\r\n\t\t/**\r\n\t\t * History.urlToId\r\n\t\t * 1-1: State URL to State ID\r\n\t\t */\r\n\t\tHistory.urlToId = History.urlToId||{};\r\n\r\n\t\t/**\r\n\t\t * History.storedStates\r\n\t\t * Store the states in an array\r\n\t\t */\r\n\t\tHistory.storedStates = History.storedStates||[];\r\n\r\n\t\t/**\r\n\t\t * History.savedStates\r\n\t\t * Saved the states in an array\r\n\t\t */\r\n\t\tHistory.savedStates = History.savedStates||[];\r\n\r\n\t\t/**\r\n\t\t * History.noramlizeStore()\r\n\t\t * Noramlize the store by adding necessary values\r\n\t\t */\r\n\t\tHistory.normalizeStore = function(){\r\n\t\t\tHistory.store.idToState = History.store.idToState||{};\r\n\t\t\tHistory.store.urlToId = History.store.urlToId||{};\r\n\t\t\tHistory.store.stateToId = History.store.stateToId||{};\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getState()\r\n\t\t * Get an object containing the data, title and url of the current state\r\n\t\t * @param {Boolean} friendly\r\n\t\t * @param {Boolean} create\r\n\t\t * @return {Object} State\r\n\t\t */\r\n\t\tHistory.getState = function(friendly,create){\r\n\t\t\t// Prepare\r\n\t\t\tif ( typeof friendly === 'undefined' ) { friendly = true; }\r\n\t\t\tif ( typeof create === 'undefined' ) { create = true; }\r\n\r\n\t\t\t// Fetch\r\n\t\t\tvar State = History.getLastSavedState();\r\n\r\n\t\t\t// Create\r\n\t\t\tif ( !State && create ) {\r\n\t\t\t\tState = History.createStateObject();\r\n\t\t\t}\r\n\r\n\t\t\t// Adjust\r\n\t\t\tif ( friendly ) {\r\n\t\t\t\tState = History.cloneObject(State);\r\n\t\t\t\tState.url = State.cleanUrl||State.url;\r\n\t\t\t}\r\n\r\n\t\t\t// Return\r\n\t\t\treturn State;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getIdByState(State)\r\n\t\t * Gets a ID for a State\r\n\t\t * @param {State} newState\r\n\t\t * @return {String} id\r\n\t\t */\r\n\t\tHistory.getIdByState = function(newState){\r\n\r\n\t\t\t// Fetch ID\r\n\t\t\tvar id = History.extractId(newState.url),\r\n\t\t\t\tstr;\r\n\r\n\t\t\tif ( !id ) {\r\n\t\t\t\t// Find ID via State String\r\n\t\t\t\tstr = History.getStateString(newState);\r\n\t\t\t\tif ( typeof History.stateToId[str] !== 'undefined' ) {\r\n\t\t\t\t\tid = History.stateToId[str];\r\n\t\t\t\t}\r\n\t\t\t\telse if ( typeof History.store.stateToId[str] !== 'undefined' ) {\r\n\t\t\t\t\tid = History.store.stateToId[str];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Generate a new ID\r\n\t\t\t\t\twhile ( true ) {\r\n\t\t\t\t\t\tid = (new Date()).getTime() + String(Math.random()).replace(/\\D/g,'');\r\n\t\t\t\t\t\tif ( typeof History.idToState[id] === 'undefined' && typeof History.store.idToState[id] === 'undefined' ) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Apply the new State to the ID\r\n\t\t\t\t\tHistory.stateToId[str] = id;\r\n\t\t\t\t\tHistory.idToState[id] = newState;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Return ID\r\n\t\t\treturn id;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.normalizeState(State)\r\n\t\t * Expands a State Object\r\n\t\t * @param {object} State\r\n\t\t * @return {object}\r\n\t\t */\r\n\t\tHistory.normalizeState = function(oldState){\r\n\t\t\t// Variables\r\n\t\t\tvar newState, dataNotEmpty;\r\n\r\n\t\t\t// Prepare\r\n\t\t\tif ( !oldState || (typeof oldState !== 'object') ) {\r\n\t\t\t\toldState = {};\r\n\t\t\t}\r\n\r\n\t\t\t// Check\r\n\t\t\tif ( typeof oldState.normalized !== 'undefined' ) {\r\n\t\t\t\treturn oldState;\r\n\t\t\t}\r\n\r\n\t\t\t// Adjust\r\n\t\t\tif ( !oldState.data || (typeof oldState.data !== 'object') ) {\r\n\t\t\t\toldState.data = {};\r\n\t\t\t}\r\n\r\n\t\t\t// ----------------------------------------------------------------\r\n\r\n\t\t\t// Create\r\n\t\t\tnewState = {};\r\n\t\t\tnewState.normalized = true;\r\n\t\t\tnewState.title = oldState.title||'';\r\n\t\t\tnewState.url = History.getFullUrl(oldState.url?oldState.url:(History.getLocationHref()));\r\n\t\t\tnewState.hash = History.getShortUrl(newState.url);\r\n\t\t\tnewState.data = History.cloneObject(oldState.data);\r\n\r\n\t\t\t// Fetch ID\r\n\t\t\tnewState.id = History.getIdByState(newState);\r\n\r\n\t\t\t// ----------------------------------------------------------------\r\n\r\n\t\t\t// Clean the URL\r\n\t\t\tnewState.cleanUrl = newState.url.replace(/\\??\\&_suid.*/,'');\r\n\t\t\tnewState.url = newState.cleanUrl;\r\n\r\n\t\t\t// Check to see if we have more than just a url\r\n\t\t\tdataNotEmpty = !History.isEmptyObject(newState.data);\r\n\r\n\t\t\t// Apply\r\n\t\t\tif ( (newState.title || dataNotEmpty) && History.options.disableSuid !== true ) {\r\n\t\t\t\t// Add ID to Hash\r\n\t\t\t\tnewState.hash = History.getShortUrl(newState.url).replace(/\\??\\&_suid.*/,'');\r\n\t\t\t\tif ( !/\\?/.test(newState.hash) ) {\r\n\t\t\t\t\tnewState.hash += '?';\r\n\t\t\t\t}\r\n\t\t\t\tnewState.hash += '&_suid='+newState.id;\r\n\t\t\t}\r\n\r\n\t\t\t// Create the Hashed URL\r\n\t\t\tnewState.hashedUrl = History.getFullUrl(newState.hash);\r\n\r\n\t\t\t// ----------------------------------------------------------------\r\n\r\n\t\t\t// Update the URL if we have a duplicate\r\n\t\t\tif ( (History.emulated.pushState || History.bugs.safariPoll) && History.hasUrlDuplicate(newState) ) {\r\n\t\t\t\tnewState.url = newState.hashedUrl;\r\n\t\t\t}\r\n\r\n\t\t\t// ----------------------------------------------------------------\r\n\r\n\t\t\t// Return\r\n\t\t\treturn newState;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.createStateObject(data,title,url)\r\n\t\t * Creates a object based on the data, title and url state params\r\n\t\t * @param {object} data\r\n\t\t * @param {string} title\r\n\t\t * @param {string} url\r\n\t\t * @return {object}\r\n\t\t */\r\n\t\tHistory.createStateObject = function(data,title,url){\r\n\t\t\t// Hashify\r\n\t\t\tvar State = {\r\n\t\t\t\t'data': data,\r\n\t\t\t\t'title': title,\r\n\t\t\t\t'url': url\r\n\t\t\t};\r\n\r\n\t\t\t// Expand the State\r\n\t\t\tState = History.normalizeState(State);\r\n\r\n\t\t\t// Return object\r\n\t\t\treturn State;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getStateById(id)\r\n\t\t * Get a state by it's UID\r\n\t\t * @param {String} id\r\n\t\t */\r\n\t\tHistory.getStateById = function(id){\r\n\t\t\t// Prepare\r\n\t\t\tid = String(id);\r\n\r\n\t\t\t// Retrieve\r\n\t\t\tvar State = History.idToState[id] || History.store.idToState[id] || undefined;\r\n\r\n\t\t\t// Return State\r\n\t\t\treturn State;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get a State's String\r\n\t\t * @param {State} passedState\r\n\t\t */\r\n\t\tHistory.getStateString = function(passedState){\r\n\t\t\t// Prepare\r\n\t\t\tvar State, cleanedState, str;\r\n\r\n\t\t\t// Fetch\r\n\t\t\tState = History.normalizeState(passedState);\r\n\r\n\t\t\t// Clean\r\n\t\t\tcleanedState = {\r\n\t\t\t\tdata: State.data,\r\n\t\t\t\ttitle: passedState.title,\r\n\t\t\t\turl: passedState.url\r\n\t\t\t};\r\n\r\n\t\t\t// Fetch\r\n\t\t\tstr = JSON.stringify(cleanedState);\r\n\r\n\t\t\t// Return\r\n\t\t\treturn str;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Get a State's ID\r\n\t\t * @param {State} passedState\r\n\t\t * @return {String} id\r\n\t\t */\r\n\t\tHistory.getStateId = function(passedState){\r\n\t\t\t// Prepare\r\n\t\t\tvar State, id;\r\n\r\n\t\t\t// Fetch\r\n\t\t\tState = History.normalizeState(passedState);\r\n\r\n\t\t\t// Fetch\r\n\t\t\tid = State.id;\r\n\r\n\t\t\t// Return\r\n\t\t\treturn id;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getHashByState(State)\r\n\t\t * Creates a Hash for the State Object\r\n\t\t * @param {State} passedState\r\n\t\t * @return {String} hash\r\n\t\t */\r\n\t\tHistory.getHashByState = function(passedState){\r\n\t\t\t// Prepare\r\n\t\t\tvar State, hash;\r\n\r\n\t\t\t// Fetch\r\n\t\t\tState = History.normalizeState(passedState);\r\n\r\n\t\t\t// Hash\r\n\t\t\thash = State.hash;\r\n\r\n\t\t\t// Return\r\n\t\t\treturn hash;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.extractId(url_or_hash)\r\n\t\t * Get a State ID by it's URL or Hash\r\n\t\t * @param {string} url_or_hash\r\n\t\t * @return {string} id\r\n\t\t */\r\n\t\tHistory.extractId = function ( url_or_hash ) {\r\n\t\t\t// Prepare\r\n\t\t\tvar id,parts,url, tmp;\r\n\r\n\t\t\t// Extract\r\n\t\t\t\r\n\t\t\t// If the URL has a #, use the id from before the #\r\n\t\t\tif (url_or_hash.indexOf('#') != -1)\r\n\t\t\t{\r\n\t\t\t\ttmp = url_or_hash.split(\"#\")[0];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\ttmp = url_or_hash;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tparts = /(.*)\\&_suid=([0-9]+)$/.exec(tmp);\r\n\t\t\turl = parts ? (parts[1]||url_or_hash) : url_or_hash;\r\n\t\t\tid = parts ? String(parts[2]||'') : '';\r\n\r\n\t\t\t// Return\r\n\t\t\treturn id||false;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.isTraditionalAnchor\r\n\t\t * Checks to see if the url is a traditional anchor or not\r\n\t\t * @param {String} url_or_hash\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tHistory.isTraditionalAnchor = function(url_or_hash){\r\n\t\t\t// Check\r\n\t\t\tvar isTraditional = !(/[\\/\\?\\.]/.test(url_or_hash));\r\n\r\n\t\t\t// Return\r\n\t\t\treturn isTraditional;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.extractState\r\n\t\t * Get a State by it's URL or Hash\r\n\t\t * @param {String} url_or_hash\r\n\t\t * @return {State|null}\r\n\t\t */\r\n\t\tHistory.extractState = function(url_or_hash,create){\r\n\t\t\t// Prepare\r\n\t\t\tvar State = null, id, url;\r\n\t\t\tcreate = create||false;\r\n\r\n\t\t\t// Fetch SUID\r\n\t\t\tid = History.extractId(url_or_hash);\r\n\t\t\tif ( id ) {\r\n\t\t\t\tState = History.getStateById(id);\r\n\t\t\t}\r\n\r\n\t\t\t// Fetch SUID returned no State\r\n\t\t\tif ( !State ) {\r\n\t\t\t\t// Fetch URL\r\n\t\t\t\turl = History.getFullUrl(url_or_hash);\r\n\r\n\t\t\t\t// Check URL\r\n\t\t\t\tid = History.getIdByUrl(url)||false;\r\n\t\t\t\tif ( id ) {\r\n\t\t\t\t\tState = History.getStateById(id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create State\r\n\t\t\t\tif ( !State && create && !History.isTraditionalAnchor(url_or_hash) ) {\r\n\t\t\t\t\tState = History.createStateObject(null,null,url);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Return\r\n\t\t\treturn State;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getIdByUrl()\r\n\t\t * Get a State ID by a State URL\r\n\t\t */\r\n\t\tHistory.getIdByUrl = function(url){\r\n\t\t\t// Fetch\r\n\t\t\tvar id = History.urlToId[url] || History.store.urlToId[url] || undefined;\r\n\r\n\t\t\t// Return\r\n\t\t\treturn id;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getLastSavedState()\r\n\t\t * Get an object containing the data, title and url of the current state\r\n\t\t * @return {Object} State\r\n\t\t */\r\n\t\tHistory.getLastSavedState = function(){\r\n\t\t\treturn History.savedStates[History.savedStates.length-1]||undefined;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getLastStoredState()\r\n\t\t * Get an object containing the data, title and url of the current state\r\n\t\t * @return {Object} State\r\n\t\t */\r\n\t\tHistory.getLastStoredState = function(){\r\n\t\t\treturn History.storedStates[History.storedStates.length-1]||undefined;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.hasUrlDuplicate\r\n\t\t * Checks if a Url will have a url conflict\r\n\t\t * @param {Object} newState\r\n\t\t * @return {Boolean} hasDuplicate\r\n\t\t */\r\n\t\tHistory.hasUrlDuplicate = function(newState) {\r\n\t\t\t// Prepare\r\n\t\t\tvar hasDuplicate = false,\r\n\t\t\t\toldState;\r\n\r\n\t\t\t// Fetch\r\n\t\t\toldState = History.extractState(newState.url);\r\n\r\n\t\t\t// Check\r\n\t\t\thasDuplicate = oldState && oldState.id !== newState.id;\r\n\r\n\t\t\t// Return\r\n\t\t\treturn hasDuplicate;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.storeState\r\n\t\t * Store a State\r\n\t\t * @param {Object} newState\r\n\t\t * @return {Object} newState\r\n\t\t */\r\n\t\tHistory.storeState = function(newState){\r\n\t\t\t// Store the State\r\n\t\t\tHistory.urlToId[newState.url] = newState.id;\r\n\r\n\t\t\t// Push the State\r\n\t\t\tHistory.storedStates.push(History.cloneObject(newState));\r\n\r\n\t\t\t// Return newState\r\n\t\t\treturn newState;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.isLastSavedState(newState)\r\n\t\t * Tests to see if the state is the last state\r\n\t\t * @param {Object} newState\r\n\t\t * @return {boolean} isLast\r\n\t\t */\r\n\t\tHistory.isLastSavedState = function(newState){\r\n\t\t\t// Prepare\r\n\t\t\tvar isLast = false,\r\n\t\t\t\tnewId, oldState, oldId;\r\n\r\n\t\t\t// Check\r\n\t\t\tif ( History.savedStates.length ) {\r\n\t\t\t\tnewId = newState.id;\r\n\t\t\t\toldState = History.getLastSavedState();\r\n\t\t\t\toldId = oldState.id;\r\n\r\n\t\t\t\t// Check\r\n\t\t\t\tisLast = (newId === oldId);\r\n\t\t\t}\r\n\r\n\t\t\t// Return\r\n\t\t\treturn isLast;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.saveState\r\n\t\t * Push a State\r\n\t\t * @param {Object} newState\r\n\t\t * @return {boolean} changed\r\n\t\t */\r\n\t\tHistory.saveState = function(newState){\r\n\t\t\t// Check Hash\r\n\t\t\tif ( History.isLastSavedState(newState) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Push the State\r\n\t\t\tHistory.savedStates.push(History.cloneObject(newState));\r\n\r\n\t\t\t// Return true\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getStateByIndex()\r\n\t\t * Gets a state by the index\r\n\t\t * @param {integer} index\r\n\t\t * @return {Object}\r\n\t\t */\r\n\t\tHistory.getStateByIndex = function(index){\r\n\t\t\t// Prepare\r\n\t\t\tvar State = null;\r\n\r\n\t\t\t// Handle\r\n\t\t\tif ( typeof index === 'undefined' ) {\r\n\t\t\t\t// Get the last inserted\r\n\t\t\t\tState = History.savedStates[History.savedStates.length-1];\r\n\t\t\t}\r\n\t\t\telse if ( index < 0 ) {\r\n\t\t\t\t// Get from the end\r\n\t\t\t\tState = History.savedStates[History.savedStates.length+index];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// Get from the beginning\r\n\t\t\t\tState = History.savedStates[index];\r\n\t\t\t}\r\n\r\n\t\t\t// Return State\r\n\t\t\treturn State;\r\n\t\t};\r\n\t\t\r\n\t\t/**\r\n\t\t * History.getCurrentIndex()\r\n\t\t * Gets the current index\r\n\t\t * @return (integer)\r\n\t\t*/\r\n\t\tHistory.getCurrentIndex = function(){\r\n\t\t\t// Prepare\r\n\t\t\tvar index = null;\r\n\t\t\t\r\n\t\t\t// No states saved\r\n\t\t\tif(History.savedStates.length < 1) {\r\n\t\t\t\tindex = 0;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tindex = History.savedStates.length-1;\r\n\t\t\t}\r\n\t\t\treturn index;\r\n\t\t};\r\n\r\n\t\t// ====================================================================\r\n\t\t// Hash Helpers\r\n\r\n\t\t/**\r\n\t\t * History.getHash()\r\n\t\t * @param {Location=} location\r\n\t\t * Gets the current document hash\r\n\t\t * Note: unlike location.hash, this is guaranteed to return the escaped hash in all browsers\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tHistory.getHash = function(doc){\r\n\t\t\tvar url = History.getLocationHref(doc),\r\n\t\t\t\thash;\r\n\t\t\thash = History.getHashByUrl(url);\r\n\t\t\treturn hash;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.unescapeHash()\r\n\t\t * normalize and Unescape a Hash\r\n\t\t * @param {String} hash\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tHistory.unescapeHash = function(hash){\r\n\t\t\t// Prepare\r\n\t\t\tvar result = History.normalizeHash(hash);\r\n\r\n\t\t\t// Unescape hash\r\n\t\t\tresult = decodeURIComponent(result);\r\n\r\n\t\t\t// Return result\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.normalizeHash()\r\n\t\t * normalize a hash across browsers\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tHistory.normalizeHash = function(hash){\r\n\t\t\t// Prepare\r\n\t\t\tvar result = hash.replace(/[^#]*#/,'').replace(/#.*/, '');\r\n\r\n\t\t\t// Return result\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.setHash(hash)\r\n\t\t * Sets the document hash\r\n\t\t * @param {string} hash\r\n\t\t * @return {History}\r\n\t\t */\r\n\t\tHistory.setHash = function(hash,queue){\r\n\t\t\t// Prepare\r\n\t\t\tvar State, pageUrl;\r\n\r\n\t\t\t// Handle Queueing\r\n\t\t\tif ( queue !== false && History.busy() ) {\r\n\t\t\t\t// Wait + Push to Queue\r\n\t\t\t\t//History.debug('History.setHash: we must wait', arguments);\r\n\t\t\t\tHistory.pushQueue({\r\n\t\t\t\t\tscope: History,\r\n\t\t\t\t\tcallback: History.setHash,\r\n\t\t\t\t\targs: arguments,\r\n\t\t\t\t\tqueue: queue\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Log\r\n\t\t\t//History.debug('History.setHash: called',hash);\r\n\r\n\t\t\t// Make Busy + Continue\r\n\t\t\tHistory.busy(true);\r\n\r\n\t\t\t// Check if hash is a state\r\n\t\t\tState = History.extractState(hash,true);\r\n\t\t\tif ( State && !History.emulated.pushState ) {\r\n\t\t\t\t// Hash is a state so skip the setHash\r\n\t\t\t\t//History.debug('History.setHash: Hash is a state so skipping the hash set with a direct pushState call',arguments);\r\n\r\n\t\t\t\t// PushState\r\n\t\t\t\tHistory.pushState(State.data,State.title,State.url,false);\r\n\t\t\t}\r\n\t\t\telse if ( History.getHash() !== hash ) {\r\n\t\t\t\t// Hash is a proper hash, so apply it\r\n\r\n\t\t\t\t// Handle browser bugs\r\n\t\t\t\tif ( History.bugs.setHash ) {\r\n\t\t\t\t\t// Fix Safari Bug https://bugs.webkit.org/show_bug.cgi?id=56249\r\n\r\n\t\t\t\t\t// Fetch the base page\r\n\t\t\t\t\tpageUrl = History.getPageUrl();\r\n\r\n\t\t\t\t\t// Safari hash apply\r\n\t\t\t\t\tHistory.pushState(null,null,pageUrl+'#'+hash,false);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Normal hash apply\r\n\t\t\t\t\tdocument.location.hash = hash;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.escape()\r\n\t\t * normalize and Escape a Hash\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\tHistory.escapeHash = function(hash){\r\n\t\t\t// Prepare\r\n\t\t\tvar result = History.normalizeHash(hash);\r\n\r\n\t\t\t// Escape hash\r\n\t\t\tresult = window.encodeURIComponent(result);\r\n\r\n\t\t\t// IE6 Escape Bug\r\n\t\t\tif ( !History.bugs.hashEscape ) {\r\n\t\t\t\t// Restore common parts\r\n\t\t\t\tresult = result\r\n\t\t\t\t\t.replace(/\\%21/g,'!')\r\n\t\t\t\t\t.replace(/\\%26/g,'&')\r\n\t\t\t\t\t.replace(/\\%3D/g,'=')\r\n\t\t\t\t\t.replace(/\\%3F/g,'?');\r\n\t\t\t}\r\n\r\n\t\t\t// Return result\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.getHashByUrl(url)\r\n\t\t * Extracts the Hash from a URL\r\n\t\t * @param {string} url\r\n\t\t * @return {string} url\r\n\t\t */\r\n\t\tHistory.getHashByUrl = function(url){\r\n\t\t\t// Extract the hash\r\n\t\t\tvar hash = String(url)\r\n\t\t\t\t.replace(/([^#]*)#?([^#]*)#?(.*)/, '$2')\r\n\t\t\t\t;\r\n\r\n\t\t\t// Unescape hash\r\n\t\t\thash = History.unescapeHash(hash);\r\n\r\n\t\t\t// Return hash\r\n\t\t\treturn hash;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.setTitle(title)\r\n\t\t * Applies the title to the document\r\n\t\t * @param {State} newState\r\n\t\t * @return {Boolean}\r\n\t\t */\r\n\t\tHistory.setTitle = function(newState){\r\n\t\t\t// Prepare\r\n\t\t\tvar title = newState.title,\r\n\t\t\t\tfirstState;\r\n\r\n\t\t\t// Initial\r\n\t\t\tif ( !title ) {\r\n\t\t\t\tfirstState = History.getStateByIndex(0);\r\n\t\t\t\tif ( firstState && firstState.url === newState.url ) {\r\n\t\t\t\t\ttitle = firstState.title||History.options.initialTitle;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Apply\r\n\t\t\ttry {\r\n\t\t\t\tdocument.getElementsByTagName('title')[0].innerHTML = title.replace('<','&lt;').replace('>','&gt;').replace(' & ',' &amp; ');\r\n\t\t\t}\r\n\t\t\tcatch ( Exception ) { }\r\n\t\t\tdocument.title = title;\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Queueing\r\n\r\n\t\t/**\r\n\t\t * History.queues\r\n\t\t * The list of queues to use\r\n\t\t * First In, First Out\r\n\t\t */\r\n\t\tHistory.queues = [];\r\n\r\n\t\t/**\r\n\t\t * History.busy(value)\r\n\t\t * @param {boolean} value [optional]\r\n\t\t * @return {boolean} busy\r\n\t\t */\r\n\t\tHistory.busy = function(value){\r\n\t\t\t// Apply\r\n\t\t\tif ( typeof value !== 'undefined' ) {\r\n\t\t\t\t//History.debug('History.busy: changing ['+(History.busy.flag||false)+'] to ['+(value||false)+']', History.queues.length);\r\n\t\t\t\tHistory.busy.flag = value;\r\n\t\t\t}\r\n\t\t\t// Default\r\n\t\t\telse if ( typeof History.busy.flag === 'undefined' ) {\r\n\t\t\t\tHistory.busy.flag = false;\r\n\t\t\t}\r\n\r\n\t\t\t// Queue\r\n\t\t\tif ( !History.busy.flag ) {\r\n\t\t\t\t// Execute the next item in the queue\r\n\t\t\t\tclearTimeout(History.busy.timeout);\r\n\t\t\t\tvar fireNext = function(){\r\n\t\t\t\t\tvar i, queue, item;\r\n\t\t\t\t\tif ( History.busy.flag ) return;\r\n\t\t\t\t\tfor ( i=History.queues.length-1; i >= 0; --i ) {\r\n\t\t\t\t\t\tqueue = History.queues[i];\r\n\t\t\t\t\t\tif ( queue.length === 0 ) continue;\r\n\t\t\t\t\t\titem = queue.shift();\r\n\t\t\t\t\t\tHistory.fireQueueItem(item);\r\n\t\t\t\t\t\tHistory.busy.timeout = setTimeout(fireNext,History.options.busyDelay);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tHistory.busy.timeout = setTimeout(fireNext,History.options.busyDelay);\r\n\t\t\t}\r\n\r\n\t\t\t// Return\r\n\t\t\treturn History.busy.flag;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.busy.flag\r\n\t\t */\r\n\t\tHistory.busy.flag = false;\r\n\r\n\t\t/**\r\n\t\t * History.fireQueueItem(item)\r\n\t\t * Fire a Queue Item\r\n\t\t * @param {Object} item\r\n\t\t * @return {Mixed} result\r\n\t\t */\r\n\t\tHistory.fireQueueItem = function(item){\r\n\t\t\treturn item.callback.apply(item.scope||History,item.args||[]);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.pushQueue(callback,args)\r\n\t\t * Add an item to the queue\r\n\t\t * @param {Object} item [scope,callback,args,queue]\r\n\t\t */\r\n\t\tHistory.pushQueue = function(item){\r\n\t\t\t// Prepare the queue\r\n\t\t\tHistory.queues[item.queue||0] = History.queues[item.queue||0]||[];\r\n\r\n\t\t\t// Add to the queue\r\n\t\t\tHistory.queues[item.queue||0].push(item);\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.queue (item,queue), (func,queue), (func), (item)\r\n\t\t * Either firs the item now if not busy, or adds it to the queue\r\n\t\t */\r\n\t\tHistory.queue = function(item,queue){\r\n\t\t\t// Prepare\r\n\t\t\tif ( typeof item === 'function' ) {\r\n\t\t\t\titem = {\r\n\t\t\t\t\tcallback: item\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif ( typeof queue !== 'undefined' ) {\r\n\t\t\t\titem.queue = queue;\r\n\t\t\t}\r\n\r\n\t\t\t// Handle\r\n\t\t\tif ( History.busy() ) {\r\n\t\t\t\tHistory.pushQueue(item);\r\n\t\t\t} else {\r\n\t\t\t\tHistory.fireQueueItem(item);\r\n\t\t\t}\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.clearQueue()\r\n\t\t * Clears the Queue\r\n\t\t */\r\n\t\tHistory.clearQueue = function(){\r\n\t\t\tHistory.busy.flag = false;\r\n\t\t\tHistory.queues = [];\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// IE Bug Fix\r\n\r\n\t\t/**\r\n\t\t * History.stateChanged\r\n\t\t * States whether or not the state has changed since the last double check was initialised\r\n\t\t */\r\n\t\tHistory.stateChanged = false;\r\n\r\n\t\t/**\r\n\t\t * History.doubleChecker\r\n\t\t * Contains the timeout used for the double checks\r\n\t\t */\r\n\t\tHistory.doubleChecker = false;\r\n\r\n\t\t/**\r\n\t\t * History.doubleCheckComplete()\r\n\t\t * Complete a double check\r\n\t\t * @return {History}\r\n\t\t */\r\n\t\tHistory.doubleCheckComplete = function(){\r\n\t\t\t// Update\r\n\t\t\tHistory.stateChanged = true;\r\n\r\n\t\t\t// Clear\r\n\t\t\tHistory.doubleCheckClear();\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.doubleCheckClear()\r\n\t\t * Clear a double check\r\n\t\t * @return {History}\r\n\t\t */\r\n\t\tHistory.doubleCheckClear = function(){\r\n\t\t\t// Clear\r\n\t\t\tif ( History.doubleChecker ) {\r\n\t\t\t\tclearTimeout(History.doubleChecker);\r\n\t\t\t\tHistory.doubleChecker = false;\r\n\t\t\t}\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.doubleCheck()\r\n\t\t * Create a double check\r\n\t\t * @return {History}\r\n\t\t */\r\n\t\tHistory.doubleCheck = function(tryAgain){\r\n\t\t\t// Reset\r\n\t\t\tHistory.stateChanged = false;\r\n\t\t\tHistory.doubleCheckClear();\r\n\r\n\t\t\t// Fix IE6,IE7 bug where calling history.back or history.forward does not actually change the hash (whereas doing it manually does)\r\n\t\t\t// Fix Safari 5 bug where sometimes the state does not change: https://bugs.webkit.org/show_bug.cgi?id=42940\r\n\t\t\tif ( History.bugs.ieDoubleCheck ) {\r\n\t\t\t\t// Apply Check\r\n\t\t\t\tHistory.doubleChecker = setTimeout(\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\tHistory.doubleCheckClear();\r\n\t\t\t\t\t\tif ( !History.stateChanged ) {\r\n\t\t\t\t\t\t\t//History.debug('History.doubleCheck: State has not yet changed, trying again', arguments);\r\n\t\t\t\t\t\t\t// Re-Attempt\r\n\t\t\t\t\t\t\ttryAgain();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tHistory.options.doubleCheckInterval\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Safari Bug Fix\r\n\r\n\t\t/**\r\n\t\t * History.safariStatePoll()\r\n\t\t * Poll the current state\r\n\t\t * @return {History}\r\n\t\t */\r\n\t\tHistory.safariStatePoll = function(){\r\n\t\t\t// Poll the URL\r\n\r\n\t\t\t// Get the Last State which has the new URL\r\n\t\t\tvar\r\n\t\t\t\turlState = History.extractState(History.getLocationHref()),\r\n\t\t\t\tnewState;\r\n\r\n\t\t\t// Check for a difference\r\n\t\t\tif ( !History.isLastSavedState(urlState) ) {\r\n\t\t\t\tnewState = urlState;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Check if we have a state with that url\r\n\t\t\t// If not create it\r\n\t\t\tif ( !newState ) {\r\n\t\t\t\t//History.debug('History.safariStatePoll: new');\r\n\t\t\t\tnewState = History.createStateObject();\r\n\t\t\t}\r\n\r\n\t\t\t// Apply the New State\r\n\t\t\t//History.debug('History.safariStatePoll: trigger');\r\n\t\t\tHistory.Adapter.trigger(window,'popstate');\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// State Aliases\r\n\r\n\t\t/**\r\n\t\t * History.back(queue)\r\n\t\t * Send the browser history back one item\r\n\t\t * @param {Integer} queue [optional]\r\n\t\t */\r\n\t\tHistory.back = function(queue){\r\n\t\t\t//History.debug('History.back: called', arguments);\r\n\r\n\t\t\t// Handle Queueing\r\n\t\t\tif ( queue !== false && History.busy() ) {\r\n\t\t\t\t// Wait + Push to Queue\r\n\t\t\t\t//History.debug('History.back: we must wait', arguments);\r\n\t\t\t\tHistory.pushQueue({\r\n\t\t\t\t\tscope: History,\r\n\t\t\t\t\tcallback: History.back,\r\n\t\t\t\t\targs: arguments,\r\n\t\t\t\t\tqueue: queue\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Make Busy + Continue\r\n\t\t\tHistory.busy(true);\r\n\r\n\t\t\t// Fix certain browser bugs that prevent the state from changing\r\n\t\t\tHistory.doubleCheck(function(){\r\n\t\t\t\tHistory.back(false);\r\n\t\t\t});\r\n\r\n\t\t\t// Go back\r\n\t\t\thistory.go(-1);\r\n\r\n\t\t\t// End back closure\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.forward(queue)\r\n\t\t * Send the browser history forward one item\r\n\t\t * @param {Integer} queue [optional]\r\n\t\t */\r\n\t\tHistory.forward = function(queue){\r\n\t\t\t//History.debug('History.forward: called', arguments);\r\n\r\n\t\t\t// Handle Queueing\r\n\t\t\tif ( queue !== false && History.busy() ) {\r\n\t\t\t\t// Wait + Push to Queue\r\n\t\t\t\t//History.debug('History.forward: we must wait', arguments);\r\n\t\t\t\tHistory.pushQueue({\r\n\t\t\t\t\tscope: History,\r\n\t\t\t\t\tcallback: History.forward,\r\n\t\t\t\t\targs: arguments,\r\n\t\t\t\t\tqueue: queue\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Make Busy + Continue\r\n\t\t\tHistory.busy(true);\r\n\r\n\t\t\t// Fix certain browser bugs that prevent the state from changing\r\n\t\t\tHistory.doubleCheck(function(){\r\n\t\t\t\tHistory.forward(false);\r\n\t\t\t});\r\n\r\n\t\t\t// Go forward\r\n\t\t\thistory.go(1);\r\n\r\n\t\t\t// End forward closure\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * History.go(index,queue)\r\n\t\t * Send the browser history back or forward index times\r\n\t\t * @param {Integer} queue [optional]\r\n\t\t */\r\n\t\tHistory.go = function(index,queue){\r\n\t\t\t//History.debug('History.go: called', arguments);\r\n\r\n\t\t\t// Prepare\r\n\t\t\tvar i;\r\n\r\n\t\t\t// Handle\r\n\t\t\tif ( index > 0 ) {\r\n\t\t\t\t// Forward\r\n\t\t\t\tfor ( i=1; i<=index; ++i ) {\r\n\t\t\t\t\tHistory.forward(queue);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if ( index < 0 ) {\r\n\t\t\t\t// Backward\r\n\t\t\t\tfor ( i=-1; i>=index; --i ) {\r\n\t\t\t\t\tHistory.back(queue);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthrow new Error('History.go: History.go requires a positive or negative integer passed.');\r\n\t\t\t}\r\n\r\n\t\t\t// Chain\r\n\t\t\treturn History;\r\n\t\t};\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// HTML5 State Support\r\n\r\n\t\t// Non-Native pushState Implementation\r\n\t\tif ( History.emulated.pushState ) {\r\n\t\t\t/*\r\n\t\t\t * Provide Skeleton for HTML4 Browsers\r\n\t\t\t */\r\n\r\n\t\t\t// Prepare\r\n\t\t\tvar emptyFunction = function(){};\r\n\t\t\tHistory.pushState = History.pushState||emptyFunction;\r\n\t\t\tHistory.replaceState = History.replaceState||emptyFunction;\r\n\t\t} // History.emulated.pushState\r\n\r\n\t\t// Native pushState Implementation\r\n\t\telse {\r\n\t\t\t/*\r\n\t\t\t * Use native HTML5 History API Implementation\r\n\t\t\t */\r\n\r\n\t\t\t/**\r\n\t\t\t * History.onPopState(event,extra)\r\n\t\t\t * Refresh the Current State\r\n\t\t\t */\r\n\t\t\tHistory.onPopState = function(event,extra){\r\n\t\t\t\t// Prepare\r\n                // fix Please check: https://github.com/browserstate/history.js/pull/455\r\n\r\n\t\t\t\t// var stateId = false, newState = false, currentHash, currentState;\r\n\t\t\t    var stateId = false, newState = false, currentHash, currentState, isNavigationButtons = false;\r\n\r\n\t\t\t\t// Reset the double check\r\n\t\t\t\tHistory.doubleCheckComplete();\r\n\r\n\t\t\t\t// Check for a Hash, and handle apporiatly\r\n\t\t\t\tcurrentHash = History.getHash();\r\n\t\t\t\tif ( currentHash ) {\r\n\t\t\t\t\t// Expand Hash\r\n\t\t\t\t\tcurrentState = History.extractState(currentHash||History.getLocationHref(),true);\r\n\t\t\t\t\tif ( currentState ) {\r\n\t\t\t\t\t\t// We were able to parse it, it must be a State!\r\n\t\t\t\t\t\t// Let's forward to replaceState\r\n\t\t\t\t\t\t//History.debug('History.onPopState: state anchor', currentHash, currentState);\r\n\t\t\t\t\t\tHistory.replaceState(currentState.data, currentState.title, currentState.url, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t// Traditional Anchor\r\n\t\t\t\t\t\t//History.debug('History.onPopState: traditional anchor', currentHash);\r\n\t\t\t\t\t\tHistory.Adapter.trigger(window,'anchorchange');\r\n\t\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// We don't care for hashes\r\n\t\t\t\t\tHistory.expectedStateId = false;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Ensure\r\n\t\t\t\tstateId = History.Adapter.extractEventData('state',event,extra) || false;\r\n\r\n\t\t\t\t// Fetch State\r\n\t\t\t\tif ( stateId ) {\r\n\t\t\t\t\t// Vanilla: Back/forward button was used\r\n\t\t\t\t    newState = History.getStateById(stateId);\r\n                    // fix Please check: https://github.com/browserstate/history.js/pull/455\r\n \r\n\t\t\t\t    isNavigationButtons = true;\r\n\t\t\t\t}\r\n\t\t\t\telse if ( History.expectedStateId ) {\r\n\t\t\t\t\t// Vanilla: A new state was pushed, and popstate was called manually\r\n\t\t\t\t\tnewState = History.getStateById(History.expectedStateId);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Initial State\r\n\t\t\t\t\tnewState = History.extractState(History.getLocationHref());\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// The State did not exist in our store\r\n\t\t\t\tif ( !newState ) {\r\n\t\t\t\t\t// Regenerate the State\r\n\t\t\t\t\tnewState = History.createStateObject(null,null,History.getLocationHref());\r\n\t\t\t\t}\r\n\t\t\t    // fix Please check: https://github.com/browserstate/history.js/pull/455\r\n\r\n\t\t\t\t\r\n                // Store back / forward button boolean\r\n\t\t\t\tnewState.navigation = isNavigationButtons;\r\n\r\n\t\t\t    ///\r\n\r\n\t\t\t\t// Clean\r\n\t\t\t\tHistory.expectedStateId = false;\r\n\r\n\t\t\t\t// Check if we are the same state\r\n\t\t\t\tif ( History.isLastSavedState(newState) ) {\r\n\t\t\t\t\t// There has been no change (just the page's hash has finally propagated)\r\n\t\t\t\t\t//History.debug('History.onPopState: no change', newState, History.savedStates);\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Store the State\r\n\t\t\t\tHistory.storeState(newState);\r\n\t\t\t\tHistory.saveState(newState);\r\n\r\n\t\t\t\t// Force update of the title\r\n\t\t\t\tHistory.setTitle(newState);\r\n\r\n\t\t\t\t// Fire Our Event\r\n\t\t\t\tHistory.Adapter.trigger(window,'statechange');\r\n\t\t\t\tHistory.busy(false);\r\n\r\n\t\t\t\t// Return true\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\t\t\tHistory.Adapter.bind(window,'popstate',History.onPopState);\r\n\r\n\t\t\t/**\r\n\t\t\t * History.pushState(data,title,url)\r\n\t\t\t * Add a new State to the history object, become it, and trigger onpopstate\r\n\t\t\t * We have to trigger for HTML4 compatibility\r\n\t\t\t * @param {object} data\r\n\t\t\t * @param {string} title\r\n\t\t\t * @param {string} url\r\n\t\t\t * @return {true}\r\n\t\t\t */\r\n\t\t\tHistory.pushState = function(data,title,url,queue){\r\n\t\t\t\t//History.debug('History.pushState: called', arguments);\r\n\r\n\t\t\t\t// Check the State\r\n\t\t\t\tif ( History.getHashByUrl(url) && History.emulated.pushState ) {\r\n\t\t\t\t\tthrow new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Handle Queueing\r\n\t\t\t\tif ( queue !== false && History.busy() ) {\r\n\t\t\t\t\t// Wait + Push to Queue\r\n\t\t\t\t\t//History.debug('History.pushState: we must wait', arguments);\r\n\t\t\t\t\tHistory.pushQueue({\r\n\t\t\t\t\t\tscope: History,\r\n\t\t\t\t\t\tcallback: History.pushState,\r\n\t\t\t\t\t\targs: arguments,\r\n\t\t\t\t\t\tqueue: queue\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Make Busy + Continue\r\n\t\t\t\tHistory.busy(true);\r\n\r\n\t\t\t\t// Create the newState\r\n\t\t\t\tvar newState = History.createStateObject(data,title,url);\r\n\r\n\t\t\t\t// Check it\r\n\t\t\t\tif ( History.isLastSavedState(newState) ) {\r\n\t\t\t\t\t// Won't be a change\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Store the newState\r\n\t\t\t\t\tHistory.storeState(newState);\r\n\t\t\t\t\tHistory.expectedStateId = newState.id;\r\n\r\n\t\t\t\t\t// Push the newState\r\n\t\t\t\t\thistory.pushState(newState.id,newState.title,newState.url);\r\n\r\n\t\t\t\t\t// Fire HTML5 Event\r\n\t\t\t\t\tHistory.Adapter.trigger(window,'popstate');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// End pushState closure\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\r\n\t\t\t/**\r\n\t\t\t * History.replaceState(data,title,url)\r\n\t\t\t * Replace the State and trigger onpopstate\r\n\t\t\t * We have to trigger for HTML4 compatibility\r\n\t\t\t * @param {object} data\r\n\t\t\t * @param {string} title\r\n\t\t\t * @param {string} url\r\n\t\t\t * @return {true}\r\n\t\t\t */\r\n\t\t\tHistory.replaceState = function(data,title,url,queue){\r\n\t\t\t\t//History.debug('History.replaceState: called', arguments);\r\n\r\n\t\t\t\t// Check the State\r\n\t\t\t\tif ( History.getHashByUrl(url) && History.emulated.pushState ) {\r\n\t\t\t\t\tthrow new Error('History.js does not support states with fragement-identifiers (hashes/anchors).');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Handle Queueing\r\n\t\t\t\tif ( queue !== false && History.busy() ) {\r\n\t\t\t\t\t// Wait + Push to Queue\r\n\t\t\t\t\t//History.debug('History.replaceState: we must wait', arguments);\r\n\t\t\t\t\tHistory.pushQueue({\r\n\t\t\t\t\t\tscope: History,\r\n\t\t\t\t\t\tcallback: History.replaceState,\r\n\t\t\t\t\t\targs: arguments,\r\n\t\t\t\t\t\tqueue: queue\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Make Busy + Continue\r\n\t\t\t\tHistory.busy(true);\r\n\r\n\t\t\t\t// Create the newState\r\n\t\t\t\tvar newState = History.createStateObject(data,title,url);\r\n\r\n\t\t\t\t// Check it\r\n\t\t\t\tif ( History.isLastSavedState(newState) ) {\r\n\t\t\t\t\t// Won't be a change\r\n\t\t\t\t\tHistory.busy(false);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// Store the newState\r\n\t\t\t\t\tHistory.storeState(newState);\r\n\t\t\t\t\tHistory.expectedStateId = newState.id;\r\n\r\n\t\t\t\t\t// Push the newState\r\n\t\t\t\t\thistory.replaceState(newState.id,newState.title,newState.url);\r\n\r\n\t\t\t\t\t// Fire HTML5 Event\r\n\t\t\t\t\tHistory.Adapter.trigger(window,'popstate');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// End replaceState closure\r\n\t\t\t\treturn true;\r\n\t\t\t};\r\n\r\n\t\t} // !History.emulated.pushState\r\n\r\n\r\n\t\t// ====================================================================\r\n\t\t// Initialise\r\n\r\n\t\t/**\r\n\t\t * Load the Store\r\n\t\t */\r\n\t\tif ( sessionStorage ) {\r\n\t\t\t// Fetch\r\n\t\t\ttry {\r\n\t\t\t\tHistory.store = JSON.parse(sessionStorage.getItem('History.store'))||{};\r\n\t\t\t}\r\n\t\t\tcatch ( err ) {\r\n\t\t\t\tHistory.store = {};\r\n\t\t\t}\r\n\r\n\t\t\t// Normalize\r\n\t\t\tHistory.normalizeStore();\r\n\t\t}\r\n\t\telse {\r\n\t\t\t// Default Load\r\n\t\t\tHistory.store = {};\r\n\t\t\tHistory.normalizeStore();\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Clear Intervals on exit to prevent memory leaks\r\n\t\t */\r\n\t\tHistory.Adapter.bind(window,\"unload\",History.clearAllIntervals);\r\n\r\n\t\t/**\r\n\t\t * Create the initial State\r\n\t\t */\r\n\t\tHistory.saveState(History.storeState(History.extractState(History.getLocationHref(),true)));\r\n\r\n\t\t/**\r\n\t\t * Bind for Saving Store\r\n\t\t */\r\n\t\tif ( sessionStorage ) {\r\n\t\t\t// When the page is closed\r\n\t\t\tHistory.onUnload = function(){\r\n\t\t\t\t// Prepare\r\n\t\t\t\tvar\tcurrentStore, item, currentStoreString;\r\n\r\n\t\t\t\t// Fetch\r\n\t\t\t\ttry {\r\n\t\t\t\t\tcurrentStore = JSON.parse(sessionStorage.getItem('History.store'))||{};\r\n\t\t\t\t}\r\n\t\t\t\tcatch ( err ) {\r\n\t\t\t\t\tcurrentStore = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Ensure\r\n\t\t\t\tcurrentStore.idToState = currentStore.idToState || {};\r\n\t\t\t\tcurrentStore.urlToId = currentStore.urlToId || {};\r\n\t\t\t\tcurrentStore.stateToId = currentStore.stateToId || {};\r\n\r\n\t\t\t\t// Sync\r\n\t\t\t\tfor ( item in History.idToState ) {\r\n\t\t\t\t\tif ( !History.idToState.hasOwnProperty(item) ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentStore.idToState[item] = History.idToState[item];\r\n\t\t\t\t}\r\n\t\t\t\tfor ( item in History.urlToId ) {\r\n\t\t\t\t\tif ( !History.urlToId.hasOwnProperty(item) ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentStore.urlToId[item] = History.urlToId[item];\r\n\t\t\t\t}\r\n\t\t\t\tfor ( item in History.stateToId ) {\r\n\t\t\t\t\tif ( !History.stateToId.hasOwnProperty(item) ) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcurrentStore.stateToId[item] = History.stateToId[item];\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Update\r\n\t\t\t\tHistory.store = currentStore;\r\n\t\t\t\tHistory.normalizeStore();\r\n\r\n\t\t\t\t// In Safari, going into Private Browsing mode causes the\r\n\t\t\t\t// Session Storage object to still exist but if you try and use\r\n\t\t\t\t// or set any property/function of it it throws the exception\r\n\t\t\t\t// \"QUOTA_EXCEEDED_ERR: DOM Exception 22: An attempt was made to\r\n\t\t\t\t// add something to storage that exceeded the quota.\" infinitely\r\n\t\t\t\t// every second.\r\n\t\t\t\tcurrentStoreString = JSON.stringify(currentStore);\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// Store\r\n\t\t\t\t\tsessionStorage.setItem('History.store', currentStoreString);\r\n\t\t\t\t}\r\n\t\t\t\tcatch (e) {\r\n\t\t\t\t\tif (e.code === DOMException.QUOTA_EXCEEDED_ERR) {\r\n\t\t\t\t\t\tif (sessionStorage.length) {\r\n\t\t\t\t\t\t\t// Workaround for a bug seen on iPads. Sometimes the quota exceeded error comes up and simply\r\n\t\t\t\t\t\t\t// removing/resetting the storage can work.\r\n\t\t\t\t\t\t\tsessionStorage.removeItem('History.store');\r\n\t\t\t\t\t\t\tsessionStorage.setItem('History.store', currentStoreString);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Otherwise, we're probably private browsing in Safari, so we'll ignore the exception.\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow e;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// For Internet Explorer\r\n\t\t\tHistory.intervalList.push(setInterval(History.onUnload,History.options.storeInterval));\r\n\r\n\t\t\t// For Other Browsers\r\n\t\t\tHistory.Adapter.bind(window,'beforeunload',History.onUnload);\r\n\t\t\tHistory.Adapter.bind(window,'unload',History.onUnload);\r\n\r\n\t\t\t// Both are enabled for consistency\r\n\t\t}\r\n\r\n\t\t// Non-Native pushState Implementation\r\n\t\tif ( !History.emulated.pushState ) {\r\n\t\t\t// Be aware, the following is only for native pushState implementations\r\n\t\t\t// If you are wanting to include something for all browsers\r\n\t\t\t// Then include it above this if block\r\n\r\n\t\t\t/**\r\n\t\t\t * Setup Safari Fix\r\n\t\t\t */\r\n\t\t\tif ( History.bugs.safariPoll ) {\r\n\t\t\t\tHistory.intervalList.push(setInterval(History.safariStatePoll, History.options.safariPollInterval));\r\n\t\t\t}\r\n\r\n\t\t\t/**\r\n\t\t\t * Ensure Cross Browser Compatibility\r\n\t\t\t */\r\n\t\t\tif ( navigator.vendor === 'Apple Computer, Inc.' || (navigator.appCodeName||'') === 'Mozilla' ) {\r\n\t\t\t\t/**\r\n\t\t\t\t * Fix Safari HashChange Issue\r\n\t\t\t\t */\r\n\r\n\t\t\t\t// Setup Alias\r\n\t\t\t\tHistory.Adapter.bind(window,'hashchange',function(){\r\n\t\t\t\t\tHistory.Adapter.trigger(window,'popstate');\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Initialise Alias\r\n\t\t\t\tif ( History.getHash() ) {\r\n\t\t\t\t\tHistory.Adapter.onDomLoad(function(){\r\n\t\t\t\t\t\tHistory.Adapter.trigger(window,'hashchange');\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} // !History.emulated.pushState\r\n\r\n\r\n\t}; // History.initCore\r\n\r\n\t// Try to Initialise History\r\n\tif (!History.options || !History.options.delayInit) {\r\n\t\tHistory.init();\r\n\t}\r\n\r\n})(window);\r\n\r\n\r\ndefine(\"vendor/jquery.history\",[],function(){ return History })\r\n\r\n;\n",
    "define(\r\n    'managers/historymanager',\r\n    [\r\n        \"require\",\r\n        \"jquery\",\r\n        'handlers/general',\r\n        \"vendor/jquery.history\"\r\n    ],\r\n    function (require) {\r\n        var $ = require(\"jquery\"),\r\n            general = require('handlers/general'),\r\n            history = require(\"vendor/jquery.history\");\r\n\r\n        // -----------------------------------------\r\n\r\n        function State() {\r\n            this.type = '';\r\n        }\r\n\r\n        // -----------------------------------------\r\n\r\n        function InvalidState() {\r\n            this.type = eHistoryStateType.Invalid;\r\n        }\r\n\r\n        InvalidState.prototype = Object.create(State.prototype);\r\n        InvalidState.prototype.constructor = InvalidState;\r\n\r\n        // -----------------------------------------\r\n\r\n        function PopupState(popupType, popupId) {\r\n            this.type = popupType;\r\n            this.popupType = popupType;\r\n            this.popupId = popupId;\r\n        }\r\n\r\n        PopupState.prototype = Object.create(State.prototype);\r\n        PopupState.prototype.constructor = PopupState;\r\n\r\n        PopupState.prototype.toString = function () {\r\n            return \"?popup=\" + this.popupId;\r\n        };\r\n\r\n        // -----------------------------------------\r\n        function WizardState(view, stepNumber) {\r\n            this.type = eHistoryStateType.Wizard;\r\n            this.step = stepNumber;\r\n            this.view = view;\r\n        }\r\n\r\n        WizardState.prototype = Object.create(State.prototype);\r\n        WizardState.prototype.constructor = WizardState;\r\n\r\n        WizardState.prototype.toString = function () {\r\n            return \"?view=\" + this.view + \"&step=\" + (!general.isEmptyValue(this.step) ? this.step : 1);\r\n        };\r\n\r\n        // -----------------------------------------\r\n\r\n        function QuestionnaireState(pageNumber) {\r\n            this.type = eHistoryStateType.Questionnaire;\r\n            this.pageNumber = pageNumber;\r\n            this.view = eForms.ClientQuestionnaire;\r\n        }\r\n\r\n        QuestionnaireState.prototype = Object.create(State.prototype);\r\n        QuestionnaireState.prototype.constructor = QuestionnaireState;\r\n\r\n        QuestionnaireState.prototype.toString = function () {\r\n            return \"?view=\" + this.view + \"&questionnaire=\" + this.pageNumber;\r\n        };\r\n\r\n        // -----------------------------------------\r\n        function ViewState(viewId, viewArgs) {\r\n            this.type = eHistoryStateType.View;\r\n            this.view = viewId;\r\n            this.viewArgs = viewArgs;\r\n        }\r\n\r\n        ViewState.prototype = Object.create(State.prototype);\r\n        ViewState.prototype.constructor = ViewState;\r\n\r\n        ViewState.prototype.toString = function () {\r\n            return \"?view=\" + this.view;\r\n        };\r\n\r\n        // -----------------------------------------\r\n\r\n        function StartUpState(viewId, viewArgs) {\r\n            this.type = 'startup';\r\n            this.view = viewId;\r\n            this.viewArgs = viewArgs;\r\n        }\r\n\r\n        StartUpState.prototype = Object.create(ViewState.prototype);\r\n        StartUpState.prototype.constructor = StartUpState;\r\n\r\n        // -----------------------------------------\r\n\r\n        function HistoryManager() {\r\n            var onStateChanged = new TDelegate();\r\n            var skipStartup = true;\r\n\r\n            //-------------- History Binding -----------------------------\r\n            var init = function () {\r\n                if (!history.enabled) {\r\n                    // History.js is disabled for this browser.\r\n                    // This is because we can optionally choose to support HTML4 browsers or not.\r\n                    return false;\r\n                }\r\n\r\n                history.clearQueue();\r\n\r\n                trackHistory();\r\n\r\n                return true;\r\n            };\r\n\r\n            var isValidState = function (state) {\r\n                return general.isDefinedType(state.data.type);\r\n            };\r\n\r\n            var isViewState = function (state) {\r\n                return isValidState(state) && general.isDefinedType(state.data.view);\r\n            };\r\n\r\n            var isPopupState = function (state) {\r\n                return isValidState(state) && !general.isEmptyType(state.data.popupType);\r\n            };\r\n\r\n            var isQuestionnaireState = function (state) {\r\n                return isValidState(state) && !general.isEmptyType(state.data.pageNumber);\r\n            };\r\n\r\n            var isWizardState = function (state) {\r\n                return isValidState(state) && !general.isEmptyType(state.data.step);\r\n            };\r\n\r\n            var isAlertState = function (state) {\r\n                return isPopupState(state) && state.data.popupType === ePopupType.Alert;\r\n            };\r\n\r\n            var isDialogState = function (state) {\r\n                return isPopupState(state) && state.data.popupType === ePopupType.Dialog;\r\n            };\r\n\r\n            function isExitingFullScreen(currentState, previousState) {\r\n                var toggleControls = eFullScreenTogleControls;\r\n\r\n                for (var name in toggleControls) {\r\n                    if (!toggleControls.hasOwnProperty(name)) {\r\n                        continue;\r\n                    }\r\n\r\n                    var toggleControl = toggleControls[name];\r\n\r\n                    if (toggleControl.full === previousState.data.popupId &&\r\n                        toggleControl.default === currentState.data.popupId) {\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            function isEnteringFullScreen(currentState, previousState) {\r\n                var toggleControls = eFullScreenTogleControls;\r\n\r\n                for (var name in toggleControls) {\r\n                    if (!toggleControls.hasOwnProperty(name)) {\r\n                        continue;\r\n                    }\r\n\r\n                    var toggleControl = toggleControls[name];\r\n\r\n                    if (toggleControl.full === currentState.data.popupId &&\r\n                        (toggleControl.default === previousState.data.popupId || toggleControl.default === previousState.data.view)) {\r\n                        return true;\r\n                    }\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            var isStartUpState = function (state) {\r\n                return isViewState(state) && state.data.type === 'startup';\r\n            };\r\n\r\n            var getPreviousState = function () {\r\n                return history.getStateByIndex(history.getCurrentIndex() - 1);\r\n            };\r\n\r\n            function trackHistory() {\r\n                // Bind to StateChange Event\r\n                $(window).on('statechange', function () { // Note: We are using statechange instead of popstate\r\n                    var currentState = history.getState();\r\n                    var previousState = getPreviousState();\r\n\r\n                    if (isStartUpState(currentState) && skipStartup) {\r\n                        skipStartup = false;\r\n                        return;\r\n                    }\r\n\r\n                    if (isWizardState(currentState)) {\r\n                        onStateChanged.Invoke(new WizardState(currentState.data.view, currentState.data.step));\r\n                    }\r\n\r\n                    // questionnaire, and it could be inside a popup\r\n                    if (isQuestionnaireState(currentState) || isPopupState(currentState)) {\r\n                        onStateChanged.Invoke(new QuestionnaireState(currentState.data.pageNumber));\r\n                    }\r\n\r\n                    if (isExitingFullScreen(currentState, previousState)) {\r\n                        onStateChanged.Invoke(new PopupState(eHistoryStateType.ExitFullscren, previousState.data.popupId));\r\n                    }\r\n\r\n                    if (isEnteringFullScreen(currentState, previousState)) {\r\n                        onStateChanged.Invoke(new PopupState(eHistoryStateType.EnterFullscren, previousState.data.popupId));\r\n                    }\r\n\r\n\r\n                    if (isPopupState(currentState)) { // alerts and dialogs\r\n                        return;\r\n                    }\r\n\r\n                    if (isAlertState(previousState) && currentState.navigation) {\r\n                        onStateChanged.Invoke(new PopupState(eHistoryStateType.CloseAlert, previousState.data.popupId));\r\n                        return;\r\n                    }\r\n\r\n                    if (isDialogState(previousState) && currentState.navigation) {\r\n                        onStateChanged.Invoke(new PopupState(eHistoryStateType.CloseDialog, previousState.data.popupId));\r\n                        return;\r\n                    }\r\n\r\n                    if (isViewState(currentState)) {\r\n                        onStateChanged.Invoke(new ViewState(currentState.data.view, currentState.data.viewArgs));\r\n                        return;\r\n                    }\r\n\r\n                    if (isValidState(currentState)) {\r\n                        onStateChanged.Invoke(currentState.data);\r\n                    } else {\r\n                        onStateChanged.Invoke(new InvalidState());\r\n                    }\r\n                });\r\n            }\r\n\r\n            var pushViewState = function (form, args, stateChangedCallback) {\r\n                pushState(new ViewState(form, args), stateChangedCallback);\r\n            };\r\n\r\n            var replaceViewState = function (form, args) {\r\n                replaceState(new ViewState(form, args));\r\n            };\r\n\r\n            var pushQuestonnaireState = function (pageNumber) {\r\n                if (pageNumber === 1) {\r\n                    replaceState(new QuestionnaireState(pageNumber));\r\n                } else {\r\n                    pushState(new QuestionnaireState(pageNumber));\r\n                }\r\n            };\r\n\r\n            var pushStartUpState = function (form, args, stateChangedCallback) {\r\n                pushState(new StartUpState(form, args), stateChangedCallback);\r\n            };\r\n\r\n            var pushPopupState = function (type, popupId, stateChangedCallback) {\r\n                if (type !== ePopupType.Dialog && type !== ePopupType.Alert) {\r\n                    throw new Error(\"Not implemented Type: \" + type);\r\n                }\r\n\r\n                // push state for back option\r\n                pushState(new PopupState(type, popupId), stateChangedCallback);\r\n            };\r\n\r\n            var pushSubState = function (serializedState, stateChangeCallback) {\r\n                var currentState = history.getState(),\r\n                    subState;\r\n\r\n                if (isQuestionnaireState(currentState)) {\r\n                    subState = new QuestionnaireState(currentState.data.pageNumber);\r\n                } else if (isPopupState(currentState)) {\r\n                    subState = new PopupState(currentState.data.popupType, currentState.data.popupId);\r\n                } else if (isViewState(currentState)) {\r\n                    subState = new ViewState(currentState.data.view, currentState.data.viewArgs);\r\n                }\r\n\r\n                if (subState) {\r\n                    subState.toString = function () {\r\n                        return Object.getPrototypeOf(subState).toString.apply(subState, arguments) + \"&\" + serializedState;\r\n                    };\r\n\r\n                    pushState(subState, stateChangeCallback);\r\n                }\r\n            };\r\n\r\n            var pushNavWizardState = function (view, step, stateChangedCallback) {\r\n                pushState(new WizardState(view, step), stateChangedCallback);\r\n            };\r\n\r\n            function pushState(state, stateChangedCallback) {\r\n                var currentState = history.getState();\r\n\r\n                if (general.isFunctionType(stateChangedCallback)) {\r\n                    if (general.equals(currentState.data, state)) {\r\n                        setTimeout(stateChangedCallback);\r\n                    } else {\r\n                        $(window).one('statechange', stateChangedCallback);\r\n                    }\r\n                }\r\n\r\n                history.pushState(state, window.document.title, state.toString());\r\n            }\r\n\r\n            function replaceState(state) {\r\n                history.replaceState(state, window.document.title, state.toString());\r\n            }\r\n\r\n            var start = function (view, args, startCallback) {\r\n                // jquery.history is using hashtag and not search on ie\r\n                // refresh detection\r\n                var state = history.getState();\r\n\r\n                if (isViewState(state) && !isStartUpState(state) && (state.url.containsNotEmpty(window.location.search) || window.location.hash.containsNotEmpty(history.getHash()))) {\r\n                    history.Adapter.trigger(window, 'statechange'); // when page is refresh we need to force statechange\r\n\r\n                    if (general.isFunctionType(startCallback)) {\r\n                        startCallback();\r\n                    }\r\n                } else {\r\n                    pushViewState(view, args, startCallback);\r\n                }\r\n            };\r\n\r\n            var hasAlert = function (alertType) {\r\n                var state = history.getState();\r\n                return isAlertState(state) && state.data.popupId === alertType;\r\n            };\r\n\r\n            var hasDialog = function (dialogName) {\r\n                var state = history.getState();\r\n                return isDialogState(state) && state.data.popupId === dialogName;\r\n            };\r\n\r\n            var historyGo = function (direction, callback) {\r\n                if (general.isFunctionType(callback)) {\r\n                    $(window).one('statechange', function () {\r\n                        callback();\r\n                    });\r\n                }\r\n\r\n                history.go(direction);\r\n            };\r\n\r\n            var goBack = function (callback) {\r\n                historyGo(-1, callback);\r\n            };\r\n\r\n            var goForward = function (callback) {\r\n                historyGo(1, callback);\r\n            };\r\n\r\n            return {\r\n                Start: start,\r\n                Init: init,\r\n\r\n                Back: goBack,\r\n                Forward: goForward,\r\n                GetCurrentState: history.getState,\r\n\r\n                PushSubState: pushSubState,\r\n\r\n                PushViewState: pushViewState,\r\n                ReplaceViewState: replaceViewState,\r\n                PushPopupState: pushPopupState,\r\n                PushStartUpState: pushStartUpState,\r\n                PushQuestionnaireState: pushQuestonnaireState,\r\n                PushWizardState: pushNavWizardState,\r\n\r\n                HasAlert: hasAlert,\r\n                HasDialog: hasDialog,\r\n\r\n                OnStateChanged: onStateChanged\r\n            };\r\n        }\r\n\r\n        var module = window.HistoryManager = new HistoryManager();\r\n\r\n        return module;\r\n    }\r\n);\r\n\n",
    "define(\r\n    'viewmodels/dialogs/DialogViewModel',\r\n    [\r\n        'knockout',\r\n        'global/debounce',\r\n        'handlers/general'\r\n    ],\r\n    function DialogModelDef(ko, debounce, general) {\r\n        function DialogModel(name, view, args) {\r\n            this.name = name;\r\n            this.viewType = view || 6;\r\n            this.viewArgs = args;\r\n            this.options = {};\r\n            this.openTimeout = 0;\r\n            this.persistent = true;\r\n            this.position = ko.observable({});\r\n            this.element = null;\r\n            this.OnClose = new TDelegate();\r\n\r\n            this.setOptions = function (customOptions, dialogPosition) {\r\n                this.options = {\r\n                    title: '',\r\n                    width: 'auto',\r\n                    height: 'auto',\r\n                    dialogClass: 'fx-dialog',\r\n                    closeText: \"\",\r\n                    top: -1,\r\n                    left: -1,\r\n                    offset: 0\r\n                };\r\n\r\n                this.openTimeout = general.isDefinedType(customOptions.openTimeout) ? customOptions.openTimeout : 0;\r\n                this.persistent = general.isDefinedType(customOptions.persistent) ? customOptions.persistent : true;\r\n\r\n                this.element = document.getElementById(this.name);\r\n\r\n                if (!this.element) {\r\n                    return;\r\n                }\r\n\r\n                if (customOptions.useDialogPosition) {\r\n                    this.options.topOpt = dialogPosition.top;\r\n                    this.options.leftOpt = dialogPosition.left;\r\n                    this.options.offsetOpt = dialogPosition.offset;\r\n                }\r\n\r\n                Object.assign(this.options, customOptions)\r\n            }\r\n\r\n            this.getOptions = function () {\r\n                return this.options;\r\n            };\r\n\r\n            this.dispose = function () {\r\n                this.OnClose.Flush();\r\n                this.position(null);\r\n                this.options = null;\r\n                this.element = null;\r\n            };\r\n        }\r\n\r\n        function DialogViewModelClass() {\r\n            var instances = ko.observableArray([]),\r\n                topMostDialog = ko.computed(function () {\r\n                    var length = instances().length;\r\n                    return instances()[length - 1];\r\n                }),\r\n                persistent = ko.computed(function () {\r\n                    var dialog = topMostDialog();\r\n                    if (dialog) {\r\n                        return dialog.persistent;\r\n                    }\r\n\r\n                    return true;\r\n                }),\r\n                isOpen = ko.computed(function () {\r\n                    return instances().length > 0;\r\n                }),\r\n                dialogPosition = ko.observable({ top: -1, left: -1, offset: 0 }),\r\n                onPreloadDelegate = new TDelegate(),\r\n                onOpenDelegate = new TDelegate(),\r\n                onCloseDelegate = new TDelegate();\r\n\r\n            var open = debounce(function openHandler(name, options, view, args) {\r\n                var dialog = new DialogModel(name, view, args);\r\n                dialog.OnClose.Add(closeHandler);\r\n                dialog.setOptions(options, dialogPosition());\r\n\r\n                onOpenDelegate.Invoke(dialog.name, dialog.viewType, dialog.viewArgs);\r\n\r\n                instances.push(dialog);\r\n            }, 500, true);\r\n\r\n            var openAsync = debounce(function openAsyncHandler(event, name, options, view, args) {\r\n                var subscriber = ko.postbox.subscribe(event, function () {\r\n                    open(name, options, view, args);\r\n                    subscriber.dispose();\r\n                });\r\n\r\n                onPreloadDelegate.Invoke(name, view, args);\r\n            }, 500, true);\r\n\r\n            function closeHandler(dialog, hasInternalIframe) {\r\n                var index = instances.indexOf(dialog);\r\n\r\n                if (index > -1) {\r\n                    if (dialog.options && dialog.options.hasOwnProperty('onCloseCallback') &&\r\n                        general.isFunctionType(dialog.options.onCloseCallback)) {\r\n                        dialog.options.onCloseCallback(dialog);\r\n                    }\r\n\r\n                    dialog.dispose();\r\n\r\n                    if (!hasInternalIframe) {\r\n                        onCloseDelegate.Invoke(dialog.name, dialog.viewType);\r\n                    }\r\n\r\n                    instances.splice(index, 1);\r\n                }\r\n            }\r\n\r\n            function close(dialogName, hasInternalIframe) {\r\n                var dialog;\r\n\r\n                if (!general.isEmptyValue(dialogName)) {\r\n                    dialog = ko.utils.arrayFirst(instances(), function (item) {\r\n                        return item.name === dialogName;\r\n                    });\r\n                }\r\n                else {\r\n                    dialog = topMostDialog();\r\n                }\r\n\r\n                closeHandler(dialog, hasInternalIframe);\r\n            }\r\n\r\n            function getCurrentView() {\r\n                var dialog = topMostDialog();\r\n\r\n                if (dialog) {\r\n                    return dialog.viewType;\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            return {\r\n                dialogs: instances,\r\n                open: open,\r\n                openAsync: openAsync,\r\n                close: close,\r\n                isOpen: isOpen,\r\n                persistent: persistent,\r\n                getCurrentView: getCurrentView,\r\n                dialogPosition: dialogPosition,\r\n                OnPreload: onPreloadDelegate,\r\n                OnOpen: onOpenDelegate,\r\n                OnClose: onCloseDelegate\r\n            };\r\n        }\r\n\r\n        //----------------------------------------\r\n        window.DialogViewModel = new DialogViewModelClass();\r\n\r\n        return window.DialogViewModel;\r\n    }\r\n);\r\n\n",
    "define(\r\n    'managers/PopUpManager',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'viewmodels/dialogs/DialogViewModel'\r\n    ],\r\n    function PopUpManagerDef(require) {\r\n        var general = require('handlers/general'),\r\n            DialogViewModel = require('viewmodels/dialogs/DialogViewModel');\r\n\r\n        var PopUpManager = function PopUpManagerClass() {\r\n            function openAsPopup(viewType, args) {\r\n                if (viewType != eViewTypes.vClientQuestionnaire) {\r\n                    return;\r\n                }\r\n\r\n                var options = {\r\n                    title: args.title,\r\n                    modal: true,\r\n                    draggable: true,\r\n                    resizable: false,\r\n                    width: 950,\r\n                    persistent: false,\r\n                    dialogClass: 'fx-dialog'\r\n                };\r\n\r\n                general.extendType(options, args);\r\n\r\n                if (general.isDefinedType(DialogViewModel)) {\r\n                    DialogViewModel.openAsync(eAppEvents.cddStatusLoadedEvent, eDialog.ClientQuestionnaire, options, eViewTypes.vClientQuestionnaire);\r\n                }\r\n                else {\r\n                    AlertsManager.UpdateAlert(AlertTypes.PopupClientQuestionnaire, null, null, null);\r\n                    AlertsManager.PopAlert(AlertTypes.PopupClientQuestionnaire);\r\n                }\r\n            }\r\n\r\n            function closePopup() {\r\n                if (general.isDefinedType(window.DialogViewModel)) {\r\n                    window.DialogViewModel.close();\r\n                    return;\r\n                }\r\n\r\n                if (AlertsManager.GetAlert(AlertTypes.PopupClientQuestionnaire).visible()) {\r\n                    AlertsManager.GetAlert(AlertTypes.PopupClientQuestionnaire).visible(false);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            function isPopupOpen() {\r\n                if (general.isDefinedType(DialogViewModel)) {\r\n                    return DialogViewModel.isOpen();\r\n                } else {\r\n                    return (AlertsManager.HasAlert());\r\n                }\r\n            }\r\n\r\n            return {\r\n                OpenAsPopup: openAsPopup,\r\n                ClosePopup: closePopup,\r\n                IsPopupOpen: isPopupOpen\r\n            };\r\n        };\r\n\r\n        var module = window.PopUpManager = new PopUpManager();\r\n        return module;\r\n    }\r\n);\n",
    "/* global General */\r\nvar AmlPopupManager = (function (amlPopupManager) {\r\n    function showAmlPopup() {\r\n        var option = {\r\n            title: Dictionary.GetItem('AMLStatus','dialogsTitles',' '),\r\n            closeOnEscape: false,\r\n            dialogClass: 'fx-dialog amlPopup',\r\n            width: 620\r\n        };\r\n\r\n        if (General.isDefinedType(DialogViewModel)) {\r\n            DialogViewModel.openAsync(eAppEvents.amlStatusLoadedEvent, eDialog.AmlStatus, option, eViewTypes.vAmlStatus, null);\r\n        }\r\n    }\r\n\r\n    function showAmlView() {\r\n        $viewModelsManager.VManager.SwitchViewVisible(eForms.Aml, {});\r\n    }\r\n        \r\n    function showAmlWindow() {\r\n        (new PopupInSameWindowForSC()).Navigate({\r\n            ActionUrl: '/webpl3/Compliance/AmlStatusWrapper'\r\n        });\r\n\r\n        window.external.ResizeHostForm(651, 588);\r\n    }\r\n\r\n    amlPopupManager.show = function () {\r\n        switch(InitConfiguration.ApplicationConfiguration.applicationType) {\r\n            case window.eApplicationTypes.Web:\r\n                showAmlPopup();\r\n                break;\r\n\r\n            case window.eApplicationTypes.Mobile:\r\n                showAmlView();\r\n                break;\r\n\r\n            default:\r\n                showAmlWindow();\r\n                break;\r\n        }\r\n    };\r\n\r\n    return amlPopupManager;\r\n}(window.AmlPopupManager || {}));\ndefine(\"managers/AmlPopupManager\", function(){});\n\n",
    "define('payments/ComplianceBeforeDeposit', [\r\n    'require',\r\n    'knockout',\r\n    'devicemanagers/StatesManager',\r\n    'managers/PopUpManager',\r\n    'managers/AmlPopupManager',\r\n    'devicemanagers/AlertsManager',\r\n    'dataaccess/dalCompliance',\r\n    'Dictionary',\r\n], function ComplianceBeforeDeposit(require) {\r\n    var ko = require('knockout'),\r\n        StatesManager = require('devicemanagers/StatesManager'),\r\n        PopUpManager = require('managers/PopUpManager'),\r\n        AlertsManager = require('devicemanagers/AlertsManager'),//not loaded yet, use global AlertsManager\r\n        AmlPopupManager = require('managers/AmlPopupManager'),\r\n        dalCompliance = require('dataaccess/dalCompliance'),\r\n        Dictionary = require('Dictionary');\r\n\r\n    var title = Dictionary.GetItem('ClientQuestionnaireTitle');\r\n\r\n    function isKycStatusFailCannotDeposit() {\r\n        return (\r\n            StatesManager.States.KycStatus() === eKYCStatus.Failed &&\r\n            StatesManager.States.KycReviewStatus() === eKYCReviewStatus.Appropriate\r\n        );\r\n    }\r\n\r\n    function showKycWarningAlert() {\r\n        var questionnaireAlertManager = AlertsManager.GetAlert(AlertTypes.ClientQuestionnaire);\r\n\r\n        questionnaireAlertManager.popAlert().done();\r\n    }\r\n\r\n    function isCddBeforeDeposit() {\r\n        return (\r\n            Dictionary.GetItem('preDepositRequired', 'application_configuration', '0') === '1' &&\r\n            (\r\n                StatesManager.States.IsCddStatusNotComplete() ||\r\n                StatesManager.States.IsKycStatusRequired() ||\r\n                StatesManager.States.IsKycReviewStatusRequired()\r\n            )\r\n        );\r\n    }\r\n\r\n    function isMoveToCddFullNoPopupBeforeDeposit() {\r\n        return (\r\n            Dictionary.GetItem('showCompliancePageBeforeDeposit', 'application_configuration', '0') === '1' &&\r\n            (\r\n                StatesManager.States.IsCddStatusNotComplete() ||\r\n                StatesManager.States.IsKycStatusRequired() ||\r\n                StatesManager.States.IsKycReviewStatusRequired()\r\n            )\r\n        );\r\n    }\r\n\r\n    function showMifidPopupBeforeDeposit() {\r\n        if (Dictionary.GetItem('showCompliancePageBeforeDeposit', 'application_configuration', '0') !== '1') {\r\n            return false;\r\n        }\r\n\r\n        var mifidAlertManager = AlertsManager.GetAlert(AlertTypes.ClientKnowledgeQuestionnaire);\r\n\r\n        var knowledgeAlertType;\r\n\r\n        switch (StatesManager.States.KycReviewStatus()) {\r\n            case eKYCReviewStatus.Review:\r\n                knowledgeAlertType = KnowledgeAlertTypes.Review;\r\n                break;\r\n\r\n            case eKYCReviewStatus.Tested:\r\n                knowledgeAlertType = KnowledgeAlertTypes.Tested;\r\n                break;\r\n\r\n            case eKYCReviewStatus.Inappropriate:\r\n                knowledgeAlertType = KnowledgeAlertTypes.Inappropriate;\r\n                break;\r\n\r\n            case eKYCReviewStatus.Unsuitable:\r\n                knowledgeAlertType = KnowledgeAlertTypes.Unsuitable;\r\n                break;\r\n\r\n            default:\r\n                knowledgeAlertType = null;\r\n                break;\r\n        }\r\n\r\n        if (knowledgeAlertType !== null) {\r\n            mifidAlertManager.popAlert(function () {\r\n                return true;\r\n            }, knowledgeAlertType);\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function openCdd(getRequestData, depositCallback) {\r\n        dalCompliance.logUserShouldCompleteCdd(getRequestData);\r\n        PopUpManager.OpenAsPopup(eViewTypes.vClientQuestionnaire, {\r\n            dialogClass: 'deal-slip PopupClientQuestionnaire',\r\n            title: title,\r\n        });\r\n\r\n        var sub = ko.postbox.subscribe('thankyou-continue-clicked', function onThankYouContinueClicked() {\r\n            depositCallback();\r\n            sub.dispose();\r\n        });\r\n    }\r\n\r\n    function isAmlRestricted() {\r\n        return StatesManager.States.AmlStatus() === eAMLStatus.Restricted;\r\n    }\r\n\r\n    function showAmlPopup() {\r\n        AmlPopupManager.show();\r\n    }\r\n\r\n    return {\r\n        isCddBeforeDeposit: isCddBeforeDeposit,\r\n        showMifidPopupBeforeDeposit: showMifidPopupBeforeDeposit,\r\n        isMoveToCddFullNoPopupBeforeDeposit: isMoveToCddFullNoPopupBeforeDeposit,\r\n        openCdd: openCdd,\r\n        isKycStatusFailCannotDeposit: isKycStatusFailCannotDeposit,\r\n        showKycWarningAlert: showKycWarningAlert,\r\n        isAmlRestricted: isAmlRestricted,\r\n        showAmlPopup: showAmlPopup,\r\n    };\r\n});\r\n\n",
    "define(\r\n    'managers/ViewsRouterManager',\r\n    [\r\n        \"require\",\r\n        'payments/ComplianceBeforeDeposit',\r\n        \"initdatamanagers/Customer\"\r\n    ],\r\n    function ViewsRouterManager(require) {\r\n        var ComplianceBeforeDeposit = require('payments/ComplianceBeforeDeposit'),\r\n            Customer = require(\"initdatamanagers/Customer\");\r\n\r\n        var getFormToRedirect = function (formId, viewArgs) {\r\n\r\n            var redirectToFormType = formId;\r\n\r\n            switch (formId) {\r\n                case eForms.Deposit:\r\n                    // is regulated \r\n\r\n                    if (ComplianceBeforeDeposit.showMifidPopupBeforeDeposit() ||\r\n                        ComplianceBeforeDeposit.isMoveToCddFullNoPopupBeforeDeposit()) {\r\n                        redirectToFormType = eForms.ClientQuestionnaire;\r\n                        viewArgs = { from: { form: eForms.Deposit, viewArgs: viewArgs } };\r\n                        break;\r\n                    }\r\n\r\n                    redirectToFormType = eForms.Deposit;\r\n                    break;\r\n\r\n                case eForms.UploadDocuments:\r\n                    if (Customer.prop.isDemo) {\r\n                        redirectToFormType = Customer.prop.mainPage;\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            return { viewType: redirectToFormType, viewArgs: viewArgs };\r\n        };\r\n\r\n        return {\r\n            GetFormToRedirect: getFormToRedirect\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'deepLinks/DeepLinkParameterValidator',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'initdatamanagers/InstrumentsManager',\r\n        'managers/viewsmanager',\r\n        'customEnums/ViewsEnums',\r\n        'enums/enums',\r\n    ],\r\n    function DeepLinkParameterValidator(require) {\r\n        var instrumentsManager = require('initdatamanagers/InstrumentsManager'),\r\n            general = require('handlers/general'),\r\n            validators = [];\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.LoginOption] = function (option) {\r\n            return !general.isEmptyType(option);\r\n        };\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.Instrument] = function (instrumentId) {\r\n            var instrumentIdValue = parseInt(instrumentId);\r\n\r\n            return !isNaN(instrumentIdValue) &&\r\n                instrumentsManager.GetInstrument(instrumentIdValue);\r\n        };\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.OrderDir] = function (orderDir) {\r\n            return !general.isEmptyType(eOrderDir[orderDir]);\r\n        };\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.Integer] = function (intValue) {\r\n            return !general.isEmptyType(intValue) && !isNaN(parseInt(intValue));\r\n        };\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.Tab] = function (tabName) {\r\n            var caseInsensitivePattern = new RegExp(tabName, \"i\");\r\n\r\n            for (var key in eNewDealTool) {\r\n                if (!eNewDealTool.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n\r\n                if (key.match(caseInsensitivePattern) !== null) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.Form] = function (requestFormName, mappingParameter) {\r\n            if (general.isEmptyType(requestFormName) || general.isEmptyType(eForms[requestFormName])) {\r\n                return false;\r\n            }\r\n\r\n            if (mappingParameter.AllowOnlyFormsContainingView) {\r\n                var requiredView = mappingParameter.AllowOnlyFormsContainingView,\r\n                    mappedFormId = eForms[requestFormName],\r\n                    viewsManager = require('managers/viewsmanager');\r\n\r\n                return viewsManager.GetFormProperties(mappedFormId).mappedViews.indexOf(requiredView) > -1;\r\n            }\r\n\r\n            return true;\r\n        };\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.SettingsView] = function (viewName) {\r\n            var caseInsensitivePattern = new RegExp(viewName, \"i\");\r\n\r\n            for (var key in eSettingsViews) {\r\n                if (!eSettingsViews.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n\r\n                if (key.match(caseInsensitivePattern) !== null) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        //------------------------------------------\r\n        validators[eDeepLinkParameterType.String] = function (stringValue) {\r\n            return general.isStringType(stringValue);\r\n        };\r\n\r\n        //------------------------------------------\r\n        function isValid(mappingParameter, requestParameterValue) {\r\n            return validators[mappingParameter.Type](requestParameterValue, mappingParameter);\r\n        }\r\n\r\n        return {\r\n            IsValid: isValid\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'deepLinks/DeepLinkParameterConverter',\r\n    [\r\n        'customEnums/ViewsEnums',\r\n        'enums/enums',\r\n    ],\r\n    function DeepLinkParameterConverter() {\r\n        var converters = [],\r\n            matchPlusRegex = /\\+/g;\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.LoginOption] = function (loginOption) {\r\n            return loginOption;\r\n        };\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.Instrument] = function (instrumentId) {\r\n            return parseInt(instrumentId);\r\n        };\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.OrderDir] = function (orderDir) {\r\n            return eOrderDir[orderDir];\r\n        };\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.Integer] = function (intValue) {\r\n            return parseInt(intValue);\r\n        };\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.Tab] = function (tabName) {\r\n            var caseInsensitivePattern = new RegExp(tabName, \"i\");\r\n\r\n            for (var key in eNewDealTool) {\r\n                if (!eNewDealTool.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n\r\n                if (key.match(caseInsensitivePattern) !== null) {\r\n                    return eNewDealTool[key];\r\n                }\r\n            }\r\n\r\n            return null;\r\n        };\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.Form] = function (formName) {\r\n            return eForms[formName];\r\n        };\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.SettingsView] = function (viewName) {\r\n            var caseInsensitivePattern = new RegExp(viewName, \"i\");\r\n\r\n            for (var key in eSettingsViews) {\r\n                if (!eSettingsViews.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n\r\n                if (key.match(caseInsensitivePattern) !== null) {\r\n                    return eSettingsViews[key];\r\n                }\r\n            }\r\n\r\n            return null;\r\n        };\r\n\r\n        //------------------------------------------\r\n        converters[eDeepLinkParameterType.String] = function (stringValue) {\r\n            var returnStringValue = stringValue.replace(matchPlusRegex, ' ')\r\n            return returnStringValue;\r\n        }\r\n\r\n        //------------------------------------------\r\n        function convert(mappingParameter, parameterValue) {\r\n            return converters[mappingParameter.Type](parameterValue);\r\n        }\r\n\r\n        return {\r\n            Convert: convert\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'generalmanagers/locationWrapper',\r\n    [],\r\n    function () {\r\n        return {\r\n            GetRootUrl: function GetRootUrl() {\r\n                var rootUrl = document.location.protocol + '//' + (document.location.hostname || document.location.host);\r\n\r\n                if (document.location.port || false) {\r\n                    rootUrl += ':' + document.location.port;\r\n                }\r\n\r\n                return rootUrl;\r\n            },\r\n            GetAbsoluteLocation: function GetAbsoluteLocation() {\r\n                return window.location.href;\r\n            },\r\n            GetQueryString: function GetQueryString() {\r\n                return window.location.search;\r\n            },\r\n            SetAbsoluteLocation: function SetAbsoluteLocation(url) {\r\n                window.location.href = url;\r\n            }\r\n        }\r\n    }\r\n);\r\n\n",
    "define(\r\n    'customEnums/routes',\r\n    [\r\n        'customEnums/ViewsEnums',\r\n        'enums/enums'\r\n    ],\r\n    function () {\r\n        return {\r\n            LoginOptions: {\r\n                Form: {\r\n                    Value: eForms.AccountPreferences\r\n                },\r\n                Parameters: {\r\n                    option: {\r\n                        ValueFromRequest: true,\r\n                        Optional: true,\r\n                        Type: eDeepLinkParameterType.LoginOption\r\n                    }\r\n                },\r\n                PassParametersToViews: true\r\n            },\r\n            Deals: {\r\n                Form: {\r\n                    Value: eForms.Quotes\r\n                }\r\n            },\r\n            OpenDeals: {\r\n                Form: {\r\n                    Value: eForms.OpenDeals\r\n                }\r\n            },\r\n            Limits: {\r\n                Form: {\r\n                    Value: eForms.Limits\r\n                }\r\n            },\r\n            ClosedDeals: {\r\n                Form: {\r\n                    Value: eForms.ClosedDeals\r\n                }\r\n            },\r\n            Questionnaire: {\r\n                Form: {\r\n                    Value: eForms.ClientQuestionnaire\r\n                }\r\n            },\r\n            ClientQuestionnaire: {\r\n                Form: {\r\n                    Value: eForms.ClientQuestionnaire\r\n                }\r\n            },\r\n            Wallet: {\r\n                Form: {\r\n                    Value: eForms.Wallet\r\n                }\r\n            },\r\n            NewDeal: {\r\n                PassParametersToViews: true,\r\n                Form: {\r\n                    Value: eForms.Transaction\r\n                },\r\n                Parameters: {\r\n                    instrumentId: {\r\n                        ValueFromRequest: true,\r\n                        DefaultValue: 3631,\r\n                        Type: eDeepLinkParameterType.Instrument\r\n                    },\r\n                    tab: {\r\n                        ValueFromRequest: true,\r\n                        Optional: true,\r\n                        Type: eDeepLinkParameterType.Tab\r\n                    },\r\n                    orderDir: {\r\n                        ValueFromRequest: true,\r\n                        Optional: true,\r\n                        Type: eDeepLinkParameterType.OrderDir\r\n                    },\r\n                    transactionTab: {\r\n                        Value: 'NewDeal'\r\n                    }\r\n                }\r\n            },\r\n            NewLimit: {\r\n                PassParametersToViews: true,\r\n                Form: {\r\n                    Value: eForms.Transaction\r\n                },\r\n                Parameters: {\r\n                    instrumentId: {\r\n                        ValueFromRequest: true,\r\n                        DefaultValue: 3631,\r\n                        Type: eDeepLinkParameterType.Instrument\r\n                    },\r\n                    tab: {\r\n                        ValueFromRequest: true,\r\n                        Optional: true,\r\n                        Type: eDeepLinkParameterType.Tab\r\n                    },\r\n                    orderDir: {\r\n                        ValueFromRequest: true,\r\n                        Optional: true,\r\n                        Type: eDeepLinkParameterType.OrderDir\r\n                    },\r\n                    transactionTab: {\r\n                        Value: 'NewLimit'\r\n                    }\r\n                }\r\n            },\r\n            Balance: {\r\n                Form: {\r\n                    Value: eForms.Balance\r\n                }\r\n            },\r\n            NetExposure: {\r\n                Form: {\r\n                    Value: eForms.NetExposure\r\n                }\r\n            },\r\n            Withdrawal: {\r\n                Form: {\r\n                    Value: eForms.Withdrawal\r\n                }\r\n            },\r\n            CustomizeQuotes: {\r\n                Form: {\r\n                    Value: eForms.EditFavoriteInstruments\r\n                }\r\n            },\r\n            Deposit: {\r\n                PassParametersToViews: true,\r\n                Form: {\r\n                    Value: eForms.Deposit\r\n                },\r\n                Actions: ['devicecustomdeeplinks/DepositActionHandler'],\r\n                Parameters: {\r\n                    payment: {\r\n                        ValueFromRequest: true,\r\n                        Optional: true,\r\n                        Type: eDeepLinkParameterType.String\r\n                    },\r\n                }\r\n            },\r\n            ChangePassword: {\r\n                Form: {\r\n                    Value: eForms.ChangePassword\r\n                }\r\n            },\r\n            PendingWithdrawal: {\r\n                Form: {\r\n                    Value: eForms.PendingWithdrawal\r\n                }\r\n            },\r\n            UploadDocuments: {\r\n                Form: {\r\n                    Value: eForms.UploadDocuments\r\n                }\r\n            },\r\n            TradingSignals: {\r\n                Form: {\r\n                    Value: eForms.TradingSignals\r\n                }\r\n            },\r\n            EconomicCalendar: {\r\n                Form: {\r\n                    Value: eForms.EconomicCalendar\r\n                }\r\n            },\r\n            CashBack: {\r\n                Form: {\r\n                    Value: eForms.CashBack\r\n                }\r\n            },\r\n            Settings: {\r\n                PassParametersToViews: true,\r\n                Form: {\r\n                    Value: eForms.Quotes\r\n                },\r\n                Parameters: {\r\n                    view: {\r\n                        ValueFromRequest: true,\r\n                        Type: eDeepLinkParameterType.SettingsView\r\n                    }\r\n                },\r\n                Actions: ['deepLinks/SettingsActionHandler']\r\n            },\r\n            NotificationsSettings: {\r\n                Form: {\r\n                    Value: eForms.NotificationsSettings\r\n                }\r\n            },\r\n            PersonalInformation: {\r\n                Form: {\r\n                    Value: eForms.PersonalInformation\r\n                }\r\n            },\r\n            DepositConfirmation: {\r\n                Form: {\r\n                    Value: eForms.UploadDocuments\r\n                },\r\n                Actions: ['devicecustomdeeplinks/DepositConfirmationActionHandler']\r\n            },\r\n            Tutorials: {\r\n                Form: {\r\n                    Value: eForms.EducationalTutorials\r\n                }\r\n            },\r\n            EducationalTutorials: {\r\n                Form: {\r\n                    Value: eForms.EducationalTutorials\r\n                }\r\n            }\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\"deepLinks/DeepLinkHandler\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"Q\",\r\n\t\"handlers/general\",\r\n\t\"deepLinks/DeepLinkParameterValidator\",\r\n\t\"deepLinks/DeepLinkParameterConverter\",\r\n\t\"global/UrlResolver\",\r\n\t\"generalmanagers/ErrorManager\",\r\n\t\"modules/permissionsmodule\",\r\n\t\"fxnet/fxnet\",\r\n\t\"generalmanagers/locationWrapper\",\r\n\t\"customEnums/routes\",\r\n], function DeepLinkHandler(require) {\r\n\tvar urlResolver = require(\"global/UrlResolver\"),\r\n\t\tko = require(\"knockout\"),\r\n\t\tq = require(\"Q\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tdeepLinkParameterValidator = require(\"deepLinks/DeepLinkParameterValidator\"),\r\n\t\tdeepLinkParameterConverter = require(\"deepLinks/DeepLinkParameterConverter\"),\r\n\t\terrorManager = require(\"generalmanagers/ErrorManager\"),\r\n\t\tpermissionsModule = require(\"modules/permissionsmodule\"),\r\n\t\tlocationWrapper = require(\"generalmanagers/locationWrapper\"),\r\n\t\teFormsDeepLinkMap = require(\"customEnums/routes\"),\r\n\t\tregirectPattern = new RegExp(\"(.*)/\" + urlResolver.getRedirectPath() + \"/(.*)\", \"i\");\r\n\r\n\treturn function DeepLinkHandlerImplementation() {\r\n\t\tvar isDeepLinkRedirect = false,\r\n\t\t\tprocessActionsDefer = q.defer(),\r\n\t\t\tredirectResult = null,\r\n\t\t\tparams = null,\r\n\t\t\tactions = null,\r\n\t\t\t_deepLinkLogName = \"\";\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction resetRedirectProperties(startUpForm, args) {\r\n\t\t\tisDeepLinkRedirect = false;\r\n\t\t\tredirectResult = { startUpForm: startUpForm, args: args, isDeepLink: false, mode: null };\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction initializeRedirectProperties() {\r\n\t\t\tresetRedirectProperties(null, null);\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction getParameterValue(mappingParameter, requestParameter) {\r\n\t\t\tif (!mappingParameter.ValueFromRequest) {\r\n\t\t\t\treturn mappingParameter.Value;\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t!general.isEmptyType(requestParameter) &&\r\n\t\t\t\tdeepLinkParameterValidator.IsValid(mappingParameter, requestParameter)\r\n\t\t\t) {\r\n\t\t\t\treturn deepLinkParameterConverter.Convert(mappingParameter, requestParameter);\r\n\t\t\t}\r\n\r\n\t\t\tif (mappingParameter.Optional) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn mappingParameter.DefaultValue;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction parseParams(mappingParams, deepLinkParams) {\r\n\t\t\tparams = {};\r\n\r\n\t\t\tif (general.isEmptyType(mappingParams)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var param in mappingParams) {\r\n\t\t\t\tif (!mappingParams.hasOwnProperty(param)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar paramValue = getParameterValue(mappingParams[param], getValueFromObject(deepLinkParams, param));\r\n\r\n\t\t\t\tif (general.isEmptyType(paramValue)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tparams[param] = paramValue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction getValueFromObject(obj, propertyName) {\r\n\t\t\tif (!obj || !propertyName) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar key = Object.keys(obj).find(function (property) {\r\n\t\t\t\treturn property.toLowerCase() === propertyName.toLowerCase();\r\n\t\t\t});\r\n\r\n\t\t\tif (!key) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\treturn obj[key];\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction isDeepLinkDataValid(deepLinkData) {\r\n\t\t\treturn (\r\n\t\t\t\t!general.isEmptyType(deepLinkData) &&\r\n\t\t\t\t!general.isNullOrUndefined(getValueFromObject(eFormsDeepLinkMap, deepLinkData.Name))\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction setRedirectData(mapping, deepLinkData) {\r\n\t\t\tisDeepLinkRedirect = true;\r\n\r\n\t\t\tredirectResult.startUpForm = getParameterValue(mapping.Form, getValueFromObject(deepLinkData, \"Form\"));\r\n\t\t\tredirectResult.args = mapping.PassParametersToViews === true ? params : {};\r\n\t\t\tredirectResult.isDeepLink = true;\r\n\t\t\tredirectResult.mode = deepLinkData.mode;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction parseRedirectUrl(url) {\r\n\t\t\tvar redirectMatch = url.match(regirectPattern);\r\n\r\n\t\t\tif (!redirectMatch || redirectMatch.length != 3) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\turl = redirectMatch[1] + \"?Name=\" + redirectMatch[2].replace(\"?\", \"&\");\r\n\r\n\t\t\treturn general.urlDecode(url);\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction getDeepLinkDataFromUrl(url) {\r\n\t\t\tvar urlProcessors = [general.urlDecode, parseRedirectUrl];\r\n\r\n\t\t\tfor (var i = 0; i < urlProcessors.length; i++) {\r\n\t\t\t\tvar deepLinkData = urlProcessors[i](url);\r\n\r\n\t\t\t\tif (isDeepLinkDataValid(deepLinkData)) {\r\n\t\t\t\t\treturn deepLinkData;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction processDeepLinkData(url) {\r\n\t\t\tvar deepLinkData = getDeepLinkDataFromUrl(url);\r\n\r\n\t\t\tif (!deepLinkData) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t_deepLinkLogName = deepLinkData.Name;\r\n\t\t\tvar mapping = getValueFromObject(eFormsDeepLinkMap, deepLinkData.Name);\r\n\r\n\t\t\tif (!mapping) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!permissionsModule.CheckFormPermissions(mapping.Form.Value || mapping.Form.DefaultValue, true)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tactions = mapping.Actions;\r\n\t\t\tparseParams(mapping.Parameters, deepLinkData);\r\n\r\n\t\t\tsetRedirectData(mapping, deepLinkData);\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction processActions() {\r\n\t\t\tif (!actions) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar fxNet = require(\"fxnet/fxnet\");\r\n\r\n\t\t\tq.when(fxNet.UiRenderedPromise)\r\n\t\t\t\t.then(function () {\r\n\t\t\t\t\trequire(actions, function processResolvedActions() {\r\n\t\t\t\t\t\tvar handlers = actions.map(function getHandler(handlerName) {\r\n\t\t\t\t\t\t\tvar handler = require(handlerName);\r\n\r\n\t\t\t\t\t\t\tif (handler && handler.HandleDeepLink) {\r\n\t\t\t\t\t\t\t\treturn q.fcall(handler.HandleDeepLink, params);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\terrorManager.onWarning(\r\n\t\t\t\t\t\t\t\t\"DeepLinkHandler:processActions\",\r\n\t\t\t\t\t\t\t\t\"HandleDeepLink name:\" + _deepLinkLogName + \" params:\" + JSON.stringify(params)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tq.all(handlers)\r\n\t\t\t\t\t\t\t.then(function resolveProcessActionsPromise() {\r\n\t\t\t\t\t\t\t\tprocessActionsDefer.resolve();\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.done();\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction shouldRedirect() {\r\n\t\t\treturn isDeepLinkRedirect === true;\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction init() {\r\n\t\t\tinitializeRedirectProperties();\r\n\r\n\t\t\tvar url = locationWrapper.GetAbsoluteLocation();\r\n\r\n\t\t\tprocessDeepLinkData(url);\r\n\t\t\tpublishEvent(url);\r\n\t\t}\r\n\r\n\t\tfunction publishEvent(url) {\r\n\t\t\tvar deepLinkData = getDeepLinkDataFromUrl(url);\r\n\r\n\t\t\tif (general.isNullOrUndefined(deepLinkData)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar eventData = {};\r\n\r\n\t\t\tif (!general.isNullOrUndefined(deepLinkData.evt)) {\r\n\t\t\t\teventData.evt = deepLinkData.evt;\r\n\t\t\t}\r\n\r\n\t\t\tif (!general.isNullOrUndefined(deepLinkData.dcid)) {\r\n\t\t\t\teventData.dcid = deepLinkData.dcid;\r\n\t\t\t}\r\n\r\n\t\t\tif (!general.isNullOrUndefined(eventData.evt) || !general.isNullOrUndefined(eventData.dcid)) {\r\n\t\t\t\tko.postbox.publish(\"redirect-link-tracking\", eventData);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction handle(startUpForm, args) {\r\n\t\t\tif (!shouldRedirect()) {\r\n\t\t\t\tresetRedirectProperties(startUpForm, args);\r\n\r\n\t\t\t\treturn Object.assign(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprocessActions: general.emptyFn,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tredirectResult\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tisDeepLinkRedirect = false;\r\n\r\n\t\t\treturn Object.assign(\r\n\t\t\t\t{\r\n\t\t\t\t\tprocessActions: processActions,\r\n\t\t\t\t},\r\n\t\t\t\tredirectResult\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t//------------------------------------------\r\n\t\tfunction internalRedirect(url) {\r\n\t\t\tprocessDeepLinkData(url);\r\n\r\n\t\t\tif (!shouldRedirect()) {\r\n\t\t\t\tresetRedirectProperties(null, null);\r\n\r\n\t\t\t\treturn Object.assign(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprocessActions: general.emptyFn,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tredirectResult\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tisDeepLinkRedirect = false;\r\n\r\n\t\t\treturn Object.assign(\r\n\t\t\t\t{\r\n\t\t\t\t\tprocessActions: processActions,\r\n\t\t\t\t},\r\n\t\t\t\tredirectResult\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tInternalRedirect: internalRedirect,\r\n\t\t\tHandle: handle,\r\n\t\t\tProcessActionsCompleted: processActionsDefer.promise,\r\n\t\t};\r\n\t};\r\n});\r\n\n",
    "define(\r\n    'managers/viewsmanager',\r\n    [\r\n        \"require\",\r\n        \"jquery\",\r\n        \"knockout\",\r\n        'handlers/general',\r\n        'configuration/Containers',\r\n        'managers/historymanager',\r\n        \"initdatamanagers/Customer\",\r\n        'managers/CustomerProfileManager',\r\n        'managers/ViewsRouterManager',\r\n        'modules/permissionsmodule',\r\n        'deepLinks/DeepLinkHandler',\r\n        \"StateObject!ViewsManager\",\r\n        'devicemanagers/AlertsManager'\r\n    ],\r\n    function ViewsManager(require) {\r\n        var ko = require(\"knockout\"),\r\n            general = require('handlers/general'),\r\n            $ = require(\"jquery\"),\r\n            Containers = require('configuration/Containers'),\r\n            HistoryManager = require('managers/historymanager'),\r\n            Customer = require(\"initdatamanagers/Customer\"),\r\n            CustomerProfileManager = require('managers/CustomerProfileManager'),\r\n            ViewsRouterManager = require('managers/ViewsRouterManager'),\r\n            permissionsModule = require('modules/permissionsmodule'),\r\n            DeepLinkHandler = require('deepLinks/DeepLinkHandler'),\r\n            StateObject = require(\"StateObject!ViewsManager\"),\r\n            AlertsManager = require('devicemanagers/AlertsManager');\r\n\r\n        var forms = {},\r\n            activeForm = new Form(),\r\n            onActiveFormChanged = new TDelegate(),\r\n            activeFormType = ko.observable(),\r\n            activeFormName = ko.pureComputed(computeActiveFormName),\r\n            deepLinkHandler = new DeepLinkHandler();\r\n\r\n        //------------------------------------------------\r\n\r\n        function computeActiveFormName() {\r\n            for (var item in eForms) {\r\n                if (!eForms.hasOwnProperty(item)) {\r\n                    continue;\r\n                }\r\n\r\n                if (eForms[item] === activeFormType()) {\r\n                    return item.toLowerCase();\r\n                }\r\n            }\r\n\r\n            return '';\r\n        }\r\n\r\n        //-------------- View Properties -----------------\r\n\r\n        function View(viewState) {\r\n            var self = this;\r\n\r\n            self.state = ko.observable(viewState);\r\n            self.previousState = ko.observable();\r\n\r\n            self.visible = ko.computed(function () {\r\n                if (this.state() === eViewState.Stop)\r\n                    return false;\r\n                else\r\n                    return true;\r\n            }, self);\r\n\r\n            this.args = {};\r\n        }\r\n\r\n        //-------------- Form Properties -----------------\r\n\r\n        function Form() {\r\n            this.viewsList = {};\r\n            this.isReset = ko.observable(false).extend({ notify: 'always' });\r\n            this.args = {};\r\n            this.historicalData = false;\r\n        }\r\n\r\n        Form.prototype.SetViews = function setViews(formviews) {\r\n            for (var key in eViewTypes) {\r\n                if (eViewTypes.hasOwnProperty(key)) {\r\n                    if (formviews && formviews.contains(eViewTypes[key])) {\r\n                        //define each form with its dependent view list which is subscribed to the visibility change of the form\r\n                        this.viewsList[eViewTypes[key]] = new View(eViewState.Start);\r\n                    } else {\r\n                        //don't define a subscriber because these views never change\r\n                        this.viewsList[eViewTypes[key]] = new View(eViewState.Stop);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        Form.prototype.Reset = function reset() {\r\n            this.isReset(true);\r\n        };\r\n\r\n        Form.prototype.IsHistoricalData = function isHistoricalData(hData) {\r\n            if (general.isBooleanType(hData)) {\r\n                this.historicalData = hData;\r\n            }\r\n\r\n            return this.historicalData;\r\n        };\r\n\r\n        //-------------- Init ----------------------------\r\n\r\n        var init = function (uiVersion) {\r\n            Containers.Init(uiVersion);\r\n\r\n            setFormCollection();\r\n\r\n            HistoryManager.Init();\r\n            HistoryManager.OnStateChanged.Add(function (state) {\r\n                switch (state.type) {\r\n                    case eHistoryStateType.View:\r\n                        switchActive(state.view, state.viewArgs);\r\n                        break;\r\n\r\n                    case eHistoryStateType.Invalid:\r\n                        switchViewVisible(\r\n                            Customer.prop.startUpForm,\r\n                            {},\r\n                            function showExitAlert() {\r\n                                if (!(permissionsModule.CheckPermissions(\"commonLogout\"))) {\r\n                                    return;\r\n                                }\r\n                                AlertsManager.UpdateAlert(AlertTypes.ExitAlert);\r\n                                AlertsManager.PopAlert(AlertTypes.ExitAlert);\r\n                            }\r\n                        );\r\n\r\n                        break;\r\n\r\n                    case eHistoryStateType.CloseAlert:\r\n                        var alertToClose = AlertsManager.GetAlert(state.popupId);\r\n                        if (alertToClose && alertToClose.visible()) {\r\n                            alertToClose.hide();\r\n                        }\r\n                        break;\r\n                }\r\n            });\r\n\r\n            AlertsManager.OnShowAlert.Add(function (alertType, alertInstance) {\r\n                var subscriber = alertInstance.visible.subscribe(function (isVisible) {\r\n                    if (!isVisible) {\r\n                        subscriber.dispose();\r\n\r\n                        if (HistoryManager.HasAlert(alertType)) {\r\n                            HistoryManager.Back(alertInstance.overwriteNavFlow ? alertInstance.properties.okButtonCallback :general.emptyFn);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                if (alertInstance.properties.backFormTarget) {\r\n                    HistoryManager.ReplaceViewState(alertInstance.properties.backFormTarget);\r\n                }\r\n\r\n                // push state for back option\r\n                HistoryManager.PushPopupState(ePopupType.Alert, alertType);\r\n            });\r\n\r\n            activeFormType.subscribe(function (formId) {\r\n                onActiveFormChanged.Invoke(formId);\r\n            });\r\n\r\n            deepLinkHandler.Init();\r\n        };\r\n\r\n        var setFormCollection = function () {\r\n            for (var key in eForms) {\r\n                if (eForms.hasOwnProperty(key)) {\r\n                    forms[eForms[key]] = new Form();\r\n                    forms[eForms[key]].SetViews(Containers.Forms.Container[eForms[key]].mappedViews);\r\n                }\r\n            }\r\n\r\n            activeForm.SetViews();\r\n        };\r\n\r\n        var start = function (startUpForm) {\r\n            var args = getForm(startUpForm).args || {};\r\n            var redirectResult = deepLinkHandler.Handle(startUpForm, args);\r\n\r\n            if (redirectResult.isDeepLink) {\r\n                if (redirectResult.startUpForm != startUpForm) {\r\n                    HistoryManager.PushStartUpState(startUpForm, args);\r\n                }\r\n\r\n                HistoryManager.Start(redirectResult.startUpForm, redirectResult.args, function () {\r\n                    redirectResult.processActions();\r\n                });\r\n            } else {\r\n                HistoryManager.Start(startUpForm, args);\r\n            }\r\n\r\n            ko.postbox.publish('main-page-load');\r\n        };\r\n\r\n        //-------------- private helper Methods -----------------------------\r\n        var getActiveViews = function () {\r\n            var state,\r\n                activeViews = [];\r\n\r\n            for (var view in eViewTypes) {\r\n                if (eViewTypes.hasOwnProperty(view)) {\r\n                    state = getViewState(eViewTypes[view]);\r\n\r\n                    if (state !== eViewState.Stop) {\r\n                        activeViews.push(view);\r\n                    }\r\n                }\r\n            }\r\n\r\n            return activeViews;\r\n        };\r\n\r\n        var switchActive = function (formId, formArgs) {\r\n            if (!(permissionsModule.CheckFormPermissions(formId, true, formArgs))) {\r\n                return;\r\n            }\r\n\r\n            saveToCustomerProfile(formId);\r\n\r\n            $(document).trigger(eAppEvents.formChangeEvent);\r\n            ko.postbox.publish('active-view', formId);\r\n\r\n            activeFormType(formId);\r\n            activeForm.type = formId;\r\n            activeForm.args = formArgs;\r\n            activeForm.IsHistoricalData((Containers.Forms.Container[formId].exportSupport && Containers.Forms.Container[formId].exportSupport.historicalData) || false);\r\n\r\n            var viewsList = forms[formId].viewsList;\r\n\r\n            for (var key in viewsList) {\r\n                if (viewsList.hasOwnProperty(key)) {\r\n                    if (viewsList[key].state() === eViewState.Start ||\r\n                        activeForm.viewsList[key].state() !== viewsList[key].state() &&\r\n                        (!Containers.IndependentViews || !Containers.IndependentViews.contains(key))) {\r\n                        activeForm.viewsList[key].args = formArgs;\r\n                        activeForm.viewsList[key].previousState(activeForm.viewsList[key].state());\r\n                        activeForm.viewsList[key].state(viewsList[key].state());\r\n                    }\r\n                }\r\n            }\r\n\r\n            // refresh \r\n            activeForm.Reset();\r\n\r\n            StateObject.update(\"ActiveViews\", getActiveViews());\r\n        };\r\n\r\n        var getForm = function (form) {\r\n            return forms[form];\r\n        };\r\n\r\n        //-------------- public Methods -----------------------------\r\n\r\n        var getActiveFormView = function (view) {\r\n            return activeForm.viewsList[view];\r\n        };\r\n\r\n        var getViewArgs = function (viewType) {\r\n            var view = activeForm.viewsList[viewType];\r\n\r\n            if (!view) {\r\n                return;\r\n            }\r\n\r\n            var viewArgs = view.args || {};\r\n\r\n            return viewArgs;\r\n        };\r\n\r\n        var getViewArgsByKeyName = function (viewType, key, defaultValue) {\r\n            if (activeForm.viewsList[viewType].args && !general.isEmptyValue(activeForm.viewsList[viewType].args[key]))\r\n                return activeForm.viewsList[viewType].args[key];\r\n            else\r\n                return defaultValue;\r\n        };\r\n\r\n        var refresh = function () {\r\n            //activeForm[eViewTypes.vToolBar] && activeForm[eViewTypes.vToolBar].state(eViewState.Refresh)\r\n            for (var property in activeForm.viewsList) {\r\n                if (activeForm.viewsList.hasOwnProperty(property)) {\r\n                    if (activeForm.viewsList[property].visible()) {\r\n                        activeForm.viewsList[property].state(eViewState.Refresh);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        var reload = function (formId) {\r\n            if (!general.isDefinedType(formId)) {\r\n                formId = activeForm.type;\r\n            }\r\n            window.location = window.location.pathname + \"?view=\" + formId;\r\n        };\r\n\r\n        var goBack = function (callback) {\r\n            HistoryManager.Back(callback);\r\n        };\r\n\r\n        var goForward = function (callback) {\r\n            HistoryManager.Forward(callback);\r\n        };\r\n\r\n        var getActiveForm = function () {\r\n            return activeForm;\r\n        };\r\n\r\n        var changeState = function (view, state, args) {\r\n            if (view) {\r\n                activeForm.viewsList[view].previousState(activeForm.viewsList[view].state());\r\n\r\n                if (state == eViewState.Stop)\r\n                    activeForm.viewsList[view].args = '';\r\n                else\r\n                    activeForm.viewsList[view].args = args;\r\n\r\n                if (activeForm.viewsList[view].previousState() === state && activeForm.viewsList[view].state() === eViewState.Update) {\r\n                    activeForm.viewsList[view].state(-1);\r\n                }\r\n\r\n                activeForm.viewsList[view].state(state);\r\n            }\r\n\r\n            StateObject.set(\"ActiveViews\", getActiveViews());\r\n        };\r\n\r\n        var getViewState = function (view) {\r\n            if (view) {\r\n                return activeForm.viewsList[view].state();\r\n            }\r\n        };\r\n\r\n        var switchViewVisible = function (formId, viewArgs, switchCompleted) {\r\n            if (!(permissionsModule.CheckFormPermissions(formId, true, viewArgs))) {\r\n                return;\r\n            }\r\n            var redirectObj = ViewsRouterManager.GetFormToRedirect(formId, viewArgs);\r\n\r\n            setTimeout(function (historyManager, form, args, callback) {\r\n                historyManager.PushViewState(form, args, callback);\r\n            }, 0, HistoryManager, redirectObj.viewType, redirectObj.viewArgs, switchCompleted);\r\n        };\r\n\r\n        var saveToCustomerProfile = function (formId) {\r\n            var defaultForm = formId == eForms.Deals ? formId : Customer.prop.mainPage;\r\n            CustomerProfileManager.DefaultPage(defaultForm);\r\n        };\r\n\r\n        var redirectToURL = function (url) {\r\n            var redirectResult = deepLinkHandler.InternalRedirect(url);\r\n            var formId = redirectResult.startUpForm;\r\n            var args = redirectResult.args || {};\r\n\r\n            if (redirectResult.isDeepLink) {\r\n\r\n                if (isSwitchToRealNeeded(formId, redirectResult.mode) || isSwitchToDemoNeeded(redirectResult.mode)) {\r\n                    window.location.replace(url);\r\n                    return;\r\n                }//else\r\n\r\n                redirectToForm(formId, args, function () {\r\n                    redirectResult.processActions();\r\n                });\r\n            } else {\r\n                redirectToForm(Customer.prop.mainPage, {});\r\n            }\r\n        };\r\n\r\n        var isSwitchToDemoNeeded = function (targetAccountMode) {\r\n            return Customer.prop.isDemo === false && targetAccountMode === eAccountMode.Demo;\r\n        };\r\n\r\n        var isSwitchToRealNeeded = function (formId, targetAccountMode, viewArgs) {\r\n            return Customer.prop.isDemo === true && (\r\n                targetAccountMode === eAccountMode.Real ||\r\n                formId === eForms.Deposit ||\r\n                formId === eForms.Withdrawal ||\r\n                formId === eForms.UploadDocuments ||\r\n                (!general.isNullOrUndefined(eForms.ChangePassword) && formId === eForms.ChangePassword) ||\r\n                formId === eForms.ClientQuestionnaire ||\r\n                formId === eForms.NotificationsSettings ||\r\n                formId === eForms.Settings && (viewArgs === eViewTypes.vChangePassword || viewArgs === eViewTypes.vNotificationsSettings));\r\n        };\r\n\r\n        var isWizardView = function (viewArgs) {\r\n            return viewArgs && viewArgs.hasOwnProperty('step') && !general.isEmptyValue(viewArgs.step);\r\n        };\r\n\r\n        var switchToWizardView = function (formId, viewArgs, switchCompleted) {\r\n            if (!(permissionsModule.CheckFormPermissions(formId, true, viewArgs))) {\r\n                return;\r\n            }\r\n            var redirectObj = ViewsRouterManager.GetFormToRedirect(formId, viewArgs);\r\n\r\n            setTimeout(function (historyManager, form, args, callback) {\r\n                historyManager.PushWizardState(form, args.step, callback);\r\n            }, 0, HistoryManager, redirectObj.viewType, redirectObj.viewArgs, switchCompleted);\r\n        };\r\n\r\n        var redirectToForm = function (viewType, viewArgs, callback) {\r\n            // need to switch mode from demo to real\r\n            if (isSwitchToRealNeeded(viewType, null ,viewArgs)) {\r\n                if (!(permissionsModule.CheckFormPermissions(viewType, true, viewArgs))) {\r\n                    return;\r\n                }\r\n\r\n                var redirectPageName = Object.keys(eForms).find(function (key) { return eForms[key] === viewType });\r\n\r\n                window.location.replace(\"Account/Redirect/\" + redirectPageName);\r\n\r\n                return;\r\n            }\r\n\r\n            if (isWizardView(viewArgs)) {\r\n                return switchToWizardView(viewType, viewArgs, callback);\r\n            }\r\n\r\n            switchViewVisible(viewType, viewArgs, callback);\r\n        };\r\n\r\n        var getFormProperties = function (formType) {\r\n            formType = formType || activeFormType();\r\n\r\n            return Containers.Forms.GetItem(formType) || {};\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            Start: start,\r\n            GetFormProperties: getFormProperties,\r\n            GetActiveFormViewProperties: getActiveFormView,\r\n            // todo: replace all and test SwitchViewVisible to RedirectToForm\r\n            // deprecated: use RedirectToForm which include business and application navigation validation  rules\r\n            SwitchViewVisible: switchViewVisible,\r\n            RedirectToForm: redirectToForm,\r\n            RedirectToURL: redirectToURL,\r\n            GetViewArgs: getViewArgs,\r\n            GetViewArgsByKeyName: getViewArgsByKeyName,\r\n            Activeform: getActiveForm,\r\n            ActiveFormType: activeFormType,\r\n            ActiveFormName: activeFormName,\r\n            ChangeViewState: changeState,\r\n            GetViewState: getViewState,\r\n            Refresh: refresh,\r\n            Reload: reload,\r\n            History: {\r\n                GoBack: goBack,\r\n                GoForward: goForward\r\n            },\r\n            OnActiveFormChanged: onActiveFormChanged\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'viewmodels/ViewModelBase',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n    ],\r\n    function (require, general) {\r\n\r\n        return {\r\n            setSettings: function (child, customSettings, defaultSettings) {\r\n                customSettings = customSettings || {};\r\n\r\n                if (!general.isDefinedType(defaultSettings)) {\r\n                    child.settings = {};\r\n                }\r\n                else {\r\n                    child.settings = defaultSettings;\r\n                }\r\n                Object.assign(child.settings, customSettings);\r\n            },\r\n            getSettings: function (child) {\r\n                return child.settings;\r\n            }\r\n        };\r\n    }\r\n);\r\n\n",
    "/* global UrlResolver */\r\nvar TDALInstruments = function (ajaxer, jsonHelper, general, logger) {\r\n    var _ajaxer = ajaxer;\r\n\r\n    function getScheduleGroup(instrumentId) {\r\n        var action = \"schgrp\" + instrumentId;\r\n        var url = UrlResolver.getStaticResourcePath(action);\r\n\r\n        return _ajaxer.promises\r\n            .get(\"TDALInstruments/getScheduleGroup\", url, \"\", null, null, null, null, null, false)\r\n            .then(processResponse)\r\n            .fail(onGetScheduleGroupError);\r\n    }\r\n\r\n    function changeUiOrder(uiOrder, onLoadComplete) {\r\n        uiOrder = uiOrder || [];\r\n\r\n        _ajaxer.promises\r\n            .jsonPost(\r\n                \"dalCommon/ChangeUIOrder\",\r\n                \"api/customer/ChangeUIOrder\",\r\n                JSON.stringify(uiOrder.join(\"|\"))\r\n            )\r\n            .then(onLoadComplete).fail(\r\n                function (error) {\r\n                    ErrorManager.onError(\"TdalCommon/ChangeUIOrder\", error.message, eErrorSeverity.low);\r\n                }\r\n            );\r\n    }\r\n\r\n    function getPresets(args) {\r\n        // \"fu12-s12-fo67-br3.js\";\r\n        var action = \"\";\r\n\r\n        action += \"fu\" + args.futuresPermission;\r\n        action += \"-s\" + args.stocksPermission;\r\n        action += \"-fo\" + args.folderId;\r\n        action += \"-br\" + args.brokerId;\r\n\r\n        var url = UrlResolver.getStaticJSActionPath(\"Presets\", action);\r\n\r\n        return _ajaxer.promises\r\n            .get(\"TDALInstruments/getPresets\", url, null, null, null, null, null, null, false) //try 5 times before failing\r\n            .progress(onProgress)\r\n            .then(processResponse)\r\n            .fail(function (error) {\r\n                return onFirstFailReportAndGoToOrigin(error, url);\r\n            });\r\n    }\r\n\r\n    function onFirstFailReportAndGoToOrigin(error, url) {\r\n        ErrorManager.onError(\"TDALInstruments/getPresets\", error.message, eErrorSeverity.medium);\r\n\r\n        return _ajaxer.promises\r\n            .get(\"TDALInstruments/getPresets from origin\", url)\r\n            .progress(onProgress)\r\n            .then(processResponse)\r\n            .fail(onGetPresetsError);\r\n    }\r\n\r\n    function processResponse(responseText) {\r\n        return jsonHelper.STR2JSON(\"dalInstruments:processResponse\", responseText);\r\n    }\r\n\r\n    function onGetPresetsError(error) {\r\n        return onError(\"TDALInstruments/getPresets\", error);\r\n    }\r\n\r\n    function onGetScheduleGroupError(error) {\r\n        return onError(\"TDALInstruments/getScheduleGroup\", error);\r\n    }\r\n\r\n    function onError(methodName, error) {\r\n        ErrorManager.onError(methodName, error.message, eErrorSeverity.medium);\r\n\r\n        throw error;\r\n    }\r\n\r\n    function onProgress(status) {\r\n        status = status || {};\r\n        status.State = status.State || eAjaxerState.None;\r\n\r\n        if (status.State === eAjaxerState.Retry && general.isDefinedType(Logger)) {\r\n            var warningMessage = \"Client cache has expired - retried: \" + JSON.stringify(status);\r\n\r\n            logger.warn(\"TDALInstruments\", warningMessage, general.emptyFn, eErrorSeverity.warning);\r\n        }\r\n    }\r\n\r\n    return {\r\n        ChangeUIOrder: changeUiOrder,\r\n        GetPresets: getPresets,\r\n        GetScheduleGroup: getScheduleGroup\r\n    };\r\n};\ndefine(\"dataaccess/dalInstruments\", [\"handlers/Ajaxer\",\"JSONHelper\",\"handlers/general\",\"handlers/Logger\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (ajaxer, jsonHelper, general, logger) {\r\n\t\t\t\tvar ajx = new ajaxer();\r\n\t\t\t\treturn this.TDALInstruments(ajx, jsonHelper, general, logger);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TDALInstruments;\n    };\n}(this)));\n\n",
    "define(\r\n    'modules/FavoriteInstrumentsManager',\r\n    [\r\n        \"require\",\r\n        'enums/DataMembersPositions',\r\n        'customEnums/ViewsEnums',\r\n        'initdatamanagers/InstrumentsManager',\r\n        'dataaccess/dalInstruments',\r\n        'configuration/initconfiguration',\r\n        'handlers/general',\r\n    ],\r\n    function FavoriteInstrumentsManager(require) {\r\n        var InstrumentsManager = require('initdatamanagers/InstrumentsManager'),\r\n            dalInstruments = require('dataaccess/dalInstruments'),\r\n            general = require('handlers/general'),\r\n            initConfiguration = require('configuration/initconfiguration');\r\n\r\n        function getFavoriteInstrumentIds() {\r\n            return InstrumentsManager.GetCustomizedUiOrder().map(function (el) { return el[eQuotesUIOrder.InstrumentID]; });\r\n        }\r\n\r\n        //-----------------------------------------------------------\r\n        function addFavoriteInstrument(instrumentId, callback) {\r\n            var customizedInstruments = InstrumentsManager.GetCustomizedUiOrder();\r\n\r\n            if (isFavoriteInstrument(instrumentId)) {\r\n                if (general.isFunctionType(callback)) {\r\n                    callback(\"{\\\"status\\\": 1 }\");\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            var favoriteInstrumentIds = getFavoriteInstrumentIds();\r\n\r\n            if (favoriteInstrumentIds.length >= initConfiguration.FavoriteInstrumentsConfiguration.favoriteInstrumentsLimit) {\r\n                var message = String.format(Dictionary.GetItem(\"FavoritesList_MaximumLimitReached\"), initConfiguration.FavoriteInstrumentsConfiguration.favoriteInstrumentsLimit);\r\n\r\n                AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert, null, message, '');\r\n                AlertsManager.PopAlert(AlertTypes.SimpleClientAlert);\r\n\r\n                if (general.isFunctionType(callback)) {\r\n                    callback(\"{\\\"status\\\": 0 }\");\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            favoriteInstrumentIds.unshift(instrumentId);\r\n\r\n            var instrument = InstrumentsManager.GetInstrument(instrumentId);\r\n\r\n            if (!instrument) {\r\n                if (general.isFunctionType(callback)) {\r\n                    callback(\"{\\\"status\\\": 0 }\");\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            var instrumentData = [[instrumentId, instrument.defaultDealSize]];\r\n            customizedInstruments = instrumentData.concat(customizedInstruments);\r\n\r\n            updateCustomizedUIOrderData(customizedInstruments);\r\n            saveUIOrder(favoriteInstrumentIds, callback);\r\n        }\r\n\r\n        //-----------------------------------------------------------\r\n        function removeFavoriteInstrument(instrumentId, callback) {\r\n            if (!isFavoriteInstrument(instrumentId)) {\r\n                if (general.isFunctionType(callback)) {\r\n                    callback(\"{\\\"status\\\": 1 }\");\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            var favoriteInstrumentIds = getFavoriteInstrumentIds().filter(function (el) { return el !== instrumentId; });\r\n            var customizedInstruments = InstrumentsManager.GetCustomizedUiOrder().filter(function (el) { return el[eQuotesUIOrder.InstrumentID] != instrumentId });\r\n\r\n            updateCustomizedUIOrderData(customizedInstruments);\r\n            saveUIOrder(favoriteInstrumentIds, callback);\r\n        }\r\n\r\n        //-----------------------------------------------------------\r\n        function isFavoriteInstrument(instrumentId) {\r\n            return getFavoriteInstrumentIds().indexOf(instrumentId) >= 0;\r\n        }\r\n\r\n        //-----------------------------------------------------------\r\n        function saveUIOrder(favoriteInstrumentList, callback) {\r\n            dalInstruments.ChangeUIOrder(favoriteInstrumentList, callback);\r\n        }\r\n\r\n        //-----------------------------------------------------------\r\n        function changeUIOrder(favoriteInstrumentList, skipUpdate, callback) {\r\n            if (!favoriteInstrumentList) {\r\n                if (general.isFunctionType(callback)) {\r\n                    callback(\"{\\\"status\\\": 1 }\");\r\n                }\r\n\r\n                return;\r\n            }\r\n\r\n            var customizedInstruments = [];\r\n\r\n            for (var i = 0; i < favoriteInstrumentList.length; i++) {\r\n                var instrumentId = favoriteInstrumentList[i];\r\n                var instrument = InstrumentsManager.GetInstrument(instrumentId);\r\n\r\n                customizedInstruments.push([instrumentId, instrument.defaultDealSize]);\r\n            }\r\n\r\n            updateCustomizedUIOrderData(customizedInstruments, skipUpdate);\r\n            saveUIOrder(favoriteInstrumentList, callback);\r\n        }\r\n\r\n        //-----------------------------------------------------------\r\n        function updateCustomizedUIOrderData(uiOrder, skipUpdate) {\r\n            uiOrder = uiOrder || [];\r\n            InstrumentsManager.SetCustomizedUiOrder(uiOrder, skipUpdate);\r\n        }\r\n\r\n        return {\r\n            GetFavoriteInstrumentIds: getFavoriteInstrumentIds,\r\n            AddFavoriteInstrument: addFavoriteInstrument,\r\n            RemoveFavoriteInstrument: removeFavoriteInstrument,\r\n            IsFavoriteInstrument: isFavoriteInstrument,\r\n            ChangeUIOrder: changeUIOrder\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'handlers/languageHelper',\r\n    [\r\n        'require',\r\n        'handlers/Cookie'\r\n    ],\r\n    function LanguageHelper(require) {\r\n        var cookieHandler = require('handlers/Cookie');\r\n        //eslint-disable-next-line\r\n        var language = undefined;\r\n\r\n        function getLanguage() {\r\n            //eslint-disable-next-line\r\n            if (language !== undefined) {\r\n                return language;\r\n            } else {\r\n                language = cookieHandler.ReadCookie(\"Language\");\r\n                return language;\r\n            }\r\n        }\r\n\r\n        function isRtlLanguage() {\r\n            return ['hebrew', 'arabic'].indexOf(getLanguage().toLowerCase()) !== -1;\r\n        }\r\n\r\n        function getDirection() {\r\n            return isRtlLanguage() ? 'rtl' : 'ltr';\r\n        }\r\n\r\n        window.LanguageHelper = {\r\n            GetDirection: getDirection,\r\n            GetLanguage: getLanguage,\r\n            IsRtlLanguage: isRtlLanguage\r\n        }\r\n\r\n        return window.LanguageHelper;\r\n    }\r\n);\n",
    "define(\"managers/instrumentTranslationsManager\", [\r\n\t\"require\",\r\n\t\"generalmanagers/ErrorManager\",\r\n\t\"initdatamanagers/InstrumentsManager\",\r\n\t\"handlers/languageHelper\",\r\n\t\"Dictionary\",\r\n\t\"vendor/latinize\",\r\n], function (require) {\r\n\tvar ErrorManager = require(\"generalmanagers/ErrorManager\"),\r\n\t\tInstrumentsManager = require(\"initdatamanagers/InstrumentsManager\"),\r\n\t\tLanguageHelper = require(\"handlers/languageHelper\"),\r\n\t\tDictionary = require(\"Dictionary\"),\r\n\t\tlatinize = require(\"vendor/latinize\");\r\n\r\n\tfunction TInstrumentTranslation(instrumentId) {\r\n\t\tthis.ccyPairLong = Dictionary.GetGlobalItem(\"instr_\" + instrumentId, \"*\");\r\n\t\tthis.ccyPairShort = Dictionary.GetGlobalItem(\"instr_basic_\" + instrumentId, \"*\");\r\n\t\tthis.ccyPairOriginal = Dictionary.GetGlobalItem(\"instr_raw_\" + instrumentId, \"*\");\r\n\r\n\t\tthis.baseSymbolName = this.ccyPairOriginal.split(/\\//g)[0];\r\n\t\tthis.otherSymbolName = this.ccyPairOriginal.split(/\\//g)[1];\r\n\t}\r\n\r\n\tfunction InstrumentTranslationsManager() {\r\n\t\tfunction getTranslatedInstrument(instrumentId) {\r\n\t\t\treturn new TInstrumentTranslation(instrumentId);\r\n\t\t}\r\n\r\n\t\tfunction getTooltipByInstrumentId(instrumentId) {\r\n\t\t\tvar prefix = \"symboltooltip_\",\r\n\t\t\t\tinst = InstrumentsManager.GetInstrument(instrumentId),\r\n\t\t\t\tcontractMonthAndYear = inst.contractMonthAndYear || \"\",\r\n\t\t\t\tbaseSymbolName = inst.baseSymbolName ? inst.baseSymbolName.toLowerCase() : \"\",\r\n\t\t\t\totherSymbolName = inst.otherSymbolName ? inst.otherSymbolName.toLowerCase() : \"\";\r\n\r\n\t\t\tif (Dictionary.ValueIsEmpty(prefix + baseSymbolName + otherSymbolName)) {\r\n\t\t\t\treturn inst.baseSymbolName + \"/\" + inst.otherSymbolName;\r\n\t\t\t}\r\n\r\n\t\t\treturn (\r\n\t\t\t\tDictionary.GetGlobalItem(prefix + baseSymbolName + otherSymbolName) +\r\n\t\t\t\tbuildContractMonth(contractMonthAndYear, instrumentId)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction buildContractMonth(contractMonthAndYear, instrumentId) {\r\n\t\t\tif (!contractMonthAndYear) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar year = contractMonthAndYear.substr(-2),\r\n\t\t\t\tyearDigit = contractMonthAndYear.substr(-1),\r\n\t\t\t\tmonth = contractMonthAndYear.split(\" \")[0];\r\n\r\n\t\t\tmonth = month ? month.slice(0, 3).toUpperCase() : month;\r\n\r\n\t\t\tvar monthCodes = {\r\n\t\t\t\t\tJAN: \"F\",\r\n\t\t\t\t\tFEB: \"G\",\r\n\t\t\t\t\tMAR: \"H\",\r\n\t\t\t\t\tAPR: \"J\",\r\n\t\t\t\t\tMAY: \"K\",\r\n\t\t\t\t\tJUN: \"M\",\r\n\t\t\t\t\tJUL: \"N\",\r\n\t\t\t\t\tAUG: \"Q\",\r\n\t\t\t\t\tSEP: \"U\",\r\n\t\t\t\t\tOCT: \"V\",\r\n\t\t\t\t\tNOV: \"X\",\r\n\t\t\t\t\tDEC: \"Z\",\r\n\t\t\t\t},\r\n\t\t\t\tmonthCode = monthCodes[month];\r\n\r\n\t\t\tif (!monthCode) {\r\n\t\t\t\tmonth = \"-\";\r\n\t\t\t\tmonthCode = \"-\";\r\n\r\n\t\t\t\tErrorManager.onWarning(\r\n\t\t\t\t\t\"InstrumentTranslationsManager/buildContractMonth\",\r\n\t\t\t\t\tString.format(\r\n\t\t\t\t\t\t\"Instrument {0} does not have a valid contract month: [{1}].\",\r\n\t\t\t\t\t\tinstrumentId,\r\n\t\t\t\t\t\tcontractMonthAndYear\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\treturn String.format(\" {0}{1} {4}({2}{3}){4}\", month, year, monthCode, yearDigit, cTextMarks.Ltr);\r\n\t\t}\r\n\r\n\t\tfunction short(instId) {\r\n\t\t\tvar translation = getTranslatedInstrument(instId).ccyPairShort;\r\n\r\n\t\t\treturn addLTRMarksToNonArabicTextInRTLLanguages(translation);\r\n\t\t}\r\n\r\n\t\tfunction long(instId) {\r\n\t\t\tvar translation = getTranslatedInstrument(instId).ccyPairLong;\r\n\r\n\t\t\treturn addLTRMarksToNonArabicTextInRTLLanguages(translation);\r\n\t\t}\r\n\r\n\t\tfunction addLTRMarksToNonArabicTextInRTLLanguages(translation) {\r\n\t\t\tif (!LanguageHelper.IsRtlLanguage() || (translation && translation.isRtlText())) {\r\n\t\t\t\treturn translation;\r\n\t\t\t}\r\n\r\n\t\t\ttranslation = String.format(\"{1}{0}{1}\", translation, cTextMarks.Ltr);\r\n\t\t\treturn translation;\r\n\t\t}\r\n\r\n\t\tfunction original(instId) {\r\n\t\t\treturn getTranslatedInstrument(instId).ccyPairOriginal;\r\n\t\t}\r\n\r\n\t\tfunction getFullTextLatinized(instId) {\r\n\t\t\tvar instr = getTranslatedInstrument(instId),\r\n\t\t\t\tnoSlashName = instr.baseSymbolName + instr.otherSymbolName,\r\n\t\t\t\tinstrumentTooltip = getTooltipByInstrumentId(instId),\r\n\t\t\t\tinstrument = InstrumentsManager.GetInstrument(instId);\r\n\r\n\t\t\treturn latinize(\r\n\t\t\t\tinstr.ccyPairShort +\r\n\t\t\t\t\t\" \" +\r\n\t\t\t\t\tinstr.ccyPairLong +\r\n\t\t\t\t\t\" \" +\r\n\t\t\t\t\tnoSlashName +\r\n\t\t\t\t\t\" \" +\r\n\t\t\t\t\tinstrumentTooltip +\r\n\t\t\t\t\t(instrument ? \" \" + instrument.instrumentEnglishName : \"\")\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tGetTooltipByInstrumentId: getTooltipByInstrumentId,\r\n\t\t\tGetTranslatedInstrumentById: getTranslatedInstrument,\r\n\t\t\tLong: long,\r\n\t\t\tShort: short,\r\n\t\t\tOriginal: original,\r\n\t\t\tGetFullTextLatinized: getFullTextLatinized,\r\n\t\t};\r\n\t}\r\n\r\n\tvar module = (window.$instrumentTranslationsManager = new InstrumentTranslationsManager());\r\n\r\n\treturn module;\r\n});\r\n\n",
    "/*! jQuery UI - v1.11.4 - 2015-04-14\r\n* http://jqueryui.com\r\n* Includes: core.js, widget.js, mouse.js, position.js, draggable.js, droppable.js, resizable.js, selectable.js, sortable.js, accordion.js, autocomplete.js, button.js, datepicker.js, dialog.js, menu.js, progressbar.js, slider.js, spinner.js, tabs.js, tooltip.js, effect.js, effect-blind.js, effect-bounce.js, effect-clip.js, effect-drop.js, effect-explode.js, effect-fade.js, effect-fold.js, effect-highlight.js, effect-puff.js, effect-pulsate.js, effect-scale.js, effect-shake.js, effect-size.js, effect-slide.js, effect-transfer.js\r\n* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */\r\n\r\n(function (factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n\r\n        // AMD. Register as an anonymous module.\r\n        define('vendor/jquery-ui',[\"jquery\"], factory);\r\n    } else {\r\n\r\n        // Browser globals\r\n        factory(jQuery);\r\n    }\r\n}(function ($) {\r\n    /*!\r\n     * jQuery UI Core 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/category/ui-core/\r\n     */\r\n\r\n\r\n    // $.ui might exist from components with no dependencies, e.g., $.ui.position\r\n    $.ui = $.ui || {};\r\n\r\n    $.extend($.ui, {\r\n        version: \"1.11.4\",\r\n\r\n        keyCode: {\r\n            BACKSPACE: 8,\r\n            COMMA: 188,\r\n            DELETE: 46,\r\n            DOWN: 40,\r\n            END: 35,\r\n            ENTER: 13,\r\n            ESCAPE: 27,\r\n            HOME: 36,\r\n            LEFT: 37,\r\n            PAGE_DOWN: 34,\r\n            PAGE_UP: 33,\r\n            PERIOD: 190,\r\n            RIGHT: 39,\r\n            SPACE: 32,\r\n            TAB: 9,\r\n            UP: 38\r\n        }\r\n    });\r\n\r\n    // plugins\r\n    $.fn.extend({\r\n        scrollParent: function (includeHidden) {\r\n            var position = this.css(\"position\"),\r\n                excludeStaticParent = position === \"absolute\",\r\n                overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\r\n                scrollParent = this.parents().filter(function () {\r\n                    var parent = $(this);\r\n                    if (excludeStaticParent && parent.css(\"position\") === \"static\") {\r\n                        return false;\r\n                    }\r\n                    return overflowRegex.test(parent.css(\"overflow\") + parent.css(\"overflow-y\") + parent.css(\"overflow-x\"));\r\n                }).eq(0);\r\n\r\n            return position === \"fixed\" || !scrollParent.length ? $(this[0].ownerDocument || document) : scrollParent;\r\n        },\r\n\r\n        uniqueId: (function () {\r\n            var uuid = 0;\r\n\r\n            return function () {\r\n                return this.each(function () {\r\n                    if (!this.id) {\r\n                        this.id = \"ui-id-\" + (++uuid);\r\n                    }\r\n                });\r\n            };\r\n        })(),\r\n\r\n        removeUniqueId: function () {\r\n            return this.each(function () {\r\n                if (/^ui-id-\\d+$/.test(this.id)) {\r\n                    $(this).removeAttr(\"id\");\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    // selectors\r\n    function focusable(element, isTabIndexNotNaN) {\r\n        var map, mapName, img,\r\n            nodeName = element.nodeName.toLowerCase();\r\n        if (\"area\" === nodeName) {\r\n            map = element.parentNode;\r\n            mapName = map.name;\r\n            if (!element.href || !mapName || map.nodeName.toLowerCase() !== \"map\") {\r\n                return false;\r\n            }\r\n            img = $(\"img[usemap='#\" + mapName + \"']\")[0];\r\n            return !!img && visible(img);\r\n        }\r\n        return (/^(input|select|textarea|button|object)$/.test(nodeName) ?\r\n            !element.disabled :\r\n            \"a\" === nodeName ?\r\n                element.href || isTabIndexNotNaN :\r\n                isTabIndexNotNaN) &&\r\n            // the element and all of its ancestors must be visible\r\n            visible(element);\r\n    }\r\n\r\n    function visible(element) {\r\n        return $.expr.filters.visible(element) &&\r\n            !$(element).parents().addBack().filter(function () {\r\n                return $.css(this, \"visibility\") === \"hidden\";\r\n            }).length;\r\n    }\r\n\r\n    $.extend($.expr[\":\"], {\r\n        data: $.expr.createPseudo ?\r\n            $.expr.createPseudo(function (dataName) {\r\n                return function (elem) {\r\n                    return !!$.data(elem, dataName);\r\n                };\r\n            }) :\r\n            // support: jQuery <1.8\r\n            function (elem, i, match) {\r\n                return !!$.data(elem, match[3]);\r\n            },\r\n\r\n        focusable: function (element) {\r\n            return focusable(element, !isNaN($.attr(element, \"tabindex\")));\r\n        },\r\n\r\n        tabbable: function (element) {\r\n            var tabIndex = $.attr(element, \"tabindex\"),\r\n                isTabIndexNaN = isNaN(tabIndex);\r\n            return (isTabIndexNaN || tabIndex >= 0) && focusable(element, !isTabIndexNaN);\r\n        }\r\n    });\r\n\r\n    // support: jQuery <1.8\r\n    if (!$(\"<a>\").outerWidth(1).jquery) {\r\n        $.each([\"Width\", \"Height\"], function (i, name) {\r\n            var side = name === \"Width\" ? [\"Left\", \"Right\"] : [\"Top\", \"Bottom\"],\r\n                type = name.toLowerCase(),\r\n                orig = {\r\n                    innerWidth: $.fn.innerWidth,\r\n                    innerHeight: $.fn.innerHeight,\r\n                    outerWidth: $.fn.outerWidth,\r\n                    outerHeight: $.fn.outerHeight\r\n                };\r\n\r\n            function reduce(elem, size, border, margin) {\r\n                $.each(side, function () {\r\n                    size -= parseFloat($.css(elem, \"padding\" + this)) || 0;\r\n                    if (border) {\r\n                        size -= parseFloat($.css(elem, \"border\" + this + \"Width\")) || 0;\r\n                    }\r\n                    if (margin) {\r\n                        size -= parseFloat($.css(elem, \"margin\" + this)) || 0;\r\n                    }\r\n                });\r\n                return size;\r\n            }\r\n\r\n            $.fn[\"inner\" + name] = function (size) {\r\n                if (size === undefined) {\r\n                    return orig[\"inner\" + name].call(this);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    $(this).css(type, reduce(this, size) + \"px\");\r\n                });\r\n            };\r\n\r\n            $.fn[\"outer\" + name] = function (size, margin) {\r\n                if (typeof size !== \"number\") {\r\n                    return orig[\"outer\" + name].call(this, size);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    $(this).css(type, reduce(this, size, true, margin) + \"px\");\r\n                });\r\n            };\r\n        });\r\n    }\r\n\r\n    // support: jQuery <1.8\r\n    if (!$.fn.addBack) {\r\n        $.fn.addBack = function (selector) {\r\n            return this.add(selector == null ?\r\n                this.prevObject : this.prevObject.filter(selector)\r\n            );\r\n        };\r\n    }\r\n\r\n    // support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)\r\n    if ($(\"<a>\").data(\"a-b\", \"a\").removeData(\"a-b\").data(\"a-b\")) {\r\n        $.fn.removeData = (function (removeData) {\r\n            return function (key) {\r\n                if (arguments.length) {\r\n                    return removeData.call(this, $.camelCase(key));\r\n                } else {\r\n                    return removeData.call(this);\r\n                }\r\n            };\r\n        })($.fn.removeData);\r\n    }\r\n\r\n    // deprecated\r\n    $.ui.ie = !!/msie [\\w.]+/.exec(navigator.userAgent.toLowerCase());\r\n\r\n    $.fn.extend({\r\n        focus: (function (orig) {\r\n            return function (delay, fn) {\r\n                return typeof delay === \"number\" ?\r\n                    this.each(function () {\r\n                        var elem = this;\r\n                        setTimeout(function () {\r\n                            $(elem).focus();\r\n                            if (fn) {\r\n                                fn.call(elem);\r\n                            }\r\n                        }, delay);\r\n                    }) :\r\n                    orig.apply(this, arguments);\r\n            };\r\n        })($.fn.focus),\r\n\r\n        disableSelection: (function () {\r\n            var eventType = \"onselectstart\" in document.createElement(\"div\") ?\r\n                \"selectstart\" :\r\n                \"mousedown\";\r\n\r\n            return function () {\r\n                return this.bind(eventType + \".ui-disableSelection\", function (event) {\r\n                    event.preventDefault();\r\n                });\r\n            };\r\n        })(),\r\n\r\n        enableSelection: function () {\r\n            return this.unbind(\".ui-disableSelection\");\r\n        },\r\n\r\n        zIndex: function (zIndex) {\r\n            if (zIndex !== undefined) {\r\n                return this.css(\"zIndex\", zIndex);\r\n            }\r\n\r\n            if (this.length) {\r\n                var elem = $(this[0]), position, value;\r\n                while (elem.length && elem[0] !== document) {\r\n                    // Ignore z-index if position is set to a value where z-index is ignored by the browser\r\n                    // This makes behavior of this function consistent across browsers\r\n                    // WebKit always returns auto if the element is positioned\r\n                    position = elem.css(\"position\");\r\n                    if (position === \"absolute\" || position === \"relative\" || position === \"fixed\") {\r\n                        // IE returns 0 when zIndex is not specified\r\n                        // other browsers return a string\r\n                        // we ignore the case of nested elements with an explicit value of 0\r\n                        // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\r\n                        value = parseInt(elem.css(\"zIndex\"), 10);\r\n                        if (!isNaN(value) && value !== 0) {\r\n                            return value;\r\n                        }\r\n                    }\r\n                    elem = elem.parent();\r\n                }\r\n            }\r\n\r\n            return 0;\r\n        }\r\n    });\r\n\r\n    // $.ui.plugin is deprecated. Use $.widget() extensions instead.\r\n    $.ui.plugin = {\r\n        add: function (module, option, set) {\r\n            var i,\r\n                proto = $.ui[module].prototype;\r\n            for (i in set) {\r\n                proto.plugins[i] = proto.plugins[i] || [];\r\n                proto.plugins[i].push([option, set[i]]);\r\n            }\r\n        },\r\n        call: function (instance, name, args, allowDisconnected) {\r\n            var i,\r\n                set = instance.plugins[name];\r\n\r\n            if (!set) {\r\n                return;\r\n            }\r\n\r\n            if (!allowDisconnected && (!instance.element[0].parentNode || instance.element[0].parentNode.nodeType === 11)) {\r\n                return;\r\n            }\r\n\r\n            for (i = 0; i < set.length; i++) {\r\n                if (instance.options[set[i][0]]) {\r\n                    set[i][1].apply(instance.element, args);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Widget 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/jQuery.widget/\r\n     */\r\n\r\n\r\n    var widget_uuid = 0,\r\n        widget_slice = Array.prototype.slice;\r\n\r\n    $.cleanData = (function (orig) {\r\n        return function (elems) {\r\n            var events, elem, i;\r\n            for (i = 0; (elem = elems[i]) != null; i++) {\r\n                try {\r\n\r\n                    // Only trigger remove when necessary to save time\r\n                    events = $._data(elem, \"events\");\r\n                    if (events && events.remove) {\r\n                        $(elem).triggerHandler(\"remove\");\r\n                    }\r\n\r\n                    // http://bugs.jquery.com/ticket/8235\r\n                } catch (e) { }\r\n            }\r\n            orig(elems);\r\n        };\r\n    })($.cleanData);\r\n\r\n    $.widget = function (name, base, prototype) {\r\n        var fullName, existingConstructor, constructor, basePrototype,\r\n            // proxiedPrototype allows the provided prototype to remain unmodified\r\n            // so that it can be used as a mixin for multiple widgets (#8876)\r\n            proxiedPrototype = {},\r\n            namespace = name.split(\".\")[0];\r\n\r\n        name = name.split(\".\")[1];\r\n        fullName = namespace + \"-\" + name;\r\n\r\n        if (!prototype) {\r\n            prototype = base;\r\n            base = $.Widget;\r\n        }\r\n\r\n        // create selector for plugin\r\n        $.expr[\":\"][fullName.toLowerCase()] = function (elem) {\r\n            return !!$.data(elem, fullName);\r\n        };\r\n\r\n        $[namespace] = $[namespace] || {};\r\n        existingConstructor = $[namespace][name];\r\n        constructor = $[namespace][name] = function (options, element) {\r\n            // allow instantiation without \"new\" keyword\r\n            if (!this._createWidget) {\r\n                return new constructor(options, element);\r\n            }\r\n\r\n            // allow instantiation without initializing for simple inheritance\r\n            // must use \"new\" keyword (the code above always passes args)\r\n            if (arguments.length) {\r\n                this._createWidget(options, element);\r\n            }\r\n        };\r\n        // extend with the existing constructor to carry over any static properties\r\n        $.extend(constructor, existingConstructor, {\r\n            version: prototype.version,\r\n            // copy the object used to create the prototype in case we need to\r\n            // redefine the widget later\r\n            _proto: $.extend({}, prototype),\r\n            // track widgets that inherit from this widget in case this widget is\r\n            // redefined after a widget inherits from it\r\n            _childConstructors: []\r\n        });\r\n\r\n        basePrototype = new base();\r\n        // we need to make the options hash a property directly on the new instance\r\n        // otherwise we'll modify the options hash on the prototype that we're\r\n        // inheriting from\r\n        basePrototype.options = $.widget.extend({}, basePrototype.options);\r\n        $.each(prototype, function (prop, value) {\r\n            if (!$.isFunction(value)) {\r\n                proxiedPrototype[prop] = value;\r\n                return;\r\n            }\r\n            proxiedPrototype[prop] = (function () {\r\n                var _super = function () {\r\n                    return base.prototype[prop].apply(this, arguments);\r\n                },\r\n                    _superApply = function (args) {\r\n                        return base.prototype[prop].apply(this, args);\r\n                    };\r\n                return function () {\r\n                    var __super = this._super,\r\n                        __superApply = this._superApply,\r\n                        returnValue;\r\n\r\n                    this._super = _super;\r\n                    this._superApply = _superApply;\r\n\r\n                    returnValue = value.apply(this, arguments);\r\n\r\n                    this._super = __super;\r\n                    this._superApply = __superApply;\r\n\r\n                    return returnValue;\r\n                };\r\n            })();\r\n        });\r\n        constructor.prototype = $.widget.extend(basePrototype, {\r\n            // TODO: remove support for widgetEventPrefix\r\n            // always use the name + a colon as the prefix, e.g., draggable:start\r\n            // don't prefix for widgets that aren't DOM-based\r\n            widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name\r\n        }, proxiedPrototype, {\r\n            constructor: constructor,\r\n            namespace: namespace,\r\n            widgetName: name,\r\n            widgetFullName: fullName\r\n        });\r\n\r\n        // If this widget is being redefined then we need to find all widgets that\r\n        // are inheriting from it and redefine all of them so that they inherit from\r\n        // the new version of this widget. We're essentially trying to replace one\r\n        // level in the prototype chain.\r\n        if (existingConstructor) {\r\n            $.each(existingConstructor._childConstructors, function (i, child) {\r\n                var childPrototype = child.prototype;\r\n\r\n                // redefine the child widget using the same prototype that was\r\n                // originally used, but inherit from the new version of the base\r\n                $.widget(childPrototype.namespace + \".\" + childPrototype.widgetName, constructor, child._proto);\r\n            });\r\n            // remove the list of existing child constructors from the old constructor\r\n            // so the old child constructors can be garbage collected\r\n            delete existingConstructor._childConstructors;\r\n        } else {\r\n            base._childConstructors.push(constructor);\r\n        }\r\n\r\n        $.widget.bridge(name, constructor);\r\n\r\n        return constructor;\r\n    };\r\n\r\n    $.widget.extend = function (target) {\r\n        var input = widget_slice.call(arguments, 1),\r\n            inputIndex = 0,\r\n            inputLength = input.length,\r\n            key,\r\n            value;\r\n        for (; inputIndex < inputLength; inputIndex++) {\r\n            for (key in input[inputIndex]) {\r\n                value = input[inputIndex][key];\r\n                if (input[inputIndex].hasOwnProperty(key) && value !== undefined) {\r\n                    // Clone objects\r\n                    if ($.isPlainObject(value)) {\r\n                        target[key] = $.isPlainObject(target[key]) ?\r\n                            $.widget.extend({}, target[key], value) :\r\n                            // Don't extend strings, arrays, etc. with objects\r\n                            $.widget.extend({}, value);\r\n                        // Copy everything else by reference\r\n                    } else {\r\n                        target[key] = value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return target;\r\n    };\r\n\r\n    $.widget.bridge = function (name, object) {\r\n        var fullName = object.prototype.widgetFullName || name;\r\n        $.fn[name] = function (options) {\r\n            var isMethodCall = typeof options === \"string\",\r\n                args = widget_slice.call(arguments, 1),\r\n                returnValue = this;\r\n\r\n            if (isMethodCall) {\r\n                this.each(function () {\r\n                    var methodValue,\r\n                        instance = $.data(this, fullName);\r\n                    if (options === \"instance\") {\r\n                        returnValue = instance;\r\n                        return false;\r\n                    }\r\n                    if (!instance) {\r\n                        return $.error(\"cannot call methods on \" + name + \" prior to initialization; \" +\r\n                            \"attempted to call method '\" + options + \"'\");\r\n                    }\r\n                    if (!$.isFunction(instance[options]) || options.charAt(0) === \"_\") {\r\n                        return $.error(\"no such method '\" + options + \"' for \" + name + \" widget instance\");\r\n                    }\r\n                    methodValue = instance[options].apply(instance, args);\r\n                    if (methodValue !== instance && methodValue !== undefined) {\r\n                        returnValue = methodValue && methodValue.jquery ?\r\n                            returnValue.pushStack(methodValue.get()) :\r\n                            methodValue;\r\n                        return false;\r\n                    }\r\n                });\r\n            } else {\r\n\r\n                // Allow multiple hashes to be passed on init\r\n                if (args.length) {\r\n                    options = $.widget.extend.apply(null, [options].concat(args));\r\n                }\r\n\r\n                this.each(function () {\r\n                    var instance = $.data(this, fullName);\r\n                    if (instance) {\r\n                        instance.option(options || {});\r\n                        if (instance._init) {\r\n                            instance._init();\r\n                        }\r\n                    } else {\r\n                        $.data(this, fullName, new object(options, this));\r\n                    }\r\n                });\r\n            }\r\n\r\n            return returnValue;\r\n        };\r\n    };\r\n\r\n    $.Widget = function ( /* options, element */) { };\r\n    $.Widget._childConstructors = [];\r\n\r\n    $.Widget.prototype = {\r\n        widgetName: \"widget\",\r\n        widgetEventPrefix: \"\",\r\n        defaultElement: \"<div>\",\r\n        options: {\r\n            disabled: false,\r\n\r\n            // callbacks\r\n            create: null\r\n        },\r\n        _createWidget: function (options, element) {\r\n            element = $(element || this.defaultElement || this)[0];\r\n            this.element = $(element);\r\n            this.uuid = widget_uuid++;\r\n            this.eventNamespace = \".\" + this.widgetName + this.uuid;\r\n\r\n            this.bindings = $();\r\n            this.hoverable = $();\r\n            this.focusable = $();\r\n\r\n            if (element !== this) {\r\n                $.data(element, this.widgetFullName, this);\r\n                this._on(true, this.element, {\r\n                    remove: function (event) {\r\n                        if (event.target === element) {\r\n                            this.destroy();\r\n                        }\r\n                    }\r\n                });\r\n                this.document = $(element.style ?\r\n                    // element within the document\r\n                    element.ownerDocument :\r\n                    // element is window or document\r\n                    element.document || element);\r\n                this.window = $(this.document[0].defaultView || this.document[0].parentWindow);\r\n            }\r\n\r\n            this.options = $.widget.extend({},\r\n                this.options,\r\n                this._getCreateOptions(),\r\n                options);\r\n\r\n            this._create();\r\n            this._trigger(\"create\", null, this._getCreateEventData());\r\n            this._init();\r\n        },\r\n        _getCreateOptions: $.noop,\r\n        _getCreateEventData: $.noop,\r\n        _create: $.noop,\r\n        _init: $.noop,\r\n\r\n        destroy: function () {\r\n            this._destroy();\r\n            // we can probably remove the unbind calls in 2.0\r\n            // all event bindings should go through this._on()\r\n            this.element\r\n                .unbind(this.eventNamespace)\r\n                .removeData(this.widgetFullName)\r\n                // support: jquery <1.6.3\r\n                // http://bugs.jquery.com/ticket/9413\r\n                .removeData($.camelCase(this.widgetFullName));\r\n            this.widget()\r\n                .unbind(this.eventNamespace)\r\n                .removeAttr(\"aria-disabled\")\r\n                .removeClass(\r\n                    this.widgetFullName + \"-disabled \" +\r\n                    \"ui-state-disabled\");\r\n\r\n            // clean up events and states\r\n            this.bindings.unbind(this.eventNamespace);\r\n            this.hoverable.removeClass(\"ui-state-hover\");\r\n            this.focusable.removeClass(\"ui-state-focus\");\r\n        },\r\n        _destroy: $.noop,\r\n\r\n        widget: function () {\r\n            return this.element;\r\n        },\r\n\r\n        option: function (key, value) {\r\n            var options = key,\r\n                parts,\r\n                curOption,\r\n                i;\r\n\r\n            if (arguments.length === 0) {\r\n                // don't return a reference to the internal hash\r\n                return $.widget.extend({}, this.options);\r\n            }\r\n\r\n            if (typeof key === \"string\") {\r\n                // handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\r\n                options = {};\r\n                parts = key.split(\".\");\r\n                key = parts.shift();\r\n                if (parts.length) {\r\n                    curOption = options[key] = $.widget.extend({}, this.options[key]);\r\n                    for (i = 0; i < parts.length - 1; i++) {\r\n                        curOption[parts[i]] = curOption[parts[i]] || {};\r\n                        curOption = curOption[parts[i]];\r\n                    }\r\n                    key = parts.pop();\r\n                    if (arguments.length === 1) {\r\n                        return curOption[key] === undefined ? null : curOption[key];\r\n                    }\r\n                    curOption[key] = value;\r\n                } else {\r\n                    if (arguments.length === 1) {\r\n                        return this.options[key] === undefined ? null : this.options[key];\r\n                    }\r\n                    options[key] = value;\r\n                }\r\n            }\r\n\r\n            this._setOptions(options);\r\n\r\n            return this;\r\n        },\r\n        _setOptions: function (options) {\r\n            var key;\r\n\r\n            for (key in options) {\r\n                this._setOption(key, options[key]);\r\n            }\r\n\r\n            return this;\r\n        },\r\n        _setOption: function (key, value) {\r\n            this.options[key] = value;\r\n\r\n            if (key === \"disabled\") {\r\n                this.widget()\r\n                    .toggleClass(this.widgetFullName + \"-disabled\", !!value);\r\n\r\n                // If the widget is becoming disabled, then nothing is interactive\r\n                if (value) {\r\n                    this.hoverable.removeClass(\"ui-state-hover\");\r\n                    this.focusable.removeClass(\"ui-state-focus\");\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        enable: function () {\r\n            return this._setOptions({ disabled: false });\r\n        },\r\n        disable: function () {\r\n            return this._setOptions({ disabled: true });\r\n        },\r\n\r\n        _on: function (suppressDisabledCheck, element, handlers) {\r\n            var delegateElement,\r\n                instance = this;\r\n\r\n            // no suppressDisabledCheck flag, shuffle arguments\r\n            if (typeof suppressDisabledCheck !== \"boolean\") {\r\n                handlers = element;\r\n                element = suppressDisabledCheck;\r\n                suppressDisabledCheck = false;\r\n            }\r\n\r\n            // no element argument, shuffle and use this.element\r\n            if (!handlers) {\r\n                handlers = element;\r\n                element = this.element;\r\n                delegateElement = this.widget();\r\n            } else {\r\n                element = delegateElement = $(element);\r\n                this.bindings = this.bindings.add(element);\r\n            }\r\n\r\n            $.each(handlers, function (event, handler) {\r\n                function handlerProxy() {\r\n                    // allow widgets to customize the disabled handling\r\n                    // - disabled as an array instead of boolean\r\n                    // - disabled class as method for disabling individual parts\r\n                    if (!suppressDisabledCheck &&\r\n                        (instance.options.disabled === true ||\r\n                            $(this).hasClass(\"ui-state-disabled\"))) {\r\n                        return;\r\n                    }\r\n                    return (typeof handler === \"string\" ? instance[handler] : handler)\r\n                        .apply(instance, arguments);\r\n                }\r\n\r\n                // copy the guid so direct unbinding works\r\n                if (typeof handler !== \"string\") {\r\n                    handlerProxy.guid = handler.guid =\r\n                        handler.guid || handlerProxy.guid || $.guid++;\r\n                }\r\n\r\n                var match = event.match(/^([\\w:-]*)\\s*(.*)$/),\r\n                    eventName = match[1] + instance.eventNamespace,\r\n                    selector = match[2];\r\n                if (selector) {\r\n                    delegateElement.delegate(selector, eventName, handlerProxy);\r\n                } else {\r\n                    element.bind(eventName, handlerProxy);\r\n                }\r\n            });\r\n        },\r\n\r\n        _off: function (element, eventName) {\r\n            eventName = (eventName || \"\").split(\" \").join(this.eventNamespace + \" \") +\r\n                this.eventNamespace;\r\n            element.unbind(eventName).undelegate(eventName);\r\n\r\n            // Clear the stack to avoid memory leaks (#10056)\r\n            this.bindings = $(this.bindings.not(element).get());\r\n            this.focusable = $(this.focusable.not(element).get());\r\n            this.hoverable = $(this.hoverable.not(element).get());\r\n        },\r\n\r\n        _delay: function (handler, delay) {\r\n            function handlerProxy() {\r\n                return (typeof handler === \"string\" ? instance[handler] : handler)\r\n                    .apply(instance, arguments);\r\n            }\r\n            var instance = this;\r\n            return setTimeout(handlerProxy, delay || 0);\r\n        },\r\n\r\n        _hoverable: function (element) {\r\n            this.hoverable = this.hoverable.add(element);\r\n            this._on(element, {\r\n                mouseenter: function (event) {\r\n                    $(event.currentTarget).addClass(\"ui-state-hover\");\r\n                },\r\n                mouseleave: function (event) {\r\n                    $(event.currentTarget).removeClass(\"ui-state-hover\");\r\n                }\r\n            });\r\n        },\r\n\r\n        _focusable: function (element) {\r\n            this.focusable = this.focusable.add(element);\r\n            this._on(element, {\r\n                focusin: function (event) {\r\n                    $(event.currentTarget).addClass(\"ui-state-focus\");\r\n                },\r\n                focusout: function (event) {\r\n                    $(event.currentTarget).removeClass(\"ui-state-focus\");\r\n                }\r\n            });\r\n        },\r\n\r\n        _trigger: function (type, event, data) {\r\n            var prop, orig,\r\n                callback = this.options[type];\r\n\r\n            data = data || {};\r\n            event = $.Event(event);\r\n            event.type = (type === this.widgetEventPrefix ?\r\n                type :\r\n                this.widgetEventPrefix + type).toLowerCase();\r\n            // the original event may come from any element\r\n            // so we need to reset the target on the new event\r\n            event.target = this.element[0];\r\n\r\n            // copy original event properties over to the new event\r\n            orig = event.originalEvent;\r\n            if (orig) {\r\n                for (prop in orig) {\r\n                    if (!(prop in event)) {\r\n                        event[prop] = orig[prop];\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.element.trigger(event, data);\r\n            return !($.isFunction(callback) &&\r\n                callback.apply(this.element[0], [event].concat(data)) === false ||\r\n                event.isDefaultPrevented());\r\n        }\r\n    };\r\n\r\n    $.each({ show: \"fadeIn\", hide: \"fadeOut\" }, function (method, defaultEffect) {\r\n        $.Widget.prototype[\"_\" + method] = function (element, options, callback) {\r\n            if (typeof options === \"string\") {\r\n                options = { effect: options };\r\n            }\r\n            var hasOptions,\r\n                effectName = !options ?\r\n                    method :\r\n                    options === true || typeof options === \"number\" ?\r\n                        defaultEffect :\r\n                        options.effect || defaultEffect;\r\n            options = options || {};\r\n            if (typeof options === \"number\") {\r\n                options = { duration: options };\r\n            }\r\n            hasOptions = !$.isEmptyObject(options);\r\n            options.complete = callback;\r\n            if (options.delay) {\r\n                element.delay(options.delay);\r\n            }\r\n            if (hasOptions && $.effects && $.effects.effect[effectName]) {\r\n                element[method](options);\r\n            } else if (effectName !== method && element[effectName]) {\r\n                element[effectName](options.duration, options.easing, callback);\r\n            } else {\r\n                element.queue(function (next) {\r\n                    $(this)[method]();\r\n                    if (callback) {\r\n                        callback.call(element[0]);\r\n                    }\r\n                    next();\r\n                });\r\n            }\r\n        };\r\n    });\r\n\r\n    var widget = $.widget;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Mouse 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/mouse/\r\n     */\r\n\r\n\r\n    var mouseHandled = false;\r\n    $(document).mouseup(function () {\r\n        mouseHandled = false;\r\n    });\r\n\r\n    var mouse = $.widget(\"ui.mouse\", {\r\n        version: \"1.11.4\",\r\n        options: {\r\n            cancel: \"input,textarea,button,select,option\",\r\n            distance: 1,\r\n            delay: 0\r\n        },\r\n        _mouseInit: function () {\r\n            var that = this;\r\n\r\n            this.element\r\n                .bind(\"mousedown.\" + this.widgetName, function (event) {\r\n                    return that._mouseDown(event);\r\n                })\r\n                .bind(\"click.\" + this.widgetName, function (event) {\r\n                    if (true === $.data(event.target, that.widgetName + \".preventClickEvent\")) {\r\n                        $.removeData(event.target, that.widgetName + \".preventClickEvent\");\r\n                        event.stopImmediatePropagation();\r\n                        return false;\r\n                    }\r\n                });\r\n\r\n            this.started = false;\r\n        },\r\n\r\n        // TODO: make sure destroying one instance of mouse doesn't mess with\r\n        // other instances of mouse\r\n        _mouseDestroy: function () {\r\n            this.element.unbind(\".\" + this.widgetName);\r\n            if (this._mouseMoveDelegate) {\r\n                this.document\r\n                    .unbind(\"mousemove.\" + this.widgetName, this._mouseMoveDelegate)\r\n                    .unbind(\"mouseup.\" + this.widgetName, this._mouseUpDelegate);\r\n            }\r\n        },\r\n\r\n        _mouseDown: function (event) {\r\n            // don't let more than one widget handle mouseStart\r\n            if (mouseHandled) {\r\n                return;\r\n            }\r\n\r\n            this._mouseMoved = false;\r\n\r\n            // we may have missed mouseup (out of window)\r\n            (this._mouseStarted && this._mouseUp(event));\r\n\r\n            this._mouseDownEvent = event;\r\n\r\n            var that = this,\r\n                btnIsLeft = (event.which === 1),\r\n                // event.target.nodeName works around a bug in IE 8 with\r\n                // disabled inputs (#7620)\r\n                elIsCancel = (typeof this.options.cancel === \"string\" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);\r\n            if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {\r\n                return true;\r\n            }\r\n\r\n            this.mouseDelayMet = !this.options.delay;\r\n            if (!this.mouseDelayMet) {\r\n                this._mouseDelayTimer = setTimeout(function () {\r\n                    that.mouseDelayMet = true;\r\n                }, this.options.delay);\r\n            }\r\n\r\n            if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\r\n                this._mouseStarted = (this._mouseStart(event) !== false);\r\n                if (!this._mouseStarted) {\r\n                    event.preventDefault();\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            // Click event may never have fired (Gecko & Opera)\r\n            if (true === $.data(event.target, this.widgetName + \".preventClickEvent\")) {\r\n                $.removeData(event.target, this.widgetName + \".preventClickEvent\");\r\n            }\r\n\r\n            // these delegates are required to keep context\r\n            this._mouseMoveDelegate = function (event) {\r\n                return that._mouseMove(event);\r\n            };\r\n            this._mouseUpDelegate = function (event) {\r\n                return that._mouseUp(event);\r\n            };\r\n\r\n            this.document\r\n                .bind(\"mousemove.\" + this.widgetName, this._mouseMoveDelegate)\r\n                .bind(\"mouseup.\" + this.widgetName, this._mouseUpDelegate);\r\n\r\n            event.preventDefault();\r\n\r\n            mouseHandled = true;\r\n            return true;\r\n        },\r\n\r\n        _mouseMove: function (event) {\r\n            // Only check for mouseups outside the document if you've moved inside the document\r\n            // at least once. This prevents the firing of mouseup in the case of IE<9, which will\r\n            // fire a mousemove event if content is placed under the cursor. See #7778\r\n            // Support: IE <9\r\n            if (this._mouseMoved) {\r\n                // IE mouseup check - mouseup happened when mouse was out of window\r\n                if ($.ui.ie && (!document.documentMode || document.documentMode < 9) && !event.button) {\r\n                    return this._mouseUp(event);\r\n\r\n                    // Iframe mouseup check - mouseup occurred in another document\r\n                } else if (!event.which) {\r\n                    return this._mouseUp(event);\r\n                }\r\n            }\r\n\r\n            if (event.which || event.button) {\r\n                this._mouseMoved = true;\r\n            }\r\n\r\n            if (this._mouseStarted) {\r\n                this._mouseDrag(event);\r\n                return event.preventDefault();\r\n            }\r\n\r\n            if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {\r\n                this._mouseStarted =\r\n                    (this._mouseStart(this._mouseDownEvent, event) !== false);\r\n                (this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));\r\n            }\r\n\r\n            return !this._mouseStarted;\r\n        },\r\n\r\n        _mouseUp: function (event) {\r\n            this.document\r\n                .unbind(\"mousemove.\" + this.widgetName, this._mouseMoveDelegate)\r\n                .unbind(\"mouseup.\" + this.widgetName, this._mouseUpDelegate);\r\n\r\n            if (this._mouseStarted) {\r\n                this._mouseStarted = false;\r\n\r\n                if (event.target === this._mouseDownEvent.target) {\r\n                    $.data(event.target, this.widgetName + \".preventClickEvent\", true);\r\n                }\r\n\r\n                this._mouseStop(event);\r\n            }\r\n\r\n            mouseHandled = false;\r\n            return false;\r\n        },\r\n\r\n        _mouseDistanceMet: function (event) {\r\n            return (Math.max(\r\n                Math.abs(this._mouseDownEvent.pageX - event.pageX),\r\n                Math.abs(this._mouseDownEvent.pageY - event.pageY)\r\n            ) >= this.options.distance\r\n            );\r\n        },\r\n\r\n        _mouseDelayMet: function (/* event */) {\r\n            return this.mouseDelayMet;\r\n        },\r\n\r\n        // These are placeholder methods, to be overriden by extending plugin\r\n        _mouseStart: function (/* event */) { },\r\n        _mouseDrag: function (/* event */) { },\r\n        _mouseStop: function (/* event */) { },\r\n        _mouseCapture: function (/* event */) { return true; }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Position 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/position/\r\n     */\r\n\r\n    (function () {\r\n\r\n        $.ui = $.ui || {};\r\n\r\n        var cachedScrollbarWidth, supportsOffsetFractions,\r\n            max = Math.max,\r\n            abs = Math.abs,\r\n            round = Math.round,\r\n            rhorizontal = /left|center|right/,\r\n            rvertical = /top|center|bottom/,\r\n            roffset = /[\\+\\-]\\d+(\\.[\\d]+)?%?/,\r\n            rposition = /^\\w+/,\r\n            rpercent = /%$/,\r\n            _position = $.fn.position;\r\n\r\n        function getOffsets(offsets, width, height) {\r\n            return [\r\n                parseFloat(offsets[0]) * (rpercent.test(offsets[0]) ? width / 100 : 1),\r\n                parseFloat(offsets[1]) * (rpercent.test(offsets[1]) ? height / 100 : 1)\r\n            ];\r\n        }\r\n\r\n        function parseCss(element, property) {\r\n            return parseInt($.css(element, property), 10) || 0;\r\n        }\r\n\r\n        function getDimensions(elem) {\r\n            var raw = elem[0];\r\n            if (raw.nodeType === 9) {\r\n                return {\r\n                    width: elem.width(),\r\n                    height: elem.height(),\r\n                    offset: { top: 0, left: 0 }\r\n                };\r\n            }\r\n            if ($.isWindow(raw)) {\r\n                return {\r\n                    width: elem.width(),\r\n                    height: elem.height(),\r\n                    offset: { top: elem.scrollTop(), left: elem.scrollLeft() }\r\n                };\r\n            }\r\n            if (raw.preventDefault) {\r\n                return {\r\n                    width: 0,\r\n                    height: 0,\r\n                    offset: { top: raw.pageY, left: raw.pageX }\r\n                };\r\n            }\r\n            return {\r\n                width: elem.outerWidth(),\r\n                height: elem.outerHeight(),\r\n                offset: elem.offset()\r\n            };\r\n        }\r\n\r\n        $.position = {\r\n            scrollbarWidth: function () {\r\n                if (cachedScrollbarWidth !== undefined) {\r\n                    return cachedScrollbarWidth;\r\n                }\r\n                var w1, w2,\r\n                    div = $(\"<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>\"),\r\n                    innerDiv = div.children()[0];\r\n\r\n                $(\"body\").append(div);\r\n                w1 = innerDiv.offsetWidth;\r\n                div.css(\"overflow\", \"scroll\");\r\n\r\n                w2 = innerDiv.offsetWidth;\r\n\r\n                if (w1 === w2) {\r\n                    w2 = div[0].clientWidth;\r\n                }\r\n\r\n                div.remove();\r\n\r\n                return (cachedScrollbarWidth = w1 - w2);\r\n            },\r\n            getScrollInfo: function (within) {\r\n                var overflowX = within.isWindow || within.isDocument ? \"\" :\r\n                    within.element.css(\"overflow-x\"),\r\n                    overflowY = within.isWindow || within.isDocument ? \"\" :\r\n                        within.element.css(\"overflow-y\"),\r\n                    hasOverflowX = overflowX === \"scroll\" ||\r\n                        (overflowX === \"auto\" && within.width < within.element[0].scrollWidth),\r\n                    hasOverflowY = overflowY === \"scroll\" ||\r\n                        (overflowY === \"auto\" && within.height < within.element[0].scrollHeight);\r\n                return {\r\n                    width: hasOverflowY ? $.position.scrollbarWidth() : 0,\r\n                    height: hasOverflowX ? $.position.scrollbarWidth() : 0\r\n                };\r\n            },\r\n            getWithinInfo: function (element) {\r\n                var withinElement = $(element || window),\r\n                    isWindow = $.isWindow(withinElement[0]),\r\n                    isDocument = !!withinElement[0] && withinElement[0].nodeType === 9;\r\n                return {\r\n                    element: withinElement,\r\n                    isWindow: isWindow,\r\n                    isDocument: isDocument,\r\n                    offset: withinElement.offset() || { left: 0, top: 0 },\r\n                    scrollLeft: withinElement.scrollLeft(),\r\n                    scrollTop: withinElement.scrollTop(),\r\n\r\n                    // support: jQuery 1.6.x\r\n                    // jQuery 1.6 doesn't support .outerWidth/Height() on documents or windows\r\n                    width: isWindow || isDocument ? withinElement.width() : withinElement.outerWidth(),\r\n                    height: isWindow || isDocument ? withinElement.height() : withinElement.outerHeight()\r\n                };\r\n            }\r\n        };\r\n\r\n        $.fn.position = function (options) {\r\n            if (!options || !options.of) {\r\n                return _position.apply(this, arguments);\r\n            }\r\n\r\n            // make a copy, we don't want to modify arguments\r\n            options = $.extend({}, options);\r\n\r\n            var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,\r\n                target = $(options.of),\r\n                within = $.position.getWithinInfo(options.within),\r\n                scrollInfo = $.position.getScrollInfo(within),\r\n                collision = (options.collision || \"flip\").split(\" \"),\r\n                offsets = {};\r\n\r\n            dimensions = getDimensions(target);\r\n            if (target[0].preventDefault) {\r\n                // force left top to allow flipping\r\n                options.at = \"left top\";\r\n            }\r\n            targetWidth = dimensions.width;\r\n            targetHeight = dimensions.height;\r\n            targetOffset = dimensions.offset;\r\n            // clone to reuse original targetOffset later\r\n            basePosition = $.extend({}, targetOffset);\r\n\r\n            // force my and at to have valid horizontal and vertical positions\r\n            // if a value is missing or invalid, it will be converted to center\r\n            $.each([\"my\", \"at\"], function () {\r\n                var pos = (options[this] || \"\").split(\" \"),\r\n                    horizontalOffset,\r\n                    verticalOffset;\r\n\r\n                if (pos.length === 1) {\r\n                    pos = rhorizontal.test(pos[0]) ?\r\n                        pos.concat([\"center\"]) :\r\n                        rvertical.test(pos[0]) ?\r\n                            [\"center\"].concat(pos) :\r\n                            [\"center\", \"center\"];\r\n                }\r\n                pos[0] = rhorizontal.test(pos[0]) ? pos[0] : \"center\";\r\n                pos[1] = rvertical.test(pos[1]) ? pos[1] : \"center\";\r\n\r\n                // calculate offsets\r\n                horizontalOffset = roffset.exec(pos[0]);\r\n                verticalOffset = roffset.exec(pos[1]);\r\n                offsets[this] = [\r\n                    horizontalOffset ? horizontalOffset[0] : 0,\r\n                    verticalOffset ? verticalOffset[0] : 0\r\n                ];\r\n\r\n                // reduce to just the positions without the offsets\r\n                options[this] = [\r\n                    rposition.exec(pos[0])[0],\r\n                    rposition.exec(pos[1])[0]\r\n                ];\r\n            });\r\n\r\n            // normalize collision option\r\n            if (collision.length === 1) {\r\n                collision[1] = collision[0];\r\n            }\r\n\r\n            if (options.at[0] === \"right\") {\r\n                basePosition.left += targetWidth;\r\n            } else if (options.at[0] === \"center\") {\r\n                basePosition.left += targetWidth / 2;\r\n            }\r\n\r\n            if (options.at[1] === \"bottom\") {\r\n                basePosition.top += targetHeight;\r\n            } else if (options.at[1] === \"center\") {\r\n                basePosition.top += targetHeight / 2;\r\n            }\r\n\r\n            atOffset = getOffsets(offsets.at, targetWidth, targetHeight);\r\n            basePosition.left += atOffset[0];\r\n            basePosition.top += atOffset[1];\r\n\r\n            return this.each(function () {\r\n                var collisionPosition, using,\r\n                    elem = $(this),\r\n                    elemWidth = elem.outerWidth(),\r\n                    elemHeight = elem.outerHeight(),\r\n                    marginLeft = parseCss(this, \"marginLeft\"),\r\n                    marginTop = parseCss(this, \"marginTop\"),\r\n                    collisionWidth = elemWidth + marginLeft + parseCss(this, \"marginRight\") + scrollInfo.width,\r\n                    collisionHeight = elemHeight + marginTop + parseCss(this, \"marginBottom\") + scrollInfo.height,\r\n                    position = $.extend({}, basePosition),\r\n                    myOffset = getOffsets(offsets.my, elem.outerWidth(), elem.outerHeight());\r\n\r\n                if (options.my[0] === \"right\") {\r\n                    position.left -= elemWidth;\r\n                } else if (options.my[0] === \"center\") {\r\n                    position.left -= elemWidth / 2;\r\n                }\r\n\r\n                if (options.my[1] === \"bottom\") {\r\n                    position.top -= elemHeight;\r\n                } else if (options.my[1] === \"center\") {\r\n                    position.top -= elemHeight / 2;\r\n                }\r\n\r\n                position.left += myOffset[0];\r\n                position.top += myOffset[1];\r\n\r\n                // if the browser doesn't support fractions, then round for consistent results\r\n                if (!supportsOffsetFractions) {\r\n                    position.left = round(position.left);\r\n                    position.top = round(position.top);\r\n                }\r\n\r\n                collisionPosition = {\r\n                    marginLeft: marginLeft,\r\n                    marginTop: marginTop\r\n                };\r\n\r\n                $.each([\"left\", \"top\"], function (i, dir) {\r\n                    if ($.ui.position[collision[i]]) {\r\n                        $.ui.position[collision[i]][dir](position, {\r\n                            targetWidth: targetWidth,\r\n                            targetHeight: targetHeight,\r\n                            elemWidth: elemWidth,\r\n                            elemHeight: elemHeight,\r\n                            collisionPosition: collisionPosition,\r\n                            collisionWidth: collisionWidth,\r\n                            collisionHeight: collisionHeight,\r\n                            offset: [atOffset[0] + myOffset[0], atOffset[1] + myOffset[1]],\r\n                            my: options.my,\r\n                            at: options.at,\r\n                            within: within,\r\n                            elem: elem\r\n                        });\r\n                    }\r\n                });\r\n\r\n                if (options.using) {\r\n                    // adds feedback as second argument to using callback, if present\r\n                    using = function (props) {\r\n                        var left = targetOffset.left - position.left,\r\n                            right = left + targetWidth - elemWidth,\r\n                            top = targetOffset.top - position.top,\r\n                            bottom = top + targetHeight - elemHeight,\r\n                            feedback = {\r\n                                target: {\r\n                                    element: target,\r\n                                    left: targetOffset.left,\r\n                                    top: targetOffset.top,\r\n                                    width: targetWidth,\r\n                                    height: targetHeight\r\n                                },\r\n                                element: {\r\n                                    element: elem,\r\n                                    left: position.left,\r\n                                    top: position.top,\r\n                                    width: elemWidth,\r\n                                    height: elemHeight\r\n                                },\r\n                                horizontal: right < 0 ? \"left\" : left > 0 ? \"right\" : \"center\",\r\n                                vertical: bottom < 0 ? \"top\" : top > 0 ? \"bottom\" : \"middle\"\r\n                            };\r\n                        if (targetWidth < elemWidth && abs(left + right) < targetWidth) {\r\n                            feedback.horizontal = \"center\";\r\n                        }\r\n                        if (targetHeight < elemHeight && abs(top + bottom) < targetHeight) {\r\n                            feedback.vertical = \"middle\";\r\n                        }\r\n                        if (max(abs(left), abs(right)) > max(abs(top), abs(bottom))) {\r\n                            feedback.important = \"horizontal\";\r\n                        } else {\r\n                            feedback.important = \"vertical\";\r\n                        }\r\n                        options.using.call(this, props, feedback);\r\n                    };\r\n                }\r\n\r\n                elem.offset($.extend(position, { using: using }));\r\n            });\r\n        };\r\n\r\n        $.ui.position = {\r\n            fit: {\r\n                left: function (position, data) {\r\n                    var within = data.within,\r\n                        withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,\r\n                        outerWidth = within.width,\r\n                        collisionPosLeft = position.left - data.collisionPosition.marginLeft,\r\n                        overLeft = withinOffset - collisionPosLeft,\r\n                        overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,\r\n                        newOverRight;\r\n\r\n                    // element is wider than within\r\n                    if (data.collisionWidth > outerWidth) {\r\n                        // element is initially over the left side of within\r\n                        if (overLeft > 0 && overRight <= 0) {\r\n                            newOverRight = position.left + overLeft + data.collisionWidth - outerWidth - withinOffset;\r\n                            position.left += overLeft - newOverRight;\r\n                            // element is initially over right side of within\r\n                        } else if (overRight > 0 && overLeft <= 0) {\r\n                            position.left = withinOffset;\r\n                            // element is initially over both left and right sides of within\r\n                        } else {\r\n                            if (overLeft > overRight) {\r\n                                position.left = withinOffset + outerWidth - data.collisionWidth;\r\n                            } else {\r\n                                position.left = withinOffset;\r\n                            }\r\n                        }\r\n                        // too far left -> align with left edge\r\n                    } else if (overLeft > 0) {\r\n                        position.left += overLeft;\r\n                        // too far right -> align with right edge\r\n                    } else if (overRight > 0) {\r\n                        position.left -= overRight;\r\n                        // adjust based on position and margin\r\n                    } else {\r\n                        position.left = max(position.left - collisionPosLeft, position.left);\r\n                    }\r\n                },\r\n                top: function (position, data) {\r\n                    var within = data.within,\r\n                        withinOffset = within.isWindow ? within.scrollTop : within.offset.top,\r\n                        outerHeight = data.within.height,\r\n                        collisionPosTop = position.top - data.collisionPosition.marginTop,\r\n                        overTop = withinOffset - collisionPosTop,\r\n                        overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,\r\n                        newOverBottom;\r\n\r\n                    // element is taller than within\r\n                    if (data.collisionHeight > outerHeight) {\r\n                        // element is initially over the top of within\r\n                        if (overTop > 0 && overBottom <= 0) {\r\n                            newOverBottom = position.top + overTop + data.collisionHeight - outerHeight - withinOffset;\r\n                            position.top += overTop - newOverBottom;\r\n                            // element is initially over bottom of within\r\n                        } else if (overBottom > 0 && overTop <= 0) {\r\n                            position.top = withinOffset;\r\n                            // element is initially over both top and bottom of within\r\n                        } else {\r\n                            if (overTop > overBottom) {\r\n                                position.top = withinOffset + outerHeight - data.collisionHeight;\r\n                            } else {\r\n                                position.top = withinOffset;\r\n                            }\r\n                        }\r\n                        // too far up -> align with top\r\n                    } else if (overTop > 0) {\r\n                        position.top += overTop;\r\n                        // too far down -> align with bottom edge\r\n                    } else if (overBottom > 0) {\r\n                        position.top -= overBottom;\r\n                        // adjust based on position and margin\r\n                    } else {\r\n                        position.top = max(position.top - collisionPosTop, position.top);\r\n                    }\r\n                }\r\n            },\r\n            flip: {\r\n                left: function (position, data) {\r\n                    var within = data.within,\r\n                        withinOffset = within.offset.left + within.scrollLeft,\r\n                        outerWidth = within.width,\r\n                        offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,\r\n                        collisionPosLeft = position.left - data.collisionPosition.marginLeft,\r\n                        overLeft = collisionPosLeft - offsetLeft,\r\n                        overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,\r\n                        myOffset = data.my[0] === \"left\" ?\r\n                            -data.elemWidth :\r\n                            data.my[0] === \"right\" ?\r\n                                data.elemWidth :\r\n                                0,\r\n                        atOffset = data.at[0] === \"left\" ?\r\n                            data.targetWidth :\r\n                            data.at[0] === \"right\" ?\r\n                                -data.targetWidth :\r\n                                0,\r\n                        offset = -2 * data.offset[0],\r\n                        newOverRight,\r\n                        newOverLeft;\r\n\r\n                    if (overLeft < 0) {\r\n                        newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth - outerWidth - withinOffset;\r\n                        if (newOverRight < 0 || newOverRight < abs(overLeft)) {\r\n                            position.left += myOffset + atOffset + offset;\r\n                        }\r\n                    } else if (overRight > 0) {\r\n                        newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset + atOffset + offset - offsetLeft;\r\n                        if (newOverLeft > 0 || abs(newOverLeft) < overRight) {\r\n                            position.left += myOffset + atOffset + offset;\r\n                        }\r\n                    }\r\n                },\r\n                top: function (position, data) {\r\n                    var within = data.within,\r\n                        withinOffset = within.offset.top + within.scrollTop,\r\n                        outerHeight = within.height,\r\n                        offsetTop = within.isWindow ? within.scrollTop : within.offset.top,\r\n                        collisionPosTop = position.top - data.collisionPosition.marginTop,\r\n                        overTop = collisionPosTop - offsetTop,\r\n                        overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,\r\n                        top = data.my[1] === \"top\",\r\n                        myOffset = top ?\r\n                            -data.elemHeight :\r\n                            data.my[1] === \"bottom\" ?\r\n                                data.elemHeight :\r\n                                0,\r\n                        atOffset = data.at[1] === \"top\" ?\r\n                            data.targetHeight :\r\n                            data.at[1] === \"bottom\" ?\r\n                                -data.targetHeight :\r\n                                0,\r\n                        offset = -2 * data.offset[1],\r\n                        newOverTop,\r\n                        newOverBottom;\r\n                    if (overTop < 0) {\r\n                        newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight - outerHeight - withinOffset;\r\n                        if (newOverBottom < 0 || newOverBottom < abs(overTop)) {\r\n                            position.top += myOffset + atOffset + offset;\r\n                        }\r\n                    } else if (overBottom > 0) {\r\n                        newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset + offset - offsetTop;\r\n                        if (newOverTop > 0 || abs(newOverTop) < overBottom) {\r\n                            position.top += myOffset + atOffset + offset;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            flipfit: {\r\n                left: function () {\r\n                    $.ui.position.flip.left.apply(this, arguments);\r\n                    $.ui.position.fit.left.apply(this, arguments);\r\n                },\r\n                top: function () {\r\n                    $.ui.position.flip.top.apply(this, arguments);\r\n                    $.ui.position.fit.top.apply(this, arguments);\r\n                }\r\n            }\r\n        };\r\n\r\n        // fraction support test\r\n        (function () {\r\n            var testElement, testElementParent, testElementStyle, offsetLeft, i,\r\n                body = document.getElementsByTagName(\"body\")[0],\r\n                div = document.createElement(\"div\");\r\n\r\n            //Create a \"fake body\" for testing based on method used in jQuery.support\r\n            testElement = document.createElement(body ? \"div\" : \"body\");\r\n            testElementStyle = {\r\n                visibility: \"hidden\",\r\n                width: 0,\r\n                height: 0,\r\n                border: 0,\r\n                margin: 0,\r\n                background: \"none\"\r\n            };\r\n            if (body) {\r\n                $.extend(testElementStyle, {\r\n                    position: \"absolute\",\r\n                    left: \"-1000px\",\r\n                    top: \"-1000px\"\r\n                });\r\n            }\r\n            for (i in testElementStyle) {\r\n                testElement.style[i] = testElementStyle[i];\r\n            }\r\n            testElement.appendChild(div);\r\n            testElementParent = body || document.documentElement;\r\n            testElementParent.insertBefore(testElement, testElementParent.firstChild);\r\n\r\n            div.style.cssText = \"position: absolute; left: 10.7432222px;\";\r\n\r\n            offsetLeft = $(div).offset().left;\r\n            supportsOffsetFractions = offsetLeft > 10 && offsetLeft < 11;\r\n\r\n            testElement.innerHTML = \"\";\r\n            testElementParent.removeChild(testElement);\r\n        })();\r\n\r\n    })();\r\n\r\n    var position = $.ui.position;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Draggable 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/draggable/\r\n     */\r\n\r\n\r\n    $.widget(\"ui.draggable\", $.ui.mouse, {\r\n        version: \"1.11.4\",\r\n        widgetEventPrefix: \"drag\",\r\n        options: {\r\n            addClasses: true,\r\n            appendTo: \"parent\",\r\n            axis: false,\r\n            connectToSortable: false,\r\n            containment: false,\r\n            cursor: \"auto\",\r\n            cursorAt: false,\r\n            grid: false,\r\n            handle: false,\r\n            helper: \"original\",\r\n            iframeFix: false,\r\n            opacity: false,\r\n            refreshPositions: false,\r\n            revert: false,\r\n            revertDuration: 500,\r\n            scope: \"default\",\r\n            scroll: true,\r\n            scrollSensitivity: 20,\r\n            scrollSpeed: 20,\r\n            snap: false,\r\n            snapMode: \"both\",\r\n            snapTolerance: 20,\r\n            stack: false,\r\n            zIndex: false,\r\n\r\n            // callbacks\r\n            drag: null,\r\n            start: null,\r\n            stop: null\r\n        },\r\n        _create: function () {\r\n\r\n            if (this.options.helper === \"original\") {\r\n                this._setPositionRelative();\r\n            }\r\n            if (this.options.addClasses) {\r\n                this.element.addClass(\"ui-draggable\");\r\n            }\r\n            if (this.options.disabled) {\r\n                this.element.addClass(\"ui-draggable-disabled\");\r\n            }\r\n            this._setHandleClassName();\r\n\r\n            this._mouseInit();\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            this._super(key, value);\r\n            if (key === \"handle\") {\r\n                this._removeHandleClassName();\r\n                this._setHandleClassName();\r\n            }\r\n        },\r\n\r\n        _destroy: function () {\r\n            if ((this.helper || this.element).is(\".ui-draggable-dragging\")) {\r\n                this.destroyOnClear = true;\r\n                return;\r\n            }\r\n            this.element.removeClass(\"ui-draggable ui-draggable-dragging ui-draggable-disabled\");\r\n            this._removeHandleClassName();\r\n            this._mouseDestroy();\r\n        },\r\n\r\n        _mouseCapture: function (event) {\r\n            var o = this.options;\r\n\r\n            this._blurActiveElement(event);\r\n\r\n            // among others, prevent a drag on a resizable-handle\r\n            if (this.helper || o.disabled || $(event.target).closest(\".ui-resizable-handle\").length > 0) {\r\n                return false;\r\n            }\r\n\r\n            //Quit if we're not on a valid handle\r\n            this.handle = this._getHandle(event);\r\n            if (!this.handle) {\r\n                return false;\r\n            }\r\n\r\n            this._blockFrames(o.iframeFix === true ? \"iframe\" : o.iframeFix);\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n        _blockFrames: function (selector) {\r\n            this.iframeBlocks = this.document.find(selector).map(function () {\r\n                var iframe = $(this);\r\n\r\n                return $(\"<div>\")\r\n                    .css(\"position\", \"absolute\")\r\n                    .appendTo(iframe.parent())\r\n                    .outerWidth(iframe.outerWidth())\r\n                    .outerHeight(iframe.outerHeight())\r\n                    .offset(iframe.offset())[0];\r\n            });\r\n        },\r\n\r\n        _unblockFrames: function () {\r\n            if (this.iframeBlocks) {\r\n                this.iframeBlocks.remove();\r\n                delete this.iframeBlocks;\r\n            }\r\n        },\r\n\r\n        _blurActiveElement: function (event) {\r\n            var document = this.document[0];\r\n\r\n            // Only need to blur if the event occurred on the draggable itself, see #10527\r\n            if (!this.handleElement.is(event.target)) {\r\n                return;\r\n            }\r\n\r\n            // support: IE9\r\n            // IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\r\n            try {\r\n\r\n                // Support: IE9, IE10\r\n                // If the <body> is blurred, IE will switch windows, see #9520\r\n                if (document.activeElement && document.activeElement.nodeName.toLowerCase() !== \"body\") {\r\n\r\n                    // Blur any element that currently has focus, see #4261\r\n                    $(document.activeElement).blur();\r\n                }\r\n            } catch (error) { }\r\n        },\r\n\r\n        _mouseStart: function (event) {\r\n\r\n            var o = this.options;\r\n\r\n            //Create and append the visible helper\r\n            this.helper = this._createHelper(event);\r\n\r\n            this.helper.addClass(\"ui-draggable-dragging\");\r\n\r\n            //Cache the helper size\r\n            this._cacheHelperProportions();\r\n\r\n            //If ddmanager is used for droppables, set the global draggable\r\n            if ($.ui.ddmanager) {\r\n                $.ui.ddmanager.current = this;\r\n            }\r\n\r\n            /*\r\n             * - Position generation -\r\n             * This block generates everything position related - it's the core of draggables.\r\n             */\r\n\r\n            //Cache the margins of the original element\r\n            this._cacheMargins();\r\n\r\n            //Store the helper's css position\r\n            this.cssPosition = this.helper.css(\"position\");\r\n            this.scrollParent = this.helper.scrollParent(true);\r\n            this.offsetParent = this.helper.offsetParent();\r\n            this.hasFixedAncestor = this.helper.parents().filter(function () {\r\n                return $(this).css(\"position\") === \"fixed\";\r\n            }).length > 0;\r\n\r\n            //The element's absolute position on the page minus margins\r\n            this.positionAbs = this.element.offset();\r\n            this._refreshOffsets(event);\r\n\r\n            //Generate the original position\r\n            this.originalPosition = this.position = this._generatePosition(event, false);\r\n            this.originalPageX = event.pageX;\r\n            this.originalPageY = event.pageY;\r\n\r\n            //Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\r\n            (o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\r\n\r\n            //Set a containment if given in the options\r\n            this._setContainment();\r\n\r\n            //Trigger event + callbacks\r\n            if (this._trigger(\"start\", event) === false) {\r\n                this._clear();\r\n                return false;\r\n            }\r\n\r\n            //Recache the helper size\r\n            this._cacheHelperProportions();\r\n\r\n            //Prepare the droppable offsets\r\n            if ($.ui.ddmanager && !o.dropBehaviour) {\r\n                $.ui.ddmanager.prepareOffsets(this, event);\r\n            }\r\n\r\n            // Reset helper's right/bottom css if they're set and set explicit width/height instead\r\n            // as this prevents resizing of elements with right/bottom set (see #7772)\r\n            this._normalizeRightBottom();\r\n\r\n            this._mouseDrag(event, true); //Execute the drag once - this causes the helper not to be visible before getting its correct position\r\n\r\n            //If the ddmanager is used for droppables, inform the manager that dragging has started (see #5003)\r\n            if ($.ui.ddmanager) {\r\n                $.ui.ddmanager.dragStart(this, event);\r\n            }\r\n\r\n            return true;\r\n        },\r\n\r\n        _refreshOffsets: function (event) {\r\n            this.offset = {\r\n                top: this.positionAbs.top - this.margins.top,\r\n                left: this.positionAbs.left - this.margins.left,\r\n                scroll: false,\r\n                parent: this._getParentOffset(),\r\n                relative: this._getRelativeOffset()\r\n            };\r\n\r\n            this.offset.click = {\r\n                left: event.pageX - this.offset.left,\r\n                top: event.pageY - this.offset.top\r\n            };\r\n        },\r\n\r\n        _mouseDrag: function (event, noPropagation) {\r\n            // reset any necessary cached properties (see #5009)\r\n            if (this.hasFixedAncestor) {\r\n                this.offset.parent = this._getParentOffset();\r\n            }\r\n\r\n            //Compute the helpers position\r\n            this.position = this._generatePosition(event, true);\r\n            this.positionAbs = this._convertPositionTo(\"absolute\");\r\n\r\n            //Call plugins and callbacks and use the resulting position if something is returned\r\n            if (!noPropagation) {\r\n                var ui = this._uiHash();\r\n                if (this._trigger(\"drag\", event, ui) === false) {\r\n                    this._mouseUp({});\r\n                    return false;\r\n                }\r\n                this.position = ui.position;\r\n            }\r\n\r\n            this.helper[0].style.left = this.position.left + \"px\";\r\n            this.helper[0].style.top = this.position.top + \"px\";\r\n\r\n            if ($.ui.ddmanager) {\r\n                $.ui.ddmanager.drag(this, event);\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        _mouseStop: function (event) {\r\n\r\n            //If we are using droppables, inform the manager about the drop\r\n            var that = this,\r\n                dropped = false;\r\n            if ($.ui.ddmanager && !this.options.dropBehaviour) {\r\n                dropped = $.ui.ddmanager.drop(this, event);\r\n            }\r\n\r\n            //if a drop comes from outside (a sortable)\r\n            if (this.dropped) {\r\n                dropped = this.dropped;\r\n                this.dropped = false;\r\n            }\r\n\r\n            if ((this.options.revert === \"invalid\" && !dropped) || (this.options.revert === \"valid\" && dropped) || this.options.revert === true || ($.isFunction(this.options.revert) && this.options.revert.call(this.element, dropped))) {\r\n                $(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {\r\n                    if (that._trigger(\"stop\", event) !== false) {\r\n                        that._clear();\r\n                    }\r\n                });\r\n            } else {\r\n                if (this._trigger(\"stop\", event) !== false) {\r\n                    this._clear();\r\n                }\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        _mouseUp: function (event) {\r\n            this._unblockFrames();\r\n\r\n            //If the ddmanager is used for droppables, inform the manager that dragging has stopped (see #5003)\r\n            if ($.ui.ddmanager) {\r\n                $.ui.ddmanager.dragStop(this, event);\r\n            }\r\n\r\n            // Only need to focus if the event occurred on the draggable itself, see #10527\r\n            if (this.handleElement.is(event.target)) {\r\n                // The interaction is over; whether or not the click resulted in a drag, focus the element\r\n                this.element.focus();\r\n            }\r\n\r\n            return $.ui.mouse.prototype._mouseUp.call(this, event);\r\n        },\r\n\r\n        cancel: function () {\r\n\r\n            if (this.helper.is(\".ui-draggable-dragging\")) {\r\n                this._mouseUp({});\r\n            } else {\r\n                this._clear();\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        _getHandle: function (event) {\r\n            return this.options.handle ?\r\n                !!$(event.target).closest(this.element.find(this.options.handle)).length :\r\n                true;\r\n        },\r\n\r\n        _setHandleClassName: function () {\r\n            this.handleElement = this.options.handle ?\r\n                this.element.find(this.options.handle) : this.element;\r\n            this.handleElement.addClass(\"ui-draggable-handle\");\r\n        },\r\n\r\n        _removeHandleClassName: function () {\r\n            this.handleElement.removeClass(\"ui-draggable-handle\");\r\n        },\r\n\r\n        _createHelper: function (event) {\r\n\r\n            var o = this.options,\r\n                helperIsFunction = $.isFunction(o.helper),\r\n                helper = helperIsFunction ?\r\n                    $(o.helper.apply(this.element[0], [event])) :\r\n                    (o.helper === \"clone\" ?\r\n                        this.element.clone().removeAttr(\"id\") :\r\n                        this.element);\r\n\r\n            if (!helper.parents(\"body\").length) {\r\n                helper.appendTo((o.appendTo === \"parent\" ? this.element[0].parentNode : o.appendTo));\r\n            }\r\n\r\n            // http://bugs.jqueryui.com/ticket/9446\r\n            // a helper function can return the original element\r\n            // which wouldn't have been set to relative in _create\r\n            if (helperIsFunction && helper[0] === this.element[0]) {\r\n                this._setPositionRelative();\r\n            }\r\n\r\n            if (helper[0] !== this.element[0] && !(/(fixed|absolute)/).test(helper.css(\"position\"))) {\r\n                helper.css(\"position\", \"absolute\");\r\n            }\r\n\r\n            return helper;\r\n\r\n        },\r\n\r\n        _setPositionRelative: function () {\r\n            if (!(/^(?:r|a|f)/).test(this.element.css(\"position\"))) {\r\n                this.element[0].style.position = \"relative\";\r\n            }\r\n        },\r\n\r\n        _adjustOffsetFromHelper: function (obj) {\r\n            if (typeof obj === \"string\") {\r\n                obj = obj.split(\" \");\r\n            }\r\n            if (Array.isArray(obj)) {\r\n                obj = { left: +obj[0], top: +obj[1] || 0 };\r\n            }\r\n            if (\"left\" in obj) {\r\n                this.offset.click.left = obj.left + this.margins.left;\r\n            }\r\n            if (\"right\" in obj) {\r\n                this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\r\n            }\r\n            if (\"top\" in obj) {\r\n                this.offset.click.top = obj.top + this.margins.top;\r\n            }\r\n            if (\"bottom\" in obj) {\r\n                this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\r\n            }\r\n        },\r\n\r\n        _isRootNode: function (element) {\r\n            return (/(html|body)/i).test(element.tagName) || element === this.document[0];\r\n        },\r\n\r\n        _getParentOffset: function () {\r\n\r\n            //Get the offsetParent and cache its position\r\n            var po = this.offsetParent.offset(),\r\n                document = this.document[0];\r\n\r\n            // This is a special case where we need to modify a offset calculated on start, since the following happened:\r\n            // 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\r\n            // 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\r\n            //    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\r\n            if (this.cssPosition === \"absolute\" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {\r\n                po.left += this.scrollParent.scrollLeft();\r\n                po.top += this.scrollParent.scrollTop();\r\n            }\r\n\r\n            if (this._isRootNode(this.offsetParent[0])) {\r\n                po = { top: 0, left: 0 };\r\n            }\r\n\r\n            return {\r\n                top: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"), 10) || 0),\r\n                left: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"), 10) || 0)\r\n            };\r\n\r\n        },\r\n\r\n        _getRelativeOffset: function () {\r\n            if (this.cssPosition !== \"relative\") {\r\n                return { top: 0, left: 0 };\r\n            }\r\n\r\n            var p = this.element.position(),\r\n                scrollIsRootNode = this._isRootNode(this.scrollParent[0]);\r\n\r\n            return {\r\n                top: p.top - (parseInt(this.helper.css(\"top\"), 10) || 0) + (!scrollIsRootNode ? this.scrollParent.scrollTop() : 0),\r\n                left: p.left - (parseInt(this.helper.css(\"left\"), 10) || 0) + (!scrollIsRootNode ? this.scrollParent.scrollLeft() : 0)\r\n            };\r\n\r\n        },\r\n\r\n        _cacheMargins: function () {\r\n            this.margins = {\r\n                left: (parseInt(this.element.css(\"marginLeft\"), 10) || 0),\r\n                top: (parseInt(this.element.css(\"marginTop\"), 10) || 0),\r\n                right: (parseInt(this.element.css(\"marginRight\"), 10) || 0),\r\n                bottom: (parseInt(this.element.css(\"marginBottom\"), 10) || 0)\r\n            };\r\n        },\r\n\r\n        _cacheHelperProportions: function () {\r\n            this.helperProportions = {\r\n                width: this.helper.outerWidth(),\r\n                height: this.helper.outerHeight()\r\n            };\r\n        },\r\n\r\n        _setContainment: function () {\r\n\r\n            var isUserScrollable, c, ce,\r\n                o = this.options,\r\n                document = this.document[0];\r\n\r\n            this.relativeContainer = null;\r\n\r\n            if (!o.containment) {\r\n                this.containment = null;\r\n                return;\r\n            }\r\n\r\n            if (o.containment === \"window\") {\r\n                this.containment = [\r\n                    $(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left,\r\n                    $(window).scrollTop() - this.offset.relative.top - this.offset.parent.top,\r\n                    $(window).scrollLeft() + $(window).width() - this.helperProportions.width - this.margins.left,\r\n                    $(window).scrollTop() + ($(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\r\n                ];\r\n                return;\r\n            }\r\n\r\n            if (o.containment === \"document\") {\r\n                this.containment = [\r\n                    0,\r\n                    0,\r\n                    $(document).width() - this.helperProportions.width - this.margins.left,\r\n                    ($(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\r\n                ];\r\n                return;\r\n            }\r\n\r\n            if (o.containment.constructor === Array) {\r\n                this.containment = o.containment;\r\n                return;\r\n            }\r\n\r\n            if (o.containment === \"parent\") {\r\n                o.containment = this.helper[0].parentNode;\r\n            }\r\n\r\n            c = $(o.containment);\r\n            ce = c[0];\r\n\r\n            if (!ce) {\r\n                return;\r\n            }\r\n\r\n            isUserScrollable = /(scroll|auto)/.test(c.css(\"overflow\"));\r\n\r\n            this.containment = [\r\n                (parseInt(c.css(\"borderLeftWidth\"), 10) || 0) + (parseInt(c.css(\"paddingLeft\"), 10) || 0),\r\n                (parseInt(c.css(\"borderTopWidth\"), 10) || 0) + (parseInt(c.css(\"paddingTop\"), 10) || 0),\r\n                (isUserScrollable ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) -\r\n                (parseInt(c.css(\"borderRightWidth\"), 10) || 0) -\r\n                (parseInt(c.css(\"paddingRight\"), 10) || 0) -\r\n                this.helperProportions.width -\r\n                this.margins.left -\r\n                this.margins.right,\r\n                (isUserScrollable ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) -\r\n                (parseInt(c.css(\"borderBottomWidth\"), 10) || 0) -\r\n                (parseInt(c.css(\"paddingBottom\"), 10) || 0) -\r\n                this.helperProportions.height -\r\n                this.margins.top -\r\n                this.margins.bottom\r\n            ];\r\n            this.relativeContainer = c;\r\n        },\r\n\r\n        _convertPositionTo: function (d, pos) {\r\n\r\n            if (!pos) {\r\n                pos = this.position;\r\n            }\r\n\r\n            var mod = d === \"absolute\" ? 1 : -1,\r\n                scrollIsRootNode = this._isRootNode(this.scrollParent[0]);\r\n\r\n            return {\r\n                top: (\r\n                    pos.top +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    ((this.cssPosition === \"fixed\" ? -this.offset.scroll.top : (scrollIsRootNode ? 0 : this.offset.scroll.top)) * mod)\r\n                ),\r\n                left: (\r\n                    pos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.left * mod -\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    ((this.cssPosition === \"fixed\" ? -this.offset.scroll.left : (scrollIsRootNode ? 0 : this.offset.scroll.left)) * mod)\r\n                )\r\n            };\r\n\r\n        },\r\n\r\n        _generatePosition: function (event, constrainPosition) {\r\n\r\n            var containment, co, top, left,\r\n                o = this.options,\r\n                scrollIsRootNode = this._isRootNode(this.scrollParent[0]),\r\n                pageX = event.pageX,\r\n                pageY = event.pageY;\r\n\r\n            // Cache the scroll\r\n            if (!scrollIsRootNode || !this.offset.scroll) {\r\n                this.offset.scroll = {\r\n                    top: this.scrollParent.scrollTop(),\r\n                    left: this.scrollParent.scrollLeft()\r\n                };\r\n            }\r\n\r\n            /*\r\n             * - Position constraining -\r\n             * Constrain the position to a mix of grid, containment.\r\n             */\r\n\r\n            // If we are not dragging yet, we won't check for options\r\n            if (constrainPosition) {\r\n                if (this.containment) {\r\n                    if (this.relativeContainer) {\r\n                        co = this.relativeContainer.offset();\r\n                        containment = [\r\n                            this.containment[0] + co.left,\r\n                            this.containment[1] + co.top,\r\n                            this.containment[2] + co.left,\r\n                            this.containment[3] + co.top\r\n                        ];\r\n                    } else {\r\n                        containment = this.containment;\r\n                    }\r\n\r\n                    if (event.pageX - this.offset.click.left < containment[0]) {\r\n                        pageX = containment[0] + this.offset.click.left;\r\n                    }\r\n                    if (event.pageY - this.offset.click.top < containment[1]) {\r\n                        pageY = containment[1] + this.offset.click.top;\r\n                    }\r\n                    if (event.pageX - this.offset.click.left > containment[2]) {\r\n                        pageX = containment[2] + this.offset.click.left;\r\n                    }\r\n                    if (event.pageY - this.offset.click.top > containment[3]) {\r\n                        pageY = containment[3] + this.offset.click.top;\r\n                    }\r\n                }\r\n\r\n                if (o.grid) {\r\n                    //Check for grid elements set to 0 to prevent divide by 0 error causing invalid argument errors in IE (see ticket #6950)\r\n                    top = o.grid[1] ? this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY;\r\n                    pageY = containment ? ((top - this.offset.click.top >= containment[1] || top - this.offset.click.top > containment[3]) ? top : ((top - this.offset.click.top >= containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\r\n\r\n                    left = o.grid[0] ? this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX;\r\n                    pageX = containment ? ((left - this.offset.click.left >= containment[0] || left - this.offset.click.left > containment[2]) ? left : ((left - this.offset.click.left >= containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\r\n                }\r\n\r\n                if (o.axis === \"y\") {\r\n                    pageX = this.originalPageX;\r\n                }\r\n\r\n                if (o.axis === \"x\") {\r\n                    pageY = this.originalPageY;\r\n                }\r\n            }\r\n\r\n            return {\r\n                top: (\r\n                    pageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.click.top -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n                    this.offset.relative.top -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    (this.cssPosition === \"fixed\" ? -this.offset.scroll.top : (scrollIsRootNode ? 0 : this.offset.scroll.top))\r\n                ),\r\n                left: (\r\n                    pageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n                    this.offset.relative.left -\t\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    (this.cssPosition === \"fixed\" ? -this.offset.scroll.left : (scrollIsRootNode ? 0 : this.offset.scroll.left))\r\n                )\r\n            };\r\n\r\n        },\r\n\r\n        _clear: function () {\r\n            this.helper.removeClass(\"ui-draggable-dragging\");\r\n            if (this.helper[0] !== this.element[0] && !this.cancelHelperRemoval) {\r\n                this.helper.remove();\r\n            }\r\n            this.helper = null;\r\n            this.cancelHelperRemoval = false;\r\n            if (this.destroyOnClear) {\r\n                this.destroy();\r\n            }\r\n        },\r\n\r\n        _normalizeRightBottom: function () {\r\n            if (this.options.axis !== \"y\" && this.helper.css(\"right\") !== \"auto\") {\r\n                this.helper.width(this.helper.width());\r\n                this.helper.css(\"right\", \"auto\");\r\n            }\r\n            if (this.options.axis !== \"x\" && this.helper.css(\"bottom\") !== \"auto\") {\r\n                this.helper.height(this.helper.height());\r\n                this.helper.css(\"bottom\", \"auto\");\r\n            }\r\n        },\r\n\r\n        // From now on bulk stuff - mainly helpers\r\n\r\n        _trigger: function (type, event, ui) {\r\n            ui = ui || this._uiHash();\r\n            $.ui.plugin.call(this, type, [event, ui, this], true);\r\n\r\n            // Absolute position and offset (see #6884 ) have to be recalculated after plugins\r\n            if (/^(drag|start|stop)/.test(type)) {\r\n                this.positionAbs = this._convertPositionTo(\"absolute\");\r\n                ui.offset = this.positionAbs;\r\n            }\r\n            return $.Widget.prototype._trigger.call(this, type, event, ui);\r\n        },\r\n\r\n        plugins: {},\r\n\r\n        _uiHash: function () {\r\n            return {\r\n                helper: this.helper,\r\n                position: this.position,\r\n                originalPosition: this.originalPosition,\r\n                offset: this.positionAbs\r\n            };\r\n        }\r\n\r\n    });\r\n\r\n    $.ui.plugin.add(\"draggable\", \"connectToSortable\", {\r\n        start: function (event, ui, draggable) {\r\n            var uiSortable = $.extend({}, ui, {\r\n                item: draggable.element\r\n            });\r\n\r\n            draggable.sortables = [];\r\n            $(draggable.options.connectToSortable).each(function () {\r\n                var sortable = $(this).sortable(\"instance\");\r\n\r\n                if (sortable && !sortable.options.disabled) {\r\n                    draggable.sortables.push(sortable);\r\n\r\n                    // refreshPositions is called at drag start to refresh the containerCache\r\n                    // which is used in drag. This ensures it's initialized and synchronized\r\n                    // with any changes that might have happened on the page since initialization.\r\n                    sortable.refreshPositions();\r\n                    sortable._trigger(\"activate\", event, uiSortable);\r\n                }\r\n            });\r\n        },\r\n        stop: function (event, ui, draggable) {\r\n            var uiSortable = $.extend({}, ui, {\r\n                item: draggable.element\r\n            });\r\n\r\n            draggable.cancelHelperRemoval = false;\r\n\r\n            $.each(draggable.sortables, function () {\r\n                var sortable = this;\r\n\r\n                if (sortable.isOver) {\r\n                    sortable.isOver = 0;\r\n\r\n                    // Allow this sortable to handle removing the helper\r\n                    draggable.cancelHelperRemoval = true;\r\n                    sortable.cancelHelperRemoval = false;\r\n\r\n                    // Use _storedCSS To restore properties in the sortable,\r\n                    // as this also handles revert (#9675) since the draggable\r\n                    // may have modified them in unexpected ways (#8809)\r\n                    sortable._storedCSS = {\r\n                        position: sortable.placeholder.css(\"position\"),\r\n                        top: sortable.placeholder.css(\"top\"),\r\n                        left: sortable.placeholder.css(\"left\")\r\n                    };\r\n\r\n                    sortable._mouseStop(event);\r\n\r\n                    // Once drag has ended, the sortable should return to using\r\n                    // its original helper, not the shared helper from draggable\r\n                    sortable.options.helper = sortable.options._helper;\r\n                } else {\r\n                    // Prevent this Sortable from removing the helper.\r\n                    // However, don't set the draggable to remove the helper\r\n                    // either as another connected Sortable may yet handle the removal.\r\n                    sortable.cancelHelperRemoval = true;\r\n\r\n                    sortable._trigger(\"deactivate\", event, uiSortable);\r\n                }\r\n            });\r\n        },\r\n        drag: function (event, ui, draggable) {\r\n            $.each(draggable.sortables, function () {\r\n                var innermostIntersecting = false,\r\n                    sortable = this;\r\n\r\n                // Copy over variables that sortable's _intersectsWith uses\r\n                sortable.positionAbs = draggable.positionAbs;\r\n                sortable.helperProportions = draggable.helperProportions;\r\n                sortable.offset.click = draggable.offset.click;\r\n\r\n                if (sortable._intersectsWith(sortable.containerCache)) {\r\n                    innermostIntersecting = true;\r\n\r\n                    $.each(draggable.sortables, function () {\r\n                        // Copy over variables that sortable's _intersectsWith uses\r\n                        this.positionAbs = draggable.positionAbs;\r\n                        this.helperProportions = draggable.helperProportions;\r\n                        this.offset.click = draggable.offset.click;\r\n\r\n                        if (this !== sortable &&\r\n                            this._intersectsWith(this.containerCache) &&\r\n                            $.contains(sortable.element[0], this.element[0])) {\r\n                            innermostIntersecting = false;\r\n                        }\r\n\r\n                        return innermostIntersecting;\r\n                    });\r\n                }\r\n\r\n                if (innermostIntersecting) {\r\n                    // If it intersects, we use a little isOver variable and set it once,\r\n                    // so that the move-in stuff gets fired only once.\r\n                    if (!sortable.isOver) {\r\n                        sortable.isOver = 1;\r\n\r\n                        // Store draggable's parent in case we need to reappend to it later.\r\n                        draggable._parent = ui.helper.parent();\r\n\r\n                        sortable.currentItem = ui.helper\r\n                            .appendTo(sortable.element)\r\n                            .data(\"ui-sortable-item\", true);\r\n\r\n                        // Store helper option to later restore it\r\n                        sortable.options._helper = sortable.options.helper;\r\n\r\n                        sortable.options.helper = function () {\r\n                            return ui.helper[0];\r\n                        };\r\n\r\n                        // Fire the start events of the sortable with our passed browser event,\r\n                        // and our own helper (so it doesn't create a new one)\r\n                        event.target = sortable.currentItem[0];\r\n                        sortable._mouseCapture(event, true);\r\n                        sortable._mouseStart(event, true, true);\r\n\r\n                        // Because the browser event is way off the new appended portlet,\r\n                        // modify necessary variables to reflect the changes\r\n                        sortable.offset.click.top = draggable.offset.click.top;\r\n                        sortable.offset.click.left = draggable.offset.click.left;\r\n                        sortable.offset.parent.left -= draggable.offset.parent.left -\r\n                            sortable.offset.parent.left;\r\n                        sortable.offset.parent.top -= draggable.offset.parent.top -\r\n                            sortable.offset.parent.top;\r\n\r\n                        draggable._trigger(\"toSortable\", event);\r\n\r\n                        // Inform draggable that the helper is in a valid drop zone,\r\n                        // used solely in the revert option to handle \"valid/invalid\".\r\n                        draggable.dropped = sortable.element;\r\n\r\n                        // Need to refreshPositions of all sortables in the case that\r\n                        // adding to one sortable changes the location of the other sortables (#9675)\r\n                        $.each(draggable.sortables, function () {\r\n                            this.refreshPositions();\r\n                        });\r\n\r\n                        // hack so receive/update callbacks work (mostly)\r\n                        draggable.currentItem = draggable.element;\r\n                        sortable.fromOutside = draggable;\r\n                    }\r\n\r\n                    if (sortable.currentItem) {\r\n                        sortable._mouseDrag(event);\r\n                        // Copy the sortable's position because the draggable's can potentially reflect\r\n                        // a relative position, while sortable is always absolute, which the dragged\r\n                        // element has now become. (#8809)\r\n                        ui.position = sortable.position;\r\n                    }\r\n                } else {\r\n                    // If it doesn't intersect with the sortable, and it intersected before,\r\n                    // we fake the drag stop of the sortable, but make sure it doesn't remove\r\n                    // the helper by using cancelHelperRemoval.\r\n                    if (sortable.isOver) {\r\n\r\n                        sortable.isOver = 0;\r\n                        sortable.cancelHelperRemoval = true;\r\n\r\n                        // Calling sortable's mouseStop would trigger a revert,\r\n                        // so revert must be temporarily false until after mouseStop is called.\r\n                        sortable.options._revert = sortable.options.revert;\r\n                        sortable.options.revert = false;\r\n\r\n                        sortable._trigger(\"out\", event, sortable._uiHash(sortable));\r\n                        sortable._mouseStop(event, true);\r\n\r\n                        // restore sortable behaviors that were modfied\r\n                        // when the draggable entered the sortable area (#9481)\r\n                        sortable.options.revert = sortable.options._revert;\r\n                        sortable.options.helper = sortable.options._helper;\r\n\r\n                        if (sortable.placeholder) {\r\n                            sortable.placeholder.remove();\r\n                        }\r\n\r\n                        // Restore and recalculate the draggable's offset considering the sortable\r\n                        // may have modified them in unexpected ways. (#8809, #10669)\r\n                        ui.helper.appendTo(draggable._parent);\r\n                        draggable._refreshOffsets(event);\r\n                        ui.position = draggable._generatePosition(event, true);\r\n\r\n                        draggable._trigger(\"fromSortable\", event);\r\n\r\n                        // Inform draggable that the helper is no longer in a valid drop zone\r\n                        draggable.dropped = false;\r\n\r\n                        // Need to refreshPositions of all sortables just in case removing\r\n                        // from one sortable changes the location of other sortables (#9675)\r\n                        $.each(draggable.sortables, function () {\r\n                            this.refreshPositions();\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"draggable\", \"cursor\", {\r\n        start: function (event, ui, instance) {\r\n            var t = $(\"body\"),\r\n                o = instance.options;\r\n\r\n            if (t.css(\"cursor\")) {\r\n                o._cursor = t.css(\"cursor\");\r\n            }\r\n            t.css(\"cursor\", o.cursor);\r\n        },\r\n        stop: function (event, ui, instance) {\r\n            var o = instance.options;\r\n            if (o._cursor) {\r\n                $(\"body\").css(\"cursor\", o._cursor);\r\n            }\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"draggable\", \"opacity\", {\r\n        start: function (event, ui, instance) {\r\n            var t = $(ui.helper),\r\n                o = instance.options;\r\n            if (t.css(\"opacity\")) {\r\n                o._opacity = t.css(\"opacity\");\r\n            }\r\n            t.css(\"opacity\", o.opacity);\r\n        },\r\n        stop: function (event, ui, instance) {\r\n            var o = instance.options;\r\n            if (o._opacity) {\r\n                $(ui.helper).css(\"opacity\", o._opacity);\r\n            }\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"draggable\", \"scroll\", {\r\n        start: function (event, ui, i) {\r\n            if (!i.scrollParentNotHidden) {\r\n                i.scrollParentNotHidden = i.helper.scrollParent(false);\r\n            }\r\n\r\n            if (i.scrollParentNotHidden[0] !== i.document[0] && i.scrollParentNotHidden[0].tagName !== \"HTML\") {\r\n                i.overflowOffset = i.scrollParentNotHidden.offset();\r\n            }\r\n        },\r\n        drag: function (event, ui, i) {\r\n\r\n            var o = i.options,\r\n                scrolled = false,\r\n                scrollParent = i.scrollParentNotHidden[0],\r\n                document = i.document[0];\r\n\r\n            if (scrollParent !== document && scrollParent.tagName !== \"HTML\") {\r\n                if (!o.axis || o.axis !== \"x\") {\r\n                    if ((i.overflowOffset.top + scrollParent.offsetHeight) - event.pageY < o.scrollSensitivity) {\r\n                        scrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\r\n                    } else if (event.pageY - i.overflowOffset.top < o.scrollSensitivity) {\r\n                        scrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\r\n                    }\r\n                }\r\n\r\n                if (!o.axis || o.axis !== \"y\") {\r\n                    if ((i.overflowOffset.left + scrollParent.offsetWidth) - event.pageX < o.scrollSensitivity) {\r\n                        scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\r\n                    } else if (event.pageX - i.overflowOffset.left < o.scrollSensitivity) {\r\n                        scrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                if (!o.axis || o.axis !== \"x\") {\r\n                    if (event.pageY - $(document).scrollTop() < o.scrollSensitivity) {\r\n                        scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);\r\n                    } else if ($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {\r\n                        scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);\r\n                    }\r\n                }\r\n\r\n                if (!o.axis || o.axis !== \"y\") {\r\n                    if (event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {\r\n                        scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);\r\n                    } else if ($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {\r\n                        scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\r\n                $.ui.ddmanager.prepareOffsets(i, event);\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"draggable\", \"snap\", {\r\n        start: function (event, ui, i) {\r\n\r\n            var o = i.options;\r\n\r\n            i.snapElements = [];\r\n\r\n            $(o.snap.constructor !== String ? (o.snap.items || \":data(ui-draggable)\") : o.snap).each(function () {\r\n                var $t = $(this),\r\n                    $o = $t.offset();\r\n                if (this !== i.element[0]) {\r\n                    i.snapElements.push({\r\n                        item: this,\r\n                        width: $t.outerWidth(), height: $t.outerHeight(),\r\n                        top: $o.top, left: $o.left\r\n                    });\r\n                }\r\n            });\r\n\r\n        },\r\n        drag: function (event, ui, inst) {\r\n\r\n            var ts, bs, ls, rs, l, r, t, b, i, first,\r\n                o = inst.options,\r\n                d = o.snapTolerance,\r\n                x1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,\r\n                y1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;\r\n\r\n            for (i = inst.snapElements.length - 1; i >= 0; i--) {\r\n\r\n                l = inst.snapElements[i].left - inst.margins.left;\r\n                r = l + inst.snapElements[i].width;\r\n                t = inst.snapElements[i].top - inst.margins.top;\r\n                b = t + inst.snapElements[i].height;\r\n\r\n                if (x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d || !$.contains(inst.snapElements[i].item.ownerDocument, inst.snapElements[i].item)) {\r\n                    if (inst.snapElements[i].snapping) {\r\n                        (inst.options.snap.release && inst.options.snap.release.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\r\n                    }\r\n                    inst.snapElements[i].snapping = false;\r\n                    continue;\r\n                }\r\n\r\n                if (o.snapMode !== \"inner\") {\r\n                    ts = Math.abs(t - y2) <= d;\r\n                    bs = Math.abs(b - y1) <= d;\r\n                    ls = Math.abs(l - x2) <= d;\r\n                    rs = Math.abs(r - x1) <= d;\r\n                    if (ts) {\r\n                        ui.position.top = inst._convertPositionTo(\"relative\", { top: t - inst.helperProportions.height, left: 0 }).top;\r\n                    }\r\n                    if (bs) {\r\n                        ui.position.top = inst._convertPositionTo(\"relative\", { top: b, left: 0 }).top;\r\n                    }\r\n                    if (ls) {\r\n                        ui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l - inst.helperProportions.width }).left;\r\n                    }\r\n                    if (rs) {\r\n                        ui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r }).left;\r\n                    }\r\n                }\r\n\r\n                first = (ts || bs || ls || rs);\r\n\r\n                if (o.snapMode !== \"outer\") {\r\n                    ts = Math.abs(t - y1) <= d;\r\n                    bs = Math.abs(b - y2) <= d;\r\n                    ls = Math.abs(l - x1) <= d;\r\n                    rs = Math.abs(r - x2) <= d;\r\n                    if (ts) {\r\n                        ui.position.top = inst._convertPositionTo(\"relative\", { top: t, left: 0 }).top;\r\n                    }\r\n                    if (bs) {\r\n                        ui.position.top = inst._convertPositionTo(\"relative\", { top: b - inst.helperProportions.height, left: 0 }).top;\r\n                    }\r\n                    if (ls) {\r\n                        ui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: l }).left;\r\n                    }\r\n                    if (rs) {\r\n                        ui.position.left = inst._convertPositionTo(\"relative\", { top: 0, left: r - inst.helperProportions.width }).left;\r\n                    }\r\n                }\r\n\r\n                if (!inst.snapElements[i].snapping && (ts || bs || ls || rs || first)) {\r\n                    (inst.options.snap.snap && inst.options.snap.snap.call(inst.element, event, $.extend(inst._uiHash(), { snapItem: inst.snapElements[i].item })));\r\n                }\r\n                inst.snapElements[i].snapping = (ts || bs || ls || rs || first);\r\n\r\n            }\r\n\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"draggable\", \"stack\", {\r\n        start: function (event, ui, instance) {\r\n            var min,\r\n                o = instance.options,\r\n                group = $.makeArray($(o.stack)).sort(function (a, b) {\r\n                    return (parseInt($(a).css(\"zIndex\"), 10) || 0) - (parseInt($(b).css(\"zIndex\"), 10) || 0);\r\n                });\r\n\r\n            if (!group.length) { return; }\r\n\r\n            min = parseInt($(group[0]).css(\"zIndex\"), 10) || 0;\r\n            $(group).each(function (i) {\r\n                $(this).css(\"zIndex\", min + i);\r\n            });\r\n            this.css(\"zIndex\", (min + group.length));\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"draggable\", \"zIndex\", {\r\n        start: function (event, ui, instance) {\r\n            var t = $(ui.helper),\r\n                o = instance.options;\r\n\r\n            if (t.css(\"zIndex\")) {\r\n                o._zIndex = t.css(\"zIndex\");\r\n            }\r\n            t.css(\"zIndex\", o.zIndex);\r\n        },\r\n        stop: function (event, ui, instance) {\r\n            var o = instance.options;\r\n\r\n            if (o._zIndex) {\r\n                $(ui.helper).css(\"zIndex\", o._zIndex);\r\n            }\r\n        }\r\n    });\r\n\r\n    var draggable = $.ui.draggable;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Droppable 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/droppable/\r\n     */\r\n\r\n\r\n    $.widget(\"ui.droppable\", {\r\n        version: \"1.11.4\",\r\n        widgetEventPrefix: \"drop\",\r\n        options: {\r\n            accept: \"*\",\r\n            activeClass: false,\r\n            addClasses: true,\r\n            greedy: false,\r\n            hoverClass: false,\r\n            scope: \"default\",\r\n            tolerance: \"intersect\",\r\n\r\n            // callbacks\r\n            activate: null,\r\n            deactivate: null,\r\n            drop: null,\r\n            out: null,\r\n            over: null\r\n        },\r\n        _create: function () {\r\n\r\n            var proportions,\r\n                o = this.options,\r\n                accept = o.accept;\r\n\r\n            this.isover = false;\r\n            this.isout = true;\r\n\r\n            this.accept = $.isFunction(accept) ? accept : function (d) {\r\n                return d.is(accept);\r\n            };\r\n\r\n            this.proportions = function ( /* valueToWrite */) {\r\n                if (arguments.length) {\r\n                    // Store the droppable's proportions\r\n                    proportions = arguments[0];\r\n                } else {\r\n                    // Retrieve or derive the droppable's proportions\r\n                    return proportions ?\r\n                        proportions :\r\n                        proportions = {\r\n                            width: this.element[0].offsetWidth,\r\n                            height: this.element[0].offsetHeight\r\n                        };\r\n                }\r\n            };\r\n\r\n            this._addToManager(o.scope);\r\n\r\n            o.addClasses && this.element.addClass(\"ui-droppable\");\r\n\r\n        },\r\n\r\n        _addToManager: function (scope) {\r\n            // Add the reference and positions to the manager\r\n            $.ui.ddmanager.droppables[scope] = $.ui.ddmanager.droppables[scope] || [];\r\n            $.ui.ddmanager.droppables[scope].push(this);\r\n        },\r\n\r\n        _splice: function (drop) {\r\n            var i = 0;\r\n            for (; i < drop.length; i++) {\r\n                if (drop[i] === this) {\r\n                    drop.splice(i, 1);\r\n                }\r\n            }\r\n        },\r\n\r\n        _destroy: function () {\r\n            var drop = $.ui.ddmanager.droppables[this.options.scope];\r\n\r\n            this._splice(drop);\r\n\r\n            this.element.removeClass(\"ui-droppable ui-droppable-disabled\");\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n\r\n            if (key === \"accept\") {\r\n                this.accept = $.isFunction(value) ? value : function (d) {\r\n                    return d.is(value);\r\n                };\r\n            } else if (key === \"scope\") {\r\n                var drop = $.ui.ddmanager.droppables[this.options.scope];\r\n\r\n                this._splice(drop);\r\n                this._addToManager(value);\r\n            }\r\n\r\n            this._super(key, value);\r\n        },\r\n\r\n        _activate: function (event) {\r\n            var draggable = $.ui.ddmanager.current;\r\n            if (this.options.activeClass) {\r\n                this.element.addClass(this.options.activeClass);\r\n            }\r\n            if (draggable) {\r\n                this._trigger(\"activate\", event, this.ui(draggable));\r\n            }\r\n        },\r\n\r\n        _deactivate: function (event) {\r\n            var draggable = $.ui.ddmanager.current;\r\n            if (this.options.activeClass) {\r\n                this.element.removeClass(this.options.activeClass);\r\n            }\r\n            if (draggable) {\r\n                this._trigger(\"deactivate\", event, this.ui(draggable));\r\n            }\r\n        },\r\n\r\n        _over: function (event) {\r\n\r\n            var draggable = $.ui.ddmanager.current;\r\n\r\n            // Bail if draggable and droppable are same element\r\n            if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {\r\n                return;\r\n            }\r\n\r\n            if (this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {\r\n                if (this.options.hoverClass) {\r\n                    this.element.addClass(this.options.hoverClass);\r\n                }\r\n                this._trigger(\"over\", event, this.ui(draggable));\r\n            }\r\n\r\n        },\r\n\r\n        _out: function (event) {\r\n\r\n            var draggable = $.ui.ddmanager.current;\r\n\r\n            // Bail if draggable and droppable are same element\r\n            if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {\r\n                return;\r\n            }\r\n\r\n            if (this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {\r\n                if (this.options.hoverClass) {\r\n                    this.element.removeClass(this.options.hoverClass);\r\n                }\r\n                this._trigger(\"out\", event, this.ui(draggable));\r\n            }\r\n\r\n        },\r\n\r\n        _drop: function (event, custom) {\r\n\r\n            var draggable = custom || $.ui.ddmanager.current,\r\n                childrenIntersection = false;\r\n\r\n            // Bail if draggable and droppable are same element\r\n            if (!draggable || (draggable.currentItem || draggable.element)[0] === this.element[0]) {\r\n                return false;\r\n            }\r\n\r\n            this.element.find(\":data(ui-droppable)\").not(\".ui-draggable-dragging\").each(function () {\r\n                var inst = $(this).droppable(\"instance\");\r\n                if (\r\n                    inst.options.greedy &&\r\n                    !inst.options.disabled &&\r\n                    inst.options.scope === draggable.options.scope &&\r\n                    inst.accept.call(inst.element[0], (draggable.currentItem || draggable.element)) &&\r\n                    $.ui.intersect(draggable, $.extend(inst, { offset: inst.element.offset() }), inst.options.tolerance, event)\r\n                ) { childrenIntersection = true; return false; }\r\n            });\r\n            if (childrenIntersection) {\r\n                return false;\r\n            }\r\n\r\n            if (this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {\r\n                if (this.options.activeClass) {\r\n                    this.element.removeClass(this.options.activeClass);\r\n                }\r\n                if (this.options.hoverClass) {\r\n                    this.element.removeClass(this.options.hoverClass);\r\n                }\r\n                this._trigger(\"drop\", event, this.ui(draggable));\r\n                return this.element;\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n        ui: function (c) {\r\n            return {\r\n                draggable: (c.currentItem || c.element),\r\n                helper: c.helper,\r\n                position: c.position,\r\n                offset: c.positionAbs\r\n            };\r\n        }\r\n\r\n    });\r\n\r\n    $.ui.intersect = (function () {\r\n        function isOverAxis(x, reference, size) {\r\n            return (x >= reference) && (x < (reference + size));\r\n        }\r\n\r\n        return function (draggable, droppable, toleranceMode, event) {\r\n\r\n            if (!droppable.offset) {\r\n                return false;\r\n            }\r\n\r\n            var x1 = (draggable.positionAbs || draggable.position.absolute).left + draggable.margins.left,\r\n                y1 = (draggable.positionAbs || draggable.position.absolute).top + draggable.margins.top,\r\n                x2 = x1 + draggable.helperProportions.width,\r\n                y2 = y1 + draggable.helperProportions.height,\r\n                l = droppable.offset.left,\r\n                t = droppable.offset.top,\r\n                r = l + droppable.proportions().width,\r\n                b = t + droppable.proportions().height;\r\n\r\n            switch (toleranceMode) {\r\n                case \"fit\":\r\n                    return (l <= x1 && x2 <= r && t <= y1 && y2 <= b);\r\n                case \"intersect\":\r\n                    return (l < x1 + (draggable.helperProportions.width / 2) && // Right Half\r\n                        x2 - (draggable.helperProportions.width / 2) < r && // Left Half\r\n                        t < y1 + (draggable.helperProportions.height / 2) && // Bottom Half\r\n                        y2 - (draggable.helperProportions.height / 2) < b); // Top Half\r\n                case \"pointer\":\r\n                    return isOverAxis(event.pageY, t, droppable.proportions().height) && isOverAxis(event.pageX, l, droppable.proportions().width);\r\n                case \"touch\":\r\n                    return (\r\n                        (y1 >= t && y1 <= b) || // Top edge touching\r\n                        (y2 >= t && y2 <= b) || // Bottom edge touching\r\n                        (y1 < t && y2 > b) // Surrounded vertically\r\n                    ) && (\r\n                            (x1 >= l && x1 <= r) || // Left edge touching\r\n                            (x2 >= l && x2 <= r) || // Right edge touching\r\n                            (x1 < l && x2 > r) // Surrounded horizontally\r\n                        );\r\n                default:\r\n                    return false;\r\n            }\r\n        };\r\n    })();\r\n\r\n    /*\r\n        This manager tracks offsets of draggables and droppables\r\n    */\r\n    $.ui.ddmanager = {\r\n        current: null,\r\n        droppables: { \"default\": [] },\r\n        prepareOffsets: function (t, event) {\r\n\r\n            var i, j,\r\n                m = $.ui.ddmanager.droppables[t.options.scope] || [],\r\n                type = event ? event.type : null, // workaround for #2317\r\n                list = (t.currentItem || t.element).find(\":data(ui-droppable)\").addBack();\r\n\r\n            droppablesLoop: for (i = 0; i < m.length; i++) {\r\n\r\n                // No disabled and non-accepted\r\n                if (m[i].options.disabled || (t && !m[i].accept.call(m[i].element[0], (t.currentItem || t.element)))) {\r\n                    continue;\r\n                }\r\n\r\n                // Filter out elements in the current dragged item\r\n                for (j = 0; j < list.length; j++) {\r\n                    if (list[j] === m[i].element[0]) {\r\n                        m[i].proportions().height = 0;\r\n                        continue droppablesLoop;\r\n                    }\r\n                }\r\n\r\n                m[i].visible = m[i].element.css(\"display\") !== \"none\";\r\n                if (!m[i].visible) {\r\n                    continue;\r\n                }\r\n\r\n                // Activate the droppable if used directly from draggables\r\n                if (type === \"mousedown\") {\r\n                    m[i]._activate.call(m[i], event);\r\n                }\r\n\r\n                m[i].offset = m[i].element.offset();\r\n                m[i].proportions({ width: m[i].element[0].offsetWidth, height: m[i].element[0].offsetHeight });\r\n\r\n            }\r\n\r\n        },\r\n        drop: function (draggable, event) {\r\n\r\n            var dropped = false;\r\n            // Create a copy of the droppables in case the list changes during the drop (#9116)\r\n            $.each(($.ui.ddmanager.droppables[draggable.options.scope] || []).slice(), function () {\r\n\r\n                if (!this.options) {\r\n                    return;\r\n                }\r\n                if (!this.options.disabled && this.visible && $.ui.intersect(draggable, this, this.options.tolerance, event)) {\r\n                    dropped = this._drop.call(this, event) || dropped;\r\n                }\r\n\r\n                if (!this.options.disabled && this.visible && this.accept.call(this.element[0], (draggable.currentItem || draggable.element))) {\r\n                    this.isout = true;\r\n                    this.isover = false;\r\n                    this._deactivate.call(this, event);\r\n                }\r\n\r\n            });\r\n            return dropped;\r\n\r\n        },\r\n        dragStart: function (draggable, event) {\r\n            // Listen for scrolling so that if the dragging causes scrolling the position of the droppables can be recalculated (see #5003)\r\n            draggable.element.parentsUntil(\"body\").bind(\"scroll.droppable\", function () {\r\n                if (!draggable.options.refreshPositions) {\r\n                    $.ui.ddmanager.prepareOffsets(draggable, event);\r\n                }\r\n            });\r\n        },\r\n        drag: function (draggable, event) {\r\n\r\n            // If you have a highly dynamic page, you might try this option. It renders positions every time you move the mouse.\r\n            if (draggable.options.refreshPositions) {\r\n                $.ui.ddmanager.prepareOffsets(draggable, event);\r\n            }\r\n\r\n            // Run through all droppables and check their positions based on specific tolerance options\r\n            $.each($.ui.ddmanager.droppables[draggable.options.scope] || [], function () {\r\n\r\n                if (this.options.disabled || this.greedyChild || !this.visible) {\r\n                    return;\r\n                }\r\n\r\n                var parentInstance, scope, parent,\r\n                    intersects = $.ui.intersect(draggable, this, this.options.tolerance, event),\r\n                    c = !intersects && this.isover ? \"isout\" : (intersects && !this.isover ? \"isover\" : null);\r\n                if (!c) {\r\n                    return;\r\n                }\r\n\r\n                if (this.options.greedy) {\r\n                    // find droppable parents with same scope\r\n                    scope = this.options.scope;\r\n                    parent = this.element.parents(\":data(ui-droppable)\").filter(function () {\r\n                        return $(this).droppable(\"instance\").options.scope === scope;\r\n                    });\r\n\r\n                    if (parent.length) {\r\n                        parentInstance = $(parent[0]).droppable(\"instance\");\r\n                        parentInstance.greedyChild = (c === \"isover\");\r\n                    }\r\n                }\r\n\r\n                // we just moved into a greedy child\r\n                if (parentInstance && c === \"isover\") {\r\n                    parentInstance.isover = false;\r\n                    parentInstance.isout = true;\r\n                    parentInstance._out.call(parentInstance, event);\r\n                }\r\n\r\n                this[c] = true;\r\n                this[c === \"isout\" ? \"isover\" : \"isout\"] = false;\r\n                this[c === \"isover\" ? \"_over\" : \"_out\"].call(this, event);\r\n\r\n                // we just moved out of a greedy child\r\n                if (parentInstance && c === \"isout\") {\r\n                    parentInstance.isout = false;\r\n                    parentInstance.isover = true;\r\n                    parentInstance._over.call(parentInstance, event);\r\n                }\r\n            });\r\n\r\n        },\r\n        dragStop: function (draggable, event) {\r\n            draggable.element.parentsUntil(\"body\").unbind(\"scroll.droppable\");\r\n            // Call prepareOffsets one final time since IE does not fire return scroll events when overflow was caused by drag (see #5003)\r\n            if (!draggable.options.refreshPositions) {\r\n                $.ui.ddmanager.prepareOffsets(draggable, event);\r\n            }\r\n        }\r\n    };\r\n\r\n    var droppable = $.ui.droppable;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Resizable 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/resizable/\r\n     */\r\n\r\n\r\n    $.widget(\"ui.resizable\", $.ui.mouse, {\r\n        version: \"1.11.4\",\r\n        widgetEventPrefix: \"resize\",\r\n        options: {\r\n            alsoResize: false,\r\n            animate: false,\r\n            animateDuration: \"slow\",\r\n            animateEasing: \"swing\",\r\n            aspectRatio: false,\r\n            autoHide: false,\r\n            containment: false,\r\n            ghost: false,\r\n            grid: false,\r\n            handles: \"e,s,se\",\r\n            helper: false,\r\n            maxHeight: null,\r\n            maxWidth: null,\r\n            minHeight: 10,\r\n            minWidth: 10,\r\n            // See #7960\r\n            zIndex: 90,\r\n\r\n            // callbacks\r\n            resize: null,\r\n            start: null,\r\n            stop: null\r\n        },\r\n\r\n        _num: function (value) {\r\n            return parseInt(value, 10) || 0;\r\n        },\r\n\r\n        _isNumber: function (value) {\r\n            return !isNaN(parseInt(value, 10));\r\n        },\r\n\r\n        _hasScroll: function (el, a) {\r\n\r\n            if ($(el).css(\"overflow\") === \"hidden\") {\r\n                return false;\r\n            }\r\n\r\n            var scroll = (a && a === \"left\") ? \"scrollLeft\" : \"scrollTop\",\r\n                has = false;\r\n\r\n            if (el[scroll] > 0) {\r\n                return true;\r\n            }\r\n\r\n            // TODO: determine which cases actually cause this to happen\r\n            // if the element doesn't have the scroll set, see if it's possible to\r\n            // set the scroll\r\n            el[scroll] = 1;\r\n            has = (el[scroll] > 0);\r\n            el[scroll] = 0;\r\n            return has;\r\n        },\r\n\r\n        _create: function () {\r\n\r\n            var n, i, handle, axis, hname,\r\n                that = this,\r\n                o = this.options;\r\n            this.element.addClass(\"ui-resizable\");\r\n\r\n            $.extend(this, {\r\n                _aspectRatio: !!(o.aspectRatio),\r\n                aspectRatio: o.aspectRatio,\r\n                originalElement: this.element,\r\n                _proportionallyResizeElements: [],\r\n                _helper: o.helper || o.ghost || o.animate ? o.helper || \"ui-resizable-helper\" : null\r\n            });\r\n\r\n            // Wrap the element if it cannot hold child nodes\r\n            if (this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)) {\r\n\r\n                this.element.wrap(\r\n                    $(\"<div class='ui-wrapper' style='overflow: hidden;'></div>\").css({\r\n                        position: this.element.css(\"position\"),\r\n                        width: this.element.outerWidth(),\r\n                        height: this.element.outerHeight(),\r\n                        top: this.element.css(\"top\"),\r\n                        left: this.element.css(\"left\")\r\n                    })\r\n                );\r\n\r\n                this.element = this.element.parent().data(\r\n                    \"ui-resizable\", this.element.resizable(\"instance\")\r\n                );\r\n\r\n                this.elementIsWrapper = true;\r\n\r\n                this.element.css({\r\n                    marginLeft: this.originalElement.css(\"marginLeft\"),\r\n                    marginTop: this.originalElement.css(\"marginTop\"),\r\n                    marginRight: this.originalElement.css(\"marginRight\"),\r\n                    marginBottom: this.originalElement.css(\"marginBottom\")\r\n                });\r\n                this.originalElement.css({\r\n                    marginLeft: 0,\r\n                    marginTop: 0,\r\n                    marginRight: 0,\r\n                    marginBottom: 0\r\n                });\r\n                // support: Safari\r\n                // Prevent Safari textarea resize\r\n                this.originalResizeStyle = this.originalElement.css(\"resize\");\r\n                this.originalElement.css(\"resize\", \"none\");\r\n\r\n                this._proportionallyResizeElements.push(this.originalElement.css({\r\n                    position: \"static\",\r\n                    zoom: 1,\r\n                    display: \"block\"\r\n                }));\r\n\r\n                // support: IE9\r\n                // avoid IE jump (hard set the margin)\r\n                this.originalElement.css({ margin: this.originalElement.css(\"margin\") });\r\n\r\n                this._proportionallyResize();\r\n            }\r\n\r\n            this.handles = o.handles ||\r\n                (!$(\".ui-resizable-handle\", this.element).length ?\r\n                    \"e,s,se\" : {\r\n                        n: \".ui-resizable-n\",\r\n                        e: \".ui-resizable-e\",\r\n                        s: \".ui-resizable-s\",\r\n                        w: \".ui-resizable-w\",\r\n                        se: \".ui-resizable-se\",\r\n                        sw: \".ui-resizable-sw\",\r\n                        ne: \".ui-resizable-ne\",\r\n                        nw: \".ui-resizable-nw\"\r\n                    });\r\n\r\n            this._handles = $();\r\n            if (this.handles.constructor === String) {\r\n\r\n                if (this.handles === \"all\") {\r\n                    this.handles = \"n,e,s,w,se,sw,ne,nw\";\r\n                }\r\n\r\n                n = this.handles.split(\",\");\r\n                this.handles = {};\r\n\r\n                for (i = 0; i < n.length; i++) {\r\n\r\n                    handle = n[i].trim();\r\n                    hname = \"ui-resizable-\" + handle;\r\n                    axis = $(\"<div class='ui-resizable-handle \" + hname + \"'></div>\");\r\n\r\n                    axis.css({ zIndex: o.zIndex });\r\n\r\n                    // TODO : What's going on here?\r\n                    if (\"se\" === handle) {\r\n                        axis.addClass(\"ui-icon ui-icon-gripsmall-diagonal-se\");\r\n                    }\r\n\r\n                    this.handles[handle] = \".ui-resizable-\" + handle;\r\n                    this.element.append(axis);\r\n                }\r\n\r\n            }\r\n\r\n            this._renderAxis = function (target) {\r\n\r\n                var i, axis, padPos, padWrapper;\r\n\r\n                target = target || this.element;\r\n\r\n                for (i in this.handles) {\r\n\r\n                    if (this.handles[i].constructor === String) {\r\n                        this.handles[i] = this.element.children(this.handles[i]).first().show();\r\n                    } else if (this.handles[i].jquery || this.handles[i].nodeType) {\r\n                        this.handles[i] = $(this.handles[i]);\r\n                        this._on(this.handles[i], { \"mousedown\": that._mouseDown });\r\n                    }\r\n\r\n                    if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)) {\r\n\r\n                        axis = $(this.handles[i], this.element);\r\n\r\n                        padWrapper = /sw|ne|nw|se|n|s/.test(i) ? axis.outerHeight() : axis.outerWidth();\r\n\r\n                        padPos = [\"padding\",\r\n                            /ne|nw|n/.test(i) ? \"Top\" :\r\n                                /se|sw|s/.test(i) ? \"Bottom\" :\r\n                                    /^e$/.test(i) ? \"Right\" : \"Left\"].join(\"\");\r\n\r\n                        target.css(padPos, padWrapper);\r\n\r\n                        this._proportionallyResize();\r\n                    }\r\n\r\n                    this._handles = this._handles.add(this.handles[i]);\r\n                }\r\n            };\r\n\r\n            // TODO: make renderAxis a prototype function\r\n            this._renderAxis(this.element);\r\n\r\n            this._handles = this._handles.add(this.element.find(\".ui-resizable-handle\"));\r\n            this._handles.disableSelection();\r\n\r\n            this._handles.mouseover(function () {\r\n                if (!that.resizing) {\r\n                    if (this.className) {\r\n                        axis = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);\r\n                    }\r\n                    that.axis = axis && axis[1] ? axis[1] : \"se\";\r\n                }\r\n            });\r\n\r\n            if (o.autoHide) {\r\n                this._handles.hide();\r\n                $(this.element)\r\n                    .addClass(\"ui-resizable-autohide\")\r\n                    .mouseenter(function () {\r\n                        if (o.disabled) {\r\n                            return;\r\n                        }\r\n                        $(this).removeClass(\"ui-resizable-autohide\");\r\n                        that._handles.show();\r\n                    })\r\n                    .mouseleave(function () {\r\n                        if (o.disabled) {\r\n                            return;\r\n                        }\r\n                        if (!that.resizing) {\r\n                            $(this).addClass(\"ui-resizable-autohide\");\r\n                            that._handles.hide();\r\n                        }\r\n                    });\r\n            }\r\n\r\n            this._mouseInit();\r\n        },\r\n\r\n        _destroy: function () {\r\n\r\n            this._mouseDestroy();\r\n\r\n            var wrapper,\r\n                _destroy = function (exp) {\r\n                    $(exp)\r\n                        .removeClass(\"ui-resizable ui-resizable-disabled ui-resizable-resizing\")\r\n                        .removeData(\"resizable\")\r\n                        .removeData(\"ui-resizable\")\r\n                        .unbind(\".resizable\")\r\n                        .find(\".ui-resizable-handle\")\r\n                        .remove();\r\n                };\r\n\r\n            // TODO: Unwrap at same DOM position\r\n            if (this.elementIsWrapper) {\r\n                _destroy(this.element);\r\n                wrapper = this.element;\r\n                this.originalElement.css({\r\n                    position: wrapper.css(\"position\"),\r\n                    width: wrapper.outerWidth(),\r\n                    height: wrapper.outerHeight(),\r\n                    top: wrapper.css(\"top\"),\r\n                    left: wrapper.css(\"left\")\r\n                }).insertAfter(wrapper);\r\n                wrapper.remove();\r\n            }\r\n\r\n            this.originalElement.css(\"resize\", this.originalResizeStyle);\r\n            _destroy(this.originalElement);\r\n\r\n            return this;\r\n        },\r\n\r\n        _mouseCapture: function (event) {\r\n            var i, handle,\r\n                capture = false;\r\n\r\n            for (i in this.handles) {\r\n                handle = $(this.handles[i])[0];\r\n                if (handle === event.target || $.contains(handle, event.target)) {\r\n                    capture = true;\r\n                }\r\n            }\r\n\r\n            return !this.options.disabled && capture;\r\n        },\r\n\r\n        _mouseStart: function (event) {\r\n\r\n            var curleft, curtop, cursor,\r\n                o = this.options,\r\n                el = this.element;\r\n\r\n            this.resizing = true;\r\n\r\n            this._renderProxy();\r\n\r\n            curleft = this._num(this.helper.css(\"left\"));\r\n            curtop = this._num(this.helper.css(\"top\"));\r\n\r\n            if (o.containment) {\r\n                curleft += $(o.containment).scrollLeft() || 0;\r\n                curtop += $(o.containment).scrollTop() || 0;\r\n            }\r\n\r\n            this.offset = this.helper.offset();\r\n            this.position = { left: curleft, top: curtop };\r\n\r\n            this.size = this._helper ? {\r\n                width: this.helper.width(),\r\n                height: this.helper.height()\r\n            } : {\r\n                    width: el.width(),\r\n                    height: el.height()\r\n                };\r\n\r\n            this.originalSize = this._helper ? {\r\n                width: el.outerWidth(),\r\n                height: el.outerHeight()\r\n            } : {\r\n                    width: el.width(),\r\n                    height: el.height()\r\n                };\r\n\r\n            this.sizeDiff = {\r\n                width: el.outerWidth() - el.width(),\r\n                height: el.outerHeight() - el.height()\r\n            };\r\n\r\n            this.originalPosition = { left: curleft, top: curtop };\r\n            this.originalMousePosition = { left: event.pageX, top: event.pageY };\r\n\r\n            this.aspectRatio = (typeof o.aspectRatio === \"number\") ?\r\n                o.aspectRatio :\r\n                ((this.originalSize.width / this.originalSize.height) || 1);\r\n\r\n            cursor = $(\".ui-resizable-\" + this.axis).css(\"cursor\");\r\n            $(\"body\").css(\"cursor\", cursor === \"auto\" ? this.axis + \"-resize\" : cursor);\r\n\r\n            el.addClass(\"ui-resizable-resizing\");\r\n            this._propagate(\"start\", event);\r\n            return true;\r\n        },\r\n\r\n        _mouseDrag: function (event) {\r\n\r\n            var data, props,\r\n                smp = this.originalMousePosition,\r\n                a = this.axis,\r\n                dx = (event.pageX - smp.left) || 0,\r\n                dy = (event.pageY - smp.top) || 0,\r\n                trigger = this._change[a];\r\n\r\n            this._updatePrevProperties();\r\n\r\n            if (!trigger) {\r\n                return false;\r\n            }\r\n\r\n            data = trigger.apply(this, [event, dx, dy]);\r\n\r\n            this._updateVirtualBoundaries(event.shiftKey);\r\n            if (this._aspectRatio || event.shiftKey) {\r\n                data = this._updateRatio(data, event);\r\n            }\r\n\r\n            data = this._respectSize(data, event);\r\n\r\n            this._updateCache(data);\r\n\r\n            this._propagate(\"resize\", event);\r\n\r\n            props = this._applyChanges();\r\n\r\n            if (!this._helper && this._proportionallyResizeElements.length) {\r\n                this._proportionallyResize();\r\n            }\r\n\r\n            if (!$.isEmptyObject(props)) {\r\n                this._updatePrevProperties();\r\n                this._trigger(\"resize\", event, this.ui());\r\n                this._applyChanges();\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        _mouseStop: function (event) {\r\n\r\n            this.resizing = false;\r\n            var pr, ista, soffseth, soffsetw, s, left, top,\r\n                o = this.options, that = this;\r\n\r\n            if (this._helper) {\r\n\r\n                pr = this._proportionallyResizeElements;\r\n                ista = pr.length && (/textarea/i).test(pr[0].nodeName);\r\n                soffseth = ista && this._hasScroll(pr[0], \"left\") ? 0 : that.sizeDiff.height;\r\n                soffsetw = ista ? 0 : that.sizeDiff.width;\r\n\r\n                s = {\r\n                    width: (that.helper.width() - soffsetw),\r\n                    height: (that.helper.height() - soffseth)\r\n                };\r\n                left = (parseInt(that.element.css(\"left\"), 10) +\r\n                    (that.position.left - that.originalPosition.left)) || null;\r\n                top = (parseInt(that.element.css(\"top\"), 10) +\r\n                    (that.position.top - that.originalPosition.top)) || null;\r\n\r\n                if (!o.animate) {\r\n                    this.element.css($.extend(s, { top: top, left: left }));\r\n                }\r\n\r\n                that.helper.height(that.size.height);\r\n                that.helper.width(that.size.width);\r\n\r\n                if (this._helper && !o.animate) {\r\n                    this._proportionallyResize();\r\n                }\r\n            }\r\n\r\n            $(\"body\").css(\"cursor\", \"auto\");\r\n\r\n            this.element.removeClass(\"ui-resizable-resizing\");\r\n\r\n            this._propagate(\"stop\", event);\r\n\r\n            if (this._helper) {\r\n                this.helper.remove();\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n        _updatePrevProperties: function () {\r\n            this.prevPosition = {\r\n                top: this.position.top,\r\n                left: this.position.left\r\n            };\r\n            this.prevSize = {\r\n                width: this.size.width,\r\n                height: this.size.height\r\n            };\r\n        },\r\n\r\n        _applyChanges: function () {\r\n            var props = {};\r\n\r\n            if (this.position.top !== this.prevPosition.top) {\r\n                props.top = this.position.top + \"px\";\r\n            }\r\n            if (this.position.left !== this.prevPosition.left) {\r\n                props.left = this.position.left + \"px\";\r\n            }\r\n            if (this.size.width !== this.prevSize.width) {\r\n                props.width = this.size.width + \"px\";\r\n            }\r\n            if (this.size.height !== this.prevSize.height) {\r\n                props.height = this.size.height + \"px\";\r\n            }\r\n\r\n            this.helper.css(props);\r\n\r\n            return props;\r\n        },\r\n\r\n        _updateVirtualBoundaries: function (forceAspectRatio) {\r\n            var pMinWidth, pMaxWidth, pMinHeight, pMaxHeight, b,\r\n                o = this.options;\r\n\r\n            b = {\r\n                minWidth: this._isNumber(o.minWidth) ? o.minWidth : 0,\r\n                maxWidth: this._isNumber(o.maxWidth) ? o.maxWidth : Infinity,\r\n                minHeight: this._isNumber(o.minHeight) ? o.minHeight : 0,\r\n                maxHeight: this._isNumber(o.maxHeight) ? o.maxHeight : Infinity\r\n            };\r\n\r\n            if (this._aspectRatio || forceAspectRatio) {\r\n                pMinWidth = b.minHeight * this.aspectRatio;\r\n                pMinHeight = b.minWidth / this.aspectRatio;\r\n                pMaxWidth = b.maxHeight * this.aspectRatio;\r\n                pMaxHeight = b.maxWidth / this.aspectRatio;\r\n\r\n                if (pMinWidth > b.minWidth) {\r\n                    b.minWidth = pMinWidth;\r\n                }\r\n                if (pMinHeight > b.minHeight) {\r\n                    b.minHeight = pMinHeight;\r\n                }\r\n                if (pMaxWidth < b.maxWidth) {\r\n                    b.maxWidth = pMaxWidth;\r\n                }\r\n                if (pMaxHeight < b.maxHeight) {\r\n                    b.maxHeight = pMaxHeight;\r\n                }\r\n            }\r\n            this._vBoundaries = b;\r\n        },\r\n\r\n        _updateCache: function (data) {\r\n            this.offset = this.helper.offset();\r\n            if (this._isNumber(data.left)) {\r\n                this.position.left = data.left;\r\n            }\r\n            if (this._isNumber(data.top)) {\r\n                this.position.top = data.top;\r\n            }\r\n            if (this._isNumber(data.height)) {\r\n                this.size.height = data.height;\r\n            }\r\n            if (this._isNumber(data.width)) {\r\n                this.size.width = data.width;\r\n            }\r\n        },\r\n\r\n        _updateRatio: function (data) {\r\n\r\n            var cpos = this.position,\r\n                csize = this.size,\r\n                a = this.axis;\r\n\r\n            if (this._isNumber(data.height)) {\r\n                data.width = (data.height * this.aspectRatio);\r\n            } else if (this._isNumber(data.width)) {\r\n                data.height = (data.width / this.aspectRatio);\r\n            }\r\n\r\n            if (a === \"sw\") {\r\n                data.left = cpos.left + (csize.width - data.width);\r\n                data.top = null;\r\n            }\r\n            if (a === \"nw\") {\r\n                data.top = cpos.top + (csize.height - data.height);\r\n                data.left = cpos.left + (csize.width - data.width);\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n        _respectSize: function (data) {\r\n\r\n            var o = this._vBoundaries,\r\n                a = this.axis,\r\n                ismaxw = this._isNumber(data.width) && o.maxWidth && (o.maxWidth < data.width),\r\n                ismaxh = this._isNumber(data.height) && o.maxHeight && (o.maxHeight < data.height),\r\n                isminw = this._isNumber(data.width) && o.minWidth && (o.minWidth > data.width),\r\n                isminh = this._isNumber(data.height) && o.minHeight && (o.minHeight > data.height),\r\n                dw = this.originalPosition.left + this.originalSize.width,\r\n                dh = this.position.top + this.size.height,\r\n                cw = /sw|nw|w/.test(a), ch = /nw|ne|n/.test(a);\r\n            if (isminw) {\r\n                data.width = o.minWidth;\r\n            }\r\n            if (isminh) {\r\n                data.height = o.minHeight;\r\n            }\r\n            if (ismaxw) {\r\n                data.width = o.maxWidth;\r\n            }\r\n            if (ismaxh) {\r\n                data.height = o.maxHeight;\r\n            }\r\n\r\n            if (isminw && cw) {\r\n                data.left = dw - o.minWidth;\r\n            }\r\n            if (ismaxw && cw) {\r\n                data.left = dw - o.maxWidth;\r\n            }\r\n            if (isminh && ch) {\r\n                data.top = dh - o.minHeight;\r\n            }\r\n            if (ismaxh && ch) {\r\n                data.top = dh - o.maxHeight;\r\n            }\r\n\r\n            // Fixing jump error on top/left - bug #2330\r\n            if (!data.width && !data.height && !data.left && data.top) {\r\n                data.top = null;\r\n            } else if (!data.width && !data.height && !data.top && data.left) {\r\n                data.left = null;\r\n            }\r\n\r\n            return data;\r\n        },\r\n\r\n        _getPaddingPlusBorderDimensions: function (element) {\r\n            var i = 0,\r\n                widths = [],\r\n                borders = [\r\n                    element.css(\"borderTopWidth\"),\r\n                    element.css(\"borderRightWidth\"),\r\n                    element.css(\"borderBottomWidth\"),\r\n                    element.css(\"borderLeftWidth\")\r\n                ],\r\n                paddings = [\r\n                    element.css(\"paddingTop\"),\r\n                    element.css(\"paddingRight\"),\r\n                    element.css(\"paddingBottom\"),\r\n                    element.css(\"paddingLeft\")\r\n                ];\r\n\r\n            for (; i < 4; i++) {\r\n                widths[i] = (parseInt(borders[i], 10) || 0);\r\n                widths[i] += (parseInt(paddings[i], 10) || 0);\r\n            }\r\n\r\n            return {\r\n                height: widths[0] + widths[2],\r\n                width: widths[1] + widths[3]\r\n            };\r\n        },\r\n\r\n        _proportionallyResize: function () {\r\n\r\n            if (!this._proportionallyResizeElements.length) {\r\n                return;\r\n            }\r\n\r\n            var prel,\r\n                i = 0,\r\n                element = this.helper || this.element;\r\n\r\n            for (; i < this._proportionallyResizeElements.length; i++) {\r\n\r\n                prel = this._proportionallyResizeElements[i];\r\n\r\n                // TODO: Seems like a bug to cache this.outerDimensions\r\n                // considering that we are in a loop.\r\n                if (!this.outerDimensions) {\r\n                    this.outerDimensions = this._getPaddingPlusBorderDimensions(prel);\r\n                }\r\n\r\n                prel.css({\r\n                    height: (element.height() - this.outerDimensions.height) || 0,\r\n                    width: (element.width() - this.outerDimensions.width) || 0\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _renderProxy: function () {\r\n\r\n            var el = this.element, o = this.options;\r\n            this.elementOffset = el.offset();\r\n\r\n            if (this._helper) {\r\n\r\n                this.helper = this.helper || $(\"<div style='overflow:hidden;'></div>\");\r\n\r\n                this.helper.addClass(this._helper).css({\r\n                    width: this.element.outerWidth() - 1,\r\n                    height: this.element.outerHeight() - 1,\r\n                    position: \"absolute\",\r\n                    left: this.elementOffset.left + \"px\",\r\n                    top: this.elementOffset.top + \"px\",\r\n                    zIndex: ++o.zIndex //TODO: Don't modify option\r\n                });\r\n\r\n                this.helper\r\n                    .appendTo(\"body\")\r\n                    .disableSelection();\r\n\r\n            } else {\r\n                this.helper = this.element;\r\n            }\r\n\r\n        },\r\n\r\n        _change: {\r\n            e: function (event, dx) {\r\n                return { width: this.originalSize.width + dx };\r\n            },\r\n            w: function (event, dx) {\r\n                var cs = this.originalSize, sp = this.originalPosition;\r\n                return { left: sp.left + dx, width: cs.width - dx };\r\n            },\r\n            n: function (event, dx, dy) {\r\n                var cs = this.originalSize, sp = this.originalPosition;\r\n                return { top: sp.top + dy, height: cs.height - dy };\r\n            },\r\n            s: function (event, dx, dy) {\r\n                return { height: this.originalSize.height + dy };\r\n            },\r\n            se: function (event, dx, dy) {\r\n                return $.extend(this._change.s.apply(this, arguments),\r\n                    this._change.e.apply(this, [event, dx, dy]));\r\n            },\r\n            sw: function (event, dx, dy) {\r\n                return $.extend(this._change.s.apply(this, arguments),\r\n                    this._change.w.apply(this, [event, dx, dy]));\r\n            },\r\n            ne: function (event, dx, dy) {\r\n                return $.extend(this._change.n.apply(this, arguments),\r\n                    this._change.e.apply(this, [event, dx, dy]));\r\n            },\r\n            nw: function (event, dx, dy) {\r\n                return $.extend(this._change.n.apply(this, arguments),\r\n                    this._change.w.apply(this, [event, dx, dy]));\r\n            }\r\n        },\r\n\r\n        _propagate: function (n, event) {\r\n            $.ui.plugin.call(this, n, [event, this.ui()]);\r\n            (n !== \"resize\" && this._trigger(n, event, this.ui()));\r\n        },\r\n\r\n        plugins: {},\r\n\r\n        ui: function () {\r\n            return {\r\n                originalElement: this.originalElement,\r\n                element: this.element,\r\n                helper: this.helper,\r\n                position: this.position,\r\n                size: this.size,\r\n                originalSize: this.originalSize,\r\n                originalPosition: this.originalPosition\r\n            };\r\n        }\r\n\r\n    });\r\n\r\n    /*\r\n     * Resizable Extensions\r\n     */\r\n\r\n    $.ui.plugin.add(\"resizable\", \"animate\", {\r\n\r\n        stop: function (event) {\r\n            var that = $(this).resizable(\"instance\"),\r\n                o = that.options,\r\n                pr = that._proportionallyResizeElements,\r\n                ista = pr.length && (/textarea/i).test(pr[0].nodeName),\r\n                soffseth = ista && that._hasScroll(pr[0], \"left\") ? 0 : that.sizeDiff.height,\r\n                soffsetw = ista ? 0 : that.sizeDiff.width,\r\n                style = { width: (that.size.width - soffsetw), height: (that.size.height - soffseth) },\r\n                left = (parseInt(that.element.css(\"left\"), 10) +\r\n                    (that.position.left - that.originalPosition.left)) || null,\r\n                top = (parseInt(that.element.css(\"top\"), 10) +\r\n                    (that.position.top - that.originalPosition.top)) || null;\r\n\r\n            that.element.animate(\r\n                $.extend(style, top && left ? { top: top, left: left } : {}), {\r\n                duration: o.animateDuration,\r\n                easing: o.animateEasing,\r\n                step: function () {\r\n\r\n                    var data = {\r\n                        width: parseInt(that.element.css(\"width\"), 10),\r\n                        height: parseInt(that.element.css(\"height\"), 10),\r\n                        top: parseInt(that.element.css(\"top\"), 10),\r\n                        left: parseInt(that.element.css(\"left\"), 10)\r\n                    };\r\n\r\n                    if (pr && pr.length) {\r\n                        $(pr[0]).css({ width: data.width, height: data.height });\r\n                    }\r\n\r\n                    // propagating resize, and updating values for each animation step\r\n                    that._updateCache(data);\r\n                    that._propagate(\"resize\", event);\r\n\r\n                }\r\n            }\r\n            );\r\n        }\r\n\r\n    });\r\n\r\n    $.ui.plugin.add(\"resizable\", \"containment\", {\r\n\r\n        start: function () {\r\n            var element, p, co, ch, cw, width, height,\r\n                that = $(this).resizable(\"instance\"),\r\n                o = that.options,\r\n                el = that.element,\r\n                oc = o.containment,\r\n                ce = (oc instanceof $) ? oc.get(0) : (/parent/.test(oc)) ? el.parent().get(0) : oc;\r\n\r\n            if (!ce) {\r\n                return;\r\n            }\r\n\r\n            that.containerElement = $(ce);\r\n\r\n            if (/document/.test(oc) || oc === document) {\r\n                that.containerOffset = {\r\n                    left: 0,\r\n                    top: 0\r\n                };\r\n                that.containerPosition = {\r\n                    left: 0,\r\n                    top: 0\r\n                };\r\n\r\n                that.parentData = {\r\n                    element: $(document),\r\n                    left: 0,\r\n                    top: 0,\r\n                    width: $(document).width(),\r\n                    height: $(document).height() || document.body.parentNode.scrollHeight\r\n                };\r\n            } else {\r\n                element = $(ce);\r\n                p = [];\r\n                $([\"Top\", \"Right\", \"Left\", \"Bottom\"]).each(function (i, name) {\r\n                    p[i] = that._num(element.css(\"padding\" + name));\r\n                });\r\n\r\n                that.containerOffset = element.offset();\r\n                that.containerPosition = element.position();\r\n                that.containerSize = {\r\n                    height: (element.innerHeight() - p[3]),\r\n                    width: (element.innerWidth() - p[1])\r\n                };\r\n\r\n                co = that.containerOffset;\r\n                ch = that.containerSize.height;\r\n                cw = that.containerSize.width;\r\n                width = (that._hasScroll(ce, \"left\") ? ce.scrollWidth : cw);\r\n                height = (that._hasScroll(ce) ? ce.scrollHeight : ch);\r\n\r\n                that.parentData = {\r\n                    element: ce,\r\n                    left: co.left,\r\n                    top: co.top,\r\n                    width: width,\r\n                    height: height\r\n                };\r\n            }\r\n        },\r\n\r\n        resize: function (event) {\r\n            var woset, hoset, isParent, isOffsetRelative,\r\n                that = $(this).resizable(\"instance\"),\r\n                o = that.options,\r\n                co = that.containerOffset,\r\n                cp = that.position,\r\n                pRatio = that._aspectRatio || event.shiftKey,\r\n                cop = {\r\n                    top: 0,\r\n                    left: 0\r\n                },\r\n                ce = that.containerElement,\r\n                continueResize = true;\r\n\r\n            if (ce[0] !== document && (/static/).test(ce.css(\"position\"))) {\r\n                cop = co;\r\n            }\r\n\r\n            if (cp.left < (that._helper ? co.left : 0)) {\r\n                that.size.width = that.size.width +\r\n                    (that._helper ?\r\n                        (that.position.left - co.left) :\r\n                        (that.position.left - cop.left));\r\n\r\n                if (pRatio) {\r\n                    that.size.height = that.size.width / that.aspectRatio;\r\n                    continueResize = false;\r\n                }\r\n                that.position.left = o.helper ? co.left : 0;\r\n            }\r\n\r\n            if (cp.top < (that._helper ? co.top : 0)) {\r\n                that.size.height = that.size.height +\r\n                    (that._helper ?\r\n                        (that.position.top - co.top) :\r\n                        that.position.top);\r\n\r\n                if (pRatio) {\r\n                    that.size.width = that.size.height * that.aspectRatio;\r\n                    continueResize = false;\r\n                }\r\n                that.position.top = that._helper ? co.top : 0;\r\n            }\r\n\r\n            isParent = that.containerElement.get(0) === that.element.parent().get(0);\r\n            isOffsetRelative = /relative|absolute/.test(that.containerElement.css(\"position\"));\r\n\r\n            if (isParent && isOffsetRelative) {\r\n                that.offset.left = that.parentData.left + that.position.left;\r\n                that.offset.top = that.parentData.top + that.position.top;\r\n            } else {\r\n                that.offset.left = that.element.offset().left;\r\n                that.offset.top = that.element.offset().top;\r\n            }\r\n\r\n            woset = Math.abs(that.sizeDiff.width +\r\n                (that._helper ?\r\n                    that.offset.left - cop.left :\r\n                    (that.offset.left - co.left)));\r\n\r\n            hoset = Math.abs(that.sizeDiff.height +\r\n                (that._helper ?\r\n                    that.offset.top - cop.top :\r\n                    (that.offset.top - co.top)));\r\n\r\n            if (woset + that.size.width >= that.parentData.width) {\r\n                that.size.width = that.parentData.width - woset;\r\n                if (pRatio) {\r\n                    that.size.height = that.size.width / that.aspectRatio;\r\n                    continueResize = false;\r\n                }\r\n            }\r\n\r\n            if (hoset + that.size.height >= that.parentData.height) {\r\n                that.size.height = that.parentData.height - hoset;\r\n                if (pRatio) {\r\n                    that.size.width = that.size.height * that.aspectRatio;\r\n                    continueResize = false;\r\n                }\r\n            }\r\n\r\n            if (!continueResize) {\r\n                that.position.left = that.prevPosition.left;\r\n                that.position.top = that.prevPosition.top;\r\n                that.size.width = that.prevSize.width;\r\n                that.size.height = that.prevSize.height;\r\n            }\r\n        },\r\n\r\n        stop: function () {\r\n            var that = $(this).resizable(\"instance\"),\r\n                o = that.options,\r\n                co = that.containerOffset,\r\n                cop = that.containerPosition,\r\n                ce = that.containerElement,\r\n                helper = $(that.helper),\r\n                ho = helper.offset(),\r\n                w = helper.outerWidth() - that.sizeDiff.width,\r\n                h = helper.outerHeight() - that.sizeDiff.height;\r\n\r\n            if (that._helper && !o.animate && (/relative/).test(ce.css(\"position\"))) {\r\n                $(this).css({\r\n                    left: ho.left - cop.left - co.left,\r\n                    width: w,\r\n                    height: h\r\n                });\r\n            }\r\n\r\n            if (that._helper && !o.animate && (/static/).test(ce.css(\"position\"))) {\r\n                $(this).css({\r\n                    left: ho.left - cop.left - co.left,\r\n                    width: w,\r\n                    height: h\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"resizable\", \"alsoResize\", {\r\n\r\n        start: function () {\r\n            var that = $(this).resizable(\"instance\"),\r\n                o = that.options;\r\n\r\n            $(o.alsoResize).each(function () {\r\n                var el = $(this);\r\n                el.data(\"ui-resizable-alsoresize\", {\r\n                    width: parseInt(el.width(), 10), height: parseInt(el.height(), 10),\r\n                    left: parseInt(el.css(\"left\"), 10), top: parseInt(el.css(\"top\"), 10)\r\n                });\r\n            });\r\n        },\r\n\r\n        resize: function (event, ui) {\r\n            var that = $(this).resizable(\"instance\"),\r\n                o = that.options,\r\n                os = that.originalSize,\r\n                op = that.originalPosition,\r\n                delta = {\r\n                    height: (that.size.height - os.height) || 0,\r\n                    width: (that.size.width - os.width) || 0,\r\n                    top: (that.position.top - op.top) || 0,\r\n                    left: (that.position.left - op.left) || 0\r\n                };\r\n\r\n            $(o.alsoResize).each(function () {\r\n                var el = $(this), start = $(this).data(\"ui-resizable-alsoresize\"), style = {},\r\n                    css = el.parents(ui.originalElement[0]).length ?\r\n                        [\"width\", \"height\"] :\r\n                        [\"width\", \"height\", \"top\", \"left\"];\r\n\r\n                $.each(css, function (i, prop) {\r\n                    var sum = (start[prop] || 0) + (delta[prop] || 0);\r\n                    if (sum && sum >= 0) {\r\n                        style[prop] = sum || null;\r\n                    }\r\n                });\r\n\r\n                el.css(style);\r\n            });\r\n        },\r\n\r\n        stop: function () {\r\n            $(this).removeData(\"resizable-alsoresize\");\r\n        }\r\n    });\r\n\r\n    $.ui.plugin.add(\"resizable\", \"ghost\", {\r\n\r\n        start: function () {\r\n\r\n            var that = $(this).resizable(\"instance\"), o = that.options, cs = that.size;\r\n\r\n            that.ghost = that.originalElement.clone();\r\n            that.ghost\r\n                .css({\r\n                    opacity: 0.25,\r\n                    display: \"block\",\r\n                    position: \"relative\",\r\n                    height: cs.height,\r\n                    width: cs.width,\r\n                    margin: 0,\r\n                    left: 0,\r\n                    top: 0\r\n                })\r\n                .addClass(\"ui-resizable-ghost\")\r\n                .addClass(typeof o.ghost === \"string\" ? o.ghost : \"\");\r\n\r\n            that.ghost.appendTo(that.helper);\r\n\r\n        },\r\n\r\n        resize: function () {\r\n            var that = $(this).resizable(\"instance\");\r\n            if (that.ghost) {\r\n                that.ghost.css({\r\n                    position: \"relative\",\r\n                    height: that.size.height,\r\n                    width: that.size.width\r\n                });\r\n            }\r\n        },\r\n\r\n        stop: function () {\r\n            var that = $(this).resizable(\"instance\");\r\n            if (that.ghost && that.helper) {\r\n                that.helper.get(0).removeChild(that.ghost.get(0));\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    $.ui.plugin.add(\"resizable\", \"grid\", {\r\n\r\n        resize: function () {\r\n            var outerDimensions,\r\n                that = $(this).resizable(\"instance\"),\r\n                o = that.options,\r\n                cs = that.size,\r\n                os = that.originalSize,\r\n                op = that.originalPosition,\r\n                a = that.axis,\r\n                grid = typeof o.grid === \"number\" ? [o.grid, o.grid] : o.grid,\r\n                gridX = (grid[0] || 1),\r\n                gridY = (grid[1] || 1),\r\n                ox = Math.round((cs.width - os.width) / gridX) * gridX,\r\n                oy = Math.round((cs.height - os.height) / gridY) * gridY,\r\n                newWidth = os.width + ox,\r\n                newHeight = os.height + oy,\r\n                isMaxWidth = o.maxWidth && (o.maxWidth < newWidth),\r\n                isMaxHeight = o.maxHeight && (o.maxHeight < newHeight),\r\n                isMinWidth = o.minWidth && (o.minWidth > newWidth),\r\n                isMinHeight = o.minHeight && (o.minHeight > newHeight);\r\n\r\n            o.grid = grid;\r\n\r\n            if (isMinWidth) {\r\n                newWidth += gridX;\r\n            }\r\n            if (isMinHeight) {\r\n                newHeight += gridY;\r\n            }\r\n            if (isMaxWidth) {\r\n                newWidth -= gridX;\r\n            }\r\n            if (isMaxHeight) {\r\n                newHeight -= gridY;\r\n            }\r\n\r\n            if (/^(se|s|e)$/.test(a)) {\r\n                that.size.width = newWidth;\r\n                that.size.height = newHeight;\r\n            } else if (/^(ne)$/.test(a)) {\r\n                that.size.width = newWidth;\r\n                that.size.height = newHeight;\r\n                that.position.top = op.top - oy;\r\n            } else if (/^(sw)$/.test(a)) {\r\n                that.size.width = newWidth;\r\n                that.size.height = newHeight;\r\n                that.position.left = op.left - ox;\r\n            } else {\r\n                if (newHeight - gridY <= 0 || newWidth - gridX <= 0) {\r\n                    outerDimensions = that._getPaddingPlusBorderDimensions(this);\r\n                }\r\n\r\n                if (newHeight - gridY > 0) {\r\n                    that.size.height = newHeight;\r\n                    that.position.top = op.top - oy;\r\n                } else {\r\n                    newHeight = gridY - outerDimensions.height;\r\n                    that.size.height = newHeight;\r\n                    that.position.top = op.top + os.height - newHeight;\r\n                }\r\n                if (newWidth - gridX > 0) {\r\n                    that.size.width = newWidth;\r\n                    that.position.left = op.left - ox;\r\n                } else {\r\n                    newWidth = gridX - outerDimensions.width;\r\n                    that.size.width = newWidth;\r\n                    that.position.left = op.left + os.width - newWidth;\r\n                }\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    var resizable = $.ui.resizable;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Selectable 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/selectable/\r\n     */\r\n\r\n\r\n    var selectable = $.widget(\"ui.selectable\", $.ui.mouse, {\r\n        version: \"1.11.4\",\r\n        options: {\r\n            appendTo: \"body\",\r\n            autoRefresh: true,\r\n            distance: 0,\r\n            filter: \"*\",\r\n            tolerance: \"touch\",\r\n\r\n            // callbacks\r\n            selected: null,\r\n            selecting: null,\r\n            start: null,\r\n            stop: null,\r\n            unselected: null,\r\n            unselecting: null\r\n        },\r\n        _create: function () {\r\n            var selectees,\r\n                that = this;\r\n\r\n            this.element.addClass(\"ui-selectable\");\r\n\r\n            this.dragged = false;\r\n\r\n            // cache selectee children based on filter\r\n            this.refresh = function () {\r\n                selectees = $(that.options.filter, that.element[0]);\r\n                selectees.addClass(\"ui-selectee\");\r\n                selectees.each(function () {\r\n                    var $this = $(this),\r\n                        pos = $this.offset();\r\n                    $.data(this, \"selectable-item\", {\r\n                        element: this,\r\n                        $element: $this,\r\n                        left: pos.left,\r\n                        top: pos.top,\r\n                        right: pos.left + $this.outerWidth(),\r\n                        bottom: pos.top + $this.outerHeight(),\r\n                        startselected: false,\r\n                        selected: $this.hasClass(\"ui-selected\"),\r\n                        selecting: $this.hasClass(\"ui-selecting\"),\r\n                        unselecting: $this.hasClass(\"ui-unselecting\")\r\n                    });\r\n                });\r\n            };\r\n            this.refresh();\r\n\r\n            this.selectees = selectees.addClass(\"ui-selectee\");\r\n\r\n            this._mouseInit();\r\n\r\n            this.helper = $(\"<div class='ui-selectable-helper'></div>\");\r\n        },\r\n\r\n        _destroy: function () {\r\n            this.selectees\r\n                .removeClass(\"ui-selectee\")\r\n                .removeData(\"selectable-item\");\r\n            this.element\r\n                .removeClass(\"ui-selectable ui-selectable-disabled\");\r\n            this._mouseDestroy();\r\n        },\r\n\r\n        _mouseStart: function (event) {\r\n            var that = this,\r\n                options = this.options;\r\n\r\n            this.opos = [event.pageX, event.pageY];\r\n\r\n            if (this.options.disabled) {\r\n                return;\r\n            }\r\n\r\n            this.selectees = $(options.filter, this.element[0]);\r\n\r\n            this._trigger(\"start\", event);\r\n\r\n            $(options.appendTo).append(this.helper);\r\n            // position helper (lasso)\r\n            this.helper.css({\r\n                \"left\": event.pageX,\r\n                \"top\": event.pageY,\r\n                \"width\": 0,\r\n                \"height\": 0\r\n            });\r\n\r\n            if (options.autoRefresh) {\r\n                this.refresh();\r\n            }\r\n\r\n            this.selectees.filter(\".ui-selected\").each(function () {\r\n                var selectee = $.data(this, \"selectable-item\");\r\n                selectee.startselected = true;\r\n                if (!event.metaKey && !event.ctrlKey) {\r\n                    selectee.$element.removeClass(\"ui-selected\");\r\n                    selectee.selected = false;\r\n                    selectee.$element.addClass(\"ui-unselecting\");\r\n                    selectee.unselecting = true;\r\n                    // selectable UNSELECTING callback\r\n                    that._trigger(\"unselecting\", event, {\r\n                        unselecting: selectee.element\r\n                    });\r\n                }\r\n            });\r\n\r\n            $(event.target).parents().addBack().each(function () {\r\n                var doSelect,\r\n                    selectee = $.data(this, \"selectable-item\");\r\n                if (selectee) {\r\n                    doSelect = (!event.metaKey && !event.ctrlKey) || !selectee.$element.hasClass(\"ui-selected\");\r\n                    selectee.$element\r\n                        .removeClass(doSelect ? \"ui-unselecting\" : \"ui-selected\")\r\n                        .addClass(doSelect ? \"ui-selecting\" : \"ui-unselecting\");\r\n                    selectee.unselecting = !doSelect;\r\n                    selectee.selecting = doSelect;\r\n                    selectee.selected = doSelect;\r\n                    // selectable (UN)SELECTING callback\r\n                    if (doSelect) {\r\n                        that._trigger(\"selecting\", event, {\r\n                            selecting: selectee.element\r\n                        });\r\n                    } else {\r\n                        that._trigger(\"unselecting\", event, {\r\n                            unselecting: selectee.element\r\n                        });\r\n                    }\r\n                    return false;\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        _mouseDrag: function (event) {\r\n\r\n            this.dragged = true;\r\n\r\n            if (this.options.disabled) {\r\n                return;\r\n            }\r\n\r\n            var tmp,\r\n                that = this,\r\n                options = this.options,\r\n                x1 = this.opos[0],\r\n                y1 = this.opos[1],\r\n                x2 = event.pageX,\r\n                y2 = event.pageY;\r\n\r\n            if (x1 > x2) { tmp = x2; x2 = x1; x1 = tmp; }\r\n            if (y1 > y2) { tmp = y2; y2 = y1; y1 = tmp; }\r\n            this.helper.css({ left: x1, top: y1, width: x2 - x1, height: y2 - y1 });\r\n\r\n            this.selectees.each(function () {\r\n                var selectee = $.data(this, \"selectable-item\"),\r\n                    hit = false;\r\n\r\n                //prevent helper from being selected if appendTo: selectable\r\n                if (!selectee || selectee.element === that.element[0]) {\r\n                    return;\r\n                }\r\n\r\n                if (options.tolerance === \"touch\") {\r\n                    hit = (!(selectee.left > x2 || selectee.right < x1 || selectee.top > y2 || selectee.bottom < y1));\r\n                } else if (options.tolerance === \"fit\") {\r\n                    hit = (selectee.left > x1 && selectee.right < x2 && selectee.top > y1 && selectee.bottom < y2);\r\n                }\r\n\r\n                if (hit) {\r\n                    // SELECT\r\n                    if (selectee.selected) {\r\n                        selectee.$element.removeClass(\"ui-selected\");\r\n                        selectee.selected = false;\r\n                    }\r\n                    if (selectee.unselecting) {\r\n                        selectee.$element.removeClass(\"ui-unselecting\");\r\n                        selectee.unselecting = false;\r\n                    }\r\n                    if (!selectee.selecting) {\r\n                        selectee.$element.addClass(\"ui-selecting\");\r\n                        selectee.selecting = true;\r\n                        // selectable SELECTING callback\r\n                        that._trigger(\"selecting\", event, {\r\n                            selecting: selectee.element\r\n                        });\r\n                    }\r\n                } else {\r\n                    // UNSELECT\r\n                    if (selectee.selecting) {\r\n                        if ((event.metaKey || event.ctrlKey) && selectee.startselected) {\r\n                            selectee.$element.removeClass(\"ui-selecting\");\r\n                            selectee.selecting = false;\r\n                            selectee.$element.addClass(\"ui-selected\");\r\n                            selectee.selected = true;\r\n                        } else {\r\n                            selectee.$element.removeClass(\"ui-selecting\");\r\n                            selectee.selecting = false;\r\n                            if (selectee.startselected) {\r\n                                selectee.$element.addClass(\"ui-unselecting\");\r\n                                selectee.unselecting = true;\r\n                            }\r\n                            // selectable UNSELECTING callback\r\n                            that._trigger(\"unselecting\", event, {\r\n                                unselecting: selectee.element\r\n                            });\r\n                        }\r\n                    }\r\n                    if (selectee.selected) {\r\n                        if (!event.metaKey && !event.ctrlKey && !selectee.startselected) {\r\n                            selectee.$element.removeClass(\"ui-selected\");\r\n                            selectee.selected = false;\r\n\r\n                            selectee.$element.addClass(\"ui-unselecting\");\r\n                            selectee.unselecting = true;\r\n                            // selectable UNSELECTING callback\r\n                            that._trigger(\"unselecting\", event, {\r\n                                unselecting: selectee.element\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n            return false;\r\n        },\r\n\r\n        _mouseStop: function (event) {\r\n            var that = this;\r\n\r\n            this.dragged = false;\r\n\r\n            $(\".ui-unselecting\", this.element[0]).each(function () {\r\n                var selectee = $.data(this, \"selectable-item\");\r\n                selectee.$element.removeClass(\"ui-unselecting\");\r\n                selectee.unselecting = false;\r\n                selectee.startselected = false;\r\n                that._trigger(\"unselected\", event, {\r\n                    unselected: selectee.element\r\n                });\r\n            });\r\n            $(\".ui-selecting\", this.element[0]).each(function () {\r\n                var selectee = $.data(this, \"selectable-item\");\r\n                selectee.$element.removeClass(\"ui-selecting\").addClass(\"ui-selected\");\r\n                selectee.selecting = false;\r\n                selectee.selected = true;\r\n                selectee.startselected = true;\r\n                that._trigger(\"selected\", event, {\r\n                    selected: selectee.element\r\n                });\r\n            });\r\n            this._trigger(\"stop\", event);\r\n\r\n            this.helper.remove();\r\n\r\n            return false;\r\n        }\r\n\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Sortable 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/sortable/\r\n     */\r\n\r\n\r\n    var sortable = $.widget(\"ui.sortable\", $.ui.mouse, {\r\n        version: \"1.11.4\",\r\n        widgetEventPrefix: \"sort\",\r\n        ready: false,\r\n        options: {\r\n            appendTo: \"parent\",\r\n            axis: false,\r\n            connectWith: false,\r\n            containment: false,\r\n            cursor: \"auto\",\r\n            cursorAt: false,\r\n            dropOnEmpty: true,\r\n            forcePlaceholderSize: false,\r\n            forceHelperSize: false,\r\n            grid: false,\r\n            handle: false,\r\n            helper: \"original\",\r\n            items: \"> *\",\r\n            opacity: false,\r\n            placeholder: false,\r\n            revert: false,\r\n            scroll: true,\r\n            scrollSensitivity: 20,\r\n            scrollSpeed: 20,\r\n            scope: \"default\",\r\n            tolerance: \"intersect\",\r\n            zIndex: 1000,\r\n\r\n            // callbacks\r\n            activate: null,\r\n            beforeStop: null,\r\n            change: null,\r\n            deactivate: null,\r\n            out: null,\r\n            over: null,\r\n            receive: null,\r\n            remove: null,\r\n            sort: null,\r\n            start: null,\r\n            stop: null,\r\n            update: null\r\n        },\r\n\r\n        _isOverAxis: function (x, reference, size) {\r\n            return (x >= reference) && (x < (reference + size));\r\n        },\r\n\r\n        _isFloating: function (item) {\r\n            return (/left|right/).test(item.css(\"float\")) || (/inline|table-cell/).test(item.css(\"display\"));\r\n        },\r\n\r\n        _create: function () {\r\n            this.containerCache = {};\r\n            this.element.addClass(\"ui-sortable\");\r\n\r\n            //Get the items\r\n            this.refresh();\r\n\r\n            //Let's determine the parent's offset\r\n            this.offset = this.element.offset();\r\n\r\n            //Initialize mouse events for interaction\r\n            this._mouseInit();\r\n\r\n            this._setHandleClassName();\r\n\r\n            //We're ready to go\r\n            this.ready = true;\r\n\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            this._super(key, value);\r\n\r\n            if (key === \"handle\") {\r\n                this._setHandleClassName();\r\n            }\r\n        },\r\n\r\n        _setHandleClassName: function () {\r\n            this.element.find(\".ui-sortable-handle\").removeClass(\"ui-sortable-handle\");\r\n            $.each(this.items, function () {\r\n                (this.instance.options.handle ?\r\n                    this.item.find(this.instance.options.handle) : this.item)\r\n                    .addClass(\"ui-sortable-handle\");\r\n            });\r\n        },\r\n\r\n        _destroy: function () {\r\n            this.element\r\n                .removeClass(\"ui-sortable ui-sortable-disabled\")\r\n                .find(\".ui-sortable-handle\")\r\n                .removeClass(\"ui-sortable-handle\");\r\n            this._mouseDestroy();\r\n\r\n            for (var i = this.items.length - 1; i >= 0; i--) {\r\n                this.items[i].item.removeData(this.widgetName + \"-item\");\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        _mouseCapture: function (event, overrideHandle) {\r\n            var currentItem = null,\r\n                validHandle = false,\r\n                that = this;\r\n\r\n            if (this.reverting) {\r\n                return false;\r\n            }\r\n\r\n            if (this.options.disabled || this.options.type === \"static\") {\r\n                return false;\r\n            }\r\n\r\n            //We have to refresh the items data once first\r\n            this._refreshItems(event);\r\n\r\n            //Find out if the clicked node (or one of its parents) is a actual item in this.items\r\n            $(event.target).parents().each(function () {\r\n                if ($.data(this, that.widgetName + \"-item\") === that) {\r\n                    currentItem = $(this);\r\n                    return false;\r\n                }\r\n            });\r\n            if ($.data(event.target, that.widgetName + \"-item\") === that) {\r\n                currentItem = $(event.target);\r\n            }\r\n\r\n            if (!currentItem) {\r\n                return false;\r\n            }\r\n            if (this.options.handle && !overrideHandle) {\r\n                $(this.options.handle, currentItem).find(\"*\").addBack().each(function () {\r\n                    if (this === event.target) {\r\n                        validHandle = true;\r\n                    }\r\n                });\r\n                if (!validHandle) {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            this.currentItem = currentItem;\r\n            this._removeCurrentsFromItems();\r\n            return true;\r\n\r\n        },\r\n\r\n        _mouseStart: function (event, overrideHandle, noActivation) {\r\n\r\n            var i, body,\r\n                o = this.options;\r\n\r\n            this.currentContainer = this;\r\n\r\n            //We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture\r\n            this.refreshPositions();\r\n\r\n            //Create and append the visible helper\r\n            this.helper = this._createHelper(event);\r\n\r\n            //Cache the helper size\r\n            this._cacheHelperProportions();\r\n\r\n            /*\r\n             * - Position generation -\r\n             * This block generates everything position related - it's the core of draggables.\r\n             */\r\n\r\n            //Cache the margins of the original element\r\n            this._cacheMargins();\r\n\r\n            //Get the next scrolling parent\r\n            this.scrollParent = this.helper.scrollParent();\r\n\r\n            //The element's absolute position on the page minus margins\r\n            this.offset = this.currentItem.offset();\r\n            this.offset = {\r\n                top: this.offset.top - this.margins.top,\r\n                left: this.offset.left - this.margins.left\r\n            };\r\n\r\n            $.extend(this.offset, {\r\n                click: { //Where the click happened, relative to the element\r\n                    left: event.pageX - this.offset.left,\r\n                    top: event.pageY - this.offset.top\r\n                },\r\n                parent: this._getParentOffset(),\r\n                relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper\r\n            });\r\n\r\n            // Only after we got the offset, we can change the helper's position to absolute\r\n            // TODO: Still need to figure out a way to make relative sorting possible\r\n            this.helper.css(\"position\", \"absolute\");\r\n            this.cssPosition = this.helper.css(\"position\");\r\n\r\n            //Generate the original position\r\n            this.originalPosition = this._generatePosition(event);\r\n            this.originalPageX = event.pageX;\r\n            this.originalPageY = event.pageY;\r\n\r\n            //Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\r\n            (o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));\r\n\r\n            //Cache the former DOM position\r\n            this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };\r\n\r\n            //If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way\r\n            if (this.helper[0] !== this.currentItem[0]) {\r\n                this.currentItem.hide();\r\n            }\r\n\r\n            //Create the placeholder\r\n            this._createPlaceholder();\r\n\r\n            //Set a containment if given in the options\r\n            if (o.containment) {\r\n                this._setContainment();\r\n            }\r\n\r\n            if (o.cursor && o.cursor !== \"auto\") { // cursor option\r\n                body = this.document.find(\"body\");\r\n\r\n                // support: IE\r\n                this.storedCursor = body.css(\"cursor\");\r\n                body.css(\"cursor\", o.cursor);\r\n\r\n                this.storedStylesheet = $(\"<style>*{ cursor: \" + o.cursor + \" !important; }</style>\").appendTo(body);\r\n            }\r\n\r\n            if (o.opacity) { // opacity option\r\n                if (this.helper.css(\"opacity\")) {\r\n                    this._storedOpacity = this.helper.css(\"opacity\");\r\n                }\r\n                this.helper.css(\"opacity\", o.opacity);\r\n            }\r\n\r\n            if (o.zIndex) { // zIndex option\r\n                if (this.helper.css(\"zIndex\")) {\r\n                    this._storedZIndex = this.helper.css(\"zIndex\");\r\n                }\r\n                this.helper.css(\"zIndex\", o.zIndex);\r\n            }\r\n\r\n            //Prepare scrolling\r\n            if (this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== \"HTML\") {\r\n                this.overflowOffset = this.scrollParent.offset();\r\n            }\r\n\r\n            //Call callbacks\r\n            this._trigger(\"start\", event, this._uiHash());\r\n\r\n            //Recache the helper size\r\n            if (!this._preserveHelperProportions) {\r\n                this._cacheHelperProportions();\r\n            }\r\n\r\n\r\n            //Post \"activate\" events to possible containers\r\n            if (!noActivation) {\r\n                for (i = this.containers.length - 1; i >= 0; i--) {\r\n                    this.containers[i]._trigger(\"activate\", event, this._uiHash(this));\r\n                }\r\n            }\r\n\r\n            //Prepare possible droppables\r\n            if ($.ui.ddmanager) {\r\n                $.ui.ddmanager.current = this;\r\n            }\r\n\r\n            if ($.ui.ddmanager && !o.dropBehaviour) {\r\n                $.ui.ddmanager.prepareOffsets(this, event);\r\n            }\r\n\r\n            this.dragging = true;\r\n\r\n            this.helper.addClass(\"ui-sortable-helper\");\r\n            this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position\r\n            return true;\r\n\r\n        },\r\n\r\n        _mouseDrag: function (event) {\r\n            var i, item, itemElement, intersection,\r\n                o = this.options,\r\n                scrolled = false;\r\n\r\n            //Compute the helpers position\r\n            this.position = this._generatePosition(event);\r\n            this.positionAbs = this._convertPositionTo(\"absolute\");\r\n\r\n            if (!this.lastPositionAbs) {\r\n                this.lastPositionAbs = this.positionAbs;\r\n            }\r\n\r\n            //Do scrolling\r\n            if (this.options.scroll) {\r\n                if (this.scrollParent[0] !== this.document[0] && this.scrollParent[0].tagName !== \"HTML\") {\r\n\r\n                    if ((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {\r\n                        this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;\r\n                    } else if (event.pageY - this.overflowOffset.top < o.scrollSensitivity) {\r\n                        this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;\r\n                    }\r\n\r\n                    if ((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {\r\n                        this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;\r\n                    } else if (event.pageX - this.overflowOffset.left < o.scrollSensitivity) {\r\n                        this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;\r\n                    }\r\n\r\n                } else {\r\n\r\n                    if (event.pageY - this.document.scrollTop() < o.scrollSensitivity) {\r\n                        scrolled = this.document.scrollTop(this.document.scrollTop() - o.scrollSpeed);\r\n                    } else if (this.window.height() - (event.pageY - this.document.scrollTop()) < o.scrollSensitivity) {\r\n                        scrolled = this.document.scrollTop(this.document.scrollTop() + o.scrollSpeed);\r\n                    }\r\n\r\n                    if (event.pageX - this.document.scrollLeft() < o.scrollSensitivity) {\r\n                        scrolled = this.document.scrollLeft(this.document.scrollLeft() - o.scrollSpeed);\r\n                    } else if (this.window.width() - (event.pageX - this.document.scrollLeft()) < o.scrollSensitivity) {\r\n                        scrolled = this.document.scrollLeft(this.document.scrollLeft() + o.scrollSpeed);\r\n                    }\r\n\r\n                }\r\n\r\n                if (scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {\r\n                    $.ui.ddmanager.prepareOffsets(this, event);\r\n                }\r\n            }\r\n\r\n            //Regenerate the absolute position used for position checks\r\n            this.positionAbs = this._convertPositionTo(\"absolute\");\r\n\r\n            //Set the helper position\r\n            if (!this.options.axis || this.options.axis !== \"y\") {\r\n                this.helper[0].style.left = this.position.left + \"px\";\r\n            }\r\n            if (!this.options.axis || this.options.axis !== \"x\") {\r\n                this.helper[0].style.top = this.position.top + \"px\";\r\n            }\r\n\r\n            //Rearrange\r\n            for (i = this.items.length - 1; i >= 0; i--) {\r\n\r\n                //Cache variables and intersection, continue if no intersection\r\n                item = this.items[i];\r\n                itemElement = item.item[0];\r\n                intersection = this._intersectsWithPointer(item);\r\n                if (!intersection) {\r\n                    continue;\r\n                }\r\n\r\n                // Only put the placeholder inside the current Container, skip all\r\n                // items from other containers. This works because when moving\r\n                // an item from one container to another the\r\n                // currentContainer is switched before the placeholder is moved.\r\n                //\r\n                // Without this, moving items in \"sub-sortables\" can cause\r\n                // the placeholder to jitter between the outer and inner container.\r\n                if (item.instance !== this.currentContainer) {\r\n                    continue;\r\n                }\r\n\r\n                // cannot intersect with itself\r\n                // no useless actions that have been done before\r\n                // no action if the item moved is the parent of the item checked\r\n                if (itemElement !== this.currentItem[0] &&\r\n                    this.placeholder[intersection === 1 ? \"next\" : \"prev\"]()[0] !== itemElement &&\r\n                    !$.contains(this.placeholder[0], itemElement) &&\r\n                    (this.options.type === \"semi-dynamic\" ? !$.contains(this.element[0], itemElement) : true)\r\n                ) {\r\n\r\n                    this.direction = intersection === 1 ? \"down\" : \"up\";\r\n\r\n                    if (this.options.tolerance === \"pointer\" || this._intersectsWithSides(item)) {\r\n                        this._rearrange(event, item);\r\n                    } else {\r\n                        break;\r\n                    }\r\n\r\n                    this._trigger(\"change\", event, this._uiHash());\r\n                    break;\r\n                }\r\n            }\r\n\r\n            //Post events to containers\r\n            this._contactContainers(event);\r\n\r\n            //Interconnect with droppables\r\n            if ($.ui.ddmanager) {\r\n                $.ui.ddmanager.drag(this, event);\r\n            }\r\n\r\n            //Call callbacks\r\n            this._trigger(\"sort\", event, this._uiHash());\r\n\r\n            this.lastPositionAbs = this.positionAbs;\r\n            return false;\r\n\r\n        },\r\n\r\n        _mouseStop: function (event, noPropagation) {\r\n\r\n            if (!event) {\r\n                return;\r\n            }\r\n\r\n            //If we are using droppables, inform the manager about the drop\r\n            if ($.ui.ddmanager && !this.options.dropBehaviour) {\r\n                $.ui.ddmanager.drop(this, event);\r\n            }\r\n\r\n            if (this.options.revert) {\r\n                var that = this,\r\n                    cur = this.placeholder.offset(),\r\n                    axis = this.options.axis,\r\n                    animation = {};\r\n\r\n                if (!axis || axis === \"x\") {\r\n                    animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollLeft);\r\n                }\r\n                if (!axis || axis === \"y\") {\r\n                    animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === this.document[0].body ? 0 : this.offsetParent[0].scrollTop);\r\n                }\r\n                this.reverting = true;\r\n                $(this.helper).animate(animation, parseInt(this.options.revert, 10) || 500, function () {\r\n                    that._clear(event);\r\n                });\r\n            } else {\r\n                this._clear(event, noPropagation);\r\n            }\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n        cancel: function () {\r\n\r\n            if (this.dragging) {\r\n\r\n                this._mouseUp({ target: null });\r\n\r\n                if (this.options.helper === \"original\") {\r\n                    this.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\r\n                } else {\r\n                    this.currentItem.show();\r\n                }\r\n\r\n                //Post deactivating events to containers\r\n                for (var i = this.containers.length - 1; i >= 0; i--) {\r\n                    this.containers[i]._trigger(\"deactivate\", null, this._uiHash(this));\r\n                    if (this.containers[i].containerCache.over) {\r\n                        this.containers[i]._trigger(\"out\", null, this._uiHash(this));\r\n                        this.containers[i].containerCache.over = 0;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            if (this.placeholder) {\r\n                //$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\r\n                if (this.placeholder[0].parentNode) {\r\n                    this.placeholder[0].parentNode.removeChild(this.placeholder[0]);\r\n                }\r\n                if (this.options.helper !== \"original\" && this.helper && this.helper[0].parentNode) {\r\n                    this.helper.remove();\r\n                }\r\n\r\n                $.extend(this, {\r\n                    helper: null,\r\n                    dragging: false,\r\n                    reverting: false,\r\n                    _noFinalSort: null\r\n                });\r\n\r\n                if (this.domPosition.prev) {\r\n                    $(this.domPosition.prev).after(this.currentItem);\r\n                } else {\r\n                    $(this.domPosition.parent).prepend(this.currentItem);\r\n                }\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        serialize: function (o) {\r\n\r\n            var items = this._getItemsAsjQuery(o && o.connected),\r\n                str = [];\r\n            o = o || {};\r\n\r\n            $(items).each(function () {\r\n                var res = ($(o.item || this).attr(o.attribute || \"id\") || \"\").match(o.expression || (/(.+)[\\-=_](.+)/));\r\n                if (res) {\r\n                    str.push((o.key || res[1] + \"[]\") + \"=\" + (o.key && o.expression ? res[1] : res[2]));\r\n                }\r\n            });\r\n\r\n            if (!str.length && o.key) {\r\n                str.push(o.key + \"=\");\r\n            }\r\n\r\n            return str.join(\"&\");\r\n\r\n        },\r\n\r\n        toArray: function (o) {\r\n\r\n            var items = this._getItemsAsjQuery(o && o.connected),\r\n                ret = [];\r\n\r\n            o = o || {};\r\n\r\n            items.each(function () { ret.push($(o.item || this).attr(o.attribute || \"id\") || \"\"); });\r\n            return ret;\r\n\r\n        },\r\n\r\n        /* Be careful with the following core functions */\r\n        _intersectsWith: function (item) {\r\n\r\n            var x1 = this.positionAbs.left,\r\n                x2 = x1 + this.helperProportions.width,\r\n                y1 = this.positionAbs.top,\r\n                y2 = y1 + this.helperProportions.height,\r\n                l = item.left,\r\n                r = l + item.width,\r\n                t = item.top,\r\n                b = t + item.height,\r\n                dyClick = this.offset.click.top,\r\n                dxClick = this.offset.click.left,\r\n                isOverElementHeight = (this.options.axis === \"x\") || ((y1 + dyClick) > t && (y1 + dyClick) < b),\r\n                isOverElementWidth = (this.options.axis === \"y\") || ((x1 + dxClick) > l && (x1 + dxClick) < r),\r\n                isOverElement = isOverElementHeight && isOverElementWidth;\r\n\r\n            if (this.options.tolerance === \"pointer\" ||\r\n                this.options.forcePointerForContainers ||\r\n                (this.options.tolerance !== \"pointer\" && this.helperProportions[this.floating ? \"width\" : \"height\"] > item[this.floating ? \"width\" : \"height\"])\r\n            ) {\r\n                return isOverElement;\r\n            } else {\r\n\r\n                return (l < x1 + (this.helperProportions.width / 2) && // Right Half\r\n                    x2 - (this.helperProportions.width / 2) < r && // Left Half\r\n                    t < y1 + (this.helperProportions.height / 2) && // Bottom Half\r\n                    y2 - (this.helperProportions.height / 2) < b); // Top Half\r\n\r\n            }\r\n        },\r\n\r\n        _intersectsWithPointer: function (item) {\r\n\r\n            var isOverElementHeight = (this.options.axis === \"x\") || this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),\r\n                isOverElementWidth = (this.options.axis === \"y\") || this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),\r\n                isOverElement = isOverElementHeight && isOverElementWidth,\r\n                verticalDirection = this._getDragVerticalDirection(),\r\n                horizontalDirection = this._getDragHorizontalDirection();\r\n\r\n            if (!isOverElement) {\r\n                return false;\r\n            }\r\n\r\n            return this.floating ?\r\n                (((horizontalDirection && horizontalDirection === \"right\") || verticalDirection === \"down\") ? 2 : 1)\r\n                : (verticalDirection && (verticalDirection === \"down\" ? 2 : 1));\r\n\r\n        },\r\n\r\n        _intersectsWithSides: function (item) {\r\n\r\n            var isOverBottomHalf = this._isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height / 2), item.height),\r\n                isOverRightHalf = this._isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width / 2), item.width),\r\n                verticalDirection = this._getDragVerticalDirection(),\r\n                horizontalDirection = this._getDragHorizontalDirection();\r\n\r\n            if (this.floating && horizontalDirection) {\r\n                return ((horizontalDirection === \"right\" && isOverRightHalf) || (horizontalDirection === \"left\" && !isOverRightHalf));\r\n            } else {\r\n                return verticalDirection && ((verticalDirection === \"down\" && isOverBottomHalf) || (verticalDirection === \"up\" && !isOverBottomHalf));\r\n            }\r\n\r\n        },\r\n\r\n        _getDragVerticalDirection: function () {\r\n            var delta = this.positionAbs.top - this.lastPositionAbs.top;\r\n            return delta !== 0 && (delta > 0 ? \"down\" : \"up\");\r\n        },\r\n\r\n        _getDragHorizontalDirection: function () {\r\n            var delta = this.positionAbs.left - this.lastPositionAbs.left;\r\n            return delta !== 0 && (delta > 0 ? \"right\" : \"left\");\r\n        },\r\n\r\n        refresh: function (event) {\r\n            this._refreshItems(event);\r\n            this._setHandleClassName();\r\n            this.refreshPositions();\r\n            return this;\r\n        },\r\n\r\n        _connectWith: function () {\r\n            var options = this.options;\r\n            return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;\r\n        },\r\n\r\n        _getItemsAsjQuery: function (connected) {\r\n\r\n            var i, j, cur, inst,\r\n                items = [],\r\n                queries = [],\r\n                connectWith = this._connectWith();\r\n\r\n            if (connectWith && connected) {\r\n                for (i = connectWith.length - 1; i >= 0; i--) {\r\n                    cur = $(connectWith[i], this.document[0]);\r\n                    for (j = cur.length - 1; j >= 0; j--) {\r\n                        inst = $.data(cur[j], this.widgetFullName);\r\n                        if (inst && inst !== this && !inst.options.disabled) {\r\n                            queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), inst]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(\".ui-sortable-helper\").not(\".ui-sortable-placeholder\"), this]);\r\n\r\n            function addItems() {\r\n                items.push(this);\r\n            }\r\n            for (i = queries.length - 1; i >= 0; i--) {\r\n                queries[i][0].each(addItems);\r\n            }\r\n\r\n            return $(items);\r\n\r\n        },\r\n\r\n        _removeCurrentsFromItems: function () {\r\n\r\n            var list = this.currentItem.find(\":data(\" + this.widgetName + \"-item)\");\r\n\r\n            this.items = $.grep(this.items, function (item) {\r\n                for (var j = 0; j < list.length; j++) {\r\n                    if (list[j] === item.item[0]) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            });\r\n\r\n        },\r\n\r\n        _refreshItems: function (event) {\r\n\r\n            this.items = [];\r\n            this.containers = [this];\r\n\r\n            var i, j, cur, inst, targetData, _queries, item, queriesLength,\r\n                items = this.items,\r\n                queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],\r\n                connectWith = this._connectWith();\r\n\r\n            if (connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down\r\n                for (i = connectWith.length - 1; i >= 0; i--) {\r\n                    cur = $(connectWith[i], this.document[0]);\r\n                    for (j = cur.length - 1; j >= 0; j--) {\r\n                        inst = $.data(cur[j], this.widgetFullName);\r\n                        if (inst && inst !== this && !inst.options.disabled) {\r\n                            queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);\r\n                            this.containers.push(inst);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (i = queries.length - 1; i >= 0; i--) {\r\n                targetData = queries[i][1];\r\n                _queries = queries[i][0];\r\n\r\n                for (j = 0, queriesLength = _queries.length; j < queriesLength; j++) {\r\n                    item = $(_queries[j]);\r\n\r\n                    item.data(this.widgetName + \"-item\", targetData); // Data for target checking (mouse manager)\r\n\r\n                    items.push({\r\n                        item: item,\r\n                        instance: targetData,\r\n                        width: 0, height: 0,\r\n                        left: 0, top: 0\r\n                    });\r\n                }\r\n            }\r\n\r\n        },\r\n\r\n        refreshPositions: function (fast) {\r\n\r\n            // Determine whether items are being displayed horizontally\r\n            this.floating = this.items.length ?\r\n                this.options.axis === \"x\" || this._isFloating(this.items[0].item) :\r\n                false;\r\n\r\n            //This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change\r\n            if (this.offsetParent && this.helper) {\r\n                this.offset.parent = this._getParentOffset();\r\n            }\r\n\r\n            var i, item, t, p;\r\n\r\n            for (i = this.items.length - 1; i >= 0; i--) {\r\n                item = this.items[i];\r\n\r\n                //We ignore calculating positions of all connected containers when we're not over them\r\n                if (item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {\r\n                    continue;\r\n                }\r\n\r\n                t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;\r\n\r\n                if (!fast) {\r\n                    item.width = t.outerWidth();\r\n                    item.height = t.outerHeight();\r\n                }\r\n\r\n                p = t.offset();\r\n                item.left = p.left;\r\n                item.top = p.top;\r\n            }\r\n\r\n            if (this.options.custom && this.options.custom.refreshContainers) {\r\n                this.options.custom.refreshContainers.call(this);\r\n            } else {\r\n                for (i = this.containers.length - 1; i >= 0; i--) {\r\n                    p = this.containers[i].element.offset();\r\n                    this.containers[i].containerCache.left = p.left;\r\n                    this.containers[i].containerCache.top = p.top;\r\n                    this.containers[i].containerCache.width = this.containers[i].element.outerWidth();\r\n                    this.containers[i].containerCache.height = this.containers[i].element.outerHeight();\r\n                }\r\n            }\r\n\r\n            return this;\r\n        },\r\n\r\n        _createPlaceholder: function (that) {\r\n            that = that || this;\r\n            var className,\r\n                o = that.options;\r\n\r\n            if (!o.placeholder || o.placeholder.constructor === String) {\r\n                className = o.placeholder;\r\n                o.placeholder = {\r\n                    element: function () {\r\n\r\n                        var nodeName = that.currentItem[0].nodeName.toLowerCase(),\r\n                            element = $(\"<\" + nodeName + \">\", that.document[0])\r\n                                .addClass(className || that.currentItem[0].className + \" ui-sortable-placeholder\")\r\n                                .removeClass(\"ui-sortable-helper\");\r\n\r\n                        if (nodeName === \"tbody\") {\r\n                            that._createTrPlaceholder(\r\n                                that.currentItem.find(\"tr\").eq(0),\r\n                                $(\"<tr>\", that.document[0]).appendTo(element)\r\n                            );\r\n                        } else if (nodeName === \"tr\") {\r\n                            that._createTrPlaceholder(that.currentItem, element);\r\n                        } else if (nodeName === \"img\") {\r\n                            element.attr(\"src\", that.currentItem.attr(\"src\"));\r\n                        }\r\n\r\n                        if (!className) {\r\n                            element.css(\"visibility\", \"hidden\");\r\n                        }\r\n\r\n                        return element;\r\n                    },\r\n                    update: function (container, p) {\r\n\r\n                        // 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that\r\n                        // 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified\r\n                        if (className && !o.forcePlaceholderSize) {\r\n                            return;\r\n                        }\r\n\r\n                        //If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item\r\n                        if (!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css(\"paddingTop\") || 0, 10) - parseInt(that.currentItem.css(\"paddingBottom\") || 0, 10)); }\r\n                        if (!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css(\"paddingLeft\") || 0, 10) - parseInt(that.currentItem.css(\"paddingRight\") || 0, 10)); }\r\n                    }\r\n                };\r\n            }\r\n\r\n            //Create the placeholder\r\n            that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));\r\n\r\n            //Append it after the actual current item\r\n            that.currentItem.after(that.placeholder);\r\n\r\n            //Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)\r\n            o.placeholder.update(that, that.placeholder);\r\n\r\n        },\r\n\r\n        _createTrPlaceholder: function (sourceTr, targetTr) {\r\n            var that = this;\r\n\r\n            sourceTr.children().each(function () {\r\n                $(\"<td>&#160;</td>\", that.document[0])\r\n                    .attr(\"colspan\", $(this).attr(\"colspan\") || 1)\r\n                    .appendTo(targetTr);\r\n            });\r\n        },\r\n\r\n        _contactContainers: function (event) {\r\n            var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, cur, nearBottom, floating, axis,\r\n                innermostContainer = null,\r\n                innermostIndex = null;\r\n\r\n            // get innermost container that intersects with item\r\n            for (i = this.containers.length - 1; i >= 0; i--) {\r\n\r\n                // never consider a container that's located within the item itself\r\n                if ($.contains(this.currentItem[0], this.containers[i].element[0])) {\r\n                    continue;\r\n                }\r\n\r\n                if (this._intersectsWith(this.containers[i].containerCache)) {\r\n\r\n                    // if we've already found a container and it's more \"inner\" than this, then continue\r\n                    if (innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {\r\n                        continue;\r\n                    }\r\n\r\n                    innermostContainer = this.containers[i];\r\n                    innermostIndex = i;\r\n\r\n                } else {\r\n                    // container doesn't intersect. trigger \"out\" event if necessary\r\n                    if (this.containers[i].containerCache.over) {\r\n                        this.containers[i]._trigger(\"out\", event, this._uiHash(this));\r\n                        this.containers[i].containerCache.over = 0;\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            // if no intersecting containers found, return\r\n            if (!innermostContainer) {\r\n                return;\r\n            }\r\n\r\n            // move the item into the container if it's not there already\r\n            if (this.containers.length === 1) {\r\n                if (!this.containers[innermostIndex].containerCache.over) {\r\n                    this.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\r\n                    this.containers[innermostIndex].containerCache.over = 1;\r\n                }\r\n            } else {\r\n\r\n                //When entering a new container, we will find the item with the least distance and append our item near it\r\n                dist = 10000;\r\n                itemWithLeastDistance = null;\r\n                floating = innermostContainer.floating || this._isFloating(this.currentItem);\r\n                posProperty = floating ? \"left\" : \"top\";\r\n                sizeProperty = floating ? \"width\" : \"height\";\r\n                axis = floating ? \"clientX\" : \"clientY\";\r\n\r\n                for (j = this.items.length - 1; j >= 0; j--) {\r\n                    if (!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {\r\n                        continue;\r\n                    }\r\n                    if (this.items[j].item[0] === this.currentItem[0]) {\r\n                        continue;\r\n                    }\r\n\r\n                    cur = this.items[j].item.offset()[posProperty];\r\n                    nearBottom = false;\r\n                    if (event[axis] - cur > this.items[j][sizeProperty] / 2) {\r\n                        nearBottom = true;\r\n                    }\r\n\r\n                    if (Math.abs(event[axis] - cur) < dist) {\r\n                        dist = Math.abs(event[axis] - cur);\r\n                        itemWithLeastDistance = this.items[j];\r\n                        this.direction = nearBottom ? \"up\" : \"down\";\r\n                    }\r\n                }\r\n\r\n                //Check if dropOnEmpty is enabled\r\n                if (!itemWithLeastDistance && !this.options.dropOnEmpty) {\r\n                    return;\r\n                }\r\n\r\n                if (this.currentContainer === this.containers[innermostIndex]) {\r\n                    if (!this.currentContainer.containerCache.over) {\r\n                        this.containers[innermostIndex]._trigger(\"over\", event, this._uiHash());\r\n                        this.currentContainer.containerCache.over = 1;\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);\r\n                this._trigger(\"change\", event, this._uiHash());\r\n                this.containers[innermostIndex]._trigger(\"change\", event, this._uiHash(this));\r\n                this.currentContainer = this.containers[innermostIndex];\r\n\r\n                //Update the placeholder\r\n                this.options.placeholder.update(this.currentContainer, this.placeholder);\r\n\r\n                this.containers[innermostIndex]._trigger(\"over\", event, this._uiHash(this));\r\n                this.containers[innermostIndex].containerCache.over = 1;\r\n            }\r\n\r\n\r\n        },\r\n\r\n        _createHelper: function (event) {\r\n\r\n            var o = this.options,\r\n                helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === \"clone\" ? this.currentItem.clone() : this.currentItem);\r\n\r\n            //Add the helper to the DOM if that didn't happen already\r\n            if (!helper.parents(\"body\").length) {\r\n                $(o.appendTo !== \"parent\" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);\r\n            }\r\n\r\n            if (helper[0] === this.currentItem[0]) {\r\n                this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css(\"position\"), top: this.currentItem.css(\"top\"), left: this.currentItem.css(\"left\") };\r\n            }\r\n\r\n            if (!helper[0].style.width || o.forceHelperSize) {\r\n                helper.width(this.currentItem.width());\r\n            }\r\n            if (!helper[0].style.height || o.forceHelperSize) {\r\n                helper.height(this.currentItem.height());\r\n            }\r\n\r\n            return helper;\r\n\r\n        },\r\n\r\n        _adjustOffsetFromHelper: function (obj) {\r\n            if (typeof obj === \"string\") {\r\n                obj = obj.split(\" \");\r\n            }\r\n            if (Array.isArray(obj)) {\r\n                obj = { left: +obj[0], top: +obj[1] || 0 };\r\n            }\r\n            if (\"left\" in obj) {\r\n                this.offset.click.left = obj.left + this.margins.left;\r\n            }\r\n            if (\"right\" in obj) {\r\n                this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\r\n            }\r\n            if (\"top\" in obj) {\r\n                this.offset.click.top = obj.top + this.margins.top;\r\n            }\r\n            if (\"bottom\" in obj) {\r\n                this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\r\n            }\r\n        },\r\n\r\n        _getParentOffset: function () {\r\n\r\n\r\n            //Get the offsetParent and cache its position\r\n            this.offsetParent = this.helper.offsetParent();\r\n            var po = this.offsetParent.offset();\r\n\r\n            // This is a special case where we need to modify a offset calculated on start, since the following happened:\r\n            // 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent\r\n            // 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that\r\n            //    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag\r\n            if (this.cssPosition === \"absolute\" && this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) {\r\n                po.left += this.scrollParent.scrollLeft();\r\n                po.top += this.scrollParent.scrollTop();\r\n            }\r\n\r\n            // This needs to be actually done for all browsers, since pageX/pageY includes this information\r\n            // with an ugly IE fix\r\n            if (this.offsetParent[0] === this.document[0].body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === \"html\" && $.ui.ie)) {\r\n                po = { top: 0, left: 0 };\r\n            }\r\n\r\n            return {\r\n                top: po.top + (parseInt(this.offsetParent.css(\"borderTopWidth\"), 10) || 0),\r\n                left: po.left + (parseInt(this.offsetParent.css(\"borderLeftWidth\"), 10) || 0)\r\n            };\r\n\r\n        },\r\n\r\n        _getRelativeOffset: function () {\r\n\r\n            if (this.cssPosition === \"relative\") {\r\n                var p = this.currentItem.position();\r\n                return {\r\n                    top: p.top - (parseInt(this.helper.css(\"top\"), 10) || 0) + this.scrollParent.scrollTop(),\r\n                    left: p.left - (parseInt(this.helper.css(\"left\"), 10) || 0) + this.scrollParent.scrollLeft()\r\n                };\r\n            } else {\r\n                return { top: 0, left: 0 };\r\n            }\r\n\r\n        },\r\n\r\n        _cacheMargins: function () {\r\n            this.margins = {\r\n                left: (parseInt(this.currentItem.css(\"marginLeft\"), 10) || 0),\r\n                top: (parseInt(this.currentItem.css(\"marginTop\"), 10) || 0)\r\n            };\r\n        },\r\n\r\n        _cacheHelperProportions: function () {\r\n            this.helperProportions = {\r\n                width: this.helper.outerWidth(),\r\n                height: this.helper.outerHeight()\r\n            };\r\n        },\r\n\r\n        _setContainment: function () {\r\n\r\n            var ce, co, over,\r\n                o = this.options;\r\n            if (o.containment === \"parent\") {\r\n                o.containment = this.helper[0].parentNode;\r\n            }\r\n            if (o.containment === \"document\" || o.containment === \"window\") {\r\n                this.containment = [\r\n                    0 - this.offset.relative.left - this.offset.parent.left,\r\n                    0 - this.offset.relative.top - this.offset.parent.top,\r\n                    o.containment === \"document\" ? this.document.width() : this.window.width() - this.helperProportions.width - this.margins.left,\r\n                    (o.containment === \"document\" ? this.document.width() : this.window.height() || this.document[0].body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top\r\n                ];\r\n            }\r\n\r\n            if (!(/^(document|window|parent)$/).test(o.containment)) {\r\n                ce = $(o.containment)[0];\r\n                co = $(o.containment).offset();\r\n                over = ($(ce).css(\"overflow\") !== \"hidden\");\r\n\r\n                this.containment = [\r\n                    co.left + (parseInt($(ce).css(\"borderLeftWidth\"), 10) || 0) + (parseInt($(ce).css(\"paddingLeft\"), 10) || 0) - this.margins.left,\r\n                    co.top + (parseInt($(ce).css(\"borderTopWidth\"), 10) || 0) + (parseInt($(ce).css(\"paddingTop\"), 10) || 0) - this.margins.top,\r\n                    co.left + (over ? Math.max(ce.scrollWidth, ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css(\"borderLeftWidth\"), 10) || 0) - (parseInt($(ce).css(\"paddingRight\"), 10) || 0) - this.helperProportions.width - this.margins.left,\r\n                    co.top + (over ? Math.max(ce.scrollHeight, ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css(\"borderTopWidth\"), 10) || 0) - (parseInt($(ce).css(\"paddingBottom\"), 10) || 0) - this.helperProportions.height - this.margins.top\r\n                ];\r\n            }\r\n\r\n        },\r\n\r\n        _convertPositionTo: function (d, pos) {\r\n\r\n            if (!pos) {\r\n                pos = this.position;\r\n            }\r\n            var mod = d === \"absolute\" ? 1 : -1,\r\n                scroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,\r\n                scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\r\n\r\n            return {\r\n                top: (\r\n                    pos.top +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.relative.top * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.top * mod -\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    ((this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : (scrollIsRootNode ? 0 : scroll.scrollTop())) * mod)\r\n                ),\r\n                left: (\r\n                    pos.left +\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.relative.left * mod +\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.left * mod -\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    ((this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft()) * mod)\r\n                )\r\n            };\r\n\r\n        },\r\n\r\n        _generatePosition: function (event) {\r\n\r\n            var top, left,\r\n                o = this.options,\r\n                pageX = event.pageX,\r\n                pageY = event.pageY,\r\n                scroll = this.cssPosition === \"absolute\" && !(this.scrollParent[0] !== this.document[0] && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);\r\n\r\n            // This is another very weird special case that only happens for relative elements:\r\n            // 1. If the css position is relative\r\n            // 2. and the scroll parent is the document or similar to the offset parent\r\n            // we have to refresh the relative offset during the scroll so there are no jumps\r\n            if (this.cssPosition === \"relative\" && !(this.scrollParent[0] !== this.document[0] && this.scrollParent[0] !== this.offsetParent[0])) {\r\n                this.offset.relative = this._getRelativeOffset();\r\n            }\r\n\r\n            /*\r\n             * - Position constraining -\r\n             * Constrain the position to a mix of grid, containment.\r\n             */\r\n\r\n            if (this.originalPosition) { //If we are not dragging yet, we won't check for options\r\n\r\n                if (this.containment) {\r\n                    if (event.pageX - this.offset.click.left < this.containment[0]) {\r\n                        pageX = this.containment[0] + this.offset.click.left;\r\n                    }\r\n                    if (event.pageY - this.offset.click.top < this.containment[1]) {\r\n                        pageY = this.containment[1] + this.offset.click.top;\r\n                    }\r\n                    if (event.pageX - this.offset.click.left > this.containment[2]) {\r\n                        pageX = this.containment[2] + this.offset.click.left;\r\n                    }\r\n                    if (event.pageY - this.offset.click.top > this.containment[3]) {\r\n                        pageY = this.containment[3] + this.offset.click.top;\r\n                    }\r\n                }\r\n\r\n                if (o.grid) {\r\n                    top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];\r\n                    pageY = this.containment ? ((top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;\r\n\r\n                    left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];\r\n                    pageX = this.containment ? ((left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;\r\n                }\r\n\r\n            }\r\n\r\n            return {\r\n                top: (\r\n                    pageY -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.click.top -\t\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n                    this.offset.relative.top -\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.top +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    ((this.cssPosition === \"fixed\" ? -this.scrollParent.scrollTop() : (scrollIsRootNode ? 0 : scroll.scrollTop())))\r\n                ),\r\n                left: (\r\n                    pageX -\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// The absolute mouse position\r\n                    this.offset.click.left -\t\t\t\t\t\t\t\t\t\t\t\t// Click offset (relative to the element)\r\n                    this.offset.relative.left -\t\t\t\t\t\t\t\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\r\n                    this.offset.parent.left +\t\t\t\t\t\t\t\t\t\t\t\t// The offsetParent's offset without borders (offset + border)\r\n                    ((this.cssPosition === \"fixed\" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft()))\r\n                )\r\n            };\r\n\r\n        },\r\n\r\n        _rearrange: function (event, i, a, hardRefresh) {\r\n\r\n            a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === \"down\" ? i.item[0] : i.item[0].nextSibling));\r\n\r\n            //Various things done here to improve the performance:\r\n            // 1. we create a setTimeout, that calls refreshPositions\r\n            // 2. on the instance, we have a counter variable, that get's higher after every append\r\n            // 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same\r\n            // 4. this lets only the last addition to the timeout stack through\r\n            this.counter = this.counter ? ++this.counter : 1;\r\n            var counter = this.counter;\r\n\r\n            this._delay(function () {\r\n                if (counter === this.counter) {\r\n                    this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove\r\n                }\r\n            });\r\n\r\n        },\r\n\r\n        _clear: function (event, noPropagation) {\r\n\r\n            this.reverting = false;\r\n            // We delay all events that have to be triggered to after the point where the placeholder has been removed and\r\n            // everything else normalized again\r\n            var i,\r\n                delayedTriggers = [];\r\n\r\n            // We first have to update the dom position of the actual currentItem\r\n            // Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)\r\n            if (!this._noFinalSort && this.currentItem.parent().length) {\r\n                this.placeholder.before(this.currentItem);\r\n            }\r\n            this._noFinalSort = null;\r\n\r\n            if (this.helper[0] === this.currentItem[0]) {\r\n                for (i in this._storedCSS) {\r\n                    if (this._storedCSS[i] === \"auto\" || this._storedCSS[i] === \"static\") {\r\n                        this._storedCSS[i] = \"\";\r\n                    }\r\n                }\r\n                this.currentItem.css(this._storedCSS).removeClass(\"ui-sortable-helper\");\r\n            } else {\r\n                this.currentItem.show();\r\n            }\r\n\r\n            if (this.fromOutside && !noPropagation) {\r\n                delayedTriggers.push(function (event) { this._trigger(\"receive\", event, this._uiHash(this.fromOutside)); });\r\n            }\r\n            if ((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(\".ui-sortable-helper\")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {\r\n                delayedTriggers.push(function (event) { this._trigger(\"update\", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed\r\n            }\r\n\r\n            // Check if the items Container has Changed and trigger appropriate\r\n            // events.\r\n            if (this !== this.currentContainer) {\r\n                if (!noPropagation) {\r\n                    delayedTriggers.push(function (event) { this._trigger(\"remove\", event, this._uiHash()); });\r\n                    delayedTriggers.push((function (c) { return function (event) { c._trigger(\"receive\", event, this._uiHash(this)); }; }).call(this, this.currentContainer));\r\n                    delayedTriggers.push((function (c) { return function (event) { c._trigger(\"update\", event, this._uiHash(this)); }; }).call(this, this.currentContainer));\r\n                }\r\n            }\r\n\r\n\r\n            //Post events to containers\r\n            function delayEvent(type, instance, container) {\r\n                return function (event) {\r\n                    container._trigger(type, event, instance._uiHash(instance));\r\n                };\r\n            }\r\n            for (i = this.containers.length - 1; i >= 0; i--) {\r\n                if (!noPropagation) {\r\n                    delayedTriggers.push(delayEvent(\"deactivate\", this, this.containers[i]));\r\n                }\r\n                if (this.containers[i].containerCache.over) {\r\n                    delayedTriggers.push(delayEvent(\"out\", this, this.containers[i]));\r\n                    this.containers[i].containerCache.over = 0;\r\n                }\r\n            }\r\n\r\n            //Do what was originally in plugins\r\n            if (this.storedCursor) {\r\n                this.document.find(\"body\").css(\"cursor\", this.storedCursor);\r\n                this.storedStylesheet.remove();\r\n            }\r\n            if (this._storedOpacity) {\r\n                this.helper.css(\"opacity\", this._storedOpacity);\r\n            }\r\n            if (this._storedZIndex) {\r\n                this.helper.css(\"zIndex\", this._storedZIndex === \"auto\" ? \"\" : this._storedZIndex);\r\n            }\r\n\r\n            this.dragging = false;\r\n\r\n            if (!noPropagation) {\r\n                this._trigger(\"beforeStop\", event, this._uiHash());\r\n            }\r\n\r\n            //$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!\r\n            this.placeholder[0].parentNode.removeChild(this.placeholder[0]);\r\n\r\n            if (!this.cancelHelperRemoval) {\r\n                if (this.helper[0] !== this.currentItem[0]) {\r\n                    this.helper.remove();\r\n                }\r\n                this.helper = null;\r\n            }\r\n\r\n            if (!noPropagation) {\r\n                for (i = 0; i < delayedTriggers.length; i++) {\r\n                    delayedTriggers[i].call(this, event);\r\n                } //Trigger all delayed events\r\n                this._trigger(\"stop\", event, this._uiHash());\r\n            }\r\n\r\n            this.fromOutside = false;\r\n            return !this.cancelHelperRemoval;\r\n\r\n        },\r\n\r\n        _trigger: function () {\r\n            if ($.Widget.prototype._trigger.apply(this, arguments) === false) {\r\n                this.cancel();\r\n            }\r\n        },\r\n\r\n        _uiHash: function (_inst) {\r\n            var inst = _inst || this;\r\n            return {\r\n                helper: inst.helper,\r\n                placeholder: inst.placeholder || $([]),\r\n                position: inst.position,\r\n                originalPosition: inst.originalPosition,\r\n                offset: inst.positionAbs,\r\n                item: inst.currentItem,\r\n                sender: _inst ? _inst.element : null\r\n            };\r\n        }\r\n\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Accordion 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/accordion/\r\n     */\r\n\r\n\r\n    var accordion = $.widget(\"ui.accordion\", {\r\n        version: \"1.11.4\",\r\n        options: {\r\n            active: 0,\r\n            animate: {},\r\n            collapsible: false,\r\n            event: \"click\",\r\n            header: \"> li > :first-child,> :not(li):even\",\r\n            heightStyle: \"auto\",\r\n            icons: {\r\n                activeHeader: \"ui-icon-triangle-1-s\",\r\n                header: \"ui-icon-triangle-1-e\"\r\n            },\r\n\r\n            // callbacks\r\n            activate: null,\r\n            beforeActivate: null\r\n        },\r\n\r\n        hideProps: {\r\n            borderTopWidth: \"hide\",\r\n            borderBottomWidth: \"hide\",\r\n            paddingTop: \"hide\",\r\n            paddingBottom: \"hide\",\r\n            height: \"hide\"\r\n        },\r\n\r\n        showProps: {\r\n            borderTopWidth: \"show\",\r\n            borderBottomWidth: \"show\",\r\n            paddingTop: \"show\",\r\n            paddingBottom: \"show\",\r\n            height: \"show\"\r\n        },\r\n\r\n        _create: function () {\r\n            var options = this.options;\r\n            this.prevShow = this.prevHide = $();\r\n            this.element.addClass(\"ui-accordion ui-widget ui-helper-reset\")\r\n                // ARIA\r\n                .attr(\"role\", \"tablist\");\r\n\r\n            // don't allow collapsible: false and active: false / null\r\n            if (!options.collapsible && (options.active === false || options.active == null)) {\r\n                options.active = 0;\r\n            }\r\n\r\n            this._processPanels();\r\n            // handle negative values\r\n            if (options.active < 0) {\r\n                options.active += this.headers.length;\r\n            }\r\n            this._refresh();\r\n        },\r\n\r\n        _getCreateEventData: function () {\r\n            return {\r\n                header: this.active,\r\n                panel: !this.active.length ? $() : this.active.next()\r\n            };\r\n        },\r\n\r\n        _createIcons: function () {\r\n            var icons = this.options.icons;\r\n            if (icons) {\r\n                $(\"<span>\")\r\n                    .addClass(\"ui-accordion-header-icon ui-icon \" + icons.header)\r\n                    .prependTo(this.headers);\r\n                this.active.children(\".ui-accordion-header-icon\")\r\n                    .removeClass(icons.header)\r\n                    .addClass(icons.activeHeader);\r\n                this.headers.addClass(\"ui-accordion-icons\");\r\n            }\r\n        },\r\n\r\n        _destroyIcons: function () {\r\n            this.headers\r\n                .removeClass(\"ui-accordion-icons\")\r\n                .children(\".ui-accordion-header-icon\")\r\n                .remove();\r\n        },\r\n\r\n        _destroy: function () {\r\n            var contents;\r\n\r\n            // clean up main element\r\n            this.element\r\n                .removeClass(\"ui-accordion ui-widget ui-helper-reset\")\r\n                .removeAttr(\"role\");\r\n\r\n            // clean up headers\r\n            this.headers\r\n                .removeClass(\"ui-accordion-header ui-accordion-header-active ui-state-default \" +\r\n                    \"ui-corner-all ui-state-active ui-state-disabled ui-corner-top\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"aria-expanded\")\r\n                .removeAttr(\"aria-selected\")\r\n                .removeAttr(\"aria-controls\")\r\n                .removeAttr(\"tabIndex\")\r\n                .removeUniqueId();\r\n\r\n            this._destroyIcons();\r\n\r\n            // clean up content panels\r\n            contents = this.headers.next()\r\n                .removeClass(\"ui-helper-reset ui-widget-content ui-corner-bottom \" +\r\n                    \"ui-accordion-content ui-accordion-content-active ui-state-disabled\")\r\n                .css(\"display\", \"\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"aria-hidden\")\r\n                .removeAttr(\"aria-labelledby\")\r\n                .removeUniqueId();\r\n\r\n            if (this.options.heightStyle !== \"content\") {\r\n                contents.css(\"height\", \"\");\r\n            }\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            if (key === \"active\") {\r\n                // _activate() will handle invalid values and update this.options\r\n                this._activate(value);\r\n                return;\r\n            }\r\n\r\n            if (key === \"event\") {\r\n                if (this.options.event) {\r\n                    this._off(this.headers, this.options.event);\r\n                }\r\n                this._setupEvents(value);\r\n            }\r\n\r\n            this._super(key, value);\r\n\r\n            // setting collapsible: false while collapsed; open first panel\r\n            if (key === \"collapsible\" && !value && this.options.active === false) {\r\n                this._activate(0);\r\n            }\r\n\r\n            if (key === \"icons\") {\r\n                this._destroyIcons();\r\n                if (value) {\r\n                    this._createIcons();\r\n                }\r\n            }\r\n\r\n            // #5332 - opacity doesn't cascade to positioned elements in IE\r\n            // so we need to add the disabled class to the headers and panels\r\n            if (key === \"disabled\") {\r\n                this.element\r\n                    .toggleClass(\"ui-state-disabled\", !!value)\r\n                    .attr(\"aria-disabled\", value);\r\n                this.headers.add(this.headers.next())\r\n                    .toggleClass(\"ui-state-disabled\", !!value);\r\n            }\r\n        },\r\n\r\n        _keydown: function (event) {\r\n            if (event.altKey || event.ctrlKey) {\r\n                return;\r\n            }\r\n\r\n            var keyCode = $.ui.keyCode,\r\n                length = this.headers.length,\r\n                currentIndex = this.headers.index(event.target),\r\n                toFocus = false;\r\n\r\n            switch (event.keyCode) {\r\n                case keyCode.RIGHT:\r\n                case keyCode.DOWN:\r\n                    toFocus = this.headers[(currentIndex + 1) % length];\r\n                    break;\r\n                case keyCode.LEFT:\r\n                case keyCode.UP:\r\n                    toFocus = this.headers[(currentIndex - 1 + length) % length];\r\n                    break;\r\n                case keyCode.SPACE:\r\n                case keyCode.ENTER:\r\n                    this._eventHandler(event);\r\n                    break;\r\n                case keyCode.HOME:\r\n                    toFocus = this.headers[0];\r\n                    break;\r\n                case keyCode.END:\r\n                    toFocus = this.headers[length - 1];\r\n                    break;\r\n            }\r\n\r\n            if (toFocus) {\r\n                $(event.target).attr(\"tabIndex\", -1);\r\n                $(toFocus).attr(\"tabIndex\", 0);\r\n                toFocus.focus();\r\n                event.preventDefault();\r\n            }\r\n        },\r\n\r\n        _panelKeyDown: function (event) {\r\n            if (event.keyCode === $.ui.keyCode.UP && event.ctrlKey) {\r\n                $(event.currentTarget).prev().focus();\r\n            }\r\n        },\r\n\r\n        refresh: function () {\r\n            var options = this.options;\r\n            this._processPanels();\r\n\r\n            // was collapsed or no panel\r\n            if ((options.active === false && options.collapsible === true) || !this.headers.length) {\r\n                options.active = false;\r\n                this.active = $();\r\n                // active false only when collapsible is true\r\n            } else if (options.active === false) {\r\n                this._activate(0);\r\n                // was active, but active panel is gone\r\n            } else if (this.active.length && !$.contains(this.element[0], this.active[0])) {\r\n                // all remaining panel are disabled\r\n                if (this.headers.length === this.headers.find(\".ui-state-disabled\").length) {\r\n                    options.active = false;\r\n                    this.active = $();\r\n                    // activate previous panel\r\n                } else {\r\n                    this._activate(Math.max(0, options.active - 1));\r\n                }\r\n                // was active, active panel still exists\r\n            } else {\r\n                // make sure active index is correct\r\n                options.active = this.headers.index(this.active);\r\n            }\r\n\r\n            this._destroyIcons();\r\n\r\n            this._refresh();\r\n        },\r\n\r\n        _processPanels: function () {\r\n            var prevHeaders = this.headers,\r\n                prevPanels = this.panels;\r\n\r\n            this.headers = this.element.find(this.options.header)\r\n                .addClass(\"ui-accordion-header ui-state-default ui-corner-all\");\r\n\r\n            this.panels = this.headers.next()\r\n                .addClass(\"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom\")\r\n                .filter(\":not(.ui-accordion-content-active)\")\r\n                .hide();\r\n\r\n            // Avoid memory leaks (#10056)\r\n            if (prevPanels) {\r\n                this._off(prevHeaders.not(this.headers));\r\n                this._off(prevPanels.not(this.panels));\r\n            }\r\n        },\r\n\r\n        _refresh: function () {\r\n            var maxHeight,\r\n                options = this.options,\r\n                heightStyle = options.heightStyle,\r\n                parent = this.element.parent();\r\n\r\n            this.active = this._findActive(options.active)\r\n                .addClass(\"ui-accordion-header-active ui-state-active ui-corner-top\")\r\n                .removeClass(\"ui-corner-all\");\r\n            this.active.next()\r\n                .addClass(\"ui-accordion-content-active\")\r\n                .show();\r\n\r\n            this.headers\r\n                .attr(\"role\", \"tab\")\r\n                .each(function () {\r\n                    var header = $(this),\r\n                        headerId = header.uniqueId().attr(\"id\"),\r\n                        panel = header.next(),\r\n                        panelId = panel.uniqueId().attr(\"id\");\r\n                    header.attr(\"aria-controls\", panelId);\r\n                    panel.attr(\"aria-labelledby\", headerId);\r\n                })\r\n                .next()\r\n                .attr(\"role\", \"tabpanel\");\r\n\r\n            this.headers\r\n                .not(this.active)\r\n                .attr({\r\n                    \"aria-selected\": \"false\",\r\n                    \"aria-expanded\": \"false\",\r\n                    tabIndex: -1\r\n                })\r\n                .next()\r\n                .attr({\r\n                    \"aria-hidden\": \"true\"\r\n                })\r\n                .hide();\r\n\r\n            // make sure at least one header is in the tab order\r\n            if (!this.active.length) {\r\n                this.headers.eq(0).attr(\"tabIndex\", 0);\r\n            } else {\r\n                this.active.attr({\r\n                    \"aria-selected\": \"true\",\r\n                    \"aria-expanded\": \"true\",\r\n                    tabIndex: 0\r\n                })\r\n                    .next()\r\n                    .attr({\r\n                        \"aria-hidden\": \"false\"\r\n                    });\r\n            }\r\n\r\n            this._createIcons();\r\n\r\n            this._setupEvents(options.event);\r\n\r\n            if (heightStyle === \"fill\") {\r\n                maxHeight = parent.height();\r\n                this.element.siblings(\":visible\").each(function () {\r\n                    var elem = $(this),\r\n                        position = elem.css(\"position\");\r\n\r\n                    if (position === \"absolute\" || position === \"fixed\") {\r\n                        return;\r\n                    }\r\n                    maxHeight -= elem.outerHeight(true);\r\n                });\r\n\r\n                this.headers.each(function () {\r\n                    maxHeight -= $(this).outerHeight(true);\r\n                });\r\n\r\n                this.headers.next()\r\n                    .each(function () {\r\n                        $(this).height(Math.max(0, maxHeight -\r\n                            $(this).innerHeight() + $(this).height()));\r\n                    })\r\n                    .css(\"overflow\", \"auto\");\r\n            } else if (heightStyle === \"auto\") {\r\n                maxHeight = 0;\r\n                this.headers.next()\r\n                    .each(function () {\r\n                        maxHeight = Math.max(maxHeight, $(this).css(\"height\", \"\").height());\r\n                    })\r\n                    .height(maxHeight);\r\n            }\r\n        },\r\n\r\n        _activate: function (index) {\r\n            var active = this._findActive(index)[0];\r\n\r\n            // trying to activate the already active panel\r\n            if (active === this.active[0]) {\r\n                return;\r\n            }\r\n\r\n            // trying to collapse, simulate a click on the currently active header\r\n            active = active || this.active[0];\r\n\r\n            this._eventHandler({\r\n                target: active,\r\n                currentTarget: active,\r\n                preventDefault: $.noop\r\n            });\r\n        },\r\n\r\n        _findActive: function (selector) {\r\n            return typeof selector === \"number\" ? this.headers.eq(selector) : $();\r\n        },\r\n\r\n        _setupEvents: function (event) {\r\n            var events = {\r\n                keydown: \"_keydown\"\r\n            };\r\n            if (event) {\r\n                $.each(event.split(\" \"), function (index, eventName) {\r\n                    events[eventName] = \"_eventHandler\";\r\n                });\r\n            }\r\n\r\n            this._off(this.headers.add(this.headers.next()));\r\n            this._on(this.headers, events);\r\n            this._on(this.headers.next(), { keydown: \"_panelKeyDown\" });\r\n            this._hoverable(this.headers);\r\n            this._focusable(this.headers);\r\n        },\r\n\r\n        _eventHandler: function (event) {\r\n            var options = this.options,\r\n                active = this.active,\r\n                clicked = $(event.currentTarget),\r\n                clickedIsActive = clicked[0] === active[0],\r\n                collapsing = clickedIsActive && options.collapsible,\r\n                toShow = collapsing ? $() : clicked.next(),\r\n                toHide = active.next(),\r\n                eventData = {\r\n                    oldHeader: active,\r\n                    oldPanel: toHide,\r\n                    newHeader: collapsing ? $() : clicked,\r\n                    newPanel: toShow\r\n                };\r\n\r\n            event.preventDefault();\r\n\r\n            if (\r\n                // click on active header, but not collapsible\r\n                (clickedIsActive && !options.collapsible) ||\r\n                // allow canceling activation\r\n                (this._trigger(\"beforeActivate\", event, eventData) === false)) {\r\n                return;\r\n            }\r\n\r\n            options.active = collapsing ? false : this.headers.index(clicked);\r\n\r\n            // when the call to ._toggle() comes after the class changes\r\n            // it causes a very odd bug in IE 8 (see #6720)\r\n            this.active = clickedIsActive ? $() : clicked;\r\n            this._toggle(eventData);\r\n\r\n            // switch classes\r\n            // corner classes on the previously active header stay after the animation\r\n            active.removeClass(\"ui-accordion-header-active ui-state-active\");\r\n            if (options.icons) {\r\n                active.children(\".ui-accordion-header-icon\")\r\n                    .removeClass(options.icons.activeHeader)\r\n                    .addClass(options.icons.header);\r\n            }\r\n\r\n            if (!clickedIsActive) {\r\n                clicked\r\n                    .removeClass(\"ui-corner-all\")\r\n                    .addClass(\"ui-accordion-header-active ui-state-active ui-corner-top\");\r\n                if (options.icons) {\r\n                    clicked.children(\".ui-accordion-header-icon\")\r\n                        .removeClass(options.icons.header)\r\n                        .addClass(options.icons.activeHeader);\r\n                }\r\n\r\n                clicked\r\n                    .next()\r\n                    .addClass(\"ui-accordion-content-active\");\r\n            }\r\n        },\r\n\r\n        _toggle: function (data) {\r\n            var toShow = data.newPanel,\r\n                toHide = this.prevShow.length ? this.prevShow : data.oldPanel;\r\n\r\n            // handle activating a panel during the animation for another activation\r\n            this.prevShow.add(this.prevHide).stop(true, true);\r\n            this.prevShow = toShow;\r\n            this.prevHide = toHide;\r\n\r\n            if (this.options.animate) {\r\n                this._animate(toShow, toHide, data);\r\n            } else {\r\n                toHide.hide();\r\n                toShow.show();\r\n                this._toggleComplete(data);\r\n            }\r\n\r\n            toHide.attr({\r\n                \"aria-hidden\": \"true\"\r\n            });\r\n            toHide.prev().attr({\r\n                \"aria-selected\": \"false\",\r\n                \"aria-expanded\": \"false\"\r\n            });\r\n            // if we're switching panels, remove the old header from the tab order\r\n            // if we're opening from collapsed state, remove the previous header from the tab order\r\n            // if we're collapsing, then keep the collapsing header in the tab order\r\n            if (toShow.length && toHide.length) {\r\n                toHide.prev().attr({\r\n                    \"tabIndex\": -1,\r\n                    \"aria-expanded\": \"false\"\r\n                });\r\n            } else if (toShow.length) {\r\n                this.headers.filter(function () {\r\n                    return parseInt($(this).attr(\"tabIndex\"), 10) === 0;\r\n                })\r\n                    .attr(\"tabIndex\", -1);\r\n            }\r\n\r\n            toShow\r\n                .attr(\"aria-hidden\", \"false\")\r\n                .prev()\r\n                .attr({\r\n                    \"aria-selected\": \"true\",\r\n                    \"aria-expanded\": \"true\",\r\n                    tabIndex: 0\r\n                });\r\n        },\r\n\r\n        _animate: function (toShow, toHide, data) {\r\n            var total, easing, duration,\r\n                that = this,\r\n                adjust = 0,\r\n                boxSizing = toShow.css(\"box-sizing\"),\r\n                down = toShow.length &&\r\n                    (!toHide.length || (toShow.index() < toHide.index())),\r\n                animate = this.options.animate || {},\r\n                options = down && animate.down || animate,\r\n                complete = function () {\r\n                    that._toggleComplete(data);\r\n                };\r\n\r\n            if (typeof options === \"number\") {\r\n                duration = options;\r\n            }\r\n            if (typeof options === \"string\") {\r\n                easing = options;\r\n            }\r\n            // fall back from options to animation in case of partial down settings\r\n            easing = easing || options.easing || animate.easing;\r\n            duration = duration || options.duration || animate.duration;\r\n\r\n            if (!toHide.length) {\r\n                return toShow.animate(this.showProps, duration, easing, complete);\r\n            }\r\n            if (!toShow.length) {\r\n                return toHide.animate(this.hideProps, duration, easing, complete);\r\n            }\r\n\r\n            total = toShow.show().outerHeight();\r\n            toHide.animate(this.hideProps, {\r\n                duration: duration,\r\n                easing: easing,\r\n                step: function (now, fx) {\r\n                    fx.now = Math.round(now);\r\n                }\r\n            });\r\n            toShow\r\n                .hide()\r\n                .animate(this.showProps, {\r\n                    duration: duration,\r\n                    easing: easing,\r\n                    complete: complete,\r\n                    step: function (now, fx) {\r\n                        fx.now = Math.round(now);\r\n                        if (fx.prop !== \"height\") {\r\n                            if (boxSizing === \"content-box\") {\r\n                                adjust += fx.now;\r\n                            }\r\n                        } else if (that.options.heightStyle !== \"content\") {\r\n                            fx.now = Math.round(total - toHide.outerHeight() - adjust);\r\n                            adjust = 0;\r\n                        }\r\n                    }\r\n                });\r\n        },\r\n\r\n        _toggleComplete: function (data) {\r\n            var toHide = data.oldPanel;\r\n\r\n            toHide\r\n                .removeClass(\"ui-accordion-content-active\")\r\n                .prev()\r\n                .removeClass(\"ui-corner-top\")\r\n                .addClass(\"ui-corner-all\");\r\n\r\n            // Work around for rendering bug in IE (#5421)\r\n            if (toHide.length) {\r\n                toHide.parent()[0].className = toHide.parent()[0].className;\r\n            }\r\n            this._trigger(\"activate\", null, data);\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Menu 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/menu/\r\n     */\r\n\r\n\r\n    var menu = $.widget(\"ui.menu\", {\r\n        version: \"1.11.4\",\r\n        defaultElement: \"<ul>\",\r\n        delay: 300,\r\n        options: {\r\n            icons: {\r\n                submenu: \"ui-icon-carat-1-e\"\r\n            },\r\n            items: \"> *\",\r\n            menus: \"ul\",\r\n            position: {\r\n                my: \"left-1 top\",\r\n                at: \"right top\"\r\n            },\r\n            role: \"menu\",\r\n\r\n            // callbacks\r\n            blur: null,\r\n            focus: null,\r\n            select: null\r\n        },\r\n\r\n        _create: function () {\r\n            this.activeMenu = this.element;\r\n\r\n            // Flag used to prevent firing of the click handler\r\n            // as the event bubbles up through nested menus\r\n            this.mouseHandled = false;\r\n            this.element\r\n                .uniqueId()\r\n                .addClass(\"ui-menu ui-widget ui-widget-content\")\r\n                .toggleClass(\"ui-menu-icons\", !!this.element.find(\".ui-icon\").length)\r\n                .attr({\r\n                    role: this.options.role,\r\n                    tabIndex: 0\r\n                });\r\n\r\n            if (this.options.disabled) {\r\n                this.element\r\n                    .addClass(\"ui-state-disabled\")\r\n                    .attr(\"aria-disabled\", \"true\");\r\n            }\r\n\r\n            this._on({\r\n                // Prevent focus from sticking to links inside menu after clicking\r\n                // them (focus should always stay on UL during navigation).\r\n                \"mousedown .ui-menu-item\": function (event) {\r\n                    event.preventDefault();\r\n                },\r\n                \"click .ui-menu-item\": function (event) {\r\n                    var target = $(event.target);\r\n                    if (!this.mouseHandled && target.not(\".ui-state-disabled\").length) {\r\n                        this.select(event);\r\n\r\n                        // Only set the mouseHandled flag if the event will bubble, see #9469.\r\n                        if (!event.isPropagationStopped()) {\r\n                            this.mouseHandled = true;\r\n                        }\r\n\r\n                        // Open submenu on click\r\n                        if (target.has(\".ui-menu\").length) {\r\n                            this.expand(event);\r\n                        } else if (!this.element.is(\":focus\") && $(this.document[0].activeElement).closest(\".ui-menu\").length) {\r\n\r\n                            // Redirect focus to the menu\r\n                            this.element.trigger(\"focus\", [true]);\r\n\r\n                            // If the active item is on the top level, let it stay active.\r\n                            // Otherwise, blur the active item since it is no longer visible.\r\n                            if (this.active && this.active.parents(\".ui-menu\").length === 1) {\r\n                                clearTimeout(this.timer);\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n                \"mouseenter .ui-menu-item\": function (event) {\r\n                    // Ignore mouse events while typeahead is active, see #10458.\r\n                    // Prevents focusing the wrong item when typeahead causes a scroll while the mouse\r\n                    // is over an item in the menu\r\n                    if (this.previousFilter) {\r\n                        return;\r\n                    }\r\n                    var target = $(event.currentTarget);\r\n                    // Remove ui-state-active class from siblings of the newly focused menu item\r\n                    // to avoid a jump caused by adjacent elements both having a class with a border\r\n                    target.siblings(\".ui-state-active\").removeClass(\"ui-state-active\");\r\n                    this.focus(event, target);\r\n                },\r\n                mouseleave: \"collapseAll\",\r\n                \"mouseleave .ui-menu\": \"collapseAll\",\r\n                focus: function (event, keepActiveItem) {\r\n                    // If there's already an active item, keep it active\r\n                    // If not, activate the first item\r\n                    var item = this.active || this.element.find(this.options.items).eq(0);\r\n\r\n                    if (!keepActiveItem) {\r\n                        this.focus(event, item);\r\n                    }\r\n                },\r\n                blur: function (event) {\r\n                    this._delay(function () {\r\n                        if (!$.contains(this.element[0], this.document[0].activeElement)) {\r\n                            this.collapseAll(event);\r\n                        }\r\n                    });\r\n                },\r\n                keydown: \"_keydown\"\r\n            });\r\n\r\n            this.refresh();\r\n\r\n            // Clicks outside of a menu collapse any open menus\r\n            this._on(this.document, {\r\n                click: function (event) {\r\n                    if (this._closeOnDocumentClick(event)) {\r\n                        this.collapseAll(event);\r\n                    }\r\n\r\n                    // Reset the mouseHandled flag\r\n                    this.mouseHandled = false;\r\n                }\r\n            });\r\n        },\r\n\r\n        _destroy: function () {\r\n            // Destroy (sub)menus\r\n            this.element\r\n                .removeAttr(\"aria-activedescendant\")\r\n                .find(\".ui-menu\").addBack()\r\n                .removeClass(\"ui-menu ui-widget ui-widget-content ui-menu-icons ui-front\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"tabIndex\")\r\n                .removeAttr(\"aria-labelledby\")\r\n                .removeAttr(\"aria-expanded\")\r\n                .removeAttr(\"aria-hidden\")\r\n                .removeAttr(\"aria-disabled\")\r\n                .removeUniqueId()\r\n                .show();\r\n\r\n            // Destroy menu items\r\n            this.element.find(\".ui-menu-item\")\r\n                .removeClass(\"ui-menu-item\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"aria-disabled\")\r\n                .removeUniqueId()\r\n                .removeClass(\"ui-state-hover\")\r\n                .removeAttr(\"tabIndex\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"aria-haspopup\")\r\n                .children().each(function () {\r\n                    var elem = $(this);\r\n                    if (elem.data(\"ui-menu-submenu-carat\")) {\r\n                        elem.remove();\r\n                    }\r\n                });\r\n\r\n            // Destroy menu dividers\r\n            this.element.find(\".ui-menu-divider\").removeClass(\"ui-menu-divider ui-widget-content\");\r\n        },\r\n\r\n        _keydown: function (event) {\r\n            var match, prev, character, skip,\r\n                preventDefault = true;\r\n\r\n            switch (event.keyCode) {\r\n                case $.ui.keyCode.PAGE_UP:\r\n                    this.previousPage(event);\r\n                    break;\r\n                case $.ui.keyCode.PAGE_DOWN:\r\n                    this.nextPage(event);\r\n                    break;\r\n                case $.ui.keyCode.HOME:\r\n                    this._move(\"first\", \"first\", event);\r\n                    break;\r\n                case $.ui.keyCode.END:\r\n                    this._move(\"last\", \"last\", event);\r\n                    break;\r\n                case $.ui.keyCode.UP:\r\n                    this.previous(event);\r\n                    break;\r\n                case $.ui.keyCode.DOWN:\r\n                    this.next(event);\r\n                    break;\r\n                case $.ui.keyCode.LEFT:\r\n                    this.collapse(event);\r\n                    break;\r\n                case $.ui.keyCode.RIGHT:\r\n                    if (this.active && !this.active.is(\".ui-state-disabled\")) {\r\n                        this.expand(event);\r\n                    }\r\n                    break;\r\n                case $.ui.keyCode.ENTER:\r\n                case $.ui.keyCode.SPACE:\r\n                    this._activate(event);\r\n                    break;\r\n                case $.ui.keyCode.ESCAPE:\r\n                    this.collapse(event);\r\n                    break;\r\n                default:\r\n                    preventDefault = false;\r\n                    prev = this.previousFilter || \"\";\r\n                    character = String.fromCharCode(event.keyCode);\r\n                    skip = false;\r\n\r\n                    clearTimeout(this.filterTimer);\r\n\r\n                    if (character === prev) {\r\n                        skip = true;\r\n                    } else {\r\n                        character = prev + character;\r\n                    }\r\n\r\n                    match = this._filterMenuItems(character);\r\n                    match = skip && match.index(this.active.next()) !== -1 ?\r\n                        this.active.nextAll(\".ui-menu-item\") :\r\n                        match;\r\n\r\n                    // If no matches on the current filter, reset to the last character pressed\r\n                    // to move down the menu to the first item that starts with that character\r\n                    if (!match.length) {\r\n                        character = String.fromCharCode(event.keyCode);\r\n                        match = this._filterMenuItems(character);\r\n                    }\r\n\r\n                    if (match.length) {\r\n                        this.focus(event, match);\r\n                        this.previousFilter = character;\r\n                        this.filterTimer = this._delay(function () {\r\n                            delete this.previousFilter;\r\n                        }, 1000);\r\n                    } else {\r\n                        delete this.previousFilter;\r\n                    }\r\n            }\r\n\r\n            if (preventDefault) {\r\n                event.preventDefault();\r\n            }\r\n        },\r\n\r\n        _activate: function (event) {\r\n            if (!this.active.is(\".ui-state-disabled\")) {\r\n                if (this.active.is(\"[aria-haspopup='true']\")) {\r\n                    this.expand(event);\r\n                } else {\r\n                    this.select(event);\r\n                }\r\n            }\r\n        },\r\n\r\n        refresh: function () {\r\n            var menus, items,\r\n                that = this,\r\n                icon = this.options.icons.submenu,\r\n                submenus = this.element.find(this.options.menus);\r\n\r\n            this.element.toggleClass(\"ui-menu-icons\", !!this.element.find(\".ui-icon\").length);\r\n\r\n            // Initialize nested menus\r\n            submenus.filter(\":not(.ui-menu)\")\r\n                .addClass(\"ui-menu ui-widget ui-widget-content ui-front\")\r\n                .hide()\r\n                .attr({\r\n                    role: this.options.role,\r\n                    \"aria-hidden\": \"true\",\r\n                    \"aria-expanded\": \"false\"\r\n                })\r\n                .each(function () {\r\n                    var menu = $(this),\r\n                        item = menu.parent(),\r\n                        submenuCarat = $(\"<span>\")\r\n                            .addClass(\"ui-menu-icon ui-icon \" + icon)\r\n                            .data(\"ui-menu-submenu-carat\", true);\r\n\r\n                    item\r\n                        .attr(\"aria-haspopup\", \"true\")\r\n                        .prepend(submenuCarat);\r\n                    menu.attr(\"aria-labelledby\", item.attr(\"id\"));\r\n                });\r\n\r\n            menus = submenus.add(this.element);\r\n            items = menus.find(this.options.items);\r\n\r\n            // Initialize menu-items containing spaces and/or dashes only as dividers\r\n            items.not(\".ui-menu-item\").each(function () {\r\n                var item = $(this);\r\n                if (that._isDivider(item)) {\r\n                    item.addClass(\"ui-widget-content ui-menu-divider\");\r\n                }\r\n            });\r\n\r\n            // Don't refresh list items that are already adapted\r\n            items.not(\".ui-menu-item, .ui-menu-divider\")\r\n                .addClass(\"ui-menu-item\")\r\n                .uniqueId()\r\n                .attr({\r\n                    tabIndex: -1,\r\n                    role: this._itemRole()\r\n                });\r\n\r\n            // Add aria-disabled attribute to any disabled menu item\r\n            items.filter(\".ui-state-disabled\").attr(\"aria-disabled\", \"true\");\r\n\r\n            // If the active item has been removed, blur the menu\r\n            if (this.active && !$.contains(this.element[0], this.active[0])) {\r\n                this.blur();\r\n            }\r\n        },\r\n\r\n        _itemRole: function () {\r\n            return {\r\n                menu: \"menuitem\",\r\n                listbox: \"option\"\r\n            }[this.options.role];\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            if (key === \"icons\") {\r\n                this.element.find(\".ui-menu-icon\")\r\n                    .removeClass(this.options.icons.submenu)\r\n                    .addClass(value.submenu);\r\n            }\r\n            if (key === \"disabled\") {\r\n                this.element\r\n                    .toggleClass(\"ui-state-disabled\", !!value)\r\n                    .attr(\"aria-disabled\", value);\r\n            }\r\n            this._super(key, value);\r\n        },\r\n\r\n        focus: function (event, item) {\r\n            var nested, focused;\r\n            this.blur(event, event && event.type === \"focus\");\r\n\r\n            this._scrollIntoView(item);\r\n\r\n            this.active = item.first();\r\n            focused = this.active.addClass(\"ui-state-focus\").removeClass(\"ui-state-active\");\r\n            // Only update aria-activedescendant if there's a role\r\n            // otherwise we assume focus is managed elsewhere\r\n            if (this.options.role) {\r\n                this.element.attr(\"aria-activedescendant\", focused.attr(\"id\"));\r\n            }\r\n\r\n            // Highlight active parent menu item, if any\r\n            this.active\r\n                .parent()\r\n                .closest(\".ui-menu-item\")\r\n                .addClass(\"ui-state-active\");\r\n\r\n            if (event && event.type === \"keydown\") {\r\n                this._close();\r\n            } else {\r\n                this.timer = this._delay(function () {\r\n                    this._close();\r\n                }, this.delay);\r\n            }\r\n\r\n            nested = item.children(\".ui-menu\");\r\n            if (nested.length && event && (/^mouse/.test(event.type))) {\r\n                this._startOpening(nested);\r\n            }\r\n            this.activeMenu = item.parent();\r\n\r\n            this._trigger(\"focus\", event, { item: item });\r\n        },\r\n\r\n        _scrollIntoView: function (item) {\r\n            var borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\r\n            if (this._hasScroll()) {\r\n                borderTop = parseFloat($.css(this.activeMenu[0], \"borderTopWidth\")) || 0;\r\n                paddingTop = parseFloat($.css(this.activeMenu[0], \"paddingTop\")) || 0;\r\n                offset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\r\n                scroll = this.activeMenu.scrollTop();\r\n                elementHeight = this.activeMenu.height();\r\n                itemHeight = item.outerHeight();\r\n\r\n                if (offset < 0) {\r\n                    this.activeMenu.scrollTop(scroll + offset);\r\n                } else if (offset + itemHeight > elementHeight) {\r\n                    this.activeMenu.scrollTop(scroll + offset - elementHeight + itemHeight);\r\n                }\r\n            }\r\n        },\r\n\r\n        blur: function (event, fromFocus) {\r\n            if (!fromFocus) {\r\n                clearTimeout(this.timer);\r\n            }\r\n\r\n            if (!this.active) {\r\n                return;\r\n            }\r\n\r\n            this.active.removeClass(\"ui-state-focus\");\r\n            this.active = null;\r\n\r\n            this._trigger(\"blur\", event, { item: this.active });\r\n        },\r\n\r\n        _startOpening: function (submenu) {\r\n            clearTimeout(this.timer);\r\n\r\n            // Don't open if already open fixes a Firefox bug that caused a .5 pixel\r\n            // shift in the submenu position when mousing over the carat icon\r\n            if (submenu.attr(\"aria-hidden\") !== \"true\") {\r\n                return;\r\n            }\r\n\r\n            this.timer = this._delay(function () {\r\n                this._close();\r\n                this._open(submenu);\r\n            }, this.delay);\r\n        },\r\n\r\n        _open: function (submenu) {\r\n            var position = $.extend({\r\n                of: this.active\r\n            }, this.options.position);\r\n\r\n            clearTimeout(this.timer);\r\n            this.element.find(\".ui-menu\").not(submenu.parents(\".ui-menu\"))\r\n                .hide()\r\n                .attr(\"aria-hidden\", \"true\");\r\n\r\n            submenu\r\n                .show()\r\n                .removeAttr(\"aria-hidden\")\r\n                .attr(\"aria-expanded\", \"true\")\r\n                .position(position);\r\n        },\r\n\r\n        collapseAll: function (event, all) {\r\n            clearTimeout(this.timer);\r\n            this.timer = this._delay(function () {\r\n                // If we were passed an event, look for the submenu that contains the event\r\n                var currentMenu = all ? this.element :\r\n                    $(event && event.target).closest(this.element.find(\".ui-menu\"));\r\n\r\n                // If we found no valid submenu ancestor, use the main menu to close all sub menus anyway\r\n                if (!currentMenu.length) {\r\n                    currentMenu = this.element;\r\n                }\r\n\r\n                this._close(currentMenu);\r\n\r\n                this.blur(event);\r\n                this.activeMenu = currentMenu;\r\n            }, this.delay);\r\n        },\r\n\r\n        // With no arguments, closes the currently active menu - if nothing is active\r\n        // it closes all menus.  If passed an argument, it will search for menus BELOW\r\n        _close: function (startMenu) {\r\n            if (!startMenu) {\r\n                startMenu = this.active ? this.active.parent() : this.element;\r\n            }\r\n\r\n            startMenu\r\n                .find(\".ui-menu\")\r\n                .hide()\r\n                .attr(\"aria-hidden\", \"true\")\r\n                .attr(\"aria-expanded\", \"false\")\r\n                .end()\r\n                .find(\".ui-state-active\").not(\".ui-state-focus\")\r\n                .removeClass(\"ui-state-active\");\r\n        },\r\n\r\n        _closeOnDocumentClick: function (event) {\r\n            return !$(event.target).closest(\".ui-menu\").length;\r\n        },\r\n\r\n        _isDivider: function (item) {\r\n\r\n            // Match hyphen, em dash, en dash\r\n            return !/[^\\-\\u2014\\u2013\\s]/.test(item.text());\r\n        },\r\n\r\n        collapse: function (event) {\r\n            var newItem = this.active &&\r\n                this.active.parent().closest(\".ui-menu-item\", this.element);\r\n            if (newItem && newItem.length) {\r\n                this._close();\r\n                this.focus(event, newItem);\r\n            }\r\n        },\r\n\r\n        expand: function (event) {\r\n            var newItem = this.active &&\r\n                this.active\r\n                    .children(\".ui-menu \")\r\n                    .find(this.options.items)\r\n                    .first();\r\n\r\n            if (newItem && newItem.length) {\r\n                this._open(newItem.parent());\r\n\r\n                // Delay so Firefox will not hide activedescendant change in expanding submenu from AT\r\n                this._delay(function () {\r\n                    this.focus(event, newItem);\r\n                });\r\n            }\r\n        },\r\n\r\n        next: function (event) {\r\n            this._move(\"next\", \"first\", event);\r\n        },\r\n\r\n        previous: function (event) {\r\n            this._move(\"prev\", \"last\", event);\r\n        },\r\n\r\n        isFirstItem: function () {\r\n            return this.active && !this.active.prevAll(\".ui-menu-item\").length;\r\n        },\r\n\r\n        isLastItem: function () {\r\n            return this.active && !this.active.nextAll(\".ui-menu-item\").length;\r\n        },\r\n\r\n        _move: function (direction, filter, event) {\r\n            var next;\r\n            if (this.active) {\r\n                if (direction === \"first\" || direction === \"last\") {\r\n                    next = this.active\r\n                    [direction === \"first\" ? \"prevAll\" : \"nextAll\"](\".ui-menu-item\")\r\n                        .eq(-1);\r\n                } else {\r\n                    next = this.active\r\n                    [direction + \"All\"](\".ui-menu-item\")\r\n                        .eq(0);\r\n                }\r\n            }\r\n            if (!next || !next.length || !this.active) {\r\n                next = this.activeMenu.find(this.options.items)[filter]();\r\n            }\r\n\r\n            this.focus(event, next);\r\n        },\r\n\r\n        nextPage: function (event) {\r\n            var item, base, height;\r\n\r\n            if (!this.active) {\r\n                this.next(event);\r\n                return;\r\n            }\r\n            if (this.isLastItem()) {\r\n                return;\r\n            }\r\n            if (this._hasScroll()) {\r\n                base = this.active.offset().top;\r\n                height = this.element.height();\r\n                this.active.nextAll(\".ui-menu-item\").each(function () {\r\n                    item = $(this);\r\n                    return item.offset().top - base - height < 0;\r\n                });\r\n\r\n                this.focus(event, item);\r\n            } else {\r\n                this.focus(event, this.activeMenu.find(this.options.items)\r\n                [!this.active ? \"first\" : \"last\"]());\r\n            }\r\n        },\r\n\r\n        previousPage: function (event) {\r\n            var item, base, height;\r\n            if (!this.active) {\r\n                this.next(event);\r\n                return;\r\n            }\r\n            if (this.isFirstItem()) {\r\n                return;\r\n            }\r\n            if (this._hasScroll()) {\r\n                base = this.active.offset().top;\r\n                height = this.element.height();\r\n                this.active.prevAll(\".ui-menu-item\").each(function () {\r\n                    item = $(this);\r\n                    return item.offset().top - base + height > 0;\r\n                });\r\n\r\n                this.focus(event, item);\r\n            } else {\r\n                this.focus(event, this.activeMenu.find(this.options.items).first());\r\n            }\r\n        },\r\n\r\n        _hasScroll: function () {\r\n            return this.element.outerHeight() < this.element.prop(\"scrollHeight\");\r\n        },\r\n\r\n        select: function (event) {\r\n            // TODO: It should never be possible to not have an active item at this\r\n            // point, but the tests don't trigger mouseenter before click.\r\n            this.active = this.active || $(event.target).closest(\".ui-menu-item\");\r\n            var ui = { item: this.active };\r\n            if (!this.active.has(\".ui-menu\").length) {\r\n                this.collapseAll(event, true);\r\n            }\r\n            this._trigger(\"select\", event, ui);\r\n        },\r\n\r\n        _filterMenuItems: function (character) {\r\n            var escapedCharacter = character.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\"),\r\n                regex = new RegExp(\"^\" + escapedCharacter, \"i\");\r\n\r\n            return this.activeMenu\r\n                .find(this.options.items)\r\n\r\n                // Only match on items, not dividers or other content (#10571)\r\n                .filter(\".ui-menu-item\")\r\n                .filter(function () {\r\n                    return regex.test($(this).text().trim());\r\n                });\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Autocomplete 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/autocomplete/\r\n     */\r\n\r\n\r\n    $.widget(\"ui.autocomplete\", {\r\n        version: \"1.11.4\",\r\n        defaultElement: \"<input>\",\r\n        options: {\r\n            appendTo: null,\r\n            autoFocus: false,\r\n            delay: 300,\r\n            minLength: 1,\r\n            position: {\r\n                my: \"left top\",\r\n                at: \"left bottom\",\r\n                collision: \"none\"\r\n            },\r\n            source: null,\r\n\r\n            // callbacks\r\n            change: null,\r\n            close: null,\r\n            focus: null,\r\n            open: null,\r\n            response: null,\r\n            search: null,\r\n            select: null\r\n        },\r\n\r\n        requestIndex: 0,\r\n        pending: 0,\r\n\r\n        _create: function () {\r\n            // Some browsers only repeat keydown events, not keypress events,\r\n            // so we use the suppressKeyPress flag to determine if we've already\r\n            // handled the keydown event. #7269\r\n            // Unfortunately the code for & in keypress is the same as the up arrow,\r\n            // so we use the suppressKeyPressRepeat flag to avoid handling keypress\r\n            // events when we know the keydown event was used to modify the\r\n            // search term. #7799\r\n            var suppressKeyPress, suppressKeyPressRepeat, suppressInput,\r\n                nodeName = this.element[0].nodeName.toLowerCase(),\r\n                isTextarea = nodeName === \"textarea\",\r\n                isInput = nodeName === \"input\";\r\n\r\n            this.isMultiLine =\r\n                // Textareas are always multi-line\r\n                isTextarea ? true :\r\n                    // Inputs are always single-line, even if inside a contentEditable element\r\n                    // IE also treats inputs as contentEditable\r\n                    isInput ? false :\r\n                        // All other element types are determined by whether or not they're contentEditable\r\n                        this.element.prop(\"isContentEditable\");\r\n\r\n            this.valueMethod = this.element[isTextarea || isInput ? \"val\" : \"text\"];\r\n            this.isNewMenu = true;\r\n\r\n            this.element\r\n                .addClass(\"ui-autocomplete-input\")\r\n                .attr(\"autocomplete\", \"off\");\r\n\r\n            this._on(this.element, {\r\n                keydown: function (event) {\r\n                    if (this.element.prop(\"readOnly\")) {\r\n                        suppressKeyPress = true;\r\n                        suppressInput = true;\r\n                        suppressKeyPressRepeat = true;\r\n                        return;\r\n                    }\r\n\r\n                    suppressKeyPress = false;\r\n                    suppressInput = false;\r\n                    suppressKeyPressRepeat = false;\r\n                    var keyCode = $.ui.keyCode;\r\n                    switch (event.keyCode) {\r\n                        case keyCode.PAGE_UP:\r\n                            suppressKeyPress = true;\r\n                            this._move(\"previousPage\", event);\r\n                            break;\r\n                        case keyCode.PAGE_DOWN:\r\n                            suppressKeyPress = true;\r\n                            this._move(\"nextPage\", event);\r\n                            break;\r\n                        case keyCode.UP:\r\n                            suppressKeyPress = true;\r\n                            this._keyEvent(\"previous\", event);\r\n                            break;\r\n                        case keyCode.DOWN:\r\n                            suppressKeyPress = true;\r\n                            this._keyEvent(\"next\", event);\r\n                            break;\r\n                        case keyCode.ENTER:\r\n                            // when menu is open and has focus\r\n                            if (this.menu.active) {\r\n                                // #6055 - Opera still allows the keypress to occur\r\n                                // which causes forms to submit\r\n                                suppressKeyPress = true;\r\n                                event.preventDefault();\r\n                                this.menu.select(event);\r\n                            }\r\n                            break;\r\n                        case keyCode.TAB:\r\n                            if (this.menu.active) {\r\n                                this.menu.select(event);\r\n                            }\r\n                            break;\r\n                        case keyCode.ESCAPE:\r\n                            if (this.menu.element.is(\":visible\")) {\r\n                                if (!this.isMultiLine) {\r\n                                    this._value(this.term);\r\n                                }\r\n                                this.close(event);\r\n                                // Different browsers have different default behavior for escape\r\n                                // Single press can mean undo or clear\r\n                                // Double press in IE means clear the whole form\r\n                                event.preventDefault();\r\n                            }\r\n                            break;\r\n                        default:\r\n                            suppressKeyPressRepeat = true;\r\n                            // search timeout should be triggered before the input value is changed\r\n                            this._searchTimeout(event);\r\n                            break;\r\n                    }\r\n                },\r\n                keypress: function (event) {\r\n                    if (suppressKeyPress) {\r\n                        suppressKeyPress = false;\r\n                        if (!this.isMultiLine || this.menu.element.is(\":visible\")) {\r\n                            event.preventDefault();\r\n                        }\r\n                        return;\r\n                    }\r\n                    if (suppressKeyPressRepeat) {\r\n                        return;\r\n                    }\r\n\r\n                    // replicate some key handlers to allow them to repeat in Firefox and Opera\r\n                    var keyCode = $.ui.keyCode;\r\n                    switch (event.keyCode) {\r\n                        case keyCode.PAGE_UP:\r\n                            this._move(\"previousPage\", event);\r\n                            break;\r\n                        case keyCode.PAGE_DOWN:\r\n                            this._move(\"nextPage\", event);\r\n                            break;\r\n                        case keyCode.UP:\r\n                            this._keyEvent(\"previous\", event);\r\n                            break;\r\n                        case keyCode.DOWN:\r\n                            this._keyEvent(\"next\", event);\r\n                            break;\r\n                    }\r\n                },\r\n                input: function (event) {\r\n                    if (suppressInput) {\r\n                        suppressInput = false;\r\n                        event.preventDefault();\r\n                        return;\r\n                    }\r\n                    this._searchTimeout(event);\r\n                },\r\n                focus: function () {\r\n                    this.selectedItem = null;\r\n                    this.previous = this._value();\r\n                },\r\n                blur: function (event) {\r\n                    if (this.cancelBlur) {\r\n                        delete this.cancelBlur;\r\n                        return;\r\n                    }\r\n\r\n                    clearTimeout(this.searching);\r\n                    this.close(event);\r\n                    this._change(event);\r\n                }\r\n            });\r\n\r\n            this._initSource();\r\n            this.menu = $(\"<ul>\")\r\n                .addClass(\"ui-autocomplete ui-front\")\r\n                .appendTo(this._appendTo())\r\n                .menu({\r\n                    // disable ARIA support, the live region takes care of that\r\n                    role: null\r\n                })\r\n                .hide()\r\n                .menu(\"instance\");\r\n\r\n            this._on(this.menu.element, {\r\n                mousedown: function (event) {\r\n                    // prevent moving focus out of the text field\r\n                    event.preventDefault();\r\n\r\n                    // IE doesn't prevent moving focus even with event.preventDefault()\r\n                    // so we set a flag to know when we should ignore the blur event\r\n                    this.cancelBlur = true;\r\n                    this._delay(function () {\r\n                        delete this.cancelBlur;\r\n                    });\r\n\r\n                    // clicking on the scrollbar causes focus to shift to the body\r\n                    // but we can't detect a mouseup or a click immediately afterward\r\n                    // so we have to track the next mousedown and close the menu if\r\n                    // the user clicks somewhere outside of the autocomplete\r\n                    var menuElement = this.menu.element[0];\r\n                    if (!$(event.target).closest(\".ui-menu-item\").length) {\r\n                        this._delay(function () {\r\n                            var that = this;\r\n                            this.document.one(\"mousedown\", function (event) {\r\n                                if (event.target !== that.element[0] &&\r\n                                    event.target !== menuElement &&\r\n                                    !$.contains(menuElement, event.target)) {\r\n                                    that.close();\r\n                                }\r\n                            });\r\n                        });\r\n                    }\r\n                },\r\n                menufocus: function (event, ui) {\r\n                    var label, item;\r\n                    // support: Firefox\r\n                    // Prevent accidental activation of menu items in Firefox (#7024 #9118)\r\n                    if (this.isNewMenu) {\r\n                        this.isNewMenu = false;\r\n                        if (event.originalEvent && /^mouse/.test(event.originalEvent.type)) {\r\n                            this.menu.blur();\r\n\r\n                            this.document.one(\"mousemove\", function () {\r\n                                $(event.target).trigger(event.originalEvent);\r\n                            });\r\n\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    item = ui.item.data(\"ui-autocomplete-item\");\r\n                    if (false !== this._trigger(\"focus\", event, { item: item })) {\r\n                        // use value to match what will end up in the input, if it was a key event\r\n                        if (event.originalEvent && /^key/.test(event.originalEvent.type)) {\r\n                            this._value(item.value);\r\n                        }\r\n                    }\r\n\r\n                    // Announce the value in the liveRegion\r\n                    label = ui.item.attr(\"aria-label\") || item.value;\r\n                    if (label && label.trim().length) {\r\n                        this.liveRegion.children().hide();\r\n                        $(\"<div>\").text(label).appendTo(this.liveRegion);\r\n                    }\r\n                },\r\n                menuselect: function (event, ui) {\r\n                    var item = ui.item.data(\"ui-autocomplete-item\"),\r\n                        previous = this.previous;\r\n\r\n                    // only trigger when focus was lost (click on menu)\r\n                    if (this.element[0] !== this.document[0].activeElement) {\r\n                        this.element.focus();\r\n                        this.previous = previous;\r\n                        // #6109 - IE triggers two focus events and the second\r\n                        // is asynchronous, so we need to reset the previous\r\n                        // term synchronously and asynchronously :-(\r\n                        this._delay(function () {\r\n                            this.previous = previous;\r\n                            this.selectedItem = item;\r\n                        });\r\n                    }\r\n\r\n                    if (false !== this._trigger(\"select\", event, { item: item })) {\r\n                        this._value(item.value);\r\n                    }\r\n                    // reset the term after the select event\r\n                    // this allows custom select handling to work properly\r\n                    this.term = this._value();\r\n\r\n                    this.close(event);\r\n                    this.selectedItem = item;\r\n                }\r\n            });\r\n\r\n            this.liveRegion = $(\"<span>\", {\r\n                role: \"status\",\r\n                \"aria-live\": \"assertive\",\r\n                \"aria-relevant\": \"additions\"\r\n            })\r\n                .addClass(\"ui-helper-hidden-accessible\")\r\n                .appendTo(this.document[0].body);\r\n\r\n            // turning off autocomplete prevents the browser from remembering the\r\n            // value when navigating through history, so we re-enable autocomplete\r\n            // if the page is unloaded before the widget is destroyed. #7790\r\n            this._on(this.window, {\r\n                beforeunload: function () {\r\n                    this.element.removeAttr(\"autocomplete\");\r\n                }\r\n            });\r\n        },\r\n\r\n        _destroy: function () {\r\n            clearTimeout(this.searching);\r\n            this.element\r\n                .removeClass(\"ui-autocomplete-input\")\r\n                .removeAttr(\"autocomplete\");\r\n            this.menu.element.remove();\r\n            this.liveRegion.remove();\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            this._super(key, value);\r\n            if (key === \"source\") {\r\n                this._initSource();\r\n            }\r\n            if (key === \"appendTo\") {\r\n                this.menu.element.appendTo(this._appendTo());\r\n            }\r\n            if (key === \"disabled\" && value && this.xhr) {\r\n                this.xhr.abort();\r\n            }\r\n        },\r\n\r\n        _appendTo: function () {\r\n            var element = this.options.appendTo;\r\n\r\n            if (element) {\r\n                element = element.jquery || element.nodeType ?\r\n                    $(element) :\r\n                    this.document.find(element).eq(0);\r\n            }\r\n\r\n            if (!element || !element[0]) {\r\n                element = this.element.closest(\".ui-front\");\r\n            }\r\n\r\n            if (!element.length) {\r\n                element = this.document[0].body;\r\n            }\r\n\r\n            return element;\r\n        },\r\n\r\n        _initSource: function () {\r\n            var array, url,\r\n                that = this;\r\n            if (Array.isArray(this.options.source)) {\r\n                array = this.options.source;\r\n                this.source = function (request, response) {\r\n                    response($.ui.autocomplete.filter(array, request.term));\r\n                };\r\n            } else if (typeof this.options.source === \"string\") {\r\n                url = this.options.source;\r\n                this.source = function (request, response) {\r\n                    if (that.xhr) {\r\n                        that.xhr.abort();\r\n                    }\r\n                    that.xhr = $.ajax({\r\n                        url: url,\r\n                        data: request,\r\n                        dataType: \"json\",\r\n                        success: function (data) {\r\n                            response(data);\r\n                        },\r\n                        error: function () {\r\n                            response([]);\r\n                        }\r\n                    });\r\n                };\r\n            } else {\r\n                this.source = this.options.source;\r\n            }\r\n        },\r\n\r\n        _searchTimeout: function (event) {\r\n            clearTimeout(this.searching);\r\n            this.searching = this._delay(function () {\r\n\r\n                // Search if the value has changed, or if the user retypes the same value (see #7434)\r\n                var equalValues = this.term === this._value(),\r\n                    menuVisible = this.menu.element.is(\":visible\"),\r\n                    modifierKey = event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;\r\n\r\n                if (!equalValues || (equalValues && !menuVisible && !modifierKey)) {\r\n                    this.selectedItem = null;\r\n                    this.search(null, event);\r\n                }\r\n            }, this.options.delay);\r\n        },\r\n\r\n        search: function (value, event) {\r\n            value = value != null ? value : this._value();\r\n\r\n            // always save the actual value, not the one passed as an argument\r\n            this.term = this._value();\r\n\r\n            if (value.length < this.options.minLength) {\r\n                return this.close(event);\r\n            }\r\n\r\n            if (this._trigger(\"search\", event) === false) {\r\n                return;\r\n            }\r\n\r\n            return this._search(value);\r\n        },\r\n\r\n        _search: function (value) {\r\n            this.pending++;\r\n            this.element.addClass(\"ui-autocomplete-loading\");\r\n            this.cancelSearch = false;\r\n\r\n            this.source({ term: value }, this._response());\r\n        },\r\n\r\n        _response: function () {\r\n            var index = ++this.requestIndex;\r\n\r\n            return $.proxy(function (content) {\r\n                if (index === this.requestIndex) {\r\n                    this.__response(content);\r\n                }\r\n\r\n                this.pending--;\r\n                if (!this.pending) {\r\n                    this.element.removeClass(\"ui-autocomplete-loading\");\r\n                }\r\n            }, this);\r\n        },\r\n\r\n        __response: function (content) {\r\n            if (content) {\r\n                content = this._normalize(content);\r\n            }\r\n            this._trigger(\"response\", null, { content: content });\r\n            if (!this.options.disabled && content && content.length && !this.cancelSearch) {\r\n                this._suggest(content);\r\n                this._trigger(\"open\");\r\n            } else {\r\n                // use ._close() instead of .close() so we don't cancel future searches\r\n                this._close();\r\n            }\r\n        },\r\n\r\n        close: function (event) {\r\n            this.cancelSearch = true;\r\n            this._close(event);\r\n        },\r\n\r\n        _close: function (event) {\r\n            if (this.menu.element.is(\":visible\")) {\r\n                this.menu.element.hide();\r\n                this.menu.blur();\r\n                this.isNewMenu = true;\r\n                this._trigger(\"close\", event);\r\n            }\r\n        },\r\n\r\n        _change: function (event) {\r\n            if (this.previous !== this._value()) {\r\n                this._trigger(\"change\", event, { item: this.selectedItem });\r\n            }\r\n        },\r\n\r\n        _normalize: function (items) {\r\n            // assume all items have the right format when the first item is complete\r\n            if (items.length && items[0].label && items[0].value) {\r\n                return items;\r\n            }\r\n            return $.map(items, function (item) {\r\n                if (typeof item === \"string\") {\r\n                    return {\r\n                        label: item,\r\n                        value: item\r\n                    };\r\n                }\r\n                return $.extend({}, item, {\r\n                    label: item.label || item.value,\r\n                    value: item.value || item.label\r\n                });\r\n            });\r\n        },\r\n\r\n        _suggest: function (items) {\r\n            var ul = this.menu.element.empty();\r\n            this._renderMenu(ul, items);\r\n            this.isNewMenu = true;\r\n            this.menu.refresh();\r\n\r\n            // size and position menu\r\n            ul.show();\r\n            this._resizeMenu();\r\n            ul.position($.extend({\r\n                of: this.element\r\n            }, this.options.position));\r\n\r\n            if (this.options.autoFocus) {\r\n                this.menu.next();\r\n            }\r\n        },\r\n\r\n        _resizeMenu: function () {\r\n            var ul = this.menu.element;\r\n            ul.outerWidth(Math.max(\r\n                // Firefox wraps long text (possibly a rounding bug)\r\n                // so we add 1px to avoid the wrapping (#7513)\r\n                ul.width(\"\").outerWidth() + 1,\r\n                this.element.outerWidth()\r\n            ));\r\n        },\r\n\r\n        _renderMenu: function (ul, items) {\r\n            var that = this;\r\n            $.each(items, function (index, item) {\r\n                that._renderItemData(ul, item);\r\n            });\r\n        },\r\n\r\n        _renderItemData: function (ul, item) {\r\n            return this._renderItem(ul, item).data(\"ui-autocomplete-item\", item);\r\n        },\r\n\r\n        _renderItem: function (ul, item) {\r\n            return $(\"<li>\").text(item.label).appendTo(ul);\r\n        },\r\n\r\n        _move: function (direction, event) {\r\n            if (!this.menu.element.is(\":visible\")) {\r\n                this.search(null, event);\r\n                return;\r\n            }\r\n            if (this.menu.isFirstItem() && /^previous/.test(direction) ||\r\n                this.menu.isLastItem() && /^next/.test(direction)) {\r\n\r\n                if (!this.isMultiLine) {\r\n                    this._value(this.term);\r\n                }\r\n\r\n                this.menu.blur();\r\n                return;\r\n            }\r\n            this.menu[direction](event);\r\n        },\r\n\r\n        widget: function () {\r\n            return this.menu.element;\r\n        },\r\n\r\n        _value: function () {\r\n            return this.valueMethod.apply(this.element, arguments);\r\n        },\r\n\r\n        _keyEvent: function (keyEvent, event) {\r\n            if (!this.isMultiLine || this.menu.element.is(\":visible\")) {\r\n                this._move(keyEvent, event);\r\n\r\n                // prevents moving cursor to beginning/end of the text field in some browsers\r\n                event.preventDefault();\r\n            }\r\n        }\r\n    });\r\n\r\n    $.extend($.ui.autocomplete, {\r\n        escapeRegex: function (value) {\r\n            return value.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\");\r\n        },\r\n        filter: function (array, term) {\r\n            var matcher = new RegExp($.ui.autocomplete.escapeRegex(term), \"i\");\r\n            return $.grep(array, function (value) {\r\n                return matcher.test(value.label || value.value || value);\r\n            });\r\n        }\r\n    });\r\n\r\n    // live region extension, adding a `messages` option\r\n    // NOTE: This is an experimental API. We are still investigating\r\n    // a full solution for string manipulation and internationalization.\r\n    $.widget(\"ui.autocomplete\", $.ui.autocomplete, {\r\n        options: {\r\n            messages: {\r\n                noResults: \"No search results.\",\r\n                results: function (amount) {\r\n                    return amount + (amount > 1 ? \" results are\" : \" result is\") +\r\n                        \" available, use up and down arrow keys to navigate.\";\r\n                }\r\n            }\r\n        },\r\n\r\n        __response: function (content) {\r\n            var message;\r\n            this._superApply(arguments);\r\n            if (this.options.disabled || this.cancelSearch) {\r\n                return;\r\n            }\r\n            if (content && content.length) {\r\n                message = this.options.messages.results(content.length);\r\n            } else {\r\n                message = this.options.messages.noResults;\r\n            }\r\n            this.liveRegion.children().hide();\r\n            $(\"<div>\").text(message).appendTo(this.liveRegion);\r\n        }\r\n    });\r\n\r\n    var autocomplete = $.ui.autocomplete;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Button 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/button/\r\n     */\r\n\r\n\r\n    var lastActive,\r\n        baseClasses = \"ui-button ui-widget ui-state-default ui-corner-all\",\r\n        typeClasses = \"ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only\",\r\n        formResetHandler = function () {\r\n            var form = $(this);\r\n            setTimeout(function () {\r\n                form.find(\":ui-button\").button(\"refresh\");\r\n            }, 1);\r\n        },\r\n        radioGroup = function (radio) {\r\n            var name = radio.name,\r\n                form = radio.form,\r\n                radios = $([]);\r\n            if (name) {\r\n                name = name.replace(/'/g, \"\\\\'\");\r\n                if (form) {\r\n                    radios = $(form).find(\"[name='\" + name + \"'][type=radio]\");\r\n                } else {\r\n                    radios = $(\"[name='\" + name + \"'][type=radio]\", radio.ownerDocument)\r\n                        .filter(function () {\r\n                            return !this.form;\r\n                        });\r\n                }\r\n            }\r\n            return radios;\r\n        };\r\n\r\n    $.widget(\"ui.button\", {\r\n        version: \"1.11.4\",\r\n        defaultElement: \"<button>\",\r\n        options: {\r\n            disabled: null,\r\n            text: true,\r\n            label: null,\r\n            icons: {\r\n                primary: null,\r\n                secondary: null\r\n            }\r\n        },\r\n        _create: function () {\r\n            this.element.closest(\"form\")\r\n                .unbind(\"reset\" + this.eventNamespace)\r\n                .bind(\"reset\" + this.eventNamespace, formResetHandler);\r\n\r\n            if (typeof this.options.disabled !== \"boolean\") {\r\n                this.options.disabled = !!this.element.prop(\"disabled\");\r\n            } else {\r\n                this.element.prop(\"disabled\", this.options.disabled);\r\n            }\r\n\r\n            this._determineButtonType();\r\n            this.hasTitle = !!this.buttonElement.attr(\"title\");\r\n\r\n            var that = this,\r\n                options = this.options,\r\n                toggleButton = this.type === \"checkbox\" || this.type === \"radio\",\r\n                activeClass = !toggleButton ? \"ui-state-active\" : \"\";\r\n\r\n            if (options.label === null) {\r\n                options.label = (this.type === \"input\" ? this.buttonElement.val() : this.buttonElement.html());\r\n            }\r\n\r\n            this._hoverable(this.buttonElement);\r\n\r\n            this.buttonElement\r\n                .addClass(baseClasses)\r\n                .attr(\"role\", \"button\")\r\n                .bind(\"mouseenter\" + this.eventNamespace, function () {\r\n                    if (options.disabled) {\r\n                        return;\r\n                    }\r\n                    if (this === lastActive) {\r\n                        $(this).addClass(\"ui-state-active\");\r\n                    }\r\n                })\r\n                .bind(\"mouseleave\" + this.eventNamespace, function () {\r\n                    if (options.disabled) {\r\n                        return;\r\n                    }\r\n                    $(this).removeClass(activeClass);\r\n                })\r\n                .bind(\"click\" + this.eventNamespace, function (event) {\r\n                    if (options.disabled) {\r\n                        event.preventDefault();\r\n                        event.stopImmediatePropagation();\r\n                    }\r\n                });\r\n\r\n            // Can't use _focusable() because the element that receives focus\r\n            // and the element that gets the ui-state-focus class are different\r\n            this._on({\r\n                focus: function () {\r\n                    this.buttonElement.addClass(\"ui-state-focus\");\r\n                },\r\n                blur: function () {\r\n                    this.buttonElement.removeClass(\"ui-state-focus\");\r\n                }\r\n            });\r\n\r\n            if (toggleButton) {\r\n                this.element.bind(\"change\" + this.eventNamespace, function () {\r\n                    that.refresh();\r\n                });\r\n            }\r\n\r\n            if (this.type === \"checkbox\") {\r\n                this.buttonElement.bind(\"click\" + this.eventNamespace, function () {\r\n                    if (options.disabled) {\r\n                        return false;\r\n                    }\r\n                });\r\n            } else if (this.type === \"radio\") {\r\n                this.buttonElement.bind(\"click\" + this.eventNamespace, function () {\r\n                    if (options.disabled) {\r\n                        return false;\r\n                    }\r\n                    $(this).addClass(\"ui-state-active\");\r\n                    that.buttonElement.attr(\"aria-pressed\", \"true\");\r\n\r\n                    var radio = that.element[0];\r\n                    radioGroup(radio)\r\n                        .not(radio)\r\n                        .map(function () {\r\n                            return $(this).button(\"widget\")[0];\r\n                        })\r\n                        .removeClass(\"ui-state-active\")\r\n                        .attr(\"aria-pressed\", \"false\");\r\n                });\r\n            } else {\r\n                this.buttonElement\r\n                    .bind(\"mousedown\" + this.eventNamespace, function () {\r\n                        if (options.disabled) {\r\n                            return false;\r\n                        }\r\n                        $(this).addClass(\"ui-state-active\");\r\n                        lastActive = this;\r\n                        that.document.one(\"mouseup\", function () {\r\n                            lastActive = null;\r\n                        });\r\n                    })\r\n                    .bind(\"mouseup\" + this.eventNamespace, function () {\r\n                        if (options.disabled) {\r\n                            return false;\r\n                        }\r\n                        $(this).removeClass(\"ui-state-active\");\r\n                    })\r\n                    .bind(\"keydown\" + this.eventNamespace, function (event) {\r\n                        if (options.disabled) {\r\n                            return false;\r\n                        }\r\n                        if (event.keyCode === $.ui.keyCode.SPACE || event.keyCode === $.ui.keyCode.ENTER) {\r\n                            $(this).addClass(\"ui-state-active\");\r\n                        }\r\n                    })\r\n                    // see #8559, we bind to blur here in case the button element loses\r\n                    // focus between keydown and keyup, it would be left in an \"active\" state\r\n                    .bind(\"keyup\" + this.eventNamespace + \" blur\" + this.eventNamespace, function () {\r\n                        $(this).removeClass(\"ui-state-active\");\r\n                    });\r\n\r\n                if (this.buttonElement.is(\"a\")) {\r\n                    this.buttonElement.keyup(function (event) {\r\n                        if (event.keyCode === $.ui.keyCode.SPACE) {\r\n                            // TODO pass through original event correctly (just as 2nd argument doesn't work)\r\n                            $(this).click();\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            this._setOption(\"disabled\", options.disabled);\r\n            this._resetButton();\r\n        },\r\n\r\n        _determineButtonType: function () {\r\n            var ancestor, labelSelector, checked;\r\n\r\n            if (this.element.is(\"[type=checkbox]\")) {\r\n                this.type = \"checkbox\";\r\n            } else if (this.element.is(\"[type=radio]\")) {\r\n                this.type = \"radio\";\r\n            } else if (this.element.is(\"input\")) {\r\n                this.type = \"input\";\r\n            } else {\r\n                this.type = \"button\";\r\n            }\r\n\r\n            if (this.type === \"checkbox\" || this.type === \"radio\") {\r\n                // we don't search against the document in case the element\r\n                // is disconnected from the DOM\r\n                ancestor = this.element.parents().last();\r\n                labelSelector = \"label[for='\" + this.element.attr(\"id\") + \"']\";\r\n                this.buttonElement = ancestor.find(labelSelector);\r\n                if (!this.buttonElement.length) {\r\n                    ancestor = ancestor.length ? ancestor.siblings() : this.element.siblings();\r\n                    this.buttonElement = ancestor.filter(labelSelector);\r\n                    if (!this.buttonElement.length) {\r\n                        this.buttonElement = ancestor.find(labelSelector);\r\n                    }\r\n                }\r\n                this.element.addClass(\"ui-helper-hidden-accessible\");\r\n\r\n                checked = this.element.is(\":checked\");\r\n                if (checked) {\r\n                    this.buttonElement.addClass(\"ui-state-active\");\r\n                }\r\n                this.buttonElement.prop(\"aria-pressed\", checked);\r\n            } else {\r\n                this.buttonElement = this.element;\r\n            }\r\n        },\r\n\r\n        widget: function () {\r\n            return this.buttonElement;\r\n        },\r\n\r\n        _destroy: function () {\r\n            this.element\r\n                .removeClass(\"ui-helper-hidden-accessible\");\r\n            this.buttonElement\r\n                .removeClass(baseClasses + \" ui-state-active \" + typeClasses)\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"aria-pressed\")\r\n                .html(this.buttonElement.find(\".ui-button-text\").html());\r\n\r\n            if (!this.hasTitle) {\r\n                this.buttonElement.removeAttr(\"title\");\r\n            }\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            this._super(key, value);\r\n            if (key === \"disabled\") {\r\n                this.widget().toggleClass(\"ui-state-disabled\", !!value);\r\n                this.element.prop(\"disabled\", !!value);\r\n                if (value) {\r\n                    if (this.type === \"checkbox\" || this.type === \"radio\") {\r\n                        this.buttonElement.removeClass(\"ui-state-focus\");\r\n                    } else {\r\n                        this.buttonElement.removeClass(\"ui-state-focus ui-state-active\");\r\n                    }\r\n                }\r\n                return;\r\n            }\r\n            this._resetButton();\r\n        },\r\n\r\n        refresh: function () {\r\n            //See #8237 & #8828\r\n            var isDisabled = this.element.is(\"input, button\") ? this.element.is(\":disabled\") : this.element.hasClass(\"ui-button-disabled\");\r\n\r\n            if (isDisabled !== this.options.disabled) {\r\n                this._setOption(\"disabled\", isDisabled);\r\n            }\r\n            if (this.type === \"radio\") {\r\n                radioGroup(this.element[0]).each(function () {\r\n                    if ($(this).is(\":checked\")) {\r\n                        $(this).button(\"widget\")\r\n                            .addClass(\"ui-state-active\")\r\n                            .attr(\"aria-pressed\", \"true\");\r\n                    } else {\r\n                        $(this).button(\"widget\")\r\n                            .removeClass(\"ui-state-active\")\r\n                            .attr(\"aria-pressed\", \"false\");\r\n                    }\r\n                });\r\n            } else if (this.type === \"checkbox\") {\r\n                if (this.element.is(\":checked\")) {\r\n                    this.buttonElement\r\n                        .addClass(\"ui-state-active\")\r\n                        .attr(\"aria-pressed\", \"true\");\r\n                } else {\r\n                    this.buttonElement\r\n                        .removeClass(\"ui-state-active\")\r\n                        .attr(\"aria-pressed\", \"false\");\r\n                }\r\n            }\r\n        },\r\n\r\n        _resetButton: function () {\r\n            if (this.type === \"input\") {\r\n                if (this.options.label) {\r\n                    this.element.val(this.options.label);\r\n                }\r\n                return;\r\n            }\r\n            var buttonElement = this.buttonElement.removeClass(typeClasses),\r\n                buttonText = $(\"<span></span>\", this.document[0])\r\n                    .addClass(\"ui-button-text\")\r\n                    .html(this.options.label)\r\n                    .appendTo(buttonElement.empty())\r\n                    .text(),\r\n                icons = this.options.icons,\r\n                multipleIcons = icons.primary && icons.secondary,\r\n                buttonClasses = [];\r\n\r\n            if (icons.primary || icons.secondary) {\r\n                if (this.options.text) {\r\n                    buttonClasses.push(\"ui-button-text-icon\" + (multipleIcons ? \"s\" : (icons.primary ? \"-primary\" : \"-secondary\")));\r\n                }\r\n\r\n                if (icons.primary) {\r\n                    buttonElement.prepend(\"<span class='ui-button-icon-primary ui-icon \" + icons.primary + \"'></span>\");\r\n                }\r\n\r\n                if (icons.secondary) {\r\n                    buttonElement.append(\"<span class='ui-button-icon-secondary ui-icon \" + icons.secondary + \"'></span>\");\r\n                }\r\n\r\n                if (!this.options.text) {\r\n                    buttonClasses.push(multipleIcons ? \"ui-button-icons-only\" : \"ui-button-icon-only\");\r\n\r\n                    if (!this.hasTitle) {\r\n                        buttonElement.attr(\"title\", buttonText.trim());\r\n                    }\r\n                }\r\n            } else {\r\n                buttonClasses.push(\"ui-button-text-only\");\r\n            }\r\n            buttonElement.addClass(buttonClasses.join(\" \"));\r\n        }\r\n    });\r\n\r\n    $.widget(\"ui.buttonset\", {\r\n        version: \"1.11.4\",\r\n        options: {\r\n            items: \"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)\"\r\n        },\r\n\r\n        _create: function () {\r\n            this.element.addClass(\"ui-buttonset\");\r\n        },\r\n\r\n        _init: function () {\r\n            this.refresh();\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            if (key === \"disabled\") {\r\n                this.buttons.button(\"option\", key, value);\r\n            }\r\n\r\n            this._super(key, value);\r\n        },\r\n\r\n        refresh: function () {\r\n            var rtl = this.element.css(\"direction\") === \"rtl\",\r\n                allButtons = this.element.find(this.options.items),\r\n                existingButtons = allButtons.filter(\":ui-button\");\r\n\r\n            // Initialize new buttons\r\n            allButtons.not(\":ui-button\").button();\r\n\r\n            // Refresh existing buttons\r\n            existingButtons.button(\"refresh\");\r\n\r\n            this.buttons = allButtons\r\n                .map(function () {\r\n                    return $(this).button(\"widget\")[0];\r\n                })\r\n                .removeClass(\"ui-corner-all ui-corner-left ui-corner-right\")\r\n                .filter(\":first\")\r\n                .addClass(rtl ? \"ui-corner-right\" : \"ui-corner-left\")\r\n                .end()\r\n                .filter(\":last\")\r\n                .addClass(rtl ? \"ui-corner-left\" : \"ui-corner-right\")\r\n                .end()\r\n                .end();\r\n        },\r\n\r\n        _destroy: function () {\r\n            this.element.removeClass(\"ui-buttonset\");\r\n            this.buttons\r\n                .map(function () {\r\n                    return $(this).button(\"widget\")[0];\r\n                })\r\n                .removeClass(\"ui-corner-left ui-corner-right\")\r\n                .end()\r\n                .button(\"destroy\");\r\n        }\r\n    });\r\n\r\n    var button = $.ui.button;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Datepicker 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/datepicker/\r\n     */\r\n\r\n\r\n    $.extend($.ui, { datepicker: { version: \"1.11.4\" } });\r\n\r\n    var datepicker_instActive;\r\n\r\n    function datepicker_getZindex(elem) {\r\n        var position, value;\r\n        while (elem.length && elem[0] !== document) {\r\n            // Ignore z-index if position is set to a value where z-index is ignored by the browser\r\n            // This makes behavior of this function consistent across browsers\r\n            // WebKit always returns auto if the element is positioned\r\n            position = elem.css(\"position\");\r\n            if (position === \"absolute\" || position === \"relative\" || position === \"fixed\") {\r\n                // IE returns 0 when zIndex is not specified\r\n                // other browsers return a string\r\n                // we ignore the case of nested elements with an explicit value of 0\r\n                // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\r\n                value = parseInt(elem.css(\"zIndex\"), 10);\r\n                if (!isNaN(value) && value !== 0) {\r\n                    return value;\r\n                }\r\n            }\r\n            elem = elem.parent();\r\n        }\r\n\r\n        return 0;\r\n    }\r\n    /* Date picker manager.\r\n       Use the singleton instance of this class, $.datepicker, to interact with the date picker.\r\n       Settings for (groups of) date pickers are maintained in an instance object,\r\n       allowing multiple different settings on the same page. */\r\n\r\n    function Datepicker() {\r\n        this._curInst = null; // The current instance in use\r\n        this._keyEvent = false; // If the last event was a key event\r\n        this._disabledInputs = []; // List of date picker inputs that have been disabled\r\n        this._datepickerShowing = false; // True if the popup picker is showing , false if not\r\n        this._inDialog = false; // True if showing within a \"dialog\", false if not\r\n        this._mainDivId = \"ui-datepicker-div\"; // The ID of the main datepicker division\r\n        this._inlineClass = \"ui-datepicker-inline\"; // The name of the inline marker class\r\n        this._appendClass = \"ui-datepicker-append\"; // The name of the append marker class\r\n        this._triggerClass = \"ui-datepicker-trigger\"; // The name of the trigger marker class\r\n        this._dialogClass = \"ui-datepicker-dialog\"; // The name of the dialog marker class\r\n        this._disableClass = \"ui-datepicker-disabled\"; // The name of the disabled covering marker class\r\n        this._unselectableClass = \"ui-datepicker-unselectable\"; // The name of the unselectable cell marker class\r\n        this._currentClass = \"ui-datepicker-current-day\"; // The name of the current day marker class\r\n        this._dayOverClass = \"ui-datepicker-days-cell-over\"; // The name of the day hover marker class\r\n        this.regional = []; // Available regional settings, indexed by language code\r\n        this.regional[\"\"] = { // Default regional settings\r\n            closeText: \"Done\", // Display text for close link\r\n            prevText: \"Prev\", // Display text for previous month link\r\n            nextText: \"Next\", // Display text for next month link\r\n            currentText: \"Today\", // Display text for current month link\r\n            monthNames: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n                \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"], // Names of months for drop-down and formatting\r\n            monthNamesShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"], // For formatting\r\n            dayNames: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"], // For formatting\r\n            dayNamesShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"], // For formatting\r\n            dayNamesMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"], // Column headings for days starting at Sunday\r\n            weekHeader: \"Wk\", // Column header for week of the year\r\n            dateFormat: \"mm/dd/yy\", // See format options on parseDate\r\n            firstDay: 0, // The first day of the week, Sun = 0, Mon = 1, ...\r\n            isRTL: false, // True if right-to-left language, false if left-to-right\r\n            showMonthAfterYear: false, // True if the year select precedes month, false for month then year\r\n            yearSuffix: \"\" // Additional text to append to the year in the month headers\r\n        };\r\n        this._defaults = { // Global defaults for all the date picker instances\r\n            showOn: \"focus\", // \"focus\" for popup on focus,\r\n            // \"button\" for trigger button, or \"both\" for either\r\n            showAnim: \"fadeIn\", // Name of jQuery animation for popup\r\n            showOptions: {}, // Options for enhanced animations\r\n            defaultDate: null, // Used when field is blank: actual date,\r\n            // +/-number for offset from today, null for today\r\n            appendText: \"\", // Display text following the input box, e.g. showing the format\r\n            buttonText: \"...\", // Text for trigger button\r\n            buttonImage: \"\", // URL for trigger button image\r\n            buttonImageOnly: false, // True if the image appears alone, false if it appears on a button\r\n            hideIfNoPrevNext: false, // True to hide next/previous month links\r\n            // if not applicable, false to just disable them\r\n            navigationAsDateFormat: false, // True if date formatting applied to prev/today/next links\r\n            gotoCurrent: false, // True if today link goes back to current selection instead\r\n            changeMonth: false, // True if month can be selected directly, false if only prev/next\r\n            changeYear: false, // True if year can be selected directly, false if only prev/next\r\n            yearRange: \"c-10:c+10\", // Range of years to display in drop-down,\r\n            // either relative to today's year (-nn:+nn), relative to currently displayed year\r\n            // (c-nn:c+nn), absolute (nnnn:nnnn), or a combination of the above (nnnn:-n)\r\n            showOtherMonths: false, // True to show dates in other months, false to leave blank\r\n            selectOtherMonths: false, // True to allow selection of dates in other months, false for unselectable\r\n            showWeek: false, // True to show week of the year, false to not show it\r\n            calculateWeek: this.iso8601Week, // How to calculate the week of the year,\r\n            // takes a Date and returns the number of the week for it\r\n            shortYearCutoff: \"+10\", // Short year values < this are in the current century,\r\n            // > this are in the previous century,\r\n            // string value starting with \"+\" for current year + value\r\n            minDate: null, // The earliest selectable date, or null for no limit\r\n            maxDate: null, // The latest selectable date, or null for no limit\r\n            duration: \"fast\", // Duration of display/closure\r\n            beforeShowDay: null, // Function that takes a date and returns an array with\r\n            // [0] = true if selectable, false if not, [1] = custom CSS class name(s) or \"\",\r\n            // [2] = cell title (optional), e.g. $.datepicker.noWeekends\r\n            beforeShow: null, // Function that takes an input field and\r\n            // returns a set of custom settings for the date picker\r\n            onSelect: null, // Define a callback function when a date is selected\r\n            onChangeMonthYear: null, // Define a callback function when the month or year is changed\r\n            onClose: null, // Define a callback function when the datepicker is closed\r\n            numberOfMonths: 1, // Number of months to show at a time\r\n            showCurrentAtPos: 0, // The position in multipe months at which to show the current month (starting at 0)\r\n            stepMonths: 1, // Number of months to step back/forward\r\n            stepBigMonths: 12, // Number of months to step back/forward for the big links\r\n            altField: \"\", // Selector for an alternate field to store selected dates into\r\n            altFormat: \"\", // The date format to use for the alternate field\r\n            constrainInput: true, // The input is constrained by the current date format\r\n            showButtonPanel: false, // True to show button panel, false to not show it\r\n            autoSize: false, // True to size the input for the date format, false to leave as is\r\n            disabled: false // The initial disabled state\r\n        };\r\n        $.extend(this._defaults, this.regional[\"\"]);\r\n        this.regional.en = $.extend(true, {}, this.regional[\"\"]);\r\n        this.regional[\"en-US\"] = $.extend(true, {}, this.regional.en);\r\n        this.dpDiv = datepicker_bindHover($(\"<div id='\" + this._mainDivId + \"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\"));\r\n    }\r\n\r\n    $.extend(Datepicker.prototype, {\r\n        /* Class name added to elements to indicate already configured with a date picker. */\r\n        markerClassName: \"hasDatepicker\",\r\n\r\n        //Keep track of the maximum number of rows displayed (see #7043)\r\n        maxRows: 4,\r\n\r\n        // TODO rename to \"widget\" when switching to widget factory\r\n        _widgetDatepicker: function () {\r\n            return this.dpDiv;\r\n        },\r\n\r\n        /* Override the default settings for all instances of the date picker.\r\n         * @param  settings  object - the new settings to use as defaults (anonymous object)\r\n         * @return the manager object\r\n         */\r\n        setDefaults: function (settings) {\r\n            datepicker_extendRemove(this._defaults, settings || {});\r\n            return this;\r\n        },\r\n\r\n        /* Attach the date picker to a jQuery selection.\r\n         * @param  target\telement - the target input field or division or span\r\n         * @param  settings  object - the new settings to use for this date picker instance (anonymous)\r\n         */\r\n        _attachDatepicker: function (target, settings) {\r\n            var nodeName, inline, inst;\r\n            nodeName = target.nodeName.toLowerCase();\r\n            inline = (nodeName === \"div\" || nodeName === \"span\");\r\n            if (!target.id) {\r\n                this.uuid += 1;\r\n                target.id = \"dp\" + this.uuid;\r\n            }\r\n            inst = this._newInst($(target), inline);\r\n            inst.settings = $.extend({}, settings || {});\r\n            if (nodeName === \"input\") {\r\n                this._connectDatepicker(target, inst);\r\n            } else if (inline) {\r\n                this._inlineDatepicker(target, inst);\r\n            }\r\n        },\r\n\r\n        /* Create a new instance object. */\r\n        _newInst: function (target, inline) {\r\n            var id = target[0].id.replace(/([^A-Za-z0-9_\\-])/g, \"\\\\\\\\$1\"); // escape jQuery meta chars\r\n            return {\r\n                id: id, input: target, // associated target\r\n                selectedDay: 0, selectedMonth: 0, selectedYear: 0, // current selection\r\n                drawMonth: 0, drawYear: 0, // month being drawn\r\n                inline: inline, // is datepicker inline or not\r\n                dpDiv: (!inline ? this.dpDiv : // presentation div\r\n                    datepicker_bindHover($(\"<div class='\" + this._inlineClass + \" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>\")))\r\n            };\r\n        },\r\n\r\n        /* Attach the date picker to an input field. */\r\n        _connectDatepicker: function (target, inst) {\r\n            var input = $(target);\r\n            inst.append = $([]);\r\n            inst.trigger = $([]);\r\n            if (input.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n            this._attachments(input, inst);\r\n            input.addClass(this.markerClassName).keydown(this._doKeyDown).\r\n                keypress(this._doKeyPress).keyup(this._doKeyUp);\r\n            this._autoSize(inst);\r\n            $.data(target, \"datepicker\", inst);\r\n            //If disabled option is true, disable the datepicker once it has been attached to the input (see ticket #5665)\r\n            if (inst.settings.disabled) {\r\n                this._disableDatepicker(target);\r\n            }\r\n        },\r\n\r\n        /* Make attachments based on settings. */\r\n        _attachments: function (input, inst) {\r\n            var showOn, buttonText, buttonImage,\r\n                appendText = this._get(inst, \"appendText\"),\r\n                isRTL = this._get(inst, \"isRTL\");\r\n\r\n            if (inst.append) {\r\n                inst.append.remove();\r\n            }\r\n            if (appendText) {\r\n                inst.append = $(\"<span class='\" + this._appendClass + \"'>\" + appendText + \"</span>\");\r\n                input[isRTL ? \"before\" : \"after\"](inst.append);\r\n            }\r\n\r\n            input.unbind(\"focus\", this._showDatepicker);\r\n\r\n            if (inst.trigger) {\r\n                inst.trigger.remove();\r\n            }\r\n\r\n            showOn = this._get(inst, \"showOn\");\r\n            if (showOn === \"focus\" || showOn === \"both\") { // pop-up date picker when in the marked field\r\n                input.focus(this._showDatepicker);\r\n            }\r\n            if (showOn === \"button\" || showOn === \"both\") { // pop-up date picker when button clicked\r\n                buttonText = this._get(inst, \"buttonText\");\r\n                buttonImage = this._get(inst, \"buttonImage\");\r\n                inst.trigger = $(this._get(inst, \"buttonImageOnly\") ?\r\n                    $(\"<img/>\").addClass(this._triggerClass).\r\n                        attr({ src: buttonImage, alt: buttonText, title: buttonText }) :\r\n                    $(\"<button type='button'></button>\").addClass(this._triggerClass).\r\n                        html(!buttonImage ? buttonText : $(\"<img/>\").attr(\r\n                            { src: buttonImage, alt: buttonText, title: buttonText })));\r\n                input[isRTL ? \"before\" : \"after\"](inst.trigger);\r\n                inst.trigger.click(function () {\r\n                    if ($.datepicker._datepickerShowing && $.datepicker._lastInput === input[0]) {\r\n                        $.datepicker._hideDatepicker();\r\n                    } else if ($.datepicker._datepickerShowing && $.datepicker._lastInput !== input[0]) {\r\n                        $.datepicker._hideDatepicker();\r\n                        $.datepicker._showDatepicker(input[0]);\r\n                    } else {\r\n                        $.datepicker._showDatepicker(input[0]);\r\n                    }\r\n                    return false;\r\n                });\r\n            }\r\n        },\r\n\r\n        /* Apply the maximum length for the date format. */\r\n        _autoSize: function (inst) {\r\n            if (this._get(inst, \"autoSize\") && !inst.inline) {\r\n                var findMax, max, maxI, i,\r\n                    date = new Date(2009, 12 - 1, 20), // Ensure double digits\r\n                    dateFormat = this._get(inst, \"dateFormat\");\r\n\r\n                if (dateFormat.match(/[DM]/)) {\r\n                    findMax = function (names) {\r\n                        max = 0;\r\n                        maxI = 0;\r\n                        for (i = 0; i < names.length; i++) {\r\n                            if (names[i].length > max) {\r\n                                max = names[i].length;\r\n                                maxI = i;\r\n                            }\r\n                        }\r\n                        return maxI;\r\n                    };\r\n                    date.setMonth(findMax(this._get(inst, (dateFormat.match(/MM/) ?\r\n                        \"monthNames\" : \"monthNamesShort\"))));\r\n                    date.setDate(findMax(this._get(inst, (dateFormat.match(/DD/) ?\r\n                        \"dayNames\" : \"dayNamesShort\"))) + 20 - date.getDay());\r\n                }\r\n                inst.input.attr(\"size\", this._formatDate(inst, date).length);\r\n            }\r\n        },\r\n\r\n        /* Attach an inline date picker to a div. */\r\n        _inlineDatepicker: function (target, inst) {\r\n            var divSpan = $(target);\r\n            if (divSpan.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n            divSpan.addClass(this.markerClassName).append(inst.dpDiv);\r\n            $.data(target, \"datepicker\", inst);\r\n            this._setDate(inst, this._getDefaultDate(inst), true);\r\n            this._updateDatepicker(inst);\r\n            this._updateAlternate(inst);\r\n            //If disabled option is true, disable the datepicker before showing it (see ticket #5665)\r\n            if (inst.settings.disabled) {\r\n                this._disableDatepicker(target);\r\n            }\r\n            // Set display:block in place of inst.dpDiv.show() which won't work on disconnected elements\r\n            // http://bugs.jqueryui.com/ticket/7552 - A Datepicker created on a detached div has zero height\r\n            inst.dpDiv.css(\"display\", \"block\");\r\n        },\r\n\r\n        /* Pop-up the date picker in a \"dialog\" box.\r\n         * @param  input element - ignored\r\n         * @param  date\tstring or Date - the initial date to display\r\n         * @param  onSelect  function - the function to call when a date is selected\r\n         * @param  settings  object - update the dialog date picker instance's settings (anonymous object)\r\n         * @param  pos int[2] - coordinates for the dialog's position within the screen or\r\n         *\t\t\t\t\tevent - with x/y coordinates or\r\n         *\t\t\t\t\tleave empty for default (screen centre)\r\n         * @return the manager object\r\n         */\r\n        _dialogDatepicker: function (input, date, onSelect, settings, pos) {\r\n            var id, browserWidth, browserHeight, scrollX, scrollY,\r\n                inst = this._dialogInst; // internal instance\r\n\r\n            if (!inst) {\r\n                this.uuid += 1;\r\n                id = \"dp\" + this.uuid;\r\n                this._dialogInput = $(\"<input type='text' id='\" + id +\r\n                    \"' style='position: absolute; top: -100px; width: 0px;'/>\");\r\n                this._dialogInput.keydown(this._doKeyDown);\r\n                $(\"body\").append(this._dialogInput);\r\n                inst = this._dialogInst = this._newInst(this._dialogInput, false);\r\n                inst.settings = {};\r\n                $.data(this._dialogInput[0], \"datepicker\", inst);\r\n            }\r\n            datepicker_extendRemove(inst.settings, settings || {});\r\n            date = (date && date.constructor === Date ? this._formatDate(inst, date) : date);\r\n            this._dialogInput.val(date);\r\n\r\n            this._pos = (pos ? (pos.length ? pos : [pos.pageX, pos.pageY]) : null);\r\n            if (!this._pos) {\r\n                browserWidth = document.documentElement.clientWidth;\r\n                browserHeight = document.documentElement.clientHeight;\r\n                scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;\r\n                scrollY = document.documentElement.scrollTop || document.body.scrollTop;\r\n                this._pos = // should use actual width/height below\r\n                    [(browserWidth / 2) - 100 + scrollX, (browserHeight / 2) - 150 + scrollY];\r\n            }\r\n\r\n            // move input on screen for focus, but hidden behind dialog\r\n            this._dialogInput.css(\"left\", (this._pos[0] + 20) + \"px\").css(\"top\", this._pos[1] + \"px\");\r\n            inst.settings.onSelect = onSelect;\r\n            this._inDialog = true;\r\n            this.dpDiv.addClass(this._dialogClass);\r\n            this._showDatepicker(this._dialogInput[0]);\r\n            if ($.blockUI) {\r\n                $.blockUI(this.dpDiv);\r\n            }\r\n            $.data(this._dialogInput[0], \"datepicker\", inst);\r\n            return this;\r\n        },\r\n\r\n        /* Detach a datepicker from its control.\r\n         * @param  target\telement - the target input field or division or span\r\n         */\r\n        _destroyDatepicker: function (target) {\r\n            var nodeName,\r\n                $target = $(target),\r\n                inst = $.data(target, \"datepicker\");\r\n\r\n            if (!$target.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n\r\n            nodeName = target.nodeName.toLowerCase();\r\n            $.removeData(target, \"datepicker\");\r\n            if (nodeName === \"input\") {\r\n                inst.append.remove();\r\n                inst.trigger.remove();\r\n                $target.removeClass(this.markerClassName).\r\n                    unbind(\"focus\", this._showDatepicker).\r\n                    unbind(\"keydown\", this._doKeyDown).\r\n                    unbind(\"keypress\", this._doKeyPress).\r\n                    unbind(\"keyup\", this._doKeyUp);\r\n            } else if (nodeName === \"div\" || nodeName === \"span\") {\r\n                $target.removeClass(this.markerClassName).empty();\r\n            }\r\n\r\n            if (datepicker_instActive === inst) {\r\n                datepicker_instActive = null;\r\n            }\r\n        },\r\n\r\n        /* Enable the date picker to a jQuery selection.\r\n         * @param  target\telement - the target input field or division or span\r\n         */\r\n        _enableDatepicker: function (target) {\r\n            var nodeName, inline,\r\n                $target = $(target),\r\n                inst = $.data(target, \"datepicker\");\r\n\r\n            if (!$target.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n\r\n            nodeName = target.nodeName.toLowerCase();\r\n            if (nodeName === \"input\") {\r\n                target.disabled = false;\r\n                inst.trigger.filter(\"button\").\r\n                    each(function () { this.disabled = false; }).end().\r\n                    filter(\"img\").css({ opacity: \"1.0\", cursor: \"\" });\r\n            } else if (nodeName === \"div\" || nodeName === \"span\") {\r\n                inline = $target.children(\".\" + this._inlineClass);\r\n                inline.children().removeClass(\"ui-state-disabled\");\r\n                inline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\r\n                    prop(\"disabled\", false);\r\n            }\r\n            this._disabledInputs = $.map(this._disabledInputs,\r\n                function (value) { return (value === target ? null : value); }); // delete entry\r\n        },\r\n\r\n        /* Disable the date picker to a jQuery selection.\r\n         * @param  target\telement - the target input field or division or span\r\n         */\r\n        _disableDatepicker: function (target) {\r\n            var nodeName, inline,\r\n                $target = $(target),\r\n                inst = $.data(target, \"datepicker\");\r\n\r\n            if (!$target.hasClass(this.markerClassName)) {\r\n                return;\r\n            }\r\n\r\n            nodeName = target.nodeName.toLowerCase();\r\n            if (nodeName === \"input\") {\r\n                target.disabled = true;\r\n                inst.trigger.filter(\"button\").\r\n                    each(function () { this.disabled = true; }).end().\r\n                    filter(\"img\").css({ opacity: \"0.5\", cursor: \"default\" });\r\n            } else if (nodeName === \"div\" || nodeName === \"span\") {\r\n                inline = $target.children(\".\" + this._inlineClass);\r\n                inline.children().addClass(\"ui-state-disabled\");\r\n                inline.find(\"select.ui-datepicker-month, select.ui-datepicker-year\").\r\n                    prop(\"disabled\", true);\r\n            }\r\n            this._disabledInputs = $.map(this._disabledInputs,\r\n                function (value) { return (value === target ? null : value); }); // delete entry\r\n            this._disabledInputs[this._disabledInputs.length] = target;\r\n        },\r\n\r\n        /* Is the first field in a jQuery collection disabled as a datepicker?\r\n         * @param  target\telement - the target input field or division or span\r\n         * @return boolean - true if disabled, false if enabled\r\n         */\r\n        _isDisabledDatepicker: function (target) {\r\n            if (!target) {\r\n                return false;\r\n            }\r\n            for (var i = 0; i < this._disabledInputs.length; i++) {\r\n                if (this._disabledInputs[i] === target) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        },\r\n\r\n        /* Retrieve the instance data for the target control.\r\n         * @param  target  element - the target input field or division or span\r\n         * @return  object - the associated instance data\r\n         * @throws  error if a jQuery problem getting data\r\n         */\r\n        _getInst: function (target) {\r\n            try {\r\n                return $.data(target, \"datepicker\");\r\n            }\r\n            catch (err) {\r\n                throw \"Missing instance data for this datepicker\";\r\n            }\r\n        },\r\n\r\n        /* Update or retrieve the settings for a date picker attached to an input field or division.\r\n         * @param  target  element - the target input field or division or span\r\n         * @param  name\tobject - the new settings to update or\r\n         *\t\t\t\tstring - the name of the setting to change or retrieve,\r\n         *\t\t\t\twhen retrieving also \"all\" for all instance settings or\r\n         *\t\t\t\t\"defaults\" for all global defaults\r\n         * @param  value   any - the new value for the setting\r\n         *\t\t\t\t(omit if above is an object or to retrieve a value)\r\n         */\r\n        _optionDatepicker: function (target, name, value) {\r\n            var settings, date, minDate, maxDate,\r\n                inst = this._getInst(target);\r\n\r\n            if (arguments.length === 2 && typeof name === \"string\") {\r\n                return (name === \"defaults\" ? $.extend({}, $.datepicker._defaults) :\r\n                    (inst ? (name === \"all\" ? $.extend({}, inst.settings) :\r\n                        this._get(inst, name)) : null));\r\n            }\r\n\r\n            settings = name || {};\r\n            if (typeof name === \"string\") {\r\n                settings = {};\r\n                settings[name] = value;\r\n            }\r\n\r\n            if (inst) {\r\n                if (this._curInst === inst) {\r\n                    this._hideDatepicker();\r\n                }\r\n\r\n                date = this._getDateDatepicker(target, true);\r\n                minDate = this._getMinMaxDate(inst, \"min\");\r\n                maxDate = this._getMinMaxDate(inst, \"max\");\r\n                datepicker_extendRemove(inst.settings, settings);\r\n                // reformat the old minDate/maxDate values if dateFormat changes and a new minDate/maxDate isn't provided\r\n                if (minDate !== null && settings.dateFormat !== undefined && settings.minDate === undefined) {\r\n                    inst.settings.minDate = this._formatDate(inst, minDate);\r\n                }\r\n                if (maxDate !== null && settings.dateFormat !== undefined && settings.maxDate === undefined) {\r\n                    inst.settings.maxDate = this._formatDate(inst, maxDate);\r\n                }\r\n                if (\"disabled\" in settings) {\r\n                    if (settings.disabled) {\r\n                        this._disableDatepicker(target);\r\n                    } else {\r\n                        this._enableDatepicker(target);\r\n                    }\r\n                }\r\n                this._attachments($(target), inst);\r\n                this._autoSize(inst);\r\n                this._setDate(inst, date);\r\n                this._updateAlternate(inst);\r\n                this._updateDatepicker(inst);\r\n            }\r\n        },\r\n\r\n        // change method deprecated\r\n        _changeDatepicker: function (target, name, value) {\r\n            this._optionDatepicker(target, name, value);\r\n        },\r\n\r\n        /* Redraw the date picker attached to an input field or division.\r\n         * @param  target  element - the target input field or division or span\r\n         */\r\n        _refreshDatepicker: function (target) {\r\n            var inst = this._getInst(target);\r\n            if (inst) {\r\n                this._updateDatepicker(inst);\r\n            }\r\n        },\r\n\r\n        /* Set the dates for a jQuery selection.\r\n         * @param  target element - the target input field or division or span\r\n         * @param  date\tDate - the new date\r\n         */\r\n        _setDateDatepicker: function (target, date) {\r\n            var inst = this._getInst(target);\r\n            if (inst) {\r\n                this._setDate(inst, date);\r\n                this._updateDatepicker(inst);\r\n                this._updateAlternate(inst);\r\n            }\r\n        },\r\n\r\n        /* Get the date(s) for the first entry in a jQuery selection.\r\n         * @param  target element - the target input field or division or span\r\n         * @param  noDefault boolean - true if no default date is to be used\r\n         * @return Date - the current date\r\n         */\r\n        _getDateDatepicker: function (target, noDefault) {\r\n            var inst = this._getInst(target);\r\n            if (inst && !inst.inline) {\r\n                this._setDateFromField(inst, noDefault);\r\n            }\r\n            return (inst ? this._getDate(inst) : null);\r\n        },\r\n\r\n        /* Handle keystrokes. */\r\n        _doKeyDown: function (event) {\r\n            var onSelect, dateStr, sel,\r\n                inst = $.datepicker._getInst(event.target),\r\n                handled = true,\r\n                isRTL = inst.dpDiv.is(\".ui-datepicker-rtl\");\r\n\r\n            inst._keyEvent = true;\r\n            if ($.datepicker._datepickerShowing) {\r\n                switch (event.keyCode) {\r\n                    case 9: $.datepicker._hideDatepicker();\r\n                        handled = false;\r\n                        break; // hide on tab out\r\n                    case 13: sel = $(\"td.\" + $.datepicker._dayOverClass + \":not(.\" +\r\n                        $.datepicker._currentClass + \")\", inst.dpDiv);\r\n                        if (sel[0]) {\r\n                            $.datepicker._selectDay(event.target, inst.selectedMonth, inst.selectedYear, sel[0]);\r\n                        }\r\n\r\n                        onSelect = $.datepicker._get(inst, \"onSelect\");\r\n                        if (onSelect) {\r\n                            dateStr = $.datepicker._formatDate(inst);\r\n\r\n                            // trigger custom callback\r\n                            onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);\r\n                        } else {\r\n                            $.datepicker._hideDatepicker();\r\n                        }\r\n\r\n                        return false; // don't submit the form\r\n                    case 27: $.datepicker._hideDatepicker();\r\n                        break; // hide on escape\r\n                    case 33: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n                        -$.datepicker._get(inst, \"stepBigMonths\") :\r\n                        -$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n                        break; // previous month/year on page up/+ ctrl\r\n                    case 34: $.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n                        +$.datepicker._get(inst, \"stepBigMonths\") :\r\n                        +$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n                        break; // next month/year on page down/+ ctrl\r\n                    case 35: if (event.ctrlKey || event.metaKey) {\r\n                        $.datepicker._clearDate(event.target);\r\n                    }\r\n                        handled = event.ctrlKey || event.metaKey;\r\n                        break; // clear on ctrl or command +end\r\n                    case 36: if (event.ctrlKey || event.metaKey) {\r\n                        $.datepicker._gotoToday(event.target);\r\n                    }\r\n                        handled = event.ctrlKey || event.metaKey;\r\n                        break; // current on ctrl or command +home\r\n                    case 37: if (event.ctrlKey || event.metaKey) {\r\n                        $.datepicker._adjustDate(event.target, (isRTL ? +1 : -1), \"D\");\r\n                    }\r\n                        handled = event.ctrlKey || event.metaKey;\r\n                        // -1 day on ctrl or command +left\r\n                        if (event.originalEvent.altKey) {\r\n                            $.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n                                -$.datepicker._get(inst, \"stepBigMonths\") :\r\n                                -$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n                        }\r\n                        // next month/year on alt +left on Mac\r\n                        break;\r\n                    case 38: if (event.ctrlKey || event.metaKey) {\r\n                        $.datepicker._adjustDate(event.target, -7, \"D\");\r\n                    }\r\n                        handled = event.ctrlKey || event.metaKey;\r\n                        break; // -1 week on ctrl or command +up\r\n                    case 39: if (event.ctrlKey || event.metaKey) {\r\n                        $.datepicker._adjustDate(event.target, (isRTL ? -1 : +1), \"D\");\r\n                    }\r\n                        handled = event.ctrlKey || event.metaKey;\r\n                        // +1 day on ctrl or command +right\r\n                        if (event.originalEvent.altKey) {\r\n                            $.datepicker._adjustDate(event.target, (event.ctrlKey ?\r\n                                +$.datepicker._get(inst, \"stepBigMonths\") :\r\n                                +$.datepicker._get(inst, \"stepMonths\")), \"M\");\r\n                        }\r\n                        // next month/year on alt +right\r\n                        break;\r\n                    case 40: if (event.ctrlKey || event.metaKey) {\r\n                        $.datepicker._adjustDate(event.target, +7, \"D\");\r\n                    }\r\n                        handled = event.ctrlKey || event.metaKey;\r\n                        break; // +1 week on ctrl or command +down\r\n                    default: handled = false;\r\n                }\r\n            } else if (event.keyCode === 36 && event.ctrlKey) { // display the date picker on ctrl+home\r\n                $.datepicker._showDatepicker(this);\r\n            } else {\r\n                handled = false;\r\n            }\r\n\r\n            if (handled) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n            }\r\n        },\r\n\r\n        /* Filter entered characters - based on date format. */\r\n        _doKeyPress: function (event) {\r\n            var chars, chr,\r\n                inst = $.datepicker._getInst(event.target);\r\n\r\n            if ($.datepicker._get(inst, \"constrainInput\")) {\r\n                chars = $.datepicker._possibleChars($.datepicker._get(inst, \"dateFormat\"));\r\n                chr = String.fromCharCode(event.charCode == null ? event.keyCode : event.charCode);\r\n                return event.ctrlKey || event.metaKey || (chr < \" \" || !chars || chars.indexOf(chr) > -1);\r\n            }\r\n        },\r\n\r\n        /* Synchronise manual entry and field/alternate field. */\r\n        _doKeyUp: function (event) {\r\n            var date,\r\n                inst = $.datepicker._getInst(event.target);\r\n\r\n            if (inst.input.val() !== inst.lastVal) {\r\n                try {\r\n                    date = $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\r\n                        (inst.input ? inst.input.val() : null),\r\n                        $.datepicker._getFormatConfig(inst));\r\n\r\n                    if (date) { // only if valid\r\n                        $.datepicker._setDateFromField(inst);\r\n                        $.datepicker._updateAlternate(inst);\r\n                        $.datepicker._updateDatepicker(inst);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                }\r\n            }\r\n            return true;\r\n        },\r\n\r\n        /* Pop-up the date picker for a given input field.\r\n         * If false returned from beforeShow event handler do not show.\r\n         * @param  input  element - the input field attached to the date picker or\r\n         *\t\t\t\t\tevent - if triggered by focus\r\n         */\r\n        _showDatepicker: function (input) {\r\n            input = input.target || input;\r\n            if (input.nodeName.toLowerCase() !== \"input\") { // find from button/image trigger\r\n                input = $(\"input\", input.parentNode)[0];\r\n            }\r\n\r\n            if ($.datepicker._isDisabledDatepicker(input) || $.datepicker._lastInput === input) { // already here\r\n                return;\r\n            }\r\n\r\n            var inst, beforeShow, beforeShowSettings, isFixed,\r\n                offset, showAnim, duration;\r\n\r\n            inst = $.datepicker._getInst(input);\r\n            if ($.datepicker._curInst && $.datepicker._curInst !== inst) {\r\n                $.datepicker._curInst.dpDiv.stop(true, true);\r\n                if (inst && $.datepicker._datepickerShowing) {\r\n                    $.datepicker._hideDatepicker($.datepicker._curInst.input[0]);\r\n                }\r\n            }\r\n\r\n            beforeShow = $.datepicker._get(inst, \"beforeShow\");\r\n            beforeShowSettings = beforeShow ? beforeShow.apply(input, [input, inst]) : {};\r\n            if (beforeShowSettings === false) {\r\n                return;\r\n            }\r\n            datepicker_extendRemove(inst.settings, beforeShowSettings);\r\n\r\n            inst.lastVal = null;\r\n            $.datepicker._lastInput = input;\r\n            $.datepicker._setDateFromField(inst);\r\n\r\n            if ($.datepicker._inDialog) { // hide cursor\r\n                input.value = \"\";\r\n            }\r\n            if (!$.datepicker._pos) { // position below input\r\n                $.datepicker._pos = $.datepicker._findPos(input);\r\n                $.datepicker._pos[1] += input.offsetHeight; // add the height\r\n            }\r\n\r\n            isFixed = false;\r\n            $(input).parents().each(function () {\r\n                isFixed |= $(this).css(\"position\") === \"fixed\";\r\n                return !isFixed;\r\n            });\r\n\r\n            offset = { left: $.datepicker._pos[0], top: $.datepicker._pos[1] };\r\n            $.datepicker._pos = null;\r\n            //to avoid flashes on Firefox\r\n            inst.dpDiv.empty();\r\n            // determine sizing offscreen\r\n            inst.dpDiv.css({ position: \"absolute\", display: \"block\", top: \"-1000px\" });\r\n            $.datepicker._updateDatepicker(inst);\r\n            // fix width for dynamic number of date pickers\r\n            // and adjust position before showing\r\n            offset = $.datepicker._checkOffset(inst, offset, isFixed);\r\n            inst.dpDiv.css({\r\n                position: ($.datepicker._inDialog && $.blockUI ?\r\n                    \"static\" : (isFixed ? \"fixed\" : \"absolute\")), display: \"none\",\r\n                left: offset.left + \"px\", top: offset.top + \"px\"\r\n            });\r\n\r\n            if (!inst.inline) {\r\n                showAnim = $.datepicker._get(inst, \"showAnim\");\r\n                duration = $.datepicker._get(inst, \"duration\");\r\n                inst.dpDiv.css(\"z-index\", datepicker_getZindex($(input)) + 1);\r\n                $.datepicker._datepickerShowing = true;\r\n\r\n                if ($.effects && $.effects.effect[showAnim]) {\r\n                    inst.dpDiv.show(showAnim, $.datepicker._get(inst, \"showOptions\"), duration);\r\n                } else {\r\n                    inst.dpDiv[showAnim || \"show\"](showAnim ? duration : null);\r\n                }\r\n\r\n                if ($.datepicker._shouldFocusInput(inst)) {\r\n                    inst.input.focus();\r\n                }\r\n\r\n                $.datepicker._curInst = inst;\r\n            }\r\n        },\r\n\r\n        /* Generate the date picker content. */\r\n        _updateDatepicker: function (inst) {\r\n            this.maxRows = 4; //Reset the max number of rows being displayed (see #7043)\r\n            datepicker_instActive = inst; // for delegate hover events\r\n            inst.dpDiv.empty().append(this._generateHTML(inst));\r\n            this._attachHandlers(inst);\r\n\r\n            var origyearshtml,\r\n                numMonths = this._getNumberOfMonths(inst),\r\n                cols = numMonths[1],\r\n                width = 17,\r\n                activeCell = inst.dpDiv.find(\".\" + this._dayOverClass + \" a\");\r\n\r\n            if (activeCell.length > 0) {\r\n                datepicker_handleMouseover.apply(activeCell.get(0));\r\n            }\r\n\r\n            inst.dpDiv.removeClass(\"ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4\").width(\"\");\r\n            if (cols > 1) {\r\n                inst.dpDiv.addClass(\"ui-datepicker-multi-\" + cols).css(\"width\", (width * cols) + \"em\");\r\n            }\r\n            inst.dpDiv[(numMonths[0] !== 1 || numMonths[1] !== 1 ? \"add\" : \"remove\") +\r\n                \"Class\"](\"ui-datepicker-multi\");\r\n            inst.dpDiv[(this._get(inst, \"isRTL\") ? \"add\" : \"remove\") +\r\n                \"Class\"](\"ui-datepicker-rtl\");\r\n\r\n            if (inst === $.datepicker._curInst && $.datepicker._datepickerShowing && $.datepicker._shouldFocusInput(inst)) {\r\n                inst.input.focus();\r\n            }\r\n\r\n            // deffered render of the years select (to avoid flashes on Firefox)\r\n            if (inst.yearshtml) {\r\n                origyearshtml = inst.yearshtml;\r\n                setTimeout(function () {\r\n                    //assure that inst.yearshtml didn't change.\r\n                    if (origyearshtml === inst.yearshtml && inst.yearshtml) {\r\n                        inst.dpDiv.find(\"select.ui-datepicker-year:first\").replaceWith(inst.yearshtml);\r\n                    }\r\n                    origyearshtml = inst.yearshtml = null;\r\n                }, 0);\r\n            }\r\n        },\r\n\r\n        // #6694 - don't focus the input if it's already focused\r\n        // this breaks the change event in IE\r\n        // Support: IE and jQuery <1.9\r\n        _shouldFocusInput: function (inst) {\r\n            return inst.input && inst.input.is(\":visible\") && !inst.input.is(\":disabled\") && !inst.input.is(\":focus\");\r\n        },\r\n\r\n        /* Check positioning to remain on screen. */\r\n        _checkOffset: function (inst, offset, isFixed) {\r\n            var dpWidth = inst.dpDiv.outerWidth(),\r\n                dpHeight = inst.dpDiv.outerHeight(),\r\n                inputWidth = inst.input ? inst.input.outerWidth() : 0,\r\n                inputHeight = inst.input ? inst.input.outerHeight() : 0,\r\n                viewWidth = document.documentElement.clientWidth + (isFixed ? 0 : $(document).scrollLeft()),\r\n                viewHeight = document.documentElement.clientHeight + (isFixed ? 0 : $(document).scrollTop());\r\n\r\n            offset.left -= (this._get(inst, \"isRTL\") ? (dpWidth - inputWidth) : 0);\r\n            offset.left -= (isFixed && offset.left === inst.input.offset().left) ? $(document).scrollLeft() : 0;\r\n            offset.top -= (isFixed && offset.top === (inst.input.offset().top + inputHeight)) ? $(document).scrollTop() : 0;\r\n\r\n            // now check if datepicker is showing outside window viewport - move to a better place if so.\r\n            offset.left -= Math.min(offset.left, (offset.left + dpWidth > viewWidth && viewWidth > dpWidth) ?\r\n                Math.abs(offset.left + dpWidth - viewWidth) : 0);\r\n            offset.top -= Math.min(offset.top, (offset.top + dpHeight > viewHeight && viewHeight > dpHeight) ?\r\n                Math.abs(dpHeight + inputHeight) : 0);\r\n\r\n            return offset;\r\n        },\r\n\r\n        /* Find an object's position on the screen. */\r\n        _findPos: function (obj) {\r\n            var position,\r\n                inst = this._getInst(obj),\r\n                isRTL = this._get(inst, \"isRTL\");\r\n\r\n            while (obj && (obj.type === \"hidden\" || obj.nodeType !== 1 || $.expr.filters.hidden(obj))) {\r\n                obj = obj[isRTL ? \"previousSibling\" : \"nextSibling\"];\r\n            }\r\n\r\n            position = $(obj).offset();\r\n            return [position.left, position.top];\r\n        },\r\n\r\n        /* Hide the date picker from view.\r\n         * @param  input  element - the input field attached to the date picker\r\n         */\r\n        _hideDatepicker: function (input) {\r\n            var showAnim, duration, postProcess, onClose,\r\n                inst = this._curInst;\r\n\r\n            if (!inst || (input && inst !== $.data(input, \"datepicker\"))) {\r\n                return;\r\n            }\r\n\r\n            if (this._datepickerShowing) {\r\n                showAnim = this._get(inst, \"showAnim\");\r\n                duration = this._get(inst, \"duration\");\r\n                postProcess = function () {\r\n                    $.datepicker._tidyDialog(inst);\r\n                };\r\n\r\n                // DEPRECATED: after BC for 1.8.x $.effects[ showAnim ] is not needed\r\n                if ($.effects && ($.effects.effect[showAnim] || $.effects[showAnim])) {\r\n                    inst.dpDiv.hide(showAnim, $.datepicker._get(inst, \"showOptions\"), duration, postProcess);\r\n                } else {\r\n                    inst.dpDiv[(showAnim === \"slideDown\" ? \"slideUp\" :\r\n                        (showAnim === \"fadeIn\" ? \"fadeOut\" : \"hide\"))]((showAnim ? duration : null), postProcess);\r\n                }\r\n\r\n                if (!showAnim) {\r\n                    postProcess();\r\n                }\r\n                this._datepickerShowing = false;\r\n\r\n                onClose = this._get(inst, \"onClose\");\r\n                if (onClose) {\r\n                    onClose.apply((inst.input ? inst.input[0] : null), [(inst.input ? inst.input.val() : \"\"), inst]);\r\n                }\r\n\r\n                this._lastInput = null;\r\n                if (this._inDialog) {\r\n                    this._dialogInput.css({ position: \"absolute\", left: \"0\", top: \"-100px\" });\r\n                    if ($.blockUI) {\r\n                        $.unblockUI();\r\n                        $(\"body\").append(this.dpDiv);\r\n                    }\r\n                }\r\n                this._inDialog = false;\r\n            }\r\n        },\r\n\r\n        /* Tidy up after a dialog display. */\r\n        _tidyDialog: function (inst) {\r\n            inst.dpDiv.removeClass(this._dialogClass).unbind(\".ui-datepicker-calendar\");\r\n        },\r\n\r\n        /* Close date picker if clicked elsewhere. */\r\n        _checkExternalClick: function (event) {\r\n            if (!$.datepicker._curInst) {\r\n                return;\r\n            }\r\n\r\n            var $target = $(event.target),\r\n                inst = $.datepicker._getInst($target[0]);\r\n\r\n            if ((($target[0].id !== $.datepicker._mainDivId &&\r\n                $target.parents(\"#\" + $.datepicker._mainDivId).length === 0 &&\r\n                !$target.hasClass($.datepicker.markerClassName) &&\r\n                !$target.closest(\".\" + $.datepicker._triggerClass).length &&\r\n                $.datepicker._datepickerShowing && !($.datepicker._inDialog && $.blockUI))) ||\r\n                ($target.hasClass($.datepicker.markerClassName) && $.datepicker._curInst !== inst)) {\r\n                $.datepicker._hideDatepicker();\r\n            }\r\n        },\r\n\r\n        /* Adjust one of the date sub-fields. */\r\n        _adjustDate: function (id, offset, period) {\r\n            var target = $(id),\r\n                inst = this._getInst(target[0]);\r\n\r\n            if (this._isDisabledDatepicker(target[0])) {\r\n                return;\r\n            }\r\n            this._adjustInstDate(inst, offset +\r\n                (period === \"M\" ? this._get(inst, \"showCurrentAtPos\") : 0), // undo positioning\r\n                period);\r\n            this._updateDatepicker(inst);\r\n        },\r\n\r\n        /* Action for current link. */\r\n        _gotoToday: function (id) {\r\n            var date,\r\n                target = $(id),\r\n                inst = this._getInst(target[0]);\r\n\r\n            if (this._get(inst, \"gotoCurrent\") && inst.currentDay) {\r\n                inst.selectedDay = inst.currentDay;\r\n                inst.drawMonth = inst.selectedMonth = inst.currentMonth;\r\n                inst.drawYear = inst.selectedYear = inst.currentYear;\r\n            } else {\r\n                date = new Date();\r\n                inst.selectedDay = date.getDate();\r\n                inst.drawMonth = inst.selectedMonth = date.getMonth();\r\n                inst.drawYear = inst.selectedYear = date.getFullYear();\r\n            }\r\n            this._notifyChange(inst);\r\n            this._adjustDate(target);\r\n        },\r\n\r\n        /* Action for selecting a new month/year. */\r\n        _selectMonthYear: function (id, select, period) {\r\n            var target = $(id),\r\n                inst = this._getInst(target[0]);\r\n\r\n            inst[\"selected\" + (period === \"M\" ? \"Month\" : \"Year\")] =\r\n                inst[\"draw\" + (period === \"M\" ? \"Month\" : \"Year\")] =\r\n                parseInt(select.options[select.selectedIndex].value, 10);\r\n\r\n            this._notifyChange(inst);\r\n            this._adjustDate(target);\r\n        },\r\n\r\n        /* Action for selecting a day. */\r\n        _selectDay: function (id, month, year, td) {\r\n            var inst,\r\n                target = $(id);\r\n\r\n            if ($(td).hasClass(this._unselectableClass) || this._isDisabledDatepicker(target[0])) {\r\n                return;\r\n            }\r\n\r\n            inst = this._getInst(target[0]);\r\n            inst.selectedDay = inst.currentDay = $(\"a\", td).html();\r\n            inst.selectedMonth = inst.currentMonth = month;\r\n            inst.selectedYear = inst.currentYear = year;\r\n            this._selectDate(id, this._formatDate(inst,\r\n                inst.currentDay, inst.currentMonth, inst.currentYear));\r\n        },\r\n\r\n        /* Erase the input field and hide the date picker. */\r\n        _clearDate: function (id) {\r\n            var target = $(id);\r\n            this._selectDate(target, \"\");\r\n        },\r\n\r\n        /* Update the input field with the selected date. */\r\n        _selectDate: function (id, dateStr) {\r\n            var onSelect,\r\n                target = $(id),\r\n                inst = this._getInst(target[0]);\r\n\r\n            dateStr = (dateStr != null ? dateStr : this._formatDate(inst));\r\n            if (inst.input) {\r\n                inst.input.val(dateStr);\r\n            }\r\n            this._updateAlternate(inst);\r\n\r\n            onSelect = this._get(inst, \"onSelect\");\r\n            if (onSelect) {\r\n                onSelect.apply((inst.input ? inst.input[0] : null), [dateStr, inst]);  // trigger custom callback\r\n            } else if (inst.input) {\r\n                inst.input.trigger(\"change\"); // fire the change event\r\n            }\r\n\r\n            if (inst.inline) {\r\n                this._updateDatepicker(inst);\r\n            } else {\r\n                this._hideDatepicker();\r\n                this._lastInput = inst.input[0];\r\n                if (typeof (inst.input[0]) !== \"object\") {\r\n                    inst.input.focus(); // restore focus\r\n                }\r\n                this._lastInput = null;\r\n            }\r\n        },\r\n\r\n        /* Update any alternate field to synchronise with the main field. */\r\n        _updateAlternate: function (inst) {\r\n            var altFormat, date, dateStr,\r\n                altField = this._get(inst, \"altField\");\r\n\r\n            if (altField) { // update alternate field too\r\n                altFormat = this._get(inst, \"altFormat\") || this._get(inst, \"dateFormat\");\r\n                date = this._getDate(inst);\r\n                dateStr = this.formatDate(altFormat, date, this._getFormatConfig(inst));\r\n                $(altField).each(function () { $(this).val(dateStr); });\r\n            }\r\n        },\r\n\r\n        /* Set as beforeShowDay function to prevent selection of weekends.\r\n         * @param  date  Date - the date to customise\r\n         * @return [boolean, string] - is this date selectable?, what is its CSS class?\r\n         */\r\n        noWeekends: function (date) {\r\n            var day = date.getDay();\r\n            return [(day > 0 && day < 6), \"\"];\r\n        },\r\n\r\n        /* Set as calculateWeek to determine the week of the year based on the ISO 8601 definition.\r\n         * @param  date  Date - the date to get the week for\r\n         * @return  number - the number of the week within the year that contains this date\r\n         */\r\n        iso8601Week: function (date) {\r\n            var time,\r\n                checkDate = new Date(date.getTime());\r\n\r\n            // Find Thursday of this week starting on Monday\r\n            checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\r\n\r\n            time = checkDate.getTime();\r\n            checkDate.setMonth(0); // Compare with Jan 1\r\n            checkDate.setDate(1);\r\n            return Math.floor(Math.round((time - checkDate) / 86400000) / 7) + 1;\r\n        },\r\n\r\n        /* Parse a string value into a date object.\r\n         * See formatDate below for the possible formats.\r\n         *\r\n         * @param  format string - the expected format of the date\r\n         * @param  value string - the date in the above format\r\n         * @param  settings Object - attributes include:\r\n         *\t\t\t\t\tshortYearCutoff  number - the cutoff year for determining the century (optional)\r\n         *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\r\n         *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\r\n         *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\r\n         *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\r\n         * @return  Date - the extracted date value or null if value is blank\r\n         */\r\n        parseDate: function (format, value, settings) {\r\n            if (format == null || value == null) {\r\n                throw \"Invalid arguments\";\r\n            }\r\n\r\n            value = (typeof value === \"object\" ? value.toString() : value + \"\");\r\n            if (value === \"\") {\r\n                return null;\r\n            }\r\n\r\n            var iFormat, dim, extra,\r\n                iValue = 0,\r\n                shortYearCutoffTemp = (settings ? settings.shortYearCutoff : null) || this._defaults.shortYearCutoff,\r\n                shortYearCutoff = (typeof shortYearCutoffTemp !== \"string\" ? shortYearCutoffTemp :\r\n                    new Date().getFullYear() % 100 + parseInt(shortYearCutoffTemp, 10)),\r\n                dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\r\n                dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\r\n                monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\r\n                monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\r\n                year = -1,\r\n                month = -1,\r\n                day = -1,\r\n                doy = -1,\r\n                literal = false,\r\n                date,\r\n                // Check whether a format character is doubled\r\n                lookAhead = function (match) {\r\n                    var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\r\n                    if (matches) {\r\n                        iFormat++;\r\n                    }\r\n                    return matches;\r\n                },\r\n                // Extract a number from the string value\r\n                getNumber = function (match) {\r\n                    var isDoubled = lookAhead(match),\r\n                        size = (match === \"@\" ? 14 : (match === \"!\" ? 20 :\r\n                            (match === \"y\" && isDoubled ? 4 : (match === \"o\" ? 3 : 2)))),\r\n                        minSize = (match === \"y\" ? size : 1),\r\n                        digits = new RegExp(\"^\\\\d{\" + minSize + \",\" + size + \"}\"),\r\n                        num = value.substring(iValue).match(digits);\r\n                    if (!num) {\r\n                        throw \"Missing number at position \" + iValue;\r\n                    }\r\n                    iValue += num[0].length;\r\n                    return parseInt(num[0], 10);\r\n                },\r\n                // Extract a name from the string value and convert to an index\r\n                getName = function (match, shortNames, longNames) {\r\n                    var index = -1,\r\n                        names = $.map(lookAhead(match) ? longNames : shortNames, function (v, k) {\r\n                            return [[k, v]];\r\n                        }).sort(function (a, b) {\r\n                            return -(a[1].length - b[1].length);\r\n                        });\r\n\r\n                    $.each(names, function (i, pair) {\r\n                        var name = pair[1];\r\n                        if (value.substr(iValue, name.length).toLowerCase() === name.toLowerCase()) {\r\n                            index = pair[0];\r\n                            iValue += name.length;\r\n                            return false;\r\n                        }\r\n                    });\r\n                    if (index !== -1) {\r\n                        return index + 1;\r\n                    } else {\r\n                        throw \"Unknown name at position \" + iValue;\r\n                    }\r\n                },\r\n                // Confirm that a literal character matches the string value\r\n                checkLiteral = function () {\r\n                    if (value.charAt(iValue) !== format.charAt(iFormat)) {\r\n                        throw \"Unexpected literal at position \" + iValue;\r\n                    }\r\n                    iValue++;\r\n                };\r\n\r\n            for (iFormat = 0; iFormat < format.length; iFormat++) {\r\n                if (literal) {\r\n                    if (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\r\n                        literal = false;\r\n                    } else {\r\n                        checkLiteral();\r\n                    }\r\n                } else {\r\n                    switch (format.charAt(iFormat)) {\r\n                        case \"d\":\r\n                            day = getNumber(\"d\");\r\n                            break;\r\n                        case \"D\":\r\n                            getName(\"D\", dayNamesShort, dayNames);\r\n                            break;\r\n                        case \"o\":\r\n                            doy = getNumber(\"o\");\r\n                            break;\r\n                        case \"m\":\r\n                            month = getNumber(\"m\");\r\n                            break;\r\n                        case \"M\":\r\n                            month = getName(\"M\", monthNamesShort, monthNames);\r\n                            break;\r\n                        case \"y\":\r\n                            year = getNumber(\"y\");\r\n                            break;\r\n                        case \"@\":\r\n                            date = new Date(getNumber(\"@\"));\r\n                            year = date.getFullYear();\r\n                            month = date.getMonth() + 1;\r\n                            day = date.getDate();\r\n                            break;\r\n                        case \"!\":\r\n                            date = new Date((getNumber(\"!\") - this._ticksTo1970) / 10000);\r\n                            year = date.getFullYear();\r\n                            month = date.getMonth() + 1;\r\n                            day = date.getDate();\r\n                            break;\r\n                        case \"'\":\r\n                            if (lookAhead(\"'\")) {\r\n                                checkLiteral();\r\n                            } else {\r\n                                literal = true;\r\n                            }\r\n                            break;\r\n                        default:\r\n                            checkLiteral();\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (iValue < value.length) {\r\n                extra = value.substr(iValue);\r\n                if (!/^\\s+/.test(extra)) {\r\n                    throw \"Extra/unparsed characters found in date: \" + extra;\r\n                }\r\n            }\r\n\r\n            if (year === -1) {\r\n                year = new Date().getFullYear();\r\n            } else if (year < 100) {\r\n                year += new Date().getFullYear() - new Date().getFullYear() % 100 +\r\n                    (year <= shortYearCutoff ? 0 : -100);\r\n            }\r\n\r\n            if (doy > -1) {\r\n                month = 1;\r\n                day = doy;\r\n                do {\r\n                    dim = this._getDaysInMonth(year, month - 1);\r\n                    if (day <= dim) {\r\n                        break;\r\n                    }\r\n                    month++;\r\n                    day -= dim;\r\n                } while (true);\r\n            }\r\n\r\n            date = this._daylightSavingAdjust(new Date(year, month - 1, day));\r\n            if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {\r\n                throw \"Invalid date\"; // E.g. 31/02/00\r\n            }\r\n            return date;\r\n        },\r\n\r\n        /* Standard date formats. */\r\n        ATOM: \"yy-mm-dd\", // RFC 3339 (ISO 8601)\r\n        COOKIE: \"D, dd M yy\",\r\n        ISO_8601: \"yy-mm-dd\",\r\n        RFC_822: \"D, d M y\",\r\n        RFC_850: \"DD, dd-M-y\",\r\n        RFC_1036: \"D, d M y\",\r\n        RFC_1123: \"D, d M yy\",\r\n        RFC_2822: \"D, d M yy\",\r\n        RSS: \"D, d M y\", // RFC 822\r\n        TICKS: \"!\",\r\n        TIMESTAMP: \"@\",\r\n        W3C: \"yy-mm-dd\", // ISO 8601\r\n\r\n        _ticksTo1970: (((1970 - 1) * 365 + Math.floor(1970 / 4) - Math.floor(1970 / 100) +\r\n            Math.floor(1970 / 400)) * 24 * 60 * 60 * 10000000),\r\n\r\n        /* Format a date object into a string value.\r\n         * The format can be combinations of the following:\r\n         * d  - day of month (no leading zero)\r\n         * dd - day of month (two digit)\r\n         * o  - day of year (no leading zeros)\r\n         * oo - day of year (three digit)\r\n         * D  - day name short\r\n         * DD - day name long\r\n         * m  - month of year (no leading zero)\r\n         * mm - month of year (two digit)\r\n         * M  - month name short\r\n         * MM - month name long\r\n         * y  - year (two digit)\r\n         * yy - year (four digit)\r\n         * @ - Unix timestamp (ms since 01/01/1970)\r\n         * ! - Windows ticks (100ns since 01/01/0001)\r\n         * \"...\" - literal text\r\n         * '' - single quote\r\n         *\r\n         * @param  format string - the desired format of the date\r\n         * @param  date Date - the date value to format\r\n         * @param  settings Object - attributes include:\r\n         *\t\t\t\t\tdayNamesShort\tstring[7] - abbreviated names of the days from Sunday (optional)\r\n         *\t\t\t\t\tdayNames\t\tstring[7] - names of the days from Sunday (optional)\r\n         *\t\t\t\t\tmonthNamesShort string[12] - abbreviated names of the months (optional)\r\n         *\t\t\t\t\tmonthNames\t\tstring[12] - names of the months (optional)\r\n         * @return  string - the date in the above format\r\n         */\r\n        formatDate: function (format, date, settings) {\r\n            if (!date) {\r\n                return \"\";\r\n            }\r\n\r\n            var iFormat,\r\n                dayNamesShort = (settings ? settings.dayNamesShort : null) || this._defaults.dayNamesShort,\r\n                dayNames = (settings ? settings.dayNames : null) || this._defaults.dayNames,\r\n                monthNamesShort = (settings ? settings.monthNamesShort : null) || this._defaults.monthNamesShort,\r\n                monthNames = (settings ? settings.monthNames : null) || this._defaults.monthNames,\r\n                // Check whether a format character is doubled\r\n                lookAhead = function (match) {\r\n                    var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\r\n                    if (matches) {\r\n                        iFormat++;\r\n                    }\r\n                    return matches;\r\n                },\r\n                // Format a number, with leading zero if necessary\r\n                formatNumber = function (match, value, len) {\r\n                    var num = \"\" + value;\r\n                    if (lookAhead(match)) {\r\n                        while (num.length < len) {\r\n                            num = \"0\" + num;\r\n                        }\r\n                    }\r\n                    return num;\r\n                },\r\n                // Format a name, short or long as requested\r\n                formatName = function (match, value, shortNames, longNames) {\r\n                    return (lookAhead(match) ? longNames[value] : shortNames[value]);\r\n                },\r\n                output = \"\",\r\n                literal = false;\r\n\r\n            if (date) {\r\n                for (iFormat = 0; iFormat < format.length; iFormat++) {\r\n                    if (literal) {\r\n                        if (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\r\n                            literal = false;\r\n                        } else {\r\n                            output += format.charAt(iFormat);\r\n                        }\r\n                    } else {\r\n                        switch (format.charAt(iFormat)) {\r\n                            case \"d\":\r\n                                output += formatNumber(\"d\", date.getDate(), 2);\r\n                                break;\r\n                            case \"D\":\r\n                                output += formatName(\"D\", date.getDay(), dayNamesShort, dayNames);\r\n                                break;\r\n                            case \"o\":\r\n                                output += formatNumber(\"o\",\r\n                                    Math.round((new Date(date.getFullYear(), date.getMonth(), date.getDate()).getTime() - new Date(date.getFullYear(), 0, 0).getTime()) / 86400000), 3);\r\n                                break;\r\n                            case \"m\":\r\n                                output += formatNumber(\"m\", date.getMonth() + 1, 2);\r\n                                break;\r\n                            case \"M\":\r\n                                output += formatName(\"M\", date.getMonth(), monthNamesShort, monthNames);\r\n                                break;\r\n                            case \"y\":\r\n                                output += (lookAhead(\"y\") ? date.getFullYear() :\r\n                                    (date.getYear() % 100 < 10 ? \"0\" : \"\") + date.getYear() % 100);\r\n                                break;\r\n                            case \"@\":\r\n                                output += date.getTime();\r\n                                break;\r\n                            case \"!\":\r\n                                output += date.getTime() * 10000 + this._ticksTo1970;\r\n                                break;\r\n                            case \"'\":\r\n                                if (lookAhead(\"'\")) {\r\n                                    output += \"'\";\r\n                                } else {\r\n                                    literal = true;\r\n                                }\r\n                                break;\r\n                            default:\r\n                                output += format.charAt(iFormat);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return output;\r\n        },\r\n\r\n        /* Extract all possible characters from the date format. */\r\n        _possibleChars: function (format) {\r\n            var iFormat,\r\n                chars = \"\",\r\n                literal = false,\r\n                // Check whether a format character is doubled\r\n                lookAhead = function (match) {\r\n                    var matches = (iFormat + 1 < format.length && format.charAt(iFormat + 1) === match);\r\n                    if (matches) {\r\n                        iFormat++;\r\n                    }\r\n                    return matches;\r\n                };\r\n\r\n            for (iFormat = 0; iFormat < format.length; iFormat++) {\r\n                if (literal) {\r\n                    if (format.charAt(iFormat) === \"'\" && !lookAhead(\"'\")) {\r\n                        literal = false;\r\n                    } else {\r\n                        chars += format.charAt(iFormat);\r\n                    }\r\n                } else {\r\n                    switch (format.charAt(iFormat)) {\r\n                        case \"d\": case \"m\": case \"y\": case \"@\":\r\n                            chars += \"0123456789\";\r\n                            break;\r\n                        case \"D\": case \"M\":\r\n                            return null; // Accept anything\r\n                        case \"'\":\r\n                            if (lookAhead(\"'\")) {\r\n                                chars += \"'\";\r\n                            } else {\r\n                                literal = true;\r\n                            }\r\n                            break;\r\n                        default:\r\n                            chars += format.charAt(iFormat);\r\n                    }\r\n                }\r\n            }\r\n            return chars;\r\n        },\r\n\r\n        /* Get a setting value, defaulting if necessary. */\r\n        _get: function (inst, name) {\r\n            return inst.settings[name] !== undefined ?\r\n                inst.settings[name] : this._defaults[name];\r\n        },\r\n\r\n        /* Parse existing date and initialise date picker. */\r\n        _setDateFromField: function (inst, noDefault) {\r\n            if (inst.input.val() === inst.lastVal) {\r\n                return;\r\n            }\r\n\r\n            var dateFormat = this._get(inst, \"dateFormat\"),\r\n                dates = inst.lastVal = inst.input ? inst.input.val() : null,\r\n                defaultDate = this._getDefaultDate(inst),\r\n                date = defaultDate,\r\n                settings = this._getFormatConfig(inst);\r\n\r\n            try {\r\n                date = this.parseDate(dateFormat, dates, settings) || defaultDate;\r\n            } catch (event) {\r\n                dates = (noDefault ? \"\" : dates);\r\n            }\r\n            inst.selectedDay = date.getDate();\r\n            inst.drawMonth = inst.selectedMonth = date.getMonth();\r\n            inst.drawYear = inst.selectedYear = date.getFullYear();\r\n            inst.currentDay = (dates ? date.getDate() : 0);\r\n            inst.currentMonth = (dates ? date.getMonth() : 0);\r\n            inst.currentYear = (dates ? date.getFullYear() : 0);\r\n            this._adjustInstDate(inst);\r\n        },\r\n\r\n        /* Retrieve the default date shown on opening. */\r\n        _getDefaultDate: function (inst) {\r\n            return this._restrictMinMax(inst,\r\n                this._determineDate(inst, this._get(inst, \"defaultDate\"), new Date()));\r\n        },\r\n\r\n        /* A date may be specified as an exact value or a relative one. */\r\n        _determineDate: function (inst, date, defaultDate) {\r\n            var offsetNumeric = function (offset) {\r\n                var date = new Date();\r\n                date.setDate(date.getDate() + offset);\r\n                return date;\r\n            },\r\n                offsetString = function (offset) {\r\n                    try {\r\n                        return $.datepicker.parseDate($.datepicker._get(inst, \"dateFormat\"),\r\n                            offset, $.datepicker._getFormatConfig(inst));\r\n                    }\r\n                    catch (e) {\r\n                        // Ignore\r\n                    }\r\n\r\n                    var date = (offset.toLowerCase().match(/^c/) ?\r\n                        $.datepicker._getDate(inst) : null) || new Date(),\r\n                        year = date.getFullYear(),\r\n                        month = date.getMonth(),\r\n                        day = date.getDate(),\r\n                        pattern = /([+\\-]?[0-9]+)\\s*(d|D|w|W|m|M|y|Y)?/g,\r\n                        matches = pattern.exec(offset);\r\n\r\n                    while (matches) {\r\n                        switch (matches[2] || \"d\") {\r\n                            case \"d\": case \"D\":\r\n                                day += parseInt(matches[1], 10); break;\r\n                            case \"w\": case \"W\":\r\n                                day += parseInt(matches[1], 10) * 7; break;\r\n                            case \"m\": case \"M\":\r\n                                month += parseInt(matches[1], 10);\r\n                                day = Math.min(day, $.datepicker._getDaysInMonth(year, month));\r\n                                break;\r\n                            case \"y\": case \"Y\":\r\n                                year += parseInt(matches[1], 10);\r\n                                day = Math.min(day, $.datepicker._getDaysInMonth(year, month));\r\n                                break;\r\n                        }\r\n                        matches = pattern.exec(offset);\r\n                    }\r\n                    return new Date(year, month, day);\r\n                },\r\n                newDate = (date == null || date === \"\" ? defaultDate : (typeof date === \"string\" ? offsetString(date) :\r\n                    (typeof date === \"number\" ? (isNaN(date) ? defaultDate : offsetNumeric(date)) : new Date(date.getTime()))));\r\n\r\n            newDate = (newDate && newDate.toString() === \"Invalid Date\" ? defaultDate : newDate);\r\n            if (newDate) {\r\n                newDate.setHours(0);\r\n                newDate.setMinutes(0);\r\n                newDate.setSeconds(0);\r\n                newDate.setMilliseconds(0);\r\n            }\r\n            return this._daylightSavingAdjust(newDate);\r\n        },\r\n\r\n        /* Handle switch to/from daylight saving.\r\n         * Hours may be non-zero on daylight saving cut-over:\r\n         * > 12 when midnight changeover, but then cannot generate\r\n         * midnight datetime, so jump to 1AM, otherwise reset.\r\n         * @param  date  (Date) the date to check\r\n         * @return  (Date) the corrected date\r\n         */\r\n        _daylightSavingAdjust: function (date) {\r\n            if (!date) {\r\n                return null;\r\n            }\r\n            date.setHours(date.getHours() > 12 ? date.getHours() + 2 : 0);\r\n            return date;\r\n        },\r\n\r\n        /* Set the date(s) directly. */\r\n        _setDate: function (inst, date, noChange) {\r\n            var clear = !date,\r\n                origMonth = inst.selectedMonth,\r\n                origYear = inst.selectedYear,\r\n                newDate = this._restrictMinMax(inst, this._determineDate(inst, date, new Date()));\r\n\r\n            inst.selectedDay = inst.currentDay = newDate.getDate();\r\n            inst.drawMonth = inst.selectedMonth = inst.currentMonth = newDate.getMonth();\r\n            inst.drawYear = inst.selectedYear = inst.currentYear = newDate.getFullYear();\r\n            if ((origMonth !== inst.selectedMonth || origYear !== inst.selectedYear) && !noChange) {\r\n                this._notifyChange(inst);\r\n            }\r\n            this._adjustInstDate(inst);\r\n            if (inst.input) {\r\n                inst.input.val(clear ? \"\" : this._formatDate(inst));\r\n            }\r\n        },\r\n\r\n        /* Retrieve the date(s) directly. */\r\n        _getDate: function (inst) {\r\n            var startDate = (!inst.currentYear || (inst.input && inst.input.val() === \"\") ? null :\r\n                this._daylightSavingAdjust(new Date(\r\n                    inst.currentYear, inst.currentMonth, inst.currentDay)));\r\n            return startDate;\r\n        },\r\n\r\n        /* Attach the onxxx handlers.  These are declared statically so\r\n         * they work with static code transformers like Caja.\r\n         */\r\n        _attachHandlers: function (inst) {\r\n            var stepMonths = this._get(inst, \"stepMonths\"),\r\n                id = \"#\" + inst.id.replace(/\\\\\\\\/g, \"\\\\\");\r\n            inst.dpDiv.find(\"[data-handler]\").map(function () {\r\n                var handler = {\r\n                    prev: function () {\r\n                        $.datepicker._adjustDate(id, -stepMonths, \"M\");\r\n                    },\r\n                    next: function () {\r\n                        $.datepicker._adjustDate(id, +stepMonths, \"M\");\r\n                    },\r\n                    hide: function () {\r\n                        $.datepicker._hideDatepicker();\r\n                    },\r\n                    today: function () {\r\n                        $.datepicker._gotoToday(id);\r\n                    },\r\n                    selectDay: function () {\r\n                        $.datepicker._selectDay(id, +this.getAttribute(\"data-month\"), +this.getAttribute(\"data-year\"), this);\r\n                        return false;\r\n                    },\r\n                    selectMonth: function () {\r\n                        $.datepicker._selectMonthYear(id, this, \"M\");\r\n                        return false;\r\n                    },\r\n                    selectYear: function () {\r\n                        $.datepicker._selectMonthYear(id, this, \"Y\");\r\n                        return false;\r\n                    }\r\n                };\r\n                $(this).bind(this.getAttribute(\"data-event\"), handler[this.getAttribute(\"data-handler\")]);\r\n            });\r\n        },\r\n\r\n        /* Generate the HTML for the current state of the date picker. */\r\n        _generateHTML: function (inst) {\r\n            var maxDraw, prevText, prev, nextText, next, currentText, gotoDate,\r\n                controls, buttonPanel, firstDay, showWeek, dayNames, dayNamesMin,\r\n                monthNames, monthNamesShort, beforeShowDay, showOtherMonths,\r\n                selectOtherMonths, defaultDate, html, dow, row, group, col, selectedDate,\r\n                cornerClass, calender, thead, day, daysInMonth, leadDays, curRows, numRows,\r\n                printDate, dRow, tbody, daySettings, otherMonth, unselectable,\r\n                tempDate = new Date(),\r\n                today = this._daylightSavingAdjust(\r\n                    new Date(tempDate.getFullYear(), tempDate.getMonth(), tempDate.getDate())), // clear time\r\n                isRTL = this._get(inst, \"isRTL\"),\r\n                showButtonPanel = this._get(inst, \"showButtonPanel\"),\r\n                hideIfNoPrevNext = this._get(inst, \"hideIfNoPrevNext\"),\r\n                navigationAsDateFormat = this._get(inst, \"navigationAsDateFormat\"),\r\n                numMonths = this._getNumberOfMonths(inst),\r\n                showCurrentAtPos = this._get(inst, \"showCurrentAtPos\"),\r\n                stepMonths = this._get(inst, \"stepMonths\"),\r\n                isMultiMonth = (numMonths[0] !== 1 || numMonths[1] !== 1),\r\n                currentDate = this._daylightSavingAdjust((!inst.currentDay ? new Date(9999, 9, 9) :\r\n                    new Date(inst.currentYear, inst.currentMonth, inst.currentDay))),\r\n                minDate = this._getMinMaxDate(inst, \"min\"),\r\n                maxDate = this._getMinMaxDate(inst, \"max\"),\r\n                drawMonth = inst.drawMonth - showCurrentAtPos,\r\n                drawYear = inst.drawYear;\r\n\r\n            if (drawMonth < 0) {\r\n                drawMonth += 12;\r\n                drawYear--;\r\n            }\r\n            if (maxDate) {\r\n                maxDraw = this._daylightSavingAdjust(new Date(maxDate.getFullYear(),\r\n                    maxDate.getMonth() - (numMonths[0] * numMonths[1]) + 1, maxDate.getDate()));\r\n                maxDraw = (minDate && maxDraw < minDate ? minDate : maxDraw);\r\n                while (this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1)) > maxDraw) {\r\n                    drawMonth--;\r\n                    if (drawMonth < 0) {\r\n                        drawMonth = 11;\r\n                        drawYear--;\r\n                    }\r\n                }\r\n            }\r\n            inst.drawMonth = drawMonth;\r\n            inst.drawYear = drawYear;\r\n\r\n            prevText = this._get(inst, \"prevText\");\r\n            prevText = (!navigationAsDateFormat ? prevText : this.formatDate(prevText,\r\n                this._daylightSavingAdjust(new Date(drawYear, drawMonth - stepMonths, 1)),\r\n                this._getFormatConfig(inst)));\r\n\r\n            prev = (this._canAdjustMonth(inst, -1, drawYear, drawMonth) ?\r\n                \"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'\" +\r\n                \" title='\" + prevText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + (isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\" :\r\n                (hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='\" + prevText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + (isRTL ? \"e\" : \"w\") + \"'>\" + prevText + \"</span></a>\"));\r\n\r\n            nextText = this._get(inst, \"nextText\");\r\n            nextText = (!navigationAsDateFormat ? nextText : this.formatDate(nextText,\r\n                this._daylightSavingAdjust(new Date(drawYear, drawMonth + stepMonths, 1)),\r\n                this._getFormatConfig(inst)));\r\n\r\n            next = (this._canAdjustMonth(inst, +1, drawYear, drawMonth) ?\r\n                \"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'\" +\r\n                \" title='\" + nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + (isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\" :\r\n                (hideIfNoPrevNext ? \"\" : \"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='\" + nextText + \"'><span class='ui-icon ui-icon-circle-triangle-\" + (isRTL ? \"w\" : \"e\") + \"'>\" + nextText + \"</span></a>\"));\r\n\r\n            currentText = this._get(inst, \"currentText\");\r\n            gotoDate = (this._get(inst, \"gotoCurrent\") && inst.currentDay ? currentDate : today);\r\n            currentText = (!navigationAsDateFormat ? currentText :\r\n                this.formatDate(currentText, gotoDate, this._getFormatConfig(inst)));\r\n\r\n            controls = (!inst.inline ? \"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>\" +\r\n                this._get(inst, \"closeText\") + \"</button>\" : \"\");\r\n\r\n            buttonPanel = (showButtonPanel) ? \"<div class='ui-datepicker-buttonpane ui-widget-content'>\" + (isRTL ? controls : \"\") +\r\n                (this._isInRange(inst, gotoDate) ? \"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'\" +\r\n                    \">\" + currentText + \"</button>\" : \"\") + (isRTL ? \"\" : controls) + \"</div>\" : \"\";\r\n\r\n            firstDay = parseInt(this._get(inst, \"firstDay\"), 10);\r\n            firstDay = (isNaN(firstDay) ? 0 : firstDay);\r\n\r\n            showWeek = this._get(inst, \"showWeek\");\r\n            dayNames = this._get(inst, \"dayNames\");\r\n            dayNamesMin = this._get(inst, \"dayNamesMin\");\r\n            monthNames = this._get(inst, \"monthNames\");\r\n            monthNamesShort = this._get(inst, \"monthNamesShort\");\r\n            beforeShowDay = this._get(inst, \"beforeShowDay\");\r\n            showOtherMonths = this._get(inst, \"showOtherMonths\");\r\n            selectOtherMonths = this._get(inst, \"selectOtherMonths\");\r\n            defaultDate = this._getDefaultDate(inst);\r\n            html = \"\";\r\n            dow;\r\n            for (row = 0; row < numMonths[0]; row++) {\r\n                group = \"\";\r\n                this.maxRows = 4;\r\n                for (col = 0; col < numMonths[1]; col++) {\r\n                    selectedDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, inst.selectedDay));\r\n                    cornerClass = \" ui-corner-all\";\r\n                    calender = \"\";\r\n                    if (isMultiMonth) {\r\n                        calender += \"<div class='ui-datepicker-group\";\r\n                        if (numMonths[1] > 1) {\r\n                            switch (col) {\r\n                                case 0: calender += \" ui-datepicker-group-first\";\r\n                                    cornerClass = \" ui-corner-\" + (isRTL ? \"right\" : \"left\"); break;\r\n                                case numMonths[1] - 1: calender += \" ui-datepicker-group-last\";\r\n                                    cornerClass = \" ui-corner-\" + (isRTL ? \"left\" : \"right\"); break;\r\n                                default: calender += \" ui-datepicker-group-middle\"; cornerClass = \"\"; break;\r\n                            }\r\n                        }\r\n                        calender += \"'>\";\r\n                    }\r\n                    calender += \"<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix\" + cornerClass + \"'>\" +\r\n                        (/all|left/.test(cornerClass) && row === 0 ? (isRTL ? next : prev) : \"\") +\r\n                        (/all|right/.test(cornerClass) && row === 0 ? (isRTL ? prev : next) : \"\") +\r\n                        this._generateMonthYearHeader(inst, drawMonth, drawYear, minDate, maxDate,\r\n                            row > 0 || col > 0, monthNames, monthNamesShort) + // draw month headers\r\n                        \"</div><table class='ui-datepicker-calendar'><thead>\" +\r\n                        \"<tr>\";\r\n                    thead = (showWeek ? \"<th class='ui-datepicker-week-col'>\" + this._get(inst, \"weekHeader\") + \"</th>\" : \"\");\r\n                    for (dow = 0; dow < 7; dow++) { // days of the week\r\n                        day = (dow + firstDay) % 7;\r\n                        thead += \"<th scope='col'\" + ((dow + firstDay + 6) % 7 >= 5 ? \" class='ui-datepicker-week-end'\" : \"\") + \">\" +\r\n                            \"<span title='\" + dayNames[day] + \"'>\" + dayNamesMin[day] + \"</span></th>\";\r\n                    }\r\n                    calender += thead + \"</tr></thead><tbody>\";\r\n                    daysInMonth = this._getDaysInMonth(drawYear, drawMonth);\r\n                    if (drawYear === inst.selectedYear && drawMonth === inst.selectedMonth) {\r\n                        inst.selectedDay = Math.min(inst.selectedDay, daysInMonth);\r\n                    }\r\n                    leadDays = (this._getFirstDayOfMonth(drawYear, drawMonth) - firstDay + 7) % 7;\r\n                    curRows = Math.ceil((leadDays + daysInMonth) / 7); // calculate the number of rows to generate\r\n                    numRows = (isMultiMonth ? this.maxRows > curRows ? this.maxRows : curRows : curRows); //If multiple months, use the higher number of rows (see #7043)\r\n                    this.maxRows = numRows;\r\n                    printDate = this._daylightSavingAdjust(new Date(drawYear, drawMonth, 1 - leadDays));\r\n                    for (dRow = 0; dRow < numRows; dRow++) { // create date picker rows\r\n                        calender += \"<tr>\";\r\n                        tbody = (!showWeek ? \"\" : \"<td class='ui-datepicker-week-col'>\" +\r\n                            this._get(inst, \"calculateWeek\")(printDate) + \"</td>\");\r\n                        for (dow = 0; dow < 7; dow++) { // create date picker days\r\n                            daySettings = (beforeShowDay ?\r\n                                beforeShowDay.apply((inst.input ? inst.input[0] : null), [printDate]) : [true, \"\"]);\r\n                            otherMonth = (printDate.getMonth() !== drawMonth);\r\n                            unselectable = (otherMonth && !selectOtherMonths) || !daySettings[0] ||\r\n                                (minDate && printDate < minDate) || (maxDate && printDate > maxDate);\r\n                            tbody += \"<td class='\" +\r\n                                ((dow + firstDay + 6) % 7 >= 5 ? \" ui-datepicker-week-end\" : \"\") + // highlight weekends\r\n                                (otherMonth ? \" ui-datepicker-other-month\" : \"\") + // highlight days from other months\r\n                                ((printDate.getTime() === selectedDate.getTime() && drawMonth === inst.selectedMonth && inst._keyEvent) || // user pressed key\r\n                                    (defaultDate.getTime() === printDate.getTime() && defaultDate.getTime() === selectedDate.getTime()) ?\r\n                                    // or defaultDate is current printedDate and defaultDate is selectedDate\r\n                                    \" \" + this._dayOverClass : \"\") + // highlight selected day\r\n                                (unselectable ? \" \" + this._unselectableClass + \" ui-state-disabled\" : \"\") +  // highlight unselectable days\r\n                                (otherMonth && !showOtherMonths ? \"\" : \" \" + daySettings[1] + // highlight custom dates\r\n                                    (printDate.getTime() === currentDate.getTime() ? \" \" + this._currentClass : \"\") + // highlight selected day\r\n                                    (printDate.getTime() === today.getTime() ? \" ui-datepicker-today\" : \"\")) + \"'\" + // highlight today (if different)\r\n                                ((!otherMonth || showOtherMonths) && daySettings[2] ? \" title='\" + daySettings[2].replace(/'/g, \"&#39;\") + \"'\" : \"\") + // cell title\r\n                                (unselectable ? \"\" : \" data-handler='selectDay' data-event='click' data-month='\" + printDate.getMonth() + \"' data-year='\" + printDate.getFullYear() + \"'\") + \">\" + // actions\r\n                                (otherMonth && !showOtherMonths ? \"&#xa0;\" : // display for other months\r\n                                    (unselectable ? \"<span class='ui-state-default'>\" + printDate.getDate() + \"</span>\" : \"<a class='ui-state-default\" +\r\n                                        (printDate.getTime() === today.getTime() ? \" ui-state-highlight\" : \"\") +\r\n                                        (printDate.getTime() === currentDate.getTime() ? \" ui-state-active\" : \"\") + // highlight selected day\r\n                                        (otherMonth ? \" ui-priority-secondary\" : \"\") + // distinguish dates from other months\r\n                                        \"' href='#'>\" + printDate.getDate() + \"</a>\")) + \"</td>\"; // display selectable date\r\n                            printDate.setDate(printDate.getDate() + 1);\r\n                            printDate = this._daylightSavingAdjust(printDate);\r\n                        }\r\n                        calender += tbody + \"</tr>\";\r\n                    }\r\n                    drawMonth++;\r\n                    if (drawMonth > 11) {\r\n                        drawMonth = 0;\r\n                        drawYear++;\r\n                    }\r\n                    calender += \"</tbody></table>\" + (isMultiMonth ? \"</div>\" +\r\n                        ((numMonths[0] > 0 && col === numMonths[1] - 1) ? \"<div class='ui-datepicker-row-break'></div>\" : \"\") : \"\");\r\n                    group += calender;\r\n                }\r\n                html += group;\r\n            }\r\n            html += buttonPanel;\r\n            inst._keyEvent = false;\r\n            return html;\r\n        },\r\n\r\n        /* Generate the month and year header. */\r\n        _generateMonthYearHeader: function (inst, drawMonth, drawYear, minDate, maxDate,\r\n            secondary, monthNames, monthNamesShort) {\r\n\r\n            var inMinYear, inMaxYear, month, years, thisYear, determineYear, year, endYear,\r\n                changeMonth = this._get(inst, \"changeMonth\"),\r\n                changeYear = this._get(inst, \"changeYear\"),\r\n                showMonthAfterYear = this._get(inst, \"showMonthAfterYear\"),\r\n                html = \"<div class='ui-datepicker-title'>\",\r\n                monthHtml = \"\";\r\n\r\n            // month selection\r\n            if (secondary || !changeMonth) {\r\n                monthHtml += \"<span class='ui-datepicker-month'>\" + monthNames[drawMonth] + \"</span>\";\r\n            } else {\r\n                inMinYear = (minDate && minDate.getFullYear() === drawYear);\r\n                inMaxYear = (maxDate && maxDate.getFullYear() === drawYear);\r\n                monthHtml += \"<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>\";\r\n                for (month = 0; month < 12; month++) {\r\n                    if ((!inMinYear || month >= minDate.getMonth()) && (!inMaxYear || month <= maxDate.getMonth())) {\r\n                        monthHtml += \"<option value='\" + month + \"'\" +\r\n                            (month === drawMonth ? \" selected='selected'\" : \"\") +\r\n                            \">\" + monthNamesShort[month] + \"</option>\";\r\n                    }\r\n                }\r\n                monthHtml += \"</select>\";\r\n            }\r\n\r\n            if (!showMonthAfterYear) {\r\n                html += monthHtml + (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\");\r\n            }\r\n\r\n            // year selection\r\n            if (!inst.yearshtml) {\r\n                inst.yearshtml = \"\";\r\n                if (secondary || !changeYear) {\r\n                    html += \"<span class='ui-datepicker-year'>\" + drawYear + \"</span>\";\r\n                } else {\r\n                    // determine range of years to display\r\n                    years = this._get(inst, \"yearRange\").split(\":\");\r\n                    thisYear = new Date().getFullYear();\r\n                    determineYear = function (value) {\r\n                        var year = (value.match(/c[+\\-].*/) ? drawYear + parseInt(value.substring(1), 10) :\r\n                            (value.match(/[+\\-].*/) ? thisYear + parseInt(value, 10) :\r\n                                parseInt(value, 10)));\r\n                        return (isNaN(year) ? thisYear : year);\r\n                    };\r\n                    year = determineYear(years[0]);\r\n                    endYear = Math.max(year, determineYear(years[1] || \"\"));\r\n                    year = (minDate ? Math.max(year, minDate.getFullYear()) : year);\r\n                    endYear = (maxDate ? Math.min(endYear, maxDate.getFullYear()) : endYear);\r\n                    inst.yearshtml += \"<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>\";\r\n                    for (; year <= endYear; year++) {\r\n                        inst.yearshtml += \"<option value='\" + year + \"'\" +\r\n                            (year === drawYear ? \" selected='selected'\" : \"\") +\r\n                            \">\" + year + \"</option>\";\r\n                    }\r\n                    inst.yearshtml += \"</select>\";\r\n\r\n                    html += inst.yearshtml;\r\n                    inst.yearshtml = null;\r\n                }\r\n            }\r\n\r\n            html += this._get(inst, \"yearSuffix\");\r\n            if (showMonthAfterYear) {\r\n                html += (secondary || !(changeMonth && changeYear) ? \"&#xa0;\" : \"\") + monthHtml;\r\n            }\r\n            html += \"</div>\"; // Close datepicker_header\r\n            return html;\r\n        },\r\n\r\n        /* Adjust one of the date sub-fields. */\r\n        _adjustInstDate: function (inst, offset, period) {\r\n            var year = inst.drawYear + (period === \"Y\" ? offset : 0),\r\n                month = inst.drawMonth + (period === \"M\" ? offset : 0),\r\n                day = Math.min(inst.selectedDay, this._getDaysInMonth(year, month)) + (period === \"D\" ? offset : 0),\r\n                date = this._restrictMinMax(inst, this._daylightSavingAdjust(new Date(year, month, day)));\r\n\r\n            inst.selectedDay = date.getDate();\r\n            inst.drawMonth = inst.selectedMonth = date.getMonth();\r\n            inst.drawYear = inst.selectedYear = date.getFullYear();\r\n            if (period === \"M\" || period === \"Y\") {\r\n                this._notifyChange(inst);\r\n            }\r\n        },\r\n\r\n        /* Ensure a date is within any min/max bounds. */\r\n        _restrictMinMax: function (inst, date) {\r\n            var minDate = this._getMinMaxDate(inst, \"min\"),\r\n                maxDate = this._getMinMaxDate(inst, \"max\"),\r\n                newDate = (minDate && date < minDate ? minDate : date);\r\n            return (maxDate && newDate > maxDate ? maxDate : newDate);\r\n        },\r\n\r\n        /* Notify change of month/year. */\r\n        _notifyChange: function (inst) {\r\n            var onChange = this._get(inst, \"onChangeMonthYear\");\r\n            if (onChange) {\r\n                onChange.apply((inst.input ? inst.input[0] : null),\r\n                    [inst.selectedYear, inst.selectedMonth + 1, inst]);\r\n            }\r\n        },\r\n\r\n        /* Determine the number of months to show. */\r\n        _getNumberOfMonths: function (inst) {\r\n            var numMonths = this._get(inst, \"numberOfMonths\");\r\n            return (numMonths == null ? [1, 1] : (typeof numMonths === \"number\" ? [1, numMonths] : numMonths));\r\n        },\r\n\r\n        /* Determine the current maximum date - ensure no time components are set. */\r\n        _getMinMaxDate: function (inst, minMax) {\r\n            return this._determineDate(inst, this._get(inst, minMax + \"Date\"), null);\r\n        },\r\n\r\n        /* Find the number of days in a given month. */\r\n        _getDaysInMonth: function (year, month) {\r\n            return 32 - this._daylightSavingAdjust(new Date(year, month, 32)).getDate();\r\n        },\r\n\r\n        /* Find the day of the week of the first of a month. */\r\n        _getFirstDayOfMonth: function (year, month) {\r\n            return new Date(year, month, 1).getDay();\r\n        },\r\n\r\n        /* Determines if we should allow a \"next/prev\" month display change. */\r\n        _canAdjustMonth: function (inst, offset, curYear, curMonth) {\r\n            var numMonths = this._getNumberOfMonths(inst),\r\n                date = this._daylightSavingAdjust(new Date(curYear,\r\n                    curMonth + (offset < 0 ? offset : numMonths[0] * numMonths[1]), 1));\r\n\r\n            if (offset < 0) {\r\n                date.setDate(this._getDaysInMonth(date.getFullYear(), date.getMonth()));\r\n            }\r\n            return this._isInRange(inst, date);\r\n        },\r\n\r\n        /* Is the given date in the accepted range? */\r\n        _isInRange: function (inst, date) {\r\n            var yearSplit, currentYear,\r\n                minDate = this._getMinMaxDate(inst, \"min\"),\r\n                maxDate = this._getMinMaxDate(inst, \"max\"),\r\n                minYear = null,\r\n                maxYear = null,\r\n                years = this._get(inst, \"yearRange\");\r\n            if (years) {\r\n                yearSplit = years.split(\":\");\r\n                currentYear = new Date().getFullYear();\r\n                minYear = parseInt(yearSplit[0], 10);\r\n                maxYear = parseInt(yearSplit[1], 10);\r\n                if (yearSplit[0].match(/[+\\-].*/)) {\r\n                    minYear += currentYear;\r\n                }\r\n                if (yearSplit[1].match(/[+\\-].*/)) {\r\n                    maxYear += currentYear;\r\n                }\r\n            }\r\n\r\n            return ((!minDate || date.getTime() >= minDate.getTime()) &&\r\n                (!maxDate || date.getTime() <= maxDate.getTime()) &&\r\n                (!minYear || date.getFullYear() >= minYear) &&\r\n                (!maxYear || date.getFullYear() <= maxYear));\r\n        },\r\n\r\n        /* Provide the configuration settings for formatting/parsing. */\r\n        _getFormatConfig: function (inst) {\r\n            var shortYearCutoff = this._get(inst, \"shortYearCutoff\");\r\n            shortYearCutoff = (typeof shortYearCutoff !== \"string\" ? shortYearCutoff :\r\n                new Date().getFullYear() % 100 + parseInt(shortYearCutoff, 10));\r\n            return {\r\n                shortYearCutoff: shortYearCutoff,\r\n                dayNamesShort: this._get(inst, \"dayNamesShort\"), dayNames: this._get(inst, \"dayNames\"),\r\n                monthNamesShort: this._get(inst, \"monthNamesShort\"), monthNames: this._get(inst, \"monthNames\")\r\n            };\r\n        },\r\n\r\n        /* Format the given date for display. */\r\n        _formatDate: function (inst, day, month, year) {\r\n            if (!day) {\r\n                inst.currentDay = inst.selectedDay;\r\n                inst.currentMonth = inst.selectedMonth;\r\n                inst.currentYear = inst.selectedYear;\r\n            }\r\n            var date = (day ? (typeof day === \"object\" ? day :\r\n                this._daylightSavingAdjust(new Date(year, month, day))) :\r\n                this._daylightSavingAdjust(new Date(inst.currentYear, inst.currentMonth, inst.currentDay)));\r\n            return this.formatDate(this._get(inst, \"dateFormat\"), date, this._getFormatConfig(inst));\r\n        }\r\n    });\r\n\r\n    /*\r\n     * Bind hover events for datepicker elements.\r\n     * Done via delegate so the binding only occurs once in the lifetime of the parent div.\r\n     * Global datepicker_instActive, set by _updateDatepicker allows the handlers to find their way back to the active picker.\r\n     */\r\n    function datepicker_bindHover(dpDiv) {\r\n        var selector = \"button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a\";\r\n        return dpDiv.delegate(selector, \"mouseout\", function () {\r\n            $(this).removeClass(\"ui-state-hover\");\r\n            if (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\r\n                $(this).removeClass(\"ui-datepicker-prev-hover\");\r\n            }\r\n            if (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\r\n                $(this).removeClass(\"ui-datepicker-next-hover\");\r\n            }\r\n        })\r\n            .delegate(selector, \"mouseover\", datepicker_handleMouseover);\r\n    }\r\n\r\n    function datepicker_handleMouseover() {\r\n        if (!$.datepicker._isDisabledDatepicker(datepicker_instActive.inline ? datepicker_instActive.dpDiv.parent()[0] : datepicker_instActive.input[0])) {\r\n            $(this).parents(\".ui-datepicker-calendar\").find(\"a\").removeClass(\"ui-state-hover\");\r\n            $(this).addClass(\"ui-state-hover\");\r\n            if (this.className.indexOf(\"ui-datepicker-prev\") !== -1) {\r\n                $(this).addClass(\"ui-datepicker-prev-hover\");\r\n            }\r\n            if (this.className.indexOf(\"ui-datepicker-next\") !== -1) {\r\n                $(this).addClass(\"ui-datepicker-next-hover\");\r\n            }\r\n        }\r\n    }\r\n\r\n    /* jQuery extend now ignores nulls! */\r\n    function datepicker_extendRemove(target, props) {\r\n        $.extend(target, props);\r\n        for (var name in props) {\r\n            if (props[name] == null) {\r\n                target[name] = props[name];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n\r\n    /* Invoke the datepicker functionality.\r\n       @param  options  string - a command, optionally followed by additional parameters or\r\n                        Object - settings for attaching new datepicker functionality\r\n       @return  jQuery object */\r\n    $.fn.datepicker = function (options) {\r\n\r\n        /* Verify an empty collection wasn't passed - Fixes #6976 */\r\n        if (!this.length) {\r\n            return this;\r\n        }\r\n\r\n        /* Initialise the date picker. */\r\n        if (!$.datepicker.initialized) {\r\n            $(document).mousedown($.datepicker._checkExternalClick);\r\n            $.datepicker.initialized = true;\r\n        }\r\n\r\n        /* Append datepicker main container to body if not exist. */\r\n        if ($(\"#\" + $.datepicker._mainDivId).length === 0) {\r\n            $(\"body\").append($.datepicker.dpDiv);\r\n        }\r\n\r\n        var otherArgs = Array.prototype.slice.call(arguments, 1);\r\n        if (typeof options === \"string\" && (options === \"isDisabled\" || options === \"getDate\" || options === \"widget\")) {\r\n            return $.datepicker[\"_\" + options + \"Datepicker\"].\r\n                apply($.datepicker, [this[0]].concat(otherArgs));\r\n        }\r\n        if (options === \"option\" && arguments.length === 2 && typeof arguments[1] === \"string\") {\r\n            return $.datepicker[\"_\" + options + \"Datepicker\"].\r\n                apply($.datepicker, [this[0]].concat(otherArgs));\r\n        }\r\n        return this.each(function () {\r\n            typeof options === \"string\" ?\r\n                $.datepicker[\"_\" + options + \"Datepicker\"].\r\n                    apply($.datepicker, [this].concat(otherArgs)) :\r\n                $.datepicker._attachDatepicker(this, options);\r\n        });\r\n    };\r\n\r\n    $.datepicker = new Datepicker(); // singleton instance\r\n    $.datepicker.initialized = false;\r\n    $.datepicker.uuid = new Date().getTime();\r\n    $.datepicker.version = \"1.11.4\";\r\n\r\n    var datepicker = $.datepicker;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Dialog 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/dialog/\r\n     */\r\n\r\n\r\n    var dialog = $.widget(\"ui.dialog\", {\r\n        version: \"1.11.4\",\r\n        options: {\r\n            appendTo: \"body\",\r\n            autoOpen: true,\r\n            buttons: [],\r\n            closeOnEscape: true,\r\n            closeText: \"Close\",\r\n            dialogClass: \"\",\r\n            draggable: true,\r\n            hide: null,\r\n            height: \"auto\",\r\n            maxHeight: null,\r\n            maxWidth: null,\r\n            minHeight: 150,\r\n            minWidth: 150,\r\n            modal: false,\r\n            position: {\r\n                my: \"center\",\r\n                at: \"center\",\r\n                of: window,\r\n                collision: \"fit\",\r\n                // Ensure the titlebar is always visible\r\n                using: function (pos) {\r\n                    var topOffset = $(this).css(pos).offset().top;\r\n                    if (topOffset < 0) {\r\n                        $(this).css(\"top\", pos.top - topOffset);\r\n                    }\r\n                }\r\n            },\r\n            resizable: true,\r\n            show: null,\r\n            title: null,\r\n            width: 300,\r\n\r\n            // callbacks\r\n            beforeClose: null,\r\n            close: null,\r\n            drag: null,\r\n            dragStart: null,\r\n            dragStop: null,\r\n            focus: null,\r\n            open: null,\r\n            resize: null,\r\n            resizeStart: null,\r\n            resizeStop: null\r\n        },\r\n\r\n        sizeRelatedOptions: {\r\n            buttons: true,\r\n            height: true,\r\n            maxHeight: true,\r\n            maxWidth: true,\r\n            minHeight: true,\r\n            minWidth: true,\r\n            width: true\r\n        },\r\n\r\n        resizableRelatedOptions: {\r\n            maxHeight: true,\r\n            maxWidth: true,\r\n            minHeight: true,\r\n            minWidth: true\r\n        },\r\n\r\n        _create: function () {\r\n            this.originalCss = {\r\n                display: this.element[0].style.display,\r\n                width: this.element[0].style.width,\r\n                minHeight: this.element[0].style.minHeight,\r\n                maxHeight: this.element[0].style.maxHeight,\r\n                height: this.element[0].style.height\r\n            };\r\n            this.originalPosition = {\r\n                parent: this.element.parent(),\r\n                index: this.element.parent().children().index(this.element)\r\n            };\r\n            this.originalTitle = this.element.attr(\"title\");\r\n            this.options.title = this.options.title || this.originalTitle;\r\n\r\n            this._createWrapper();\r\n\r\n            this.element\r\n                .show()\r\n                .removeAttr(\"title\")\r\n                .addClass(\"ui-dialog-content ui-widget-content\")\r\n                .appendTo(this.uiDialog);\r\n\r\n            this._createTitlebar();\r\n            this._createButtonPane();\r\n\r\n            if (this.options.draggable && $.fn.draggable) {\r\n                this._makeDraggable();\r\n            }\r\n            if (this.options.resizable && $.fn.resizable) {\r\n                this._makeResizable();\r\n            }\r\n\r\n            this._isOpen = false;\r\n\r\n            this._trackFocus();\r\n        },\r\n\r\n        _init: function () {\r\n            if (this.options.autoOpen) {\r\n                this.open();\r\n            }\r\n        },\r\n\r\n        _appendTo: function () {\r\n            var element = this.options.appendTo;\r\n            if (element && (element.jquery || element.nodeType)) {\r\n                return $(element);\r\n            }\r\n            return this.document.find(element || \"body\").eq(0);\r\n        },\r\n\r\n        _destroy: function () {\r\n            var next,\r\n                originalPosition = this.originalPosition;\r\n\r\n            this._untrackInstance();\r\n            this._destroyOverlay();\r\n\r\n            this.element\r\n                .removeUniqueId()\r\n                .removeClass(\"ui-dialog-content ui-widget-content\")\r\n                .css(this.originalCss)\r\n                // Without detaching first, the following becomes really slow\r\n                .detach();\r\n\r\n            this.uiDialog.stop(true, true).remove();\r\n\r\n            if (this.originalTitle) {\r\n                this.element.attr(\"title\", this.originalTitle);\r\n            }\r\n\r\n            next = originalPosition.parent.children().eq(originalPosition.index);\r\n            // Don't try to place the dialog next to itself (#8613)\r\n            if (next.length && next[0] !== this.element[0]) {\r\n                next.before(this.element);\r\n            } else {\r\n                originalPosition.parent.append(this.element);\r\n            }\r\n        },\r\n\r\n        widget: function () {\r\n            return this.uiDialog;\r\n        },\r\n\r\n        disable: $.noop,\r\n        enable: $.noop,\r\n\r\n        close: function (event) {\r\n            var activeElement,\r\n                that = this;\r\n\r\n            if (!this._isOpen || this._trigger(\"beforeClose\", event) === false) {\r\n                return;\r\n            }\r\n\r\n            this._isOpen = false;\r\n            this._focusedElement = null;\r\n            this._destroyOverlay();\r\n            this._untrackInstance();\r\n\r\n            if (!this.opener.filter(\":focusable\").focus().length) {\r\n\r\n                // support: IE9\r\n                // IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\r\n                try {\r\n                    activeElement = this.document[0].activeElement;\r\n\r\n                    // Support: IE9, IE10\r\n                    // If the <body> is blurred, IE will switch windows, see #4520\r\n                    if (activeElement && activeElement.nodeName.toLowerCase() !== \"body\") {\r\n\r\n                        // Hiding a focused element doesn't trigger blur in WebKit\r\n                        // so in case we have nothing to focus on, explicitly blur the active element\r\n                        // https://bugs.webkit.org/show_bug.cgi?id=47182\r\n                        $(activeElement).blur();\r\n                    }\r\n                } catch (error) { }\r\n            }\r\n\r\n            this._hide(this.uiDialog, this.options.hide, function () {\r\n                that._trigger(\"close\", event);\r\n            });\r\n        },\r\n\r\n        isOpen: function () {\r\n            return this._isOpen;\r\n        },\r\n\r\n        moveToTop: function () {\r\n            this._moveToTop();\r\n        },\r\n\r\n        _moveToTop: function (event, silent) {\r\n            var moved = false,\r\n                zIndices = this.uiDialog.siblings(\".ui-front:visible\").map(function () {\r\n                    return +$(this).css(\"z-index\");\r\n                }).get(),\r\n                zIndexMax = Math.max.apply(null, zIndices);\r\n\r\n            if (zIndexMax >= +this.uiDialog.css(\"z-index\")) {\r\n                this.uiDialog.css(\"z-index\", zIndexMax + 1);\r\n                moved = true;\r\n            }\r\n\r\n            if (moved && !silent) {\r\n                this._trigger(\"focus\", event);\r\n            }\r\n            return moved;\r\n        },\r\n\r\n        open: function () {\r\n            var that = this;\r\n            if (this._isOpen) {\r\n                if (this._moveToTop()) {\r\n                    this._focusTabbable();\r\n                }\r\n                return;\r\n            }\r\n\r\n            this._isOpen = true;\r\n            this.opener = $(this.document[0].activeElement);\r\n\r\n            this._size();\r\n            this._position();\r\n            this._createOverlay();\r\n            this._moveToTop(null, true);\r\n\r\n            // Ensure the overlay is moved to the top with the dialog, but only when\r\n            // opening. The overlay shouldn't move after the dialog is open so that\r\n            // modeless dialogs opened after the modal dialog stack properly.\r\n            if (this.overlay) {\r\n                this.overlay.css(\"z-index\", this.uiDialog.css(\"z-index\") - 1);\r\n            }\r\n\r\n            this._show(this.uiDialog, this.options.show, function () {\r\n                that._focusTabbable();\r\n                that._trigger(\"focus\");\r\n            });\r\n\r\n            // Track the dialog immediately upon openening in case a focus event\r\n            // somehow occurs outside of the dialog before an element inside the\r\n            // dialog is focused (#10152)\r\n            this._makeFocusTarget();\r\n\r\n            this._trigger(\"open\");\r\n        },\r\n\r\n        _focusTabbable: function () {\r\n            // Set focus to the first match:\r\n            // 1. An element that was focused previously\r\n            // 2. First element inside the dialog matching [autofocus]\r\n            // 3. Tabbable element inside the content element\r\n            // 4. Tabbable element inside the buttonpane\r\n            // 5. The close button\r\n            // 6. The dialog itself\r\n            var hasFocus = this._focusedElement;\r\n            if (!hasFocus) {\r\n                hasFocus = this.element.find(\"[autofocus]\");\r\n            }\r\n            if (!hasFocus.length) {\r\n                hasFocus = this.element.find(\":tabbable\");\r\n            }\r\n            if (!hasFocus.length) {\r\n                hasFocus = this.uiDialogButtonPane.find(\":tabbable\");\r\n            }\r\n            if (!hasFocus.length) {\r\n                hasFocus = this.uiDialogTitlebarClose.filter(\":tabbable\");\r\n            }\r\n            if (!hasFocus.length) {\r\n                hasFocus = this.uiDialog;\r\n            }\r\n            hasFocus.eq(0).focus();\r\n        },\r\n\r\n        _keepFocus: function (event) {\r\n            function checkFocus() {\r\n                var activeElement = this.document[0].activeElement,\r\n                    isActive = this.uiDialog[0] === activeElement ||\r\n                        $.contains(this.uiDialog[0], activeElement);\r\n                if (!isActive) {\r\n                    this._focusTabbable();\r\n                }\r\n            }\r\n            event.preventDefault();\r\n            checkFocus.call(this);\r\n            // support: IE\r\n            // IE <= 8 doesn't prevent moving focus even with event.preventDefault()\r\n            // so we check again later\r\n            this._delay(checkFocus);\r\n        },\r\n\r\n        _createWrapper: function () {\r\n            this.uiDialog = $(\"<div>\")\r\n                .addClass(\"ui-dialog ui-widget ui-widget-content ui-corner-all ui-front \" +\r\n                    this.options.dialogClass)\r\n                .hide()\r\n                .attr({\r\n                    // Setting tabIndex makes the div focusable\r\n                    tabIndex: -1,\r\n                    role: \"dialog\"\r\n                })\r\n                .appendTo(this._appendTo());\r\n\r\n            this._on(this.uiDialog, {\r\n                keydown: function (event) {\r\n                    if (this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&\r\n                        event.keyCode === $.ui.keyCode.ESCAPE) {\r\n                        event.preventDefault();\r\n                        this.close(event);\r\n                        return;\r\n                    }\r\n\r\n                    // prevent tabbing out of dialogs\r\n                    if (event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented()) {\r\n                        return;\r\n                    }\r\n                    var tabbables = this.uiDialog.find(\":tabbable\"),\r\n                        first = tabbables.filter(\":first\"),\r\n                        last = tabbables.filter(\":last\");\r\n\r\n                    if ((event.target === last[0] || event.target === this.uiDialog[0]) && !event.shiftKey) {\r\n                        this._delay(function () {\r\n                            first.focus();\r\n                        });\r\n                        event.preventDefault();\r\n                    } else if ((event.target === first[0] || event.target === this.uiDialog[0]) && event.shiftKey) {\r\n                        this._delay(function () {\r\n                            last.focus();\r\n                        });\r\n                        event.preventDefault();\r\n                    }\r\n                },\r\n                mousedown: function (event) {\r\n                    if (this._moveToTop(event)) {\r\n                        this._focusTabbable();\r\n                    }\r\n                }\r\n            });\r\n\r\n            // We assume that any existing aria-describedby attribute means\r\n            // that the dialog content is marked up properly\r\n            // otherwise we brute force the content as the description\r\n            if (!this.element.find(\"[aria-describedby]\").length) {\r\n                this.uiDialog.attr({\r\n                    \"aria-describedby\": this.element.uniqueId().attr(\"id\")\r\n                });\r\n            }\r\n        },\r\n\r\n        _createTitlebar: function () {\r\n            var uiDialogTitle;\r\n\r\n            this.uiDialogTitlebar = $(\"<div>\")\r\n                .addClass(\"ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix\")\r\n                .prependTo(this.uiDialog);\r\n            this._on(this.uiDialogTitlebar, {\r\n                mousedown: function (event) {\r\n                    // Don't prevent click on close button (#8838)\r\n                    // Focusing a dialog that is partially scrolled out of view\r\n                    // causes the browser to scroll it into view, preventing the click event\r\n                    if (!$(event.target).closest(\".ui-dialog-titlebar-close\")) {\r\n                        // Dialog isn't getting focus when dragging (#8063)\r\n                        this.uiDialog.focus();\r\n                    }\r\n                }\r\n            });\r\n\r\n            // support: IE\r\n            // Use type=\"button\" to prevent enter keypresses in textboxes from closing the\r\n            // dialog in IE (#9312)\r\n            this.uiDialogTitlebarClose = $(\"<button type='button'></button>\")\r\n                .button({\r\n                    label: this.options.closeText,\r\n                    icons: {\r\n                        primary: \"ui-icon-closethick\"\r\n                    },\r\n                    text: false\r\n                })\r\n                .addClass(\"ui-dialog-titlebar-close\")\r\n                .appendTo(this.uiDialogTitlebar);\r\n            this._on(this.uiDialogTitlebarClose, {\r\n                click: function (event) {\r\n                    event.preventDefault();\r\n                    this.close(event);\r\n                }\r\n            });\r\n\r\n            uiDialogTitle = $(\"<span>\")\r\n                .uniqueId()\r\n                .addClass(\"ui-dialog-title\")\r\n                .prependTo(this.uiDialogTitlebar);\r\n            this._title(uiDialogTitle);\r\n\r\n            this.uiDialog.attr({\r\n                \"aria-labelledby\": uiDialogTitle.attr(\"id\")\r\n            });\r\n        },\r\n\r\n        _title: function (title) {\r\n            if (!this.options.title) {\r\n                title.html(\"&#160;\");\r\n            }\r\n            title.text(this.options.title);\r\n        },\r\n\r\n        _createButtonPane: function () {\r\n            this.uiDialogButtonPane = $(\"<div>\")\r\n                .addClass(\"ui-dialog-buttonpane ui-widget-content ui-helper-clearfix\");\r\n\r\n            this.uiButtonSet = $(\"<div>\")\r\n                .addClass(\"ui-dialog-buttonset\")\r\n                .appendTo(this.uiDialogButtonPane);\r\n\r\n            this._createButtons();\r\n        },\r\n\r\n        _createButtons: function () {\r\n            var that = this,\r\n                buttons = this.options.buttons;\r\n\r\n            // if we already have a button pane, remove it\r\n            this.uiDialogButtonPane.remove();\r\n            this.uiButtonSet.empty();\r\n\r\n            if ($.isEmptyObject(buttons) || (Array.isArray(buttons) && !buttons.length)) {\r\n                this.uiDialog.removeClass(\"ui-dialog-buttons\");\r\n                return;\r\n            }\r\n\r\n            $.each(buttons, function (name, props) {\r\n                var click, buttonOptions;\r\n                props = $.isFunction(props) ?\r\n                    { click: props, text: name } :\r\n                    props;\r\n                // Default to a non-submitting button\r\n                props = $.extend({ type: \"button\" }, props);\r\n                // Change the context for the click callback to be the main element\r\n                click = props.click;\r\n                props.click = function () {\r\n                    click.apply(that.element[0], arguments);\r\n                };\r\n                buttonOptions = {\r\n                    icons: props.icons,\r\n                    text: props.showText\r\n                };\r\n                delete props.icons;\r\n                delete props.showText;\r\n                $(\"<button></button>\", props)\r\n                    .button(buttonOptions)\r\n                    .appendTo(that.uiButtonSet);\r\n            });\r\n            this.uiDialog.addClass(\"ui-dialog-buttons\");\r\n            this.uiDialogButtonPane.appendTo(this.uiDialog);\r\n        },\r\n\r\n        _makeDraggable: function () {\r\n            var that = this,\r\n                options = this.options;\r\n\r\n            function filteredUi(ui) {\r\n                return {\r\n                    position: ui.position,\r\n                    offset: ui.offset\r\n                };\r\n            }\r\n\r\n            this.uiDialog.draggable({\r\n                cancel: \".ui-dialog-content, .ui-dialog-titlebar-close\",\r\n                handle: \".ui-dialog-titlebar\",\r\n                containment: \"document\",\r\n                start: function (event, ui) {\r\n                    $(this).addClass(\"ui-dialog-dragging\");\r\n                    that._blockFrames();\r\n                    that._trigger(\"dragStart\", event, filteredUi(ui));\r\n                },\r\n                drag: function (event, ui) {\r\n                    that._trigger(\"drag\", event, filteredUi(ui));\r\n                },\r\n                stop: function (event, ui) {\r\n                    var left = ui.offset.left - that.document.scrollLeft(),\r\n                        top = ui.offset.top - that.document.scrollTop();\r\n\r\n                    options.position = {\r\n                        my: \"left top\",\r\n                        at: \"left\" + (left >= 0 ? \"+\" : \"\") + left + \" \" +\r\n                            \"top\" + (top >= 0 ? \"+\" : \"\") + top,\r\n                        of: that.window\r\n                    };\r\n                    $(this).removeClass(\"ui-dialog-dragging\");\r\n                    that._unblockFrames();\r\n                    that._trigger(\"dragStop\", event, filteredUi(ui));\r\n                }\r\n            });\r\n        },\r\n\r\n        _makeResizable: function () {\r\n            var that = this,\r\n                options = this.options,\r\n                handles = options.resizable,\r\n                // .ui-resizable has position: relative defined in the stylesheet\r\n                // but dialogs have to use absolute or fixed positioning\r\n                position = this.uiDialog.css(\"position\"),\r\n                resizeHandles = typeof handles === \"string\" ?\r\n                    handles :\r\n                    \"n,e,s,w,se,sw,ne,nw\";\r\n\r\n            function filteredUi(ui) {\r\n                return {\r\n                    originalPosition: ui.originalPosition,\r\n                    originalSize: ui.originalSize,\r\n                    position: ui.position,\r\n                    size: ui.size\r\n                };\r\n            }\r\n\r\n            this.uiDialog.resizable({\r\n                cancel: \".ui-dialog-content\",\r\n                containment: \"document\",\r\n                alsoResize: this.element,\r\n                maxWidth: options.maxWidth,\r\n                maxHeight: options.maxHeight,\r\n                minWidth: options.minWidth,\r\n                minHeight: this._minHeight(),\r\n                handles: resizeHandles,\r\n                start: function (event, ui) {\r\n                    $(this).addClass(\"ui-dialog-resizing\");\r\n                    that._blockFrames();\r\n                    that._trigger(\"resizeStart\", event, filteredUi(ui));\r\n                },\r\n                resize: function (event, ui) {\r\n                    that._trigger(\"resize\", event, filteredUi(ui));\r\n                },\r\n                stop: function (event, ui) {\r\n                    var offset = that.uiDialog.offset(),\r\n                        left = offset.left - that.document.scrollLeft(),\r\n                        top = offset.top - that.document.scrollTop();\r\n\r\n                    options.height = that.uiDialog.height();\r\n                    options.width = that.uiDialog.width();\r\n                    options.position = {\r\n                        my: \"left top\",\r\n                        at: \"left\" + (left >= 0 ? \"+\" : \"\") + left + \" \" +\r\n                            \"top\" + (top >= 0 ? \"+\" : \"\") + top,\r\n                        of: that.window\r\n                    };\r\n                    $(this).removeClass(\"ui-dialog-resizing\");\r\n                    that._unblockFrames();\r\n                    that._trigger(\"resizeStop\", event, filteredUi(ui));\r\n                }\r\n            })\r\n                .css(\"position\", position);\r\n        },\r\n\r\n        _trackFocus: function () {\r\n            this._on(this.widget(), {\r\n                focusin: function (event) {\r\n                    this._makeFocusTarget();\r\n                    this._focusedElement = $(event.target);\r\n                }\r\n            });\r\n        },\r\n\r\n        _makeFocusTarget: function () {\r\n            this._untrackInstance();\r\n            this._trackingInstances().unshift(this);\r\n        },\r\n\r\n        _untrackInstance: function () {\r\n            var instances = this._trackingInstances(),\r\n                exists = $.inArray(this, instances);\r\n            if (exists !== -1) {\r\n                instances.splice(exists, 1);\r\n            }\r\n        },\r\n\r\n        _trackingInstances: function () {\r\n            var instances = this.document.data(\"ui-dialog-instances\");\r\n            if (!instances) {\r\n                instances = [];\r\n                this.document.data(\"ui-dialog-instances\", instances);\r\n            }\r\n            return instances;\r\n        },\r\n\r\n        _minHeight: function () {\r\n            var options = this.options;\r\n\r\n            return options.height === \"auto\" ?\r\n                options.minHeight :\r\n                Math.min(options.minHeight, options.height);\r\n        },\r\n\r\n        _position: function () {\r\n            // Need to show the dialog to get the actual offset in the position plugin\r\n            var isVisible = this.uiDialog.is(\":visible\");\r\n            if (!isVisible) {\r\n                this.uiDialog.show();\r\n            }\r\n            this.uiDialog.position(this.options.position);\r\n            if (!isVisible) {\r\n                this.uiDialog.hide();\r\n            }\r\n        },\r\n\r\n        _setOptions: function (options) {\r\n            var that = this,\r\n                resize = false,\r\n                resizableOptions = {};\r\n\r\n            $.each(options, function (key, value) {\r\n                that._setOption(key, value);\r\n\r\n                if (key in that.sizeRelatedOptions) {\r\n                    resize = true;\r\n                }\r\n                if (key in that.resizableRelatedOptions) {\r\n                    resizableOptions[key] = value;\r\n                }\r\n            });\r\n\r\n            if (resize) {\r\n                this._size();\r\n                this._position();\r\n            }\r\n            if (this.uiDialog.is(\":data(ui-resizable)\")) {\r\n                this.uiDialog.resizable(\"option\", resizableOptions);\r\n            }\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            var isDraggable, isResizable,\r\n                uiDialog = this.uiDialog;\r\n\r\n            if (key === \"dialogClass\") {\r\n                uiDialog\r\n                    .removeClass(this.options.dialogClass)\r\n                    .addClass(value);\r\n            }\r\n\r\n            if (key === \"disabled\") {\r\n                return;\r\n            }\r\n\r\n            this._super(key, value);\r\n\r\n            if (key === \"appendTo\") {\r\n                this.uiDialog.appendTo(this._appendTo());\r\n            }\r\n\r\n            if (key === \"buttons\") {\r\n                this._createButtons();\r\n            }\r\n\r\n            if (key === \"closeText\") {\r\n                this.uiDialogTitlebarClose.button({\r\n                    // Ensure that we always pass a string\r\n                    label: \"\" + value\r\n                });\r\n            }\r\n\r\n            if (key === \"draggable\") {\r\n                isDraggable = uiDialog.is(\":data(ui-draggable)\");\r\n                if (isDraggable && !value) {\r\n                    uiDialog.draggable(\"destroy\");\r\n                }\r\n\r\n                if (!isDraggable && value) {\r\n                    this._makeDraggable();\r\n                }\r\n            }\r\n\r\n            if (key === \"position\") {\r\n                this._position();\r\n            }\r\n\r\n            if (key === \"resizable\") {\r\n                // currently resizable, becoming non-resizable\r\n                isResizable = uiDialog.is(\":data(ui-resizable)\");\r\n                if (isResizable && !value) {\r\n                    uiDialog.resizable(\"destroy\");\r\n                }\r\n\r\n                // currently resizable, changing handles\r\n                if (isResizable && typeof value === \"string\") {\r\n                    uiDialog.resizable(\"option\", \"handles\", value);\r\n                }\r\n\r\n                // currently non-resizable, becoming resizable\r\n                if (!isResizable && value !== false) {\r\n                    this._makeResizable();\r\n                }\r\n            }\r\n\r\n            if (key === \"title\") {\r\n                this._title(this.uiDialogTitlebar.find(\".ui-dialog-title\"));\r\n            }\r\n        },\r\n\r\n        _size: function () {\r\n            // If the user has resized the dialog, the .ui-dialog and .ui-dialog-content\r\n            // divs will both have width and height set, so we need to reset them\r\n            var nonContentHeight, minContentHeight, maxContentHeight,\r\n                options = this.options;\r\n\r\n            // Reset content sizing\r\n            this.element.show().css({\r\n                width: \"auto\",\r\n                minHeight: 0,\r\n                maxHeight: \"none\",\r\n                height: 0\r\n            });\r\n\r\n            if (options.minWidth > options.width) {\r\n                options.width = options.minWidth;\r\n            }\r\n\r\n            // reset wrapper sizing\r\n            // determine the height of all the non-content elements\r\n            nonContentHeight = this.uiDialog.css({\r\n                height: \"auto\",\r\n                width: options.width\r\n            })\r\n                .outerHeight();\r\n            minContentHeight = Math.max(0, options.minHeight - nonContentHeight);\r\n            maxContentHeight = typeof options.maxHeight === \"number\" ?\r\n                Math.max(0, options.maxHeight - nonContentHeight) :\r\n                \"none\";\r\n\r\n            if (options.height === \"auto\") {\r\n                this.element.css({\r\n                    minHeight: minContentHeight,\r\n                    maxHeight: maxContentHeight,\r\n                    height: \"auto\"\r\n                });\r\n            } else {\r\n                this.element.height(Math.max(0, options.height - nonContentHeight));\r\n            }\r\n\r\n            if (this.uiDialog.is(\":data(ui-resizable)\")) {\r\n                this.uiDialog.resizable(\"option\", \"minHeight\", this._minHeight());\r\n            }\r\n        },\r\n\r\n        _blockFrames: function () {\r\n            this.iframeBlocks = this.document.find(\"iframe\").map(function () {\r\n                var iframe = $(this);\r\n\r\n                return $(\"<div>\")\r\n                    .css({\r\n                        position: \"absolute\",\r\n                        width: iframe.outerWidth(),\r\n                        height: iframe.outerHeight()\r\n                    })\r\n                    .appendTo(iframe.parent())\r\n                    .offset(iframe.offset())[0];\r\n            });\r\n        },\r\n\r\n        _unblockFrames: function () {\r\n            if (this.iframeBlocks) {\r\n                this.iframeBlocks.remove();\r\n                delete this.iframeBlocks;\r\n            }\r\n        },\r\n\r\n        _allowInteraction: function (event) {\r\n            if ($(event.target).closest(\".ui-dialog\").length) {\r\n                return true;\r\n            }\r\n\r\n            // TODO: Remove hack when datepicker implements\r\n            // the .ui-front logic (#8989)\r\n            return !!$(event.target).closest(\".ui-datepicker\").length;\r\n        },\r\n\r\n        _createOverlay: function () {\r\n            if (!this.options.modal) {\r\n                return;\r\n            }\r\n\r\n            // We use a delay in case the overlay is created from an\r\n            // event that we're going to be cancelling (#2804)\r\n            var isOpening = true;\r\n            this._delay(function () {\r\n                isOpening = false;\r\n            });\r\n\r\n            if (!this.document.data(\"ui-dialog-overlays\")) {\r\n\r\n                // Prevent use of anchors and inputs\r\n                // Using _on() for an event handler shared across many instances is\r\n                // safe because the dialogs stack and must be closed in reverse order\r\n                this._on(this.document, {\r\n                    focusin: function (event) {\r\n                        if (isOpening) {\r\n                            return;\r\n                        }\r\n\r\n                        if (!this._allowInteraction(event)) {\r\n                            event.preventDefault();\r\n                            this._trackingInstances()[0]._focusTabbable();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            this.overlay = $(\"<div>\")\r\n                .addClass(\"ui-widget-overlay ui-front\")\r\n                .appendTo(this._appendTo());\r\n            this._on(this.overlay, {\r\n                mousedown: \"_keepFocus\"\r\n            });\r\n            this.document.data(\"ui-dialog-overlays\",\r\n                (this.document.data(\"ui-dialog-overlays\") || 0) + 1);\r\n        },\r\n\r\n        _destroyOverlay: function () {\r\n            if (!this.options.modal) {\r\n                return;\r\n            }\r\n\r\n            if (this.overlay) {\r\n                var overlays = this.document.data(\"ui-dialog-overlays\") - 1;\r\n\r\n                if (!overlays) {\r\n                    this.document\r\n                        .unbind(\"focusin\")\r\n                        .removeData(\"ui-dialog-overlays\");\r\n                } else {\r\n                    this.document.data(\"ui-dialog-overlays\", overlays);\r\n                }\r\n\r\n                this.overlay.remove();\r\n                this.overlay = null;\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Progressbar 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/progressbar/\r\n     */\r\n\r\n\r\n    var progressbar = $.widget(\"ui.progressbar\", {\r\n        version: \"1.11.4\",\r\n        options: {\r\n            max: 100,\r\n            value: 0,\r\n\r\n            change: null,\r\n            complete: null\r\n        },\r\n\r\n        min: 0,\r\n\r\n        _create: function () {\r\n            // Constrain initial value\r\n            this.oldValue = this.options.value = this._constrainedValue();\r\n\r\n            this.element\r\n                .addClass(\"ui-progressbar ui-widget ui-widget-content ui-corner-all\")\r\n                .attr({\r\n                    // Only set static values, aria-valuenow and aria-valuemax are\r\n                    // set inside _refreshValue()\r\n                    role: \"progressbar\",\r\n                    \"aria-valuemin\": this.min\r\n                });\r\n\r\n            this.valueDiv = $(\"<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>\")\r\n                .appendTo(this.element);\r\n\r\n            this._refreshValue();\r\n        },\r\n\r\n        _destroy: function () {\r\n            this.element\r\n                .removeClass(\"ui-progressbar ui-widget ui-widget-content ui-corner-all\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"aria-valuemin\")\r\n                .removeAttr(\"aria-valuemax\")\r\n                .removeAttr(\"aria-valuenow\");\r\n\r\n            this.valueDiv.remove();\r\n        },\r\n\r\n        value: function (newValue) {\r\n            if (newValue === undefined) {\r\n                return this.options.value;\r\n            }\r\n\r\n            this.options.value = this._constrainedValue(newValue);\r\n            this._refreshValue();\r\n        },\r\n\r\n        _constrainedValue: function (newValue) {\r\n            if (newValue === undefined) {\r\n                newValue = this.options.value;\r\n            }\r\n\r\n            this.indeterminate = newValue === false;\r\n\r\n            // sanitize value\r\n            if (typeof newValue !== \"number\") {\r\n                newValue = 0;\r\n            }\r\n\r\n            return this.indeterminate ? false :\r\n                Math.min(this.options.max, Math.max(this.min, newValue));\r\n        },\r\n\r\n        _setOptions: function (options) {\r\n            // Ensure \"value\" option is set after other values (like max)\r\n            var value = options.value;\r\n            delete options.value;\r\n\r\n            this._super(options);\r\n\r\n            this.options.value = this._constrainedValue(value);\r\n            this._refreshValue();\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            if (key === \"max\") {\r\n                // Don't allow a max less than min\r\n                value = Math.max(this.min, value);\r\n            }\r\n            if (key === \"disabled\") {\r\n                this.element\r\n                    .toggleClass(\"ui-state-disabled\", !!value)\r\n                    .attr(\"aria-disabled\", value);\r\n            }\r\n            this._super(key, value);\r\n        },\r\n\r\n        _percentage: function () {\r\n            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min);\r\n        },\r\n\r\n        _refreshValue: function () {\r\n            var value = this.options.value,\r\n                percentage = this._percentage();\r\n\r\n            this.valueDiv\r\n                .toggle(this.indeterminate || value > this.min)\r\n                .toggleClass(\"ui-corner-right\", value === this.options.max)\r\n                .width(percentage.toFixed(0) + \"%\");\r\n\r\n            this.element.toggleClass(\"ui-progressbar-indeterminate\", this.indeterminate);\r\n\r\n            if (this.indeterminate) {\r\n                this.element.removeAttr(\"aria-valuenow\");\r\n                if (!this.overlayDiv) {\r\n                    this.overlayDiv = $(\"<div class='ui-progressbar-overlay'></div>\").appendTo(this.valueDiv);\r\n                }\r\n            } else {\r\n                this.element.attr({\r\n                    \"aria-valuemax\": this.options.max,\r\n                    \"aria-valuenow\": value\r\n                });\r\n                if (this.overlayDiv) {\r\n                    this.overlayDiv.remove();\r\n                    this.overlayDiv = null;\r\n                }\r\n            }\r\n\r\n            if (this.oldValue !== value) {\r\n                this.oldValue = value;\r\n                this._trigger(\"change\");\r\n            }\r\n            if (value === this.options.max) {\r\n                this._trigger(\"complete\");\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Slider 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/slider/\r\n     */\r\n\r\n\r\n    var slider = $.widget(\"ui.slider\", $.ui.mouse, {\r\n        version: \"1.11.4\",\r\n        widgetEventPrefix: \"slide\",\r\n\r\n        options: {\r\n            animate: false,\r\n            distance: 0,\r\n            max: 100,\r\n            min: 0,\r\n            orientation: \"horizontal\",\r\n            range: false,\r\n            step: 1,\r\n            value: 0,\r\n            values: null,\r\n\r\n            // callbacks\r\n            change: null,\r\n            slide: null,\r\n            start: null,\r\n            stop: null\r\n        },\r\n\r\n        // number of pages in a slider\r\n        // (how many times can you page up/down to go through the whole range)\r\n        numPages: 5,\r\n\r\n        _create: function () {\r\n            this._keySliding = false;\r\n            this._mouseSliding = false;\r\n            this._animateOff = true;\r\n            this._handleIndex = null;\r\n            this._detectOrientation();\r\n            this._mouseInit();\r\n            this._calculateNewMax();\r\n\r\n            this.element\r\n                .addClass(\"ui-slider\" +\r\n                    \" ui-slider-\" + this.orientation +\r\n                    \" ui-widget\" +\r\n                    \" ui-widget-content\" +\r\n                    \" ui-corner-all\");\r\n\r\n            this._refresh();\r\n            this._setOption(\"disabled\", this.options.disabled);\r\n\r\n            this._animateOff = false;\r\n        },\r\n\r\n        _refresh: function () {\r\n            this._createRange();\r\n            this._createHandles();\r\n            this._setupEvents();\r\n            this._refreshValue();\r\n        },\r\n\r\n        _createHandles: function () {\r\n            var i, handleCount,\r\n                options = this.options,\r\n                existingHandles = this.element.find(\".ui-slider-handle\").addClass(\"ui-state-default ui-corner-all\"),\r\n                handle = \"<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>\",\r\n                handles = [];\r\n\r\n            handleCount = (options.values && options.values.length) || 1;\r\n\r\n            if (existingHandles.length > handleCount) {\r\n                existingHandles.slice(handleCount).remove();\r\n                existingHandles = existingHandles.slice(0, handleCount);\r\n            }\r\n\r\n            for (i = existingHandles.length; i < handleCount; i++) {\r\n                handles.push(handle);\r\n            }\r\n\r\n            this.handles = existingHandles.add($(handles.join(\"\")).appendTo(this.element));\r\n\r\n            this.handle = this.handles.eq(0);\r\n\r\n            this.handles.each(function (i) {\r\n                $(this).data(\"ui-slider-handle-index\", i);\r\n            });\r\n        },\r\n\r\n        _createRange: function () {\r\n            var options = this.options,\r\n                classes = \"\";\r\n\r\n            if (options.range) {\r\n                if (options.range === true) {\r\n                    if (!options.values) {\r\n                        options.values = [this._valueMin(), this._valueMin()];\r\n                    } else if (options.values.length && options.values.length !== 2) {\r\n                        options.values = [options.values[0], options.values[0]];\r\n                    } else if (Array.isArray(options.values)) {\r\n                        options.values = options.values.slice(0);\r\n                    }\r\n                }\r\n\r\n                if (!this.range || !this.range.length) {\r\n                    this.range = $(\"<div></div>\")\r\n                        .appendTo(this.element);\r\n\r\n                    classes = \"ui-slider-range\" +\r\n                        // note: this isn't the most fittingly semantic framework class for this element,\r\n                        // but worked best visually with a variety of themes\r\n                        \" ui-widget-header ui-corner-all\";\r\n                } else {\r\n                    this.range.removeClass(\"ui-slider-range-min ui-slider-range-max\")\r\n                        // Handle range switching from true to min/max\r\n                        .css({\r\n                            \"left\": \"\",\r\n                            \"bottom\": \"\"\r\n                        });\r\n                }\r\n\r\n                this.range.addClass(classes +\r\n                    ((options.range === \"min\" || options.range === \"max\") ? \" ui-slider-range-\" + options.range : \"\"));\r\n            } else {\r\n                if (this.range) {\r\n                    this.range.remove();\r\n                }\r\n                this.range = null;\r\n            }\r\n        },\r\n\r\n        _setupEvents: function () {\r\n            this._off(this.handles);\r\n            this._on(this.handles, this._handleEvents);\r\n            this._hoverable(this.handles);\r\n            this._focusable(this.handles);\r\n        },\r\n\r\n        _destroy: function () {\r\n            this.handles.remove();\r\n            if (this.range) {\r\n                this.range.remove();\r\n            }\r\n\r\n            this.element\r\n                .removeClass(\"ui-slider\" +\r\n                    \" ui-slider-horizontal\" +\r\n                    \" ui-slider-vertical\" +\r\n                    \" ui-widget\" +\r\n                    \" ui-widget-content\" +\r\n                    \" ui-corner-all\");\r\n\r\n            this._mouseDestroy();\r\n        },\r\n\r\n        _mouseCapture: function (event) {\r\n            var position, normValue, distance, closestHandle, index, allowed, offset, mouseOverHandle,\r\n                that = this,\r\n                o = this.options;\r\n\r\n            if (o.disabled) {\r\n                return false;\r\n            }\r\n\r\n            this.elementSize = {\r\n                width: this.element.outerWidth(),\r\n                height: this.element.outerHeight()\r\n            };\r\n            this.elementOffset = this.element.offset();\r\n\r\n            position = { x: event.pageX, y: event.pageY };\r\n            normValue = this._normValueFromMouse(position);\r\n            distance = this._valueMax() - this._valueMin() + 1;\r\n            this.handles.each(function (i) {\r\n                var thisDistance = Math.abs(normValue - that.values(i));\r\n                if ((distance > thisDistance) ||\r\n                    (distance === thisDistance &&\r\n                        (i === that._lastChangedValue || that.values(i) === o.min))) {\r\n                    distance = thisDistance;\r\n                    closestHandle = $(this);\r\n                    index = i;\r\n                }\r\n            });\r\n\r\n            allowed = this._start(event, index);\r\n            if (allowed === false) {\r\n                return false;\r\n            }\r\n            this._mouseSliding = true;\r\n\r\n            this._handleIndex = index;\r\n\r\n            closestHandle\r\n                .addClass(\"ui-state-active\")\r\n                .focus();\r\n\r\n            offset = closestHandle.offset();\r\n            mouseOverHandle = !$(event.target).parents().addBack().is(\".ui-slider-handle\");\r\n            this._clickOffset = mouseOverHandle ? { left: 0, top: 0 } : {\r\n                left: event.pageX - offset.left - (closestHandle.width() / 2),\r\n                top: event.pageY - offset.top -\r\n                    (closestHandle.height() / 2) -\r\n                    (parseInt(closestHandle.css(\"borderTopWidth\"), 10) || 0) -\r\n                    (parseInt(closestHandle.css(\"borderBottomWidth\"), 10) || 0) +\r\n                    (parseInt(closestHandle.css(\"marginTop\"), 10) || 0)\r\n            };\r\n\r\n            if (!this.handles.hasClass(\"ui-state-hover\")) {\r\n                this._slide(event, index, normValue);\r\n            }\r\n            this._animateOff = true;\r\n            return true;\r\n        },\r\n\r\n        _mouseStart: function () {\r\n            return true;\r\n        },\r\n\r\n        _mouseDrag: function (event) {\r\n            var position = { x: event.pageX, y: event.pageY },\r\n                normValue = this._normValueFromMouse(position);\r\n\r\n            this._slide(event, this._handleIndex, normValue);\r\n\r\n            return false;\r\n        },\r\n\r\n        _mouseStop: function (event) {\r\n            this.handles.removeClass(\"ui-state-active\");\r\n            this._mouseSliding = false;\r\n\r\n            this._stop(event, this._handleIndex);\r\n            this._change(event, this._handleIndex);\r\n\r\n            this._handleIndex = null;\r\n            this._clickOffset = null;\r\n            this._animateOff = false;\r\n\r\n            return false;\r\n        },\r\n\r\n        _detectOrientation: function () {\r\n            this.orientation = (this.options.orientation === \"vertical\") ? \"vertical\" : \"horizontal\";\r\n        },\r\n\r\n        _normValueFromMouse: function (position) {\r\n            var pixelTotal,\r\n                pixelMouse,\r\n                percentMouse,\r\n                valueTotal,\r\n                valueMouse;\r\n\r\n            if (this.orientation === \"horizontal\") {\r\n                pixelTotal = this.elementSize.width;\r\n                pixelMouse = position.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0);\r\n            } else {\r\n                pixelTotal = this.elementSize.height;\r\n                pixelMouse = position.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0);\r\n            }\r\n\r\n            percentMouse = (pixelMouse / pixelTotal);\r\n            if (percentMouse > 1) {\r\n                percentMouse = 1;\r\n            }\r\n            if (percentMouse < 0) {\r\n                percentMouse = 0;\r\n            }\r\n            if (this.orientation === \"vertical\") {\r\n                percentMouse = 1 - percentMouse;\r\n            }\r\n\r\n            valueTotal = this._valueMax() - this._valueMin();\r\n            valueMouse = this._valueMin() + percentMouse * valueTotal;\r\n\r\n            return this._trimAlignValue(valueMouse);\r\n        },\r\n\r\n        _start: function (event, index) {\r\n            var uiHash = {\r\n                handle: this.handles[index],\r\n                value: this.value()\r\n            };\r\n            if (this.options.values && this.options.values.length) {\r\n                uiHash.value = this.values(index);\r\n                uiHash.values = this.values();\r\n            }\r\n            return this._trigger(\"start\", event, uiHash);\r\n        },\r\n\r\n        _slide: function (event, index, newVal) {\r\n            var otherVal,\r\n                newValues,\r\n                allowed;\r\n\r\n            if (this.options.values && this.options.values.length) {\r\n                otherVal = this.values(index ? 0 : 1);\r\n\r\n                if ((this.options.values.length === 2 && this.options.range === true) &&\r\n                    ((index === 0 && newVal > otherVal) || (index === 1 && newVal < otherVal))\r\n                ) {\r\n                    newVal = otherVal;\r\n                }\r\n\r\n                if (newVal !== this.values(index)) {\r\n                    newValues = this.values();\r\n                    newValues[index] = newVal;\r\n                    // A slide can be canceled by returning false from the slide callback\r\n                    allowed = this._trigger(\"slide\", event, {\r\n                        handle: this.handles[index],\r\n                        value: newVal,\r\n                        values: newValues\r\n                    });\r\n                    otherVal = this.values(index ? 0 : 1);\r\n                    if (allowed !== false) {\r\n                        this.values(index, newVal);\r\n                    }\r\n                }\r\n            } else {\r\n                if (newVal !== this.value()) {\r\n                    // A slide can be canceled by returning false from the slide callback\r\n                    allowed = this._trigger(\"slide\", event, {\r\n                        handle: this.handles[index],\r\n                        value: newVal\r\n                    });\r\n                    if (allowed !== false) {\r\n                        this.value(newVal);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        _stop: function (event, index) {\r\n            var uiHash = {\r\n                handle: this.handles[index],\r\n                value: this.value()\r\n            };\r\n            if (this.options.values && this.options.values.length) {\r\n                uiHash.value = this.values(index);\r\n                uiHash.values = this.values();\r\n            }\r\n\r\n            this._trigger(\"stop\", event, uiHash);\r\n        },\r\n\r\n        _change: function (event, index) {\r\n            if (!this._keySliding && !this._mouseSliding) {\r\n                var uiHash = {\r\n                    handle: this.handles[index],\r\n                    value: this.value()\r\n                };\r\n                if (this.options.values && this.options.values.length) {\r\n                    uiHash.value = this.values(index);\r\n                    uiHash.values = this.values();\r\n                }\r\n\r\n                //store the last changed value index for reference when handles overlap\r\n                this._lastChangedValue = index;\r\n\r\n                this._trigger(\"change\", event, uiHash);\r\n            }\r\n        },\r\n\r\n        value: function (newValue) {\r\n            if (arguments.length) {\r\n                this.options.value = this._trimAlignValue(newValue);\r\n                this._refreshValue();\r\n                this._change(null, 0);\r\n                return;\r\n            }\r\n\r\n            return this._value();\r\n        },\r\n\r\n        values: function (index, newValue) {\r\n            var vals,\r\n                newValues,\r\n                i;\r\n\r\n            if (arguments.length > 1) {\r\n                this.options.values[index] = this._trimAlignValue(newValue);\r\n                this._refreshValue();\r\n                this._change(null, index);\r\n                return;\r\n            }\r\n\r\n            if (arguments.length) {\r\n                if (Array.isArray(arguments[0])) {\r\n                    vals = this.options.values;\r\n                    newValues = arguments[0];\r\n                    for (i = 0; i < vals.length; i += 1) {\r\n                        vals[i] = this._trimAlignValue(newValues[i]);\r\n                        this._change(null, i);\r\n                    }\r\n                    this._refreshValue();\r\n                } else {\r\n                    if (this.options.values && this.options.values.length) {\r\n                        return this._values(index);\r\n                    } else {\r\n                        return this.value();\r\n                    }\r\n                }\r\n            } else {\r\n                return this._values();\r\n            }\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            var i,\r\n                valsLength = 0;\r\n\r\n            if (key === \"range\" && this.options.range === true) {\r\n                if (value === \"min\") {\r\n                    this.options.value = this._values(0);\r\n                    this.options.values = null;\r\n                } else if (value === \"max\") {\r\n                    this.options.value = this._values(this.options.values.length - 1);\r\n                    this.options.values = null;\r\n                }\r\n            }\r\n\r\n            if (Array.isArray(this.options.values)) {\r\n                valsLength = this.options.values.length;\r\n            }\r\n\r\n            if (key === \"disabled\") {\r\n                this.element.toggleClass(\"ui-state-disabled\", !!value);\r\n            }\r\n\r\n            this._super(key, value);\r\n\r\n            switch (key) {\r\n                case \"orientation\":\r\n                    this._detectOrientation();\r\n                    this.element\r\n                        .removeClass(\"ui-slider-horizontal ui-slider-vertical\")\r\n                        .addClass(\"ui-slider-\" + this.orientation);\r\n                    this._refreshValue();\r\n\r\n                    // Reset positioning from previous orientation\r\n                    this.handles.css(value === \"horizontal\" ? \"bottom\" : \"left\", \"\");\r\n                    break;\r\n                case \"value\":\r\n                    this._animateOff = true;\r\n                    this._refreshValue();\r\n                    this._change(null, 0);\r\n                    this._animateOff = false;\r\n                    break;\r\n                case \"values\":\r\n                    this._animateOff = true;\r\n                    this._refreshValue();\r\n                    for (i = 0; i < valsLength; i += 1) {\r\n                        this._change(null, i);\r\n                    }\r\n                    this._animateOff = false;\r\n                    break;\r\n                case \"step\":\r\n                case \"min\":\r\n                case \"max\":\r\n                    this._animateOff = true;\r\n                    this._calculateNewMax();\r\n                    this._refreshValue();\r\n                    this._animateOff = false;\r\n                    break;\r\n                case \"range\":\r\n                    this._animateOff = true;\r\n                    this._refresh();\r\n                    this._animateOff = false;\r\n                    break;\r\n            }\r\n        },\r\n\r\n        //internal value getter\r\n        // _value() returns value trimmed by min and max, aligned by step\r\n        _value: function () {\r\n            var val = this.options.value;\r\n            val = this._trimAlignValue(val);\r\n\r\n            return val;\r\n        },\r\n\r\n        //internal values getter\r\n        // _values() returns array of values trimmed by min and max, aligned by step\r\n        // _values( index ) returns single value trimmed by min and max, aligned by step\r\n        _values: function (index) {\r\n            var val,\r\n                vals,\r\n                i;\r\n\r\n            if (arguments.length) {\r\n                val = this.options.values[index];\r\n                val = this._trimAlignValue(val);\r\n\r\n                return val;\r\n            } else if (this.options.values && this.options.values.length) {\r\n                // .slice() creates a copy of the array\r\n                // this copy gets trimmed by min and max and then returned\r\n                vals = this.options.values.slice();\r\n                for (i = 0; i < vals.length; i += 1) {\r\n                    vals[i] = this._trimAlignValue(vals[i]);\r\n                }\r\n\r\n                return vals;\r\n            } else {\r\n                return [];\r\n            }\r\n        },\r\n\r\n        // returns the step-aligned value that val is closest to, between (inclusive) min and max\r\n        _trimAlignValue: function (val) {\r\n            if (val <= this._valueMin()) {\r\n                return this._valueMin();\r\n            }\r\n            if (val >= this._valueMax()) {\r\n                return this._valueMax();\r\n            }\r\n            var step = (this.options.step > 0) ? this.options.step : 1,\r\n                valModStep = (val - this._valueMin()) % step,\r\n                alignValue = val - valModStep;\r\n\r\n            if (Math.abs(valModStep) * 2 >= step) {\r\n                alignValue += (valModStep > 0) ? step : (-step);\r\n            }\r\n\r\n            // Since JavaScript has problems with large floats, round\r\n            // the final value to 5 digits after the decimal point (see #4124)\r\n            return parseFloat(alignValue.toFixed(5));\r\n        },\r\n\r\n        _calculateNewMax: function () {\r\n            var max = this.options.max,\r\n                min = this._valueMin(),\r\n                step = this.options.step,\r\n                aboveMin = Math.floor((+(max - min).toFixed(this._precision())) / step) * step;\r\n            max = aboveMin + min;\r\n            this.max = parseFloat(max.toFixed(this._precision()));\r\n        },\r\n\r\n        _precision: function () {\r\n            var precision = this._precisionOf(this.options.step);\r\n            if (this.options.min !== null) {\r\n                precision = Math.max(precision, this._precisionOf(this.options.min));\r\n            }\r\n            return precision;\r\n        },\r\n\r\n        _precisionOf: function (num) {\r\n            var str = num.toString(),\r\n                decimal = str.indexOf(\".\");\r\n            return decimal === -1 ? 0 : str.length - decimal - 1;\r\n        },\r\n\r\n        _valueMin: function () {\r\n            return this.options.min;\r\n        },\r\n\r\n        _valueMax: function () {\r\n            return this.max;\r\n        },\r\n\r\n        _refreshValue: function () {\r\n            var lastValPercent, valPercent, value, valueMin, valueMax,\r\n                oRange = this.options.range,\r\n                o = this.options,\r\n                that = this,\r\n                animate = (!this._animateOff) ? o.animate : false,\r\n                _set = {};\r\n\r\n            if (this.options.values && this.options.values.length) {\r\n                this.handles.each(function (i) {\r\n                    valPercent = (that.values(i) - that._valueMin()) / (that._valueMax() - that._valueMin()) * 100;\r\n                    _set[that.orientation === \"horizontal\" ? \"left\" : \"bottom\"] = valPercent + \"%\";\r\n                    $(this).stop(1, 1)[animate ? \"animate\" : \"css\"](_set, o.animate);\r\n                    if (that.options.range === true) {\r\n                        if (that.orientation === \"horizontal\") {\r\n                            if (i === 0) {\r\n                                that.range.stop(1, 1)[animate ? \"animate\" : \"css\"]({ left: valPercent + \"%\" }, o.animate);\r\n                            }\r\n                            if (i === 1) {\r\n                                that.range[animate ? \"animate\" : \"css\"]({ width: (valPercent - lastValPercent) + \"%\" }, { queue: false, duration: o.animate });\r\n                            }\r\n                        } else {\r\n                            if (i === 0) {\r\n                                that.range.stop(1, 1)[animate ? \"animate\" : \"css\"]({ bottom: (valPercent) + \"%\" }, o.animate);\r\n                            }\r\n                            if (i === 1) {\r\n                                that.range[animate ? \"animate\" : \"css\"]({ height: (valPercent - lastValPercent) + \"%\" }, { queue: false, duration: o.animate });\r\n                            }\r\n                        }\r\n                    }\r\n                    lastValPercent = valPercent;\r\n                });\r\n            } else {\r\n                value = this.value();\r\n                valueMin = this._valueMin();\r\n                valueMax = this._valueMax();\r\n                valPercent = (valueMax !== valueMin) ?\r\n                    (value - valueMin) / (valueMax - valueMin) * 100 :\r\n                    0;\r\n                _set[this.orientation === \"horizontal\" ? \"left\" : \"bottom\"] = valPercent + \"%\";\r\n                this.handle.stop(1, 1)[animate ? \"animate\" : \"css\"](_set, o.animate);\r\n\r\n                if (oRange === \"min\" && this.orientation === \"horizontal\") {\r\n                    this.range.stop(1, 1)[animate ? \"animate\" : \"css\"]({ width: valPercent + \"%\" }, o.animate);\r\n                }\r\n                if (oRange === \"max\" && this.orientation === \"horizontal\") {\r\n                    this.range[animate ? \"animate\" : \"css\"]({ width: (100 - valPercent) + \"%\" }, { queue: false, duration: o.animate });\r\n                }\r\n                if (oRange === \"min\" && this.orientation === \"vertical\") {\r\n                    this.range.stop(1, 1)[animate ? \"animate\" : \"css\"]({ height: valPercent + \"%\" }, o.animate);\r\n                }\r\n                if (oRange === \"max\" && this.orientation === \"vertical\") {\r\n                    this.range[animate ? \"animate\" : \"css\"]({ height: (100 - valPercent) + \"%\" }, { queue: false, duration: o.animate });\r\n                }\r\n            }\r\n        },\r\n\r\n        _handleEvents: {\r\n            keydown: function (event) {\r\n                var allowed, curVal, newVal, step,\r\n                    index = $(event.target).data(\"ui-slider-handle-index\");\r\n\r\n                switch (event.keyCode) {\r\n                    case $.ui.keyCode.HOME:\r\n                    case $.ui.keyCode.END:\r\n                    case $.ui.keyCode.PAGE_UP:\r\n                    case $.ui.keyCode.PAGE_DOWN:\r\n                    case $.ui.keyCode.UP:\r\n                    case $.ui.keyCode.RIGHT:\r\n                    case $.ui.keyCode.DOWN:\r\n                    case $.ui.keyCode.LEFT:\r\n                        event.preventDefault();\r\n                        if (!this._keySliding) {\r\n                            this._keySliding = true;\r\n                            $(event.target).addClass(\"ui-state-active\");\r\n                            allowed = this._start(event, index);\r\n                            if (allowed === false) {\r\n                                return;\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                step = this.options.step;\r\n                if (this.options.values && this.options.values.length) {\r\n                    curVal = newVal = this.values(index);\r\n                } else {\r\n                    curVal = newVal = this.value();\r\n                }\r\n\r\n                switch (event.keyCode) {\r\n                    case $.ui.keyCode.HOME:\r\n                        newVal = this._valueMin();\r\n                        break;\r\n                    case $.ui.keyCode.END:\r\n                        newVal = this._valueMax();\r\n                        break;\r\n                    case $.ui.keyCode.PAGE_UP:\r\n                        newVal = this._trimAlignValue(\r\n                            curVal + ((this._valueMax() - this._valueMin()) / this.numPages)\r\n                        );\r\n                        break;\r\n                    case $.ui.keyCode.PAGE_DOWN:\r\n                        newVal = this._trimAlignValue(\r\n                            curVal - ((this._valueMax() - this._valueMin()) / this.numPages));\r\n                        break;\r\n                    case $.ui.keyCode.UP:\r\n                    case $.ui.keyCode.RIGHT:\r\n                        if (curVal === this._valueMax()) {\r\n                            return;\r\n                        }\r\n                        newVal = this._trimAlignValue(curVal + step);\r\n                        break;\r\n                    case $.ui.keyCode.DOWN:\r\n                    case $.ui.keyCode.LEFT:\r\n                        if (curVal === this._valueMin()) {\r\n                            return;\r\n                        }\r\n                        newVal = this._trimAlignValue(curVal - step);\r\n                        break;\r\n                }\r\n\r\n                this._slide(event, index, newVal);\r\n            },\r\n            keyup: function (event) {\r\n                var index = $(event.target).data(\"ui-slider-handle-index\");\r\n\r\n                if (this._keySliding) {\r\n                    this._keySliding = false;\r\n                    this._stop(event, index);\r\n                    this._change(event, index);\r\n                    $(event.target).removeClass(\"ui-state-active\");\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Spinner 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/spinner/\r\n     */\r\n\r\n\r\n    function spinner_modifier(fn) {\r\n        return function () {\r\n            var previous = this.element.val();\r\n            fn.apply(this, arguments);\r\n            this._refresh();\r\n            if (previous !== this.element.val()) {\r\n                this._trigger(\"change\");\r\n            }\r\n        };\r\n    }\r\n\r\n    var spinner = $.widget(\"ui.spinner\", {\r\n        version: \"1.11.4\",\r\n        defaultElement: \"<input>\",\r\n        widgetEventPrefix: \"spin\",\r\n        options: {\r\n            culture: null,\r\n            icons: {\r\n                down: \"ui-icon-triangle-1-s\",\r\n                up: \"ui-icon-triangle-1-n\"\r\n            },\r\n            incremental: true,\r\n            max: null,\r\n            min: null,\r\n            numberFormat: null,\r\n            page: 10,\r\n            step: 1,\r\n\r\n            change: null,\r\n            spin: null,\r\n            start: null,\r\n            stop: null\r\n        },\r\n\r\n        _create: function () {\r\n            // handle string values that need to be parsed\r\n            this._setOption(\"max\", this.options.max);\r\n            this._setOption(\"min\", this.options.min);\r\n            this._setOption(\"step\", this.options.step);\r\n\r\n            // Only format if there is a value, prevents the field from being marked\r\n            // as invalid in Firefox, see #9573.\r\n            if (this.value() !== \"\") {\r\n                // Format the value, but don't constrain.\r\n                this._value(this.element.val(), true);\r\n            }\r\n\r\n            this._draw();\r\n            this._on(this._events);\r\n            this._refresh();\r\n\r\n            // turning off autocomplete prevents the browser from remembering the\r\n            // value when navigating through history, so we re-enable autocomplete\r\n            // if the page is unloaded before the widget is destroyed. #7790\r\n            this._on(this.window, {\r\n                beforeunload: function () {\r\n                    this.element.removeAttr(\"autocomplete\");\r\n                }\r\n            });\r\n        },\r\n\r\n        _getCreateOptions: function () {\r\n            var options = {},\r\n                element = this.element;\r\n\r\n            $.each([\"min\", \"max\", \"step\"], function (i, option) {\r\n                var value = element.attr(option);\r\n                if (value !== undefined && value.length) {\r\n                    options[option] = value;\r\n                }\r\n            });\r\n\r\n            return options;\r\n        },\r\n\r\n        _events: {\r\n            keydown: function (event) {\r\n                if (this._start(event) && this._keydown(event)) {\r\n                    event.preventDefault();\r\n                }\r\n            },\r\n            keyup: \"_stop\",\r\n            focus: function () {\r\n                this.previous = this.element.val();\r\n            },\r\n            blur: function (event) {\r\n                if (this.cancelBlur) {\r\n                    delete this.cancelBlur;\r\n                    return;\r\n                }\r\n\r\n                this._stop();\r\n                this._refresh();\r\n                if (this.previous !== this.element.val()) {\r\n                    this._trigger(\"change\", event);\r\n                }\r\n            },\r\n            mousewheel: function (event, delta) {\r\n                if (!delta) {\r\n                    return;\r\n                }\r\n                if (!this.spinning && !this._start(event)) {\r\n                    return false;\r\n                }\r\n\r\n                this._spin((delta > 0 ? 1 : -1) * this.options.step, event);\r\n                clearTimeout(this.mousewheelTimer);\r\n                this.mousewheelTimer = this._delay(function () {\r\n                    if (this.spinning) {\r\n                        this._stop(event);\r\n                    }\r\n                }, 100);\r\n                event.preventDefault();\r\n            },\r\n            \"mousedown .ui-spinner-button\": function (event) {\r\n                var previous;\r\n\r\n                // We never want the buttons to have focus; whenever the user is\r\n                // interacting with the spinner, the focus should be on the input.\r\n                // If the input is focused then this.previous is properly set from\r\n                // when the input first received focus. If the input is not focused\r\n                // then we need to set this.previous based on the value before spinning.\r\n                previous = this.element[0] === this.document[0].activeElement ?\r\n                    this.previous : this.element.val();\r\n                function checkFocus() {\r\n                    var isActive = this.element[0] === this.document[0].activeElement;\r\n                    if (!isActive) {\r\n                        this.element.focus();\r\n                        this.previous = previous;\r\n                        // support: IE\r\n                        // IE sets focus asynchronously, so we need to check if focus\r\n                        // moved off of the input because the user clicked on the button.\r\n                        this._delay(function () {\r\n                            this.previous = previous;\r\n                        });\r\n                    }\r\n                }\r\n\r\n                // ensure focus is on (or stays on) the text field\r\n                event.preventDefault();\r\n                checkFocus.call(this);\r\n\r\n                // support: IE\r\n                // IE doesn't prevent moving focus even with event.preventDefault()\r\n                // so we set a flag to know when we should ignore the blur event\r\n                // and check (again) if focus moved off of the input.\r\n                this.cancelBlur = true;\r\n                this._delay(function () {\r\n                    delete this.cancelBlur;\r\n                    checkFocus.call(this);\r\n                });\r\n\r\n                if (this._start(event) === false) {\r\n                    return;\r\n                }\r\n\r\n                this._repeat(null, $(event.currentTarget).hasClass(\"ui-spinner-up\") ? 1 : -1, event);\r\n            },\r\n            \"mouseup .ui-spinner-button\": \"_stop\",\r\n            \"mouseenter .ui-spinner-button\": function (event) {\r\n                // button will add ui-state-active if mouse was down while mouseleave and kept down\r\n                if (!$(event.currentTarget).hasClass(\"ui-state-active\")) {\r\n                    return;\r\n                }\r\n\r\n                if (this._start(event) === false) {\r\n                    return false;\r\n                }\r\n                this._repeat(null, $(event.currentTarget).hasClass(\"ui-spinner-up\") ? 1 : -1, event);\r\n            },\r\n            // TODO: do we really want to consider this a stop?\r\n            // shouldn't we just stop the repeater and wait until mouseup before\r\n            // we trigger the stop event?\r\n            \"mouseleave .ui-spinner-button\": \"_stop\"\r\n        },\r\n\r\n        _draw: function () {\r\n            var uiSpinner = this.uiSpinner = this.element\r\n                .addClass(\"ui-spinner-input\")\r\n                .attr(\"autocomplete\", \"off\")\r\n                .wrap(this._uiSpinnerHtml())\r\n                .parent()\r\n                // add buttons\r\n                .append(this._buttonHtml());\r\n\r\n            this.element.attr(\"role\", \"spinbutton\");\r\n\r\n            // button bindings\r\n            this.buttons = uiSpinner.find(\".ui-spinner-button\")\r\n                .attr(\"tabIndex\", -1)\r\n                .button()\r\n                .removeClass(\"ui-corner-all\");\r\n\r\n            // IE 6 doesn't understand height: 50% for the buttons\r\n            // unless the wrapper has an explicit height\r\n            if (this.buttons.height() > Math.ceil(uiSpinner.height() * 0.5) &&\r\n                uiSpinner.height() > 0) {\r\n                uiSpinner.height(uiSpinner.height());\r\n            }\r\n\r\n            // disable spinner if element was already disabled\r\n            if (this.options.disabled) {\r\n                this.disable();\r\n            }\r\n        },\r\n\r\n        _keydown: function (event) {\r\n            var options = this.options,\r\n                keyCode = $.ui.keyCode;\r\n\r\n            switch (event.keyCode) {\r\n                case keyCode.UP:\r\n                    this._repeat(null, 1, event);\r\n                    return true;\r\n                case keyCode.DOWN:\r\n                    this._repeat(null, -1, event);\r\n                    return true;\r\n                case keyCode.PAGE_UP:\r\n                    this._repeat(null, options.page, event);\r\n                    return true;\r\n                case keyCode.PAGE_DOWN:\r\n                    this._repeat(null, -options.page, event);\r\n                    return true;\r\n            }\r\n\r\n            return false;\r\n        },\r\n\r\n        _uiSpinnerHtml: function () {\r\n            return \"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>\";\r\n        },\r\n\r\n        _buttonHtml: function () {\r\n            return \"\" +\r\n                \"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>\" +\r\n                \"<span class='ui-icon \" + this.options.icons.up + \"'>&#9650;</span>\" +\r\n                \"</a>\" +\r\n                \"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>\" +\r\n                \"<span class='ui-icon \" + this.options.icons.down + \"'>&#9660;</span>\" +\r\n                \"</a>\";\r\n        },\r\n\r\n        _start: function (event) {\r\n            if (!this.spinning && this._trigger(\"start\", event) === false) {\r\n                return false;\r\n            }\r\n\r\n            if (!this.counter) {\r\n                this.counter = 1;\r\n            }\r\n            this.spinning = true;\r\n            return true;\r\n        },\r\n\r\n        _repeat: function (i, steps, event) {\r\n            i = i || 500;\r\n\r\n            clearTimeout(this.timer);\r\n            this.timer = this._delay(function () {\r\n                this._repeat(40, steps, event);\r\n            }, i);\r\n\r\n            this._spin(steps * this.options.step, event);\r\n        },\r\n\r\n        _spin: function (step, event) {\r\n            var value = this.value() || 0;\r\n\r\n            if (!this.counter) {\r\n                this.counter = 1;\r\n            }\r\n\r\n            value = this._adjustValue(value + step * this._increment(this.counter));\r\n\r\n            if (!this.spinning || this._trigger(\"spin\", event, { value: value }) !== false) {\r\n                this._value(value);\r\n                this.counter++;\r\n            }\r\n        },\r\n\r\n        _increment: function (i) {\r\n            var incremental = this.options.incremental;\r\n\r\n            if (incremental) {\r\n                return $.isFunction(incremental) ?\r\n                    incremental(i) :\r\n                    Math.floor(i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1);\r\n            }\r\n\r\n            return 1;\r\n        },\r\n\r\n        _precision: function () {\r\n            var precision = this._precisionOf(this.options.step);\r\n            if (this.options.min !== null) {\r\n                precision = Math.max(precision, this._precisionOf(this.options.min));\r\n            }\r\n            return precision;\r\n        },\r\n\r\n        _precisionOf: function (num) {\r\n            var str = num.toString(),\r\n                decimal = str.indexOf(\".\");\r\n            return decimal === -1 ? 0 : str.length - decimal - 1;\r\n        },\r\n\r\n        _adjustValue: function (value) {\r\n            var base, aboveMin,\r\n                options = this.options;\r\n\r\n            // make sure we're at a valid step\r\n            // - find out where we are relative to the base (min or 0)\r\n            base = options.min !== null ? options.min : 0;\r\n            aboveMin = value - base;\r\n            // - round to the nearest step\r\n            aboveMin = Math.round(aboveMin / options.step) * options.step;\r\n            // - rounding is based on 0, so adjust back to our base\r\n            value = base + aboveMin;\r\n\r\n            // fix precision from bad JS floating point math\r\n            value = parseFloat(value.toFixed(this._precision()));\r\n\r\n            // clamp the value\r\n            if (options.max !== null && value > options.max) {\r\n                return options.max;\r\n            }\r\n            if (options.min !== null && value < options.min) {\r\n                return options.min;\r\n            }\r\n\r\n            return value;\r\n        },\r\n\r\n        _stop: function (event) {\r\n            if (!this.spinning) {\r\n                return;\r\n            }\r\n\r\n            clearTimeout(this.timer);\r\n            clearTimeout(this.mousewheelTimer);\r\n            this.counter = 0;\r\n            this.spinning = false;\r\n            this._trigger(\"stop\", event);\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            if (key === \"culture\" || key === \"numberFormat\") {\r\n                var prevValue = this._parse(this.element.val());\r\n                this.options[key] = value;\r\n                this.element.val(this._format(prevValue));\r\n                return;\r\n            }\r\n\r\n            if (key === \"max\" || key === \"min\" || key === \"step\") {\r\n                if (typeof value === \"string\") {\r\n                    value = this._parse(value);\r\n                }\r\n            }\r\n            if (key === \"icons\") {\r\n                this.buttons.first().find(\".ui-icon\")\r\n                    .removeClass(this.options.icons.up)\r\n                    .addClass(value.up);\r\n                this.buttons.last().find(\".ui-icon\")\r\n                    .removeClass(this.options.icons.down)\r\n                    .addClass(value.down);\r\n            }\r\n\r\n            this._super(key, value);\r\n\r\n            if (key === \"disabled\") {\r\n                this.widget().toggleClass(\"ui-state-disabled\", !!value);\r\n                this.element.prop(\"disabled\", !!value);\r\n                this.buttons.button(value ? \"disable\" : \"enable\");\r\n            }\r\n        },\r\n\r\n        _setOptions: spinner_modifier(function (options) {\r\n            this._super(options);\r\n        }),\r\n\r\n        _parse: function (val) {\r\n            if (typeof val === \"string\" && val !== \"\") {\r\n                val = window.Globalize && this.options.numberFormat ?\r\n                    Globalize.parseFloat(val, 10, this.options.culture) : +val;\r\n            }\r\n            return val === \"\" || isNaN(val) ? null : val;\r\n        },\r\n\r\n        _format: function (value) {\r\n            if (value === \"\") {\r\n                return \"\";\r\n            }\r\n            return window.Globalize && this.options.numberFormat ?\r\n                Globalize.format(value, this.options.numberFormat, this.options.culture) :\r\n                value;\r\n        },\r\n\r\n        _refresh: function () {\r\n            this.element.attr({\r\n                \"aria-valuemin\": this.options.min,\r\n                \"aria-valuemax\": this.options.max,\r\n                // TODO: what should we do with values that can't be parsed?\r\n                \"aria-valuenow\": this._parse(this.element.val())\r\n            });\r\n        },\r\n\r\n        isValid: function () {\r\n            var value = this.value();\r\n\r\n            // null is invalid\r\n            if (value === null) {\r\n                return false;\r\n            }\r\n\r\n            // if value gets adjusted, it's invalid\r\n            return value === this._adjustValue(value);\r\n        },\r\n\r\n        // update the value without triggering change\r\n        _value: function (value, allowAny) {\r\n            var parsed;\r\n            if (value !== \"\") {\r\n                parsed = this._parse(value);\r\n                if (parsed !== null) {\r\n                    if (!allowAny) {\r\n                        parsed = this._adjustValue(parsed);\r\n                    }\r\n                    value = this._format(parsed);\r\n                }\r\n            }\r\n            this.element.val(value);\r\n            this._refresh();\r\n        },\r\n\r\n        _destroy: function () {\r\n            this.element\r\n                .removeClass(\"ui-spinner-input\")\r\n                .prop(\"disabled\", false)\r\n                .removeAttr(\"autocomplete\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"aria-valuemin\")\r\n                .removeAttr(\"aria-valuemax\")\r\n                .removeAttr(\"aria-valuenow\");\r\n            this.uiSpinner.replaceWith(this.element);\r\n        },\r\n\r\n        stepUp: spinner_modifier(function (steps) {\r\n            this._stepUp(steps);\r\n        }),\r\n        _stepUp: function (steps) {\r\n            if (this._start()) {\r\n                this._spin((steps || 1) * this.options.step);\r\n                this._stop();\r\n            }\r\n        },\r\n\r\n        stepDown: spinner_modifier(function (steps) {\r\n            this._stepDown(steps);\r\n        }),\r\n        _stepDown: function (steps) {\r\n            if (this._start()) {\r\n                this._spin((steps || 1) * -this.options.step);\r\n                this._stop();\r\n            }\r\n        },\r\n\r\n        pageUp: spinner_modifier(function (pages) {\r\n            this._stepUp((pages || 1) * this.options.page);\r\n        }),\r\n\r\n        pageDown: spinner_modifier(function (pages) {\r\n            this._stepDown((pages || 1) * this.options.page);\r\n        }),\r\n\r\n        value: function (newVal) {\r\n            if (!arguments.length) {\r\n                return this._parse(this.element.val());\r\n            }\r\n            spinner_modifier(this._value).call(this, newVal);\r\n        },\r\n\r\n        widget: function () {\r\n            return this.uiSpinner;\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Tabs 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/tabs/\r\n     */\r\n\r\n\r\n    var tabs = $.widget(\"ui.tabs\", {\r\n        version: \"1.11.4\",\r\n        delay: 300,\r\n        options: {\r\n            active: null,\r\n            collapsible: false,\r\n            event: \"click\",\r\n            heightStyle: \"content\",\r\n            hide: null,\r\n            show: null,\r\n\r\n            // callbacks\r\n            activate: null,\r\n            beforeActivate: null,\r\n            beforeLoad: null,\r\n            load: null\r\n        },\r\n\r\n        _isLocal: (function () {\r\n            var rhash = /#.*$/;\r\n\r\n            return function (anchor) {\r\n                var anchorUrl, locationUrl;\r\n\r\n                // support: IE7\r\n                // IE7 doesn't normalize the href property when set via script (#9317)\r\n                anchor = anchor.cloneNode(false);\r\n\r\n                anchorUrl = anchor.href.replace(rhash, \"\");\r\n                locationUrl = location.href.replace(rhash, \"\");\r\n\r\n                // decoding may throw an error if the URL isn't UTF-8 (#9518)\r\n                try {\r\n                    anchorUrl = decodeURIComponent(anchorUrl);\r\n                } catch (error) { }\r\n                try {\r\n                    locationUrl = decodeURIComponent(locationUrl);\r\n                } catch (error) { }\r\n\r\n                return anchor.hash.length > 1 && anchorUrl === locationUrl;\r\n            };\r\n        })(),\r\n\r\n        _create: function () {\r\n            var that = this,\r\n                options = this.options;\r\n\r\n            this.running = false;\r\n\r\n            this.element\r\n                .addClass(\"ui-tabs ui-widget ui-widget-content ui-corner-all\")\r\n                .toggleClass(\"ui-tabs-collapsible\", options.collapsible);\r\n\r\n            this._processTabs();\r\n            options.active = this._initialActive();\r\n\r\n            // Take disabling tabs via class attribute from HTML\r\n            // into account and update option properly.\r\n            if (Array.isArray(options.disabled)) {\r\n                options.disabled = $.unique(options.disabled.concat(\r\n                    $.map(this.tabs.filter(\".ui-state-disabled\"), function (li) {\r\n                        return that.tabs.index(li);\r\n                    })\r\n                )).sort();\r\n            }\r\n\r\n            // check for length avoids error when initializing empty list\r\n            if (this.options.active !== false && this.anchors.length) {\r\n                this.active = this._findActive(options.active);\r\n            } else {\r\n                this.active = $();\r\n            }\r\n\r\n            this._refresh();\r\n\r\n            if (this.active.length) {\r\n                this.load(options.active);\r\n            }\r\n        },\r\n\r\n        _initialActive: function () {\r\n            var active = this.options.active,\r\n                collapsible = this.options.collapsible,\r\n                locationHash = location.hash.substring(1);\r\n\r\n            if (active === null) {\r\n                // check the fragment identifier in the URL\r\n                if (locationHash) {\r\n                    this.tabs.each(function (i, tab) {\r\n                        if ($(tab).attr(\"aria-controls\") === locationHash) {\r\n                            active = i;\r\n                            return false;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // check for a tab marked active via a class\r\n                if (active === null) {\r\n                    active = this.tabs.index(this.tabs.filter(\".ui-tabs-active\"));\r\n                }\r\n\r\n                // no active tab, set to false\r\n                if (active === null || active === -1) {\r\n                    active = this.tabs.length ? 0 : false;\r\n                }\r\n            }\r\n\r\n            // handle numbers: negative, out of range\r\n            if (active !== false) {\r\n                active = this.tabs.index(this.tabs.eq(active));\r\n                if (active === -1) {\r\n                    active = collapsible ? false : 0;\r\n                }\r\n            }\r\n\r\n            // don't allow collapsible: false and active: false\r\n            if (!collapsible && active === false && this.anchors.length) {\r\n                active = 0;\r\n            }\r\n\r\n            return active;\r\n        },\r\n\r\n        _getCreateEventData: function () {\r\n            return {\r\n                tab: this.active,\r\n                panel: !this.active.length ? $() : this._getPanelForTab(this.active)\r\n            };\r\n        },\r\n\r\n        _tabKeydown: function (event) {\r\n            var focusedTab = $(this.document[0].activeElement).closest(\"li\"),\r\n                selectedIndex = this.tabs.index(focusedTab),\r\n                goingForward = true;\r\n\r\n            if (this._handlePageNav(event)) {\r\n                return;\r\n            }\r\n\r\n            switch (event.keyCode) {\r\n                case $.ui.keyCode.RIGHT:\r\n                case $.ui.keyCode.DOWN:\r\n                    selectedIndex++;\r\n                    break;\r\n                case $.ui.keyCode.UP:\r\n                case $.ui.keyCode.LEFT:\r\n                    goingForward = false;\r\n                    selectedIndex--;\r\n                    break;\r\n                case $.ui.keyCode.END:\r\n                    selectedIndex = this.anchors.length - 1;\r\n                    break;\r\n                case $.ui.keyCode.HOME:\r\n                    selectedIndex = 0;\r\n                    break;\r\n                case $.ui.keyCode.SPACE:\r\n                    // Activate only, no collapsing\r\n                    event.preventDefault();\r\n                    clearTimeout(this.activating);\r\n                    this._activate(selectedIndex);\r\n                    return;\r\n                case $.ui.keyCode.ENTER:\r\n                    // Toggle (cancel delayed activation, allow collapsing)\r\n                    event.preventDefault();\r\n                    clearTimeout(this.activating);\r\n                    // Determine if we should collapse or activate\r\n                    this._activate(selectedIndex === this.options.active ? false : selectedIndex);\r\n                    return;\r\n                default:\r\n                    return;\r\n            }\r\n\r\n            // Focus the appropriate tab, based on which key was pressed\r\n            event.preventDefault();\r\n            clearTimeout(this.activating);\r\n            selectedIndex = this._focusNextTab(selectedIndex, goingForward);\r\n\r\n            // Navigating with control/command key will prevent automatic activation\r\n            if (!event.ctrlKey && !event.metaKey) {\r\n\r\n                // Update aria-selected immediately so that AT think the tab is already selected.\r\n                // Otherwise AT may confuse the user by stating that they need to activate the tab,\r\n                // but the tab will already be activated by the time the announcement finishes.\r\n                focusedTab.attr(\"aria-selected\", \"false\");\r\n                this.tabs.eq(selectedIndex).attr(\"aria-selected\", \"true\");\r\n\r\n                this.activating = this._delay(function () {\r\n                    this.option(\"active\", selectedIndex);\r\n                }, this.delay);\r\n            }\r\n        },\r\n\r\n        _panelKeydown: function (event) {\r\n            if (this._handlePageNav(event)) {\r\n                return;\r\n            }\r\n\r\n            // Ctrl+up moves focus to the current tab\r\n            if (event.ctrlKey && event.keyCode === $.ui.keyCode.UP) {\r\n                event.preventDefault();\r\n                this.active.focus();\r\n            }\r\n        },\r\n\r\n        // Alt+page up/down moves focus to the previous/next tab (and activates)\r\n        _handlePageNav: function (event) {\r\n            if (event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP) {\r\n                this._activate(this._focusNextTab(this.options.active - 1, false));\r\n                return true;\r\n            }\r\n            if (event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN) {\r\n                this._activate(this._focusNextTab(this.options.active + 1, true));\r\n                return true;\r\n            }\r\n        },\r\n\r\n        _findNextTab: function (index, goingForward) {\r\n            var lastTabIndex = this.tabs.length - 1;\r\n\r\n            function constrain() {\r\n                if (index > lastTabIndex) {\r\n                    index = 0;\r\n                }\r\n                if (index < 0) {\r\n                    index = lastTabIndex;\r\n                }\r\n                return index;\r\n            }\r\n\r\n            while ($.inArray(constrain(), this.options.disabled) !== -1) {\r\n                index = goingForward ? index + 1 : index - 1;\r\n            }\r\n\r\n            return index;\r\n        },\r\n\r\n        _focusNextTab: function (index, goingForward) {\r\n            index = this._findNextTab(index, goingForward);\r\n            this.tabs.eq(index).focus();\r\n            return index;\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            if (key === \"active\") {\r\n                // _activate() will handle invalid values and update this.options\r\n                this._activate(value);\r\n                return;\r\n            }\r\n\r\n            if (key === \"disabled\") {\r\n                // don't use the widget factory's disabled handling\r\n                this._setupDisabled(value);\r\n                return;\r\n            }\r\n\r\n            this._super(key, value);\r\n\r\n            if (key === \"collapsible\") {\r\n                this.element.toggleClass(\"ui-tabs-collapsible\", value);\r\n                // Setting collapsible: false while collapsed; open first panel\r\n                if (!value && this.options.active === false) {\r\n                    this._activate(0);\r\n                }\r\n            }\r\n\r\n            if (key === \"event\") {\r\n                this._setupEvents(value);\r\n            }\r\n\r\n            if (key === \"heightStyle\") {\r\n                this._setupHeightStyle(value);\r\n            }\r\n        },\r\n\r\n        _sanitizeSelector: function (hash) {\r\n            return hash ? hash.replace(/[!\"$%&'()*+,.\\/:;<=>?@\\[\\]\\^`{|}~]/g, \"\\\\$&\") : \"\";\r\n        },\r\n\r\n        refresh: function () {\r\n            var options = this.options,\r\n                lis = this.tablist.children(\":has(a[href])\");\r\n\r\n            // get disabled tabs from class attribute from HTML\r\n            // this will get converted to a boolean if needed in _refresh()\r\n            options.disabled = $.map(lis.filter(\".ui-state-disabled\"), function (tab) {\r\n                return lis.index(tab);\r\n            });\r\n\r\n            this._processTabs();\r\n\r\n            // was collapsed or no tabs\r\n            if (options.active === false || !this.anchors.length) {\r\n                options.active = false;\r\n                this.active = $();\r\n                // was active, but active tab is gone\r\n            } else if (this.active.length && !$.contains(this.tablist[0], this.active[0])) {\r\n                // all remaining tabs are disabled\r\n                if (this.tabs.length === options.disabled.length) {\r\n                    options.active = false;\r\n                    this.active = $();\r\n                    // activate previous tab\r\n                } else {\r\n                    this._activate(this._findNextTab(Math.max(0, options.active - 1), false));\r\n                }\r\n                // was active, active tab still exists\r\n            } else {\r\n                // make sure active index is correct\r\n                options.active = this.tabs.index(this.active);\r\n            }\r\n\r\n            this._refresh();\r\n        },\r\n\r\n        _refresh: function () {\r\n            this._setupDisabled(this.options.disabled);\r\n            this._setupEvents(this.options.event);\r\n            this._setupHeightStyle(this.options.heightStyle);\r\n\r\n            this.tabs.not(this.active).attr({\r\n                \"aria-selected\": \"false\",\r\n                \"aria-expanded\": \"false\",\r\n                tabIndex: -1\r\n            });\r\n            this.panels.not(this._getPanelForTab(this.active))\r\n                .hide()\r\n                .attr({\r\n                    \"aria-hidden\": \"true\"\r\n                });\r\n\r\n            // Make sure one tab is in the tab order\r\n            if (!this.active.length) {\r\n                this.tabs.eq(0).attr(\"tabIndex\", 0);\r\n            } else {\r\n                this.active\r\n                    .addClass(\"ui-tabs-active ui-state-active\")\r\n                    .attr({\r\n                        \"aria-selected\": \"true\",\r\n                        \"aria-expanded\": \"true\",\r\n                        tabIndex: 0\r\n                    });\r\n                this._getPanelForTab(this.active)\r\n                    .show()\r\n                    .attr({\r\n                        \"aria-hidden\": \"false\"\r\n                    });\r\n            }\r\n        },\r\n\r\n        _processTabs: function () {\r\n            var that = this,\r\n                prevTabs = this.tabs,\r\n                prevAnchors = this.anchors,\r\n                prevPanels = this.panels;\r\n\r\n            this.tablist = this._getList()\r\n                .addClass(\"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\")\r\n                .attr(\"role\", \"tablist\")\r\n\r\n                // Prevent users from focusing disabled tabs via click\r\n                .delegate(\"> li\", \"mousedown\" + this.eventNamespace, function (event) {\r\n                    if ($(this).is(\".ui-state-disabled\")) {\r\n                        event.preventDefault();\r\n                    }\r\n                })\r\n\r\n                // support: IE <9\r\n                // Preventing the default action in mousedown doesn't prevent IE\r\n                // from focusing the element, so if the anchor gets focused, blur.\r\n                // We don't have to worry about focusing the previously focused\r\n                // element since clicking on a non-focusable element should focus\r\n                // the body anyway.\r\n                .delegate(\".ui-tabs-anchor\", \"focus\" + this.eventNamespace, function () {\r\n                    if ($(this).closest(\"li\").is(\".ui-state-disabled\")) {\r\n                        this.blur();\r\n                    }\r\n                });\r\n\r\n            this.tabs = this.tablist.find(\"> li:has(a[href])\")\r\n                .addClass(\"ui-state-default ui-corner-top\")\r\n                .attr({\r\n                    role: \"tab\",\r\n                    tabIndex: -1\r\n                });\r\n\r\n            this.anchors = this.tabs.map(function () {\r\n                return $(\"a\", this)[0];\r\n            })\r\n                .addClass(\"ui-tabs-anchor\")\r\n                .attr({\r\n                    role: \"presentation\",\r\n                    tabIndex: -1\r\n                });\r\n\r\n            this.panels = $();\r\n\r\n            this.anchors.each(function (i, anchor) {\r\n                var selector, panel, panelId,\r\n                    anchorId = $(anchor).uniqueId().attr(\"id\"),\r\n                    tab = $(anchor).closest(\"li\"),\r\n                    originalAriaControls = tab.attr(\"aria-controls\");\r\n\r\n                // inline tab\r\n                if (that._isLocal(anchor)) {\r\n                    selector = anchor.hash;\r\n                    panelId = selector.substring(1);\r\n                    panel = that.element.find(that._sanitizeSelector(selector));\r\n                    // remote tab\r\n                } else {\r\n                    // If the tab doesn't already have aria-controls,\r\n                    // generate an id by using a throw-away element\r\n                    panelId = tab.attr(\"aria-controls\") || $({}).uniqueId()[0].id;\r\n                    selector = \"#\" + panelId;\r\n                    panel = that.element.find(selector);\r\n                    if (!panel.length) {\r\n                        panel = that._createPanel(panelId);\r\n                        panel.insertAfter(that.panels[i - 1] || that.tablist);\r\n                    }\r\n                    panel.attr(\"aria-live\", \"polite\");\r\n                }\r\n\r\n                if (panel.length) {\r\n                    that.panels = that.panels.add(panel);\r\n                }\r\n                if (originalAriaControls) {\r\n                    tab.data(\"ui-tabs-aria-controls\", originalAriaControls);\r\n                }\r\n                tab.attr({\r\n                    \"aria-controls\": panelId,\r\n                    \"aria-labelledby\": anchorId\r\n                });\r\n                panel.attr(\"aria-labelledby\", anchorId);\r\n            });\r\n\r\n            this.panels\r\n                .addClass(\"ui-tabs-panel ui-widget-content ui-corner-bottom\")\r\n                .attr(\"role\", \"tabpanel\");\r\n\r\n            // Avoid memory leaks (#10056)\r\n            if (prevTabs) {\r\n                this._off(prevTabs.not(this.tabs));\r\n                this._off(prevAnchors.not(this.anchors));\r\n                this._off(prevPanels.not(this.panels));\r\n            }\r\n        },\r\n\r\n        // allow overriding how to find the list for rare usage scenarios (#7715)\r\n        _getList: function () {\r\n            return this.tablist || this.element.find(\"ol,ul\").eq(0);\r\n        },\r\n\r\n        _createPanel: function (id) {\r\n            return $(\"<div>\")\r\n                .attr(\"id\", id)\r\n                .addClass(\"ui-tabs-panel ui-widget-content ui-corner-bottom\")\r\n                .data(\"ui-tabs-destroy\", true);\r\n        },\r\n\r\n        _setupDisabled: function (disabled) {\r\n            if (Array.isArray(disabled)) {\r\n                if (!disabled.length) {\r\n                    disabled = false;\r\n                } else if (disabled.length === this.anchors.length) {\r\n                    disabled = true;\r\n                }\r\n            }\r\n\r\n            // disable tabs\r\n            for (var i = 0, li; (li = this.tabs[i]); i++) {\r\n                if (disabled === true || $.inArray(i, disabled) !== -1) {\r\n                    $(li)\r\n                        .addClass(\"ui-state-disabled\")\r\n                        .attr(\"aria-disabled\", \"true\");\r\n                } else {\r\n                    $(li)\r\n                        .removeClass(\"ui-state-disabled\")\r\n                        .removeAttr(\"aria-disabled\");\r\n                }\r\n            }\r\n\r\n            this.options.disabled = disabled;\r\n        },\r\n\r\n        _setupEvents: function (event) {\r\n            var events = {};\r\n            if (event) {\r\n                $.each(event.split(\" \"), function (index, eventName) {\r\n                    events[eventName] = \"_eventHandler\";\r\n                });\r\n            }\r\n\r\n            this._off(this.anchors.add(this.tabs).add(this.panels));\r\n            // Always prevent the default action, even when disabled\r\n            this._on(true, this.anchors, {\r\n                click: function (event) {\r\n                    event.preventDefault();\r\n                }\r\n            });\r\n            this._on(this.anchors, events);\r\n            this._on(this.tabs, { keydown: \"_tabKeydown\" });\r\n            this._on(this.panels, { keydown: \"_panelKeydown\" });\r\n\r\n            this._focusable(this.tabs);\r\n            this._hoverable(this.tabs);\r\n        },\r\n\r\n        _setupHeightStyle: function (heightStyle) {\r\n            var maxHeight,\r\n                parent = this.element.parent();\r\n\r\n            if (heightStyle === \"fill\") {\r\n                maxHeight = parent.height();\r\n                maxHeight -= this.element.outerHeight() - this.element.height();\r\n\r\n                this.element.siblings(\":visible\").each(function () {\r\n                    var elem = $(this),\r\n                        position = elem.css(\"position\");\r\n\r\n                    if (position === \"absolute\" || position === \"fixed\") {\r\n                        return;\r\n                    }\r\n                    maxHeight -= elem.outerHeight(true);\r\n                });\r\n\r\n                this.element.children().not(this.panels).each(function () {\r\n                    maxHeight -= $(this).outerHeight(true);\r\n                });\r\n\r\n                this.panels.each(function () {\r\n                    $(this).height(Math.max(0, maxHeight -\r\n                        $(this).innerHeight() + $(this).height()));\r\n                })\r\n                    .css(\"overflow\", \"auto\");\r\n            } else if (heightStyle === \"auto\") {\r\n                maxHeight = 0;\r\n                this.panels.each(function () {\r\n                    maxHeight = Math.max(maxHeight, $(this).height(\"\").height());\r\n                }).height(maxHeight);\r\n            }\r\n        },\r\n\r\n        _eventHandler: function (event) {\r\n            var options = this.options,\r\n                active = this.active,\r\n                anchor = $(event.currentTarget),\r\n                tab = anchor.closest(\"li\"),\r\n                clickedIsActive = tab[0] === active[0],\r\n                collapsing = clickedIsActive && options.collapsible,\r\n                toShow = collapsing ? $() : this._getPanelForTab(tab),\r\n                toHide = !active.length ? $() : this._getPanelForTab(active),\r\n                eventData = {\r\n                    oldTab: active,\r\n                    oldPanel: toHide,\r\n                    newTab: collapsing ? $() : tab,\r\n                    newPanel: toShow\r\n                };\r\n\r\n            event.preventDefault();\r\n\r\n            if (tab.hasClass(\"ui-state-disabled\") ||\r\n                // tab is already loading\r\n                tab.hasClass(\"ui-tabs-loading\") ||\r\n                // can't switch durning an animation\r\n                this.running ||\r\n                // click on active header, but not collapsible\r\n                (clickedIsActive && !options.collapsible) ||\r\n                // allow canceling activation\r\n                (this._trigger(\"beforeActivate\", event, eventData) === false)) {\r\n                return;\r\n            }\r\n\r\n            options.active = collapsing ? false : this.tabs.index(tab);\r\n\r\n            this.active = clickedIsActive ? $() : tab;\r\n            if (this.xhr) {\r\n                this.xhr.abort();\r\n            }\r\n\r\n            if (!toHide.length && !toShow.length) {\r\n                $.error(\"jQuery UI Tabs: Mismatching fragment identifier.\");\r\n            }\r\n\r\n            if (toShow.length) {\r\n                this.load(this.tabs.index(tab), event);\r\n            }\r\n            this._toggle(event, eventData);\r\n        },\r\n\r\n        // handles show/hide for selecting tabs\r\n        _toggle: function (event, eventData) {\r\n            var that = this,\r\n                toShow = eventData.newPanel,\r\n                toHide = eventData.oldPanel;\r\n\r\n            this.running = true;\r\n\r\n            function complete() {\r\n                that.running = false;\r\n                that._trigger(\"activate\", event, eventData);\r\n            }\r\n\r\n            function show() {\r\n                eventData.newTab.closest(\"li\").addClass(\"ui-tabs-active ui-state-active\");\r\n\r\n                if (toShow.length && that.options.show) {\r\n                    that._show(toShow, that.options.show, complete);\r\n                } else {\r\n                    toShow.show();\r\n                    complete();\r\n                }\r\n            }\r\n\r\n            // start out by hiding, then showing, then completing\r\n            if (toHide.length && this.options.hide) {\r\n                this._hide(toHide, this.options.hide, function () {\r\n                    eventData.oldTab.closest(\"li\").removeClass(\"ui-tabs-active ui-state-active\");\r\n                    show();\r\n                });\r\n            } else {\r\n                eventData.oldTab.closest(\"li\").removeClass(\"ui-tabs-active ui-state-active\");\r\n                toHide.hide();\r\n                show();\r\n            }\r\n\r\n            toHide.attr(\"aria-hidden\", \"true\");\r\n            eventData.oldTab.attr({\r\n                \"aria-selected\": \"false\",\r\n                \"aria-expanded\": \"false\"\r\n            });\r\n            // If we're switching tabs, remove the old tab from the tab order.\r\n            // If we're opening from collapsed state, remove the previous tab from the tab order.\r\n            // If we're collapsing, then keep the collapsing tab in the tab order.\r\n            if (toShow.length && toHide.length) {\r\n                eventData.oldTab.attr(\"tabIndex\", -1);\r\n            } else if (toShow.length) {\r\n                this.tabs.filter(function () {\r\n                    return $(this).attr(\"tabIndex\") === 0;\r\n                })\r\n                    .attr(\"tabIndex\", -1);\r\n            }\r\n\r\n            toShow.attr(\"aria-hidden\", \"false\");\r\n            eventData.newTab.attr({\r\n                \"aria-selected\": \"true\",\r\n                \"aria-expanded\": \"true\",\r\n                tabIndex: 0\r\n            });\r\n        },\r\n\r\n        _activate: function (index) {\r\n            var anchor,\r\n                active = this._findActive(index);\r\n\r\n            // trying to activate the already active panel\r\n            if (active[0] === this.active[0]) {\r\n                return;\r\n            }\r\n\r\n            // trying to collapse, simulate a click on the current active header\r\n            if (!active.length) {\r\n                active = this.active;\r\n            }\r\n\r\n            anchor = active.find(\".ui-tabs-anchor\")[0];\r\n            this._eventHandler({\r\n                target: anchor,\r\n                currentTarget: anchor,\r\n                preventDefault: $.noop\r\n            });\r\n        },\r\n\r\n        _findActive: function (index) {\r\n            return index === false ? $() : this.tabs.eq(index);\r\n        },\r\n\r\n        _getIndex: function (index) {\r\n            // meta-function to give users option to provide a href string instead of a numerical index.\r\n            if (typeof index === \"string\") {\r\n                index = this.anchors.index(this.anchors.filter(\"[href$='\" + index + \"']\"));\r\n            }\r\n\r\n            return index;\r\n        },\r\n\r\n        _destroy: function () {\r\n            if (this.xhr) {\r\n                this.xhr.abort();\r\n            }\r\n\r\n            this.element.removeClass(\"ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible\");\r\n\r\n            this.tablist\r\n                .removeClass(\"ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all\")\r\n                .removeAttr(\"role\");\r\n\r\n            this.anchors\r\n                .removeClass(\"ui-tabs-anchor\")\r\n                .removeAttr(\"role\")\r\n                .removeAttr(\"tabIndex\")\r\n                .removeUniqueId();\r\n\r\n            this.tablist.unbind(this.eventNamespace);\r\n\r\n            this.tabs.add(this.panels).each(function () {\r\n                if ($.data(this, \"ui-tabs-destroy\")) {\r\n                    $(this).remove();\r\n                } else {\r\n                    $(this)\r\n                        .removeClass(\"ui-state-default ui-state-active ui-state-disabled \" +\r\n                            \"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel\")\r\n                        .removeAttr(\"tabIndex\")\r\n                        .removeAttr(\"aria-live\")\r\n                        .removeAttr(\"aria-busy\")\r\n                        .removeAttr(\"aria-selected\")\r\n                        .removeAttr(\"aria-labelledby\")\r\n                        .removeAttr(\"aria-hidden\")\r\n                        .removeAttr(\"aria-expanded\")\r\n                        .removeAttr(\"role\");\r\n                }\r\n            });\r\n\r\n            this.tabs.each(function () {\r\n                var li = $(this),\r\n                    prev = li.data(\"ui-tabs-aria-controls\");\r\n                if (prev) {\r\n                    li\r\n                        .attr(\"aria-controls\", prev)\r\n                        .removeData(\"ui-tabs-aria-controls\");\r\n                } else {\r\n                    li.removeAttr(\"aria-controls\");\r\n                }\r\n            });\r\n\r\n            this.panels.show();\r\n\r\n            if (this.options.heightStyle !== \"content\") {\r\n                this.panels.css(\"height\", \"\");\r\n            }\r\n        },\r\n\r\n        enable: function (index) {\r\n            var disabled = this.options.disabled;\r\n            if (disabled === false) {\r\n                return;\r\n            }\r\n\r\n            if (index === undefined) {\r\n                disabled = false;\r\n            } else {\r\n                index = this._getIndex(index);\r\n                if (Array.isArray(disabled)) {\r\n                    disabled = $.map(disabled, function (num) {\r\n                        return num !== index ? num : null;\r\n                    });\r\n                } else {\r\n                    disabled = $.map(this.tabs, function (li, num) {\r\n                        return num !== index ? num : null;\r\n                    });\r\n                }\r\n            }\r\n            this._setupDisabled(disabled);\r\n        },\r\n\r\n        disable: function (index) {\r\n            var disabled = this.options.disabled;\r\n            if (disabled === true) {\r\n                return;\r\n            }\r\n\r\n            if (index === undefined) {\r\n                disabled = true;\r\n            } else {\r\n                index = this._getIndex(index);\r\n                if ($.inArray(index, disabled) !== -1) {\r\n                    return;\r\n                }\r\n                if (Array.isArray(disabled)) {\r\n                    disabled = $.merge([index], disabled).sort();\r\n                } else {\r\n                    disabled = [index];\r\n                }\r\n            }\r\n            this._setupDisabled(disabled);\r\n        },\r\n\r\n        load: function (index, event) {\r\n            index = this._getIndex(index);\r\n            var that = this,\r\n                tab = this.tabs.eq(index),\r\n                anchor = tab.find(\".ui-tabs-anchor\"),\r\n                panel = this._getPanelForTab(tab),\r\n                eventData = {\r\n                    tab: tab,\r\n                    panel: panel\r\n                },\r\n                complete = function (jqXHR, status) {\r\n                    if (status === \"abort\") {\r\n                        that.panels.stop(false, true);\r\n                    }\r\n\r\n                    tab.removeClass(\"ui-tabs-loading\");\r\n                    panel.removeAttr(\"aria-busy\");\r\n\r\n                    if (jqXHR === that.xhr) {\r\n                        delete that.xhr;\r\n                    }\r\n                };\r\n\r\n            // not remote\r\n            if (this._isLocal(anchor[0])) {\r\n                return;\r\n            }\r\n\r\n            this.xhr = $.ajax(this._ajaxSettings(anchor, event, eventData));\r\n\r\n            // support: jQuery <1.8\r\n            // jQuery <1.8 returns false if the request is canceled in beforeSend,\r\n            // but as of 1.8, $.ajax() always returns a jqXHR object.\r\n            if (this.xhr && this.xhr.statusText !== \"canceled\") {\r\n                tab.addClass(\"ui-tabs-loading\");\r\n                panel.attr(\"aria-busy\", \"true\");\r\n\r\n                this.xhr\r\n                    .done(function (response, status, jqXHR) {\r\n                        // support: jQuery <1.8\r\n                        // http://bugs.jquery.com/ticket/11778\r\n                        setTimeout(function () {\r\n                            panel.html(response);\r\n                            that._trigger(\"load\", event, eventData);\r\n\r\n                            complete(jqXHR, status);\r\n                        }, 1);\r\n                    })\r\n                    .fail(function (jqXHR, status) {\r\n                        // support: jQuery <1.8\r\n                        // http://bugs.jquery.com/ticket/11778\r\n                        setTimeout(function () {\r\n                            complete(jqXHR, status);\r\n                        }, 1);\r\n                    });\r\n            }\r\n        },\r\n\r\n        _ajaxSettings: function (anchor, event, eventData) {\r\n            var that = this;\r\n            return {\r\n                url: anchor.attr(\"href\"),\r\n                beforeSend: function (jqXHR, settings) {\r\n                    return that._trigger(\"beforeLoad\", event,\r\n                        $.extend({ jqXHR: jqXHR, ajaxSettings: settings }, eventData));\r\n                }\r\n            };\r\n        },\r\n\r\n        _getPanelForTab: function (tab) {\r\n            var id = $(tab).attr(\"aria-controls\");\r\n            return this.element.find(this._sanitizeSelector(\"#\" + id));\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Tooltip 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/tooltip/\r\n     */\r\n\r\n\r\n    var tooltip = $.widget(\"ui.tooltip\", {\r\n        version: \"1.11.4\",\r\n        options: {\r\n            content: function () {\r\n                // support: IE<9, Opera in jQuery <1.7\r\n                // .text() can't accept undefined, so coerce to a string\r\n                var title = $(this).attr(\"title\") || \"\";\r\n                // Escape title, since we're going from an attribute to raw HTML\r\n                return $(\"<a>\").text(title).html();\r\n            },\r\n            hide: true,\r\n            // Disabled elements have inconsistent behavior across browsers (#8661)\r\n            items: \"[title]:not([disabled])\",\r\n            position: {\r\n                my: \"left top+15\",\r\n                at: \"left bottom\",\r\n                collision: \"flipfit flip\"\r\n            },\r\n            show: true,\r\n            tooltipClass: null,\r\n            track: false,\r\n\r\n            // callbacks\r\n            close: null,\r\n            open: null\r\n        },\r\n\r\n        _addDescribedBy: function (elem, id) {\r\n            var describedby = (elem.attr(\"aria-describedby\") || \"\").split(/\\s+/);\r\n            describedby.push(id);\r\n            elem\r\n                .data(\"ui-tooltip-id\", id)\r\n                .attr(\"aria-describedby\", describedby.join(\" \").trim());\r\n        },\r\n\r\n        _removeDescribedBy: function (elem) {\r\n            var id = elem.data(\"ui-tooltip-id\"),\r\n                describedby = (elem.attr(\"aria-describedby\") || \"\").split(/\\s+/),\r\n                index = $.inArray(id, describedby);\r\n\r\n            if (index !== -1) {\r\n                describedby.splice(index, 1);\r\n            }\r\n\r\n            elem.removeData(\"ui-tooltip-id\");\r\n            describedby = describedby.join(\" \").trim();\r\n            if (describedby) {\r\n                elem.attr(\"aria-describedby\", describedby);\r\n            } else {\r\n                elem.removeAttr(\"aria-describedby\");\r\n            }\r\n        },\r\n\r\n        _create: function () {\r\n            this._on({\r\n                mouseover: \"open\",\r\n                focusin: \"open\"\r\n            });\r\n\r\n            // IDs of generated tooltips, needed for destroy\r\n            this.tooltips = {};\r\n\r\n            // IDs of parent tooltips where we removed the title attribute\r\n            this.parents = {};\r\n\r\n            if (this.options.disabled) {\r\n                this._disable();\r\n            }\r\n\r\n            // Append the aria-live region so tooltips announce correctly\r\n            this.liveRegion = $(\"<div>\")\r\n                .attr({\r\n                    role: \"log\",\r\n                    \"aria-live\": \"assertive\",\r\n                    \"aria-relevant\": \"additions\"\r\n                })\r\n                .addClass(\"ui-helper-hidden-accessible\")\r\n                .appendTo(this.document[0].body);\r\n        },\r\n\r\n        _setOption: function (key, value) {\r\n            var that = this;\r\n\r\n            if (key === \"disabled\") {\r\n                this[value ? \"_disable\" : \"_enable\"]();\r\n                this.options[key] = value;\r\n                // disable element style changes\r\n                return;\r\n            }\r\n\r\n            this._super(key, value);\r\n\r\n            if (key === \"content\") {\r\n                $.each(this.tooltips, function (id, tooltipData) {\r\n                    that._updateContent(tooltipData.element);\r\n                });\r\n            }\r\n        },\r\n\r\n        _disable: function () {\r\n            var that = this;\r\n\r\n            // close open tooltips\r\n            $.each(this.tooltips, function (id, tooltipData) {\r\n                var event = $.Event(\"blur\");\r\n                event.target = event.currentTarget = tooltipData.element[0];\r\n                that.close(event, true);\r\n            });\r\n\r\n            // remove title attributes to prevent native tooltips\r\n            this.element.find(this.options.items).addBack().each(function () {\r\n                var element = $(this);\r\n                if (element.is(\"[title]\")) {\r\n                    element\r\n                        .data(\"ui-tooltip-title\", element.attr(\"title\"))\r\n                        .removeAttr(\"title\");\r\n                }\r\n            });\r\n        },\r\n\r\n        _enable: function () {\r\n            // restore title attributes\r\n            this.element.find(this.options.items).addBack().each(function () {\r\n                var element = $(this);\r\n                if (element.data(\"ui-tooltip-title\")) {\r\n                    element.attr(\"title\", element.data(\"ui-tooltip-title\"));\r\n                }\r\n            });\r\n        },\r\n\r\n        open: function (event) {\r\n            var that = this,\r\n                target = $(event ? event.target : this.element)\r\n                    // we need closest here due to mouseover bubbling,\r\n                    // but always pointing at the same event target\r\n                    .closest(this.options.items);\r\n\r\n            // No element to show a tooltip for or the tooltip is already open\r\n            if (!target.length || target.data(\"ui-tooltip-id\")) {\r\n                return;\r\n            }\r\n\r\n            if (target.attr(\"title\")) {\r\n                target.data(\"ui-tooltip-title\", target.attr(\"title\"));\r\n            }\r\n\r\n            target.data(\"ui-tooltip-open\", true);\r\n\r\n            // kill parent tooltips, custom or native, for hover\r\n            if (event && event.type === \"mouseover\") {\r\n                target.parents().each(function () {\r\n                    var parent = $(this),\r\n                        blurEvent;\r\n                    if (parent.data(\"ui-tooltip-open\")) {\r\n                        blurEvent = $.Event(\"blur\");\r\n                        blurEvent.target = blurEvent.currentTarget = this;\r\n                        that.close(blurEvent, true);\r\n                    }\r\n                    if (parent.attr(\"title\")) {\r\n                        parent.uniqueId();\r\n                        that.parents[this.id] = {\r\n                            element: this,\r\n                            title: parent.attr(\"title\")\r\n                        };\r\n                        parent.attr(\"title\", \"\");\r\n                    }\r\n                });\r\n            }\r\n\r\n            this._registerCloseHandlers(event, target);\r\n            this._updateContent(target, event);\r\n        },\r\n\r\n        _updateContent: function (target, event) {\r\n            var content,\r\n                contentOption = this.options.content,\r\n                that = this,\r\n                eventType = event ? event.type : null;\r\n\r\n            if (typeof contentOption === \"string\") {\r\n                return this._open(event, target, contentOption);\r\n            }\r\n\r\n            content = contentOption.call(target[0], function (response) {\r\n\r\n                // IE may instantly serve a cached response for ajax requests\r\n                // delay this call to _open so the other call to _open runs first\r\n                that._delay(function () {\r\n\r\n                    // Ignore async response if tooltip was closed already\r\n                    if (!target.data(\"ui-tooltip-open\")) {\r\n                        return;\r\n                    }\r\n\r\n                    // jQuery creates a special event for focusin when it doesn't\r\n                    // exist natively. To improve performance, the native event\r\n                    // object is reused and the type is changed. Therefore, we can't\r\n                    // rely on the type being correct after the event finished\r\n                    // bubbling, so we set it back to the previous value. (#8740)\r\n                    if (event) {\r\n                        event.type = eventType;\r\n                    }\r\n                    this._open(event, target, response);\r\n                });\r\n            });\r\n            if (content) {\r\n                this._open(event, target, content);\r\n            }\r\n        },\r\n\r\n        _open: function (event, target, content) {\r\n            var tooltipData, tooltip, delayedShow, a11yContent,\r\n                positionOption = $.extend({}, this.options.position);\r\n\r\n            if (!content) {\r\n                return;\r\n            }\r\n\r\n            // Content can be updated multiple times. If the tooltip already\r\n            // exists, then just update the content and bail.\r\n            tooltipData = this._find(target);\r\n            if (tooltipData) {\r\n                tooltipData.tooltip.find(\".ui-tooltip-content\").html(content);\r\n                return;\r\n            }\r\n\r\n            // if we have a title, clear it to prevent the native tooltip\r\n            // we have to check first to avoid defining a title if none exists\r\n            // (we don't want to cause an element to start matching [title])\r\n            //\r\n            // We use removeAttr only for key events, to allow IE to export the correct\r\n            // accessible attributes. For mouse events, set to empty string to avoid\r\n            // native tooltip showing up (happens only when removing inside mouseover).\r\n            if (target.is(\"[title]\")) {\r\n                if (event && event.type === \"mouseover\") {\r\n                    target.attr(\"title\", \"\");\r\n                } else {\r\n                    target.removeAttr(\"title\");\r\n                }\r\n            }\r\n\r\n            tooltipData = this._tooltip(target);\r\n            tooltip = tooltipData.tooltip;\r\n            this._addDescribedBy(target, tooltip.attr(\"id\"));\r\n            tooltip.find(\".ui-tooltip-content\").html(content);\r\n\r\n            // Support: Voiceover on OS X, JAWS on IE <= 9\r\n            // JAWS announces deletions even when aria-relevant=\"additions\"\r\n            // Voiceover will sometimes re-read the entire log region's contents from the beginning\r\n            this.liveRegion.children().hide();\r\n            if (content.clone) {\r\n                a11yContent = content.clone();\r\n                a11yContent.removeAttr(\"id\").find(\"[id]\").removeAttr(\"id\");\r\n            } else {\r\n                a11yContent = content;\r\n            }\r\n            $(\"<div>\").html(a11yContent).appendTo(this.liveRegion);\r\n\r\n            function position(event) {\r\n                positionOption.of = event;\r\n                if (tooltip.is(\":hidden\")) {\r\n                    return;\r\n                }\r\n                tooltip.position(positionOption);\r\n            }\r\n            if (this.options.track && event && /^mouse/.test(event.type)) {\r\n                this._on(this.document, {\r\n                    mousemove: position\r\n                });\r\n                // trigger once to override element-relative positioning\r\n                position(event);\r\n            } else {\r\n                tooltip.position($.extend({\r\n                    of: target\r\n                }, this.options.position));\r\n            }\r\n\r\n            tooltip.hide();\r\n\r\n            this._show(tooltip, this.options.show);\r\n            // Handle tracking tooltips that are shown with a delay (#8644). As soon\r\n            // as the tooltip is visible, position the tooltip using the most recent\r\n            // event.\r\n            if (this.options.show && this.options.show.delay) {\r\n                delayedShow = this.delayedShow = setInterval(function () {\r\n                    if (tooltip.is(\":visible\")) {\r\n                        position(positionOption.of);\r\n                        clearInterval(delayedShow);\r\n                    }\r\n                }, $.fx.interval);\r\n            }\r\n\r\n            this._trigger(\"open\", event, { tooltip: tooltip });\r\n        },\r\n\r\n        _registerCloseHandlers: function (event, target) {\r\n            var events = {\r\n                keyup: function (event) {\r\n                    if (event.keyCode === $.ui.keyCode.ESCAPE) {\r\n                        var fakeEvent = $.Event(event);\r\n                        fakeEvent.currentTarget = target[0];\r\n                        this.close(fakeEvent, true);\r\n                    }\r\n                }\r\n            };\r\n\r\n            // Only bind remove handler for delegated targets. Non-delegated\r\n            // tooltips will handle this in destroy.\r\n            if (target[0] !== this.element[0]) {\r\n                events.remove = function () {\r\n                    this._removeTooltip(this._find(target).tooltip);\r\n                };\r\n            }\r\n\r\n            if (!event || event.type === \"mouseover\") {\r\n                events.mouseleave = \"close\";\r\n            }\r\n            if (!event || event.type === \"focusin\") {\r\n                events.focusout = \"close\";\r\n            }\r\n            this._on(true, target, events);\r\n        },\r\n\r\n        close: function (event) {\r\n            var tooltip,\r\n                that = this,\r\n                target = $(event ? event.currentTarget : this.element),\r\n                tooltipData = this._find(target);\r\n\r\n            // The tooltip may already be closed\r\n            if (!tooltipData) {\r\n\r\n                // We set ui-tooltip-open immediately upon open (in open()), but only set the\r\n                // additional data once there's actually content to show (in _open()). So even if the\r\n                // tooltip doesn't have full data, we always remove ui-tooltip-open in case we're in\r\n                // the period between open() and _open().\r\n                target.removeData(\"ui-tooltip-open\");\r\n                return;\r\n            }\r\n\r\n            tooltip = tooltipData.tooltip;\r\n\r\n            // disabling closes the tooltip, so we need to track when we're closing\r\n            // to avoid an infinite loop in case the tooltip becomes disabled on close\r\n            if (tooltipData.closing) {\r\n                return;\r\n            }\r\n\r\n            // Clear the interval for delayed tracking tooltips\r\n            clearInterval(this.delayedShow);\r\n\r\n            // only set title if we had one before (see comment in _open())\r\n            // If the title attribute has changed since open(), don't restore\r\n            if (target.data(\"ui-tooltip-title\") && !target.attr(\"title\")) {\r\n                target.attr(\"title\", target.data(\"ui-tooltip-title\"));\r\n            }\r\n\r\n            this._removeDescribedBy(target);\r\n\r\n            tooltipData.hiding = true;\r\n            tooltip.stop(true);\r\n            this._hide(tooltip, this.options.hide, function () {\r\n                that._removeTooltip($(this));\r\n            });\r\n\r\n            target.removeData(\"ui-tooltip-open\");\r\n            this._off(target, \"mouseleave focusout keyup\");\r\n\r\n            // Remove 'remove' binding only on delegated targets\r\n            if (target[0] !== this.element[0]) {\r\n                this._off(target, \"remove\");\r\n            }\r\n            this._off(this.document, \"mousemove\");\r\n\r\n            if (event && event.type === \"mouseleave\") {\r\n                $.each(this.parents, function (id, parent) {\r\n                    $(parent.element).attr(\"title\", parent.title);\r\n                    delete that.parents[id];\r\n                });\r\n            }\r\n\r\n            tooltipData.closing = true;\r\n            this._trigger(\"close\", event, { tooltip: tooltip });\r\n            if (!tooltipData.hiding) {\r\n                tooltipData.closing = false;\r\n            }\r\n        },\r\n\r\n        _tooltip: function (element) {\r\n            var tooltip = $(\"<div>\")\r\n                .attr(\"role\", \"tooltip\")\r\n                .addClass(\"ui-tooltip ui-widget ui-corner-all ui-widget-content \" +\r\n                    (this.options.tooltipClass || \"\")),\r\n                id = tooltip.uniqueId().attr(\"id\");\r\n\r\n            $(\"<div>\")\r\n                .addClass(\"ui-tooltip-content\")\r\n                .appendTo(tooltip);\r\n\r\n            tooltip.appendTo(this.document[0].body);\r\n\r\n            return this.tooltips[id] = {\r\n                element: element,\r\n                tooltip: tooltip\r\n            };\r\n        },\r\n\r\n        _find: function (target) {\r\n            var id = target.data(\"ui-tooltip-id\");\r\n            return id ? this.tooltips[id] : null;\r\n        },\r\n\r\n        _removeTooltip: function (tooltip) {\r\n            tooltip.remove();\r\n            delete this.tooltips[tooltip.attr(\"id\")];\r\n        },\r\n\r\n        _destroy: function () {\r\n            var that = this;\r\n\r\n            // close open tooltips\r\n            $.each(this.tooltips, function (id, tooltipData) {\r\n                // Delegate to close method to handle common cleanup\r\n                var event = $.Event(\"blur\"),\r\n                    element = tooltipData.element;\r\n                event.target = event.currentTarget = element[0];\r\n                that.close(event, true);\r\n\r\n                // Remove immediately; destroying an open tooltip doesn't use the\r\n                // hide animation\r\n                $(\"#\" + id).remove();\r\n\r\n                // Restore the title\r\n                if (element.data(\"ui-tooltip-title\")) {\r\n                    // If the title attribute has changed since open(), don't restore\r\n                    if (!element.attr(\"title\")) {\r\n                        element.attr(\"title\", element.data(\"ui-tooltip-title\"));\r\n                    }\r\n                    element.removeData(\"ui-tooltip-title\");\r\n                }\r\n            });\r\n            this.liveRegion.remove();\r\n        }\r\n    });\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/category/effects-core/\r\n     */\r\n\r\n\r\n    var dataSpace = \"ui-effects-\",\r\n\r\n        // Create a local jQuery because jQuery Color relies on it and the\r\n        // global may not exist with AMD and a custom build (#10199)\r\n        jQuery = $;\r\n\r\n    $.effects = {\r\n        effect: {}\r\n    };\r\n\r\n    /*!\r\n     * jQuery Color Animations v2.1.2\r\n     * https://github.com/jquery/jquery-color\r\n     *\r\n     * Copyright 2014 jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * Date: Wed Jan 16 08:47:09 2013 -0600\r\n     */\r\n    (function (jQuery, undefined) {\r\n\r\n        var stepHooks = \"backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor\",\r\n\r\n            // plusequals test for += 100 -= 100\r\n            rplusequals = /^([\\-+])=\\s*(\\d+\\.?\\d*)/,\r\n            // a set of RE's that can match strings and generate color tuples.\r\n            stringParsers = [{\r\n                re: /rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\r\n                parse: function (execResult) {\r\n                    return [\r\n                        execResult[1],\r\n                        execResult[2],\r\n                        execResult[3],\r\n                        execResult[4]\r\n                    ];\r\n                }\r\n            }, {\r\n                re: /rgba?\\(\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\r\n                parse: function (execResult) {\r\n                    return [\r\n                        execResult[1] * 2.55,\r\n                        execResult[2] * 2.55,\r\n                        execResult[3] * 2.55,\r\n                        execResult[4]\r\n                    ];\r\n                }\r\n            }, {\r\n                // this regex ignores A-F because it's compared against an already lowercased string\r\n                re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,\r\n                parse: function (execResult) {\r\n                    return [\r\n                        parseInt(execResult[1], 16),\r\n                        parseInt(execResult[2], 16),\r\n                        parseInt(execResult[3], 16)\r\n                    ];\r\n                }\r\n            }, {\r\n                // this regex ignores A-F because it's compared against an already lowercased string\r\n                re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,\r\n                parse: function (execResult) {\r\n                    return [\r\n                        parseInt(execResult[1] + execResult[1], 16),\r\n                        parseInt(execResult[2] + execResult[2], 16),\r\n                        parseInt(execResult[3] + execResult[3], 16)\r\n                    ];\r\n                }\r\n            }, {\r\n                re: /hsla?\\(\\s*(\\d+(?:\\.\\d+)?)\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*,\\s*(\\d+(?:\\.\\d+)?)\\%\\s*(?:,\\s*(\\d?(?:\\.\\d+)?)\\s*)?\\)/,\r\n                space: \"hsla\",\r\n                parse: function (execResult) {\r\n                    return [\r\n                        execResult[1],\r\n                        execResult[2] / 100,\r\n                        execResult[3] / 100,\r\n                        execResult[4]\r\n                    ];\r\n                }\r\n            }],\r\n\r\n            // jQuery.Color( )\r\n            color = jQuery.Color = function (color, green, blue, alpha) {\r\n                return new jQuery.Color.fn.parse(color, green, blue, alpha);\r\n            },\r\n            spaces = {\r\n                rgba: {\r\n                    props: {\r\n                        red: {\r\n                            idx: 0,\r\n                            type: \"byte\"\r\n                        },\r\n                        green: {\r\n                            idx: 1,\r\n                            type: \"byte\"\r\n                        },\r\n                        blue: {\r\n                            idx: 2,\r\n                            type: \"byte\"\r\n                        }\r\n                    }\r\n                },\r\n\r\n                hsla: {\r\n                    props: {\r\n                        hue: {\r\n                            idx: 0,\r\n                            type: \"degrees\"\r\n                        },\r\n                        saturation: {\r\n                            idx: 1,\r\n                            type: \"percent\"\r\n                        },\r\n                        lightness: {\r\n                            idx: 2,\r\n                            type: \"percent\"\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            propTypes = {\r\n                \"byte\": {\r\n                    floor: true,\r\n                    max: 255\r\n                },\r\n                \"percent\": {\r\n                    max: 1\r\n                },\r\n                \"degrees\": {\r\n                    mod: 360,\r\n                    floor: true\r\n                }\r\n            },\r\n            support = color.support = {},\r\n\r\n            // element for support tests\r\n            supportElem = jQuery(\"<p>\")[0],\r\n\r\n            // colors = jQuery.Color.names\r\n            colors,\r\n\r\n            // local aliases of functions called often\r\n            each = jQuery.each;\r\n\r\n        // determine rgba support immediately\r\n        supportElem.style.cssText = \"background-color:rgba(1,1,1,.5)\";\r\n        support.rgba = supportElem.style.backgroundColor.indexOf(\"rgba\") > -1;\r\n\r\n        // define cache name and alpha properties\r\n        // for rgba and hsla spaces\r\n        each(spaces, function (spaceName, space) {\r\n            space.cache = \"_\" + spaceName;\r\n            space.props.alpha = {\r\n                idx: 3,\r\n                type: \"percent\",\r\n                def: 1\r\n            };\r\n        });\r\n\r\n        function clamp(value, prop, allowEmpty) {\r\n            var type = propTypes[prop.type] || {};\r\n\r\n            if (value == null) {\r\n                return (allowEmpty || !prop.def) ? null : prop.def;\r\n            }\r\n\r\n            // ~~ is an short way of doing floor for positive numbers\r\n            value = type.floor ? ~~value : parseFloat(value);\r\n\r\n            // IE will pass in empty strings as value for alpha,\r\n            // which will hit this case\r\n            if (isNaN(value)) {\r\n                return prop.def;\r\n            }\r\n\r\n            if (type.mod) {\r\n                // we add mod before modding to make sure that negatives values\r\n                // get converted properly: -10 -> 350\r\n                return (value + type.mod) % type.mod;\r\n            }\r\n\r\n            // for now all property types without mod have min and max\r\n            return 0 > value ? 0 : type.max < value ? type.max : value;\r\n        }\r\n\r\n        function stringParse(string) {\r\n            var inst = color(),\r\n                rgba = inst._rgba = [];\r\n\r\n            string = string.toLowerCase();\r\n\r\n            each(stringParsers, function (i, parser) {\r\n                var parsed,\r\n                    match = parser.re.exec(string),\r\n                    values = match && parser.parse(match),\r\n                    spaceName = parser.space || \"rgba\";\r\n\r\n                if (values) {\r\n                    parsed = inst[spaceName](values);\r\n\r\n                    // if this was an rgba parse the assignment might happen twice\r\n                    // oh well....\r\n                    inst[spaces[spaceName].cache] = parsed[spaces[spaceName].cache];\r\n                    rgba = inst._rgba = parsed._rgba;\r\n\r\n                    // exit each( stringParsers ) here because we matched\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            // Found a stringParser that handled it\r\n            if (rgba.length) {\r\n\r\n                // if this came from a parsed string, force \"transparent\" when alpha is 0\r\n                // chrome, (and maybe others) return \"transparent\" as rgba(0,0,0,0)\r\n                if (rgba.join() === \"0,0,0,0\") {\r\n                    jQuery.extend(rgba, colors.transparent);\r\n                }\r\n                return inst;\r\n            }\r\n\r\n            // named colors\r\n            return colors[string];\r\n        }\r\n\r\n        color.fn = jQuery.extend(color.prototype, {\r\n            parse: function (red, green, blue, alpha) {\r\n                if (red === undefined) {\r\n                    this._rgba = [null, null, null, null];\r\n                    return this;\r\n                }\r\n                if (red.jquery || red.nodeType) {\r\n                    red = jQuery(red).css(green);\r\n                    green = undefined;\r\n                }\r\n\r\n                var inst = this,\r\n                    type = jQuery.type(red),\r\n                    rgba = this._rgba = [];\r\n\r\n                // more than 1 argument specified - assume ( red, green, blue, alpha )\r\n                if (green !== undefined) {\r\n                    red = [red, green, blue, alpha];\r\n                    type = \"array\";\r\n                }\r\n\r\n                if (type === \"string\") {\r\n                    return this.parse(stringParse(red) || colors._default);\r\n                }\r\n\r\n                if (type === \"array\") {\r\n                    each(spaces.rgba.props, function (key, prop) {\r\n                        rgba[prop.idx] = clamp(red[prop.idx], prop);\r\n                    });\r\n                    return this;\r\n                }\r\n\r\n                if (type === \"object\") {\r\n                    if (red instanceof color) {\r\n                        each(spaces, function (spaceName, space) {\r\n                            if (red[space.cache]) {\r\n                                inst[space.cache] = red[space.cache].slice();\r\n                            }\r\n                        });\r\n                    } else {\r\n                        each(spaces, function (spaceName, space) {\r\n                            var cache = space.cache;\r\n                            each(space.props, function (key, prop) {\r\n\r\n                                // if the cache doesn't exist, and we know how to convert\r\n                                if (!inst[cache] && space.to) {\r\n\r\n                                    // if the value was null, we don't need to copy it\r\n                                    // if the key was alpha, we don't need to copy it either\r\n                                    if (key === \"alpha\" || red[key] == null) {\r\n                                        return;\r\n                                    }\r\n                                    inst[cache] = space.to(inst._rgba);\r\n                                }\r\n\r\n                                // this is the only case where we allow nulls for ALL properties.\r\n                                // call clamp with alwaysAllowEmpty\r\n                                inst[cache][prop.idx] = clamp(red[key], prop, true);\r\n                            });\r\n\r\n                            // everything defined but alpha?\r\n                            if (inst[cache] && jQuery.inArray(null, inst[cache].slice(0, 3)) < 0) {\r\n                                // use the default of 1\r\n                                inst[cache][3] = 1;\r\n                                if (space.from) {\r\n                                    inst._rgba = space.from(inst[cache]);\r\n                                }\r\n                            }\r\n                        });\r\n                    }\r\n                    return this;\r\n                }\r\n            },\r\n            is: function (compare) {\r\n                var is = color(compare),\r\n                    same = true,\r\n                    inst = this;\r\n\r\n                each(spaces, function (_, space) {\r\n                    var localCache,\r\n                        isCache = is[space.cache];\r\n                    if (isCache) {\r\n                        localCache = inst[space.cache] || space.to && space.to(inst._rgba) || [];\r\n                        each(space.props, function (_, prop) {\r\n                            if (isCache[prop.idx] != null) {\r\n                                same = (isCache[prop.idx] === localCache[prop.idx]);\r\n                                return same;\r\n                            }\r\n                        });\r\n                    }\r\n                    return same;\r\n                });\r\n                return same;\r\n            },\r\n            _space: function () {\r\n                var used = [],\r\n                    inst = this;\r\n                each(spaces, function (spaceName, space) {\r\n                    if (inst[space.cache]) {\r\n                        used.push(spaceName);\r\n                    }\r\n                });\r\n                return used.pop();\r\n            },\r\n            transition: function (other, distance) {\r\n                var end = color(other),\r\n                    spaceName = end._space(),\r\n                    space = spaces[spaceName],\r\n                    startColor = this.alpha() === 0 ? color(\"transparent\") : this,\r\n                    start = startColor[space.cache] || space.to(startColor._rgba),\r\n                    result = start.slice();\r\n\r\n                end = end[space.cache];\r\n                each(space.props, function (key, prop) {\r\n                    var index = prop.idx,\r\n                        startValue = start[index],\r\n                        endValue = end[index],\r\n                        type = propTypes[prop.type] || {};\r\n\r\n                    // if null, don't override start value\r\n                    if (endValue === null) {\r\n                        return;\r\n                    }\r\n                    // if null - use end\r\n                    if (startValue === null) {\r\n                        result[index] = endValue;\r\n                    } else {\r\n                        if (type.mod) {\r\n                            if (endValue - startValue > type.mod / 2) {\r\n                                startValue += type.mod;\r\n                            } else if (startValue - endValue > type.mod / 2) {\r\n                                startValue -= type.mod;\r\n                            }\r\n                        }\r\n                        result[index] = clamp((endValue - startValue) * distance + startValue, prop);\r\n                    }\r\n                });\r\n                return this[spaceName](result);\r\n            },\r\n            blend: function (opaque) {\r\n                // if we are already opaque - return ourself\r\n                if (this._rgba[3] === 1) {\r\n                    return this;\r\n                }\r\n\r\n                var rgb = this._rgba.slice(),\r\n                    a = rgb.pop(),\r\n                    blend = color(opaque)._rgba;\r\n\r\n                return color(jQuery.map(rgb, function (v, i) {\r\n                    return (1 - a) * blend[i] + a * v;\r\n                }));\r\n            },\r\n            toRgbaString: function () {\r\n                var prefix = \"rgba(\",\r\n                    rgba = jQuery.map(this._rgba, function (v, i) {\r\n                        return v == null ? (i > 2 ? 1 : 0) : v;\r\n                    });\r\n\r\n                if (rgba[3] === 1) {\r\n                    rgba.pop();\r\n                    prefix = \"rgb(\";\r\n                }\r\n\r\n                return prefix + rgba.join() + \")\";\r\n            },\r\n            toHslaString: function () {\r\n                var prefix = \"hsla(\",\r\n                    hsla = jQuery.map(this.hsla(), function (v, i) {\r\n                        if (v == null) {\r\n                            v = i > 2 ? 1 : 0;\r\n                        }\r\n\r\n                        // catch 1 and 2\r\n                        if (i && i < 3) {\r\n                            v = Math.round(v * 100) + \"%\";\r\n                        }\r\n                        return v;\r\n                    });\r\n\r\n                if (hsla[3] === 1) {\r\n                    hsla.pop();\r\n                    prefix = \"hsl(\";\r\n                }\r\n                return prefix + hsla.join() + \")\";\r\n            },\r\n            toHexString: function (includeAlpha) {\r\n                var rgba = this._rgba.slice(),\r\n                    alpha = rgba.pop();\r\n\r\n                if (includeAlpha) {\r\n                    rgba.push(~~(alpha * 255));\r\n                }\r\n\r\n                return \"#\" + jQuery.map(rgba, function (v) {\r\n\r\n                    // default to 0 when nulls exist\r\n                    v = (v || 0).toString(16);\r\n                    return v.length === 1 ? \"0\" + v : v;\r\n                }).join(\"\");\r\n            },\r\n            toString: function () {\r\n                return this._rgba[3] === 0 ? \"transparent\" : this.toRgbaString();\r\n            }\r\n        });\r\n        color.fn.parse.prototype = color.fn;\r\n\r\n        // hsla conversions adapted from:\r\n        // https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021\r\n\r\n        function hue2rgb(p, q, h) {\r\n            h = (h + 1) % 1;\r\n            if (h * 6 < 1) {\r\n                return p + (q - p) * h * 6;\r\n            }\r\n            if (h * 2 < 1) {\r\n                return q;\r\n            }\r\n            if (h * 3 < 2) {\r\n                return p + (q - p) * ((2 / 3) - h) * 6;\r\n            }\r\n            return p;\r\n        }\r\n\r\n        spaces.hsla.to = function (rgba) {\r\n            if (rgba[0] == null || rgba[1] == null || rgba[2] == null) {\r\n                return [null, null, null, rgba[3]];\r\n            }\r\n            var r = rgba[0] / 255,\r\n                g = rgba[1] / 255,\r\n                b = rgba[2] / 255,\r\n                a = rgba[3],\r\n                max = Math.max(r, g, b),\r\n                min = Math.min(r, g, b),\r\n                diff = max - min,\r\n                add = max + min,\r\n                l = add * 0.5,\r\n                h, s;\r\n\r\n            if (min === max) {\r\n                h = 0;\r\n            } else if (r === max) {\r\n                h = (60 * (g - b) / diff) + 360;\r\n            } else if (g === max) {\r\n                h = (60 * (b - r) / diff) + 120;\r\n            } else {\r\n                h = (60 * (r - g) / diff) + 240;\r\n            }\r\n\r\n            // chroma (diff) == 0 means greyscale which, by definition, saturation = 0%\r\n            // otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)\r\n            if (diff === 0) {\r\n                s = 0;\r\n            } else if (l <= 0.5) {\r\n                s = diff / add;\r\n            } else {\r\n                s = diff / (2 - add);\r\n            }\r\n            return [Math.round(h) % 360, s, l, a == null ? 1 : a];\r\n        };\r\n\r\n        spaces.hsla.from = function (hsla) {\r\n            if (hsla[0] == null || hsla[1] == null || hsla[2] == null) {\r\n                return [null, null, null, hsla[3]];\r\n            }\r\n            var h = hsla[0] / 360,\r\n                s = hsla[1],\r\n                l = hsla[2],\r\n                a = hsla[3],\r\n                q = l <= 0.5 ? l * (1 + s) : l + s - l * s,\r\n                p = 2 * l - q;\r\n\r\n            return [\r\n                Math.round(hue2rgb(p, q, h + (1 / 3)) * 255),\r\n                Math.round(hue2rgb(p, q, h) * 255),\r\n                Math.round(hue2rgb(p, q, h - (1 / 3)) * 255),\r\n                a\r\n            ];\r\n        };\r\n\r\n        each(spaces, function (spaceName, space) {\r\n            var props = space.props,\r\n                cache = space.cache,\r\n                to = space.to,\r\n                from = space.from;\r\n\r\n            // makes rgba() and hsla()\r\n            color.fn[spaceName] = function (value) {\r\n\r\n                // generate a cache for this space if it doesn't exist\r\n                if (to && !this[cache]) {\r\n                    this[cache] = to(this._rgba);\r\n                }\r\n                if (value === undefined) {\r\n                    return this[cache].slice();\r\n                }\r\n\r\n                var ret,\r\n                    type = jQuery.type(value),\r\n                    arr = (type === \"array\" || type === \"object\") ? value : arguments,\r\n                    local = this[cache].slice();\r\n\r\n                each(props, function (key, prop) {\r\n                    var val = arr[type === \"object\" ? key : prop.idx];\r\n                    if (val == null) {\r\n                        val = local[prop.idx];\r\n                    }\r\n                    local[prop.idx] = clamp(val, prop);\r\n                });\r\n\r\n                if (from) {\r\n                    ret = color(from(local));\r\n                    ret[cache] = local;\r\n                    return ret;\r\n                } else {\r\n                    return color(local);\r\n                }\r\n            };\r\n\r\n            // makes red() green() blue() alpha() hue() saturation() lightness()\r\n            each(props, function (key, prop) {\r\n                // alpha is included in more than one space\r\n                if (color.fn[key]) {\r\n                    return;\r\n                }\r\n                color.fn[key] = function (value) {\r\n                    var vtype = jQuery.type(value),\r\n                        fn = (key === \"alpha\" ? (this._hsla ? \"hsla\" : \"rgba\") : spaceName),\r\n                        local = this[fn](),\r\n                        cur = local[prop.idx],\r\n                        match;\r\n\r\n                    if (vtype === \"undefined\") {\r\n                        return cur;\r\n                    }\r\n\r\n                    if (vtype === \"function\") {\r\n                        value = value.call(this, cur);\r\n                        vtype = jQuery.type(value);\r\n                    }\r\n                    if (value == null && prop.empty) {\r\n                        return this;\r\n                    }\r\n                    if (vtype === \"string\") {\r\n                        match = rplusequals.exec(value);\r\n                        if (match) {\r\n                            value = cur + parseFloat(match[2]) * (match[1] === \"+\" ? 1 : -1);\r\n                        }\r\n                    }\r\n                    local[prop.idx] = value;\r\n                    return this[fn](local);\r\n                };\r\n            });\r\n        });\r\n\r\n        // add cssHook and .fx.step function for each named hook.\r\n        // accept a space separated string of properties\r\n        color.hook = function (hook) {\r\n            var hooks = hook.split(\" \");\r\n            each(hooks, function (i, hook) {\r\n                jQuery.cssHooks[hook] = {\r\n                    set: function (elem, value) {\r\n                        var parsed, curElem,\r\n                            backgroundColor = \"\";\r\n\r\n                        if (value !== \"transparent\" && (jQuery.type(value) !== \"string\" || (parsed = stringParse(value)))) {\r\n                            value = color(parsed || value);\r\n                            if (!support.rgba && value._rgba[3] !== 1) {\r\n                                curElem = hook === \"backgroundColor\" ? elem.parentNode : elem;\r\n                                while (\r\n                                    (backgroundColor === \"\" || backgroundColor === \"transparent\") &&\r\n                                    curElem && curElem.style\r\n                                ) {\r\n                                    try {\r\n                                        backgroundColor = jQuery.css(curElem, \"backgroundColor\");\r\n                                        curElem = curElem.parentNode;\r\n                                    } catch (e) {\r\n                                    }\r\n                                }\r\n\r\n                                value = value.blend(backgroundColor && backgroundColor !== \"transparent\" ?\r\n                                    backgroundColor :\r\n                                    \"_default\");\r\n                            }\r\n\r\n                            value = value.toRgbaString();\r\n                        }\r\n                        try {\r\n                            elem.style[hook] = value;\r\n                        } catch (e) {\r\n                            // wrapped to prevent IE from throwing errors on \"invalid\" values like 'auto' or 'inherit'\r\n                        }\r\n                    }\r\n                };\r\n                jQuery.fx.step[hook] = function (fx) {\r\n                    if (!fx.colorInit) {\r\n                        fx.start = color(fx.elem, hook);\r\n                        fx.end = color(fx.end);\r\n                        fx.colorInit = true;\r\n                    }\r\n                    jQuery.cssHooks[hook].set(fx.elem, fx.start.transition(fx.end, fx.pos));\r\n                };\r\n            });\r\n\r\n        };\r\n\r\n        color.hook(stepHooks);\r\n\r\n        jQuery.cssHooks.borderColor = {\r\n            expand: function (value) {\r\n                var expanded = {};\r\n\r\n                each([\"Top\", \"Right\", \"Bottom\", \"Left\"], function (i, part) {\r\n                    expanded[\"border\" + part + \"Color\"] = value;\r\n                });\r\n                return expanded;\r\n            }\r\n        };\r\n\r\n        // Basic color names only.\r\n        // Usage of any of the other color names requires adding yourself or including\r\n        // jquery.color.svg-names.js.\r\n        colors = jQuery.Color.names = {\r\n            // 4.1. Basic color keywords\r\n            aqua: \"#00ffff\",\r\n            black: \"#000000\",\r\n            blue: \"#0000ff\",\r\n            fuchsia: \"#ff00ff\",\r\n            gray: \"#808080\",\r\n            green: \"#008000\",\r\n            lime: \"#00ff00\",\r\n            maroon: \"#800000\",\r\n            navy: \"#000080\",\r\n            olive: \"#808000\",\r\n            purple: \"#800080\",\r\n            red: \"#ff0000\",\r\n            silver: \"#c0c0c0\",\r\n            teal: \"#008080\",\r\n            white: \"#ffffff\",\r\n            yellow: \"#ffff00\",\r\n\r\n            // 4.2.3. \"transparent\" color keyword\r\n            transparent: [null, null, null, 0],\r\n\r\n            _default: \"#ffffff\"\r\n        };\r\n\r\n    })(jQuery);\r\n\r\n    /******************************************************************************/\r\n    /****************************** CLASS ANIMATIONS ******************************/\r\n    /******************************************************************************/\r\n    (function () {\r\n\r\n        var classAnimationActions = [\"add\", \"remove\", \"toggle\"],\r\n            shorthandStyles = {\r\n                border: 1,\r\n                borderBottom: 1,\r\n                borderColor: 1,\r\n                borderLeft: 1,\r\n                borderRight: 1,\r\n                borderTop: 1,\r\n                borderWidth: 1,\r\n                margin: 1,\r\n                padding: 1\r\n            };\r\n\r\n        $.each([\"borderLeftStyle\", \"borderRightStyle\", \"borderBottomStyle\", \"borderTopStyle\"], function (_, prop) {\r\n            $.fx.step[prop] = function (fx) {\r\n                if (fx.end !== \"none\" && !fx.setAttr || fx.pos === 1 && !fx.setAttr) {\r\n                    jQuery.style(fx.elem, prop, fx.end);\r\n                    fx.setAttr = true;\r\n                }\r\n            };\r\n        });\r\n\r\n        function getElementStyles(elem) {\r\n            var key, len,\r\n                style = elem.ownerDocument.defaultView ?\r\n                    elem.ownerDocument.defaultView.getComputedStyle(elem, null) :\r\n                    elem.currentStyle,\r\n                styles = {};\r\n\r\n            if (style && style.length && style[0] && style[style[0]]) {\r\n                len = style.length;\r\n                while (len--) {\r\n                    key = style[len];\r\n                    if (typeof style[key] === \"string\") {\r\n                        styles[$.camelCase(key)] = style[key];\r\n                    }\r\n                }\r\n                // support: Opera, IE <9\r\n            } else {\r\n                for (key in style) {\r\n                    if (typeof style[key] === \"string\") {\r\n                        styles[key] = style[key];\r\n                    }\r\n                }\r\n            }\r\n\r\n            return styles;\r\n        }\r\n\r\n        function styleDifference(oldStyle, newStyle) {\r\n            var diff = {},\r\n                name, value;\r\n\r\n            for (name in newStyle) {\r\n                value = newStyle[name];\r\n                if (oldStyle[name] !== value) {\r\n                    if (!shorthandStyles[name]) {\r\n                        if ($.fx.step[name] || !isNaN(parseFloat(value))) {\r\n                            diff[name] = value;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return diff;\r\n        }\r\n\r\n        // support: jQuery <1.8\r\n        if (!$.fn.addBack) {\r\n            $.fn.addBack = function (selector) {\r\n                return this.add(selector == null ?\r\n                    this.prevObject : this.prevObject.filter(selector)\r\n                );\r\n            };\r\n        }\r\n\r\n        $.effects.animateClass = function (value, duration, easing, callback) {\r\n            var o = $.speed(duration, easing, callback);\r\n\r\n            return this.queue(function () {\r\n                var animated = $(this),\r\n                    baseClass = animated.attr(\"class\") || \"\",\r\n                    applyClassChange,\r\n                    allAnimations = o.children ? animated.find(\"*\").addBack() : animated;\r\n\r\n                // map the animated objects to store the original styles.\r\n                allAnimations = allAnimations.map(function () {\r\n                    var el = $(this);\r\n                    return {\r\n                        el: el,\r\n                        start: getElementStyles(this)\r\n                    };\r\n                });\r\n\r\n                // apply class change\r\n                applyClassChange = function () {\r\n                    $.each(classAnimationActions, function (i, action) {\r\n                        if (value[action]) {\r\n                            animated[action + \"Class\"](value[action]);\r\n                        }\r\n                    });\r\n                };\r\n                applyClassChange();\r\n\r\n                // map all animated objects again - calculate new styles and diff\r\n                allAnimations = allAnimations.map(function () {\r\n                    this.end = getElementStyles(this.el[0]);\r\n                    this.diff = styleDifference(this.start, this.end);\r\n                    return this;\r\n                });\r\n\r\n                // apply original class\r\n                animated.attr(\"class\", baseClass);\r\n\r\n                // map all animated objects again - this time collecting a promise\r\n                allAnimations = allAnimations.map(function () {\r\n                    var styleInfo = this,\r\n                        dfd = $.Deferred(),\r\n                        opts = $.extend({}, o, {\r\n                            queue: false,\r\n                            complete: function () {\r\n                                dfd.resolve(styleInfo);\r\n                            }\r\n                        });\r\n\r\n                    this.el.animate(this.diff, opts);\r\n                    return dfd.promise();\r\n                });\r\n\r\n                // once all animations have completed:\r\n                $.when.apply($, allAnimations.get()).done(function () {\r\n\r\n                    // set the final class\r\n                    applyClassChange();\r\n\r\n                    // for each animated element,\r\n                    // clear all css properties that were animated\r\n                    $.each(arguments, function () {\r\n                        var el = this.el;\r\n                        $.each(this.diff, function (key) {\r\n                            el.css(key, \"\");\r\n                        });\r\n                    });\r\n\r\n                    // this is guarnteed to be there if you use jQuery.speed()\r\n                    // it also handles dequeuing the next anim...\r\n                    o.complete.call(animated[0]);\r\n                });\r\n            });\r\n        };\r\n\r\n        $.fn.extend({\r\n            addClass: (function (orig) {\r\n                return function (classNames, speed, easing, callback) {\r\n                    return speed ?\r\n                        $.effects.animateClass.call(this,\r\n                            { add: classNames }, speed, easing, callback) :\r\n                        orig.apply(this, arguments);\r\n                };\r\n            })($.fn.addClass),\r\n\r\n            removeClass: (function (orig) {\r\n                return function (classNames, speed, easing, callback) {\r\n                    return arguments.length > 1 ?\r\n                        $.effects.animateClass.call(this,\r\n                            { remove: classNames }, speed, easing, callback) :\r\n                        orig.apply(this, arguments);\r\n                };\r\n            })($.fn.removeClass),\r\n\r\n            toggleClass: (function (orig) {\r\n                return function (classNames, force, speed, easing, callback) {\r\n                    if (typeof force === \"boolean\" || force === undefined) {\r\n                        if (!speed) {\r\n                            // without speed parameter\r\n                            return orig.apply(this, arguments);\r\n                        } else {\r\n                            return $.effects.animateClass.call(this,\r\n                                (force ? { add: classNames } : { remove: classNames }),\r\n                                speed, easing, callback);\r\n                        }\r\n                    } else {\r\n                        // without force parameter\r\n                        return $.effects.animateClass.call(this,\r\n                            { toggle: classNames }, force, speed, easing);\r\n                    }\r\n                };\r\n            })($.fn.toggleClass),\r\n\r\n            switchClass: function (remove, add, speed, easing, callback) {\r\n                return $.effects.animateClass.call(this, {\r\n                    add: add,\r\n                    remove: remove\r\n                }, speed, easing, callback);\r\n            }\r\n        });\r\n\r\n    })();\r\n\r\n    /******************************************************************************/\r\n    /*********************************** EFFECTS **********************************/\r\n    /******************************************************************************/\r\n\r\n    (function () {\r\n\r\n        $.extend($.effects, {\r\n            version: \"1.11.4\",\r\n\r\n            // Saves a set of properties in a data storage\r\n            save: function (element, set) {\r\n                for (var i = 0; i < set.length; i++) {\r\n                    if (set[i] !== null) {\r\n                        element.data(dataSpace + set[i], element[0].style[set[i]]);\r\n                    }\r\n                }\r\n            },\r\n\r\n            // Restores a set of previously saved properties from a data storage\r\n            restore: function (element, set) {\r\n                var val, i;\r\n                for (i = 0; i < set.length; i++) {\r\n                    if (set[i] !== null) {\r\n                        val = element.data(dataSpace + set[i]);\r\n                        // support: jQuery 1.6.2\r\n                        // http://bugs.jquery.com/ticket/9917\r\n                        // jQuery 1.6.2 incorrectly returns undefined for any falsy value.\r\n                        // We can't differentiate between \"\" and 0 here, so we just assume\r\n                        // empty string since it's likely to be a more common value...\r\n                        if (val === undefined) {\r\n                            val = \"\";\r\n                        }\r\n                        element.css(set[i], val);\r\n                    }\r\n                }\r\n            },\r\n\r\n            setMode: function (el, mode) {\r\n                if (mode === \"toggle\") {\r\n                    mode = el.is(\":hidden\") ? \"show\" : \"hide\";\r\n                }\r\n                return mode;\r\n            },\r\n\r\n            // Translates a [top,left] array into a baseline value\r\n            // this should be a little more flexible in the future to handle a string & hash\r\n            getBaseline: function (origin, original) {\r\n                var y, x;\r\n                switch (origin[0]) {\r\n                    case \"top\": y = 0; break;\r\n                    case \"middle\": y = 0.5; break;\r\n                    case \"bottom\": y = 1; break;\r\n                    default: y = origin[0] / original.height;\r\n                }\r\n                switch (origin[1]) {\r\n                    case \"left\": x = 0; break;\r\n                    case \"center\": x = 0.5; break;\r\n                    case \"right\": x = 1; break;\r\n                    default: x = origin[1] / original.width;\r\n                }\r\n                return {\r\n                    x: x,\r\n                    y: y\r\n                };\r\n            },\r\n\r\n            // Wraps the element around a wrapper that copies position properties\r\n            createWrapper: function (element) {\r\n\r\n                // if the element is already wrapped, return it\r\n                if (element.parent().is(\".ui-effects-wrapper\")) {\r\n                    return element.parent();\r\n                }\r\n\r\n                // wrap the element\r\n                var props = {\r\n                    width: element.outerWidth(true),\r\n                    height: element.outerHeight(true),\r\n                    \"float\": element.css(\"float\")\r\n                },\r\n                    wrapper = $(\"<div></div>\")\r\n                        .addClass(\"ui-effects-wrapper\")\r\n                        .css({\r\n                            fontSize: \"100%\",\r\n                            background: \"transparent\",\r\n                            border: \"none\",\r\n                            margin: 0,\r\n                            padding: 0\r\n                        }),\r\n                    // Store the size in case width/height are defined in % - Fixes #5245\r\n                    size = {\r\n                        width: element.width(),\r\n                        height: element.height()\r\n                    },\r\n                    active = document.activeElement;\r\n\r\n                // support: Firefox\r\n                // Firefox incorrectly exposes anonymous content\r\n                // https://bugzilla.mozilla.org/show_bug.cgi?id=561664\r\n                try {\r\n                    active.id;\r\n                } catch (e) {\r\n                    active = document.body;\r\n                }\r\n\r\n                element.wrap(wrapper);\r\n\r\n                // Fixes #7595 - Elements lose focus when wrapped.\r\n                if (element[0] === active || $.contains(element[0], active)) {\r\n                    $(active).focus();\r\n                }\r\n\r\n                wrapper = element.parent(); //Hotfix for jQuery 1.4 since some change in wrap() seems to actually lose the reference to the wrapped element\r\n\r\n                // transfer positioning properties to the wrapper\r\n                if (element.css(\"position\") === \"static\") {\r\n                    wrapper.css({ position: \"relative\" });\r\n                    element.css({ position: \"relative\" });\r\n                } else {\r\n                    $.extend(props, {\r\n                        position: element.css(\"position\"),\r\n                        zIndex: element.css(\"z-index\")\r\n                    });\r\n                    $.each([\"top\", \"left\", \"bottom\", \"right\"], function (i, pos) {\r\n                        props[pos] = element.css(pos);\r\n                        if (isNaN(parseInt(props[pos], 10))) {\r\n                            props[pos] = \"auto\";\r\n                        }\r\n                    });\r\n                    element.css({\r\n                        position: \"relative\",\r\n                        top: 0,\r\n                        left: 0,\r\n                        right: \"auto\",\r\n                        bottom: \"auto\"\r\n                    });\r\n                }\r\n                element.css(size);\r\n\r\n                return wrapper.css(props).show();\r\n            },\r\n\r\n            removeWrapper: function (element) {\r\n                var active = document.activeElement;\r\n\r\n                if (element.parent().is(\".ui-effects-wrapper\")) {\r\n                    element.parent().replaceWith(element);\r\n\r\n                    // Fixes #7595 - Elements lose focus when wrapped.\r\n                    if (element[0] === active || $.contains(element[0], active)) {\r\n                        $(active).focus();\r\n                    }\r\n                }\r\n\r\n                return element;\r\n            },\r\n\r\n            setTransition: function (element, list, factor, value) {\r\n                value = value || {};\r\n                $.each(list, function (i, x) {\r\n                    var unit = element.cssUnit(x);\r\n                    if (unit[0] > 0) {\r\n                        value[x] = unit[0] * factor + unit[1];\r\n                    }\r\n                });\r\n                return value;\r\n            }\r\n        });\r\n\r\n        // return an effect options object for the given parameters:\r\n        function _normalizeArguments(effect, options, speed, callback) {\r\n\r\n            // allow passing all options as the first parameter\r\n            if ($.isPlainObject(effect)) {\r\n                options = effect;\r\n                effect = effect.effect;\r\n            }\r\n\r\n            // convert to an object\r\n            effect = { effect: effect };\r\n\r\n            // catch (effect, null, ...)\r\n            if (options == null) {\r\n                options = {};\r\n            }\r\n\r\n            // catch (effect, callback)\r\n            if ($.isFunction(options)) {\r\n                callback = options;\r\n                speed = null;\r\n                options = {};\r\n            }\r\n\r\n            // catch (effect, speed, ?)\r\n            if (typeof options === \"number\" || $.fx.speeds[options]) {\r\n                callback = speed;\r\n                speed = options;\r\n                options = {};\r\n            }\r\n\r\n            // catch (effect, options, callback)\r\n            if ($.isFunction(speed)) {\r\n                callback = speed;\r\n                speed = null;\r\n            }\r\n\r\n            // add options to effect\r\n            if (options) {\r\n                $.extend(effect, options);\r\n            }\r\n\r\n            speed = speed || options.duration;\r\n            effect.duration = $.fx.off ? 0 :\r\n                typeof speed === \"number\" ? speed :\r\n                    speed in $.fx.speeds ? $.fx.speeds[speed] :\r\n                        $.fx.speeds._default;\r\n\r\n            effect.complete = callback || options.complete;\r\n\r\n            return effect;\r\n        }\r\n\r\n        function standardAnimationOption(option) {\r\n            // Valid standard speeds (nothing, number, named speed)\r\n            if (!option || typeof option === \"number\" || $.fx.speeds[option]) {\r\n                return true;\r\n            }\r\n\r\n            // Invalid strings - treat as \"normal\" speed\r\n            if (typeof option === \"string\" && !$.effects.effect[option]) {\r\n                return true;\r\n            }\r\n\r\n            // Complete callback\r\n            if ($.isFunction(option)) {\r\n                return true;\r\n            }\r\n\r\n            // Options hash (but not naming an effect)\r\n            if (typeof option === \"object\" && !option.effect) {\r\n                return true;\r\n            }\r\n\r\n            // Didn't match any standard API\r\n            return false;\r\n        }\r\n\r\n        $.fn.extend({\r\n            effect: function ( /* effect, options, speed, callback */) {\r\n                var args = _normalizeArguments.apply(this, arguments),\r\n                    mode = args.mode,\r\n                    queue = args.queue,\r\n                    effectMethod = $.effects.effect[args.effect];\r\n\r\n                if ($.fx.off || !effectMethod) {\r\n                    // delegate to the original method (e.g., .show()) if possible\r\n                    if (mode) {\r\n                        return this[mode](args.duration, args.complete);\r\n                    } else {\r\n                        return this.each(function () {\r\n                            if (args.complete) {\r\n                                args.complete.call(this);\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function run(next) {\r\n                    var elem = $(this),\r\n                        complete = args.complete,\r\n                        mode = args.mode;\r\n\r\n                    function done() {\r\n                        if ($.isFunction(complete)) {\r\n                            complete.call(elem[0]);\r\n                        }\r\n                        if ($.isFunction(next)) {\r\n                            next();\r\n                        }\r\n                    }\r\n\r\n                    // If the element already has the correct final state, delegate to\r\n                    // the core methods so the internal tracking of \"olddisplay\" works.\r\n                    if (elem.is(\":hidden\") ? mode === \"hide\" : mode === \"show\") {\r\n                        elem[mode]();\r\n                        done();\r\n                    } else {\r\n                        effectMethod.call(elem[0], args, done);\r\n                    }\r\n                }\r\n\r\n                return queue === false ? this.each(run) : this.queue(queue || \"fx\", run);\r\n            },\r\n\r\n            show: (function (orig) {\r\n                return function (option) {\r\n                    if (standardAnimationOption(option)) {\r\n                        return orig.apply(this, arguments);\r\n                    } else {\r\n                        var args = _normalizeArguments.apply(this, arguments);\r\n                        args.mode = \"show\";\r\n                        return this.effect.call(this, args);\r\n                    }\r\n                };\r\n            })($.fn.show),\r\n\r\n            hide: (function (orig) {\r\n                return function (option) {\r\n                    if (standardAnimationOption(option)) {\r\n                        return orig.apply(this, arguments);\r\n                    } else {\r\n                        var args = _normalizeArguments.apply(this, arguments);\r\n                        args.mode = \"hide\";\r\n                        return this.effect.call(this, args);\r\n                    }\r\n                };\r\n            })($.fn.hide),\r\n\r\n            toggle: (function (orig) {\r\n                return function (option) {\r\n                    if (standardAnimationOption(option) || typeof option === \"boolean\") {\r\n                        return orig.apply(this, arguments);\r\n                    } else {\r\n                        var args = _normalizeArguments.apply(this, arguments);\r\n                        args.mode = \"toggle\";\r\n                        return this.effect.call(this, args);\r\n                    }\r\n                };\r\n            })($.fn.toggle),\r\n\r\n            // helper functions\r\n            cssUnit: function (key) {\r\n                var style = this.css(key),\r\n                    val = [];\r\n\r\n                $.each([\"em\", \"px\", \"%\", \"pt\"], function (i, unit) {\r\n                    if (style.indexOf(unit) > 0) {\r\n                        val = [parseFloat(style), unit];\r\n                    }\r\n                });\r\n                return val;\r\n            }\r\n        });\r\n\r\n    })();\r\n\r\n    /******************************************************************************/\r\n    /*********************************** EASING ***********************************/\r\n    /******************************************************************************/\r\n\r\n    (function () {\r\n\r\n        // based on easing equations from Robert Penner (http://www.robertpenner.com/easing)\r\n\r\n        var baseEasings = {};\r\n\r\n        $.each([\"Quad\", \"Cubic\", \"Quart\", \"Quint\", \"Expo\"], function (i, name) {\r\n            baseEasings[name] = function (p) {\r\n                return Math.pow(p, i + 2);\r\n            };\r\n        });\r\n\r\n        $.extend(baseEasings, {\r\n            Sine: function (p) {\r\n                return 1 - Math.cos(p * Math.PI / 2);\r\n            },\r\n            Circ: function (p) {\r\n                return 1 - Math.sqrt(1 - p * p);\r\n            },\r\n            Elastic: function (p) {\r\n                return p === 0 || p === 1 ? p :\r\n                    -Math.pow(2, 8 * (p - 1)) * Math.sin(((p - 1) * 80 - 7.5) * Math.PI / 15);\r\n            },\r\n            Back: function (p) {\r\n                return p * p * (3 * p - 2);\r\n            },\r\n            Bounce: function (p) {\r\n                var pow2,\r\n                    bounce = 4;\r\n\r\n                while (p < ((pow2 = Math.pow(2, --bounce)) - 1) / 11) { }\r\n                return 1 / Math.pow(4, 3 - bounce) - 7.5625 * Math.pow((pow2 * 3 - 2) / 22 - p, 2);\r\n            }\r\n        });\r\n\r\n        $.each(baseEasings, function (name, easeIn) {\r\n            $.easing[\"easeIn\" + name] = easeIn;\r\n            $.easing[\"easeOut\" + name] = function (p) {\r\n                return 1 - easeIn(1 - p);\r\n            };\r\n            $.easing[\"easeInOut\" + name] = function (p) {\r\n                return p < 0.5 ?\r\n                    easeIn(p * 2) / 2 :\r\n                    1 - easeIn(p * -2 + 2) / 2;\r\n            };\r\n        });\r\n\r\n    })();\r\n\r\n    var effect = $.effects;\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Blind 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/blind-effect/\r\n     */\r\n\r\n\r\n    var effectBlind = $.effects.effect.blind = function (o, done) {\r\n        // Create element\r\n        var el = $(this),\r\n            rvertical = /up|down|vertical/,\r\n            rpositivemotion = /up|left|vertical|horizontal/,\r\n            props = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\"],\r\n            mode = $.effects.setMode(el, o.mode || \"hide\"),\r\n            direction = o.direction || \"up\",\r\n            vertical = rvertical.test(direction),\r\n            ref = vertical ? \"height\" : \"width\",\r\n            ref2 = vertical ? \"top\" : \"left\",\r\n            motion = rpositivemotion.test(direction),\r\n            animation = {},\r\n            show = mode === \"show\",\r\n            wrapper, distance, margin;\r\n\r\n        // if already wrapped, the wrapper's properties are my property. #6245\r\n        if (el.parent().is(\".ui-effects-wrapper\")) {\r\n            $.effects.save(el.parent(), props);\r\n        } else {\r\n            $.effects.save(el, props);\r\n        }\r\n        el.show();\r\n        wrapper = $.effects.createWrapper(el).css({\r\n            overflow: \"hidden\"\r\n        });\r\n\r\n        distance = wrapper[ref]();\r\n        margin = parseFloat(wrapper.css(ref2)) || 0;\r\n\r\n        animation[ref] = show ? distance : 0;\r\n        if (!motion) {\r\n            el\r\n                .css(vertical ? \"bottom\" : \"right\", 0)\r\n                .css(vertical ? \"top\" : \"left\", \"auto\")\r\n                .css({ position: \"absolute\" });\r\n\r\n            animation[ref2] = show ? margin : distance + margin;\r\n        }\r\n\r\n        // start at 0 if we are showing\r\n        if (show) {\r\n            wrapper.css(ref, 0);\r\n            if (!motion) {\r\n                wrapper.css(ref2, margin + distance);\r\n            }\r\n        }\r\n\r\n        // Animate\r\n        wrapper.animate(animation, {\r\n            duration: o.duration,\r\n            easing: o.easing,\r\n            queue: false,\r\n            complete: function () {\r\n                if (mode === \"hide\") {\r\n                    el.hide();\r\n                }\r\n                $.effects.restore(el, props);\r\n                $.effects.removeWrapper(el);\r\n                done();\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Bounce 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/bounce-effect/\r\n     */\r\n\r\n\r\n    var effectBounce = $.effects.effect.bounce = function (o, done) {\r\n        var el = $(this),\r\n            props = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\"],\r\n\r\n            // defaults:\r\n            mode = $.effects.setMode(el, o.mode || \"effect\"),\r\n            hide = mode === \"hide\",\r\n            show = mode === \"show\",\r\n            direction = o.direction || \"up\",\r\n            distance = o.distance,\r\n            times = o.times || 5,\r\n\r\n            // number of internal animations\r\n            anims = times * 2 + (show || hide ? 1 : 0),\r\n            speed = o.duration / anims,\r\n            easing = o.easing,\r\n\r\n            // utility:\r\n            ref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\r\n            motion = (direction === \"up\" || direction === \"left\"),\r\n            i,\r\n            upAnim,\r\n            downAnim,\r\n\r\n            // we will need to re-assemble the queue to stack our animations in place\r\n            queue = el.queue(),\r\n            queuelen = queue.length;\r\n\r\n        // Avoid touching opacity to prevent clearType and PNG issues in IE\r\n        if (show || hide) {\r\n            props.push(\"opacity\");\r\n        }\r\n\r\n        $.effects.save(el, props);\r\n        el.show();\r\n        $.effects.createWrapper(el); // Create Wrapper\r\n\r\n        // default distance for the BIGGEST bounce is the outer Distance / 3\r\n        if (!distance) {\r\n            distance = el[ref === \"top\" ? \"outerHeight\" : \"outerWidth\"]() / 3;\r\n        }\r\n\r\n        if (show) {\r\n            downAnim = { opacity: 1 };\r\n            downAnim[ref] = 0;\r\n\r\n            // if we are showing, force opacity 0 and set the initial position\r\n            // then do the \"first\" animation\r\n            el.css(\"opacity\", 0)\r\n                .css(ref, motion ? -distance * 2 : distance * 2)\r\n                .animate(downAnim, speed, easing);\r\n        }\r\n\r\n        // start at the smallest distance if we are hiding\r\n        if (hide) {\r\n            distance = distance / Math.pow(2, times - 1);\r\n        }\r\n\r\n        downAnim = {};\r\n        downAnim[ref] = 0;\r\n        // Bounces up/down/left/right then back to 0 -- times * 2 animations happen here\r\n        for (i = 0; i < times; i++) {\r\n            upAnim = {};\r\n            upAnim[ref] = (motion ? \"-=\" : \"+=\") + distance;\r\n\r\n            el.animate(upAnim, speed, easing)\r\n                .animate(downAnim, speed, easing);\r\n\r\n            distance = hide ? distance * 2 : distance / 2;\r\n        }\r\n\r\n        // Last Bounce when Hiding\r\n        if (hide) {\r\n            upAnim = { opacity: 0 };\r\n            upAnim[ref] = (motion ? \"-=\" : \"+=\") + distance;\r\n\r\n            el.animate(upAnim, speed, easing);\r\n        }\r\n\r\n        el.queue(function () {\r\n            if (hide) {\r\n                el.hide();\r\n            }\r\n            $.effects.restore(el, props);\r\n            $.effects.removeWrapper(el);\r\n            done();\r\n        });\r\n\r\n        // inject all the animations we just queued to be first in line (after \"inprogress\")\r\n        if (queuelen > 1) {\r\n            queue.splice.apply(queue,\r\n                [1, 0].concat(queue.splice(queuelen, anims + 1)));\r\n        }\r\n        el.dequeue();\r\n\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Clip 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/clip-effect/\r\n     */\r\n\r\n\r\n    var effectClip = $.effects.effect.clip = function (o, done) {\r\n        // Create element\r\n        var el = $(this),\r\n            props = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\"],\r\n            mode = $.effects.setMode(el, o.mode || \"hide\"),\r\n            show = mode === \"show\",\r\n            direction = o.direction || \"vertical\",\r\n            vert = direction === \"vertical\",\r\n            size = vert ? \"height\" : \"width\",\r\n            position = vert ? \"top\" : \"left\",\r\n            animation = {},\r\n            wrapper, animate, distance;\r\n\r\n        // Save & Show\r\n        $.effects.save(el, props);\r\n        el.show();\r\n\r\n        // Create Wrapper\r\n        wrapper = $.effects.createWrapper(el).css({\r\n            overflow: \"hidden\"\r\n        });\r\n        animate = (el[0].tagName === \"IMG\") ? wrapper : el;\r\n        distance = animate[size]();\r\n\r\n        // Shift\r\n        if (show) {\r\n            animate.css(size, 0);\r\n            animate.css(position, distance / 2);\r\n        }\r\n\r\n        // Create Animation Object:\r\n        animation[size] = show ? distance : 0;\r\n        animation[position] = show ? 0 : distance / 2;\r\n\r\n        // Animate\r\n        animate.animate(animation, {\r\n            queue: false,\r\n            duration: o.duration,\r\n            easing: o.easing,\r\n            complete: function () {\r\n                if (!show) {\r\n                    el.hide();\r\n                }\r\n                $.effects.restore(el, props);\r\n                $.effects.removeWrapper(el);\r\n                done();\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Drop 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/drop-effect/\r\n     */\r\n\r\n\r\n    var effectDrop = $.effects.effect.drop = function (o, done) {\r\n\r\n        var el = $(this),\r\n            props = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"opacity\", \"height\", \"width\"],\r\n            mode = $.effects.setMode(el, o.mode || \"hide\"),\r\n            show = mode === \"show\",\r\n            direction = o.direction || \"left\",\r\n            ref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\r\n            motion = (direction === \"up\" || direction === \"left\") ? \"pos\" : \"neg\",\r\n            animation = {\r\n                opacity: show ? 1 : 0\r\n            },\r\n            distance;\r\n\r\n        // Adjust\r\n        $.effects.save(el, props);\r\n        el.show();\r\n        $.effects.createWrapper(el);\r\n\r\n        distance = o.distance || el[ref === \"top\" ? \"outerHeight\" : \"outerWidth\"](true) / 2;\r\n\r\n        if (show) {\r\n            el\r\n                .css(\"opacity\", 0)\r\n                .css(ref, motion === \"pos\" ? -distance : distance);\r\n        }\r\n\r\n        // Animation\r\n        animation[ref] = (show ?\r\n            (motion === \"pos\" ? \"+=\" : \"-=\") :\r\n            (motion === \"pos\" ? \"-=\" : \"+=\")) +\r\n            distance;\r\n\r\n        // Animate\r\n        el.animate(animation, {\r\n            queue: false,\r\n            duration: o.duration,\r\n            easing: o.easing,\r\n            complete: function () {\r\n                if (mode === \"hide\") {\r\n                    el.hide();\r\n                }\r\n                $.effects.restore(el, props);\r\n                $.effects.removeWrapper(el);\r\n                done();\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Explode 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/explode-effect/\r\n     */\r\n\r\n\r\n    var effectExplode = $.effects.effect.explode = function (o, done) {\r\n\r\n        var rows = o.pieces ? Math.round(Math.sqrt(o.pieces)) : 3,\r\n            cells = rows,\r\n            el = $(this),\r\n            mode = $.effects.setMode(el, o.mode || \"hide\"),\r\n            show = mode === \"show\",\r\n\r\n            // show and then visibility:hidden the element before calculating offset\r\n            offset = el.show().css(\"visibility\", \"hidden\").offset(),\r\n\r\n            // width and height of a piece\r\n            width = Math.ceil(el.outerWidth() / cells),\r\n            height = Math.ceil(el.outerHeight() / rows),\r\n            pieces = [],\r\n\r\n            // loop\r\n            i, j, left, top, mx, my;\r\n\r\n        // children animate complete:\r\n        function childComplete() {\r\n            pieces.push(this);\r\n            if (pieces.length === rows * cells) {\r\n                animComplete();\r\n            }\r\n        }\r\n\r\n        // clone the element for each row and cell.\r\n        for (i = 0; i < rows; i++) { // ===>\r\n            top = offset.top + i * height;\r\n            my = i - (rows - 1) / 2;\r\n\r\n            for (j = 0; j < cells; j++) { // |||\r\n                left = offset.left + j * width;\r\n                mx = j - (cells - 1) / 2;\r\n\r\n                // Create a clone of the now hidden main element that will be absolute positioned\r\n                // within a wrapper div off the -left and -top equal to size of our pieces\r\n                el\r\n                    .clone()\r\n                    .appendTo(\"body\")\r\n                    .wrap(\"<div></div>\")\r\n                    .css({\r\n                        position: \"absolute\",\r\n                        visibility: \"visible\",\r\n                        left: -j * width,\r\n                        top: -i * height\r\n                    })\r\n\r\n                    // select the wrapper - make it overflow: hidden and absolute positioned based on\r\n                    // where the original was located +left and +top equal to the size of pieces\r\n                    .parent()\r\n                    .addClass(\"ui-effects-explode\")\r\n                    .css({\r\n                        position: \"absolute\",\r\n                        overflow: \"hidden\",\r\n                        width: width,\r\n                        height: height,\r\n                        left: left + (show ? mx * width : 0),\r\n                        top: top + (show ? my * height : 0),\r\n                        opacity: show ? 0 : 1\r\n                    }).animate({\r\n                        left: left + (show ? 0 : mx * width),\r\n                        top: top + (show ? 0 : my * height),\r\n                        opacity: show ? 1 : 0\r\n                    }, o.duration || 500, o.easing, childComplete);\r\n            }\r\n        }\r\n\r\n        function animComplete() {\r\n            el.css({\r\n                visibility: \"visible\"\r\n            });\r\n            $(pieces).remove();\r\n            if (!show) {\r\n                el.hide();\r\n            }\r\n            done();\r\n        }\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Fade 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/fade-effect/\r\n     */\r\n\r\n\r\n    var effectFade = $.effects.effect.fade = function (o, done) {\r\n        var el = $(this),\r\n            mode = $.effects.setMode(el, o.mode || \"toggle\");\r\n\r\n        el.animate({\r\n            opacity: mode\r\n        }, {\r\n            queue: false,\r\n            duration: o.duration,\r\n            easing: o.easing,\r\n            complete: done\r\n        });\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Fold 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/fold-effect/\r\n     */\r\n\r\n\r\n    var effectFold = $.effects.effect.fold = function (o, done) {\r\n\r\n        // Create element\r\n        var el = $(this),\r\n            props = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\"],\r\n            mode = $.effects.setMode(el, o.mode || \"hide\"),\r\n            show = mode === \"show\",\r\n            hide = mode === \"hide\",\r\n            size = o.size || 15,\r\n            percent = /([0-9]+)%/.exec(size),\r\n            horizFirst = !!o.horizFirst,\r\n            widthFirst = show !== horizFirst,\r\n            ref = widthFirst ? [\"width\", \"height\"] : [\"height\", \"width\"],\r\n            duration = o.duration / 2,\r\n            wrapper, distance,\r\n            animation1 = {},\r\n            animation2 = {};\r\n\r\n        $.effects.save(el, props);\r\n        el.show();\r\n\r\n        // Create Wrapper\r\n        wrapper = $.effects.createWrapper(el).css({\r\n            overflow: \"hidden\"\r\n        });\r\n        distance = widthFirst ?\r\n            [wrapper.width(), wrapper.height()] :\r\n            [wrapper.height(), wrapper.width()];\r\n\r\n        if (percent) {\r\n            size = parseInt(percent[1], 10) / 100 * distance[hide ? 0 : 1];\r\n        }\r\n        if (show) {\r\n            wrapper.css(horizFirst ? {\r\n                height: 0,\r\n                width: size\r\n            } : {\r\n                    height: size,\r\n                    width: 0\r\n                });\r\n        }\r\n\r\n        // Animation\r\n        animation1[ref[0]] = show ? distance[0] : size;\r\n        animation2[ref[1]] = show ? distance[1] : 0;\r\n\r\n        // Animate\r\n        wrapper\r\n            .animate(animation1, duration, o.easing)\r\n            .animate(animation2, duration, o.easing, function () {\r\n                if (hide) {\r\n                    el.hide();\r\n                }\r\n                $.effects.restore(el, props);\r\n                $.effects.removeWrapper(el);\r\n                done();\r\n            });\r\n\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Highlight 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/highlight-effect/\r\n     */\r\n\r\n\r\n    var effectHighlight = $.effects.effect.highlight = function (o, done) {\r\n        var elem = $(this),\r\n            props = [\"backgroundImage\", \"backgroundColor\", \"opacity\"],\r\n            mode = $.effects.setMode(elem, o.mode || \"show\"),\r\n            animation = {\r\n                backgroundColor: elem.css(\"backgroundColor\")\r\n            };\r\n\r\n        if (mode === \"hide\") {\r\n            animation.opacity = 0;\r\n        }\r\n\r\n        $.effects.save(elem, props);\r\n\r\n        elem\r\n            .show()\r\n            .css({\r\n                backgroundImage: \"none\",\r\n                backgroundColor: o.color || \"#ffff99\"\r\n            })\r\n            .animate(animation, {\r\n                queue: false,\r\n                duration: o.duration,\r\n                easing: o.easing,\r\n                complete: function () {\r\n                    if (mode === \"hide\") {\r\n                        elem.hide();\r\n                    }\r\n                    $.effects.restore(elem, props);\r\n                    done();\r\n                }\r\n            });\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Size 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/size-effect/\r\n     */\r\n\r\n\r\n    var effectSize = $.effects.effect.size = function (o, done) {\r\n\r\n        // Create element\r\n        var original, baseline, factor,\r\n            el = $(this),\r\n            props0 = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\", \"overflow\", \"opacity\"],\r\n\r\n            // Always restore\r\n            props1 = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"overflow\", \"opacity\"],\r\n\r\n            // Copy for children\r\n            props2 = [\"width\", \"height\", \"overflow\"],\r\n            cProps = [\"fontSize\"],\r\n            vProps = [\"borderTopWidth\", \"borderBottomWidth\", \"paddingTop\", \"paddingBottom\"],\r\n            hProps = [\"borderLeftWidth\", \"borderRightWidth\", \"paddingLeft\", \"paddingRight\"],\r\n\r\n            // Set options\r\n            mode = $.effects.setMode(el, o.mode || \"effect\"),\r\n            restore = o.restore || mode !== \"effect\",\r\n            scale = o.scale || \"both\",\r\n            origin = o.origin || [\"middle\", \"center\"],\r\n            position = el.css(\"position\"),\r\n            props = restore ? props0 : props1,\r\n            zero = {\r\n                height: 0,\r\n                width: 0,\r\n                outerHeight: 0,\r\n                outerWidth: 0\r\n            };\r\n\r\n        if (mode === \"show\") {\r\n            el.show();\r\n        }\r\n        original = {\r\n            height: el.height(),\r\n            width: el.width(),\r\n            outerHeight: el.outerHeight(),\r\n            outerWidth: el.outerWidth()\r\n        };\r\n\r\n        if (o.mode === \"toggle\" && mode === \"show\") {\r\n            el.from = o.to || zero;\r\n            el.to = o.from || original;\r\n        } else {\r\n            el.from = o.from || (mode === \"show\" ? zero : original);\r\n            el.to = o.to || (mode === \"hide\" ? zero : original);\r\n        }\r\n\r\n        // Set scaling factor\r\n        factor = {\r\n            from: {\r\n                y: el.from.height / original.height,\r\n                x: el.from.width / original.width\r\n            },\r\n            to: {\r\n                y: el.to.height / original.height,\r\n                x: el.to.width / original.width\r\n            }\r\n        };\r\n\r\n        // Scale the css box\r\n        if (scale === \"box\" || scale === \"both\") {\r\n\r\n            // Vertical props scaling\r\n            if (factor.from.y !== factor.to.y) {\r\n                props = props.concat(vProps);\r\n                el.from = $.effects.setTransition(el, vProps, factor.from.y, el.from);\r\n                el.to = $.effects.setTransition(el, vProps, factor.to.y, el.to);\r\n            }\r\n\r\n            // Horizontal props scaling\r\n            if (factor.from.x !== factor.to.x) {\r\n                props = props.concat(hProps);\r\n                el.from = $.effects.setTransition(el, hProps, factor.from.x, el.from);\r\n                el.to = $.effects.setTransition(el, hProps, factor.to.x, el.to);\r\n            }\r\n        }\r\n\r\n        // Scale the content\r\n        if (scale === \"content\" || scale === \"both\") {\r\n\r\n            // Vertical props scaling\r\n            if (factor.from.y !== factor.to.y) {\r\n                props = props.concat(cProps).concat(props2);\r\n                el.from = $.effects.setTransition(el, cProps, factor.from.y, el.from);\r\n                el.to = $.effects.setTransition(el, cProps, factor.to.y, el.to);\r\n            }\r\n        }\r\n\r\n        $.effects.save(el, props);\r\n        el.show();\r\n        $.effects.createWrapper(el);\r\n        el.css(\"overflow\", \"hidden\").css(el.from);\r\n\r\n        // Adjust\r\n        if (origin) { // Calculate baseline shifts\r\n            baseline = $.effects.getBaseline(origin, original);\r\n            el.from.top = (original.outerHeight - el.outerHeight()) * baseline.y;\r\n            el.from.left = (original.outerWidth - el.outerWidth()) * baseline.x;\r\n            el.to.top = (original.outerHeight - el.to.outerHeight) * baseline.y;\r\n            el.to.left = (original.outerWidth - el.to.outerWidth) * baseline.x;\r\n        }\r\n        el.css(el.from); // set top & left\r\n\r\n        // Animate\r\n        if (scale === \"content\" || scale === \"both\") { // Scale the children\r\n\r\n            // Add margins/font-size\r\n            vProps = vProps.concat([\"marginTop\", \"marginBottom\"]).concat(cProps);\r\n            hProps = hProps.concat([\"marginLeft\", \"marginRight\"]);\r\n            props2 = props0.concat(vProps).concat(hProps);\r\n\r\n            el.find(\"*[width]\").each(function () {\r\n                var child = $(this),\r\n                    c_original = {\r\n                        height: child.height(),\r\n                        width: child.width(),\r\n                        outerHeight: child.outerHeight(),\r\n                        outerWidth: child.outerWidth()\r\n                    };\r\n                if (restore) {\r\n                    $.effects.save(child, props2);\r\n                }\r\n\r\n                child.from = {\r\n                    height: c_original.height * factor.from.y,\r\n                    width: c_original.width * factor.from.x,\r\n                    outerHeight: c_original.outerHeight * factor.from.y,\r\n                    outerWidth: c_original.outerWidth * factor.from.x\r\n                };\r\n                child.to = {\r\n                    height: c_original.height * factor.to.y,\r\n                    width: c_original.width * factor.to.x,\r\n                    outerHeight: c_original.height * factor.to.y,\r\n                    outerWidth: c_original.width * factor.to.x\r\n                };\r\n\r\n                // Vertical props scaling\r\n                if (factor.from.y !== factor.to.y) {\r\n                    child.from = $.effects.setTransition(child, vProps, factor.from.y, child.from);\r\n                    child.to = $.effects.setTransition(child, vProps, factor.to.y, child.to);\r\n                }\r\n\r\n                // Horizontal props scaling\r\n                if (factor.from.x !== factor.to.x) {\r\n                    child.from = $.effects.setTransition(child, hProps, factor.from.x, child.from);\r\n                    child.to = $.effects.setTransition(child, hProps, factor.to.x, child.to);\r\n                }\r\n\r\n                // Animate children\r\n                child.css(child.from);\r\n                child.animate(child.to, o.duration, o.easing, function () {\r\n\r\n                    // Restore children\r\n                    if (restore) {\r\n                        $.effects.restore(child, props2);\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n        // Animate\r\n        el.animate(el.to, {\r\n            queue: false,\r\n            duration: o.duration,\r\n            easing: o.easing,\r\n            complete: function () {\r\n                if (el.to.opacity === 0) {\r\n                    el.css(\"opacity\", el.from.opacity);\r\n                }\r\n                if (mode === \"hide\") {\r\n                    el.hide();\r\n                }\r\n                $.effects.restore(el, props);\r\n                if (!restore) {\r\n\r\n                    // we need to calculate our new positioning based on the scaling\r\n                    if (position === \"static\") {\r\n                        el.css({\r\n                            position: \"relative\",\r\n                            top: el.to.top,\r\n                            left: el.to.left\r\n                        });\r\n                    } else {\r\n                        $.each([\"top\", \"left\"], function (idx, pos) {\r\n                            el.css(pos, function (_, str) {\r\n                                var val = parseInt(str, 10),\r\n                                    toRef = idx ? el.to.left : el.to.top;\r\n\r\n                                // if original was \"auto\", recalculate the new value from wrapper\r\n                                if (str === \"auto\") {\r\n                                    return toRef + \"px\";\r\n                                }\r\n\r\n                                return val + toRef + \"px\";\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n\r\n                $.effects.removeWrapper(el);\r\n                done();\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Scale 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/scale-effect/\r\n     */\r\n\r\n\r\n    var effectScale = $.effects.effect.scale = function (o, done) {\r\n\r\n        // Create element\r\n        var el = $(this),\r\n            options = $.extend(true, {}, o),\r\n            mode = $.effects.setMode(el, o.mode || \"effect\"),\r\n            percent = parseInt(o.percent, 10) ||\r\n                (parseInt(o.percent, 10) === 0 ? 0 : (mode === \"hide\" ? 0 : 100)),\r\n            direction = o.direction || \"both\",\r\n            origin = o.origin,\r\n            original = {\r\n                height: el.height(),\r\n                width: el.width(),\r\n                outerHeight: el.outerHeight(),\r\n                outerWidth: el.outerWidth()\r\n            },\r\n            factor = {\r\n                y: direction !== \"horizontal\" ? (percent / 100) : 1,\r\n                x: direction !== \"vertical\" ? (percent / 100) : 1\r\n            };\r\n\r\n        // We are going to pass this effect to the size effect:\r\n        options.effect = \"size\";\r\n        options.queue = false;\r\n        options.complete = done;\r\n\r\n        // Set default origin and restore for show/hide\r\n        if (mode !== \"effect\") {\r\n            options.origin = origin || [\"middle\", \"center\"];\r\n            options.restore = true;\r\n        }\r\n\r\n        options.from = o.from || (mode === \"show\" ? {\r\n            height: 0,\r\n            width: 0,\r\n            outerHeight: 0,\r\n            outerWidth: 0\r\n        } : original);\r\n        options.to = {\r\n            height: original.height * factor.y,\r\n            width: original.width * factor.x,\r\n            outerHeight: original.outerHeight * factor.y,\r\n            outerWidth: original.outerWidth * factor.x\r\n        };\r\n\r\n        // Fade option to support puff\r\n        if (options.fade) {\r\n            if (mode === \"show\") {\r\n                options.from.opacity = 0;\r\n                options.to.opacity = 1;\r\n            }\r\n            if (mode === \"hide\") {\r\n                options.from.opacity = 1;\r\n                options.to.opacity = 0;\r\n            }\r\n        }\r\n\r\n        // Animate\r\n        el.effect(options);\r\n\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Puff 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/puff-effect/\r\n     */\r\n\r\n\r\n    var effectPuff = $.effects.effect.puff = function (o, done) {\r\n        var elem = $(this),\r\n            mode = $.effects.setMode(elem, o.mode || \"hide\"),\r\n            hide = mode === \"hide\",\r\n            percent = parseInt(o.percent, 10) || 150,\r\n            factor = percent / 100,\r\n            original = {\r\n                height: elem.height(),\r\n                width: elem.width(),\r\n                outerHeight: elem.outerHeight(),\r\n                outerWidth: elem.outerWidth()\r\n            };\r\n\r\n        $.extend(o, {\r\n            effect: \"scale\",\r\n            queue: false,\r\n            fade: true,\r\n            mode: mode,\r\n            complete: done,\r\n            percent: hide ? percent : 100,\r\n            from: hide ?\r\n                original :\r\n                {\r\n                    height: original.height * factor,\r\n                    width: original.width * factor,\r\n                    outerHeight: original.outerHeight * factor,\r\n                    outerWidth: original.outerWidth * factor\r\n                }\r\n        });\r\n\r\n        elem.effect(o);\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Pulsate 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/pulsate-effect/\r\n     */\r\n\r\n\r\n    var effectPulsate = $.effects.effect.pulsate = function (o, done) {\r\n        var elem = $(this),\r\n            mode = $.effects.setMode(elem, o.mode || \"show\"),\r\n            show = mode === \"show\",\r\n            hide = mode === \"hide\",\r\n            showhide = (show || mode === \"hide\"),\r\n\r\n            // showing or hiding leaves of the \"last\" animation\r\n            anims = ((o.times || 5) * 2) + (showhide ? 1 : 0),\r\n            duration = o.duration / anims,\r\n            animateTo = 0,\r\n            queue = elem.queue(),\r\n            queuelen = queue.length,\r\n            i;\r\n\r\n        if (show || !elem.is(\":visible\")) {\r\n            elem.css(\"opacity\", 0).show();\r\n            animateTo = 1;\r\n        }\r\n\r\n        // anims - 1 opacity \"toggles\"\r\n        for (i = 1; i < anims; i++) {\r\n            elem.animate({\r\n                opacity: animateTo\r\n            }, duration, o.easing);\r\n            animateTo = 1 - animateTo;\r\n        }\r\n\r\n        elem.animate({\r\n            opacity: animateTo\r\n        }, duration, o.easing);\r\n\r\n        elem.queue(function () {\r\n            if (hide) {\r\n                elem.hide();\r\n            }\r\n            done();\r\n        });\r\n\r\n        // We just queued up \"anims\" animations, we need to put them next in the queue\r\n        if (queuelen > 1) {\r\n            queue.splice.apply(queue,\r\n                [1, 0].concat(queue.splice(queuelen, anims + 1)));\r\n        }\r\n        elem.dequeue();\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Shake 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/shake-effect/\r\n     */\r\n\r\n\r\n    var effectShake = $.effects.effect.shake = function (o, done) {\r\n\r\n        var el = $(this),\r\n            props = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"height\", \"width\"],\r\n            mode = $.effects.setMode(el, o.mode || \"effect\"),\r\n            direction = o.direction || \"left\",\r\n            distance = o.distance || 20,\r\n            times = o.times || 3,\r\n            anims = times * 2 + 1,\r\n            speed = Math.round(o.duration / anims),\r\n            ref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\r\n            positiveMotion = (direction === \"up\" || direction === \"left\"),\r\n            animation = {},\r\n            animation1 = {},\r\n            animation2 = {},\r\n            i,\r\n\r\n            // we will need to re-assemble the queue to stack our animations in place\r\n            queue = el.queue(),\r\n            queuelen = queue.length;\r\n\r\n        $.effects.save(el, props);\r\n        el.show();\r\n        $.effects.createWrapper(el);\r\n\r\n        // Animation\r\n        animation[ref] = (positiveMotion ? \"-=\" : \"+=\") + distance;\r\n        animation1[ref] = (positiveMotion ? \"+=\" : \"-=\") + distance * 2;\r\n        animation2[ref] = (positiveMotion ? \"-=\" : \"+=\") + distance * 2;\r\n\r\n        // Animate\r\n        el.animate(animation, speed, o.easing);\r\n\r\n        // Shakes\r\n        for (i = 1; i < times; i++) {\r\n            el.animate(animation1, speed, o.easing).animate(animation2, speed, o.easing);\r\n        }\r\n        el\r\n            .animate(animation1, speed, o.easing)\r\n            .animate(animation, speed / 2, o.easing)\r\n            .queue(function () {\r\n                if (mode === \"hide\") {\r\n                    el.hide();\r\n                }\r\n                $.effects.restore(el, props);\r\n                $.effects.removeWrapper(el);\r\n                done();\r\n            });\r\n\r\n        // inject all the animations we just queued to be first in line (after \"inprogress\")\r\n        if (queuelen > 1) {\r\n            queue.splice.apply(queue,\r\n                [1, 0].concat(queue.splice(queuelen, anims + 1)));\r\n        }\r\n        el.dequeue();\r\n\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Slide 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/slide-effect/\r\n     */\r\n\r\n\r\n    var effectSlide = $.effects.effect.slide = function (o, done) {\r\n\r\n        // Create element\r\n        var el = $(this),\r\n            props = [\"position\", \"top\", \"bottom\", \"left\", \"right\", \"width\", \"height\"],\r\n            mode = $.effects.setMode(el, o.mode || \"show\"),\r\n            show = mode === \"show\",\r\n            direction = o.direction || \"left\",\r\n            ref = (direction === \"up\" || direction === \"down\") ? \"top\" : \"left\",\r\n            positiveMotion = (direction === \"up\" || direction === \"left\"),\r\n            distance,\r\n            animation = {};\r\n\r\n        // Adjust\r\n        $.effects.save(el, props);\r\n        el.show();\r\n        distance = o.distance || el[ref === \"top\" ? \"outerHeight\" : \"outerWidth\"](true);\r\n\r\n        $.effects.createWrapper(el).css({\r\n            overflow: \"hidden\"\r\n        });\r\n\r\n        if (show) {\r\n            el.css(ref, positiveMotion ? (isNaN(distance) ? \"-\" + distance : -distance) : distance);\r\n        }\r\n\r\n        // Animation\r\n        animation[ref] = (show ?\r\n            (positiveMotion ? \"+=\" : \"-=\") :\r\n            (positiveMotion ? \"-=\" : \"+=\")) +\r\n            distance;\r\n\r\n        // Animate\r\n        el.animate(animation, {\r\n            queue: false,\r\n            duration: o.duration,\r\n            easing: o.easing,\r\n            complete: function () {\r\n                if (mode === \"hide\") {\r\n                    el.hide();\r\n                }\r\n                $.effects.restore(el, props);\r\n                $.effects.removeWrapper(el);\r\n                done();\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    /*!\r\n     * jQuery UI Effects Transfer 1.11.4\r\n     * http://jqueryui.com\r\n     *\r\n     * Copyright jQuery Foundation and other contributors\r\n     * Released under the MIT license.\r\n     * http://jquery.org/license\r\n     *\r\n     * http://api.jqueryui.com/transfer-effect/\r\n     */\r\n\r\n\r\n    var effectTransfer = $.effects.effect.transfer = function (o, done) {\r\n        var elem = $(this),\r\n            target = $(o.to),\r\n            targetFixed = target.css(\"position\") === \"fixed\",\r\n            body = $(\"body\"),\r\n            fixTop = targetFixed ? body.scrollTop() : 0,\r\n            fixLeft = targetFixed ? body.scrollLeft() : 0,\r\n            endPosition = target.offset(),\r\n            animation = {\r\n                top: endPosition.top - fixTop,\r\n                left: endPosition.left - fixLeft,\r\n                height: target.innerHeight(),\r\n                width: target.innerWidth()\r\n            },\r\n            startPosition = elem.offset(),\r\n            transfer = $(\"<div class='ui-effects-transfer'></div>\")\r\n                .appendTo(document.body)\r\n                .addClass(o.className)\r\n                .css({\r\n                    top: startPosition.top - fixTop,\r\n                    left: startPosition.left - fixLeft,\r\n                    height: elem.innerHeight(),\r\n                    width: elem.innerWidth(),\r\n                    position: targetFixed ? \"fixed\" : \"absolute\"\r\n                })\r\n                .animate(animation, o.duration, o.easing, function () {\r\n                    transfer.remove();\r\n                    done();\r\n                });\r\n    };\r\n\r\n\r\n\r\n}));\n",
    "/*!\r\n * jQuery UI Touch Punch 0.2.3\r\n *\r\n * Copyright 2011�2014, Dave Furfero\r\n * Dual licensed under the MIT or GPL Version 2 licenses.\r\n *\r\n * Depends:\r\n *  jquery.ui.widget.js\r\n *  jquery.ui.mouse.js\r\n */\r\ndefine('vendor/jquery.ui.touch-punc',\r\n    ['jquery'],\r\n    function ($) {\r\n        // Detect touch support\r\n        $.support.touch = 'ontouchend' in document;\r\n\r\n        // Ignore browsers without touch support\r\n        if (!$.support.touch) {\r\n            return;\r\n        }\r\n\r\n        var mouseProto = $.ui.mouse.prototype,\r\n            _mouseInit = mouseProto._mouseInit,\r\n            _mouseDestroy = mouseProto._mouseDestroy,\r\n            touchHandled;\r\n\r\n        /**\r\n         * Simulate a mouse event based on a corresponding touch event\r\n         * @param {Object} event A touch event\r\n         * @param {String} simulatedType The corresponding mouse event\r\n         */\r\n        function simulateMouseEvent(event, simulatedType) {\r\n\r\n            // Ignore multi-touch events\r\n            if (event.originalEvent.touches.length > 1) {\r\n                return;\r\n            }\r\n\r\n            event.preventDefault();\r\n\r\n            var touch = event.originalEvent.changedTouches[0],\r\n                simulatedEvent = document.createEvent('MouseEvents');\r\n\r\n            // Initialize the simulated mouse event using the touch event's coordinates\r\n            simulatedEvent.initMouseEvent(\r\n                simulatedType,    // type\r\n                true,             // bubbles                    \r\n                true,             // cancelable                 \r\n                window,           // view                       \r\n                1,                // detail                     \r\n                touch.screenX,    // screenX                    \r\n                touch.screenY,    // screenY                    \r\n                touch.clientX,    // clientX                    \r\n                touch.clientY,    // clientY                    \r\n                false,            // ctrlKey                    \r\n                false,            // altKey                     \r\n                false,            // shiftKey                   \r\n                false,            // metaKey                    \r\n                0,                // button                     \r\n                null              // relatedTarget              \r\n            );\r\n\r\n            // Dispatch the simulated event to the target element\r\n            event.target.dispatchEvent(simulatedEvent);\r\n        }\r\n\r\n        /**\r\n         * Handle the jQuery UI widget's touchstart events\r\n         * @param {Object} event The widget element's touchstart event\r\n         */\r\n        mouseProto._touchStart = function (event) {\r\n\r\n            var self = this;\r\n\r\n            // Ignore the event if another widget is already being handled\r\n            if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {\r\n                return;\r\n            }\r\n\r\n            // Set the flag to prevent other widgets from inheriting the touch event\r\n            touchHandled = true;\r\n\r\n            // Track movement to determine if interaction was a click\r\n            self._touchMoved = false;\r\n\r\n            // Simulate the mouseover event\r\n            simulateMouseEvent(event, 'mouseover');\r\n\r\n            // Simulate the mousemove event\r\n            simulateMouseEvent(event, 'mousemove');\r\n\r\n            // Simulate the mousedown event\r\n            simulateMouseEvent(event, 'mousedown');\r\n        };\r\n\r\n        /**\r\n         * Handle the jQuery UI widget's touchmove events\r\n         * @param {Object} event The document's touchmove event\r\n         */\r\n        mouseProto._touchMove = function (event) {\r\n\r\n            // Ignore event if not handled\r\n            if (!touchHandled) {\r\n                return;\r\n            }\r\n\r\n            // Interaction was not a click\r\n            this._touchMoved = true;\r\n\r\n            // Simulate the mousemove event\r\n            simulateMouseEvent(event, 'mousemove');\r\n        };\r\n\r\n        /**\r\n         * Handle the jQuery UI widget's touchend events\r\n         * @param {Object} event The document's touchend event\r\n         */\r\n        mouseProto._touchEnd = function (event) {\r\n\r\n            // Ignore event if not handled\r\n            if (!touchHandled) {\r\n                return;\r\n            }\r\n\r\n            // Simulate the mouseup event\r\n            simulateMouseEvent(event, 'mouseup');\r\n\r\n            // Simulate the mouseout event\r\n            simulateMouseEvent(event, 'mouseout');\r\n\r\n            // If the touch interaction did not move, it should trigger a click\r\n            if (!this._touchMoved) {\r\n\r\n                // Simulate the click event\r\n                simulateMouseEvent(event, 'click');\r\n            }\r\n\r\n            // Unset the flag to allow other widgets to inherit the touch event\r\n            touchHandled = false;\r\n        };\r\n\r\n        /**\r\n         * A duck punch of the $.ui.mouse _mouseInit method to support touch events.\r\n         * This method extends the widget with bound touch event handlers that\r\n         * translate touch events to mouse events and pass them to the widget's\r\n         * original mouse event handling methods.\r\n         */\r\n        mouseProto._mouseInit = function () {\r\n\r\n            var self = this;\r\n\r\n            // Delegate the touch handlers to the widget's element\r\n            self.element.bind({\r\n                touchstart: $.proxy(self, '_touchStart'),\r\n                touchmove: $.proxy(self, '_touchMove'),\r\n                touchend: $.proxy(self, '_touchEnd')\r\n            });\r\n\r\n            // Call the original $.ui.mouse init method\r\n            _mouseInit.call(self);\r\n        };\r\n\r\n        /**\r\n         * Remove the touch event handlers\r\n         */\r\n        mouseProto._mouseDestroy = function () {\r\n\r\n            var self = this;\r\n\r\n            // Delegate the touch handlers to the widget's element\r\n            self.element.unbind({\r\n                touchstart: $.proxy(self, '_touchStart'),\r\n                touchmove: $.proxy(self, '_touchMove'),\r\n                touchend: $.proxy(self, '_touchEnd')\r\n            });\r\n\r\n            // Call the original $.ui.mouse destroy method\r\n            _mouseDestroy.call(self);\r\n        };\r\n\r\n    });\n",
    "; (function (factory) {\r\n    if (typeof define === \"function\" && define.amd) {\r\n        // AMD anonymous module\r\n        define('vendor/knockout-sortable',[\"knockout\", \"jquery\", 'vendor/jquery-ui', 'vendor/jquery.ui.touch-punc'], factory);\r\n    } else if (typeof require === \"function\" && typeof exports === \"object\" && typeof module === \"object\") {\r\n        // CommonJS module\r\n        var ko = require(\"knockout\"),\r\n            jQuery = require(\"jquery\");\r\n        require('vendor/jquery-ui');\r\n        require('vendor/jquery.ui.touch-punc');\r\n\r\n        factory(ko, jQuery);\r\n    } else {\r\n        // No module loader (plain <script> tag) - put directly in global namespace\r\n        factory(window.ko, window.jQuery);\r\n    }\r\n})(function (ko, $) {\r\n    var ITEMKEY = \"ko_sortItem\",\r\n        INDEXKEY = \"ko_sourceIndex\",\r\n        LISTKEY = \"ko_sortList\",\r\n        PARENTKEY = \"ko_parentList\",\r\n        DRAGKEY = \"ko_dragItem\",\r\n        unwrap = ko.utils.unwrapObservable,\r\n        dataGet = ko.utils.domData.get,\r\n        dataSet = ko.utils.domData.set,\r\n        version = $.ui && $.ui.version,\r\n        //1.8.24 included a fix for how events were triggered in nested sortables. indexOf checks will fail if version starts with that value (0 vs. -1)\r\n        hasNestedSortableFix = version && version.indexOf(\"1.6.\") && version.indexOf(\"1.7.\") && (version.indexOf(\"1.8.\") || version === \"1.8.24\");\r\n\r\n    //internal afterRender that adds meta-data to children\r\n    var addMetaDataAfterRender = function (elements, data) {\r\n        ko.utils.arrayForEach(elements, function (element) {\r\n            if (element.nodeType === 1) {\r\n                dataSet(element, ITEMKEY, data);\r\n                dataSet(element, PARENTKEY, dataGet(element.parentNode, LISTKEY));\r\n            }\r\n        });\r\n    };\r\n\r\n    //prepare the proper options for the template binding\r\n    var prepareTemplateOptions = function (valueAccessor, dataName) {\r\n        var result = {},\r\n            options = {},\r\n            actualAfterRender;\r\n\r\n        //build our options to pass to the template engine\r\n        if (ko.utils.peekObservable(valueAccessor()).data) {\r\n            options = unwrap(valueAccessor() || {});\r\n            result[dataName] = options.data;\r\n            if (options.hasOwnProperty(\"template\")) {\r\n                result.name = options.template;\r\n            }\r\n        } else {\r\n            result[dataName] = valueAccessor();\r\n        }\r\n\r\n        ko.utils.arrayForEach([\"afterAdd\", \"afterRender\", \"as\", \"beforeRemove\", \"includeDestroyed\", \"templateEngine\", \"templateOptions\", \"nodes\"], function (option) {\r\n            if (options.hasOwnProperty(option)) {\r\n                result[option] = options[option];\r\n            } else if (ko.bindingHandlers.sortable.hasOwnProperty(option)) {\r\n                result[option] = ko.bindingHandlers.sortable[option];\r\n            }\r\n        });\r\n\r\n        //use an afterRender function to add meta-data\r\n        if (dataName === \"foreach\") {\r\n            if (result.afterRender) {\r\n                //wrap the existing function, if it was passed\r\n                actualAfterRender = result.afterRender;\r\n                result.afterRender = function (element, data) {\r\n                    addMetaDataAfterRender.call(data, element, data);\r\n                    actualAfterRender.call(data, element, data);\r\n                };\r\n            } else {\r\n                result.afterRender = addMetaDataAfterRender;\r\n            }\r\n        }\r\n\r\n        //return options to pass to the template binding\r\n        return result;\r\n    };\r\n\r\n    var updateIndexFromDestroyedItems = function (index, items) {\r\n        var unwrapped = unwrap(items);\r\n\r\n        if (unwrapped) {\r\n            for (var i = 0; i <= index; i++) {\r\n                //add one for every destroyed item we find before the targetIndex in the target array\r\n                if (unwrapped[i] && unwrap(unwrapped[i]._destroy)) {\r\n                    index++;\r\n                }\r\n            }\r\n        }\r\n\r\n        return index;\r\n    };\r\n\r\n    //remove problematic leading/trailing whitespace from templates\r\n    var stripTemplateWhitespace = function (element, name) {\r\n        var templateSource,\r\n            templateElement;\r\n\r\n        //process named templates\r\n        if (name) {\r\n            templateElement = document.getElementById(name);\r\n            if (templateElement) {\r\n                templateSource = new ko.templateSources.domElement(templateElement);\r\n                templateSource.text(templateSource.text().trim());\r\n            }\r\n        }\r\n        else {\r\n            //remove leading/trailing non-elements from anonymous templates\r\n            $(element).contents().each(function () {\r\n                if (this && this.nodeType !== 1) {\r\n                    element.removeChild(this);\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    //connect items with observableArrays\r\n    ko.bindingHandlers.sortable = {\r\n        init: function (element, valueAccessor, allBindingsAccessor, data, context) {\r\n            var $element = $(element),\r\n                value = unwrap(valueAccessor()) || {},\r\n                templateOptions = prepareTemplateOptions(valueAccessor, \"foreach\"),\r\n                sortable = {},\r\n                startActual, updateActual;\r\n\r\n            stripTemplateWhitespace(element, templateOptions.name);\r\n\r\n            //build a new object that has the global options with overrides from the binding\r\n            $.extend(true, sortable, ko.bindingHandlers.sortable);\r\n            if (value.options && sortable.options) {\r\n                ko.utils.extend(sortable.options, value.options);\r\n                delete value.options;\r\n            }\r\n            ko.utils.extend(sortable, value);\r\n\r\n            //if allowDrop is an observable or a function, then execute it in a computed observable\r\n            if (sortable.connectClass && (ko.isObservable(sortable.allowDrop) || typeof sortable.allowDrop == \"function\")) {\r\n                ko.computed({\r\n                    read: function () {\r\n                        var value = unwrap(sortable.allowDrop),\r\n                            shouldAdd = typeof value == \"function\" ? value.call(this, templateOptions.foreach) : value;\r\n                        ko.utils.toggleDomNodeCssClass(element, sortable.connectClass, shouldAdd);\r\n                    },\r\n                    disposeWhenNodeIsRemoved: element\r\n                }, this);\r\n            } else {\r\n                ko.utils.toggleDomNodeCssClass(element, sortable.connectClass, sortable.allowDrop);\r\n            }\r\n\r\n            //wrap the template binding\r\n            ko.bindingHandlers.template.init(element, function () { return templateOptions; }, allBindingsAccessor, data, context);\r\n\r\n            //keep a reference to start/update functions that might have been passed in\r\n            startActual = sortable.options.start;\r\n            updateActual = sortable.options.update;\r\n\r\n            //ensure draggable table row cells maintain their width while dragging (unless a helper is provided)\r\n            if (!sortable.options.helper) {\r\n                sortable.options.helper = function (e, ui) {\r\n                    if (ui.is(\"tr\")) {\r\n                        ui.children().each(function () {\r\n                            $(this).width($(this).width());\r\n                        });\r\n                    }\r\n                    return ui;\r\n                };\r\n            }\r\n\r\n            //initialize sortable binding after template binding has rendered in update function\r\n            var createTimeout = setTimeout(function () {\r\n                var dragItem;\r\n                var originalReceive = sortable.options.receive;\r\n\r\n                $element.sortable(ko.utils.extend(sortable.options, {\r\n                    start: function (event, ui) {\r\n                        //track original index\r\n                        var el = ui.item[0];\r\n                        dataSet(el, INDEXKEY, ko.utils.arrayIndexOf(ui.item.parent().children(), el));\r\n\r\n                        //make sure that fields have a chance to update model\r\n                        ui.item.find(\"input:focus\").change();\r\n                        if (startActual) {\r\n                            startActual.apply(this, arguments);\r\n                        }\r\n                    },\r\n                    receive: function (event, ui) {\r\n                        //optionally apply an existing receive handler\r\n                        if (typeof originalReceive === \"function\") {\r\n                            originalReceive.call(this, event, ui);\r\n                        }\r\n\r\n                        dragItem = dataGet(ui.item[0], DRAGKEY);\r\n                        if (dragItem) {\r\n                            //copy the model item, if a clone option is provided\r\n                            if (dragItem.clone) {\r\n                                dragItem = dragItem.clone();\r\n                            }\r\n\r\n                            //configure a handler to potentially manipulate item before drop\r\n                            if (sortable.dragged) {\r\n                                dragItem = sortable.dragged.call(this, dragItem, event, ui) || dragItem;\r\n                            }\r\n                        }\r\n                    },\r\n                    update: function (event, ui) {\r\n                        var sourceParent, targetParent, sourceIndex, targetIndex, arg,\r\n                            el = ui.item[0],\r\n                            parentEl = ui.item.parent()[0],\r\n                            item = dataGet(el, ITEMKEY) || dragItem;\r\n\r\n                        if (!item) {\r\n                            $(el).remove();\r\n                        }\r\n                        dragItem = null;\r\n\r\n                        //make sure that moves only run once, as update fires on multiple containers\r\n                        if (item && (this === parentEl) || (!hasNestedSortableFix && $.contains(this, parentEl))) {\r\n                            //identify parents\r\n                            sourceParent = dataGet(el, PARENTKEY);\r\n                            sourceIndex = dataGet(el, INDEXKEY);\r\n                            targetParent = dataGet(el.parentNode, LISTKEY);\r\n                            targetIndex = ko.utils.arrayIndexOf(ui.item.parent().children(), el);\r\n\r\n                            //take destroyed items into consideration\r\n                            if (!templateOptions.includeDestroyed) {\r\n                                sourceIndex = updateIndexFromDestroyedItems(sourceIndex, sourceParent);\r\n                                targetIndex = updateIndexFromDestroyedItems(targetIndex, targetParent);\r\n                            }\r\n\r\n                            //build up args for the callbacks\r\n                            if (sortable.beforeMove || sortable.afterMove) {\r\n                                arg = {\r\n                                    item: item,\r\n                                    sourceParent: sourceParent,\r\n                                    sourceParentNode: sourceParent && ui.sender || el.parentNode,\r\n                                    sourceIndex: sourceIndex,\r\n                                    targetParent: targetParent,\r\n                                    targetIndex: targetIndex,\r\n                                    cancelDrop: false\r\n                                };\r\n\r\n                                //execute the configured callback prior to actually moving items\r\n                                if (sortable.beforeMove) {\r\n                                    sortable.beforeMove.call(this, arg, event, ui);\r\n                                }\r\n                            }\r\n\r\n                            //call cancel on the correct list, so KO can take care of DOM manipulation\r\n                            if (sourceParent) {\r\n                                $(sourceParent === targetParent ? this : ui.sender || this).sortable(\"cancel\");\r\n                            }\r\n                            //for a draggable item just remove the element\r\n                            else {\r\n                                $(el).remove();\r\n                            }\r\n\r\n                            //if beforeMove told us to cancel, then we are done\r\n                            if (arg && arg.cancelDrop) {\r\n                                return;\r\n                            }\r\n\r\n                            //if the strategy option is unset or false, employ the order strategy involving removal and insertion of items\r\n                            if (!sortable.hasOwnProperty(\"strategyMove\") || sortable.strategyMove === false) {\r\n                                //do the actual move\r\n                                if (targetIndex >= 0) {\r\n                                    if (sourceParent) {\r\n                                        sourceParent.splice(sourceIndex, 1);\r\n\r\n                                        //if using deferred updates plugin, force updates\r\n                                        if (ko.processAllDeferredBindingUpdates) {\r\n                                            ko.processAllDeferredBindingUpdates();\r\n                                        }\r\n\r\n                                        //if using deferred updates on knockout 3.4, force updates\r\n                                        if (ko.options && ko.options.deferUpdates) {\r\n                                            ko.tasks.runEarly();\r\n                                        }\r\n                                    }\r\n\r\n                                    targetParent.splice(targetIndex, 0, item);\r\n                                }\r\n\r\n                                //rendering is handled by manipulating the observableArray; ignore dropped element\r\n                                dataSet(el, ITEMKEY, null);\r\n                            }\r\n                            else { //employ the strategy of moving items\r\n                                if (targetIndex >= 0) {\r\n                                    if (sourceParent) {\r\n                                        if (sourceParent !== targetParent) {\r\n                                            // moving from one list to another\r\n\r\n                                            sourceParent.splice(sourceIndex, 1);\r\n                                            targetParent.splice(targetIndex, 0, item);\r\n\r\n                                            //rendering is handled by manipulating the observableArray; ignore dropped element\r\n                                            dataSet(el, ITEMKEY, null);\r\n                                            ui.item.remove();\r\n                                        }\r\n                                        else {\r\n                                            // moving within same list\r\n                                            var underlyingList = unwrap(sourceParent);\r\n\r\n                                            // notify 'beforeChange' subscribers\r\n                                            if (sourceParent.valueWillMutate) {\r\n                                                sourceParent.valueWillMutate();\r\n                                            }\r\n\r\n                                            // move from source index ...\r\n                                            underlyingList.splice(sourceIndex, 1);\r\n                                            // ... to target index\r\n                                            underlyingList.splice(targetIndex, 0, item);\r\n\r\n                                            // notify subscribers\r\n                                            if (sourceParent.valueHasMutated) {\r\n                                                sourceParent.valueHasMutated();\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        // drop new element from outside\r\n                                        targetParent.splice(targetIndex, 0, item);\r\n\r\n                                        //rendering is handled by manipulating the observableArray; ignore dropped element\r\n                                        dataSet(el, ITEMKEY, null);\r\n                                        ui.item.remove();\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n                            //if using deferred updates plugin, force updates\r\n                            if (ko.processAllDeferredBindingUpdates) {\r\n                                ko.processAllDeferredBindingUpdates();\r\n                            }\r\n\r\n                            //allow binding to accept a function to execute after moving the item\r\n                            if (sortable.afterMove) {\r\n                                sortable.afterMove.call(this, arg, event, ui);\r\n                            }\r\n                        }\r\n\r\n                        if (updateActual) {\r\n                            updateActual.apply(this, arguments);\r\n                        }\r\n                    },\r\n                    connectWith: sortable.connectClass ? \".\" + sortable.connectClass : false\r\n                }));\r\n\r\n                //handle enabling/disabling sorting\r\n                if (sortable.isEnabled !== undefined) {\r\n                    ko.computed({\r\n                        read: function () {\r\n                            $element.sortable(unwrap(sortable.isEnabled) ? \"enable\" : \"disable\");\r\n                        },\r\n                        disposeWhenNodeIsRemoved: element\r\n                    });\r\n                }\r\n            }, 0);\r\n\r\n            //handle disposal\r\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                //only call destroy if sortable has been created\r\n                if ($element.data(\"ui-sortable\") || $element.data(\"sortable\")) {\r\n                    $element.sortable(\"destroy\");\r\n                }\r\n\r\n                ko.utils.toggleDomNodeCssClass(element, sortable.connectClass, false);\r\n\r\n                //do not create the sortable if the element has been removed from DOM\r\n                clearTimeout(createTimeout);\r\n            });\r\n\r\n            return { 'controlsDescendantBindings': true };\r\n        },\r\n        update: function (element, valueAccessor, allBindingsAccessor, data, context) {\r\n            var templateOptions = prepareTemplateOptions(valueAccessor, \"foreach\");\r\n\r\n            //attach meta-data\r\n            dataSet(element, LISTKEY, templateOptions.foreach);\r\n\r\n            //call template binding's update with correct options\r\n            ko.bindingHandlers.template.update(element, function () { return templateOptions; }, allBindingsAccessor, data, context);\r\n        },\r\n        connectClass: 'ko_container',\r\n        allowDrop: true,\r\n        afterMove: null,\r\n        beforeMove: null,\r\n        options: {}\r\n    };\r\n\r\n    //create a draggable that is appropriate for dropping into a sortable\r\n    ko.bindingHandlers.draggable = {\r\n        init: function (element, valueAccessor, allBindingsAccessor, data, context) {\r\n            var value = unwrap(valueAccessor()) || {},\r\n                options = value.options || {},\r\n                draggableOptions = ko.utils.extend({}, ko.bindingHandlers.draggable.options),\r\n                templateOptions = prepareTemplateOptions(valueAccessor, \"data\"),\r\n                connectClass = value.connectClass || ko.bindingHandlers.draggable.connectClass,\r\n                isEnabled = value.isEnabled !== undefined ? value.isEnabled : ko.bindingHandlers.draggable.isEnabled;\r\n\r\n            value = \"data\" in value ? value.data : value;\r\n\r\n            //set meta-data\r\n            dataSet(element, DRAGKEY, value);\r\n\r\n            //override global options with override options passed in\r\n            ko.utils.extend(draggableOptions, options);\r\n\r\n            //setup connection to a sortable\r\n            draggableOptions.connectToSortable = connectClass ? \".\" + connectClass : false;\r\n\r\n            //initialize draggable\r\n            $(element).draggable(draggableOptions);\r\n\r\n            //handle enabling/disabling sorting\r\n            if (isEnabled !== undefined) {\r\n                ko.computed({\r\n                    read: function () {\r\n                        $(element).draggable(unwrap(isEnabled) ? \"enable\" : \"disable\");\r\n                    },\r\n                    disposeWhenNodeIsRemoved: element\r\n                });\r\n            }\r\n\r\n            //handle disposal\r\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                $(element).draggable(\"destroy\");\r\n            });\r\n\r\n            return ko.bindingHandlers.template.init(element, function () { return templateOptions; }, allBindingsAccessor, data, context);\r\n        },\r\n        update: function (element, valueAccessor, allBindingsAccessor, data, context) {\r\n            var templateOptions = prepareTemplateOptions(valueAccessor, \"data\");\r\n\r\n            return ko.bindingHandlers.template.update(element, function () { return templateOptions; }, allBindingsAccessor, data, context);\r\n        },\r\n        connectClass: ko.bindingHandlers.sortable.connectClass,\r\n        options: {\r\n            helper: \"clone\"\r\n        }\r\n    };\r\n\r\n    // Simple Droppable Implementation\r\n    // binding that updates (function or observable)\r\n    ko.bindingHandlers.droppable = {\r\n        init: function (element, valueAccessor, allBindingsAccessor, data, context) {\r\n            var value = unwrap(valueAccessor()) || {},\r\n                options = value.options || {},\r\n                droppableOptions = ko.utils.extend({}, ko.bindingHandlers.droppable.options),\r\n                isEnabled = value.isEnabled !== undefined ? value.isEnabled : ko.bindingHandlers.droppable.isEnabled;\r\n\r\n            //override global options with override options passed in\r\n            ko.utils.extend(droppableOptions, options);\r\n\r\n            //get reference to drop method\r\n            value = \"data\" in value ? value.data : valueAccessor();\r\n\r\n            //set drop method\r\n            droppableOptions.drop = function (event, ui) {\r\n                var droppedItem = dataGet(ui.draggable[0], DRAGKEY) || dataGet(ui.draggable[0], ITEMKEY);\r\n                value(droppedItem);\r\n            };\r\n\r\n            //initialize droppable\r\n            $(element).droppable(droppableOptions);\r\n\r\n            //handle enabling/disabling droppable\r\n            if (isEnabled !== undefined) {\r\n                ko.computed({\r\n                    read: function () {\r\n                        $(element).droppable(unwrap(isEnabled) ? \"enable\" : \"disable\");\r\n                    },\r\n                    disposeWhenNodeIsRemoved: element\r\n                });\r\n            }\r\n\r\n            //handle disposal\r\n            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                $(element).droppable(\"destroy\");\r\n            });\r\n        },\r\n        options: {\r\n            accept: \"*\"\r\n        }\r\n    };\r\n});\n",
    "/* global ePresetsOrder */\r\nvar QuotesViewModel = function (ko, ViewModelBase, general, debounce, Dictionary,\r\n    QuotesManager, FavoriteInstrumentsManager,\r\n    InstrumentTranslationsManager, PermissionsModule, delegate,\r\n    AlertsManager, portfolioManager) {\r\n    var self,\r\n        presetViewModel,\r\n        subscriptions = [],\r\n        computedObservables = [],\r\n        viewProperties = {},\r\n        openInDialogDelegate = new delegate(),\r\n        inheritedInstance = general.clone(ViewModelBase);\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var init = function (customSettings) {\r\n        self = this;\r\n        presetViewModel = $viewModelsManager.VmQuotesPreset;\r\n\r\n        inheritedInstance.setSettings(self, customSettings);\r\n\r\n        registerObservableStartUpEvent();\r\n        setDefaultObservables();\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var setDefaultObservables = function () {\r\n        viewProperties.selectedPresetId = ko.observable();\r\n        viewProperties.isCashBackIconVisible = ko.observable(general.toNumeric(portfolioManager.Portfolio.pendingBonus) > 0 && portfolioManager.Portfolio.pendingBonusType === ePendingBonusType.cashBack);\r\n        viewProperties.isMarketClosed = $statesManager.States.IsMarketClosed;\r\n        viewProperties.isAmlRestricted = $statesManager.States.IsAmlRestricted;\r\n        viewProperties.alertOfInactiveInstrument = alertOfInactiveInstrument;\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var onPresetChanged = function (preset) {\r\n        var uiOrder;\r\n\r\n        if (!preset) {\r\n            return;\r\n        }\r\n\r\n        viewProperties.selectedPresetId(preset.Id);\r\n\r\n        if (preset.Id === ePresetType.PresetCustomized) {\r\n            uiOrder = $instrumentsManager.GetCustomizedUiOrder();\r\n        }\r\n        else {\r\n            uiOrder = $instrumentsManager.GetPresetInstruments(preset.Id);\r\n        }\r\n\r\n        if (preset.Order !== ePresetsOrder.None) {\r\n            preset.Clear();\r\n        }\r\n\r\n        if (preset.QuotesCollection.Keys.count() < 1) {\r\n            buildQuotesCollection(uiOrder || [], preset).then(function (collection) {\r\n                preset.AddRange(collection);\r\n                preset.TemporaryQuotesCollection.length = 0;\r\n            }).done();\r\n        }\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var setSubscribers = function () {\r\n        subscriptions.push(presetViewModel.Data.SelectedPreset.subscribe(onPresetChanged));\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var unsetSubscribers = function () {\r\n        if (subscriptions.length > 0) {\r\n            for (var i = 0; i < subscriptions.length; i++) {\r\n                subscriptions[i].dispose();\r\n            }\r\n        }\r\n\r\n        subscriptions.length = 0;\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var unsetComputedObservables = function () {\r\n        if (computedObservables.length > 0) {\r\n            for (var i = 0; i < computedObservables.length; i++) {\r\n                computedObservables[i].dispose();\r\n            }\r\n        }\r\n\r\n        computedObservables.length = 0;\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var alertOfInactiveInstrument = function (ccyPair) {\r\n        var body = String.format(Dictionary.GetItem(\"InstrumentInactiveOnLoad\"), ccyPair);\r\n        AlertsManager.UpdateAlert(AlertTypes.ServerResponseAlert, null, body, '');\r\n        AlertsManager.PopAlert(AlertTypes.ServerResponseAlert);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var openNewDealOrNewLimit = function (quoteRow, orderDir, tab) {\r\n        if (window.componentsLoaded()) {\r\n            ko.postbox.publish('instrument-trade', { instrumentName: InstrumentTranslationsManager.Long(quoteRow.id) });\r\n\r\n            if ($customer.prop.brokerAllowLimitsOnNoRates && (quoteRow.state() === eQuoteStates.Disabled || viewProperties.isMarketClosed())) {\r\n                openNewLimit(quoteRow.id, orderDir, tab);\r\n            }\r\n            else {\r\n                openNewDeal(quoteRow.id, orderDir, tab);\r\n            }\r\n        }\r\n        else {\r\n            alertOfInactiveInstrument(quoteRow.ccyPair);\r\n        }\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var openTransactionSwitcherDialog = function (transactionParameters) {\r\n        openInDialogDelegate.Invoke(eDialog.TransactionSwitcher, {\r\n            title: '',\r\n            customTitle: 'TransactionDropDown',\r\n            width: 700,\r\n            dragStart: function () { ko.postbox.publish('new-deal-dragged', {}); },\r\n            persistent: false,\r\n            dialogClass: 'deal-slip revised-slip'\r\n        }, eViewTypes.vTransactionSwitcher, transactionParameters);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var openNewDeal = function (instrumentId, orderDir, tab) {\r\n        var newDealParameters = {\r\n            'instrumentId': instrumentId,\r\n            'orderDir': orderDir,\r\n            'tab': tab,\r\n            'transactionType': eTransactionSwitcher.NewDeal\r\n        };\r\n\r\n        openTransactionSwitcherDialog(newDealParameters);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var openNewLimit = function (instrumentId, orderDir, tab) {\r\n        var newLimitParameters = {\r\n            'instrumentId': instrumentId,\r\n            'orderDir': orderDir,\r\n            'tab': tab,\r\n            'transactionType': eTransactionSwitcher.NewLimit\r\n        };\r\n\r\n        openTransactionSwitcherDialog(newLimitParameters);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var openNewPriceAlert = function (instrumentId, orderDir, tab) {\r\n        var newPriceAlertParameters = {\r\n                'instrumentId': instrumentId,\r\n                'orderDir': orderDir,\r\n                'tab': tab,\r\n                'transactionType': eTransactionSwitcher.NewPriceAlert\r\n            };\r\n\r\n        openInDialogDelegate.Invoke(eDialog.NewPriceAlert, {\r\n            title: '',\r\n            customTitle: 'TransactionDropDown',\r\n            width: 700,\r\n            dragStart: function () { ko.postbox.publish('new-deal-dragged', {}); },\r\n            persistent: false,\r\n            dialogClass: 'deal-slip revised-slip'\r\n        }, eViewTypes.vNewPriceAlert, newPriceAlertParameters);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var rateDetails = function (quote, orderDir) {\r\n        var args = {\r\n            'instrumentId': !general.isNullOrUndefined(quote) && quote.id,\r\n            'isActiveQuote': !general.isNullOrUndefined(quote) && quote.isActiveQuote(),\r\n            'quoteState': !general.isNullOrUndefined(quote) && quote.state(),\r\n            'orderDir': orderDir === null ? eOrderDir.None : orderDir\r\n        };\r\n\r\n        $viewModelsManager.VManager.SwitchViewVisible(eForms.Transaction, args);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var registerObservableStartUpEvent = function () {\r\n        $viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vQuotes).state.subscribe(function (state) {\r\n            switch (state) {\r\n                case eViewState.Start:\r\n                    if ($viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vQuotes).previousState() !== eViewState.Update) {\r\n                        start(); // we want the state to be always start but we dont want the start metod to run if we came from update\r\n                    }\r\n                    break;\r\n\r\n                case eViewState.Update:\r\n                    update();\r\n                    $viewModelsManager.VManager.ChangeViewState(eViewTypes.vQuotes, eViewState.Start);\r\n                    break;\r\n\r\n                case eViewState.Stop:\r\n                    stop();\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var start = function () {\r\n        setSubscribers();\r\n\r\n        var defaultPresetId = viewProperties.selectedPresetId() || $initialDataManager.prop.initialScreen.screenId || ePresetType.PresetCustomized;\r\n        var presetId = $viewModelsManager.VManager.GetViewArgsByKeyName(eViewTypes.vQuotes, \"presetToSelect\");\r\n\r\n        var presetIdToSelect = presetId || defaultPresetId;\r\n        var selectedPreset = presetViewModel.Data.SelectedPreset();\r\n\r\n        if (selectedPreset && selectedPreset.Id === presetIdToSelect) {\r\n            onPresetChanged(selectedPreset);\r\n        }\r\n        else {\r\n            presetViewModel.SelectPreset(presetIdToSelect);\r\n        }\r\n\r\n        registerToDispatcher();\r\n        onPortofolioChanged();\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var stop = function () {\r\n        unRegisterFromDispatcher();\r\n\r\n        unsetSubscribers();\r\n        unsetComputedObservables();\r\n\r\n        presetViewModel.Reset();\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var registerToDispatcher = function () {\r\n        QuotesManager.OnChange.Add(onQuotesChanged);\r\n        $instrumentsManager.OnEnhancedInstrumentsChange.Add(onInstrumentsChanged);\r\n        portfolioManager.OnChange.Add(onPortofolioChanged);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var unRegisterFromDispatcher = function () {\r\n        QuotesManager.OnChange.Remove(onQuotesChanged);\r\n        $instrumentsManager.OnEnhancedInstrumentsChange.Remove(onInstrumentsChanged);\r\n        portfolioManager.OnChange.Remove(onPortofolioChanged);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var update = function () {\r\n        var presetId = $viewModelsManager.VManager.GetViewArgsByKeyName(eViewTypes.vQuotes, \"presetToSelect\");\r\n\r\n        if (typeof presetId === \"undefined\") {\r\n            return;\r\n        }\r\n\r\n        presetViewModel.SelectPreset(presetId);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var addFakeRows = function (collection) {\r\n        var seed = (new Date()).getTime(),\r\n            minRowsToDisplay = inheritedInstance.getSettings(self).minRowsToDisplay,\r\n            fakeRecordsToAdd = Math.max(collection.length, minRowsToDisplay) - collection.length,\r\n            rowCounter = collection.length - 1;\r\n\r\n        for (var i = 0; i < fakeRecordsToAdd; i++) {\r\n            var fakeObj = {\r\n                id: String.format(\"empty{0}\", seed++),\r\n                rowId: ++rowCounter,\r\n                isFake: true\r\n            };\r\n\r\n            collection.push(fakeObj);\r\n        }\r\n\r\n        return collection;\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var buildQuotesCollection = function (uiOrderLocal, preset) {\r\n        var i,\r\n            rowCounter = 0,\r\n            maxLength = uiOrderLocal.length,\r\n            collectionToAdd = [],\r\n            instrument,\r\n            quoteRow;\r\n\r\n        for (i = 0; i < maxLength; i++) {\r\n            instrument = $instrumentsManager.GetInstrument(uiOrderLocal[i][eQuotesUIOrder.InstrumentID]);\r\n\r\n            if (instrument) {\r\n                quoteRow = {\r\n                    isFake: false\r\n                };\r\n\r\n                setStaticInfo(++rowCounter, quoteRow, instrument, preset);\r\n\r\n                updateQuoteValues(quoteRow);\r\n\r\n                collectionToAdd.push(quoteRow);\r\n            }\r\n        }\r\n\r\n        // needed to get quotes updates\r\n        preset.TemporaryQuotesCollection = collectionToAdd;\r\n\r\n        if (preset.Order !== ePresetsOrder.None) {\r\n            var quotesHasDataPromises = collectionToAdd.map(function (item) {\r\n                if (!item.isFake) {\r\n                    return item.hasData.promise;\r\n                }\r\n                return true;\r\n            });\r\n\r\n            return Q.all(quotesHasDataPromises).then(function () {\r\n                return orderByChangeColumn(collectionToAdd, preset.Order);\r\n            }).then(addFakeRows);\r\n        } else {\r\n            return Q(collectionToAdd).then(addFakeRows);\r\n        }\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var setStaticInfo = function (rowId, quoteRow, instrument, preset) {\r\n        quoteRow.hasData = Q.defer();\r\n        quoteRow.rowId = rowId;\r\n        quoteRow.instrumentId = instrument.id;\r\n\r\n        quoteRow.DecimalDigit = instrument.DecimalDigit;\r\n        quoteRow.PipDigit = instrument.PipDigit;\r\n\r\n        quoteRow.id = instrument.id;\r\n        quoteRow.amountGroupId = instrument.amountGroupId;\r\n        quoteRow.factor = instrument.factor;\r\n        quoteRow.isTradable = instrument.isTradable;\r\n\r\n        quoteRow.baseSymbolName = instrument.baseSymbolName;\r\n        quoteRow.otherSymbolName = instrument.otherSymbolName;\r\n\r\n        quoteRow.baseSymbolId = instrument.baseSymbol;\r\n        quoteRow.otherSymbolId = instrument.otherSymbol;\r\n\r\n        quoteRow.signal = instrument.hasSignal;\r\n        quoteRow.alertInactiveQuote = alertInactiveQuote;\r\n\r\n        quoteRow.bidPips = ko.observable();\r\n        quoteRow.bid10K = ko.observable();\r\n        quoteRow.bid100K = ko.observable();\r\n        quoteRow.askPips = ko.observable();\r\n        quoteRow.ask10K = ko.observable();\r\n        quoteRow.ask100K = ko.observable();\r\n\r\n        quoteRow.state = ko.observable(\"\");\r\n        quoteRow.isActiveQuote = ko.observable(\"\");\r\n\r\n        quoteRow.bid = ko.observable(\"\");\r\n        quoteRow.ask = ko.observable(\"\");\r\n\r\n        quoteRow.prevBid = ko.observable(\"\");\r\n        quoteRow.prevAsk = ko.observable(\"\");\r\n\r\n        quoteRow.open = ko.observable(\"\");\r\n        quoteRow.close = ko.observable(\"\");\r\n        quoteRow.high = ko.observable(\"\");\r\n        quoteRow.low = ko.observable(\"\");\r\n        quoteRow.highLowState = ko.observable(\"\");\r\n        quoteRow.change = ko.observable(\"\");\r\n        quoteRow.changePips = ko.observable(\"\");\r\n        quoteRow.time = ko.observable(\"\");\r\n        quoteRow.orderDir = ko.observable(\"\");\r\n        quoteRow.isSingleInstrument = instrument.isFuture || instrument.isShare || (instrument.instrumentTypeId == eInstrumentType.Commodities && instrument.assetTypeId == eAssetType.Forex);\r\n\r\n        quoteRow.isIndiceInstrument = instrument.instrumentTypeId == eInstrumentType.Indices;\r\n\r\n        quoteRow.isFavoriteHelper = ko.observable(0).extend({ notify: 'always' });\r\n        quoteRow.isFavorite = ko.pureComputed(function () {\r\n            return this.isFavoriteHelper() > -1 && preset.isSelected() && FavoriteInstrumentsManager.IsFavoriteInstrument(this.id);\r\n        }, quoteRow);\r\n\r\n        quoteRow.weightedVolumeFactor = ko.observable(instrument.weightedVolumeFactor);\r\n\r\n        quoteRow.onToggleFavoriteClick = debounce(function () {\r\n            if (PermissionsModule.CheckActionAllowed(\"addFavorite\", true)) {\r\n                if (quoteRow.isFavorite()) {\r\n                    FavoriteInstrumentsManager.RemoveFavoriteInstrument(quoteRow.id, notifyQuoteRowIsFavorite);\r\n                    ko.postbox.publish(\"favorite-instrument-update\", { instrumentId: quoteRow.id, isRemoveInstrument: true });\r\n                } else {\r\n                    FavoriteInstrumentsManager.AddFavoriteInstrument(quoteRow.id, notifyQuoteRowIsFavorite);\r\n                    ko.postbox.publish(\"favorite-instrument-update\", { instrumentId: quoteRow.id, isAddInstrument: true });\r\n                }\r\n            }\r\n        });\r\n\r\n        var notifyQuoteRowIsFavorite = function (result) {\r\n            var jsonResult = JSON.parse(result);\r\n            if (jsonResult && jsonResult.status === eOperationStatus.Success) {\r\n                quoteRow.isFavoriteHelper(1);\r\n            }\r\n        }\r\n\r\n        quoteRow.isCashBackIconVisible = ko.pureComputed(function () {\r\n            return this.weightedVolumeFactor() > 1 && viewProperties.isCashBackIconVisible();\r\n        }, quoteRow);\r\n\r\n        quoteRow.isAvailable = ko.pureComputed(function () {\r\n            return (!viewProperties.isMarketClosed() && this.isActiveQuote());\r\n        }, quoteRow);\r\n\r\n        quoteRow.isStock = ko.observable(instrument.isStock);\r\n\r\n        quoteRow.isUp = ko.pureComputed(function () {\r\n            return this.state() === eQuoteStates.Up;\r\n        }, quoteRow).extend({ notify: \"always\" });\r\n\r\n        quoteRow.isDown = ko.pureComputed(function () {\r\n            return this.state() === eQuoteStates.Down;\r\n        }, quoteRow).extend({ notify: \"always\" });\r\n\r\n        quoteRow.notChanged = ko.pureComputed(function () {\r\n            return this.state() === eQuoteStates.NotChanged;\r\n        }, quoteRow).extend({ notify: \"always\" });\r\n\r\n        quoteRow.formattedChange = ko.pureComputed(function () {\r\n            return Format.toSignedPercent(this.change(), '');\r\n        }, quoteRow);\r\n\r\n        quoteRow.onClick = function () {\r\n            rateDetails(quoteRow, eOrderDir.None);\r\n        };\r\n\r\n        quoteRow.onBuyClick = function () {\r\n            rateDetails(quoteRow, eOrderDir.Buy);\r\n        };\r\n\r\n        quoteRow.onSellClick = function () {\r\n            rateDetails(quoteRow, quoteRow.isStock() ? eOrderDir.None : eOrderDir.Sell);\r\n        };\r\n\r\n        quoteRow.choose = function () {\r\n            quoteRow.onChoiceClick();\r\n        };\r\n\r\n        // Web\r\n        quoteRow.onChoiceClick = function () {\r\n            openNewDealOrNewLimit(quoteRow, eOrderDir.None);\r\n        };\r\n\r\n        // Web\r\n        quoteRow.onAskClick = function () {\r\n            openNewDealOrNewLimit(quoteRow, eOrderDir.Buy);\r\n        };\r\n\r\n        // Web\r\n        quoteRow.onBidClick = function () {\r\n            openNewDealOrNewLimit(quoteRow, quoteRow.isStock() ? eOrderDir.None : eOrderDir.Sell);\r\n        };\r\n\r\n        quoteRow.onSignalClick = function (quoteRowData) {\r\n            openNewDealOrNewLimit(quoteRowData, eOrderDir.None, quoteRowData.signal ? eNewDealTool.Signals : null);\r\n        };\r\n\r\n        quoteRow.hasPriceAlerts = ko.observable(false);\r\n\r\n        quoteRow.onPriceAlertClick = function (quoteRowData) {\r\n            openNewPriceAlert(quoteRowData.instrumentId, eOrderDir.None);\r\n        };\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var alertInactiveQuote = function (val) {\r\n        var body = String.format(\"Instrument {0} is currently inactive\", val);\r\n        AlertsManager.UpdateAlert(AlertTypes.ServerResponseAlert, null, body, '');\r\n        AlertsManager.PopAlert(AlertTypes.ServerResponseAlert);\r\n\r\n        return false;\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var onQuotesChanged = function (changedQuotesIds) {\r\n        var preset = presetViewModel.Data.SelectedPreset(),\r\n            quoteId,\r\n            quoteRow;\r\n\r\n        if (!preset) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0, ii = changedQuotesIds.length; i < ii; i++) {\r\n            quoteId = changedQuotesIds[i];\r\n            quoteRow = preset.QuotesCollection.Get(quoteId) ||\r\n                preset.TemporaryQuotesCollection.find(function (id, item) { return item.id === id; }.bind(null, quoteId));\r\n\r\n            if (quoteRow && !quoteRow.isFake) {\r\n                updateQuoteValues(quoteRow);\r\n            }\r\n        }\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var isTopFaller = function (order, change) {\r\n        return order === ePresetsOrder.Ascending && change < 0;\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var isTopRiser = function (order, change) {\r\n        return order === ePresetsOrder.Descending && change >= 0;\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var sortTopFallers = function (a, b) { return a.change() - b.change(); }\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var sortTopRisers = function (a, b) { return b.change() - a.change(); }\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var orderByChangeColumn = function (collection, order) {\r\n        collection = collection || [];\r\n\r\n        if (!order) {\r\n            return;\r\n        }\r\n\r\n        collection = collection.filter(function (quote) {\r\n            return !quote.isFake && (isTopRiser(order, quote.change()) || isTopFaller(order, quote.change()));\r\n        });\r\n\r\n        return collection.sort(order === ePresetsOrder.Ascending ? sortTopFallers : sortTopRisers);\r\n    };\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var onInstrumentsChanged = debounce(function onInstrumentsChangedHandler() {\r\n        for (var i = 0, length = presetViewModel.Data.Presets().length; i < length; i++) {\r\n            var preset = presetViewModel.Data.Presets()[i];\r\n\r\n            if (!preset ||\r\n                preset.QuotesCollection.Keys.count() < 1) {\r\n                continue;\r\n            }\r\n\r\n            preset.QuotesCollection.Keys.ForEach(function (key, quoteRow) {\r\n                if (quoteRow.isFake) {\r\n                    return;\r\n                }\r\n\r\n                var instrument = $instrumentsManager.GetInstrument(quoteRow.instrumentId);\r\n                quoteRow.weightedVolumeFactor(instrument.weightedVolumeFactor);\r\n            });\r\n        }\r\n    });\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var onPortofolioChanged = debounce(function onPortofolioChangedHandler() {\r\n        viewProperties.isCashBackIconVisible(general.toNumeric(portfolioManager.Portfolio.pendingBonus) > 0 && portfolioManager.Portfolio.pendingBonusType === ePendingBonusType.cashBack);\r\n    });\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    var updateQuoteValues = function (quoteToUpdate) {\r\n        if (!quoteToUpdate) {\r\n            return;\r\n        }\r\n\r\n        if (!quoteToUpdate.id || quoteToUpdate.isFake) {\r\n            return;\r\n        }\r\n\r\n        var instrumentId = quoteToUpdate.id,\r\n            currentQuote = QuotesManager.Quotes.GetItem(instrumentId);\r\n\r\n        if (currentQuote) {\r\n            quoteToUpdate.highLowState(getHighLowState(quoteToUpdate, currentQuote));\r\n            quoteToUpdate.state(currentQuote.state);\r\n            quoteToUpdate.isActiveQuote(currentQuote.isActive());\r\n            quoteToUpdate.prevAsk(quoteToUpdate.ask());\r\n            quoteToUpdate.prevBid(quoteToUpdate.bid());\r\n            quoteToUpdate.bid(currentQuote.bid);\r\n            quoteToUpdate.ask(currentQuote.ask);\r\n            quoteToUpdate.open(currentQuote.open);\r\n            quoteToUpdate.close(currentQuote.close);\r\n            quoteToUpdate.high(currentQuote.highBid);\r\n            quoteToUpdate.low(currentQuote.lowAsk);\r\n            quoteToUpdate.change(currentQuote.change);\r\n            quoteToUpdate.changePips(Format.toRate(currentQuote.changePips, true, instrumentId));\r\n            quoteToUpdate.time(currentQuote.tradeTime);\r\n\r\n            quoteToUpdate.hasData.resolve(true);\r\n        }\r\n    };\r\n\r\n    function getHighLowState(previousQuote, currentQuote) {\r\n        var state = eHighLowStates.Active;\r\n        var previousState = previousQuote.state();\r\n        var currentState = currentQuote.state;\r\n\r\n        if (currentState === eQuoteStates.Disabled && general.objectContainsValue(eQuoteStates, previousState)) {\r\n            state = eHighLowStates.MarketClosed;\r\n        } else if (currentQuote.isActive() && general.objectContainsValue(eQuoteStates, previousState)) {\r\n            state = eHighLowStates.Active;\r\n        } else if ((currentState === eQuoteStates.TimedOut || currentState === eQuoteStates.Locked) && previousState === eQuoteStates.Disabled) {\r\n            state = eHighLowStates.NA;\r\n        }\r\n\r\n        return state;\r\n    }\r\n\r\n    //----------------------------------------------------------------\r\n\r\n    return {\r\n        Init: init,\r\n        Start: start,\r\n        Stop: stop,\r\n        Presets: presetViewModel,\r\n        ViewProperties: viewProperties,\r\n        OpenInDialog: openInDialogDelegate,\r\n        UpdateQuoteValues: updateQuoteValues,\r\n        GetDialogPos: function () {\r\n            return {\r\n\r\n                dialogPosition: $viewModelsManager.VmDialog.dialogPosition,\r\n                parentIsCollapsed: $viewModelsManager.VmAccountMarket.IsCollapsed,\r\n                parentTopElement: eRefDomElementsIds.newDealRefParentTopElement,\r\n                topOffset: -3,\r\n                parentLeftElement: '#QuotesTable .ask-column',\r\n                leftOffset: -70,\r\n                RTLoffset: 10\r\n            }\r\n        }\r\n    }\r\n};\r\n\ndefine(\"viewmodels/QuotesViewModel\", [\"knockout\",\"viewmodels/ViewModelBase\",\"handlers/general\",\"global/debounce\",\"Dictionary\",\"cachemanagers/QuotesManager\",\"modules/FavoriteInstrumentsManager\",\"managers/instrumentTranslationsManager\",\"modules/permissionsmodule\",\"handlers/Delegate\",\"devicemanagers/AlertsManager\",\"cachemanagers/PortfolioStaticManager\",\"vendor/knockout-sortable\",\"enums/enums\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (ko, vmb, gen, deb, dct, qtm, fim, itm, pm, deg, am, pfm) {\r\n\t\t\t\treturn this.QuotesViewModel(ko, vmb, gen, deb, dct, qtm, fim, itm, pm, deg, am, pfm);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.QuotesViewModel;\n    };\n}(this)));\n\n",
    "var TDALInitialData = function (errorManager) {\r\n    var getData = function(onSuccess) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        return ajaxer.promises.get(\r\n            \"TDALInitialData/getData\",\r\n            \"InitialData/GetData\",\r\n            \"\",\r\n            onSuccess,\r\n            function(error) {\r\n                errorManager.onError(\"TDALInitialData/getData\", errorManager.getFullExceptionMessage(error), eErrorSeverity.high);\r\n            },\r\n            null, null, null, false\r\n        );\r\n    };\r\n\r\n    return {\r\n        GetData: getData\r\n    };\r\n};\ndefine(\"dataaccess/dalInitialData\", [\"generalmanagers/ErrorManager\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (em) {\r\n\t\t\t\treturn this.TDALInitialData(em);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TDALInitialData;\n    };\n}(this)));\n\n",
    "var eLoginLogoutReason = {\r\n\tuserDemand: 7770000,\r\n\tdoubleLogin: 7770001,\r\n\tFxDenied: 7770002,\r\n\tappClose: 7770003,\r\n\tidleTime: 7770004,\r\n\tclientStateError: 7770005,\r\n\tserverError: 7770006,\r\n\twebTrader_filepathNotAccessible: 7770007,\r\n\twebTrader_noViewModeCookie: 7770008,\r\n\twebTrader_noVersionCookie: 7770009,\r\n\twebTrader_noBrokerCookie: 7770010,\r\n\twebTrader_unsupportedError: 7770011,\r\n\tmobileTrader_filepathNotAccessible: 7770012,\r\n\tmobileTrader_noViewModeCookie: 7770013,\r\n\tmobileTrader_noVersionCookie: 7770014,\r\n\tmobileTrader_noBrokerCookie: 7770015,\r\n\tmobileTrader_unsupportedError: 7770016,\r\n\tpreloaderError_noVersion: 7770017,\r\n\tpreloaderError_noBroker: 7770018,\r\n\tpreloaderError_noLanguage: 7770019,\r\n\tpreloaderError_noStaticParams: 7770020,\r\n\tpreloaderError_ajaxHttp: 7770021,\r\n\tpreloaderError_other: 7770022,\r\n\tpreloaderError_jsonParse: 7770051,\r\n\terrorManager_httpError: 7770023,\r\n\talert_exitApp: 7770024,\r\n\tweb_exitAlert: 7770025,\r\n\tmobile_exitAlert: 7770026,\r\n\tweb_postLoginAlertController_serverError: 7770027,\r\n\tmobile_postLoginAlertController_serverError: 7770028,\r\n\tserverResponseAlert_exit: 7770029,\r\n\tinitialDataManager_dataError: 7770030,\r\n\tinitialDataManager_symbolsDataError: 7770031,\r\n\tdealAddServerResponseAlert_exit: 7770032,\r\n\tdealsClosed_serverResponseAlert_exit: 7770033,\r\n\tlimitsServerResponseAlert_exit: 7770034,\r\n\tactivitySupervisor_updateAsStay: 7770035,\r\n\tactivitySupervisor_exit: 7770036,\r\n\tactivitySupervisor_logout: 7770037,\r\n\tsessionSupervisor_keepAliveHttpContextRequired: 7770038,\r\n\tsessionSupervisor_keepAliveCompleteError: 7770039,\r\n\tweb_doubleLogin1: 7770040,\r\n\tweb_doubleLogin2: 7770041,\r\n\tweb_doubleLogin3: 7770042,\r\n\tmobile_doubleLogin1: 7770043,\r\n\tmobile_doubleLogin2: 7770044,\r\n\tmobile_doubleLogin3: 7770045,\r\n\tweb_registrationFailed: 7770046,\r\n\tmobile_registrationFailed: 7770047,\r\n\tforgotPasswordLogin: 7770048,\r\n\tconfirmLogin: 7770049,\r\n\tmobileTrader_nocontentStyleBrokerCookie: 7770050,\r\n\tchangePassword_NoToken: 7770108,\r\n};\r\n\r\ndefine('enums/LoginLogoutReasonEnum',[], function () {\r\n\treturn eLoginLogoutReason;\r\n});\r\n\n",
    "define(\r\n    'generalmanagers/LocalStoreDoubleTabsListener',\r\n    [\r\n        'require',\r\n        'enums/LoginLogoutReasonEnum',\r\n        'handlers/Cookie',\r\n        'dataaccess/dalCommon'\r\n    ],\r\n    function LocalStoreDoubleTabsListenerDef() {\r\n        var cookieHandler = require('handlers/Cookie'),\r\n            dalCommon = require('dataaccess/dalCommon');\r\n\r\n        function localStoreDoubleTabsListener(csmg, checkInterval) {\r\n            function doubleTabsFlow(guid) {\r\n                if (guid && guid !== cookieHandler.ReadCookie('csmg')) {\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n\r\n            function iedoubleTabsFlow(guid, delay) {\r\n                var isDt = doubleTabsFlow(guid);\r\n\r\n                if (isDt) {\r\n                    dalCommon.Exit(eLoginLogoutReason.initialDataManager_dataError);\r\n                } else {\r\n                    setTimeout(iedoubleTabsFlow, (delay * 2), guid, delay);\r\n                }\r\n            }\r\n\r\n            if (checkInterval > 0) {\r\n                setTimeout(iedoubleTabsFlow, checkInterval, csmg, checkInterval);\r\n            }\r\n\r\n            cookieHandler.CreateCookie('csmg', csmg);\r\n        }\r\n\r\n        return localStoreDoubleTabsListener;\r\n    }\r\n);\n",
    "define('devicemanagers/LocalStoreDoubleTabsListener', ['generalmanagers/LocalStoreDoubleTabsListener'], function LocalStoreDoubleTabsListener(localStoreDoubleTabsListener) {\r\n    return localStoreDoubleTabsListener;\r\n});\n",
    "/* global eDealerParams Preloader*/\r\ndefine(\"initdatamanagers/InitialDataManager\", [\r\n\t\"require\",\r\n\t\"Q\",\r\n\t\"enums/enums\",\r\n\t\"handlers/general\",\r\n\t\"generalmanagers/ErrorManager\",\r\n\t\"handlers/Logger\",\r\n\t\"JSONHelper\",\r\n\t\"dataaccess/dalInitialData\",\r\n\t\"dataaccess/dalCommon\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"initdatamanagers/SymbolsManager\",\r\n\t\"managers/CustomerProfileManager\",\r\n\t\"initdatamanagers/InstrumentsManager\",\r\n\t\"configuration/initconfiguration\",\r\n\t\"modules/systeminfo\",\r\n\t\"devicemanagers/LocalStoreDoubleTabsListener\",\r\n\t\"StateObject!PerformaceEvents\",\r\n\t\"StateObject!DealerParams\",\r\n\t\"handlers/Delegate\",\r\n\t\"fxnet/preloader\",\r\n], function (require) {\r\n\tvar Q = require(\"Q\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tErrorManager = require(\"generalmanagers/ErrorManager\"),\r\n\t\tLogger = require(\"handlers/Logger\"),\r\n\t\tdalCommon = require(\"dataaccess/dalCommon\"),\r\n\t\tdalInitialData = require(\"dataaccess/dalInitialData\"),\r\n\t\tJSONHelper = require(\"JSONHelper\"),\r\n\t\tInstrumentsManager = require(\"initdatamanagers/InstrumentsManager\"),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tCustomerProfileManager = require(\"managers/CustomerProfileManager\"),\r\n\t\tSymbolsManager = require(\"initdatamanagers/SymbolsManager\"),\r\n\t\tapplicationConfiguration = require(\"configuration/initconfiguration\").ApplicationConfiguration,\r\n\t\tsystemInfo = require(\"modules/systeminfo\"),\r\n\t\tlocalStoreDoubleTabsListener = require(\"devicemanagers/LocalStoreDoubleTabsListener\"),\r\n\t\tstateObject = require(\"StateObject!PerformaceEvents\"),\r\n\t\tstateObjectDealerParams = require(\"StateObject!DealerParams\"),\r\n\t\tPreloader = require(\"fxnet/preloader\"),\r\n\t\tdelegate = require(\"handlers/Delegate\");\r\n\r\n\tfunction InitialDataManager(timeout) {\r\n\t\tvar prop = {\r\n\t\t\t\tprofileCustomer: null,\r\n\t\t\t\tprofileInstrument: null,\r\n\t\t\t\tdefaultFirstPage: -1,\r\n\t\t\t\tinitialScreen: {\r\n\t\t\t\t\tscreenId: -1,\r\n\t\t\t\t},\r\n\t\t\t\tcsmg: \"\",\r\n\t\t\t\tready: false,\r\n\t\t\t},\r\n\t\t\tonTimestamp = new delegate(),\r\n\t\t\tonInitialScreens = new delegate(),\r\n\t\t\tInitialDataError = ErrorManager.createErrorType(\"InitialDataError\", function errorHandler() {\r\n\t\t\t\t// this keyword refers to the istance of thrown InitialDataError\r\n\t\t\t\tLogger.log(\"TDALClientState\", this.getFullExceptionMessage(), function () {\r\n\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.initialDataManager_dataError);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tfunction checkInitialData() {\r\n\t\t\tvar defer = Q.defer();\r\n\r\n\t\t\tfunction checkPreloader() {\r\n\t\t\t\tif (Preloader.DataObjects.initialDataReady) {\r\n\t\t\t\t\tdefer.resolve(Preloader.DataObjects.initialData);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tPreloader.SetInitialDataLoadEvent(checkPreloader);\r\n\t\t\t}\r\n\r\n\t\t\tcheckPreloader();\r\n\r\n\t\t\treturn defer.promise;\r\n\t\t}\r\n\r\n\t\tfunction loadData() {\r\n\t\t\tonTimestamp.Invoke(eFxNetEvents.InitialDataStart);\r\n\r\n\t\t\treturn checkInitialData().then(setInitialData).then(checkSetInitialDataResult).finally(endInitialData);\r\n\t\t}\r\n\r\n\t\tfunction checkSetInitialDataResult(initialDataSuccess) {\r\n\t\t\tif (!initialDataSuccess) {\r\n\t\t\t\tthrow new InitialDataError(\"ServerError: Initial data could not be loaded\");\r\n\t\t\t}\r\n\r\n\t\t\tprop.ready = true;\r\n\t\t}\r\n\r\n\t\tfunction endInitialData() {\r\n\t\t\tonTimestamp.Invoke(eFxNetEvents.InitialDataEnd);\r\n\t\t}\r\n\r\n\t\tfunction loadOnlySymbols(onSymbolLoadComplete) {\r\n\t\t\tdalInitialData\r\n\t\t\t\t.GetData()\r\n\t\t\t\t.then(parseInitialDataServerResponse)\r\n\t\t\t\t.then(function setSymbolsData(data) {\r\n\t\t\t\t\tif (data.status == \"ServerError\") {\r\n\t\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.initialDataManager_symbolsDataError);\r\n\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar newSystemInfo = data.systemInfo || {};\r\n\t\t\t\t\t\tnewSystemInfo.clientApplicationParams = data.clientParams || {};\r\n\r\n\t\t\t\t\t\tsystemInfo.save(newSystemInfo);\r\n\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(function checkSymbolData(symbolsDataSuccess) {\r\n\t\t\t\t\tif (symbolsDataSuccess && general.isFunctionType(onSymbolLoadComplete)) {\r\n\t\t\t\t\t\tonSymbolLoadComplete();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new InitialDataError(\"ServerError: Initial data could not be loaded\");\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\t\t}\r\n\r\n\t\tfunction parseInitialDataServerResponse(response) {\r\n\t\t\tif (general.isStringType(response)) {\r\n\t\t\t\treturn JSONHelper.STR2JSON(\"InitialDataManager/onLoadComplete\", response, eErrorSeverity.high);\r\n\t\t\t}\r\n\r\n\t\t\treturn response || {};\r\n\t\t}\r\n\r\n\t\tfunction saveSystemInfo(initialData) {\r\n\t\t\tvar systemInfoValue;\r\n\t\t\tvar countryArray = parseInitialDataServerResponse(initialData.Countries);\r\n\r\n\t\t\tsystemInfoValue = initialData.Main.systemInfo || {};\r\n\t\t\tsystemInfoValue.clientApplicationParams = initialData.Main.clientParams || {};\r\n\t\t\tsystemInfoValue.slaTimeout = 1000; // It could be fetched from DB\r\n\t\t\tsystemInfoValue.limitRatePercentage = parseFloat(systemInfoValue.limitRatePercentage || \"0.5\");\r\n\t\t\tsystemInfoValue.instruments = parseInitialDataServerResponse(initialData.Instruments);\r\n\t\t\tsystemInfoValue.countries = getCountriesAsAnObject(countryArray);\r\n\t\t\tsystemInfoValue.uiExclusionCountries = getCountriesAsAnObject(\r\n\t\t\t\tcountryArray.filter(function (country) {\r\n\t\t\t\t\treturn country[eCountryAttributes.IsActive] === 0;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t\tsystemInfoValue.symbols = parseInitialDataServerResponse(initialData.Symbols);\r\n\r\n\t\t\tsystemInfo.save(systemInfoValue);\r\n\t\t}\r\n\r\n\t\tfunction setInitialData(data) {\r\n\t\t\tvar parsedData = parseInitialDataServerResponse(data);\r\n\r\n\t\t\tif (parsedData.Main.status == \"ServerError\") {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tsaveSystemInfo(parsedData);\r\n\r\n\t\t\tstateObjectDealerParams.set(eDealerParams.DealerCurrency, window.environmentData.dealerCurrency);\r\n\t\t\tstateObjectDealerParams.set(\r\n\t\t\t\teDealerParams.DealerAdvancedWalletView,\r\n\t\t\t\twindow.environmentData.dealerAdvancedWalletView\r\n\t\t\t);\r\n\r\n\t\t\tsetPersonalInfo(parsedData.Main.personalInfo, parsedData.Symbols);\r\n\r\n\t\t\tstateObject.update(\"InitialDataLoadCompleted\", parsedData.Main.initialServerTime);\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tfunction getCountriesAsAnObject(countriesArray) {\r\n\t\t\tvar countriesObject = {};\r\n\r\n\t\t\tfor (var i = 0, length = countriesArray.length; i < length; i++) {\r\n\t\t\t\tcountriesObject[countriesArray[i][eCountryAttributes.Id]] = countriesArray[i][eCountryAttributes.Name];\r\n\t\t\t}\r\n\r\n\t\t\treturn countriesObject;\r\n\t\t}\r\n\r\n\t\tfunction setUiVersion(personalInfo) {\r\n\t\t\tif (applicationConfiguration.applicationType === eApplicationTypes.Web) {\r\n\t\t\t\tvar prevMainForm = 1;\r\n\r\n\t\t\t\tpersonalInfo.profileCustomer.dealSlipVersion = eUIVersion.Default;\r\n\r\n\t\t\t\tif (personalInfo.profileCustomer.homePage === prevMainForm) {\r\n\t\t\t\t\tpersonalInfo.profileCustomer.homePage = eForms.Deals;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (personalInfo.defaultFirstPage === prevMainForm) {\r\n\t\t\t\t\tpersonalInfo.defaultFirstPage = eForms.Deals;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tpersonalInfo.profileCustomer.homePage = eForms.Quotes;\r\n\t\t\t}\r\n\r\n\t\t\tpersonalInfo.profileCustomer.isAllowedSwitchView = 0;\r\n\t\t}\r\n\r\n\t\tfunction setPersonalInfo(pInfo, symbols) {\r\n\t\t\tvar personalInfo = {\r\n\t\t\t\tcustomer: {},\r\n\t\t\t\tdefaultFirstPage: 0,\r\n\t\t\t\tprofileCustomer: {},\r\n\t\t\t\tprofileInstrument: {},\r\n\t\t\t\tcustomQuotesUIOrder: [],\r\n\t\t\t\tinitialScreen: [],\r\n\t\t\t\tinitialQuotesUIOrder: [],\r\n\t\t\t\tavailableScreens: [],\r\n\t\t\t};\r\n\r\n\t\t\tObject.assign(personalInfo, pInfo || {});\r\n\r\n\t\t\tsetUiVersion(personalInfo);\r\n\r\n\t\t\tprop.profileCustomer = personalInfo.profileCustomer;\r\n\t\t\tprop.profileInstrument = personalInfo.profileInstrument;\r\n\t\t\tprop.defaultFirstPage = personalInfo.defaultFirstPage;\r\n\t\t\tprop.csmg = personalInfo.csmg;\r\n\t\t\tprop.initialScreen.screenId = personalInfo.initialScreen;\r\n\t\t\tprop.customQuotesUIOrder = personalInfo.customQuotesUIOrder;\r\n\r\n\t\t\tonInitialScreens.Invoke(personalInfo.availableScreens);\r\n\r\n\t\t\tSymbolsManager.Init(symbols || []);\r\n\t\t\tCustomer.Init(personalInfo.customer, prop.defaultFirstPage, prop.profileCustomer.homePage);\r\n\r\n\t\t\tCustomerProfileManager.Init(\r\n\t\t\t\tprop.profileCustomer,\r\n\t\t\t\tCustomer.prop.startUpForm,\r\n\t\t\t\tprop.profileInstrument,\r\n\t\t\t\tprop.initialScreen.screenId\r\n\t\t\t);\r\n\t\t\tCustomerProfileManager.Events.onStartUpFormChanged.Add(function (value) {\r\n\t\t\t\tCustomer.prop.startUpForm = value;\r\n\t\t\t\tprop.defaultFirstPage = value;\r\n\t\t\t});\r\n\t\t\tCustomerProfileManager.Events.onInitialScreenChanged.Add(function (value) {\r\n\t\t\t\tprop.initialScreen.screenId = value;\r\n\t\t\t});\r\n\r\n\t\t\tCustomer.prop.selectedCcyId(\r\n\t\t\t\tstateObjectDealerParams.get(eDealerParams.DealerCurrency) ||\r\n\t\t\t\t\tCustomerProfileManager.ProfileCustomer().displaySymbol ||\r\n\t\t\t\t\tCustomer.prop.selectedCcyId()\r\n\t\t\t);\r\n\r\n\t\t\tInstrumentsManager.Init({\r\n\t\t\t\tcustomerType: Customer.prop.customerType,\r\n\t\t\t\thasWeightedVolumeFactor: Customer.prop.hasWeightedVolumeFactor,\r\n\t\t\t\tisOvernightOnForex: Customer.prop.isOvernightOnForex,\r\n\t\t\t\tcustomUiOrder: personalInfo.customQuotesUIOrder,\r\n\t\t\t\tinitialUiOrder: personalInfo.initialQuotesUIOrder,\r\n\t\t\t\tinitialScreenId: prop.initialScreen.screenId,\r\n\t\t\t\tinitialProfileInstrument: prop.profileInstrument,\r\n\t\t\t});\r\n\r\n\t\t\tlocalStoreDoubleTabsListener(prop.csmg, timeout);\r\n\t\t}\r\n\r\n\t\tfunction updateInitialScreen(screenId) {\r\n\t\t\tprop.initialScreen.screenId = screenId;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tLoadData: loadData,\r\n\t\t\tLoadOnlySymbols: loadOnlySymbols,\r\n\t\t\tUpdateInitialScreen: updateInitialScreen,\r\n\t\t\tprop: prop,\r\n\t\t\tOnInitialScreens: onInitialScreens,\r\n\t\t\tOnTimestamp: onTimestamp,\r\n\t\t};\r\n\t}\r\n\r\n\twindow.$initialDataManager = new InitialDataManager(applicationConfiguration.doubleTabListenInterval);\r\n\r\n\treturn window.$initialDataManager;\r\n});\r\n\n",
    "'use strict';\r\ndefine('managers/PresetBuilder',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'handlers/general',\r\n        \"helpers/ObservableHashTable\",\r\n        'initdatamanagers/InitialDataManager',\r\n        'Dictionary'\r\n    ],\r\n    function (require) {\r\n        var ko = require('knockout'),\r\n            general = require('handlers/general'),\r\n            dictionary = require('Dictionary'),\r\n            observableHashTable = require(\"helpers/ObservableHashTable\"),\r\n            initialDataManager = require('initdatamanagers/InitialDataManager');\r\n\r\n        function setPresetName(params) {\r\n            for (var presetName in ePresetType) {\r\n                if (ePresetType.hasOwnProperty(presetName) &&\r\n                    ePresetType[presetName] === params.presetId) {\r\n                    return presetName;\r\n                }\r\n            }\r\n\r\n            return \"\";\r\n        }\r\n\r\n        function setPresetOrder(params) {\r\n            if (params.ascOrderPresetIds && 0 <= params.ascOrderPresetIds.indexOf(params.presetId)) {\r\n                return ePresetsOrder.Ascending;\r\n            }\r\n\r\n            if (params.descOrderPresetIds && 0 <= params.descOrderPresetIds.indexOf(params.presetId)) {\r\n                return ePresetsOrder.Descending;\r\n            }\r\n\r\n            return ePresetsOrder.None;\r\n        }\r\n\r\n        function newPreset(currentCategory, presetType) {\r\n            var data = {};\r\n\r\n            var presetId = currentCategory.presets[presetType].id,\r\n                subCategory = currentCategory.presets[presetType].subCategory;\r\n\r\n            data = {\r\n                presetId: presetId,\r\n                instrumentType: currentCategory.instrumentType,\r\n                subCategory: subCategory,\r\n                categoryNameKey: currentCategory.categoryName,\r\n                presetOrder: currentCategory.presetOrder,\r\n                isInitial: presetId == initialDataManager.prop.initialScreen.screenId,\r\n                ascOrderPresetIds: currentCategory.ascOrderPresetIds,\r\n                descOrderPresetIds: currentCategory.descOrderPresetIds\r\n            };\r\n\r\n            var name = setPresetName(data);\r\n\r\n            var quotesCollection = new observableHashTable(ko,general,'id');\r\n            var onOrderUpdate = new TDelegate();\r\n\r\n            var isSelected = ko.observable(false);\r\n            var isReady = ko.observable(false);\r\n\r\n            function getNonFakeCount() {\r\n                return quotesCollection.Values()\r\n                    .filter(function (item) {\r\n                        return item.isFake === false;\r\n                    })\r\n                    .length;\r\n            }\r\n\r\n            var nonFakeCount = ko.pureComputed(getNonFakeCount);\r\n\r\n            function updateOrder() {\r\n                var newOrder = quotesCollection.Values()\r\n                                .filter(function (item) { return item.isFake === false; })\r\n                                .map(function (item) { return item.id; });\r\n\r\n                onOrderUpdate.Invoke(newOrder);\r\n\r\n                ko.postbox.publish(\"favorite-instruments-reorder-drop\");\r\n            }\r\n\r\n            function update() {\r\n                clear();\r\n\r\n                if (isSelected()) {\r\n                    isSelected(false);\r\n                    isSelected(true);\r\n                }\r\n            }\r\n\r\n            function addRange(collection) {\r\n                quotesCollection.AddRange(collection);\r\n                isReady(true);\r\n            }\r\n\r\n            function clear() {\r\n                isReady(false);\r\n                quotesCollection.Clear();\r\n            }\r\n\r\n            return {\r\n                Id: data.presetId,\r\n                IdString: data.presetId.toString(),\r\n                InstrumentType: parseInt(data.instrumentType),\r\n                CategoryNameKey: data.categoryNameKey,\r\n                IsReady: isReady,\r\n                Order: setPresetOrder(data),\r\n                PresetOrder: data.presetOrder,\r\n                subCategory: data.subCategory,\r\n                Name: name,\r\n                Label: dictionary.GetItem(name, 'PresetsCategories'),\r\n                IsCustomScreen: (data.presetId === ePresetType.PresetCustomized),\r\n                isSelected: isSelected,\r\n                OnOrderUpdate: onOrderUpdate,\r\n                UpdateOrder: updateOrder,\r\n                QuotesCollection: quotesCollection,\r\n                TemporaryQuotesCollection: [],\r\n                Count: nonFakeCount,\r\n                Update: update,\r\n                AddRange: addRange,\r\n                Clear: clear\r\n            };\r\n        }\r\n\r\n        return {\r\n            NewPreset: newPreset\r\n        }\r\n    }\r\n);\n",
    "'use strict';\r\ndefine('managers/PresetCollectionBuilder',\r\n    [\r\n        'require',\r\n        'managers/PresetBuilder'\r\n    ],\r\n    function (require) {\r\n        var presetBuilder = require('managers/PresetBuilder');\r\n\r\n        function newCollection(categories, availableScreens) {\r\n            var presets = [];\r\n            availableScreens = availableScreens || [];\r\n\r\n            for (var index = 0, count = categories.length; index < count; index++) {\r\n                var currentCategory = categories[index];\r\n\r\n                for (var presetType in currentCategory.presets) {\r\n                    if (currentCategory.presets.hasOwnProperty(presetType)) {\r\n                        if (availableScreens.contains(currentCategory.presets[presetType].id)) {\r\n                            presets.push(presetBuilder.NewPreset(currentCategory, presetType));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            return presets;\r\n        }\r\n\r\n        return {\r\n            NewCollection: newCollection\r\n        };\r\n    }\r\n);\r\n\n",
    "'use strict';\r\ndefine('managers/PresetCategoryBuilder',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'initdatamanagers/InstrumentsManager',\r\n        'Dictionary'\r\n    ],\r\n    function (require) {\r\n        var ko = require('knockout'),\r\n            dictionary = require('Dictionary'),\r\n            instrumentsManager = require('initdatamanagers/InstrumentsManager');\r\n\r\n        function newCategory(presetArr, categoryName) {\r\n            var key = presetArr.length ? presetArr[0].CategoryNameKey : categoryName,\r\n                selectedPreset = ko.observable(\"\").extend({ notify: \"always\" }),\r\n                lastSelectedPreset = null,\r\n                label = dictionary.GetItem(key, 'PresetsCategories'),\r\n                presets = presetArr;\r\n            \r\n            presets.forEach(function (preset) {\r\n                preset.isSelected.subscribe(function (isSelected) {\r\n                    if (isSelected) {\r\n                        lastSelectedPreset = preset;\r\n                    }\r\n                }, preset);\r\n            });\r\n\r\n            var categoryIsSelected = ko.pureComputed(function () {\r\n                var selectedItem = presets.find(function (item) {\r\n                    return item.isSelected();\r\n                });\r\n\r\n                return !!selectedItem;\r\n            });\r\n\r\n            function select() {\r\n                if (!presets.length) {\r\n                    return;\r\n                }\r\n\r\n                var firstPresetFromCollection = presets[0];\r\n\r\n                //if we are in main tab and after login (don't have lastSelectedPreset) and have at least one instrument in Favorites, switch to Favorites\r\n                //if Favorites is empty, switch to next preset (MostPopular)\r\n                if (presets.length > 0 &&\r\n                    firstPresetFromCollection.Count() === 0 &&\r\n                    firstPresetFromCollection.CategoryNameKey === \"PresetMainTab\" &&\r\n                    instrumentsManager.GetPresetInstruments(firstPresetFromCollection.Id).length === 0) {\r\n                    firstPresetFromCollection = presets[1];\r\n                }\r\n\r\n                selectedPreset(lastSelectedPreset ? lastSelectedPreset.Id : firstPresetFromCollection.Id);\r\n                ko.postbox.publish('main-tab-click');\r\n            }\r\n            \r\n            function compareAlphabetically(a, b) {\r\n                var firstPresetLabel = a.Label,\r\n                    secondPresetLabel = b.Label;\r\n\r\n                return firstPresetLabel.localeCompare(secondPresetLabel);\r\n            }\r\n\r\n            function compareSubCategoryOrder(a, b) {\r\n                return a.subCategory.order - b.subCategory.order;\r\n            }\r\n\r\n            function sortSubCategoryPresets(subCategoryGroup) {\r\n                if (subCategoryGroup.subCategory.sortAlphabetically) {\r\n                    subCategoryGroup.presets.sort(compareAlphabetically);\r\n                }\r\n            }\r\n\r\n            function sortColumns(subCategories) {\r\n                return subCategories\r\n                    .sort(compareSubCategoryOrder)\r\n                    .forEach(sortSubCategoryPresets);\r\n            }\r\n\r\n            function getGroupedPresetsByColumns() {\r\n                var columns = [],\r\n                    subCategories = {};\r\n\r\n                for (var i = 0; i < presets.length; i++) {\r\n                    var preset = presets[i],\r\n                        columnIndex = preset.subCategory.columnId,\r\n                        group = subCategories[preset.subCategory.label];\r\n\r\n                    while (columns.length <= columnIndex) {\r\n                        columns.push([]);\r\n                    }\r\n\r\n                    if (!group) {\r\n                        group = { subCategory: preset.subCategory, presets: [] };\r\n                        subCategories[preset.subCategory.label] = group;\r\n                        columns[columnIndex].push(group);\r\n                    }\r\n\r\n                    group.presets.push(preset);\r\n                }\r\n\r\n                columns.forEach(sortColumns);\r\n\r\n                return columns;\r\n            }\r\n\r\n            return {\r\n                Key: key,\r\n                SelectedPreset: selectedPreset,\r\n                LastSelectedPreset: lastSelectedPreset,\r\n                Label: label,\r\n                GetGroupedPresetsByColumns: getGroupedPresetsByColumns,\r\n                Presets: presets,\r\n                isSelected: categoryIsSelected,\r\n                Select: select\r\n            };\r\n\r\n        }\r\n\r\n        return {\r\n            NewCategory: newCategory\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\"modules/PresetsManager\", [\r\n\t\"require\",\r\n\t\"Q\",\r\n\t\"handlers/general\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"generalmanagers/ErrorManager\",\r\n\t\"handlers/Logger\",\r\n\t\"dataaccess/dalInstruments\",\r\n\t\"global/UrlResolver\",\r\n\t\"devicemanagers/StatesManager\",\r\n], function PresetsManager(require) {\r\n\tvar Q = require(\"Q\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tErrorManager = require(\"generalmanagers/ErrorManager\"),\r\n\t\tLogger = require(\"handlers/Logger\"),\r\n\t\tdalInstruments = require(\"dataaccess/dalInstruments\"),\r\n\t\tStatesManager = require(\"devicemanagers/StatesManager\"),\r\n\t\tUrlResolver = require(\"global/UrlResolver\");\r\n\r\n\tvar presetsRefreshTimeoutMiliseconds = 5 * 60 * 1000,\r\n\t\tdefer = Q.defer(),\r\n\t\tisStarted = false,\r\n\t\tavailableScreens = [],\r\n\t\thasData = defer.promise,\r\n\t\tpresetInstrumentsList = [],\r\n\t\tonPresetsUpdated = new TDelegate();\r\n\r\n\tvar QuotesPresetsError = ErrorManager.createErrorType(\"QuotesPresetsError\", function errorHandler() {\r\n\t\t// this keyword refers to the istance of thrown InitialDataError\r\n\t\tLogger.log(\"TDALClientState\", this.getFullExceptionMessage(), function () {});\r\n\t});\r\n\r\n\tfunction load() {\r\n\t\tloadPresets(Customer.prop).then(processPresets).catch(onError).finally(setPresetsRefreshTimer).done();\r\n\t}\r\n\r\n\tfunction onError(error) {\r\n\t\tthrow new QuotesPresetsError(\"PresetsManager: Error on load/parse presets: \" + error.message);\r\n\t}\r\n\r\n\tfunction loadPresets(customerProperties) {\r\n\t\treturn dalInstruments.GetPresets({\r\n\t\t\tfolderId: getFolderId(),\r\n\t\t\tbrokerId: customerProperties.brokerID,\r\n\t\t\tfuturesPermission: customerProperties.futureStatus,\r\n\t\t\tstocksPermission: customerProperties.shareStatus,\r\n\t\t});\r\n\t}\r\n\r\n\tfunction getFolderId() {\r\n\t\tvar folder = StatesManager.States.Folder;\r\n\t\tvar folderId;\r\n\r\n\t\tif (!general.isNullOrUndefined(folder) && !general.isNullOrUndefined(folder()) && folder() !== -1) {\r\n\t\t\tfolderId = folder();\r\n\t\t} else {\r\n\t\t\tfolderId = UrlResolver.getFolderForInstruments();\r\n\t\t}\r\n\r\n\t\treturn folderId;\r\n\t}\r\n\r\n\tfunction processPresets(presets) {\r\n\t\tif (!presets) {\r\n\t\t\tthrow new QuotesPresetsError(\"ServerError: Presets could not be loaded\");\r\n\t\t}\r\n\r\n\t\tvar cfdScreens = [];\r\n\r\n\t\tfor (var key in presets) {\r\n\t\t\tif (presets.hasOwnProperty(key)) {\r\n\t\t\t\tvar presetId = parseInt(key);\r\n\t\t\t\tif (isNaN(presetId)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcfdScreens.push(presetId);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetPresetLoaded(presets, cfdScreens);\r\n\t}\r\n\r\n\tfunction setPresetsRefreshTimer() {\r\n\t\tsetTimeout(load, presetsRefreshTimeoutMiliseconds);\r\n\t}\r\n\r\n\tfunction getDefaultCfdScreenId() {\r\n\t\tvar cfdScreens = this.GetAvailableScreens();\r\n\r\n\t\treturn getCfdDefaultScreenId(cfdScreens);\r\n\t}\r\n\r\n\tfunction setAvailableScreens(screens) {\r\n\t\tavailableScreens = availableScreens.concatUnique(screens);\r\n\t}\r\n\r\n\tfunction getAvailableScreens() {\r\n\t\treturn availableScreens || [];\r\n\t}\r\n\r\n\tfunction getPresetInstruments() {\r\n\t\treturn presetInstrumentsList;\r\n\t}\r\n\r\n\tfunction setPresetLoaded(presets, cfdScreens) {\r\n\t\tpresetInstrumentsList = Object.assign({}, presets);\r\n\t\tsetAvailableScreens(cfdScreens);\r\n\r\n\t\tonPresetsUpdated.Invoke(presets, cfdScreens);\r\n\r\n\t\tdefer.resolve(this);\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tif (!isStarted) {\r\n\t\t\tload();\r\n\t\t}\r\n\r\n\t\tisStarted = true;\r\n\t}\r\n\r\n\tfunction getCfdDefaultScreenId(cfdScreens) {\r\n\t\tif (0 <= cfdScreens.indexOf(ePresetType.PresetMostPopular)) {\r\n\t\t\treturn ePresetType.PresetMostPopular;\r\n\t\t}\r\n\r\n\t\tif (0 <= cfdScreens.indexOf(ePresetType.PresetMostPopularWithoutShares)) {\r\n\t\t\treturn ePresetType.PresetMostPopularWithoutShares;\r\n\t\t}\r\n\r\n\t\tif (0 <= cfdScreens.indexOf(ePresetType.PresetMostPopularWithoutFutures)) {\r\n\t\t\treturn ePresetType.PresetMostPopularWithoutFutures;\r\n\t\t}\r\n\r\n\t\tif (0 <= cfdScreens.indexOf(ePresetType.PresetMostPopularWithoutFuturesWithoutShares)) {\r\n\t\t\treturn ePresetType.PresetMostPopularWithoutFuturesWithoutShares;\r\n\t\t}\r\n\r\n\t\tif (0 <= cfdScreens.indexOf(ePresetType.PresetMostPopularCurrencies)) {\r\n\t\t\treturn ePresetType.PresetMostPopularCurrencies;\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}\r\n\r\n\treturn {\r\n\t\tHasData: hasData,\r\n\t\tGetDefaultCFDScreenId: getDefaultCfdScreenId,\r\n\t\tSetAvailableScreens: setAvailableScreens,\r\n\t\tGetAvailableScreens: getAvailableScreens,\r\n\t\tStart: start,\r\n\t\tOnPresetsUpdated: onPresetsUpdated,\r\n\t\tGetPresetInstruments: getPresetInstruments,\r\n\t};\r\n});\r\n\n",
    "define(\r\n    'FxNet/Common/Constants/Collections/PresetsDefinitions',\r\n    [\r\n        'enums/enums'\r\n    ],\r\n    function () {\r\n        var subCategories = {\r\n            Display: {\r\n                label: \"lblDisplay\",\r\n                order: 0,\r\n                columnId: 0\r\n            },\r\n            CrossRates: {\r\n                label: \"lblCrossRates\",\r\n                order: 1,\r\n                columnId: 0\r\n            },\r\n            Group: {\r\n                label: \"lblGroup\",\r\n                order: 2,\r\n                columnId: 0\r\n            },\r\n            Region: {\r\n                label: \"lblRegion\",\r\n                order: 3,\r\n                columnId: 0\r\n            },\r\n            Americas: {\r\n                label: \"lblAmericas\",\r\n                order: 4,\r\n                sortAlphabetically: true,\r\n                columnId: 0\r\n            },\r\n            APAC: {\r\n                label: \"lblAPAC\",\r\n                order: 5,\r\n                sortAlphabetically: true,\r\n                columnId: 0\r\n            },\r\n            EMEA: {\r\n                label: \"lblEMEA\",\r\n                order: 6,\r\n                sortAlphabetically: true,\r\n                columnId: 1\r\n            },\r\n            Assets: {\r\n                label: \"lblAssets\",\r\n                order: 7,\r\n                columnId: 0\r\n            }\r\n        };\r\n\r\n        return [\r\n            {\r\n                presets: {\r\n                    PresetCustomized: { id: 0, subCategory: subCategories.Display },\r\n                    PresetMostPopular: { id: 2, subCategory: subCategories.Display },\r\n                    PresetMostPopularWithoutFutures: { id: 1, subCategory: subCategories.Display },\r\n                    PresetMostPopularWithoutShares: { id: 18, subCategory: subCategories.Display },\r\n                    PresetMostPopularWithoutFuturesWithoutShares: { id: 19, subCategory: subCategories.Display },\r\n                    PresetNewReleases: { id: 136, subCategory: subCategories.Display },\r\n                    PresetNewReleasesNoFutures: { id: 137, subCategory: subCategories.Display },\r\n                    PresetNewReleasesNoShares: { id: 138, subCategory: subCategories.Display },\r\n                    PresetNewReleasesNoSharesNoFutures: { id: 139, subCategory: subCategories.Display },\r\n                    MainHot: { id: 80, subCategory: subCategories.Display },\r\n                    MainHot_NoShares: { id: 83, subCategory: subCategories.Display },\r\n                    MainHot_NoSharesNoFutures: { id: 84, subCategory: subCategories.Display },\r\n                    MainTopGainers: { id: 85, subCategory: subCategories.Display },\r\n                    MainTopGainers_NoShares: { id: 88, subCategory: subCategories.Display },\r\n                    MainTopGainers_NoSharesNoFuture: { id: 89, subCategory: subCategories.Display },\r\n                    MainTopLosers: { id: 90, subCategory: subCategories.Display },\r\n                    MainTopLosers_NoShares: { id: 93, subCategory: subCategories.Display },\r\n                    MainTopLosers_NoSharesNoFutures: { id: 94, subCategory: subCategories.Display },\r\n                    MainHot_NoFutures: { id: 101, subCategory: subCategories.Display },\r\n                    MainTopGainers_NoFutures: { id: 102, subCategory: subCategories.Display },\r\n                    MainTopLosers_NoFutures: { id: 103, subCategory: subCategories.Display }\r\n                },\r\n                ascOrderPresetIds: [90, 93, 94, 103],\r\n                descOrderPresetIds: [85, 88, 89, 102],\r\n                categoryName: \"PresetMainTab\",\r\n                presetOrder: 0,\r\n                sortPresetsAlphabetically: false,\r\n                instrumentType: eInstrumentType.Mixed,\r\n                searchPresetIds: []\r\n            },\r\n            {\r\n                presets: {\r\n                    PresetMostPopularCurrencies: { id: 3, subCategory: subCategories.Display },\r\n                    CurrenciesHot: { id: 81, subCategory: subCategories.Display },\r\n                    CurrenciesTopGainers: { id: 86, subCategory: subCategories.Display },\r\n                    CurrenciesTopLosers: { id: 91, subCategory: subCategories.Display },\r\n                    PresetUsdCurrencies: { id: 4, subCategory: subCategories.CrossRates },\r\n                    PresetEurCurrencies: { id: 5, subCategory: subCategories.CrossRates },\r\n                    PresetGbpCurrencies: { id: 6, subCategory: subCategories.CrossRates },\r\n                    PresetJpyCurrencies: { id: 7, subCategory: subCategories.CrossRates },\r\n                    PresetOtherCurrencies: { id: 8, subCategory: subCategories.CrossRates }\r\n                },\r\n                ascOrderPresetIds: [91],\r\n                descOrderPresetIds: [86],\r\n                categoryName: \"PresetCurrenciesTab\",\r\n                presetOrder: 1,\r\n                sortPresetsAlphabetically: false,\r\n                instrumentType: eInstrumentType.Currencies,\r\n                searchPresetIds: [4, 5, 6, 7, 8]\r\n            },\r\n            {\r\n                presets: {\r\n                    PresetCommodities: { id: 9, subCategory: subCategories.Display },\r\n                    PresetCommoditiesWithoutFutures: { id: 10, subCategory: subCategories.Display },\r\n                    CommoditiesHot: { id: 95, subCategory: subCategories.Display },\r\n                    CommoditiesTopGainers: { id: 96, subCategory: subCategories.Display },\r\n                    CommoditiesTopLosers: { id: 97, subCategory: subCategories.Display },\r\n                    PresetCommoditiesAgricultural: { id: 24, subCategory: subCategories.Group },\r\n                    PresetCommoditiesEnergy: { id: 25, subCategory: subCategories.Group },\r\n                    PresetCommoditiesMetals: { id: 26, subCategory: subCategories.Group }\r\n                },\r\n                ascOrderPresetIds: [97],\r\n                descOrderPresetIds: [96],\r\n                categoryName: \"PresetCommoditiesTab\",\r\n                presetOrder: 2,\r\n                sortPresetsAlphabetically: false,\r\n                instrumentType: eInstrumentType.Commodities,\r\n                searchPresetIds: [10, 24, 25, 26]\r\n            },\r\n            {\r\n                presets: {\r\n                    IndiciesMostPopular_NoShares: { id: 11, subCategory: subCategories.Display },\r\n                    IndicesHot_NoShares: { id: 98, subCategory: subCategories.Display },\r\n                    IndicesTopGainers_NoShares: { id: 99, subCategory: subCategories.Display },\r\n                    IndicesTopLosers_NoShares: { id: 100, subCategory: subCategories.Display },\r\n                    IndicesEMEA_NoShares: { id: 27, subCategory: subCategories.Display },\r\n                    IndicesNorthAmericas_NoShares: { id: 28, subCategory: subCategories.Display },\r\n                    IndicesOther_NoShares: { id: 29, subCategory: subCategories.Display },\r\n                    IndicesMostPopular: { id: 113, subCategory: subCategories.Display },\r\n                    IndicesHot: { id: 114, subCategory: subCategories.Display },\r\n                    IndicesTopGainers: { id: 115, subCategory: subCategories.Display },\r\n                    IndicesTopLosers: { id: 116, subCategory: subCategories.Display },\r\n                    IndicesNorthAmericas: { id: 118, subCategory: subCategories.Region },\r\n                    IndicesOther: { id: 119, subCategory: subCategories.Region },\r\n                    IndicesEMEA: { id: 117, subCategory: subCategories.Region }\r\n                },\r\n                ascOrderPresetIds: [100, 116],\r\n                descOrderPresetIds: [99, 115],\r\n                categoryName: \"PresetIndicesTab\",\r\n                presetOrder: 3,\r\n                sortPresetsAlphabetically: false,\r\n                instrumentType: eInstrumentType.Indices,\r\n                searchPresetIds: [27, 28, 29, 117, 118, 119]\r\n            },\r\n            {\r\n                presets: {\r\n                    PresetShares: { id: 12, subCategory: subCategories.Display },\r\n                    SharesHot: { id: 82, subCategory: subCategories.Display },\r\n                    SharesTopGainers: { id: 87, subCategory: subCategories.Display },\r\n                    SharesTopLosers: { id: 92, subCategory: subCategories.Display },\r\n                    PresetSharesUS: { id: 13, subCategory: subCategories.Americas },\r\n                    PresetSharesUK: { id: 20, subCategory: subCategories.EMEA },\r\n                    PresetSharesJapan: { id: 22, subCategory: subCategories.APAC },\r\n                    PresetSharesHongKong: { id: 125, subCategory: subCategories.APAC },\r\n                    PresetSharesGermany: { id: 15, subCategory: subCategories.EMEA },\r\n                    PresetSharesFrance: { id: 21, subCategory: subCategories.EMEA },\r\n                    PresetSharesIndia: { id: 140, subCategory: subCategories.APAC },\r\n                    PresetSharesItaly: { id: 17, subCategory: subCategories.EMEA },\r\n                    PresetSharesNetherlands: { id: 31, subCategory: subCategories.EMEA },\r\n                    PresetSharesAustralia: { id: 126, subCategory: subCategories.APAC },\r\n                    PresetSharesSouthCorea: { id: 30, subCategory: subCategories.APAC },\r\n                    PresetsSharesSaudiArabia: { id: 135, subCategory: subCategories.EMEA },\r\n                    PresetSharesSpain: { id: 16, subCategory: subCategories.EMEA },\r\n                    PresetSharesRussia: { id: 23, subCategory: subCategories.EMEA },\r\n                    PresetSharesMexico: { id: 127, subCategory: subCategories.Americas },\r\n                    PresetSharesSwitzerland: { id: 32, subCategory: subCategories.EMEA },\r\n                    PresetSharesSweden: { id: 33, subCategory: subCategories.EMEA },\r\n                    PresetSharesPoland: { id: 128, subCategory: subCategories.EMEA },\r\n                    PresetSharesFinland: { id: 132, subCategory: subCategories.EMEA },\r\n                    PresetSharesGreece: { id: 129, subCategory: subCategories.EMEA },\r\n                    PresetSharesCzechRepublic: { id: 130, subCategory: subCategories.EMEA },\r\n                    PresetSharesHungary: { id: 131, subCategory: subCategories.EMEA }\r\n                },\r\n                ascOrderPresetIds: [92],\r\n                descOrderPresetIds: [87],\r\n                categoryName: \"PresetSharesTab\",\r\n                presetOrder: 4,\r\n                sortPresetsAlphabetically: true,\r\n                instrumentType: eInstrumentType.Shares,\r\n                searchPresetIds: [13, 20, 22, 125, 15, 21, 140, 17, 31, 126, 30, 135, 16, 23, 127, 32, 33, 128, 132, 129, 130, 131]\r\n            },\r\n            {\r\n                presets: {\r\n                    StocksMostPopular: { id: 141, subCategory: subCategories.Display }\r\n                },\r\n                categoryName: \"PresetStocksTab\",\r\n                presetOrder: 5,\r\n                instrumentType: eInstrumentType.Stocks,\r\n                ascOrderPresetIds: [],\r\n                descOrderPresetIds: [],\r\n                searchPresetIds: [141]\r\n            },\r\n            {\r\n                presets: {\r\n                    ETFMostPopular: { id: 104, subCategory: subCategories.Display },\r\n                    ETFHot: { id: 105, subCategory: subCategories.Display },\r\n                    ETFTopGainers: { id: 106, subCategory: subCategories.Display },\r\n                    ETFTopLosers: { id: 107, subCategory: subCategories.Display },\r\n                    ETFCommodities: { id: 108, subCategory: subCategories.Assets },\r\n                    ETFEquityCountries: { id: 109, subCategory: subCategories.Assets },\r\n                    ETFEquityIndices: { id: 110, subCategory: subCategories.Assets },\r\n                    ETFEquitySectors: { id: 111, subCategory: subCategories.Assets },\r\n                    ETFFixedIncome: { id: 112, subCategory: subCategories.Assets }\r\n                },\r\n                ascOrderPresetIds: [107],\r\n                descOrderPresetIds: [106],\r\n                categoryName: \"PresetETFTab\",\r\n                presetOrder: 6,\r\n                instrumentType: eInstrumentType.ETF,\r\n                searchPresetIds: [108, 109, 110, 111, 112]\r\n            },\r\n            {\r\n                presets: {\r\n                    CryptoMostPopular: { id: 120, subCategory: subCategories.Display },\r\n                    CryptoHot: { id: 121, subCategory: subCategories.Display },\r\n                    CryptoTopGainers: { id: 122, subCategory: subCategories.Display },\r\n                    CryptoTopLosers: { id: 123, subCategory: subCategories.Display },\r\n                    CryptoCurrencies: { id: 124, subCategory: subCategories.Display }\r\n                },\r\n                ascOrderPresetIds: [123],\r\n                descOrderPresetIds: [122],\r\n                categoryName: \"PresetCryptoTab\",\r\n                presetOrder: 7,\r\n                instrumentType: eInstrumentType.Crypto,\r\n                searchPresetIds: [124]\r\n            }\r\n        ];\r\n    }\r\n);\r\n\n",
    "'use strict';\r\ndefine(\r\n    'viewmodels/QuotesPresetViewModel',\r\n    [\r\n        'knockout',\r\n        'viewmodels/ViewModelBase',\r\n        'managers/PresetCollectionBuilder',\r\n        'managers/PresetCategoryBuilder',\r\n        'modules/PresetsManager',\r\n        'modules/FavoriteInstrumentsManager',\r\n        'initdatamanagers/InitialDataManager',\r\n        'managers/CustomerProfileManager',\r\n        'initdatamanagers/InstrumentsManager',\r\n        'managers/instrumentTranslationsManager',\r\n        'managers/viewsmanager',\r\n        'FxNet/Common/Constants/Collections/PresetsDefinitions',\r\n        'handlers/general'\r\n    ],\r\n    function QuotesPresetViewModel() {\r\n        var self = {},\r\n            observableObject = {},\r\n            ko = require('knockout'),\r\n            ViewModelBase = require('viewmodels/ViewModelBase'),\r\n            general = require('handlers/general'),\r\n            inheritedInstance = general.clone(ViewModelBase),\r\n            presetCollectionBuilder = require('managers/PresetCollectionBuilder'),\r\n            presetCategoryBuilder = require('managers/PresetCategoryBuilder'),\r\n            PresetsManager = require('modules/PresetsManager'),\r\n            FavoriteInstrumentsManager = require('modules/FavoriteInstrumentsManager'),\r\n            InitialDataManager = require('initdatamanagers/InitialDataManager'),\r\n            CustomerProfileManager = require('managers/CustomerProfileManager'),\r\n            InstrumentsManager = require('initdatamanagers/InstrumentsManager'),\r\n            InstrumentTranslationsManager = require('managers/instrumentTranslationsManager'),\r\n            ViewsManager = require('managers/viewsmanager'),\r\n            lastPresetIdToSelect = -1,\r\n            maxInitialDataCategories = 2,\r\n            searchInstruments = ko.observable([]),\r\n            singleCharSearch = ko.observable(false),\r\n            presetsDefinitions = require('FxNet/Common/Constants/Collections/PresetsDefinitions'),\r\n            editFavoriteVisible = ko.observable(false);\r\n\r\n        function init(customSettings) {\r\n            inheritedInstance.setSettings(self, customSettings);\r\n\r\n            setDefaultObservables();\r\n            setComputables();\r\n            setSubscribers();\r\n            setPresetSubscribers();\r\n\r\n            buildAndSelect();\r\n        }\r\n\r\n        function buildAndSelect() {\r\n            var selectedPresetId = observableObject.SelectedId() || InitialDataManager.prop.initialScreen.screenId;\r\n            var availableCfdScreens = PresetsManager.GetAvailableScreens();\r\n\r\n            buildCollections(availableCfdScreens);\r\n            selectPreset(selectedPresetId);\r\n\r\n            setSearchInstruments();\r\n        }\r\n\r\n        //---------------------------------------------------------\r\n        function isSearchPreset(presetId) {\r\n            var presetIdNum = parseInt(presetId);\r\n\r\n            for (var idx = 0; idx < presetsDefinitions.length; idx++) {\r\n                if (0 <= presetsDefinitions[idx].searchPresetIds.indexOf(presetIdNum)) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        //---------------------------------------------------------\r\n        function setSearchInstruments() {\r\n            var instrumentsUiOrder = InstrumentsManager.GetInstrumentIds(),\r\n                presets = InstrumentsManager.GetPresetInstruments();\r\n\r\n            var mappedInstruments = instrumentsUiOrder.map(function (instrumentId) {\r\n                //search for preset having instrument\r\n                var presetIdsHavingInstrument = [];\r\n\r\n                for (var presetId in presets) {\r\n                    if (!presets.hasOwnProperty(presetId)) {\r\n                        continue;\r\n                    }\r\n\r\n                    var presetInstruments = presets[presetId];\r\n                    if (0 <= presetInstruments.findIndex(function (instrument) {\r\n                        return instrument[0] === instrumentId;\r\n                    })) {\r\n                        presetIdsHavingInstrument.push(presetId);\r\n                    }\r\n                }\r\n\r\n                if (presetIdsHavingInstrument.length === 0) {\r\n                    return null;\r\n                }\r\n\r\n                //search preset for instrument first on searchPresetIds and if not use last one all available presets list\r\n                var instrumentPresetId = presetIdsHavingInstrument.find(isSearchPreset) || presetIdsHavingInstrument[presetIdsHavingInstrument.length - 1];\r\n\r\n                var instrumentInfo = InstrumentsManager.GetInstrument(instrumentId),\r\n                    presetInfo = getPreset(instrumentPresetId);\r\n\r\n                var instrumentTranslationShort = InstrumentTranslationsManager.Short(instrumentId),\r\n                    instrumentTranslationLong = InstrumentTranslationsManager.Long(instrumentId),\r\n                    fullText = InstrumentTranslationsManager.GetFullTextLatinized(instrumentId),\r\n                    translatedInstrument = InstrumentTranslationsManager.GetTranslatedInstrumentById(instrumentId);\r\n\r\n                if (instrumentTranslationLong.length < 2) {\r\n                    singleCharSearch(true);\r\n                }\r\n\r\n                return {\r\n                    id: instrumentId,\r\n                    baseSymbolId: instrumentInfo.baseSymbol,\r\n                    otherSymbolId: instrumentInfo.otherSymbol,\r\n                    shortTranslation: instrumentTranslationShort,\r\n                    value: instrumentTranslationLong,\r\n                    fullText: fullText,\r\n                    category: Dictionary.GetItem(presetInfo.CategoryNameKey, 'PresetsCategories') + ' - ' + presetInfo.Label,\r\n                    presetId: presetInfo.Id,\r\n\r\n                    instrumentName: instrumentTranslationLong,\r\n                    symbolName: translatedInstrument.baseSymbolName,\r\n                    fullName: InstrumentTranslationsManager.GetTooltipByInstrumentId(instrumentId),\r\n                    ccyOrder: instrumentsUiOrder.indexOf(instrumentId)\r\n                };\r\n            });\r\n\r\n            mappedInstruments = mappedInstruments.filter(function (instrument) { return instrument !== null; });\r\n\r\n            searchInstruments(mappedInstruments);\r\n        }\r\n\r\n        function isDynamicPreset(selectedPresetId) {\r\n            var presetIdNum = parseInt(selectedPresetId);\r\n\r\n            for (var idx = 0; idx < presetsDefinitions.length; idx++) {\r\n                if (0 <= presetsDefinitions[idx].ascOrderPresetIds.indexOf(presetIdNum)\r\n                    || 0 <= presetsDefinitions[idx].descOrderPresetIds.indexOf(presetIdNum)\r\n                    || presetIdNum === presetsDefinitions[idx].presets.PresetMostPopularCurrencies\r\n                    || presetIdNum === presetsDefinitions[idx].presets.CurrenciesHot) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        function isFavouritePreset(presetId) {\r\n            var presetIdNum = parseInt(presetId);\r\n\r\n            for (var idx = 0; idx < presetsDefinitions.length; idx++) {\r\n                if (presetIdNum === presetsDefinitions[idx].presets.PresetCustomized) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        function equalPresetInstruments(selectedPresetInstruments, newPresetInstruments) {\r\n            if (selectedPresetInstruments.length !== newPresetInstruments.length) {\r\n                return false;\r\n            }\r\n\r\n            for (var i = 0; i < newPresetInstruments.length; i++) {\r\n                if (newPresetInstruments[i][0] !== selectedPresetInstruments[i].instrumentId) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        function equalPresets(newPresets, actualPresets) {\r\n            if (general.isNullOrUndefined(newPresets) || general.isNullOrUndefined(actualPresets)) {\r\n                return false;\r\n            }\r\n\r\n            actualPresets = actualPresets.filter(function (preset) {\r\n                return isFavouritePreset(preset.Id) === false;\r\n            });\r\n\r\n            return Object.keys(newPresets).length === actualPresets.length;\r\n        }\r\n\r\n        function buildAndSelectWithDelta(newPresets) {\r\n            var selectedPresetId = observableObject.SelectedId() || InitialDataManager.prop.initialScreen.screenId;\r\n            var actualPresets = observableObject.Presets();\r\n\r\n            if (isDynamicPreset(selectedPresetId) || equalPresets(newPresets, actualPresets) === false) {\r\n                buildAndSelect();\r\n            } else {\r\n                var selectedPresetInstruments;\r\n                var selectedPreset = actualPresets.find(function (obsPreset) {\r\n                    return obsPreset.Id === selectedPresetId;\r\n                });\r\n\r\n                if (general.isNullOrUndefined(selectedPreset) === false) {\r\n                    selectedPresetInstruments = selectedPreset.QuotesCollection.Values().filter(function (instr) {\r\n                        return !instr.isFake;\r\n                    });\r\n                }\r\n\r\n                var newPresetInstruments;\r\n\r\n                if (general.isNullOrUndefined(newPresets) === false) {\r\n                    newPresetInstruments = newPresets[selectedPresetId];\r\n                }\r\n\r\n                if (general.isNullOrUndefined(newPresetInstruments) === false\r\n                    && general.isNullOrUndefined(selectedPresetInstruments) === false\r\n                    && equalPresetInstruments(selectedPresetInstruments, newPresetInstruments) === false) {\r\n                    buildAndSelect();\r\n                }\r\n            }\r\n        }\r\n\r\n        function setPresetSubscribers() {\r\n            PresetsManager.OnPresetsUpdated.Add(buildAndSelectWithDelta);\r\n        }\r\n\r\n        function reset() {\r\n            lastPresetIdToSelect = -1;\r\n\r\n            // Deactivate presets\r\n            observableObject.Presets().forEach(function (item) {\r\n                item.isSelected(false);\r\n            });\r\n        }\r\n\r\n        function setDefaultObservables() {\r\n            observableObject.Presets = ko.observableArray([]);\r\n            observableObject.SelectedId = ko.observable(\"\");\r\n            observableObject.isSearch = ko.observable(false);\r\n        }\r\n\r\n        function setComputables() {\r\n            observableObject.SelectedPreset = ko.pureComputed(function () {\r\n                var preset = observableObject.Presets().find(function (item) {\r\n                    return item.isSelected();\r\n                });\r\n\r\n                if (preset) {\r\n                    observableObject.SelectedId(preset.Id);\r\n                } else {\r\n                    observableObject.SelectedId(\"\");\r\n                }\r\n\r\n                return preset;\r\n            });\r\n\r\n            observableObject.Categories = ko.computed(function () {\r\n                // Get all categories IDs (InstrumentType)\r\n                var categorySortingIds = observableObject.Presets().map(function (item) {\r\n                    return { instrumentType: item.InstrumentType, presetOrder: item.PresetOrder };\r\n                });\r\n\r\n                var categoryList = buildCategories(categorySortingIds);\r\n\r\n                if (categoryList.length > maxInitialDataCategories) {\r\n                    return categoryList;\r\n                }\r\n\r\n                return fillCategoryList(categoryList);\r\n            });\r\n\r\n            observableObject.SelectedCategory = ko.computed(function () {\r\n                var category = observableObject.Categories().find(function (item) {\r\n                    return item.isSelected();\r\n                });\r\n\r\n                return category;\r\n            });\r\n        }\r\n\r\n        function buildCategories(categoryIds) {\r\n            var uniqueCategories = categoryIds\r\n                .filter(function (value, index, arr) {\r\n                    var categ = arr.find(function (item) {\r\n                        return item.instrumentType === value.instrumentType;\r\n                    });\r\n                    return arr.indexOf(categ) === index;\r\n                })\r\n                .sort(function (a, b) {\r\n                    return a.presetOrder - b.presetOrder;\r\n                });\r\n\r\n            var categoriesList = [],\r\n                category;\r\n\r\n            for (var i = 0; i < uniqueCategories.length; i++) {\r\n                // Find the presets that belogs to this category\r\n                var presets = observableObject.Presets().filter(function (categoryType, item) {\r\n                    return item.InstrumentType === categoryType;\r\n                }.bind(null, uniqueCategories[i].instrumentType));\r\n\r\n                category = presetCategoryBuilder.NewCategory(presets);\r\n\r\n                category.SelectedPreset.subscribe(function (presetId) {\r\n                    selectPreset(presetId);\r\n                });\r\n\r\n                categoriesList.push(category);\r\n            }\r\n\r\n            return categoriesList;\r\n        }\r\n\r\n        function fillCategoryList(initialCategoryList) {\r\n            var categoriesList = [],\r\n                initialCategoryNames = initialCategoryList.map(getCategoryName);\r\n\r\n            for (var i = 0; i < presetsDefinitions.length; i++) {\r\n                var categoryName = presetsDefinitions[i].categoryName,\r\n                    category;\r\n\r\n                if (initialCategoryNames.contains(categoryName)) {\r\n                    category = initialCategoryList.find(isSpecifiedCategory.bind(null, categoryName));\r\n                } else {\r\n                    category = presetCategoryBuilder.NewCategory([], categoryName);\r\n                }\r\n\r\n                categoriesList.push(category);\r\n            }\r\n\r\n            return categoriesList;\r\n        }\r\n\r\n        function getCategoryName(category) {\r\n            return category.Key;\r\n        }\r\n\r\n        function isSpecifiedCategory(categoryName, item) {\r\n            return item.Key === categoryName;\r\n        }\r\n\r\n        function setSubscribers() {\r\n            ko.postbox.subscribe('swipePreset', function (direction) {\r\n                var categories = observableObject.Categories();\r\n                var currentPresetPos = categories.indexOf(observableObject.SelectedCategory());\r\n\r\n                if (direction === \"left-to-right\") {\r\n                    if (typeof categories[currentPresetPos - 1] !== \"undefined\") {\r\n                        categories[currentPresetPos - 1].Select();\r\n                    } else {\r\n                        ko.postbox.publish('search-presets');\r\n                        observableObject.isSearch(true);\r\n                    }\r\n                }\r\n\r\n                if (direction === \"right-to-left\" && typeof categories[currentPresetPos + 1] !== \"undefined\") {\r\n                    if (observableObject.isSearch()) {\r\n                        categories[0].Select();\r\n                    } else {\r\n                        categories[currentPresetPos + 1].Select();\r\n                    }\r\n\r\n                    observableObject.isSearch(false);\r\n                }\r\n            });\r\n\r\n            InstrumentsManager.OnFavoritesPresetChanged.Add(function onPresetChanged() {\r\n                var customizedPreset = observableObject.Presets().find(function (item) {\r\n                    return item.Id == ePresetType.PresetCustomized;\r\n                });\r\n\r\n                if (customizedPreset) {\r\n                    customizedPreset.Update();\r\n                }\r\n            });\r\n        }\r\n\r\n        function buildCollections(availableCfdScreens) {\r\n            var collection = presetCollectionBuilder.NewCollection(presetsDefinitions, availableCfdScreens);\r\n\r\n            collection.forEach(function (presteItem) {\r\n                presteItem.Select = selectPreset;\r\n            });\r\n\r\n            observableObject.Presets(collection);\r\n        }\r\n\r\n        function selectPresetHandler(preset) {\r\n            // Only the last clicked preset should be selected\r\n            if (preset.Id !== lastPresetIdToSelect) {\r\n                return;\r\n            }\r\n\r\n            if (preset.isSelected()) {\r\n                // Skip an already selected preset\r\n                return;\r\n            }\r\n\r\n            // Deactivate others\r\n            observableObject.Presets().forEach(function (item) {\r\n                if (item.Id !== lastPresetIdToSelect) {\r\n                    item.isSelected(false);\r\n                    // remove any listeners\r\n                    item.OnOrderUpdate.Flush();\r\n                }\r\n            });\r\n\r\n            if (inheritedInstance.getSettings(self).areQuotesVisible) {\r\n                updateQuoteUIOrder(preset);\r\n            }\r\n\r\n            // Activate\r\n            preset.isSelected(true);\r\n\r\n            // listen for order change\r\n            preset.OnOrderUpdate.Add(function (instrumentsIds) {\r\n                FavoriteInstrumentsManager.ChangeUIOrder(instrumentsIds, true);\r\n            });\r\n\r\n            ko.postbox.publish('preset-changed', preset.Name);\r\n            CustomerProfileManager.LastSelectedPresetId(preset.Id);\r\n        }\r\n\r\n        function selectPreset(presetId) {\r\n            presetId = Number(presetId);\r\n\r\n            editFavoriteVisible(presetId === 0);\r\n\r\n            var presetToActivate = observableObject.Presets().find(function (item) {\r\n                return item.Id === presetId;\r\n            });\r\n\r\n            if (!presetToActivate) {\r\n                return;\r\n            }\r\n\r\n            lastPresetIdToSelect = presetId;\r\n\r\n            selectPresetHandler(presetToActivate);\r\n        }\r\n\r\n        function getPreset(presetId) {\r\n            var preset = observableObject.Presets().find(function (item) {\r\n                return item.Id == presetId;\r\n            });\r\n\r\n            return preset;\r\n        }\r\n\r\n        function updateQuoteUIOrder(preset) {\r\n            var quotesUIorder;\r\n\r\n            if (preset.Id == ePresetType.PresetCustomized) {\r\n                quotesUIorder = InstrumentsManager.GetCustomizedUiOrder();\r\n            } else {\r\n                quotesUIorder = InstrumentsManager.GetPresetInstruments(preset.Id);\r\n            }\r\n\r\n            if (quotesUIorder) {\r\n                if (!observableObject.isSearch()) {\r\n                    InstrumentsManager.SetQuotesUIOrder(quotesUIorder);\r\n                }\r\n\r\n                if (!inheritedInstance.getSettings(self).areQuotesVisible) {\r\n                    ViewsManager.SwitchViewVisible(eForms.Quotes, { presetToSelect: preset.Id });\r\n                }\r\n            }\r\n\r\n            ko.postbox.publish('quotes-ui-order-loaded');\r\n        }\r\n\r\n        function getCurrentPresetName() {\r\n            var currentPreset = observableObject.SelectedPreset();\r\n\r\n            if (!currentPreset) {\r\n                currentPreset = observableObject.Presets().find(function (item) {\r\n                    return InitialDataManager.prop.initialScreen.screenId === item.Id;\r\n                });\r\n            }\r\n\r\n            return currentPreset.Name;\r\n        }\r\n\r\n        return {\r\n            Init: init,\r\n            Reset: reset,\r\n            Data: observableObject,\r\n            SearchInstrumentsObservable: searchInstruments,\r\n            SingleCharSearch: singleCharSearch,\r\n            GetCurrentPresetName: getCurrentPresetName,\r\n            GetPreset: getPreset,\r\n            SelectPreset: selectPreset,\r\n            IsSearchPreset: isSearchPreset,\r\n            EditFavoriteVisible: editFavoriteVisible\r\n        };\r\n    });\n",
    "function TDALAccountingActions(ErrorManager, general) {\r\n    function loadAccountingActions(filter, OnLoadComplete) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        var requestFilter = {\r\n            symbolId: filter.SymbolId,\r\n            actionCategory: filter.ActionCategory,\r\n            from: filter.From,\r\n            to: filter.To,\r\n            page: filter.Page,\r\n            position: filter.Position,\r\n            pageSize: filter.pagesize || filter.PageSize,\r\n            exportdata: filter.exportdata || false,\r\n            showCosts: filter.ShowCosts || false,\r\n            closedDate: filter.ClosedDate\r\n        };\r\n\r\n        ajaxer.get(\r\n            \"TDALAccountingActions/loadAccountingActions\",\r\n            \"api/accountingactions/GetData\",\r\n            general.urlEncode(requestFilter),\r\n            OnLoadComplete,\r\n            function () {\r\n                ErrorManager.onError(\"TDALAccountingActions/loadAccountingActions\", \"\", eErrorSeverity.medium);\r\n            }\r\n        );\r\n    }\r\n\r\n    function getAccountSymbols(OnLoadSymbolsComplete) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        ajaxer.get(\r\n            \"TDALAccountingActions/getAccountSymbols\",\r\n            \"api/accountingactions/GetAccountSymbols\",\r\n            \"\",\r\n            OnLoadSymbolsComplete,\r\n            function () {\r\n                ErrorManager.onError(\"TDALAccountingActions/getAccountSymbols\", \"\", eErrorSeverity.medium);\r\n            }\r\n        );\r\n    }\r\n\r\n    function getContractRollover(filter, OnLoadComplete) {\r\n        var ajaxer = TAjaxer();\r\n\r\n        var requestFilter = {\r\n            page: filter.Page,\r\n            position: filter.Position,\r\n            pageSize: filter.pagesize || filter.PageSize,\r\n            exportdata: filter.exportdata || false\r\n        };\r\n\r\n        ajaxer.get(\r\n            \"TDALAccountingActions/getContractRollover\",\r\n            \"api/accountingactions/GetAdditionalPl\",\r\n            general.urlEncode(requestFilter),\r\n            OnLoadComplete,\r\n            function () {\r\n                ErrorManager.onError(\"TDALAccountingActions/getContractRollover\", \"\", eErrorSeverity.medium);\r\n            }\r\n        );\r\n    }\r\n\r\n    return {\r\n        LoadAccountingActions: loadAccountingActions,\r\n        GetAccountSymbols: getAccountSymbols,\r\n        GetContractRollover: getContractRollover\r\n    };\r\n}\r\n;\ndefine(\"dataaccess/dalAccountingActions\", [\"generalmanagers/ErrorManager\",\"handlers/general\",\"handlers/Ajaxer\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (em, general) {\r\n\t\t\t\treturn this.TDALAccountingActions(em, general);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TDALAccountingActions;\n    };\n}(this)));\n\n",
    "function ObservableDataSet(ko, general, opts, sortingParams) {\r\n    // Keep reference to THIS\r\n    var self = this;\r\n    // Ensure opts is not null\r\n    opts = opts || {};\r\n    var isLoadingData = ko.observable(false);\r\n    // default options\r\n    var defOptions = {\r\n        columns: [],                                // Columns definition\r\n        idField: \"id\",                              // id field for each record, required for ObservableHashTable\r\n        statusField: \"status\",                      // response status\r\n        totalField: \"total\",                        // total records, the field where total records value is stored\r\n        dataField: \"data\",                          // the field where records are returned\r\n        pagination: {\r\n            pagesPerPage: 5,                        // pages to display\r\n            pageSizeField: \"pagesize\",              // field for page size\r\n            pageIndexField: \"page\"                  // field for page index\r\n        },\r\n        Filter: {},                                 // Filter definition\r\n        DAL: {\r\n            reference: function () { },             // reference to DAL function\r\n            callerName: \"ObservableDataSet\",        // caller name\r\n            errorSeverity: eErrorSeverity.medium,   // error severity\r\n            onLoad: function () { }                 // on load callback\r\n        }\r\n    };\r\n\r\n    var options = general.extendType({}, opts, defOptions);  // Merge default options with options passed\r\n\r\n    // Initialize properties\r\n    var dataRows = new ObservableHashTable(ko, general, options.idField, sortingParams),\r\n        currentPage = ko.observable(1),\r\n        pageSize = ko.observable(10),\r\n        pages = ko.observableArray(),\r\n        pagesPerPage = ko.observable(options.pagination.pagesPerPage),\r\n        totalRecords = ko.observable(0),\r\n        hasRecords = ko.observable(false);\r\n\r\n    var appendRecords = false;\r\n\r\n    var showMore = function () {\r\n        if (currentPage() < totalPages()) {\r\n            appendRecords = true;\r\n            currentPage(parseInt(currentPage() + 1));\r\n        }\r\n    };\r\n\r\n    var nextPage = function () {\r\n        if (currentPage() < totalPages()) {\r\n            currentPage(parseInt(currentPage() + 1));\r\n        }\r\n    };\r\n\r\n    var prevPage = function () {\r\n        if (currentPage() > 1) {\r\n            currentPage(parseInt(currentPage() - 1));\r\n        }\r\n    };\r\n\r\n    var firstPage = function () {\r\n        if (currentPage() > 1) {\r\n            currentPage(1);\r\n        }\r\n    };\r\n\r\n    var lastPage = function () {\r\n        if (currentPage() < totalPages()) {\r\n            currentPage(totalPages());\r\n        }\r\n    };\r\n\r\n    // Computed value\r\n    var totalPages = ko.computed(function () {\r\n        return Math.ceil(totalRecords() / pageSize());\r\n    });\r\n    var hasNextPage = ko.computed(function () {\r\n        return currentPage() < totalPages();\r\n    });\r\n    var isLastPage = ko.computed(function () {\r\n        return currentPage() == totalPages();\r\n    });\r\n    var isFirstPage = ko.computed(function () {\r\n        return currentPage() == 1;\r\n    });\r\n    var hasPrevPage = ko.computed(function () {\r\n        return currentPage() > 1;\r\n    });\r\n    var showPaging = ko.computed(function() {\r\n        return (hasRecords() && totalPages() > 1);\r\n    });\r\n\r\n    // apply pageIndex to filter\r\n    var changePageIndexFilter = function (pageIndex) {\r\n        var pageIndexField = options.pagination.pageIndexField;\r\n\r\n        if (ko.isWriteableObservable(options.Filter[pageIndexField])) {\r\n            options.Filter[pageIndexField](pageIndex);\r\n        } else {\r\n            options.Filter[pageIndexField] = pageIndex;\r\n        }\r\n    };\r\n\r\n    // Subscribe for changing page\r\n    currentPage.subscribe(function (newPageIndex) {\r\n        changePageIndexFilter(newPageIndex);\r\n\r\n        // load data when the page is changed\r\n        loadData();\r\n    });\r\n\r\n    // initialize column model\r\n    var initColumnModel = function () {\r\n        // Define column template (default properties)\r\n        var columnTemplate = {\r\n            name: \"\",\r\n            transform: function (value, rIndex, cIndex, rawRecord, record) {\r\n                return value;\r\n            }\r\n        };\r\n\r\n        // Initialize columns\r\n        for (var i = 0; i < options.columns.length; i++) {\r\n            options.columns[i] = options.columns[i] || {};\r\n\r\n            if (general.isStringType(options.columns[i])) {\r\n                options.columns[i] = {\r\n                    name: options.columns[i]\r\n                };\r\n            }\r\n\r\n            // Merge column definition with column template\r\n            general.extendIfType(options.columns[i], columnTemplate);\r\n        }\r\n    };\r\n\r\n    // Initialize the DataSet\r\n    var init = function () {\r\n        initColumnModel();      // initialize columns\r\n        setPaginationFilter();  // set pagination\r\n    };\r\n\r\n    var updateColumnModel = function (newOptions) {\r\n        options = general.extendType({}, newOptions, defOptions);\r\n        dataRows.KeyProperty(options.idField);\r\n\r\n        init();\r\n    };\r\n\r\n    var initFilter = function () {\r\n        var filter = {};\r\n\r\n        for (var prop in options.Filter) {\r\n            if (options.Filter.hasOwnProperty(prop)) {\r\n                if (ko.isObservable(options.Filter[prop])) {\r\n                    filter[prop] = options.Filter[prop]();\r\n                } else if (ko.isComputed(options.Filter[prop])) {\r\n                    filter[prop] = options.Filter[prop]();\r\n                } else {\r\n                    filter[prop] = options.Filter[prop];\r\n                }\r\n            }\r\n        }\r\n\r\n        return filter;\r\n    };\r\n\r\n    var setPaginationFilter = function () {\r\n        // get value for pageSize\r\n        var pageSizeField = options.pagination.pageSizeField,\r\n            pageSizeValue = 10;\r\n\r\n        if (pageSizeField in options.Filter && general.isNumber(options.Filter[pageSizeField])) {\r\n            // get pageSize value\r\n            pageSizeValue = options.Filter[pageSizeField];\r\n        } else {\r\n            // set default value for pageSize\r\n            options.Filter[pageSizeField] = pageSizeValue;\r\n        }\r\n        // set the value for pageSize\r\n        pageSize(pageSizeValue);\r\n\r\n        // set page index value to 1\r\n        changePageIndexFilter(1);\r\n    };\r\n\r\n    var setFilter = function (newFilter) {\r\n        options.Filter = newFilter || {};\r\n\r\n        // set pagination\r\n        setPaginationFilter();\r\n    };\r\n\r\n    // Get values from observable filter\r\n    var applyFilter = function () {\r\n        isLoadingData(true);\r\n        if (currentPage() != 1) {\r\n            // reset current page to 1\r\n            currentPage(1);\r\n        } else {\r\n            loadData();\r\n        }\r\n    };\r\n\r\n    // Clean up the memory\r\n    var clean = function () {\r\n        dataRows.Clear();\r\n        pages.removeAll();\r\n\r\n        hasRecords(false);\r\n        currentPage(1);\r\n        totalRecords(0);\r\n    };\r\n\r\n    // Add record to rows observable collection\r\n    var addRecord = function (rawRecord, rowIndex) {\r\n        if (!general.isEmptyType(rawRecord)) {\r\n            var record = {};\r\n\r\n            if (general.isArrayType(rawRecord)) {\r\n                // Iterate through column definitions\r\n                options.columns.forEach(function (column, colIndex) {\r\n                    var field = column.name;\r\n                    var value = \"\";\r\n\r\n                    if ('dataIndex' in column) {\r\n                        if (general.isDefinedType(rawRecord[column.dataIndex])) {\r\n                            value = rawRecord[column.dataIndex];\r\n                        }\r\n                    }\r\n\r\n                    if (general.isFunctionType(column.transform)) {\r\n                        value = column.transform(value, rowIndex, colIndex, rawRecord, record);\r\n                    }\r\n\r\n                    // Set value for current field\r\n                    record[field] = value;\r\n                });\r\n            } else if (general.isObjectType(rawRecord)) {\r\n                // TODO\r\n            } else if (general.isStringType(rawRecord)) {\r\n                record.value = rawRecord;\r\n            }\r\n\r\n            // Check for idField, if not then set the record index\r\n            if (!(options.idField in record)) {\r\n                record[options.idField] = rowIndex;\r\n            }\r\n\r\n            // Add record to dataset\r\n            dataRows.Add(record);\r\n        }\r\n    };\r\n\r\n    // Paging\r\n    var buildPages = function () {\r\n        pages.removeAll();\r\n\r\n        var mod = currentPage() % pagesPerPage();\r\n        var start;\r\n        if (mod == 0) {\r\n            start = currentPage() - pagesPerPage();\r\n        } else {\r\n            start = currentPage() - mod;\r\n        }\r\n\r\n        var end = start + pagesPerPage();\r\n        if (end > totalPages()) {\r\n            end = totalPages();\r\n        }\r\n\r\n        for (var i = start; i < end; i++) {\r\n            pages.push((i + 1));\r\n        }\r\n    };\r\n\r\n    var onData = function (responseText) {\r\n        appendRecords = false;\r\n        var response = JSONHelper.STR2JSON(options.DAL.callerName, responseText, options.DAL.errorSeverity);\r\n\r\n        if (response) {\r\n            var result = {};\r\n            result[options.statusField] = \"RequestFailed\";\r\n            result[options.totalField] = 0;\r\n            result[options.dataField] = [];\r\n\r\n            general.extendType(result, response);\r\n\r\n            // Set total records\r\n            totalRecords(result[options.totalField]);\r\n\r\n            if (eOperationStatus[result[options.statusField]] == eOperationStatus.Success) {\r\n                hasRecords(result[options.dataField].length > 0);\r\n\r\n                for (var rIndex = 0, len = result[options.dataField].length; rIndex < len; rIndex++) {\r\n                    addRecord(result[options.dataField][rIndex], rIndex);\r\n                }\r\n\r\n                buildPages(); // build paging\r\n            }\r\n\r\n            if (general.isFunctionType(options.DAL.onLoad)) {\r\n                options.DAL.onLoad(result);\r\n            }\r\n\r\n            isLoadingData(false);\r\n        }\r\n    };\r\n\r\n    // Create a callback function for DAL\r\n    var loadData = function () {\r\n        var filter = initFilter();\r\n        isLoadingData(true);\r\n\r\n        // Check if new records should be appended\r\n        if (appendRecords !== true) {\r\n            dataRows.Clear();   // remove old records\r\n            hasRecords(false);  // set the hasRecords flag\r\n        }\r\n\r\n        // Call the DAL function reference\r\n        if (general.isFunctionType(options.DAL.reference)) {\r\n            return options.DAL.reference.apply(self, [filter, onData]);\r\n        }\r\n    };\r\n\r\n    // Return public members\r\n    return {\r\n        Init: init,\r\n        DataRows: dataRows.Values,\r\n        Load: loadData,\r\n        Clean: clean,\r\n        HasRecords: hasRecords,\r\n        ShowPaging: showPaging,\r\n        ApplyFilter: applyFilter,\r\n        IsLoadingData : isLoadingData,\r\n        SetFilter: setFilter,\r\n        Paging: {\r\n            ShowMore: showMore,\r\n            TotalRecords: totalRecords,\r\n            TotalPages: totalPages,\r\n            PageSize: pageSize,\r\n            Pages: pages,\r\n            CurrentPage: currentPage,\r\n            NextPage: nextPage,\r\n            PrevPage: prevPage,\r\n            FirstPage: firstPage,\r\n            LastPage: lastPage,\r\n            IsFirstPage: isFirstPage,\r\n            HasPrevPage: hasPrevPage,\r\n            HasNextPage: hasNextPage,\r\n            IsLastPage: isLastPage\r\n        },\r\n        UpdateColumnModel: updateColumnModel,\r\n        SetSorting: dataRows.SetSorting,\r\n        SortProperties: dataRows.SortProperties\r\n    };\r\n};\ndefine(\"helpers/observabledataset\", [\"knockout\",\"JSONHelper\",\"helpers/ObservableHashTable\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function () {\r\n\t\t\t\treturn this.ObservableDataSet;\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.ObservableDataSet;\n    };\n}(this)));\n\n",
    "function BalanceViewModel(\r\n\tko,\r\n\tdalAccountingActions,\r\n\tViewModelBase,\r\n\tDealsManager,\r\n\tgeneral,\r\n\tObservableDataSet,\r\n\tJSONHelper,\r\n\tcustomer,\r\n\tviewsManager,\r\n\tsymbolsManager\r\n) {\r\n\tvar self,\r\n\t\tviewInfo = {},\r\n\t\tinheritedInstance = general.clone(ViewModelBase),\r\n\t\thasDataSubscriber;\r\n\r\n\tvar filter = new (function () {\r\n\t\tvar me = this;\r\n\r\n\t\tme.SymbolId = ko.observable();\r\n\t\tme.OriginalActionCategory = ko.observable(\"All\");\r\n\r\n\t\tme.ActionCategory = ko.computed(function () {\r\n\t\t\tvar actionType = me.OriginalActionCategory() || \"All\";\r\n\r\n\t\t\tswitch (actionType.toLowerCase()) {\r\n\t\t\t\tcase \"all\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.All;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"deposits\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.Deposits;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"withdrawals\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.Withdrawals;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"pl\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.DealPL;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"overnightfinancing\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.OvernightFinancing;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"contractrollover\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.ContractRollover;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"dividend\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.Dividend;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"general\":\r\n\t\t\t\t\tactionType = eAccountingActionsCategory.General;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn actionType;\r\n\t\t});\r\n\r\n\t\tme.From = ko.observable(new Date().AddWeeks(-1).ExtractDate());\r\n\t\tme.To = ko.observable(new Date().ExtractDate());\r\n\t\tme.Position = ko.observable(\"\");\r\n\t\tme.Page = ko.observable(1);\r\n\t\tme.PageSize = 20;\r\n\r\n\t\tme.Currencies = ko.observableArray();\r\n\t})();\r\n\r\n\tvar onLoad = function (data) {\r\n\t\tviewInfo.showBalanceColumn(filter.SymbolId() !== 0);\r\n\t};\r\n\r\n\tvar dsColumns = {\r\n\t\tidField: \"actionNumber\",\r\n\t\tcolumns: [\r\n\t\t\t{\r\n\t\t\t\tname: \"rowNumber\",\r\n\t\t\t\ttransform: function (value, rowIndex) {\r\n\t\t\t\t\treturn rowIndex;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"actionNumber\",\r\n\t\t\t\tdataIndex: eAccountingAction.actionID,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"date\",\r\n\t\t\t\tdataIndex: eAccountingAction.date,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"credit\",\r\n\t\t\t\tdataIndex: eAccountingAction.credit,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"debit\",\r\n\t\t\t\tdataIndex: eAccountingAction.debit,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"symbolName\",\r\n\t\t\t\ttransform: function (value, rowIndex, cIndex, rawRecord) {\r\n\t\t\t\t\treturn symbolsManager.GetTranslatedSymbolById(rawRecord[eAccountingAction.symbolID]);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"creditNoComma\",\r\n\t\t\t\ttransform: function (value, rowIndex, columnIndex, rawRecord, record) {\r\n\t\t\t\t\treturn record.credit.sign();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"debitNoComma\",\r\n\t\t\t\ttransform: function (value, rowIndex, columnIndex, rawRecord, record) {\r\n\t\t\t\t\treturn record.debit.sign();\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"debitCredit\",\r\n\t\t\t\ttransform: function (value, rowIndex, columnIndex, rawRecord, record) {\r\n\t\t\t\t\treturn record.debit.cleanComma() > 0\r\n\t\t\t\t\t\t? \"-\" + record.debit.cleanComma()\r\n\t\t\t\t\t\t: record.credit.cleanComma() > 0\r\n\t\t\t\t\t\t? record.credit.cleanComma()\r\n\t\t\t\t\t\t: \"0.00\";\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"type\",\r\n\t\t\t\ttransform: function (value, rowIndex, columnIndex, rawRecord) {\r\n\t\t\t\t\treturn Dictionary.GetItem(\"acctype\" + rawRecord[eAccountingAction.actionTypeID]);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"isEditable\",\r\n\t\t\t\ttransform: function (value, rowIndex, columnIndex, rawRecord) {\r\n\t\t\t\t\tvar isOpenPosition = false;\r\n\t\t\t\t\tvar positionNumber = rawRecord[eAccountingAction.posNum];\r\n\r\n\t\t\t\t\tDealsManager.Deals.ForEach(function iterator(orderId, deal) {\r\n\t\t\t\t\t\tif (deal.positionNumber == positionNumber) {\r\n\t\t\t\t\t\t\tisOpenPosition = true;\r\n\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn !isOpenPosition;\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"balance\",\r\n\t\t\t\tdataIndex: eAccountingAction.balance,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"comment\",\r\n\t\t\t\tdataIndex: eAccountingAction.comment,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"positionNumber\",\r\n\t\t\t\tdataIndex: eAccountingAction.posNum,\r\n\t\t\t},\r\n\t\t],\r\n\t\tpageSizes: 20,\r\n\t\tstatusField: \"status\",\r\n\t\ttotalField: \"totalItems\",\r\n\t\tdataField: \"actions\",\r\n\t\tpagination: {\r\n\t\t\tpagesPerPage: 5,\r\n\t\t\tpageIndexField: \"Page\",\r\n\t\t\tpageSizeField: \"PageSize\",\r\n\t\t},\r\n\t\tFilter: filter,\r\n\t\tDAL: {\r\n\t\t\treference: dalAccountingActions.LoadAccountingActions,\r\n\t\t\tcallerName: \"StatementControl/onLoadComplete\",\r\n\t\t\terrorSeverity: eErrorSeverity.medium,\r\n\t\t\tonLoad: onLoad,\r\n\t\t},\r\n\t};\r\n\r\n\tvar dataSet = new ObservableDataSet(ko, general, dsColumns);\r\n\r\n\tvar init = function (customSettings) {\r\n\t\tself = this;\r\n\t\tinheritedInstance.setSettings(self, customSettings);\r\n\r\n\t\tsetDefaultObservables();\r\n\t\tsetExtenders();\r\n\t\tregisterObservableStartUpEvent();\r\n\r\n\t\tsetFilterDefaults();\r\n\t\tdataSet.Init();\r\n\t};\r\n\r\n\tvar setExtenders = function () {\r\n\t\tfilter.Position = filter.Position.extend({\r\n\t\t\ttoNumericLength: {\r\n\t\t\t\tranges: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfrom: 0,\r\n\t\t\t\t\t\tto: Number.MAX_SAFE_INTEGER,\r\n\t\t\t\t\t\tdecimalDigits: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t});\r\n\t};\r\n\r\n\tvar setDefaultObservables = function () {\r\n\t\tviewInfo.showBalanceColumn = ko.observable();\r\n\t};\r\n\r\n\tvar registerObservableStartUpEvent = function () {\r\n\t\tviewsManager.GetActiveFormViewProperties(eViewTypes.vBalance).state.subscribe(function (state) {\r\n\t\t\tswitch (state) {\r\n\t\t\t\tcase eViewState.Start:\r\n\t\t\t\t\tstart();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase eViewState.Stop:\r\n\t\t\t\t\tstop();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase eViewState.Refresh:\r\n\t\t\t\t\tdataSet.Load();\r\n\t\t\t\t\tviewsManager.GetActiveFormViewProperties(eViewTypes.vBalance).state(eViewState.Initial);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tvar start = function () {\r\n\t\thasDataSubscriber = dataSet.HasRecords.subscribe(function (hasData) {\r\n\t\t\tko.postbox.publish(\"printableDataAvailable\", {\r\n\t\t\t\tdataAvailable: hasData,\r\n\t\t\t\tviewType: viewsManager.ActiveFormType(),\r\n\t\t\t\tviewModel: \"BalanceViewModel\",\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tdalAccountingActions.GetAccountSymbols(onLoadCCYComplete);\r\n\t};\r\n\r\n\tvar stop = function () {\r\n\t\tdataSet.Clean();\r\n\t\tif (hasDataSubscriber) {\r\n\t\t\thasDataSubscriber.dispose();\r\n\t\t\thasDataSubscriber = null;\r\n\t\t}\r\n\t\tsetFilterDefaults();\r\n\t};\r\n\r\n\tvar setFilterDefaults = function () {\r\n\t\tfilter.SymbolId(customer.prop.baseCcyId());\r\n\t\tfilter.OriginalActionCategory(\"All\");\r\n\t\tfilter.From(new Date().AddWeeks(-1).ExtractDate());\r\n\t\tfilter.To(new Date().ExtractDate());\r\n\t\tfilter.Position(\"\");\r\n\r\n\t\tif (inheritedInstance.getSettings(self).pageSize) {\r\n\t\t\tfilter.PageSize = inheritedInstance.getSettings(self).pageSize;\r\n\t\t}\r\n\t};\r\n\r\n\tvar onLoadCCYComplete = function (responseText) {\r\n\t\tvar userSymbols = JSONHelper.STR2JSON(\"StatementControl/onLoadCCYComplete\", responseText, eErrorSeverity.low);\r\n\r\n\t\tif (userSymbols) {\r\n\t\t\tvar options = [];\r\n\t\t\toptions.push({\r\n\t\t\t\tname: Dictionary.GetItem(\"All\", \"contentdata\", \" \"),\r\n\t\t\t\tvalue: eAccountingActionsCategory.All,\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0, ii = userSymbols.length; i < ii; i++) {\r\n\t\t\t\toptions.push({ name: $symbolsManager.GetTranslatedSymbolById(userSymbols[i]), value: userSymbols[i] });\r\n\t\t\t}\r\n\r\n\t\t\tfilter.Currencies(options);\r\n\t\t}\r\n\r\n\t\tsetFilterDefaults();\r\n\t\tdataSet.ApplyFilter();\r\n\t};\r\n\r\n\tvar enableApplyButton = ko.computed(function () {\r\n\t\treturn !dataSet.IsLoadingData();\r\n\t}, self);\r\n\r\n\tvar applyFilter = function () {\r\n\t\tif (enableApplyButton()) dataSet.ApplyFilter();\r\n\t};\r\n\r\n\t//----------------------------------------------------------------\r\n\treturn {\r\n\t\tInit: init,\r\n\t\tViewInfo: viewInfo,\r\n\t\tBalanceInfo: dataSet.DataRows,\r\n\t\tGetNextBalance: dataSet.Paging.ShowMore(),\r\n\t\tVisibleShowMore: dataSet.Paging.HasNextPage,\r\n\t\tDataSet: dataSet,\r\n\t\tFilter: filter,\r\n\t\tEnableApplyButton: enableApplyButton,\r\n\t\tApplyFilter: applyFilter,\r\n\t\tHasRecords: dataSet.HasRecords,\r\n\t\tDsColumns: dsColumns,\r\n\t};\r\n}\r\n\r\ndefine('viewmodels/BalanceViewModel',[\r\n\t\"knockout\",\r\n\t\"dataaccess/dalAccountingActions\",\r\n\t\"viewmodels/ViewModelBase\",\r\n\t\"cachemanagers/dealsmanager\",\r\n\t\"handlers/general\",\r\n\t\"helpers/observabledataset\",\r\n\t\"JSONHelper\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"initdatamanagers/SymbolsManager\",\r\n\t\"managers/viewsmanager\",\r\n\t\"customEnums/ViewsEnums\",\r\n], function (\r\n\tko,\r\n\tdalAccountingActions,\r\n\tViewModelBase,\r\n\tDealsManager,\r\n\tgeneral,\r\n\tObservableDataSet,\r\n\tJSONHelper,\r\n\tcustomer,\r\n\tsymbolsManager,\r\n\tviewsManager\r\n) {\r\n\treturn BalanceViewModel(\r\n\t\tko,\r\n\t\tdalAccountingActions,\r\n\t\tViewModelBase,\r\n\t\tDealsManager,\r\n\t\tgeneral,\r\n\t\tObservableDataSet,\r\n\t\tJSONHelper,\r\n\t\tcustomer,\r\n\t\tviewsManager,\r\n\t\tsymbolsManager\r\n\t);\r\n});\r\n\n",
    "define(\r\n    'viewmodels/NetExposureViewModel',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'handlers/general',\r\n        'helpers/ObservableHashTable',\r\n        'cachemanagers/ClientStateHolderManager',\r\n        'cachemanagers/NetExposureManager',\r\n        'initdatamanagers/SymbolsManager'\r\n    ],\r\n    function NetExposureViewModelDef(require) {\r\n        var ko = require('knockout'),\r\n            general = require('handlers/general'),\r\n            observableHashTable = require('helpers/ObservableHashTable'),\r\n            csHolderManager = require('cachemanagers/ClientStateHolderManager'),\r\n            netExposureManager = require('cachemanagers/NetExposureManager'),\r\n            symbolsManager = require('initdatamanagers/SymbolsManager');\r\n\r\n        var NetExposureViewModel = function NetExposureViewModelClass() {\r\n            var observableNetExposuresObject = {},\r\n                observableNetExposuresCollection = new observableHashTable(ko, general, 'symbolId');\r\n\r\n            function init() {\r\n                setObservableNetExposuresObject();\r\n                registerToDispatcher();\r\n            }\r\n\r\n            function registerToDispatcher() {\r\n                netExposureManager.OnChange.Add(onNetExposureChange);\r\n                csHolderManager.OnChange.Add(onCsHolderClientStateChange);\r\n            }\r\n\r\n            function toObservable(exposure) {\r\n                return {\r\n                    accountSymbolAmount: ko.observable(exposure.accountSymbolAmount),\r\n                    status: exposure.status,\r\n                    amount: ko.observable(exposure.amount),\r\n                    symbolId: ko.observable(exposure.symbolId),\r\n                    symbolName: ko.observable(symbolsManager.GetTranslatedSymbolById(exposure.symbolId))\r\n                };\r\n            }\r\n\r\n            function onNetExposureChange(exposures) {\r\n                for (var i = 0; i < exposures.length; i++) {\r\n                    var exposure = exposures[i];\r\n\r\n                    if (exposure.status === eStatus.Removed) {\r\n                        observableNetExposuresCollection.Remove(exposure.symbolId);\r\n                        continue;\r\n                    }\r\n\r\n                    var item = observableNetExposuresCollection.Get(exposure.symbolId);\r\n                    if (!item) {\r\n                        observableNetExposuresCollection.Add(toObservable(exposure));\r\n                    }\r\n                    else {\r\n                        var delta = {\r\n                            accountSymbolAmount: exposure.accountSymbolAmount,\r\n                            amount: exposure.amount\r\n                        };\r\n\r\n                        observableNetExposuresCollection.Update(exposure.symbolId, delta);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function onCsHolderClientStateChange() {\r\n                var csHolder = csHolderManager.CSHolder;\r\n\r\n                observableNetExposuresObject.netExposure(general.toNumeric(csHolder.netExposure));\r\n            }\r\n\r\n            function setObservableNetExposuresObject() {\r\n                var csHolder = csHolderManager.CSHolder;\r\n\r\n                observableNetExposuresObject.netExposure = ko.observable(general.toNumeric(csHolder.netExposure));\r\n                observableNetExposuresObject.displayedInAccountCurrency = ko.observable(false);\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                NetExposureCollection: observableNetExposuresCollection.Values,\r\n                NetExposureInfo: observableNetExposuresObject\r\n            };\r\n        };\r\n\r\n        return new NetExposureViewModel();\r\n    }\r\n);\n",
    "/*eslint no-unused-vars: 0*/\r\nvar AccountMarketViewModel = function (ko) {\r\n    var quotesIsAdvanced = ko.observable(false),\r\n        accountSummaryIsAdvanced = ko.observable(false),\r\n        isCollapsed = ko.observable(false),\r\n        useTransitions = ko.observable(false);\r\n\r\n    function init() {\r\n        registerObservableStartUpEvent();\r\n    }\r\n\r\n    function accSummarySwitchView(newValue) {\r\n        accountSummaryIsAdvanced(newValue);\r\n    }\r\n\r\n    function registerObservableStartUpEvent() {\r\n        // set initial value\r\n        accSummarySwitchView(\r\n            $customerProfileManager.ProfileCustomer().advancedWalletView === 1\r\n        );\r\n\r\n        // subscribe to changes\r\n        $customerProfileManager.ProfileCustomer.subscribe(function (pc) {\r\n            var isAdvanced = pc.advancedWalletView === 1;\r\n            accSummarySwitchView(isAdvanced);\r\n        });\r\n    }\r\n\r\n    function collapsedToggle() {\r\n        isCollapsed(!isCollapsed());\r\n    }\r\n\r\n    return {\r\n        Init: init,\r\n        QuotesIsAdvanced: quotesIsAdvanced,\r\n        AccountSummaryIsAdvanced: accountSummaryIsAdvanced,\r\n        IsCollapsed: isCollapsed,\r\n        UseTransitions: useTransitions,\r\n        CollapsedToggle: collapsedToggle,\r\n    };\r\n};\r\n\ndefine(\"viewmodels/AccountMarketViewModel\", [\"knockout\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (ko) {\r\n\t\t\t\treturn this.AccountMarketViewModel(ko);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.AccountMarketViewModel;\n    };\n}(this)));\n\n",
    "/* eslint no-extend-native: 0 */\r\ndefine(\"generalmanagers/ErrorManager\", [\r\n\t\"require\",\r\n\t\"handlers/Logger\",\r\n\t\"handlers/general\",\r\n\t\"devicemanagers/StatesManager\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"modules/permissionsmodule\",\r\n\t\"global/UrlResolver\",\r\n\t\"handlers/RequireError\",\r\n\t\"StateObject!ViewsManager\",\r\n], function (require) {\r\n\tvar Logger = require(\"handlers/Logger\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tStatesManager = require(\"devicemanagers/StatesManager\"),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tpermissionsModule = require(\"modules/permissionsmodule\"),\r\n\t\tUrlResolver = require(\"global/UrlResolver\"),\r\n\t\tRequireError = require(\"handlers/RequireError\"),\r\n\t\tStateObject = require(\"StateObject!ViewsManager\");\r\n\r\n\tfunction ErrorManager() {\r\n\t\t// Extend Error prototype\r\n\t\tError.prototype.getFullExceptionMessage = function () {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar messageObj = {\r\n\t\t\t\tMessage: self.message,\r\n\t\t\t\tStackTrace: (self.stack || \"\")\r\n\t\t\t\t\t.replace(self.message, \"\")\r\n\t\t\t\t\t.replace(/\\n|\\r\\n/g, \" \")\r\n\t\t\t\t\t.replace(/\\s\\s+/g, \" \"),\r\n\t\t\t\tForm: \"\",\r\n\t\t\t\tViews: [],\r\n\t\t\t\tAccountNumber: Customer.prop.accountNumber,\r\n\t\t\t\tUserAgent: window.navigator.userAgent,\r\n\t\t\t};\r\n\r\n\t\t\tif (window.trackingData) {\r\n\t\t\t\tvar errorTrackingData = window.trackingData.getErrorTrackingData();\r\n\r\n\t\t\t\tfor (var trakingProperty in errorTrackingData) {\r\n\t\t\t\t\tif (errorTrackingData.hasOwnProperty(trakingProperty)) {\r\n\t\t\t\t\t\tmessageObj[trakingProperty] = errorTrackingData[trakingProperty];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttry {\r\n\t\t\t\tmessageObj.Form = general.urlDecode(window.location.search)[\"view\"] || \"\";\r\n\r\n\t\t\t\tif (StateObject) {\r\n\t\t\t\t\tmessageObj.Views = StateObject.get(\"ActiveViews\");\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\t// empty\r\n\t\t\t}\r\n\r\n\t\t\treturn JSON.stringify(messageObj);\r\n\t\t};\r\n\r\n\t\tfunction redirectTologin() {\r\n\t\t\twindow.location.replace(\r\n\t\t\t\tUrlResolver.combine(\r\n\t\t\t\t\tUrlResolver.getApplicationRelativePath(),\r\n\t\t\t\t\t\"account/login?reason=\" + eLoginLogoutReason.errorManager_httpError\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tfunction handleHttpError(error) {\r\n\t\t\tif (error && (error.httpStatus === 403 || error.httpStatus === 401 || error.httpStatus === 420)) {\r\n\t\t\t\tif (permissionsModule.IsRestrictedUser()) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tredirectTologin();\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction onException(msg, url, lineNumber, columnNumber, error) {\r\n\t\t\tif (general.isNullOrUndefined(error)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif (handleHttpError(error)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tif (error && typeof error.handler === \"function\") {\r\n\t\t\t\t// This is a custom error\r\n\t\t\t\terror.handler();\r\n\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\thandleUnknownException(msg, error);\r\n\r\n\t\t\tthrow error;\r\n\t\t}\r\n\r\n\t\tfunction handleUnknownException(msg, error) {\r\n\t\t\tif (typeof systemInfo !== \"undefined\" && typeof Logger !== \"undefined\") {\r\n\t\t\t\tvar blackList = systemInfo.clientApplicationParams\r\n\t\t\t\t\t? systemInfo.clientApplicationParams[eClientParams.JsErrorBlacklistRegex] || \"\"\r\n\t\t\t\t\t: \"\";\r\n\r\n\t\t\t\tvar blacklistReObj = new RegExp(blackList, \"i\");\r\n\r\n\t\t\t\tvar shouldIgnoreMessageLog =\r\n\t\t\t\t\tblackList.length > 0 &&\r\n\t\t\t\t\t((msg.length > 0 && blacklistReObj.test(msg)) ||\r\n\t\t\t\t\t\t(error && error.message.length > 0 && blacklistReObj.test(error.message)));\r\n\r\n\t\t\t\t// log the UnknownError if the error is not in the blacklist\r\n\t\t\t\tif (!shouldIgnoreMessageLog) {\r\n\t\t\t\t\tvar loggedMessage = (error && error.getFullExceptionMessage()) || msg;\r\n\t\t\t\t\tLogger.log(\"UnknownError\", loggedMessage);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onError(functionName, strError, severityLevel) {\r\n\t\t\tseverityLevel = severityLevel || eErrorSeverity.low;\r\n\r\n\t\t\t/*if (strError === \"http403\") {\r\n\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\tStatesManager.StatePropertiesEnum.Forbidden,\r\n\t\t\t\t\teErrorSeverity.medium,\r\n\t\t\t\t\tStatesManager.StatePropertiesEnum[\"Forbidden\"]\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tswitch (severityLevel) {\r\n\t\t\t\t\tcase eErrorSeverity.critical:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.critical,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.high:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.high,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.medium:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.medium,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.low:\r\n\t\t\t\t\t\tStatesManager.PushState(\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum.ServerErrorStatus,\r\n\t\t\t\t\t\t\teErrorSeverity.low,\r\n\t\t\t\t\t\t\tStatesManager.StatePropertiesEnum[\"ServerErrorStatus\"]\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar error = {\r\n\t\t\t\t\tMessage: strError,\r\n\t\t\t\t\tAccountNumber: Customer.prop.accountNumber,\r\n\t\t\t\t\tUserAgent: window.navigator.userAgent,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tLogger.error(functionName, JSON.stringify(error), general.emptyFn, severityLevel);\r\n\t\t\t}*/\r\n\t\t}\r\n\r\n\t\tfunction onWarning(source, warningMessage) {\r\n\t\t\tvar warning = {\r\n\t\t\t\tMessage: warningMessage,\r\n\t\t\t\tAccountNumber: Customer.prop.accountNumber,\r\n\t\t\t\tUserAgent: window.navigator.userAgent,\r\n\t\t\t};\r\n\r\n\t\t\tLogger.warn(source, JSON.stringify(warning));\r\n\t\t}\r\n\r\n\t\tfunction getFullExceptionMessage(ex) {\r\n\t\t\treturn ex.getFullExceptionMessage();\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t * Utility function to create custom Error types\r\n\t\t *\r\n\t\t * To create a custom error type, derived from Error JS object\r\n\t\t *\r\n\t\t * @param {string} name an unique name for the newly custom error type\r\n\t\t * @param {function} handler a function used to handle the created type of error\r\n\t\t *\r\n\t\t * var myCustomError = ErrorManager.createErrorType(\"CustomError\", function() {\r\n\t\t *     // this keyword refers to the current error instance\r\n\t\t *     console.log(this.message);\r\n\t\t * });\r\n\t\t *\r\n\t\t * throw new myCustomError(\"This is a custom error\");\r\n\t\t *\r\n\t\t */\r\n\t\tfunction createErrorType(name, handler) {\r\n\t\t\tfunction BaseError(message) {\r\n\t\t\t\tthis.name = name;\r\n\t\t\t\tthis.message = message;\r\n\r\n\t\t\t\tif (!Error.captureStackTrace) {\r\n\t\t\t\t\tthis.stack = new Error().stack;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tError.captureStackTrace(this, this.constructor);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tBaseError.prototype = Object.create(Error.prototype);\r\n\t\t\tBaseError.prototype.name = name;\r\n\t\t\tBaseError.prototype.constructor = BaseError;\r\n\t\t\tBaseError.prototype.handler = typeof handler === \"function\" ? handler : function () {};\r\n\r\n\t\t\treturn BaseError;\r\n\t\t}\r\n\r\n\t\tfunction onRequireError(error) {\r\n\t\t\tif (error.requireType === \"mismatch\") {\r\n\t\t\t\tthrow new RequireError(\"Mismatched anonymous define() module\", error);\r\n\t\t\t}\r\n\r\n\t\t\tthrow error;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tgetFullExceptionMessage: getFullExceptionMessage,\r\n\t\t\tonRequireError: onRequireError,\r\n\t\t\tonError: onError,\r\n\t\t\tonWarning: onWarning,\r\n\t\t\tonException: onException,\r\n\t\t\tcreateErrorType: createErrorType,\r\n\t\t};\r\n\t}\r\n\r\n\tvar module = (window.ErrorManager = new ErrorManager());\r\n\r\n\treturn module;\r\n});\r\n\ndefine(\"generalmanagers/errormanager\", function(){});\n\n",
    "var dalActivityLog = function (ErrorManager, general) {\r\n\t//---------------------------------------------------------\r\n\t// loadActivityLog\r\n\t//---------------------------------------------------------\r\n\r\n\t// var loadActivityLog = function (FilterTypes, From, To, Page, PageSize, OnLoadComplete) {\r\n\tvar loadActivityLog = function (params, onLoadComplete) {\r\n\t\tvar ajaxer = new TAjaxer();\r\n\r\n\t\tparams = params || {};\r\n\r\n\t\tajaxer.post(\r\n\t\t\t\"TDALHistoricalData/loadActivityLog\",\r\n\t\t\t\"api/activitylog/GetData\",\r\n\t\t\tgeneral.urlEncode(params),\r\n\t\t\tonLoadComplete,\r\n\t\t\tfunction () {\r\n\t\t\t\tErrorManager.onError(\"TDALHistoricalData/loadActivityLog\", \"\", eErrorSeverity.medium);\r\n\t\t\t},\r\n\t\t\t0\r\n\t\t);\r\n\t};\r\n\r\n\treturn {\r\n\t\tLoadActivityLog: loadActivityLog,\r\n\t};\r\n};\r\n\r\ndefine('dataaccess/dalActivityLog',[\"generalmanagers/errormanager\", \"handlers/general\"], function (Errormanager, general) {\r\n\treturn dalActivityLog(Errormanager, general);\r\n});\r\n\n",
    "/*globals clone:false, $viewModelsManager:false, eViewState: false, general.str2Date:false, eViewTypes:false, eActivityLogFilterType:false, eActivityLog:false, dalActivityLog:false, eErrorSeverity:false, ObservableDataSet:faLse, ActivityLogModel: true*/\r\nvar ActivityLogViewModel = function (ko, general,dalActivityLog, systemInfo) {\r\n    var self = this;\r\n    var dateFrom = ko.observable(\"\").extend({ dirty: false });\r\n    var dateTo = ko.observable(\"\").extend({ dirty: false });\r\n    var recordsRendered = ko.observable(false).extend({ deferred: true });\r\n    var filterBy = ko.observable(\"\");\r\n    var hasDataSubscriber;\r\n    var isLoadingSubscriber;\r\n\r\n    var filterTypes = ko.computed(function () {\r\n        var selectedValue = filterBy();\r\n        var types = [];\r\n\r\n        if (selectedValue in eActivityLogFilterType) {\r\n            types.push(eActivityLogFilterType[selectedValue]);\r\n        } else {\r\n            for (var name in eActivityLogFilterType) {\r\n                types.push(eActivityLogFilterType[name]);\r\n            }\r\n        }\r\n\r\n        return \"[\" + types.join(\",\") + \"]\";\r\n    }, self);\r\n\r\n    var dsColumns = {\r\n        columns: [{\r\n            name: \"DateTime\",\r\n            dataIndex: eActivityLog.DateTime\r\n        }, {\r\n            name: \"Type\",\r\n            dataIndex: eActivityLog.MessageType\r\n        }, {\r\n            name: \"Source\",\r\n            dataIndex: eActivityLog.SourceType\r\n        }, {\r\n            name: \"Message\",\r\n            dataIndex: eActivityLog.Message\r\n        }],\r\n        pageSizes: 5,\r\n        statusField: \"status\",\r\n        totalField: \"totalItems\",\r\n        dataField: \"activityLogs\",\r\n        pagination: {\r\n            pagesPerPage: 5,\r\n            pageIndexField: \"page\",\r\n            pageSizeField: \"pagesize\"\r\n        },\r\n        Filter: {\r\n            page: 1,\r\n            pagesize: 20,\r\n            from: dateFrom,\r\n            to: dateTo,\r\n            filterTypes: filterTypes\r\n        },\r\n        DAL: {\r\n            reference: dalActivityLog.LoadActivityLog,\r\n            callerName: \"ActivityLogControl/onLoadComplete\",\r\n            errorSeverity: eErrorSeverity.medium\r\n        }\r\n    };\r\n\r\n    var dataSet = new ObservableDataSet(ko, general, dsColumns);\r\n\r\n    var registerObservableStartUpEvent = function () {\r\n        $viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vActivityLog).state.subscribe(function (state) {\r\n            switch (state) {\r\n                case eViewState.Start:\r\n                    start();\r\n                    break;\r\n                case eViewState.Stop:\r\n                    stop();\r\n                    break;\r\n                case eViewState.Refresh:\r\n                    dataSet.Load();\r\n                    $viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vActivityLog).state(eViewState.Initial);\r\n                    break;\r\n            }\r\n        });\r\n    };\r\n\r\n    var init = function () {\r\n        registerObservableStartUpEvent();\r\n        dataSet.Init();\r\n        setValidation();\r\n    };\r\n\r\n    var start = function () {\r\n        hasDataSubscriber = dataSet.HasRecords.subscribe(function (hasData) {\r\n            if (!hasData) {\r\n                recordsRendered(false);\r\n            }\r\n\r\n            ko.postbox.publish(\"printableDataAvailable\", {\r\n                dataAvailable: hasData,\r\n                viewType: $viewModelsManager.VManager.ActiveFormType(),\r\n                viewModel: 'ActivityLogModel'\r\n            });\r\n        });\r\n\r\n        isLoadingSubscriber = dataSet.IsLoadingData.subscribe(function (isLoading) {\r\n            if (isLoading) {\r\n                recordsRendered(false);\r\n            }\r\n        });\r\n\r\n        setFilterToDefault();\r\n        dataSet.ApplyFilter();\r\n    };\r\n\r\n    var setFilterToDefault = function () {\r\n        var defaultDaysBack = systemInfo.get('config').ActivityLogFromDateDefaultRange;\r\n        dateFrom(new Date().AddDays(defaultDaysBack).ExtractDateUTC());\r\n        dateTo(new Date().ExtractDateUTC());\r\n        filterBy(\"All\");\r\n    };\r\n\r\n    var setValidation = function () {\r\n        dateFrom.extend({ validation: { validator: validateFromDate } });\r\n        dateTo.extend({ validation: { validator: validateToDate } });\r\n    };\r\n\r\n    var validateFromDate = function (value) {\r\n        return general.str2Date(value) <= general.str2Date(dateTo());\r\n    };\r\n\r\n    var validateToDate = function (value) {\r\n        return general.str2Date(dateFrom()) <= general.str2Date(value);\r\n    };\r\n\r\n    var enableApplyButton = ko.computed(function () { return !dataSet.IsLoadingData(); }, self);\r\n\r\n    var applyFilter = function () {\r\n        if (dataSet.IsLoadingData()) {\r\n            return;\r\n        }\r\n\r\n        dataSet.ApplyFilter();\r\n    };\r\n\r\n\r\n    var stop = function () {\r\n        if (hasDataSubscriber) {\r\n            hasDataSubscriber.dispose();\r\n            hasDataSubscriber = null;\r\n        }\r\n        if (isLoadingSubscriber) {\r\n            isLoadingSubscriber.dispose();\r\n            isLoadingSubscriber = null;\r\n        }\r\n\r\n        dataSet.Clean();\r\n    };\r\n\r\n    return {\r\n        Init: init,\r\n        ActivityLogs: dataSet.DataRows,\r\n        RecordsRendered: recordsRendered,\r\n        HasRecords: dataSet.HasRecords,\r\n        DataSet: dataSet,\r\n        EnableApplyButton: enableApplyButton,\r\n        Filter: {\r\n            From: dateFrom,\r\n            To: dateTo,\r\n            Type: filterBy,\r\n            Apply: applyFilter\r\n        },\r\n        DsColumns: dsColumns\r\n    };\r\n};\r\n\ndefine(\"viewmodels/ActivityLogViewModel\", [\"helpers/ObservableCustomExtender\",\"handlers/general\",\"dataaccess/dalActivityLog\",\"modules/systeminfo\",\"helpers/KOExtensions\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (ko, general, dag, si) {\r\n\t\t\t\treturn this.ActivityLogViewModel(ko, general, dag, si);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.ActivityLogViewModel;\n    };\n}(this)));\n\n",
    "define(\r\n    'viewmodels/MarginStatusViewModel',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'helpers/ObservableHashTable',\r\n        'handlers/general',\r\n        'cachemanagers/ClientStateHolderManager',\r\n        'cachemanagers/InstrumentVolumeManager',\r\n        'cachemanagers/PortfolioStaticManager'\r\n    ],\r\n    function MarginStatusViewModelDef(require) {\r\n        var ko = require('knockout'),\r\n            observableHashTable = require('helpers/ObservableHashTable'),\r\n            general = require('handlers/general'),\r\n            csHolderManager = require('cachemanagers/ClientStateHolderManager'),\r\n            instrumentVolumeManager = require('cachemanagers/InstrumentVolumeManager'),\r\n            portfolioManager = require('cachemanagers/PortfolioStaticManager');\r\n\r\n        var MarginStatusViewModel = function MarginStatusViewModelClass() {\r\n            var instrumentVolumeCollection = new observableHashTable(ko, general, \"InstrumentID\"),\r\n                walletInfo = {},\r\n                totals = {};\r\n\r\n            function init() {\r\n                setObservableObject();\r\n                registerObservableStartUpEvent();\r\n            }\r\n\r\n            function setObservableObject() {\r\n                // WalletInfo\r\n                walletInfo.CustomerCcy = $customer.prop.defaultCcy();\r\n\r\n                walletInfo.Equity = ko.observable(0);\r\n                walletInfo.TotalEquity = ko.observable(0);\r\n\r\n                walletInfo.Securities = ko.observable(0);\r\n                walletInfo.TradingBonus = ko.observable(0);\r\n\r\n                // Totals\r\n                var totalUsedMargin = ko.observable(0),\r\n                    totalMarginUtilization = ko.observable(0);\r\n\r\n                totals.TotalUsedMargin = ko.computed({\r\n                    read: function () {\r\n                        var value = 0;\r\n\r\n                        ko.utils.arrayForEach(instrumentVolumeCollection.Values(), function processItem(item) {\r\n                            var tmp = general.toNumeric(item.UsedMargin());\r\n\r\n                            if (tmp) {\r\n                                value += tmp;\r\n                            }\r\n                        });\r\n\r\n                        return value;\r\n                    },\r\n                    write: function (value) {\r\n                        totalUsedMargin(value);\r\n                    }\r\n                });\r\n\r\n                totals.TotalMarginUtilization = ko.computed({\r\n                    read: function () {\r\n                        var value = 0;\r\n\r\n                        ko.utils.arrayForEach(instrumentVolumeCollection.Values(), function processItem(item) {\r\n                            var tmp = general.toNumeric(item.MarginUtilizationPercentage());\r\n                            if (tmp) {\r\n                                value += tmp;\r\n                            }\r\n                        });\r\n\r\n                        return value;\r\n                    },\r\n                    write: function (value) {\r\n                        totalMarginUtilization(value);\r\n                    }\r\n                });\r\n            }\r\n\r\n            function setInitialData() {\r\n                instrumentVolumeManager.InstrumentVolumes.ForEach(function processInstrumentVolume(key, element) {\r\n                    instrumentVolumeCollection.Add(toObservable(element));\r\n                });\r\n\r\n                totals.TotalUsedMargin(0);\r\n                totals.TotalMarginUtilization(0);\r\n\r\n                onClientStateChange();\r\n                onPortfolioStateChange();\r\n            }\r\n\r\n            function registerToDispatcher() {\r\n                instrumentVolumeManager.OnChange.Add(onInstrumentVolumeChange);\r\n                csHolderManager.OnChange.Add(onClientStateChange);\r\n                portfolioManager.OnChange.Add(onPortfolioStateChange);\r\n            }\r\n\r\n            function unRegisterFromDispatcher() {\r\n                instrumentVolumeManager.OnChange.Remove(onInstrumentVolumeChange);\r\n                csHolderManager.OnChange.Remove(onClientStateChange);\r\n                portfolioManager.OnChange.Remove(onPortfolioStateChange);\r\n            }\r\n\r\n            function start() {\r\n                setInitialData();\r\n\r\n                registerToDispatcher();\r\n            }\r\n\r\n            function stop() {\r\n                unRegisterFromDispatcher();\r\n                instrumentVolumeCollection.Clear();\r\n            }\r\n\r\n            function toObservable(item) {\r\n                var obj = {};\r\n\r\n                for (var prop in item) {\r\n                    obj[prop] = ko.observable(item[prop]);\r\n                }\r\n\r\n                return obj;\r\n            }\r\n\r\n            function onInstrumentVolumeChange(items) {\r\n                for (var i = 0; i < items.removedItems.length; i++) {\r\n                    var rid = items.removedItems[i];\r\n\r\n                    instrumentVolumeCollection.Remove(rid);\r\n                }\r\n\r\n                for (var j = 0, jj = items.editedItems.length; j < jj; j++) {\r\n                    var eid = items.editedItems[j];\r\n\r\n                    instrumentVolumeCollection.Update(eid, instrumentVolumeManager.InstrumentVolumes.GetItem(eid));\r\n                }\r\n\r\n                for (var k = 0, kk = items.newItems.length; k < kk; k++) {\r\n                    var nid = items.newItems[k];\r\n                    var deal = instrumentVolumeManager.InstrumentVolumes.GetItem(nid);\r\n\r\n                    if (deal) {\r\n                        instrumentVolumeCollection.Add(toObservable(deal));\r\n                    }\r\n                }\r\n            }\r\n\r\n            function onClientStateChange() {\r\n                walletInfo.Equity(general.toNumeric(csHolderManager.CSHolder.equity));\r\n                walletInfo.TotalEquity(general.toNumeric(csHolderManager.CSHolder.totalEquity));\r\n            }\r\n\r\n            function onPortfolioStateChange() {\r\n                walletInfo.Securities(general.toNumeric(portfolioManager.Portfolio.securities));\r\n                walletInfo.TradingBonus(general.toNumeric(portfolioManager.Portfolio.tradingBonus));\r\n            }\r\n\r\n            function registerObservableStartUpEvent() {\r\n                $viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vMarginStatus).state.subscribe(function (state) {\r\n                    switch (state) {\r\n                        case eViewState.Start:\r\n                            start();\r\n                            break;\r\n\r\n                        case eViewState.Stop:\r\n                            stop();\r\n                            break;\r\n                    }\r\n                });\r\n            }\r\n\r\n            return {\r\n                Init: init,\r\n                Collection: instrumentVolumeCollection.Values,\r\n                WalletInfo: walletInfo,\r\n                Totals: totals\r\n            };\r\n        };\r\n\r\n        return new MarginStatusViewModel();\r\n    }\r\n);\n",
    "define(\r\n    'FxNet/LogicLayer/Deal/DealPermissions',\r\n    [\r\n        'require',\r\n        'initdatamanagers/Customer',\r\n        'cachemanagers/PortfolioStaticManager',\r\n        'cachemanagers/bonusmanager'\r\n    ],\r\n    function (require) {\r\n        var customer = require('initdatamanagers/Customer'),\r\n            portfolioManager = require('cachemanagers/PortfolioStaticManager'),\r\n            bonusManager = require('cachemanagers/bonusmanager');\r\n\r\n        function customerDealPermit() {\r\n            return customer.prop.dealPermit;\r\n        }\r\n\r\n        function hasSpreadDiscount() {\r\n            return portfolioManager.Portfolio.pendingBonusType === ePendingBonusType.spreadDiscount && bonusManager.bonus().amountBase > 0;\r\n        }\r\n\r\n        return {\r\n            CustomerDealPermit: customerDealPermit,\r\n            HasSpreadDiscount: hasSpreadDiscount\r\n        };\r\n    }\r\n);\n",
    "\n",
    "define(\r\n    'managers/CollectionNavigateManager',\r\n    [\r\n        'require'\r\n    ],\r\n    function CollectionNavigateManager() {\r\n        var collection;\r\n        var currentIndex = 0;\r\n        var nextIndex = 1;\r\n        var prevIndex = 0;\r\n        var totalItems = 0;\r\n        var _context;\r\n\r\n        var init = function (activeCollection, selectedIndex, context) {\r\n            _context = context;\r\n            collection = activeCollection;\r\n            totalItems = activeCollection.length;\r\n            setSelectedIndex(selectedIndex);\r\n        };\r\n\r\n        var setSelectedIndex = function (selectedIndex) {\r\n            currentIndex = selectedIndex || 0;\r\n            _context.isFirst(currentIndex == 0);\r\n            _context.isLast(currentIndex == totalItems - 1);\r\n        };\r\n\r\n        var getNewSelectedItem = function (direction, onChangeSelection) {\r\n            setIndexs();\r\n\r\n            switch (direction) {\r\n                case eNavigateDirection.Next:\r\n                    setSelectedIndex(nextIndex);\r\n                    onChangeSelection(collection[nextIndex]);\r\n                    break;\r\n                case eNavigateDirection.Prev:\r\n                    setSelectedIndex(prevIndex);\r\n                    onChangeSelection(collection[prevIndex]);\r\n                    break;\r\n            }\r\n\r\n            window.scrollTo(0, 1);\r\n        };\r\n\r\n        var setIndexs = function () {\r\n            nextIndex = currentIndex + 1 <= totalItems - 1 ? currentIndex + 1 : totalItems - 1;\r\n            prevIndex = currentIndex - 1 > 0 ? currentIndex - 1 : 0;\r\n        };\r\n\r\n        var getCollection = function () {\r\n            return collection;\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            getCollection: getCollection,\r\n            GetNewSelectedItem: getNewSelectedItem\r\n        };\r\n    }\r\n);\n",
    "define(\r\n    'viewmodels/ClosedDealDetailsViewModel',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'StateObject!ClosedDeals',\r\n        'managers/CollectionNavigateManager',\r\n        'initdatamanagers/Customer',\r\n        'helpers/ObservableHelper'\r\n    ],\r\n    function (require) {\r\n        var ko = require('knockout'),\r\n            stateObject = require('StateObject!ClosedDeals'),\r\n            collectionManagerManager = require('managers/CollectionNavigateManager'),\r\n            customer = require('initdatamanagers/Customer'),\r\n            vmHelpers = require('helpers/ObservableHelper'),\r\n            dealPermission;\r\n\r\n        var observableclosedDealDetailsObject = {},\r\n            navigate = collectionManagerManager;\r\n\r\n        function init(DealPermissions) {\r\n            dealPermission = DealPermissions;\r\n            initClosedDealDetailsObject();\r\n            registerObservableStartUpEvent();\r\n        }\r\n\r\n        function registerObservableStartUpEvent() {\r\n            $viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vClosedDealDetails).visible.subscribe(function (isVisible) {\r\n                if (!isVisible) {\r\n                    stop();\r\n                } else {\r\n                    start();\r\n                }\r\n            });\r\n        }\r\n\r\n        function start() {\r\n            setStaticInfo($viewModelsManager.VManager.GetViewArgsByKeyName(eViewTypes.vClosedDealDetails, 'selectedDeal'));\r\n            setNavigator();\r\n        }\r\n\r\n        function stop() {\r\n            vmHelpers.CleanKoObservableSimpleObject(observableclosedDealDetailsObject);\r\n            stateObject.update(eStateObjectTopics.ClosedDealsUseFilters, true);\r\n        }\r\n\r\n        function setNavigator() {\r\n            var args = $viewModelsManager.VManager.GetViewArgs(eViewTypes.vClosedDealDetails);\r\n            navigate.Init(args.closedDeals, args.selectedIndex, observableclosedDealDetailsObject);\r\n        }\r\n\r\n        function initClosedDealDetailsObject() {\r\n            observableclosedDealDetailsObject.orderID = ko.observable('');\r\n            observableclosedDealDetailsObject.positionNumber = ko.observable('');\r\n            observableclosedDealDetailsObject.instrumentID = ko.observable('');\r\n            observableclosedDealDetailsObject.buyAmount = ko.observable('');\r\n            observableclosedDealDetailsObject.sellAmount = ko.observable('');\r\n            observableclosedDealDetailsObject.orderDir = ko.observable('');\r\n            observableclosedDealDetailsObject.dealAmount = ko.observable(''); //by orderDir\r\n            observableclosedDealDetailsObject.dealType = ko.observable('');\r\n            observableclosedDealDetailsObject.valueDate = ko.observable('');\r\n            observableclosedDealDetailsObject.executionTime = ko.observable('');\r\n            observableclosedDealDetailsObject.positionStart = ko.observable('');\r\n            observableclosedDealDetailsObject.forwardPips = ko.observable('');\r\n            observableclosedDealDetailsObject.dealRate = ko.observable('');\r\n            observableclosedDealDetailsObject.orderRateOpen = ko.observable('');\r\n            observableclosedDealDetailsObject.orderRateClosed = ko.observable('');\r\n            observableclosedDealDetailsObject.plSign = ko.observable('');\r\n            observableclosedDealDetailsObject.pl = ko.observable('');\r\n            observableclosedDealDetailsObject.originalPosNum = ko.observable('');\r\n            observableclosedDealDetailsObject.buySymbol = ko.observable('');\r\n            observableclosedDealDetailsObject.sellSymbol = ko.observable('');\r\n            observableclosedDealDetailsObject.plSymbol = ko.observable('');\r\n            observableclosedDealDetailsObject.rowNumber = ko.observable('');\r\n            observableclosedDealDetailsObject.isPlNotLikeDefaultCcy = ko.observable('');\r\n            observableclosedDealDetailsObject.plCCY = ko.observable('');\r\n            observableclosedDealDetailsObject.plCCYAsNumber = ko.observable('');\r\n            observableclosedDealDetailsObject.isFirst = ko.observable();\r\n            observableclosedDealDetailsObject.isLast = ko.observable();\r\n            observableclosedDealDetailsObject.adj = ko.observable();\r\n            observableclosedDealDetailsObject.isStock = ko.observable(false);\r\n            observableclosedDealDetailsObject.hasAdditionalPL = ko.observable();\r\n            observableclosedDealDetailsObject.commission = ko.observable('');\r\n            observableclosedDealDetailsObject.spreadDiscount = ko.observable('');\r\n            observableclosedDealDetailsObject.grossPL = ko.observable('');\r\n            observableclosedDealDetailsObject.hasZeroSpread = ko.observable(false);\r\n            observableclosedDealDetailsObject.hasSpreadDiscount = ko.observable(false);\r\n        }\r\n\r\n        function updateObject(selectedDeal) {\r\n            setStaticInfo(selectedDeal);\r\n        }\r\n\r\n        function setStaticInfo(selectedDeal) {\r\n            observableclosedDealDetailsObject.customerCcyName = customer.prop.defaultCcy();\r\n            observableclosedDealDetailsObject.orderID(selectedDeal.orderID);\r\n            observableclosedDealDetailsObject.positionNumber(selectedDeal.positionNumber);\r\n            observableclosedDealDetailsObject.instrumentID(selectedDeal.instrumentID);\r\n            observableclosedDealDetailsObject.buyAmount(selectedDeal.buyAmount);\r\n            observableclosedDealDetailsObject.sellAmount(selectedDeal.sellAmount);\r\n            observableclosedDealDetailsObject.orderDir(selectedDeal.orderDir);\r\n            observableclosedDealDetailsObject.dealAmount(selectedDeal.dealAmount);\r\n            observableclosedDealDetailsObject.dealType(selectedDeal.dealType);\r\n            observableclosedDealDetailsObject.valueDate(selectedDeal.valueDate);\r\n            observableclosedDealDetailsObject.executionTime(selectedDeal.executionTimeFormatted);\r\n            observableclosedDealDetailsObject.positionStart(selectedDeal.positionStartFormatted);\r\n            observableclosedDealDetailsObject.forwardPips(selectedDeal.forwardPips);\r\n            observableclosedDealDetailsObject.dealRate(selectedDeal.dealRate);\r\n            observableclosedDealDetailsObject.orderRateOpen(selectedDeal.orderRateOpen);\r\n            observableclosedDealDetailsObject.orderRateClosed(selectedDeal.orderRateClosed);\r\n            observableclosedDealDetailsObject.plSign(selectedDeal.plSign);\r\n            observableclosedDealDetailsObject.pl(selectedDeal.pl);\r\n            observableclosedDealDetailsObject.originalPosNum(selectedDeal.originalPosNum);\r\n            observableclosedDealDetailsObject.buySymbol(selectedDeal.buySymbol);\r\n            observableclosedDealDetailsObject.sellSymbol(selectedDeal.sellSymbol);\r\n            observableclosedDealDetailsObject.plSymbol(selectedDeal.plSymbol);\r\n            observableclosedDealDetailsObject.rowNumber(selectedDeal.rowNumber);\r\n            observableclosedDealDetailsObject.isPlNotLikeDefaultCcy(observableclosedDealDetailsObject.customerCcyName != selectedDeal.plSymbol);\r\n            observableclosedDealDetailsObject.plCCY(selectedDeal.plCCY);\r\n            observableclosedDealDetailsObject.plCCYAsNumber(selectedDeal.plCCYAsNumber);\r\n            observableclosedDealDetailsObject.adj(selectedDeal.adj);\r\n            observableclosedDealDetailsObject.isStock(selectedDeal.isStock);\r\n            observableclosedDealDetailsObject.hasAdditionalPL(selectedDeal.hasAdditionalPL);\r\n            observableclosedDealDetailsObject.commission(selectedDeal.commission);\r\n            observableclosedDealDetailsObject.spreadDiscount(selectedDeal.spreadDiscount);\r\n            observableclosedDealDetailsObject.grossPL(selectedDeal.grossPL);\r\n            observableclosedDealDetailsObject.hasZeroSpread(dealPermission.CustomerDealPermit() === eDealPermit.ZeroSpread);\r\n            observableclosedDealDetailsObject.hasSpreadDiscount(dealPermission.HasSpreadDiscount());\r\n        }\r\n\r\n        return {\r\n            Init: init,\r\n            Data: observableclosedDealDetailsObject,\r\n            UpdateObject: updateObject,\r\n            Navigate: navigate\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\r\n    'viewmodels/AccountBalanceViewModel',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'cachemanagers/ClientStateHolderManager'\r\n    ],\r\n    function AccountBalanceViewModel(require) {\r\n        var ko = require('knockout'),\r\n            csHolder = require('cachemanagers/ClientStateHolderManager');\r\n\r\n        var viewProperties = {\r\n            accountBalance: ko.observable(),\r\n        };\r\n\r\n        var unsubscribeFromCsHolder;\r\n\r\n        var init = function () {\r\n            subscribeToCsHolder();\r\n        };\r\n\r\n        var subscribeToCsHolder = function () {\r\n            csHolder.OnChange.Add(updateAccountBalance);\r\n            unsubscribeFromCsHolder = function () {\r\n                csHolder.OnChange.Remove(updateAccountBalance);\r\n            };\r\n        };\r\n\r\n        var updateAccountBalance = function (data) {\r\n            viewProperties.accountBalance(data.accountBalance);\r\n        };\r\n\r\n        var stop = function () {\r\n            if (unsubscribeFromCsHolder) {\r\n                unsubscribeFromCsHolder();\r\n            }\r\n        };\r\n\r\n        return {\r\n            Init: init,\r\n            Stop: stop,\r\n            ViewProperties: viewProperties,\r\n        };\r\n    }\r\n);\r\n\n",
    "define(\"devicemanagers/ViewModelsManager\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"helpers/ObservableHelper\",\r\n\t\"configuration/initconfiguration\",\r\n\t\"managers/viewsmanager\",\r\n\t\"viewmodels/QuotesViewModel\",\r\n\t\"viewmodels/QuotesPresetViewModel\",\r\n\t\"viewmodels/BalanceViewModel\",\r\n\t\"viewmodels/NetExposureViewModel\",\r\n\t\"viewmodels/AccountMarketViewModel\",\r\n\t\"viewmodels/ActivityLogViewModel\",\r\n\t\"viewmodels/MarginStatusViewModel\",\r\n\t\"modules/permissionsmodule\",\r\n\t\"FxNet/LogicLayer/Deal/DealPermissions\",\r\n\t\"viewmodels/ClosedDealDetailsViewModel\",\r\n\t\"viewmodels/AccountBalanceViewModel\",\r\n], function ViewModelsManagerDef(require) {\r\n\tvar initConfiguration = require(\"configuration/initconfiguration\"),\r\n\t\tvManager = require(\"managers/viewsmanager\"),\r\n\t\tvmHelpers = require(\"helpers/ObservableHelper\"),\r\n\t\tvmQuotes = require(\"viewmodels/QuotesViewModel\"),\r\n\t\tvmQuotesPreset = require(\"viewmodels/QuotesPresetViewModel\"),\r\n\t\tvmBalance = require(\"viewmodels/BalanceViewModel\"),\r\n\t\tvmNetExposure = require(\"viewmodels/NetExposureViewModel\"),\r\n\t\tvmAccountMarket = require(\"viewmodels/AccountMarketViewModel\"),\r\n\t\tDealPermissions = require(\"FxNet/LogicLayer/Deal/DealPermissions\"),\r\n\t\tvmClosedDealDetails = require(\"viewmodels/ClosedDealDetailsViewModel\"),\r\n\t\tvmAccountBalance = require(\"viewmodels/AccountBalanceViewModel\"),\r\n\t\tvmMarginStatus = require(\"viewmodels/MarginStatusViewModel\");\r\n\r\n\tfunction ViewModelsManager() {\r\n\t\tfunction init(uiVersion, startUpForm) {\r\n\t\t\tvManager.Init(uiVersion);\r\n\t\t\tvmQuotes.Init(initConfiguration.FavoriteInstrumentsConfiguration);\r\n\t\t\tvmClosedDealDetails.Init(DealPermissions);\r\n\t\t\tvmQuotesPreset.Init(initConfiguration.QuotesPresetConfiguration);\r\n\t\t\tvmBalance.Init(initConfiguration.BalanceConfiguration);\r\n\t\t\tvmNetExposure.Init();\r\n\r\n\t\t\tvmAccountMarket.Init();\r\n\t\t\tvmMarginStatus.Init();\r\n\t\t\tvmAccountBalance.Init();\r\n\r\n\t\t\tstart(startUpForm);\r\n\t\t}\r\n\r\n\t\tfunction start(startUpForm) {\r\n\t\t\tvManager.Start(startUpForm);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tVManager: vManager,\r\n\t\t\tVmQuotes: vmQuotes,\r\n\t\t\tVmQuotesPreset: vmQuotesPreset,\r\n\t\t\tVmHelpers: vmHelpers,\r\n\t\t\tVmClosedDealDetails: vmClosedDealDetails,\r\n\t\t\tVmBalance: vmBalance,\r\n\t\t\tVmNetExposure: vmNetExposure,\r\n\t\t\tVmAccountMarket: vmAccountMarket,\r\n\t\t\tVmMarginStatus: vmMarginStatus,\r\n\t\t\tVmAccountBalance: vmAccountBalance,\r\n\t\t};\r\n\t}\r\n\r\n\tvar module = (window.$viewModelsManager = new ViewModelsManager());\r\n\r\n\treturn module;\r\n});\r\n\n",
    "define(\"enums/paymentsconfigsettings\", [\"enums/enums\"], function PaymentsConfigSettings(eDepositingActionType) {\r\n\treturn [\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.Regular,\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tSubViews: [\r\n\t\t\t\t{\r\n\t\t\t\t\tViewId: \"genericcreditcard\",\r\n\t\t\t\t\tName: \"CreditCard\",\r\n\t\t\t\t\tViewType: \"vGenericCreditCard\",\r\n\t\t\t\t\tViewModel: \"GenericCreditCard\",\r\n\t\t\t\t\tDepositType: \"creditcardgeneric\",\r\n\t\t\t\t\tControllerAction: \"creditcard-genericcreditcard\",\r\n\t\t\t\t\tMobileName: \"GenericCreditCard\",\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.SafechargePPP,\r\n\t\t\tName: \"CreditCard3rdParty\",\r\n\t\t\tViewType: \"vCreditCard3rdParty\",\r\n\t\t\tDepositType: \"safechargeppp\",\r\n\t\t\tControllerAction: \"creditcard-safechargeppp\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"creditcard_safechargeppp\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.EmpCashU,\r\n\t\t\tName: \"EmpCashU\",\r\n\t\t\tViewType: \"vEmpCashU\",\r\n\t\t\tDepositType: \"empcashu\",\r\n\t\t\tControllerAction: \"emp-cashu\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.SafeChargeCashier,\r\n\t\t\tName: \"SafechargeCashier\",\r\n\t\t\tViewType: \"vSafeChargeCashier\",\r\n\t\t\tDepositType: \"safechargecaschier\",\r\n\t\t\tControllerAction: \"safecharge-cashier\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_safecharge_cashier\", \"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.Epaylinks,\r\n\t\t\tName: \"Epaylinks\",\r\n\t\t\tViewType: \"vEpaylinks\",\r\n\t\t\tDepositType: \"epaylinks\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.WireTransfer,\r\n\t\t\tName: \"RegularWireTransfer\",\r\n\t\t\tViewType: \"vWireTransfer\",\r\n\t\t\tDepositType: \"regularWireTransfer\",\r\n\t\t\tMobileName: \"MobileRegularWireTransfer\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"payments_regularWireTransfer\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.Moneybookers,\r\n\t\t\tName: \"MoneyBookers\",\r\n\t\t\tDepositType: \"moneybookers\",\r\n\t\t\tViewType: \"vMoneyBookers\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"payments_moneyBookers\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.GlobalCollectAPM,\r\n\t\t\tName: \"GlobalCollectAPM\",\r\n\t\t\tViewType: \"vGlobalCollectAPM\",\r\n\t\t\tDepositType: \"globalCollectAPM\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.Astropay,\r\n\t\t\tName: \"Astropay\",\r\n\t\t\tViewType: \"vAstropay\",\r\n\t\t\tDepositType: \"astropay\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"payments_astropay\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.NetellerGO,\r\n\t\t\tName: \"NetellerGO\",\r\n\t\t\tViewType: \"vNetellerGO\",\r\n\t\t\tDepositType: \"netellerGO\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_genericcreditcard\", \"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.PaySafeCard,\r\n\t\t\tName: \"PaySafeCard\",\r\n\t\t\tViewType: \"vPaySafeCard\",\r\n\t\t\tDepositType: \"paySafeCard\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.InatecAPM,\r\n\t\t\tSubViews: [\r\n\t\t\t\t{\r\n\t\t\t\t\tViewId: \"giropay\",\r\n\t\t\t\t\tName: \"InatecAPM\",\r\n\t\t\t\t\tViewType: \"vInatecAPMGiropay\",\r\n\t\t\t\t\tDepositType: \"inatecAPM\",\r\n\t\t\t\t\tControllerAction: \"inatecapm-giropay\",\r\n\t\t\t\t\tResources: [\"payments_inatecAPM\"],\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tViewId: \"p24\",\r\n\t\t\t\t\tName: \"InatecAPM\",\r\n\t\t\t\t\tViewType: \"vInatecAPMPrzelewy24\",\r\n\t\t\t\t\tDepositType: \"inatecAPM\",\r\n\t\t\t\t\tControllerAction: \"inatecapm-przelewy24\",\r\n\t\t\t\t\tResources: [\"payments_inatecAPM\"],\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t\tShowInMobile: 1,\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.NoAPIClearer,\r\n\t\t\tName: \"NoAPIClearer\",\r\n\t\t\tViewType: \"vNoAPIClearer\",\r\n\t\t\tDepositType: \"noAPIClearer\",\r\n\t\t\tControllerAction: \"deposit-noapiclearer\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"payments_concreteNames\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.EcoPayz,\r\n\t\t\tName: \"EcoPayz\",\r\n\t\t\tViewType: \"vEcoPayz\",\r\n\t\t\tDepositType: \"ecoPayz\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.SofortDirect,\r\n\t\t\tName: \"SofortDirect\",\r\n\t\t\tViewType: \"vSofortDirect\",\r\n\t\t\tDepositType: \"sofortDirect\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.Kluwp,\r\n\t\t\tName: \"Kluwp\",\r\n\t\t\tViewType: \"vKluwp\",\r\n\t\t\tDepositType: \"kluwp\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.RPN,\r\n\t\t\tName: \"RPN\",\r\n\t\t\tViewType: \"vRPN\",\r\n\t\t\tDepositType: \"RPN\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.PayPal,\r\n\t\t\tName: \"PayPal\",\r\n\t\t\tViewType: \"vPayPal\",\r\n\t\t\tDepositType: \"PayPal\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.AstropayCard,\r\n\t\t\tName: \"AstropayCard\",\r\n\t\t\tViewType: \"vAstropayCard\",\r\n\t\t\tDepositType: \"AstropayCard\",\r\n\t\t\tViewModel: \"AstropayCard\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"payments_creditcardregular\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.PayRetailers,\r\n\t\t\tName: \"PayRetailers\",\r\n\t\t\tViewType: \"vPayRetailers\",\r\n\t\t\tDepositType: \"PayRetailers\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.RisingSunAPM,\r\n\t\t\tName: \"RisingSunAPM\",\r\n\t\t\tViewType: \"vRisingSunAPM\",\r\n\t\t\tDepositType: \"RisingSunAPM\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tMobileName: \"RisingSunAPM\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.Jeton,\r\n\t\t\tName: \"Jeton\",\r\n\t\t\tViewType: \"vJeton\",\r\n\t\t\tDepositType: \"Jeton\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.ZotapayAPM,\r\n\t\t\tName: \"ZotapayAPM\",\r\n\t\t\tViewType: \"vZotapayAPM\",\r\n\t\t\tDepositType: \"ZotapayAPM\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.BitWallet,\r\n\t\t\tName: \"BitWallet\",\r\n\t\t\tViewType: \"vBitWallet\",\r\n\t\t\tDepositType: \"bitWallet\",\r\n\t\t\tViewModel: \"EWalletExtended\",\r\n\t\t\tControllerAction: \"ewalletextended-paymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.NuveiAPM,\r\n\t\t\tName: \"NuveiAPM\",\r\n\t\t\tViewType: \"vNuveiAPM\",\r\n\t\t\tDepositType: \"NuveiAPM\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.GlobePay,\r\n\t\t\tName: \"GlobePay\",\r\n\t\t\tViewType: \"vGlobePay\",\r\n\t\t\tDepositType: \"GlobePay\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\tId: eDepositingActionType.AstropayWallet,\r\n\t\t\tName: \"AstropayWallet\",\r\n\t\t\tViewType: \"vAstropayWallet\",\r\n\t\t\tDepositType: \"AstropayWallet\",\r\n\t\t\tViewModel: \"DefaultEwallet\",\r\n\t\t\tControllerAction: \"deposit-defaultpaymentview\",\r\n\t\t\tShowInMobile: 1,\r\n\t\t\tTemplates: [\"fx-template-payment-amount\"],\r\n\t\t\tResources: [\"payments_ewallet\"],\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"Id\": eDepositingActionType.PerfectMoney,\r\n\t\t\t\"Name\": \"PerfectMoney\",\r\n\t\t\t\"ViewType\": \"vPerfectMoney\",\r\n\t\t\t\"DepositType\": \"PerfectMoney\",\r\n\t\t\t\"ViewModel\": \"DefaultEwallet\",\r\n\t\t\t\"ControllerAction\": \"deposit-defaultpaymentview\",\r\n\t\t\t\"ShowInMobile\": 1,\r\n\t\t\t\"Templates\": [\"fx-template-payment-amount\"],\r\n\t\t\t\"Resources\": ['payments_ewallet']\r\n\t\t}\r\n\t];\r\n});\r\n\n",
    "/* global UrlResolver, environmentData */\r\nvar PopupInNewWindowManager = function () {\r\n    var deposit3rdPartyWindowName = \"_system\";\r\n    var deposit3rdPartyWindowHandle = null;\r\n\r\n    function redirect(communicationManager) {\r\n        var urlParams = \"?actionUrl=\" + encodeURIComponent(communicationManager.ActionUrl) +\r\n            \"&postDataValue=\" + encodeURIComponent(JSON.stringify(communicationManager.PostDataArr)) +\r\n            \"&hash=\" + communicationManager.Hash +\r\n            \"&accountNumber=\" + communicationManager.AccountNumber;\r\n\r\n        var url = UrlResolver.combine(\r\n            UrlResolver.getApplicationRelativePath(),\r\n            \"/Payments/Deposit/RedirectToClearerPage\",\r\n            urlParams\r\n        );\r\n\r\n        window.open(url, deposit3rdPartyWindowName);\r\n    }\r\n\r\n    function paymentUrlResolver() {\r\n        var url = UrlResolver.combine(\r\n            UrlResolver.getApplicationRelativePath(),\r\n            \"/Payments/Deposit/Spinner\"\r\n        );\r\n\r\n        if (environmentData.isDesktop) {\r\n            url = location.protocol + '//' + location.hostname + url;\r\n        }\r\n\r\n        return url;\r\n    }\r\n\r\n    function openPopup() {\r\n        deposit3rdPartyWindowHandle = window.open(paymentUrlResolver(), deposit3rdPartyWindowName, \"resizable=1, height=850, width=800, scrollbars=yes\");\r\n    }\r\n\r\n    function resize(width, height) {\r\n        deposit3rdPartyWindowHandle.resizeTo(width, height);\r\n    }\r\n\r\n    function close() {\r\n        if (deposit3rdPartyWindowHandle) {\r\n            deposit3rdPartyWindowHandle.close();\r\n            deposit3rdPartyWindowHandle = null;\r\n        }\r\n    }\r\n\r\n    //when inside mobile applications openPopup will be handled inside redirect function.\r\n    if (!systemInfo.isNative) {\r\n        openPopup();\r\n    }\r\n\r\n    function isPopupOpen() {\r\n        return deposit3rdPartyWindowHandle && !deposit3rdPartyWindowHandle.closed;\r\n    }\r\n\r\n    function onClose(callback) {\r\n        if (deposit3rdPartyWindowHandle && !deposit3rdPartyWindowHandle.closed) {\r\n            setTimeout(function () {\r\n                onClose(callback);\r\n            }, 1000);\r\n        } else {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    return {\r\n        Navigate: redirect,\r\n        Resize: resize,\r\n        Close: close,\r\n        IsPopupOpen: isPopupOpen,\r\n        OnClose: onClose\r\n    };\r\n};\ndefine(\"managers/PopupInNewWindowManager\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.PopupInNewWindowManager;\n    };\n}(this)));\n\n",
    "define('managers/PopupInAlertManager',\r\n    [\r\n        'require',\r\n        'handlers/general',\r\n        'devicemanagers/AlertsManager'\r\n    ],\r\n    function (require) {\r\n        var alertsManager = require('devicemanagers/AlertsManager'),\r\n            general = require('handlers/general');\r\n\r\n        var PopupInAlertManager = function () {\r\n            var onCloseCallback =general.emptyFn,\r\n                alertType = AlertTypes.IframeAlert;\r\n\r\n            var open = function (communicationManager) {\r\n                var options = {\r\n                    iframeUrl: communicationManager.ActionUrl,\r\n                    alertType: alertType,\r\n                    onCloseCallback: onCloseCallback\r\n                };\r\n\r\n                alertsManager.UpdateAlert(alertType, communicationManager.Title, null, null, options);\r\n                alertsManager.PopAlert(alertType)\r\n            };\r\n\r\n            var close = function () {\r\n                var alert = alertsManager.GetAlert(alertType);\r\n\r\n                if (alert) {\r\n                    alert.hide();\r\n                }\r\n\r\n                onCloseCallback();\r\n            };\r\n\r\n            var onClose = function (callback) {\r\n                onCloseCallback = callback;\r\n            };\r\n\r\n            return {\r\n                Navigate: open,\r\n                Close: close,\r\n                OnClose: onClose\r\n            };\r\n        };\r\n\r\n        return PopupInAlertManager;\r\n    }\r\n);\n",
    "define(\"configuration/PaymentsConfiguration\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"enums/paymentsconfigsettings\",\r\n\t\"configuration/initconfiguration\",\r\n\t\"managers/PopupInNewWindowManager\",\r\n\t\"managers/PopupInAlertManager\",\r\n], function (require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tinitConfiguration = require(\"configuration/initconfiguration\"),\r\n\t\tpaymentsConfigSettings = require(\"enums/paymentsconfigsettings\"),\r\n\t\tpopupInNewWindowManager = require(\"managers/PopupInNewWindowManager\"),\r\n\t\tpopupInAlertManager = require(\"managers/PopupInAlertManager\");\r\n\r\n\tfunction setupConfiguration() {\r\n\t\tvar paymentsConfiguration = {\r\n\t\t\tprepare3rdPartyView: popupInNewWindowManager,\r\n\t\t\tformToDisplayForSuccessfulPayments: eForms.DepositSuccess,\r\n\t\t\tformToDisplayForPendingPayments: eForms.DepositPending,\r\n\t\t\tsupportLastPaymentCategory: false,\r\n\t\t\tredirectToLastPaymentOnLoad: true,\r\n\t\t\tviewTypeForExistingCC: \"genericcreditcard\",\r\n\t\t\tgetClaimsTimeoutInMiliseconds: 30000,\r\n\t\t\tmissingPaymentsRedirect: eForms.Quotes,\r\n\t\t};\r\n\r\n\t\tvar popupInNewWindowConfiguration = {\r\n\t\t\tprepare3rdPartyView: popupInNewWindowManager,\r\n\t\t\tformToDisplayForSuccessfulPayments: eForms.DepositSuccess,\r\n\t\t\tformToDisplayForPendingPayments: eForms.DepositPending,\r\n\t\t};\r\n\r\n\t\tvar risingSunAPMConfiguration = Object.assign({}, paymentsConfiguration, {\r\n\t\t\tprepare3rdPartyView: popupInAlertManager,\r\n\t\t});\r\n\r\n\t\tvar safeChargeCashierPaymentConfiguration = {\r\n\t\t\tprepare3rdPartyView: popupInNewWindowManager,\r\n\t\t\tformToDisplayForSuccessfulPayments: eForms.DepositSuccess,\r\n\t\t\tformToDisplayForPendingPayments: eForms.DepositPending,\r\n\t\t\tcurrencySortPropertyName: \"name\",\r\n\t\t};\r\n\r\n\t\tvar wireTransferConfiguration = {\r\n\t\t\tformToDisplayForSuccessfulPayments: eForms.WireTransferSuccess,\r\n\t\t\tformToDisplayForPendingPayments: eForms.Deals,\r\n\t\t\tformToDisplayForFailedPayments: eForms.RegularWireTransfer,\r\n\t\t};\r\n\r\n\t\t//payments\r\n\t\tinitConfiguration.PaymentsConfiguration = paymentsConfiguration;\r\n\t\tinitConfiguration.PaymentInNewWindowConfiguration = popupInNewWindowConfiguration;\r\n\t\tinitConfiguration.PaymentWithCCConfiguration = paymentsConfiguration;\r\n\t\tinitConfiguration.SafeChargeCashierPaymentConfiguration = safeChargeCashierPaymentConfiguration;\r\n\t\tinitConfiguration.AstropayConfiguration = popupInNewWindowConfiguration;\r\n\t\tinitConfiguration.AstropayCardConfiguration = paymentsConfiguration;\r\n\t\tinitConfiguration.RisingSunAPMConfiguration = risingSunAPMConfiguration;\r\n\t\tinitConfiguration.WireTransferConfiguration = wireTransferConfiguration;\r\n\t}\r\n\r\n\tfunction buildDeps(requiredDeps) {\r\n\t\tvar commonContentDeps = [\"payments_general\"],\r\n\t\t\tcurrentContentDeps = [];\r\n\r\n\t\tcurrentContentDeps = [].concatUnique(requiredDeps);\r\n\t\tcurrentContentDeps = currentContentDeps.concatUnique(commonContentDeps);\r\n\r\n\t\treturn currentContentDeps;\r\n\t}\r\n\r\n\tfunction registerComponentsForConcretePayments() {\r\n\t\tif (!paymentsConfigSettings) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tpaymentsConfigSettings.forEach(function registerComponent(payment) {\r\n\t\t\tif (!payment.ShowInMobile || payment.SkipComponentGeneration) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar vmPath = \"viewmodels/Payments/{0}ViewModel\";\r\n\t\t\tvar mobileVmPath = \"deviceviewmodels/{0}ViewModel\";\r\n\r\n\t\t\tif (payment.SubViews) {\r\n\t\t\t\tpayment.SubViews.forEach(function registerSubComponent(subview) {\r\n\t\t\t\t\tvar componentName = String.format(\r\n\t\t\t\t\t\t\t\"fx-payment-{0}-{1}\",\r\n\t\t\t\t\t\t\tsubview.Name.toLowerCase(),\r\n\t\t\t\t\t\t\tsubview.ViewId.toLowerCase()\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tcomponentDef = {\r\n\t\t\t\t\t\t\tviewModel: {\r\n\t\t\t\t\t\t\t\trequire: String.format(\r\n\t\t\t\t\t\t\t\t\tsubview.MobileName ? mobileVmPath : vmPath,\r\n\t\t\t\t\t\t\t\t\tsubview.MobileName || subview.ViewModel || subview.Name\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttemplate: {\r\n\t\t\t\t\t\t\t\trequire: payment.Templates\r\n\t\t\t\t\t\t\t\t\t? \"text!FxNet/Devices/Mobile/UILayer/Views/Deposit/PaymentTemplates.html\"\r\n\t\t\t\t\t\t\t\t\t: String.format(\r\n\t\t\t\t\t\t\t\t\t\t\t\"text!partial-views/mobile-payments-{0}.html\",\r\n\t\t\t\t\t\t\t\t\t\t\tsubview.ControllerAction\r\n\t\t\t\t\t\t\t\t\t  ),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tdeps: buildDeps(payment.Resources || []).map(function (contentKey) {\r\n\t\t\t\t\t\t\t\treturn \"LoadDictionaryContent!\" + contentKey;\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\tko.components.register(componentName, componentDef);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar componentName = String.format(\"fx-payment-{0}\", payment.Name.toLowerCase()),\r\n\t\t\t\tcomponentDef = {\r\n\t\t\t\t\tviewModel: {\r\n\t\t\t\t\t\trequire: String.format(\r\n\t\t\t\t\t\t\tpayment.MobileName ? mobileVmPath : vmPath,\r\n\t\t\t\t\t\t\tpayment.MobileName || payment.ViewModel || payment.Name\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttemplate: {\r\n\t\t\t\t\t\trequire: payment.Templates\r\n\t\t\t\t\t\t\t? \"text!FxNet/Devices/Mobile/UILayer/Views/Deposit/PaymentTemplates.html\"\r\n\t\t\t\t\t\t\t: String.format(\r\n\t\t\t\t\t\t\t\t\t\"text!partial-views/mobile-payments-{0}.html\",\r\n\t\t\t\t\t\t\t\t\tpayment.ControllerAction || payment.Name.toLowerCase()\r\n\t\t\t\t\t\t\t  ),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdeps: buildDeps(payment.Resources || []).map(function (contentKey) {\r\n\t\t\t\t\t\treturn \"LoadDictionaryContent!\" + contentKey;\r\n\t\t\t\t\t}),\r\n\t\t\t\t};\r\n\r\n\t\t\tko.components.register(componentName, componentDef);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction registerComponentsForNotes() {\r\n\t\tko.components.register(\"fx-componet-creditcard-regular-note\", {\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/creditcard/creditcard-regular-note.html\" },\r\n\t\t\tdeps: [\"LoadDictionaryContent!views_vMobilePaymentTypes\"],\r\n\t\t});\r\n\r\n\t\tko.components.register(\"fx-componet-ecopayz-note\", {\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/creditcard/ecopayz-note.html\" },\r\n\t\t\tdeps: [\"LoadDictionaryContent!payment_ewallet\"],\r\n\t\t});\r\n\r\n\t\tko.components.register(\"fx-deposit-notice\", {\r\n\t\t\tviewModel: { require: \"viewmodels/Payments/NoticeViewModel\" },\r\n\t\t\ttemplate: { require: \"text!partial-views/mobile-payments-deposit-notice.html\" },\r\n\t\t});\r\n\t}\r\n\r\n\tfunction registerComponentsForListOfPayments() {\r\n\t\tko.components.register(\"fx-component-payment-types\", {\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Deposit/PaymentTypes.html\" },\r\n\t\t});\r\n\r\n\t\tko.components.register(\"fx-concrete-payments\", {\r\n\t\t\tviewModel: { require: \"viewmodels/Payments/ConcretePaymentsViewModel\" },\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Deposit/Payments.html\" },\r\n\t\t\tdeps: [\r\n\t\t\t\t\"LoadDictionaryContent!payments_concreteView\",\r\n\t\t\t\t\"LoadDictionaryContent!FAQDEPOSIT\",\r\n\t\t\t\t\"LoadDictionaryContent!payments_concreteNames\",\r\n\t\t\t],\r\n\t\t});\r\n\r\n\t\tko.components.register(\"fx-concrete-payments-form\", {\r\n\t\t\tviewModel: { require: \"viewmodels/Payments/ConcretePaymentFormViewModel\" },\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Deposit/PaymentsForm.html\" },\r\n\t\t\tdeps: [\r\n\t\t\t\t\"LoadDictionaryContent!payments_concreteView\",\r\n\t\t\t\t\"LoadDictionaryContent!FAQDEPOSIT\",\r\n\t\t\t\t\"LoadDictionaryContent!payments_concreteNames\",\r\n\t\t\t],\r\n\t\t});\r\n\r\n\t\tko.components.register(\"fx-component-deposit-success-thankyou\", {\r\n\t\t\tviewModel: { require: \"viewmodels/deposit/ThankYouViewModel\" },\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Deposit/thankyou-success.html\" },\r\n\t\t\tdeps: [\r\n\t\t\t\t\"LoadDictionaryContent!FAQDEPOSITTHANKYOU\",\r\n\t\t\t\t\"LoadDictionaryContent!deposit_thankyou\",\r\n\t\t\t\t\"LoadDictionaryContent!deposit_thankyou_success\",\r\n\t\t\t],\r\n\t\t});\r\n\r\n\t\tko.components.register(\"fx-component-deposit-pending-thankyou\", {\r\n\t\t\tviewModel: { require: \"viewmodels/deposit/ThankYouViewModel\" },\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Deposit/thankyou-pending.html\" },\r\n\t\t\tdeps: [\r\n\t\t\t\t\"LoadDictionaryContent!FAQDEPOSITTHANKYOU\",\r\n\t\t\t\t\"LoadDictionaryContent!deposit_thankyou\",\r\n\t\t\t\t\"LoadDictionaryContent!deposit_thankyou_pending\",\r\n\t\t\t],\r\n\t\t});\r\n\r\n\t\tko.components.register(\"fx-concrete-payment-subtitle\", {\r\n\t\t\tviewModel: { require: \"viewmodels/Payments/ConcretePaymentSubtitleViewModel\" },\r\n\t\t\ttemplate: { require: \"text!partial-views/mobile-payments-deposit-subtitle.html\" },\r\n\t\t});\r\n\t}\r\n\r\n\tfunction registerComponentsForAlerts() {\r\n\t\tko.components.register(\"fx-component-questionnaire-alert\", {\r\n\t\t\tviewModel: { require: \"deviceviewmodels/QuestionnaireAlertViewModel\" },\r\n\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deposit-questionnaire-alert.html\" },\r\n\t\t});\r\n\t}\r\n\r\n\tfunction registerDepositComponents() {\r\n\t\tsetupConfiguration();\r\n\r\n\t\tregisterComponentsForConcretePayments();\r\n\t\tregisterComponentsForNotes();\r\n\t\tregisterComponentsForListOfPayments();\r\n\t\tregisterComponentsForAlerts();\r\n\t}\r\n\r\n\treturn {\r\n\t\tRegisterDepositComponents: registerDepositComponents,\r\n\t};\r\n});\r\n\n",
    "define(\r\n    \"configuration/mobilePatches\",\r\n    [\r\n        'require',\r\n        'jquery'\r\n    ],\r\n    function (require) {\r\n        var $ = require('jquery'),\r\n            deviceAgent = navigator.userAgent.toLowerCase(),\r\n            agentID = deviceAgent.match(/(iphone|ipod|ipad|android)/) || '',\r\n            delayedVar,\r\n            mobile = {\r\n                device: {\r\n                    iphone: agentID.indexOf(\"iphone\") >= 0,\r\n                    ipad: agentID.indexOf(\"ipad\") >= 0,\r\n                    ipod: agentID.indexOf(\"ipod\") >= 0,\r\n                    android: agentID.indexOf(\"android\") >= 0\r\n                },\r\n                type: {\r\n                    galaxy: (deviceAgent.match(/gt\\-(i\\d\\d\\d\\d)/)) ? deviceAgent.match(/gt\\-(i\\d\\d\\d\\d)/)[1] : '',\r\n                    nexus: (deviceAgent.match(/nexus (\\d)/)) ? deviceAgent.match(/nexus (\\d)/)[1] : ''\r\n                },\r\n                system: {\r\n                    ios: (deviceAgent.match(/iphone os (\\d+)/)) ? deviceAgent.match(/iphone os (\\d+)/)[1] : '',\r\n                    height: $(window).height(),\r\n                    android_4_3: deviceAgent.match(/android 4.3/) || '',\r\n                    android_4_2: deviceAgent.match(/android 4.2/) || ''\r\n                },\r\n                browser: {\r\n                    opera: deviceAgent.match(/opera/) || '',\r\n                    safari: deviceAgent.match(/safari/) || '',\r\n                    firefox: deviceAgent.match(/firefox/) || '',\r\n                    chrome: deviceAgent.match(/chrome/) || ''\r\n                },\r\n                check: {}\r\n            };\r\n\r\n        mobile.check.apple = deviceAgent.match(/iphone|ipod|ipad/) || '';\r\n        mobile.check.ios_chrome = mobile.check.apple && deviceAgent.indexOf('crios') > 0;\r\n        mobile.check.s2_default = mobile.device.android && mobile.type.galaxy == 'i9100' && mobile.browser.safari && deviceAgent.match(/version\\//);\r\n        mobile.browser.android_default = mobile.device.android && mobile.browser.safari && deviceAgent.match(/version\\//);\r\n\r\n        window.addEventListener('orientationchange', handleOrientation, false);\r\n\r\n        //Firefox orientationchange custom event\r\n        if (mobile.device.android && mobile.browser.firefox && \"matchMedia\" in window) {\r\n            var ff_orientationchange = window.matchMedia(\"(orientation: portrait)\");\r\n            ff_orientationchange.addListener(function (ori) {\r\n                var active = $('#main').find('input:focus');\r\n\r\n                if (active.length == 0) {\r\n                    handleOrientation();\r\n                    ffOrientation(ori);\r\n                }\r\n            });\r\n        }\r\n\r\n        function handleOrientation() {\r\n            if (typeof delayedVar !== \"undefined\") {\r\n                clearTimeout(delayedVar);\r\n            }\r\n\r\n            if (mobile.check.apple) {\r\n                hideToolBar();\r\n                loaded();\r\n                Browser.forceRepaintIosRotate();\r\n            }\r\n            else {\r\n                delayedVar = setTimeout(delayedFooter, 2000);\r\n\r\n                window.scrollTo(0, 1);\r\n            }\r\n        }\r\n\r\n        function ffOrientation(cur_orientation) {\r\n            if (cur_orientation.matches) {\r\n                document.querySelector('body').classList.remove('landscape');\r\n            }\r\n            else {\r\n                document.querySelector('body').classList.add('landscape');\r\n            }\r\n        }\r\n\r\n        function getOrientation() {\r\n            var orientation = window.orientation;\r\n\r\n            if (orientation == 0) {\r\n                //portrait\r\n                document.querySelector('body').classList.remove('landscape');\r\n            }\r\n            else if (orientation == 90 || orientation == -90) {\r\n                //landscape\r\n                document.querySelector('body').classList.add('landscape');\r\n            }\r\n        }\r\n\r\n        function loaded() {\r\n            getOrientation();\r\n        }\r\n\r\n        function startFunctions() {\r\n            hideToolBar();\r\n\r\n            //Galaxy s 2 input header bug;\r\n            if (mobile.check.s2_default) {\r\n                hiddenHeader();\r\n            }\r\n\r\n            //Galaxy s 3 input write bug\r\n            if (mobile.browser.android_default && mobile.type.galaxy == 'i9300') {\r\n                $('#main').addClass('input-write');\r\n            }\r\n\r\n            scrollMeDown();\r\n            loaded();\r\n        }\r\n\r\n        function hiddenHeader() {\r\n            var is_keyboard = false,\r\n                initial_screen_size = window.innerHeight,\r\n                main = $('#main');\r\n\r\n            main.on('input[type=text] , input[type=number]', 'focus', function () {\r\n                window.addEventListener('resize', function () {\r\n                    window.orientation = window.orientation || 0;\r\n                    is_keyboard = window.innerHeight < initial_screen_size;\r\n\r\n                    if (window.orientation == 90 || window.orientation == -90) {\r\n                        main.removeClass('input-focus');\r\n                    }\r\n\r\n                    (is_keyboard && window.orientation == 0) ? main.addClass('input-focus') : main.removeClass('input-focus');\r\n                }, false);\r\n\r\n                main.off('input[type=text] , input[type=number]', 'focus');\r\n            });\r\n        }\r\n\r\n        function delayedFooter() {\r\n            hideToolBar();\r\n        }\r\n\r\n        function hideToolBar() {\r\n            var height = $(window).height();\r\n\r\n            if (mobile.device.iphone) {\r\n                var gaph = height - window.outerHeight;\r\n                height = (gaph < 47 || (gaph < -136)) ? height += 65 : height += 4;\r\n            }\r\n            else if (!(mobile.device.ipad || window.outerHeight - window.innerHeight <= 254)\r\n                && !(deviceAgent.indexOf('gt-i9300') > 0 || mobile.browser.opera)) {\r\n                height += 55;\r\n            }\r\n\r\n            $('#splash_page').css('height', height + 'px');\r\n            scrollMeDown();\r\n        }\r\n\r\n        function scrollMeDown() {\r\n            setTimeout(function () { window.scrollTo(0, 1); }, 100);\r\n        }\r\n\r\n        window.mobile = mobile;\r\n\r\n        var module = window.mobilePatches = {\r\n            startFunctions: startFunctions,\r\n            delayedFooter: delayedFooter\r\n        };\r\n\r\n        return module;\r\n    }\r\n);\r\n\r\n\n",
    "var eSignalTrendsImageClasses = {\r\n    South: \"ico-sh-arrow-down\",\r\n    SouthEast: \"ico-sh-arrow-south-east\",\r\n    East: \"ico-sh-arrow-right\",\r\n    North: \"ico-sh-arrow-up\",\r\n    NorthEast: \"ico-sh-arrow-north-east\",\r\n    None: \"\"\r\n};\r\n\r\nvar eSignalTrendsColorClasses = {\r\n    Green: \"green\",\r\n    Red: \"red\",\r\n    Neutral: \"neutral\"\r\n};\r\n\r\nvar eSignalTrendsValues = {\r\n    StrongSell: \"-2\",\r\n    Sell: \"-1\",\r\n    Neutral: \"0\",\r\n    Buy: \"1\",\r\n    StrongBuy: \"2\"\r\n};\ndefine(\"customEnums/Consts\", function(){});\n\n",
    "var cDepositMessageKeys = {\r\n    confirmation: 'depConfirmation',\r\n    succeeded: 'depSucceeded',\r\n    succeededTitle: 'depSucceededTitle',\r\n    changeGeneratedPasswordAfterFirstDeposit: 'ChangeGeneratedPasswordAfterFirstDeposit',\r\n    minDeposit: 'depMinDeposit',\r\n    maxDeposit: 'depMaxDeposit',\r\n    clearerMaxRangeDeposit: 'depMaxDepositRange',\r\n    maxCCAllowed: 'depMaxCCAllowed',\r\n    invalidCardType: 'depInvalidCardType',\r\n    refundableClearer: 'depRefundableClearer',\r\n    minMaxBlocked: 'depMinMaxBlocked',\r\n    maxCardTypeUSDAmount: 'depMaxCardTypeUSDAmount',\r\n    creditCardExpired: 'depCreditCardExpired',\r\n    whiteListValidation: 'depWhiteListValidation',\r\n    meikoPayMaxAmount: 'depMeikoPayMaxAmount',\r\n    depositFailed: 'depDepositFailed',\r\n    requestPended: 'depRequestPended',\r\n    unableProcessRequest: 'depUnableProcessRequest',\r\n    unsupportedCardType: 'depUnsupportedCardType',\r\n    d3secureNotAllowed: 'd3secure',\r\n    noSupportedClearers: 'noSupportedClearers',\r\n    notEnrolledCard: 'notEnrolledCard',\r\n    notice3DSecureDeposit: 'notice3DSecureDeposit',\r\n    d3SecureMissed: 'depD3SecureMissed',\r\n    removeCCMessage: 'depRemoveCCMessage',\r\n    serverError: 'ServerError',\r\n    moneyBookersDepositRequestCancelled: 'depMBDepositRequestCancelled',\r\n    cancelledByUser: 'depCancelledByUser',\r\n    pendingDepositRequest: 'depPendingDepositRequest'\r\n};\r\n\r\nvar cDepositMessageKeyPrefixes = {\r\n    succeededAdditionalWithDescriptor: 'depSucceededAdditionalWithDescriptor_',\r\n    succeededAdditional: 'depSucceededAdditional_',\r\n    ccBinCountryBlacklistWithCountryId: 'depCCBinCountryBlacklist_countryId_'\r\n};\r\n\r\nvar cDepositMessageTitleKeys = {\r\n    failedDepositMinimumDeposit: 'FailedDeposit_MinimumDeposit',\r\n    failedDepositExpiryDate: 'FailedDeposit_ExpiryDate',\r\n    failedDepositDoubleCheck: 'FailedDeposit_DoubleCheck',\r\n    failedDepositSorry: 'FailedDeposit_Sorry'\r\n};\r\n\r\nvar cEmptyGuid = \"00000000-0000-0000-0000-000000000000\";\ndefine(\"constsenums/depositconstants\", function(){});\n\n",
    "define(\r\n    'helpers/customkobindings/KoCustomBindings',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'handlers/general',\r\n        'jquery',\r\n        'vendor/jquery-ui',\r\n        'customEnums/Consts',\r\n        'constsenums/depositconstants',\r\n        'handlers/languageHelper'\r\n    ],\r\n    function (require) {\r\n        var ko = require('knockout'),\r\n            $ = require('jquery'),\r\n            general = require('handlers/general');\r\n\r\n        // Web/Mobile\r\n        ko.bindingHandlers.balloon = {\r\n            init: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor()) || {};\r\n                var $elementTrigger = $(element);\r\n\r\n                $elementTrigger.uniqueId();\r\n                var elementTriggerUniqueId = $elementTrigger.attr('id');\r\n\r\n                if (!$elementTrigger.attr('title')) {\r\n                    $elementTrigger.attr('title', '***missingTitleAttr');\r\n                }\r\n\r\n                if (options.closeEvent === 'click') {\r\n                    // should call .off(\r\n                    $elementTrigger.on('mouseout focusout', function (event) {\r\n                        event.stopImmediatePropagation();\r\n                    });\r\n\r\n                    $(document).on(\r\n                        'click.outsideBallon.' + elementTriggerUniqueId,\r\n                        function () {\r\n                            if ($elementTrigger.data('uiTooltipOpen')) {\r\n                                closeTooltip($elementTrigger);\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n\r\n                if (Browser.getBrowserName().toLowerCase() === 'safari') {\r\n                    options.tooltipClass += ' safari';\r\n                }\r\n\r\n                $.extend(options.position, {\r\n                    using: function (position, feedback) {\r\n                        // close all opened tooltips in a case that one its closeEvent === click\r\n                        $('[aria-describedby]').each(function (i, el) {\r\n                            if (element !== el) {\r\n                                closeTooltip($(el));\r\n                            }\r\n                        });\r\n\r\n                        $elementTrigger.tooltip('open');\r\n\r\n                        if (options.closeEvent === 'click') {\r\n                            $elementTrigger.on('tooltipopen', function (e) {\r\n                                var self = this,\r\n                                    $balloon = $('#' + this.getAttribute('aria-describedby'));\r\n                                // set close on click event on tooltip\r\n                                $balloon.on('click', function () {\r\n                                    closeTooltip($(self));\r\n                                });\r\n                            });\r\n                        }\r\n\r\n                        $(this).css(position);\r\n\r\n                        if (\r\n                            feedback &&\r\n                            feedback.target &&\r\n                            feedback.target.element &&\r\n                            $(feedback.target.element).hasClass('customTooltipPurpose')\r\n                        ) {\r\n                            var isTooltipBellowElement =\r\n                                $(this).offset().top > $(feedback.target.element).offset().top;\r\n\r\n                            if (isTooltipBellowElement) {\r\n                                $(feedback.target.element).addClass('customTooltipPurposeBottom');\r\n                            } else {\r\n                                $(feedback.target.element).removeClass(\r\n                                    'customTooltipPurposeBottom'\r\n                                );\r\n                            }\r\n                        } else {\r\n                            $('<div>')\r\n                                .addClass('arrow')\r\n                                .addClass(feedback.vertical)\r\n                                .addClass(feedback.horizontal)\r\n                                .appendTo(this);\r\n                        }\r\n                    },\r\n                });\r\n\r\n                var closeTooltip = function (tooltipElement) {\r\n                    if (!general.isObjectType(tooltipElement)) {\r\n                        return;\r\n                    }\r\n\r\n                    if (general.isFunctionType(tooltipElement.removeClass)) {\r\n                        tooltipElement.removeClass('toolTipButtonTrigered');\r\n                    }\r\n\r\n                    if (\r\n                        general.isFunctionType(tooltipElement.tooltip) &&\r\n                        !general.isNullOrUndefined(tooltipElement.data('ui-tooltip'))\r\n                    ) {\r\n                        tooltipElement.tooltip('close');\r\n                    }\r\n                };\r\n\r\n                $elementTrigger.tooltip(options, {\r\n                    show: false,\r\n                    hide: false,\r\n                    content: function () {\r\n                        if (options.contentKey) {\r\n                            return options.resourceName\r\n                                ? Dictionary.GetItem(options.contentKey, options.resourceName)\r\n                                : Dictionary.GetItem(options.contentKey);\r\n                        }\r\n\r\n                        return $(this).attr('title');\r\n                    },\r\n                });\r\n\r\n                if (options.closeEvent === 'click') {\r\n                    $elementTrigger.on('mouseenter focusin', function () {\r\n                        $(this).addClass('toolTipButtonTrigered');\r\n                    });\r\n                }\r\n\r\n                $elementTrigger.on('click.balloon', function () {\r\n                    $elementTrigger.blur().tooltip('open');\r\n\r\n                    if (options.closeEvent === 'click') {\r\n                        $elementTrigger.on('tooltipopen', function (e) {\r\n                            var $balloon = $('#' + this.getAttribute('aria-describedby'));\r\n\r\n                            $balloon.on('click', function () {\r\n                                closeTooltip($elementTrigger);\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                    if (options.timeout && options.timeout > 0) {\r\n                        clearTimeout($elementTrigger._closeTooltipTimer);\r\n                        $elementTrigger._closeTooltipTimer = setTimeout(\r\n                            function (tooltipElement) {\r\n                                closeTooltip(tooltipElement);\r\n                            },\r\n                            options.timeout,\r\n                            $elementTrigger\r\n                        );\r\n                    }\r\n                });\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function (\r\n                    elementToDispose\r\n                ) {\r\n                    clearTimeout(elementToDispose._closeTooltipTimer);\r\n\r\n                    $(elementToDispose).off('.balloon');\r\n                    $(elementToDispose).tooltip('destroy');\r\n                    $(document).off('click.outsideBallon.' + elementTriggerUniqueId);\r\n                });\r\n            },\r\n        };\r\n        // For getting values from the resources Dictonary based on the prefix, suffix and/or resourceName\r\n        // Web/Mobile\r\n        ko.bindingHandlers.dictionaryBinding = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    prefix = allBindingsAccessor.get('prefix') || '',\r\n                    suffix = allBindingsAccessor.get('suffix') || '',\r\n                    dictionaryKey = prefix + rawValue + suffix,\r\n                    resourceName = allBindingsAccessor.get('resourceName'),\r\n                    value;\r\n\r\n                if (dictionaryKey) {\r\n                    value = resourceName\r\n                        ? Dictionary.GetItem(dictionaryKey, resourceName, ' ')\r\n                        : Dictionary.GetItem(dictionaryKey);\r\n                    element.innerHTML = value;\r\n                }\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    prefix = allBindingsAccessor.get('prefix') || '',\r\n                    suffix = allBindingsAccessor.get('suffix') || '',\r\n                    dictionaryKey = prefix + rawValue + suffix,\r\n                    resourceName = allBindingsAccessor.get('resourceName'),\r\n                    value;\r\n\r\n                if (dictionaryKey) {\r\n                    value = resourceName\r\n                        ? Dictionary.GetItem(dictionaryKey, resourceName, ' ')\r\n                        : Dictionary.GetItem(dictionaryKey);\r\n                    element.innerHTML = value;\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.hidden = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n                ko.bindingHandlers.visible.update(element, function () {\r\n                    return !value;\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.visibility = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n                if (value) {\r\n                    $(element).css('visibility', 'visible');\r\n                } else {\r\n                    $(element).css('visibility', 'hidden');\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.instrumentName = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var instId = ko.utils.unwrapObservable(valueAccessor()),\r\n                    longName =\r\n                        instId === Number.MAX_SAFE_INTEGER\r\n                            ? Dictionary.GetItem('All_Instruments', 'deals_CloseDeal')\r\n                            : $instrumentTranslationsManager.Long(instId);\r\n\r\n                if (longName && longName.isRtlText()) {\r\n                    element.classList.remove('ltr');\r\n                } else {\r\n                    element.classList.add('ltr');\r\n                }\r\n\r\n                element.innerHTML = longName;\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.nonRtlText = {\r\n            update: function (element, valueAccessor) {\r\n                var text = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (text && general.isStringType(text) && text.isRtlText()) {\r\n                    element.classList.remove('ltr');\r\n                } else {\r\n                    element.classList.add('ltr');\r\n                }\r\n\r\n                element.innerHTML = text;\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.instrumentShortName = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var id = ko.utils.unwrapObservable(valueAccessor()),\r\n                    shortName = $instrumentTranslationsManager.Short(id);\r\n\r\n                if (shortName && shortName.isRtlText()) {\r\n                    element.classList.remove('ltr');\r\n                } else {\r\n                    element.classList.add('ltr');\r\n                }\r\n\r\n                element.innerHTML = shortName;\r\n                return { controlsDescendantBindings: true };\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var id = ko.utils.unwrapObservable(valueAccessor()),\r\n                    shortName = $instrumentTranslationsManager.Short(id);\r\n\r\n                if (shortName && shortName.isRtlText()) {\r\n                    element.classList.remove('ltr');\r\n                } else {\r\n                    element.classList.add('ltr');\r\n                }\r\n\r\n                element.innerHTML = shortName;\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.symbolName = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    value = $symbolsManager.GetTranslatedSymbolById(rawValue);\r\n\r\n                element.innerHTML = value;\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    value = $symbolsManager.GetTranslatedSymbolById(rawValue);\r\n\r\n                element.innerHTML = value;\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.numberWithCurrencySymbol = {\r\n            init: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor()),\r\n                    amountWithSign = Format.toNumberWithCurrency(options.value, options);\r\n\r\n                element.innerHTML = amountWithSign;\r\n            },\r\n            update: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor()),\r\n                    amountWithSign = Format.toNumberWithCurrency(options.value, options);\r\n\r\n                element.innerHTML = amountWithSign;\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.roundM = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var val = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (val) {\r\n                    var str = general.formatRoundM(val.toString());\r\n                    $(element).text(str);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.roundMBasedOnThreshold = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var val = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (val) {\r\n                    var str = general.formatRoundMBasedOnThreshold(val.toString());\r\n                    $(element).text(str);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.roundK = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var format = 'K',\r\n                    val = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (val) {\r\n                    var str = general.formatNumber(val.toString(), format);\r\n                    $(element).text(str);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.kAmount = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var format = 'K',\r\n                    val = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (val) {\r\n                    var str = Format.toKAmount(val.toString(), format);\r\n                    $(element).text(str);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.amount = (function () {\r\n            var handleBinding = function (element, valueAccessor) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    isInput = $(element).is('input'),\r\n                    amount =\r\n                        Format.toAmount(rawValue) !== 'NA'\r\n                            ? Format.toAmount(rawValue)\r\n                            : rawValue;\r\n\r\n                if (isInput) {\r\n                    $(element).val(amount);\r\n                } else {\r\n                    $(element).text(amount);\r\n                }\r\n            };\r\n\r\n            return {\r\n                update: handleBinding,\r\n            };\r\n        })();\r\n\r\n        ko.bindingHandlers.roundAmount = (function () {\r\n            var handleBinding = function (element, valueAccessor) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    isInput = $(element).is('input'),\r\n                    amount = rawValue; // Format.toAmount(rawValue) !== \"NA\" ? Format.toAmount(rawValue) : rawValue;\r\n\r\n                if (rawValue !== '' && rawValue !== 'NA') {\r\n                    amount = parseFloat(rawValue);\r\n\r\n                    if (isNaN(amount)) {\r\n                        amount = '';\r\n                    } else {\r\n                        amount = Math.ceil(Math.abs(amount));\r\n                    }\r\n                }\r\n\r\n                if (isInput) {\r\n                    $(element).val(amount);\r\n                } else {\r\n                    $(element).text(amount);\r\n                }\r\n            };\r\n\r\n            return {\r\n                init: handleBinding,\r\n                update: handleBinding,\r\n            };\r\n        })();\r\n\r\n        ko.bindingHandlers.limitAmount = (function () {\r\n            var handleBinding = function (element, valueAccessor) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    isInput = $(element).is('input'),\r\n                    amount = Format.toAmount(rawValue);\r\n\r\n                if (amount === 'NA') {\r\n                    amount = 0;\r\n                }\r\n\r\n                if (isInput) {\r\n                    $(element).val(amount);\r\n                } else {\r\n                    $(element).text(general.formatNumberWithThousandsSeparator(amount));\r\n                }\r\n            };\r\n\r\n            return {\r\n                init: handleBinding,\r\n                update: handleBinding,\r\n            };\r\n        })();\r\n\r\n        // Returns the given value rounded with thousands separator\r\n        ko.bindingHandlers.toHumanReadableNumericFormat = {\r\n            init: function (element, valueAccessor) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor());\r\n                $(element).text(\r\n                    general.isEmptyValue(rawValue) ? '' : Format.toFixedAmount(rawValue)\r\n                );\r\n            },\r\n            update: function (element, valueAccessor) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor());\r\n                $(element).text(\r\n                    general.isEmptyValue(rawValue) ? '' : Format.toFixedAmount(rawValue)\r\n                );\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.round = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n                var amount = 0;\r\n\r\n                if (!general.isEmptyValue(value)) {\r\n                    amount = Format.toFixedAmount(value);\r\n                }\r\n\r\n                $(element).text(amount);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.percentage = {\r\n            init: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor()),\r\n                    el = $(element);\r\n                if (el.is('input') && value) {\r\n                    $(element).val(Format.toPercent(value));\r\n                } else {\r\n                    $(element).text(Format.toPercent(value));\r\n                }\r\n            },\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor()),\r\n                    el = $(element);\r\n                if (el.is('input') && value) {\r\n                    $(element).val(Format.toPercent(value));\r\n                } else {\r\n                    $(element).text(Format.toPercent(value));\r\n                }\r\n            },\r\n        };\r\n\r\n        // Web/Mobile\r\n        ko.bindingHandlers.smallFont = {\r\n            update: function (element, valueAccessor, allBindingsAccessor) {\r\n                var valueUnr = ko.utils.unwrapObservable(valueAccessor());\r\n                var charThreshold = allBindingsAccessor.get('smallFontThreshold') || 5;\r\n\r\n                if (!valueUnr) {\r\n                    return;\r\n                }\r\n\r\n                var str = allBindingsAccessor.get('roundM')\r\n                    ? general.formatRoundM(valueUnr.toString())\r\n                    : valueUnr.toString();\r\n\r\n                if (str.length > charThreshold) {\r\n                    $(element).addClass('small-font');\r\n                } else {\r\n                    $(element).removeClass('small-font');\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.dateFormatShortDayAndMonth = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n                var date = general.SplitDateTime(\r\n                    general.str2Date(value, 'd/m/Y H:M').ExtractDate()\r\n                );\r\n                var time = general.SplitDateTime(\r\n                    general.str2Date(value, 'd/m/Y H:M').ExtractTime()\r\n                );\r\n                var result =\r\n                    date.day +\r\n                    '/' +\r\n                    date.month.replace(/^0+/, '') +\r\n                    ' ' +\r\n                    time.hour +\r\n                    ':' +\r\n                    time.min;\r\n\r\n                $(element).text(result);\r\n            },\r\n        };\r\n\r\n        //07/07/17 15:01\r\n        ko.bindingHandlers.dateFormatShortDayMonthYear = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n                var date = general.SplitDateTime(\r\n                    general.str2Date(value, 'd/m/Y H:M').ExtractDate()\r\n                );\r\n                var time = general.SplitDateTime(\r\n                    general.str2Date(value, 'd/m/Y H:M').ExtractTime()\r\n                );\r\n                var result =\r\n                    date.day +\r\n                    '/' +\r\n                    date.month +\r\n                    '/' +\r\n                    date.year.substr(2, 2) +\r\n                    ' ' +\r\n                    time.hour +\r\n                    ':' +\r\n                    time.min;\r\n                $(element).text(result);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.dateFormatLongDateWithTime = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n                var options = {\r\n                    year: 'numeric',\r\n                    month: 'long',\r\n                    day: 'numeric',\r\n                    hour: 'numeric',\r\n                    minute: 'numeric',\r\n                    hour12: false,\r\n                };\r\n                var result = general\r\n                    .str2Date(value, 'd/m/Y H:M')\r\n                    .toLocaleDateString('en-US', options);\r\n                $(element).text(result);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.addDotInRange = {\r\n            // This will be called when the binding is first applied to an element\r\n            // Set up any initial state, event handlers, etc. here\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var observable = valueAccessor(),\r\n                    valueSubscriber,\r\n                    previousValueSubscriber,\r\n                    previousValue;\r\n\r\n                // Store the previous value\r\n                previousValueSubscriber = observable.subscribe(\r\n                    function (_previousValue) {\r\n                        previousValue = _previousValue;\r\n                    },\r\n                    null,\r\n                    'beforeChange'\r\n                );\r\n\r\n                valueSubscriber = observable.subscribe(function (value) {\r\n                    if (!mobile.check.s2_default) {\r\n                        return;\r\n                    }\r\n\r\n                    if (\r\n                        !value ||\r\n                        value.indexOf('.') != -1 ||\r\n                        value.length >= 5 ||\r\n                        value == 'NA'\r\n                    ) {\r\n                        return;\r\n                    }\r\n\r\n                    if (\r\n                        previousValue &&\r\n                        previousValue.indexOf('.') == previousValue.length - 1\r\n                    ) {\r\n                        if (value == previousValue.substring(0, previousValue.length - 1)) {\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n                    var ranges = [];\r\n                    var ar = $(element).attr('data-range').split(',');\r\n                    for (var i = 0; i < ar.length; i++) {\r\n                        var rangeField = ar[i];\r\n                        if (rangeField && rangeField in bindingContext.$data) {\r\n                            ranges.push(bindingContext.$data[rangeField]);\r\n                        }\r\n                    }\r\n\r\n                    if (ranges.length > 0) {\r\n                        var formattedVal = Format.addDotInRange(\r\n                            this.target(),\r\n                            ranges,\r\n                            previousValue\r\n                        );\r\n                        this.target(formattedVal);\r\n                    }\r\n                });\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                    if (previousValueSubscriber) {\r\n                        previousValueSubscriber.dispose();\r\n                        previousValueSubscriber = null;\r\n                    }\r\n\r\n                    if (valueSubscriber) {\r\n                        valueSubscriber.dispose();\r\n                        valueSubscriber = null;\r\n                    }\r\n\r\n                    element = null;\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.clearQuoteColor = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                clearTimeout(element.clearQuoteColorTimer);\r\n\r\n                element.clearQuoteColorTimer = setTimeout(\r\n                    function (targetElement) {\r\n                        $(targetElement).removeClass('green red up down');\r\n                    },\r\n                    1000,\r\n                    element\r\n                );\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.timeComponent = {\r\n            update: function (element, valueAccessor, allBindingsAccessor) {\r\n                var valueUnr = ko.utils.unwrapObservable(valueAccessor()) || '';\r\n                var newValueUnr = valueUnr.split(' ')[1];\r\n\r\n                if (newValueUnr) {\r\n                    $(element).html(newValueUnr);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.formattedText = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var formatted,\r\n                    originalText,\r\n                    originalFormatTextAttr = 'originalFormatText',\r\n                    $element = $(element),\r\n                    allBindings = allBindingsAccessor();\r\n\r\n                var getContent = function () {\r\n                    var content;\r\n\r\n                    if (allBindings.contentKey) {\r\n                        content = Dictionary.GetItem(\r\n                            allBindings.contentKey,\r\n                            allBindings.resourceName\r\n                        );\r\n                    } else {\r\n                        content = allBindings.encodeHTML ? $element.html() : $element.text();\r\n                    }\r\n\r\n                    return content;\r\n                };\r\n\r\n                if ($element.attr(originalFormatTextAttr)) {\r\n                    originalText = $element.attr(originalFormatTextAttr);\r\n                } else {\r\n                    originalText = getContent();\r\n                    $element.attr(originalFormatTextAttr, originalText);\r\n                }\r\n\r\n                if (allBindings.formatPattern) {\r\n                    formatted = originalText.replace(\r\n                        allBindings.formatPattern,\r\n                        ko.utils.unwrapObservable(valueAccessor())\r\n                    );\r\n                } else {\r\n                    formatted = String.format(\r\n                        originalText,\r\n                        ko.utils.unwrapObservable(valueAccessor())\r\n                    );\r\n                }\r\n\r\n                if (allBindings.name) {\r\n                    ko.postbox.publish(allBindings.name + '-text-formatted');\r\n                }\r\n\r\n                if (general.isDefinedType(allBindings.useAttr)) {\r\n                    $element.attr(allBindings.useAttr, formatted);\r\n                    $element.html('');\r\n\r\n                    return;\r\n                }\r\n\r\n                if (allBindings.encodeHTML) {\r\n                    $element.children().each(function (idx, item) {\r\n                        ko.removeNode(item);\r\n                    });\r\n\r\n                    $element.html(formatted);\r\n                    ko.applyBindingsToDescendants(bindingContext, element);\r\n                } else {\r\n                    $element.text(formatted);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.injectTemplate = {\r\n            init: function () {\r\n                return {\r\n                    controlsDescendantBindings: true,\r\n                };\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var $element = $(element),\r\n                    allBindings = allBindingsAccessor(),\r\n                    originalText = allBindings.encodeHTML\r\n                        ? $element.html()\r\n                        : $element.text(),\r\n                    formatted = originalText;\r\n\r\n                var values = ko.utils.unwrapObservable(valueAccessor());\r\n                for (var i = 0; i < values.length; i++) {\r\n                    var regExpForTemplates = new RegExp('\\\\{%' + i + '%\\\\}', 'gm');\r\n                    formatted = originalText.replace(\r\n                        regExpForTemplates,\r\n                        \"<!-- ko template: { name: '\" + values[i] + \"' } --><!-- /ko -->\"\r\n                    );\r\n                }\r\n\r\n                if (allBindings.encodeHTML) {\r\n                    $element.children().each(function (idx, item) {\r\n                        ko.removeNode(item);\r\n                    });\r\n\r\n                    $element.html(formatted);\r\n                    ko.applyBindingsToDescendants(bindingContext, element);\r\n                } else {\r\n                    $element.text(formatted);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.showDate = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()) || {},\r\n                    el = $(element),\r\n                    options = {\r\n                        value: '',\r\n                        date: true,\r\n                        time: {\r\n                            hour: false,\r\n                            min: false,\r\n                            sec: false,\r\n                        },\r\n                    },\r\n                    valueToDisplay = '';\r\n\r\n                if (general.isPrimitiveType(rawValue)) {\r\n                    options.value = rawValue;\r\n                }\r\n                else if (general.isDateType(rawValue)) {\r\n                    var dateObj = new Date(rawValue);\r\n                    options.value =\r\n                        dateObj.getDate() +\r\n                        '/' +\r\n                        (dateObj.getMonth() + 1) +\r\n                        '/' +\r\n                        dateObj.getFullYear() +\r\n                        ' ' +\r\n                        dateObj.getHours() +\r\n                        ':' +\r\n                        dateObj.getMinutes() +\r\n                        ':' +\r\n                        dateObj.getSeconds();\r\n                }\r\n                else {\r\n                    options = $.extend(options, rawValue);\r\n                }\r\n\r\n                if (general.isEmpty(options.value)) {\r\n                    el.html('');\r\n                    return;\r\n                }\r\n\r\n                var splitDateObj = general.SplitDateTime(options.value);\r\n                if (options.date) {\r\n                    valueToDisplay += splitDateObj.date;\r\n                }\r\n                if (options.time !== false) {\r\n                    if (options.time === true) {\r\n                        valueToDisplay += ' ' + splitDateObj.time;\r\n                    } else {\r\n                        if (options.time.hour) {\r\n                            valueToDisplay += ' ' + splitDateObj.hour;\r\n                        }\r\n                        if (options.time.min) {\r\n                            valueToDisplay += ':' + splitDateObj.min;\r\n                        }\r\n                        if (options.time.sec) {\r\n                            valueToDisplay += ':' + splitDateObj.sec;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                el.html(valueToDisplay);\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()) || {},\r\n                    el = $(element),\r\n                    options = {\r\n                        value: '',\r\n                        date: true,\r\n                        time: {\r\n                            hour: false,\r\n                            min: false,\r\n                            sec: false,\r\n                        },\r\n                    },\r\n                    valueToDisplay = '';\r\n\r\n                if (general.isPrimitiveType(rawValue)) {\r\n                    options.value = rawValue;\r\n                } else if (general.isDateType(rawValue)) {\r\n                    var dateObj = new Date(rawValue);\r\n                    options.value =\r\n                        dateObj.getDate() +\r\n                        '/' +\r\n                        (dateObj.getMonth() + 1) +\r\n                        '/' +\r\n                        dateObj.getFullYear() +\r\n                        ' ' +\r\n                        dateObj.getHours() +\r\n                        ':' +\r\n                        dateObj.getMinutes() +\r\n                        ':' +\r\n                        dateObj.getSeconds();\r\n                } else {\r\n                    options = $.extend(options, rawValue);\r\n                }\r\n\r\n                if (general.isEmpty(options.value)) {\r\n                    el.html('');\r\n                    return;\r\n                }\r\n\r\n                var splitDateObj = general.SplitDateTime(options.value);\r\n                if (options.date) {\r\n                    valueToDisplay += splitDateObj.date;\r\n                }\r\n                if (options.time !== false) {\r\n                    if (options.time === true) {\r\n                        valueToDisplay += ' ' + splitDateObj.time;\r\n                    } else {\r\n                        if (options.time.hour) {\r\n                            valueToDisplay += ' ' + splitDateObj.hour;\r\n                        }\r\n                        if (options.time.min) {\r\n                            valueToDisplay += ':' + splitDateObj.min;\r\n                        }\r\n                        if (options.time.sec) {\r\n                            valueToDisplay += ':' + splitDateObj.sec;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                el.html(valueToDisplay);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.valueDateText = {\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()) || {};\r\n                var el = $(element);\r\n                var valueToDisplay =\r\n                    (rawValue.valueDate.isValueDateEmpty\r\n                        ? Dictionary.GetItem('Daily') + ' '\r\n                        : '') +\r\n                    (general.isEmptyValue(rawValue.valueDate.date)\r\n                        ? ''\r\n                        : general.SplitDateTime(rawValue.valueDate.date).date +\r\n                        (rawValue.showHour\r\n                            ? ' ' + general.SplitDateTime(rawValue.valueDate.date).time\r\n                            : ''));\r\n                el.html(valueToDisplay);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.showFwPips = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    value = general.toNumeric(rawValue).toFixed(1),\r\n                    el = $(element);\r\n\r\n                if (value >= 0) {\r\n                    value = '+' + value;\r\n                }\r\n\r\n                el.html(value);\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    value = general.toNumeric(rawValue).toFixed(1),\r\n                    el = $(element);\r\n\r\n                if (value >= 0) {\r\n                    value = '+' + value;\r\n                }\r\n\r\n                el.html(value);\r\n            },\r\n        };\r\n\r\n        // Web/Mobile\r\n        ko.bindingHandlers.trendFromSignalSign = {\r\n            init: function (element, valueAccessor, allBindingsAccessor) {\r\n                var el = $(element);\r\n                var params = allBindingsAccessor();\r\n                var pre = !general.isNullOrUndefined(params.pre) ? params.pre : '(';\r\n                var post = !general.isNullOrUndefined(params.post) ? params.post : ')';\r\n                var sign = general.toNumeric(ko.utils.unwrapObservable(valueAccessor()));\r\n\r\n                function signFormat(value, prefix, suffix) {\r\n                    return prefix + (value === 0 ? '=' : applySign(value)) + suffix;\r\n                }\r\n\r\n                function applySign(value) {\r\n                    return value > 0 ? '+' + value : '-' + value;\r\n                }\r\n\r\n                general.toNumeric(sign) !== 'NA'\r\n                    ? el.text(signFormat(sign, pre, post))\r\n                    : el.text('');\r\n            },\r\n        };\r\n\r\n        // Web/Mobile\r\n        ko.bindingHandlers.imageFromSignalSign = {\r\n            init: function (element, valueAccessor) {\r\n                var sign = ko.utils.unwrapObservable(valueAccessor());\r\n                var el = $(element);\r\n                switch (sign) {\r\n                    case eSignalTrendsValues.StrongSell:\r\n                        el.addClass(eSignalTrendsImageClasses.South);\r\n                        break;\r\n                    case eSignalTrendsValues.Sell:\r\n                        el.addClass(eSignalTrendsImageClasses.SouthEast);\r\n                        break;\r\n                    case eSignalTrendsValues.Neutral:\r\n                        el.addClass(eSignalTrendsImageClasses.East);\r\n                        break;\r\n                    case eSignalTrendsValues.Buy:\r\n                        el.addClass(eSignalTrendsImageClasses.NorthEast);\r\n                        break;\r\n                    case eSignalTrendsValues.StrongBuy:\r\n                        el.addClass(eSignalTrendsImageClasses.North);\r\n                        break;\r\n                    default:\r\n                        el.addClass(eSignalTrendsImageClasses.None);\r\n                        break;\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.styleFromSignalSign = {\r\n            init: function (element, valueAccessor) {\r\n                var sign = ko.utils.unwrapObservable(valueAccessor());\r\n                var el = $(element);\r\n                switch (sign) {\r\n                    case eSignalTrendsValues.Buy:\r\n                    case eSignalTrendsValues.StrongBuy:\r\n                        el.addClass(eSignalTrendsColorClasses.Green);\r\n                        break;\r\n                    case eSignalTrendsValues.Sell:\r\n                    case eSignalTrendsValues.StrongSell:\r\n                        el.addClass(eSignalTrendsColorClasses.Red);\r\n                        break;\r\n                    default:\r\n                        el.addClass(eSignalTrendsColorClasses.Neutral);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.toppedPercentage = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n                var amount = 0;\r\n\r\n                if (!general.isEmptyValue(value)) {\r\n                    if (value > 100) {\r\n                        amount = '>100%';\r\n                    } else {\r\n                        amount = Format.toPercent(value);\r\n                    }\r\n                }\r\n\r\n                $(element).text(amount);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.toFixed = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    allBindings = allBindingsAccessor(),\r\n                    decimals = allBindings.decimals || 0,\r\n                    valueAsNum = general.toNumeric(rawValue);\r\n\r\n                if (valueAsNum) {\r\n                    var roundingMultiplier = Math.pow(10, decimals),\r\n                        valueToWrite =\r\n                            Math.round(valueAsNum * roundingMultiplier) / roundingMultiplier;\r\n\r\n                    if (!isNaN(valueToWrite)) {\r\n                        $(element).text(valueToWrite);\r\n                    } else {\r\n                        $(element).text('');\r\n                    }\r\n                }\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    allBindings = allBindingsAccessor(),\r\n                    decimals = allBindings.decimals || 0,\r\n                    value = general.toNumeric(rawValue);\r\n\r\n                if (value) {\r\n                    var roundingMultiplier = Math.pow(10, decimals),\r\n                        valueToWrite =\r\n                            Math.round(value * roundingMultiplier) / roundingMultiplier;\r\n\r\n                    if (!isNaN(valueToWrite)) {\r\n                        $(element).text(valueToWrite);\r\n                    } else {\r\n                        $(element).text('');\r\n                    }\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.toFixedAmount = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    allBindings = allBindingsAccessor(),\r\n                    decimals = allBindings.decimals || 0,\r\n                    value = general.toNumeric(rawValue) || 0;\r\n\r\n                if (!isNaN(value)) {\r\n                    var roundingMultiplier = Math.pow(10, decimals),\r\n                        amount = Math.round(value * roundingMultiplier) / roundingMultiplier;\r\n\r\n                    $(element).text(Format.toFixedAmount(amount));\r\n                }\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    allBindings = allBindingsAccessor(),\r\n                    decimals = allBindings.decimals || 0,\r\n                    value = general.toNumeric(rawValue) || 0;\r\n\r\n                if (!isNaN(value)) {\r\n                    var roundingMultiplier = Math.pow(10, decimals),\r\n                        amount = Math.round(value * roundingMultiplier) / roundingMultiplier;\r\n\r\n                    $(element).text(Format.toFixedAmount(amount));\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.toFixedAmountWithoutRounding = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    decimals = allBindingsAccessor().decimals || 0,\r\n                    amount = general.toNumeric(rawValue) || 0;\r\n\r\n                if (!isNaN(amount)) {\r\n                    if (decimals > 0) {\r\n                        var roundingMultiplier = Math.pow(10, decimals);\r\n                        amount = Math.round(amount * roundingMultiplier) / roundingMultiplier;\r\n                    }\r\n\r\n                    $(element).text(Format.toNumberWithThousandsSeparator(amount));\r\n                }\r\n            },\r\n            update: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindingsAccessor,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var rawValue = ko.utils.unwrapObservable(valueAccessor()),\r\n                    decimals = allBindingsAccessor().decimals || 0,\r\n                    amount = general.toNumeric(rawValue) || 0;\r\n\r\n                if (!isNaN(amount)) {\r\n                    if (decimals > 0) {\r\n                        var roundingMultiplier = Math.pow(10, decimals);\r\n                        amount = Math.round(amount * roundingMultiplier) / roundingMultiplier;\r\n                    }\r\n\r\n                    $(element).text(Format.toNumberWithThousandsSeparator(amount));\r\n                }\r\n            },\r\n        };\r\n\r\n        // Web/Mobile\r\n        ko.bindingHandlers.iframeElement = {\r\n            init: function (element, valueAccessor) {\r\n                var iframe = $(element)[0].contentWindow;\r\n                valueAccessor()(iframe);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.logger = {\r\n            update: function (element, valueAccessor, allBindings) {\r\n                /* eslint no-console: 0 */\r\n                //store a counter with this element\r\n                var count = ko.utils.domData.get(element, '_ko_logger') || 0,\r\n                    data = ko.toJS(valueAccessor() || allBindings());\r\n\r\n                ko.utils.domData.set(element, '_ko_logger', ++count);\r\n\r\n                if (window.console && console.log) {\r\n                    console.log(count, element, data);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.htmlToString = {\r\n            update: function (element, valueAccessor) {\r\n                $(element).text($('<div>' + valueAccessor() + '</div>').text());\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.stopBinding = {\r\n            init: function () {\r\n                return { controlsDescendantBindings: true };\r\n            },\r\n        };\r\n\r\n        ko.virtualElements.allowedBindings.stopBinding = true;\r\n\r\n        // Web/Mobile\r\n        ko.bindingHandlers.isProcessing = (function () {\r\n            return {\r\n                init: function (element) {\r\n                    if (!(element.tagName === 'DIV' && $(element).hasClass('button'))) {\r\n                        element.initialText = $(element).text();\r\n                    }\r\n                },\r\n                update: function (element, valueAccessor) {\r\n                    var params = ko.unwrap(valueAccessor());\r\n\r\n                    if (params.switchText && params.showProcessIcon) {\r\n                        $(element).text(Dictionary.GetItem('risk_processing'));\r\n                    } else {\r\n                        $(element).text(element.initialText);\r\n                    }\r\n\r\n                    if (params.showProcessIcon) {\r\n                        $(element).addClass('js_processing');\r\n                    } else {\r\n                        $(element).removeClass('js_processing');\r\n                    }\r\n                },\r\n            };\r\n        })();\r\n\r\n        // Web/Mobile\r\n        ko.bindingHandlers.progressBar = {\r\n            init: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                var minimumValue = ko.utils.unwrapObservable(options.minimumValue),\r\n                    maximumValue = ko.utils.unwrapObservable(options.maximumValue),\r\n                    currentValue = ko.utils.unwrapObservable(options.currentValue),\r\n                    currencyId = ko.utils.unwrapObservable(options.currencyId),\r\n                    progress = general.toNumeric(\r\n                        (currentValue / (maximumValue - minimumValue)) * 100\r\n                    ),\r\n                    simpleProgressBar = options.simpleProgressBar || false,\r\n                    bubbleOrientationChangeMaxValue = 85;\r\n\r\n                progress = Math.min(progress, 100);\r\n\r\n                if (simpleProgressBar) {\r\n                    var $progressBarLine = $('<div>')\r\n                        .addClass('current-value')\r\n                        .css({ width: progress + '%' });\r\n                    $(element).append($progressBarLine);\r\n                    return;\r\n                }\r\n\r\n                $(element).append(\r\n                    $('<span>')\r\n                        .addClass('minimum-value direction-ltr')\r\n                        .html(\r\n                            Format.toNumberWithCurrency(minimumValue, {\r\n                                maximumFractionDigits: 0,\r\n                                currencyId: currencyId,\r\n                            })\r\n                        )\r\n                );\r\n\r\n                var $progressBar = $('<div>').addClass('cash-progress-bar'),\r\n                    $currentValue = $('<div>')\r\n                        .addClass('current-value')\r\n                        .css({ width: progress + '%' }),\r\n                    $bubble = $('<div>')\r\n                        .addClass('bubble direction-ltr')\r\n                        .html(\r\n                            Format.toNumberWithCurrency(currentValue, {\r\n                                currencyId: currencyId,\r\n                            })\r\n                        );\r\n\r\n                if (progress > bubbleOrientationChangeMaxValue)\r\n                    $bubble.addClass('reversed');\r\n\r\n                $currentValue.append($bubble);\r\n                $progressBar.append($currentValue);\r\n                $(element).append($progressBar);\r\n                $(element).append(\r\n                    $('<span>')\r\n                        .addClass('maximum-value direction-ltr')\r\n                        .html(\r\n                            Format.toNumberWithCurrency(maximumValue, {\r\n                                currencyId: currencyId,\r\n                            })\r\n                        )\r\n                );\r\n                $(element)\r\n                    .find('.minimum-value')\r\n                    .width($(element).find('.minimum-value').width());\r\n                $(element)\r\n                    .find('.maximum-value')\r\n                    .width($(element).find('.maximum-value').width());\r\n            },\r\n            update: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                var minimumValue = general.toNumeric(\r\n                    ko.utils.unwrapObservable(options.minimumValue)\r\n                ),\r\n                    maximumValue = general.toNumeric(\r\n                        ko.utils.unwrapObservable(options.maximumValue)\r\n                    ),\r\n                    currentValue = general.toNumeric(\r\n                        ko.utils.unwrapObservable(options.currentValue)\r\n                    ),\r\n                    currencyId = ko.utils.unwrapObservable(options.currencyId),\r\n                    progress = general.toNumeric(\r\n                        (currentValue / (maximumValue - minimumValue)) * 100\r\n                    ),\r\n                    bubbleOrientationChangeMaxValue = 85;\r\n\r\n                progress = Math.min(progress, 100);\r\n                $(element)\r\n                    .find('.minimum-value')\r\n                    .html(\r\n                        Format.toNumberWithCurrency(minimumValue, {\r\n                            maximumFractionDigits: 0,\r\n                            currencyId: currencyId,\r\n                        })\r\n                    );\r\n                $(element)\r\n                    .find('.maximum-value')\r\n                    .html(\r\n                        Format.toNumberWithCurrency(maximumValue, { currencyId: currencyId })\r\n                    );\r\n                $(element)\r\n                    .find('.current-value')\r\n                    .css({ width: progress + '%' });\r\n                $(element)\r\n                    .find('.bubble')\r\n                    .html(\r\n                        Format.toNumberWithCurrency(currentValue, { currencyId: currencyId })\r\n                    );\r\n\r\n                if (progress > bubbleOrientationChangeMaxValue)\r\n                    $(element).find('.bubble').addClass('reversed');\r\n                $(element)\r\n                    .find('.minimum-value, .maximum-value')\r\n                    .addClass('text-positioned');\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.html5InputsProxy = {\r\n            init: function (element, valueAccessor) {\r\n                var observable = valueAccessor(),\r\n                    currentValue = ko.utils.unwrapObservable(observable),\r\n                    observableSubscriptions = observable.subscribe(function (value) {\r\n                        if (value !== element.value) {\r\n                            element.value = value;\r\n                        }\r\n                    });\r\n\r\n                // keyup event\r\n                function keyupEventListener(e) {\r\n                    if (\r\n                        element.validity.valid &&\r\n                        !element.validity.badInput &&\r\n                        observable() !== element.value\r\n                    ) {\r\n                        observable(element.value);\r\n                    }\r\n                }\r\n\r\n                element.value = currentValue;\r\n                element.addEventListener('keyup', keyupEventListener);\r\n\r\n                // disposes\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function (\r\n                    elementToDispose\r\n                ) {\r\n                    if (observableSubscriptions) {\r\n                        observableSubscriptions.dispose();\r\n                        observableSubscriptions = null;\r\n                    }\r\n\r\n                    elementToDispose.removeEventListener(\r\n                        'keyup',\r\n                        keyupEventListener,\r\n                        false\r\n                    );\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.ratesClasses = {\r\n            init: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor()) || {};\r\n\r\n                if (options.disabled) {\r\n                    return;\r\n                }\r\n\r\n                options.rateObservable.extend({ notify: 'always' });\r\n                options.lastClass = ko.observable('');\r\n\r\n                var subscriber = options.rateObservable.subscribe(addCssClasses, options);\r\n\r\n                function addCssClasses(newValue) {\r\n                    if (general.isFunctionType(options.showInput) && options.showInput()) {\r\n                        this.lastClass('');\r\n                        ko.applyBindingsToNode(element, { css: options.lastClass });\r\n\r\n                        return;\r\n                    }\r\n\r\n                    switch (newValue) {\r\n                        case eQuoteStates.Up:\r\n                            this.lastClass(\r\n                                this.lastClass() === this.up[0] ? this.up[1] : this.up[0]\r\n                            );\r\n                            break;\r\n                        case eQuoteStates.Down:\r\n                            this.lastClass(\r\n                                this.lastClass() === this.down[0] ? this.down[1] : this.down[0]\r\n                            );\r\n                            break;\r\n                        case eQuoteStates.NotChanged:\r\n                            this.lastClass(this.notChanged);\r\n                            break;\r\n                        default:\r\n                            this.lastClass('');\r\n                    }\r\n                }\r\n\r\n                ko.applyBindingsToNode(element, { css: options.lastClass });\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                    if (subscriber) {\r\n                        subscriber.dispose();\r\n                        subscriber = null;\r\n                    }\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.attrIf = {\r\n            update: function (element, valueAccessor, allBindingsAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor()) || {};\r\n                ko.utils.objectForEach(value, function (attrName, attrValue) {\r\n                    var show = ko.utils.unwrapObservable(attrValue);\r\n                    if (typeof show !== 'undefined' && show !== null && show !== '') {\r\n                        ko.bindingHandlers.attr.update(\r\n                            element,\r\n                            valueAccessor,\r\n                            allBindingsAccessor\r\n                        );\r\n                    }\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers['data-automation'] = {\r\n            init: function (element, valueAccessor) {\r\n                var key = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (!key) {\r\n                    return;\r\n                }\r\n\r\n                element.setAttribute('data-automation', key);\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function (\r\n                    elementToDispose\r\n                ) {\r\n                    elementToDispose.removeAttribute('data-automation');\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.progressBarAutoResize = {\r\n            update: function (element) {\r\n                function setProgressBarWidth() {\r\n                    setTimeout(function () {\r\n                        var parent = $('.progress-steps ul'),\r\n                            initialWidth = parent.innerWidth(),\r\n                            leftMargin =\r\n                                parent.find('li:first-child div').innerWidth() / 2 + 20,\r\n                            rightMargin =\r\n                                parent.find('li:visible:last div').innerWidth() / 2 + 20,\r\n                            offset = leftMargin + rightMargin,\r\n                            progressBarWidth = initialWidth - offset + 'px',\r\n                            totalMargin = LanguageHelper.IsRtlLanguage()\r\n                                ? '0 ' + leftMargin + 'px 0 ' + rightMargin + 'px'\r\n                                : '0 ' + rightMargin + 'px 0 ' + leftMargin + 'px';\r\n\r\n                        $(element).css({\r\n                            width: progressBarWidth,\r\n                            margin: totalMargin,\r\n                        });\r\n                    }, 200);\r\n                }\r\n\r\n                setProgressBarWidth();\r\n\r\n                $(window).on('resize.progressBarAutoResize', setProgressBarWidth);\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                    $(window).off('resize.progressBarAutoResize', setProgressBarWidth);\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.placeholder = {\r\n            init: function (element, valueAccessor) {\r\n                var options = ko.unwrap(valueAccessor()),\r\n                    onFocusText = options.onFocus || '',\r\n                    onBlurText = options.onBlur || '';\r\n\r\n                var handleElementFocusChange = function (el, isFocused) {\r\n                    var ownerDoc = el.ownerDocument;\r\n                    if ('activeElement' in ownerDoc) {\r\n                        var active;\r\n                        try {\r\n                            active = ownerDoc.activeElement;\r\n                        } catch (e) {\r\n                            active = ownerDoc.body;\r\n                        }\r\n\r\n                        isFocused = active === el;\r\n                    }\r\n\r\n                    element.setAttribute(\r\n                        'placeholder',\r\n                        isFocused ? onFocusText : onBlurText\r\n                    );\r\n                };\r\n\r\n                var handleElementFocusIn = handleElementFocusChange.bind(\r\n                    null,\r\n                    element,\r\n                    true\r\n                );\r\n                var handleElementFocusOut = handleElementFocusChange.bind(\r\n                    null,\r\n                    element,\r\n                    false\r\n                );\r\n\r\n                ko.utils.registerEventHandler(element, 'focus', handleElementFocusIn);\r\n                ko.utils.registerEventHandler(element, 'blur', handleElementFocusOut);\r\n\r\n                handleElementFocusOut();\r\n            },\r\n        };\r\n\r\n        /**\r\n         * add \"className\" to \"classElementId\" if \"valueElementId\" has value\r\n         */\r\n        ko.bindingHandlers.cssIfValue = {\r\n            init: function (\r\n                element,\r\n                valueAccessor,\r\n                allBindings,\r\n                viewModel,\r\n                bindingContext\r\n            ) {\r\n                var options = valueAccessor() || {},\r\n                    classElementId = options.classElementId || element.id,\r\n                    valueElementId = options.valueElementId || element.id,\r\n                    className = options.className,\r\n                    classElement = document.getElementById(classElementId) || element,\r\n                    valueElement = document.getElementById(valueElementId) || element,\r\n                    isEmpty = ko.observable(false);\r\n\r\n                if (general.isEmptyValue(className)) {\r\n                    return;\r\n                }\r\n\r\n                general.isEmpty(!general.isEmptyValue(valueElement.value));\r\n\r\n                function onDispose(elementToDispose) {\r\n                    $(elementToDispose).off('change keyup', onChange);\r\n                    isEmpty = null;\r\n                }\r\n\r\n                function onChange() {\r\n                    general.isEmpty(!general.isEmptyValue(valueElement.value));\r\n                }\r\n\r\n                $(valueElement).on('change keyup', onChange);\r\n\r\n                var cssBind = {};\r\n                cssBind[className] = isEmpty;\r\n\r\n                ko.applyBindingsToNode(classElement, { css: cssBind }, bindingContext);\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(valueElement, onDispose);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.scrollHere = {\r\n            update: function (element, valueAccessor) {\r\n                var value = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (value) {\r\n                    var boundRectagle = element.getBoundingClientRect();\r\n                    if (boundRectagle.top < 0) {\r\n                        window.scrollBy(0, boundRectagle.top);\r\n                    }\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.setFocusToId = {\r\n            init: function (element, valueAccesor) {\r\n                $(element).on('click', function () {\r\n                    var elementId = '#' + valueAccesor();\r\n                    $(elementId).trigger('focus');\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.specificUploadButton = {\r\n            init: function (element) {\r\n                if (!(Browser.isChrome() || !Browser.isChromeOnIOS())) {\r\n                    return;\r\n                }\r\n\r\n                element.parentElement.classList.add('specific');\r\n            },\r\n            update: function (element, valueAccessor) {\r\n                if (!(Browser.isChrome() || !Browser.isChromeOnIOS())) {\r\n                    return;\r\n                }\r\n\r\n                var isBrowseEnabled = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n                if (isBrowseEnabled) {\r\n                    element.classList.add('enabled');\r\n                } else {\r\n                    element.classList.remove('enabled');\r\n                }\r\n            },\r\n        };\r\n\r\n        var ArrowList = function ArrowList(element) {\r\n            var $rightArrowContainer = $(element).find('.right-arrow'),\r\n                $leftArrowContainer = $(element).find('.left-arrow'),\r\n                $scrollableContainer = $(element).find('.arrow-navigation-list'),\r\n                $listParent = $(element),\r\n                offset = 100,\r\n                duration = 300,\r\n                hiddenClass = 'hidden',\r\n                liItemClass = '.list-item';\r\n\r\n            function registerEvents() {\r\n                $rightArrowContainer.on('click', function () {\r\n                    var leftPos = $scrollableContainer.scrollLeft();\r\n\r\n                    $scrollableContainer.animate(\r\n                        {\r\n                            scrollLeft: leftPos + offset,\r\n                        },\r\n                        duration,\r\n                        function () {\r\n                            if (isScrollRightEnd()) {\r\n                                $rightArrowContainer.addClass(hiddenClass);\r\n                            }\r\n\r\n                            $leftArrowContainer.removeClass(hiddenClass);\r\n                        }\r\n                    );\r\n                });\r\n\r\n                $leftArrowContainer.on('click', function () {\r\n                    var leftPos = $scrollableContainer.scrollLeft();\r\n\r\n                    $scrollableContainer.animate(\r\n                        {\r\n                            scrollLeft: leftPos - offset,\r\n                        },\r\n                        duration,\r\n                        function () {\r\n                            $rightArrowContainer.removeClass(hiddenClass);\r\n\r\n                            if (isScrollLeftEnd()) {\r\n                                $leftArrowContainer.addClass(hiddenClass);\r\n                            }\r\n                        }\r\n                    );\r\n                });\r\n            }\r\n\r\n            function unregisterEvents() {\r\n                $leftArrowContainer.off('click');\r\n                $rightArrowContainer.off('click');\r\n            }\r\n\r\n            function isScrollLeftEnd() {\r\n                var leftPos = $scrollableContainer.scrollLeft();\r\n                return leftPos <= 0;\r\n            }\r\n\r\n            function isScrollRightEnd() {\r\n                var newScrollLeft = $scrollableContainer.scrollLeft(),\r\n                    width = $scrollableContainer.width(),\r\n                    scrollWidth = $scrollableContainer.get(0).scrollWidth;\r\n\r\n                return scrollWidth - newScrollLeft - width == 0;\r\n            }\r\n\r\n            function scrollToActiveItem() {\r\n                var $listItems = $scrollableContainer.find(liItemClass);\r\n\r\n                $listItems.each(function () {\r\n                    var $activeElement = $(this).find('.active')[0];\r\n\r\n                    if (!general.isNullOrUndefined($activeElement)) {\r\n                        $scrollableContainer.animate(\r\n                            {\r\n                                scrollLeft: $(this).position().left,\r\n                            },\r\n                            duration,\r\n                            function () {\r\n                                if (isScrollRightEnd()) {\r\n                                    $rightArrowContainer.addClass(hiddenClass);\r\n                                } else if (isScrollLeftEnd()) {\r\n                                    $leftArrowContainer.addClass(hiddenClass);\r\n                                }\r\n                            }\r\n                        );\r\n                    }\r\n                });\r\n            }\r\n\r\n            function setListWidth() {\r\n                var widthParent = $listParent.width();\r\n                if (widthParent) {\r\n                    $scrollableContainer.width(widthParent);\r\n                }\r\n            }\r\n\r\n            function getTotalListWidth() {\r\n                var $listItems = $scrollableContainer.find(liItemClass),\r\n                    totalListWidth = 0;\r\n\r\n                $listItems.each(function () {\r\n                    totalListWidth += $(this).width();\r\n                });\r\n\r\n                return totalListWidth;\r\n            }\r\n\r\n            function setArrowsVisibleOnInit() {\r\n                var widthParent = $listParent.width(),\r\n                    totalListWidth = getTotalListWidth();\r\n\r\n                if (widthParent < totalListWidth) {\r\n                    $leftArrowContainer.removeClass(hiddenClass);\r\n                    $rightArrowContainer.removeClass(hiddenClass);\r\n                    setListWidth();\r\n                } else {\r\n                    $rightArrowContainer.addClass(hiddenClass);\r\n                    $leftArrowContainer.addClass(hiddenClass);\r\n                }\r\n            }\r\n\r\n            function isListWidthEmpty() {\r\n                var widthParent = $listParent.width(),\r\n                    totalListWidth = getTotalListWidth();\r\n\r\n                return widthParent === 0 && totalListWidth === 0;\r\n            }\r\n\r\n            function setArrowsVisibleOnResize() {\r\n                var widthParent = $listParent.width(),\r\n                    totalListWidth = getTotalListWidth();\r\n\r\n                if (widthParent <= totalListWidth) {\r\n                    if (isScrollRightEnd()) {\r\n                        $rightArrowContainer.addClass(hiddenClass);\r\n                    } else {\r\n                        $rightArrowContainer.removeClass(hiddenClass);\r\n                    }\r\n\r\n                    if (isScrollLeftEnd()) {\r\n                        $leftArrowContainer.addClass(hiddenClass);\r\n                    } else {\r\n                        $leftArrowContainer.removeClass(hiddenClass);\r\n                    }\r\n                } else {\r\n                    $rightArrowContainer.addClass(hiddenClass);\r\n                    $leftArrowContainer.addClass(hiddenClass);\r\n                }\r\n            }\r\n\r\n            return {\r\n                isScrollRightEnd: isScrollRightEnd,\r\n                setArrowsVisibleOnInit: setArrowsVisibleOnInit,\r\n                setArrowsVisibleOnResize: setArrowsVisibleOnResize,\r\n                setListWidth: setListWidth,\r\n                scrollToActiveItem: scrollToActiveItem,\r\n                registerEvents: registerEvents,\r\n                unregisterEvents: unregisterEvents,\r\n                isListWidthEmpty: isListWidthEmpty,\r\n            };\r\n        };\r\n\r\n        ko.bindingHandlers.arrowList = {\r\n            init: function (element, valueAccessor, allBindings, viewModel) {\r\n                var arrowList = new ArrowList(element);\r\n\r\n                viewModel.Data.itemsRendered = ko.observable(false);\r\n                var intervalId;\r\n\r\n                viewModel.Data.itemsRendered.subscribe(function (value) {\r\n                    if (value) {\r\n                        intervalId = setInterval(function () {\r\n                            if (!arrowList.isListWidthEmpty()) {\r\n                                arrowList.setArrowsVisibleOnInit();\r\n                                arrowList.scrollToActiveItem();\r\n                                viewModel.Data.itemsRendered(false);\r\n\r\n                                clearInterval(intervalId);\r\n\r\n                                setTimeout(function () {\r\n                                    arrowList.setArrowsVisibleOnInit();\r\n                                    arrowList.scrollToActiveItem();\r\n                                }, 1000);\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                arrowList.registerEvents();\r\n\r\n                $(window).on('resize', function () {\r\n                    arrowList.setListWidth();\r\n                    arrowList.setArrowsVisibleOnResize();\r\n                });\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                    arrowList.unregisterEvents();\r\n                    clearInterval(intervalId);\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.renderArrowListItem = {\r\n            update: function (element, valueAccessor) {\r\n                var data = ko.unwrap(valueAccessor());\r\n                var listLength = data.length;\r\n                var currentIndex = data.index();\r\n\r\n                if (currentIndex === listLength - 1) {\r\n                    data.itemsRendered(true);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.electronicSignature = {\r\n            init: function (element, valueAccessor, allBindings, viewModel) {\r\n                var initTimeout,\r\n                    setCanvasSize = function () {\r\n                        element.setAttribute('width', element.parentElement.clientWidth);\r\n                        element.setAttribute('height', element.parentElement.clientHeight);\r\n                    },\r\n                    initCanvas = function () {\r\n                        if (initTimeout) {\r\n                            clearTimeout(initTimeout);\r\n                        }\r\n\r\n                        if (\r\n                            element.parentElement.clientWidth === 0 ||\r\n                            element.parentElement.clientHeight === 0\r\n                        ) {\r\n                            initTimeout = setTimeout(function () {\r\n                                initCanvas();\r\n                            }, 200);\r\n                        } else {\r\n                            setCanvasSize();\r\n                        }\r\n                    },\r\n                    resizeCallBack = function () {\r\n                        var canvasW = element.getAttribute('width'),\r\n                            canvasH = element.getAttribute('height');\r\n                        if (\r\n                            canvasW != element.parentElement.clientWidth ||\r\n                            canvasH != element.parentElement.clientHeight\r\n                        ) {\r\n                            setCanvasSize();\r\n                            viewModel.ClearSignature();\r\n                        }\r\n                    };\r\n\r\n                initCanvas();\r\n                viewModel.InitCanvas(element);\r\n\r\n                window.addEventListener('resize', resizeCallBack);\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                    clearTimeout(initTimeout);\r\n                    window.removeEventListener('resize', resizeCallBack);\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.triggerClickWhen = {\r\n            init: function (element, valueAccessor) {\r\n                var subscribers = [],\r\n                    options = valueAccessor(),\r\n                    postboxTopic = options.postboxTopic;\r\n\r\n                subscribers.push(\r\n                    ko.postbox.subscribe(postboxTopic, function triggerClickOnce() {\r\n                        subscribers.push(options.isActive.subscribe(isBrowseEnabledChanged));\r\n\r\n                        isBrowseEnabledChanged(options.isActive());\r\n                    })\r\n                );\r\n\r\n                function isBrowseEnabledChanged(isActive) {\r\n                    if (!isActive) {\r\n                        return;\r\n                    }\r\n\r\n                    element.click();\r\n\r\n                    if (subscribers) {\r\n                        general.disposeArray(subscribers);\r\n                    }\r\n                }\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                    if (subscribers) {\r\n                        general.disposeArray(subscribers);\r\n                    }\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.elementToImage = {\r\n            init: function (element, valueAccessor, allBindings, viewModel) {\r\n                var getPageTopoffset = function () {\r\n                    return window.pageYOffset !== 0 ? -window.pageYOffset : 0;\r\n                };\r\n                viewModel.setPrintSettings(element, getPageTopoffset);\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.showIntrumentNotAvailable = {\r\n            init: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor()),\r\n                    $container = $(element);\r\n\r\n                if (!options.isAvailable) {\r\n                    $container.addClass('instrument-unavailable');\r\n                } else {\r\n                    $container.addClass('instrument-available');\r\n                }\r\n            },\r\n            update: function (element, valueAccessor) {\r\n                var options = ko.utils.unwrapObservable(valueAccessor()),\r\n                    instrData = options.instrData,\r\n                    $container = $(element),\r\n                    $dealContainer = $('.' + options.dealContainerClass),\r\n                    $instrUnavailableWrapper = $('.instrument-unavailable-wrapper'),\r\n                    dealInstrUnavailableClass = 'deal-container-instrument-notavailable',\r\n                    instrAvailableClass = 'instrument-available',\r\n                    instrUnavailableClass = 'instrument-unavailable';\r\n\r\n                $container.css({ height: 'auto' });\r\n\r\n                if (!instrData.isAvailable) {\r\n                    $instrUnavailableWrapper.show();\r\n                    $dealContainer.addClass(dealInstrUnavailableClass);\r\n                    $container.addClass(instrUnavailableClass);\r\n                    $container.removeClass(instrAvailableClass);\r\n                } else if (!instrData.isChanged) {\r\n                    if (options.keepContainerHeight) {\r\n                        $container.css({ height: $container.height() + 'px' });\r\n                    }\r\n                    $instrUnavailableWrapper.hide();\r\n                } else {\r\n                    $instrUnavailableWrapper.show();\r\n                    $container.addClass(instrAvailableClass);\r\n                    $container.removeClass(instrUnavailableClass);\r\n                    $dealContainer.removeClass(dealInstrUnavailableClass);\r\n                }\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.adjustMainContainerSize = {\r\n            init: function (element, valueAccessor, allBindingsAccessor, viewModel) {\r\n                var options = valueAccessor() || {},\r\n                    topOffset = options.topOffset,\r\n                    mainWr = document.getElementsByClassName('mainWrapper')[0],\r\n                    el = document.getElementById(options.elementId),\r\n                    calcTimeout;\r\n\r\n                var setBodyMinHeight = function () {\r\n                        var elementHeight = el.offsetHeight + topOffset;\r\n\r\n                        mainWr.style.minHeight = '';\r\n                        if (mainWr.offsetHeight < elementHeight) {\r\n                            mainWr.style.minHeight = elementHeight + 'px';\r\n                        }\r\n                    },\r\n                    calculateHeight = function () {\r\n                        if (calcTimeout) {\r\n                            clearTimeout(calcTimeout);\r\n                        }\r\n\r\n                        calcTimeout = setTimeout(function () {\r\n                            setBodyMinHeight();\r\n                        }, 500);\r\n                    };\r\n\r\n                calculateHeight();\r\n\r\n                viewModel.Data.userFlowToggle.subscribe(function () {\r\n                    calculateHeight();\r\n                });\r\n\r\n                window.addEventListener('resize', function () {\r\n                    calculateHeight();\r\n                });\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n                    window.removeEventListener('resize', calculateHeight);\r\n                    mainWr.style.minHeight = '';\r\n                    clearTimeout(calcTimeout);\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.trackingEvent = {\r\n            init: function (element, valueAccessor) {\r\n                var trackEvent = valueAccessor();\r\n\r\n                function f() {\r\n                    ko.postbox.publish(trackEvent.name, trackEvent.data);\r\n                }\r\n\r\n                element.addEventListener('click', f, false);\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function (\r\n                    elementToDispose\r\n                ) {\r\n                    element.removeEventListener(f);\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers['play-walkthroug'] = {\r\n            init: function (element, valueAccessor) {\r\n                var walkthrough = require('fxnet/uilayer/Modules/WalkthroughsModule'),\r\n                    walkthroughId = valueAccessor();\r\n\r\n                function f(e) {\r\n                    walkthrough.walkthroughWidget.play(walkthroughId);\r\n                }\r\n\r\n                element.addEventListener('click', f, false);\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function (\r\n                    elementToDispose\r\n                ) {\r\n                    element.removeEventListener(f);\r\n                });\r\n            },\r\n        };\r\n\r\n        ko.bindingHandlers.securityLogo = {\r\n            init: function (element) {\r\n                var logoId = $(element).attr(\"id\");\r\n                window.__dcid = window.__dcid || []; window.__dcid.push([logoId, \"15\", \"s\", \"black\", \"6VaWSBzf\"]);\r\n\r\n                (function () {\r\n                    var cid = document.createElement(\"script\");\r\n                    cid.async = true;\r\n                    cid.src = \"//seal.digicert.com/seals/cascade/seal.min.js\";\r\n                    var s = document.getElementsByTagName(\"script\");\r\n                    var ls = s[(s.length - 1)];\r\n                    ls.parentNode.insertBefore(cid, ls.nextSibling);\r\n                }());\r\n            }\r\n        };\r\n    });\r\n\n",
    "define(\r\n    'devicehelpers/keyboard-status',\r\n    [\r\n        'knockout'\r\n    ],\r\n    function (ko) {\r\n        var kybOn = ko.observable(),\r\n            maxHeight = -1,\r\n            maxWidth = -1,\r\n            height4calculations,\r\n            deltaHeight = 0.33;\r\n\r\n        if (!window.matchMedia) {\r\n            return;\r\n        }\r\n\r\n        function isPortretLayout() {\r\n            return window.matchMedia(\"(orientation: portrait)\").matches\r\n        }\r\n\r\n        function setMaxSizes() {\r\n            if (isPortretLayout()) {\r\n                maxHeight = Math.max(maxHeight, screen.height);\r\n                maxWidth = Math.max(maxWidth, screen.width);\r\n                height4calculations = maxHeight;\r\n            }\r\n            else {\r\n                maxHeight = Math.max(maxHeight, screen.width);\r\n                maxWidth = Math.max(maxWidth, screen.height);\r\n                height4calculations = maxWidth;\r\n            }\r\n        }\r\n\r\n        setMaxSizes();\r\n\r\n        function isKeyboardVisible() {\r\n            var currentDeltaHeight = Math.abs((height4calculations - window.innerHeight) / height4calculations);\r\n\r\n            var kybIsVisible = (currentDeltaHeight >= deltaHeight);\r\n\r\n            return kybIsVisible;\r\n        }\r\n\r\n        kybOn(isKeyboardVisible());\r\n\r\n        window.addEventListener('resize', function () {\r\n            setMaxSizes();\r\n\r\n            if (kybOn() !== isKeyboardVisible()) {\r\n                kybOn(isKeyboardVisible());\r\n            }\r\n        })\r\n\r\n        ko.bindingHandlers['kyb-status'] = {\r\n            update: function (element, valueAccessor) {\r\n                var keyboardOnClass = 'kybOn',\r\n                    keyboardOffClass = 'kybOff';\r\n\r\n                var subscription = kybOn.subscribe(function (keybOn) {\r\n                    var cNew = keybOn ? keyboardOnClass : keyboardOffClass,\r\n                        cToRemove = keybOn ? keyboardOffClass : keyboardOnClass;\r\n\r\n                    element.classList.remove(cToRemove);\r\n                    element.classList.add(cNew);\r\n                });\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n                    if (subscription) {\r\n                        subscription.dispose();\r\n                        subscription = null;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n);\r\n\n",
    "/* global $, debounce */\r\nfunction swipe(target, maxDistance, callback) {\r\n    maxDistance = maxDistance || 95; // swipe movement of 95 pixels triggers the swipe\r\n\r\n    var maxTime = 1000, // allow movement if < 1000 ms (1 sec)\r\n        startX = 0,\r\n        startTime = 0,\r\n        touch = 'ontouchend' in document,\r\n        startEvent = ((touch) ? 'touchstart' : 'mousedown') + '.swipe',\r\n        moveEvent = ((touch) ? 'touchmove' : 'mousemove') + '.swipe',\r\n        endEvent = ((touch) ? 'touchend' : 'mouseup') + '.swipe';\r\n\r\n    $(target).addClass('__swipe_parent');\r\n\r\n    $(target).on(startEvent, function startEventHandler(e) {\r\n        var delegateTarget = $(e.target).closest('.__swipe_parent').get(0);\r\n        if (e.currentTarget === delegateTarget) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        startTime = e.timeStamp;\r\n        startX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX;\r\n\r\n    }).on(endEvent, function endEventHandler(e) {\r\n        var delegateTarget = $(e.target).closest('.__swipe_parent').get(0);\r\n        if (e.currentTarget === delegateTarget) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        startTime = 0;\r\n        startX = 0;\r\n\r\n    }).on(moveEvent, debounce(function moveEventHandler(e) {\r\n        var delegateTarget = $(e.target).closest('.__swipe_parent').get(0);\r\n        if (e.currentTarget === delegateTarget) {\r\n            e.stopPropagation();\r\n        }\r\n\r\n        var currentX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX,\r\n            currentDistance = (startX === 0) ? 0 : Math.abs(currentX - startX),\r\n            // allow if movement < 1 sec\r\n            currentTime = e.timeStamp;\r\n\r\n        if (startTime !== 0 && currentTime - startTime < maxTime && currentDistance > maxDistance) {\r\n            if (currentX < startX || currentX > startX) {\r\n                callback(currentX, startX, this);\r\n            }\r\n\r\n            startTime = 0;\r\n            startX = 0;\r\n        }\r\n    }, 5));\r\n}\r\n\r\nfunction swipeDestroy(target) {\r\n    $(target).off('.swipe');\r\n};\ndefine(\"global/swipe\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.swipe;\n    };\n}(this)));\n\n",
    "define('vendor/normalize-scroll-left',\r\n    [\r\n        \"require\",\r\n        \"exports\"\r\n    ],\r\n    function (require, exports) {\r\n        \"use strict\";\r\n        Object.defineProperty(exports, \"__esModule\", { value: true });\r\n        exports.setNormalizedScrollLeft = exports.getNormalizedScrollLeft = exports.detectScrollType = exports._setScrollType = void 0;\r\n        // Based on https://github.com/react-bootstrap/dom-helpers/blob/master/src/util/inDOM.js\r\n        var inDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\r\n        var cachedType;\r\n        function _setScrollType(type) {\r\n            cachedType = type;\r\n        }\r\n        exports._setScrollType = _setScrollType;\r\n        // Based on the jquery plugin https://github.com/othree/jquery.rtl-scroll-type\r\n        function detectScrollType() {\r\n            if (cachedType) {\r\n                return cachedType;\r\n            }\r\n            if (!inDOM || !window.document.body) {\r\n                return 'indeterminate';\r\n            }\r\n            var dummy = window.document.createElement('div');\r\n            dummy.appendChild(document.createTextNode('ABCD'));\r\n            dummy.dir = 'rtl';\r\n            dummy.style.fontSize = '14px';\r\n            dummy.style.width = '4px';\r\n            dummy.style.height = '1px';\r\n            dummy.style.position = 'absolute';\r\n            dummy.style.top = '-1000px';\r\n            dummy.style.overflow = 'scroll';\r\n            document.body.appendChild(dummy);\r\n            cachedType = 'reverse';\r\n            if (dummy.scrollLeft > 0) {\r\n                cachedType = 'default';\r\n            }\r\n            else {\r\n                dummy.scrollLeft = 2;\r\n                if (dummy.scrollLeft < 2) {\r\n                    cachedType = 'negative';\r\n                }\r\n            }\r\n            document.body.removeChild(dummy);\r\n            return cachedType;\r\n        }\r\n        exports.detectScrollType = detectScrollType;\r\n        // Based on https://stackoverflow.com/a/24394376\r\n        function getNormalizedScrollLeft(element, direction) {\r\n            var scrollLeft = element.scrollLeft;\r\n            // Perform the calculations only when direction is rtl to avoid messing up the ltr behavior\r\n            if (direction !== 'rtl') {\r\n                return scrollLeft;\r\n            }\r\n            var type = detectScrollType();\r\n            if (type === 'indeterminate') {\r\n                return Number.NaN;\r\n            }\r\n            switch (type) {\r\n                case 'negative':\r\n                    return element.scrollWidth - element.clientWidth + scrollLeft;\r\n                case 'reverse':\r\n                    return element.scrollWidth - element.clientWidth - scrollLeft;\r\n            }\r\n            return scrollLeft;\r\n        }\r\n        exports.getNormalizedScrollLeft = getNormalizedScrollLeft;\r\n        function setNormalizedScrollLeft(element, scrollLeft, direction) {\r\n            // Perform the calculations only when direction is rtl to avoid messing up the ltr behavior\r\n            if (direction !== 'rtl') {\r\n                element.scrollLeft = scrollLeft;\r\n                return;\r\n            }\r\n            var type = detectScrollType();\r\n            if (type === 'indeterminate') {\r\n                return;\r\n            }\r\n            switch (type) {\r\n                case 'negative':\r\n                    element.scrollLeft = element.clientWidth - element.scrollWidth + scrollLeft;\r\n                    break;\r\n                case 'reverse':\r\n                    element.scrollLeft = element.scrollWidth - element.clientWidth - scrollLeft;\r\n                    break;\r\n                default:\r\n                    element.scrollLeft = scrollLeft;\r\n                    break;\r\n            }\r\n        }\r\n        exports.setNormalizedScrollLeft = setNormalizedScrollLeft;\r\n    });\r\n\n",
    "/* global mobilePatches */\r\ndefine(\"devicehelpers/KoCustomBindings\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"handlers/general\",\r\n\t\"jquery\",\r\n\t\"vendor/jquery-ui\",\r\n\t\"devicehelpers/keyboard-status\",\r\n\t\"global/swipe\",\r\n\t\"vendor/normalize-scroll-left\",\r\n\t\"handlers/languageHelper\",\r\n], function (require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tscrollLeftNormalizer = require(\"vendor/normalize-scroll-left\"),\r\n\t\t$ = require(\"jquery\"),\r\n\t\tlanguageHelper = require(\"handlers/languageHelper\");\r\n\r\n\tko.bindingHandlers.setArrows = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n\t\t\tfunction handleArrowsVisibility(domElement) {\r\n\t\t\t\tvar containerWidth = domElement.clientWidth,\r\n\t\t\t\t\tscrollWidth = domElement.scrollWidth,\r\n\t\t\t\t\tsideOffset = scrollLeftNormalizer.getNormalizedScrollLeft(\r\n\t\t\t\t\t\tdomElement,\r\n\t\t\t\t\t\tlanguageHelper.IsRtlLanguage() ? \"rtl\" : \"ltr\"\r\n\t\t\t\t\t),\r\n\t\t\t\t\tremainingScroll = scrollWidth - (containerWidth + sideOffset),\r\n\t\t\t\t\trightArrowContainer = languageHelper.IsRtlLanguage()\r\n\t\t\t\t\t\t? $(domElement).find(\".left-arrow\")\r\n\t\t\t\t\t\t: $(domElement).find(\".right-arrow\"),\r\n\t\t\t\t\tleftArrowContainer = languageHelper.IsRtlLanguage()\r\n\t\t\t\t\t\t? $(domElement).find(\".right-arrow\")\r\n\t\t\t\t\t\t: $(domElement).find(\".left-arrow\"),\r\n\t\t\t\t\tarrowHeight = $(domElement).height(),\r\n\t\t\t\t\tcompareScroll = Math.floor(leftArrowContainer.width() / 2);\r\n\r\n\t\t\t\tif (containerWidth < scrollWidth) {\r\n\t\t\t\t\trightArrowContainer.height(arrowHeight);\r\n\t\t\t\t\tleftArrowContainer.height(arrowHeight);\r\n\r\n\t\t\t\t\trightArrowContainer.removeClass(\"arrow-hidden\");\r\n\t\t\t\t\tif (sideOffset > 0) {\r\n\t\t\t\t\t\tleftArrowContainer.removeClass(\"arrow-hidden\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (sideOffset < compareScroll && !leftArrowContainer.hasClass(\"arrow-hidden\")) {\r\n\t\t\t\t\t\tleftArrowContainer.addClass(\"arrow-hidden\");\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tsideOffset !== 0 &&\r\n\t\t\t\t\t\tremainingScroll <= compareScroll &&\r\n\t\t\t\t\t\t!rightArrowContainer.hasClass(\"arrow-hidden\")\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\trightArrowContainer.addClass(\"arrow-hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tleftArrowContainer.addClass(\"arrow-hidden\");\r\n\t\t\t\t\trightArrowContainer.addClass(\"arrow-hidden\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction handleOrientationChange(domElement) {\r\n\t\t\t\tswitch (window.orientation) {\r\n\t\t\t\t\tcase 90:\r\n\t\t\t\t\t\tvar rightArrowContainer = $(domElement).find(\".right-arrow\"),\r\n\t\t\t\t\t\t\tleftArrowContainer = $(domElement).find(\".left-arrow\");\r\n\r\n\t\t\t\t\t\tif (!leftArrowContainer.hasClass(\"arrow-hidden\")) {\r\n\t\t\t\t\t\t\tleftArrowContainer.addClass(\"arrow-hidden\");\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!rightArrowContainer.hasClass(\"arrow-hidden\")) {\r\n\t\t\t\t\t\t\trightArrowContainer.addClass(\"arrow-hidden\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tsetTimeout(handleArrowsVisibility, 0, domElement);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction setArrowClickBehavior(domElement) {\r\n\t\t\t\tvar rightArrowContainer = $(domElement).find(\".right-arrow\"),\r\n\t\t\t\t\tleftArrowContainer = $(domElement).find(\".left-arrow\");\r\n\r\n\t\t\t\trightArrowContainer.on(\"click\", function () {\r\n\t\t\t\t\tvar nextPresetItem = $(domElement).find(\".list-item.active\").next(\".list-item\").find(\"a\");\r\n\t\t\t\t\tnextPresetItem.click();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tleftArrowContainer.on(\"click\", function () {\r\n\t\t\t\t\tvar previousPresetItem = $(domElement).find(\".list-item.active\").prev(\".list-item\").find(\"a\");\r\n\t\t\t\t\tpreviousPresetItem.click();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// bind the function to element\r\n\t\t\tvar orientationChangeHandler = handleOrientationChange.bind(this, element),\r\n\t\t\t\tsubscriber = null;\r\n\r\n\t\t\tif (options && options.elementsObservable) {\r\n\t\t\t\tsubscriber = options.elementsObservable.subscribe(function (value) {\r\n\t\t\t\t\tsetTimeout(handleArrowsVisibility, 0, element);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t$(window).on(\"orientationchange.setArrows\", orientationChangeHandler);\r\n\r\n\t\t\t$(element).on(\"scroll.setArrows\", function scrollHandler() {\r\n\t\t\t\thandleArrowsVisibility(this);\r\n\t\t\t});\r\n\r\n\t\t\tsetTimeout(handleArrowsVisibility, 0, element);\r\n\t\t\tsetTimeout(setArrowClickBehavior, 0, element);\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".setArrows\");\r\n\t\t\t\t$(window).off(\"orientationchange.setArrows\", orientationChangeHandler);\r\n\t\t\t\t$(elementToDispose).find(\".right-arrow, .left-arrow\").off(\"click\");\r\n\r\n\t\t\t\tif (subscriber) {\r\n\t\t\t\t\tsubscriber.dispose();\r\n\t\t\t\t\tsubscriber = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\torientationChangeHandler = null;\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.ScrollToElement = {\r\n\t\tinit: function (element) {\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\tclearTimeout(elementToDispose.ScrollToElementTimer);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate: function (element, valueAccessor) {\r\n\t\t\tvar isActive = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n\t\t\tif (isActive) {\r\n\t\t\t\tclearTimeout(element.ScrollToElementTimer);\r\n\r\n\t\t\t\telement.ScrollToElementTimer = setTimeout(\r\n\t\t\t\t\tfunction scrollToElementHandler(elementToScroll) {\r\n\t\t\t\t\t\tvar parent = elementToScroll.parentNode,\r\n\t\t\t\t\t\t\tleftArrowWidth = $(parent).find(\".left-arrow\").outerWidth() || 0,\r\n\t\t\t\t\t\t\trightArrowWidth = $(parent).find(\".right-arrow\").outerWidth() || 0,\r\n\t\t\t\t\t\t\tparentScrollLeft = $(parent).scrollLeft(),\r\n\t\t\t\t\t\t\tparentOffsetWidth = $(parent).outerWidth(),\r\n\t\t\t\t\t\t\telementWidth = $(element).outerWidth(true),\r\n\t\t\t\t\t\t\telementLeftPosition = $(elementToScroll).position().left,\r\n\t\t\t\t\t\t\telementRightPosition = elementLeftPosition + elementWidth,\r\n\t\t\t\t\t\t\tisPartialRightInvisible = elementRightPosition > parentOffsetWidth - rightArrowWidth,\r\n\t\t\t\t\t\t\tisPartialLeftInvisible = elementLeftPosition < parentScrollLeft + leftArrowWidth;\r\n\r\n\t\t\t\t\t\tif (isPartialRightInvisible) {\r\n\t\t\t\t\t\t\t$(parent).animate({\r\n\t\t\t\t\t\t\t\tscrollLeft:\r\n\t\t\t\t\t\t\t\t\tparentScrollLeft + (elementRightPosition - (parentOffsetWidth - rightArrowWidth)), // + rightArrowWidth,\r\n\t\t\t\t\t\t\t\tduration: 200,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else if (isPartialLeftInvisible) {\r\n\t\t\t\t\t\t\t$(parent).animate({\r\n\t\t\t\t\t\t\t\tscrollLeft: parentScrollLeft + elementLeftPosition - leftArrowWidth,\r\n\t\t\t\t\t\t\t\tduration: 200,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t100,\r\n\t\t\t\t\telement\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.toogleChartViewMode = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\t$(element).on(\"click.toogleChartViewMode\", function toogleChartViewModeClick() {\r\n\t\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\t\tdsChart = $(\"#dealChartMobileContainer\"),\r\n\t\t\t\t\tfsCssClass = options.canTransact ? \"fsTransact\" : \"fullscreen\",\r\n\t\t\t\t\tfullScreenOn = dsChart.hasClass(fsCssClass),\r\n\t\t\t\t\tinteractEl = \"expand-button\";\r\n\r\n\t\t\t\t$(element).toggleClass(\"collapse-button\");\r\n\r\n\t\t\t\tif (fullScreenOn) {\r\n\t\t\t\t\tdsChart.removeClass(fsCssClass);\r\n\t\t\t\t\tinteractEl = \"collapse-button\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdsChart.addClass(fsCssClass);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tko.postbox.publish(\"deal-slip-chart-interaction\", { element: interactEl });\r\n\t\t\t\tko.postbox.publish(\"chart-container-resized\");\r\n\r\n\t\t\t\tif (general.isFunctionType(options.callBack)) {\r\n\t\t\t\t\toptions.callBack(!fullScreenOn);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".toogleChartViewMode\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.resetScroll = {\r\n\t\tinit: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n\t\t\tvar resetScrolling = valueAccessor();\r\n\t\t\tif (resetScrolling) {\r\n\t\t\t\t// TODO: do something with this\r\n\t\t\t}\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\tclearTimeout(elementToDispose.resetScrollTimer);\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n\t\t\twindow.scrollTo(0, 1);\r\n\r\n\t\t\tif (mobile && mobile.browser.opera && mobilePatches && typeof mobilePatches.delayedFooter == \"function\") {\r\n\t\t\t\tclearTimeout(element.resetScrollTimer);\r\n\r\n\t\t\t\telement.resetScrollTimer = setTimeout(mobilePatches.delayedFooter, 400);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\t// AML tooltip Fade In\r\n\tko.bindingHandlers.ttFadeIn = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\tttDataId = options.tt_data_id,\r\n\t\t\t\thasTooltipOverlay = options.hasTooltipOverlay,\r\n\t\t\t\tnoflip = options.noflip;\r\n\r\n\t\t\t$(element).on(\"click.ttFadeIn\", function (event) {\r\n\t\t\t\tevent.stopPropagation();\r\n\r\n\t\t\t\t$(\".tooltips\").css(\"display\", \"none\");\r\n\t\t\t\t$(\".tActive\").removeClass(\"tActive\");\r\n\t\t\t\t$(element).addClass(\"tActive\");\r\n\t\t\t\t$(\"#\" + ttDataId).fadeIn();\r\n\r\n\t\t\t\tvar scrollTop = $(window).scrollTop(),\r\n\t\t\t\t\ttriggerOffeset = $(element).offset().top - scrollTop,\r\n\t\t\t\t\ttooltipHeight = $(\"#\" + ttDataId).outerHeight();\r\n\r\n\t\t\t\tvar isVisible = triggerOffeset + tooltipHeight + 20 < $(window).height();\r\n\r\n\t\t\t\tif (!isVisible && !!noflip) {\r\n\t\t\t\t\t$(element).addClass(\"flippedTrigger\");\r\n\t\t\t\t\t$(\"#\" + ttDataId).addClass(\"flipped\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(element).removeClass(\"flippedTrigger\");\r\n\t\t\t\t\t$(\"#\" + ttDataId).removeClass(\"flipped\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (hasTooltipOverlay) {\r\n\t\t\t\t\t$(\"body\").addClass(\"mobilePopupVisible\");\r\n\t\t\t\t\t$(\".tooltip-overlay\").addClass(\"visible\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".ttFadeIn\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\t// AML tooltip Fade Out\r\n\tko.bindingHandlers.ttFadeOut = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\tttIconId = options.tt_icon_id,\r\n\t\t\t\tttDataId = options.tt_data_id,\r\n\t\t\t\thasTooltipOverlay = options.hasTooltipOverlay;\r\n\r\n\t\t\t$(element).on(\"click.ttFadeOut\", function (event) {\r\n\t\t\t\tevent.stopPropagation();\r\n\r\n\t\t\t\t$(\"#\" + ttIconId).removeClass(\"active\");\r\n\t\t\t\t$($(\"#\" + ttDataId)[0])\r\n\t\t\t\t\t.prev()\r\n\t\t\t\t\t.removeClass(\"tActive\");\r\n\t\t\t\t$(\"#\" + ttDataId).fadeOut();\r\n\r\n\t\t\t\tif (hasTooltipOverlay) {\r\n\t\t\t\t\t$(\"body\").removeClass(\"mobilePopupVisible\");\r\n\t\t\t\t\t$(\".tooltip-overlay\").removeClass(\"visible\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".ttFadeOut\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\t//trigger ttFadeOut on all childs selected by targetSelector\r\n\tko.bindingHandlers.ttTriggerFadeOut = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\ttargetSelector = options.targetSelector || \"i.close\";\r\n\r\n\t\t\t$(element).on(\"click.ttTriggerFadeOut\", function (event) {\r\n\t\t\t\t$(targetSelector, element).trigger(\"click.ttFadeOut\");\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".ttTriggerFadeOut\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.tooltipHandle = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar tooltipId = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\tindicatorClass = \"tooltip-indicator\";\r\n\r\n\t\t\t$(element).on(\"click\", function () {\r\n\t\t\t\tvar el = $(element),\r\n\t\t\t\t\ttooltipContent = $(\"#\" + tooltipId),\r\n\t\t\t\t\tindicators = $(\".\" + indicatorClass),\r\n\t\t\t\t\ttooltips = $(\".tooltip-content\"),\r\n\t\t\t\t\tisIndicator = el[0].className.indexOf(indicatorClass) !== -1,\r\n\t\t\t\t\tvisible = tooltipContent.css(\"display\") !== \"none\";\r\n\r\n\t\t\t\tindicators.removeClass(\"opened\");\r\n\t\t\t\ttooltips.hide();\r\n\r\n\t\t\t\tif (isIndicator && !visible) {\r\n\t\t\t\t\tel.addClass(\"opened\");\r\n\t\t\t\t\ttooltipContent.show();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".tooltipHandle\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\t// this binding is to be used only for mobile because of hardcoded media\r\n\t// and it is not supported by i.e 8\r\n\tko.bindingHandlers.ajustMobileFontSize = {\r\n\t\tinit: function (element) {\r\n\t\t\tvar value = element.textContent;\r\n\t\t\tvar el = $(element);\r\n\r\n\t\t\tif (!general.isFunctionType(window.matchMedia)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar mql = window.matchMedia(\"screen and (max-width: 360px)\");\r\n\r\n\t\t\tif (mql.matches) {\r\n\t\t\t\t// if media query matches\r\n\t\t\t\tvar elW = el.parent().width();\r\n\t\t\t\tvar simW = general.simulatedContentStringLegth(value, el.css(\"font\"));\r\n\r\n\t\t\t\tif (elW > simW) {\r\n\t\t\t\t\t// in this case = el.parent().width() => \"#quotesPage .thelist div {width: 130px;}\" must be defined in css file so the script is able to perform calculation !!!!!\r\n\t\t\t\t\tko.utils.toggleDomNodeCssClass(element, \"medium_font\", true);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (simW / elW > 1.0) {\r\n\t\t\t\t\t// in this case = el.parent().width() => \"#quotesPage .thelist div {width: 130px;}\" must be defined in css file so the script is able to perform calculation !!!!!\r\n\t\t\t\t\tko.utils.toggleDomNodeCssClass(element, \"small_font\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.AlertCustomHeightAdjustments = {\r\n\t\tupdate: function (element) {\r\n\t\t\tvar el = $(element);\r\n\t\t\tvar articleHeight =\r\n\t\t\t\t$(window).height() -\r\n\t\t\t\tel.find(\".alert-box .heading\").outerHeight(true) -\r\n\t\t\t\tel.find(\".alert-box footer\").outerHeight(true);\r\n\r\n\t\t\tel.find(\"article\").css({ \"min-height\": articleHeight + \"px\" });\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.triggerEventOnOrientationChange = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n\t\t\tfunction orientationChangeHandler() {\r\n\t\t\t\tko.postbox.publish(\"orientation-change\", options);\r\n\t\t\t}\r\n\r\n\t\t\twindow.addEventListener(\"orientationchange\", orientationChangeHandler);\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n\t\t\t\twindow.removeEventListener(\"orientationchange\", orientationChangeHandler);\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.toggleMobileMenu = {\r\n\t\tinit: function (element) {\r\n\t\t\tvar tout, tout2;\r\n\t\t\tfunction menuClickEventHandler() {\r\n\t\t\t\tvar elementClickEventhandler = function (event) {\r\n\t\t\t\t\t\t$(event.data).trigger(\"click\");\r\n\t\t\t\t\t},\r\n\t\t\t\t\t$menuVisibleContentHover = $(\"<div>\")\r\n\t\t\t\t\t\t.addClass(\"menu-visible-content-hover\")\r\n\t\t\t\t\t\t.on(\"click\", element, elementClickEventhandler),\r\n\t\t\t\t\t$header = $(\"#header\"),\r\n\t\t\t\t\t$footer = $(\"#footer\"),\r\n\t\t\t\t\t$mainMenu = $(\"#main-menu\"),\r\n\t\t\t\t\t$mainContent = $(\"#main\"),\r\n\t\t\t\t\t$mainMenuScrollableList = $(\"#main-menu .menu-list\"),\r\n\t\t\t\t\tpgBubble = $(\"#pgWrap\");\r\n\r\n\t\t\t\tvar togglePgBubble = function (visible) {\r\n\t\t\t\t\tif (pgBubble) {\r\n\t\t\t\t\t\tpgBubble.css(\"visibility\", visible ? \"visible\" : \"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\t$mainContent.css({ position: \"fixed\" });\r\n\r\n\t\t\t\t$mainMenu.toggleClass(\"menu-expanded\");\r\n\t\t\t\t$mainContent.toggleClass(\"content-unslided content-slided\");\r\n\t\t\t\t$header.toggleClass(\"content-slided\");\r\n\t\t\t\t$footer.toggleClass(\"content-slided\");\r\n\t\t\t\t$mainMenuScrollableList.animate({ scrollTop: 0 }, 0);\r\n\r\n\t\t\t\tif ($mainContent.hasClass(\"content-slided\")) {\r\n\t\t\t\t\ttogglePgBubble(false);\r\n\t\t\t\t\t$mainContent.append($menuVisibleContentHover);\r\n\t\t\t\t\tif (pgBubble) {\r\n\t\t\t\t\t\tpgBubble.css(\"visibility\", \"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearTimeout(tout);\r\n\t\t\t\t\tclearTimeout(tout2);\r\n\t\t\t\t\ttout = setTimeout(function () {\r\n\t\t\t\t\t\ttogglePgBubble(true);\r\n\t\t\t\t\t}, 250);\r\n\t\t\t\t\t$(\".menu-visible-content-hover\").remove();\r\n\t\t\t\t\ttout2 = setTimeout(\r\n\t\t\t\t\t\tfunction ($main) {\r\n\t\t\t\t\t\t\t$main.css({ position: \"absolute\" });\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t250,\r\n\t\t\t\t\t\t$mainContent\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$(element).on(\"click.toggleMobileMenu\", menuClickEventHandler);\r\n\t\t\t$(window).on(\"orientationchange.toggleMobileMenu\", function () {\r\n\t\t\t\tif ($(\"#main\").hasClass(\"content-slided\")) {\r\n\t\t\t\t\tmenuClickEventHandler();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".toggleMobileMenu\");\r\n\t\t\t\t$(window).off(\"orientationchange.toggleMobileMenu\");\r\n\t\t\t\tclearTimeout(tout);\r\n\t\t\t\tclearTimeout(tout2);\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.virtualKeyboardBehavior = {\r\n\t\tinit: function (element) {\r\n\t\t\tfunction hideFooter() {\r\n\t\t\t\t$(\"#footer\").css({ display: \"none\" });\r\n\t\t\t}\r\n\r\n\t\t\tfunction showFooter() {\r\n\t\t\t\t$(\"#footer\").css({ display: \"block\" });\r\n\t\t\t}\r\n\r\n\t\t\t$(element).on(\"focus.virtualKeyboardBehavior\", hideFooter).on(\"blur.virtualKeyboardBehavior\", showFooter);\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\"focus.virtualKeyboardBehavior\", \"blur.virtualKeyboardBehavior\");\r\n\t\t\t\tshowFooter();\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.hideFooter = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = valueAccessor(),\r\n\t\t\t\thideFooterOnLastPayment = ko.computed(function () {\r\n\t\t\t\t\tif (options.isPaymentButtonVisible()) {\r\n\t\t\t\t\t\t$(\"#footer\").hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(\"#footer\").show();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n\t\t\t\thideFooterOnLastPayment.dispose();\r\n\t\t\t\t$(\"#footer\").show();\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.menuSwipe = {\r\n\t\tinit: function (element) {\r\n\t\t\tswipe(element, 65, function (currentX, startX) {\r\n\t\t\t\tvar isRtl = languageHelper.IsRtlLanguage();\r\n\r\n\t\t\t\tif ((isRtl && currentX > startX) || (!isRtl && currentX < startX)) {\r\n\t\t\t\t\t$(\"#main-menu .close-button\").trigger(\"click\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\tswipeDestroy(elementToDispose);\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.mainGridSticky = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\treferenceHeight = $(options.referenceElementId).outerHeight(),\r\n\t\t\t\tscrolling,\r\n\t\t\t\tiosDevices = Browser.getiosDevices(),\r\n\t\t\t\ttargetedDevices =\r\n\t\t\t\t\tBrowser.isSafariMobile() &&\r\n\t\t\t\t\t(iosDevices.older.iphSeSimilar ||\r\n\t\t\t\t\t\tiosDevices.notch.iphXSimilar ||\r\n\t\t\t\t\t\tiosDevices.notch.iphXr ||\r\n\t\t\t\t\t\tiosDevices.notch.iphXsMax),\r\n\t\t\t\tsetVisible = function (value) {\r\n\t\t\t\t\t$(element)\r\n\t\t\t\t\t\t.find(\".fixed-wrap, .head-bg\")\r\n\t\t\t\t\t\t.css(\"visibility\", value ? \"visible\" : \"hidden\");\r\n\t\t\t\t};\r\n\r\n\t\t\tfunction setStickyHeader(enabled) {\r\n\t\t\t\tif (enabled) {\r\n\t\t\t\t\t$(element).addClass(\"fixed-to\").find(\".fixed-wrap, .head-bg\").css(\"top\", referenceHeight);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(element).removeClass(\"fixed-to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction scrollHandler() {\r\n\t\t\t\tvar scroll = $(window).scrollTop(),\r\n\t\t\t\t\tinitialCoords = Math.floor($(element).offset().top);\r\n\r\n\t\t\t\tif (scroll >= initialCoords - referenceHeight) {\r\n\t\t\t\t\tsetStickyHeader(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetStickyHeader(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$(window).on(\"scroll.mainGridSticky touchmove.mainGridSticky\", function () {\r\n\t\t\t\treferenceHeight = $(options.referenceElementId).outerHeight();\r\n\t\t\t\tscrollHandler();\r\n\t\t\t\tif (targetedDevices) {\r\n\t\t\t\t\tif (!scrolling) {\r\n\t\t\t\t\t\tsetVisible(false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tclearTimeout(scrolling);\r\n\t\t\t\t\tscrolling = setTimeout(function () {\r\n\t\t\t\t\t\tscrolling = null;\r\n\t\t\t\t\t\tsetVisible(true);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n\t\t\t\tclearTimeout(scrolling);\r\n\t\t\t\t$(window).off(\".mainGridSticky\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.stickyElement = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\treferenceHeight = $(options.referenceElementId).outerHeight(),\r\n\t\t\t\tparentHeight;\r\n\r\n\t\t\tfunction doBindings() {\r\n\t\t\t\tvar elementInitialPosition = $(element).offset(),\r\n\t\t\t\t\tdidScroll = false;\r\n\r\n\t\t\t\tfunction setTableWidths(reference) {\r\n\t\t\t\t\tvar $referenceRowCells = $(reference).find(\"th\");\r\n\r\n\t\t\t\t\t$.each($referenceRowCells, function (key) {\r\n\t\t\t\t\t\t$($referenceRowCells[key]).width($($referenceRowCells[key]).width());\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction fixParentHeight(enable) {\r\n\t\t\t\t\tif (!options.usePlaceHolder) {\r\n\t\t\t\t\t\t$(element)\r\n\t\t\t\t\t\t\t.closest(\"table\")\r\n\t\t\t\t\t\t\t.css(\"margin-top\", enable ? $(element).css(\"height\") : \"\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(element)\r\n\t\t\t\t\t\t\t.parent()\r\n\t\t\t\t\t\t\t.css(\"height\", enable ? parentHeight : \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(window)\r\n\t\t\t\t\t.on(\"scroll.stickyElement touchmove.stickyElement\", function scrollHandler() {\r\n\t\t\t\t\t\tvar $elementToFix = $(element),\r\n\t\t\t\t\t\t\tscroll = $(window).scrollTop();\r\n\r\n\t\t\t\t\t\tif (!didScroll) {\r\n\t\t\t\t\t\t\tparentHeight = $(element).parent().css(\"height\");\r\n\t\t\t\t\t\t\telementInitialPosition = $(element).offset();\r\n\t\t\t\t\t\t\treferenceHeight = $(options.referenceElementId).outerHeight();\r\n\t\t\t\t\t\t\tdidScroll = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll >= Math.ceil(elementInitialPosition.top) - referenceHeight) {\r\n\t\t\t\t\t\t\tif (options.preserveTableSize) {\r\n\t\t\t\t\t\t\t\tsetTableWidths($elementToFix);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$elementToFix.addClass(\"fixed header-clone\").css(\"top\", referenceHeight);\r\n\t\t\t\t\t\t\tfixParentHeight(true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$elementToFix.removeClass(\"fixed header-clone\").css(\"top\", \"\");\r\n\t\t\t\t\t\t\tfixParentHeight();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.on(\"orientationchange.stickyElement\", function () {\r\n\t\t\t\t\t\treferenceHeight = $(options.referenceElementId).outerHeight();\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tdoBindings();\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(window).off(\".stickyElement\");\r\n\t\t\t\t$(elementToDispose).removeClass(\"fixed header-clone\").css(\"top\", \"\");\r\n\t\t\t\t$(elementToDispose).closest(\"table\").css(\"margin-top\", \"\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.scrollToTab = {\r\n\t\tinit: function (element) {\r\n\t\t\t$(element).on(\"click\", function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tvar offset = $(this).offset().top - $(\"#header\").height();\r\n\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t$(\"body\").animate({ scrollTop: offset }, 500);\r\n\t\t\t\t}, 50);\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\"click\");\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.scrollToItem = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar value = ko.utils.unwrapObservable(valueAccessor());\r\n\t\t\tif (value) {\r\n\t\t\t\tsetTimeout(\r\n\t\t\t\t\tfunction (el) {\r\n\t\t\t\t\t\tel.scrollIntoView({ inline: \"center\" });\r\n\t\t\t\t\t},\r\n\t\t\t\t\t50,\r\n\t\t\t\t\telement\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.tel = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar value = ko.utils.unwrapObservable(valueAccessor());\r\n\t\t\t$(element).attr(\"href\", \"tel:\" + value);\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.removeOnClick = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor()),\r\n\t\t\t\tcallback = options.callback,\r\n\t\t\t\t$target,\r\n\t\t\t\tremoveTimerId;\r\n\r\n\t\t\tif (options.parent) {\r\n\t\t\t\t$target = $(element).closest(options.parent);\r\n\t\t\t} else if (options.child) {\r\n\t\t\t\t$target = $(element).find(options.child);\r\n\t\t\t} else {\r\n\t\t\t\t$target = $(element);\r\n\t\t\t}\r\n\r\n\t\t\t$(element).on(\"click.removeOnClick\", function () {\r\n\t\t\t\t$target.addClass(\"remove\");\r\n\r\n\t\t\t\tclearTimeout(removeTimerId);\r\n\t\t\t\tremoveTimerId = setTimeout(\r\n\t\t\t\t\tfunction ($elementToRemove, removeCallback) {\r\n\t\t\t\t\t\t$elementToRemove.remove();\r\n\r\n\t\t\t\t\t\tif (general.isFunctionType(removeCallback)) {\r\n\t\t\t\t\t\t\tremoveCallback();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t300,\r\n\t\t\t\t\t$target,\r\n\t\t\t\t\tcallback\r\n\t\t\t\t);\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function (elementToDispose) {\r\n\t\t\t\t$(elementToDispose).off(\".removeOnClick\");\r\n\r\n\t\t\t\tclearTimeout(removeTimerId);\r\n\t\t\t\toptions = null;\r\n\t\t\t\t$target = null;\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.addWindowFocusEventListener = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n\t\t\t$(window).on(\"focus.addWindowFocusEventListener\", options.onFocus);\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n\t\t\t\t$(window).off(\"focus.addWindowFocusEventListener\");\r\n\t\t\t\toptions = null;\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.accordion = {\r\n\t\tinit: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n\t\t\tvar allBindings = allBindingsAccessor();\r\n\r\n\t\t\tfunction closeAccordionSection() {\r\n\t\t\t\t$(\".accordion-section\").removeClass(\"active\");\r\n\t\t\t\t$(\".accordion-section-content\").slideUp(300).removeClass(\"open\");\r\n\t\t\t}\r\n\r\n\t\t\t$(element).on(\"click\", function (e) {\r\n\t\t\t\t// Grab current anchor value\r\n\t\t\t\tvar currentAttrValue = $(this).attr(\"for\");\r\n\r\n\t\t\t\tif ($(this).is(\".active\")) {\r\n\t\t\t\t\tcloseAccordionSection();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcloseAccordionSection();\r\n\r\n\t\t\t\t\tko.postbox.publish(allBindings.openEventName, ko.dataFor(this.parentElement.parentElement));\r\n\r\n\t\t\t\t\t// Add active class to section title\r\n\t\t\t\t\t$(this).addClass(\"active\");\r\n\t\t\t\t\t// Open up the hidden content panel\r\n\t\t\t\t\t$(element)\r\n\t\t\t\t\t\t.find(\"#\" + currentAttrValue)\r\n\t\t\t\t\t\t.slideDown(300)\r\n\t\t\t\t\t\t.addClass(\"open\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.expand = {\r\n\t\tinit: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {\r\n\t\t\tvar allBindings = allBindingsAccessor();\r\n\t\t\tvar isOpen = allBindings.isOpen;\r\n\t\t\tvar toggleHandler = allBindings.toggleHandler;\r\n\t\t\tvar $expandableHeader = $(element).find(\".accordion-section-faq\").first();\r\n\t\t\tvar $expandableContainer = $(element);\r\n\r\n\t\t\tif (isOpen) {\r\n\t\t\t\texpand();\r\n\t\t\t} else {\r\n\t\t\t\tcollapse();\r\n\t\t\t}\r\n\r\n\t\t\tfunction expand() {\r\n\t\t\t\tvar currentAttrValue = $expandableContainer.attr(\"for\");\r\n\t\t\t\t// Add active class to section title\r\n\t\t\t\t$expandableContainer.addClass(\"active\");\r\n\t\t\t\t// Open up the hidden content panel\r\n\t\t\t\t$expandableContainer\r\n\t\t\t\t\t.find(\"#\" + currentAttrValue)\r\n\t\t\t\t\t.slideDown(300)\r\n\t\t\t\t\t.addClass(\"open\");\r\n\t\t\t}\r\n\r\n\t\t\tfunction collapse() {\r\n\t\t\t\tvar currentAttrValue = $expandableContainer.attr(\"for\");\r\n\t\t\t\t// Add active class to section title\r\n\t\t\t\t$expandableContainer.removeClass(\"active\");\r\n\t\t\t\t// Open up the hidden content panel\r\n\t\t\t\t$expandableContainer\r\n\t\t\t\t\t.find(\"#\" + currentAttrValue)\r\n\t\t\t\t\t.slideUp(300)\r\n\t\t\t\t\t.removeClass(\"open\");\r\n\t\t\t}\r\n\r\n\t\t\t$expandableHeader.on(\"click\", function (e) {\r\n\t\t\t\t// Grab current anchor value\r\n\r\n\t\t\t\tif (!general.isNullOrUndefined(toggleHandler) && general.isFunctionType(toggleHandler)) {\r\n\t\t\t\t\tvar value = !$expandableContainer.is(\".active\");\r\n\r\n\t\t\t\t\ttoggleHandler(value);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ($expandableContainer.is(\".active\")) {\r\n\t\t\t\t\tcollapse();\r\n\t\t\t\t} else {\r\n\t\t\t\t\texpand();\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.tutorialPlayer = {\r\n\t\tinit: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n\t\t\tvar subscriber = options.playerVisible.subscribe(function (value) {\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\tdocument.body.classList.remove(\"mobilePopupVisible\");\r\n\t\t\t\t\telement.querySelector(\"iframe\").remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\telement.querySelector(\".close\").addEventListener(\"click\", function () {\r\n\t\t\t\toptions.playerVisible(false);\r\n\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n\t\t\t\tdocument.body.classList.remove(\"mobilePopupVisible\");\r\n\r\n\t\t\t\tif (subscriber) {\r\n\t\t\t\t\tsubscriber.dispose();\r\n\t\t\t\t\tsubscriber = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdate: function (element, valueAccessor) {\r\n\t\t\tvar options = ko.utils.unwrapObservable(valueAccessor());\r\n\r\n\t\t\tif (options.path() === \"\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar ifrm = document.createElement(\"iframe\");\r\n\t\t\tifrm.setAttribute(\"src\", options.path());\r\n\t\t\tifrm.classList.add(\"no-border\");\r\n\t\t\tifrm.setAttribute(\"id\", \"EducationalTutorialsIframe\");\r\n\r\n\t\t\telement.appendChild(ifrm);\r\n\r\n\t\t\toptions.playerVisible(true);\r\n\r\n\t\t\twindow.scrollTo(0, 1);\r\n\t\t\tdocument.body.classList.add(\"mobilePopupVisible\");\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.nonRtlOptions = {\r\n\t\tinit: function (element) {\r\n\t\t\tvar isRtlLanguage = languageHelper.IsRtlLanguage(),\r\n\t\t\t\toptions = element.options,\r\n\t\t\t\tshouldSetToLtr = isRtlLanguage && element.options && element.options.length;\r\n\r\n\t\t\tif (!shouldSetToLtr) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\tvar option = options[i];\r\n\r\n\t\t\t\tif (option.text && !option.text.isRtlText()) {\r\n\t\t\t\t\toption.classList.add(\"ltr\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\toption.classList.remove(\"ltr\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.animatePgbubbleHide = {\r\n\t\tinit: function (element) {\r\n\t\t\tvar to,\r\n\t\t\t\tparent = document.getElementById(\"pgWrap\");\r\n\r\n\t\t\telement.onclick = function () {\r\n\t\t\t\tparent.classList.toggle(\"animate\");\r\n\t\t\t\tclearTimeout(to);\r\n\t\t\t\tto = setTimeout(function () {\r\n\t\t\t\t\tparent.classList.toggle(\"animatehide\");\r\n\t\t\t\t}, 600);\r\n\t\t\t};\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(element, function () {\r\n\t\t\t\tclearTimeout(to);\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n\r\n\tko.bindingHandlers.unchainMainScroll = {\r\n\t\tinit: function (e, va) {\r\n\t\t\tvar bodyEl = document.getElementsByTagName(\"body\")[0],\r\n\t\t\t\toptions = ko.utils.unwrapObservable(va()),\r\n\t\t\t\tsubscription = options.dependOn.subscribe(function (value) {\r\n\t\t\t\t\tbodyEl.style.position = value ? \"fixed\" : \"\";\r\n\t\t\t\t});\r\n\r\n\t\t\tko.utils.domNodeDisposal.addDisposeCallback(e, function () {\r\n\t\t\t\tsubscription.dispose();\r\n\t\t\t});\r\n\t\t},\r\n\t};\r\n});\r\n\n",
    "define(\"trackingIntExt/TrackingData\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"handlers/general\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"devicemanagers/StatesManager\",\r\n\t\"modules/systeminfo\",\r\n\t\"JSONHelper\",\r\n\t\"handlers/Cookie\",\r\n\t\"global/apiIM\",\r\n\t\"handlers/Logger\",\r\n\t\"tracking/TrackingCommonData\",\r\n], function (require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tcustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tstatesManager = require(\"devicemanagers/StatesManager\"),\r\n\t\tsystemInfo = require(\"modules/systeminfo\"),\r\n\t\tJSONHelper = require(\"JSONHelper\"),\r\n\t\tcookie = require(\"handlers/Cookie\"),\r\n\t\tapiIM = require(\"global/apiIM\"),\r\n\t\tlogger = require(\"handlers/Logger\"),\r\n\t\tTrackingCommonData = require(\"tracking/TrackingCommonData\"),\r\n\t\tproperties = {},\r\n\t\tnonTrackingProperties = {};\r\n\r\n\tfunction init() {\r\n\t\tproperties = TrackingCommonData(FxNet.SessionStorage);\r\n\t\tupdateStaticData();\r\n\r\n\t\tvar cookieTracking = cookie.ReadCookie(\"TrackingData\");\r\n\r\n\t\tif (!general.isNullOrUndefined(cookieTracking)) {\r\n\t\t\tvar trackingData = JSON.parse(cookieTracking);\r\n\r\n\t\t\tObject.assign(properties, trackingData);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getProperties() {\r\n\t\tupdateRealTimeData();\r\n\t\treturn properties;\r\n\t}\r\n\r\n\tfunction getNonTrackingProperties() {\r\n\t\treturn nonTrackingProperties;\r\n\t}\r\n\r\n\tfunction updateStaticData() {\r\n\t\tvar countriesCollection = systemInfo.get(\"countries\");\r\n\r\n\t\tproperties.AccountNumber = customer.prop.accountNumber;\r\n\t\tproperties.Broker = customer.prop.brokerName;\r\n\t\tproperties.AccountType = customer.prop.customerType === eCustomerType.TradingBonus ? \"Practice\" : \"Real\";\r\n\r\n\t\tproperties.SAProcess = customer.prop.SAProcess;\r\n\t\tproperties.Serial = customer.prop.serial === 0 ? null : customer.prop.serial;\r\n\t\tproperties.Country = countriesCollection[customer.prop.countryID];\r\n\r\n\t\tproperties.GroupName = customer.prop.abTestings.groupsNames;\r\n\t\tproperties.TestName = customer.prop.abTestings.testsNames;\r\n\t}\r\n\r\n\tfunction updateRealTimeData() {\r\n\t\tproperties.AML = getAMLStatusName();\r\n\r\n\t\tproperties.Currency = customer.prop.selectedCcyName();\r\n\t\tproperties.FolderType = mapFolderTypeData(\r\n\t\t\tstatesManager.States.FolderTypeId(),\r\n\t\t\tcustomer.prop.isLive,\r\n\t\t\tcustomer.prop.isPending\r\n\t\t);\r\n\t}\r\n\r\n\tfunction getErrorTrackingData() {\r\n\t\tvar messageObj = {\r\n\t\t\tDomain: window.location.host,\r\n\t\t\tBroker: properties.Broker,\r\n\t\t\tLanguage: CookieHandler.ReadCookie(\"Language\"),\r\n\t\t\tCountry: properties.Country,\r\n\t\t\tAmlStatus: properties.AML,\r\n\t\t\tBrowser: properties.Browser,\r\n\t\t\tOperatingSystem: properties.OS,\r\n\t\t\tResolutionScreen: properties.ResolutionScreen,\r\n\t\t\tOsVersion: properties.OSVersion,\r\n\t\t\tBrowserVersion: properties.BrowserVersion,\r\n\t\t\tDevice: properties.Device,\r\n\t\t\tTrackingSessionId: properties.TrackingSessionId,\r\n\t\t};\r\n\r\n\t\treturn messageObj;\r\n\t}\r\n\r\n\tfunction updateScmmData() {\r\n\t\tcustomer.InitialScmmData(dataLoadCompleteFromScmm);\r\n\t}\r\n\r\n\tfunction dataLoadCompleteFromScmm(scmmResponse) {\r\n\t\tvar scmmDataArray = JSONHelper.STR2JSON(\"TUserTracking.dataLoadCompleteFromScmm\", scmmResponse);\r\n\r\n\t\tvar scmmData = scmmDataArray[0];\r\n\r\n\t\tif (scmmData) {\r\n\t\t\tupdateNonTrackingProperties(scmmData);\r\n\t\t\tremoveObsoleteProperties(scmmData);\r\n\t\t\tObject.assign(properties, scmmData);\r\n\t\t} else {\r\n\t\t\tlogger.warn(\"Internal/TrackingData\", \"SCMM data is empty\");\r\n\t\t}\r\n\r\n\t\tko.postbox.publish(\"scmm-data-loaded\", true);\r\n\t}\r\n\r\n\tfunction updateNonTrackingProperties(scmmData) {\r\n\t\tnonTrackingProperties.FolderName = scmmData.FolderName;\r\n\t\tnonTrackingProperties.RetentionPerson = scmmData.RetentionPerson;\r\n\t\tnonTrackingProperties.RetentionEmail = scmmData.RetentionEmail;\r\n\t\tnonTrackingProperties.PotentialValue = scmmData.PotentialValue;\r\n\t\tnonTrackingProperties.SiteTriggerName = scmmData.SiteTriggerName;\r\n\t}\r\n\r\n\tfunction removeObsoleteProperties(scmmData) {\r\n\t\tif (general.isNullOrUndefined(scmmData)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tdelete scmmData.LastDepositDate;\r\n\t\tdelete scmmData.LastDealDate;\r\n\t\tdelete scmmData.VolumeCategory;\r\n\t\tdelete scmmData.DepositCategory;\r\n\t\tdelete scmmData.FolderName;\r\n\t\tdelete scmmData.RetentionPerson;\r\n\t\tdelete scmmData.RetentionEmail;\r\n\t\tdelete scmmData.PotentialValue;\r\n\t\tdelete scmmData.SiteTriggerName;\r\n\t\tdelete scmmData.ActualDealType;\r\n\t\tdelete scmmData.TradedCurrencies;\r\n\t\tdelete scmmData.TradedMetals;\r\n\t\tdelete scmmData.TradedShares;\r\n\t\tdelete scmmData.TradedIndices;\r\n\t\tdelete scmmData.TradedCommodities;\r\n\t}\r\n\r\n\tfunction getAMLStatusName() {\r\n\t\tvar statusId = statesManager.States.AmlStatus();\r\n\r\n\t\tfor (var prop in eAMLStatus) {\r\n\t\t\tif (eAMLStatus.hasOwnProperty(prop) && eAMLStatus[prop] == statusId) {\r\n\t\t\t\treturn prop.toString();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn statusId;\r\n\t}\r\n\r\n\tfunction incrementDealsNumber() {\r\n\t\tif (!properties.hasOwnProperty(\"NumberOfDeals\")) {\r\n\t\t\tproperties.NumberOfDeals = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tproperties.NumberOfDeals = Number(properties.NumberOfDeals) + 1;\r\n\t}\r\n\r\n\tfunction incrementDepositsNumber() {\r\n\t\tif (!properties.hasOwnProperty(\"NumberOfDeposits\")) {\r\n\t\t\tproperties.NumberOfDeposits = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tproperties.NumberOfDeposits = Number(properties.NumberOfDeposits) + 1;\r\n\t}\r\n\r\n\tfunction mapFolderTypeData(folderTypeId, isLive, isPending) {\r\n\t\tswitch (folderTypeId) {\r\n\t\t\tcase 0:\r\n\t\t\t\treturn \"None\";\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\treturn \"Other\";\r\n\r\n\t\t\tcase 2: {\r\n\t\t\t\tif (isLive) {\r\n\t\t\t\t\treturn \"Live\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isPending) {\r\n\t\t\t\t\treturn \"Pending\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"Other\";\r\n\t\t\t}\r\n\r\n\t\t\tcase 3:\r\n\t\t\t\treturn \"Other\";\r\n\r\n\t\t\tcase 4:\r\n\t\t\t\treturn \"Nostro\";\r\n\r\n\t\t\tcase 5:\r\n\t\t\t\treturn \"PTA\";\r\n\r\n\t\t\tcase 6:\r\n\t\t\t\treturn \"DebitFraud\";\r\n\r\n\t\t\tcase 9:\r\n\t\t\t\treturn \"DemoGame\";\r\n\t\t}\r\n\r\n\t\treturn \"Other\";\r\n\t}\r\n\r\n\tfunction updateAccountStatus(value) {\r\n\t\tproperties.AccountStatus = Object.keys(eUserStatus).find(function (key) {\r\n\t\t\treturn eUserStatus[key] === value;\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinit: init,\r\n\t\tgetProperties: getProperties,\r\n\t\tgetNonTrackingProperties: getNonTrackingProperties,\r\n\t\tincrementDealsNumber: incrementDealsNumber,\r\n\t\tincrementDepositsNumber: incrementDepositsNumber,\r\n\t\tupdateScmmData: updateScmmData,\r\n\t\tgetErrorTrackingData: getErrorTrackingData,\r\n\t\tupdateAccountStatus: updateAccountStatus,\r\n\t};\r\n});\r\n\n",
    "/*!\n * Globalize\n *\n * http://github.com/jquery/globalize\n *\n * Copyright Software Freedom Conservancy, Inc.\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://jquery.org/license\n */\n\n(function( window, undefined ) {\n\nvar Globalize,\n\t// private variables\n\tregexHex,\n\tregexInfinity,\n\tregexParseFloat,\n\tregexTrim,\n\t// private JavaScript utility functions\n\tarrayIndexOf,\n\tendsWith,\n\textend,\n\tisArray,\n\tisFunction,\n\tisObject,\n\tstartsWith,\n\ttrim,\n\ttruncate,\n\tzeroPad,\n\t// private Globalization utility functions\n\tappendPreOrPostMatch,\n\texpandFormat,\n\tformatDate,\n\tformatNumber,\n\tgetTokenRegExp,\n\tgetEra,\n\tgetEraYear,\n\tparseExact,\n\tparseNegativePattern;\n\n// Global variable (Globalize) or CommonJS module (globalize)\nGlobalize = function( cultureSelector ) {\n\treturn new Globalize.prototype.init( cultureSelector );\n};\n\nif ( typeof require !== \"undefined\" &&\n\ttypeof exports !== \"undefined\" &&\n\ttypeof module !== \"undefined\" ) {\n\t// Assume CommonJS\n\tmodule.exports = Globalize;\n} else {\n\t// Export as global variable\n\twindow.Globalize = Globalize;\n}\n\nGlobalize.cultures = {};\n\nGlobalize.prototype = {\n\tconstructor: Globalize,\n\tinit: function( cultureSelector ) {\n\t\tthis.cultures = Globalize.cultures;\n\t\tthis.cultureSelector = cultureSelector;\n\n\t\treturn this;\n\t}\n};\nGlobalize.prototype.init.prototype = Globalize.prototype;\n\n// 1. When defining a culture, all fields are required except the ones stated as optional.\n// 2. Each culture should have a \".calendars\" object with at least one calendar named \"standard\"\n//    which serves as the default calendar in use by that culture.\n// 3. Each culture should have a \".calendar\" object which is the current calendar being used,\n//    it may be dynamically changed at any time to one of the calendars in \".calendars\".\nGlobalize.cultures[ \"default\" ] = {\n\t// A unique name for the culture in the form <language code>-<country/region code>\n\tname: \"en\",\n\t// the name of the culture in the english language\n\tenglishName: \"English\",\n\t// the name of the culture in its own language\n\tnativeName: \"English\",\n\t// whether the culture uses right-to-left text\n\tisRTL: false,\n\t// \"language\" is used for so-called \"specific\" cultures.\n\t// For example, the culture \"es-CL\" means \"Spanish, in Chili\".\n\t// It represents the Spanish-speaking culture as it is in Chili,\n\t// which might have different formatting rules or even translations\n\t// than Spanish in Spain. A \"neutral\" culture is one that is not\n\t// specific to a region. For example, the culture \"es\" is the generic\n\t// Spanish culture, which may be a more generalized version of the language\n\t// that may or may not be what a specific culture expects.\n\t// For a specific culture like \"es-CL\", the \"language\" field refers to the\n\t// neutral, generic culture information for the language it is using.\n\t// This is not always a simple matter of the string before the dash.\n\t// For example, the \"zh-Hans\" culture is netural (Simplified Chinese).\n\t// And the \"zh-SG\" culture is Simplified Chinese in Singapore, whose lanugage\n\t// field is \"zh-CHS\", not \"zh\".\n\t// This field should be used to navigate from a specific culture to it's\n\t// more general, neutral culture. If a culture is already as general as it\n\t// can get, the language may refer to itself.\n\tlanguage: \"en\",\n\t// numberFormat defines general number formatting rules, like the digits in\n\t// each grouping, the group separator, and how negative numbers are displayed.\n\tnumberFormat: {\n\t\t// [negativePattern]\n\t\t// Note, numberFormat.pattern has no \"positivePattern\" unlike percent and currency,\n\t\t// but is still defined as an array for consistency with them.\n\t\t//   negativePattern: one of \"(n)|-n|- n|n-|n -\"\n\t\tpattern: [ \"-n\" ],\n\t\t// number of decimal places normally shown\n\t\tdecimals: 2,\n\t\t// string that separates number groups, as in 1,000,000\n\t\t\",\": \",\",\n\t\t// string that separates a number from the fractional portion, as in 1.99\n\t\t\".\": \".\",\n\t\t// array of numbers indicating the size of each number group.\n\t\t// TODO: more detailed description and example\n\t\tgroupSizes: [ 3 ],\n\t\t// symbol used for positive numbers\n\t\t\"+\": \"+\",\n\t\t// symbol used for negative numbers\n\t\t\"-\": \"-\",\n\t\t// symbol used for NaN (Not-A-Number)\n\t\t\"NaN\": \"NaN\",\n\t\t// symbol used for Negative Infinity\n\t\tnegativeInfinity: \"-Infinity\",\n\t\t// symbol used for Positive Infinity\n\t\tpositiveInfinity: \"Infinity\",\n\t\tpercent: {\n\t\t\t// [negativePattern, positivePattern]\n\t\t\t//   negativePattern: one of \"-n %|-n%|-%n|%-n|%n-|n-%|n%-|-% n|n %-|% n-|% -n|n- %\"\n\t\t\t//   positivePattern: one of \"n %|n%|%n|% n\"\n\t\t\tpattern: [ \"-n %\", \"n %\" ],\n\t\t\t// number of decimal places normally shown\n\t\t\tdecimals: 2,\n\t\t\t// array of numbers indicating the size of each number group.\n\t\t\t// TODO: more detailed description and example\n\t\t\tgroupSizes: [ 3 ],\n\t\t\t// string that separates number groups, as in 1,000,000\n\t\t\t\",\": \",\",\n\t\t\t// string that separates a number from the fractional portion, as in 1.99\n\t\t\t\".\": \".\",\n\t\t\t// symbol used to represent a percentage\n\t\t\tsymbol: \"%\"\n\t\t},\n\t\tcurrency: {\n\t\t\t// [negativePattern, positivePattern]\n\t\t\t//   negativePattern: one of \"($n)|-$n|$-n|$n-|(n$)|-n$|n-$|n$-|-n $|-$ n|n $-|$ n-|$ -n|n- $|($ n)|(n $)\"\n\t\t\t//   positivePattern: one of \"$n|n$|$ n|n $\"\n\t\t\tpattern: [ \"($n)\", \"$n\" ],\n\t\t\t// number of decimal places normally shown\n\t\t\tdecimals: 2,\n\t\t\t// array of numbers indicating the size of each number group.\n\t\t\t// TODO: more detailed description and example\n\t\t\tgroupSizes: [ 3 ],\n\t\t\t// string that separates number groups, as in 1,000,000\n\t\t\t\",\": \",\",\n\t\t\t// string that separates a number from the fractional portion, as in 1.99\n\t\t\t\".\": \".\",\n\t\t\t// symbol used to represent currency\n\t\t\tsymbol: \"$\"\n\t\t}\n\t},\n\t// calendars defines all the possible calendars used by this culture.\n\t// There should be at least one defined with name \"standard\", and is the default\n\t// calendar used by the culture.\n\t// A calendar contains information about how dates are formatted, information about\n\t// the calendar's eras, a standard set of the date formats,\n\t// translations for day and month names, and if the calendar is not based on the Gregorian\n\t// calendar, conversion functions to and from the Gregorian calendar.\n\tcalendars: {\n\t\tstandard: {\n\t\t\t// name that identifies the type of calendar this is\n\t\t\tname: \"Gregorian_USEnglish\",\n\t\t\t// separator of parts of a date (e.g. \"/\" in 11/05/1955)\n\t\t\t\"/\": \"/\",\n\t\t\t// separator of parts of a time (e.g. \":\" in 05:44 PM)\n\t\t\t\":\": \":\",\n\t\t\t// the first day of the week (0 = Sunday, 1 = Monday, etc)\n\t\t\tfirstDay: 0,\n\t\t\tdays: {\n\t\t\t\t// full day names\n\t\t\t\tnames: [ \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\" ],\n\t\t\t\t// abbreviated day names\n\t\t\t\tnamesAbbr: [ \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\" ],\n\t\t\t\t// shortest day names\n\t\t\t\tnamesShort: [ \"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\" ]\n\t\t\t},\n\t\t\tmonths: {\n\t\t\t\t// full month names (13 months for lunar calendards -- 13th month should be \"\" if not lunar)\n\t\t\t\tnames: [ \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\", \"\" ],\n\t\t\t\t// abbreviated month names\n\t\t\t\tnamesAbbr: [ \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\", \"\" ]\n\t\t\t},\n\t\t\t// AM and PM designators in one of these forms:\n\t\t\t// The usual view, and the upper and lower case versions\n\t\t\t//   [ standard, lowercase, uppercase ]\n\t\t\t// The culture does not use AM or PM (likely all standard date formats use 24 hour time)\n\t\t\t//   null\n\t\t\tAM: [ \"AM\", \"am\", \"AM\" ],\n\t\t\tPM: [ \"PM\", \"pm\", \"PM\" ],\n\t\t\teras: [\n\t\t\t\t// eras in reverse chronological order.\n\t\t\t\t// name: the name of the era in this culture (e.g. A.D., C.E.)\n\t\t\t\t// start: when the era starts in ticks (gregorian, gmt), null if it is the earliest supported era.\n\t\t\t\t// offset: offset in years from gregorian calendar\n\t\t\t\t{\n\t\t\t\t\t\"name\": \"A.D.\",\n\t\t\t\t\t\"start\": null,\n\t\t\t\t\t\"offset\": 0\n\t\t\t\t}\n\t\t\t],\n\t\t\t// when a two digit year is given, it will never be parsed as a four digit\n\t\t\t// year greater than this year (in the appropriate era for the culture)\n\t\t\t// Set it as a full year (e.g. 2029) or use an offset format starting from\n\t\t\t// the current year: \"+19\" would correspond to 2029 if the current year 2010.\n\t\t\ttwoDigitYearMax: 2029,\n\t\t\t// set of predefined date and time patterns used by the culture\n\t\t\t// these represent the format someone in this culture would expect\n\t\t\t// to see given the portions of the date that are shown.\n\t\t\tpatterns: {\n\t\t\t\t// short date pattern\n\t\t\t\td: \"M/d/yyyy\",\n\t\t\t\t// long date pattern\n\t\t\t\tD: \"dddd, MMMM dd, yyyy\",\n\t\t\t\t// short time pattern\n\t\t\t\tt: \"h:mm tt\",\n\t\t\t\t// long time pattern\n\t\t\t\tT: \"h:mm:ss tt\",\n\t\t\t\t// long date, short time pattern\n\t\t\t\tf: \"dddd, MMMM dd, yyyy h:mm tt\",\n\t\t\t\t// long date, long time pattern\n\t\t\t\tF: \"dddd, MMMM dd, yyyy h:mm:ss tt\",\n\t\t\t\t// month/day pattern\n\t\t\t\tM: \"MMMM dd\",\n\t\t\t\t// month/year pattern\n\t\t\t\tY: \"yyyy MMMM\",\n\t\t\t\t// S is a sortable format that does not vary by culture\n\t\t\t\tS: \"yyyy\\u0027-\\u0027MM\\u0027-\\u0027dd\\u0027T\\u0027HH\\u0027:\\u0027mm\\u0027:\\u0027ss\"\n\t\t\t}\n\t\t\t// optional fields for each calendar:\n\t\t\t/*\n\t\t\tmonthsGenitive:\n\t\t\t\tSame as months but used when the day preceeds the month.\n\t\t\t\tOmit if the culture has no genitive distinction in month names.\n\t\t\t\tFor an explaination of genitive months, see http://blogs.msdn.com/michkap/archive/2004/12/25/332259.aspx\n\t\t\tconvert:\n\t\t\t\tAllows for the support of non-gregorian based calendars. This convert object is used to\n\t\t\t\tto convert a date to and from a gregorian calendar date to handle parsing and formatting.\n\t\t\t\tThe two functions:\n\t\t\t\t\tfromGregorian( date )\n\t\t\t\t\t\tGiven the date as a parameter, return an array with parts [ year, month, day ]\n\t\t\t\t\t\tcorresponding to the non-gregorian based year, month, and day for the calendar.\n\t\t\t\t\ttoGregorian( year, month, day )\n\t\t\t\t\t\tGiven the non-gregorian year, month, and day, return a new Date() object\n\t\t\t\t\t\tset to the corresponding date in the gregorian calendar.\n\t\t\t*/\n\t\t}\n\t},\n\t// For localized strings\n\tmessages: {}\n};\n\nGlobalize.cultures[ \"default\" ].calendar = Globalize.cultures[ \"default\" ].calendars.standard;\n\nGlobalize.cultures.en = Globalize.cultures[ \"default\" ];\n\nGlobalize.cultureSelector = \"en\";\n\n//\n// private variables\n//\n\nregexHex = /^0x[a-f0-9]+$/i;\nregexInfinity = /^[+\\-]?infinity$/i;\nregexParseFloat = /^[+\\-]?\\d*\\.?\\d*(e[+\\-]?\\d+)?$/;\nregexTrim = /^\\s+|\\s+$/g;\n\n//\n// private JavaScript utility functions\n//\n\narrayIndexOf = function( array, item ) {\n\tif ( array.indexOf ) {\n\t\treturn array.indexOf( item );\n\t}\n\tfor ( var i = 0, length = array.length; i < length; i++ ) {\n\t\tif ( array[i] === item ) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\nendsWith = function( value, pattern ) {\n\treturn value.substr( value.length - pattern.length ) === pattern;\n};\n\nextend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !isFunction(target) ) {\n\t\ttarget = {};\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\t\t// Only deal with non-null/undefined values\n\t\tif ( (options = arguments[ i ]) != null ) {\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( isObject(copy) || (copyIsArray = isArray(copy)) ) ) {\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && isObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\nisArray = Array.isArray || function( obj ) {\n\treturn Object.prototype.toString.call( obj ) === \"[object Array]\";\n};\n\nisFunction = function( obj ) {\n\treturn Object.prototype.toString.call( obj ) === \"[object Function]\";\n};\n\nisObject = function( obj ) {\n\treturn Object.prototype.toString.call( obj ) === \"[object Object]\";\n};\n\nstartsWith = function( value, pattern ) {\n\treturn value.indexOf( pattern ) === 0;\n};\n\ntrim = function( value ) {\n\treturn ( value + \"\" ).replace( regexTrim, \"\" );\n};\n\ntruncate = function( value ) {\n\tif ( isNaN( value ) ) {\n\t\treturn NaN;\n\t}\n\treturn Math[ value < 0 ? \"ceil\" : \"floor\" ]( value );\n};\n\nzeroPad = function( str, count, left ) {\n\tvar l;\n\tfor ( l = str.length; l < count; l += 1 ) {\n\t\tstr = ( left ? (\"0\" + str) : (str + \"0\") );\n\t}\n\treturn str;\n};\n\n//\n// private Globalization utility functions\n//\n\nappendPreOrPostMatch = function( preMatch, strings ) {\n\t// appends pre- and post- token match strings while removing escaped characters.\n\t// Returns a single quote count which is used to determine if the token occurs\n\t// in a string literal.\n\tvar quoteCount = 0,\n\t\tescaped = false;\n\tfor ( var i = 0, il = preMatch.length; i < il; i++ ) {\n\t\tvar c = preMatch.charAt( i );\n\t\tswitch ( c ) {\n\t\t\tcase \"\\'\":\n\t\t\t\tif ( escaped ) {\n\t\t\t\t\tstrings.push( \"\\'\" );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tquoteCount++;\n\t\t\t\t}\n\t\t\t\tescaped = false;\n\t\t\t\tbreak;\n\t\t\tcase \"\\\\\":\n\t\t\t\tif ( escaped ) {\n\t\t\t\t\tstrings.push( \"\\\\\" );\n\t\t\t\t}\n\t\t\t\tescaped = !escaped;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tstrings.push( c );\n\t\t\t\tescaped = false;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn quoteCount;\n};\n\nexpandFormat = function( cal, format ) {\n\t// expands unspecified or single character date formats into the full pattern.\n\tformat = format || \"F\";\n\tvar pattern,\n\t\tpatterns = cal.patterns,\n\t\tlen = format.length;\n\tif ( len === 1 ) {\n\t\tpattern = patterns[ format ];\n\t\tif ( !pattern ) {\n\t\t\tthrow \"Invalid date format string \\'\" + format + \"\\'.\";\n\t\t}\n\t\tformat = pattern;\n\t}\n\telse if ( len === 2 && format.charAt(0) === \"%\" ) {\n\t\t// %X escape format -- intended as a custom format string that is only one character, not a built-in format.\n\t\tformat = format.charAt( 1 );\n\t}\n\treturn format;\n};\n\nformatDate = function( value, format, culture ) {\n\tvar cal = culture.calendar,\n\t\tconvert = cal.convert,\n\t\tret;\n\n\tif ( !format || !format.length || format === \"i\" ) {\n\t\tif ( culture && culture.name.length ) {\n\t\t\tif ( convert ) {\n\t\t\t\t// non-gregorian calendar, so we cannot use built-in toLocaleString()\n\t\t\t\tret = formatDate( value, cal.patterns.F, culture );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar eraDate = new Date( value.getTime() ),\n\t\t\t\t\tera = getEra( value, cal.eras );\n\t\t\t\teraDate.setFullYear( getEraYear(value, cal, era) );\n\t\t\t\tret = eraDate.toLocaleString();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tret = value.toString();\n\t\t}\n\t\treturn ret;\n\t}\n\n\tvar eras = cal.eras,\n\t\tsortable = format === \"s\";\n\tformat = expandFormat( cal, format );\n\n\t// Start with an empty string\n\tret = [];\n\tvar hour,\n\t\tzeros = [ \"0\", \"00\", \"000\" ],\n\t\tfoundDay,\n\t\tcheckedDay,\n\t\tdayPartRegExp = /([^d]|^)(d|dd)([^d]|$)/g,\n\t\tquoteCount = 0,\n\t\ttokenRegExp = getTokenRegExp(),\n\t\tconverted;\n\n\tfunction padZeros( num, c ) {\n\t\tvar r, s = num + \"\";\n\t\tif ( c > 1 && s.length < c ) {\n\t\t\tr = ( zeros[c - 2] + s);\n\t\t\treturn r.substr( r.length - c, c );\n\t\t}\n\t\telse {\n\t\t\tr = s;\n\t\t}\n\t\treturn r;\n\t}\n\n\tfunction hasDay() {\n\t\tif ( foundDay || checkedDay ) {\n\t\t\treturn foundDay;\n\t\t}\n\t\tfoundDay = dayPartRegExp.test( format );\n\t\tcheckedDay = true;\n\t\treturn foundDay;\n\t}\n\n\tfunction getPart( date, part ) {\n\t\tif ( converted ) {\n\t\t\treturn converted[ part ];\n\t\t}\n\t\tswitch ( part ) {\n\t\t\tcase 0:\n\t\t\t\treturn date.getFullYear();\n\t\t\tcase 1:\n\t\t\t\treturn date.getMonth();\n\t\t\tcase 2:\n\t\t\t\treturn date.getDate();\n\t\t\tdefault:\n\t\t\t\tthrow \"Invalid part value \" + part;\n\t\t}\n\t}\n\n\tif ( !sortable && convert ) {\n\t\tconverted = convert.fromGregorian( value );\n\t}\n\n\tfor ( ; ; ) {\n\t\t// Save the current index\n\t\tvar index = tokenRegExp.lastIndex,\n\t\t\t// Look for the next pattern\n\t\t\tar = tokenRegExp.exec( format );\n\n\t\t// Append the text before the pattern (or the end of the string if not found)\n\t\tvar preMatch = format.slice( index, ar ? ar.index : format.length );\n\t\tquoteCount += appendPreOrPostMatch( preMatch, ret );\n\n\t\tif ( !ar ) {\n\t\t\tbreak;\n\t\t}\n\n\t\t// do not replace any matches that occur inside a string literal.\n\t\tif ( quoteCount % 2 ) {\n\t\t\tret.push( ar[0] );\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar current = ar[ 0 ],\n\t\t\tclength = current.length;\n\n\t\tswitch ( current ) {\n\t\t\tcase \"ddd\":\n\t\t\t\t//Day of the week, as a three-letter abbreviation\n\t\t\tcase \"dddd\":\n\t\t\t\t// Day of the week, using the full name\n\t\t\t\tvar names = ( clength === 3 ) ? cal.days.namesAbbr : cal.days.names;\n\t\t\t\tret.push( names[value.getDay()] );\n\t\t\t\tbreak;\n\t\t\tcase \"d\":\n\t\t\t\t// Day of month, without leading zero for single-digit days\n\t\t\tcase \"dd\":\n\t\t\t\t// Day of month, with leading zero for single-digit days\n\t\t\t\tfoundDay = true;\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( getPart(value, 2), clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"MMM\":\n\t\t\t\t// Month, as a three-letter abbreviation\n\t\t\tcase \"MMMM\":\n\t\t\t\t// Month, using the full name\n\t\t\t\tvar part = getPart( value, 1 );\n\t\t\t\tret.push(\n\t\t\t\t\t( cal.monthsGenitive && hasDay() ) ?\n\t\t\t\t\t( cal.monthsGenitive[ clength === 3 ? \"namesAbbr\" : \"names\" ][ part ] ) :\n\t\t\t\t\t( cal.months[ clength === 3 ? \"namesAbbr\" : \"names\" ][ part ] )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"M\":\n\t\t\t\t// Month, as digits, with no leading zero for single-digit months\n\t\t\tcase \"MM\":\n\t\t\t\t// Month, as digits, with leading zero for single-digit months\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( getPart(value, 1) + 1, clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"y\":\n\t\t\t\t// Year, as two digits, but with no leading zero for years less than 10\n\t\t\tcase \"yy\":\n\t\t\t\t// Year, as two digits, with leading zero for years less than 10\n\t\t\tcase \"yyyy\":\n\t\t\t\t// Year represented by four full digits\n\t\t\t\tpart = converted ? converted[ 0 ] : getEraYear( value, cal, getEra(value, eras), sortable );\n\t\t\t\tif ( clength < 4 ) {\n\t\t\t\t\tpart = part % 100;\n\t\t\t\t}\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( part, clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"h\":\n\t\t\t\t// Hours with no leading zero for single-digit hours, using 12-hour clock\n\t\t\tcase \"hh\":\n\t\t\t\t// Hours with leading zero for single-digit hours, using 12-hour clock\n\t\t\t\thour = value.getHours() % 12;\n\t\t\t\tif ( hour === 0 ) hour = 12;\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( hour, clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"H\":\n\t\t\t\t// Hours with no leading zero for single-digit hours, using 24-hour clock\n\t\t\tcase \"HH\":\n\t\t\t\t// Hours with leading zero for single-digit hours, using 24-hour clock\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( value.getHours(), clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"m\":\n\t\t\t\t// Minutes with no leading zero for single-digit minutes\n\t\t\tcase \"mm\":\n\t\t\t\t// Minutes with leading zero for single-digit minutes\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( value.getMinutes(), clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"s\":\n\t\t\t\t// Seconds with no leading zero for single-digit seconds\n\t\t\tcase \"ss\":\n\t\t\t\t// Seconds with leading zero for single-digit seconds\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( value.getSeconds(), clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"t\":\n\t\t\t\t// One character am/pm indicator (\"a\" or \"p\")\n\t\t\tcase \"tt\":\n\t\t\t\t// Multicharacter am/pm indicator\n\t\t\t\tpart = value.getHours() < 12 ? ( cal.AM ? cal.AM[0] : \" \" ) : ( cal.PM ? cal.PM[0] : \" \" );\n\t\t\t\tret.push( clength === 1 ? part.charAt(0) : part );\n\t\t\t\tbreak;\n\t\t\tcase \"f\":\n\t\t\t\t// Deciseconds\n\t\t\tcase \"ff\":\n\t\t\t\t// Centiseconds\n\t\t\tcase \"fff\":\n\t\t\t\t// Milliseconds\n\t\t\t\tret.push(\n\t\t\t\t\tpadZeros( value.getMilliseconds(), 3 ).substr( 0, clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"z\":\n\t\t\t\t// Time zone offset, no leading zero\n\t\t\tcase \"zz\":\n\t\t\t\t// Time zone offset with leading zero\n\t\t\t\thour = value.getTimezoneOffset() / 60;\n\t\t\t\tret.push(\n\t\t\t\t\t( hour <= 0 ? \"+\" : \"-\" ) + padZeros( Math.floor(Math.abs(hour)), clength )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"zzz\":\n\t\t\t\t// Time zone offset with leading zero\n\t\t\t\thour = value.getTimezoneOffset() / 60;\n\t\t\t\tret.push(\n\t\t\t\t\t( hour <= 0 ? \"+\" : \"-\" ) + padZeros( Math.floor(Math.abs(hour)), 2 ) +\n\t\t\t\t\t// Hard coded \":\" separator, rather than using cal.TimeSeparator\n\t\t\t\t\t// Repeated here for consistency, plus \":\" was already assumed in date parsing.\n\t\t\t\t\t\":\" + padZeros( Math.abs(value.getTimezoneOffset() % 60), 2 )\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"g\":\n\t\t\tcase \"gg\":\n\t\t\t\tif ( cal.eras ) {\n\t\t\t\t\tret.push(\n\t\t\t\t\t\tcal.eras[ getEra(value, eras) ].name\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\tcase \"/\":\n\t\t\tret.push( cal[\"/\"] );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow \"Invalid date format pattern \\'\" + current + \"\\'.\";\n\t\t}\n\t}\n\treturn ret.join( \"\" );\n};\n\n// formatNumber\n(function() {\n\tvar expandNumber;\n\n\texpandNumber = function( number, precision, formatInfo ) {\n\t\tvar groupSizes = formatInfo.groupSizes,\n\t\t\tcurSize = groupSizes[ 0 ],\n\t\t\tcurGroupIndex = 1,\n\t\t\tfactor = Math.pow( 10, precision ),\n\t\t\trounded = Math.round( number * factor ) / factor;\n\n\t\tif ( !isFinite(rounded) ) {\n\t\t\trounded = number;\n\t\t}\n\t\tnumber = rounded;\n\n\t\tvar numberString = number+\"\",\n\t\t\tright = \"\",\n\t\t\tsplit = numberString.split( /e/i ),\n\t\t\texponent = split.length > 1 ? parseInt( split[1], 10 ) : 0;\n\t\tnumberString = split[ 0 ];\n\t\tsplit = numberString.split( \".\" );\n\t\tnumberString = split[ 0 ];\n\t\tright = split.length > 1 ? split[ 1 ] : \"\";\n\n\t\tif ( exponent > 0 ) {\n\t\t\tright = zeroPad( right, exponent, false );\n\t\t\tnumberString += right.slice( 0, exponent );\n\t\t\tright = right.substr( exponent );\n\t\t}\n\t\telse if ( exponent < 0 ) {\n\t\t\texponent = -exponent;\n\t\t\tnumberString = zeroPad( numberString, exponent + 1, true );\n\t\t\tright = numberString.slice( -exponent, numberString.length ) + right;\n\t\t\tnumberString = numberString.slice( 0, -exponent );\n\t\t}\n\n\t\tif ( precision > 0 ) {\n\t\t\tright = formatInfo[ \".\" ] +\n\t\t\t\t( (right.length > precision) ? right.slice(0, precision) : zeroPad(right, precision) );\n\t\t}\n\t\telse {\n\t\t\tright = \"\";\n\t\t}\n\n\t\tvar stringIndex = numberString.length - 1,\n\t\t\tsep = formatInfo[ \",\" ],\n\t\t\tret = \"\";\n\n\t\twhile ( stringIndex >= 0 ) {\n\t\t\tif ( curSize === 0 || curSize > stringIndex ) {\n\t\t\t\treturn numberString.slice( 0, stringIndex + 1 ) + ( ret.length ? (sep + ret + right) : right );\n\t\t\t}\n\t\t\tret = numberString.slice( stringIndex - curSize + 1, stringIndex + 1 ) + ( ret.length ? (sep + ret) : \"\" );\n\n\t\t\tstringIndex -= curSize;\n\n\t\t\tif ( curGroupIndex < groupSizes.length ) {\n\t\t\t\tcurSize = groupSizes[ curGroupIndex ];\n\t\t\t\tcurGroupIndex++;\n\t\t\t}\n\t\t}\n\n\t\treturn numberString.slice( 0, stringIndex + 1 ) + sep + ret + right;\n\t};\n\n\tformatNumber = function( value, format, culture ) {\n\t\tif ( !isFinite(value) ) {\n\t\t\tif ( value === Infinity ) {\n\t\t\t\treturn culture.numberFormat.positiveInfinity;\n\t\t\t}\n\t\t\tif ( value === -Infinity ) {\n\t\t\t\treturn culture.numberFormat.negativeInfinity;\n\t\t\t}\n\t\t\treturn culture.numberFormat.NaN;\n\t\t}\n\t\tif ( !format || format === \"i\" ) {\n\t\t\treturn culture.name.length ? value.toLocaleString() : value.toString();\n\t\t}\n\t\tformat = format || \"D\";\n\n\t\tvar nf = culture.numberFormat,\n\t\t\tnumber = Math.abs( value ),\n\t\t\tprecision = -1,\n\t\t\tpattern;\n\t\tif ( format.length > 1 ) precision = parseInt( format.slice(1), 10 );\n\n\t\tvar current = format.charAt( 0 ).toUpperCase(),\n\t\t\tformatInfo;\n\n\t\tswitch ( current ) {\n\t\t\tcase \"D\":\n\t\t\t\tpattern = \"n\";\n\t\t\t\tnumber = truncate( number );\n\t\t\t\tif ( precision !== -1 ) {\n\t\t\t\t\tnumber = zeroPad( \"\" + number, precision, true );\n\t\t\t\t}\n\t\t\t\tif ( value < 0 ) number = \"-\" + number;\n\t\t\t\tbreak;\n\t\t\tcase \"N\":\n\t\t\t\tformatInfo = nf;\n\t\t\t\t/* falls through */\n\t\t\tcase \"C\":\n\t\t\t\tformatInfo = formatInfo || nf.currency;\n\t\t\t\t/* falls through */\n\t\t\tcase \"P\":\n\t\t\t\tformatInfo = formatInfo || nf.percent;\n\t\t\t\tpattern = value < 0 ? formatInfo.pattern[ 0 ] : ( formatInfo.pattern[1] || \"n\" );\n\t\t\t\tif ( precision === -1 ) precision = formatInfo.decimals;\n\t\t\t\tnumber = expandNumber( number * (current === \"P\" ? 100 : 1), precision, formatInfo );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow \"Bad number format specifier: \" + current;\n\t\t}\n\n\t\tvar patternParts = /n|\\$|-|%/g,\n\t\t\tret = \"\";\n\t\tfor ( ; ; ) {\n\t\t\tvar index = patternParts.lastIndex,\n\t\t\t\tar = patternParts.exec( pattern );\n\n\t\t\tret += pattern.slice( index, ar ? ar.index : pattern.length );\n\n\t\t\tif ( !ar ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch ( ar[0] ) {\n\t\t\t\tcase \"n\":\n\t\t\t\t\tret += number;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"$\":\n\t\t\t\t\tret += nf.currency.symbol;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"-\":\n\t\t\t\t\t// don't make 0 negative\n\t\t\t\t\tif ( /[1-9]/.test(number) ) {\n\t\t\t\t\t\tret += nf[ \"-\" ];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"%\":\n\t\t\t\t\tret += nf.percent.symbol;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t};\n\n}());\n\ngetTokenRegExp = function() {\n\t// regular expression for matching date and time tokens in format strings.\n\treturn (/\\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g);\n};\n\ngetEra = function( date, eras ) {\n\tif ( !eras ) return 0;\n\tvar start, ticks = date.getTime();\n\tfor ( var i = 0, l = eras.length; i < l; i++ ) {\n\t\tstart = eras[ i ].start;\n\t\tif ( start === null || ticks >= start ) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn 0;\n};\n\ngetEraYear = function( date, cal, era, sortable ) {\n\tvar year = date.getFullYear();\n\tif ( !sortable && cal.eras ) {\n\t\t// convert normal gregorian year to era-shifted gregorian\n\t\t// year by subtracting the era offset\n\t\tyear -= cal.eras[ era ].offset;\n\t}\n\treturn year;\n};\n\n// parseExact\n(function() {\n\tvar expandYear,\n\t\tgetDayIndex,\n\t\tgetMonthIndex,\n\t\tgetParseRegExp,\n\t\toutOfRange,\n\t\ttoUpper,\n\t\ttoUpperArray;\n\n\texpandYear = function( cal, year ) {\n\t\t// expands 2-digit year into 4 digits.\n\t\tif ( year < 100 ) {\n\t\t\tvar now = new Date(),\n\t\t\t\tera = getEra( now ),\n\t\t\t\tcurr = getEraYear( now, cal, era ),\n\t\t\t\ttwoDigitYearMax = cal.twoDigitYearMax;\n\t\t\ttwoDigitYearMax = typeof twoDigitYearMax === \"string\" ? new Date().getFullYear() % 100 + parseInt( twoDigitYearMax, 10 ) : twoDigitYearMax;\n\t\t\tyear += curr - ( curr % 100 );\n\t\t\tif ( year > twoDigitYearMax ) {\n\t\t\t\tyear -= 100;\n\t\t\t}\n\t\t}\n\t\treturn year;\n\t};\n\n\tgetDayIndex = function\t( cal, value, abbr ) {\n\t\tvar ret,\n\t\t\tdays = cal.days,\n\t\t\tupperDays = cal._upperDays;\n\t\tif ( !upperDays ) {\n\t\t\tcal._upperDays = upperDays = [\n\t\t\t\ttoUpperArray( days.names ),\n\t\t\t\ttoUpperArray( days.namesAbbr ),\n\t\t\t\ttoUpperArray( days.namesShort )\n\t\t\t];\n\t\t}\n\t\tvalue = toUpper( value );\n\t\tif ( abbr ) {\n\t\t\tret = arrayIndexOf( upperDays[1], value );\n\t\t\tif ( ret === -1 ) {\n\t\t\t\tret = arrayIndexOf( upperDays[2], value );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tret = arrayIndexOf( upperDays[0], value );\n\t\t}\n\t\treturn ret;\n\t};\n\n\tgetMonthIndex = function( cal, value, abbr ) {\n\t\tvar months = cal.months,\n\t\t\tmonthsGen = cal.monthsGenitive || cal.months,\n\t\t\tupperMonths = cal._upperMonths,\n\t\t\tupperMonthsGen = cal._upperMonthsGen;\n\t\tif ( !upperMonths ) {\n\t\t\tcal._upperMonths = upperMonths = [\n\t\t\t\ttoUpperArray( months.names ),\n\t\t\t\ttoUpperArray( months.namesAbbr )\n\t\t\t];\n\t\t\tcal._upperMonthsGen = upperMonthsGen = [\n\t\t\t\ttoUpperArray( monthsGen.names ),\n\t\t\t\ttoUpperArray( monthsGen.namesAbbr )\n\t\t\t];\n\t\t}\n\t\tvalue = toUpper( value );\n\t\tvar i = arrayIndexOf( abbr ? upperMonths[1] : upperMonths[0], value );\n\t\tif ( i < 0 ) {\n\t\t\ti = arrayIndexOf( abbr ? upperMonthsGen[1] : upperMonthsGen[0], value );\n\t\t}\n\t\treturn i;\n\t};\n\n\tgetParseRegExp = function( cal, format ) {\n\t\t// converts a format string into a regular expression with groups that\n\t\t// can be used to extract date fields from a date string.\n\t\t// check for a cached parse regex.\n\t\tvar re = cal._parseRegExp;\n\t\tif ( !re ) {\n\t\t\tcal._parseRegExp = re = {};\n\t\t}\n\t\telse {\n\t\t\tvar reFormat = re[ format ];\n\t\t\tif ( reFormat ) {\n\t\t\t\treturn reFormat;\n\t\t\t}\n\t\t}\n\n\t\t// expand single digit formats, then escape regular expression characters.\n\t\tvar expFormat = expandFormat( cal, format ).replace( /([\\^\\$\\.\\*\\+\\?\\|\\[\\]\\(\\)\\{\\}])/g, \"\\\\\\\\$1\" ),\n\t\t\tregexp = [ \"^\" ],\n\t\t\tgroups = [],\n\t\t\tindex = 0,\n\t\t\tquoteCount = 0,\n\t\t\ttokenRegExp = getTokenRegExp(),\n\t\t\tmatch;\n\n\t\t// iterate through each date token found.\n\t\twhile ( (match = tokenRegExp.exec(expFormat)) !== null ) {\n\t\t\tvar preMatch = expFormat.slice( index, match.index );\n\t\t\tindex = tokenRegExp.lastIndex;\n\n\t\t\t// don't replace any matches that occur inside a string literal.\n\t\t\tquoteCount += appendPreOrPostMatch( preMatch, regexp );\n\t\t\tif ( quoteCount % 2 ) {\n\t\t\t\tregexp.push( match[0] );\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// add a regex group for the token.\n\t\t\tvar m = match[ 0 ],\n\t\t\t\tlen = m.length,\n\t\t\t\tadd;\n\t\t\tswitch ( m ) {\n\t\t\t\tcase \"dddd\": case \"ddd\":\n\t\t\t\tcase \"MMMM\": case \"MMM\":\n\t\t\t\tcase \"gg\": case \"g\":\n\t\t\t\t\tadd = \"(\\\\D+)\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"tt\": case \"t\":\n\t\t\t\t\tadd = \"(\\\\D*)\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"yyyy\":\n\t\t\t\tcase \"fff\":\n\t\t\t\tcase \"ff\":\n\t\t\t\tcase \"f\":\n\t\t\t\t\tadd = \"(\\\\d{\" + len + \"})\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"dd\": case \"d\":\n\t\t\t\tcase \"MM\": case \"M\":\n\t\t\t\tcase \"yy\": case \"y\":\n\t\t\t\tcase \"HH\": case \"H\":\n\t\t\t\tcase \"hh\": case \"h\":\n\t\t\t\tcase \"mm\": case \"m\":\n\t\t\t\tcase \"ss\": case \"s\":\n\t\t\t\t\tadd = \"(\\\\d\\\\d?)\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"zzz\":\n\t\t\t\t\tadd = \"([+-]?\\\\d\\\\d?:\\\\d{2})\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"zz\": case \"z\":\n\t\t\t\t\tadd = \"([+-]?\\\\d\\\\d?)\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"/\":\n\t\t\t\t\tadd = \"(\\\\/)\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow \"Invalid date format pattern \\'\" + m + \"\\'.\";\n\t\t\t}\n\t\t\tif ( add ) {\n\t\t\t\tregexp.push( add );\n\t\t\t}\n\t\t\tgroups.push( match[0] );\n\t\t}\n\t\tappendPreOrPostMatch( expFormat.slice(index), regexp );\n\t\tregexp.push( \"$\" );\n\n\t\t// allow whitespace to differ when matching formats.\n\t\tvar regexpStr = regexp.join( \"\" ).replace( /\\s+/g, \"\\\\s+\" ),\n\t\t\tparseRegExp = { \"regExp\": regexpStr, \"groups\": groups };\n\n\t\t// cache the regex for this format.\n\t\treturn re[ format ] = parseRegExp;\n\t};\n\n\toutOfRange = function( value, low, high ) {\n\t\treturn value < low || value > high;\n\t};\n\n\ttoUpper = function( value ) {\n\t\t// \"he-IL\" has non-breaking space in weekday names.\n\t\treturn value.split( \"\\u00A0\" ).join( \" \" ).toUpperCase();\n\t};\n\n\ttoUpperArray = function( arr ) {\n\t\tvar results = [];\n\t\tfor ( var i = 0, l = arr.length; i < l; i++ ) {\n\t\t\tresults[ i ] = toUpper( arr[i] );\n\t\t}\n\t\treturn results;\n\t};\n\n\tparseExact = function( value, format, culture ) {\n\t\t// try to parse the date string by matching against the format string\n\t\t// while using the specified culture for date field names.\n\t\tvalue = trim( value );\n\t\tvar cal = culture.calendar,\n\t\t\t// convert date formats into regular expressions with groupings.\n\t\t\t// use the regexp to determine the input format and extract the date fields.\n\t\t\tparseInfo = getParseRegExp( cal, format ),\n\t\t\tmatch = new RegExp( parseInfo.regExp ).exec( value );\n\t\tif ( match === null ) {\n\t\t\treturn null;\n\t\t}\n\t\t// found a date format that matches the input.\n\t\tvar groups = parseInfo.groups,\n\t\t\tera = null, year = null, month = null, date = null, weekDay = null,\n\t\t\thour = 0, hourOffset, min = 0, sec = 0, msec = 0, tzMinOffset = null,\n\t\t\tpmHour = false;\n\t\t// iterate the format groups to extract and set the date fields.\n\t\tfor ( var j = 0, jl = groups.length; j < jl; j++ ) {\n\t\t\tvar matchGroup = match[ j + 1 ];\n\t\t\tif ( matchGroup ) {\n\t\t\t\tvar current = groups[ j ],\n\t\t\t\t\tclength = current.length,\n\t\t\t\t\tmatchInt = parseInt( matchGroup, 10 );\n\t\t\t\tswitch ( current ) {\n\t\t\t\t\tcase \"dd\": case \"d\":\n\t\t\t\t\t\t// Day of month.\n\t\t\t\t\t\tdate = matchInt;\n\t\t\t\t\t\t// check that date is generally in valid range, also checking overflow below.\n\t\t\t\t\t\tif ( outOfRange(date, 1, 31) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"MMM\": case \"MMMM\":\n\t\t\t\t\t\tmonth = getMonthIndex( cal, matchGroup, clength === 3 );\n\t\t\t\t\t\tif ( outOfRange(month, 0, 11) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"M\": case \"MM\":\n\t\t\t\t\t\t// Month.\n\t\t\t\t\t\tmonth = matchInt - 1;\n\t\t\t\t\t\tif ( outOfRange(month, 0, 11) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"y\": case \"yy\":\n\t\t\t\t\tcase \"yyyy\":\n\t\t\t\t\t\tyear = clength < 4 ? expandYear( cal, matchInt ) : matchInt;\n\t\t\t\t\t\tif ( outOfRange(year, 0, 9999) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"h\": case \"hh\":\n\t\t\t\t\t\t// Hours (12-hour clock).\n\t\t\t\t\t\thour = matchInt;\n\t\t\t\t\t\tif ( hour === 12 ) hour = 0;\n\t\t\t\t\t\tif ( outOfRange(hour, 0, 11) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"H\": case \"HH\":\n\t\t\t\t\t\t// Hours (24-hour clock).\n\t\t\t\t\t\thour = matchInt;\n\t\t\t\t\t\tif ( outOfRange(hour, 0, 23) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"m\": case \"mm\":\n\t\t\t\t\t\t// Minutes.\n\t\t\t\t\t\tmin = matchInt;\n\t\t\t\t\t\tif ( outOfRange(min, 0, 59) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"s\": case \"ss\":\n\t\t\t\t\t\t// Seconds.\n\t\t\t\t\t\tsec = matchInt;\n\t\t\t\t\t\tif ( outOfRange(sec, 0, 59) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"tt\": case \"t\":\n\t\t\t\t\t\t// AM/PM designator.\n\t\t\t\t\t\t// see if it is standard, upper, or lower case PM. If not, ensure it is at least one of\n\t\t\t\t\t\t// the AM tokens. If not, fail the parse for this format.\n\t\t\t\t\t\tpmHour = cal.PM && ( matchGroup === cal.PM[0] || matchGroup === cal.PM[1] || matchGroup === cal.PM[2] );\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!pmHour && (\n\t\t\t\t\t\t\t\t!cal.AM || ( matchGroup !== cal.AM[0] && matchGroup !== cal.AM[1] && matchGroup !== cal.AM[2] )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"f\":\n\t\t\t\t\t\t// Deciseconds.\n\t\t\t\t\tcase \"ff\":\n\t\t\t\t\t\t// Centiseconds.\n\t\t\t\t\tcase \"fff\":\n\t\t\t\t\t\t// Milliseconds.\n\t\t\t\t\t\tmsec = matchInt * Math.pow( 10, 3 - clength );\n\t\t\t\t\t\tif ( outOfRange(msec, 0, 999) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"ddd\":\n\t\t\t\t\t\t// Day of week.\n\t\t\t\t\tcase \"dddd\":\n\t\t\t\t\t\t// Day of week.\n\t\t\t\t\t\tweekDay = getDayIndex( cal, matchGroup, clength === 3 );\n\t\t\t\t\t\tif ( outOfRange(weekDay, 0, 6) ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"zzz\":\n\t\t\t\t\t\t// Time zone offset in +/- hours:min.\n\t\t\t\t\t\tvar offsets = matchGroup.split( /:/ );\n\t\t\t\t\t\tif ( offsets.length !== 2 ) return null;\n\t\t\t\t\t\thourOffset = parseInt( offsets[0], 10 );\n\t\t\t\t\t\tif ( outOfRange(hourOffset, -12, 13) ) return null;\n\t\t\t\t\t\tvar minOffset = parseInt( offsets[1], 10 );\n\t\t\t\t\t\tif ( outOfRange(minOffset, 0, 59) ) return null;\n\t\t\t\t\t\ttzMinOffset = ( hourOffset * 60 ) + ( startsWith(matchGroup, \"-\") ? -minOffset : minOffset );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"z\": case \"zz\":\n\t\t\t\t\t\t// Time zone offset in +/- hours.\n\t\t\t\t\t\thourOffset = matchInt;\n\t\t\t\t\t\tif ( outOfRange(hourOffset, -12, 13) ) return null;\n\t\t\t\t\t\ttzMinOffset = hourOffset * 60;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"g\": case \"gg\":\n\t\t\t\t\t\tvar eraName = matchGroup;\n\t\t\t\t\t\tif ( !eraName || !cal.eras ) return null;\n\t\t\t\t\t\teraName = trim( eraName.toLowerCase() );\n\t\t\t\t\t\tfor ( var i = 0, l = cal.eras.length; i < l; i++ ) {\n\t\t\t\t\t\t\tif ( eraName === cal.eras[i].name.toLowerCase() ) {\n\t\t\t\t\t\t\t\tera = i;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// could not find an era with that name\n\t\t\t\t\t\tif ( era === null ) return null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvar result = new Date(), defaultYear, convert = cal.convert;\n\t\tdefaultYear = convert ? convert.fromGregorian( result )[ 0 ] : result.getFullYear();\n\t\tif ( year === null ) {\n\t\t\tyear = defaultYear;\n\t\t}\n\t\telse if ( cal.eras ) {\n\t\t\t// year must be shifted to normal gregorian year\n\t\t\t// but not if year was not specified, its already normal gregorian\n\t\t\t// per the main if clause above.\n\t\t\tyear += cal.eras[( era || 0 )].offset;\n\t\t}\n\t\t// set default day and month to 1 and January, so if unspecified, these are the defaults\n\t\t// instead of the current day/month.\n\t\tif ( month === null ) {\n\t\t\tmonth = 0;\n\t\t}\n\t\tif ( date === null ) {\n\t\t\tdate = 1;\n\t\t}\n\t\t// now have year, month, and date, but in the culture's calendar.\n\t\t// convert to gregorian if necessary\n\t\tif ( convert ) {\n\t\t\tresult = convert.toGregorian( year, month, date );\n\t\t\t// conversion failed, must be an invalid match\n\t\t\tif ( result === null ) return null;\n\t\t}\n\t\telse {\n\t\t\t// have to set year, month and date together to avoid overflow based on current date.\n\t\t\tresult.setFullYear( year, month, date );\n\t\t\t// check to see if date overflowed for specified month (only checked 1-31 above).\n\t\t\tif ( result.getDate() !== date ) return null;\n\t\t\t// invalid day of week.\n\t\t\tif ( weekDay !== null && result.getDay() !== weekDay ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t\t// if pm designator token was found make sure the hours fit the 24-hour clock.\n\t\tif ( pmHour && hour < 12 ) {\n\t\t\thour += 12;\n\t\t}\n\t\tresult.setHours( hour, min, sec, msec );\n\t\tif ( tzMinOffset !== null ) {\n\t\t\t// adjust timezone to utc before applying local offset.\n\t\t\tvar adjustedMin = result.getMinutes() - ( tzMinOffset + result.getTimezoneOffset() );\n\t\t\t// Safari limits hours and minutes to the range of -127 to 127.  We need to use setHours\n\t\t\t// to ensure both these fields will not exceed this range.\tadjustedMin will range\n\t\t\t// somewhere between -1440 and 1500, so we only need to split this into hours.\n\t\t\tresult.setHours( result.getHours() + parseInt(adjustedMin / 60, 10), adjustedMin % 60 );\n\t\t}\n\t\treturn result;\n\t};\n}());\n\nparseNegativePattern = function( value, nf, negativePattern ) {\n\tvar neg = nf[ \"-\" ],\n\t\tpos = nf[ \"+\" ],\n\t\tret;\n\tswitch ( negativePattern ) {\n\t\tcase \"n -\":\n\t\t\tneg = \" \" + neg;\n\t\t\tpos = \" \" + pos;\n\t\t\t/* falls through */\n\t\tcase \"n-\":\n\t\t\tif ( endsWith(value, neg) ) {\n\t\t\t\tret = [ \"-\", value.substr(0, value.length - neg.length) ];\n\t\t\t}\n\t\t\telse if ( endsWith(value, pos) ) {\n\t\t\t\tret = [ \"+\", value.substr(0, value.length - pos.length) ];\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"- n\":\n\t\t\tneg += \" \";\n\t\t\tpos += \" \";\n\t\t\t/* falls through */\n\t\tcase \"-n\":\n\t\t\tif ( startsWith(value, neg) ) {\n\t\t\t\tret = [ \"-\", value.substr(neg.length) ];\n\t\t\t}\n\t\t\telse if ( startsWith(value, pos) ) {\n\t\t\t\tret = [ \"+\", value.substr(pos.length) ];\n\t\t\t}\n\t\t\tbreak;\n\t\tcase \"(n)\":\n\t\t\tif ( startsWith(value, \"(\") && endsWith(value, \")\") ) {\n\t\t\t\tret = [ \"-\", value.substr(1, value.length - 2) ];\n\t\t\t}\n\t\t\tbreak;\n\t}\n\treturn ret || [ \"\", value ];\n};\n\n//\n// public instance functions\n//\n\nGlobalize.prototype.findClosestCulture = function( cultureSelector ) {\n\treturn Globalize.findClosestCulture.call( this, cultureSelector );\n};\n\nGlobalize.prototype.format = function( value, format, cultureSelector ) {\n\treturn Globalize.format.call( this, value, format, cultureSelector );\n};\n\nGlobalize.prototype.localize = function( key, cultureSelector ) {\n\treturn Globalize.localize.call( this, key, cultureSelector );\n};\n\nGlobalize.prototype.parseInt = function( value, radix, cultureSelector ) {\n\treturn Globalize.parseInt.call( this, value, radix, cultureSelector );\n};\n\nGlobalize.prototype.parseFloat = function( value, radix, cultureSelector ) {\n\treturn Globalize.parseFloat.call( this, value, radix, cultureSelector );\n};\n\nGlobalize.prototype.culture = function( cultureSelector ) {\n\treturn Globalize.culture.call( this, cultureSelector );\n};\n\n//\n// public singleton functions\n//\n\nGlobalize.addCultureInfo = function( cultureName, baseCultureName, info ) {\n\n\tvar base = {},\n\t\tisNew = false;\n\n\tif ( typeof cultureName !== \"string\" ) {\n\t\t// cultureName argument is optional string. If not specified, assume info is first\n\t\t// and only argument. Specified info deep-extends current culture.\n\t\tinfo = cultureName;\n\t\tcultureName = this.culture().name;\n\t\tbase = this.cultures[ cultureName ];\n\t} else if ( typeof baseCultureName !== \"string\" ) {\n\t\t// baseCultureName argument is optional string. If not specified, assume info is second\n\t\t// argument. Specified info deep-extends specified culture.\n\t\t// If specified culture does not exist, create by deep-extending default\n\t\tinfo = baseCultureName;\n\t\tisNew = ( this.cultures[ cultureName ] == null );\n\t\tbase = this.cultures[ cultureName ] || this.cultures[ \"default\" ];\n\t} else {\n\t\t// cultureName and baseCultureName specified. Assume a new culture is being created\n\t\t// by deep-extending an specified base culture\n\t\tisNew = true;\n\t\tbase = this.cultures[ baseCultureName ];\n\t}\n\n\tthis.cultures[ cultureName ] = extend(true, {},\n\t\tbase,\n\t\tinfo\n\t);\n\t// Make the standard calendar the current culture if it's a new culture\n\tif ( isNew ) {\n\t\tthis.cultures[ cultureName ].calendar = this.cultures[ cultureName ].calendars.standard;\n\t}\n};\n\nGlobalize.findClosestCulture = function( name ) {\n\tvar match;\n\tif ( !name ) {\n\t\treturn this.findClosestCulture( this.cultureSelector ) || this.cultures[ \"default\" ];\n\t}\n\tif ( typeof name === \"string\" ) {\n\t\tname = name.split( \",\" );\n\t}\n\tif ( isArray(name) ) {\n\t\tvar lang,\n\t\t\tcultures = this.cultures,\n\t\t\tlist = name,\n\t\t\ti, l = list.length,\n\t\t\tprioritized = [];\n\t\tfor ( i = 0; i < l; i++ ) {\n\t\t\tname = trim( list[i] );\n\t\t\tvar pri, parts = name.split( \";\" );\n\t\t\tlang = trim( parts[0] );\n\t\t\tif ( parts.length === 1 ) {\n\t\t\t\tpri = 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tname = trim( parts[1] );\n\t\t\t\tif ( name.indexOf(\"q=\") === 0 ) {\n\t\t\t\t\tname = name.substr( 2 );\n\t\t\t\t\tpri = parseFloat( name );\n\t\t\t\t\tpri = isNaN( pri ) ? 0 : pri;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpri = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprioritized.push({ lang: lang, pri: pri });\n\t\t}\n\t\tprioritized.sort(function( a, b ) {\n\t\t\tif ( a.pri < b.pri ) {\n\t\t\t\treturn 1;\n\t\t\t} else if ( a.pri > b.pri ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\t\t// exact match\n\t\tfor ( i = 0; i < l; i++ ) {\n\t\t\tlang = prioritized[ i ].lang;\n\t\t\tmatch = cultures[ lang ];\n\t\t\tif ( match ) {\n\t\t\t\treturn match;\n\t\t\t}\n\t\t}\n\n\t\t// neutral language match\n\t\tfor ( i = 0; i < l; i++ ) {\n\t\t\tlang = prioritized[ i ].lang;\n\t\t\tdo {\n\t\t\t\tvar index = lang.lastIndexOf( \"-\" );\n\t\t\t\tif ( index === -1 ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// strip off the last part. e.g. en-US => en\n\t\t\t\tlang = lang.substr( 0, index );\n\t\t\t\tmatch = cultures[ lang ];\n\t\t\t\tif ( match ) {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile ( 1 );\n\t\t}\n\n\t\t// last resort: match first culture using that language\n\t\tfor ( i = 0; i < l; i++ ) {\n\t\t\tlang = prioritized[ i ].lang;\n\t\t\tfor ( var cultureKey in cultures ) {\n\t\t\t\tvar culture = cultures[ cultureKey ];\n\t\t\t\tif ( culture.language === lang ) {\n\t\t\t\t\treturn culture;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\telse if ( typeof name === \"object\" ) {\n\t\treturn name;\n\t}\n\treturn match || null;\n};\n\nGlobalize.format = function( value, format, cultureSelector ) {\n\tvar culture = this.findClosestCulture( cultureSelector );\n\tif ( value instanceof Date ) {\n\t\tvalue = formatDate( value, format, culture );\n\t}\n\telse if ( typeof value === \"number\" ) {\n\t\tvalue = formatNumber( value, format, culture );\n\t}\n\treturn value;\n};\n\nGlobalize.localize = function( key, cultureSelector ) {\n\treturn this.findClosestCulture( cultureSelector ).messages[ key ] ||\n\t\tthis.cultures[ \"default\" ].messages[ key ];\n};\n\nGlobalize.parseDate = function( value, formats, culture ) {\n\tculture = this.findClosestCulture( culture );\n\n\tvar date, prop, patterns;\n\tif ( formats ) {\n\t\tif ( typeof formats === \"string\" ) {\n\t\t\tformats = [ formats ];\n\t\t}\n\t\tif ( formats.length ) {\n\t\t\tfor ( var i = 0, l = formats.length; i < l; i++ ) {\n\t\t\t\tvar format = formats[ i ];\n\t\t\t\tif ( format ) {\n\t\t\t\t\tdate = parseExact( value, format, culture );\n\t\t\t\t\tif ( date ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\tpatterns = culture.calendar.patterns;\n\t\tfor ( prop in patterns ) {\n\t\t\tdate = parseExact( value, patterns[prop], culture );\n\t\t\tif ( date ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn date || null;\n};\n\nGlobalize.parseInt = function( value, radix, cultureSelector ) {\n\treturn truncate( Globalize.parseFloat(value, radix, cultureSelector) );\n};\n\nGlobalize.parseFloat = function( value, radix, cultureSelector ) {\n\t// radix argument is optional\n\tif ( typeof radix !== \"number\" ) {\n\t\tcultureSelector = radix;\n\t\tradix = 10;\n\t}\n\n\tvar culture = this.findClosestCulture( cultureSelector );\n\tvar ret = NaN,\n\t\tnf = culture.numberFormat;\n\n\tif ( value.indexOf(culture.numberFormat.currency.symbol) > -1 ) {\n\t\t// remove currency symbol\n\t\tvalue = value.replace( culture.numberFormat.currency.symbol, \"\" );\n\t\t// replace decimal seperator\n\t\tvalue = value.replace( culture.numberFormat.currency[\".\"], culture.numberFormat[\".\"] );\n\t}\n\n\t//Remove percentage character from number string before parsing\n\tif ( value.indexOf(culture.numberFormat.percent.symbol) > -1){\n\t\tvalue = value.replace( culture.numberFormat.percent.symbol, \"\" );\n\t}\n\n\t// remove spaces: leading, trailing and between - and number. Used for negative currency pt-BR\n\tvalue = value.replace( / /g, \"\" );\n\n\t// allow infinity or hexidecimal\n\tif ( regexInfinity.test(value) ) {\n\t\tret = parseFloat( value );\n\t}\n\telse if ( !radix && regexHex.test(value) ) {\n\t\tret = parseInt( value, 16 );\n\t}\n\telse {\n\n\t\t// determine sign and number\n\t\tvar signInfo = parseNegativePattern( value, nf, nf.pattern[0] ),\n\t\t\tsign = signInfo[ 0 ],\n\t\t\tnum = signInfo[ 1 ];\n\n\t\t// #44 - try parsing as \"(n)\"\n\t\tif ( sign === \"\" && nf.pattern[0] !== \"(n)\" ) {\n\t\t\tsignInfo = parseNegativePattern( value, nf, \"(n)\" );\n\t\t\tsign = signInfo[ 0 ];\n\t\t\tnum = signInfo[ 1 ];\n\t\t}\n\n\t\t// try parsing as \"-n\"\n\t\tif ( sign === \"\" && nf.pattern[0] !== \"-n\" ) {\n\t\t\tsignInfo = parseNegativePattern( value, nf, \"-n\" );\n\t\t\tsign = signInfo[ 0 ];\n\t\t\tnum = signInfo[ 1 ];\n\t\t}\n\n\t\tsign = sign || \"+\";\n\n\t\t// determine exponent and number\n\t\tvar exponent,\n\t\t\tintAndFraction,\n\t\t\texponentPos = num.indexOf( \"e\" );\n\t\tif ( exponentPos < 0 ) exponentPos = num.indexOf( \"E\" );\n\t\tif ( exponentPos < 0 ) {\n\t\t\tintAndFraction = num;\n\t\t\texponent = null;\n\t\t}\n\t\telse {\n\t\t\tintAndFraction = num.substr( 0, exponentPos );\n\t\t\texponent = num.substr( exponentPos + 1 );\n\t\t}\n\t\t// determine decimal position\n\t\tvar integer,\n\t\t\tfraction,\n\t\t\tdecSep = nf[ \".\" ],\n\t\t\tdecimalPos = intAndFraction.indexOf( decSep );\n\t\tif ( decimalPos < 0 ) {\n\t\t\tinteger = intAndFraction;\n\t\t\tfraction = null;\n\t\t}\n\t\telse {\n\t\t\tinteger = intAndFraction.substr( 0, decimalPos );\n\t\t\tfraction = intAndFraction.substr( decimalPos + decSep.length );\n\t\t}\n\t\t// handle groups (e.g. 1,000,000)\n\t\tvar groupSep = nf[ \",\" ];\n\t\tinteger = integer.split( groupSep ).join( \"\" );\n\t\tvar altGroupSep = groupSep.replace( /\\u00A0/g, \" \" );\n\t\tif ( groupSep !== altGroupSep ) {\n\t\t\tinteger = integer.split( altGroupSep ).join( \"\" );\n\t\t}\n\t\t// build a natively parsable number string\n\t\tvar p = sign + integer;\n\t\tif ( fraction !== null ) {\n\t\t\tp += \".\" + fraction;\n\t\t}\n\t\tif ( exponent !== null ) {\n\t\t\t// exponent itself may have a number patternd\n\t\t\tvar expSignInfo = parseNegativePattern( exponent, nf, \"-n\" );\n\t\t\tp += \"e\" + ( expSignInfo[0] || \"+\" ) + expSignInfo[ 1 ];\n\t\t}\n\t\tif ( regexParseFloat.test(p) ) {\n\t\t\tret = parseFloat( p );\n\t\t}\n\t}\n\treturn ret;\n};\n\nGlobalize.culture = function( cultureSelector ) {\n\t// setter\n\tif ( typeof cultureSelector !== \"undefined\" ) {\n\t\tthis.cultureSelector = cultureSelector;\n\t}\n\t// getter\n\treturn this.findClosestCulture( cultureSelector ) || this.cultures[ \"default\" ];\n};\n\n}( this ));\ndefine(\"vendor/globalize\", (function (global) {\n    return function () {\n        var ret, fn;\n        return ret || global.Globalize;\n    };\n}(this)));\n\n",
    "define(\"configuration/PlugInConfiguration\", [\r\n\t\"require\",\r\n\t\"jquery\",\r\n\t\"knockout\",\r\n\t\"handlers/general\",\r\n\t\"handlers/Cookie\",\r\n\t\"handlers/Logger\",\r\n\t\"devicemanagers/ViewModelsManager\",\r\n\t\"configuration/PaymentsConfiguration\",\r\n\t\"configuration/mobilePatches\",\r\n\t\"configuration/initconfiguration\",\r\n\t\"helpers/customkobindings/KoCustomBindings\",\r\n\t\"devicehelpers/KoCustomBindings\",\r\n\t\"trackingIntExt/TrackingData\",\r\n\t\"vendor/globalize\",\r\n\t\"global/UrlResolver\",\r\n], function (require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\t$ = require(\"jquery\"),\r\n\t\tCookieHandler = require(\"handlers/Cookie\"),\r\n\t\tLogger = require(\"handlers/Logger\"),\r\n\t\tViewModelsManager = require(\"devicemanagers/ViewModelsManager\"),\r\n\t\tPaymentsConfiguration = require(\"configuration/PaymentsConfiguration\"),\r\n\t\tmobilePatches = require(\"configuration/mobilePatches\"),\r\n\t\ttrackingData = require(\"trackingIntExt/TrackingData\"),\r\n\t\tGlobalize = require(\"vendor/globalize\"),\r\n\t\turlResolver = require(\"global/UrlResolver\");\r\n\r\n\tfunction PlugInConfiguration() {\r\n\t\tfunction bindKO(rootElement) {\r\n\t\t\tif (!general.isDefinedType(rootElement)) {\r\n\t\t\t\trootElement = document.body;\r\n\t\t\t}\r\n\r\n\t\t\tko.cleanNode(rootElement);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tko.applyBindingsWithValidation(ViewModelsManager, rootElement, {\r\n\t\t\t\t\tregisterExtenders: true,\r\n\t\t\t\t\tmessagesOnModified: true,\r\n\t\t\t\t\tinsertMessages: false,\r\n\t\t\t\t\tparseInputAttributes: true,\r\n\t\t\t\t\tdecorateInputElement: true,\r\n\t\t\t\t\tmessageTemplate: null,\r\n\t\t\t\t\terrorElementClass: \"validationElement\",\r\n\t\t\t\t});\r\n\t\t\t} catch (ex) {\r\n\t\t\t\tLogger.log(\"PlugInConfiguration.bindKO\", ex.message, \"\", eErrorSeverity.warning);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction adjustHtml() {\r\n\t\t\tvar footerOffset = \"\";\r\n\r\n\t\t\ttry {\r\n\t\t\t\tif ($(\"#footer\").offset()) {\r\n\t\t\t\t\tfooterOffset = Math.abs($(window).height() - $(\"#footer\").offset().top - $(\"#footer\").height());\r\n\t\t\t\t}\r\n\t\t\t} catch (er) {\r\n\t\t\t\t// empty\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t(mobile.device.android && typeof footerOffset == \"number\" && footerOffset > 7) ||\r\n\t\t\t\tmobile.browser.opera\r\n\t\t\t) {\r\n\t\t\t\tsetTimeout(mobilePatches.delayedFooter, 1000);\r\n\t\t\t}\r\n\r\n\t\t\t$(document).on(eAppEvents.formChangeEvent, function () {\r\n\t\t\t\t$(document).scrollTop(0);\r\n\t\t\t\t$(document).trigger(eAppEvents.formChangedEvent);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction addPixel() {\r\n\t\t\tvar links = CookieHandler.ReadCookie(\"LinksForPixel\");\r\n\r\n\t\t\tif (links) {\r\n\t\t\t\tvar arrayLinks = links.split(\",\");\r\n\t\t\t\tvar im = new Image();\r\n\r\n\t\t\t\tarrayLinks.forEach(function addLinksToImage(link) {\r\n\t\t\t\t\tif (link != \"\") {\r\n\t\t\t\t\t\tim.src = link;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tCookieHandler.EraseCookie(\"LinksForPixel\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction exposeUI() {}\r\n\r\n\t\tfunction updateScmmTrackingData(token) {\r\n\t\t\tif (trackingData) {\r\n\t\t\t\ttrackingData.updateScmmData();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction registerComponents(configuration) {\r\n\t\t\tconfiguration = configuration || {};\r\n\r\n\t\t\tko.components.register(\"fx-component-loader\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/common/ComponentLoader\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/common/component-loader.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-new-pricealert\", {\r\n\t\t\t\tdeps: [\"helpers/CustomKOBindings/SpinnerFieldBinding\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/NewPriceAlertViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-limits-newpricealert.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-instrument-price-alert\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/InstrumentPriceAlertViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/instrument-price-alert.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-spinner\", {\r\n\t\t\t\tviewModel: { require: \"managers/SpinnerManager\" },\r\n\t\t\t\ttemplate: { element: \"fx-template-spinner\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-open-question\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/open-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/open-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-phone-number-question\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/phone-number-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/phone-number-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-overridable-question\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/overridable-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/open-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-radio-question\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/radio-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/radio-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-select-question\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/select-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/select-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-radiolist-question\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/radio-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/radiolist-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-search-question\", {\r\n\t\t\t\tdeps: [\"helpers/CustomKOBindings/AutocompleteBinding\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/search-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/search-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-date-question\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/date-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/date-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-checkbox-question\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/checkbox-question\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/checkbox-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-questionnaire\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question/questionnaire\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/question/questionnaire.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-progress-bar-a\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/progress-bar-a\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/progress-bar-a.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-progress-title\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/progress-title\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/progress-title-a.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-client-questionnaire\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/client-questionnaire\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/client-questionnaire.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-tooltip\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/common/tool-tip\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/common/tool-tip.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-welcome-client-questionnaire\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/welcome-client-questionnaire\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/welcome-client-questionnaire.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-thankyou-client-questionnaire\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/thankyou-client-questionnaire\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/thankyou-client-questionnaire.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-unsuccessful-client-questionnaire\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!client_questionnaire\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/unsuccessful-client-questionnaire\" },\r\n\t\t\t\ttemplate: {\r\n\t\t\t\t\trequire: \"text!mobileHtml/statichtml/questionnaire/unsuccessful-client-questionnaire.html\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-question-validation-balloon\", {\r\n\t\t\t\ttemplate: {\r\n\t\t\t\t\trequire: \"text!mobileHtml/statichtml/questionnaire/question/question-validation-balloon.html\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-question-tooltip-balloon\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/question-tooltip-balloon\" },\r\n\t\t\t\ttemplate: {\r\n\t\t\t\t\trequire: \"text!mobileHtml/statichtml/questionnaire/question/question-tooltip-balloon.html\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-customer-activation\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/MissingCustomerInformationViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-customer-mobilemissinginformation.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-upload-documents-page\", {\r\n\t\t\t\tdeps: [\r\n\t\t\t\t\t\"LoadDictionaryContent!FAQUPLOADDOCUMENTS\",\r\n\t\t\t\t\t\"LoadDictionaryContent!compliance_UploadDocuments\",\r\n\t\t\t\t\t\"LoadDictionaryContent!Tooltip\",\r\n\t\t\t\t\t\"LoadDictionaryContent!Category\",\r\n\t\t\t\t\t\"LoadDictionaryContent!Status\",\r\n\t\t\t\t\t\"LoadDictionaryContent!UploadDocumentsStatusPopUpMessages\",\r\n\t\t\t\t],\r\n\t\t\t\tviewModel: { require: \"viewmodels/UploadDocumentsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/compliance/upload-documents.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-change-password\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/ChangePasswordViewModel\" },\r\n\t\t\t\ttemplate: {\r\n\t\t\t\t\trequire: \"text!account/changepasswordpartial?SuppressExpirationMessage=true&refresh=\" + Date.now(),\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-trading-signals\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!customerTools_TradingSignalDetails\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/SignalsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-customertools-tradingsignals.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-trading-signal-details\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/SignalDetailsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-customertools-tradingsignaldetails.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-trading-signals-detail-page\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!customerTools_TradingSignalDetails\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/SignalDetailsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Signals/trading-signals-detail.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-signal-details\", {\r\n\t\t\t\ttemplate: { element: \"fx-template-signal-details\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-dealsignalstool-disclaimer\", {\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deals/DealSignalsDisclaimer.html\" },\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_DealSignalsTool\"],\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-economic-calendar\", {\r\n\t\t\t\tdeps: [\r\n\t\t\t\t\t\"LoadDictionaryContent!customerTools_EconomicCalendar\",\r\n\t\t\t\t\t\"LoadDictionaryContent!economicCalendar\",\r\n\t\t\t\t\t\"LoadDictionaryContent!economicCalendar_tools_static\",\r\n\t\t\t\t],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EconomicCalendar/EconomicCalendarViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/EconomicCalendar/economic-calendar.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-economic-calendar-filter\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!customerTools_EconomicCalendarFilter\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EconomicCalendar/EconomicCalendarFilterViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/EconomicCalendar/filter-economic-calendar.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-economic-calendar-event\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!customerTools_EconomicCalendar\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EconomicCalendar/EconomicCalendarEventViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/EconomicCalendar/event-economic-calendar.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-educational-tutorials-switcher\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EducationalTutorialsSwitcherViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-customertools-educationaltutorialsswitcher.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-educational-tutorials\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EducationalTutorialsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-customertools-educationaltutorials.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-educational-tutorial-access\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!accessRequest\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/AccessRequestViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-customertools-educationaltutorialsaccess.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-aml-status-page\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/AmlViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-compliance-amlstatus.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-popup-header\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!partialViews_vMobilePopupHeader\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/PopupHeaderViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/popup-header.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-cash-back\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/CashBackViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-cashback.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-live-cash-back\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/BonusViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-livecashback.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-spread-discount\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/BonusViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-spreaddiscount.html\" },\r\n\t\t\t\tsynchronous: true,\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-market-closed-view\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/MarketClosedViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-marketclosed.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-transaction-switcher\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/TransactionSwitcherViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-transactionswitcher.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-new-limit\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_NewLimit\", \"helpers/CustomKOBindings/SpinnerFieldBinding\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/NewLimitViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-newlimit.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-edit-limit\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_EditLimit\", \"helpers/CustomKOBindings/SpinnerFieldBinding\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EditLimitViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-editlimit.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-new-deal-slip\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_NewDeal\", \"helpers/CustomKOBindings/SpinnerFieldBinding\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/NewDealSlipViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-newdeal.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-require-margin-text\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/Deals/DealMarginViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-requiremargin.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-converted-amount-text\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/Deals/ConvertedAmountViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-convertedamount.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-deal-tools\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/DealToolsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-dealtools.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-chart-tool\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/ChartToolViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-dealcharttool.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-market-info-tool\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_DealMarketInfoTool\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/MarketInfoToolViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-dealmarketinfotool.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-signals-tool\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/SignalDetailsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deals/dealsignalstool.html\" },\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_DealSignalsTool\"],\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-instrument-info-tool\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_DealMarketInfoTool\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/Deals/InstrumentInfoViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-instrumentinfotool.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-market-info-rates\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_DealMarketInfoTool\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/Deals/MarketInfoRatesViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deals/market-info-rates.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-rate-range-indicator\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_DealMarketInfoTool\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/Deals/RateRangeIndicatorViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deals/rate-range-indicator.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-close-deal\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_CloseDeal\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/CloseDealViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deals/close-deal.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-edit-closing-limit\", {\r\n\t\t\t\tdeps: [\"helpers/CustomKOBindings/SpinnerFieldBinding\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EditClosingLimitViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-editclosinglimit.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-schedule-group\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!schedulegrouphtml\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/Deals/ScheduleGroupViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!html/statichtml/deals/schedule-group.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-dynamic-header\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/DynamicHeaderViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/dynamic-header.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-main-menu\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/MainMenuViewModel\" },\r\n\t\t\t\ttemplate: { element: \"fx-template-main-menu\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-d3\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-d3\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-trading-summary\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/TradingSummaryViewModel\" },\r\n\t\t\t\ttemplate: { element: \"fx-template-trading-summary\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-pending-withdrawal\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobilePendingWithdrawal\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/Withdrawal/PendingWithdrawalsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Withdrawal/PendingWithdrawals.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-balance\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-balance\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-net-exposure\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-net-exposure\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-wallet\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/WalletViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/AcccountSummaryWallet.html\" },\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileWallet\"],\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-quotes\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-quotes\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-rate-details\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-rate-details\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-closed-deal-details\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-closed-deal-details\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-add-instrument\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-add-instrument\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-validation-templates\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { element: \"fx-template-validation-templates\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-menu\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!partialViews_vMobileMenu\", \"LoadDictionaryContent!mobile_MainMenu\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/menuviewmodel\" },\r\n\t\t\t\ttemplate: { element: \"fx-template-menu\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-contact\", {\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-account-contactus.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-internal-contactus\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!account_InternalContactUs\", \"LoadDictionaryContent!support\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/InternalContactUsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/InternalContactUs.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-edit-favorite-instruments\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/EditFavoriteInstrumentsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/EditFavoriteInstruments.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-open-deals-grid\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileOpenDeals\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/OpenDealsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-opendeals.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-limits-grid\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileLimits\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/LimitsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-limits.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-closed-deals\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileClosedDeals\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/ClosedDealsViewModel\" },\r\n\t\t\t\ttemplate: { element: \"fx-template-closed-deals\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-price-alerts-grid\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/PriceAlertsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-limits-pricealerts.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-closed-deals-filter\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/ClosedDealsFilterViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-closeddealsfilter.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-contract-rollover\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/ContractRolloverViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-contractrollover.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-account-card-records\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!deals_AccountCardRecords\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/AccountCardRecordsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-deals-accountcardrecords.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-notifications-settings\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/NotificationsSettingsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-compliance-notificationssettings.html\" },\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!compliance_NotificationsSettings\"],\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-login-options\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!loginOptions\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/LoginOptionsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/login-options.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-demo-deposit-icon\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/demoDeposit/demo-deposit-icon\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/demoDeposit/demo-deposit-icon.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-deposit-confirmation\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!compliance_DepositConfirmation\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/deposit/DepositConfirmationViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deposit/deposit-confirmation.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-electronic-signature\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/deposit/ElectronicSignatureViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deposit/electronic-signature.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-demo-banner-openclosedeal\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/DemoBannerViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/demoaccount-banner.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-wrapper\", {\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/withdrawal-wrapper.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-navigation-wizard\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!navigationWizard\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/NavigationWizardViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/navigation-wizard.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-amount-requested\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileWithdrawal\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/Withdrawal/AmountRequestedViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Withdrawal/amount-requested.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-amount\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileWithdrawal\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/Withdrawal/Wizard/WithdrawalSetAmountViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setamount.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-method\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileWithdrawal\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/Withdrawal/Wizard/WithdrawalSetMethodViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setmethod.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-setbankdetails\", {\r\n\t\t\t\tdeps: [\r\n\t\t\t\t\t\"helpers/CustomKOBindings/AutocompleteBinding\",\r\n\t\t\t\t\t\"LoadDictionaryContent!country_names\",\r\n\t\t\t\t\t\"LoadDictionaryContent!views_vMobileWithdrawal\",\r\n\t\t\t\t],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/Withdrawal/Wizard/WithdrawalSetbankdetailsViewModel\" },\r\n\t\t\t\ttemplate: {\r\n\t\t\t\t\trequire: \"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setbankdetails.html\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-setccdetails\", {\r\n\t\t\t\tdeps: [\r\n\t\t\t\t\t\"LoadDictionaryContent!views_vMobileWithdrawal\",\r\n\t\t\t\t\t\"LoadDictionaryContent!payments_concreteView_mobile\",\r\n\t\t\t\t\t\"LoadDictionaryContent!payments_concreteNames\",\r\n\t\t\t\t],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/Withdrawal/Wizard/WithdrawalSetCCDetailsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setccdetails.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-setapproval\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!views_vMobileWithdrawal\", \"LoadDictionaryContent!country_names\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/Withdrawal/Wizard/WithdrawalSetApprovalViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setapproval.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-thankyou\", {\r\n\t\t\t\tdeps: [\r\n\t\t\t\t\t\"LoadDictionaryContent!navigationWizard\",\r\n\t\t\t\t\t\"LoadDictionaryContent!views_vMobileWithdrawal\",\r\n\t\t\t\t\t\"LoadDictionaryContent!Category\",\r\n\t\t\t\t],\r\n\t\t\t\tviewModel: { require: \"viewmodels/Withdrawal/WithdrawalThankYouViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/withdrawal/withdrawal-thankyou.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/Withdrawal/WithdrawalViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-withdrawal-withdrawal.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawalbankdetails\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/Withdrawal/WithdrawalBankDetailsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-withdrawal-withdrawalbankdetails.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-withdrawal-ccdetails\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/Withdrawal/WithdrawalCreditCardDetailsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-withdrawal-withdrawalcreditcarddetails.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-main-grid-instrument-search\", {\r\n\t\t\t\tdeps: [\"helpers/CustomKOBindings/AutocompleteBinding\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/MainGridInstrumentSearchViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/MainGridInstrumentSearch.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-favorites-instrument-search\", {\r\n\t\t\t\tdeps: [\"helpers/CustomKOBindings/AutocompleteBinding\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/FavoritesInstrumentSearchViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/FavoritesInstrumentSearch.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-closed-deals-instrument-search\", {\r\n\t\t\t\tdeps: [\"helpers/CustomKOBindings/AutocompleteBinding\", \"LoadDictionaryContent!views_vMobileQuotes\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/ClosedDealsInstrumentSearchViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/ClosedDealsInstrumentSearch.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-positions-tabs\", {\r\n\t\t\t\tviewModel: { instance: ViewModelsManager },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deals/DealTabs.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-question-mark\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/QuestionMarkViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/content/questionmark.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-help\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/HelpViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/content/Help.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"faq\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/Content/FaqQuestionViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/content/content-faq-question.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-faq\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/FaqViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/content/faq.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-support\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/questionnaire/SupportViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/questionnaire/support.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-amount-spinner\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/AmountSpinnerFieldViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/AmountSpinnerField.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-low-margin-spinner\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/LowMarginSpinnerViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/LowMarginSpinnerField.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-search-country\", {\r\n\t\t\t\tdeps: [\"helpers/CustomKOBindings/AutocompleteBinding\", \"LoadDictionaryContent!country_names\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/SearchCountryViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/SearchCountry.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-wire-transfer-success\", {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/Deposit/WireTransferSuccessViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/deposit/wire-transfer-success.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-access-request-signals-details\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!accessRequest\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/AccessRequestViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Signals/SignalDetailsAccessRequest.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-access-request-signals\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!accessRequest\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/AccessRequestViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Signals/SignalsAccessRequest.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-tutorials-request-access\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!accessRequest\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/AccessRequestViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Tutorials/TutorialsRequestAcess.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-account-header\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/accounthub/AccountHeaderViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/AccountHub/AccountHeader.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-account-hub-countdown\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!account_hub\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/accounthub/AccountHubCountdownViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/AccountHub/AccountHubCountdown.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-userflow-wrap\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/Account/UserFlowWrapViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/account/user-flow-wrap.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-account-userflow-br\" + urlResolver.getBroker(), {\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/account/UserFlowViewModel\" },\r\n\t\t\t\ttemplate: {\r\n\t\t\t\t\trequire: \"text!mobileHtml/statichtml/account/userflow-br\" + urlResolver.getBroker() + \".html\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-account-preferences\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!accountPreferences\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/AccountPreferencesViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-account-preferences.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-personal-details\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!country_names\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/PersonalDetailsViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!partial-views/mobile-customer-PersonalDetailsPartial.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-instrument-notavailable\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/InstrumentNotAvailableViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/instrument-notavailable.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-help-center-action\", {\r\n\t\t\t\tviewModel: { require: \"viewmodels/HelpCenter/HelpCenterActionViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/HelpCenter/help-center-action.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-component-help-center\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!HelpCenterWalkthroughs\", \"LoadDictionaryContent!HelpCenterTradingGuide\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/HelpCenterViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/HelpCenter/help-center.html\" },\r\n\t\t\t});\r\n\r\n\t\t\t// begin fix for merge Changeset 166784\r\n\t\t\tif (\r\n\t\t\t\tgeneral.isStringType(configuration[\"fx-personal-guide\"]) &&\r\n\t\t\t\tconfiguration[\"fx-personal-guide\"].indexOf(\"Variation4\") >= 0\r\n\t\t\t) {\r\n\t\t\t\tko.components.register(\"fx-component-help-center-bubble\", {\r\n\t\t\t\t\tviewModel: { require: \"deviceviewmodels/helpcenter/HelpCenterBubbleViewModel\" },\r\n\t\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/HelpCenter/help-center-bubble-variation-4.html\" },\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tko.components.register(\"fx-component-help-center-bubble\", {\r\n\t\t\t\t\tviewModel: { require: \"deviceviewmodels/helpcenter/HelpCenterBubbleViewModel\" },\r\n\t\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/HelpCenter/help-center-bubble.html\" },\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// begin fix for merge Changeset 166784\r\n\r\n\t\t\tko.components.register(\"fx-component-feedback\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!emily_feedback\"],\r\n\t\t\t\tviewModel: { require: \"viewmodels/FeedBack/FeedBackViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!viewmodels/FeedBack/FeedBackTemplate.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-confirm-documentverification\", {\r\n\t\t\t\tdeps: [\"LoadDictionaryContent!compliance_UploadDocuments\"],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/UploadDocuments/VerificationDocumentViewModel\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Compliance/confirm-verification-document.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tko.components.register(\"fx-documentverification-modal\", {\r\n\t\t\t\tdeps: [\r\n\t\t\t\t\t\"LoadDictionaryContent!compliance_UploadDocuments\",\r\n\t\t\t\t\t\"LoadDictionaryContent!UploadDocumentsStatusPopUpMessages\",\r\n\t\t\t\t],\r\n\t\t\t\tviewModel: { require: \"deviceviewmodels/UploadDocuments/VerificationDocumentModal\" },\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/Compliance/verification-document-modal.html\" },\r\n\t\t\t});\r\n\r\n\t\t\tPaymentsConfiguration.RegisterDepositComponents(configuration);\r\n\t\t}\r\n\r\n\t\tfunction registerContentTemplateComponents() {\r\n\t\t\tko.components.register(\"phone\", {\r\n\t\t\t\ttemplate: { require: \"text!mobileHtml/statichtml/content/content-phone.html\" },\r\n\t\t\t\tviewModel: {\r\n\t\t\t\t\tcreateViewModel: function (params, componentInfo) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tnumber: componentInfo.templateNodes[0].data,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction adjustCulture() {\r\n\t\t\tif (typeof Globalize !== \"undefined\") {\r\n\t\t\t\tvar cultureInfo = {\r\n\t\t\t\t\tnumberFormat: {},\r\n\t\t\t\t};\r\n\r\n\t\t\t\tcultureInfo.numberFormat[\",\"] = \"\";\r\n\t\t\t\tGlobalize.addCultureInfo(\"noThousandsSeparator\", \"default\", cultureInfo);\r\n\t\t\t\twindow.Globalize = Globalize;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tAdjustCulture: adjustCulture,\r\n\t\t\tRegisterComponents: registerComponents,\r\n\t\t\tRegisterContentTemplateComponents: registerContentTemplateComponents,\r\n\t\t\tBindKO: bindKO,\r\n\t\t\tAdjustHtml: adjustHtml,\r\n\t\t\tAddPixel: addPixel,\r\n\t\t\tExposeUI: exposeUI,\r\n\t\t\tUpdateScmmTrackingData: updateScmmTrackingData,\r\n\t\t};\r\n\t}\r\n\r\n\treturn PlugInConfiguration();\r\n});\r\n\n",
    "\n",
    "define(\"devicecustommodules/PostLoginAlertController\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"customEnums/ViewsEnums\",\r\n\t\"dataaccess/dalCommon\",\r\n\t\"enums/alertenums\",\r\n\t\"devicemanagers/AlertsManager\",\r\n\t\"devicemanagers/StatesManager\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"managers/viewsmanager\",\r\n\t\"Dictionary\",\r\n\t\"modules/environmentData\",\r\n\t\"StateObject!PostLoginAlerts\",\r\n\t\"enums/loginlogoutreasonenum\",\r\n  ],\r\n    function PostLoginAlertControllerDef(require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tdalCommon = require(\"dataaccess/dalCommon\"),\r\n\t\tAlertTypes = require(\"enums/alertenums\"),\r\n\t\tAlertsManager = require(\"devicemanagers/AlertsManager\"),\r\n\t\tStatesManager = require(\"devicemanagers/StatesManager\"),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tViewsManager = require(\"managers/viewsmanager\"),\r\n\t\tDictionary = require(\"Dictionary\"),\r\n\t\tenvironmentData = require(\"modules/environmentData\").get(),\r\n\t\tpostLoginAlerts = require(\"StateObject!PostLoginAlerts\"),\r\n\t\teLoginLogoutReason = require(\"enums/loginlogoutreasonenum\"),\r\n\t\tsubscriptions = [];\r\n\r\n\tfunction PostLoginAlertController() {\r\n\t\tvar observablePostLoginAlertObject = {},\r\n\t\t\tself,\r\n\t\t\tsilentMode = ko.observable(0);\r\n\r\n\t\tvar flagState = {\r\n\t\t\tInitial: -1,\r\n\t\t\tNotActive: 0,\r\n\t\t\tActive: 1,\r\n\t\t};\r\n\r\n\t\tvar silentModeEnum = {\r\n\t\t\tOff: 0,\r\n\t\t\tOn: 1,\r\n\t\t};\r\n\r\n\t\tfunction init() {\r\n\t\t\tself = this;\r\n\r\n\t\t\tsetComputedDisplayAlerts();\r\n\r\n\t\t\tsubscribeToCSFlags();\r\n\t\t\tsubscribeToPortfolioFlags();\r\n\t\t\tsubscribeToServerErrors();\r\n\r\n\t\t\tsubscriptions.push(\r\n\t\t\t\tpostLoginAlerts.subscribe(\"SetAlertsBehaviorMode\", function (mode) {\r\n\t\t\t\t\tsilentMode(mode);\r\n\t\t\t\t})\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t//---------------Client State Flags---------------\r\n\t\tfunction subscribeToCSFlags() {\r\n\t\t\tStatesManager.States.ExposureAlert.subscribe(function (flagValue) {\r\n\t\t\t\tif (flagValue == eCSFlagStates.Active) {\r\n\t\t\t\t\tvar alert = AlertsManager.GetAlert(PostClientStatesLoginsAlerts.ExposureAlert);\r\n\r\n\t\t\t\t\tAlertsManager.UpdateAlert(PostClientStatesLoginsAlerts.ExposureAlert);\r\n\t\t\t\t\talert.popCounter(alert.popCounter() + 1);\r\n\r\n\t\t\t\t\tif (alert.popCounter() < 2) {\r\n\t\t\t\t\t\tAlertsManager.PopAlert(PostClientStatesLoginsAlerts.ExposureAlert);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tStatesManager.States.ExposureCoverageAlert.subscribe(function (flagValue) {\r\n\t\t\t\tif (flagValue == eCSFlagStates.Active) {\r\n\t\t\t\t\tvar alert = AlertsManager.GetAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert);\r\n\r\n\t\t\t\t\tAlertsManager.UpdateAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert);\r\n\t\t\t\t\talert.popCounter(alert.popCounter() + 1);\r\n\r\n\t\t\t\t\tif (alert.popCounter() < 2) {\r\n\t\t\t\t\t\tAlertsManager.PopAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tStatesManager.States.MarketState.subscribe(function (flagValue) {\r\n\t\t\t\tif (flagValue == eCSFlagStates.NotActive) {\r\n\t\t\t\t\tAlertsManager.UpdateAlert(PostClientStatesLoginsAlerts.MarketState);\r\n\t\t\t\t\tAlertsManager.PopAlert(PostClientStatesLoginsAlerts.MarketState);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tStatesManager.States.SystemMode.subscribe(function (flagValue) {\r\n\t\t\t\tif (Customer.prop.isQA) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (flagValue) {\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tAlertsManager.UpdateAlert(PostClientStatesLoginsAlerts.SystemModeApplicationClosing);\r\n\t\t\t\t\t\tAlertsManager.PopAlert(PostClientStatesLoginsAlerts.SystemModeApplicationClosing);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tAlertsManager.UpdateAlert(PostClientStatesLoginsAlerts.SystemMode);\r\n\t\t\t\t\t\tAlertsManager.PopAlert(PostClientStatesLoginsAlerts.SystemMode);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//----------------Portfolio Flags-----------\r\n\t\tfunction subscribeToPortfolioFlags() {\r\n\t\t\tStatesManager.States.IsDemo.subscribe(function (flagValue) {\r\n\t\t\t\tif (environmentData.switchToPlatform === ePlatformSwitch.Demo && flagValue == flagState.Active) {\r\n\t\t\t\t\tAlertsManager.UpdateAlert(PostPortfoliosLoginsAlerts.IsDemo);\r\n\t\t\t\t\tAlertsManager.PopAlert(PostPortfoliosLoginsAlerts.IsDemo);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tStatesManager.States.IsActive.subscribe(function () {\r\n\t\t\t\tif (environmentData.switchToPlatform === ePlatformSwitch.Real && Customer.prop.hasActiveDemo) {\r\n\t\t\t\t\tAlertsManager.UpdateAlert(PostPortfoliosLoginsAlerts.IsReal);\r\n\t\t\t\t\tAlertsManager.PopAlert(PostPortfoliosLoginsAlerts.IsReal);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tobservablePostLoginAlertObject.displayAmlAlert.subscribe(function (flagValue) {\r\n\t\t\t\tif (flagValue === true) {\r\n\t\t\t\t\tViewsManager.SwitchViewVisible(eForms.Aml, {});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tobservablePostLoginAlertObject.displayCddKycAlert.subscribe(function (flagValue) {\r\n\t\t\t\tif (flagValue === true) {\r\n\t\t\t\t\t// redirect to cdd alert will be visible only if the aml has no status\r\n\t\t\t\t\tViewsManager.SwitchViewVisible(eForms.ClientQuestionnaire, {});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction subscribeToServerErrors() {\r\n\t\t\tStatesManager.States.Forbidden.subscribe(function () {\r\n\t\t\t\tif (!Customer.isAuthenticated()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tAlertsManager.UpdateAlert(\r\n\t\t\t\t\tAlertTypes.ServerResponseAlert,\r\n\t\t\t\t\tDictionary.GetItem(\"GenericAlert\"),\r\n\t\t\t\t\tDictionary.GetItem(\"Forbidden\"),\r\n\t\t\t\t\tnull\r\n\t\t\t\t);\r\n\t\t\t\tAlertsManager.PopAlert(AlertTypes.ServerResponseAlert);\r\n\t\t\t});\r\n\r\n\t\t\tStatesManager.States.ServerErrorStatus.subscribe(function (flagValue) {\r\n\t\t\t\tif (flagValue != eErrorSeverity.critical && !Customer.isAuthenticated()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch (flagValue) {\r\n\t\t\t\t\tcase eErrorSeverity.critical:\r\n\t\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.mobile_postLoginAlertController_serverError);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.high:\r\n\t\t\t\t\t\tAlertsManager.UpdateAlert(\r\n\t\t\t\t\t\t\tAlertTypes.SessionEndedAlert,\r\n\t\t\t\t\t\t\tDictionary.GetItem(\"sessionEndedLogoutAlertTitle\"),\r\n\t\t\t\t\t\t\tDictionary.GetItem(\"sessionEndedLogout\"),\r\n\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tonCloseAction: function () {\r\n\t\t\t\t\t\t\t\t\tdalCommon.Logout(eLoginLogoutReason.alert_exitApp);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tAlertsManager.PopAlert(AlertTypes.SessionEndedAlert);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase eErrorSeverity.medium:\r\n\t\t\t\t\t\tAlertsManager.UpdateAlert(\r\n\t\t\t\t\t\t\tAlertTypes.SessionEndedAlert,\r\n\t\t\t\t\t\t\tDictionary.GetItem(\"sessionEndedAlertTitle\"),\r\n\t\t\t\t\t\t\tDictionary.GetItem(\"sessionEnded\"),\r\n\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tAlertsManager.PopAlert(AlertTypes.SessionEndedAlert);\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction setComputedDisplayAlerts() {\r\n\t\t\tobservablePostLoginAlertObject.displayCddKycAlert = ko.computed(function () {\r\n\t\t\t\tif (\r\n\t\t\t\t\t(StatesManager.States.IsCddStatusNotComplete() === true ||\r\n\t\t\t\t\t\tStatesManager.States.IsKycStatusRequired() === true ||\r\n\t\t\t\t\t\tStatesManager.States.IsKycReviewStatusRequired() === true) &&\r\n\t\t\t\t\tsilentMode() === silentModeEnum.Off &&\r\n\t\t\t\t\tStatesManager.States.IsActiveButNotSinceTradingBonus() === true\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}, self);\r\n\r\n\t\t\tobservablePostLoginAlertObject.displayActiveAlert = ko.computed(function () {\r\n\t\t\t\tif (StatesManager.States.IsActive() == flagState.NotActive) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}, self);\r\n\r\n\t\t\tobservablePostLoginAlertObject.displayAmlAlert = ko.computed(function () {\r\n\t\t\t\tif (\r\n\t\t\t\t\tStatesManager.States.IsAmlRestricted() == true &&\r\n\t\t\t\t\tStatesManager.States.IsCddStatusNotComplete() == false &&\r\n\t\t\t\t\tStatesManager.States.IsActiveButNotSinceTradingBonus() == true &&\r\n\t\t\t\t\tsilentMode() == silentModeEnum.Off\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t}, self);\r\n\t\t}\r\n\r\n\t\tfunction dispose() {\r\n\t\t\tsubscriptions.forEach(function (subscriber) {\r\n\t\t\t\tsubscriber();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tInit: init,\r\n\t\t\tdispose: dispose,\r\n\t\t};\r\n\t}\r\n\r\n\treturn new PostLoginAlertController();\r\n});\r\n\n",
    "var TDALRetention = function () {\r\n    //-----------------------------------------------------------------\r\n    // getToken\r\n    //-----------------------------------------------------------------\r\n    function getToken(onSuccess) {\r\n        var ajaxer = new TAjaxer();\r\n\r\n        var params = \"\";\r\n\r\n        return ajaxer.promises.get(\r\n            \"TDALRetention/getToken\",\r\n            $customer.prop.interactiveMessagesToken,\r\n            params,\r\n            onSuccess,\r\n            function (error) {\r\n                ErrorManager.onError(\"TDALRetention/getToken\", ErrorManager.getFullExceptionMessage(error), eErrorSeverity.high);\r\n            },\r\n            null, null, null, false\r\n        );\r\n    }\r\n    return {\r\n        GetToken: getToken\r\n    };\r\n};\ndefine(\"dataaccess/dalRetention\", [\"generalmanagers/ErrorManager\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (em) {\r\n\t\t\t\treturn this.TDALRetention(em);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TDALRetention;\n    };\n}(this)));\n\n",
    "\n",
    "define(\"managers/RetentionManager\", [\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"handlers/general\",\r\n\t\"handlers/Delegate\",\r\n\t\"modules/environmentData\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"dataaccess/dalRetention\",\r\n\t\"managers/viewsmanager\",\r\n\t\"StateObject!SessionSupervisor\",\r\n\t\"Q\",\r\n\t\"global/apiIM\",\r\n], function (require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tgeneral = require(\"handlers/general\"),\r\n\t\tenvironmentData = require(\"modules/environmentData\").get(),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tdalRetention = require(\"dataaccess/dalRetention\"),\r\n\t\tViewsManager = require(\"managers/viewsmanager\"),\r\n\t\tstateObject = require(\"StateObject!SessionSupervisor\"),\r\n\t\tonSmartBannerDelegate = require(\"handlers/Delegate\"),\r\n\t\tQ = require(\"Q\"),\r\n\t\tapiIM = require(\"global/apiIM\"),\r\n\t\tCurrentToken;\r\n\r\n\tvar IMRequestIntervalModes = {\r\n\t\tPreLogin: -1,\r\n\t\tLogin: 0,\r\n\t\tInSession: 1,\r\n\t\tAccountSwitch: 2,\r\n\t};\r\n\r\n\tfunction RetentionManager() {\r\n\t\tvar onSmartBanner = new onSmartBannerDelegate(),\r\n\t\t\tisTokenReceived = Q.defer(),\r\n\t\t\tisApiImAlreadyInitialized = false;\r\n\r\n\t\tvar subscribeToInteractiveMessage = function (token) {\r\n\t\t\tstateObject.set(\"userLoggedIn\", false);\r\n\r\n\t\t\tstateObject.subscribe(\"userLoggedIn\", function (value) {\r\n\t\t\t\tif (!isApiImAlreadyInitialized || value === true) {\r\n\t\t\t\t\twindow.JSON2 = JSON;\r\n\r\n\t\t\t\t\tvar requestIntervalMode;\r\n\t\t\t\t\tif (environmentData.switchToPlatform) {\r\n\t\t\t\t\t\trequestIntervalMode = IMRequestIntervalModes.AccountSwitch;\r\n\t\t\t\t\t} else if (value) {\r\n\t\t\t\t\t\trequestIntervalMode = IMRequestIntervalModes.Login;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\trequestIntervalMode = IMRequestIntervalModes.InSession;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar uiActionCallbacks = {\r\n\t\t\t\t\t\tdeposit: depositCallback,\r\n\t\t\t\t\t\taccept: acceptCallback,\r\n\t\t\t\t\t\twalkthrough: walkThroughCallback,\r\n\t\t\t\t\t\tprivacypolicy: privacypolicyCallback,\r\n\t\t\t\t\t\timClosedDeals: imClosedDealsCallback,\r\n\t\t\t\t\t\timOpenDeals: imOpenDealsCallback,\r\n\t\t\t\t\t\timNewDeal: imNewDealCallback,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tapiIM.InitAll(\r\n\t\t\t\t\t\ttoken,\r\n\t\t\t\t\t\tCustomer.prop.interactiveMessagesUrl,\r\n\t\t\t\t\t\tCustomer.prop.language,\r\n\t\t\t\t\t\t15000,\r\n\t\t\t\t\t\tuiActionCallbacks,\r\n\t\t\t\t\t\trequestIntervalMode,\r\n\t\t\t\t\t\t\"false\",\r\n\t\t\t\t\t\tinvokeSmartBanner\r\n\t\t\t\t\t);\r\n\t\t\t\t\tapiIM.InitAll(\r\n\t\t\t\t\t\ttoken,\r\n\t\t\t\t\t\tCustomer.prop.interactiveMessagesUrl,\r\n\t\t\t\t\t\tCustomer.prop.language,\r\n\t\t\t\t\t\t36000000,\r\n\t\t\t\t\t\tuiActionCallbacks,\r\n\t\t\t\t\t\tIMRequestIntervalModes.InSession,\r\n\t\t\t\t\t\t\"true\",\r\n\t\t\t\t\t\tinvokeSmartBanner\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tisApiImAlreadyInitialized = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tvar invokeSmartBanner = function () {\r\n\t\t\tvar apiImArgs = general.argsToArray(arguments);\r\n\t\t\tonSmartBanner.Invoke.apply(null, apiImArgs);\r\n\t\t};\r\n\r\n\t\tvar updateCurrentToken = function (responseText) {\r\n\t\t\tif (responseText.indexOf(\"ServerError\") === -1 && general.containsHtmlTags(responseText) !== true) {\r\n\t\t\t\tCurrentToken = responseText;\r\n\t\t\t\tisTokenReceived.resolve(responseText);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar updateToken = function () {\r\n\t\t\treturn dalRetention.GetToken(updateCurrentToken);\r\n\t\t};\r\n\r\n\t\tvar getCurrentToken = function () {\r\n\t\t\treturn CurrentToken;\r\n\t\t};\r\n\r\n\t\tvar depositCallback = function (args) {\r\n\t\t\t// go to deposit page\r\n\t\t\tsendRewardClickedEvent();\r\n\r\n\t\t\tif (!Customer.prop.isDemo) {\r\n\t\t\t\tViewsManager.RedirectToForm(eForms.Deposit, {});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar acceptCallback = function () {\r\n\t\t\tsendRewardClickedEvent();\r\n\t\t};\r\n\r\n\t\tvar privacypolicyCallback = function () {\r\n\t\t\tsendRewardClickedEvent();\r\n\t\t};\r\n\r\n\t\tvar imClosedDealsCallback = function () {\r\n\t\t\tsendRewardClickedEvent();\r\n\t\t};\r\n\r\n\t\tvar imNewDealCallback = function () {\r\n\t\t\tsendRewardClickedEvent();\r\n\t\t};\r\n\r\n\t\tvar imOpenDealsCallback = function () {\r\n\t\t\tsendRewardClickedEvent();\r\n\t\t};\r\n\r\n\t\tvar walkThroughCallback = function () {\r\n\t\t\tif (typeof window.__walkthroughwidget != \"undefined\") window.__walkthroughwidget.play(2425);\r\n\t\t};\r\n\r\n\t\tvar sendRewardClickedEvent = function () {\r\n\t\t\tko.postbox.publish(\"reward-cta-clicked\", {});\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tOnSmartBanner: onSmartBanner,\r\n\t\t\tSubscribeToInteractiveMessage: subscribeToInteractiveMessage,\r\n\t\t\tUpdateToken: updateToken,\r\n\t\t\tGetCurrentToken: getCurrentToken,\r\n\t\t};\r\n\t}\r\n\r\n\treturn new RetentionManager();\r\n});\r\n\n",
    "define(\r\n    'generalmanagers/SessionSupervisor',\r\n    [\r\n        'require',\r\n        'JSONHelper',\r\n        'dataaccess/dalCommon',\r\n        'generalmanagers/ErrorManager',\r\n        'generalmanagers/ShutDownHandler',\r\n        'modules/systeminfo',\r\n        'StateObject!SessionSupervisor',\r\n        'StateObject!SystemNotificationEvents',\r\n        'global/storagefactory',\r\n        'enums/DataMembersPositions'\r\n    ],\r\n    function(require) {\r\n        var JSONHelper = require('JSONHelper'),\r\n            dalCommon = require('dataaccess/dalCommon'),\r\n            ErrorManager = require('generalmanagers/ErrorManager'),\r\n            ShutDownHandler = require('generalmanagers/ShutDownHandler'),\r\n            systemInfo = require('modules/systeminfo'),\r\n            stateObject = require('StateObject!SessionSupervisor'),\r\n            stateObjectNotificationsEvents = require('StateObject!SystemNotificationEvents'),\r\n            storageFactory = require('global/storagefactory');\r\n\r\n        function SessionSupervisor() {\r\n            var timer = null,\r\n                timeout = 60000,\r\n                stopAll = false,\r\n                sessionStorage = storageFactory(storageFactory.eStorageType.session);\r\n\r\n            function start() {\r\n                stateObjectNotificationsEvents.set(eShutDownHandlerTopics.stopKeepAliveCalls, null);\r\n                stateObjectNotificationsEvents.subscribe(eShutDownHandlerTopics.stopKeepAliveCalls, stopDataCalls);\r\n\r\n                keepAlive();\r\n            }\r\n\r\n            function keepAlive() {\r\n                if (!stopAll) {\r\n                    dalCommon.KeepAlive(onKeepAliveComplete);\r\n                }\r\n            }\r\n\r\n            function stopDataCalls() {\r\n                stopAll = true;\r\n\r\n                if (timer) {\r\n                    clearTimeout(timer);\r\n                    timer = null;\r\n                }\r\n            }\r\n\r\n            function onKeepAliveComplete(responseText) {\r\n                var response = JSONHelper.STR2JSON('SessionSupervisor/onKeepAliveComplete', responseText, eErrorSeverity.low);\r\n\r\n                if (response && response.result != 'SecurityError' && response.result != 'ServerError') {\r\n                    if (response.result[eKeepAlive.Success]) {\r\n                        systemInfo.save('securityToken', response.securityToken);\r\n\r\n                        stateObject.update('userLoggedIn', response.userLoggedIn);\r\n\r\n                        if (response.isSessionGap) {\r\n                            sessionStorage.removeItem('TrackingSessionId');\r\n                        }\r\n\r\n                        if (!stopAll) {\r\n                            if (timer) {\r\n                                clearTimeout(timer);\r\n                                timer = null;\r\n                            }\r\n\r\n                            timer = setTimeout(keepAlive, timeout);\r\n                        }\r\n                    }\r\n                    else {\r\n                        switch (response.result[eKeepAlive.Error]) {\r\n                            case eKeepAliveError.SessionMissingOrDuplicate:\r\n                                ShutDownHandler.StopRunningServices();\r\n\r\n                                require(['devicealerts/DoubleLoginAlert'], function showDoubleLoginAlert(DoubleLoginAlert) {\r\n                                    DoubleLoginAlert.Show();\r\n                                });                                \r\n                                break;\r\n\r\n                            case eKeepAliveError.HttpContextRequired:\r\n                                ErrorManager.onError('Keepalive', 'HttpContextRequired', eErrorSeverity.low);\r\n                                dalCommon.Login(eLoginLogoutReason.sessionSupervisor_keepAliveHttpContextRequired);\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // not logout for caseses of rememeberme\r\n                    dalCommon.Login(eLoginLogoutReason.sessionSupervisor_keepAliveCompleteError);\r\n                }\r\n            }\r\n\r\n            return {\r\n                Start: start\r\n            };\r\n        }\r\n\r\n        return SessionSupervisor;\r\n    }\r\n);\r\n\n",
    "(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/datalayer', [], factory);\r\n    } else {\r\n        root.dataLayer = factory(root);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (root) {\r\n    root = root || window;\r\n    root.dataLayer = root.dataLayer || [];\r\n\r\n    var _dataLayer = root.dataLayer,\r\n        maxDataLayerLength = 350, //GTM has 300\r\n        _isGTMActive;\r\n\r\n    function isGTMEnabled() {\r\n        if (typeof _isGTMActive !== 'boolean') {\r\n            for (var idx = 0; idx < _dataLayer.length; idx++) {\r\n                if (!_dataLayer[idx]) {\r\n                    continue;\r\n                }\r\n\r\n                var event = _dataLayer[idx].event || '';\r\n\r\n                if (0 === event.indexOf('gtm.')) {\r\n                    _isGTMActive = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        _isGTMActive = _isGTMActive || false;\r\n\r\n        return _isGTMActive;\r\n    }\r\n\r\n    function truncateDataLayer() {\r\n        if (maxDataLayerLength > _dataLayer.length) {\r\n            return;\r\n        }\r\n\r\n        //if GTM is loaded size is managed by him \r\n        if (isGTMEnabled()) {\r\n            return;\r\n        } else {\r\n            for (; maxDataLayerLength < _dataLayer.length;)\r\n                _dataLayer.shift();\r\n        }\r\n    }\r\n\r\n    function _newPush() {\r\n        var pushParams = [].slice.call(arguments, 0);\r\n\r\n        var g = _dataLayer.originalPush.apply(_dataLayer, pushParams);\r\n\r\n        //call subscribers\r\n        _dataLayer.subscribers.forEach(function (f) {\r\n            try {\r\n                f.apply(this, pushParams);\r\n            } catch (e) { }\r\n        });\r\n\r\n        truncateDataLayer();\r\n\r\n        var h = (\"boolean\" !== typeof g) || g;\r\n        return h;\r\n    }\r\n\r\n    _dataLayer.init = function () {\r\n\r\n        _dataLayer.originalPush = _dataLayer.push;\r\n        _dataLayer.push = _newPush;\r\n\r\n        _dataLayer.subscribers = [];\r\n        _dataLayer.subscribers.originalPush = _dataLayer.subscribers.push;\r\n\r\n        _dataLayer.subscribers.push = function (s) {\r\n            if (0 > _dataLayer.subscribers.indexOf(s)) {\r\n                var pushParams = [].slice.call(arguments, 0);\r\n                _dataLayer.subscribers.originalPush.apply(_dataLayer.subscribers, pushParams);\r\n            }\r\n        }\r\n    }\r\n\r\n    return _dataLayer;\r\n}));\n",
    "(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/googleTagManager', ['tracking/loggers/datalayer'], factory);\r\n    } else {\r\n        root.googleTagManager = factory(root.dataLayer);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (dataLayer) {\r\n    var googleTagManagerAccountId;\r\n\r\n    function init(gAccId) {\r\n        googleTagManagerAccountId = gAccId;\r\n        doGoogleTagManager();\r\n    }\r\n\r\n    function startChat() {\r\n        try {\r\n            dataLayer.push({ \"event\": \"start-chat\" });\r\n        } catch (ex) {\r\n            ErrorManager.onError('startChat', 'Google Tag Manager has failed', eErrorSeverity.low);\r\n        }\r\n    }\r\n\r\n    function configAttributes(oAttributes) {\r\n        ko.postbox.publish(eFxNetEvents.GtmConfigurationSet, oAttributes);\r\n    }\r\n\r\n    function doGoogleTagManager() {\r\n\r\n        var w = window;\r\n        var d = document;\r\n        var s = 'script';\r\n        var l = 'dataLayer';\r\n        var i = googleTagManagerAccountId;\r\n\r\n        w[l] = w[l] || [];\r\n        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });\r\n        var f = d.getElementsByTagName(s)[0],\r\n            j = d.createElement(s),\r\n            dl = l != 'dataLayer' ? '&l=' + l : '';\r\n        j.async = true;\r\n        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);\r\n\r\n    }\r\n\r\n    window.googleTagManager = {\r\n        Init: init,\r\n        StartChat: startChat,\r\n        ConfigAttributes: configAttributes\r\n    }\r\n\r\n    return window.googleTagManager;\r\n}));\n",
    "(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define('tracking/loggers/gglanalitycsconfigs', [], factory);\n    } else {\n        root.fxTracking = root.fxTracking || {};\n        root.fxTracking.gglAnalitycsConfigs = factory();\n    }\n}(typeof self !== 'undefined' ? self : this, function () {\n    \n    var eventSections = {\n        'login-view': 'Login',\n        'switch-tab': 'Market Watch',\n        'account-summary-advanced': 'Account Summary',\n        'account-summary-interaction': 'Account Summary',\n        'account-summary-simple': 'Account Summary',\n        'cancel-limit': 'Limits',\n        'change-currency': 'General',\n        'change-language': 'General',\n        'close-deal-success': 'Deal',\n        'deal-slip-dragged': 'Deal',\n        'deal-slip-error': 'Deal',\n        'deal-slip-interaction': 'Deal',\n        'deal-slip-submit': 'Deal',\n        'deal-slip-success': 'Deal',\n        'deal-slip-view': 'Deal',\n        'deposit-error': 'Deposit',\n        'deposit-interaction': 'Deposit',\n        'deposit-submit': 'Deposit',\n        'deposit-success': 'Depost',\n        'deposit-view': 'Deposit',\n        'forgot-password-error': 'Password',\n        'forgot-password-interaction': 'Password',\n        'forgot-password-submit': 'Password',\n        'forgot-password-success': 'Password',\n        'forgot-password-view': 'Password',\n        'help-click': 'Help',\n        'hide-help-center': 'Help',\n        'information-maximize': 'Market Watch',\n        'information-minimize': 'Market Watch',\n        'instrument-advanced': 'Market Watch',\n        'instrument-simple': 'Market Watch',\n        'interaction': 'General',\n        'login-error': 'Login',\n        'login-interaction': 'Login',\n        'login-submit': 'Login',\n        'login-success': 'Login',\n        'net-exposure-one-currency': 'Account Summary',\n        'net-exposure-original-currency': 'Account Summary',\n        'new-limit-dragged': 'Limits',\n        'new-limit-error': 'Limits',\n        'new-limit-submit': 'Limits',\n        'new-limit-success': 'Limits',\n        'new-limit-view': 'Limits',\n        'registration-error': 'Registration',\n        'registration-interaction': 'Registration',\n        'registration-submit': 'Registration',\n        'registration-success': 'Registration',\n        'registration-view': 'Registration',\n        'request-new-password-error': 'Password',\n        'request-new-password-interaction': 'Password',\n        'request-new-password-submit': 'Password',\n        'request-new-password-view': 'Password',\n        'show-help-center': 'Help',\n        'sign-out': 'General',\n        'update-limit': 'Limits',\n        'walkthrough-ended': 'Walkthrough',\n        'walkthrough-show-step': 'Walkthrough',\n        'walkthrough-started': 'Walkthrough',\n        'withdrawal-cancel': 'withdrawal',\n        'withdrawal-interaction': 'withdrawal',\n        'withdrawal-print': 'withdrawal',\n        'withdrawal-submit': 'withdrawal',\n        'withdrawal-success': 'withdrawal',\n        'withdrawal-view': 'withdrawal',\n        'account-type-view': 'Registration',\n        'withdrawal-error': 'withdrawal',\n        'demo-click': 'Registration',\n        'real-click': 'Registration',\n        'agreement-view': 'General',\n        'request-new-password-success': 'Password',\n        'message-clicked': 'Messages',\n        'message-view': 'Messages',\n        'instrument-show-more': 'Instrument',\n        'instrument-show-less': 'Instrument',\n        'filter-apply': 'General',\n        'SmartBannerDeposit': 'Messages',\n        'SmartBannerViewOfferButtonCallback': 'Messages'\n    };\n    var viewNames = {\n        '1': 'Main',\n        '2': 'Open Deals',\n        '3': 'Limits',\n        '4': 'Closed Deals',\n        '5': 'Account Statement',\n        '6': 'Deposit',\n        '7': 'Withdrawal',\n        '8': 'Activity Log',\n        '9': 'Personal Details',\n        '10': 'Financial Details',\n        '11': 'Change Password',\n        '12': 'View and Print Withdrawal',\n        '13': 'Transaction Report',\n        '14': 'Upload Documents',\n        '15': 'Trading Signals',\n        '16': 'Third Party',\n        '17': 'Chart Analysis',\n        '18': 'Binary Options',\n        '19': 'Tutorials',\n        '20': 'Education',\n        '21': 'Charts',\n        '22': 'CDD Financial Details'\n    };\n\n    function getSection(eventName) {\n        return eventSections[eventName] || 'None';\n    }\n\n    function getName(viewId) {\n        return viewNames[viewId] || viewId;\n    }\n\n    return {\n        GetSection: getSection,\n        GetName: getName\n    };\n}));\n",
    "/*global trackingData */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"tracking/loggers/fxeventslogger\",\n            [\n                \"tracking/loggers/datalayer\",\n                \"tracking/loggers/gglanalitycsconfigs\"\n            ],\n            factory);\n    } else {\n        root.fxTracking = root.fxTracking || {};\n        root.fxTracking.fxEventsLogger = factory(root.dataLayer, root.fxTracking.gglAnalitycsConfigs);\n    }\n}(typeof self !== \"undefined\" ? self : this, function (dataLayer, gglAnalyticsConfig) {\n    var ignoredEvents = [\n        \"fb-ready\",\n        \"create-helpwidget\",\n        \"load-google-analytics\",\n        \"trackingdata-loaded\",\n        \"interaction\",\n        \"hotjar-init\",\n        \"self-activation-user\"\n    ];\n    var interactionViews = [2, 3, 4, 6, 9, 15, 17, 18, 19, 20, 21];\n    var interactionEvents = [\"deal-slip-interaction\", \"account-summary-interaction\", \"new-limit-view\"];\n\n    var biServiceURL;\n\n    function _e2vp(eventSection, eventAction, eventName, eventCategory, viewId) {\n        // maps events to virtual page views (there are cases we want to send the event as a pageview for different reasons)\n        if (eventSection == \"Help\" && eventAction == \"Show\")\n            return \"vp_help-widget-start\";\n        if (eventName == \"questionnaire-navigation\") {\n            switch (eventCategory) {\n                case \"Cdd part 1\":\n                    return \"vp_cdd-page-1\";\n                case \"Cdd part 2\":\n                    return \"vp_cdd-page-2\";\n                case \"Kyc\":\n                    return \"vp_cdd-submit\";\n            }\n        }\n        if (eventName == \"View\" && (viewId == 10 || viewId == 27))\n            return \"vp_cdd-start\";\n        if (eventName.match(/^agreement/) && (viewId == 6 || viewId == 15))\n            return \"vp_missing-information\" + eventName.replace(/^agreement/, \"\");\n        if (eventName.match(/^deposit/)) return \"vp_\" + eventName;\n        return null;\n    }\n\n    function trace() {\n        try {\n            /*console.info.apply(console, arguments);*/\n        } catch (e) { /*console && console.error(arguments); */ }\n    }\n\n    function getproperties(eventname) {\n        // returns an object with all the properties that were sent along with the event\n        var i = dataLayer.length;\n        while (i--) {\n            if (dataLayer[i].event && dataLayer[i].event == eventname) {\n                var obj = {};\n                for (var x in dataLayer[i]) {\n                    if (x != \"event\") obj[x] = dataLayer[i][x];\n                }\n                return obj;\n            }\n        }\n        return {};\n    }\n\n    function dataLayerEventHandler(obj) {\n        var eventName = obj.event;\n        if (eventName.match(/^[gtm|_]/ig) || (eventName === \"interaction\" && obj.artificial === true)) {\n            return;\n        }\n\n        var viewId = obj.ViewId,\n            eventSection = gglAnalyticsConfig.GetSection(eventName),\n            eventAction = obj.action,\n            eventCategory = obj.category,\n            interactionView = interactionViews.indexOf(viewId) >= 0,\n            interactionEvent = interactionEvents.indexOf(eventName) >= 0,\n            ignoreEvent = ignoredEvents.indexOf(eventName) >= 0;\n\n        window.__gaq = window.__gaq || function () {\n            window.__gaq.q = window.__gaq.q || [];\n            window.__gaq.q.push(arguments);\n        };\n\n        try {\n            var eventdata = getproperties(eventName);\n\n            // look for the TrackingSessionId and store it in localStorage in case later events will be sent without it\n            if (eventdata.TrackingSessionId) {\n                window.sessionStorage.setItem(\"TrackingSessionId\", eventdata.TrackingSessionId);\n            } else {\n                eventdata.TrackingSessionId = window.sessionStorage.getItem(\"TrackingSessionId\");\n            }\n\n            // check if SAProcess is passed with the event and store for later use (not all events are sent with the SAProcess)\n            if (eventdata.SAProcess) {\n                window.sessionStorage.setItem(\"SAProcess\", eventdata.SAProcess);\n            } else {\n                eventdata.SAProcess = window.sessionStorage.getItem(\"SAProcess\");\n            }\n\n            var eventname = eventName;\n\n            if (!eventname || (typeof eventname !== \"string\") || (eventname.replace(/ /g, \"\") == \"\")) {\n                dataLayer.push({ event: \"unknown\" });\n                return;\n            }\n\n            // look for the ChatBot agent name in the 'personalguide4helpcenter-ready' events\n            if (eventName == \"personalguide4helpcenter-ready\") {\n                var agentName = obj.agentName;\n\n                if (agentName && typeof window.hj !== \"undefined\") {\n                    window.__gaq(\"send\", \"pageview\", \"/virtual-pages/\" + agentName);\n                    window.hj(\"tagRecording\", [agentName]);\n                }\n            }\n\n            // add the account number to the event\n            var accountnumber = trackingData.getProperties().AccountNumber;\n            if (accountnumber) eventdata.AccountNumber = accountnumber;\n\n            // when we initiate the Google Analytics tag we also store in memory (window._gadimensions) the list of dimensions we should send back to Google Analytics with each event\n            try {\n                if (window._gadimensions) {\n                    var properties = trackingData.getProperties();\n                    var dimensions = {};\n                    for (var i in window._gadimensions) {\n                        if (typeof window._gadimensions[i] !== \"string\") continue;\n                        if (properties[window._gadimensions[i]]) {\n                            dimensions[\"dimension\" + i] = properties[window._gadimensions[i]];\n                            delete window._gadimensions[i];\n                        }\n                    }\n\n                    if (typeof window.hj !== \"undefined\") {\n                        // if HotJar is present, save userId into dimension14 in Google Analytics\n                        try {\n                            dimensions[\"dimension14\"] = window.hj.pageVisit.property.get(\"userId\");\n                        } catch (e) { /*console && console.error(arguments); */ }\n                    }\n                    window.__gaq(\"set\", dimensions);\n                }\n            } catch (e) { /*console && console.error(arguments); */ }\n\n            if (eventName == \"registration-interaction\" && document.location.href.match(/\\/Confirm/)) {\n                // if here, we should be able to grab the UserWithExperience checkbox. Store it in localStorage for later use\n                var userWithExperience = document.getElementsByName(\n                    \"UserWithExperience\"\n                );\n                if (userWithExperience.length > 0) {\n                    for (var idx = 0; idx < userWithExperience.length; idx++) {\n                        if (userWithExperience[idx].checked) {\n                            window.sessionStorage.setItem(\n                                \"hasExperience\",\n                                userWithExperience[idx].value\n                            );\n                            break;\n                        }\n                    }\n                }\n            } else if (trackingData.getProperties().SAProcess) {\n                // if SA user, send virtual page with the user's experience\n                var hasExperience = window.sessionStorage.getItem(\"hasExperience\");\n                window.sessionStorage.removeItem(\"hasExperience\");\n                if (hasExperience) {\n                    window.__gaq(\"set\", \"dimension12\", hasExperience);\n                    window.__gaq(\"send\", \"pageview\", \"/virtual-pages/vp_experience_\" + (hasExperience == \"True\" ? \"true\" : \"false\"));\n\n                    try {\n                        window.hj =\n                            window.hj ||\n                            function () {\n                                (window.hj.q = window.hj.q || []).push(arguments);\n                            };\n                        window.hj(\"tagRecording\", [\n                            \"vp_experience_\" + (hasExperience == \"True\" ? \"true\" : \"false\")\n                        ]);\n                    } catch (e) {\n                        trace();\n                    }\n                }\n            }\n\n            if (eventName == \"View\") {\n                var gglViewName = gglAnalyticsConfig.GetName(viewId);\n\n                window.__gaq(\"set\", {\n                    page: \"/view/\" + viewId + \"/\" + gglViewName,\n                    title: gglViewName\n                });\n                window.__gaq(\"send\", \"pageview\");\n                eventdata[\"ItemName\"] = gglViewName;\n            } else if (eventSection != \"None\") {\n                var eventLabel = eventName === \"demo-click\" ? \"Practice\" : eventName === \"real-click\" ? \"Real\" : \"\";\n\n                if (eventSection == \"Help\" && eventAction == \"Click\") {\n                    var itemName = itemName;\n                    var itemType = itemType;\n                    if (itemName || itemType)\n                        eventLabel += (itemName || \"\") + \" \" + (itemType || \"\");\n                }\n\n                window.__gaq(\"send\", \"event\", eventSection, eventAction, eventLabel);\n            }\n\n            var virtualpage = _e2vp(eventSection, eventAction, eventName, eventCategory, viewId);\n\n            if (virtualpage) {\n                window.__gaq(\"send\", \"pageview\", \"/virtual_pages/\" + virtualpage);\n                if (typeof window.hj !== \"undefined\") {\n                    window.hj(\"tagRecording\", [virtualpage]);\n                }\n            }\n\n            if (!ignoreEvent) {\n                var props = [];\n                for (var d in eventdata) {\n                    props.push(d + \"=\" + eventdata[d]);\n                }\n                var img = new Image();\n                img.src = biServiceURL + \"?name=\" + eventname + \"&\" + props.join(\"&\") + \"&random=\" + Math.random();\n            }\n\n            if (eventName != \"interaction\" &&\n                ((eventName == \"View\" && interactionView) || interactionEvent)) {\n                dataLayer.push({ event: \"interaction\", artificial: true });\n            }\n        } catch (e) {\n            /*console.error(\"error in general\", e);*/\n        }\n    }\n\n    function init(_biServiceUrl) {\n        biServiceURL = _biServiceUrl;\n\n        dataLayer.subscribers.push(dataLayerEventHandler);\n    }\n\n    return {\n        init: init\n    };\n}));\n",
    "/*global trackingData */\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/fbeventslogger', ['tracking/loggers/datalayer'], factory);\r\n    } else {\r\n        root.fxTracking = root.fxTracking || {};\r\n        root.fxTracking.fbEventsLogger = factory(root.dataLayer);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (dataLayer) {\r\n\r\n    function loadFB(f, b, e, v, n, t, s) {\r\n        if (!f.fbq) {// return;\r\n            n = f.fbq = function () {\r\n                n.callMethod ? n.callMethod.apply(n, arguments) : n.queue.push(arguments);\r\n            };\r\n            if (!f._fbq) f._fbq = n;\r\n            n.push = n;\r\n            n.loaded = !0;\r\n            n.version = \"2.0\";\r\n            n.queue = [];\r\n            t = b.createElement(e);\r\n            t.async = !0;\r\n            t.src = v;\r\n            s = b.getElementsByTagName(e)[0];\r\n            s.parentNode.insertBefore(t, s);\r\n\r\n            f.fbq('init', '871141973245420');\r\n            f.fbq('track', \"PageView\");\r\n\r\n            dataLayer.push({ \"event\": \"fb-ready\" });\r\n        }\r\n\r\n        if (window[\"fbq\"]) {\r\n            window.fbq(\"track\", \"ViewContent\", {\r\n                value: trackingData.getProperties().NumberOfDeposits\r\n            });\r\n        }\r\n    }\r\n\r\n    function dataLayerEventHandler(obj) {\r\n        if (!(obj && obj.event && obj.event && obj.event.toLowerCase() == 'login-success')) {\r\n            return;\r\n        }\r\n\r\n        loadFB(window, document, \"script\", \"//connect.facebook.net/en_US/fbevents.js\");\r\n    }\r\n\r\n    function init() {\r\n        if (0 > dataLayer.indexOf(function (e) { return e.event && e.event && e.event.toLowerCase() === 'login-success' })) {\r\n            dataLayer.subscribers.push(dataLayerEventHandler);\r\n        } else {\r\n            loadFB(window, document, \"script\", \"//connect.facebook.net/en_US/fbevents.js\");\r\n        }\r\n    }\r\n\r\n    return {\r\n        init: init\r\n    };\r\n}));\r\n\n",
    "/**\r\n *\r\n * Use it as dependency for other require modules to load content for specific resources.\r\n * The loaded content will be automatically loaded and added to Dictionary\r\n *\r\n * Example:\r\n * define('MyAwesomeViewModel', ['LoadDictionaryContent!MyAwesomeContentResourceName'], function() {\r\n *\r\n * });\r\n *\r\n */\r\ndefine(\"LoadDictionaryContent\", [\r\n\t\"require\",\r\n\t\"Dictionary\",\r\n\t\"global/UrlResolver\",\r\n\t\"JSONHelper\",\r\n\t\"handlers/Ajaxer\",\r\n], function (require) {\r\n\tvar Dictionary = require(\"Dictionary\"),\r\n\t\tUrlResolver = require(\"global/UrlResolver\"),\r\n\t\tJSONHelper = require(\"JSONHelper\");\r\n\r\n\treturn {\r\n\t\tload: function (resourceName, localRequire, onloadCallback, config) {\r\n\t\t\tif (config && config.isBuild) {\r\n\t\t\t\tonloadCallback(null);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar cachedValue = Dictionary.GetAllItemsForResource(resourceName);\r\n\r\n\t\t\tif (cachedValue) {\r\n\t\t\t\tonloadCallback(cachedValue);\r\n\t\t\t} else {\r\n\t\t\t\tvar callerName = \"LoadDictionaryContent!\" + resourceName;\r\n\t\t\t\tvar contentToLoadUrl = UrlResolver.getContentPath(resourceName);\r\n\r\n\t\t\t\tvar ajaxer = new TAjaxer();\r\n\t\t\t\tajaxer.get(\r\n\t\t\t\t\tcallerName,\r\n\t\t\t\t\tcontentToLoadUrl,\r\n\t\t\t\t\t\"\",\r\n\t\t\t\t\tfunction (responseText) {\r\n\t\t\t\t\t\tvar content = JSONHelper.STR2JSON(callerName, responseText) || {};\r\n\r\n\t\t\t\t\t\tif (resourceName === \"contentdata\") {\r\n\t\t\t\t\t\t\tObject.keys(content).forEach(function (key, index) {\r\n\t\t\t\t\t\t\t\tDictionary.AddResource(key, content[key]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tDictionary.AddResource(resourceName, content);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tonloadCallback(content);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tnull,\r\n\t\t\t\t\tfalse\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n});\r\n\n",
    "\n",
    "/*global trackingData */\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/hotjareventslogger', ['tracking/loggers/datalayer',\r\n            'LoadDictionaryContent!HotJarConfig', 'handlers/Logger', 'Q', 'handlers/Cookie'\r\n        ], factory);\r\n    } else {\r\n        root.fxTracking = root.fxTracking || {};\r\n        root.fxTracking.hotJarEventsLogger = factory(root.dataLayer, root.fxTracking.trackingConfig.hotjarconfig, root.Logger);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (dataLayer, hotJarConfig, logger, Q, cookieHandler) {\r\n    var attempts = 0,\r\n        MAX_ATTEMPS = 40,\r\n        TIMEOUT = 250,\r\n        deferer = Q ? Q.defer() : null,\r\n        alreadyStarted = false;\r\n\r\n    function waitForTrackingData() {\r\n        attempts += 1;\r\n        if (attempts > MAX_ATTEMPS || alreadyStarted) return;\r\n\r\n        alreadyStarted = true;\r\n\r\n        if (\r\n            typeof trackingData == \"undefined\" ||\r\n            typeof trackingData.getProperties == \"undefined\"\r\n        ) {\r\n            window.setTimeout(waitForTrackingData, TIMEOUT, true);\r\n        } else {\r\n            try {\r\n                (function (h, o, t, j, a, r) {\r\n                    h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments); };\r\n                    h._hjSettings = { hjid: hotJarConfig.hjid, hjsv: hotJarConfig.hjsv, hjdebug: hotJarConfig.hjdebug };\r\n                    if (cookieHandler && \"1\" === cookieHandler.ReadCookie(\"fx-enable-hjdebug\")) {\r\n                        h._hjSettings.hjdebug = true;\r\n                    }\r\n                    a = o.getElementsByTagName(\"head\")[0];\r\n                    r = o.createElement(\"script\");\r\n                    r.async = 1;\r\n                    r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\r\n                    r.onload = function () {\r\n                        logger.warn('tracking/loggers/hotjareventslogger', 'hotjar loaded');\r\n                        if (deferer) {\r\n                            deferer.resolve();\r\n                        }\r\n                    };\r\n                    r.onerror = function (evnt) {\r\n                        logger.warn('tracking/loggers/hotjareventslogger', 'hotjar script load faill', null, 2);\r\n                        if (deferer) {\r\n                            deferer.reject();\r\n                        }\r\n                    };\r\n                    a.appendChild(r);\r\n                })(window, document, \"//static.hotjar.com/c/hotjar-\", \".js?sv=\");\r\n            } catch (e) {\r\n                logger.warn({ e: e });\r\n                if (deferer) {\r\n                    deferer.reject();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    function dataLayerEventHandler(obj) {\r\n        if (attempts > 0 || !(obj && obj.event === 'hotjar-init')) {\r\n            return;\r\n        }\r\n\r\n        waitForTrackingData();\r\n    }\r\n\r\n    function init(now) {\r\n        if (hotJarConfig.hjid && hotJarConfig.hjid !== '#') {\r\n            if (now)\r\n                waitForTrackingData();//\r\n            else\r\n                dataLayer.subscribers.push(dataLayerEventHandler);\r\n        }\r\n\r\n        if (deferer)\r\n            return deferer.promise;\r\n    }\r\n\r\n    return {\r\n        init: init\r\n    };\r\n}));\r\n\n",
    "\n",
    "/*global trackingData, SnapEngage, isNullOrUndefined */\r\n(function (root, factory) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/snapengagechat', ['tracking/loggers/datalayer',\r\n            'LoadDictionaryContent!SnapEngageConfig', 'handlers/general', 'trackingIntExt/TrackingData'\r\n        ], factory);\r\n    } else {\r\n        root.fxTracking = root.fxTracking || {};\r\n        root.fxTracking.snapEngageChat = factory(root.dataLayer, root.fxTracking.trackingConfig.snapengageconfig, { isNullOrUndefined: isNullOrUndefined }, root.trackingData);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (dataLayer, snapEngageConfig, general, trackingData) {\r\n    function isSAUser() {\r\n        var sauser;\r\n        try {\r\n            sauser = window.localStorage.getItem(\"sauser\");\r\n        } catch (e) { }\r\n\r\n        if (document.location.search.match(/sauser=true/) ||\r\n            trackingData.getProperties().SAProcess ||\r\n            !!sauser) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    function getSnapEngageWidgetId() {\r\n        if (isSAUser() && snapEngageConfig.SnapEngageWidgetID_sauser) {\r\n            return snapEngageConfig.SnapEngageWidgetID_sauser\r\n        }\r\n\r\n        return snapEngageConfig.SnapEngageWidgetID;\r\n    }\r\n\r\n    function getCallbackWidgetId() {\r\n        return snapEngageConfig.CallbackWidgetId\r\n    }\r\n\r\n    function loadSnapEngage() {\r\n        var se = document.createElement(\"script\"),\r\n            SnapEngageWidgetId = getSnapEngageWidgetId();\r\n\r\n        se.type = \"text/javascript\";\r\n        se.async = true;\r\n        se.src = \"//storage.googleapis.com/code.snapengage.com/js/\" + SnapEngageWidgetId + \".js\";\r\n        var done = false;\r\n        se.onload = se.onreadystatechange = function () {\r\n            if (\r\n                !done &&\r\n                (!this.readyState ||\r\n                    this.readyState === \"loaded\" ||\r\n                    this.readyState === \"complete\")\r\n            ) {\r\n                done = true;\r\n                if (general.isNullOrUndefined(SnapEngageWidgetId)) {\r\n                    var accountNumber = trackingData.getProperties().AccountNumber;\r\n                    if (!general.isNullOrUndefined(accountNumber) && !general.isNullOrUndefined(SnapEngage)) {\r\n                        SnapEngage.setUserName(trackingData.getProperties().AccountNumber);\r\n                        SnapEngage.setUserEmail(accountNumber + \"@trader.com\");\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        var s = document.getElementsByTagName(\"script\")[0];\r\n        s.parentNode.insertBefore(se, s);\r\n    }\r\n\r\n    function dataLayerEventHandler(obj) {\r\n        if (!(obj && obj.event) ||\r\n            (0 > ['start-chat', 'start-callback-request-chat', 'start-proactive-chat'].indexOf(obj.event)) ||\r\n            typeof SnapEngage == \"undefined\") {\r\n\r\n            return;\r\n        }\r\n\r\n        var ipCountry = trackingData.getProperties().IPCountry;\r\n\r\n        switch (obj.event) {\r\n            case 'start-chat':\r\n                if (ipCountry.match(/(Poland|Italy|France|Spain|Greece|Holland|Germany)/i)) {\r\n                    SnapEngage.setWidgetId(getCallbackWidgetId());\r\n                } else {\r\n                    SnapEngage.setWidgetId(getSnapEngageWidgetId());\r\n                }\r\n                SnapEngage.startLink();\r\n                break;\r\n            case 'start-callback-request-chat':\r\n                try {\r\n                    SnapEngage.setWidgetId(getCallbackWidgetId());\r\n                    SnapEngage.startLink();\r\n                } catch (e) { /*console && console.error(arguments); */ }\r\n                break;\r\n            case 'start-proactive-chat':\r\n                var message = obj['snapengage_message'];\r\n                SnapEngage.openProactiveChat(true, false, message);\r\n                break;\r\n        }\r\n    }\r\n\r\n    var attempts = 0;\r\n    function waitForTrackingData() {\r\n        attempts += 1;\r\n        if (attempts > 40) return;\r\n\r\n        if (\r\n            typeof trackingData == \"undefined\" ||\r\n            typeof trackingData.getProperties == \"undefined\"\r\n        ) {\r\n            window.setTimeout(waitForTrackingData, 250);\r\n        } else {\r\n            loadSnapEngage();\r\n\r\n            dataLayer.subscribers.push(dataLayerEventHandler);\r\n        }\r\n    }\r\n\r\n    function init() {\r\n        if (!window.SnapEngage) {\r\n            if (document.readyState === 'loading') {  // Loading hasn't finished yet\r\n                document.addEventListener('DOMContentLoaded', waitForTrackingData);\r\n            } else {  // `DOMContentLoaded` has already fired\r\n                waitForTrackingData();\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        init: init\r\n    };\r\n}));\n",
    "/*global trackingData*/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/pagenocaptcha', ['tracking/loggers/datalayer', 'tracking/loggers/gglanalyticslogger'], factory);\r\n    } else {\r\n        root.fxTracking = root.fxTracking || {};\r\n        root.fxTracking.pageNoCaptcha = factory(root.dataLayer);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (dataLayer) {\r\n    function init() {\r\n        var attempts = 0;\r\n        var waitForAccountNumber = function () {\r\n            attempts += 1;\r\n            if (attempts > 40) return;\r\n            if (\r\n              typeof trackingData == \"undefined\" ||\r\n              typeof trackingData.getProperties == \"undefined\" ||\r\n              typeof trackingData.getProperties().AccountNumber == \"undefined\"\r\n            ) {\r\n                window.setTimeout(waitForAccountNumber, 250);\r\n            } else {\r\n                var data;\r\n                if (trackingData.getProperties().SAProcess) {\r\n                    var userid = trackingData.getProperties().AccountNumber;\r\n                    data = {\r\n                        event: \"load-google-analytics\",\r\n                        gauserid: userid,\r\n                        gaclientid: \"\"\r\n                    };\r\n                } else {\r\n                    data = {\r\n                        event: \"load-google-analytics\",\r\n                        gauserid: \"\",\r\n                        gaclientid: \"\"\r\n                    };\r\n                }\r\n\r\n                dataLayer.push(data);\r\n            }\r\n        };\r\n\r\n        if (null === window.location.href.match(/\\/Parse/i)) {\r\n            if (document.location.href.match(/\\/login/i)) {\r\n                if (document.location.search.match(/sauser=true/)) {\r\n                    try {\r\n                        window.localStorage.setItem(\"sauser\", true);\r\n                    } catch (e) { }\r\n                }\r\n\r\n                var gaclientid = \"\";\r\n                try {\r\n                    gaclientid = window.localStorage.getItem(\"gaclientid\") || \"\";\r\n                } catch (e) { }\r\n                var data = {\r\n                    event: \"load-google-analytics\",\r\n                    gauserid: \"\",\r\n                    gaclientid: gaclientid\r\n                };\r\n\r\n                dataLayer.push(data);\r\n            } else {\r\n                waitForAccountNumber();\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        init: init\r\n    };\r\n}));\r\n\n",
    "/*global trackingData*/\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/pagewithcaptcha',\r\n            ['tracking/loggers/datalayer', 'tracking/loggers/gglanalyticslogger'],\r\n            factory);\r\n    } else {\r\n        root.fxTracking = root.fxTracking || {};\r\n        root.fxTracking.pageWithCaptcha = factory(root.dataLayer);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (dataLayer) {\r\n    function init() {\r\n        var attempts = 0;\r\n\r\n        var waitForMeta = function () {\r\n            attempts += 1;\r\n            if (attempts > 40) return;\r\n            if (\r\n              typeof trackingData == \"undefined\" ||\r\n              typeof trackingData.getProperties == \"undefined\" ||\r\n              typeof trackingData.getProperties().Meta == \"undefined\"\r\n            ) {\r\n                window.setTimeout(waitForMeta, 250);\r\n            } else {\r\n                var meta = trackingData.getProperties().Meta;\r\n                if (meta.gaclientid) {\r\n                    try {\r\n                        window.localStorage.setItem(\"gaclientid\", meta.gaclientid);\r\n                    } catch (e) { }\r\n                }\r\n                var data = {\r\n                    event: \"load-google-analytics\",\r\n                    gauserid: \"\",\r\n                    gaclientid: meta.gaclientid || \"\"\r\n                };\r\n\r\n                dataLayer.push(data);\r\n            }\r\n        };\r\n\r\n        if (null !== window.location.href.match(/\\/Parse/i)) {\r\n            waitForMeta();\r\n        }\r\n    }\r\n\r\n    return {\r\n        init: init\r\n    };\r\n}));\r\n\n",
    "/*global trackingData */\r\n(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/gglanalyticslogger', [\r\n            'tracking/loggers/datalayer',\r\n            'tracking/loggers/pagenocaptcha',\r\n            'tracking/loggers/pagewithcaptcha'\r\n        ], factory);\r\n    } else {\r\n        root.fxTracking = root.fxTracking || {};\r\n        root.fxTracking.gglAnalyticsLogger = factory(root.dataLayer, root.fxTracking.pageNoCaptcha, root.fxTracking.pageWithCaptcha);\r\n    }\r\n}(typeof self !== 'undefined' ? self : this, function (dataLayer, pageNoCaptcha, pageWithCaptcha) {\r\n\r\n    function _loadAnalytics() {\r\n        // store the name of the Analytics object\r\n        window.GoogleAnalyticsObject = 'ga';\r\n\r\n        // check whether the Analytics object is defined\r\n        if (!('ga' in window)) {\r\n\r\n            // define the Analytics object\r\n            window.ga = function () {\r\n\r\n                // add the tasks to the queue\r\n                window.ga.q.push(arguments);\r\n\r\n            };\r\n\r\n            // create the queue\r\n            window.ga.q = [];\r\n\r\n        }\r\n\r\n        // store the current timestamp\r\n        window.ga.l = (new Date()).getTime();\r\n\r\n        // create a new script element\r\n        var script = document.createElement('script');\r\n        script.src = '//www.google-analytics.com/analytics.js';\r\n        script.async = true;\r\n\r\n        // insert the script element into the document\r\n        var firstScript = document.getElementsByTagName('script')[0];\r\n        firstScript.parentNode.insertBefore(script, firstScript);\r\n    }\r\n\r\n    function loadAnalytics(obj) {\r\n        if (!(obj && obj.event === 'load-google-analytics')) {\r\n            return;\r\n        }\r\n\r\n        _loadAnalytics();\r\n\r\n        var gaclientid = obj.gaclientid || '',\r\n            gauserid = obj.gauserid || '',\r\n            sauser;\r\n        try {\r\n            sauser = window.localStorage.getItem(\"sauser\");\r\n        } catch (e) { }\r\n\r\n        if (gaclientid != \"\") {\r\n            window.ga(\"create\", \"UA-20661807-41\", {\r\n                clientId: gaclientid\r\n            });\r\n        } else if (gauserid != \"\") {\r\n            window.ga(\"create\", \"UA-20661807-41\", \"auto\", {\r\n                userId: gauserid\r\n            });\r\n        } else if (sauser) {\r\n            window.ga(\"create\", \"UA-20661807-41\", \"auto\");\r\n        } else {\r\n            window.ga(\"create\", \"UA-20661807-28\", \"auto\");\r\n        }\r\n\r\n        if (typeof window.__gaq != \"undefined\") {\r\n            if (window.__gaq.q) {\r\n                for (var i = 0; i < window.__gaq.q.length; i++) {\r\n                    window.ga.apply(window, window.__gaq.q[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        window.__gaq = function () {\r\n            window.ga.apply(window, arguments);\r\n        };\r\n\r\n        try {\r\n            var properties = trackingData.getProperties();\r\n            if (properties.AccountNumber) {\r\n                window._gadimensions = {\r\n                    \"2\": \"AccountNumber\",\r\n                    \"4\": \"Broker\",\r\n                    \"5\": \"DepositCategory\",\r\n                    \"6\": \"FirstDealDate\",\r\n                    \"7\": \"FolderType\",\r\n                    \"8\": \"NumberOfDeals\",\r\n                    \"9\": \"NumberOfDeposits\",\r\n                    \"10\": \"Serial\",\r\n                    \"11\": \"VolumeCategory\"\r\n                };\r\n\r\n                var dimensions = {};\r\n                for (var gadimension in window._gadimensions) {\r\n                    if (typeof window._gadimensions[gadimension] != \"string\") {\r\n                        continue;\r\n                    }\r\n\r\n                    if (properties[window._gadimensions[gadimension]]) {\r\n                        dimensions[\"dimension\" + gadimension] = properties[window._gadimensions[gadimension]];\r\n                        delete window._gadimensions[gadimension];\r\n                    }\r\n                }\r\n\r\n                window.ga(\"set\", dimensions);\r\n            }\r\n        } catch (e) { /*console && console.error(arguments); */ }\r\n\r\n        window.ga(\"send\", \"pageview\");\r\n    }\r\n\r\n    function init() {\r\n        dataLayer.subscribers.push(loadAnalytics);\r\n\r\n        if (null !== window.location.href.match(/\\/Parse/i)) {\r\n            pageWithCaptcha.init();\r\n        } else {\r\n            pageNoCaptcha.init();\r\n        }\r\n    }\r\n\r\n    return {\r\n        init: init\r\n    };\r\n}));\r\n\n",
    "(function (root, factory) {\r\n    if (typeof define === 'function' && define.amd) {\r\n        define('tracking/loggers/fxtracking.lib',\r\n            [\r\n                'tracking/loggers/datalayer',\r\n                'tracking/googleTagManager',\r\n                'tracking/loggers/fxeventslogger',\r\n                'tracking/loggers/fbeventslogger',\r\n                'tracking/loggers/hotjareventslogger',\r\n                'tracking/loggers/snapengagechat',\r\n                'tracking/loggers/gglanalyticslogger'\r\n            ], factory);\r\n    } else {\r\n        root.fxTracking = root.fxTracking || {};\r\n\r\n        root.fxTracking.init = factory(root.dataLayer, root.googleTagManager, root.fxTracking.fxEventsLogger,\r\n                                        root.fxTracking.fbEventsLogger, root.fxTracking.hotJarEventsLogger,\r\n                                        root.fxTracking.snapEngageChat, root.fxTracking.gglAnalyticsLogger)\r\n            .init;\r\n    }\r\n}(typeof self !== 'undefined' ? self : this,\r\n    function (dataLayer, googleTagManager, fxEventsLogger, fbEventsLogger, hotJarEventsLogger, snapEngageChat, gglAnalyticsLogger) {\r\n        function init(gtmId, abTestingConfiguration, biServiceURL) {\r\n            var gtmConfiguration = {},\r\n                libs = {\r\n                    \"disable-gtm\": 'disableGTM',\r\n                    \"disable-gtm-fxtracking\": 'disableGTMFXTracking',\r\n                    \"disable-gtm-gglanalytics\": 'disableGTMGoogleAnalytics',\r\n                    \"disable-gtm-fbevents\": 'disableGTMFacebookEvents',\r\n                    \"disable-gtm-hotjar\": 'disableGTMHotjar',\r\n                    \"disable-gtm-snapchat\": 'disableGTMSnapChat'\r\n                };\r\n\r\n            for (var t in libs) {\r\n                if (abTestingConfiguration[t] === true) {\r\n                    gtmConfiguration[libs[t]] = true;\r\n                }\r\n            }\r\n\r\n            window.gtmConfiguration = {};\r\n\r\n            if (Object.keys(gtmConfiguration).length > 0) {\r\n                window.gtmConfiguration = gtmConfiguration;\r\n            }\r\n\r\n            dataLayer.init();\r\n\r\n            if ('#' != gtmId && !gtmConfiguration.disableGTM) {\r\n                googleTagManager.Init(gtmId);\r\n            }\r\n\r\n            _init(gtmConfiguration, biServiceURL);\r\n        }\r\n\r\n        function _init(gtmConfiguration, biServiceURL) {\r\n            if (gtmConfiguration.disableGTMGoogleAnalytics) {\r\n                gglAnalyticsLogger.init();\r\n            }\r\n\r\n            if (gtmConfiguration.disableGTMFXTracking) {\r\n                fxEventsLogger.init(biServiceURL);\r\n            }\r\n\r\n            if (gtmConfiguration.disableGTMFacebookEvents) {\r\n                fbEventsLogger.init();\r\n            }\r\n\r\n            if (gtmConfiguration.disableGTMHotjar) {\r\n                hotJarEventsLogger.init();\r\n            }\r\n\r\n            if (gtmConfiguration.disableGTMSnapChat) {\r\n                snapEngageChat.init();\r\n            }\r\n        }\r\n\r\n        return {\r\n            init: init\r\n        };\r\n\r\n    }));\n",
    "/* global General */\r\nvar TradingEventsHandler = function (\r\n  ko,\r\n  trackingData,\r\n  viewModelsManager,\r\n  general,\r\n  eventsCollector\r\n) {\r\n  var events = {\r\n    SocketConnectionTest: 'socket-connection-test',\r\n    View: 'active-view',\r\n    PresetChanged: 'preset-changed',\r\n    FavoriteInstrumentsReorderDrag: 'favorite-instruments-reorder-drag',\r\n    FavoriteInstrumentsReorderDrop: 'favorite-instruments-reorder-drop',\r\n    FavoriteInstrumentUpdate: 'favorite-instrument-update',\r\n    InstrumentTrade: 'instrument-trade',\r\n    NewDealButton: 'new-deal-click',\r\n    NewLimitButton: 'new-limit-click',\r\n    NewLimitDetails: 'new-limit-details',\r\n    MainTabClick: 'main-tab-click',\r\n    SubTabClick: 'sub-tab-click',\r\n    DealSlipErrorDetails: 'deal-slip-error-details',\r\n    DealSlipView: 'deal-slip-view',\r\n    NewDealAndNewLimitDragged: 'new-deal-dragged',\r\n    DealSlipInteraction: 'deal-slip-interaction',\r\n    DealSlipSubmit: 'deal-slip-submit',\r\n    CloseDeal: 'close-deal',\r\n    DealSlipSwitchInstrument: 'deal-slip-switch-instrument',\r\n    DealSlipSwitchTab: 'deal-slip-switch-tab',\r\n    DealSlipExpandLimit: 'deal-slip-expand-limit',\r\n    DealSlipCollapseLimit: 'deal-slip-collapse-limit',\r\n    DealSlipExpandTools: 'deal-slip-expand-tools',\r\n    DealSlipCollapseTools: 'deal-slip-collapse-tools',\r\n    DealChartExpandTools: 'deal-chart-expand-trade-ticket',\r\n    DealChartCollapseTools: 'deal-chart-collapse-trade-ticket',\r\n    DealSlipToggleEvent: 'deal-slip-toggle',\r\n    NewLimitErrorDetails: 'new-limit-error-details',\r\n    NewLimitView: 'new-limit-view',\r\n    LimitSlipInteraction: 'limit-slip-interaction',\r\n    NewLimitSubmit: 'new-limit-submit',\r\n    NewLimitSuccess: 'new-limit-success',\r\n    DepositIFrameLoaded: 'deposit-iframe-loaded',\r\n    DepositTypeChanged: 'deposit-type-changed',\r\n    UiLoaded: 'ui-loaded',\r\n    DealSlipSuccess: 'deal-slip-success',\r\n    DepositSuccess: 'deposit-success',\r\n    WithdrawalError: 'withdrawal-error',\r\n    DepositFailedData: 'deposit-failed-data',\r\n    DepositFailed: 'deposit-failed',\r\n    DepositAlert: 'deposit-alert',\r\n\r\n    SwitchTab: 'switch-tab',\r\n    Search: 'search',\r\n    SearchInteraction: 'search-interaction',\r\n    DealSlipSearch: 'deal-slip-search',\r\n    DealSlipSearchInteraction: 'deal-slip-search-interaction',\r\n\r\n    MessageView: 'message-view',\r\n    SmartBannerViewOfferClicked: 'sb-view-offer-clicked',\r\n    SmartBannerDepositClicked: 'sb-deposit-clicked',\r\n    RewardCtaClicked: 'reward-cta-clicked',\r\n\r\n    PresetSelectionSaved: 'preset-selection-save',\r\n    BackButtonClick: 'back-button-click',\r\n    TradingButtonClick: 'trading-button-click',\r\n    StopLossChanged: 'stop-loss-changed',\r\n    TakeProfitChanged: 'take-profit-changed',\r\n\r\n    InstrumentShowMore: 'instrument-show-more',\r\n    InstrumentShowLess: 'instrument-show-less',\r\n    ClickSundayBannerButtonMain: 'click-sunday-banner-button-main',\r\n    ShowSundayBannerMain: 'show-sunday-banner-main',\r\n    SwitchMainView: 'switch-main-view',\r\n\r\n    TutorialViewActive: 'tutorial-view-active',\r\n    TutorialOpen: 'tutorial-open',\r\n    TutorialClose: 'tutorial-close',\r\n    TutorialAgreementVew: 'tutorial-agreement-view',\r\n    TutorialAgreementAgree: 'tutorial-agreement-agree',\r\n    TutorialAgreementDecline: 'tutorial-agreement-decline',\r\n\r\n    SignalsMenuClick: 'signals-menu-click',\r\n    SignalsDrillDown: 'signals-drill-down',\r\n    SignalsViewMore: 'signals-view-more',\r\n    SignalsDetailNewDeal: 'signals-detail-new-deal',\r\n    SignalsShortTerm: 'short-term-signal-chart',\r\n\r\n    EconomicCalendarMenuClick: 'economic-calendar-menu-click',\r\n    CashBackInstrumentClick: 'cash-back-instrument-click',\r\n\r\n    QuestionnaireNavigation: 'questionnaire-navigation',\r\n    QuestionnairePage: 'questionnaire-page',\r\n    QuestionnaireQuestion: 'questionnaire-question',\r\n    QuestionnaireFaq: 'questionnaire-faq',\r\n    SupportInteraction: 'support-interaction',\r\n    DepositFaq: 'deposit-faq',\r\n    DocumentsFaq: 'upload-documents-faq',\r\n\r\n    DealSlipChartInteraction: 'deal-slip-chart-interaction',\r\n    ChartInteraction: 'chart-interaction',\r\n    ChartPerformance: 'chart-performance',\r\n    ViewSentiments: 'view-sentiments',\r\n\r\n    ClosedDealsEvents: 'closed-deals-events',\r\n    NotificationsSettingsChange: 'notifications-settings-change',\r\n\r\n    ToolsChart: 'tools-chart',\r\n    StartCallbackRequestChat: 'start-callback-request-chat',\r\n\r\n    AccountHub_Close: 'hub-menu-close',\r\n    AccountHub_Open: 'hub-menu-open',\r\n    AccountMap_Collapse: 'hub-map-collapse',\r\n    AccountMap_Expand: 'hub-map-expand',\r\n\r\n    ActionSource: 'action-source',\r\n    AccountState: 'account-state',\r\n    PriceAlertsMenuView: 'price-alerts-menu-view',\r\n    PriceAlertCreate: 'price-alert-create',\r\n    PriceAlertError: 'price-alert-error',\r\n    SlipChangeHighLowTerm: 'deal-slip-change-highlow-term',\r\n\r\n    HelpCenter: 'help-center',\r\n    EconomicCalendarTradeCta: 'economic-calendar-trade-cta',\r\n    RedirectLink: 'redirect-link-tracking',\r\n  };\r\n\r\n  var questionnaireData = {\r\n    startTime: 0,\r\n    category: '',\r\n    questionnaireType: null,\r\n  };\r\n\r\n  var data = {\r\n    viewId: '',\r\n    presetName: '',\r\n    instrumentName: '',\r\n    tradingDirection: '',\r\n    orderDirName: '',\r\n    newDealButton: '',\r\n    newLimitDetails: {},\r\n    depositType: '',\r\n    takeProfitType: 'none',\r\n    stopLossType: 'none',\r\n    tabName: '',\r\n    limit: '',\r\n    enableSLLimit: '',\r\n    enableTPLimit: '',\r\n    tools: '',\r\n    timestamp: '',\r\n    isCashBackInstrumentClick: false,\r\n    actionSource: 'Other',\r\n    existingRefferal: '',\r\n    refferalDescription: '',\r\n  };\r\n\r\n  var stateData = {\r\n    fromSearch: {\r\n      Characters: typeof undefined,\r\n      Instrument: typeof undefined,\r\n    },\r\n  };\r\n\r\n  var tradeFormMode = '',\r\n    refferingView = '',\r\n    tabHierarchy = 'main tab';\r\n\r\n  var init = function () {\r\n    ko.postbox.subscribe(\r\n      events.SocketConnectionTest,\r\n      consumeSocketConnectionTest\r\n    );\r\n    ko.postbox.subscribe(events.SupportInteraction, consumeSupportInteraction);\r\n    ko.postbox.subscribe(events.QuestionnaireFaq, consumeQuestionnaireFaqEvent);\r\n    ko.postbox.subscribe(events.DepositFaq, consumeDepositFaqEvent);\r\n    ko.postbox.subscribe(\r\n      events.QuestionnairePage,\r\n      consumeQuestionnairePageEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.QuestionnaireQuestion,\r\n      consumeQuestionnaireQuestionEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.QuestionnaireNavigation,\r\n      consumeQuestionnaireNavigationEvent\r\n    );\r\n    ko.postbox.subscribe(events.View, consumeViewChangeEvent);\r\n    ko.postbox.subscribe(events.PresetChanged, consumeViewPresetChangeEvent);\r\n    ko.postbox.subscribe(\r\n      events.FavoriteInstrumentsReorderDrag,\r\n      consumeFavoriteInstrumentDrag\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.FavoriteInstrumentsReorderDrop,\r\n      consumeFavoriteInstrumentDrop\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.FavoriteInstrumentUpdate,\r\n      consumeFavoriteInstrumentUpdate\r\n    );\r\n    ko.postbox.subscribe(events.InstrumentTrade, consumeInstrumentTradeEvent);\r\n    ko.postbox.subscribe(events.NewDealButton, consumeNewDealButtonClickEvent);\r\n    ko.postbox.subscribe(\r\n      events.NewLimitButton,\r\n      consumeNewLimitButtonClickEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.NewLimitDetails,\r\n      consumeNewLimitDetailsChangedEvent\r\n    );\r\n    ko.postbox.subscribe(events.MainTabClick, consumeMainTabClickEvent);\r\n    ko.postbox.subscribe(events.SubTabClick, consumeSubTabClickEvent);\r\n    ko.postbox.subscribe(\r\n      events.DealSlipErrorDetails,\r\n      consumeDealSlipErrorEvent\r\n    );\r\n    ko.postbox.subscribe(events.DealSlipView, consumeDealSlipViewEvent);\r\n    ko.postbox.subscribe(\r\n      events.NewDealAndNewLimitDragged,\r\n      consumeNewDealAndNewLimitDraggedEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DealSlipInteraction,\r\n      consumeDealSlipInteractionEvent\r\n    );\r\n    ko.postbox.subscribe(events.DealSlipSubmit, consumeDealSlipSubmitEvent);\r\n    ko.postbox.subscribe(events.CloseDeal, consumeCloseDealEvent);\r\n    ko.postbox.subscribe(\r\n      events.DealSlipSwitchInstrument,\r\n      consumeDealSlipSwitchInstrumentEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DealSlipSwitchTab,\r\n      consumeDealSlipSwitchTabEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DealSlipExpandLimit,\r\n      consumeDealSlipExpandLimitEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DealSlipCollapseLimit,\r\n      consumeDealSlipCollapseLimitEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DealSlipToggleEvent,\r\n      consumeDealSlipToggleEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DealSlipExpandTools,\r\n      consumeDealSlipExpandToolsEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DealSlipCollapseTools,\r\n      consumeDealSlipCollapseToolsEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.NewLimitErrorDetails,\r\n      consumeNewLimitErrorEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DepositIFrameLoaded,\r\n      consumeDepositIFrameLoadedEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.DepositTypeChanged,\r\n      consumeDepositTypeChangedEvent\r\n    );\r\n    ko.postbox.subscribe(events.UiLoaded, consumeUiLoadedEvent);\r\n    ko.postbox.subscribe(events.DealSlipSuccess, consumeDealSlipSuccessEvent);\r\n    ko.postbox.subscribe(events.DepositSuccess, consumeDepositSuccessEvent);\r\n    ko.postbox.subscribe(\r\n      events.DepositFailedData,\r\n      consumeDepositFailedDataEvent\r\n    );\r\n    ko.postbox.subscribe(events.DepositFailed, consumeDepositFailedEvent);\r\n    ko.postbox.subscribe(events.WithdrawalError, consumeWithdrawalErrorEvent);\r\n    ko.postbox.subscribe(events.DepositAlert, consumeDepositAlertEvent);\r\n    ko.postbox.subscribe(events.NewLimitView, consumeNewLimitViewEvent);\r\n    ko.postbox.subscribe(\r\n      events.LimitSlipInteraction,\r\n      consumeLimitSlipInteractionEvent\r\n    );\r\n    ko.postbox.subscribe(events.NewLimitSubmit, consumeNewLimitSubmitEvent);\r\n    ko.postbox.subscribe(events.NewLimitSuccess, consumeNewLimitSuccessEvent);\r\n\r\n    ko.postbox.subscribe(events.MessageView, consumeMessageViewEvent);\r\n    ko.postbox.subscribe(\r\n      events.SmartBannerViewOfferClicked,\r\n      consumeSmartBannerViewOfferClickedEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.SmartBannerDepositClicked,\r\n      consumeSmartBannerDepositClickedEvent\r\n    );\r\n    ko.postbox.subscribe(events.RewardCtaClicked, consumeRewardCtaClickedEvent);\r\n\r\n    ko.postbox.subscribe(\r\n      events.PresetSelectionSaved,\r\n      consumePresetSelectionSavedEvent\r\n    );\r\n    ko.postbox.subscribe(events.TradingButtonClick, consumeTradingButtonClick);\r\n    ko.postbox.subscribe(events.BackButtonClick, consumeBackButtonClickEvent);\r\n    ko.postbox.subscribe(events.StopLossChanged, consumeStopLossChangedEvent);\r\n    ko.postbox.subscribe(\r\n      events.TakeProfitChanged,\r\n      consumeTakeProfitChangedEvent\r\n    );\r\n\r\n    ko.postbox.subscribe(\r\n      events.InstrumentShowMore,\r\n      consumeInstrumentShowMoreEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.InstrumentShowLess,\r\n      consumeInstrumentShowLessEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.ClickSundayBannerButtonMain,\r\n      consumeClickSundayBannerButtonMainEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.ShowSundayBannerMain,\r\n      consumeShowSundayBannerMainEvent\r\n    );\r\n\r\n    ko.postbox.subscribe(events.SwitchMainView, consumeSwitchMainViewEvent);\r\n\r\n    ko.postbox.subscribe(events.Search, consumeSearchEvent);\r\n    ko.postbox.subscribe(\r\n      events.SearchInteraction,\r\n      consumeSearchInteractionEvent\r\n    );\r\n    ko.postbox.subscribe(events.DealSlipSearch, consumeDealSlipSearchEvent);\r\n    ko.postbox.subscribe(\r\n      events.DealSlipSearchInteraction,\r\n      consumeDealSlipSearchInteractionEvent\r\n    );\r\n    ko.postbox.subscribe(events.ViewSentiments, consumeViewSentiments);\r\n\r\n    ko.postbox.subscribe(\r\n      events.TutorialViewActive,\r\n      consumeTutorialViewActiveEvent\r\n    );\r\n    ko.postbox.subscribe(events.TutorialOpen, consumeTutorialOpenEvent);\r\n    ko.postbox.subscribe(events.TutorialClose, consumeTutorialCloseEvent);\r\n    ko.postbox.subscribe(\r\n      events.TutorialAgreementVew,\r\n      consumeTutorialAgreementCiewEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.TutorialAgreementAgree,\r\n      consumeTutorialAgreementAgreeEvent\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.TutorialAgreementDecline,\r\n      consumeTutorialAgreementDeclineEvent\r\n    );\r\n\r\n    ko.postbox.subscribe(events.SignalsMenuClick, consumeSignalsMenuClick);\r\n    ko.postbox.subscribe(events.SignalsDrillDown, consumeSignalsDrillDown);\r\n    ko.postbox.subscribe(events.SignalsViewMore, consumeSignalsViewMore);\r\n    ko.postbox.subscribe(\r\n      events.SignalsDetailNewDeal,\r\n      consumeSignalsDetailNewDeal\r\n    );\r\n    ko.postbox.subscribe(events.SignalsShortTerm, consumeSignalsShortTerm);\r\n    ko.postbox.subscribe(\r\n      events.EconomicCalendarMenuClick,\r\n      consumeEconomicCalendarClick\r\n    );\r\n    ko.postbox.subscribe(\r\n      events.CashBackInstrumentClick,\r\n      consumeCashBackInstrumentClick\r\n    );\r\n\r\n    ko.postbox.subscribe(\r\n      events.DealSlipChartInteraction,\r\n      consumeDealSlipChartInteractionEvent\r\n    );\r\n    ko.postbox.subscribe(events.ChartInteraction, consumeChartInteractionEvent);\r\n    ko.postbox.subscribe(events.ChartPerformance, consumeChartPerformanceEvent);\r\n\r\n    ko.postbox.subscribe(events.ClosedDealsEvents, consumeClosedDealsEvents);\r\n\r\n    ko.postbox.subscribe(\r\n      events.NotificationsSettingsChange,\r\n      consumeNotificationsSettingsChangeEvent\r\n    );\r\n\r\n    ko.postbox.subscribe(events.ToolsChart, consumeToolsChartEvents);\r\n    ko.postbox.subscribe(\r\n      events.StartCallbackRequestChat,\r\n      consumeStartCallbackRequestChatEvents\r\n    );\r\n\r\n    ko.postbox.subscribe(events.AccountHub_Close, consumeAccountHub_Close);\r\n    ko.postbox.subscribe(events.AccountHub_Open, consumeAccountHub_Open);\r\n    ko.postbox.subscribe(\r\n      events.AccountMap_Collapse,\r\n      consumeAccountMap_Collapse\r\n    );\r\n    ko.postbox.subscribe(events.AccountMap_Expand, consumeAccountMap_Expand);\r\n\r\n    ko.postbox.subscribe(events.ActionSource, consumeActionSource);\r\n    ko.postbox.subscribe(events.AccountState, consumeAccountState);\r\n    ko.postbox.subscribe(\r\n      events.PriceAlertsMenuView,\r\n      consumePriceAlertsMenuView\r\n    );\r\n    ko.postbox.subscribe(events.PriceAlertCreate, consumePriceAlertCreate);\r\n    ko.postbox.subscribe(events.PriceAlertError, consumePriceAlertError);\r\n    ko.postbox.subscribe(\r\n      events.SlipChangeHighLowTerm,\r\n      consumeSlipChangeHighLowTerm\r\n    );\r\n\r\n    ko.postbox.subscribe(events.HelpCenter, consumeHelpCenterEvents);\r\n    ko.postbox.subscribe(\r\n      events.EconomicCalendarTradeCta,\r\n      consumeEconomicCalendarTradeCta\r\n    );\r\n    ko.postbox.subscribe(events.RedirectLink, consumeRedirectLinkEvent);\r\n      subscribeMarketInfoEvents();\r\n\r\n      ko.postbox.subscribe(\r\n          events.DealChartExpandTools,\r\n          consumeDealChartExpandToolsEvent\r\n      );\r\n\r\n      ko.postbox.subscribe(\r\n          events.DealChartCollapseTools,\r\n          consumeDealChartCollapseToolsEvent\r\n      );\r\n  };\r\n\r\n  var subscribeMarketInfoEvents = function () {\r\n    Object.keys(eMarketInfoEvents).forEach(function (eKey) {\r\n      var eName = eMarketInfoEvents[eKey];\r\n\r\n      ko.postbox.subscribe(eName, function () {\r\n        eventsCollector.consumeEvent(eName, setSlipExpandedAreasInfo());\r\n      });\r\n    });\r\n  };\r\n\r\n  var consumeRedirectLinkEvent = function (eventData) {\r\n    eventsCollector.consumeEvent(events.RedirectLink, eventData);\r\n  };\r\n\r\n  var consumeSlipChangeHighLowTerm = function (eventData) {\r\n    eventsCollector.consumeEvent(events.SlipChangeHighLowTerm, eventData);\r\n  };\r\n\r\n  var consumePriceAlertError = function (eventData) {\r\n    eventsCollector.consumeEvent(events.PriceAlertError, eventData);\r\n  };\r\n\r\n  var consumePriceAlertCreate = function () {\r\n    eventsCollector.consumeEvent(events.PriceAlertCreate);\r\n  };\r\n\r\n  var consumePriceAlertsMenuView = function () {\r\n    eventsCollector.consumeEvent(events.PriceAlertsMenuView);\r\n  };\r\n\r\n  var consumeSocketConnectionTest = function () {\r\n    eventsCollector.consumeEvent(events.SocketConnectionTest);\r\n  };\r\n\r\n  var consumeSupportInteraction = function (element) {\r\n    var eventData = { element: element };\r\n    switch (viewModelsManager.VManager.ActiveFormType()) {\r\n      case eForms.ClientQuestionnaire:\r\n      case eForms.Help:\r\n        eventData.category = questionnaireData.category;\r\n        eventData.view = 'questionnaire';\r\n        break;\r\n      case eForms.Deposit:\r\n      case eForms.HelpDeposit:\r\n        eventData.category = 'deposit choice';\r\n        eventData.view = 'deposit';\r\n        break;\r\n      case eForms.ConcretePaymentForm:\r\n      case eForms.HelpConcretePaymentForm:\r\n        eventData.category = 'deposit form';\r\n        eventData.view = 'deposit';\r\n        break;\r\n      case eForms.DepositPending:\r\n      case eForms.DepositSuccess:\r\n      case eForms.HelpDepositThankYou:\r\n        eventData.category = 'deposit confirm';\r\n        eventData.view = 'deposit';\r\n        break;\r\n      case eForms.HelpUploadDocuments:\r\n        eventData.category = 'upload documents';\r\n        eventData.view = 'upload documents';\r\n        break;\r\n      default:\r\n        eventData.category = '';\r\n        eventData.view = viewModelsManager.VManager.ActiveFormName();\r\n    }\r\n\r\n    eventsCollector.consumeEvent(events.SupportInteraction, eventData);\r\n  };\r\n\r\n  var consumeQuestionnaireFaqEvent = function (questionID) {\r\n    eventsCollector.consumeEvent(events.QuestionnaireFaq, {\r\n      category: questionnaireData.category,\r\n      questionID: questionID,\r\n      view: 'questionnaire',\r\n    });\r\n  };\r\n\r\n  var consumeDepositFaqEvent = function (questionID) {\r\n    var eventData = { questionID: questionID };\r\n\r\n    switch (viewModelsManager.VManager.ActiveFormType()) {\r\n      case eForms.Deposit:\r\n      case eForms.HelpDeposit:\r\n        eventData.category = 'deposit choice';\r\n        eventData.view = 'deposit';\r\n        break;\r\n      case eForms.ConcretePaymentForm:\r\n      case eForms.HelpConcretePaymentForm:\r\n        eventData.category = 'deposit form';\r\n        eventData.view = 'deposit';\r\n        break;\r\n      case eForms.DepositPending:\r\n      case eForms.DepositSuccess:\r\n      case eForms.HelpDepositThankYou:\r\n        eventData.category = 'deposit confirm';\r\n        eventData.view = 'deposit';\r\n        break;\r\n      case eForms.HelpUploadDocuments:\r\n        eventData.category = 'upload documents';\r\n        eventData.view = 'upload documents';\r\n        break;\r\n      default:\r\n        eventData.category = '';\r\n        eventData.view = viewModelsManager.VManager.ActiveFormName();\r\n    }\r\n\r\n    eventsCollector.consumeEvent(events.DepositFaq, eventData);\r\n  };\r\n\r\n  var consumeQuestionnairePageEvent = function (eventData) {\r\n    questionnaireData.category = eventData.category;\r\n    if (eventData.questionnaireType === eQuestionnaireType.MIFID) {\r\n      questionnaireData.startTime = 0;\r\n    }\r\n    questionnaireData.questionnaireType = eventData.questionnaireType;\r\n  };\r\n\r\n  var consumeQuestionnaireQuestionEvent = function (questionID) {\r\n    var elapsedTime;\r\n    var timeStamp = new Date().getTime();\r\n    // on first question\r\n    if (questionnaireData.startTime === 0) {\r\n      questionnaireData.startTime = timeStamp;\r\n      elapsedTime = 0;\r\n      var questionnaireStartEventName =\r\n        questionnaireData.questionnaireType === eQuestionnaireType.MIFID\r\n          ? 'questionnaire-quiz-start'\r\n          : 'questionnaire-start';\r\n\r\n      eventsCollector.consumeEvent(questionnaireStartEventName, {\r\n        category: questionnaireData.category,\r\n      });\r\n    } else {\r\n      elapsedTime = (\r\n        (timeStamp - questionnaireData.startTime) /\r\n        1000\r\n      ).toFixed();\r\n    }\r\n\r\n    eventsCollector.consumeEvent(events.QuestionnaireQuestion, {\r\n      category: questionnaireData.category,\r\n      questionID: questionID,\r\n      elapsedTime: elapsedTime,\r\n    });\r\n  };\r\n\r\n  var consumeSearchEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    stateData.fromSearch.Characters = eventData.Characters;\r\n    delete stateData.fromSearch.Instrument;\r\n\r\n    eventsCollector.consumeEvent(events.Search, {\r\n      Characters: eventData.Characters,\r\n    });\r\n  };\r\n\r\n  var consumeSearchInteractionEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    stateData.fromSearch.Instrument = eventData.Instrument;\r\n\r\n    var instrument;\r\n    if (\r\n      (instrument = $instrumentsManager.GetInstrument(eventData.Instrument.id))\r\n    ) {\r\n      stateData.fromSearch.Instrument.ccyPair = instrument.ccyPair;\r\n    }\r\n\r\n    eventsCollector.consumeEvent(events.SearchInteraction, {\r\n      Instrument: stateData.fromSearch.Instrument.ccyPair,\r\n      SearchResult: true,\r\n    });\r\n  };\r\n\r\n  var consumeDealSlipSearchEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    stateData.fromSearch.Characters = eventData.Characters;\r\n    delete stateData.fromSearch.Instrument;\r\n\r\n    eventsCollector.consumeEvent(events.DealSlipSearch, {\r\n      Characters: eventData.Characters,\r\n    });\r\n  };\r\n\r\n  var consumeDealSlipSearchInteractionEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    stateData.fromSearch.Instrument = eventData.Instrument;\r\n\r\n    var instrument;\r\n    if (\r\n      (instrument = $instrumentsManager.GetInstrument(eventData.Instrument.id))\r\n    ) {\r\n      stateData.fromSearch.Instrument.ccyPair = instrument.ccyPair;\r\n    }\r\n\r\n    eventsCollector.consumeEvent(events.DealSlipSearchInteraction, {\r\n      Instrument: stateData.fromSearch.Instrument.ccyPair,\r\n      SearchResult: true,\r\n    });\r\n  };\r\n\r\n  var consumeViewChangeEvent = function (viewId) {\r\n    if (data.viewId === viewId) {\r\n      // report only once per view\r\n      data.actionSource = 'Other';\r\n      return;\r\n    }\r\n\r\n    if (!general.isEmpty(data.refferalDescription)) {\r\n      data.refferalDescription = '';\r\n    }\r\n\r\n    if (!general.isEmpty(data.existingRefferal)) {\r\n      data.refferalDescription = data.existingRefferal;\r\n      data.existingRefferal = '';\r\n    }\r\n\r\n    data.viewId = viewId;\r\n    data.instrumentName = '';\r\n    data.tradingDirection = '';\r\n    data.newDealButton = '';\r\n    tradeFormMode = 'Auto';\r\n    questionnaireData.startTime = 0;\r\n    eventsCollector.consumeEvent('View');\r\n  };\r\n\r\n  var consumeQuestionnaireNavigationEvent = function (eventData) {\r\n    eventsCollector.consumeEvent(events.QuestionnaireNavigation, eventData);\r\n  };\r\n\r\n  var consumeViewPresetChangeEvent = function (presetName) {\r\n    data.presetName = presetName;\r\n    data.instrumentName = '';\r\n    data.tradingDirection = '';\r\n    data.newDealButton = '';\r\n  };\r\n\r\n  var consumeFavoriteInstrumentDrag = function (instrumentId) {\r\n    data.instrumentId = instrumentId;\r\n  };\r\n\r\n  var consumeFavoriteInstrumentDrop = function () {\r\n    eventsCollector.consumeEvent('favorite-instruments-reorder', {\r\n      instrumentId: data.instrumentId,\r\n    });\r\n  };\r\n\r\n  var consumeFavoriteInstrumentUpdate = function (options) {\r\n    if (options.isAddInstrument) {\r\n      eventsCollector.consumeEvent('favorite-instruments-add', {\r\n        instrumentId: options.instrumentId,\r\n      });\r\n    } else if (options.isRemoveInstrument) {\r\n      eventsCollector.consumeEvent('favorite-instruments-remove', {\r\n        instrumentId: options.instrumentId,\r\n      });\r\n    }\r\n  };\r\n\r\n  var consumeInstrumentTradeEvent = function (tradingOptions) {\r\n    data.instrumentName = tradingOptions.instrumentName;\r\n    data.tradingDirection =\r\n      general.isDefinedType(tradingOptions.tradingDirection) == false\r\n        ? ''\r\n        : tradingOptions.tradingDirection;\r\n    tradeFormMode = 'Manual';\r\n  };\r\n\r\n  var consumeNewDealButtonClickEvent = function () {\r\n    data.newDealButton = 'NewDeal';\r\n    data.presetName = '';\r\n    data.instrumentName = '';\r\n    data.tradingDirection = '';\r\n    tradeFormMode = 'Manual';\r\n  };\r\n\r\n  var consumeNewLimitButtonClickEvent = function () {\r\n    tradeFormMode = 'Manual';\r\n  };\r\n\r\n  var consumeMainTabClickEvent = function (additionalData) {\r\n    tabHierarchy = 'main tab';\r\n\r\n    eventsCollector.consumeEvent(\r\n      'switch-tab',\r\n      Object.assign(\r\n        {\r\n          viewId: data.viewId,\r\n          hierarchy: tabHierarchy,\r\n          presetName: data.presetName,\r\n        },\r\n        additionalData || {}\r\n      )\r\n    );\r\n  };\r\n\r\n  var consumeSubTabClickEvent = function () {\r\n    tabHierarchy = 'sub tab';\r\n\r\n    eventsCollector.consumeEvent('switch-tab', {\r\n      viewId: data.viewId,\r\n      hierarchy: tabHierarchy,\r\n      presetName: data.presetName,\r\n    });\r\n  };\r\n\r\n  var consumeNewLimitViewEvent = function (newLimitViewDetails) {\r\n    data.timestamp = new Date().getTime();\r\n\r\n    newLimitViewDetails.displayMode = tradeFormDisplayMode();\r\n    newLimitViewDetails.referrer = getReferrerDescription();\r\n    setAmountVersion(newLimitViewDetails);\r\n    setSlipExpandedAreasInfo(newLimitViewDetails);\r\n\r\n    eventsCollector.consumeEvent('new-limit-view', newLimitViewDetails);\r\n  };\r\n\r\n  var consumeLimitSlipInteractionEvent = function (\r\n    limitSlipInteractionDetails\r\n  ) {\r\n    setDealSlipCommonProperties(limitSlipInteractionDetails);\r\n    limitSlipInteractionDetails.ElapsedTime = getElapsedTime();\r\n    limitSlipInteractionDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n    setAmountVersion(limitSlipInteractionDetails);\r\n    setSlipExpandedAreasInfo(limitSlipInteractionDetails);\r\n\r\n    eventsCollector.consumeEvent(\r\n      'limit-slip-interaction',\r\n      limitSlipInteractionDetails\r\n    );\r\n  };\r\n\r\n  var consumeNewLimitSubmitEvent = function () {\r\n    var newLimitSubmitDetails = {};\r\n    newLimitSubmitDetails.ElapsedTime = getElapsedTime();\r\n    setAmountVersion(newLimitSubmitDetails);\r\n    setSlipExpandedAreasInfo(newLimitSubmitDetails);\r\n\r\n    eventsCollector.consumeEvent('new-limit-submit', newLimitSubmitDetails);\r\n  };\r\n\r\n  var consumeNewLimitDetailsChangedEvent = function (newLimitDetails) {\r\n    data.newLimitDetails.tradingDirection = newLimitDetails.tradingDirection;\r\n    data.newLimitDetails.dealSize = newLimitDetails.dealSize;\r\n    data.newLimitDetails.isAdvancedView = newLimitDetails.isAdvancedView;\r\n    data.newLimitDetails.expirationType = newLimitDetails.expirationType;\r\n  };\r\n\r\n  var consumeUiLoadedEvent = function () {\r\n    var sessionStorage = StorageFactory(StorageFactory.eStorageType.session);\r\n\r\n    if (sessionStorage.getItem('registrationSubmitClicked')) {\r\n      sessionStorage.removeItem('registrationSubmitClicked');\r\n      eventsCollector.consumeEvent('registration-success');\r\n      eventsCollector.consumeEvent('login-success');\r\n    }\r\n\r\n    if (sessionStorage.getItem('loginSubmitClicked')) {\r\n      sessionStorage.removeItem('loginSubmitClicked');\r\n      eventsCollector.consumeEvent(\r\n        'login-success',\r\n        sessionStorage.getItem('isAutologin')\r\n      );\r\n    }\r\n\r\n    if (sessionStorage.getItem('registrationCompleteLoginButtonClicked')) {\r\n      sessionStorage.removeItem('registrationCompleteLoginButtonClicked');\r\n      eventsCollector.consumeEvent('login-success');\r\n    }\r\n\r\n    if (sessionStorage.getItem('forgotPasswordResetSubmitClicked')) {\r\n      sessionStorage.removeItem('forgotPasswordResetSubmitClicked');\r\n      eventsCollector.consumeEvent('forgot-password-success');\r\n      eventsCollector.consumeEvent('login-success');\r\n    }\r\n  };\r\n\r\n  var setExtendedCommonProperties = function (details) {\r\n    details.TabName = data.tools === 'minimized' ? '' : data.tabName;\r\n    details.Limit = data.limit;\r\n    details.Tools = data.tools;\r\n  };\r\n\r\n  function setAmountVersion(details) {\r\n    details.version = 'AmntValue2018';\r\n  }\r\n\r\n  function setSlipExpandedAreasInfo(details) {\r\n    var sectionTitles = [\r\n        'TradingSentiment',\r\n        'MarketInfo',\r\n        'HighLow',\r\n        'InstrumentInfo',\r\n      ],\r\n      cmp = window.hasOwnProperty('CustomerProfileManager')\r\n        ? window.CustomerProfileManager\r\n        : null,\r\n      initConfig = window.hasOwnProperty('configuration/initconfiguration')\r\n        ? window.InitConfiguration\r\n        : null,\r\n      profile = !General.isEmptyValue(cmp) ? cmp.ProfileCustomer() : null,\r\n      initSectionsConfig = !General.isEmptyValue(initConfig)\r\n        ? initConfig.MarketInfoSectionsConfiguration\r\n        : {},\r\n      getStatus = function (expanded) {\r\n        return expanded ? 'maximized' : 'minimized';\r\n      },\r\n      result = [];\r\n\r\n    details = details || {};\r\n\r\n    if (profile) {\r\n      Object.keys(eMarketInfoSectionsProps).forEach(function (prop) {\r\n        if (!General.isEmptyValue(profile[prop])) {\r\n          result.push(\r\n            sectionTitles[eMarketInfoSectionsProps[prop]] +\r\n              ':' +\r\n              getStatus(profile[prop])\r\n          );\r\n        } else {\r\n          result.push(\r\n            sectionTitles[eMarketInfoSectionsProps[prop]] +\r\n              ':' +\r\n              getStatus(initSectionsConfig[prop])\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    details.SlipExpandedInfoAreas = result.join(' ');\r\n    return details;\r\n  }\r\n\r\n  var setDealSlipCommonProperties = function (details) {\r\n    setExtendedCommonProperties(details);\r\n    setAmountVersion(details);\r\n    details.referrer = getReferrerDescription();\r\n  };\r\n\r\n  var consumeDealSlipErrorEvent = function (dealSlipErrorDetails) {\r\n    setDealSlipCommonProperties(dealSlipErrorDetails);\r\n\r\n    dealSlipErrorDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipErrorDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n    setSlipExpandedAreasInfo(dealSlipErrorDetails);\r\n\r\n    eventsCollector.consumeEvent('deal-slip-error', dealSlipErrorDetails);\r\n  };\r\n\r\n  var consumeDealSlipViewEvent = function (dealSlipViewDetails) {\r\n    data.timestamp = new Date().getTime();\r\n    data.tabName = dealSlipViewDetails.tabName;\r\n    data.limit = dealSlipViewDetails.limit;\r\n    data.tools = dealSlipViewDetails.tools;\r\n    data.instrumentName = dealSlipViewDetails.instrument;\r\n    data.tradingDirection =\r\n      dealSlipViewDetails.orderDir == eOrderDir.Buy\r\n        ? 'ask'\r\n        : dealSlipViewDetails.orderDir == eOrderDir.Sell\r\n        ? 'bid'\r\n        : 'none';\r\n    data.newDealButton =\r\n      dealSlipViewDetails.orderDir == eOrderDir.None ? data.newDealButton : '';\r\n    setDealSlipCommonProperties(dealSlipViewDetails);\r\n    dealSlipViewDetails.displayMode = tradeFormMode;\r\n    if (\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      dealSlipViewDetails.id === stateData.fromSearch.Instrument.id\r\n    ) {\r\n      dealSlipViewDetails.SearchResult = true;\r\n    } else {\r\n      dealSlipViewDetails.SearchResult = false;\r\n      delete stateData.fromSearch.Instrument;\r\n    }\r\n\r\n    data.isCashBackInstrumentClick = false;\r\n    setSlipExpandedAreasInfo(dealSlipViewDetails);\r\n\r\n    eventsCollector.consumeEvent('deal-slip-view', dealSlipViewDetails);\r\n  };\r\n\r\n  var consumeNewDealAndNewLimitDraggedEvent = function (\r\n    newDealAndNewLimitDraggedDetails\r\n  ) {\r\n    setDealSlipCommonProperties(newDealAndNewLimitDraggedDetails);\r\n    newDealAndNewLimitDraggedDetails.ElapsedTime = getElapsedTime();\r\n\r\n    eventsCollector.consumeEvent(\r\n      'new-deal-dragged',\r\n      newDealAndNewLimitDraggedDetails\r\n    );\r\n  };\r\n\r\n  var consumeDealSlipInteractionEvent = function (dealSlipInteractionDetails) {\r\n    setDealSlipCommonProperties(dealSlipInteractionDetails);\r\n    dealSlipInteractionDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipInteractionDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n    setSlipExpandedAreasInfo(dealSlipInteractionDetails);\r\n\r\n    eventsCollector.consumeEvent(\r\n      'deal-slip-interaction',\r\n      dealSlipInteractionDetails\r\n    );\r\n  };\r\n\r\n  var consumeDealSlipSubmitEvent = function (dealSlipSubmitDetails) {\r\n    setDealSlipCommonProperties(dealSlipSubmitDetails);\r\n    data.tradingDirection =\r\n      dealSlipSubmitDetails.orderDir == eOrderDir.Buy\r\n        ? 'ask'\r\n        : dealSlipSubmitDetails.orderDir == eOrderDir.Sell\r\n        ? 'bid'\r\n        : 'none';\r\n    data.orderDirName =\r\n      dealSlipSubmitDetails.orderDir == eOrderDir.Buy\r\n        ? 'Buy'\r\n        : dealSlipSubmitDetails.orderDir == eOrderDir.Sell\r\n        ? 'Sell'\r\n        : 'None';\r\n    data.dealSize = dealSlipSubmitDetails.dealSize;\r\n    data.enableSLLimit = dealSlipSubmitDetails.enableSLLimit;\r\n    data.enableTPLimit = dealSlipSubmitDetails.enableTPLimit;\r\n    dealSlipSubmitDetails.stopLossType = data.stopLossType;\r\n    dealSlipSubmitDetails.takeProfitType = data.takeProfitType;\r\n\r\n    dealSlipSubmitDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipSubmitDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n    setSlipExpandedAreasInfo(dealSlipSubmitDetails);\r\n\r\n    eventsCollector.consumeEvent('deal-slip-submit', dealSlipSubmitDetails);\r\n  };\r\n\r\n  var consumeCloseDealEvent = function (closeDealInfo) {\r\n    eventsCollector.consumeEvent('close-deal', closeDealInfo);\r\n  };\r\n\r\n  var consumeDealSlipSwitchInstrumentEvent = function (\r\n    dealSlipSwitchInstrumentDetails\r\n  ) {\r\n    setDealSlipCommonProperties(dealSlipSwitchInstrumentDetails);\r\n\r\n    dealSlipSwitchInstrumentDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipSwitchInstrumentDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      stateData.fromSearch.Instrument.id === dealSlipSwitchInstrumentDetails.id;\r\n\r\n    if (!dealSlipSwitchInstrumentDetails.SearchResult) {\r\n      delete stateData.fromSearch.Instrument;\r\n    }\r\n\r\n    eventsCollector.consumeEvent(\r\n      'deal-slip-switch-instrument',\r\n      dealSlipSwitchInstrumentDetails\r\n    );\r\n  };\r\n\r\n  var consumeDealSlipSwitchTabEvent = function (dealSlipSwitchTabDetails) {\r\n    data.tabName = dealSlipSwitchTabDetails.tabName;\r\n    setDealSlipCommonProperties(dealSlipSwitchTabDetails);\r\n\r\n    dealSlipSwitchTabDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipSwitchTabDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n\r\n    eventsCollector.consumeEvent(\r\n      'deal-slip-switch-tab',\r\n      dealSlipSwitchTabDetails\r\n    );\r\n  };\r\n\r\n  var consumeDealSlipExpandLimitEvent = function (dealSlipExpandLimitDetails) {\r\n    data.limit = dealSlipExpandLimitDetails.limit;\r\n    setDealSlipCommonProperties(dealSlipExpandLimitDetails);\r\n\r\n    dealSlipExpandLimitDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipExpandLimitDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n\r\n    eventsCollector.consumeEvent(\r\n      'deal-slip-expand-limit',\r\n      dealSlipExpandLimitDetails\r\n    );\r\n  };\r\n\r\n  var consumeDealSlipCollapseLimitEvent = function (\r\n    dealSlipCollapseLimitDetails\r\n  ) {\r\n    data.limit = dealSlipCollapseLimitDetails.limit;\r\n    setDealSlipCommonProperties(dealSlipCollapseLimitDetails);\r\n\r\n    dealSlipCollapseLimitDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipCollapseLimitDetails.SearchResult =\r\n      general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n      general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n\r\n    eventsCollector.consumeEvent(\r\n      'deal-slip-collapse-limit',\r\n      dealSlipCollapseLimitDetails\r\n    );\r\n  };\r\n\r\n  var consumeDealSlipToggleEvent = function (dealSlipToggleLimitDetails) {\r\n    data.limit = dealSlipToggleLimitDetails.limit;\r\n  };\r\n\r\n    var consumeDealSlipExpandToolsEvent = function (dealSlipExpandToolsDetails) {\r\n        data.tools = dealSlipExpandToolsDetails.tools;\r\n        setDealSlipCommonProperties(dealSlipExpandToolsDetails);\r\n\r\n        dealSlipExpandToolsDetails.ElapsedTime = getElapsedTime();\r\n        dealSlipExpandToolsDetails.SearchResult =\r\n            general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n            general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n\r\n        eventsCollector.consumeEvent(\r\n            'deal-slip-expand-tools',\r\n            dealSlipExpandToolsDetails\r\n        );\r\n    };\r\n\r\n    var consumeDealSlipCollapseToolsEvent = function (dealSlipCollapseToolsDetails) {\r\n        data.tools = dealSlipCollapseToolsDetails.tools;\r\n        setDealSlipCommonProperties(dealSlipCollapseToolsDetails);\r\n\r\n        dealSlipCollapseToolsDetails.ElapsedTime = getElapsedTime();\r\n        dealSlipCollapseToolsDetails.SearchResult =\r\n            general.isDefinedType(stateData.fromSearch.Instrument) &&\r\n            general.isDefinedType(stateData.fromSearch.Instrument.id);\r\n\r\n        eventsCollector.consumeEvent(\r\n            'deal-slip-collapse-tools',\r\n            dealSlipCollapseToolsDetails\r\n        );\r\n    };\r\n\r\n    var consumeDealChartExpandToolsEvent = function () {\r\n        eventsCollector.consumeEvent( 'deal-chart-expand-trade-ticket');\r\n    };\r\n\r\n    var consumeDealChartCollapseToolsEvent = function () {\r\n        eventsCollector.consumeEvent('deal-chart-collapse-trade-ticket');\r\n    };\r\n\r\n  var consumeNewLimitErrorEvent = function (newLimitErrorDetails) {\r\n    newLimitErrorDetails.ElapsedTime = getElapsedTime();\r\n    setAmountVersion(newLimitErrorDetails);\r\n    setSlipExpandedAreasInfo(newLimitErrorDetails);\r\n\r\n    eventsCollector.consumeEvent('new-limit-error', newLimitErrorDetails);\r\n  };\r\n\r\n  var consumeDepositAlertEvent = function (depositAlertArguments) {\r\n    var text = depositAlertArguments[0],\r\n      redirectUrl = depositAlertArguments[1];\r\n\r\n    if (typeof redirectUrl === 'string' && redirectUrl !== '') {\r\n      consumeDepositSuccessEvent();\r\n      return;\r\n    }\r\n\r\n    eventsCollector.consumeEvent('deposit-error', {\r\n      type: 'server',\r\n      errorMessage: text,\r\n    });\r\n  };\r\n\r\n  var consumeDepositIFrameLoadedEvent = function (iframeDetails) {\r\n    var $depositIframe = $('iframe[id=' + iframeDetails.iframeid + ']');\r\n\r\n    $depositIframe.contents().click(function () {\r\n      eventsCollector.consumeEvent('deposit-interaction');\r\n    });\r\n\r\n    var depositButtonSearchResult = $depositIframe\r\n      .contents()\r\n      .find('[data-deposit-button]');\r\n    if (depositButtonSearchResult.length == 1) {\r\n      $(depositButtonSearchResult[0]).click(function () {\r\n        eventsCollector.consumeEvent('deposit-submit');\r\n      });\r\n    }\r\n  };\r\n\r\n  var consumeDepositTypeChangedEvent = function (depositDetails) {\r\n    data.depositType = depositDetails.depositType;\r\n  };\r\n\r\n  var consumeDealSlipSuccessEvent = function (dealSlipSuccessDetails) {\r\n    setDealSlipCommonProperties(dealSlipSuccessDetails);\r\n    dealSlipSuccessDetails.ElapsedTime = getElapsedTime();\r\n    dealSlipSuccessDetails.displayMode = tradeFormMode;\r\n    dealSlipSuccessDetails.type = data.orderDirName;\r\n    dealSlipSuccessDetails.dealSize = data.dealSize;\r\n    dealSlipSuccessDetails.stopLossType = data.stopLossType;\r\n    dealSlipSuccessDetails.takeProfitType = data.takeProfitType;\r\n    dealSlipSuccessDetails.enableSLLimit = data.enableSLLimit;\r\n    dealSlipSuccessDetails.enableTPLimit = data.enableTPLimit;\r\n    setSlipExpandedAreasInfo(dealSlipSuccessDetails);\r\n    trackingData.incrementDealsNumber();\r\n    eventsCollector.consumeEvent('deal-slip-success', dealSlipSuccessDetails);\r\n  };\r\n\r\n  var consumeNewLimitSuccessEvent = function (newLimitSuccessDetails) {\r\n    newLimitSuccessDetails.ElapsedTime = getElapsedTime();\r\n    newLimitSuccessDetails.type = data.newLimitDetails.tradingDirection;\r\n    newLimitSuccessDetails.dealSize = data.newLimitDetails.dealSize;\r\n    newLimitSuccessDetails.advancedView = data.newLimitDetails.isAdvancedView;\r\n    newLimitSuccessDetails.expirationType = data.newLimitDetails.expirationType;\r\n    newLimitSuccessDetails.stopLossType = data.stopLossType;\r\n    newLimitSuccessDetails.takeProfitType = data.takeProfitType;\r\n    setAmountVersion(newLimitSuccessDetails);\r\n    setSlipExpandedAreasInfo(newLimitSuccessDetails);\r\n\r\n    trackingData.incrementDealsNumber();\r\n    eventsCollector.consumeEvent('new-limit-success', newLimitSuccessDetails);\r\n  };\r\n\r\n  var consumeDepositSuccessEvent = function () {\r\n    eventsCollector.consumeEvent('deposit-success');\r\n\r\n    window.trackingData.incrementDepositsNumber();\r\n  };\r\n\r\n  var consumeDepositFailedDataEvent = function (event) {\r\n    var options = { type: 'server' };\r\n\r\n    if (event) {\r\n      options.errorMessage = event.message;\r\n      options.errorMessageKey = event.key;\r\n    }\r\n\r\n    eventsCollector.consumeEvent('deposit-error', options);\r\n  };\r\n\r\n  var consumeDepositFailedEvent = function (event) {\r\n    var options = { type: 'server' };\r\n    options.errorMessage = event;\r\n\r\n    eventsCollector.consumeEvent('deposit-error', options);\r\n  };\r\n\r\n  var consumeWithdrawalErrorEvent = function (reason) {\r\n    eventsCollector.consumeEvent('withdrawal-error', { reason: reason });\r\n  };\r\n\r\n  var consumeMessageViewEvent = function (messageDetails) {\r\n    eventsCollector.consumeEvent('message-view', {\r\n      text: extractTextFromHtml(messageDetails.text),\r\n      type: messageDetails.type,\r\n    });\r\n  };\r\n\r\n  var consumeSmartBannerViewOfferClickedEvent = function (messageDetails) {\r\n    eventsCollector.consumeEvent('sb-view-offer-clicked', {\r\n      text: messageDetails.text,\r\n      type: messageDetails.type,\r\n    });\r\n  };\r\n\r\n  var consumeSmartBannerDepositClickedEvent = function (messageDetails) {\r\n    eventsCollector.consumeEvent('sb-deposit-clicked', {\r\n      text: messageDetails.text,\r\n    });\r\n  };\r\n\r\n  var consumeRewardCtaClickedEvent = function (messageDetails) {\r\n    eventsCollector.consumeEvent('reward-cta-clicked', {});\r\n  };\r\n\r\n  var extractTextFromHtml = function (text) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = text;\r\n    return div.textContent || div.innerText || '';\r\n  };\r\n\r\n  var consumePresetSelectionSavedEvent = function (selectedPresetName) {\r\n    eventsCollector.consumeEvent('switch-tab', {\r\n      viewId: data.viewId,\r\n      presetName: selectedPresetName,\r\n    });\r\n  };\r\n\r\n  var consumeTradingButtonClick = function (currentPresetName) {\r\n    data.presetName = currentPresetName;\r\n  };\r\n\r\n  var consumeBackButtonClickEvent = function (currentView) {};\r\n\r\n  var consumeStopLossChangedEvent = function (type) {\r\n    data.stopLossType = type;\r\n  };\r\n\r\n  var consumeTakeProfitChangedEvent = function (type) {\r\n    data.takeProfitType = type;\r\n  };\r\n\r\n  var consumeInstrumentShowMoreEvent = function () {\r\n    eventsCollector.consumeEvent('instrument-show-more', {\r\n      TabName: data.presetName,\r\n      tabHierarchy: 'sub tab',\r\n    });\r\n  };\r\n\r\n  var consumeInstrumentShowLessEvent = function () {\r\n    eventsCollector.consumeEvent('instrument-show-less', {\r\n      TabName: data.presetName,\r\n      tabHierarchy: 'sub tab',\r\n    });\r\n  };\r\n\r\n  var consumeViewSentiments = function (eventData) {\r\n    eventsCollector.consumeEvent(events.ViewSentiments, eventData);\r\n  };\r\n\r\n  var consumeClickSundayBannerButtonMainEvent = function (elementId) {\r\n    eventsCollector.consumeEvent('click-sunday-banner-button-main', {\r\n      Element: elementId,\r\n    });\r\n  };\r\n\r\n  var consumeShowSundayBannerMainEvent = function (elementId) {\r\n    eventsCollector.consumeEvent('show-sunday-banner-main', {\r\n      Element: elementId,\r\n    });\r\n  };\r\n\r\n  var consumeSwitchMainViewEvent = function (options) {\r\n    eventsCollector.consumeEvent('switch-main-view', options);\r\n  };\r\n\r\n  var consumeTutorialViewActiveEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(\r\n      'tutorial-events',\r\n      Object.assign({ event: 'view-tutorials-page' }, eventData)\r\n    );\r\n  };\r\n\r\n  var consumeTutorialOpenEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(\r\n      'tutorial-events',\r\n      Object.assign({ event: 'tutorial-open' }, eventData)\r\n    );\r\n  };\r\n\r\n  var consumeTutorialCloseEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(\r\n      'tutorial-events',\r\n      Object.assign({ event: 'tutorial-close' }, eventData)\r\n    );\r\n  };\r\n\r\n  var consumeTutorialAgreementCiewEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(\r\n      'tutorial-events',\r\n      Object.assign({ event: 'agreement-view' }, eventData)\r\n    );\r\n  };\r\n\r\n  var consumeTutorialAgreementAgreeEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(\r\n      'tutorial-events',\r\n      Object.assign({ event: 'agreement-agree' }, eventData)\r\n    );\r\n  };\r\n\r\n  var consumeTutorialAgreementDeclineEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(\r\n      'tutorial-events',\r\n      Object.assign({ event: 'agreement-decline' }, eventData)\r\n    );\r\n  };\r\n\r\n  var consumeSignalsMenuClick = function () {\r\n    eventsCollector.consumeEvent('signals-menu-click');\r\n  };\r\n\r\n  var consumeSignalsDrillDown = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent('signals-drill-down', eventData);\r\n  };\r\n\r\n  var consumeSignalsViewMore = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent('signals-view-more', eventData);\r\n  };\r\n\r\n  var consumeSignalsDetailNewDeal = function (data) {\r\n    var signalData = (data || {}).signalData || {};\r\n    signalData.instrument = signalData.instrument || {};\r\n\r\n    var eventData = {\r\n      signalId: signalData.signalId,\r\n      symbol: signalData.symbol,\r\n      instrumentId: signalData.instrument.id,\r\n    };\r\n\r\n    eventsCollector.consumeEvent('signals-detail-new-deal', eventData);\r\n  };\r\n\r\n  var consumeSignalsShortTerm = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent('short-term-signal-chart', eventData);\r\n  };\r\n\r\n  var consumeEconomicCalendarClick = function () {\r\n    eventsCollector.consumeEvent('economic-calendar-menu-click');\r\n  };\r\n\r\n  var consumeCashBackInstrumentClick = function () {\r\n    data.isCashBackInstrumentClick = true;\r\n  };\r\n\r\n  var consumeDealSlipChartInteractionEvent = function (\r\n    dealSlipChartInteractionDetails\r\n  ) {\r\n    setExtendedCommonProperties(dealSlipChartInteractionDetails);\r\n    dealSlipChartInteractionDetails.ElapsedTime = getElapsedTime();\r\n\r\n    eventsCollector.consumeEvent(\r\n      'deal-slip-chart-interaction',\r\n      dealSlipChartInteractionDetails\r\n    );\r\n  };\r\n\r\n  var consumeChartInteractionEvent = function (chartInteractionDetails) {\r\n    setExtendedCommonProperties(chartInteractionDetails);\r\n\r\n    eventsCollector.consumeEvent('chart-interaction', chartInteractionDetails);\r\n  };\r\n\r\n  var consumeChartPerformanceEvent = function (\r\n    consumeChartPerformanceEventDetails\r\n  ) {\r\n    eventsCollector.consumeEvent(\r\n      'chart-performance',\r\n      consumeChartPerformanceEventDetails\r\n    );\r\n  };\r\n\r\n  var consumeClosedDealsEvents = function (detailsData) {\r\n    eventsCollector.consumeEvent(events.ClosedDealsEvents, detailsData);\r\n  };\r\n\r\n  var consumeNotificationsSettingsChangeEvent = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(events.NotificationsSettingsChange, eventData);\r\n  };\r\n\r\n  var consumeToolsChartEvents = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(events.ToolsChart, eventData);\r\n  };\r\n\r\n  var consumeStartCallbackRequestChatEvents = function (eventData) {\r\n    eventData = eventData || {};\r\n\r\n    eventsCollector.consumeEvent(events.StartCallbackRequestChat, eventData);\r\n  };\r\n\r\n  var consumeAccountHub_Close = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(events.AccountHub_Close, eventData);\r\n  };\r\n\r\n  var consumeAccountHub_Open = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(events.AccountHub_Open, eventData);\r\n  };\r\n\r\n  var consumeAccountMap_Collapse = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(events.AccountMap_Collapse, eventData);\r\n  };\r\n\r\n  var consumeAccountMap_Expand = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(events.AccountMap_Expand, eventData);\r\n  };\r\n\r\n  var consumeActionSource = function (eventData) {\r\n    data.actionSource = eventData;\r\n  };\r\n\r\n  var consumeAccountState = function (eventData) {\r\n    trackingData.updateAccountStatus(eventData);\r\n  };\r\n\r\n  var consumeHelpCenterEvents = function (eventData) {\r\n    eventData = eventData || {};\r\n    eventsCollector.consumeEvent(events.HelpCenter, eventData);\r\n  };\r\n\r\n  var consumeEconomicCalendarTradeCta = function (eventData) {\r\n    data.existingRefferal =\r\n      eventData.View +\r\n      '+' +\r\n      eventData.Tab +\r\n      '+' +\r\n      eventData.EventCountry +\r\n      '+' +\r\n      eventData.EventId +\r\n      '+' +\r\n      eventData.InstrumentName +\r\n      '+' +\r\n      eventData.CalendarEventDate;\r\n    eventsCollector.consumeEvent(events.EconomicCalendarTradeCta, eventData);\r\n  };\r\n  //var consumeHelpCenterOpenEvents = function (eventData) {\r\n  //    eventData = eventData || {};\r\n  //    eventsCollector.consumeEvent(events.HelpCenterOpen, eventData);\r\n  //};\r\n  //var consumeHelpCenterTabSwitchEvents = function (eventData) {\r\n  //    eventData = eventData || {};\r\n  //    eventsCollector.consumeEvent(events.HelpCenterTabSwitch, eventData);\r\n  //};\r\n  //var consumeHelpCenterInteractionEvents = function (eventData) {\r\n  //    eventData = eventData || {};\r\n  //    eventsCollector.consumeEvent(events.HelpCenterInteraction, eventData);\r\n  //};\r\n  //var consumeHelpCenterCloseEvents = function (eventData) {\r\n  //    eventData = eventData || {};\r\n  //    eventsCollector.consumeEvent(events.HelpCenterClose, eventData);\r\n  //};\r\n\r\n  var getReferrerDescription = function () {\r\n    var description = data.viewId;\r\n\r\n    if (!general.isEmpty(data.refferalDescription)) {\r\n      return data.refferalDescription;\r\n    }\r\n\r\n    if (data.viewId === '1') {\r\n      description += '+main';\r\n    }\r\n\r\n    if (data.isCashBackInstrumentClick) {\r\n      return description + '+CashBack';\r\n    }\r\n\r\n    if (data.newDealButton != String.empty) {\r\n      return description + '+' + data.newDealButton;\r\n    }\r\n\r\n    if (data.presetName != String.empty) {\r\n      description = description + '+' + data.presetName;\r\n    }\r\n\r\n    if (data.instrumentName != String.empty) {\r\n      description = description + '+' + data.instrumentName;\r\n    }\r\n\r\n    if (data.tradingDirection != String.empty) {\r\n      description = description + '+' + data.tradingDirection;\r\n    }\r\n\r\n    return description;\r\n  };\r\n\r\n  var tradeFormDisplayMode = function () {\r\n    return tradeFormMode;\r\n  };\r\n\r\n  var getRefferingView = function () {\r\n    return refferingView;\r\n  };\r\n\r\n  var updateRefferingView = function (viewId) {\r\n    refferingView = viewId;\r\n  };\r\n\r\n  function getElapsedTime() {\r\n    return ((new Date().getTime() - data.timestamp) / 1000).toFixed();\r\n  }\r\n\r\n  return {\r\n    init: init,\r\n    data: data,\r\n    getReferrerDescription: getReferrerDescription,\r\n    tradeFormDisplayMode: tradeFormDisplayMode,\r\n    getRefferingView: getRefferingView,\r\n    updateRefferingView: updateRefferingView,\r\n  };\r\n};\r\n\ndefine(\"trackingIntExt/TradingEventsHandler\", [\"knockout\",\"trackingIntExt/TrackingData\",\"devicemanagers/ViewModelsManager\",\"handlers/general\",\"tracking/EventsCollector\"], (function (global) {\n    return function () {\n        var ret, fn;\n       fn = function (ko, td, vm, ge, ec) {\r\n\t\t\t\treturn this.TradingEventsHandler(ko, td, vm, ge, ec);\r\n\t\t\t};\n        ret = fn.apply(global, arguments);\n        return ret || global.TradingEventsHandler;\n    };\n}(this)));\n\n",
    "/*global Preloader */\r\ndefine('fxnet/fxnet',[\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"vendor/knockout.validation\",\r\n\t\"helpers/KOExtensions\",\r\n\t\"Q\",\r\n\t\"generalmanagers/ActivitySupervisor\",\r\n\t\"configuration/PlugInConfiguration\",\r\n\t\"devicemanagers/StatesManager\",\r\n\t\"devicecustommodules/PostLoginAlertController\",\r\n\t\"initdatamanagers/InitialDataManager\",\r\n\t\"managers/RetentionManager\",\r\n\t\"initdatamanagers/Customer\",\r\n\t\"managers/CustomerProfileManager\",\r\n\t\"tracking/PerformanceDataCollector\",\r\n\t\"devicemanagers/ViewModelsManager\",\r\n\t\"cachemanagers/CacheManager\",\r\n\t\"initdatamanagers/InstrumentsManager\",\r\n\t\"initdatamanagers/DealsAmountsManager\",\r\n\t\"cachemanagers/dealsmanager\",\r\n\t\"handlers/Logger\",\r\n\t\"cachemanagers/NotificationsManager\",\r\n\t\"modules/PresetsManager\",\r\n\t\"generalmanagers/SessionSupervisor\",\r\n\t\"modules/permissionsmodule\",\r\n\t\"StateObject!Csm\",\r\n\t\"configuration/initconfiguration\",\r\n\t\"modules/environmentData\",\r\n\t\"tracking/loggers/fxtracking.lib\",\r\n\t\"trackingIntExt/TrackingData\",\r\n\t\"trackingIntExt/TradingEventsHandler\",\r\n\t\"tracking/EventsCollector\",\r\n\t\"global/storagefactory\",\r\n\t\"fxnet/preloader\",\r\n], function FxNet(require) {\r\n\t//test1022ssss\r\n\tvar ko = require(\"knockout\"),\r\n\t\tQ = require(\"Q\"),\r\n\t\tPerformanceDataCollector = require(\"tracking/PerformanceDataCollector\"),\r\n\t\tActivitySupervisor = require(\"generalmanagers/ActivitySupervisor\"),\r\n\t\tPlugInConfiguration = require(\"configuration/PlugInConfiguration\"),\r\n\t\tStatesManager = require(\"devicemanagers/StatesManager\"),\r\n\t\tPostLoginsAlerts = require(\"devicecustommodules/PostLoginAlertController\"),\r\n\t\tInitialDataManager = require(\"initdatamanagers/InitialDataManager\"),\r\n\t\tCustomer = require(\"initdatamanagers/Customer\"),\r\n\t\tCustomerProfileManager = require(\"managers/CustomerProfileManager\"),\r\n\t\tRetentionManager = require(\"managers/RetentionManager\"),\r\n\t\tViewModelsManager = require(\"devicemanagers/ViewModelsManager\"),\r\n\t\tRegistrationManager = require(\"generalmanagers/RegistrationManager\"),\r\n\t\tCacheManager = require(\"cachemanagers/CacheManager\"),\r\n\t\tInstrumentsManager = require(\"initdatamanagers/InstrumentsManager\"),\r\n\t\tDealsAmountsManager = require(\"initdatamanagers/DealsAmountsManager\"),\r\n\t\tdealsManager = require(\"cachemanagers/dealsmanager\"),\r\n\t\tlogger = require(\"handlers/Logger\"),\r\n\t\tNotificationManager = require(\"cachemanagers/NotificationsManager\"),\r\n\t\tPresetsManager = require(\"modules/PresetsManager\"),\r\n\t\tSessionSupervisor = require(\"generalmanagers/SessionSupervisor\"),\r\n\t\tpermissionsModule = require(\"modules/permissionsmodule\"),\r\n\t\tcsmStateObject = require(\"StateObject!Csm\"),\r\n\t\tgtmConfiguration = require(\"configuration/initconfiguration\").GTMConfiguration,\r\n\t\tenvironmentData = require(\"modules/environmentData\").get(),\r\n\t\tfxTracking = require(\"tracking/loggers/fxtracking.lib\"),\r\n\t\ttrackingData = require(\"trackingIntExt/TrackingData\"),\r\n\t\ttradingEventsHandler = require(\"trackingIntExt/TradingEventsHandler\"),\r\n\t\tStorageFactory = require(\"global/storagefactory\"),\r\n\t\tPreloader = require(\"fxnet/preloader\"),\r\n\t\teventsCollector = require(\"tracking/EventsCollector\");\r\n\r\n\tvar sessionSupervisor = new SessionSupervisor(),\r\n\t\tisLoaded = ko.observable(false),\r\n\t\tisVisible = ko.observable(false),\r\n\t\tisCacheLoaded = ko.observable(false),\r\n\t\tuiRederedDefer = Q.defer(),\r\n\t\tlocalStorage = StorageFactory(StorageFactory.eStorageType.local),\r\n\t\tsessionStorage = StorageFactory(StorageFactory.eStorageType.session),\r\n\t\tloadingFinished = ko.observable(false),\r\n\t\tcsmOutOfDate = ko.observable(false);\r\n\r\n\tcsmStateObject.set(eStateObjectTopics.CsmOutOfDate, false);\r\n\r\n\tfunction init() {\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.Init);\r\n\r\n\t\tInitialDataManager.OnTimestamp.Add(function (event) {\r\n\t\t\tPerformanceDataCollector.registerEventTimestamp(event);\r\n\t\t});\r\n\t\tInitialDataManager.OnInitialScreens.Add(function (screens) {\r\n\t\t\tPresetsManager.SetAvailableScreens(screens);\r\n\t\t});\r\n\r\n\t\tCacheManager.Init();\r\n\t\tStatesManager.Init();\r\n\t\tPostLoginsAlerts.Init();\r\n\r\n\t\tcsmStateObject.subscribe(eStateObjectTopics.CsmOutOfDate, function (value) {\r\n\t\t\tcsmOutOfDate(value);\r\n\t\t});\r\n\r\n\t\tInstrumentsManager.OnUiOrderChanged.Add(RegistrationManager.Update);\r\n\t\tRegistrationManager.OnRegistrationListChanged.Add(CacheManager.Register);\r\n\t\tNotificationManager.OnInstrumentsUpdated.Add(InstrumentsManager.UpdateInstruments);\r\n\t\tNotificationManager.OnMinDealAmountsUpdated.Add(InstrumentsManager.ResetInstrumentsDealAmounts);\r\n\r\n\t\tPresetsManager.OnPresetsUpdated.Add(InstrumentsManager.SetPresetIntruments);\r\n\t\tDealsAmountsManager.Init();\r\n\r\n    dealsManager.OnDealsRemoved.Add(function logRemovedDeals(removedItems) {\r\n        logger.log('FxNet/logRemovedDeals', removedItems);\r\n    });\r\n\r\n\r\n\t\tPlugInConfiguration.AdjustCulture();\r\n\t\t//for now implemented only in mobile\r\n\t\tPlugInConfiguration.RegisterContentTemplateComponents();\r\n\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.Start);\r\n\r\n\t\tvar initialData = InitialDataManager.LoadData().then(function () {\r\n\t\t\t\r\n\t\t\tPlugInConfiguration.RegisterComponents(Customer.prop.abTestings.configuration);\r\n\t\t\tapplyBindings();\r\n\r\n\t\t\tPresetsManager.Start();\r\n\t\t});\r\n\r\n\t\treturn Q.all([waitForHtml(), initialData])\r\n\t\t\t.then(initUiLayer)\r\n\t\t\t.then(loadCache)\r\n\t\t\t.then(exposeUI)\r\n\t\t\t.then(function () {\r\n\t\t\t\treturn uiRederedDefer.promise;\r\n\t\t\t})\r\n\t\t\t.then(function () {\r\n\t\t\t\tko.postbox.publish(\"ui-loaded\");\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction loadCache() {\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.CacheLoadStart);\r\n\r\n\t\treturn CacheManager.LoadData().then(function () {\r\n\t\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.CacheLoadEnd);\r\n\t\t\tisCacheLoaded(true);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction configTRacking() {\r\n\t\ttrackingData.init();\r\n\t\twindow.trackingData = trackingData;\r\n\r\n\t\teventsCollector.init(trackingData);\r\n\r\n\t\ttradingEventsHandler.init();\r\n\r\n\t\twindow.tradingEventsHandler = tradingEventsHandler;\r\n\t}\r\n\r\n\tfunction initUiLayer() {\r\n\t\treturn Q.fcall(function () {\r\n\t\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.UiLayerStart);\r\n\r\n\t\t\tconfigTRacking();\r\n\t\t\t// if not dealer mode\r\n\t\t\tif (permissionsModule.CheckPermissions(\"gtm\")) {\r\n\t\t\t\tvar gtmId = Dictionary.GetItem(gtmConfiguration.gtmContentKey, \"googleTagManagerId\");\r\n\t\t\t\tfxTracking.init(gtmId, Customer.prop.abTestings.configuration, environmentData.biServiceURL);\r\n\t\t\t}\r\n\r\n\t\t\tRetentionManager.UpdateToken()\r\n\t\t\t\t.then(function (token) {\r\n\t\t\t\t\tif (permissionsModule.CheckPermissions(\"apiIM\")) {\r\n\t\t\t\t\t\tRetentionManager.SubscribeToInteractiveMessage(token);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsessionSupervisor.Start();\r\n\t\t\t\t\tPlugInConfiguration.UpdateScmmTrackingData();\r\n\t\t\t\t})\r\n\t\t\t\t.done();\r\n\r\n\t\t\tActivitySupervisor.Start();\r\n\r\n\t\t\tViewModelsManager.Init(CustomerProfileManager.GetUiVersion(), Customer.prop.startUpForm);\r\n\t\t}).then(function () {\r\n\t\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.UiLayerEnd);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction waitForHtml() {\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.WaitHtmlStart);\r\n\r\n\t\tvar defer = Q.defer();\r\n\r\n\t\tdefer.promise.then(function () {\r\n\t\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.WaitHtmlEnd);\r\n\t\t});\r\n\r\n\t\tfunction checkPreloader() {\r\n\t\t\tif (Preloader.DataObjects.htmlReady) {\r\n\t\t\t\tdefer.resolve();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tPreloader.SetHtmlLoadEvent(checkPreloader);\r\n\t\t}\r\n\r\n\t\tcheckPreloader();\r\n\r\n\t\treturn defer.promise;\r\n\t}\r\n\r\n\tfunction applyBindings() {\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.ApplyBindingsStart);\r\n\r\n\t\tPlugInConfiguration.BindKO();\r\n\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.ApplyBindingsEnd);\r\n\t}\r\n\r\n\tfunction exposeUI() {\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.SplashScreenRemoved);\r\n\r\n\t\tisLoaded(true);\r\n\r\n\t\tPlugInConfiguration.AdjustHtml();\r\n\t\tPlugInConfiguration.AddPixel();\r\n\t\tPlugInConfiguration.ExposeUI();\r\n\r\n\t\tisVisible(true);\r\n\t}\r\n\r\n\tfunction uiAfterRender() {\r\n\t\tPerformanceDataCollector.registerEventTimestamp(eFxNetEvents.ExposeUi);\r\n\t\tloadingFinished(true);\r\n\t\tuiRederedDefer.resolve();\r\n\t}\r\n\r\n\tvar module = (window.FxNet = {\r\n\t\tInit: init,\r\n\t\tIsLoaded: isLoaded,\r\n\t\tCsmOutOfDate: csmOutOfDate,\r\n\t\tIsVisible: isVisible,\r\n\t\tIsCacheLoaded: isCacheLoaded,\r\n\t\tUiRenderedPromise: uiRederedDefer.promise,\r\n\t\tUiAfterRender: uiAfterRender,\r\n\t\tViewModelsManager: ViewModelsManager,\r\n\t\texposeUI: exposeUI,\r\n\t\thideUI: function () {},\r\n\t\tLocalStorage: localStorage,\r\n\t\tSessionStorage: sessionStorage,\r\n\t\tLoadingFinished: loadingFinished,\r\n\t});\r\n\r\n\treturn module;\r\n});\r\n\n",
    "define(\r\n    \"currentAppFolder/Configuration/config\",\r\n    {\r\n        componentsToPreload: [\r\n            \"fx-component-main-menu\",\r\n\r\n            \"fx-component-transaction-switcher\",\r\n            \"fx-component-new-deal-slip\",\r\n            \"fx-component-new-limit\",\r\n\r\n            \"fx-component-deal-tools\",\r\n            \"fx-component-chart-tool\",\r\n            \"fx-component-market-info-tool\",\r\n            \"fx-component-instrument-info-tool\",\r\n            \"fx-component-signals-tool\",\r\n\r\n            \"fx-upload-documents-page\",\r\n            \"fx-trading-signals\",\r\n            \"fx-economic-calendar\",\r\n\r\n            \"fx-component-live-cash-back\",\r\n            \"fx-component-open-deals-grid\"\r\n        ]\r\n    }\r\n);\r\n\n",
    "\n",
    "define('fxnet/devices/mobile/configuration/app',[\r\n\t\"require\",\r\n\t\"knockout\",\r\n\t\"Q\",\r\n\t\"fxnet/fxnet\",\r\n\t\"generalmanagers/ErrorManager\",\r\n\t\"modules/KoComponentLoader\",\r\n\t\"currentAppFolder/Configuration/config\",\r\n\t\"LoadDictionaryContent!contentdata\",\r\n], function (require) {\r\n\tvar ko = require(\"knockout\"),\r\n\t\tQ = require(\"Q\"),\r\n\t\tFxNet = require(\"fxnet/fxnet\"),\r\n\t\tErrorManager = require(\"generalmanagers/ErrorManager\"),\r\n\t\tKoComponentLoader = require(\"modules/KoComponentLoader\"),\r\n\t\tconfig = require(\"currentAppFolder/Configuration/config\");\r\n\r\n\tfunction startApp(components) {\r\n\t\twindow.onerror = ErrorManager.onException;\r\n\t\trequirejs.onError = ErrorManager.onRequireError;\r\n\t\twindow.componentsLoaded = ko.observable(false);\r\n\t\tvar isReact = false;\r\n\r\n            if (isReact){\r\n\t\t\trequire([\"fxnet/Store\", \"modules/ReactComponentLoader\"], function (store, ReactComponentLoader) {\r\n\t\t\t\tReactComponentLoader.Register(store);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tKoComponentLoader.Register();\r\n\t\tFxNet.Init()\r\n\t\t\t.then(function () {\r\n\t\t\t\tvar promisesArr = [];\r\n\t\t\t\tfor (var i = 0, length = components.length; i < length; i++) {\r\n\t\t\t\t\tif (KoComponentLoader.Exists(components[i])) {\r\n\t\t\t\t\t\tpromisesArr.push(KoComponentLoader.Preload(components[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn Q.all(promisesArr).then(function () {\r\n\t\t\t\t\twindow.componentsLoaded(true);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.done();\r\n\t}\r\n\r\n\treturn startApp.bind(null, config.componentsToPreload || []);\r\n});\r\n\n",
    "\ndefine(\"preloader-mobile\", function(){});\n",
    "\nrequire([\"fxnet/preloader\"]);\n"
  ]
}