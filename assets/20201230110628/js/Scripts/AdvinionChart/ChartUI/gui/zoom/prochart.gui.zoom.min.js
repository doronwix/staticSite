function ProChart_InitZoom(w){function x(){$(e.parent+" .zoom-buttons").prochart_hoverIntent(function(){$(this).css("opacity","1")},function(){$(this).css("opacity","0.1")})}function q(a,c){var k=e.chart.getDateByIndex(a),b=e.chart.getDateByIndex(c);if(null!=k){if(null==s(".adv-svgchart-zoom .zoom-date-range #date-start")){var d=$(g.parent).find(".adv-svgchart-zoom .zoom-date-range #date-start");try{g.mycache[".adv-svgchart-zoom .zoom-date-range #date-start"]=d}catch(n){}}s(".adv-svgchart-zoom .zoom-date-range #date-start").html(k)}if(null!=
b){if(null==s(".adv-svgchart-zoom .zoom-date-range #date-end")){k=$(g.parent).find(".adv-svgchart-zoom .zoom-date-range #date-end");try{g.mycache[".adv-svgchart-zoom .zoom-date-range #date-end"]=k}catch(f){}}s(".adv-svgchart-zoom .zoom-date-range #date-end").html(b)}}function y(a){x();$(a).find("button").on("click",function(){var a=$(this).attr("tid");"undefined"!=e.actions&&e.actions.action(a);return!1})}function t(a,c,e){var b="",d={width:null,height:null},g=null,f=null;"undefined"!=typeof c&&("undefined"!=
typeof c.width&&(g=c.width),"undefined"!=typeof c.height&&(f=c.height));b="undefined"==typeof a.position?b+"position :absolute;":b+"position :"+a.position+"; ";c="px";"undefined"!=typeof e&&null!=e&&(c=e);"undefined"!=typeof a.display&&(b=b+"display :"+a.display+";");"undefined"!=typeof a.left&&(d.left=a.left,b=b+"left :"+r(a.left,c)+"; ");"undefined"!=typeof a.right&&(d.right=a.right,b=b+"right :"+r(a.right,c)+"; ");"undefined"!=typeof a.top&&(d.top=a.top,b=b+"top :"+r(a.top,c)+"; ");"undefined"!=
typeof a.bottom&&(d.bottom=a.bottom,b=b+"bottom :"+r(a.bottom,c)+"; ");"undefined"!=typeof a.width?null==g||"auto"!=a.width.toString().toLowerCase()&&"inherit"!=a.width.toString().toLowerCase()?(d.width=a.width,b=b+"width :"+r(a.width,c)+";"):(d.width=g-p(a.left)-p(a.right),b=b+"width :"+d.width+c+";"):null!=g&&(d.width=g-p(a.left)-p(a.right),b=b+"width :"+d.width+c+";");"undefined"!=typeof a.height?null==f||"auto"!=a.height.toString().toLowerCase()&&"inherit"!=a.height.toString().toLowerCase()?(d.height=
a.height,b=b+"height :"+r(a.height,c)+"; "):(d.height=f-p(a.top)-p(a.bottom),b=b+"height :"+d.height+c+";"):null!=f&&(d.height=f-p(a.top)-p(a.bottom),b=b+"height :"+d.height+c+";");"undefined"!=typeof a.view&&!0!=a.view&&(b+="display : none; ");0<b.length&&(b='style="'+b+'"');return{style:b,size:d}}function r(a,c){return"auto"==a.toString().toLowerCase()||"inherit"==a.toString().toLowerCase()?a:a+c}function p(a){if("undefined"!=typeof a)return"auto"==a.toString().toLowerCase()||"inherit"==a.toString().toLowerCase()?
0:parseInt(a)}function s(a){try{return"undefined"!=typeof g.mycache[a]&&null!=g.mycache[a]?g.mycache[a]:null}catch(c){return null}}var g={},e=w,v=e.api.layout.getbuttonStyle();e.api.debug.getLogger("prochart.gui.zoom");e.zoomobj=g;g.size={width:0,pwidth:0,rectRight:null,rectLeft:null,parent_width:0,parent_height:0};g.mycache={};var u=/=""/g;g.gui={viewZoom:function(a){g.parent=a;a=[];for(var c=e.currenlayout.zooms,k=0;k<c.length;k++){var b=c[k],d=e.commonutils.func.returnShortUniqID(),n="",f="",h=
{width:null,height:null},l=$(g.parent).find("#"+b.parent);l&&(h.width=l.innerWidth(),h.height=l.innerHeight());b.guiid=d;"undefined"!=typeof b.location&&(n=n+" loc-"+b.location);f=d;"undefined"!=typeof b.id&&(f=b.id);d=e.patterns.zoom.containter.replace(u,"").replace(/%css%/g,n).replace(/%tid%/g,f).replace(/%id%/g,d);f="";for(n=0;n<b.items.length;n++)switch(f=b.items[n],f.type){case "chart_container":var m=e.commonutils.func.returnShortUniqID();a.push(m);f=t(f.possition,h);f={zoom:e.patterns.zoom.chart_container.replace(u,
"").replace(/%style%/g,f.style).replace(/%id%/g,m)};d=d.replace(/%html%/g,f.zoom+"%html%");break;case "daterange":m=e.commonutils.func.returnShortUniqID(),f=t(f.possition,h),f={zoom:e.patterns.zoom.date_range.replace(u,"").replace(/%style%/g,f.style).replace(/%id%/g,m)},d=d.replace(/%html%/g,f.zoom+"%html%")}d=d.replace(/%html%/g,"");l.append(d);for(b=0;b<a.length;b++)if(h=l.find("#"+a[b]+" > div"),0<h.length){e.chart.ZoomSvgChart=h[0];try{e.chart.SetZoomContainer(h)}catch(p){}}}},viewZoomToolbox:function(){var a=
$(e.init.chartcontainer).find(".chart-price-zoom");if(0<a.length){var c=e.patterns.zoom.toolbox.replace(/%icon-source%/g,v.icon_source).replace(/%icon-prefix%/g,v.icon_prefix);a.html(c);y(a);"undefined"!=typeof e.localizationobj&&e.localizationobj.gui.updateFromDataLang(a)}},adjustSize:function(){for(var a=e.currenlayout.zooms,c=0;c<a.length;c++){var k=a[c],b={width:null,height:null},d=$(g.parent).find("#"+k.parent);if(d){b.width=d.innerWidth();b.height=d.innerHeight();for(var n=0;n<k.items.length;n++){var f=
k.items[n];switch(f.type){case "chart_container":var h=d,f=t(f.possition,b).size,h=h.find(".zoom-chart-container");if(0!=h.length){for(var l="height width top right bottom left".split(" "),m=0;m<l.length;m++)"undefined"!=typeof f[l[m]]&&h.css(l[m],f[l[m]]);e.chart.AdjustZoomSize(f[l[1]],f[l[0]])}break;case "daterange":if(h=d,f=t(f.possition,b).size,h=h.find(".zoom-date-range"),0!=h.length)for(l="height width top right bottom left".split(" "),m=0;m<l.length;m++)"undefined"!=typeof f[l[m]]&&h.css(l[m],
f[l[m]])}}}}},onZoomOut:function(){var a=e.chart.PerformZoomAction("zoomout");null!=a&&q(a[0],a[1])},onZoomIn:function(){var a=e.chart.PerformZoomAction("zoomin");null!=a&&q(a[0],a[1])},onZoomLeft:function(){var a=e.chart.PerformZoomAction("zoomleft");null!=a&&q(a[0],a[1])},onZoomRight:function(){var a=e.chart.PerformZoomAction("zoomright");null!=a&&q(a[0],a[1])},onZoomAll:function(){var a=e.chart.PerformZoomAction("zoomfullrange");null!=a&&q(a[0],a[1])},onZoomRestore:function(){var a=e.chart.PerformZoomAction("restorezoom");
null!=a&&q(a[0],a[1])},onZoomBottomFixed:function(a){var c=$(g.parent).find(".adv-svgchart-zoom");"undefined"!=typeof c&&(a?($(c).addClass("zoom-on-bottom-page"),$(g.parent).addClass("zoom-height-space")):($(c).removeClass("zoom-on-bottom-page"),$(g.parent).removeClass("zoom-height-space")))},onTimeZoneChange:function(){},onZoomChange:function(a,c,k,b,d,n){a=e.chart.getDateByIndex(c);k=e.chart.getDateByIndex(k);null!=a&&$(g.parent).find(".date-start").html(a);null!=k&&$(g.parent).find(".date-end").html(k)},
changeLocalization:function(){}};return g};
