{"version":3,"sources":["webpack:///OneSignalSDK.js","webpack:///webpack/bootstrap b3a12f623ed401c31b4e","webpack:///./src/entry.ts","webpack:///./src/utils.ts","webpack:///./~/loglevel/lib/loglevel.js","webpack:///./src/Event.ts","webpack:///./src/Environment.ts","webpack:///./src/Database.ts","webpack:///./src/helpers/SubscriptionHelper.ts","webpack:///./src/vars.ts","webpack:///./~/bowser/src/bowser.js","webpack:///./~/object-assign/index.js","webpack:///./src/errors/OneSignalError.js","webpack:///./src/helpers/MainHelper.ts","webpack:///./src/helpers/EventHelper.ts","webpack:///./src/IndexedDb.ts","webpack:///./src/LimitStore.ts","webpack:///./src/OneSignalApi.ts","webpack:///./src/bell/Bell.ts","webpack:///./src/helpers/ServiceWorkerHelper.ts","webpack:///./~/heir/heir.js","webpack:///./~/wolfy87-eventemitter/EventEmitter.js","webpack:///./~/atoa/atoa.js","webpack:///./src/bell/ActiveAnimatedElement.ts","webpack:///./src/bell/AnimatedElement.ts","webpack:///./src/errors/InvalidStateError.ts","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/whatwg-fetch/fetch.js","webpack:///./~/js-cookie/src/js.cookie.js","webpack:///./~/style-loader/addStyles.js","webpack:///./~/swivel/swivel.js","webpack:///./~/timers-browserify/main.js","webpack:///./src/Postmam.ts","webpack:///./src/bell/Message.ts","webpack:///./src/errors/AlreadySubscribedError.ts","webpack:///./src/errors/NotSubscribedError.ts","webpack:///./src/errors/PushPermissionNotGrantedError.ts","webpack:///./src/helpers/InitHelper.ts","webpack:///./src/helpers/TestHelper.ts","webpack:///./src/models/PermissionPromptType.ts","webpack:///./~/contra/emitter.js","webpack:///./~/process/browser.js","webpack:///./~/swivel/serialization.js","webpack:///./src/OneSignal.ts","webpack:///./src/bell/Badge.ts","webpack:///./src/bell/Button.ts","webpack:///./src/bell/Dialog.ts","webpack:///./src/bell/Launcher.ts","webpack:///./src/errors/InvalidArgumentError.ts","webpack:///./src/errors/PermissionMessageDismissedError.ts","webpack:///./src/errors/PushNotSupportedError.ts","webpack:///./src/helpers/HttpHelper.ts","webpack:///./src/http-modal/HttpModal.ts","webpack:///./src/models/AppConfig.ts","webpack:///./src/models/AppState.ts","webpack:///./src/models/NotificationPermission.ts","webpack:///./src/models/ServiceWorkerConfig.ts","webpack:///./src/models/ServiceWorkerState.ts","webpack:///./src/models/Subscription.ts","webpack:///./src/popover/Popover.ts","webpack:///./src/service-worker/ServiceWorker.ts","webpack:///./src/utils/ValidatorUtils.ts","webpack:///./~/contra/debounce.js","webpack:///./src/bell/bell.scss","webpack:///./src/http-modal/httpModal.scss","webpack:///./src/popover/popover.scss","webpack:///./~/es6-error/lib/index.js","webpack:///./~/es6-promise/dist/es6-promise.js","webpack:///./src/OneSignal.ts?650b","webpack:///./src/service-worker/ServiceWorker.ts?be2b","webpack:///./src/assets/bell.svg","webpack:///./src/bell/bell.scss?18cf","webpack:///./src/http-modal/httpModal.scss?9d1d","webpack:///./src/popover/popover.scss?a02f","webpack:///./~/swivel/page.js","webpack:///./~/swivel/worker.js","webpack:///./~/ticky/ticky-browser.js","webpack:///(webpack)/buildin/amd-define.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","polyfill","Environment_1","utils_1","log","isBrowser","incrementSdkLoadCount","getSdkLoadCount","warn","debug","OneSignal","predefinedOneSignalPushes","i","length","push","isServiceWorker","isArray","variable","Object","prototype","toString","decodeHtmlEntities","text","decodeTextArea","document","createElement","innerHTML","value","isPushNotificationsSupported","Browser","ios","ipod","iphone","ipad","msedge","msie","firefox","Number","version","mobile","tablet","safari","navigator","appVersion","match","chrome","yandexbrowser","opera","removeDomElement","selector","els","querySelectorAll","parentNode","removeChild","awaitOneSignalInitAndSupported","Promise","resolve","reject","PushNotSupportedError_1","initialized","once","EVENTS","SDK_INITIALIZED","stringify","obj","JSON","key","executeCallback","callback","args","_i","arguments","apply","logMethodCall","methodName","map","join","getConsoleStyle","isValidEmail","email","addDomElement","targetSelectorOrElement","addOrder","elementHtml","querySelector","insertAdjacentHTML","Error","clearDomElementChildren","element","firstChild","addCssClass","cssClass","classList","add","removeCssClass","remove","hasCssClass","contains","getDeviceTypeForBrowser","DEVICE_TYPES","CHROME","FIREFOX","SAFARI","style","delay","durationMs","setTimeout","nothing","executeAndTimeoutPromiseAfter","promise","milliseconds","displayError","timeoutPromise","race","then","info","when","condition","promiseIfTrue","promiseIfFalse","undefined","guid","replace","crypto","window","msCrypto","r","getRandomValues","Uint8Array","Math","random","indexOfAble","indexOf","trimUndefined","object","property","hasOwnProperty","isValidUuid","uuid","test","normalizeSubdomain","subdomain","trim","removeSubstrings","removeSubstrings_1","removeSubstring","toLowerCase","getUrlQueryParam","name","url","location","href","regex","RegExp","results","exec","decodeURIComponent","wipeLocalIndexedDb","all","IndexedDb_1","wipeIndexedDb","Database_1","capitalize","charAt","toUpperCase","slice","unsubscribeFromPush","self","registration","pushManager","getSubscription","subscription","unsubscribe","SubscriptionHelper_1","isUsingSubscriptionWorkaround","iframePostmam","message","POSTMAM_COMMANDS","UNSUBSCRIBE_FROM_PUSH","reply","data","REMOTE_OPERATION_COMPLETE","serviceWorker","controller","ready","wipeServiceWorker","isIframe","unregister","wipeServiceWorkerAndUnsubscribe","wait","substringAfter","string","search","substr","event","task","manualDestroy","error","taskWrapper","e","destroyEventListener","removeEventListener","type","addEventListener","__oneSignalSdkLoadCount","awaitSdkEvent","eventName","predicate","__awaiter","this","__generator","_a","label","sent","prepareEmailForHashing","md5","str","rhex","num","j","hex_chr","str2blks_MD5","nblk","blks","Array","charCodeAt","x","y","lsw","rol","cnt","cmn","q","a","b","s","t","ff","d","gg","hh","ii","calcMD5","olda","oldb","oldc","oldd","sha1","hex","str2blks_SHA1","ft","kt","calcSHA1","w","olde","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","body","verb","n","v","op","f","TypeError","_","ops","pop","trys","throw","return","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","root","definition","realMethod","console","undefinedType","bindMethod","noop","method","bind","Function","enableLoggingWhenConsoleArrives","level","loggerName","replaceLoggingMethods","logMethods","methodFactory","defaultMethodFactory","Logger","defaultLevel","factory","persistLevelIfPossible","levelNum","levelName","localStorage","storageKey","ignore","cookie","encodeURIComponent","getPersistedLevel","storedLevel","levels","currentLevel","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","getLevel","setLevel","persist","setDefaultLevel","enableAll","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","logger","_log","noConflict","SILENT_EVENTS","RETRIGGER_REMOTE_EVENTS","LEGACY_EVENT_MAP","notificationPermissionChange","subscriptionChange","customPromptClick","Event","trigger","remoteTriggerEnv","displayData","env","getEnv","emit","legacyEventName","_triggerLegacy","isPopup","opener","parent","popupPostmam","REMOTE_RETRIGGER_EVENT","eventData","CustomEvent","bubbles","cancelable","detail","dispatchEvent","defineProperty","Environment","get","enumerable","configurable","isEs6DebuggingModule","top","pathname","hostname","endsWith","isDev","POPUP","HOST","IFRAME","CUSTOM_SUBDOMAIN","WorkerLocation","SERVICE_WORKER","isHost","isStaging","isTest","isCustomSubdomain","getLanguage","testLanguage","languageTag","language","languageSubtags","split","TRADITIONAL_CHINESE_LANGUAGE_TAG","traditionalSubtag","_b","_c","SIMPLIFIED_CHINESE_LANGUAGE_TAG","simpleSubtag","substring","supportsServiceWorkers","EventEmitter","heir","Event_1","AppState_1","Subscription_1","AppConfig_1","ServiceWorkerConfig_1","ServiceWorkerState_1","Database","REBUILT","RETRIEVED","SET","REMOVED","_getReturnHelper","table","timestamp","cleanResult","REMOTE_DATABASE_GET","put","keypath","REMOTE_DATABASE_PUT","REMOTE_DATABASE_REMOVE","getAppConfig","config","_d","_e","AppConfig","appId","autoRegister","serviceWorkerConfig","setAppConfig","appConfig","getAppState","state","AppState","defaultNotificationUrl","defaultNotificationTitle","lastKnownPushEnabled","clickedNotifications","setAppState","appState","clickedNotificationUrls","clickedNotificationUrls_1","notificationDetails","keys","getServiceWorkerConfig","ServiceWorkerConfig","scope","workerName","updaterWorkerName","workerFilePath","setServiceWorkerConfig","getServiceWorkerState","ServiceWorkerState","workerVersion","updaterWorkerVersion","backupNotification","setServiceWorkerState","dbOptedOut","dbNotOptedOut","Subscription","deviceId","pushEndpoint","pushToken","optedOut","setSubscription","rebuild","printIds","registrationId","userId","OneSignal Database IDs","App ID","Registration ID","User ID","merge","MainHelper_1","ServiceWorkerHelper_1","EventHelper_1","PushPermissionNotGrantedError_1","TestHelper_1","SubscriptionHelper","shouldResetUserSubscription","dangerouslyResetUserSubscriptions","isFlagPresent","resetToken","isUsingWorkaround","checkAndWipeUserSubscription","isPushNotificationsEnabled","wasPushOriginallyEnabled","sessionStorage","clear","title","__doNotShowWelcomeNotification","registerForPushNotifications","registerForW3CPush","options","registrationIdResult","fromRegisterFor","Notification","permission","getRegistration","serviceWorkerRegistration","sw_path","path","registerServiceWorker","SERVICE_WORKER_PATH","active","previousWorkerUrl","scriptURL","_VERSION","SERVICE_WORKER_UPDATER_PATH","unregistrationSuccessful","installing","enableNotifications","existingServiceWorkerRegistration","establishServiceWorkerChannel","subscribeForPush","beginTemporaryBrowserSession","isLocalhostAllowedAsSecureOrigin","subdomainName","protocol","allowLocalhostAsSecureOrigin","notificationPermissionBeforeRequest","getNotificationPermission","PERMISSION_PROMPT_DISPLAYED","requestNotificationPermissionPromise","subscribe","userVisibleOnly","_sessionInitAlreadyRunning","setItem","getAppId","subscriptionInfo","subscriptionId","endpointOrToken","endpoint","getKey","p256dh","auth","p256dh_base64encoded","btoa","String","fromCharCode","auth_base64encoded","_thisIsThePopup","FINISH_REMOTE_REGISTRATION","progress","close","registerWithOneSignal","manifestParentTagname","tagName","manifestHtml","outerHTML","manifestLocation","manifestLocationOrigin","URL","origin","currentOrigin","triggerNotificationPermissionChanged","markHttpsNativePromptDismissed","_usingNativePermissionHook","DEV_HOST","DEV_FRAME_HOST","DEV_PREFIX","PROD_HOST","STAGING_HOST","STAGING_FRAME_HOST","STAGING_PREFIX","HOST_URL","API_URL","detect","ua","getFirstMatch","getSecondMatch","iosdevice","likeAndroid","android","nexusMobile","nexusTablet","chromeos","silk","sailfish","tizen","webos","windowsphone","windows","mac","linux","edgeVersion","versionIdentifier","xbox","samsungBrowser","coast","ucbrowser","maxthon","epiphany","puffin","sleipnir","kMeleon","chromeBook","vivaldi","seamonkey","firefoxos","phantom","slimer","blackberry","touchpad","bada","qupzilla","chromium","googlebot","blink","webkit","gecko","osVersion","osversion","osMajorVersion","getVersionPrecision","arr","iterator","compareVersions","versions","precision","max","chunks","delta","chunk","reverse","isUnsupportedBrowser","minVersions","strictMode","_bowser","bowser","browser","check","userAgent","browserList","browserItem","_detect","toObject","val","shouldUseNative","assign","test1","getOwnPropertyNames","test2","test3","forEach","letter","propIsEnumerable","propertyIsEnumerable","target","source","from","symbols","to","getOwnPropertySymbols","__extends","__","constructor","create","ExtendableError","OneSignalError","_super","fetch","vars_1","OneSignalApi_1","objectAssign","swivel","Cookie","HttpModal_1","Bell_1","MainHelper","fixWordpressManifestIfMisplaced","manifests","manifest","insertBefore","children","getNotificationTypeFromOptIn","isOptedIn","safariWebId","REMOTE_NOTIFICATION_PERMISSION","pushNotification","BEGIN_BROWSING_SESSION","isUsingHttpPermissionRequest","httpPermissionRequest","enable","isUsingCustomHttpPermissionRequestPostModal","useCustomModal","wasHttpsNativePromptDismissed","markHttpPopoverShown","isHttpPromptAlreadyShown","getItem","isContinuingBrowserSession","deviceType","getUserId","requestUrl","requestData","app_id","device_type","timezone","Date","getTimezoneOffset","device_model","platform","device_os","sdk","notification_types","identifier","web_auth","web_p256","post","response","REGISTERED","checkAndTriggerNotificationPermissionChanged","previousPermission","currentPermission","requestPermission","showNotifyButton","notifyButton","bell","displayPredicate","predicateValue","getPrefixedServiceWorkerNameForEnv","checkAndDoHttpPermissionRequest","_this","showHttpPermissionRequest","_sdkCall","showHttpPermissionRequestPostModal","TEST_INIT_OPTION_DISABLED","getNotificationIcons","_API_URL","json","errors","_channel","off","at","on","context","NOTIFICATION_DISPLAYED","NOTIFICATION_CLICKED","NOTIFICATION_DISMISSED","getNormalizedSubdomain","getPromptOptionsQueryString","promptOptions","promptOptionsStr","hash","getPromptOptionsPostHash","httpPermissionRequestPostModal","legacyParams","exampleNotificationTitleDesktop","exampleNotificationMessageDesktop","exampleNotificationTitleMobile","exampleNotificationMessageMobile","legacyParamKey","legacyParamValue","allowedPromptOptions","encoded_value","triggerCustomPromptClicked","clickResult","CUSTOM_PROMPT_CLICKED","autoCorrectSubdomain","inputSubdomain","normalizedSubdomain","createHiddenDomIFrame","node","display","src","appendChild","createHiddenSubscriptionDomModal","iframeContainer","setAttribute","iframeContainerStyle","getElementsByTagName","iframe","className","width","_windowWidth","height","_windowHeight","getElementById","showSubscriptionDomModal","openWindowViaPost","overrides","form","action","dualScreenLeft","screenLeft","screen","left","dualScreenTop","screenTop","thisWidth","innerWidth","documentElement","clientWidth","thisHeight","innerHeight","clientHeight","childWidth","childHeight","windowRef","open","input","submit","openSubdomainPopup","LimitStore_1","EventHelper","onNotificationPermissionChange","checkAndTriggerSubscriptionChanged","onInternalSubscriptionSet","pushEnabled","didStateChange","triggerSubscriptionChanged","_onSubscriptionChanged","newSubscriptionState","welcome_notification_opts","welcome_notification_disabled","unopenableWelcomeNotificationUrl","sendNotification","en","__isOneSignalWelcomeNotification","WELCOME_NOTIFICATION_SENT","_onDbValueSet","onDatabaseRebuilt","_isNewVisitor","updateIfIdentical","newPermission","isUpdating","NATIVE_PROMPT_PERMISSIONCHANGED","SUBSCRIPTION_CHANGED","fireStoredNotificationClicks","pageClickedNotifications","notification","minutesSinceNotificationClicked","now","Event_ts_1","IndexedDb","getInstance","_instance","request","indexedDB","onsuccess","db","onerror","onupgradeneeded","createObjectStore","keyPath","onversionchange","transaction","objectStore","jsonResult","cursor","openCursor","cursorResult","database","LimitStore","store","LIMIT","shift","getFirst","getLast","isEmpty","values","OneSignalApi","headers","callHeaders","Headers","append","contents","cache","status","identifyError","getUserIdFromSubscriptionIdentifier","getPlayer","playerId","updatePlayer","playerIds","titles","icon","buttons","params","include_player_ids","isAnyWeb","web_buttons","headings","chrome_web_icon","firefox_icon","Launcher_1","Badge_1","Button_1","Dialog_1","Message_1","logoSvg","Bell","size","position","_f","theme","_g","showLauncherAfter","_h","showBadgeAfter","_j","tip.state.unsubscribed","tip.state.subscribed","tip.state.blocked","message.prenotify","message.action.subscribing","message.action.subscribed","message.action.resubscribed","message.action.unsubscribed","dialog.main.title","dialog.main.button.subscribe","dialog.main.button.unsubscribe","dialog.blocked.title","dialog.blocked.message","_k","prenotify","_l","showCredit","_m","colors","_o","offset","substituteText","STATES","UNINITIALIZED","_ignoreSubscriptionState","SUBSCRIBE_CLICK","dialog","subscribeButton","disabled","hide","TYPES","MESSAGE","TIMEOUT","launcher","clearIfWasInactive","inactivate","updateState","UNSUBSCRIBE_CLICK","unsubscribeButton","activate","HOVERING","hovering","activateIfInactive","shown","contentType","queued","dequeue","msg","content","QUEUED","getTipForState","TIP","show","HOVERED","hidden","waitUntilShown","wasInactive","isSubscribed","badge","notificationIcons","icons","setState","SUBSCRIBED","BLOCKED","UNSUBSCRIBED","STATE_CHANGED","LAUNCHER_CLICK","BELL_CLICK","prompt.native.grant","default","browserName","tKey","TEXT_SUBS","tValue","zValue","showDialogProcedure","inactivateIfWasInactive","container","button","isPushEnabled","notOptedOut","doNotPrompt","resizeTo","resize","applyOffsetIfSpecified","setCustomColorsIfSpecified","patchSafariSvgFilterBug","isNotOptedOut","enqueue","bellShadow","badgeShadow","dialogShadow","graphic","cssText","bottom","right","dialogButton","pulseRing","foregroundElements","foregroundElements_1","addCssToHead","css","styleDom","createTextNode","head","isEnabled","newState","silent","lastState","_launcher","_button","_badge","_message","_dialog","ServiceWorkerHelper","applyServiceWorkerEnvPrefixes","closeNotifications","updateServiceWorker","updateCheckAlreadyRan","register","SERVICE_WORKER_PARAM","full_sw_and_path","registerError","err","isServiceWorkerActive","isServiceWorkerRegistrationActive","isServiceWorkerActive_1","getRegistrations","serviceWorkerRegistrations","serviceWorkerRegistrations_1","inherit","destination","addSuper","createObject","Host","mixin","hasOwn","indexOfListener","listeners","listener","alias","isValidListener","proto","originalGlobalValue","getListeners","evt","events","_getEvents","flattenListeners","flatListeners","getListenersAsObject","addListener","listenerIsWrapped","addOnceListener","defineEvent","defineEvents","evts","removeListener","index","splice","addListeners","manipulateListeners","removeListeners","single","multiple","removeEvent","_events","removeAllListeners","emitEvent","listenersMap","_getOnceReturnValue","setOnceReturnValue","_onceReturnValue","AnimatedElement_1","ActiveAnimatedElement","showClass","hideClass","activeClass","inactiveClass","activeState","targetTransitionEvents","nestedContentSelector","inactive","ACTIVATING","ACTIVE","timerId","transitionCheckTimeout","destroyListenerFn","propertyName","clearTimeout","INACTIVATING","INACTIVE","waitUntilActive","waitUntilInactive","AnimatedElement","SHOWING","SHOWN","HIDING","HIDDEN","waitUntilHidden","set","OneSignalError_1","PermissionPromptType_1","InvalidStateReason","InvalidStateError","reason","extra","MissingAppId","RedundantPermissionMessage","extraInfo","permissionPromptType","PermissionPromptType","PushPermissionAlreadyGranted","UnsupportedEnvironment","list","item","mediaQuery","alreadyImportedModules","global","normalizeName","normalizeValue","iteratorFor","items","support","iterable","Symbol","consumed","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","readBlobAsText","readAsText","Body","_initBody","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","formData","FormData","_bodyFormData","searchParams","URLSearchParams","arrayBuffer","ArrayBuffer","decode","parse","normalizeMethod","upcased","methods","Request","credentials","mode","referrer","bytes","xhr","getAllResponseHeaders","header","Response","bodyInit","ok","statusText","getAll","has","entries","clone","redirectStatuses","redirect","RangeError","init","responseURL","getResponseHeader","XMLHttpRequest","responseText","ontimeout","withCredentials","responseType","setRequestHeader","send","registeredInModuleLoader","OldCookies","Cookies","api","extend","attributes","converter","defaults","expires","setMilliseconds","getMilliseconds","write","escape","toUTCString","domain","secure","cookies","rdecode","parts","read","getJSON","withConverter","addStylesToDom","styles","domStyle","stylesInDom","refs","addStyle","listToStyles","newStyles","media","sourceMap","part","insertStyleElement","styleElement","getHeadElement","lastStyleElementInsertedAtTop","styleElementsInsertedAtTop","insertAt","nextSibling","removeStyleElement","idx","createStyleElement","createLinkElement","linkElement","rel","update","singleton","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","createObjectURL","revokeObjectURL","updateLink","applyToTag","newObj","styleSheet","replaceText","cssNode","childNodes","unescape","oldSrc","memoize","fn","memo","isOldIE","newList","mayRemove","textStore","replacement","filter","Boolean","complain","page","worker","broadcast","setImmediate","clearImmediate","Timeout","clearFn","_id","_clearFn","nextTick","immediateIds","nextImmediateId","setInterval","clearInterval","timeout","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","Postmam","windowReference","sendToOrigin","receiveFromOrigin","postMessage","channel","MessageChannel","messagePort","isListening","isConnected","replies","listen","trace","onWindowMessagePostmanConnectReceived","startPostMessageReceive","onWindowPostMessageReceived","stopPostMessageReceive","destroy","isSafeOrigin","messageId","messageCommand","command","messageData","messageSource","CONNECTED_MESSAGE","messageBundle","messageBundleWithReply","handshake","HANDSHAKE_MESSAGE","ports","onMessageReceived","start","connect","port1","port2","originalMessageBundle","onReply","isReply","generateSafeOrigins","otherAllowedOrigins","host","ex","messageOrigin","Message","duration","notify","increment","dequeuedMessage","decrement","numMessagesLeft","AlreadySubscribedError","NotSubscribedReason","NotSubscribedError","Unknown","NoDeviceId","OptedOut","PushPermissionNotGrantedError","Postmam_1","InvalidStateError_1","AlreadySubscribedError_1","InitHelper","storeInitialValues","isOptedOut","notificationPermission","onSdkInitialized","installNativePromptPermissionChangedHook","code","enabled","sessionInit","__sdkCall","permissions","query","permissionStatus","onchange","saveInitOptions","opPromises","persistNotification","webhookOptions","webhooks","cors","notificationClickHandlerMatch","serviceWorkerRefetchRequests","internalInit","visibilityState","initSaveState","safari_web_id","pushResponse","deviceToken","modalPrompt","modalUrl","modal","modalPostmam","MODAL_LOADED","MODAL_PROMPT_ACCEPTED","iframeModalDom","MODAL_PROMPT_REJECTED","POPUP_CLOSING","showHttpPrompt","TestHelper","unmarkHttpsNativePromptDismissed","atoa","debounce","thing","opts","_once","et","emitterSnapshot","ctx","async","defaultSetTimout","defaultClearTimeout","runTimeout","fun","cachedSetTimeout","runClearTimeout","marker","cachedClearTimeout","cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","len","run","Item","array","process","argv","binding","cwd","chdir","dir","umask","serializeError","deserializeError","parsePayload","payload","emission","emitter","ValidatorUtils_1","Popover_1","InvalidArgumentError_1","InitHelper_1","HttpHelper_1","NotificationPermission_1","PermissionMessageDismissedError_1","NotSubscribedError_1","NotSubscribedError_2","setDefaultNotificationUrl","ValidatorUtils","isValidUrl","allowNull","InvalidArgumentError","InvalidArgumentReason","Malformed","setDefaultTitle","syncHashedEmail","sanitizedEmail","Empty","em_m","em_s","success","__init","__initAlreadyCalled","iframeUrl","popupUrl","subdomainPromise","loadSubdomainIFrame","_initCalled","readyState","onreadystatechange","__isPopoverShowing","SlidedownPermissionMessage","httpHelper","isShowingHttpPermissionRequest","force","NotificationPermission","Denied","HttpPermissionRequest","popover","CLOSED","ALLOW_CLICK","autoAccept","CANCEL_CLICK","__registerForPushNotifications","loadPopup","_showingHttpPermissionRequest","SHOW_HTTP_PERMISSION_REQUEST","TEST_WOULD_DISPLAY","REMOTE_NOTIFICATION_PERMISSION_CHANGED","forceUpdatePermission","onComplete","getTags","tags","sendTag","tag","sendTags","newDeviceId","deleteTag","deleteTags","tagsToSend","tags_1","deletedTags","deletedTagKeys","isValidArray","addListenerForNotificationOpened","pageUrl","getIdsAvailable","bundle","serviceWorkerActive","Granted","newSubscription","isValidBoolean","optOut","doOptOut","getRegistrationId","subscriptionStatus","sendSelfNotification","allowEmpty","requireHttps","VERSION","_notificationOpenedCallbacks","_idsAvailable_callback","_defaultLaunchURL","_isNotificationEnabledCallback","_subscriptionSet","_sessionIframeAdded","environment","indexedDb","mainHelper","subscriptionHelper","workerHelper","eventHelper","testHelper","_LOGGING","LOGGING","_initHttp","initHttp","_initPopup","initPopup","CONNECTED","POPUP_LOADED","POPUP_ACCEPTED","POPUP_REJECTED","IFRAME_POPUP_INITIALIZE","REQUEST_HOST_URL","IS_SHOWING_HTTP_PERMISSION_REQUEST","WINDOW_TIMEOUT","FINISH_REMOTE_REGISTRATION_IN_PROGRESS","POPUP_BEGIN_MESSAGEPORT_COMMS","POPUP_WINDOW_TIMEOUT","NOTIFICATION_TYPES","logLevel","ActiveAnimatedElement_1","Badge","isNaN","badgeNumber","Button","mouse","onHovering","onTap","onHovered","onEndTap","onClick","pulse","unsubscribed","subscribed","blocked","Dialog","subscribeButtonId","unsubscribeButtonId","getPlatformNotificationIcon","updateBellLauncherDialogBody","subscribeButtonSelectorId","unsubscribeButtonSelectorId","currentSetSubscription","footer","notificationIconHtml","imageUrl","buttonHtml","instructionsHtml","Launcher","argName","argument","PermissionMessageDismissedError","PushNotSupportedError","HttpHelper","shouldWipeData","__POSTDATA","preinitializePromise","_thisIsTheModal","isModal","retrievals","retrievalOpPromises","retrievals_1","retrieval","insertions","insertionOpPromises","insertions_1","insertion","removals","removalOpPromises","removals_1","removal","hostInitOptions","defaultUrl","pageTitle","continuePressed","isShowingHttpPermReq","subdomainLoadPromise","dangerouslyWipeData","contentWindow","defaultUrlResult","defaultTitleResult","defaultTitle","postData","promptType","parentHostname","subdomainPopup","blur","focus","HttpModal","FINISH_CLICK","dialogHtml","onHttpModalFinished","Popover","defaultIcon","allowButton","onPopoverAllowed","cancelButton","onPopoverCanceled","animationName","ServiceWorker","onPushReceived","onNotificationClosed","waitUntil","onNotificationClicked","onServiceWorkerInstalled","onServiceWorkerActivated","onPushSubscriptionChange","refetchRequests","REFETCH_REQUESTS","onFetch","SKIP_REFETCH_REQUESTS","getNotifications","notifications","notifications_1","processQuery","queryType","queries","promiseResolve","queryClient","serviceWorkerClient","promiseReject","parseOrFetchNotifications","displayBackupNotification","notificationEventPromiseFns","notifications_2","rawNotification","buildStructuredNotificationObject","notif","displayNotification","updateBackupNotification","executeWebhooks","reduce","UNSUBSCRIBED_FROM_NOTIFICATIONS","isServerCorsEnabled","webhookTargetUrl","fetchOptions","heading","X-OneSignal-Event","Content-Type","getActiveClients","windowClients","activeClients","windowClients_1","client","clients","matchAll","includeUncontrolled","frameType","isSubdomainIframe","custom","alert","u","o","rawButton","ensureImageResourceHttps","parsedImageUrl","ensureNotificationResourcesHttps","_getTitle","notificationOptions","actions","requireInteraction","renotify","showNotification","isWelcomeNotification","__isOneSignalBackupNotification","shouldOpenNotificationUrl","getNotificationUrlToOpen","launchUrl","dbDefaultNotificationUrl","matchPreference","notificationOpensLink","doNotOpenLink","activeClients_1","clientUrl","lastKnownHostUrl","clientOrigin","launchOrigin","openUrl","player_id","opened","e_1","openWindow","serviceWorkerVersionType","skipWaiting","activationPromise","claim","_subscribeForPush","respondWith","simulateEvent","ExtendableEvent","retrievedAppId","oldSubscription","isValidPushPayload","retrieveNotifications","rawData","recoveredUserId","unsubscriptionResult","OneSignalWorker","parsedUrl","bool","ticky","_classCallCheck","instance","Constructor","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","writable","setPrototypeOf","__proto__","_extendableBuiltin","cls","ExtendableBuiltin","_extendableBuiltin2","getPrototypeOf","captureStackTrace","stack","objectOrFunction","isFunction","setScheduler","scheduleFn","customSchedulerFn","setAsap","asapFn","asap","useNextTick","flush","useVertxTimer","vertxNext","useSetTimeout","useMutationObserver","iterations","observer","BrowserMutationObserver","observe","characterData","useMessageChannel","onmessage","globalSetTimeout","attemptVertx","vertx","runOnLoop","runOnContext","onFulfillment","onRejection","child","PROMISE_ID","makePromise","_state","invokeCallback","_result","_resolve","selfFulfillment","cannotReturnOwn","getThen","GET_THEN_ERROR","tryThen","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","_reject","_label","handleOwnThenable","FULFILLED","REJECTED","handleMaybeThenable","maybeThenable","then$$","publishRejection","_onerror","publish","PENDING","_subscribers","subscribers","settled","ErrorObject","tryCatch","TRY_CATCH_ERROR","hasCallback","succeeded","failed","initializePromise","resolver","nextId","Enumerator","_instanceConstructor","_input","_remaining","_enumerate","validationError","needsResolver","needsNew","local","promiseToString","cast","_isArray","arg","scheduleFlush","browserWindow","browserGlobal","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","_eachEntry","entry","resolve$$","_then","_settledAt","_willSettleAt","enumerator","_setScheduler","_setAsap","_asap","catch","locals","createChannel","selfed","internalEmitter","postToWorker","serialization","messageChannel","postFromWorker","broadcastHandler","__broadcast","postFromPage","replyToPage","broadcastToPages","gotClients","emitToClient","replyTo","replyToClient","clientId","wasClientFound","tick","si"],"mappings":"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","file":"OneSignalSDK.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t__webpack_require__(65).polyfill();\n\tvar Environment_1 = __webpack_require__(4);\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tif (Environment_1.default.isBrowser()) {\n\t    utils_1.incrementSdkLoadCount();\n\t    if (utils_1.getSdkLoadCount() > 1) {\n\t        log.warn(\"OneSignal: The web push SDK is included more than once. For optimal performance, please include our \" +\n\t            \"SDK only once on your page.\");\n\t        log.debug(\"OneSignal: Exiting from SDK initialization to prevent double-initialization errors. \" +\n\t            (\"Occurred \" + utils_1.getSdkLoadCount() + \" times.\"));\n\t    }\n\t    else {\n\t        // We're running in the host page, iFrame of the host page, or popup window\n\t        // Load OneSignal's web SDK\n\t        if (typeof OneSignal !== \"undefined\")\n\t            var predefinedOneSignalPushes = OneSignal;\n\t        __webpack_require__(66);\n\t        if (predefinedOneSignalPushes)\n\t            for (var i = 0; i < predefinedOneSignalPushes.length; i++)\n\t                OneSignal.push(predefinedOneSignalPushes[i]);\n\t    }\n\t}\n\telse if (Environment_1.default.isServiceWorker()) {\n\t    // We're running as the service worker\n\t    __webpack_require__(67);\n\t}\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\t///<reference path=\"models/Action.ts\"/>\n\tvar log = __webpack_require__(2);\n\tvar Browser = __webpack_require__(8);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar IndexedDb_1 = __webpack_require__(13);\n\tvar Database_1 = __webpack_require__(5);\n\tvar PushNotSupportedError_1 = __webpack_require__(48);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tfunction isArray(variable) {\n\t    return Object.prototype.toString.call(variable) === '[object Array]';\n\t}\n\texports.isArray = isArray;\n\tvar decodeTextArea = null;\n\tfunction decodeHtmlEntities(text) {\n\t    if (Environment_1.default.isBrowser()) {\n\t        if (!decodeTextArea) {\n\t            decodeTextArea = document.createElement(\"textarea\");\n\t        }\n\t    }\n\t    if (decodeTextArea) {\n\t        decodeTextArea.innerHTML = text;\n\t        return decodeTextArea.value;\n\t    }\n\t    else {\n\t        // Not running in a browser environment, text cannot be decoded\n\t        return text;\n\t    }\n\t}\n\texports.decodeHtmlEntities = decodeHtmlEntities;\n\tfunction isPushNotificationsSupported() {\n\t    if (Browser.ios || Browser.ipod || Browser.iphone || Browser.ipad)\n\t        return false;\n\t    if (Browser.msedge || Browser.msie)\n\t        return false;\n\t    /* Firefox on Android push notifications not supported until at least 48: https://bugzilla.mozilla.org/show_bug.cgi?id=1206207#c6 */\n\t    if (Browser.firefox && Number(Browser.version) < 48 && (Browser.mobile || Browser.tablet)) {\n\t        return false;\n\t    }\n\t    if (Browser.firefox && Number(Browser.version) >= 44)\n\t        return true;\n\t    if (Browser.safari && Number(Browser.version) >= 7.1)\n\t        return true;\n\t    // Android Chrome WebView\n\t    if (navigator.appVersion.match(/ wv/))\n\t        return false;\n\t    if (Browser.chrome && Number(Browser.version) >= 42)\n\t        return true;\n\t    if (Browser.yandexbrowser && Number(Browser.version) >= 15.12)\n\t        return true;\n\t    // https://www.chromestatus.com/feature/5416033485586432\n\t    if (Browser.opera && Browser.mobile && Number(Browser.version) >= 37)\n\t        return true;\n\t    return false;\n\t}\n\texports.isPushNotificationsSupported = isPushNotificationsSupported;\n\tfunction removeDomElement(selector) {\n\t    var els = document.querySelectorAll(selector);\n\t    if (els.length > 0) {\n\t        for (var i = 0; i < els.length; i++)\n\t            els[i].parentNode.removeChild(els[i]);\n\t    }\n\t}\n\texports.removeDomElement = removeDomElement;\n\t/**\n\t * Helper method for public APIs that waits until OneSignal is initialized, rejects if push notifications are\n\t * not supported, and wraps these tasks in a Promise.\n\t */\n\tfunction awaitOneSignalInitAndSupported() {\n\t    return new Promise(function (resolve, reject) {\n\t        if (!isPushNotificationsSupported()) {\n\t            throw new PushNotSupportedError_1.default();\n\t        }\n\t        if (!OneSignal.initialized) {\n\t            OneSignal.once(OneSignal.EVENTS.SDK_INITIALIZED, resolve);\n\t        }\n\t        else {\n\t            resolve();\n\t        }\n\t    });\n\t}\n\texports.awaitOneSignalInitAndSupported = awaitOneSignalInitAndSupported;\n\t/**\n\t * JSON.stringify() but converts functions to \"[Function]\" so they aren't lost.\n\t * Helps when logging method calls.\n\t */\n\tfunction stringify(obj) {\n\t    return JSON.stringify(obj, function (key, value) {\n\t        if (typeof value === 'function') {\n\t            return \"[Function]\";\n\t        }\n\t        else {\n\t            return value;\n\t        }\n\t    }, 4);\n\t}\n\texports.stringify = stringify;\n\tfunction executeCallback(callback) {\n\t    var args = [];\n\t    for (var _i = 1; _i < arguments.length; _i++) {\n\t        args[_i - 1] = arguments[_i];\n\t    }\n\t    if (callback) {\n\t        return callback.apply(null, args);\n\t    }\n\t}\n\texports.executeCallback = executeCallback;\n\tfunction logMethodCall(methodName) {\n\t    var args = [];\n\t    for (var _i = 1; _i < arguments.length; _i++) {\n\t        args[_i - 1] = arguments[_i];\n\t    }\n\t    return log.debug(\"Called %c\" + methodName + \"(\" + args.map(stringify).join(', ') + \")\", getConsoleStyle('code'), '.');\n\t}\n\texports.logMethodCall = logMethodCall;\n\tfunction isValidEmail(email) {\n\t    return !!email &&\n\t        !!email.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/);\n\t}\n\texports.isValidEmail = isValidEmail;\n\tfunction addDomElement(targetSelectorOrElement, addOrder, elementHtml) {\n\t    if (typeof targetSelectorOrElement === 'string')\n\t        document.querySelector(targetSelectorOrElement).insertAdjacentHTML(addOrder, elementHtml);\n\t    else if (typeof targetSelectorOrElement === 'object')\n\t        targetSelectorOrElement.insertAdjacentHTML(addOrder, elementHtml);\n\t    else\n\t        throw new Error(targetSelectorOrElement + \" must be a CSS selector string or DOM Element object.\");\n\t}\n\texports.addDomElement = addDomElement;\n\tfunction clearDomElementChildren(targetSelectorOrElement) {\n\t    if (typeof targetSelectorOrElement === 'string') {\n\t        var element = document.querySelector(targetSelectorOrElement);\n\t        while (element.firstChild) {\n\t            element.removeChild(element.firstChild);\n\t        }\n\t    }\n\t    else if (typeof targetSelectorOrElement === 'object') {\n\t        while (targetSelectorOrElement.firstChild) {\n\t            targetSelectorOrElement.removeChild(targetSelectorOrElement.firstChild);\n\t        }\n\t    }\n\t    else\n\t        throw new Error(targetSelectorOrElement + \" must be a CSS selector string or DOM Element object.\");\n\t}\n\texports.clearDomElementChildren = clearDomElementChildren;\n\tfunction addCssClass(targetSelectorOrElement, cssClass) {\n\t    if (typeof targetSelectorOrElement === 'string')\n\t        document.querySelector(targetSelectorOrElement).classList.add(cssClass);\n\t    else if (typeof targetSelectorOrElement === 'object')\n\t        targetSelectorOrElement.classList.add(cssClass);\n\t    else\n\t        throw new Error(targetSelectorOrElement + \" must be a CSS selector string or DOM Element object.\");\n\t}\n\texports.addCssClass = addCssClass;\n\tfunction removeCssClass(targetSelectorOrElement, cssClass) {\n\t    if (typeof targetSelectorOrElement === 'string')\n\t        document.querySelector(targetSelectorOrElement).classList.remove(cssClass);\n\t    else if (typeof targetSelectorOrElement === 'object')\n\t        targetSelectorOrElement.classList.remove(cssClass);\n\t    else\n\t        throw new Error(targetSelectorOrElement + \" must be a CSS selector string or DOM Element object.\");\n\t}\n\texports.removeCssClass = removeCssClass;\n\tfunction hasCssClass(targetSelectorOrElement, cssClass) {\n\t    if (typeof targetSelectorOrElement === 'string')\n\t        return document.querySelector(targetSelectorOrElement).classList.contains(cssClass);\n\t    else if (typeof targetSelectorOrElement === 'object')\n\t        return targetSelectorOrElement.classList.contains(cssClass);\n\t    else\n\t        throw new Error(targetSelectorOrElement + \" must be a CSS selector string or DOM Element object.\");\n\t}\n\texports.hasCssClass = hasCssClass;\n\tvar DEVICE_TYPES = {\n\t    CHROME: 5,\n\t    SAFARI: 7,\n\t    FIREFOX: 8,\n\t};\n\tfunction getDeviceTypeForBrowser() {\n\t    if (Browser.chrome || Browser.yandexbrowser || Browser.opera) {\n\t        return DEVICE_TYPES.CHROME;\n\t    }\n\t    else if (Browser.firefox) {\n\t        return DEVICE_TYPES.FIREFOX;\n\t    }\n\t    else if (Browser.safari) {\n\t        return DEVICE_TYPES.SAFARI;\n\t    }\n\t}\n\texports.getDeviceTypeForBrowser = getDeviceTypeForBrowser;\n\tfunction getConsoleStyle(style) {\n\t    if (style == 'code') {\n\t        return \"\\n    padding: 0 1px 1px 5px;\\n    border: 1px solid #ddd;\\n    border-radius: 3px;\\n    font-family: Monaco,\\\"DejaVu Sans Mono\\\",\\\"Courier New\\\",monospace;\\n    color: #444;\\n    \";\n\t    }\n\t    else if (style == 'bold') {\n\t        return \"\\n      font-weight: 600;\\n    color: rgb(51, 51, 51);\\n    \";\n\t    }\n\t    else if (style == 'alert') {\n\t        return \"\\n      font-weight: 600;\\n    color: red;\\n    \";\n\t    }\n\t    else if (style == 'event') {\n\t        return \"\\n    color: green;\\n    \";\n\t    }\n\t    else if (style == 'postmessage') {\n\t        return \"\\n    color: orange;\\n    \";\n\t    }\n\t    else if (style == 'serviceworkermessage') {\n\t        return \"\\n    color: purple;\\n    \";\n\t    }\n\t}\n\texports.getConsoleStyle = getConsoleStyle;\n\t/**\n\t * Returns a promise for the setTimeout() method.\n\t * @param durationMs\n\t * @returns {Promise} Returns a promise that resolves when the timeout is complete.\n\t */\n\tfunction delay(durationMs) {\n\t    return new Promise(function (resolve) {\n\t        setTimeout(resolve, durationMs);\n\t    });\n\t}\n\texports.delay = delay;\n\tfunction nothing() {\n\t    return Promise.resolve();\n\t}\n\texports.nothing = nothing;\n\tfunction executeAndTimeoutPromiseAfter(promise, milliseconds, displayError) {\n\t    var timeoutPromise = new Promise(function (resolve) { return setTimeout(function () { return resolve('promise-timed-out'); }, milliseconds); });\n\t    return Promise.race([promise, timeoutPromise]).then(function (value) {\n\t        if (value === 'promise-timed-out') {\n\t            log.info(displayError || \"Promise \" + promise + \" timed out after \" + milliseconds + \" ms.\");\n\t            return Promise.reject(displayError || \"Promise \" + promise + \" timed out after \" + milliseconds + \" ms.\");\n\t        }\n\t        else\n\t            return value;\n\t    });\n\t}\n\texports.executeAndTimeoutPromiseAfter = executeAndTimeoutPromiseAfter;\n\tfunction when(condition, promiseIfTrue, promiseIfFalse) {\n\t    if (promiseIfTrue === undefined)\n\t        promiseIfTrue = nothing();\n\t    if (promiseIfFalse === undefined)\n\t        promiseIfFalse = nothing();\n\t    return (condition ? promiseIfTrue : promiseIfFalse);\n\t}\n\texports.when = when;\n\tfunction guid() {\n\t    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t        var crypto = window.crypto || window.msCrypto;\n\t        if (crypto) {\n\t            var r = crypto.getRandomValues(new Uint8Array(1))[0] % 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\t            return v.toString(16);\n\t        }\n\t        else {\n\t            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t                var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\t                return v.toString(16);\n\t            });\n\t        }\n\t    });\n\t}\n\texports.guid = guid;\n\t/**\n\t * Returns true if match is in string; otherwise, returns false.\n\t */\n\tfunction contains(indexOfAble, match) {\n\t    if (!indexOfAble)\n\t        return false;\n\t    return indexOfAble.indexOf(match) !== -1;\n\t}\n\texports.contains = contains;\n\t/**\n\t * Returns the current object without keys that have undefined values.\n\t * Regardless of whether the return result is used, the passed-in object is destructively modified.\n\t * Only affects keys that the object directly contains (i.e. not those inherited via the object's prototype).\n\t * @param object\n\t */\n\tfunction trimUndefined(object) {\n\t    for (var property in object) {\n\t        if (object.hasOwnProperty(property)) {\n\t            if (object[property] === undefined) {\n\t                delete object[property];\n\t            }\n\t        }\n\t    }\n\t    return object;\n\t}\n\texports.trimUndefined = trimUndefined;\n\t/**\n\t * Returns true if the UUID is a string of 36 characters;\n\t * @param uuid\n\t * @returns {*|boolean}\n\t */\n\tfunction isValidUuid(uuid) {\n\t    return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(uuid);\n\t}\n\texports.isValidUuid = isValidUuid;\n\t/**\n\t * Returns the correct subdomain if 'https://subdomain.onesignal.com' or something similar is passed.\n\t */\n\tfunction normalizeSubdomain(subdomain) {\n\t    subdomain = subdomain.trim();\n\t    var removeSubstrings = [\n\t        'http://www.',\n\t        'https://www.',\n\t        'http://',\n\t        'https://',\n\t        '.onesignal.com/',\n\t        '.onesignal.com'\n\t    ];\n\t    for (var _i = 0, removeSubstrings_1 = removeSubstrings; _i < removeSubstrings_1.length; _i++) {\n\t        var removeSubstring = removeSubstrings_1[_i];\n\t        subdomain = subdomain.replace(removeSubstring, '');\n\t    }\n\t    return subdomain.toLowerCase();\n\t}\n\texports.normalizeSubdomain = normalizeSubdomain;\n\tfunction getUrlQueryParam(name) {\n\t    var url = window.location.href;\n\t    url = url.toLowerCase(); // This is just to avoid case sensitiveness\n\t    name = name.replace(/[\\[\\]]/g, \"\\\\$&\").toLowerCase(); // This is just to avoid case sensitiveness for query parameter name\n\t    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"), results = regex.exec(url);\n\t    if (!results)\n\t        return null;\n\t    if (!results[2])\n\t        return '';\n\t    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n\t}\n\texports.getUrlQueryParam = getUrlQueryParam;\n\t/**\n\t * Wipe OneSignal-related IndexedDB data on the current origin. OneSignal does not have to be initialized to use this.\n\t */\n\tfunction wipeLocalIndexedDb() {\n\t    log.warn('OneSignal: Wiping local IndexedDB data.');\n\t    return Promise.all([\n\t        IndexedDb_1.default.remove('Ids'),\n\t        IndexedDb_1.default.remove('NotificationOpened'),\n\t        IndexedDb_1.default.remove('Options')\n\t    ]);\n\t}\n\texports.wipeLocalIndexedDb = wipeLocalIndexedDb;\n\t/**\n\t * Wipe OneSignal-related IndexedDB data on the \"correct\" computed origin, but OneSignal must be initialized first to use.\n\t */\n\tfunction wipeIndexedDb() {\n\t    log.warn('OneSignal: Wiping IndexedDB data.');\n\t    return Promise.all([\n\t        Database_1.default.remove('Ids'),\n\t        Database_1.default.remove('NotificationOpened'),\n\t        Database_1.default.remove('Options')\n\t    ]);\n\t}\n\texports.wipeIndexedDb = wipeIndexedDb;\n\t/**\n\t * Capitalizes the first letter of the string.\n\t * @returns {string} The string with the first letter capitalized.\n\t */\n\tfunction capitalize(text) {\n\t    return text.charAt(0).toUpperCase() + text.slice(1);\n\t}\n\texports.capitalize = capitalize;\n\t/**\n\t * Unsubscribe from push notifications without removing the active service worker.\n\t */\n\tfunction unsubscribeFromPush() {\n\t    log.warn('OneSignal: Unsubscribing from push.');\n\t    if (Environment_1.default.isServiceWorker()) {\n\t        return self.registration.pushManager.getSubscription()\n\t            .then(function (subscription) {\n\t            if (subscription) {\n\t                return subscription.unsubscribe();\n\t            }\n\t            else\n\t                throw new Error('Cannot unsubscribe because not subscribed.');\n\t        });\n\t    }\n\t    else {\n\t        if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t            return new Promise(function (resolve, reject) {\n\t                log.debug(\"Unsubscribe from push got called, and we're going to remotely execute it in HTTPS iFrame.\");\n\t                OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH, null, function (reply) {\n\t                    log.debug(\"Unsubscribe from push succesfully remotely executed.\");\n\t                    if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\n\t                        resolve();\n\t                    }\n\t                    else {\n\t                        reject('Failed to remotely unsubscribe from push.');\n\t                    }\n\t                });\n\t            });\n\t        }\n\t        else {\n\t            if (!navigator.serviceWorker || !navigator.serviceWorker.controller)\n\t                return Promise.resolve();\n\t            return navigator.serviceWorker.ready\n\t                .then(function (registration) { return registration.pushManager; })\n\t                .then(function (pushManager) { return pushManager.getSubscription(); })\n\t                .then(function (subscription) {\n\t                if (subscription) {\n\t                    return subscription.unsubscribe();\n\t                }\n\t            });\n\t        }\n\t    }\n\t}\n\texports.unsubscribeFromPush = unsubscribeFromPush;\n\t/**\n\t * Unregisters the active service worker.\n\t */\n\tfunction wipeServiceWorker() {\n\t    log.warn('OneSignal: Unregistering service worker.');\n\t    if (Environment_1.default.isIframe()) {\n\t        return;\n\t    }\n\t    if (!navigator.serviceWorker || !navigator.serviceWorker.controller)\n\t        return Promise.resolve();\n\t    return navigator.serviceWorker.ready\n\t        .then(function (registration) { return registration.unregister(); });\n\t}\n\texports.wipeServiceWorker = wipeServiceWorker;\n\t/**\n\t * Unsubscribe from push notifications and remove any active service worker.\n\t */\n\tfunction wipeServiceWorkerAndUnsubscribe() {\n\t    return Promise.all([\n\t        unsubscribeFromPush(),\n\t        wipeServiceWorker()\n\t    ]);\n\t}\n\texports.wipeServiceWorkerAndUnsubscribe = wipeServiceWorkerAndUnsubscribe;\n\tfunction wait(milliseconds) {\n\t    return new Promise(function (resolve) { return setTimeout(resolve, milliseconds); });\n\t}\n\texports.wait = wait;\n\t/**\n\t * Returns the part of the string after the first occurence of the specified search.\n\t * @param string The entire string.\n\t * @param search The text returned will be everything *after* search.\n\t * e.g. substringAfter('A white fox', 'white') => ' fox'\n\t */\n\tfunction substringAfter(string, search) {\n\t    return string.substr(string.indexOf(search) + search.length);\n\t}\n\texports.substringAfter = substringAfter;\n\tfunction once(targetSelectorOrElement, event, task, manualDestroy) {\n\t    if (manualDestroy === void 0) { manualDestroy = false; }\n\t    if (!event) {\n\t        log.error('Cannot call on() with no event: ', event);\n\t    }\n\t    if (!task) {\n\t        log.error('Cannot call on() with no task: ', task);\n\t    }\n\t    if (typeof targetSelectorOrElement === 'string') {\n\t        var els = document.querySelectorAll(targetSelectorOrElement);\n\t        if (els.length > 0) {\n\t            for (var i = 0; i < els.length; i++)\n\t                once(els[i], event, task);\n\t        }\n\t    }\n\t    else if (isArray(targetSelectorOrElement)) {\n\t        for (var i = 0; i < targetSelectorOrElement.length; i++)\n\t            once(targetSelectorOrElement[i], event, task);\n\t    }\n\t    else if (typeof targetSelectorOrElement === 'object') {\n\t        var taskWrapper = (function () {\n\t            var internalTaskFunction = function (e) {\n\t                var destroyEventListener = function () {\n\t                    targetSelectorOrElement.removeEventListener(e.type, taskWrapper);\n\t                };\n\t                if (!manualDestroy) {\n\t                    destroyEventListener();\n\t                }\n\t                task(e, destroyEventListener);\n\t            };\n\t            return internalTaskFunction;\n\t        })();\n\t        targetSelectorOrElement.addEventListener(event, taskWrapper);\n\t    }\n\t    else\n\t        throw new Error(targetSelectorOrElement + \" must be a CSS selector string or DOM Element object.\");\n\t}\n\texports.once = once;\n\t/**\n\t * Returns the number of times the SDK has been loaded into the browser.\n\t * Expects a browser environment, otherwise this call will fail.\n\t */\n\tfunction getSdkLoadCount() {\n\t    return window.__oneSignalSdkLoadCount || 0;\n\t}\n\texports.getSdkLoadCount = getSdkLoadCount;\n\tfunction awaitSdkEvent(eventName, predicate) {\n\t    return __awaiter(this, void 0, void 0, function () {\n\t        return __generator(this, function (_a) {\n\t            switch (_a.label) {\n\t                case 0: return [4 /*yield*/, new Promise(function (resolve, reject) {\n\t                        OneSignal.once(eventName, function (event) {\n\t                            if (predicate) {\n\t                                var predicateResult = predicate(event);\n\t                                if (predicateResult)\n\t                                    resolve(event);\n\t                            }\n\t                            else\n\t                                resolve(event);\n\t                        });\n\t                    })];\n\t                case 1: return [2 /*return*/, _a.sent()];\n\t            }\n\t        });\n\t    });\n\t}\n\texports.awaitSdkEvent = awaitSdkEvent;\n\t/**\n\t * Increments the counter describing the number of times the SDK has been loaded into the browser.\n\t * Expects a browser environment, otherwise this call will fail.\n\t */\n\tfunction incrementSdkLoadCount() {\n\t    window.__oneSignalSdkLoadCount = getSdkLoadCount() + 1;\n\t}\n\texports.incrementSdkLoadCount = incrementSdkLoadCount;\n\t/**\n\t * Returns the email with all whitespace removed and converted to lower case.\n\t */\n\tfunction prepareEmailForHashing(email) {\n\t    return email.replace(/\\s/g, '').toLowerCase();\n\t}\n\texports.prepareEmailForHashing = prepareEmailForHashing;\n\t/**\n\t * Taken from: http://lig-membres.imag.fr/donsez/cours/exemplescourstechnoweb/js_securehash/\n\t */\n\tfunction md5(str) {\n\t    /*\n\t     * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n\t     * Digest Algorithm, as defined in RFC 1321.\n\t     * Copyright (C) Paul Johnston 1999 - 2000.\n\t     * Updated by Greg Holt 2000 - 2001.\n\t     * See http://pajhome.org.uk/site/legal.html for details.\n\t     */\n\t    /*\n\t     * Convert a 32-bit number to a hex string with ls-byte first\n\t     */\n\t    var hex_chr = \"0123456789abcdef\";\n\t    function rhex(num) {\n\t        var str = \"\";\n\t        for (var j = 0; j <= 3; j++)\n\t            str += hex_chr.charAt((num >> (j * 8 + 4)) & 0x0F) +\n\t                hex_chr.charAt((num >> (j * 8)) & 0x0F);\n\t        return str;\n\t    }\n\t    /*\n\t     * Convert a string to a sequence of 16-word blocks, stored as an array.\n\t     * Append padding bits and the length, as described in the MD5 standard.\n\t     */\n\t    function str2blks_MD5(str) {\n\t        var nblk = ((str.length + 8) >> 6) + 1;\n\t        var blks = new Array(nblk * 16);\n\t        for (var i = 0; i < nblk * 16; i++)\n\t            blks[i] = 0;\n\t        for (var i = 0; i < str.length; i++)\n\t            blks[i >> 2] |= str.charCodeAt(i) << ((i % 4) * 8);\n\t        blks[i >> 2] |= 0x80 << ((i % 4) * 8);\n\t        blks[nblk * 16 - 2] = str.length * 8;\n\t        return blks;\n\t    }\n\t    /*\n\t     * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t     * to work around bugs in some JS interpreters.\n\t     */\n\t    function add(x, y) {\n\t        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t        return (msw << 16) | (lsw & 0xFFFF);\n\t    }\n\t    /*\n\t     * Bitwise rotate a 32-bit number to the left\n\t     */\n\t    function rol(num, cnt) {\n\t        return (num << cnt) | (num >>> (32 - cnt));\n\t    }\n\t    /*\n\t     * These functions implement the basic operation for each round of the\n\t     * algorithm.\n\t     */\n\t    function cmn(q, a, b, x, s, t) {\n\t        return add(rol(add(add(a, q), add(x, t)), s), b);\n\t    }\n\t    function ff(a, b, c, d, x, s, t) {\n\t        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t    }\n\t    function gg(a, b, c, d, x, s, t) {\n\t        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t    }\n\t    function hh(a, b, c, d, x, s, t) {\n\t        return cmn(b ^ c ^ d, a, b, x, s, t);\n\t    }\n\t    function ii(a, b, c, d, x, s, t) {\n\t        return cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t    }\n\t    /*\n\t     * Take a string and return the hex representation of its MD5.\n\t     */\n\t    function calcMD5(str) {\n\t        var x = str2blks_MD5(str);\n\t        var a = 1732584193;\n\t        var b = -271733879;\n\t        var c = -1732584194;\n\t        var d = 271733878;\n\t        for (var i = 0; i < x.length; i += 16) {\n\t            var olda = a;\n\t            var oldb = b;\n\t            var oldc = c;\n\t            var oldd = d;\n\t            a = ff(a, b, c, d, x[i + 0], 7, -680876936);\n\t            d = ff(d, a, b, c, x[i + 1], 12, -389564586);\n\t            c = ff(c, d, a, b, x[i + 2], 17, 606105819);\n\t            b = ff(b, c, d, a, x[i + 3], 22, -1044525330);\n\t            a = ff(a, b, c, d, x[i + 4], 7, -176418897);\n\t            d = ff(d, a, b, c, x[i + 5], 12, 1200080426);\n\t            c = ff(c, d, a, b, x[i + 6], 17, -1473231341);\n\t            b = ff(b, c, d, a, x[i + 7], 22, -45705983);\n\t            a = ff(a, b, c, d, x[i + 8], 7, 1770035416);\n\t            d = ff(d, a, b, c, x[i + 9], 12, -1958414417);\n\t            c = ff(c, d, a, b, x[i + 10], 17, -42063);\n\t            b = ff(b, c, d, a, x[i + 11], 22, -1990404162);\n\t            a = ff(a, b, c, d, x[i + 12], 7, 1804603682);\n\t            d = ff(d, a, b, c, x[i + 13], 12, -40341101);\n\t            c = ff(c, d, a, b, x[i + 14], 17, -1502002290);\n\t            b = ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\t            a = gg(a, b, c, d, x[i + 1], 5, -165796510);\n\t            d = gg(d, a, b, c, x[i + 6], 9, -1069501632);\n\t            c = gg(c, d, a, b, x[i + 11], 14, 643717713);\n\t            b = gg(b, c, d, a, x[i + 0], 20, -373897302);\n\t            a = gg(a, b, c, d, x[i + 5], 5, -701558691);\n\t            d = gg(d, a, b, c, x[i + 10], 9, 38016083);\n\t            c = gg(c, d, a, b, x[i + 15], 14, -660478335);\n\t            b = gg(b, c, d, a, x[i + 4], 20, -405537848);\n\t            a = gg(a, b, c, d, x[i + 9], 5, 568446438);\n\t            d = gg(d, a, b, c, x[i + 14], 9, -1019803690);\n\t            c = gg(c, d, a, b, x[i + 3], 14, -187363961);\n\t            b = gg(b, c, d, a, x[i + 8], 20, 1163531501);\n\t            a = gg(a, b, c, d, x[i + 13], 5, -1444681467);\n\t            d = gg(d, a, b, c, x[i + 2], 9, -51403784);\n\t            c = gg(c, d, a, b, x[i + 7], 14, 1735328473);\n\t            b = gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\t            a = hh(a, b, c, d, x[i + 5], 4, -378558);\n\t            d = hh(d, a, b, c, x[i + 8], 11, -2022574463);\n\t            c = hh(c, d, a, b, x[i + 11], 16, 1839030562);\n\t            b = hh(b, c, d, a, x[i + 14], 23, -35309556);\n\t            a = hh(a, b, c, d, x[i + 1], 4, -1530992060);\n\t            d = hh(d, a, b, c, x[i + 4], 11, 1272893353);\n\t            c = hh(c, d, a, b, x[i + 7], 16, -155497632);\n\t            b = hh(b, c, d, a, x[i + 10], 23, -1094730640);\n\t            a = hh(a, b, c, d, x[i + 13], 4, 681279174);\n\t            d = hh(d, a, b, c, x[i + 0], 11, -358537222);\n\t            c = hh(c, d, a, b, x[i + 3], 16, -722521979);\n\t            b = hh(b, c, d, a, x[i + 6], 23, 76029189);\n\t            a = hh(a, b, c, d, x[i + 9], 4, -640364487);\n\t            d = hh(d, a, b, c, x[i + 12], 11, -421815835);\n\t            c = hh(c, d, a, b, x[i + 15], 16, 530742520);\n\t            b = hh(b, c, d, a, x[i + 2], 23, -995338651);\n\t            a = ii(a, b, c, d, x[i + 0], 6, -198630844);\n\t            d = ii(d, a, b, c, x[i + 7], 10, 1126891415);\n\t            c = ii(c, d, a, b, x[i + 14], 15, -1416354905);\n\t            b = ii(b, c, d, a, x[i + 5], 21, -57434055);\n\t            a = ii(a, b, c, d, x[i + 12], 6, 1700485571);\n\t            d = ii(d, a, b, c, x[i + 3], 10, -1894986606);\n\t            c = ii(c, d, a, b, x[i + 10], 15, -1051523);\n\t            b = ii(b, c, d, a, x[i + 1], 21, -2054922799);\n\t            a = ii(a, b, c, d, x[i + 8], 6, 1873313359);\n\t            d = ii(d, a, b, c, x[i + 15], 10, -30611744);\n\t            c = ii(c, d, a, b, x[i + 6], 15, -1560198380);\n\t            b = ii(b, c, d, a, x[i + 13], 21, 1309151649);\n\t            a = ii(a, b, c, d, x[i + 4], 6, -145523070);\n\t            d = ii(d, a, b, c, x[i + 11], 10, -1120210379);\n\t            c = ii(c, d, a, b, x[i + 2], 15, 718787259);\n\t            b = ii(b, c, d, a, x[i + 9], 21, -343485551);\n\t            a = add(a, olda);\n\t            b = add(b, oldb);\n\t            c = add(c, oldc);\n\t            d = add(d, oldd);\n\t        }\n\t        return rhex(a) + rhex(b) + rhex(c) + rhex(d);\n\t    }\n\t    return calcMD5(str);\n\t}\n\texports.md5 = md5;\n\t/**\n\t * Taken from: http://lig-membres.imag.fr/donsez/cours/exemplescourstechnoweb/js_securehash/sha1src.html\n\t */\n\tfunction sha1(str) {\n\t    /*\n\t     * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n\t     * in FIPS PUB 180-1\n\t     * Copyright (C) Paul Johnston 2000.\n\t     * See http://pajhome.org.uk/site/legal.html for details.\n\t     */\n\t    /*\n\t     * Convert a 32-bit number to a hex string with ms-byte first\n\t     */\n\t    var hex_chr = \"0123456789abcdef\";\n\t    function hex(num) {\n\t        var str = \"\";\n\t        for (var j = 7; j >= 0; j--)\n\t            str += hex_chr.charAt((num >> (j * 4)) & 0x0F);\n\t        return str;\n\t    }\n\t    /*\n\t     * Convert a string to a sequence of 16-word blocks, stored as an array.\n\t     * Append padding bits and the length, as described in the SHA1 standard.\n\t     */\n\t    function str2blks_SHA1(str) {\n\t        var nblk = ((str.length + 8) >> 6) + 1;\n\t        var blks = new Array(nblk * 16);\n\t        for (var i = 0; i < nblk * 16; i++)\n\t            blks[i] = 0;\n\t        for (i = 0; i < str.length; i++)\n\t            blks[i >> 2] |= str.charCodeAt(i) << (24 - (i % 4) * 8);\n\t        blks[i >> 2] |= 0x80 << (24 - (i % 4) * 8);\n\t        blks[nblk * 16 - 1] = str.length * 8;\n\t        return blks;\n\t    }\n\t    /*\n\t     * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n\t     * to work around bugs in some JS interpreters.\n\t     */\n\t    function add(x, y) {\n\t        var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n\t        var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t        return (msw << 16) | (lsw & 0xFFFF);\n\t    }\n\t    /*\n\t     * Bitwise rotate a 32-bit number to the left\n\t     */\n\t    function rol(num, cnt) {\n\t        return (num << cnt) | (num >>> (32 - cnt));\n\t    }\n\t    /*\n\t     * Perform the appropriate triplet combination function for the current\n\t     * iteration\n\t     */\n\t    function ft(t, b, c, d) {\n\t        if (t < 20)\n\t            return (b & c) | ((~b) & d);\n\t        if (t < 40)\n\t            return b ^ c ^ d;\n\t        if (t < 60)\n\t            return (b & c) | (b & d) | (c & d);\n\t        return b ^ c ^ d;\n\t    }\n\t    /*\n\t     * Determine the appropriate additive constant for the current iteration\n\t     */\n\t    function kt(t) {\n\t        return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 :\n\t            (t < 60) ? -1894007588 : -899497514;\n\t    }\n\t    /*\n\t     * Take a string and return the hex representation of its SHA-1.\n\t     */\n\t    function calcSHA1(str) {\n\t        var x = str2blks_SHA1(str);\n\t        var w = new Array(80);\n\t        var a = 1732584193;\n\t        var b = -271733879;\n\t        var c = -1732584194;\n\t        var d = 271733878;\n\t        var e = -1009589776;\n\t        for (var i = 0; i < x.length; i += 16) {\n\t            var olda = a;\n\t            var oldb = b;\n\t            var oldc = c;\n\t            var oldd = d;\n\t            var olde = e;\n\t            for (var j = 0; j < 80; j++) {\n\t                if (j < 16)\n\t                    w[j] = x[i + j];\n\t                else\n\t                    w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n\t                var t = add(add(rol(a, 5), ft(j, b, c, d)), add(add(e, w[j]), kt(j)));\n\t                e = d;\n\t                d = c;\n\t                c = rol(b, 30);\n\t                b = a;\n\t                a = t;\n\t            }\n\t            a = add(a, olda);\n\t            b = add(b, oldb);\n\t            c = add(c, oldc);\n\t            d = add(d, oldd);\n\t            e = add(e, olde);\n\t        }\n\t        return hex(a) + hex(b) + hex(c) + hex(d) + hex(e);\n\t    }\n\t    return calcSHA1(str);\n\t}\n\texports.sha1 = sha1;\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\n\t* loglevel - https://github.com/pimterry/loglevel\n\t*\n\t* Copyright (c) 2013 Tim Perry\n\t* Licensed under the MIT license.\n\t*/\n\t(function (root, definition) {\n\t    \"use strict\";\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (definition), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    } else if (typeof module === 'object' && module.exports) {\n\t        module.exports = definition();\n\t    } else {\n\t        root.log = definition();\n\t    }\n\t}(this, function () {\n\t    \"use strict\";\n\t    var noop = function() {};\n\t    var undefinedType = \"undefined\";\n\t\n\t    function realMethod(methodName) {\n\t        if (typeof console === undefinedType) {\n\t            return false; // We can't build a real method without a console to log to\n\t        } else if (console[methodName] !== undefined) {\n\t            return bindMethod(console, methodName);\n\t        } else if (console.log !== undefined) {\n\t            return bindMethod(console, 'log');\n\t        } else {\n\t            return noop;\n\t        }\n\t    }\n\t\n\t    function bindMethod(obj, methodName) {\n\t        var method = obj[methodName];\n\t        if (typeof method.bind === 'function') {\n\t            return method.bind(obj);\n\t        } else {\n\t            try {\n\t                return Function.prototype.bind.call(method, obj);\n\t            } catch (e) {\n\t                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n\t                return function() {\n\t                    return Function.prototype.apply.apply(method, [obj, arguments]);\n\t                };\n\t            }\n\t        }\n\t    }\n\t\n\t    // these private functions always need `this` to be set properly\n\t\n\t    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n\t        return function () {\n\t            if (typeof console !== undefinedType) {\n\t                replaceLoggingMethods.call(this, level, loggerName);\n\t                this[methodName].apply(this, arguments);\n\t            }\n\t        };\n\t    }\n\t\n\t    function replaceLoggingMethods(level, loggerName) {\n\t        /*jshint validthis:true */\n\t        for (var i = 0; i < logMethods.length; i++) {\n\t            var methodName = logMethods[i];\n\t            this[methodName] = (i < level) ?\n\t                noop :\n\t                this.methodFactory(methodName, level, loggerName);\n\t        }\n\t    }\n\t\n\t    function defaultMethodFactory(methodName, level, loggerName) {\n\t        /*jshint validthis:true */\n\t        return realMethod(methodName) ||\n\t               enableLoggingWhenConsoleArrives.apply(this, arguments);\n\t    }\n\t\n\t    var logMethods = [\n\t        \"trace\",\n\t        \"debug\",\n\t        \"info\",\n\t        \"warn\",\n\t        \"error\"\n\t    ];\n\t\n\t    function Logger(name, defaultLevel, factory) {\n\t      var self = this;\n\t      var currentLevel;\n\t      var storageKey = \"loglevel\";\n\t      if (name) {\n\t        storageKey += \":\" + name;\n\t      }\n\t\n\t      function persistLevelIfPossible(levelNum) {\n\t          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\t\n\t          // Use localStorage if available\n\t          try {\n\t              window.localStorage[storageKey] = levelName;\n\t              return;\n\t          } catch (ignore) {}\n\t\n\t          // Use session cookie as fallback\n\t          try {\n\t              window.document.cookie =\n\t                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n\t          } catch (ignore) {}\n\t      }\n\t\n\t      function getPersistedLevel() {\n\t          var storedLevel;\n\t\n\t          try {\n\t              storedLevel = window.localStorage[storageKey];\n\t          } catch (ignore) {}\n\t\n\t          if (typeof storedLevel === undefinedType) {\n\t              try {\n\t                  var cookie = window.document.cookie;\n\t                  var location = cookie.indexOf(\n\t                      encodeURIComponent(storageKey) + \"=\");\n\t                  if (location) {\n\t                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n\t                  }\n\t              } catch (ignore) {}\n\t          }\n\t\n\t          // If the stored level is not valid, treat it as if nothing was stored.\n\t          if (self.levels[storedLevel] === undefined) {\n\t              storedLevel = undefined;\n\t          }\n\t\n\t          return storedLevel;\n\t      }\n\t\n\t      /*\n\t       *\n\t       * Public API\n\t       *\n\t       */\n\t\n\t      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n\t          \"ERROR\": 4, \"SILENT\": 5};\n\t\n\t      self.methodFactory = factory || defaultMethodFactory;\n\t\n\t      self.getLevel = function () {\n\t          return currentLevel;\n\t      };\n\t\n\t      self.setLevel = function (level, persist) {\n\t          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n\t              level = self.levels[level.toUpperCase()];\n\t          }\n\t          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n\t              currentLevel = level;\n\t              if (persist !== false) {  // defaults to true\n\t                  persistLevelIfPossible(level);\n\t              }\n\t              replaceLoggingMethods.call(self, level, name);\n\t              if (typeof console === undefinedType && level < self.levels.SILENT) {\n\t                  return \"No console available for logging\";\n\t              }\n\t          } else {\n\t              throw \"log.setLevel() called with invalid level: \" + level;\n\t          }\n\t      };\n\t\n\t      self.setDefaultLevel = function (level) {\n\t          if (!getPersistedLevel()) {\n\t              self.setLevel(level, false);\n\t          }\n\t      };\n\t\n\t      self.enableAll = function(persist) {\n\t          self.setLevel(self.levels.TRACE, persist);\n\t      };\n\t\n\t      self.disableAll = function(persist) {\n\t          self.setLevel(self.levels.SILENT, persist);\n\t      };\n\t\n\t      // Initialize with the right level\n\t      var initialLevel = getPersistedLevel();\n\t      if (initialLevel == null) {\n\t          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n\t      }\n\t      self.setLevel(initialLevel, false);\n\t    }\n\t\n\t    /*\n\t     *\n\t     * Package-level API\n\t     *\n\t     */\n\t\n\t    var defaultLogger = new Logger();\n\t\n\t    var _loggersByName = {};\n\t    defaultLogger.getLogger = function getLogger(name) {\n\t        if (typeof name !== \"string\" || name === \"\") {\n\t          throw new TypeError(\"You must supply a name when creating a logger.\");\n\t        }\n\t\n\t        var logger = _loggersByName[name];\n\t        if (!logger) {\n\t          logger = _loggersByName[name] = new Logger(\n\t            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n\t        }\n\t        return logger;\n\t    };\n\t\n\t    // Grab the current global log variable in case of overwrite\n\t    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n\t    defaultLogger.noConflict = function() {\n\t        if (typeof window !== undefinedType &&\n\t               window.log === defaultLogger) {\n\t            window.log = _log;\n\t        }\n\t\n\t        return defaultLogger;\n\t    };\n\t\n\t    return defaultLogger;\n\t}));\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar log = __webpack_require__(2);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar utils_1 = __webpack_require__(1);\n\tvar SILENT_EVENTS = [\n\t    'notifyButtonHovering',\n\t    'notifyButtonHover',\n\t    'notifyButtonButtonClick',\n\t    'notifyButtonLauncherClick',\n\t    'animatedElementHiding',\n\t    'aniamtedElementHidden',\n\t    'animatedElementShowing',\n\t    'animatedElementShown',\n\t    'activeAnimatedElementActivating',\n\t    'activeAnimatedElementActive',\n\t    'activeAnimatedElementInactivating',\n\t    'activeAnimatedElementInactive',\n\t    'dbRetrieved',\n\t    'dbSet',\n\t    'testEvent'\n\t];\n\tvar RETRIGGER_REMOTE_EVENTS = [\n\t    'onesignal.prompt.custom.clicked',\n\t    'onesignal.prompt.native.permissionchanged',\n\t    'onesignal.subscription.changed',\n\t    'onesignal.internal.subscriptionset',\n\t    'dbRebuilt',\n\t    'initialize',\n\t    'subscriptionSet',\n\t    'sendWelcomeNotification',\n\t    'subscriptionChange',\n\t    'notificationPermissionChange',\n\t    'dbSet',\n\t    'register',\n\t    'notificationDisplay',\n\t    'notificationDismiss',\n\t    'notificationClick',\n\t    'permissionPromptDisplay',\n\t    'testWouldDisplay',\n\t    'testInitOptionDisabled',\n\t    'popupWindowTimeout'\n\t];\n\tvar LEGACY_EVENT_MAP = {\n\t    'notificationPermissionChange': 'onesignal.prompt.native.permissionchanged',\n\t    'subscriptionChange': 'onesignal.subscription.changed',\n\t    'customPromptClick': 'onesignal.prompt.custom.clicked',\n\t};\n\tvar Event = (function () {\n\t    function Event() {\n\t    }\n\t    /**\n\t     * Triggers the specified event with optional custom data.\n\t     * @param eventName The string event name to be emitted.\n\t     * @param data Any JavaScript variable to be passed with the event.\n\t     * @param remoteTriggerEnv If this method is being called in a different environment (e.g. was triggered in iFrame but now retriggered on main host), this is the string of the original environment for logging purposes.\n\t     */\n\t    Event.trigger = function (eventName, data, remoteTriggerEnv) {\n\t        if (remoteTriggerEnv === void 0) { remoteTriggerEnv = null; }\n\t        if (!utils_1.contains(SILENT_EVENTS, eventName)) {\n\t            var displayData = data;\n\t            if (remoteTriggerEnv) {\n\t                var env = utils_1.capitalize(Environment_1.default.getEnv()) + \" \\u2B38 \" + utils_1.capitalize(remoteTriggerEnv);\n\t            }\n\t            else {\n\t                var env = utils_1.capitalize(Environment_1.default.getEnv());\n\t            }\n\t            if (displayData || displayData === false) {\n\t                log.debug(\"(\" + env + \") \\u00BB %c\" + eventName + \":\", utils_1.getConsoleStyle('event'), displayData);\n\t            }\n\t            else {\n\t                log.debug(\"(\" + env + \") \\u00BB %c\" + eventName, utils_1.getConsoleStyle('event'));\n\t            }\n\t        }\n\t        // Actually fire the event that can be listened to via OneSignal.on()\n\t        if (Environment_1.default.isBrowser()) {\n\t            if (eventName === OneSignal.EVENTS.SDK_INITIALIZED) {\n\t                if (OneSignal.initialized)\n\t                    return;\n\t                else\n\t                    OneSignal.initialized = true;\n\t            }\n\t            OneSignal.emit(eventName, data);\n\t        }\n\t        if (LEGACY_EVENT_MAP.hasOwnProperty(eventName)) {\n\t            var legacyEventName = LEGACY_EVENT_MAP[eventName];\n\t            Event._triggerLegacy(legacyEventName, data);\n\t        }\n\t        // If this event was triggered in an iFrame or Popup environment, also trigger it on the host page\n\t        if (Environment_1.default.isBrowser() &&\n\t            (Environment_1.default.isPopup() || Environment_1.default.isIframe())) {\n\t            var creator = opener || parent;\n\t            if (!creator) {\n\t                log.error(\"Could not send event '\" + eventName + \"' back to host page because no creator (opener or parent) found!\");\n\t            }\n\t            else {\n\t                // But only if the event matches certain events\n\t                if (utils_1.contains(RETRIGGER_REMOTE_EVENTS, eventName)) {\n\t                    if (Environment_1.default.isPopup()) {\n\t                        OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT, { eventName: eventName, eventData: data });\n\t                    }\n\t                    else {\n\t                        OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT, { eventName: eventName, eventData: data });\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * Fires the event to be listened to via window.addEventListener().\n\t     * @param eventName The string event name.\n\t     * @param data Any JavaScript variable to be passed with the event.\n\t     * @private\n\t     */\n\t    Event._triggerLegacy = function (eventName, data) {\n\t        var event = new CustomEvent(eventName, {\n\t            bubbles: true, cancelable: true, detail: data\n\t        });\n\t        // Fire the event that listeners can listen to via 'window.addEventListener()'\n\t        window.dispatchEvent(event);\n\t    };\n\t    return Event;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Event;\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Environment = (function () {\n\t    function Environment() {\n\t    }\n\t    Object.defineProperty(Environment, \"SERVICE_WORKER\", {\n\t        get: function () {\n\t            return 'ServiceWorker';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Environment, \"HOST\", {\n\t        get: function () {\n\t            return \"host\";\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Environment, \"POPUP\", {\n\t        get: function () {\n\t            return \"popup\";\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Environment, \"IFRAME\", {\n\t        get: function () {\n\t            return \"iFrame\";\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Environment.isEs6DebuggingModule = function () {\n\t        return (false);\n\t    };\n\t    Environment.getEnv = function () {\n\t        if (typeof window === \"undefined\") {\n\t            if (typeof WorkerLocation !== \"undefined\" && location instanceof WorkerLocation)\n\t                return Environment.SERVICE_WORKER;\n\t        }\n\t        else {\n\t            // If the window is the root top-most level\n\t            if (window === window.top) {\n\t                if (location.href.indexOf(\"initOneSignal\") !== -1 ||\n\t                    (location.pathname === '/subscribe' &&\n\t                        location.search === '') &&\n\t                        (location.hostname.endsWith('.onesignal.com') ||\n\t                            (location.hostname.indexOf('.localhost') !== -1 && Environment.isDev())))\n\t                    return Environment.POPUP;\n\t                else\n\t                    return Environment.HOST;\n\t            }\n\t            else if (location.pathname === '/webPushIframe' ||\n\t                location.pathname === '/webPushModal') {\n\t                return Environment.IFRAME;\n\t            }\n\t            else\n\t                return Environment.CUSTOM_SUBDOMAIN;\n\t        }\n\t    };\n\t    Environment.isServiceWorker = function () {\n\t        return Environment.getEnv() === Environment.SERVICE_WORKER;\n\t    };\n\t    /**\n\t     * The main site page.\n\t     */\n\t    Environment.isHost = function () {\n\t        return Environment.getEnv() === Environment.HOST;\n\t    };\n\t    /**\n\t     * The HTTP popup asking users using our subdomain workaround to subscribe,\n\t     */\n\t    Environment.isPopup = function () {\n\t        return Environment.getEnv() === Environment.POPUP;\n\t    };\n\t    Object.defineProperty(Environment, \"CUSTOM_SUBDOMAIN\", {\n\t        get: function () {\n\t            return \"custom_subdomain\";\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    /**\n\t     * The HTTPS iFrame we put on HTTP sites to communicate with the service worker and IndexedDB.\n\t     * @returns {boolean}\n\t     */\n\t    Environment.isIframe = function () {\n\t        return Environment.getEnv() === Environment.IFRAME;\n\t    };\n\t    /**\n\t     * True if not in a service worker environment.\n\t     */\n\t    Environment.isBrowser = function () {\n\t        return typeof window !== 'undefined';\n\t    };\n\t    Environment.isStaging = function () {\n\t        return (false);\n\t    };\n\t    Environment.isDev = function () {\n\t        return (false);\n\t    };\n\t    Environment.isTest = function () {\n\t        return (false);\n\t    };\n\t    Environment.isCustomSubdomain = function () {\n\t        return Environment.getEnv() === Environment.CUSTOM_SUBDOMAIN;\n\t    };\n\t    Object.defineProperty(Environment, \"TRADITIONAL_CHINESE_LANGUAGE_TAG\", {\n\t        get: function () {\n\t            return ['tw', 'hant'];\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Environment, \"SIMPLIFIED_CHINESE_LANGUAGE_TAG\", {\n\t        get: function () {\n\t            return ['cn', 'hans'];\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    /* Specifications: https://tools.ietf.org/html/bcp47 */\n\t    Environment.getLanguage = function (testLanguage) {\n\t        var languageTag = testLanguage || navigator.language;\n\t        if (languageTag) {\n\t            languageTag = languageTag.toLowerCase();\n\t            var languageSubtags = languageTag.split('-');\n\t            if (languageSubtags[0] == 'zh') {\n\t                // The language is zh-?\n\t                // We must categorize the language as either zh-Hans (simplified) or zh-Hant (traditional); OneSignal only supports these two Chinese variants\n\t                for (var _i = 0, _a = Environment.TRADITIONAL_CHINESE_LANGUAGE_TAG; _i < _a.length; _i++) {\n\t                    var traditionalSubtag = _a[_i];\n\t                    if (languageSubtags.indexOf(traditionalSubtag) !== -1) {\n\t                        return 'zh-Hant';\n\t                    }\n\t                }\n\t                for (var _b = 0, _c = Environment.SIMPLIFIED_CHINESE_LANGUAGE_TAG; _b < _c.length; _b++) {\n\t                    var simpleSubtag = _c[_b];\n\t                    if (languageSubtags.indexOf(simpleSubtag) !== -1) {\n\t                        return 'zh-Hans';\n\t                    }\n\t                }\n\t                return 'zh-Hant'; // Return Chinese traditional by default\n\t            }\n\t            else {\n\t                // Return the language subtag (it can be three characters, so truncate it down to 2 just to be sure)\n\t                return languageSubtags[0].substring(0, 2);\n\t            }\n\t        }\n\t        else {\n\t            return 'en';\n\t        }\n\t    };\n\t    Environment.supportsServiceWorkers = function () {\n\t        return 'serviceWorker' in navigator;\n\t    };\n\t    return Environment;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Environment;\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\tvar EventEmitter = __webpack_require__(19);\n\tvar heir = __webpack_require__(18);\n\tvar Event_1 = __webpack_require__(3);\n\tvar IndexedDb_1 = __webpack_require__(13);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar AppState_1 = __webpack_require__(52);\n\tvar Subscription_1 = __webpack_require__(56);\n\tvar AppConfig_1 = __webpack_require__(51);\n\tvar ServiceWorkerConfig_1 = __webpack_require__(54);\n\tvar ServiceWorkerState_1 = __webpack_require__(55);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar Database = (function () {\n\t    function Database() {\n\t    }\n\t    Object.defineProperty(Database, \"EVENTS\", {\n\t        get: function () {\n\t            return {\n\t                REBUILT: 'dbRebuilt',\n\t                RETRIEVED: 'dbRetrieved',\n\t                SET: 'dbSet',\n\t                REMOVED: 'dbRemoved',\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Database._getReturnHelper = function (table, key, result) {\n\t        switch (table) {\n\t            case 'Options':\n\t                if (result && key) {\n\t                    return result.value;\n\t                }\n\t                else if (result && !key) {\n\t                    return result;\n\t                }\n\t                else {\n\t                    return null;\n\t                }\n\t                break;\n\t            case 'Ids':\n\t                if (result && key) {\n\t                    return result.id;\n\t                }\n\t                else if (result && !key) {\n\t                    return result;\n\t                }\n\t                else {\n\t                    return null;\n\t                }\n\t                break;\n\t            case 'NotificationOpened':\n\t                if (result && key) {\n\t                    return { data: result.data, timestamp: result.timestamp };\n\t                }\n\t                else if (result && !key) {\n\t                    return result;\n\t                }\n\t                else {\n\t                    return null;\n\t                }\n\t                break;\n\t            default:\n\t                if (result) {\n\t                    return result;\n\t                }\n\t                else {\n\t                    return null;\n\t                }\n\t                break;\n\t        }\n\t    };\n\t    /**\n\t     * Asynchronously retrieves the value of the key at the table (if key is specified), or the entire table (if key is not specified).\n\t     * If on an iFrame or popup environment, retrieves from the correct IndexedDB database using cross-domain messaging.\n\t     * @param table The table to retrieve the value from.\n\t     * @param key The key in the table to retrieve the value of. Leave blank to get the entire table.\n\t     * @returns {Promise} Returns a promise that fulfills when the value(s) are available.\n\t     */\n\t    Database.get = function (table, key) {\n\t        return new Promise(function (resolve) {\n\t            if (!Environment_1.default.isServiceWorker() && SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET, [{ table: table, key: key }], function (reply) {\n\t                    var result = reply.data[0];\n\t                    Event_1.default.trigger(Database.EVENTS.RETRIEVED, { table: table, key: key, result: result });\n\t                    resolve(result);\n\t                });\n\t            }\n\t            else {\n\t                return IndexedDb_1.default.get(table, key)\n\t                    .then(function (result) {\n\t                    var cleanResult = Database._getReturnHelper(table, key, result);\n\t                    Event_1.default.trigger(Database.EVENTS.RETRIEVED, { table: table, key: key, result: cleanResult });\n\t                    resolve(cleanResult);\n\t                });\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Asynchronously puts the specified value in the specified table.\n\t     * @param table\n\t     * @param keypath\n\t     */\n\t    Database.put = function (table, keypath) {\n\t        return new Promise(function (resolve, reject) {\n\t            if (!Environment_1.default.isServiceWorker() && SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT, [{ table: table, keypath: keypath }], function (reply) {\n\t                    if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\n\t                        Event_1.default.trigger(Database.EVENTS.SET, keypath);\n\t                        resolve();\n\t                    }\n\t                    else {\n\t                        reject(\"(Database) Attempted remote IndexedDB put(\" + table + \", \" + keypath + \"), but did not get success response.\");\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                return IndexedDb_1.default.put(table, keypath)\n\t                    .then(function () {\n\t                    Event_1.default.trigger(Database.EVENTS.SET, keypath);\n\t                    resolve();\n\t                });\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Asynchronously removes the specified key from the table, or if the key is not specified, removes all keys in the table.\n\t     * @returns {Promise} Returns a promise containing a key that is fulfilled when deletion is completed.\n\t     */\n\t    Database.remove = function (table, keypath) {\n\t        return new Promise(function (resolve, reject) {\n\t            if (!Environment_1.default.isServiceWorker() && SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE, [{ table: table, keypath: keypath }], function (reply) {\n\t                    if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\n\t                        Event_1.default.trigger(Database.EVENTS.REMOVED, [table, keypath]);\n\t                        resolve();\n\t                    }\n\t                    else {\n\t                        reject(\"(Database) Attempted remote IndexedDB remove(\" + table + \", \" + keypath + \"), but did not get success response.\");\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                return IndexedDb_1.default.remove(table, keypath)\n\t                    .then(function () {\n\t                    Event_1.default.trigger(Database.EVENTS.REMOVED, [table, keypath]);\n\t                    resolve();\n\t                });\n\t            }\n\t        });\n\t    };\n\t    Database.getAppConfig = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var config, _a, _b, _c, _d;\n\t            return __generator(this, function (_e) {\n\t                switch (_e.label) {\n\t                    case 0:\n\t                        config = new AppConfig_1.AppConfig();\n\t                        _a = config;\n\t                        return [4 /*yield*/, Database.get('Ids', 'appId')];\n\t                    case 1:\n\t                        _a.appId = _e.sent();\n\t                        _b = config;\n\t                        return [4 /*yield*/, Database.get('Options', 'subdomain')];\n\t                    case 2:\n\t                        _b.subdomain = _e.sent();\n\t                        _c = config;\n\t                        return [4 /*yield*/, Database.get('Options', 'autoRegister')];\n\t                    case 3:\n\t                        _c.autoRegister = _e.sent();\n\t                        _d = config;\n\t                        return [4 /*yield*/, Database.get('Options', 'serviceWorkerConfig')];\n\t                    case 4:\n\t                        _d.serviceWorkerConfig = _e.sent();\n\t                        return [2 /*return*/, config];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.setAppConfig = function (appConfig) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!appConfig.appId)\n\t                            return [3 /*break*/, 2];\n\t                        return [4 /*yield*/, Database.put('Ids', { type: 'appId', id: appConfig.appId })];\n\t                    case 1:\n\t                        _a.sent();\n\t                        _a.label = 2;\n\t                    case 2:\n\t                        if (!appConfig.subdomain)\n\t                            return [3 /*break*/, 4];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'subdomain', value: appConfig.subdomain })];\n\t                    case 3:\n\t                        _a.sent();\n\t                        _a.label = 4;\n\t                    case 4:\n\t                        if (!appConfig.autoRegister)\n\t                            return [3 /*break*/, 6];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'autoRegister', value: appConfig.autoRegister })];\n\t                    case 5:\n\t                        _a.sent();\n\t                        _a.label = 6;\n\t                    case 6:\n\t                        if (!appConfig.serviceWorkerConfig)\n\t                            return [3 /*break*/, 8];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'serviceWorkerConfig', value: appConfig.serviceWorkerConfig })];\n\t                    case 7:\n\t                        _a.sent();\n\t                        _a.label = 8;\n\t                    case 8: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.getAppState = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var state, _a, _b, _c, _d;\n\t            return __generator(this, function (_e) {\n\t                switch (_e.label) {\n\t                    case 0:\n\t                        state = new AppState_1.AppState();\n\t                        _a = state;\n\t                        return [4 /*yield*/, Database.get('Options', 'defaultUrl')];\n\t                    case 1:\n\t                        _a.defaultNotificationUrl = _e.sent();\n\t                        _b = state;\n\t                        return [4 /*yield*/, Database.get('Options', 'defaultTitle')];\n\t                    case 2:\n\t                        _b.defaultNotificationTitle = _e.sent();\n\t                        _c = state;\n\t                        return [4 /*yield*/, Database.get('Options', 'isPushEnabled')];\n\t                    case 3:\n\t                        _c.lastKnownPushEnabled = _e.sent();\n\t                        _d = state;\n\t                        return [4 /*yield*/, Database.get('NotificationOpened')];\n\t                    case 4:\n\t                        _d.clickedNotifications = _e.sent();\n\t                        return [2 /*return*/, state];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.setAppState = function (appState) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var clickedNotificationUrls, _i, clickedNotificationUrls_1, url, notificationDetails;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!appState.defaultNotificationUrl)\n\t                            return [3 /*break*/, 2];\n\t                        return [4 /*yield*/, Database.put(\"Options\", { key: \"defaultUrl\", value: appState.defaultNotificationUrl })];\n\t                    case 1:\n\t                        _a.sent();\n\t                        _a.label = 2;\n\t                    case 2:\n\t                        if (!appState.defaultNotificationTitle)\n\t                            return [3 /*break*/, 4];\n\t                        return [4 /*yield*/, Database.put(\"Options\", { key: \"defaultTitle\", value: appState.defaultNotificationTitle })];\n\t                    case 3:\n\t                        _a.sent();\n\t                        _a.label = 4;\n\t                    case 4:\n\t                        if (!(appState.lastKnownPushEnabled != null))\n\t                            return [3 /*break*/, 6];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'isPushEnabled', value: appState.lastKnownPushEnabled })];\n\t                    case 5:\n\t                        _a.sent();\n\t                        _a.label = 6;\n\t                    case 6:\n\t                        if (!appState.clickedNotifications)\n\t                            return [3 /*break*/, 12];\n\t                        clickedNotificationUrls = Object.keys(appState.clickedNotifications);\n\t                        _i = 0, clickedNotificationUrls_1 = clickedNotificationUrls;\n\t                        _a.label = 7;\n\t                    case 7:\n\t                        if (!(_i < clickedNotificationUrls_1.length))\n\t                            return [3 /*break*/, 12];\n\t                        url = clickedNotificationUrls_1[_i];\n\t                        notificationDetails = appState.clickedNotifications[url];\n\t                        if (!notificationDetails)\n\t                            return [3 /*break*/, 9];\n\t                        return [4 /*yield*/, Database.put('NotificationOpened', {\n\t                                url: url,\n\t                                data: notificationDetails.data,\n\t                                timestamp: notificationDetails.timestamp\n\t                            })];\n\t                    case 8:\n\t                        _a.sent();\n\t                        return [3 /*break*/, 11];\n\t                    case 9:\n\t                        if (!(notificationDetails === null))\n\t                            return [3 /*break*/, 11];\n\t                        // If we get an object like:\n\t                        // { \"http://site.com/page\": null}\n\t                        // It means we need to remove that entry\n\t                        return [4 /*yield*/, Database.remove('NotificationOpened', url)];\n\t                    case 10:\n\t                        // If we get an object like:\n\t                        // { \"http://site.com/page\": null}\n\t                        // It means we need to remove that entry\n\t                        _a.sent();\n\t                        _a.label = 11;\n\t                    case 11:\n\t                        _i++;\n\t                        return [3 /*break*/, 7];\n\t                    case 12: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.getServiceWorkerConfig = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var config, _a, _b, _c, _d;\n\t            return __generator(this, function (_e) {\n\t                switch (_e.label) {\n\t                    case 0:\n\t                        config = new ServiceWorkerConfig_1.ServiceWorkerConfig();\n\t                        _a = config;\n\t                        return [4 /*yield*/, Database.get('Options', 'workerScope')];\n\t                    case 1:\n\t                        _a.scope = _e.sent();\n\t                        _b = config;\n\t                        return [4 /*yield*/, Database.get('Options', 'workerName')];\n\t                    case 2:\n\t                        _b.workerName = _e.sent();\n\t                        _c = config;\n\t                        return [4 /*yield*/, Database.get('Options', 'updaterWorkerName')];\n\t                    case 3:\n\t                        _c.updaterWorkerName = _e.sent();\n\t                        _d = config;\n\t                        return [4 /*yield*/, Database.get('Options', 'workerFilePath')];\n\t                    case 4:\n\t                        _d.workerFilePath = _e.sent();\n\t                        return [2 /*return*/, config];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.setServiceWorkerConfig = function (config) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!config.scope)\n\t                            return [3 /*break*/, 2];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'workerScope', value: config.scope })];\n\t                    case 1:\n\t                        _a.sent();\n\t                        _a.label = 2;\n\t                    case 2:\n\t                        if (!config.workerName)\n\t                            return [3 /*break*/, 4];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'workerName', value: config.workerName })];\n\t                    case 3:\n\t                        _a.sent();\n\t                        _a.label = 4;\n\t                    case 4:\n\t                        if (!config.updaterWorkerName)\n\t                            return [3 /*break*/, 6];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'updaterWorkerName', value: config.updaterWorkerName })];\n\t                    case 5:\n\t                        _a.sent();\n\t                        _a.label = 6;\n\t                    case 6:\n\t                        if (!config.workerFilePath)\n\t                            return [3 /*break*/, 8];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'workerFilePath', value: config.workerFilePath })];\n\t                    case 7:\n\t                        _a.sent();\n\t                        _a.label = 8;\n\t                    case 8: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.getServiceWorkerState = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var state, _a, _b, _c;\n\t            return __generator(this, function (_d) {\n\t                switch (_d.label) {\n\t                    case 0:\n\t                        state = new ServiceWorkerState_1.ServiceWorkerState();\n\t                        _a = state;\n\t                        return [4 /*yield*/, Database.get('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION')];\n\t                    case 1:\n\t                        _a.workerVersion = _d.sent();\n\t                        _b = state;\n\t                        return [4 /*yield*/, Database.get('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION')];\n\t                    case 2:\n\t                        _b.updaterWorkerVersion = _d.sent();\n\t                        _c = state;\n\t                        return [4 /*yield*/, Database.get('Ids', 'backupNotification')];\n\t                    case 3:\n\t                        _c.backupNotification = _d.sent();\n\t                        return [2 /*return*/, state];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.setServiceWorkerState = function (state) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!state.workerVersion)\n\t                            return [3 /*break*/, 2];\n\t                        return [4 /*yield*/, Database.put('Ids', { type: 'WORKER1_ONE_SIGNAL_SW_VERSION', id: state.workerVersion })];\n\t                    case 1:\n\t                        _a.sent();\n\t                        _a.label = 2;\n\t                    case 2:\n\t                        if (!state.updaterWorkerVersion)\n\t                            return [3 /*break*/, 4];\n\t                        return [4 /*yield*/, Database.put('Ids', { type: 'WORKER2_ONE_SIGNAL_SW_VERSION', id: state.updaterWorkerVersion })];\n\t                    case 3:\n\t                        _a.sent();\n\t                        _a.label = 4;\n\t                    case 4:\n\t                        if (!state.backupNotification)\n\t                            return [3 /*break*/, 6];\n\t                        return [4 /*yield*/, Database.put('Ids', { type: 'backupNotification', id: state.backupNotification })];\n\t                    case 5:\n\t                        _a.sent();\n\t                        _a.label = 6;\n\t                    case 6: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.getSubscription = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var subscription, _a, _b, _c, dbOptedOut, dbNotOptedOut;\n\t            return __generator(this, function (_d) {\n\t                switch (_d.label) {\n\t                    case 0:\n\t                        subscription = new Subscription_1.Subscription();\n\t                        _a = subscription;\n\t                        return [4 /*yield*/, Database.get('Ids', 'userId')];\n\t                    case 1:\n\t                        _a.deviceId = _d.sent();\n\t                        _b = subscription;\n\t                        return [4 /*yield*/, Database.get('Options', 'subscriptionEndpoint')];\n\t                    case 2:\n\t                        _b.pushEndpoint = _d.sent();\n\t                        _c = subscription;\n\t                        return [4 /*yield*/, Database.get('Ids', 'registrationId')];\n\t                    case 3:\n\t                        _c.pushToken = _d.sent();\n\t                        return [4 /*yield*/, Database.get('Options', 'optedOut')];\n\t                    case 4:\n\t                        dbOptedOut = _d.sent();\n\t                        return [4 /*yield*/, Database.get('Options', 'subscription')];\n\t                    case 5:\n\t                        dbNotOptedOut = _d.sent();\n\t                        if (dbOptedOut != null) {\n\t                            subscription.optedOut = dbOptedOut;\n\t                        }\n\t                        else {\n\t                            if (dbNotOptedOut == null) {\n\t                                subscription.optedOut = false;\n\t                            }\n\t                            else {\n\t                                subscription.optedOut = !dbNotOptedOut;\n\t                            }\n\t                        }\n\t                        return [2 /*return*/, subscription];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Database.setSubscription = function (subscription) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!subscription.deviceId)\n\t                            return [3 /*break*/, 2];\n\t                        return [4 /*yield*/, Database.put('Ids', { type: 'userId', id: subscription.deviceId })];\n\t                    case 1:\n\t                        _a.sent();\n\t                        _a.label = 2;\n\t                    case 2:\n\t                        if (!subscription.pushEndpoint)\n\t                            return [3 /*break*/, 4];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'subscriptionEndpoint', value: subscription.pushEndpoint })];\n\t                    case 3:\n\t                        _a.sent();\n\t                        _a.label = 4;\n\t                    case 4:\n\t                        if (!subscription.pushToken)\n\t                            return [3 /*break*/, 6];\n\t                        return [4 /*yield*/, Database.put('Ids', { type: 'registrationId', id: subscription.pushToken })];\n\t                    case 5:\n\t                        _a.sent();\n\t                        _a.label = 6;\n\t                    case 6:\n\t                        if (!(subscription.optedOut != null))\n\t                            return [3 /*break*/, 8];\n\t                        return [4 /*yield*/, Database.put('Options', { key: 'optedOut', value: subscription.optedOut })];\n\t                    case 7:\n\t                        _a.sent();\n\t                        _a.label = 8;\n\t                    case 8: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Asynchronously removes the Ids, NotificationOpened, and Options tables from the database and recreates them with blank values.\n\t     * @returns {Promise} Returns a promise that is fulfilled when rebuilding is completed, or rejects with an error.\n\t     */\n\t    Database.rebuild = function () {\n\t        return Promise.all([\n\t            Database.remove('Ids'),\n\t            Database.remove('NotificationOpened'),\n\t            Database.remove('Options'),\n\t        ]);\n\t    };\n\t    Database.printIds = function () {\n\t        return Promise.all([\n\t            Database.get('Ids', 'appId'),\n\t            Database.get('Ids', 'registrationId'),\n\t            Database.get('Ids', 'userId')\n\t        ]).then(function (_a) {\n\t            var appId = _a[0], registrationId = _a[1], userId = _a[2];\n\t            if (console.table) {\n\t                console.table({ 'OneSignal Database IDs': {\n\t                        'App ID': appId,\n\t                        'Registration ID': registrationId,\n\t                        'User ID': userId\n\t                    } });\n\t            }\n\t            else {\n\t                log.info('App ID:', appId);\n\t                log.info('Registration ID:', registrationId);\n\t                log.info('User ID:', userId);\n\t            }\n\t        });\n\t    };\n\t    return Database;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Database;\n\their.merge(Database, new EventEmitter());\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Environment_1 = __webpack_require__(4);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar Database_1 = __webpack_require__(5);\n\tvar Browser = __webpack_require__(8);\n\tvar utils_1 = __webpack_require__(1);\n\tvar MainHelper_1 = __webpack_require__(11);\n\tvar ServiceWorkerHelper_1 = __webpack_require__(17);\n\tvar EventHelper_1 = __webpack_require__(12);\n\tvar PushPermissionNotGrantedError_1 = __webpack_require__(34);\n\tvar TestHelper_1 = __webpack_require__(36);\n\tvar SubscriptionHelper = (function () {\n\t    function SubscriptionHelper() {\n\t    }\n\t    /**\n\t     * Returns a Promise resolving to whether user subscriptions should be reset. This means clearing all of IndexedDB\n\t     * and actually unsubscribing from push notifications.\n\t     *\n\t     * Subscriptions are only wiped if the following conditions are met:\n\t     *   - The flag dangerouslyResetUserSubscriptions is set to any string  (used to name the \"reset session\")\n\t     *   - This user wasn't already reset (does this \"reset session name\" exist already)\n\t     *   - The site is using an HTTPS native integration  (HTTP sites can only reset subscriptions when the popup is open)\n\t     */\n\t    SubscriptionHelper.shouldResetUserSubscription = function () {\n\t        return Promise.all([\n\t            OneSignal.config.dangerouslyResetUserSubscriptions,\n\t            Database_1.default.get('Options', 'userSubscriptionResetToken'),\n\t            SubscriptionHelper.isUsingSubscriptionWorkaround()\n\t        ]).then(function (_a) {\n\t            var isFlagPresent = _a[0], resetToken = _a[1], isUsingWorkaround = _a[2];\n\t            return (isFlagPresent &&\n\t                resetToken !== OneSignal.config.dangerouslyResetUserSubscriptions && !isUsingWorkaround);\n\t        });\n\t    };\n\t    SubscriptionHelper.checkAndWipeUserSubscription = function () {\n\t        return Promise.all([\n\t            OneSignal.isPushNotificationsEnabled(),\n\t            SubscriptionHelper.shouldResetUserSubscription()\n\t        ]).then(function (_a) {\n\t            var wasPushOriginallyEnabled = _a[0], shouldResetSubscription = _a[1];\n\t            if (shouldResetSubscription) {\n\t                log.warn(\"OneSignal: Resetting user subscription. Wiping IndexedDB, unsubscribing from, \" +\n\t                    \"and resubscribing to push...\");\n\t                sessionStorage.clear();\n\t                return Database_1.default.rebuild()\n\t                    .then(function () { return Database_1.default.put('Options', { key: 'pageTitle', value: document.title }); })\n\t                    .then(function () { return utils_1.unsubscribeFromPush(); })\n\t                    .then(function () { return Database_1.default.put('Options', {\n\t                    key: 'userSubscriptionResetToken',\n\t                    value: OneSignal.config.dangerouslyResetUserSubscriptions\n\t                }); })\n\t                    .then(function () {\n\t                    if (wasPushOriginallyEnabled) {\n\t                        OneSignal.__doNotShowWelcomeNotification = true;\n\t                        log.warn('Wiped subscription and attempting to resubscribe.');\n\t                        return Database_1.default.put('Ids', { type: 'appId', id: OneSignal.config.appId });\n\t                    }\n\t                    else {\n\t                        Promise.reject('Wiped subscription, but not resubscribing because user was not originally subscribed.');\n\t                    }\n\t                })\n\t                    .then(function () {\n\t                    OneSignal.registerForPushNotifications();\n\t                });\n\t            }\n\t        });\n\t    };\n\t    SubscriptionHelper.registerForW3CPush = function (options) {\n\t        log.debug(\"Called %cregisterForW3CPush(\" + JSON.stringify(options) + \")\", utils_1.getConsoleStyle('code'));\n\t        return Database_1.default.get('Ids', 'registrationId')\n\t            .then(function _registerForW3CPush_GotRegistrationId(registrationIdResult) {\n\t            if (!registrationIdResult || !options.fromRegisterFor || window.Notification.permission != \"granted\" || navigator.serviceWorker.controller == null) {\n\t                navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\n\t                    var sw_path = \"\";\n\t                    if (OneSignal.config.path)\n\t                        sw_path = OneSignal.config.path;\n\t                    if (typeof serviceWorkerRegistration === \"undefined\")\n\t                        ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                    else {\n\t                        if (serviceWorkerRegistration.active) {\n\t                            var previousWorkerUrl = serviceWorkerRegistration.active.scriptURL;\n\t                            if (utils_1.contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_PATH)) {\n\t                                // OneSignalSDKWorker.js was installed\n\t                                Database_1.default.get('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION')\n\t                                    .then(function (version) {\n\t                                    if (version) {\n\t                                        if (version != OneSignal._VERSION) {\n\t                                            log.info(\"Installing new service worker (\" + version + \" -> \" + OneSignal._VERSION + \")\");\n\t                                            ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n\t                                        }\n\t                                        else\n\t                                            ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                                    }\n\t                                    else\n\t                                        ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n\t                                });\n\t                            }\n\t                            else if (utils_1.contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH)) {\n\t                                // OneSignalSDKUpdaterWorker.js was installed\n\t                                Database_1.default.get('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION')\n\t                                    .then(function (version) {\n\t                                    if (version) {\n\t                                        if (version != OneSignal._VERSION) {\n\t                                            log.info(\"Installing new service worker (\" + version + \" -> \" + OneSignal._VERSION + \")\");\n\t                                            ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                                        }\n\t                                        else\n\t                                            ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\n\t                                    }\n\t                                    else\n\t                                        ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                                });\n\t                            }\n\t                            else {\n\t                                // Some other service worker not belonging to us was installed\n\t                                // Install ours over it after unregistering theirs to get a different registration token and avoid mismatchsenderid error\n\t                                log.info('Unregistering previous service worker:', serviceWorkerRegistration);\n\t                                serviceWorkerRegistration.unregister().then(function (unregistrationSuccessful) {\n\t                                    log.info('Result of unregistering:', unregistrationSuccessful);\n\t                                    ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                                });\n\t                            }\n\t                        }\n\t                        else if (serviceWorkerRegistration.installing == null)\n\t                            ServiceWorkerHelper_1.default.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\n\t                    }\n\t                });\n\t            }\n\t        });\n\t    };\n\t    SubscriptionHelper.enableNotifications = function (existingServiceWorkerRegistration) {\n\t        log.debug(\"Called %cenableNotifications()\", utils_1.getConsoleStyle('code'));\n\t        if (!('PushManager' in window)) {\n\t            log.info(\"Push messaging is not supported. No PushManager.\");\n\t            MainHelper_1.default.beginTemporaryBrowserSession();\n\t            return;\n\t        }\n\t        if (window.Notification.permission === 'denied') {\n\t            log.warn(\"The user has blocked notifications.\");\n\t            return;\n\t        }\n\t        log.debug(\"Calling %cnavigator.serviceWorker.ready() ...\", utils_1.getConsoleStyle('code'));\n\t        navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\n\t            log.debug('Finished calling %cnavigator.serviceWorker.ready', utils_1.getConsoleStyle('code'));\n\t            MainHelper_1.default.establishServiceWorkerChannel(serviceWorkerRegistration);\n\t            SubscriptionHelper.subscribeForPush(serviceWorkerRegistration);\n\t        });\n\t    };\n\t    /**\n\t     * Returns true if web push subscription occurs on a subdomain of OneSignal.\n\t     * If true, our main IndexedDB is stored on the subdomain of onesignal.com, and not the user's site.\n\t     * @remarks\n\t     *   This method returns true if:\n\t     *     - The browser is not Safari\n\t     *         - Safari uses a different method of subscription and does not require our workaround\n\t     *     - The init parameters contain a subdomain (even if the protocol is HTTPS)\n\t     *         - HTTPS users using our subdomain workaround still have the main IndexedDB stored on our subdomain\n\t     *        - The protocol of the current webpage is http:\n\t     *   Exceptions are:\n\t     *     - Safe hostnames like localhost and 127.0.0.1\n\t     *          - Because we don't want users to get the wrong idea when testing on localhost that direct permission is supported on HTTP, we'll ignore these exceptions. HTTPS will always be required for direct permission\n\t     *        - We are already in popup or iFrame mode, or this is called from the service worker\n\t     */\n\t    SubscriptionHelper.isUsingSubscriptionWorkaround = function () {\n\t        if (!OneSignal.config) {\n\t            throw new Error(\"(\" + Environment_1.default.getEnv() + \") isUsingSubscriptionWorkaround() cannot be called until OneSignal.config exists.\");\n\t        }\n\t        if (Browser.safari) {\n\t            return false;\n\t        }\n\t        if (SubscriptionHelper.isLocalhostAllowedAsSecureOrigin() &&\n\t            location.hostname === 'localhost' ||\n\t            location.hostname === '127.0.0.1') {\n\t            return false;\n\t        }\n\t        return (Environment_1.default.isHost() &&\n\t            (!!OneSignal.config.subdomainName || location.protocol === 'http:'));\n\t    };\n\t    SubscriptionHelper.isLocalhostAllowedAsSecureOrigin = function () {\n\t        return OneSignal.config && OneSignal.config.allowLocalhostAsSecureOrigin === true;\n\t    };\n\t    SubscriptionHelper.subscribeForPush = function (serviceWorkerRegistration) {\n\t        log.debug(\"Called %c_subscribeForPush()\", utils_1.getConsoleStyle('code'));\n\t        var notificationPermissionBeforeRequest = '';\n\t        OneSignal.getNotificationPermission().then(function (permission) {\n\t            notificationPermissionBeforeRequest = permission;\n\t        })\n\t            .then(function () {\n\t            log.debug(\"Calling %cServiceWorkerRegistration.pushManager.subscribe()\", utils_1.getConsoleStyle('code'));\n\t            Event_1.default.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED);\n\t            /*\n\t             7/29/16: If the user dismisses the prompt, the prompt cannot be shown again via pushManager.subscribe()\n\t             See: https://bugs.chromium.org/p/chromium/issues/detail?id=621461\n\t             Our solution is to call Notification.requestPermission(), and then call\n\t             pushManager.subscribe(). Because notification and push permissions are shared, the subesequent call to\n\t             pushManager.subscribe() will go through successfully.\n\t             */\n\t            return MainHelper_1.default.requestNotificationPermissionPromise();\n\t        })\n\t            .then(function (permission) {\n\t            if (permission !== \"granted\") {\n\t                throw new PushPermissionNotGrantedError_1.default();\n\t            }\n\t            else {\n\t                return utils_1.executeAndTimeoutPromiseAfter(serviceWorkerRegistration.pushManager.subscribe({ userVisibleOnly: true }), 15000, \"A possible Chrome bug (https://bugs.chromium.org/p/chromium/issues/detail?id=623062) is preventing this subscription from completing.\");\n\t            }\n\t        })\n\t            .then(function (subscription) {\n\t            /*\n\t             7/29/16: New bug, even if the user dismisses the prompt, they'll be given a subscription\n\t             See: https://bugs.chromium.org/p/chromium/issues/detail?id=621461\n\t             Our solution is simply to check the permission before actually subscribing the user.\n\t             */\n\t            log.debug(\"Finished calling %cServiceWorkerRegistration.pushManager.subscribe()\", utils_1.getConsoleStyle('code'));\n\t            log.debug('Subscription details:', subscription);\n\t            // The user allowed the notification permission prompt, or it was already allowed; set sessionInit flag to false\n\t            OneSignal._sessionInitAlreadyRunning = false;\n\t            sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", window.Notification.permission);\n\t            MainHelper_1.default.getAppId()\n\t                .then(function (appId) {\n\t                log.debug(\"Finished subscribing for push via pushManager.subscribe().\");\n\t                var subscriptionInfo = {};\n\t                if (subscription) {\n\t                    if (typeof (subscription).subscriptionId != \"undefined\") {\n\t                        // Chrome 43 & 42\n\t                        subscriptionInfo.endpointOrToken = subscription.subscriptionId;\n\t                    }\n\t                    else {\n\t                        // Chrome 44+ and FireFox\n\t                        // 4/13/16: We now store the full endpoint instead of just the registration token\n\t                        subscriptionInfo.endpointOrToken = subscription.endpoint;\n\t                    }\n\t                    // 4/13/16: Retrieve p256dh and auth for new encrypted web push protocol in Chrome 50\n\t                    if (subscription.getKey) {\n\t                        // p256dh and auth are both ArrayBuffer\n\t                        var p256dh = null;\n\t                        try {\n\t                            p256dh = subscription.getKey('p256dh');\n\t                        }\n\t                        catch (e) {\n\t                        }\n\t                        var auth = null;\n\t                        try {\n\t                            auth = subscription.getKey('auth');\n\t                        }\n\t                        catch (e) {\n\t                        }\n\t                        if (p256dh) {\n\t                            // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\n\t                            var p256dh_base64encoded = btoa(String.fromCharCode.apply(null, new Uint8Array(p256dh)));\n\t                            subscriptionInfo.p256dh = p256dh_base64encoded;\n\t                        }\n\t                        if (auth) {\n\t                            // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\n\t                            var auth_base64encoded = btoa(String.fromCharCode.apply(null, new Uint8Array(auth)));\n\t                            subscriptionInfo.auth = auth_base64encoded;\n\t                        }\n\t                    }\n\t                }\n\t                else\n\t                    log.warn('Could not subscribe your browser for push notifications.');\n\t                if (OneSignal._thisIsThePopup) {\n\t                    // 12/16/2015 -- At this point, the user has just clicked Allow on the HTTP popup!!\n\t                    // 11/22/2016 - HTTP popup should move non-essential subscription parts to the iframe\n\t                    OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION, {\n\t                        subscriptionInfo: subscriptionInfo\n\t                    }, function (message) {\n\t                        if (message.data.progress === true) {\n\t                            log.debug('Got message from host page that remote reg. is in progress, closing popup.');\n\t                            var creator = opener || parent;\n\t                            if (opener) {\n\t                                /* Note: This is hard to find, but this is actually the code that closes the HTTP popup window */\n\t                                window.close();\n\t                            }\n\t                        }\n\t                        else {\n\t                            log.debug('Got message from host page that remote reg. could not be finished.');\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                    // If we are not doing HTTP subscription, continue finish subscribing by registering with OneSignal\n\t                    MainHelper_1.default.registerWithOneSignal(appId, subscriptionInfo);\n\t                }\n\t            });\n\t        })\n\t            .catch(function (e) {\n\t            OneSignal._sessionInitAlreadyRunning = false;\n\t            if (e.message === 'Registration failed - no sender id provided' || e.message === 'Registration failed - manifest empty or missing') {\n\t                var manifestDom = document.querySelector('link[rel=manifest]');\n\t                if (manifestDom) {\n\t                    var manifestParentTagname = document.querySelector('link[rel=manifest]').parentNode.tagName.toLowerCase();\n\t                    var manifestHtml = document.querySelector('link[rel=manifest]').outerHTML;\n\t                    var manifestLocation = document.querySelector('link[rel=manifest]').href;\n\t                    if (manifestParentTagname !== 'head') {\n\t                        log.warn(\"OneSignal: Your manifest %c\" + manifestHtml, utils_1.getConsoleStyle('code'), 'must be referenced in the <head> tag to be detected properly. It is currently referenced ' +\n\t                            'in <${manifestParentTagname}>. Please see step 3.1 at ' +\n\t                            'https://documentation.onesignal.com/docs/web-push-sdk-setup-https.');\n\t                    }\n\t                    else {\n\t                        var manifestLocationOrigin = new URL(manifestLocation).origin;\n\t                        var currentOrigin = location.origin;\n\t                        if (currentOrigin !== manifestLocationOrigin) {\n\t                            log.warn(\"OneSignal: Your manifest is being served from \" + manifestLocationOrigin + \", which is \" +\n\t                                (\"different from the current page's origin of \" + currentOrigin + \". Please serve your \") +\n\t                                \"manifest from the same origin as your page's. If you are using a content delivery \" +\n\t                                \"network (CDN), please add an exception so that the manifest is not served by your CDN. \" +\n\t                                \"WordPress users, please see \" +\n\t                                \"https://documentation.onesignal.com/docs/troubleshooting-web-push#section-wordpress-cdn-support.\");\n\t                        }\n\t                        else {\n\t                            log.warn(\"OneSignal: Please check your manifest at \" + manifestLocation + \". The %cgcm_sender_id\", utils_1.getConsoleStyle('code'), \"field is missing or invalid, and a valid value is required. Please see step 2 at \" +\n\t                                \"https://documentation.onesignal.com/docs/web-push-sdk-setup-https.\");\n\t                        }\n\t                    }\n\t                }\n\t                else if (location.protocol === 'https:') {\n\t                    log.warn(\"OneSignal: You must reference a %cmanifest.json\", utils_1.getConsoleStyle('code'), \"in the <head> of your page. Please see step 2 at \" +\n\t                        \"https://documentation.onesignal.com/docs/web-push-sdk-setup-https.\");\n\t                }\n\t            }\n\t            else {\n\t                log.error('Error while subscribing for push:', e);\n\t            }\n\t            // In Chrome, closing a tab while the prompt is displayed is the same as dismissing the prompt by clicking X\n\t            // Our SDK receives the same event as if the user clicked X, when in fact the user just closed the tab. If\n\t            // we had some code that prevented showing the prompt for 8 hours, the user would accidentally not be able\n\t            // to subscribe.\n\t            // New addition (12/22/2015), adding support for detecting the cancel 'X'\n\t            // Chrome doesn't show when the user clicked 'X' for cancel\n\t            // We get the same error as if the user had clicked denied, but we can check Notification.permission to see if it is still 'default'\n\t            OneSignal.getNotificationPermission().then(function (permission) {\n\t                if (permission === 'default') {\n\t                    // The user clicked 'X'\n\t                    EventHelper_1.default.triggerNotificationPermissionChanged(true);\n\t                    TestHelper_1.default.markHttpsNativePromptDismissed();\n\t                }\n\t                if (!OneSignal._usingNativePermissionHook)\n\t                    EventHelper_1.default.triggerNotificationPermissionChanged();\n\t                if (opener && OneSignal._thisIsThePopup)\n\t                    window.close();\n\t            });\n\t            // If there was an error subscribing like the timeout bug, close the popup anyways\n\t            if (opener && OneSignal._thisIsThePopup)\n\t                window.close();\n\t        });\n\t    };\n\t    return SubscriptionHelper;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = SubscriptionHelper;\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar Environment_1 = __webpack_require__(4);\n\texports.DEV_HOST = 'https://oregon:3001';\n\texports.DEV_FRAME_HOST = 'https://washington.localhost:3001';\n\texports.DEV_PREFIX = 'Dev-';\n\texports.PROD_HOST = 'https://onesignal.com';\n\texports.STAGING_HOST = 'https://onesignal-staging.pw';\n\texports.STAGING_FRAME_HOST = 'https://washington.onesignal-staging.pw';\n\texports.STAGING_PREFIX = 'Staging-';\n\tvar HOST_URL;\n\texports.HOST_URL = HOST_URL;\n\tvar API_URL;\n\texports.API_URL = API_URL;\n\tif (Environment_1.default.isDev()) {\n\t    exports.HOST_URL = HOST_URL = exports.DEV_HOST;\n\t    exports.API_URL = API_URL = exports.DEV_HOST + '/api/v1/';\n\t}\n\telse if (Environment_1.default.isStaging()) {\n\t    exports.HOST_URL = HOST_URL = exports.STAGING_HOST;\n\t    exports.API_URL = API_URL = exports.STAGING_HOST + '/api/v1/';\n\t}\n\telse {\n\t    exports.HOST_URL = HOST_URL = exports.PROD_HOST;\n\t    exports.API_URL = API_URL = exports.PROD_HOST + '/api/v1/';\n\t}\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*!\n\t * Bowser - a browser detector\n\t * https://github.com/ded/bowser\n\t * MIT License | (c) Dustin Diaz 2015\n\t */\n\t\n\t!function (name, definition) {\n\t  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n\t  else if (true) __webpack_require__(75)(name, definition)\n\t  else this[name] = definition()\n\t}('bowser', function () {\n\t  /**\n\t    * See useragents.js for examples of navigator.userAgent\n\t    */\n\t\n\t  var t = true\n\t\n\t  function detect(ua) {\n\t\n\t    function getFirstMatch(regex) {\n\t      var match = ua.match(regex);\n\t      return (match && match.length > 1 && match[1]) || '';\n\t    }\n\t\n\t    function getSecondMatch(regex) {\n\t      var match = ua.match(regex);\n\t      return (match && match.length > 1 && match[2]) || '';\n\t    }\n\t\n\t    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n\t      , likeAndroid = /like android/i.test(ua)\n\t      , android = !likeAndroid && /android/i.test(ua)\n\t      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n\t      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n\t      , chromeos = /CrOS/.test(ua)\n\t      , silk = /silk/i.test(ua)\n\t      , sailfish = /sailfish/i.test(ua)\n\t      , tizen = /tizen/i.test(ua)\n\t      , webos = /(web|hpw)os/i.test(ua)\n\t      , windowsphone = /windows phone/i.test(ua)\n\t      , samsungBrowser = /SamsungBrowser/i.test(ua)\n\t      , windows = !windowsphone && /windows/i.test(ua)\n\t      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n\t      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n\t      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n\t      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n\t      , tablet = /tablet/i.test(ua)\n\t      , mobile = !tablet && /[^-]mobi/i.test(ua)\n\t      , xbox = /xbox/i.test(ua)\n\t      , result\n\t\n\t    if (/opera/i.test(ua)) {\n\t      //  an old Opera\n\t      result = {\n\t        name: 'Opera'\n\t      , opera: t\n\t      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t    } else if (/opr|opios/i.test(ua)) {\n\t      // a new Opera\n\t      result = {\n\t        name: 'Opera'\n\t        , opera: t\n\t        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n\t      }\n\t    }\n\t    else if (/SamsungBrowser/i.test(ua)) {\n\t      result = {\n\t        name: 'Samsung Internet for Android'\n\t        , samsungBrowser: t\n\t        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/coast/i.test(ua)) {\n\t      result = {\n\t        name: 'Opera Coast'\n\t        , coast: t\n\t        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/yabrowser/i.test(ua)) {\n\t      result = {\n\t        name: 'Yandex Browser'\n\t      , yandexbrowser: t\n\t      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/ucbrowser/i.test(ua)) {\n\t      result = {\n\t          name: 'UC Browser'\n\t        , ucbrowser: t\n\t        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n\t      }\n\t    }\n\t    else if (/mxios/i.test(ua)) {\n\t      result = {\n\t        name: 'Maxthon'\n\t        , maxthon: t\n\t        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n\t      }\n\t    }\n\t    else if (/epiphany/i.test(ua)) {\n\t      result = {\n\t        name: 'Epiphany'\n\t        , epiphany: t\n\t        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n\t      }\n\t    }\n\t    else if (/puffin/i.test(ua)) {\n\t      result = {\n\t        name: 'Puffin'\n\t        , puffin: t\n\t        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/sleipnir/i.test(ua)) {\n\t      result = {\n\t        name: 'Sleipnir'\n\t        , sleipnir: t\n\t        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n\t      }\n\t    }\n\t    else if (/k-meleon/i.test(ua)) {\n\t      result = {\n\t        name: 'K-Meleon'\n\t        , kMeleon: t\n\t        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n\t      }\n\t    }\n\t    else if (windowsphone) {\n\t      result = {\n\t        name: 'Windows Phone'\n\t      , windowsphone: t\n\t      }\n\t      if (edgeVersion) {\n\t        result.msedge = t\n\t        result.version = edgeVersion\n\t      }\n\t      else {\n\t        result.msie = t\n\t        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/msie|trident/i.test(ua)) {\n\t      result = {\n\t        name: 'Internet Explorer'\n\t      , msie: t\n\t      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    } else if (chromeos) {\n\t      result = {\n\t        name: 'Chrome'\n\t      , chromeos: t\n\t      , chromeBook: t\n\t      , chrome: t\n\t      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    } else if (/chrome.+? edge/i.test(ua)) {\n\t      result = {\n\t        name: 'Microsoft Edge'\n\t      , msedge: t\n\t      , version: edgeVersion\n\t      }\n\t    }\n\t    else if (/vivaldi/i.test(ua)) {\n\t      result = {\n\t        name: 'Vivaldi'\n\t        , vivaldi: t\n\t        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n\t      }\n\t    }\n\t    else if (sailfish) {\n\t      result = {\n\t        name: 'Sailfish'\n\t      , sailfish: t\n\t      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/seamonkey\\//i.test(ua)) {\n\t      result = {\n\t        name: 'SeaMonkey'\n\t      , seamonkey: t\n\t      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n\t      result = {\n\t        name: 'Firefox'\n\t      , firefox: t\n\t      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n\t      }\n\t      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n\t        result.firefoxos = t\n\t      }\n\t    }\n\t    else if (silk) {\n\t      result =  {\n\t        name: 'Amazon Silk'\n\t      , silk: t\n\t      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/phantom/i.test(ua)) {\n\t      result = {\n\t        name: 'PhantomJS'\n\t      , phantom: t\n\t      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/slimerjs/i.test(ua)) {\n\t      result = {\n\t        name: 'SlimerJS'\n\t        , slimer: t\n\t        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n\t      result = {\n\t        name: 'BlackBerry'\n\t      , blackberry: t\n\t      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (webos) {\n\t      result = {\n\t        name: 'WebOS'\n\t      , webos: t\n\t      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n\t      };\n\t      /touchpad\\//i.test(ua) && (result.touchpad = t)\n\t    }\n\t    else if (/bada/i.test(ua)) {\n\t      result = {\n\t        name: 'Bada'\n\t      , bada: t\n\t      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n\t      };\n\t    }\n\t    else if (tizen) {\n\t      result = {\n\t        name: 'Tizen'\n\t      , tizen: t\n\t      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n\t      };\n\t    }\n\t    else if (/qupzilla/i.test(ua)) {\n\t      result = {\n\t        name: 'QupZilla'\n\t        , qupzilla: t\n\t        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n\t      }\n\t    }\n\t    else if (/chromium/i.test(ua)) {\n\t      result = {\n\t        name: 'Chromium'\n\t        , chromium: t\n\t        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n\t      }\n\t    }\n\t    else if (/chrome|crios|crmo/i.test(ua)) {\n\t      result = {\n\t        name: 'Chrome'\n\t        , chrome: t\n\t        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n\t      }\n\t    }\n\t    else if (android) {\n\t      result = {\n\t        name: 'Android'\n\t        , version: versionIdentifier\n\t      }\n\t    }\n\t    else if (/safari|applewebkit/i.test(ua)) {\n\t      result = {\n\t        name: 'Safari'\n\t      , safari: t\n\t      }\n\t      if (versionIdentifier) {\n\t        result.version = versionIdentifier\n\t      }\n\t    }\n\t    else if (iosdevice) {\n\t      result = {\n\t        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n\t      }\n\t      // WTF: version is not part of user agent in web apps\n\t      if (versionIdentifier) {\n\t        result.version = versionIdentifier\n\t      }\n\t    }\n\t    else if(/googlebot/i.test(ua)) {\n\t      result = {\n\t        name: 'Googlebot'\n\t      , googlebot: t\n\t      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n\t      }\n\t    }\n\t    else {\n\t      result = {\n\t        name: getFirstMatch(/^(.*)\\/(.*) /),\n\t        version: getSecondMatch(/^(.*)\\/(.*) /)\n\t     };\n\t   }\n\t\n\t    // set webkit or gecko flag for browsers based on these engines\n\t    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n\t      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n\t        result.name = result.name || \"Blink\"\n\t        result.blink = t\n\t      } else {\n\t        result.name = result.name || \"Webkit\"\n\t        result.webkit = t\n\t      }\n\t      if (!result.version && versionIdentifier) {\n\t        result.version = versionIdentifier\n\t      }\n\t    } else if (!result.opera && /gecko\\//i.test(ua)) {\n\t      result.name = result.name || \"Gecko\"\n\t      result.gecko = t\n\t      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n\t    }\n\t\n\t    // set OS flags for platforms that have multiple browsers\n\t    if (!result.msedge && (android || result.silk)) {\n\t      result.android = t\n\t    } else if (iosdevice) {\n\t      result[iosdevice] = t\n\t      result.ios = t\n\t    } else if (mac) {\n\t      result.mac = t\n\t    } else if (xbox) {\n\t      result.xbox = t\n\t    } else if (windows) {\n\t      result.windows = t\n\t    } else if (linux) {\n\t      result.linux = t\n\t    }\n\t\n\t    // OS version extraction\n\t    var osVersion = '';\n\t    if (result.windowsphone) {\n\t      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n\t    } else if (iosdevice) {\n\t      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n\t      osVersion = osVersion.replace(/[_\\s]/g, '.');\n\t    } else if (android) {\n\t      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n\t    } else if (result.webos) {\n\t      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n\t    } else if (result.blackberry) {\n\t      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n\t    } else if (result.bada) {\n\t      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n\t    } else if (result.tizen) {\n\t      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n\t    }\n\t    if (osVersion) {\n\t      result.osversion = osVersion;\n\t    }\n\t\n\t    // device type extraction\n\t    var osMajorVersion = osVersion.split('.')[0];\n\t    if (\n\t         tablet\n\t      || nexusTablet\n\t      || iosdevice == 'ipad'\n\t      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n\t      || result.silk\n\t    ) {\n\t      result.tablet = t\n\t    } else if (\n\t         mobile\n\t      || iosdevice == 'iphone'\n\t      || iosdevice == 'ipod'\n\t      || android\n\t      || nexusMobile\n\t      || result.blackberry\n\t      || result.webos\n\t      || result.bada\n\t    ) {\n\t      result.mobile = t\n\t    }\n\t\n\t    // Graded Browser Support\n\t    // http://developer.yahoo.com/yui/articles/gbs\n\t    if (result.msedge ||\n\t        (result.msie && result.version >= 10) ||\n\t        (result.yandexbrowser && result.version >= 15) ||\n\t\t\t    (result.vivaldi && result.version >= 1.0) ||\n\t        (result.chrome && result.version >= 20) ||\n\t        (result.samsungBrowser && result.version >= 4) ||\n\t        (result.firefox && result.version >= 20.0) ||\n\t        (result.safari && result.version >= 6) ||\n\t        (result.opera && result.version >= 10.0) ||\n\t        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n\t        (result.blackberry && result.version >= 10.1)\n\t        || (result.chromium && result.version >= 20)\n\t        ) {\n\t      result.a = t;\n\t    }\n\t    else if ((result.msie && result.version < 10) ||\n\t        (result.chrome && result.version < 20) ||\n\t        (result.firefox && result.version < 20.0) ||\n\t        (result.safari && result.version < 6) ||\n\t        (result.opera && result.version < 10.0) ||\n\t        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n\t        || (result.chromium && result.version < 20)\n\t        ) {\n\t      result.c = t\n\t    } else result.x = t\n\t\n\t    return result\n\t  }\n\t\n\t  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\t\n\t  bowser.test = function (browserList) {\n\t    for (var i = 0; i < browserList.length; ++i) {\n\t      var browserItem = browserList[i];\n\t      if (typeof browserItem=== 'string') {\n\t        if (browserItem in bowser) {\n\t          return true;\n\t        }\n\t      }\n\t    }\n\t    return false;\n\t  }\n\t\n\t  /**\n\t   * Get version precisions count\n\t   *\n\t   * @example\n\t   *   getVersionPrecision(\"1.10.3\") // 3\n\t   *\n\t   * @param  {string} version\n\t   * @return {number}\n\t   */\n\t  function getVersionPrecision(version) {\n\t    return version.split(\".\").length;\n\t  }\n\t\n\t  /**\n\t   * Array::map polyfill\n\t   *\n\t   * @param  {Array} arr\n\t   * @param  {Function} iterator\n\t   * @return {Array}\n\t   */\n\t  function map(arr, iterator) {\n\t    var result = [], i;\n\t    if (Array.prototype.map) {\n\t      return Array.prototype.map.call(arr, iterator);\n\t    }\n\t    for (i = 0; i < arr.length; i++) {\n\t      result.push(iterator(arr[i]));\n\t    }\n\t    return result;\n\t  }\n\t\n\t  /**\n\t   * Calculate browser version weight\n\t   *\n\t   * @example\n\t   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n\t   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n\t   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n\t   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n\t   *\n\t   * @param  {Array<String>} versions versions to compare\n\t   * @return {Number} comparison result\n\t   */\n\t  function compareVersions(versions) {\n\t    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n\t    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n\t    var chunks = map(versions, function (version) {\n\t      var delta = precision - getVersionPrecision(version);\n\t\n\t      // 2) \"9\" -> \"9.0\" (for precision = 2)\n\t      version = version + new Array(delta + 1).join(\".0\");\n\t\n\t      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n\t      return map(version.split(\".\"), function (chunk) {\n\t        return new Array(20 - chunk.length).join(\"0\") + chunk;\n\t      }).reverse();\n\t    });\n\t\n\t    // iterate in reverse order by reversed chunks array\n\t    while (--precision >= 0) {\n\t      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n\t      if (chunks[0][precision] > chunks[1][precision]) {\n\t        return 1;\n\t      }\n\t      else if (chunks[0][precision] === chunks[1][precision]) {\n\t        if (precision === 0) {\n\t          // all version chunks are same\n\t          return 0;\n\t        }\n\t      }\n\t      else {\n\t        return -1;\n\t      }\n\t    }\n\t  }\n\t\n\t  /**\n\t   * Check if browser is unsupported\n\t   *\n\t   * @example\n\t   *   bowser.isUnsupportedBrowser({\n\t   *     msie: \"10\",\n\t   *     firefox: \"23\",\n\t   *     chrome: \"29\",\n\t   *     safari: \"5.1\",\n\t   *     opera: \"16\",\n\t   *     phantom: \"534\"\n\t   *   });\n\t   *\n\t   * @param  {Object}  minVersions map of minimal version to browser\n\t   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n\t   * @param  {String}  [ua] user agent string\n\t   * @return {Boolean}\n\t   */\n\t  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n\t    var _bowser = bowser;\n\t\n\t    // make strictMode param optional with ua param usage\n\t    if (typeof strictMode === 'string') {\n\t      ua = strictMode;\n\t      strictMode = void(0);\n\t    }\n\t\n\t    if (strictMode === void(0)) {\n\t      strictMode = false;\n\t    }\n\t    if (ua) {\n\t      _bowser = detect(ua);\n\t    }\n\t\n\t    var version = \"\" + _bowser.version;\n\t    for (var browser in minVersions) {\n\t      if (minVersions.hasOwnProperty(browser)) {\n\t        if (_bowser[browser]) {\n\t          // browser version and min supported version.\n\t          return compareVersions([version, minVersions[browser]]) < 0;\n\t        }\n\t      }\n\t    }\n\t\n\t    return strictMode; // not found\n\t  }\n\t\n\t  /**\n\t   * Check if browser is supported\n\t   *\n\t   * @param  {Object} minVersions map of minimal version to browser\n\t   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n\t   * @param  {String}  [ua] user agent string\n\t   * @return {Boolean}\n\t   */\n\t  function check(minVersions, strictMode, ua) {\n\t    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n\t  }\n\t\n\t  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n\t  bowser.compareVersions = compareVersions;\n\t  bowser.check = check;\n\t\n\t  /*\n\t   * Set our detect method to the main bowser object so we can\n\t   * reuse it to test other user agents.\n\t   * This is needed to implement future tests.\n\t   */\n\t  bowser._detect = detect;\n\t\n\t  return bowser\n\t});\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (e) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (Object.getOwnPropertySymbols) {\n\t\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar ExtendableError = __webpack_require__(64);\n\tvar OneSignalError = (function (_super) {\n\t    __extends(OneSignalError, _super);\n\t    function OneSignalError(message) {\n\t        return _super.call(this, message) || this;\n\t    }\n\t    return OneSignalError;\n\t}(ExtendableError));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = OneSignalError;\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {\"use strict\";\n\tvar vars_1 = __webpack_require__(7);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar OneSignalApi_1 = __webpack_require__(15);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar Database_1 = __webpack_require__(5);\n\tvar Browser = __webpack_require__(8);\n\tvar utils_1 = __webpack_require__(1);\n\tvar objectAssign = __webpack_require__(9);\n\tvar swivel = __webpack_require__(28);\n\tvar Cookie = __webpack_require__(26);\n\tvar HttpModal_1 = __webpack_require__(50);\n\tvar Bell_1 = __webpack_require__(16);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar EventHelper_1 = __webpack_require__(12);\n\tvar MainHelper = (function () {\n\t    function MainHelper() {\n\t    }\n\t    /**\n\t     * If there are multiple manifests, and one of them is our OneSignal manifest, we move it to the top of <head> to ensure our manifest is used for push subscription (manifests after the first are ignored as part of the spec).\n\t     */\n\t    MainHelper.fixWordpressManifestIfMisplaced = function () {\n\t        var manifests = document.querySelectorAll('link[rel=manifest]');\n\t        if (!manifests || manifests.length <= 1) {\n\t            // Multiple manifests do not exist on this webpage; there is no issue\n\t            return;\n\t        }\n\t        for (var i = 0; i < manifests.length; i++) {\n\t            var manifest = manifests[i];\n\t            var url = manifest.href;\n\t            if (utils_1.contains(url, 'gcm_sender_id')) {\n\t                // Move the <manifest> to the first thing in <head>\n\t                document.querySelector('head').insertBefore(manifest, document.querySelector('head').children[0]);\n\t                log.info('OneSignal: Moved the WordPress push <manifest> to the first element in <head>.');\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * If the user has manually opted out of notifications (OneSignal.setSubscription), returns -2; otherwise returns 1.\n\t     * @param isOptedIn The result of OneSignal.getSubscription().\n\t     */\n\t    MainHelper.getNotificationTypeFromOptIn = function (isOptedIn) {\n\t        if (isOptedIn == true || isOptedIn == null) {\n\t            return 1;\n\t        }\n\t        else {\n\t            return -2;\n\t        }\n\t    };\n\t    /*\n\t     Returns the current browser-agnostic notification permission as \"default\", \"granted\", \"denied\".\n\t     safariWebId: Used only to get the current notification permission state in Safari (required as part of the spec).\n\t     */\n\t    MainHelper.getNotificationPermission = function (safariWebId) {\n\t        return utils_1.awaitOneSignalInitAndSupported()\n\t            .then(function () {\n\t            return new Promise(function (resolve, reject) {\n\t                if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                    // User is using our subscription workaround\n\t                    OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION, { safariWebId: safariWebId }, function (reply) {\n\t                        var remoteNotificationPermission = reply.data;\n\t                        resolve(remoteNotificationPermission);\n\t                    });\n\t                }\n\t                else {\n\t                    if (Browser.safari) {\n\t                        // The user is on Safari\n\t                        // A web ID is required to determine the current notificiation permission\n\t                        if (safariWebId) {\n\t                            resolve(window.safari.pushNotification.permission(safariWebId).permission);\n\t                        }\n\t                        else {\n\t                            // The user didn't set up Safari web push properly; notifications are unlikely to be enabled\n\t                            log.debug(\"OneSignal: Invalid init option safari_web_id %c\" + safariWebId, utils_1.getConsoleStyle('code'), '. Please pass in a valid safari_web_id to OneSignal init.');\n\t                        }\n\t                    }\n\t                    else {\n\t                        // Identical API on Firefox and Chrome\n\t                        resolve(window.Notification.permission);\n\t                    }\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Assigns a variable into sessionStorage to represent the beginning of a OneSignal session. A session is\n\t     * initiated by opening a new tab or window to a OneSignal active page. While the same session lasts, refreshes to\n\t     * the same page won't re-subscribe the user to OneSignal or update the last_active or session_count property.\n\t     *\n\t     * This method ensures that the sessionStorage is appropriately set for HTTP sites by communicating with the host\n\t     * page.\n\t     *\n\t     * The only time we do start a browsing session on HTTP is after we register, so we get the popupPostman and post\n\t     * a message back to the host to also start a browsing session.\n\t     */\n\t    MainHelper.beginTemporaryBrowserSession = function () {\n\t        log.debug('OneSignal: Marking browser session as continuing.');\n\t        sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", \"true\");\n\t        if (Environment_1.default.isPopup()) {\n\t            // If we're setting sessionStorage and we're in an Popup, we need to also set sessionStorage on the\n\t            // main page\n\t            if (!OneSignal.popupPostmam) {\n\t                return;\n\t            }\n\t            OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION);\n\t        }\n\t    };\n\t    /**\n\t     * Returns true if the experimental HTTP permission request is being used to prompt the user.\n\t     */\n\t    MainHelper.isUsingHttpPermissionRequest = function () {\n\t        return OneSignal.config.httpPermissionRequest &&\n\t            OneSignal.config.httpPermissionRequest.enable == true &&\n\t            (Environment_1.default.isIframe() ||\n\t                Environment_1.default.isHost() && SubscriptionHelper_1.default.isUsingSubscriptionWorkaround());\n\t    };\n\t    /**\n\t     * Returns true if the site using the HTTP permission request is supplying its own modal prompt to the user.\n\t     */\n\t    MainHelper.isUsingCustomHttpPermissionRequestPostModal = function () {\n\t        return (OneSignal.config.httpPermissionRequest &&\n\t            OneSignal.config.httpPermissionRequest.useCustomModal == true);\n\t    };\n\t    /**\n\t     * Returns true if a session cookie exists for noting the user dismissed the native prompt.\n\t     */\n\t    MainHelper.wasHttpsNativePromptDismissed = function () {\n\t        return Cookie.get('onesignal-notification-prompt') === 'dismissed';\n\t    };\n\t    /**\n\t     * Stores a flag in sessionStorage that we've already shown the HTTP popover to this user and that we should not\n\t     * show it again until they open a new window or tab to the site.\n\t     */\n\t    MainHelper.markHttpPopoverShown = function () {\n\t        sessionStorage.setItem(\"ONESIGNAL_HTTP_PROMPT_SHOWN\", \"true\");\n\t    };\n\t    /**\n\t     * Returns true if the HTTP popover was already shown inside the same session.\n\t     */\n\t    MainHelper.isHttpPromptAlreadyShown = function () {\n\t        return sessionStorage.getItem(\"ONESIGNAL_HTTP_PROMPT_SHOWN\") == \"true\";\n\t    };\n\t    /**\n\t     * Returns true if this current window session is continuing and not a newly opened tab or window.\n\t     */\n\t    MainHelper.isContinuingBrowserSession = function () {\n\t        /*\n\t         We don't need to communicate with any iFrames for HTTP sites because the same sessionStorage is set on all\n\t         frames of the window.\n\t         */\n\t        return sessionStorage.getItem(\"ONE_SIGNAL_SESSION\") == \"true\";\n\t    };\n\t    /**\n\t     * Creates a new or updates an existing OneSignal user (player) on the server.\n\t     *\n\t     * @param appId The app ID passed to init.\n\t     *        subscriptionInfo A hash containing 'endpointOrToken', 'auth', and 'p256dh'.\n\t     *\n\t     * @remarks Called from both the host page and HTTP popup.\n\t     *          If a user already exists and is subscribed, updates the session count by calling /players/:id/on_session; otherwise, a new player is registered via the /players endpoint.\n\t     *          Saves the user ID and registration ID to the local web database after the response from OneSignal.\n\t     */\n\t    MainHelper.registerWithOneSignal = function (appId, subscriptionInfo) {\n\t        var deviceType = utils_1.getDeviceTypeForBrowser();\n\t        return Promise.all([\n\t            OneSignal.getUserId(),\n\t            OneSignal.getSubscription()\n\t        ])\n\t            .then(function (_a) {\n\t            var userId = _a[0], subscription = _a[1];\n\t            var requestUrl = userId ?\n\t                \"players/\" + userId + \"/on_session\" :\n\t                \"players\";\n\t            var requestData = {\n\t                app_id: appId,\n\t                device_type: deviceType,\n\t                language: Environment_1.default.getLanguage(),\n\t                timezone: new Date().getTimezoneOffset() * -60,\n\t                device_model: navigator.platform + \" \" + Browser.name,\n\t                device_os: Browser.version,\n\t                sdk: OneSignal._VERSION,\n\t                notification_types: MainHelper.getNotificationTypeFromOptIn(subscription)\n\t            };\n\t            if (subscriptionInfo) {\n\t                requestData.identifier = subscriptionInfo.endpointOrToken;\n\t                // Although we're passing the full endpoint to OneSignal, we still need to store only the registration ID for our SDK API getRegistrationId()\n\t                // Parse out the registration ID from the full endpoint URL and save it to our database\n\t                var registrationId = subscriptionInfo.endpointOrToken.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\n\t                Database_1.default.put(\"Ids\", { type: \"registrationId\", id: registrationId });\n\t                // New web push standard in Firefox 46+ and Chrome 50+ includes 'auth' and 'p256dh' in PushSubscription\n\t                if (subscriptionInfo.auth) {\n\t                    requestData.web_auth = subscriptionInfo.auth;\n\t                }\n\t                if (subscriptionInfo.p256dh) {\n\t                    requestData.web_p256 = subscriptionInfo.p256dh;\n\t                }\n\t            }\n\t            return OneSignalApi_1.default.post(requestUrl, requestData);\n\t        })\n\t            .then(function (response) {\n\t            var userId = response.id;\n\t            MainHelper.beginTemporaryBrowserSession();\n\t            if (userId) {\n\t                return Database_1.default.put(\"Ids\", { type: \"userId\", id: userId });\n\t            }\n\t        })\n\t            .then(function () {\n\t            // We've finished registering with OneSignal, our session_count and last_active has been updated\n\t            Event_1.default.trigger(OneSignal.EVENTS.REGISTERED);\n\t        });\n\t    };\n\t    MainHelper.checkAndTriggerNotificationPermissionChanged = function () {\n\t        Promise.all([\n\t            Database_1.default.get('Options', 'notificationPermission'),\n\t            OneSignal.getNotificationPermission()\n\t        ])\n\t            .then(function (_a) {\n\t            var previousPermission = _a[0], currentPermission = _a[1];\n\t            if (previousPermission !== currentPermission) {\n\t                EventHelper_1.default.triggerNotificationPermissionChanged()\n\t                    .then(function () { return Database_1.default.put('Options', {\n\t                    key: 'notificationPermission',\n\t                    value: currentPermission\n\t                }); });\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Calls Notification.requestPermission(), but returns a Promise instead of accepting a callback like the a ctual\n\t     * Notification.requestPermission();\n\t     */\n\t    MainHelper.requestNotificationPermissionPromise = function () {\n\t        return new Promise(function (resolve) { return window.Notification.requestPermission(resolve); });\n\t    };\n\t    MainHelper.showNotifyButton = function () {\n\t        if (Environment_1.default.isBrowser() && !OneSignal.notifyButton) {\n\t            OneSignal.config.notifyButton = OneSignal.config.notifyButton || {};\n\t            if (OneSignal.config.bell) {\n\t                // If both bell and notifyButton, notifyButton's options take precedence\n\t                objectAssign(OneSignal.config.bell, OneSignal.config.notifyButton);\n\t                objectAssign(OneSignal.config.notifyButton, OneSignal.config.bell);\n\t            }\n\t            if (OneSignal.config.notifyButton.displayPredicate &&\n\t                typeof OneSignal.config.notifyButton.displayPredicate === \"function\") {\n\t                Promise.resolve(OneSignal.config.notifyButton.displayPredicate())\n\t                    .then(function (predicateValue) {\n\t                    if (predicateValue !== false) {\n\t                        OneSignal.notifyButton = new Bell_1.default(OneSignal.config.notifyButton);\n\t                        OneSignal.notifyButton.create();\n\t                    }\n\t                    else {\n\t                        log.debug('Notify button display predicate returned false so not showing the notify button.');\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                OneSignal.notifyButton = new Bell_1.default(OneSignal.config.notifyButton);\n\t                OneSignal.notifyButton.create();\n\t            }\n\t        }\n\t    };\n\t    MainHelper.getPrefixedServiceWorkerNameForEnv = function () {\n\t        if (Environment_1.default.isDev()) {\n\t            OneSignal.SERVICE_WORKER_PATH = vars_1.DEV_PREFIX + 'OneSignalSDKWorker.js';\n\t            OneSignal.SERVICE_WORKER_UPDATER_PATH = vars_1.DEV_PREFIX + 'OneSignalSDKUpdaterWorker.js';\n\t        }\n\t        else if (Environment_1.default.isStaging()) {\n\t            OneSignal.SERVICE_WORKER_PATH = vars_1.STAGING_PREFIX + 'OneSignalSDKWorker.js';\n\t            OneSignal.SERVICE_WORKER_UPDATER_PATH = vars_1.STAGING_PREFIX + 'OneSignalSDKUpdaterWorker.js';\n\t        }\n\t    };\n\t    MainHelper.checkAndDoHttpPermissionRequest = function () {\n\t        var _this = this;\n\t        log.debug('Called %ccheckAndDoHttpPermissionRequest()', utils_1.getConsoleStyle('code'));\n\t        if (this.isUsingHttpPermissionRequest()) {\n\t            if (OneSignal.config.autoRegister) {\n\t                OneSignal.showHttpPermissionRequest({ _sdkCall: true })\n\t                    .then(function (result) {\n\t                    if (result === 'granted' && !_this.isUsingCustomHttpPermissionRequestPostModal()) {\n\t                        log.debug('Showing built-in post HTTP permission request in-page modal because permission is granted and not using custom modal.');\n\t                        _this.showHttpPermissionRequestPostModal(OneSignal.config.httpPermissionRequest);\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                Event_1.default.trigger(OneSignal.EVENTS.TEST_INIT_OPTION_DISABLED);\n\t            }\n\t        }\n\t    };\n\t    MainHelper.getNotificationIcons = function () {\n\t        var url = '';\n\t        return MainHelper.getAppId()\n\t            .then(function (appId) {\n\t            if (!appId) {\n\t                return Promise.reject(null);\n\t            }\n\t            else {\n\t                url = OneSignal._API_URL + \"apps/\" + appId + \"/icon\";\n\t                return url;\n\t            }\n\t        }, function () {\n\t            log.debug('No app ID, not getting notification icon for notify button.');\n\t            return;\n\t        })\n\t            .then(function (url) { return fetch(url); })\n\t            .then(function (response) { return response.json(); })\n\t            .then(function (data) {\n\t            if (data.errors) {\n\t                log.error(\"API call %c\" + url, utils_1.getConsoleStyle('code'), 'failed with:', data.errors);\n\t                throw new Error('Failed to get notification icons.');\n\t            }\n\t            return data;\n\t        });\n\t    };\n\t    MainHelper.establishServiceWorkerChannel = function (serviceWorkerRegistration) {\n\t        if (OneSignal._channel) {\n\t            OneSignal._channel.off('data');\n\t            OneSignal._channel.off('notification.displayed');\n\t            OneSignal._channel.off('notification.clicked');\n\t        }\n\t        OneSignal._channel = swivel.at(serviceWorkerRegistration ? serviceWorkerRegistration.active : null);\n\t        OneSignal._channel.on('data', function handler(context, data) {\n\t            log.debug(\"%c\" + utils_1.capitalize(Environment_1.default.getEnv()) + \" \\u2B38 ServiceWorker:\", utils_1.getConsoleStyle('serviceworkermessage'), data, context);\n\t        });\n\t        OneSignal._channel.on('notification.displayed', function handler(context, data) {\n\t            Event_1.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISPLAYED, data);\n\t        });\n\t        OneSignal._channel.on('notification.clicked', function handler(context, data) {\n\t            Event_1.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED, data);\n\t        });\n\t        OneSignal._channel.on('notification.dismissed', function handler(context, data) {\n\t            Event_1.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISMISSED, data);\n\t        });\n\t    };\n\t    MainHelper.getNormalizedSubdomain = function (subdomain) {\n\t        if (subdomain) {\n\t            return utils_1.normalizeSubdomain(subdomain);\n\t        }\n\t    };\n\t    MainHelper.getPromptOptionsQueryString = function () {\n\t        var promptOptions = OneSignal.config['promptOptions'];\n\t        var promptOptionsStr = '';\n\t        if (promptOptions) {\n\t            var hash = MainHelper.getPromptOptionsPostHash();\n\t            for (var _i = 0, _a = Object.keys(hash); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                var value = hash[key];\n\t                promptOptionsStr += '&' + key + '=' + value;\n\t            }\n\t        }\n\t        return promptOptionsStr;\n\t    };\n\t    /**\n\t     * Shows the modal on the page users must click on after the local notification prompt to trigger the standard\n\t     * HTTP popup window.\n\t     */\n\t    MainHelper.showHttpPermissionRequestPostModal = function (options) {\n\t        OneSignal.httpPermissionRequestPostModal = new HttpModal_1.default(options);\n\t        OneSignal.httpPermissionRequestPostModal.create();\n\t    };\n\t    MainHelper.getPromptOptionsPostHash = function () {\n\t        var promptOptions = OneSignal.config['promptOptions'];\n\t        if (promptOptions) {\n\t            var legacyParams = {\n\t                'exampleNotificationTitleDesktop': 'exampleNotificationTitle',\n\t                'exampleNotificationMessageDesktop': 'exampleNotificationMessage',\n\t                'exampleNotificationTitleMobile': 'exampleNotificationTitle',\n\t                'exampleNotificationMessageMobile': 'exampleNotificationMessage',\n\t            };\n\t            for (var _i = 0, _a = Object.keys(legacyParams); _i < _a.length; _i++) {\n\t                var legacyParamKey = _a[_i];\n\t                var legacyParamValue = legacyParams[legacyParamKey];\n\t                if (promptOptions[legacyParamKey]) {\n\t                    promptOptions[legacyParamValue] = promptOptions[legacyParamKey];\n\t                }\n\t            }\n\t            var allowedPromptOptions = [\n\t                'autoAcceptTitle',\n\t                'siteName',\n\t                'autoAcceptTitle',\n\t                'subscribeText',\n\t                'showGraphic',\n\t                'actionMessage',\n\t                'exampleNotificationTitle',\n\t                'exampleNotificationMessage',\n\t                'exampleNotificationCaption',\n\t                'acceptButtonText',\n\t                'cancelButtonText',\n\t                'timeout',\n\t            ];\n\t            var hash = {};\n\t            for (var i = 0; i < allowedPromptOptions.length; i++) {\n\t                var key = allowedPromptOptions[i];\n\t                var value = promptOptions[key];\n\t                var encoded_value = encodeURIComponent(value);\n\t                if (value || value === false || value === '') {\n\t                    hash[key] = encoded_value;\n\t                }\n\t            }\n\t        }\n\t        return hash;\n\t    };\n\t    MainHelper.triggerCustomPromptClicked = function (clickResult) {\n\t        Event_1.default.trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED, {\n\t            result: clickResult\n\t        });\n\t    };\n\t    MainHelper.autoCorrectSubdomain = function (inputSubdomain) {\n\t        var normalizedSubdomain = MainHelper.getNormalizedSubdomain(inputSubdomain);\n\t        if (normalizedSubdomain !== inputSubdomain) {\n\t            log.info(\"Auto-corrected subdomain '\" + inputSubdomain + \"' to '\" + normalizedSubdomain + \"'.\");\n\t        }\n\t        return normalizedSubdomain;\n\t    };\n\t    MainHelper.createHiddenDomIFrame = function (url, name) {\n\t        var node = document.createElement(\"iframe\");\n\t        node.style.display = \"none\";\n\t        if (!url) {\n\t            url = 'about:blank';\n\t        }\n\t        node.src = url;\n\t        if (name) {\n\t            node.name = name;\n\t        }\n\t        document.body.appendChild(node);\n\t        return node;\n\t    };\n\t    MainHelper.createHiddenSubscriptionDomModal = function (url) {\n\t        var iframeContainer = document.createElement('div');\n\t        iframeContainer.setAttribute('id', 'OneSignal-iframe-modal');\n\t        iframeContainer.setAttribute('style', 'display:none !important');\n\t        iframeContainer.innerHTML = '<div id=\"notif-permission\" style=\"background: rgba(0, 0, 0, 0.7); position: fixed;' +\n\t            ' top: 0; left: 0; right: 0; bottom: 0; z-index: 3000000000; display: flex;' +\n\t            ' align-items: center; justify-content: center;\"></div>';\n\t        document.body.appendChild(iframeContainer);\n\t        var iframeContainerStyle = document.createElement('style');\n\t        iframeContainerStyle.innerHTML = \"@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }\";\n\t        document.getElementsByTagName('head')[0].appendChild(iframeContainerStyle);\n\t        var iframe = document.createElement(\"iframe\");\n\t        iframe.className = \"OneSignal-permission-iframe\";\n\t        iframe.setAttribute('frameborder', '0');\n\t        iframe.width = OneSignal._windowWidth.toString();\n\t        iframe.height = OneSignal._windowHeight.toString();\n\t        iframe.src = url;\n\t        document.getElementById(\"notif-permission\").appendChild(iframe);\n\t        return iframe;\n\t    };\n\t    MainHelper.showSubscriptionDomModal = function () {\n\t        var iframeContainer = document.getElementById('OneSignal-iframe-modal');\n\t        iframeContainer.setAttribute('style', '');\n\t    };\n\t    // Arguments :\n\t    //  verb : 'GET'|'POST'\n\t    //  target : an optional opening target (a name, or \"_blank\"), defaults to \"_self\"\n\t    MainHelper.openWindowViaPost = function (url, data, overrides) {\n\t        var form = document.createElement(\"form\");\n\t        form.action = url;\n\t        form.method = 'POST';\n\t        form.target = \"onesignal-http-popup\";\n\t        var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : screen.left;\n\t        var dualScreenTop = window.screenTop != undefined ? window.screenTop : screen.top;\n\t        var thisWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\n\t        var thisHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\n\t        var childWidth = OneSignal._windowWidth;\n\t        var childHeight = OneSignal._windowHeight;\n\t        var left = ((thisWidth / 2) - (childWidth / 2)) + dualScreenLeft;\n\t        var top = ((thisHeight / 2) - (childHeight / 2)) + dualScreenTop;\n\t        if (overrides) {\n\t            if (overrides.childWidth) {\n\t                childWidth = overrides.childWidth;\n\t            }\n\t            if (overrides.childHeight) {\n\t                childHeight = overrides.childHeight;\n\t            }\n\t            if (overrides.left) {\n\t                left = overrides.left;\n\t            }\n\t            if (overrides.top) {\n\t                top = overrides.top;\n\t            }\n\t        }\n\t        var windowRef = window.open('about:blank', \"onesignal-http-popup\", \"'scrollbars=yes, width=\" + childWidth + \", height=\" + childHeight + \", top=\" + top + \", left=\" + left);\n\t        if (data) {\n\t            for (var key in data) {\n\t                var input = document.createElement(\"textarea\");\n\t                input.name = key;\n\t                input.value = typeof data[key] === \"object\" ? JSON.stringify(data[key]) : data[key];\n\t                form.appendChild(input);\n\t            }\n\t        }\n\t        form.style.display = 'none';\n\t        document.body.appendChild(form);\n\t        form.submit();\n\t        document.body.removeChild(form);\n\t        return windowRef;\n\t    };\n\t    ;\n\t    MainHelper.openSubdomainPopup = function (url, data, overrides) {\n\t        return MainHelper.openWindowViaPost(url, data, overrides);\n\t    };\n\t    MainHelper.getAppId = function () {\n\t        if (OneSignal.config.appId) {\n\t            return Promise.resolve(OneSignal.config.appId);\n\t        }\n\t        else\n\t            return Database_1.default.get('Ids', 'appId');\n\t    };\n\t    return MainHelper;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = MainHelper;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\tvar OneSignalApi_1 = __webpack_require__(15);\n\tvar log = __webpack_require__(2);\n\tvar LimitStore_1 = __webpack_require__(14);\n\tvar Event_1 = __webpack_require__(3);\n\tvar Database_1 = __webpack_require__(5);\n\tvar utils_1 = __webpack_require__(1);\n\tvar MainHelper_1 = __webpack_require__(11);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar EventHelper = (function () {\n\t    function EventHelper() {\n\t    }\n\t    EventHelper.onNotificationPermissionChange = function (event) {\n\t        EventHelper.checkAndTriggerSubscriptionChanged();\n\t    };\n\t    EventHelper.onInternalSubscriptionSet = function (optedOut) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                LimitStore_1.default.put('subscription.optedOut', optedOut);\n\t                return [2 /*return*/];\n\t            });\n\t        });\n\t    };\n\t    EventHelper.checkAndTriggerSubscriptionChanged = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var pushEnabled, appState, lastKnownPushEnabled, didStateChange;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        utils_1.logMethodCall('checkAndTriggerSubscriptionChanged');\n\t                        return [4 /*yield*/, OneSignal.isPushNotificationsEnabled()];\n\t                    case 1:\n\t                        pushEnabled = _a.sent();\n\t                        return [4 /*yield*/, Database_1.default.getAppState()];\n\t                    case 2:\n\t                        appState = _a.sent();\n\t                        lastKnownPushEnabled = appState.lastKnownPushEnabled;\n\t                        didStateChange = (lastKnownPushEnabled === null || pushEnabled !== lastKnownPushEnabled);\n\t                        if (!didStateChange)\n\t                            return [2 /*return*/];\n\t                        log.info(\"The user's subscription state changed from \" +\n\t                            ((lastKnownPushEnabled === null ? '(not stored)' : lastKnownPushEnabled) + \" \\u27F6 \" + pushEnabled));\n\t                        appState.lastKnownPushEnabled = pushEnabled;\n\t                        return [4 /*yield*/, Database_1.default.setAppState(appState)];\n\t                    case 3:\n\t                        _a.sent();\n\t                        EventHelper.triggerSubscriptionChanged(pushEnabled);\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    EventHelper._onSubscriptionChanged = function (newSubscriptionState) {\n\t        if (OneSignal.__doNotShowWelcomeNotification) {\n\t            log.debug('Not showing welcome notification because user state was reset.');\n\t            return;\n\t        }\n\t        if (newSubscriptionState === true) {\n\t            Promise.all([\n\t                OneSignal.getUserId(),\n\t                MainHelper_1.default.getAppId()\n\t            ])\n\t                .then(function (_a) {\n\t                var userId = _a[0], appId = _a[1];\n\t                var welcome_notification_opts = OneSignal.config['welcomeNotification'];\n\t                var welcome_notification_disabled = ((welcome_notification_opts !== undefined) &&\n\t                    (welcome_notification_opts['disable'] === true));\n\t                var title = ((welcome_notification_opts !== undefined) &&\n\t                    (welcome_notification_opts['title'] !== undefined) &&\n\t                    (welcome_notification_opts['title'] !== null)) ? welcome_notification_opts['title'] : '';\n\t                var message = ((welcome_notification_opts !== undefined) &&\n\t                    (welcome_notification_opts['message'] !== undefined) &&\n\t                    (welcome_notification_opts['message'] !== null) &&\n\t                    (welcome_notification_opts['message'].length > 0)) ?\n\t                    welcome_notification_opts['message'] :\n\t                    'Thanks for subscribing!';\n\t                var unopenableWelcomeNotificationUrl = new URL(location.href).origin + '?_osp=do_not_open';\n\t                var url = (welcome_notification_opts &&\n\t                    welcome_notification_opts['url'] &&\n\t                    (welcome_notification_opts['url'].length > 0)) ?\n\t                    welcome_notification_opts['url'] :\n\t                    unopenableWelcomeNotificationUrl;\n\t                title = utils_1.decodeHtmlEntities(title);\n\t                message = utils_1.decodeHtmlEntities(message);\n\t                if (!welcome_notification_disabled) {\n\t                    log.debug('Sending welcome notification.');\n\t                    OneSignalApi_1.default.sendNotification(appId, [userId], { 'en': title }, { 'en': message }, url, null, { __isOneSignalWelcomeNotification: true }, undefined);\n\t                    Event_1.default.trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT, { title: title, message: message, url: url });\n\t                }\n\t            });\n\t        }\n\t    };\n\t    EventHelper._onDbValueSet = function (info) {\n\t        /*\n\t         For HTTPS sites, this is how the subscription change event gets fired.\n\t         For HTTP sites, leaving this enabled fires the subscription change event twice. The first event is from Postmam\n\t         remotely re-triggering the db.set event to notify the host page that the popup set the user ID in the db. The second\n\t         event is from Postmam remotely re-triggering the subscription.changed event which is also fired from the popup.\n\t         */\n\t        if (info.type === 'userId' && !SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t            EventHelper.checkAndTriggerSubscriptionChanged();\n\t        }\n\t    };\n\t    EventHelper.onDatabaseRebuilt = function () {\n\t        OneSignal._isNewVisitor = true;\n\t    };\n\t    EventHelper.triggerNotificationPermissionChanged = function (updateIfIdentical) {\n\t        if (updateIfIdentical === void 0) { updateIfIdentical = false; }\n\t        var newPermission, isUpdating;\n\t        return Promise.all([\n\t            OneSignal.getNotificationPermission(),\n\t            Database_1.default.get('Options', 'notificationPermission')\n\t        ])\n\t            .then(function (_a) {\n\t            var currentPermission = _a[0], previousPermission = _a[1];\n\t            newPermission = currentPermission;\n\t            isUpdating = (currentPermission !== previousPermission || updateIfIdentical);\n\t            if (isUpdating) {\n\t                return Database_1.default.put('Options', { key: 'notificationPermission', value: currentPermission });\n\t            }\n\t        })\n\t            .then(function () {\n\t            if (isUpdating) {\n\t                Event_1.default.trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, {\n\t                    to: newPermission\n\t                });\n\t            }\n\t        });\n\t    };\n\t    EventHelper.triggerSubscriptionChanged = function (to) {\n\t        Event_1.default.trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, to);\n\t    };\n\t    /**\n\t     * When notifications are clicked, because the site isn't open, the notification is stored in the database. The next\n\t     * time the page opens, the event is triggered if its less than 5 minutes (usually page opens instantly from click).\n\t     *\n\t     * This method is fired for both HTTPS and HTTP sites, so for HTTP sites, the host URL needs to be used, not the\n\t     * subdomain.onesignal.com URL.\n\t     */\n\t    EventHelper.fireStoredNotificationClicks = function (url) {\n\t        if (url === void 0) { url = document.URL; }\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var appState, pageClickedNotifications, notification, timestamp, minutesSinceNotificationClicked;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, Database_1.default.getAppState()];\n\t                    case 1:\n\t                        appState = _a.sent();\n\t                        pageClickedNotifications = appState.clickedNotifications[url];\n\t                        if (pageClickedNotifications) {\n\t                            // Remove the clicked notification; we've processed it now\n\t                            appState.clickedNotifications[url] = null;\n\t                            Database_1.default.setAppState(appState);\n\t                            notification = pageClickedNotifications.data, timestamp = pageClickedNotifications.timestamp;\n\t                            if (timestamp) {\n\t                                minutesSinceNotificationClicked = (Date.now() - timestamp) / 1000 / 60;\n\t                                if (minutesSinceNotificationClicked > 5)\n\t                                    return [2 /*return*/];\n\t                            }\n\t                            Event_1.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED, notification);\n\t                        }\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    return EventHelper;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = EventHelper;\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\tvar log = __webpack_require__(2);\n\tvar EventEmitter = __webpack_require__(19);\n\tvar heir = __webpack_require__(18);\n\tvar Event_ts_1 = __webpack_require__(3);\n\tvar utils_1 = __webpack_require__(1);\n\tvar Database_1 = __webpack_require__(5);\n\tvar IndexedDb = (function () {\n\t    function IndexedDb() {\n\t    }\n\t    /**\n\t     * Returns an existing instance or creates a new instances of the database.\n\t     * @returns {Promise} Returns a promise that is fulfilled when the database becomes accessible or rejects when an error occurs.\n\t     */\n\t    IndexedDb.getInstance = function () {\n\t        return new Promise(function (resolve, reject) {\n\t            if (IndexedDb._instance) {\n\t                resolve(IndexedDb._instance);\n\t            }\n\t            else {\n\t                try {\n\t                    var request = indexedDB.open(\"ONE_SIGNAL_SDK_DB\", 1);\n\t                }\n\t                catch (e) {\n\t                }\n\t                request.onsuccess = function (_a) {\n\t                    var target = _a.target;\n\t                    var db = target.result;\n\t                    if (IndexedDb._instance) {\n\t                        db.close();\n\t                        resolve(IndexedDb._instance);\n\t                    }\n\t                    else {\n\t                        IndexedDb._instance = db;\n\t                        resolve(db);\n\t                    }\n\t                };\n\t                request.onerror = function (event) {\n\t                    var error = event.target.error;\n\t                    if (utils_1.contains(error.message, 'The operation failed for reasons unrelated to the database itself and not covered by any other error code')) {\n\t                        log.warn(\"OneSignal: IndexedDb web storage is not available on this origin since this profile's IndexedDb schema has been upgraded in a newer version of Firefox. See: https://bugzilla.mozilla.org/show_bug.cgi?id=1236557#c6\");\n\t                    }\n\t                    else {\n\t                        log.error('OneSignal: Unable to open IndexedDB.', error.name + ': ' + error.message);\n\t                        reject(event);\n\t                    }\n\t                };\n\t                request.onupgradeneeded = function (event) {\n\t                    log.info('OneSignal: IndexedDB is being rebuilt or upgraded.', event);\n\t                    var db = event.target.result;\n\t                    db.createObjectStore(\"Ids\", {\n\t                        keyPath: \"type\"\n\t                    });\n\t                    db.createObjectStore(\"NotificationOpened\", {\n\t                        keyPath: \"url\"\n\t                    });\n\t                    db.createObjectStore(\"Options\", {\n\t                        keyPath: \"key\"\n\t                    });\n\t                    Event_ts_1.default.trigger(Database_1.default.EVENTS.REBUILT, null, null);\n\t                };\n\t                request.onversionchange = function (event) {\n\t                    log.debug('The database is about to be deleted.');\n\t                };\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Asynchronously retrieves the value of the key at the table (if key is specified), or the entire table (if key is not specified).\n\t     * @param table The table to retrieve the value from.\n\t     * @param key The key in the table to retrieve the value of. Leave blank to get the entire table.\n\t     * @returns {Promise} Returns a promise that fulfills when the value(s) are available.\n\t     */\n\t    IndexedDb.get = function (table, key) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var db;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, IndexedDb.getInstance()];\n\t                    case 1:\n\t                        db = _a.sent();\n\t                        if (key) {\n\t                            // Return a table-key value\n\t                            return [2 /*return*/, new Promise(function (resolve, reject) {\n\t                                    var request = db.transaction(table).objectStore(table).get(key);\n\t                                    request.onsuccess = function () {\n\t                                        resolve(request.result);\n\t                                    };\n\t                                    request.onerror = function () {\n\t                                        reject(request.error);\n\t                                    };\n\t                                })];\n\t                        }\n\t                        else {\n\t                            // Return all values in table\n\t                            return [2 /*return*/, new Promise(function (resolve, reject) {\n\t                                    var jsonResult = {};\n\t                                    var cursor = db.transaction(table).objectStore(table).openCursor();\n\t                                    cursor.onsuccess = function (event) {\n\t                                        var cursorResult = event.target.result;\n\t                                        if (cursorResult) {\n\t                                            var cursorResultKey = cursorResult.key;\n\t                                            jsonResult[cursorResultKey] = cursorResult.value;\n\t                                            cursorResult.continue();\n\t                                        }\n\t                                        else {\n\t                                            resolve(jsonResult);\n\t                                        }\n\t                                    };\n\t                                    cursor.onerror = function (event) {\n\t                                        reject(cursor.error);\n\t                                    };\n\t                                })];\n\t                        }\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Asynchronously puts the specified value in the specified table.\n\t     * @param table\n\t     * @param key\n\t     */\n\t    IndexedDb.put = function (table, key) {\n\t        return IndexedDb.getInstance().then(function (database) {\n\t            return new Promise(function (resolve, reject) {\n\t                try {\n\t                    var request = database.transaction([table], 'readwrite').objectStore(table).put(key);\n\t                    request.onsuccess = function (event) {\n\t                        resolve(key);\n\t                    };\n\t                    request.onerror = function (e) {\n\t                        log.error('Database PUT Transaction Error:', e);\n\t                        reject(e);\n\t                    };\n\t                }\n\t                catch (e) {\n\t                    log.error('Database PUT Error:', e);\n\t                    reject(e);\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Asynchronously removes the specified key from the table, or if the key is not specified, removes all keys in the table.\n\t     * @returns {Promise} Returns a promise containing a key that is fulfilled when deletion is completed.\n\t     */\n\t    IndexedDb.remove = function (table, key) {\n\t        if (key) {\n\t            // Remove a single key from a table\n\t            var method = \"delete\";\n\t        }\n\t        else {\n\t            // Remove all keys from the table (wipe the table)\n\t            var method = \"clear\";\n\t        }\n\t        return IndexedDb.getInstance().then(function (database) {\n\t            return new Promise(function (resolve, reject) {\n\t                try {\n\t                    var request = database.transaction([table], 'readwrite').objectStore(table)[method](key);\n\t                    request.onsuccess = function (event) {\n\t                        resolve(key);\n\t                    };\n\t                    request.onerror = function (e) {\n\t                        log.error('Database REMOVE Transaction Error:', e);\n\t                        reject(e);\n\t                    };\n\t                }\n\t                catch (e) {\n\t                    log.error('Database REMOVE Error:', e);\n\t                    reject(e);\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Asynchronously removes the Ids, NotificationOpened, and Options tables from the database and recreates them with blank values.\n\t     * @returns {Promise} Returns a promise that is fulfilled when rebuilding is completed, or rejects with an error.\n\t     */\n\t    IndexedDb.rebuild = function () {\n\t        return Promise.all([\n\t            IndexedDb.remove('Ids'),\n\t            IndexedDb.remove('NotificationOpened'),\n\t            IndexedDb.remove('Options'),\n\t        ]);\n\t    };\n\t    return IndexedDb;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = IndexedDb;\n\their.merge(IndexedDb, new EventEmitter());\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t/*\n\t LimitStore.put('colorado', 'rocky');\n\t [\"rocky\"]\n\t LimitStore.put('colorado', 'mountain');\n\t [\"rocky\", \"mountain\"]\n\t LimitStore.put('colorado', 'national');\n\t [\"mountain\", \"national\"]\n\t LimitStore.put('colorado', 'park');\n\t [\"national\", \"park\"]\n\t */\n\tvar LimitStore = (function () {\n\t    function LimitStore() {\n\t    }\n\t    LimitStore.put = function (key, value) {\n\t        if (LimitStore.store[key] === undefined) {\n\t            LimitStore.store[key] = [null, null];\n\t        }\n\t        LimitStore.store[key].push(value);\n\t        if (LimitStore.store[key].length == LimitStore.LIMIT + 1) {\n\t            LimitStore.store[key].shift();\n\t        }\n\t        return LimitStore.store[key];\n\t    };\n\t    LimitStore.get = function (key) {\n\t        if (LimitStore.store[key] === undefined) {\n\t            LimitStore.store[key] = [null, null];\n\t        }\n\t        return LimitStore.store[key];\n\t    };\n\t    LimitStore.getFirst = function (key) {\n\t        return LimitStore.get(key)[0];\n\t    };\n\t    LimitStore.getLast = function (key) {\n\t        return LimitStore.get(key)[1];\n\t    };\n\t    LimitStore.remove = function (key) {\n\t        delete LimitStore.store[key];\n\t    };\n\t    LimitStore.isEmpty = function (key) {\n\t        var values = LimitStore.get(key);\n\t        return values[0] === null && values[1] === null;\n\t    };\n\t    return LimitStore;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/*\n\t LimitStore.put('colorado', 'rocky');\n\t [\"rocky\"]\n\t LimitStore.put('colorado', 'mountain');\n\t [\"rocky\", \"mountain\"]\n\t LimitStore.put('colorado', 'national');\n\t [\"mountain\", \"national\"]\n\t LimitStore.put('colorado', 'park');\n\t [\"national\", \"park\"]\n\t */\n\texports.default = LimitStore;\n\tLimitStore.store = {};\n\tLimitStore.LIMIT = 2;\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {\"use strict\";\n\tvar vars_1 = __webpack_require__(7);\n\tvar log = __webpack_require__(2);\n\tvar utils_1 = __webpack_require__(1);\n\tvar objectAssign = __webpack_require__(9);\n\tvar OneSignalApi = (function () {\n\t    function OneSignalApi() {\n\t    }\n\t    OneSignalApi.get = function (action, data, headers) {\n\t        return OneSignalApi.call('GET', action, data, headers);\n\t    };\n\t    OneSignalApi.post = function (action, data, headers) {\n\t        return OneSignalApi.call('POST', action, data, headers);\n\t    };\n\t    OneSignalApi.put = function (action, data, headers) {\n\t        return OneSignalApi.call('PUT', action, data, headers);\n\t    };\n\t    OneSignalApi.delete = function (action, data, headers) {\n\t        return OneSignalApi.call('DELETE', action, data, headers);\n\t    };\n\t    OneSignalApi.call = function (method, action, data, headers) {\n\t        var callHeaders = new Headers();\n\t        callHeaders.append('SDK-Version', \"onesignal/web/\" + (\"120050\"));\n\t        callHeaders.append('Content-Type', 'application/json;charset=UTF-8');\n\t        if (headers) {\n\t            for (var _i = 0, _a = Object.keys(headers); _i < _a.length; _i++) {\n\t                var key = _a[_i];\n\t                callHeaders.append(key, headers[key]);\n\t            }\n\t        }\n\t        var contents = {\n\t            method: method || 'NO_METHOD_SPECIFIED',\n\t            headers: callHeaders,\n\t            cache: 'no-cache'\n\t        };\n\t        if (data)\n\t            contents.body = JSON.stringify(data);\n\t        var status;\n\t        return fetch(vars_1.API_URL + action, contents)\n\t            .then(function (response) {\n\t            status = response.status;\n\t            return response.json();\n\t        })\n\t            .then(function (json) {\n\t            if (status >= 200 && status < 300)\n\t                return json;\n\t            else {\n\t                var error = OneSignalApi.identifyError(json);\n\t                if (error === 'no-user-id-error') {\n\t                }\n\t                else {\n\t                    return Promise.reject(json);\n\t                }\n\t            }\n\t        });\n\t    };\n\t    OneSignalApi.identifyError = function (error) {\n\t        if (!error || !error.errors) {\n\t            return 'no-error';\n\t        }\n\t        var errors = error.errors;\n\t        if (utils_1.contains(errors, 'No user with this id found') ||\n\t            utils_1.contains(errors, 'Could not find app_id for given player id.')) {\n\t            return 'no-user-id-error';\n\t        }\n\t        return 'unknown-error';\n\t    };\n\t    /**\n\t     * Given a GCM or Firefox subscription endpoint or Safari device token, returns the user ID from OneSignal's server.\n\t     * Used if the user clears his or her IndexedDB database and we need the user ID again.\n\t     */\n\t    OneSignalApi.getUserIdFromSubscriptionIdentifier = function (appId, deviceType, identifier) {\n\t        // Calling POST /players with an existing identifier returns us that player ID\n\t        return OneSignalApi.post('players', {\n\t            app_id: appId,\n\t            device_type: deviceType,\n\t            identifier: identifier\n\t        }).then(function (response) {\n\t            if (response && response.id) {\n\t                return response.id;\n\t            }\n\t            else {\n\t                return null;\n\t            }\n\t        }).catch(function (e) {\n\t            log.debug('Error getting user ID from subscription identifier:', e);\n\t            return null;\n\t        });\n\t    };\n\t    OneSignalApi.getPlayer = function (appId, playerId) {\n\t        return OneSignalApi.get(\"players/\" + playerId + \"?app_id=\" + appId);\n\t    };\n\t    OneSignalApi.updatePlayer = function (appId, playerId, options) {\n\t        return OneSignalApi.put(\"players/\" + playerId, objectAssign({ app_id: appId }, options));\n\t    };\n\t    OneSignalApi.sendNotification = function (appId, playerIds, titles, contents, url, icon, data, buttons) {\n\t        var params = {\n\t            app_id: appId,\n\t            contents: contents,\n\t            include_player_ids: playerIds,\n\t            isAnyWeb: true,\n\t            data: data,\n\t            web_buttons: buttons\n\t        };\n\t        if (titles) {\n\t            params.headings = titles;\n\t        }\n\t        if (url) {\n\t            params.url = url;\n\t        }\n\t        if (icon) {\n\t            params.chrome_web_icon = icon;\n\t            params.firefox_icon = icon;\n\t        }\n\t        utils_1.trimUndefined(params);\n\t        return OneSignalApi.post('notifications', params);\n\t    };\n\t    return OneSignalApi;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = OneSignalApi;\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar Browser = __webpack_require__(8);\n\tvar Database_1 = __webpack_require__(5);\n\tvar MainHelper_1 = __webpack_require__(11);\n\tvar Launcher_1 = __webpack_require__(45);\n\tvar Badge_1 = __webpack_require__(42);\n\tvar Button_1 = __webpack_require__(43);\n\tvar Dialog_1 = __webpack_require__(44);\n\tvar Message_1 = __webpack_require__(31);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar logoSvg = __webpack_require__(68);\n\tvar Bell = (function () {\n\t    function Bell(_a) {\n\t        var _b = _a === void 0 ? {} : _a, _c = _b.enable, enable = _c === void 0 ? false : _c, _d = _b.size, size = _d === void 0 ? 'medium' : _d, _e = _b.position, position = _e === void 0 ? 'bottom-right' : _e, _f = _b.theme, theme = _f === void 0 ? 'default' : _f, _g = _b.showLauncherAfter, showLauncherAfter = _g === void 0 ? 10 : _g, _h = _b.showBadgeAfter, showBadgeAfter = _h === void 0 ? 300 : _h, _j = _b.text, text = _j === void 0 ? {\n\t            'tip.state.unsubscribed': 'Subscribe to notifications',\n\t            'tip.state.subscribed': \"You're subscribed to notifications\",\n\t            'tip.state.blocked': \"You've blocked notifications\",\n\t            'message.prenotify': 'Click to subscribe to notifications',\n\t            'message.action.subscribing': \"Click <strong>{{prompt.native.grant}}</strong> to receive notifications\",\n\t            'message.action.subscribed': \"Thanks for subscribing!\",\n\t            'message.action.resubscribed': \"You're subscribed to notifications\",\n\t            'message.action.unsubscribed': \"You won't receive notifications again\",\n\t            'dialog.main.title': 'Manage Site Notifications',\n\t            'dialog.main.button.subscribe': 'SUBSCRIBE',\n\t            'dialog.main.button.unsubscribe': 'UNSUBSCRIBE',\n\t            'dialog.blocked.title': 'Unblock Notifications',\n\t            'dialog.blocked.message': \"Follow these instructions to allow notifications:\"\n\t        } : _j, _k = _b.prenotify, prenotify = _k === void 0 ? true : _k, _l = _b.showCredit, showCredit = _l === void 0 ? true : _l, _m = _b.colors, colors = _m === void 0 ? null : _m, _o = _b.offset, offset = _o === void 0 ? null : _o;\n\t        var _this = this;\n\t        this.options = {\n\t            enable: enable,\n\t            size: size,\n\t            position: position,\n\t            theme: theme,\n\t            showLauncherAfter: showLauncherAfter,\n\t            showBadgeAfter: showBadgeAfter,\n\t            text: text,\n\t            prenotify: prenotify,\n\t            showCredit: showCredit,\n\t            colors: colors,\n\t            offset: offset,\n\t        };\n\t        __webpack_require__(69);\n\t        if (!this.options.enable)\n\t            return;\n\t        if (!utils_1.contains(['small', 'medium', 'large'], this.options.size))\n\t            throw new Error(\"Invalid size \" + this.options.size + \" for notify button. Choose among 'small', 'medium', or 'large'.\");\n\t        if (!utils_1.contains(['bottom-left', 'bottom-right'], this.options.position))\n\t            throw new Error(\"Invalid position \" + this.options.position + \" for notify button. Choose either 'bottom-left', or 'bottom-right'.\");\n\t        if (!utils_1.contains(['default', 'inverse'], this.options.theme))\n\t            throw new Error(\"Invalid theme \" + this.options.theme + \" for notify button. Choose either 'default', or 'inverse'.\");\n\t        if (this.options.showLauncherAfter < 0)\n\t            throw new Error(\"Invalid delay duration of \" + this.options.showLauncherAfter + \" for showing the notify button. Choose a value above 0.\");\n\t        if (this.options.showBadgeAfter < 0)\n\t            throw new Error(\"Invalid delay duration of \" + this.options.showBadgeAfter + \" for showing the notify button's badge. Choose a value above 0.\");\n\t        this.size = this.options.size;\n\t        this.position = this.options.position;\n\t        this.text = this.options.text;\n\t        if (!this.text['tip.state.unsubscribed'])\n\t            this.text['tip.state.unsubscribed'] = 'Subscribe to notifications';\n\t        if (!this.text['tip.state.subscribed'])\n\t            this.text['tip.state.subscribed'] = \"You're subscribed to notifications\";\n\t        if (!this.text['tip.state.blocked'])\n\t            this.text['tip.state.blocked'] = \"You've blocked notifications\";\n\t        if (!this.text['message.prenotify'])\n\t            this.text['message.prenotify'] = \"Click to subscribe to notifications\";\n\t        if (!this.text['message.action.subscribed'])\n\t            this.text['message.action.subscribed'] = \"Thanks for subscribing!\";\n\t        if (!this.text['message.action.resubscribed'])\n\t            this.text['message.action.resubscribed'] = \"You're subscribed to notifications\";\n\t        if (!this.text['message.action.subscribing'])\n\t            this.text['message.action.subscribing'] = \"Click <strong>{{prompt.native.grant}}</strong> to receive notifications\";\n\t        if (!this.text['message.action.unsubscribed'])\n\t            this.text['message.action.unsubscribed'] = \"You won't receive notifications again\";\n\t        if (!this.text['dialog.main.title'])\n\t            this.text['dialog.main.title'] = 'Manage Site Notifications';\n\t        if (!this.text['dialog.main.button.subscribe'])\n\t            this.text['dialog.main.button.subscribe'] = 'SUBSCRIBE';\n\t        if (!this.text['dialog.main.button.unsubscribe'])\n\t            this.text['dialog.main.button.unsubscribe'] = 'UNSUBSCRIBE';\n\t        if (!this.text['dialog.blocked.title'])\n\t            this.text['dialog.blocked.title'] = 'Unblock Notifications';\n\t        if (!this.text['dialog.blocked.message'])\n\t            this.text['dialog.blocked.message'] = 'Follow these instructions to allow notifications:';\n\t        this.substituteText();\n\t        this.state = Bell.STATES.UNINITIALIZED;\n\t        this._ignoreSubscriptionState = false;\n\t        // Install event hooks\n\t        OneSignal.on(Bell.EVENTS.SUBSCRIBE_CLICK, function () {\n\t            _this.dialog.subscribeButton.disabled = true;\n\t            _this._ignoreSubscriptionState = true;\n\t            OneSignal.setSubscription(true)\n\t                .then(function () {\n\t                _this.dialog.subscribeButton.disabled = false;\n\t                return _this.dialog.hide();\n\t            })\n\t                .then(function () {\n\t                return _this.message.display(Message_1.default.TYPES.MESSAGE, _this.text['message.action.resubscribed'], Message_1.default.TIMEOUT);\n\t            })\n\t                .then(function () {\n\t                _this._ignoreSubscriptionState = false;\n\t                _this.launcher.clearIfWasInactive();\n\t                return _this.launcher.inactivate();\n\t            })\n\t                .then(function () {\n\t                return _this.updateState();\n\t            });\n\t        });\n\t        OneSignal.on(Bell.EVENTS.UNSUBSCRIBE_CLICK, function () {\n\t            _this.dialog.unsubscribeButton.disabled = true;\n\t            OneSignal.setSubscription(false)\n\t                .then(function () {\n\t                _this.dialog.unsubscribeButton.disabled = false;\n\t                return _this.dialog.hide();\n\t            })\n\t                .then(function () {\n\t                _this.launcher.clearIfWasInactive();\n\t                return _this.launcher.activate();\n\t            })\n\t                .then(function () {\n\t                return _this.message.display(Message_1.default.TYPES.MESSAGE, _this.text['message.action.unsubscribed'], Message_1.default.TIMEOUT);\n\t            })\n\t                .then(function () {\n\t                return _this.updateState();\n\t            });\n\t        });\n\t        OneSignal.on(Bell.EVENTS.HOVERING, function () {\n\t            _this.hovering = true;\n\t            _this.launcher.activateIfInactive();\n\t            // If there's already a message being force shown, do not override\n\t            if (_this.message.shown || _this.dialog.shown) {\n\t                _this.hovering = false;\n\t                return;\n\t            }\n\t            // If the message is a message and not a tip, don't show it (only show tips)\n\t            // Messages will go away on their own\n\t            if (_this.message.contentType === Message_1.default.TYPES.MESSAGE) {\n\t                _this.hovering = false;\n\t                return;\n\t            }\n\t            new Promise(function (resolve, reject) {\n\t                // If a message is being shown\n\t                if (_this.message.queued.length > 0) {\n\t                    return _this.message.dequeue().then(function (msg) {\n\t                        _this.message.content = msg;\n\t                        _this.message.contentType = Message_1.default.TYPES.QUEUED;\n\t                        resolve();\n\t                    });\n\t                }\n\t                else {\n\t                    _this.message.content = utils_1.decodeHtmlEntities(_this.message.getTipForState());\n\t                    _this.message.contentType = Message_1.default.TYPES.TIP;\n\t                    resolve();\n\t                }\n\t            }).then(function () {\n\t                return _this.message.show();\n\t            })\n\t                .then(function () {\n\t                _this.hovering = false;\n\t            });\n\t        });\n\t        OneSignal.on(Bell.EVENTS.HOVERED, function () {\n\t            // If a message is displayed (and not a tip), don't control it. Visitors have no control over messages\n\t            if (_this.message.contentType === Message_1.default.TYPES.MESSAGE) {\n\t                return;\n\t            }\n\t            if (!_this.dialog.hidden) {\n\t                // If the dialog is being brought up when clicking button, don't shrink\n\t                return;\n\t            }\n\t            if (_this.hovering) {\n\t                _this.hovering = false;\n\t                // Hovering still being true here happens on mobile where the message could still be showing (i.e. animating) when a HOVERED event fires\n\t                // In other words, you tap on mobile, HOVERING fires, and then HOVERED fires immediately after because of the way mobile click events work\n\t                // Basically only happens if HOVERING and HOVERED fire within a few milliseconds of each other\n\t                _this.message.waitUntilShown()\n\t                    .then(function () { return utils_1.delay(Message_1.default.TIMEOUT); })\n\t                    .then(function () { return _this.message.hide(); })\n\t                    .then(function () {\n\t                    if (_this.launcher.wasInactive && _this.dialog.hidden) {\n\t                        _this.launcher.inactivate();\n\t                        _this.launcher.wasInactive = null;\n\t                    }\n\t                });\n\t            }\n\t            if (_this.message.shown) {\n\t                _this.message.hide()\n\t                    .then(function () {\n\t                    if (_this.launcher.wasInactive && _this.dialog.hidden) {\n\t                        _this.launcher.inactivate();\n\t                        _this.launcher.wasInactive = null;\n\t                    }\n\t                });\n\t            }\n\t        });\n\t        OneSignal.on(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, function (isSubscribed) {\n\t            if (isSubscribed == true) {\n\t                if (_this.badge.shown && _this.options.prenotify) {\n\t                    _this.badge.hide();\n\t                }\n\t                if (_this.dialog.notificationIcons === null) {\n\t                    MainHelper_1.default.getNotificationIcons().then(function (icons) {\n\t                        _this.dialog.notificationIcons = icons;\n\t                    });\n\t                }\n\t            }\n\t            OneSignal.getNotificationPermission(function (permission) {\n\t                _this.setState((isSubscribed ?\n\t                    Bell.STATES.SUBSCRIBED :\n\t                    ((permission === 'denied') ? Bell.STATES.BLOCKED : Bell.STATES.UNSUBSCRIBED)), _this._ignoreSubscriptionState);\n\t            });\n\t        });\n\t        OneSignal.on(Bell.EVENTS.STATE_CHANGED, function (state) {\n\t            if (state.to === Bell.STATES.SUBSCRIBED) {\n\t                _this.launcher.inactivate();\n\t            }\n\t            else if (state.to === Bell.STATES.UNSUBSCRIBED ||\n\t                Bell.STATES.BLOCKED) {\n\t                _this.launcher.activate();\n\t            }\n\t        });\n\t        OneSignal.on(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, function (from, to) {\n\t            _this.updateState();\n\t        });\n\t        this.updateState();\n\t    }\n\t    Object.defineProperty(Bell, \"EVENTS\", {\n\t        get: function () {\n\t            return {\n\t                STATE_CHANGED: 'notifyButtonStateChange',\n\t                LAUNCHER_CLICK: 'notifyButtonLauncherClick',\n\t                BELL_CLICK: 'notifyButtonButtonClick',\n\t                SUBSCRIBE_CLICK: 'notifyButtonSubscribeClick',\n\t                UNSUBSCRIBE_CLICK: 'notifyButtonUnsubscribeClick',\n\t                HOVERING: 'notifyButtonHovering',\n\t                HOVERED: 'notifyButtonHover'\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell, \"STATES\", {\n\t        get: function () {\n\t            return {\n\t                UNINITIALIZED: 'uninitialized',\n\t                SUBSCRIBED: 'subscribed',\n\t                UNSUBSCRIBED: 'unsubscribed',\n\t                BLOCKED: 'blocked'\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell, \"TEXT_SUBS\", {\n\t        get: function () {\n\t            return {\n\t                'prompt.native.grant': {\n\t                    default: 'Allow',\n\t                    chrome: 'Allow',\n\t                    firefox: 'Always Receive Notifications',\n\t                    safari: 'Allow'\n\t                }\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Bell.prototype.substituteText = function () {\n\t        // key: 'message.action.subscribing'\n\t        // value: 'Click <strong>{{prompt.native.grant}}</strong> to receive notifications'\n\t        for (var key in this.text) {\n\t            if (this.text.hasOwnProperty(key)) {\n\t                var value = this.text[key];\n\t                // browserName could be 'chrome' or 'firefox' or 'safari'\n\t                var browserName = Browser.name.toLowerCase();\n\t                // tKey: 'prompt.native.grant'  (from TEXT_SUBS)\n\t                // tValue: { chrome: 'Allow', firefox: 'Al... }\n\t                // zValue: 'Allow', if browserName === 'chrome'\n\t                for (var tKey in Bell.TEXT_SUBS) {\n\t                    if (Bell.TEXT_SUBS.hasOwnProperty(tKey)) {\n\t                        var tValue = Bell.TEXT_SUBS[tKey];\n\t                        var zValue = tValue[browserName];\n\t                        if (value && utils_1.contains(value, '{{')) {\n\t                            this.text[key] = value.replace(\"{{\" + tKey + \"}}\", (zValue !== undefined ? zValue : tValue['default']));\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    };\n\t    Bell.prototype.showDialogProcedure = function () {\n\t        var _this = this;\n\t        if (!this.dialog.shown) {\n\t            this.dialog.show()\n\t                .then(function () {\n\t                utils_1.once(document, 'click', function (e, destroyEventListener) {\n\t                    var wasDialogClicked = _this.dialog.element.contains(e.target);\n\t                    if (wasDialogClicked) {\n\t                    }\n\t                    else {\n\t                        destroyEventListener();\n\t                        if (_this.dialog.shown) {\n\t                            _this.dialog.hide()\n\t                                .then(function (e) {\n\t                                _this.launcher.inactivateIfWasInactive();\n\t                            });\n\t                        }\n\t                    }\n\t                }, true);\n\t            });\n\t        }\n\t    };\n\t    Bell.prototype.create = function () {\n\t        var _this = this;\n\t        if (!utils_1.isPushNotificationsSupported())\n\t            return;\n\t        if (!this.options.enable)\n\t            return;\n\t        // Remove any existing bell\n\t        if (this.container) {\n\t            utils_1.removeDomElement('#onesignal-bell-container');\n\t        }\n\t        // Insert the bell container\n\t        utils_1.addDomElement('body', 'beforeend', '<div id=\"onesignal-bell-container\" class=\"onesignal-bell-container onesignal-reset\"></div>');\n\t        // Insert the bell launcher\n\t        utils_1.addDomElement(this.container, 'beforeend', '<div id=\"onesignal-bell-launcher\" class=\"onesignal-bell-launcher\"></div>');\n\t        // Insert the bell launcher button\n\t        utils_1.addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-button\"></div>');\n\t        // Insert the bell launcher badge\n\t        utils_1.addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-badge\"></div>');\n\t        // Insert the bell launcher message\n\t        utils_1.addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message\"></div>');\n\t        utils_1.addDomElement(this.message.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message-body\"></div>');\n\t        // Insert the bell launcher dialog\n\t        utils_1.addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog\"></div>');\n\t        utils_1.addDomElement(this.dialog.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog-body\"></div>');\n\t        // Install events\n\t        // Add visual elements\n\t        utils_1.addDomElement(this.button.selector, 'beforeEnd', logoSvg);\n\t        Promise.all([\n\t            OneSignal.isPushNotificationsEnabled(),\n\t            OneSignal.getSubscription(),\n\t            Database_1.default.get('Options', 'popoverDoNotPrompt')\n\t        ])\n\t            .then(function (_a) {\n\t            var isPushEnabled = _a[0], notOptedOut = _a[1], doNotPrompt = _a[2];\n\t            // Resize to small instead of specified size if enabled, otherwise there's a jerking motion where the bell, at a different size than small, jerks sideways to go from large -> small or medium -> small\n\t            var resizeTo = (isPushEnabled ? 'small' : _this.options.size);\n\t            // Add default classes\n\t            _this.launcher.resize(resizeTo).then(function () {\n\t                if (_this.options.position === 'bottom-left') {\n\t                    utils_1.addCssClass(_this.container, 'onesignal-bell-container-bottom-left');\n\t                    utils_1.addCssClass(_this.launcher.selector, 'onesignal-bell-launcher-bottom-left');\n\t                }\n\t                else if (_this.options.position === 'bottom-right') {\n\t                    utils_1.addCssClass(_this.container, 'onesignal-bell-container-bottom-right');\n\t                    utils_1.addCssClass(_this.launcher.selector, 'onesignal-bell-launcher-bottom-right');\n\t                }\n\t                else {\n\t                    throw new Error('Invalid OneSignal notify button position ' + _this.options.position);\n\t                }\n\t                if (_this.options.theme === 'default') {\n\t                    utils_1.addCssClass(_this.launcher.selector, 'onesignal-bell-launcher-theme-default');\n\t                }\n\t                else if (_this.options.theme === 'inverse') {\n\t                    utils_1.addCssClass(_this.launcher.selector, 'onesignal-bell-launcher-theme-inverse');\n\t                }\n\t                else {\n\t                    throw new Error('Invalid OneSignal notify button theme ' + _this.options.theme);\n\t                }\n\t                _this.applyOffsetIfSpecified();\n\t                _this.setCustomColorsIfSpecified();\n\t                _this.patchSafariSvgFilterBug();\n\t                log.info('Showing the notify button.');\n\t                (isPushEnabled ? _this.launcher.inactivate() : utils_1.nothing())\n\t                    .then(function () { return OneSignal.getSubscription(); })\n\t                    .then(function (isNotOptedOut) {\n\t                    if ((isPushEnabled || !isNotOptedOut) && _this.dialog.notificationIcons === null) {\n\t                        return MainHelper_1.default.getNotificationIcons().then(function (icons) {\n\t                            _this.dialog.notificationIcons = icons;\n\t                        });\n\t                    }\n\t                    else\n\t                        return utils_1.nothing();\n\t                })\n\t                    .then(function () { return utils_1.delay(_this.options.showLauncherAfter); })\n\t                    .then(function () {\n\t                    if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround() &&\n\t                        notOptedOut &&\n\t                        doNotPrompt !== true &&\n\t                        !isPushEnabled &&\n\t                        (OneSignal.config.autoRegister === true) &&\n\t                        !MainHelper_1.default.isHttpPromptAlreadyShown() &&\n\t                        !MainHelper_1.default.isUsingHttpPermissionRequest()) {\n\t                        log.debug('Not showing notify button because popover will be shown.');\n\t                        return utils_1.nothing();\n\t                    }\n\t                    else {\n\t                        return _this.launcher.show();\n\t                    }\n\t                })\n\t                    .then(function () {\n\t                    return utils_1.delay(_this.options.showBadgeAfter);\n\t                })\n\t                    .then(function () {\n\t                    if (_this.options.prenotify && !isPushEnabled && OneSignal._isNewVisitor) {\n\t                        return _this.message.enqueue(_this.text['message.prenotify'])\n\t                            .then(function () { return _this.badge.show(); });\n\t                    }\n\t                    else\n\t                        return utils_1.nothing();\n\t                })\n\t                    .then(function () { return _this.initialized = true; });\n\t            });\n\t        });\n\t    };\n\t    Bell.prototype.patchSafariSvgFilterBug = function () {\n\t        if (!(Browser.safari && Number(Browser.version) >= 9.1)) {\n\t            var bellShadow = \"drop-shadow(0 2px 4px rgba(34,36,38,0.35));\";\n\t            var badgeShadow = \"drop-shadow(0 2px 4px rgba(34,36,38,0));\";\n\t            var dialogShadow = \"drop-shadow(0px 2px 2px rgba(34,36,38,.15));\";\n\t            this.graphic.setAttribute('style', \"filter: \" + bellShadow + \"; -webkit-filter: \" + bellShadow + \";\");\n\t            this.badge.element.setAttribute('style', \"filter: \" + badgeShadow + \"; -webkit-filter: \" + badgeShadow + \";\");\n\t            this.dialog.element.setAttribute('style', \"filter: \" + dialogShadow + \"; -webkit-filter: \" + dialogShadow + \";\");\n\t        }\n\t        if (Browser.safari) {\n\t            this.badge.element.setAttribute('style', \"display: none;\");\n\t        }\n\t    };\n\t    Bell.prototype.applyOffsetIfSpecified = function () {\n\t        var offset = this.options.offset;\n\t        if (offset) {\n\t            // Reset styles first\n\t            this.launcher.element.style.cssText = '';\n\t            if (offset.bottom) {\n\t                this.launcher.element.style.cssText += \"bottom: \" + offset.bottom + \";\";\n\t            }\n\t            if (this.options.position === 'bottom-right') {\n\t                if (offset.right) {\n\t                    this.launcher.element.style.cssText += \"right: \" + offset.right + \";\";\n\t                }\n\t            }\n\t            else if (this.options.position === 'bottom-left') {\n\t                if (offset.left) {\n\t                    this.launcher.element.style.cssText += \"left: \" + offset.left + \";\";\n\t                }\n\t            }\n\t        }\n\t    };\n\t    Bell.prototype.setCustomColorsIfSpecified = function () {\n\t        // Some common vars first\n\t        var dialogButton = this.dialog.element.querySelector('button.action');\n\t        var pulseRing = this.button.element.querySelector('.pulse-ring');\n\t        // Reset added styles first\n\t        this.graphic.querySelector('.background').style.cssText = '';\n\t        var foregroundElements = this.graphic.querySelectorAll('.foreground');\n\t        for (var i = 0; i < foregroundElements.length; i++) {\n\t            var element = foregroundElements[i];\n\t            element.style.cssText = '';\n\t        }\n\t        this.graphic.querySelector('.stroke').style.cssText = '';\n\t        this.badge.element.style.cssText = '';\n\t        if (dialogButton) {\n\t            dialogButton.style.cssText = '';\n\t            dialogButton.style.cssText = '';\n\t        }\n\t        if (pulseRing) {\n\t            pulseRing.style.cssText = '';\n\t        }\n\t        // Set new styles\n\t        if (this.options.colors) {\n\t            var colors = this.options.colors;\n\t            if (colors['circle.background']) {\n\t                this.graphic.querySelector('.background').style.cssText += \"fill: \" + colors['circle.background'];\n\t            }\n\t            if (colors['circle.foreground']) {\n\t                var foregroundElements_1 = this.graphic.querySelectorAll('.foreground');\n\t                for (var i = 0; i < foregroundElements_1.length; i++) {\n\t                    var element = foregroundElements_1[i];\n\t                    element.style.cssText += \"fill: \" + colors['circle.foreground'];\n\t                }\n\t                this.graphic.querySelector('.stroke').style.cssText += \"stroke: \" + colors['circle.foreground'];\n\t            }\n\t            if (colors['badge.background']) {\n\t                this.badge.element.style.cssText += \"background: \" + colors['badge.background'];\n\t            }\n\t            if (colors['badge.bordercolor']) {\n\t                this.badge.element.style.cssText += \"border-color: \" + colors['badge.bordercolor'];\n\t            }\n\t            if (colors['badge.foreground']) {\n\t                this.badge.element.style.cssText += \"color: \" + colors['badge.foreground'];\n\t            }\n\t            if (dialogButton) {\n\t                if (colors['dialog.button.background']) {\n\t                    this.dialog.element.querySelector('button.action').style.cssText += \"background: \" + colors['dialog.button.background'];\n\t                }\n\t                if (colors['dialog.button.foreground']) {\n\t                    this.dialog.element.querySelector('button.action').style.cssText += \"color: \" + colors['dialog.button.foreground'];\n\t                }\n\t                if (colors['dialog.button.background.hovering']) {\n\t                    this.addCssToHead('onesignal-background-hover-style', \"#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover { background: \" + colors['dialog.button.background.hovering'] + \" !important; }\");\n\t                }\n\t                if (colors['dialog.button.background.active']) {\n\t                    this.addCssToHead('onesignal-background-active-style', \"#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active { background: \" + colors['dialog.button.background.active'] + \" !important; }\");\n\t                }\n\t            }\n\t            if (pulseRing) {\n\t                if (colors['pulse.color']) {\n\t                    this.button.element.querySelector('.pulse-ring').style.cssText = \"border-color: \" + colors['pulse.color'];\n\t                }\n\t            }\n\t        }\n\t    };\n\t    Bell.prototype.addCssToHead = function (id, css) {\n\t        var existingStyleDom = document.getElementById(id);\n\t        if (existingStyleDom)\n\t            return;\n\t        var styleDom = document.createElement('style');\n\t        styleDom.id = id;\n\t        styleDom.type = 'text/css';\n\t        styleDom.appendChild(document.createTextNode(css));\n\t        document.head.appendChild(styleDom);\n\t    };\n\t    /**\n\t     * Updates the current state to the correct new current state. Returns a promise.\n\t     */\n\t    Bell.prototype.updateState = function () {\n\t        var _this = this;\n\t        Promise.all([\n\t            OneSignal.isPushNotificationsEnabled(),\n\t            OneSignal.getNotificationPermission()\n\t        ])\n\t            .then(function (_a) {\n\t            var isEnabled = _a[0], permission = _a[1];\n\t            _this.setState(isEnabled ? Bell.STATES.SUBSCRIBED : Bell.STATES.UNSUBSCRIBED);\n\t            if (permission === 'denied') {\n\t                _this.setState(Bell.STATES.BLOCKED);\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Updates the current state to the specified new state.\n\t     * @param newState One of ['subscribed', 'unsubscribed'].\n\t     */\n\t    Bell.prototype.setState = function (newState, silent) {\n\t        if (silent === void 0) { silent = false; }\n\t        var lastState = this.state;\n\t        this.state = newState;\n\t        if (lastState !== newState && !silent) {\n\t            Event_1.default.trigger(Bell.EVENTS.STATE_CHANGED, { from: lastState, to: newState });\n\t        }\n\t        // Update anything that should be reset to the same state\n\t    };\n\t    Object.defineProperty(Bell.prototype, \"container\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-bell-container');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"graphic\", {\n\t        get: function () {\n\t            return this.button.element.querySelector('svg');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"launcher\", {\n\t        get: function () {\n\t            if (!this._launcher)\n\t                this._launcher = new Launcher_1.default(this);\n\t            return this._launcher;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"button\", {\n\t        get: function () {\n\t            if (!this._button)\n\t                this._button = new Button_1.default(this);\n\t            return this._button;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"badge\", {\n\t        get: function () {\n\t            if (!this._badge)\n\t                this._badge = new Badge_1.default();\n\t            return this._badge;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"message\", {\n\t        get: function () {\n\t            if (!this._message)\n\t                this._message = new Message_1.default(this);\n\t            return this._message;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"dialog\", {\n\t        get: function () {\n\t            if (!this._dialog)\n\t                this._dialog = new Dialog_1.default(this);\n\t            return this._dialog;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"subscribed\", {\n\t        get: function () {\n\t            return this.state === Bell.STATES.SUBSCRIBED;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"unsubscribed\", {\n\t        get: function () {\n\t            return this.state === Bell.STATES.UNSUBSCRIBED;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Bell.prototype, \"blocked\", {\n\t        get: function () {\n\t            return this.state === Bell.STATES.BLOCKED;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    return Bell;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Bell;\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar vars_1 = __webpack_require__(7);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar log = __webpack_require__(2);\n\tvar Database_1 = __webpack_require__(5);\n\tvar utils_1 = __webpack_require__(1);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar ServiceWorkerHelper = (function () {\n\t    function ServiceWorkerHelper() {\n\t    }\n\t    ServiceWorkerHelper.applyServiceWorkerEnvPrefixes = function () {\n\t        if (Environment_1.default.isDev()) {\n\t            OneSignal.SERVICE_WORKER_PATH = vars_1.DEV_PREFIX + 'OneSignalSDKWorker.js';\n\t            OneSignal.SERVICE_WORKER_UPDATER_PATH = vars_1.DEV_PREFIX + 'OneSignalSDKUpdaterWorker.js';\n\t        }\n\t        else if (Environment_1.default.isStaging()) {\n\t            OneSignal.SERVICE_WORKER_PATH = vars_1.STAGING_PREFIX + 'OneSignalSDKWorker.js';\n\t            OneSignal.SERVICE_WORKER_UPDATER_PATH = vars_1.STAGING_PREFIX + 'OneSignalSDKUpdaterWorker.js';\n\t        }\n\t    };\n\t    ServiceWorkerHelper.closeNotifications = function () {\n\t        if (navigator.serviceWorker && !SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t            navigator.serviceWorker.getRegistration()\n\t                .then(function (registration) {\n\t                if (registration === undefined || !registration.active) {\n\t                    throw new Error('There is no active service worker.');\n\t                }\n\t                else if (OneSignal._channel) {\n\t                    OneSignal._channel.emit('data', 'notification.closeall');\n\t                }\n\t            });\n\t        }\n\t    };\n\t    /*\n\t     Updates an existing OneSignal-only service worker if an older version exists. Does not install a new service worker if none is available or overwrite other service workers.\n\t     This also differs from the original update code we have below in that we do not subscribe for push after.\n\t     Because we're overwriting a service worker, the push token seems to \"carry over\" (this is good), whereas if we unregistered and registered a new service worker, the push token would be lost (this is bad).\n\t     By not subscribing for push after we register the SW, we don't have to care if notification permissions are granted or not, since users will not be prompted; this update process will be transparent.\n\t     This way we can update the service worker even for autoRegister: false users.\n\t     */\n\t    ServiceWorkerHelper.updateServiceWorker = function () {\n\t        var updateCheckAlreadyRan = sessionStorage.getItem('onesignal-update-serviceworker-completed');\n\t        if (!navigator.serviceWorker || !Environment_1.default.isHost() || location.protocol !== 'https:' || updateCheckAlreadyRan == \"true\") {\n\t            log.debug('Skipping service worker update for existing session.');\n\t            return;\n\t        }\n\t        try {\n\t            sessionStorage.setItem('onesignal-update-serviceworker-completed', \"true\");\n\t        }\n\t        catch (e) {\n\t            log.error(e);\n\t        }\n\t        return navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\n\t            var sw_path = \"\";\n\t            if (OneSignal.config.path)\n\t                sw_path = OneSignal.config.path;\n\t            if (serviceWorkerRegistration && serviceWorkerRegistration.active) {\n\t                // An existing service worker\n\t                var previousWorkerUrl = serviceWorkerRegistration.active.scriptURL;\n\t                if (utils_1.contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_PATH)) {\n\t                    // OneSignalSDKWorker.js was installed\n\t                    log.debug('(Service Worker Update)', 'The main service worker is active.');\n\t                    return Database_1.default.get('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION')\n\t                        .then(function (version) {\n\t                        // Get version of installed worker saved to IndexedDB\n\t                        if (version) {\n\t                            // If a version exists\n\t                            log.debug('(Service Worker Update)', \"Stored service worker version v\" + version + \".\");\n\t                            if (version != OneSignal._VERSION) {\n\t                                // If there is a different version\n\t                                log.debug('(Service Worker Update)', 'New service worker version exists:', OneSignal._VERSION);\n\t                                log.info(\"Upgrading service worker (v\" + version + \" -> v\" + OneSignal._VERSION + \")\");\n\t                                return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH, OneSignal.SERVICE_WORKER_PARAM);\n\t                            }\n\t                            else {\n\t                                // No changed service worker version\n\t                                log.debug('(Service Worker Update)', 'You already have the latest service worker version.');\n\t                                return null;\n\t                            }\n\t                        }\n\t                        else {\n\t                            // No version was saved; somehow this got overwritten\n\t                            // Reinstall the alternate service worker\n\t                            log.debug('(Service Worker Update)', 'No stored service worker version. Reinstalling the service worker.');\n\t                            return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH, OneSignal.SERVICE_WORKER_PARAM);\n\t                        }\n\t                    });\n\t                }\n\t                else if (utils_1.contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH)) {\n\t                    // OneSignalSDKUpdaterWorker.js was installed\n\t                    log.debug('(Service Worker Update)', 'The alternate service worker is active.');\n\t                    return Database_1.default.get('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION')\n\t                        .then(function (version) {\n\t                        // Get version of installed worker saved to IndexedDB\n\t                        if (version) {\n\t                            // If a version exists\n\t                            log.debug('(Service Worker Update)', \"Stored service worker version v\" + version + \".\");\n\t                            if (version != OneSignal._VERSION) {\n\t                                // If there is a different version\n\t                                log.debug('(Service Worker Update)', 'New service worker version exists:', OneSignal._VERSION);\n\t                                log.info(\"Upgrading new service worker (v\" + version + \" -> v\" + OneSignal._VERSION + \")\");\n\t                                return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM);\n\t                            }\n\t                            else {\n\t                                // No changed service worker version\n\t                                log.debug('(Service Worker Update)', 'You already have the latest service worker version.');\n\t                                return null;\n\t                            }\n\t                        }\n\t                        else {\n\t                            // No version was saved; somehow this got overwritten\n\t                            // Reinstall the alternate service worker\n\t                            log.debug('(Service Worker Update)', 'No stored service worker version. Reinstalling the service worker.');\n\t                            return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM);\n\t                        }\n\t                    });\n\t                }\n\t                else {\n\t                }\n\t            }\n\t        });\n\t    };\n\t    ServiceWorkerHelper.registerServiceWorker = function (full_sw_and_path) {\n\t        log.debug(\"Called %cregisterServiceWorker(\" + JSON.stringify(full_sw_and_path, null, 4) + \")\", utils_1.getConsoleStyle('code'));\n\t        navigator.serviceWorker.register(full_sw_and_path, OneSignal.SERVICE_WORKER_PARAM).then(SubscriptionHelper_1.default.enableNotifications, ServiceWorkerHelper.registerError);\n\t    };\n\t    ServiceWorkerHelper.registerError = function (err) {\n\t        log.error(\"ServiceWorker registration\", err);\n\t    };\n\t    ServiceWorkerHelper.isServiceWorkerActive = function (callback) {\n\t        if (!utils_1.isPushNotificationsSupported()) {\n\t            return;\n\t        }\n\t        if (!('serviceWorker' in navigator)) {\n\t            return false;\n\t        }\n\t        function isServiceWorkerRegistrationActive(serviceWorkerRegistration) {\n\t            return serviceWorkerRegistration.active &&\n\t                serviceWorkerRegistration.active.state === 'activated' &&\n\t                (utils_1.contains(serviceWorkerRegistration.active.scriptURL, 'OneSignalSDKWorker') ||\n\t                    utils_1.contains(serviceWorkerRegistration.active.scriptURL, 'OneSignalSDKUpdaterWorker'));\n\t        }\n\t        return new Promise(function (resolve, reject) {\n\t            if (!SubscriptionHelper_1.default.isUsingSubscriptionWorkaround() && !Environment_1.default.isIframe()) {\n\t                var isServiceWorkerActive_1 = false;\n\t                if (navigator.serviceWorker.getRegistrations) {\n\t                    navigator.serviceWorker.getRegistrations().then(function (serviceWorkerRegistrations) {\n\t                        for (var _i = 0, serviceWorkerRegistrations_1 = serviceWorkerRegistrations; _i < serviceWorkerRegistrations_1.length; _i++) {\n\t                            var serviceWorkerRegistration = serviceWorkerRegistrations_1[_i];\n\t                            if (isServiceWorkerRegistrationActive(serviceWorkerRegistration)) {\n\t                                isServiceWorkerActive_1 = true;\n\t                            }\n\t                        }\n\t                        if (callback) {\n\t                            callback(isServiceWorkerActive_1);\n\t                        }\n\t                        resolve(isServiceWorkerActive_1);\n\t                    });\n\t                }\n\t                else {\n\t                    navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\n\t                        if (isServiceWorkerRegistrationActive(serviceWorkerRegistration)) {\n\t                            isServiceWorkerActive_1 = true;\n\t                        }\n\t                        if (callback) {\n\t                            callback(isServiceWorkerActive_1);\n\t                        }\n\t                        resolve(isServiceWorkerActive_1);\n\t                    });\n\t                }\n\t            }\n\t            else {\n\t                if (callback) {\n\t                    callback(false);\n\t                }\n\t                resolve(false);\n\t            }\n\t        });\n\t    };\n\t    return ServiceWorkerHelper;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = ServiceWorkerHelper;\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n\t * Heir v3.0.0 - http://git.io/F87mKg\n\t * Oliver Caldwell - http://oli.me.uk/\n\t * Unlicense - http://unlicense.org/\n\t */\n\t\n\t(function (name, root, factory) {\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    }\n\t    else if (typeof exports === 'object') {\n\t        module.exports = factory();\n\t    }\n\t    else {\n\t        root[name] = factory();\n\t    }\n\t}('heir', this, function () {\n\t    /*global define,module*/\n\t    'use strict';\n\t\n\t    var heir = {\n\t        /**\n\t         * Causes your desired class to inherit from a source class. This uses\n\t         * prototypical inheritance so you can override methods without ruining\n\t         * the parent class.\n\t         *\n\t         * This will alter the actual destination class though, it does not\n\t         * create a new class.\n\t         *\n\t         * @param {Function} destination The target class for the inheritance.\n\t         * @param {Function} source Class to inherit from.\n\t         * @param {Boolean} addSuper Should we add the _super property to the prototype? Defaults to true.\n\t         */\n\t        inherit: function inherit(destination, source, addSuper) {\n\t            var proto = destination.prototype = heir.createObject(source.prototype);\n\t            proto.constructor = destination;\n\t\n\t            if (addSuper || typeof addSuper === 'undefined') {\n\t                destination._super = source.prototype;\n\t            }\n\t        },\n\t\n\t        /**\n\t         * Creates a new object with the source object nestled within its\n\t         * prototype chain.\n\t         *\n\t         * @param {Object} source Method to insert into the new object's prototype.\n\t         * @return {Object} An empty object with the source object in it's prototype chain.\n\t         */\n\t        createObject: Object.create || function createObject(source) {\n\t            var Host = function () {};\n\t            Host.prototype = source;\n\t            return new Host();\n\t        },\n\t\n\t        /**\n\t         * Mixes the specified object into your class. This can be used to add\n\t         * certain capabilities and helper methods to a class that is already\n\t         * inheriting from some other class. You can mix in as many object as\n\t         * you want, but only inherit from one.\n\t         *\n\t         * These values are mixed into the actual prototype object of your\n\t         * class, they are not added to the prototype chain like inherit.\n\t         *\n\t         * @param {Function} destination Class to mix the object into.\n\t         * @param {Object} source Object to mix into the class.\n\t         */\n\t        mixin: function mixin(destination, source) {\n\t            return heir.merge(destination.prototype, source);\n\t        },\n\t\n\t        /**\n\t         * Merges one object into another, change the object in place.\n\t         *\n\t         * @param {Object} destination The destination for the merge.\n\t         * @param {Object} source The source of the properties to merge.\n\t         */\n\t        merge: function merge(destination, source) {\n\t            var key;\n\t\n\t            for (key in source) {\n\t                destination[key] = source[key];\n\t            }\n\t        },\n\t\n\t        /**\n\t         * Shortcut for `Object.prototype.hasOwnProperty`.\n\t         *\n\t         * Uses `Object.prototype.hasOwnPropety` rather than\n\t         * `object.hasOwnProperty` as it could be overwritten.\n\t         *\n\t         * @param {Object} object The object to check\n\t         * @param {String} key The key to check for.\n\t         * @return {Boolean} Does object have key as an own propety?\n\t         */\n\t        hasOwn: function hasOwn(object, key) {\n\t            return Object.prototype.hasOwnProperty.call(object, key);\n\t        }\n\t    };\n\t\n\t    return heir;\n\t}));\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t * EventEmitter v5.1.0 - git.io/ee\n\t * Unlicense - http://unlicense.org/\n\t * Oliver Caldwell - http://oli.me.uk/\n\t * @preserve\n\t */\n\t\n\t;(function (exports) {\n\t    'use strict';\n\t\n\t    /**\n\t     * Class for managing events.\n\t     * Can be extended to provide event functionality in other classes.\n\t     *\n\t     * @class EventEmitter Manages event registering and emitting.\n\t     */\n\t    function EventEmitter() {}\n\t\n\t    // Shortcuts to improve speed and size\n\t    var proto = EventEmitter.prototype;\n\t    var originalGlobalValue = exports.EventEmitter;\n\t\n\t    /**\n\t     * Finds the index of the listener for the event in its storage array.\n\t     *\n\t     * @param {Function[]} listeners Array of listeners to search through.\n\t     * @param {Function} listener Method to look for.\n\t     * @return {Number} Index of the specified listener, -1 if not found\n\t     * @api private\n\t     */\n\t    function indexOfListener(listeners, listener) {\n\t        var i = listeners.length;\n\t        while (i--) {\n\t            if (listeners[i].listener === listener) {\n\t                return i;\n\t            }\n\t        }\n\t\n\t        return -1;\n\t    }\n\t\n\t    /**\n\t     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n\t     *\n\t     * @param {String} name The name of the target method.\n\t     * @return {Function} The aliased method\n\t     * @api private\n\t     */\n\t    function alias(name) {\n\t        return function aliasClosure() {\n\t            return this[name].apply(this, arguments);\n\t        };\n\t    }\n\t\n\t    /**\n\t     * Returns the listener array for the specified event.\n\t     * Will initialise the event object and listener arrays if required.\n\t     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n\t     * Each property in the object response is an array of listener functions.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to return the listeners from.\n\t     * @return {Function[]|Object} All listener functions for the event.\n\t     */\n\t    proto.getListeners = function getListeners(evt) {\n\t        var events = this._getEvents();\n\t        var response;\n\t        var key;\n\t\n\t        // Return a concatenated array of all matching events if\n\t        // the selector is a regular expression.\n\t        if (evt instanceof RegExp) {\n\t            response = {};\n\t            for (key in events) {\n\t                if (events.hasOwnProperty(key) && evt.test(key)) {\n\t                    response[key] = events[key];\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            response = events[evt] || (events[evt] = []);\n\t        }\n\t\n\t        return response;\n\t    };\n\t\n\t    /**\n\t     * Takes a list of listener objects and flattens it into a list of listener functions.\n\t     *\n\t     * @param {Object[]} listeners Raw listener objects.\n\t     * @return {Function[]} Just the listener functions.\n\t     */\n\t    proto.flattenListeners = function flattenListeners(listeners) {\n\t        var flatListeners = [];\n\t        var i;\n\t\n\t        for (i = 0; i < listeners.length; i += 1) {\n\t            flatListeners.push(listeners[i].listener);\n\t        }\n\t\n\t        return flatListeners;\n\t    };\n\t\n\t    /**\n\t     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to return the listeners from.\n\t     * @return {Object} All listener functions for an event in an object.\n\t     */\n\t    proto.getListenersAsObject = function getListenersAsObject(evt) {\n\t        var listeners = this.getListeners(evt);\n\t        var response;\n\t\n\t        if (listeners instanceof Array) {\n\t            response = {};\n\t            response[evt] = listeners;\n\t        }\n\t\n\t        return response || listeners;\n\t    };\n\t\n\t    function isValidListener (listener) {\n\t        if (typeof listener === 'function' || listener instanceof RegExp) {\n\t            return true\n\t        } else if (listener && typeof listener === 'object') {\n\t            return isValidListener(listener.listener)\n\t        } else {\n\t            return false\n\t        }\n\t    }\n\t\n\t    /**\n\t     * Adds a listener function to the specified event.\n\t     * The listener will not be added if it is a duplicate.\n\t     * If the listener returns true then it will be removed after it is called.\n\t     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to attach the listener to.\n\t     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.addListener = function addListener(evt, listener) {\n\t        if (!isValidListener(listener)) {\n\t            throw new TypeError('listener must be a function');\n\t        }\n\t\n\t        var listeners = this.getListenersAsObject(evt);\n\t        var listenerIsWrapped = typeof listener === 'object';\n\t        var key;\n\t\n\t        for (key in listeners) {\n\t            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n\t                listeners[key].push(listenerIsWrapped ? listener : {\n\t                    listener: listener,\n\t                    once: false\n\t                });\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of addListener\n\t     */\n\t    proto.on = alias('addListener');\n\t\n\t    /**\n\t     * Semi-alias of addListener. It will add a listener that will be\n\t     * automatically removed after its first execution.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to attach the listener to.\n\t     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.addOnceListener = function addOnceListener(evt, listener) {\n\t        return this.addListener(evt, {\n\t            listener: listener,\n\t            once: true\n\t        });\n\t    };\n\t\n\t    /**\n\t     * Alias of addOnceListener.\n\t     */\n\t    proto.once = alias('addOnceListener');\n\t\n\t    /**\n\t     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n\t     * You need to tell it what event names should be matched by a regex.\n\t     *\n\t     * @param {String} evt Name of the event to create.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.defineEvent = function defineEvent(evt) {\n\t        this.getListeners(evt);\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Uses defineEvent to define multiple events.\n\t     *\n\t     * @param {String[]} evts An array of event names to define.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.defineEvents = function defineEvents(evts) {\n\t        for (var i = 0; i < evts.length; i += 1) {\n\t            this.defineEvent(evts[i]);\n\t        }\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Removes a listener function from the specified event.\n\t     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to remove the listener from.\n\t     * @param {Function} listener Method to remove from the event.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.removeListener = function removeListener(evt, listener) {\n\t        var listeners = this.getListenersAsObject(evt);\n\t        var index;\n\t        var key;\n\t\n\t        for (key in listeners) {\n\t            if (listeners.hasOwnProperty(key)) {\n\t                index = indexOfListener(listeners[key], listener);\n\t\n\t                if (index !== -1) {\n\t                    listeners[key].splice(index, 1);\n\t                }\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of removeListener\n\t     */\n\t    proto.off = alias('removeListener');\n\t\n\t    /**\n\t     * Adds listeners in bulk using the manipulateListeners method.\n\t     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n\t     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n\t     * Yeah, this function does quite a bit. That's probably a bad thing.\n\t     *\n\t     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n\t     * @param {Function[]} [listeners] An optional array of listener functions to add.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.addListeners = function addListeners(evt, listeners) {\n\t        // Pass through to manipulateListeners\n\t        return this.manipulateListeners(false, evt, listeners);\n\t    };\n\t\n\t    /**\n\t     * Removes listeners in bulk using the manipulateListeners method.\n\t     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n\t     * You can also pass it an event name and an array of listeners to be removed.\n\t     * You can also pass it a regular expression to remove the listeners from all events that match it.\n\t     *\n\t     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n\t     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.removeListeners = function removeListeners(evt, listeners) {\n\t        // Pass through to manipulateListeners\n\t        return this.manipulateListeners(true, evt, listeners);\n\t    };\n\t\n\t    /**\n\t     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n\t     * The first argument will determine if the listeners are removed (true) or added (false).\n\t     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n\t     * You can also pass it an event name and an array of listeners to be added/removed.\n\t     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n\t     *\n\t     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n\t     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n\t     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n\t        var i;\n\t        var value;\n\t        var single = remove ? this.removeListener : this.addListener;\n\t        var multiple = remove ? this.removeListeners : this.addListeners;\n\t\n\t        // If evt is an object then pass each of its properties to this method\n\t        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n\t            for (i in evt) {\n\t                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n\t                    // Pass the single listener straight through to the singular method\n\t                    if (typeof value === 'function') {\n\t                        single.call(this, i, value);\n\t                    }\n\t                    else {\n\t                        // Otherwise pass back to the multiple function\n\t                        multiple.call(this, i, value);\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            // So evt must be a string\n\t            // And listeners must be an array of listeners\n\t            // Loop over it and pass each one to the multiple method\n\t            i = listeners.length;\n\t            while (i--) {\n\t                single.call(this, evt, listeners[i]);\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Removes all listeners from a specified event.\n\t     * If you do not specify an event then all listeners will be removed.\n\t     * That means every event will be emptied.\n\t     * You can also pass a regex to remove all events that match it.\n\t     *\n\t     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.removeEvent = function removeEvent(evt) {\n\t        var type = typeof evt;\n\t        var events = this._getEvents();\n\t        var key;\n\t\n\t        // Remove different things depending on the state of evt\n\t        if (type === 'string') {\n\t            // Remove all listeners for the specified event\n\t            delete events[evt];\n\t        }\n\t        else if (evt instanceof RegExp) {\n\t            // Remove all events matching the regex.\n\t            for (key in events) {\n\t                if (events.hasOwnProperty(key) && evt.test(key)) {\n\t                    delete events[key];\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            // Remove all listeners in all events\n\t            delete this._events;\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of removeEvent.\n\t     *\n\t     * Added to mirror the node API.\n\t     */\n\t    proto.removeAllListeners = alias('removeEvent');\n\t\n\t    /**\n\t     * Emits an event of your choice.\n\t     * When emitted, every listener attached to that event will be executed.\n\t     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n\t     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n\t     * So they will not arrive within the array on the other side, they will be separate.\n\t     * You can also pass a regular expression to emit to all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n\t     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.emitEvent = function emitEvent(evt, args) {\n\t        var listenersMap = this.getListenersAsObject(evt);\n\t        var listeners;\n\t        var listener;\n\t        var i;\n\t        var key;\n\t        var response;\n\t\n\t        for (key in listenersMap) {\n\t            if (listenersMap.hasOwnProperty(key)) {\n\t                listeners = listenersMap[key].slice(0);\n\t\n\t                for (i = 0; i < listeners.length; i++) {\n\t                    // If the listener returns true then it shall be removed from the event\n\t                    // The function is executed either with a basic call or an apply if there is an args array\n\t                    listener = listeners[i];\n\t\n\t                    if (listener.once === true) {\n\t                        this.removeListener(evt, listener.listener);\n\t                    }\n\t\n\t                    response = listener.listener.apply(this, args || []);\n\t\n\t                    if (response === this._getOnceReturnValue()) {\n\t                        this.removeListener(evt, listener.listener);\n\t                    }\n\t                }\n\t            }\n\t        }\n\t\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Alias of emitEvent\n\t     */\n\t    proto.trigger = alias('emitEvent');\n\t\n\t    /**\n\t     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n\t     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n\t     *\n\t     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n\t     * @param {...*} Optional additional arguments to be passed to each listener.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.emit = function emit(evt) {\n\t        var args = Array.prototype.slice.call(arguments, 1);\n\t        return this.emitEvent(evt, args);\n\t    };\n\t\n\t    /**\n\t     * Sets the current value to check against when executing listeners. If a\n\t     * listeners return value matches the one set here then it will be removed\n\t     * after execution. This value defaults to true.\n\t     *\n\t     * @param {*} value The new value to check for when executing listeners.\n\t     * @return {Object} Current instance of EventEmitter for chaining.\n\t     */\n\t    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n\t        this._onceReturnValue = value;\n\t        return this;\n\t    };\n\t\n\t    /**\n\t     * Fetches the current value to check against when executing listeners. If\n\t     * the listeners return value matches this one then it should be removed\n\t     * automatically. It will return true by default.\n\t     *\n\t     * @return {*|Boolean} The current value to check for or the default, true.\n\t     * @api private\n\t     */\n\t    proto._getOnceReturnValue = function _getOnceReturnValue() {\n\t        if (this.hasOwnProperty('_onceReturnValue')) {\n\t            return this._onceReturnValue;\n\t        }\n\t        else {\n\t            return true;\n\t        }\n\t    };\n\t\n\t    /**\n\t     * Fetches the events object and creates one if required.\n\t     *\n\t     * @return {Object} The events storage object.\n\t     * @api private\n\t     */\n\t    proto._getEvents = function _getEvents() {\n\t        return this._events || (this._events = {});\n\t    };\n\t\n\t    /**\n\t     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n\t     *\n\t     * @return {Function} Non conflicting EventEmitter class.\n\t     */\n\t    EventEmitter.noConflict = function noConflict() {\n\t        exports.EventEmitter = originalGlobalValue;\n\t        return EventEmitter;\n\t    };\n\t\n\t    // Expose the class either via AMD, CommonJS or the global object\n\t    if (true) {\n\t        !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n\t            return EventEmitter;\n\t        }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t    }\n\t    else if (typeof module === 'object' && module.exports){\n\t        module.exports = EventEmitter;\n\t    }\n\t    else {\n\t        exports.EventEmitter = EventEmitter;\n\t    }\n\t}(this || {}));\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar AnimatedElement_1 = __webpack_require__(22);\n\tvar objectAssign = __webpack_require__(9);\n\tvar ActiveAnimatedElement = (function (_super) {\n\t    __extends(ActiveAnimatedElement, _super);\n\t    /**\n\t     * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n\t     * @param selector {string} The CSS selector of the element.\n\t     * @param showClass {string} The CSS class name to add to show the element.\n\t     * @param hideClass {string} The CSS class name to remove to hide the element.\n\t     * @param activeClass {string} The CSS class name to add to activate the element.\n\t     * @param inactiveClass {string} The CSS class name to remove to inactivate the element.\n\t     * @param state {string} The current state of the element, defaults to 'shown'.\n\t     * @param activeState {string} The current state of the element, defaults to 'active'.\n\t     * @param targetTransitionEvents {string} An array of properties (e.g. ['transform', 'opacity']) to look for on transitionend of show() and hide() to know the transition is complete. As long as one matches, the transition is considered complete.\n\t     * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n\t     */\n\t    function ActiveAnimatedElement(selector, showClass, hideClass, activeClass, inactiveClass, state, activeState, targetTransitionEvents, nestedContentSelector) {\n\t        if (state === void 0) { state = 'shown'; }\n\t        if (activeState === void 0) { activeState = 'active'; }\n\t        if (targetTransitionEvents === void 0) { targetTransitionEvents = ['opacity', 'transform']; }\n\t        if (nestedContentSelector === void 0) { nestedContentSelector = null; }\n\t        var _this = _super.call(this, selector, showClass, hideClass, state, targetTransitionEvents) || this;\n\t        _this.selector = selector;\n\t        _this.showClass = showClass;\n\t        _this.hideClass = hideClass;\n\t        _this.activeClass = activeClass;\n\t        _this.inactiveClass = inactiveClass;\n\t        _this.state = state;\n\t        _this.activeState = activeState;\n\t        _this.targetTransitionEvents = targetTransitionEvents;\n\t        _this.nestedContentSelector = nestedContentSelector;\n\t        return _this;\n\t    }\n\t    /**\n\t     * Asynchronously activates an element by applying its {activeClass} CSS class.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    ActiveAnimatedElement.prototype.activate = function () {\n\t        var _this = this;\n\t        if (!this.inactive || !this.shown) {\n\t            return Promise.resolve(this);\n\t        }\n\t        else\n\t            return new Promise(function (resolve) {\n\t                _this.activeState = 'activating';\n\t                Event_1.default.trigger(ActiveAnimatedElement.EVENTS.ACTIVATING, _this);\n\t                if (_this.inactiveClass)\n\t                    utils_1.removeCssClass(_this.element, _this.inactiveClass);\n\t                if (_this.activeClass)\n\t                    utils_1.addCssClass(_this.element, _this.activeClass);\n\t                if (_this.shown) {\n\t                    if (_this.targetTransitionEvents.length == 0) {\n\t                        return resolve(_this);\n\t                    }\n\t                    else {\n\t                        var timerId = setTimeout(function () {\n\t                            log.debug(\"Element did not completely activate (state: \" + _this.state + \", activeState: \" + _this.activeState + \").\");\n\t                        }, _this.transitionCheckTimeout);\n\t                        utils_1.once(_this.element, 'transitionend', function (event, destroyListenerFn) {\n\t                            if (event.target === _this.element &&\n\t                                utils_1.contains(_this.targetTransitionEvents, event.propertyName)) {\n\t                                clearTimeout(timerId);\n\t                                // Uninstall the event listener for transitionend\n\t                                destroyListenerFn();\n\t                                _this.activeState = 'active';\n\t                                Event_1.default.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, _this);\n\t                                return resolve(_this);\n\t                            }\n\t                        }, true);\n\t                    }\n\t                }\n\t                else {\n\t                    log.debug(\"Ending activate() transition (alternative).\");\n\t                    _this.activeState = 'active';\n\t                    Event_1.default.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, _this);\n\t                    return resolve(_this);\n\t                }\n\t            });\n\t    };\n\t    /**\n\t     * Asynchronously activates an element by applying its {activeClass} CSS class.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    ActiveAnimatedElement.prototype.inactivate = function () {\n\t        var _this = this;\n\t        if (!this.active) {\n\t            return Promise.resolve(this);\n\t        }\n\t        else\n\t            return new Promise(function (resolve) {\n\t                _this.activeState = 'inactivating';\n\t                Event_1.default.trigger(ActiveAnimatedElement.EVENTS.INACTIVATING, _this);\n\t                if (_this.activeClass)\n\t                    utils_1.removeCssClass(_this.element, _this.activeClass);\n\t                if (_this.inactiveClass)\n\t                    utils_1.addCssClass(_this.element, _this.inactiveClass);\n\t                if (_this.shown) {\n\t                    if (_this.targetTransitionEvents.length == 0) {\n\t                        return resolve(_this);\n\t                    }\n\t                    else {\n\t                        var timerId = setTimeout(function () {\n\t                            log.debug(\"Element did not completely inactivate (state: \" + _this.state + \", activeState: \" + _this.activeState + \").\");\n\t                        }, _this.transitionCheckTimeout);\n\t                        utils_1.once(_this.element, 'transitionend', function (event, destroyListenerFn) {\n\t                            if (event.target === _this.element &&\n\t                                utils_1.contains(_this.targetTransitionEvents, event.propertyName)) {\n\t                                clearTimeout(timerId);\n\t                                // Uninstall the event listener for transitionend\n\t                                destroyListenerFn();\n\t                                _this.activeState = 'inactive';\n\t                                Event_1.default.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, _this);\n\t                                return resolve(_this);\n\t                            }\n\t                        }, true);\n\t                    }\n\t                }\n\t                else {\n\t                    _this.activeState = 'inactive';\n\t                    Event_1.default.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, _this);\n\t                    return resolve(_this);\n\t                }\n\t            });\n\t    };\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being active.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    ActiveAnimatedElement.prototype.waitUntilActive = function () {\n\t        var _this = this;\n\t        if (this.active)\n\t            return Promise.resolve(this);\n\t        else\n\t            return new Promise(function (resolve) {\n\t                OneSignal.once(ActiveAnimatedElement.EVENTS.ACTIVE, function (event) {\n\t                    if (event === _this) {\n\t                        return resolve(_this);\n\t                    }\n\t                }, true);\n\t            });\n\t    };\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being inactive.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    ActiveAnimatedElement.prototype.waitUntilInactive = function () {\n\t        var _this = this;\n\t        if (this.inactive)\n\t            return Promise.resolve(this);\n\t        else\n\t            return new Promise(function (resolve) {\n\t                OneSignal.once(ActiveAnimatedElement.EVENTS.INACTIVE, function (event) {\n\t                    if (event === _this) {\n\t                        return resolve(_this);\n\t                    }\n\t                }, true);\n\t            });\n\t    };\n\t    Object.defineProperty(ActiveAnimatedElement, \"EVENTS\", {\n\t        get: function () {\n\t            return objectAssign({}, AnimatedElement_1.default.EVENTS, {\n\t                ACTIVATING: 'activeAnimatedElementActivating',\n\t                ACTIVE: 'activeAnimatedElementActive',\n\t                INACTIVATING: 'activeAnimatedElementInactivating',\n\t                INACTIVE: 'activeAnimatedElementInactive',\n\t            });\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ActiveAnimatedElement.prototype, \"activating\", {\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be transitioning to being activated.\n\t         */\n\t        get: function () {\n\t            return this.activeState === 'activating';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ActiveAnimatedElement.prototype, \"active\", {\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be already active.\n\t         */\n\t        get: function () {\n\t            return this.activeState === 'active';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ActiveAnimatedElement.prototype, \"inactivating\", {\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be transitioning to inactive.\n\t         */\n\t        get: function () {\n\t            return this.activeState === 'inactivating';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ActiveAnimatedElement.prototype, \"inactive\", {\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be already inactive.\n\t         */\n\t        get: function () {\n\t            return this.activeState === 'inactive';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    return ActiveAnimatedElement;\n\t}(AnimatedElement_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = ActiveAnimatedElement;\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar AnimatedElement = (function () {\n\t    /**\n\t     * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n\t     * @param selector {string} The CSS selector of the element.\n\t     * @param showClass {string} The CSS class name to add to show the element.\n\t     * @param hideClass {string} The CSS class name to remove to hide the element.\n\t     * @param state {string} The current state of the element, defaults to 'shown'.\n\t     * @param targetTransitionEvents {string} An array of properties (e.g. ['transform', 'opacity']) to look for on transitionend of show() and hide() to know the transition is complete. As long as one matches, the transition is considered complete.\n\t     * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n\t     */\n\t    function AnimatedElement(selector, showClass, hideClass, state, targetTransitionEvents, nestedContentSelector, transitionCheckTimeout) {\n\t        if (state === void 0) { state = 'shown'; }\n\t        if (targetTransitionEvents === void 0) { targetTransitionEvents = ['opacity', 'transform']; }\n\t        if (nestedContentSelector === void 0) { nestedContentSelector = null; }\n\t        if (transitionCheckTimeout === void 0) { transitionCheckTimeout = 500; }\n\t        this.selector = selector;\n\t        this.showClass = showClass;\n\t        this.hideClass = hideClass;\n\t        this.state = state;\n\t        this.targetTransitionEvents = targetTransitionEvents;\n\t        this.nestedContentSelector = nestedContentSelector;\n\t        this.transitionCheckTimeout = transitionCheckTimeout;\n\t    }\n\t    /**\n\t     * Asynchronously shows an element by applying its {showClass} CSS class.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    AnimatedElement.prototype.show = function () {\n\t        var _this = this;\n\t        if (!this.hidden) {\n\t            return Promise.resolve(this);\n\t        }\n\t        else\n\t            return new Promise(function (resolve) {\n\t                var self = _this;\n\t                _this.state = 'showing';\n\t                Event_1.default.trigger(AnimatedElement.EVENTS.SHOWING, _this);\n\t                if (_this.hideClass)\n\t                    utils_1.removeCssClass(_this.element, _this.hideClass);\n\t                if (_this.showClass)\n\t                    utils_1.addCssClass(_this.element, _this.showClass);\n\t                if (_this.targetTransitionEvents.length == 0) {\n\t                    return resolve(_this);\n\t                }\n\t                else {\n\t                    var timerId = setTimeout(function () {\n\t                        log.debug(\"Element did not completely show (state: \" + _this.state + \").\");\n\t                    }, _this.transitionCheckTimeout);\n\t                    utils_1.once(_this.element, 'transitionend', function (event, destroyListenerFn) {\n\t                        if (event.target === _this.element &&\n\t                            utils_1.contains(_this.targetTransitionEvents, event.propertyName)) {\n\t                            clearTimeout(timerId);\n\t                            // Uninstall the event listener for transitionend\n\t                            destroyListenerFn();\n\t                            _this.state = 'shown';\n\t                            Event_1.default.trigger(AnimatedElement.EVENTS.SHOWN, _this);\n\t                            return resolve(_this);\n\t                        }\n\t                    }, true);\n\t                }\n\t            });\n\t    };\n\t    /**\n\t     * Asynchronously hides an element by applying its {hideClass} CSS class.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    AnimatedElement.prototype.hide = function () {\n\t        var _this = this;\n\t        if (!this.shown) {\n\t            return Promise.resolve(this);\n\t        }\n\t        else\n\t            return new Promise(function (resolve) {\n\t                _this.state = 'hiding';\n\t                Event_1.default.trigger(AnimatedElement.EVENTS.HIDING, _this);\n\t                if (_this.showClass)\n\t                    utils_1.removeCssClass(_this.element, _this.showClass);\n\t                if (_this.hideClass)\n\t                    utils_1.addCssClass(_this.element, _this.hideClass);\n\t                if (_this.targetTransitionEvents.length == 0) {\n\t                    return resolve(_this);\n\t                }\n\t                else {\n\t                    utils_1.once(_this.element, 'transitionend', function (event, destroyListenerFn) {\n\t                        var timerId = setTimeout(function () {\n\t                            log.debug(\"Element did not completely hide (state: \" + _this.state + \").\");\n\t                        }, _this.transitionCheckTimeout);\n\t                        if (event.target === _this.element &&\n\t                            utils_1.contains(_this.targetTransitionEvents, event.propertyName)) {\n\t                            clearTimeout(timerId);\n\t                            // Uninstall the event listener for transitionend\n\t                            destroyListenerFn();\n\t                            _this.state = 'hidden';\n\t                            Event_1.default.trigger(AnimatedElement.EVENTS.HIDDEN, _this);\n\t                            return resolve(_this);\n\t                        }\n\t                    }, true);\n\t                }\n\t            });\n\t    };\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being shown.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    AnimatedElement.prototype.waitUntilShown = function () {\n\t        var _this = this;\n\t        if (this.state === 'shown')\n\t            return Promise.resolve(this);\n\t        else\n\t            return new Promise(function (resolve) {\n\t                OneSignal.once(AnimatedElement.EVENTS.SHOWN, function (event) {\n\t                    var self = _this;\n\t                    if (event === _this) {\n\t                        return resolve(_this);\n\t                    }\n\t                }, true);\n\t            });\n\t    };\n\t    /**\n\t     * Asynchronously waits for an element to finish transitioning to being hidden.\n\t     * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n\t     */\n\t    AnimatedElement.prototype.waitUntilHidden = function () {\n\t        var _this = this;\n\t        if (this.state === 'hidden')\n\t            return Promise.resolve(this);\n\t        else\n\t            return new Promise(function (resolve) {\n\t                OneSignal.once(AnimatedElement.EVENTS.HIDDEN, function (event) {\n\t                    if (event === _this) {\n\t                        return resolve(_this);\n\t                    }\n\t                }, true);\n\t            });\n\t    };\n\t    Object.defineProperty(AnimatedElement, \"EVENTS\", {\n\t        get: function () {\n\t            return {\n\t                SHOWING: 'animatedElementShowing',\n\t                SHOWN: 'animatedElementShown',\n\t                HIDING: 'animatedElementHiding',\n\t                HIDDEN: 'aniamtedElementHidden',\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(AnimatedElement.prototype, \"content\", {\n\t        /**\n\t         * Returns the native element's innerHTML property.\n\t         * @returns {string} Returns the native element's innerHTML property.\n\t         */\n\t        get: function () {\n\t            if (this.nestedContentSelector)\n\t                return this.element.querySelector(this.nestedContentSelector).innerHTML;\n\t            else\n\t                return this.element.innerHTML;\n\t        },\n\t        /**\n\t         * Sets the native element's innerHTML property.\n\t         * @param value {string} The HTML to set to the element.\n\t         */\n\t        set: function (value) {\n\t            if (this.nestedContentSelector) {\n\t                this.element.querySelector(this.nestedContentSelector).innerHTML = value;\n\t            }\n\t            else {\n\t                this.element.innerHTML = value;\n\t            }\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(AnimatedElement.prototype, \"element\", {\n\t        /**\n\t         * Returns the native {Element} via document.querySelector().\n\t         * @returns {Element} Returns the native {Element} via document.querySelector().\n\t         */\n\t        get: function () {\n\t            return document.querySelector(this.selector);\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(AnimatedElement.prototype, \"showing\", {\n\t        /* States an element can be in */\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be transitioning to being shown.\n\t         */\n\t        get: function () {\n\t            return this.state === 'showing';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(AnimatedElement.prototype, \"shown\", {\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be already shown.\n\t         */\n\t        get: function () {\n\t            return this.state === 'shown';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(AnimatedElement.prototype, \"hiding\", {\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be transitioning to hiding.\n\t         */\n\t        get: function () {\n\t            return this.state === 'hiding';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(AnimatedElement.prototype, \"hidden\", {\n\t        /**\n\t         * Synchronously returns the last known state of the element.\n\t         * @returns {boolean} Returns true if the element was last known to be already hidden.\n\t         */\n\t        get: function () {\n\t            return this.state === 'hidden';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    return AnimatedElement;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = AnimatedElement;\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar OneSignalError_1 = __webpack_require__(10);\n\tvar PermissionPromptType_1 = __webpack_require__(37);\n\t(function (InvalidStateReason) {\n\t    InvalidStateReason[InvalidStateReason[\"MissingAppId\"] = 0] = \"MissingAppId\";\n\t    InvalidStateReason[InvalidStateReason[\"RedundantPermissionMessage\"] = 1] = \"RedundantPermissionMessage\";\n\t    InvalidStateReason[InvalidStateReason[\"PushPermissionAlreadyGranted\"] = 2] = \"PushPermissionAlreadyGranted\";\n\t    InvalidStateReason[InvalidStateReason[\"UnsupportedEnvironment\"] = 3] = \"UnsupportedEnvironment\";\n\t})(exports.InvalidStateReason || (exports.InvalidStateReason = {}));\n\tvar InvalidStateReason = exports.InvalidStateReason;\n\tvar InvalidStateError = (function (_super) {\n\t    __extends(InvalidStateError, _super);\n\t    function InvalidStateError(reason, extra) {\n\t        var _this;\n\t        switch (reason) {\n\t            case InvalidStateReason.MissingAppId:\n\t                _this = _super.call(this, \"Missing required app ID.\") || this;\n\t                break;\n\t            case InvalidStateReason.RedundantPermissionMessage:\n\t                var extraInfo = '';\n\t                if (extra.permissionPromptType)\n\t                    extraInfo = \"(\" + PermissionPromptType_1.PermissionPromptType[extra.permissionPromptType] + \")\";\n\t                _this = _super.call(this, \"Another permission message \" + extraInfo + \" is being displayed.\") || this;\n\t                break;\n\t            case InvalidStateReason.PushPermissionAlreadyGranted:\n\t                _this = _super.call(this, \"Push permission has already been granted.\") || this;\n\t                break;\n\t            case InvalidStateReason.UnsupportedEnvironment:\n\t                _this = _super.call(this, \"The current environment does not support this operation.\") || this;\n\t                break;\n\t        }\n\t        _this.reason = InvalidStateReason[reason];\n\t        return _this;\n\t    }\n\t    return InvalidStateError;\n\t}(OneSignalError_1.default));\n\texports.InvalidStateError = InvalidStateError;\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\t// css base code, injected by the css-loader\r\n\tmodule.exports = function() {\r\n\t\tvar list = [];\r\n\t\r\n\t\t// return the list of modules as css string\r\n\t\tlist.toString = function toString() {\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar item = this[i];\r\n\t\t\t\tif(item[2]) {\r\n\t\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresult.push(item[1]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result.join(\"\");\r\n\t\t};\r\n\t\r\n\t\t// import a list of modules into the list\r\n\t\tlist.i = function(modules, mediaQuery) {\r\n\t\t\tif(typeof modules === \"string\")\r\n\t\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\t\tvar alreadyImportedModules = {};\r\n\t\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\t\tvar id = this[i][0];\r\n\t\t\t\tif(typeof id === \"number\")\r\n\t\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t\t}\r\n\t\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\t\tvar item = modules[i];\r\n\t\t\t\t// skip already imported module\r\n\t\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlist.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn list;\r\n\t};\r\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {/*** IMPORTS FROM imports-loader ***/\n\t(function() {\n\t\n\t(function(self) {\n\t  'use strict';\n\t\n\t  if (self.fetch) {\n\t    return\n\t  }\n\t\n\t  var support = {\n\t    searchParams: 'URLSearchParams' in self,\n\t    iterable: 'Symbol' in self && 'iterator' in Symbol,\n\t    blob: 'FileReader' in self && 'Blob' in self && (function() {\n\t      try {\n\t        new Blob()\n\t        return true\n\t      } catch(e) {\n\t        return false\n\t      }\n\t    })(),\n\t    formData: 'FormData' in self,\n\t    arrayBuffer: 'ArrayBuffer' in self\n\t  }\n\t\n\t  function normalizeName(name) {\n\t    if (typeof name !== 'string') {\n\t      name = String(name)\n\t    }\n\t    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n\t      throw new TypeError('Invalid character in header field name')\n\t    }\n\t    return name.toLowerCase()\n\t  }\n\t\n\t  function normalizeValue(value) {\n\t    if (typeof value !== 'string') {\n\t      value = String(value)\n\t    }\n\t    return value\n\t  }\n\t\n\t  // Build a destructive iterator for the value list\n\t  function iteratorFor(items) {\n\t    var iterator = {\n\t      next: function() {\n\t        var value = items.shift()\n\t        return {done: value === undefined, value: value}\n\t      }\n\t    }\n\t\n\t    if (support.iterable) {\n\t      iterator[Symbol.iterator] = function() {\n\t        return iterator\n\t      }\n\t    }\n\t\n\t    return iterator\n\t  }\n\t\n\t  function Headers(headers) {\n\t    this.map = {}\n\t\n\t    if (headers instanceof Headers) {\n\t      headers.forEach(function(value, name) {\n\t        this.append(name, value)\n\t      }, this)\n\t\n\t    } else if (headers) {\n\t      Object.getOwnPropertyNames(headers).forEach(function(name) {\n\t        this.append(name, headers[name])\n\t      }, this)\n\t    }\n\t  }\n\t\n\t  Headers.prototype.append = function(name, value) {\n\t    name = normalizeName(name)\n\t    value = normalizeValue(value)\n\t    var list = this.map[name]\n\t    if (!list) {\n\t      list = []\n\t      this.map[name] = list\n\t    }\n\t    list.push(value)\n\t  }\n\t\n\t  Headers.prototype['delete'] = function(name) {\n\t    delete this.map[normalizeName(name)]\n\t  }\n\t\n\t  Headers.prototype.get = function(name) {\n\t    var values = this.map[normalizeName(name)]\n\t    return values ? values[0] : null\n\t  }\n\t\n\t  Headers.prototype.getAll = function(name) {\n\t    return this.map[normalizeName(name)] || []\n\t  }\n\t\n\t  Headers.prototype.has = function(name) {\n\t    return this.map.hasOwnProperty(normalizeName(name))\n\t  }\n\t\n\t  Headers.prototype.set = function(name, value) {\n\t    this.map[normalizeName(name)] = [normalizeValue(value)]\n\t  }\n\t\n\t  Headers.prototype.forEach = function(callback, thisArg) {\n\t    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n\t      this.map[name].forEach(function(value) {\n\t        callback.call(thisArg, value, name, this)\n\t      }, this)\n\t    }, this)\n\t  }\n\t\n\t  Headers.prototype.keys = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push(name) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.values = function() {\n\t    var items = []\n\t    this.forEach(function(value) { items.push(value) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  Headers.prototype.entries = function() {\n\t    var items = []\n\t    this.forEach(function(value, name) { items.push([name, value]) })\n\t    return iteratorFor(items)\n\t  }\n\t\n\t  if (support.iterable) {\n\t    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n\t  }\n\t\n\t  function consumed(body) {\n\t    if (body.bodyUsed) {\n\t      return Promise.reject(new TypeError('Already read'))\n\t    }\n\t    body.bodyUsed = true\n\t  }\n\t\n\t  function fileReaderReady(reader) {\n\t    return new Promise(function(resolve, reject) {\n\t      reader.onload = function() {\n\t        resolve(reader.result)\n\t      }\n\t      reader.onerror = function() {\n\t        reject(reader.error)\n\t      }\n\t    })\n\t  }\n\t\n\t  function readBlobAsArrayBuffer(blob) {\n\t    var reader = new FileReader()\n\t    reader.readAsArrayBuffer(blob)\n\t    return fileReaderReady(reader)\n\t  }\n\t\n\t  function readBlobAsText(blob) {\n\t    var reader = new FileReader()\n\t    reader.readAsText(blob)\n\t    return fileReaderReady(reader)\n\t  }\n\t\n\t  function Body() {\n\t    this.bodyUsed = false\n\t\n\t    this._initBody = function(body) {\n\t      this._bodyInit = body\n\t      if (typeof body === 'string') {\n\t        this._bodyText = body\n\t      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n\t        this._bodyBlob = body\n\t      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n\t        this._bodyFormData = body\n\t      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t        this._bodyText = body.toString()\n\t      } else if (!body) {\n\t        this._bodyText = ''\n\t      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n\t        // Only support ArrayBuffers for POST method.\n\t        // Receiving ArrayBuffers happens via Blobs, instead.\n\t      } else {\n\t        throw new Error('unsupported BodyInit type')\n\t      }\n\t\n\t      if (!this.headers.get('content-type')) {\n\t        if (typeof body === 'string') {\n\t          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n\t        } else if (this._bodyBlob && this._bodyBlob.type) {\n\t          this.headers.set('content-type', this._bodyBlob.type)\n\t        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n\t          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n\t        }\n\t      }\n\t    }\n\t\n\t    if (support.blob) {\n\t      this.blob = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return Promise.resolve(this._bodyBlob)\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as blob')\n\t        } else {\n\t          return Promise.resolve(new Blob([this._bodyText]))\n\t        }\n\t      }\n\t\n\t      this.arrayBuffer = function() {\n\t        return this.blob().then(readBlobAsArrayBuffer)\n\t      }\n\t\n\t      this.text = function() {\n\t        var rejected = consumed(this)\n\t        if (rejected) {\n\t          return rejected\n\t        }\n\t\n\t        if (this._bodyBlob) {\n\t          return readBlobAsText(this._bodyBlob)\n\t        } else if (this._bodyFormData) {\n\t          throw new Error('could not read FormData body as text')\n\t        } else {\n\t          return Promise.resolve(this._bodyText)\n\t        }\n\t      }\n\t    } else {\n\t      this.text = function() {\n\t        var rejected = consumed(this)\n\t        return rejected ? rejected : Promise.resolve(this._bodyText)\n\t      }\n\t    }\n\t\n\t    if (support.formData) {\n\t      this.formData = function() {\n\t        return this.text().then(decode)\n\t      }\n\t    }\n\t\n\t    this.json = function() {\n\t      return this.text().then(JSON.parse)\n\t    }\n\t\n\t    return this\n\t  }\n\t\n\t  // HTTP methods whose capitalization should be normalized\n\t  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\t\n\t  function normalizeMethod(method) {\n\t    var upcased = method.toUpperCase()\n\t    return (methods.indexOf(upcased) > -1) ? upcased : method\n\t  }\n\t\n\t  function Request(input, options) {\n\t    options = options || {}\n\t    var body = options.body\n\t    if (Request.prototype.isPrototypeOf(input)) {\n\t      if (input.bodyUsed) {\n\t        throw new TypeError('Already read')\n\t      }\n\t      this.url = input.url\n\t      this.credentials = input.credentials\n\t      if (!options.headers) {\n\t        this.headers = new Headers(input.headers)\n\t      }\n\t      this.method = input.method\n\t      this.mode = input.mode\n\t      if (!body) {\n\t        body = input._bodyInit\n\t        input.bodyUsed = true\n\t      }\n\t    } else {\n\t      this.url = input\n\t    }\n\t\n\t    this.credentials = options.credentials || this.credentials || 'omit'\n\t    if (options.headers || !this.headers) {\n\t      this.headers = new Headers(options.headers)\n\t    }\n\t    this.method = normalizeMethod(options.method || this.method || 'GET')\n\t    this.mode = options.mode || this.mode || null\n\t    this.referrer = null\n\t\n\t    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n\t      throw new TypeError('Body not allowed for GET or HEAD requests')\n\t    }\n\t    this._initBody(body)\n\t  }\n\t\n\t  Request.prototype.clone = function() {\n\t    return new Request(this)\n\t  }\n\t\n\t  function decode(body) {\n\t    var form = new FormData()\n\t    body.trim().split('&').forEach(function(bytes) {\n\t      if (bytes) {\n\t        var split = bytes.split('=')\n\t        var name = split.shift().replace(/\\+/g, ' ')\n\t        var value = split.join('=').replace(/\\+/g, ' ')\n\t        form.append(decodeURIComponent(name), decodeURIComponent(value))\n\t      }\n\t    })\n\t    return form\n\t  }\n\t\n\t  function headers(xhr) {\n\t    var head = new Headers()\n\t    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n\t    pairs.forEach(function(header) {\n\t      var split = header.trim().split(':')\n\t      var key = split.shift().trim()\n\t      var value = split.join(':').trim()\n\t      head.append(key, value)\n\t    })\n\t    return head\n\t  }\n\t\n\t  Body.call(Request.prototype)\n\t\n\t  function Response(bodyInit, options) {\n\t    if (!options) {\n\t      options = {}\n\t    }\n\t\n\t    this.type = 'default'\n\t    this.status = options.status\n\t    this.ok = this.status >= 200 && this.status < 300\n\t    this.statusText = options.statusText\n\t    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n\t    this.url = options.url || ''\n\t    this._initBody(bodyInit)\n\t  }\n\t\n\t  Body.call(Response.prototype)\n\t\n\t  Response.prototype.clone = function() {\n\t    return new Response(this._bodyInit, {\n\t      status: this.status,\n\t      statusText: this.statusText,\n\t      headers: new Headers(this.headers),\n\t      url: this.url\n\t    })\n\t  }\n\t\n\t  Response.error = function() {\n\t    var response = new Response(null, {status: 0, statusText: ''})\n\t    response.type = 'error'\n\t    return response\n\t  }\n\t\n\t  var redirectStatuses = [301, 302, 303, 307, 308]\n\t\n\t  Response.redirect = function(url, status) {\n\t    if (redirectStatuses.indexOf(status) === -1) {\n\t      throw new RangeError('Invalid status code')\n\t    }\n\t\n\t    return new Response(null, {status: status, headers: {location: url}})\n\t  }\n\t\n\t  self.Headers = Headers\n\t  self.Request = Request\n\t  self.Response = Response\n\t\n\t  self.fetch = function(input, init) {\n\t    return new Promise(function(resolve, reject) {\n\t      var request\n\t      if (Request.prototype.isPrototypeOf(input) && !init) {\n\t        request = input\n\t      } else {\n\t        request = new Request(input, init)\n\t      }\n\t\n\t      var xhr = new XMLHttpRequest()\n\t\n\t      function responseURL() {\n\t        if ('responseURL' in xhr) {\n\t          return xhr.responseURL\n\t        }\n\t\n\t        // Avoid security warnings on getResponseHeader when not allowed by CORS\n\t        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n\t          return xhr.getResponseHeader('X-Request-URL')\n\t        }\n\t\n\t        return\n\t      }\n\t\n\t      xhr.onload = function() {\n\t        var options = {\n\t          status: xhr.status,\n\t          statusText: xhr.statusText,\n\t          headers: headers(xhr),\n\t          url: responseURL()\n\t        }\n\t        var body = 'response' in xhr ? xhr.response : xhr.responseText\n\t        resolve(new Response(body, options))\n\t      }\n\t\n\t      xhr.onerror = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.ontimeout = function() {\n\t        reject(new TypeError('Network request failed'))\n\t      }\n\t\n\t      xhr.open(request.method, request.url, true)\n\t\n\t      if (request.credentials === 'include') {\n\t        xhr.withCredentials = true\n\t      }\n\t\n\t      if ('responseType' in xhr && support.blob) {\n\t        xhr.responseType = 'blob'\n\t      }\n\t\n\t      request.headers.forEach(function(value, name) {\n\t        xhr.setRequestHeader(name, value)\n\t      })\n\t\n\t      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n\t    })\n\t  }\n\t  self.fetch.polyfill = true\n\t})(typeof self !== 'undefined' ? self : this);\n\t\n\t\n\t/*** EXPORTS FROM exports-loader ***/\n\tmodule.exports = global.fetch;\n\t}.call(global));\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n\t * JavaScript Cookie v2.1.3\n\t * https://github.com/js-cookie/js-cookie\n\t *\n\t * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n\t * Released under the MIT license\n\t */\n\t;(function (factory) {\n\t\tvar registeredInModuleLoader = false;\n\t\tif (true) {\n\t\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\t\tregisteredInModuleLoader = true;\n\t\t}\n\t\tif (true) {\n\t\t\tmodule.exports = factory();\n\t\t\tregisteredInModuleLoader = true;\n\t\t}\n\t\tif (!registeredInModuleLoader) {\n\t\t\tvar OldCookies = window.Cookies;\n\t\t\tvar api = window.Cookies = factory();\n\t\t\tapi.noConflict = function () {\n\t\t\t\twindow.Cookies = OldCookies;\n\t\t\t\treturn api;\n\t\t\t};\n\t\t}\n\t}(function () {\n\t\tfunction extend () {\n\t\t\tvar i = 0;\n\t\t\tvar result = {};\n\t\t\tfor (; i < arguments.length; i++) {\n\t\t\t\tvar attributes = arguments[ i ];\n\t\t\t\tfor (var key in attributes) {\n\t\t\t\t\tresult[key] = attributes[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\n\t\tfunction init (converter) {\n\t\t\tfunction api (key, value, attributes) {\n\t\t\t\tvar result;\n\t\t\t\tif (typeof document === 'undefined') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\t// Write\n\t\n\t\t\t\tif (arguments.length > 1) {\n\t\t\t\t\tattributes = extend({\n\t\t\t\t\t\tpath: '/'\n\t\t\t\t\t}, api.defaults, attributes);\n\t\n\t\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t\t}\n\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {}\n\t\n\t\t\t\t\tif (!converter.write) {\n\t\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\t\n\t\t\t\t\treturn (document.cookie = [\n\t\t\t\t\t\tkey, '=', value,\n\t\t\t\t\t\tattributes.expires ? '; expires=' + attributes.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n\t\t\t\t\t\tattributes.path ? '; path=' + attributes.path : '',\n\t\t\t\t\t\tattributes.domain ? '; domain=' + attributes.domain : '',\n\t\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t\t].join(''));\n\t\t\t\t}\n\t\n\t\t\t\t// Read\n\t\n\t\t\t\tif (!key) {\n\t\t\t\t\tresult = {};\n\t\t\t\t}\n\t\n\t\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t\t// calling \"get()\"\n\t\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\t\tvar i = 0;\n\t\n\t\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\t\tvar cookie = parts.slice(1).join('=');\n\t\n\t\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t\t}\n\t\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\t\n\t\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (!key) {\n\t\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {}\n\t\t\t\t}\n\t\n\t\t\t\treturn result;\n\t\t\t}\n\t\n\t\t\tapi.set = api;\n\t\t\tapi.get = function (key) {\n\t\t\t\treturn api.call(api, key);\n\t\t\t};\n\t\t\tapi.getJSON = function () {\n\t\t\t\treturn api.apply({\n\t\t\t\t\tjson: true\n\t\t\t\t}, [].slice.call(arguments));\n\t\t\t};\n\t\t\tapi.defaults = {};\n\t\n\t\t\tapi.remove = function (key, attributes) {\n\t\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\t\texpires: -1\n\t\t\t\t}));\n\t\t\t};\n\t\n\t\t\tapi.withConverter = init;\n\t\n\t\t\treturn api;\n\t\t}\n\t\n\t\treturn init(function () {});\n\t}));\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*\r\n\t\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\t\tAuthor Tobias Koppers @sokra\r\n\t*/\r\n\tvar stylesInDom = {},\r\n\t\tmemoize = function(fn) {\r\n\t\t\tvar memo;\r\n\t\t\treturn function () {\r\n\t\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\t\treturn memo;\r\n\t\t\t};\r\n\t\t},\r\n\t\tisOldIE = memoize(function() {\r\n\t\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t\t}),\r\n\t\tgetHeadElement = memoize(function () {\r\n\t\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t\t}),\r\n\t\tsingletonElement = null,\r\n\t\tsingletonCounter = 0,\r\n\t\tstyleElementsInsertedAtTop = [];\r\n\t\r\n\tmodule.exports = function(list, options) {\r\n\t\tif(false) {\r\n\t\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t\t}\r\n\t\r\n\t\toptions = options || {};\r\n\t\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t\t// tags it will allow on a page\r\n\t\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\t\r\n\t\t// By default, add <style> tags to the bottom of <head>.\r\n\t\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\t\r\n\t\tvar styles = listToStyles(list);\r\n\t\taddStylesToDom(styles, options);\r\n\t\r\n\t\treturn function update(newList) {\r\n\t\t\tvar mayRemove = [];\r\n\t\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\t\tvar item = styles[i];\r\n\t\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\t\tdomStyle.refs--;\r\n\t\t\t\tmayRemove.push(domStyle);\r\n\t\t\t}\r\n\t\t\tif(newList) {\r\n\t\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\t\taddStylesToDom(newStyles, options);\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tfunction addStylesToDom(styles, options) {\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tif(domStyle) {\r\n\t\t\t\tdomStyle.refs++;\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t\t}\r\n\t\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar parts = [];\r\n\t\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t\t}\r\n\t\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction listToStyles(list) {\r\n\t\tvar styles = [];\r\n\t\tvar newStyles = {};\r\n\t\tfor(var i = 0; i < list.length; i++) {\r\n\t\t\tvar item = list[i];\r\n\t\t\tvar id = item[0];\r\n\t\t\tvar css = item[1];\r\n\t\t\tvar media = item[2];\r\n\t\t\tvar sourceMap = item[3];\r\n\t\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\t\tif(!newStyles[id])\r\n\t\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\t\telse\r\n\t\t\t\tnewStyles[id].parts.push(part);\r\n\t\t}\r\n\t\treturn styles;\r\n\t}\r\n\t\r\n\tfunction insertStyleElement(options, styleElement) {\r\n\t\tvar head = getHeadElement();\r\n\t\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\t\tif (options.insertAt === \"top\") {\r\n\t\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t\t} else {\r\n\t\t\t\thead.appendChild(styleElement);\r\n\t\t\t}\r\n\t\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t\t} else if (options.insertAt === \"bottom\") {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction removeStyleElement(styleElement) {\r\n\t\tstyleElement.parentNode.removeChild(styleElement);\r\n\t\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\t\tif(idx >= 0) {\r\n\t\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction createStyleElement(options) {\r\n\t\tvar styleElement = document.createElement(\"style\");\r\n\t\tstyleElement.type = \"text/css\";\r\n\t\tinsertStyleElement(options, styleElement);\r\n\t\treturn styleElement;\r\n\t}\r\n\t\r\n\tfunction createLinkElement(options) {\r\n\t\tvar linkElement = document.createElement(\"link\");\r\n\t\tlinkElement.rel = \"stylesheet\";\r\n\t\tinsertStyleElement(options, linkElement);\r\n\t\treturn linkElement;\r\n\t}\r\n\t\r\n\tfunction addStyle(obj, options) {\r\n\t\tvar styleElement, update, remove;\r\n\t\r\n\t\tif (options.singleton) {\r\n\t\t\tvar styleIndex = singletonCounter++;\r\n\t\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t\t} else if(obj.sourceMap &&\r\n\t\t\ttypeof URL === \"function\" &&\r\n\t\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\t\ttypeof Blob === \"function\" &&\r\n\t\t\ttypeof btoa === \"function\") {\r\n\t\t\tstyleElement = createLinkElement(options);\r\n\t\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t\tif(styleElement.href)\r\n\t\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tstyleElement = createStyleElement(options);\r\n\t\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\t\tremove = function() {\r\n\t\t\t\tremoveStyleElement(styleElement);\r\n\t\t\t};\r\n\t\t}\r\n\t\r\n\t\tupdate(obj);\r\n\t\r\n\t\treturn function updateStyle(newObj) {\r\n\t\t\tif(newObj) {\r\n\t\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tupdate(obj = newObj);\r\n\t\t\t} else {\r\n\t\t\t\tremove();\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tvar replaceText = (function () {\r\n\t\tvar textStore = [];\r\n\t\r\n\t\treturn function (index, replacement) {\r\n\t\t\ttextStore[index] = replacement;\r\n\t\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t\t};\r\n\t})();\r\n\t\r\n\tfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\t\tvar css = remove ? \"\" : obj.css;\r\n\t\r\n\t\tif (styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t\t} else {\r\n\t\t\tvar cssNode = document.createTextNode(css);\r\n\t\t\tvar childNodes = styleElement.childNodes;\r\n\t\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\t\tif (childNodes.length) {\r\n\t\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t\t} else {\r\n\t\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction applyToTag(styleElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar media = obj.media;\r\n\t\r\n\t\tif(media) {\r\n\t\t\tstyleElement.setAttribute(\"media\", media)\r\n\t\t}\r\n\t\r\n\t\tif(styleElement.styleSheet) {\r\n\t\t\tstyleElement.styleSheet.cssText = css;\r\n\t\t} else {\r\n\t\t\twhile(styleElement.firstChild) {\r\n\t\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t\t}\r\n\t\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction updateLink(linkElement, obj) {\r\n\t\tvar css = obj.css;\r\n\t\tvar sourceMap = obj.sourceMap;\r\n\t\r\n\t\tif(sourceMap) {\r\n\t\t\t// http://stackoverflow.com/a/26603875\r\n\t\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t\t}\r\n\t\r\n\t\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\t\r\n\t\tvar oldSrc = linkElement.href;\r\n\t\r\n\t\tlinkElement.href = URL.createObjectURL(blob);\r\n\t\r\n\t\tif(oldSrc)\r\n\t\t\tURL.revokeObjectURL(oldSrc);\r\n\t}\r\n\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar page = __webpack_require__(72);\n\tvar worker = __webpack_require__(73);\n\tvar api;\n\t\n\tif ('serviceWorker' in navigator) {\n\t  api = page();\n\t} else if ('clients' in self) {\n\t  api = worker();\n\t} else {\n\t  api = {\n\t    on: complain,\n\t    once: complain,\n\t    off: complain,\n\t    emit: complain,\n\t    broadcast: complain\n\t  };\n\t}\n\t\n\tfunction complain () {\n\t  throw new Error('Swivel couldn\\'t detect ServiceWorker support. Please feature detect before using Swivel in your web pages!');\n\t}\n\t\n\tmodule.exports = api;\n\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate, clearImmediate) {var nextTick = __webpack_require__(39).nextTick;\n\tvar apply = Function.prototype.apply;\n\tvar slice = Array.prototype.slice;\n\tvar immediateIds = {};\n\tvar nextImmediateId = 0;\n\t\n\t// DOM APIs, for completeness\n\t\n\texports.setTimeout = function() {\n\t  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n\t};\n\texports.setInterval = function() {\n\t  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n\t};\n\texports.clearTimeout =\n\texports.clearInterval = function(timeout) { timeout.close(); };\n\t\n\tfunction Timeout(id, clearFn) {\n\t  this._id = id;\n\t  this._clearFn = clearFn;\n\t}\n\tTimeout.prototype.unref = Timeout.prototype.ref = function() {};\n\tTimeout.prototype.close = function() {\n\t  this._clearFn.call(window, this._id);\n\t};\n\t\n\t// Does not start the time, just sets up the members needed.\n\texports.enroll = function(item, msecs) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = msecs;\n\t};\n\t\n\texports.unenroll = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t  item._idleTimeout = -1;\n\t};\n\t\n\texports._unrefActive = exports.active = function(item) {\n\t  clearTimeout(item._idleTimeoutId);\n\t\n\t  var msecs = item._idleTimeout;\n\t  if (msecs >= 0) {\n\t    item._idleTimeoutId = setTimeout(function onTimeout() {\n\t      if (item._onTimeout)\n\t        item._onTimeout();\n\t    }, msecs);\n\t  }\n\t};\n\t\n\t// That's not how node.js implements it but the exposed api is the same.\n\texports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n\t  var id = nextImmediateId++;\n\t  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\t\n\t  immediateIds[id] = true;\n\t\n\t  nextTick(function onNextTick() {\n\t    if (immediateIds[id]) {\n\t      // fn.call() is faster so we optimize for the common use-case\n\t      // @see http://jsperf.com/call-apply-segu\n\t      if (args) {\n\t        fn.apply(null, args);\n\t      } else {\n\t        fn.call(null);\n\t      }\n\t      // Prevent ids from leaking\n\t      exports.clearImmediate(id);\n\t    }\n\t  });\n\t\n\t  return id;\n\t};\n\t\n\texports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n\t  delete immediateIds[id];\n\t};\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(29).setImmediate, __webpack_require__(29).clearImmediate))\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar utils_1 = __webpack_require__(1);\n\tvar EventEmitter = __webpack_require__(19);\n\tvar heir = __webpack_require__(18);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar vars_1 = __webpack_require__(7);\n\tvar objectAssign = __webpack_require__(9);\n\tvar log = __webpack_require__(2);\n\t/**\n\t * Establishes a cross-domain MessageChannel between the current browsing context (this page) and another (an iFrame, popup, or parent page).\n\t */\n\tvar Postmam = (function () {\n\t    /**\n\t     * Initializes Postmam with settings but does not establish a channel or set up any message listeners.\n\t     * @param windowReference The window to postMessage() the initial MessageChannel port to.\n\t     * @param sendToOrigin The origin that will receive the initial postMessage with the transferred message channel port object.\n\t     * @param receiveFromOrigin The origin to allow incoming messages from. If messages do not come from this origin they will be discarded. Only affects the initial handshake.\n\t     * @remarks The initiating (client) page must call this after the page has been loaded so that the other page has a chance to receive the initial handshake message. The receiving (server) page must set up a message listener to catch the initial handshake message.\n\t     */\n\t    function Postmam(windowReference, sendToOrigin, receiveFromOrigin) {\n\t        this.windowReference = windowReference;\n\t        this.sendToOrigin = sendToOrigin;\n\t        this.receiveFromOrigin = receiveFromOrigin;\n\t        if (!window || !window.postMessage) {\n\t            throw new Error('Must pass in a valid window reference supporting postMessage():' + windowReference);\n\t        }\n\t        if (!sendToOrigin || !receiveFromOrigin) {\n\t            throw new Error('Invalid origin. Must be set.');\n\t        }\n\t        heir.merge(this, new EventEmitter());\n\t        this.channel = new MessageChannel();\n\t        this.messagePort = null;\n\t        this.isListening = false;\n\t        this.isConnected = false;\n\t        this.replies = {};\n\t    }\n\t    Object.defineProperty(Postmam, \"HANDSHAKE_MESSAGE\", {\n\t        get: function () {\n\t            return \"onesignal.postmam.handshake\";\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Postmam, \"CONNECTED_MESSAGE\", {\n\t        get: function () {\n\t            return \"onesignal.postmam.connected\";\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    /**\n\t     * Opens a message event listener to listen for a Postmam handshake from another browsing context. This listener is closed as soon as the connection is established.\n\t     */\n\t    Postmam.prototype.listen = function () {\n\t        log.trace('(Postmam) Called listen().');\n\t        if (this.isListening) {\n\t            log.debug('(Postmam) Already listening for Postmam connections.');\n\t            return;\n\t        }\n\t        if (!Environment_1.default.isBrowser()) {\n\t            return;\n\t        }\n\t        this.isListening = true;\n\t        log.debug('(Postmam) Listening for Postmam connections.', this);\n\t        // One of the messages will contain our MessageChannel port\n\t        window.addEventListener('message', this.onWindowMessagePostmanConnectReceived.bind(this));\n\t    };\n\t    Postmam.prototype.startPostMessageReceive = function () {\n\t        window.addEventListener('message', this.onWindowPostMessageReceived.bind(this));\n\t    };\n\t    Postmam.prototype.stopPostMessageReceive = function () {\n\t        window.removeEventListener('message', this.onWindowPostMessageReceived);\n\t    };\n\t    Postmam.prototype.destroy = function () {\n\t        this.stopPostMessageReceive();\n\t        this.removeEvent();\n\t    };\n\t    Postmam.prototype.onWindowPostMessageReceived = function (e) {\n\t        // Discard messages from unexpected origins; messages come frequently from other origins\n\t        if (!this.isSafeOrigin(e.origin)) {\n\t            // log.debug(`(Postmam) Discarding message because ${e.origin} is not an allowed origin:`, e.data)\n\t            return;\n\t        }\n\t        //log.debug(`(Postmam) (onWindowPostMessageReceived) (${Environment.getEnv()}):`, e);\n\t        var _a = e.data, messageId = _a.id, messageCommand = _a.command, messageData = _a.data, messageSource = _a.source;\n\t        if (messageCommand === Postmam.CONNECTED_MESSAGE) {\n\t            this.emit('connect');\n\t            this.isConnected = true;\n\t            return;\n\t        }\n\t        var messageBundle = {\n\t            id: messageId,\n\t            command: messageCommand,\n\t            data: messageData,\n\t            source: messageSource\n\t        };\n\t        var messageBundleWithReply = objectAssign({\n\t            reply: this.reply.bind(this, messageBundle)\n\t        }, messageBundle);\n\t        if (this.replies.hasOwnProperty(messageId)) {\n\t            log.info('(Postmam) This message is a reply.');\n\t            var replyFn = this.replies[messageId].bind(window);\n\t            var replyFnReturnValue = replyFn(messageBundleWithReply);\n\t            if (replyFnReturnValue === false) {\n\t                delete this.replies[messageId];\n\t            }\n\t        }\n\t        else {\n\t            this.emit(messageCommand, messageBundleWithReply);\n\t        }\n\t    };\n\t    Postmam.prototype.onWindowMessagePostmanConnectReceived = function (e) {\n\t        log.trace(\"(Postmam) (\" + Environment_1.default.getEnv() + \") Window postmessage for Postman connect received:\", e);\n\t        // Discard messages from unexpected origins; messages come frequently from other origins\n\t        if (!this.isSafeOrigin(e.origin)) {\n\t            // log.debug(`(Postmam) Discarding message because ${e.origin} is not an allowed origin:`, e.data)\n\t            return;\n\t        }\n\t        var handshake = e.data.handshake;\n\t        if (handshake !== Postmam.HANDSHAKE_MESSAGE) {\n\t            log.info('(Postmam) Got a postmam message, but not our expected handshake:', e.data);\n\t            // This was not our expected handshake message\n\t            return;\n\t        }\n\t        else {\n\t            log.info('(Postmam) Got our expected Postmam handshake message (and connecting...):', e.data);\n\t            // This was our expected handshake message\n\t            // Remove our message handler so we don't get spammed with cross-domain messages\n\t            window.removeEventListener('message', this.onWindowMessagePostmanConnectReceived);\n\t            // Get the message port\n\t            this.messagePort = e.ports[0];\n\t            this.messagePort.addEventListener('message', this.onMessageReceived.bind(this), false);\n\t            log.info('(Postmam) Removed previous message event listener for handshakes, replaced with main message listener.');\n\t            this.messagePort.start();\n\t            this.isConnected = true;\n\t            log.info(\"(Postmam) (\" + Environment_1.default.getEnv() + \") Connected.\");\n\t            this.message(Postmam.CONNECTED_MESSAGE);\n\t            this.emit('connect');\n\t        }\n\t    };\n\t    /**\n\t     * Establishes a message channel with a listening Postmam on another browsing context.\n\t     * @remarks Only call this if listen() is called on another page.\n\t     */\n\t    Postmam.prototype.connect = function () {\n\t        log.info(\"(Postmam) (\" + Environment_1.default.getEnv() + \") Establishing a connection to \" + this.sendToOrigin + \".\");\n\t        this.messagePort = this.channel.port1;\n\t        this.messagePort.addEventListener('message', this.onMessageReceived.bind(this), false);\n\t        this.messagePort.start();\n\t        this.windowReference.postMessage({\n\t            handshake: Postmam.HANDSHAKE_MESSAGE\n\t        }, this.sendToOrigin, [this.channel.port2]);\n\t    };\n\t    Postmam.prototype.onMessageReceived = function (e) {\n\t        //log.debug(`(Postmam) (${Environment.getEnv()}):`, e.data);\n\t        if (!e.data) {\n\t            log.debug(\"(\" + Environment_1.default.getEnv() + \") Received an empty Postmam message:\", e);\n\t            return;\n\t        }\n\t        var _a = e.data, messageId = _a.id, messageCommand = _a.command, messageData = _a.data, messageSource = _a.source;\n\t        if (messageCommand === Postmam.CONNECTED_MESSAGE) {\n\t            this.emit('connect');\n\t            this.isConnected = true;\n\t            return;\n\t        }\n\t        var messageBundle = {\n\t            id: messageId,\n\t            command: messageCommand,\n\t            data: messageData,\n\t            source: messageSource\n\t        };\n\t        var messageBundleWithReply = objectAssign({\n\t            reply: this.reply.bind(this, messageBundle)\n\t        }, messageBundle);\n\t        if (this.replies.hasOwnProperty(messageId)) {\n\t            var replyFn = this.replies[messageId].bind(window);\n\t            var replyFnReturnValue = replyFn(messageBundleWithReply);\n\t            if (replyFnReturnValue === false) {\n\t                delete this.replies[messageId];\n\t            }\n\t        }\n\t        else {\n\t            this.emit(messageCommand, messageBundleWithReply);\n\t        }\n\t    };\n\t    Postmam.prototype.reply = function (originalMessageBundle, data, onReply) {\n\t        var messageBundle = {\n\t            id: originalMessageBundle.id,\n\t            command: originalMessageBundle.command,\n\t            data: data,\n\t            source: Environment_1.default.getEnv(),\n\t            isReply: true\n\t        };\n\t        if (typeof onReply === 'function') {\n\t            this.replies[messageBundle.id] = onReply;\n\t        }\n\t        this.messagePort.postMessage(messageBundle);\n\t    };\n\t    /**\n\t     * Sends via window.postMessage.\n\t     */\n\t    Postmam.prototype.postMessage = function (command, data, onReply) {\n\t        if (!command || command == '') {\n\t            throw new Error(\"(Postmam) Postmam command must not be empty.\");\n\t        }\n\t        if (typeof data === 'function') {\n\t            log.debug('You passed a function to data, did you mean to pass null?');\n\t            return;\n\t        }\n\t        var messageBundle = {\n\t            id: utils_1.guid(),\n\t            command: command,\n\t            data: data,\n\t            source: Environment_1.default.getEnv()\n\t        };\n\t        if (typeof onReply === 'function') {\n\t            this.replies[messageBundle.id] = onReply;\n\t        }\n\t        this.windowReference.postMessage(messageBundle, '*');\n\t    };\n\t    /**\n\t     * Sends via MessageChannel.port.postMessage\n\t     */\n\t    Postmam.prototype.message = function (command, data, onReply) {\n\t        if (!command || command == '') {\n\t            throw new Error(\"(Postmam) Postmam command must not be empty.\");\n\t        }\n\t        if (typeof data === 'function') {\n\t            log.debug('You passed a function to data, did you mean to pass null?');\n\t            return;\n\t        }\n\t        var messageBundle = {\n\t            id: utils_1.guid(),\n\t            command: command,\n\t            data: data,\n\t            source: Environment_1.default.getEnv()\n\t        };\n\t        if (typeof onReply === 'function') {\n\t            this.replies[messageBundle.id] = onReply;\n\t        }\n\t        this.messagePort.postMessage(messageBundle);\n\t    };\n\t    /**\n\t     * If the provided Site URL on the dashboard, which restricts the post message origin, uses the https:// protocol\n\t     * Then relax the postMessage restriction to also allow the http:// protocol for the same domain.\n\t     */\n\t    Postmam.prototype.generateSafeOrigins = function (origin) {\n\t        var otherAllowedOrigins = [origin];\n\t        try {\n\t            var url = new URL(origin);\n\t            var host = url.host.replace('www.', '');\n\t            if (url.protocol === 'https:') {\n\t                otherAllowedOrigins.push(\"https://\" + host);\n\t                otherAllowedOrigins.push(\"https://www.\" + host);\n\t            }\n\t            else if (url.protocol === 'http:') {\n\t                otherAllowedOrigins.push(\"http://\" + host);\n\t                otherAllowedOrigins.push(\"http://www.\" + host);\n\t                otherAllowedOrigins.push(\"https://\" + host);\n\t                otherAllowedOrigins.push(\"https://www.\" + host);\n\t            }\n\t        }\n\t        catch (ex) {\n\t        }\n\t        return otherAllowedOrigins;\n\t    };\n\t    Postmam.prototype.isSafeOrigin = function (messageOrigin) {\n\t        if (!OneSignal.config) {\n\t            var subdomain = \"test\";\n\t        }\n\t        else {\n\t            var subdomain = OneSignal.config.subdomainName;\n\t        }\n\t        var otherAllowedOrigins = this.generateSafeOrigins(this.receiveFromOrigin);\n\t        return (messageOrigin === 'https://onesignal.com' ||\n\t            messageOrigin === \"https://\" + (subdomain || '') + \".onesignal.com\" ||\n\t            (Environment_1.default.isDev() && messageOrigin === vars_1.DEV_FRAME_HOST) ||\n\t            (Environment_1.default.isStaging() && messageOrigin === vars_1.STAGING_FRAME_HOST) ||\n\t            this.receiveFromOrigin === '*' ||\n\t            utils_1.contains(otherAllowedOrigins, messageOrigin));\n\t    };\n\t    return Postmam;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t/**\n\t * Establishes a cross-domain MessageChannel between the current browsing context (this page) and another (an iFrame, popup, or parent page).\n\t */\n\texports.default = Postmam;\n\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tvar AnimatedElement_1 = __webpack_require__(22);\n\tvar Bell_1 = __webpack_require__(16);\n\tvar Message = (function (_super) {\n\t    __extends(Message, _super);\n\t    function Message(bell) {\n\t        var _this = _super.call(this, '.onesignal-bell-launcher-message', 'onesignal-bell-launcher-message-opened', null, 'hidden', ['opacity', 'transform'], '.onesignal-bell-launcher-message-body') || this;\n\t        _this.bell = bell;\n\t        _this.contentType = '';\n\t        _this.queued = [];\n\t        return _this;\n\t    }\n\t    Object.defineProperty(Message, \"TIMEOUT\", {\n\t        get: function () {\n\t            return 2500;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Message, \"TYPES\", {\n\t        get: function () {\n\t            return {\n\t                TIP: 'tip',\n\t                MESSAGE: 'message',\n\t                QUEUED: 'queued' // This message was a user-queued message\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Message.prototype.display = function (type, content, duration) {\n\t        var _this = this;\n\t        if (duration === void 0) { duration = 0; }\n\t        log.debug(\"Calling %cdisplay(\" + type + \", \" + content + \", \" + duration + \").\", utils_1.getConsoleStyle('code'));\n\t        return (this.shown ? this.hide() : utils_1.nothing())\n\t            .then(function () {\n\t            _this.content = utils_1.decodeHtmlEntities(content);\n\t            _this.contentType = type;\n\t        })\n\t            .then(function () {\n\t            return _this.show();\n\t        })\n\t            .then(function () { return utils_1.delay(duration); })\n\t            .then(function () {\n\t            return _this.hide();\n\t        })\n\t            .then(function () {\n\t            // Reset back to normal content type so stuff can show a gain\n\t            _this.content = _this.getTipForState();\n\t            _this.contentType = 'tip';\n\t        });\n\t    };\n\t    Message.prototype.getTipForState = function () {\n\t        if (this.bell.state === Bell_1.default.STATES.UNSUBSCRIBED)\n\t            return this.bell.text['tip.state.unsubscribed'];\n\t        else if (this.bell.state === Bell_1.default.STATES.SUBSCRIBED)\n\t            return this.bell.text['tip.state.subscribed'];\n\t        else if (this.bell.state === Bell_1.default.STATES.BLOCKED)\n\t            return this.bell.text['tip.state.blocked'];\n\t    };\n\t    Message.prototype.enqueue = function (message, notify) {\n\t        var _this = this;\n\t        if (notify === void 0) { notify = false; }\n\t        this.queued.push(utils_1.decodeHtmlEntities(message));\n\t        return new Promise(function (resolve) {\n\t            if (_this.bell.badge.shown) {\n\t                _this.bell.badge.hide()\n\t                    .then(function () { return _this.bell.badge.increment(); })\n\t                    .then(function () { return _this.bell.badge.show(); })\n\t                    .then(resolve);\n\t            }\n\t            else {\n\t                _this.bell.badge.increment();\n\t                if (_this.bell.initialized)\n\t                    _this.bell.badge.show().then(resolve);\n\t                else\n\t                    resolve();\n\t            }\n\t        });\n\t    };\n\t    Message.prototype.dequeue = function (message) {\n\t        var _this = this;\n\t        var dequeuedMessage = this.queued.pop(message);\n\t        return new Promise(function (resolve) {\n\t            if (_this.bell.badge.shown) {\n\t                _this.bell.badge.hide()\n\t                    .then(function () { return _this.bell.badge.decrement(); })\n\t                    .then(function (numMessagesLeft) {\n\t                    if (numMessagesLeft > 0) {\n\t                        return _this.bell.badge.show();\n\t                    }\n\t                    else {\n\t                        return Promise.resolve(_this);\n\t                    }\n\t                })\n\t                    .then(resolve(dequeuedMessage));\n\t            }\n\t            else {\n\t                _this.bell.badge.decrement();\n\t                resolve(dequeuedMessage);\n\t            }\n\t        });\n\t    };\n\t    return Message;\n\t}(AnimatedElement_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Message;\n\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar OneSignalError_1 = __webpack_require__(10);\n\tvar AlreadySubscribedError = (function (_super) {\n\t    __extends(AlreadySubscribedError, _super);\n\t    function AlreadySubscribedError() {\n\t        return _super.call(this, 'This operation can only be performed when the user is not subscribed.') || this;\n\t    }\n\t    return AlreadySubscribedError;\n\t}(OneSignalError_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = AlreadySubscribedError;\n\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar OneSignalError_1 = __webpack_require__(10);\n\t(function (NotSubscribedReason) {\n\t    NotSubscribedReason[NotSubscribedReason[\"Unknown\"] = 0] = \"Unknown\";\n\t    NotSubscribedReason[NotSubscribedReason[\"NoDeviceId\"] = 1] = \"NoDeviceId\";\n\t    NotSubscribedReason[NotSubscribedReason[\"OptedOut\"] = 2] = \"OptedOut\";\n\t})(exports.NotSubscribedReason || (exports.NotSubscribedReason = {}));\n\tvar NotSubscribedReason = exports.NotSubscribedReason;\n\tvar NotSubscribedError = (function (_super) {\n\t    __extends(NotSubscribedError, _super);\n\t    function NotSubscribedError(reason) {\n\t        var _this;\n\t        switch (reason) {\n\t            case NotSubscribedReason.Unknown || NotSubscribedReason.NoDeviceId:\n\t                _this = _super.call(this, 'This operation can only be performed after the user is subscribed.') || this;\n\t                break;\n\t            case NotSubscribedReason.OptedOut:\n\t                _this = _super.call(this, 'The user has manually opted out of receiving of notifications. This operation can only be performed after the user is fully resubscribed.') || this;\n\t                break;\n\t        }\n\t        _this.reason = NotSubscribedReason[reason];\n\t        return _this;\n\t    }\n\t    return NotSubscribedError;\n\t}(OneSignalError_1.default));\n\texports.NotSubscribedError = NotSubscribedError;\n\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar OneSignalError_1 = __webpack_require__(10);\n\tvar PushPermissionNotGrantedError = (function (_super) {\n\t    __extends(PushPermissionNotGrantedError, _super);\n\t    function PushPermissionNotGrantedError() {\n\t        return _super.call(this, \"The push permission was not granted.\") || this;\n\t    }\n\t    return PushPermissionNotGrantedError;\n\t}(OneSignalError_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = PushPermissionNotGrantedError;\n\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar vars_1 = __webpack_require__(7);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar log = __webpack_require__(2);\n\tvar LimitStore_1 = __webpack_require__(14);\n\tvar Event_1 = __webpack_require__(3);\n\tvar Database_1 = __webpack_require__(5);\n\tvar Browser = __webpack_require__(8);\n\tvar utils_1 = __webpack_require__(1);\n\tvar Postmam_1 = __webpack_require__(30);\n\tvar MainHelper_1 = __webpack_require__(11);\n\tvar ServiceWorkerHelper_1 = __webpack_require__(17);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar EventHelper_1 = __webpack_require__(12);\n\tvar InvalidStateError_1 = __webpack_require__(23);\n\tvar AlreadySubscribedError_1 = __webpack_require__(32);\n\tvar InitHelper = (function () {\n\t    function InitHelper() {\n\t    }\n\t    InitHelper.storeInitialValues = function () {\n\t        return Promise.all([\n\t            OneSignal.isPushNotificationsEnabled(),\n\t            OneSignal.getNotificationPermission(),\n\t            OneSignal.getUserId(),\n\t            OneSignal.isOptedOut()\n\t        ])\n\t            .then(function (_a) {\n\t            var isPushEnabled = _a[0], notificationPermission = _a[1], userId = _a[2], isOptedOut = _a[3];\n\t            LimitStore_1.default.put('subscription.optedOut', isOptedOut);\n\t            return Promise.all([\n\t                Database_1.default.put('Options', { key: 'isPushEnabled', value: isPushEnabled }),\n\t                Database_1.default.put('Options', {\n\t                    key: 'notificationPermission',\n\t                    value: notificationPermission\n\t                })\n\t            ]);\n\t        });\n\t    };\n\t    /**\n\t     * This event occurs after init.\n\t     * For HTTPS sites, this event is called after init.\n\t     * For HTTP sites, this event is called after the iFrame is created, and a message is received from the iFrame signaling cross-origin messaging is ready.\n\t     * @private\n\t     */\n\t    InitHelper.onSdkInitialized = function () {\n\t        // Store initial values of notification permission, user ID, and manual subscription status\n\t        // This is done so that the values can be later compared to see if anything changed\n\t        // This is done here for HTTPS, it is done after the call to _addSessionIframe in sessionInit for HTTP sites, since the iframe is needed for communication\n\t        InitHelper.storeInitialValues();\n\t        InitHelper.installNativePromptPermissionChangedHook();\n\t        if (navigator.serviceWorker && window.location.protocol === 'https:') {\n\t            navigator.serviceWorker.getRegistration()\n\t                .then(function (registration) {\n\t                if (registration && registration.active) {\n\t                    MainHelper_1.default.establishServiceWorkerChannel(registration);\n\t                }\n\t            })\n\t                .catch(function (e) {\n\t                if (e.code === 9) {\n\t                    if (location.protocol === 'http:' || Environment_1.default.isIframe()) {\n\t                        // This site is an HTTP site with an <iframe>\n\t                        // We can no longer register service workers since Chrome 42\n\t                        log.debug(\"Expected error getting service worker registration on \" + location.href + \":\", e);\n\t                    }\n\t                }\n\t                else {\n\t                    log.error(\"Error getting Service Worker registration on \" + location.href + \":\", e);\n\t                }\n\t            });\n\t        }\n\t        MainHelper_1.default.showNotifyButton();\n\t        if (Browser.safari && OneSignal.config.autoRegister === false) {\n\t            OneSignal.isPushNotificationsEnabled(function (enabled) {\n\t                if (enabled) {\n\t                    /*  The user is on Safari and *specifically* set autoRegister to false.\n\t                     The normal case for a user on Safari is to not set anything related to autoRegister.\n\t                     With autoRegister false, we don't automatically show the permission prompt on Safari.\n\t                     However, if push notifications are already enabled, we're actually going to make the same\n\t                     subscribe call and register the device token, because this will return the same device\n\t                     token and allow us to update the user's session count and last active.\n\t                     For sites that omit autoRegister, autoRegister is assumed to be true. For Safari, the session count\n\t                     and last active is updated from this registration call.\n\t                     */\n\t                    InitHelper.sessionInit({ __sdkCall: true });\n\t                }\n\t            });\n\t        }\n\t        if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround() && !MainHelper_1.default.isContinuingBrowserSession()) {\n\t            /*\n\t             The user is on an HTTP site and they accessed this site by opening a new window or tab (starting a new\n\t             session). This means we should increment their session_count and last_active by calling\n\t             registerWithOneSignal(). Without this call, the user's session and last_active is not updated. We only\n\t             do this if the user is actually registered with OneSignal though.\n\t             */\n\t            log.debug(\"(\" + Environment_1.default.getEnv() + \") Updating session info for HTTP site.\");\n\t            OneSignal.isPushNotificationsEnabled(function (isPushEnabled) {\n\t                if (isPushEnabled) {\n\t                    return MainHelper_1.default.getAppId()\n\t                        .then(function (appId) { return MainHelper_1.default.registerWithOneSignal(appId, null); });\n\t                }\n\t            });\n\t        }\n\t        SubscriptionHelper_1.default.checkAndWipeUserSubscription();\n\t        MainHelper_1.default.checkAndDoHttpPermissionRequest();\n\t    };\n\t    InitHelper.installNativePromptPermissionChangedHook = function () {\n\t        if (navigator.permissions && !(Browser.firefox && Number(Browser.version) <= 45)) {\n\t            OneSignal._usingNativePermissionHook = true;\n\t            // If the browser natively supports hooking the subscription prompt permission change event\n\t            //     use it instead of our SDK method\n\t            navigator.permissions.query({ name: 'notifications' }).then(function (permissionStatus) {\n\t                permissionStatus.onchange = function () {\n\t                    EventHelper_1.default.triggerNotificationPermissionChanged();\n\t                };\n\t            });\n\t        }\n\t    };\n\t    InitHelper.saveInitOptions = function () {\n\t        var opPromises = [];\n\t        if (OneSignal.config.persistNotification === false) {\n\t            opPromises.push(Database_1.default.put('Options', { key: 'persistNotification', value: false }));\n\t        }\n\t        else {\n\t            opPromises.push(Database_1.default.put('Options', { key: 'persistNotification', value: true }));\n\t        }\n\t        var webhookOptions = OneSignal.config.webhooks;\n\t        ['notification.displayed', 'notification.clicked', 'notification.dismissed'].forEach(function (event) {\n\t            if (webhookOptions && webhookOptions[event]) {\n\t                opPromises.push(Database_1.default.put('Options', { key: \"webhooks.\" + event, value: webhookOptions[event] }));\n\t            }\n\t            else {\n\t                opPromises.push(Database_1.default.put('Options', { key: \"webhooks.\" + event, value: false }));\n\t            }\n\t        });\n\t        if (webhookOptions && webhookOptions.cors) {\n\t            opPromises.push(Database_1.default.put('Options', { key: \"webhooks.cors\", value: true }));\n\t        }\n\t        else {\n\t            opPromises.push(Database_1.default.put('Options', { key: \"webhooks.cors\", value: false }));\n\t        }\n\t        if (OneSignal.config.notificationClickHandlerMatch) {\n\t            opPromises.push(Database_1.default.put('Options', {\n\t                key: 'notificationClickHandlerMatch',\n\t                value: OneSignal.config.notificationClickHandlerMatch\n\t            }));\n\t        }\n\t        else {\n\t            opPromises.push(Database_1.default.put('Options', { key: 'notificationClickHandlerMatch', value: 'exact' }));\n\t        }\n\t        if (OneSignal.config.serviceWorkerRefetchRequests === false) {\n\t            opPromises.push(Database_1.default.put('Options', { key: 'serviceWorkerRefetchRequests', value: false }));\n\t        }\n\t        else {\n\t            opPromises.push(Database_1.default.put('Options', { key: 'serviceWorkerRefetchRequests', value: true }));\n\t        }\n\t        return Promise.all(opPromises);\n\t    };\n\t    InitHelper.internalInit = function () {\n\t        log.debug('Called %cinternalInit()', utils_1.getConsoleStyle('code'));\n\t        Database_1.default.get('Ids', 'appId')\n\t            .then(function (appId) {\n\t            // HTTPS - Only register for push notifications once per session or if the user changes notification permission to Ask or Allow.\n\t            if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\")\n\t                && !OneSignal.config.subdomainName\n\t                && (window.Notification.permission == \"denied\"\n\t                    || sessionStorage.getItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\") == window.Notification.permission)) {\n\t                Event_1.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t                return;\n\t            }\n\t            sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", window.Notification.permission);\n\t            if (Browser.safari && OneSignal.config.autoRegister === false) {\n\t                log.debug('On Safari and autoregister is false, skipping sessionInit().');\n\t                // This *seems* to trigger on either Safari's autoregister false or Chrome HTTP\n\t                // Chrome HTTP gets an SDK_INITIALIZED event from the iFrame postMessage, so don't call it here\n\t                if (!SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                    Event_1.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t                }\n\t                return;\n\t            }\n\t            if (OneSignal.config.autoRegister === false && !OneSignal.config.subdomainName) {\n\t                log.debug('Skipping internal init. Not auto-registering and no subdomain.');\n\t                /* 3/25: If a user is already registered, re-register them in case the clicked Blocked and then Allow (which immediately invalidates the GCM token as soon as you click Blocked) */\n\t                OneSignal.isPushNotificationsEnabled().then(function (isPushEnabled) {\n\t                    if (isPushEnabled && !SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                        log.info('Because the user is already subscribed and has enabled notifications, we will re-register their GCM token.');\n\t                        // Resubscribes them, and in case their GCM registration token was invalid, gets a new one\n\t                        SubscriptionHelper_1.default.registerForW3CPush({});\n\t                    }\n\t                    else {\n\t                        ServiceWorkerHelper_1.default.updateServiceWorker();\n\t                    }\n\t                });\n\t                Event_1.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t                return;\n\t            }\n\t            if (document.visibilityState !== \"visible\") {\n\t                utils_1.once(document, 'visibilitychange', function (e, destroyEventListener) {\n\t                    if (document.visibilityState === 'visible') {\n\t                        destroyEventListener();\n\t                        InitHelper.sessionInit({ __sdkCall: true });\n\t                    }\n\t                }, true);\n\t                return;\n\t            }\n\t            InitHelper.sessionInit({ __sdkCall: true });\n\t        });\n\t    };\n\t    InitHelper.initSaveState = function () {\n\t        return MainHelper_1.default.getAppId()\n\t            .then(function (appId) {\n\t            return Promise.all([\n\t                Database_1.default.put(\"Ids\", { type: \"appId\", id: appId }),\n\t                Database_1.default.put(\"Options\", { key: \"pageTitle\", value: document.title })\n\t            ]).then(function () {\n\t                log.info(\"OneSignal: Set pageTitle to be '\" + document.title + \"'.\");\n\t            });\n\t        });\n\t    };\n\t    InitHelper.sessionInit = function (options) {\n\t        log.debug(\"Called %csessionInit(\" + JSON.stringify(options) + \")\", utils_1.getConsoleStyle('code'));\n\t        if (OneSignal._sessionInitAlreadyRunning) {\n\t            log.debug('Returning from sessionInit because it has already been called.');\n\t            return;\n\t        }\n\t        else {\n\t            OneSignal._sessionInitAlreadyRunning = true;\n\t        }\n\t        var hostPageProtocol = location.protocol + \"//\";\n\t        if (Browser.safari) {\n\t            if (OneSignal.config.safari_web_id) {\n\t                MainHelper_1.default.getAppId()\n\t                    .then(function (appId) {\n\t                    window.safari.pushNotification.requestPermission(OneSignal._API_URL + \"safari\", OneSignal.config.safari_web_id, { app_id: appId }, function (pushResponse) {\n\t                        log.info('Safari Registration Result:', pushResponse);\n\t                        if (pushResponse.deviceToken) {\n\t                            var subscriptionInfo = {\n\t                                // Safari's subscription returns a device token (e.g. 03D5D4A2EBCE1EE2AED68E12B72B1B995C2BFB811AB7DBF973C84FED66C6D1D5)\n\t                                endpointOrToken: pushResponse.deviceToken.toLowerCase()\n\t                            };\n\t                            MainHelper_1.default.registerWithOneSignal(appId, subscriptionInfo);\n\t                        }\n\t                        else {\n\t                            MainHelper_1.default.beginTemporaryBrowserSession();\n\t                        }\n\t                        EventHelper_1.default.triggerNotificationPermissionChanged();\n\t                    });\n\t                });\n\t            }\n\t        }\n\t        else if (options.modalPrompt && options.fromRegisterFor) {\n\t            Promise.all([\n\t                MainHelper_1.default.getAppId(),\n\t                OneSignal.isPushNotificationsEnabled(),\n\t                OneSignal.getNotificationPermission()\n\t            ])\n\t                .then(function (_a) {\n\t                var appId = _a[0], isPushEnabled = _a[1], notificationPermission = _a[2];\n\t                var modalUrl = OneSignal.modalUrl + \"?\" + MainHelper_1.default.getPromptOptionsQueryString() + \"&id=\" + appId + \"&httpsPrompt=true&pushEnabled=\" + isPushEnabled + \"&permissionBlocked=\" + (notificationPermission === 'denied') + \"&promptType=modal\";\n\t                log.info('Opening HTTPS modal prompt:', modalUrl);\n\t                var modal = MainHelper_1.default.createHiddenSubscriptionDomModal(modalUrl);\n\t                var sendToOrigin = \"https://onesignal.com\";\n\t                if (Environment_1.default.isDev()) {\n\t                    sendToOrigin = vars_1.DEV_FRAME_HOST;\n\t                }\n\t                var receiveFromOrigin = sendToOrigin;\n\t                OneSignal.modalPostmam = new Postmam_1.default(modal, sendToOrigin, receiveFromOrigin);\n\t                OneSignal.modalPostmam.startPostMessageReceive();\n\t                OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_LOADED, function (message) {\n\t                    MainHelper_1.default.showSubscriptionDomModal();\n\t                    Event_1.default.trigger('modalLoaded');\n\t                });\n\t                OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_ACCEPTED, function (message) {\n\t                    log.debug('User accepted the HTTPS modal prompt.');\n\t                    OneSignal._sessionInitAlreadyRunning = false;\n\t                    var iframeModalDom = document.getElementById('OneSignal-iframe-modal');\n\t                    iframeModalDom.parentNode.removeChild(iframeModalDom);\n\t                    OneSignal.modalPostmam.destroy();\n\t                    MainHelper_1.default.triggerCustomPromptClicked('granted');\n\t                    log.debug('Calling setSubscription(true)');\n\t                    OneSignal.setSubscription(true)\n\t                        .then(function () { return SubscriptionHelper_1.default.registerForW3CPush(options); });\n\t                });\n\t                OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_REJECTED, function (message) {\n\t                    log.debug('User rejected the HTTPS modal prompt.');\n\t                    OneSignal._sessionInitAlreadyRunning = false;\n\t                    var iframeModalDom = document.getElementById('OneSignal-iframe-modal');\n\t                    iframeModalDom.parentNode.removeChild(iframeModalDom);\n\t                    OneSignal.modalPostmam.destroy();\n\t                    MainHelper_1.default.triggerCustomPromptClicked('denied');\n\t                });\n\t                OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING, function (message) {\n\t                    log.info('Detected modal is closing.');\n\t                    OneSignal.modalPostmam.destroy();\n\t                });\n\t            });\n\t        }\n\t        else if ('serviceWorker' in navigator && !SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t            if (options.__sdkCall && !MainHelper_1.default.wasHttpsNativePromptDismissed()) {\n\t                SubscriptionHelper_1.default.registerForW3CPush(options);\n\t            }\n\t            else if (options.__sdkCall && MainHelper_1.default.wasHttpsNativePromptDismissed()) {\n\t                log.debug('OneSignal: Not automatically showing native HTTPS prompt because the user previously dismissed it.');\n\t                OneSignal._sessionInitAlreadyRunning = false;\n\t            }\n\t            else {\n\t                SubscriptionHelper_1.default.registerForW3CPush(options);\n\t            }\n\t        }\n\t        else {\n\t            if (OneSignal.config.autoRegister !== true) {\n\t                log.debug('OneSignal: Not automatically showing popover because autoRegister is not specifically true.');\n\t            }\n\t            if (MainHelper_1.default.isHttpPromptAlreadyShown()) {\n\t                log.debug('OneSignal: Not automatically showing popover because it was previously shown in the same session.');\n\t            }\n\t            if ((OneSignal.config.autoRegister === true) && !MainHelper_1.default.isHttpPromptAlreadyShown()) {\n\t                OneSignal.showHttpPrompt().catch(function (e) {\n\t                    if (e instanceof InvalidStateError_1.InvalidStateError && e.reason === InvalidStateError_1.InvalidStateReason[InvalidStateError_1.InvalidStateReason.RedundantPermissionMessage] ||\n\t                        e instanceof AlreadySubscribedError_1.default) {\n\t                    }\n\t                    else\n\t                        throw e;\n\t                });\n\t            }\n\t        }\n\t        Event_1.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t    };\n\t    return InitHelper;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = InitHelper;\n\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar log = __webpack_require__(2);\n\tvar Cookie = __webpack_require__(26);\n\tvar TestHelper = (function () {\n\t    function TestHelper() {\n\t    }\n\t    /**\n\t     * Just for debugging purposes, removes the coookie from hiding the native prompt.\n\t     * @returns {*}\n\t     */\n\t    TestHelper.unmarkHttpsNativePromptDismissed = function () {\n\t        if (Cookie.remove('onesignal-notification-prompt')) {\n\t            log.debug('OneSignal: Removed the native notification prompt dismissed cookie.');\n\t        }\n\t        else {\n\t            log.debug('OneSignal: Cookie not marked.');\n\t        }\n\t    };\n\t    /**\n\t     * Creates a session cookie to note that the user does not want to be disturbed for the rest of the browser session.\n\t     */\n\t    TestHelper.markHttpsNativePromptDismissed = function () {\n\t        log.debug('OneSignal: User dismissed the native notification prompt; storing flag.');\n\t        return Cookie.set('onesignal-notification-prompt', 'dismissed', {\n\t            // In 8 hours, or 1/3 of the day\n\t            expires: 0.333\n\t        });\n\t    };\n\t    return TestHelper;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = TestHelper;\n\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t(function (PermissionPromptType) {\n\t    /**\n\t     * Local notification hack for HTTP sites triggered by prompting for local notification permissions.\n\t     */\n\t    PermissionPromptType[PermissionPromptType[\"HttpPermissionRequest\"] = 'HTTP permission request'] = \"HttpPermissionRequest\";\n\t    /**\n\t     * The \"main\" browser native permission request dialog when prompting for local or push notification permissions.\n\t     */\n\t    PermissionPromptType[PermissionPromptType[\"HttpsPermissionRequest\"] = 'HTTPS permission request'] = \"HttpsPermissionRequest\";\n\t    /**\n\t     * The \"popup\" to subdomain.onesignal.com.\n\t     */\n\t    PermissionPromptType[PermissionPromptType[\"FullscreenHttpPermissionMessage\"] = 'fullscreen HTTP permission message'] = \"FullscreenHttpPermissionMessage\";\n\t    /**\n\t     * The full-screen HTTPS modal with a dimmed backdrop.\n\t     */\n\t    PermissionPromptType[PermissionPromptType[\"FullscreenHttpsPermissionMessage\"] = 'fullscreen HTTPS permission message'] = \"FullscreenHttpsPermissionMessage\";\n\t    /**\n\t     * The \"sliding down\" prompt.\n\t     */\n\t    PermissionPromptType[PermissionPromptType[\"SlidedownPermissionMessage\"] = 'slidedown permission message'] = \"SlidedownPermissionMessage\";\n\t    /**\n\t     * The \"notify button\".\n\t     */\n\t    PermissionPromptType[PermissionPromptType[\"SubscriptionBell\"] = 'subscription bell'] = \"SubscriptionBell\";\n\t})(exports.PermissionPromptType || (exports.PermissionPromptType = {}));\n\tvar PermissionPromptType = exports.PermissionPromptType;\n\n\n/***/ },\n/* 38 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar atoa = __webpack_require__(20);\n\tvar debounce = __webpack_require__(60);\n\t\n\tmodule.exports = function emitter (thing, options) {\n\t  var opts = options || {};\n\t  var evt = {};\n\t  if (thing === undefined) { thing = {}; }\n\t  thing.on = function (type, fn) {\n\t    if (!evt[type]) {\n\t      evt[type] = [fn];\n\t    } else {\n\t      evt[type].push(fn);\n\t    }\n\t    return thing;\n\t  };\n\t  thing.once = function (type, fn) {\n\t    fn._once = true; // thing.off(fn) still works!\n\t    thing.on(type, fn);\n\t    return thing;\n\t  };\n\t  thing.off = function (type, fn) {\n\t    var c = arguments.length;\n\t    if (c === 1) {\n\t      delete evt[type];\n\t    } else if (c === 0) {\n\t      evt = {};\n\t    } else {\n\t      var et = evt[type];\n\t      if (!et) { return thing; }\n\t      et.splice(et.indexOf(fn), 1);\n\t    }\n\t    return thing;\n\t  };\n\t  thing.emit = function () {\n\t    var args = atoa(arguments);\n\t    return thing.emitterSnapshot(args.shift()).apply(this, args);\n\t  };\n\t  thing.emitterSnapshot = function (type) {\n\t    var et = (evt[type] || []).slice(0);\n\t    return function () {\n\t      var args = atoa(arguments);\n\t      var ctx = this || thing;\n\t      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n\t      et.forEach(function emitter (listen) {\n\t        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n\t        if (listen._once) { thing.off(type, listen); }\n\t      });\n\t      return thing;\n\t    };\n\t  };\n\t  return thing;\n\t};\n\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\t// shim for using process in browser\n\tvar process = module.exports = {};\n\t\n\t// cached from whatever global is present so that test runners that stub it\n\t// don't break things.  But we need to wrap it in a try catch in case it is\n\t// wrapped in strict mode code which doesn't define any globals.  It's inside a\n\t// function because try/catches deoptimize in certain engines.\n\t\n\tvar cachedSetTimeout;\n\tvar cachedClearTimeout;\n\t\n\tfunction defaultSetTimout() {\n\t    throw new Error('setTimeout has not been defined');\n\t}\n\tfunction defaultClearTimeout () {\n\t    throw new Error('clearTimeout has not been defined');\n\t}\n\t(function () {\n\t    try {\n\t        if (typeof setTimeout === 'function') {\n\t            cachedSetTimeout = setTimeout;\n\t        } else {\n\t            cachedSetTimeout = defaultSetTimout;\n\t        }\n\t    } catch (e) {\n\t        cachedSetTimeout = defaultSetTimout;\n\t    }\n\t    try {\n\t        if (typeof clearTimeout === 'function') {\n\t            cachedClearTimeout = clearTimeout;\n\t        } else {\n\t            cachedClearTimeout = defaultClearTimeout;\n\t        }\n\t    } catch (e) {\n\t        cachedClearTimeout = defaultClearTimeout;\n\t    }\n\t} ())\n\tfunction runTimeout(fun) {\n\t    if (cachedSetTimeout === setTimeout) {\n\t        //normal enviroments in sane situations\n\t        return setTimeout(fun, 0);\n\t    }\n\t    // if setTimeout wasn't available but was latter defined\n\t    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n\t        cachedSetTimeout = setTimeout;\n\t        return setTimeout(fun, 0);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedSetTimeout(fun, 0);\n\t    } catch(e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n\t            return cachedSetTimeout.call(null, fun, 0);\n\t        } catch(e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n\t            return cachedSetTimeout.call(this, fun, 0);\n\t        }\n\t    }\n\t\n\t\n\t}\n\tfunction runClearTimeout(marker) {\n\t    if (cachedClearTimeout === clearTimeout) {\n\t        //normal enviroments in sane situations\n\t        return clearTimeout(marker);\n\t    }\n\t    // if clearTimeout wasn't available but was latter defined\n\t    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n\t        cachedClearTimeout = clearTimeout;\n\t        return clearTimeout(marker);\n\t    }\n\t    try {\n\t        // when when somebody has screwed with setTimeout but no I.E. maddness\n\t        return cachedClearTimeout(marker);\n\t    } catch (e){\n\t        try {\n\t            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n\t            return cachedClearTimeout.call(null, marker);\n\t        } catch (e){\n\t            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n\t            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n\t            return cachedClearTimeout.call(this, marker);\n\t        }\n\t    }\n\t\n\t\n\t\n\t}\n\tvar queue = [];\n\tvar draining = false;\n\tvar currentQueue;\n\tvar queueIndex = -1;\n\t\n\tfunction cleanUpNextTick() {\n\t    if (!draining || !currentQueue) {\n\t        return;\n\t    }\n\t    draining = false;\n\t    if (currentQueue.length) {\n\t        queue = currentQueue.concat(queue);\n\t    } else {\n\t        queueIndex = -1;\n\t    }\n\t    if (queue.length) {\n\t        drainQueue();\n\t    }\n\t}\n\t\n\tfunction drainQueue() {\n\t    if (draining) {\n\t        return;\n\t    }\n\t    var timeout = runTimeout(cleanUpNextTick);\n\t    draining = true;\n\t\n\t    var len = queue.length;\n\t    while(len) {\n\t        currentQueue = queue;\n\t        queue = [];\n\t        while (++queueIndex < len) {\n\t            if (currentQueue) {\n\t                currentQueue[queueIndex].run();\n\t            }\n\t        }\n\t        queueIndex = -1;\n\t        len = queue.length;\n\t    }\n\t    currentQueue = null;\n\t    draining = false;\n\t    runClearTimeout(timeout);\n\t}\n\t\n\tprocess.nextTick = function (fun) {\n\t    var args = new Array(arguments.length - 1);\n\t    if (arguments.length > 1) {\n\t        for (var i = 1; i < arguments.length; i++) {\n\t            args[i - 1] = arguments[i];\n\t        }\n\t    }\n\t    queue.push(new Item(fun, args));\n\t    if (queue.length === 1 && !draining) {\n\t        runTimeout(drainQueue);\n\t    }\n\t};\n\t\n\t// v8 likes predictible objects\n\tfunction Item(fun, array) {\n\t    this.fun = fun;\n\t    this.array = array;\n\t}\n\tItem.prototype.run = function () {\n\t    this.fun.apply(null, this.array);\n\t};\n\tprocess.title = 'browser';\n\tprocess.browser = true;\n\tprocess.env = {};\n\tprocess.argv = [];\n\tprocess.version = ''; // empty string to avoid regexp issues\n\tprocess.versions = {};\n\t\n\tfunction noop() {}\n\t\n\tprocess.on = noop;\n\tprocess.addListener = noop;\n\tprocess.once = noop;\n\tprocess.off = noop;\n\tprocess.removeListener = noop;\n\tprocess.removeAllListeners = noop;\n\tprocess.emit = noop;\n\t\n\tprocess.binding = function (name) {\n\t    throw new Error('process.binding is not supported');\n\t};\n\t\n\tprocess.cwd = function () { return '/' };\n\tprocess.chdir = function (dir) {\n\t    throw new Error('process.chdir is not supported');\n\t};\n\tprocess.umask = function() { return 0; };\n\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tfunction serializeError (err) {\n\t  return err ? err.toString() : null;\n\t}\n\t\n\tfunction deserializeError (err) {\n\t  return err ? new Error(err) : null;\n\t}\n\t\n\tfunction parsePayload (payload) {\n\t  var type = payload.shift();\n\t  if (type === 'error') {\n\t    return { error: serializeError(payload[0]), type: type, payload: [] };\n\t  }\n\t  return { error: null, type: type, payload: payload };\n\t}\n\t\n\tfunction emission (emitter, context) {\n\t  return emit;\n\t  function emit (e) {\n\t    var data = e.data;\n\t    if (data.type === 'error') {\n\t      emitter.emit.call(null, 'error', context, deserializeError(data.error));\n\t    } else {\n\t      emitter.emit.apply(null, [data.type, context].concat(data.payload));\n\t    }\n\t  }\n\t}\n\t\n\tmodule.exports = {\n\t  parsePayload: parsePayload,\n\t  emission: emission\n\t};\n\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\tvar vars_1 = __webpack_require__(7);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar OneSignalApi_1 = __webpack_require__(15);\n\tvar IndexedDb_1 = __webpack_require__(13);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar Cookie = __webpack_require__(26);\n\tvar Database_1 = __webpack_require__(5);\n\tvar Browser = __webpack_require__(8);\n\tvar utils_1 = __webpack_require__(1);\n\tvar ValidatorUtils_1 = __webpack_require__(59);\n\tvar objectAssign = __webpack_require__(9);\n\tvar EventEmitter = __webpack_require__(19);\n\tvar heir = __webpack_require__(18);\n\tvar swivel = __webpack_require__(28);\n\tvar EventHelper_1 = __webpack_require__(12);\n\tvar MainHelper_1 = __webpack_require__(11);\n\tvar Popover_1 = __webpack_require__(57);\n\tvar InvalidArgumentError_1 = __webpack_require__(46);\n\tvar LimitStore_1 = __webpack_require__(14);\n\tvar InvalidStateError_1 = __webpack_require__(23);\n\tvar InitHelper_1 = __webpack_require__(35);\n\tvar ServiceWorkerHelper_1 = __webpack_require__(17);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar HttpHelper_1 = __webpack_require__(49);\n\tvar TestHelper_1 = __webpack_require__(36);\n\tvar NotificationPermission_1 = __webpack_require__(53);\n\tvar PermissionMessageDismissedError_1 = __webpack_require__(47);\n\tvar PushPermissionNotGrantedError_1 = __webpack_require__(34);\n\tvar NotSubscribedError_1 = __webpack_require__(33);\n\tvar AlreadySubscribedError_1 = __webpack_require__(32);\n\tvar NotSubscribedError_2 = __webpack_require__(33);\n\tvar PermissionPromptType_1 = __webpack_require__(37);\n\tvar OneSignal = (function () {\n\t    function OneSignal() {\n\t    }\n\t    /**\n\t     * Pass in the full URL of the default page you want to open when a notification is clicked.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.setDefaultNotificationUrl = function (url) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var appState;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!ValidatorUtils_1.ValidatorUtils.isValidUrl(url, { allowNull: true }))\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('url', InvalidArgumentError_1.InvalidArgumentReason.Malformed);\n\t                        return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('setDefaultNotificationUrl', url);\n\t                        return [4 /*yield*/, Database_1.default.getAppState()];\n\t                    case 2:\n\t                        appState = _a.sent();\n\t                        appState.defaultNotificationUrl = url;\n\t                        return [4 /*yield*/, Database_1.default.setAppState(appState)];\n\t                    case 3:\n\t                        _a.sent();\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Sets the default title to display on notifications. Will default to the page's document.title if you don't call this.\n\t     * @remarks Either DB value defaultTitle or pageTitle is used when showing a notification title.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.setDefaultTitle = function (title) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var appState;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('setDefaultTitle', title);\n\t                        return [4 /*yield*/, Database_1.default.getAppState()];\n\t                    case 2:\n\t                        appState = _a.sent();\n\t                        appState.defaultNotificationTitle = title;\n\t                        return [4 /*yield*/, Database_1.default.setAppState(appState)];\n\t                    case 3:\n\t                        _a.sent();\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Hashes the provided email and uploads to OneSignal.\n\t     * @remarks The email is voluntarily provided.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.syncHashedEmail = function (email) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var sanitizedEmail, appId, deviceId, result;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!email)\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('email', InvalidArgumentError_1.InvalidArgumentReason.Empty);\n\t                        sanitizedEmail = utils_1.prepareEmailForHashing(email);\n\t                        if (!utils_1.isValidEmail(sanitizedEmail))\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('email', InvalidArgumentError_1.InvalidArgumentReason.Malformed);\n\t                        return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('syncHashedEmail', email);\n\t                        return [4 /*yield*/, Database_1.default.getAppConfig()];\n\t                    case 2:\n\t                        appId = (_a.sent()).appId;\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 3:\n\t                        deviceId = (_a.sent()).deviceId;\n\t                        if (!deviceId)\n\t                            throw new NotSubscribedError_1.NotSubscribedError(NotSubscribedError_2.NotSubscribedReason.NoDeviceId);\n\t                        return [4 /*yield*/, OneSignalApi_1.default.updatePlayer(appId, deviceId, {\n\t                                em_m: utils_1.md5(sanitizedEmail),\n\t                                em_s: utils_1.sha1(sanitizedEmail)\n\t                            })];\n\t                    case 4:\n\t                        result = _a.sent();\n\t                        if (result && result.success) {\n\t                            return [2 /*return*/, true];\n\t                        }\n\t                        else {\n\t                            throw result;\n\t                        }\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Returns true if the current browser supports web push.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.isPushNotificationsSupported = function () {\n\t        utils_1.logMethodCall('isPushNotificationsSupported');\n\t        return utils_1.isPushNotificationsSupported();\n\t    };\n\t    /**\n\t     * Initializes the SDK, called by the developer.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.init = function (options) {\n\t        utils_1.logMethodCall('init', options);\n\t        ServiceWorkerHelper_1.default.applyServiceWorkerEnvPrefixes();\n\t        if (OneSignal._initCalled) {\n\t            log.error(\"OneSignal: Please don't call init() more than once. Any extra calls to init() are ignored. The following parameters were not processed: %c\" + JSON.stringify(Object.keys(options)), utils_1.getConsoleStyle('code'));\n\t            return 'return';\n\t        }\n\t        OneSignal._initCalled = true;\n\t        OneSignal.config = objectAssign({\n\t            path: '/'\n\t        }, options);\n\t        if (!utils_1.isPushNotificationsSupported()) {\n\t            log.warn('OneSignal: Push notifications are not supported.');\n\t            return;\n\t        }\n\t        if (Browser.safari && !OneSignal.config.safari_web_id) {\n\t            log.warn(\"OneSignal: Required parameter %csafari_web_id\", utils_1.getConsoleStyle('code'), 'was not passed to OneSignal.init(), skipping SDK initialization.');\n\t            return;\n\t        }\n\t        function __init() {\n\t            if (OneSignal.__initAlreadyCalled) {\n\t                // Call from window.addEventListener('DOMContentLoaded', () => {\n\t                // Call from if (document.readyState === 'complete' || document.readyState === 'interactive')\n\t                return;\n\t            }\n\t            else {\n\t                OneSignal.__initAlreadyCalled = true;\n\t            }\n\t            MainHelper_1.default.fixWordpressManifestIfMisplaced();\n\t            if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                if (OneSignal.config.subdomainName) {\n\t                    OneSignal.config.subdomainName = MainHelper_1.default.autoCorrectSubdomain(OneSignal.config.subdomainName);\n\t                }\n\t                else {\n\t                    log.error('OneSignal: Your JavaScript initialization code is missing a required parameter %csubdomainName', utils_1.getConsoleStyle('code'), '. HTTP sites require this parameter to initialize correctly. Please see steps 1.4 and 2 at ' +\n\t                        'https://documentation.onesignal.com/docs/web-push-sdk-setup-http)');\n\t                    return;\n\t                }\n\t                if (Environment_1.default.isDev()) {\n\t                    OneSignal.iframeUrl = vars_1.DEV_FRAME_HOST + \"/webPushIframe\";\n\t                    OneSignal.popupUrl = vars_1.DEV_FRAME_HOST + \"/subscribe\";\n\t                }\n\t                else {\n\t                    OneSignal.iframeUrl = \"https://\" + OneSignal.config.subdomainName + \".onesignal.com/webPushIframe\";\n\t                    OneSignal.popupUrl = \"https://\" + OneSignal.config.subdomainName + \".onesignal.com/subscribe\";\n\t                }\n\t            }\n\t            else {\n\t                if (Environment_1.default.isDev()) {\n\t                    OneSignal.modalUrl = vars_1.DEV_FRAME_HOST + \"/webPushModal\";\n\t                }\n\t                else if (Environment_1.default.isStaging()) {\n\t                    OneSignal.modalUrl = vars_1.STAGING_FRAME_HOST + \"/webPushModal\";\n\t                }\n\t                else {\n\t                    OneSignal.modalUrl = \"https://onesignal.com/webPushModal\";\n\t                }\n\t            }\n\t            var subdomainPromise = Promise.resolve();\n\t            if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                subdomainPromise = HttpHelper_1.default.loadSubdomainIFrame()\n\t                    .then(function () { return log.info('Subdomain iFrame loaded'); });\n\t            }\n\t            OneSignal.on(Database_1.default.EVENTS.REBUILT, EventHelper_1.default.onDatabaseRebuilt);\n\t            OneSignal.on(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, EventHelper_1.default.onNotificationPermissionChange);\n\t            OneSignal.on(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, EventHelper_1.default._onSubscriptionChanged);\n\t            OneSignal.on(Database_1.default.EVENTS.SET, EventHelper_1.default._onDbValueSet);\n\t            OneSignal.on(OneSignal.EVENTS.SDK_INITIALIZED, InitHelper_1.default.onSdkInitialized);\n\t            subdomainPromise.then(function () {\n\t                window.addEventListener('focus', function (event) {\n\t                    // Checks if permission changed everytime a user focuses on the page, since a user has to click out of and back on the page to check permissions\n\t                    MainHelper_1.default.checkAndTriggerNotificationPermissionChanged();\n\t                });\n\t                // If Safari - add 'fetch' pollyfill if it isn't already added.\n\t                if (Browser.safari && typeof window.fetch == \"undefined\") {\n\t                    var s = document.createElement('script');\n\t                    s.setAttribute('src', \"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js\");\n\t                    document.head.appendChild(s);\n\t                }\n\t                if (Environment_1.default.isCustomSubdomain()) {\n\t                    Event_1.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t                    return;\n\t                }\n\t                InitHelper_1.default.initSaveState()\n\t                    .then(function () { return InitHelper_1.default.saveInitOptions(); })\n\t                    .then(function () { return InitHelper_1.default.internalInit(); });\n\t            });\n\t        }\n\t        if (document.readyState === 'complete' || document.readyState === 'interactive') {\n\t            __init();\n\t        }\n\t        else {\n\t            log.debug('OneSignal: Waiting for DOMContentLoaded or readyStateChange event before continuing' +\n\t                ' initialization...');\n\t            window.addEventListener('DOMContentLoaded', function () {\n\t                __init();\n\t            });\n\t            document.onreadystatechange = function () {\n\t                if (document.readyState === 'complete' || document.readyState === 'interactive') {\n\t                    __init();\n\t                }\n\t            };\n\t        }\n\t    };\n\t    /**\n\t     * Shows a sliding modal prompt on the page for users to trigger the HTTP popup window to subscribe.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.showHttpPrompt = function (options) {\n\t        return utils_1.awaitOneSignalInitAndSupported()\n\t            .then(function () {\n\t            /*\n\t             Only show the HTTP popover if:\n\t             - Notifications aren't already enabled\n\t             - The user isn't manually opted out (if the user was manually opted out, we don't want to prompt the user)\n\t             */\n\t            if (OneSignal.__isPopoverShowing) {\n\t                throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.RedundantPermissionMessage, {\n\t                    permissionPromptType: PermissionPromptType_1.PermissionPromptType.SlidedownPermissionMessage\n\t                });\n\t            }\n\t            return Promise.all([\n\t                OneSignal.getNotificationPermission(),\n\t                OneSignal.isPushNotificationsEnabled(),\n\t                OneSignal.getSubscription(),\n\t                Database_1.default.get('Options', 'popoverDoNotPrompt'),\n\t                OneSignal.httpHelper.isShowingHttpPermissionRequest()\n\t            ])\n\t                .then(function (_a) {\n\t                var permission = _a[0], isEnabled = _a[1], notOptedOut = _a[2], doNotPrompt = _a[3], isShowingHttpPermissionRequest = _a[4];\n\t                if (doNotPrompt === true && (!options || options.force == false)) {\n\t                    throw new PermissionMessageDismissedError_1.default();\n\t                }\n\t                if (permission === NotificationPermission_1.NotificationPermission.Denied) {\n\t                    throw new PushPermissionNotGrantedError_1.default();\n\t                }\n\t                if (isEnabled) {\n\t                    throw new AlreadySubscribedError_1.default();\n\t                }\n\t                if (!notOptedOut) {\n\t                    throw new NotSubscribedError_1.NotSubscribedError(NotSubscribedError_2.NotSubscribedReason.OptedOut);\n\t                }\n\t                if (MainHelper_1.default.isUsingHttpPermissionRequest()) {\n\t                    log.debug('The slidedown permission message cannot be used while the HTTP perm. req. is enabled.');\n\t                    throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.RedundantPermissionMessage, {\n\t                        permissionPromptType: PermissionPromptType_1.PermissionPromptType.HttpPermissionRequest\n\t                    });\n\t                }\n\t                MainHelper_1.default.markHttpPopoverShown();\n\t                OneSignal.popover = new Popover_1.default(OneSignal.config.promptOptions);\n\t                OneSignal.popover.create();\n\t                log.debug('Showing the HTTP popover.');\n\t                if (OneSignal.notifyButton && OneSignal.notifyButton.launcher.state !== 'hidden') {\n\t                    OneSignal.notifyButton.launcher.waitUntilShown()\n\t                        .then(function () {\n\t                        OneSignal.notifyButton.launcher.hide();\n\t                    });\n\t                }\n\t                OneSignal.once(Popover_1.default.EVENTS.SHOWN, function () {\n\t                    OneSignal.__isPopoverShowing = true;\n\t                });\n\t                OneSignal.once(Popover_1.default.EVENTS.CLOSED, function () {\n\t                    OneSignal.__isPopoverShowing = false;\n\t                    if (OneSignal.notifyButton) {\n\t                        OneSignal.notifyButton.launcher.show();\n\t                    }\n\t                });\n\t                OneSignal.once(Popover_1.default.EVENTS.ALLOW_CLICK, function () {\n\t                    OneSignal.popover.close();\n\t                    OneSignal.registerForPushNotifications({ autoAccept: true });\n\t                });\n\t                OneSignal.once(Popover_1.default.EVENTS.CANCEL_CLICK, function () {\n\t                    log.debug(\"Setting flag to not show the popover to the user again.\");\n\t                    Database_1.default.put('Options', { key: 'popoverDoNotPrompt', value: true });\n\t                });\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Prompts the user to subscribe.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.registerForPushNotifications = function (options) {\n\t        if (!utils_1.isPushNotificationsSupported()) {\n\t            log.debug('OneSignal: Push notifications are not supported.');\n\t        }\n\t        // WARNING: Do NOT add callbacks that have to fire to get from here to window.open in _sessionInit.\n\t        //          Otherwise the pop-up to ask for push permission on HTTP connections will be blocked by Chrome.\n\t        function __registerForPushNotifications() {\n\t            if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                HttpHelper_1.default.loadPopup(options);\n\t            }\n\t            else {\n\t                if (!options)\n\t                    options = {};\n\t                options.fromRegisterFor = true;\n\t                InitHelper_1.default.sessionInit(options);\n\t            }\n\t        }\n\t        if (!OneSignal.initialized) {\n\t            OneSignal.once(OneSignal.EVENTS.SDK_INITIALIZED, function () { return __registerForPushNotifications(); });\n\t        }\n\t        else {\n\t            return __registerForPushNotifications();\n\t        }\n\t    };\n\t    /**\n\t     * Prompts the user to subscribe using the remote local notification workaround for HTTP sites.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.showHttpPermissionRequest = function (options) {\n\t        log.debug('Called showHttpPermissionRequest().');\n\t        return utils_1.awaitOneSignalInitAndSupported()\n\t            .then(function () { return new Promise(function (resolve, reject) {\n\t            // Safari's push notifications are one-click Allow and shouldn't support this workaround\n\t            if (Browser.safari) {\n\t                throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.UnsupportedEnvironment);\n\t            }\n\t            if (OneSignal.__isPopoverShowing) {\n\t                throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.RedundantPermissionMessage, {\n\t                    permissionPromptType: PermissionPromptType_1.PermissionPromptType.SlidedownPermissionMessage\n\t                });\n\t            }\n\t            if (OneSignal._showingHttpPermissionRequest) {\n\t                throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.RedundantPermissionMessage, {\n\t                    permissionPromptType: PermissionPromptType_1.PermissionPromptType.HttpPermissionRequest\n\t                });\n\t            }\n\t            if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST, options, function (reply) {\n\t                    var _a = reply.data, status = _a.status, result = _a.result;\n\t                    if (status === 'resolve') {\n\t                        resolve(result);\n\t                    }\n\t                    else {\n\t                        reject(result);\n\t                    }\n\t                });\n\t            }\n\t            else {\n\t                if (!MainHelper_1.default.isUsingHttpPermissionRequest()) {\n\t                    log.debug('Not showing HTTP permission request because its not enabled. Check init option httpPermissionRequest.');\n\t                    Event_1.default.trigger(OneSignal.EVENTS.TEST_INIT_OPTION_DISABLED);\n\t                    return;\n\t                }\n\t                // Default call by our SDK, not forced by user, don't show if the HTTP perm. req. was dismissed by user\n\t                if (MainHelper_1.default.wasHttpsNativePromptDismissed()) {\n\t                    if (options._sdkCall === true) {\n\t                        // TODO: Throw an error; Postmam currently does not serialize errors across cross-domain messaging\n\t                        //       In the future, Postmam should serialize errors so we can throw a PermissionMessageDismissedError\n\t                        log.debug('The HTTP perm. req. permission was dismissed, so we are not showing the request.');\n\t                        return;\n\t                    }\n\t                    else {\n\t                        log.debug('The HTTP perm. req. was previously dismissed, but this call was made explicitly.');\n\t                    }\n\t                }\n\t                log.debug(\"(\" + Environment_1.default.getEnv() + \") Showing HTTP permission request.\");\n\t                if (window.Notification.permission === \"default\") {\n\t                    OneSignal._showingHttpPermissionRequest = true;\n\t                    window.Notification.requestPermission(function (permission) {\n\t                        OneSignal._showingHttpPermissionRequest = false;\n\t                        resolve(permission);\n\t                        log.debug('HTTP Permission Request Result:', permission);\n\t                        if (permission === 'default') {\n\t                            TestHelper_1.default.markHttpsNativePromptDismissed();\n\t                            OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED, {\n\t                                permission: permission,\n\t                                forceUpdatePermission: true\n\t                            });\n\t                        }\n\t                    });\n\t                    Event_1.default.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED);\n\t                }\n\t                else {\n\t                    Event_1.default.trigger(OneSignal.EVENTS.TEST_WOULD_DISPLAY);\n\t                    throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.PushPermissionAlreadyGranted);\n\t                }\n\t            }\n\t        }); });\n\t    };\n\t    /**\n\t     * Returns a promise that resolves to the browser's current notification permission as 'default', 'granted', or 'denied'.\n\t     * @param callback A callback function that will be called when the browser's current notification permission has been obtained, with one of 'default', 'granted', or 'denied'.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.getNotificationPermission = function (onComplete) {\n\t        return utils_1.awaitOneSignalInitAndSupported()\n\t            .then(function () {\n\t            var safariWebId = null;\n\t            if (OneSignal.config) {\n\t                safariWebId = OneSignal.config.safari_web_id;\n\t            }\n\t            return MainHelper_1.default.getNotificationPermission(safariWebId);\n\t        })\n\t            .then(function (permission) {\n\t            if (onComplete) {\n\t                onComplete(permission);\n\t            }\n\t            return permission;\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.getTags = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var appId, deviceId, tags;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('getTags', callback);\n\t                        return [4 /*yield*/, Database_1.default.getAppConfig()];\n\t                    case 2:\n\t                        appId = (_a.sent()).appId;\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 3:\n\t                        deviceId = (_a.sent()).deviceId;\n\t                        if (!deviceId) {\n\t                            // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n\t                            log.info(new NotSubscribedError_1.NotSubscribedError(NotSubscribedError_2.NotSubscribedReason.NoDeviceId));\n\t                            return [2 /*return*/, null];\n\t                        }\n\t                        return [4 /*yield*/, OneSignalApi_1.default.getPlayer(appId, deviceId)];\n\t                    case 4:\n\t                        tags = (_a.sent()).tags;\n\t                        utils_1.executeCallback(callback, tags);\n\t                        return [2 /*return*/, tags];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.sendTag = function (key, value, callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var tag;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        tag = {};\n\t                        tag[key] = value;\n\t                        return [4 /*yield*/, OneSignal.sendTags(tag, callback)];\n\t                    case 1: return [2 /*return*/, _a.sent()];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.sendTags = function (tags, callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var appId, deviceId, newDeviceId;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('sendTags', tags, callback);\n\t                        if (!tags || Object.keys(tags).length === 0) {\n\t                            // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n\t                            log.info(new InvalidArgumentError_1.InvalidArgumentError('tags', InvalidArgumentError_1.InvalidArgumentReason.Empty));\n\t                            return [2 /*return*/];\n\t                        }\n\t                        // Our backend considers false as removing a tag, so convert false -> \"false\" to allow storing as a value\n\t                        Object.keys(tags).forEach(function (key) {\n\t                            if (tags[key] === false)\n\t                                tags[key] = \"false\";\n\t                        });\n\t                        return [4 /*yield*/, Database_1.default.getAppConfig()];\n\t                    case 2:\n\t                        appId = (_a.sent()).appId;\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 3:\n\t                        deviceId = (_a.sent()).deviceId;\n\t                        if (!!deviceId)\n\t                            return [3 /*break*/, 5];\n\t                        return [4 /*yield*/, utils_1.awaitSdkEvent(OneSignal.EVENTS.REGISTERED)];\n\t                    case 4:\n\t                        _a.sent();\n\t                        _a.label = 5;\n\t                    case 5: return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 6:\n\t                        newDeviceId = (_a.sent()).deviceId;\n\t                        return [4 /*yield*/, OneSignalApi_1.default.updatePlayer(appId, newDeviceId, {\n\t                                tags: tags\n\t                            })];\n\t                    case 7:\n\t                        _a.sent();\n\t                        utils_1.executeCallback(callback, tags);\n\t                        return [2 /*return*/, tags];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.deleteTag = function (tag) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, OneSignal.deleteTags([tag])];\n\t                    case 1: return [2 /*return*/, _a.sent()];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.deleteTags = function (tags, callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var tagsToSend, _i, tags_1, tag, deletedTags, deletedTagKeys;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('deleteTags', tags, callback);\n\t                        if (!ValidatorUtils_1.ValidatorUtils.isValidArray(tags))\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('tags', InvalidArgumentError_1.InvalidArgumentReason.Malformed);\n\t                        if (tags.length === 0) {\n\t                            // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n\t                            log.info(new InvalidArgumentError_1.InvalidArgumentError('tags', InvalidArgumentError_1.InvalidArgumentReason.Empty));\n\t                        }\n\t                        tagsToSend = {};\n\t                        for (_i = 0, tags_1 = tags; _i < tags_1.length; _i++) {\n\t                            tag = tags_1[_i];\n\t                            tagsToSend[tag] = '';\n\t                        }\n\t                        return [4 /*yield*/, OneSignal.sendTags(tagsToSend)];\n\t                    case 2:\n\t                        deletedTags = _a.sent();\n\t                        deletedTagKeys = Object.keys(deletedTags);\n\t                        utils_1.executeCallback(callback, deletedTagKeys);\n\t                        return [2 /*return*/, deletedTagKeys];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.addListenerForNotificationOpened = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('addListenerForNotificationOpened', callback);\n\t                        OneSignal.once(OneSignal.EVENTS.NOTIFICATION_CLICKED, function (notification) {\n\t                            utils_1.executeCallback(callback, notification);\n\t                        });\n\t                        EventHelper_1.default.fireStoredNotificationClicks(OneSignal.config.pageUrl);\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     * @Deprecated\n\t     */\n\t    OneSignal.getIdsAvailable = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var _a, deviceId, pushToken, bundle;\n\t            return __generator(this, function (_b) {\n\t                switch (_b.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _b.sent();\n\t                        utils_1.logMethodCall('getIdsAvailable', callback);\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 2:\n\t                        _a = _b.sent(), deviceId = _a.deviceId, pushToken = _a.pushToken;\n\t                        bundle = {\n\t                            userId: deviceId,\n\t                            registrationId: pushToken\n\t                        };\n\t                        utils_1.executeCallback(callback, bundle);\n\t                        return [2 /*return*/, bundle];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Returns a promise that resolves to true if all required conditions for push messaging are met; otherwise resolves to false.\n\t     * @param callback A callback function that will be called when the current subscription status has been obtained.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.isPushNotificationsEnabled = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var _a, deviceId, pushToken, optedOut, notificationPermission, serviceWorkerActive, isPushEnabled;\n\t            return __generator(this, function (_b) {\n\t                switch (_b.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _b.sent();\n\t                        utils_1.logMethodCall('isPushNotificationsEnabled', callback);\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 2:\n\t                        _a = _b.sent(), deviceId = _a.deviceId, pushToken = _a.pushToken, optedOut = _a.optedOut;\n\t                        return [4 /*yield*/, OneSignal.getNotificationPermission()];\n\t                    case 3:\n\t                        notificationPermission = _b.sent();\n\t                        return [4 /*yield*/, ServiceWorkerHelper_1.default.isServiceWorkerActive()];\n\t                    case 4:\n\t                        serviceWorkerActive = _b.sent();\n\t                        isPushEnabled = false;\n\t                        if (Environment_1.default.supportsServiceWorkers() &&\n\t                            !SubscriptionHelper_1.default.isUsingSubscriptionWorkaround() &&\n\t                            !Environment_1.default.isIframe()) {\n\t                            isPushEnabled = !!(deviceId &&\n\t                                pushToken &&\n\t                                notificationPermission === NotificationPermission_1.NotificationPermission.Granted &&\n\t                                !optedOut &&\n\t                                serviceWorkerActive);\n\t                        }\n\t                        else {\n\t                            isPushEnabled = !!(deviceId &&\n\t                                pushToken &&\n\t                                notificationPermission === NotificationPermission_1.NotificationPermission.Granted &&\n\t                                !optedOut);\n\t                        }\n\t                        utils_1.executeCallback(callback, isPushEnabled);\n\t                        return [2 /*return*/, isPushEnabled];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.setSubscription = function (newSubscription) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var appConfig, appId, subscription, deviceId;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('setSubscription', newSubscription);\n\t                        return [4 /*yield*/, Database_1.default.getAppConfig()];\n\t                    case 2:\n\t                        appConfig = _a.sent();\n\t                        appId = appConfig.appId;\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 3:\n\t                        subscription = _a.sent();\n\t                        deviceId = subscription.deviceId;\n\t                        if (!appConfig.appId)\n\t                            throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.MissingAppId);\n\t                        if (!ValidatorUtils_1.ValidatorUtils.isValidBoolean(newSubscription))\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('newSubscription', InvalidArgumentError_1.InvalidArgumentReason.Malformed);\n\t                        if (!deviceId) {\n\t                            // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n\t                            log.info(new NotSubscribedError_1.NotSubscribedError(NotSubscribedError_2.NotSubscribedReason.NoDeviceId));\n\t                            return [2 /*return*/];\n\t                        }\n\t                        subscription.optedOut = !newSubscription;\n\t                        return [4 /*yield*/, OneSignalApi_1.default.updatePlayer(appId, deviceId, {\n\t                                notification_types: MainHelper_1.default.getNotificationTypeFromOptIn(newSubscription)\n\t                            })];\n\t                    case 4:\n\t                        _a.sent();\n\t                        return [4 /*yield*/, Database_1.default.setSubscription(subscription)];\n\t                    case 5:\n\t                        _a.sent();\n\t                        EventHelper_1.default.onInternalSubscriptionSet(subscription.optedOut);\n\t                        EventHelper_1.default.checkAndTriggerSubscriptionChanged();\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PendingPublicApi\n\t     */\n\t    OneSignal.isOptedOut = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var optedOut;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('isOptedOut', callback);\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 2:\n\t                        optedOut = (_a.sent()).optedOut;\n\t                        utils_1.executeCallback(callback, optedOut);\n\t                        return [2 /*return*/, optedOut];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Returns a promise that resolves once the manual subscription override has been set.\n\t     * @private\n\t     * @PendingPublicApi\n\t     */\n\t    OneSignal.optOut = function (doOptOut, callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('optOut', doOptOut, callback);\n\t                        if (!ValidatorUtils_1.ValidatorUtils.isValidBoolean(doOptOut))\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('doOptOut', InvalidArgumentError_1.InvalidArgumentReason.Malformed);\n\t                        return [4 /*yield*/, OneSignal.setSubscription(!doOptOut)];\n\t                    case 2:\n\t                        _a.sent();\n\t                        utils_1.executeCallback(callback);\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Returns a promise that resolves to the stored OneSignal user ID if one is set; otherwise null.\n\t     * @param callback A function accepting one parameter for the OneSignal user ID.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.getUserId = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var subscription, deviceId;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('getUserId', callback);\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 2:\n\t                        subscription = _a.sent();\n\t                        deviceId = subscription.deviceId;\n\t                        utils_1.executeCallback(callback, deviceId);\n\t                        return [2 /*return*/, deviceId];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Returns a promise that resolves to the stored push token if one is set; otherwise null.\n\t     * @PublicApi\n\t     */\n\t    OneSignal.getRegistrationId = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var subscription, pushToken;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('getRegistrationId', callback);\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 2:\n\t                        subscription = _a.sent();\n\t                        pushToken = subscription.pushToken;\n\t                        utils_1.executeCallback(callback, pushToken);\n\t                        return [2 /*return*/, pushToken];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Returns a promise that resolves to false if setSubscription(false) is \"in effect\". Otherwise returns true.\n\t     * This means a return value of true does not mean the user is subscribed, only that the user did not call\n\t     * setSubcription(false).\n\t     * @private\n\t     * @PublicApi (given to customers)\n\t     */\n\t    OneSignal.getSubscription = function (callback) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var subscription, subscriptionStatus;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('getSubscription', callback);\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 2:\n\t                        subscription = _a.sent();\n\t                        subscriptionStatus = !subscription.optedOut;\n\t                        utils_1.executeCallback(callback, subscriptionStatus);\n\t                        return [2 /*return*/, subscriptionStatus];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * @PublicApi\n\t     */\n\t    OneSignal.sendSelfNotification = function (title, message, url, icon, data, buttons) {\n\t        if (title === void 0) { title = 'OneSignal Test Message'; }\n\t        if (message === void 0) { message = 'This is an example notification.'; }\n\t        if (url === void 0) { url = new URL(location.href).origin + '?_osp=do_not_open'; }\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var appConfig, subscription;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, utils_1.awaitOneSignalInitAndSupported()];\n\t                    case 1:\n\t                        _a.sent();\n\t                        utils_1.logMethodCall('sendSelfNotification', title, message, url, icon, data, buttons);\n\t                        return [4 /*yield*/, Database_1.default.getAppConfig()];\n\t                    case 2:\n\t                        appConfig = _a.sent();\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 3:\n\t                        subscription = _a.sent();\n\t                        if (!appConfig.appId)\n\t                            throw new InvalidStateError_1.InvalidStateError(InvalidStateError_1.InvalidStateReason.MissingAppId);\n\t                        if (!subscription.deviceId)\n\t                            throw new NotSubscribedError_1.NotSubscribedError(NotSubscribedError_2.NotSubscribedReason.NoDeviceId);\n\t                        if (!ValidatorUtils_1.ValidatorUtils.isValidUrl(url))\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('url', InvalidArgumentError_1.InvalidArgumentReason.Malformed);\n\t                        if (!ValidatorUtils_1.ValidatorUtils.isValidUrl(icon, { allowEmpty: true, requireHttps: true }))\n\t                            throw new InvalidArgumentError_1.InvalidArgumentError('icon', InvalidArgumentError_1.InvalidArgumentReason.Malformed);\n\t                        return [4 /*yield*/, OneSignalApi_1.default.sendNotification(appConfig.appId, [subscription.deviceId], { 'en': title }, { 'en': message }, url, icon, data, buttons)];\n\t                    case 4: return [2 /*return*/, _a.sent()];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Used to load OneSignal asynchronously from a webpage.\n\t     * @InternalApi\n\t     */\n\t    OneSignal.push = function (item) {\n\t        if (typeof (item) == \"function\")\n\t            item();\n\t        else {\n\t            var functionName = item.shift();\n\t            OneSignal[functionName].apply(null, item);\n\t        }\n\t    };\n\t    /** To appease TypeScript, EventEmitter later overrides this */\n\t    OneSignal.on = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i - 0] = arguments[_i];\n\t        }\n\t    };\n\t    OneSignal.off = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i - 0] = arguments[_i];\n\t        }\n\t    };\n\t    OneSignal.once = function () {\n\t        var args = [];\n\t        for (var _i = 0; _i < arguments.length; _i++) {\n\t            args[_i - 0] = arguments[_i];\n\t        }\n\t    };\n\t    return OneSignal;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = OneSignal;\n\tOneSignal.VERSION = (\"120050\");\n\tOneSignal._VERSION = (\"120050\");\n\tOneSignal._API_URL = vars_1.API_URL;\n\tOneSignal._notificationOpenedCallbacks = [];\n\tOneSignal._idsAvailable_callback = [];\n\tOneSignal._defaultLaunchURL = null;\n\tOneSignal.config = null;\n\tOneSignal._thisIsThePopup = false;\n\tOneSignal.__isPopoverShowing = false;\n\tOneSignal._sessionInitAlreadyRunning = false;\n\tOneSignal._isNotificationEnabledCallback = [];\n\tOneSignal._subscriptionSet = true;\n\tOneSignal.iframeUrl = null;\n\tOneSignal.popupUrl = null;\n\tOneSignal.modalUrl = null;\n\tOneSignal._sessionIframeAdded = false;\n\tOneSignal._windowWidth = 650;\n\tOneSignal._windowHeight = 568;\n\tOneSignal._isNewVisitor = false;\n\tOneSignal._channel = null;\n\tOneSignal.cookie = Cookie;\n\tOneSignal.initialized = false;\n\tOneSignal.notifyButton = null;\n\tOneSignal.store = LimitStore_1.default;\n\tOneSignal.environment = Environment_1.default;\n\tOneSignal.database = Database_1.default;\n\tOneSignal.event = Event_1.default;\n\tOneSignal.browser = Browser;\n\tOneSignal.popover = null;\n\tOneSignal.log = log;\n\tOneSignal.swivel = swivel;\n\tOneSignal.api = OneSignalApi_1.default;\n\tOneSignal.indexedDb = IndexedDb_1.default;\n\tOneSignal.iframePostmam = null;\n\tOneSignal.popupPostmam = null;\n\tOneSignal.mainHelper = MainHelper_1.default;\n\tOneSignal.subscriptionHelper = SubscriptionHelper_1.default;\n\tOneSignal.workerHelper = ServiceWorkerHelper_1.default;\n\tOneSignal.httpHelper = HttpHelper_1.default;\n\tOneSignal.eventHelper = EventHelper_1.default;\n\tOneSignal.testHelper = TestHelper_1.default;\n\tOneSignal.objectAssign = objectAssign;\n\t/**\n\t * The additional path to the worker file.\n\t *\n\t * Usually just the filename (in case the file is named differently), but also supports cases where the folder\n\t * is different.\n\t *\n\t * However, the init options 'path' should be used to specify the folder path instead since service workers will not\n\t * auto-update correctly on HTTPS site load if the config init options 'path' is not set.\n\t */\n\tOneSignal.SERVICE_WORKER_UPDATER_PATH = 'OneSignalSDKUpdaterWorker.js';\n\tOneSignal.SERVICE_WORKER_PATH = 'OneSignalSDKWorker.js';\n\t/**\n\t * By default, the service worker is expected to be accessible at the root scope. If the service worker is only\n\t * available with in a sub-directory, SERVICE_WORKER_PARAM must be changed to the sub-directory (with a trailing\n\t * slash). This would allow pages to function correctly as not to block the service worker ready call, which would\n\t * hang indefinitely if we requested root scope registration but the service was only available in a child scope.\n\t */\n\tOneSignal.SERVICE_WORKER_PARAM = { scope: '/' };\n\tOneSignal._LOGGING = false;\n\tOneSignal.LOGGING = false;\n\tOneSignal._usingNativePermissionHook = false;\n\tOneSignal._initCalled = false;\n\tOneSignal.__initAlreadyCalled = false;\n\tOneSignal.closeNotifications = ServiceWorkerHelper_1.default.closeNotifications;\n\tOneSignal.isServiceWorkerActive = ServiceWorkerHelper_1.default.isServiceWorkerActive;\n\tOneSignal._showingHttpPermissionRequest = false;\n\tOneSignal.checkAndWipeUserSubscription = SubscriptionHelper_1.default.checkAndWipeUserSubscription;\n\t/**\n\t * Used by Rails-side HTTP popup. Must keep the same name.\n\t * @InternalApi\n\t */\n\tOneSignal._initHttp = HttpHelper_1.default.initHttp;\n\t/**\n\t * Used by Rails-side HTTP popup. Must keep the same name.\n\t * @InternalApi\n\t */\n\tOneSignal._initPopup = HttpHelper_1.default.initPopup;\n\tOneSignal.POSTMAM_COMMANDS = {\n\t    CONNECTED: 'connect',\n\t    REMOTE_NOTIFICATION_PERMISSION: 'postmam.remoteNotificationPermission',\n\t    REMOTE_DATABASE_GET: 'postmam.remoteDatabaseGet',\n\t    REMOTE_DATABASE_PUT: 'postmam.remoteDatabasePut',\n\t    REMOTE_DATABASE_REMOVE: 'postmam.remoteDatabaseRemove',\n\t    REMOTE_OPERATION_COMPLETE: 'postman.operationComplete',\n\t    REMOTE_RETRIGGER_EVENT: 'postmam.remoteRetriggerEvent',\n\t    MODAL_LOADED: 'postmam.modalPrompt.loaded',\n\t    MODAL_PROMPT_ACCEPTED: 'postmam.modalPrompt.accepted',\n\t    MODAL_PROMPT_REJECTED: 'postmam.modalPrompt.canceled',\n\t    POPUP_LOADED: 'postmam.popup.loaded',\n\t    POPUP_ACCEPTED: 'postmam.popup.accepted',\n\t    POPUP_REJECTED: 'postmam.popup.canceled',\n\t    POPUP_CLOSING: 'postman.popup.closing',\n\t    REMOTE_NOTIFICATION_PERMISSION_CHANGED: 'postmam.remoteNotificationPermissionChanged',\n\t    IFRAME_POPUP_INITIALIZE: 'postmam.iframePopupInitialize',\n\t    UNSUBSCRIBE_FROM_PUSH: 'postmam.unsubscribeFromPush',\n\t    BEGIN_BROWSING_SESSION: 'postmam.beginBrowsingSession',\n\t    REQUEST_HOST_URL: 'postmam.requestHostUrl',\n\t    SHOW_HTTP_PERMISSION_REQUEST: 'postmam.showHttpPermissionRequest',\n\t    IS_SHOWING_HTTP_PERMISSION_REQUEST: 'postmam.isShowingHttpPermissionRequest',\n\t    WINDOW_TIMEOUT: 'postmam.windowTimeout',\n\t    FINISH_REMOTE_REGISTRATION: 'postmam.finishRemoteRegistration',\n\t    FINISH_REMOTE_REGISTRATION_IN_PROGRESS: 'postmam.finishRemoteRegistrationInProgress',\n\t    POPUP_BEGIN_MESSAGEPORT_COMMS: 'postmam.beginMessagePortComms'\n\t};\n\tOneSignal.EVENTS = {\n\t    /**\n\t     * Occurs when the user clicks the \"Continue\" or \"No Thanks\" button on the HTTP popup or HTTPS modal prompt.\n\t     * For HTTP sites (and HTTPS sites using the modal prompt), this event is fired before the native permission\n\t     * prompt is shown. This event is mostly used for HTTP sites.\n\t     */\n\t    CUSTOM_PROMPT_CLICKED: 'customPromptClick',\n\t    /**\n\t     * Occurs when the user clicks \"Allow\" or \"Block\" on the native permission prompt on Chrome, Firefox, or Safari.\n\t     * This event is used for both HTTP and HTTPS sites and occurs after the user actually grants notification\n\t     * permissions for the site. Occurs before the user is actually subscribed to push notifications.\n\t     */\n\t    NATIVE_PROMPT_PERMISSIONCHANGED: 'notificationPermissionChange',\n\t    /**\n\t     * Occurs after the user is officially subscribed to push notifications. The service worker is fully registered\n\t     * and activated and the user is eligible to receive push notifications at any point after this.\n\t     */\n\t    SUBSCRIPTION_CHANGED: 'subscriptionChange',\n\t    /**\n\t     * Occurs after a POST call to OneSignal's server to send the welcome notification has completed. The actual\n\t     * notification arrives shortly after.\n\t     */\n\t    WELCOME_NOTIFICATION_SENT: 'sendWelcomeNotification',\n\t    /**\n\t     * Occurs when a notification is displayed.\n\t     */\n\t    NOTIFICATION_DISPLAYED: 'notificationDisplay',\n\t    /**\n\t     * Occurs when a notification is dismissed by the user either clicking 'X' or clearing all notifications\n\t     * (available in Android). This event is NOT called if the user clicks the notification's body or any of the\n\t     * action buttons.\n\t     */\n\t    NOTIFICATION_DISMISSED: 'notificationDismiss',\n\t    /**\n\t     * New event replacing legacy addNotificationOpenedHandler(). Used when the notification was clicked.\n\t     */\n\t    NOTIFICATION_CLICKED: 'notificationClick',\n\t    /**\n\t     * Occurs after the document ready event fires and, for HTTP sites, the iFrame to subdomain.onesignal.com has\n\t     * loaded.\n\t     * Before this event, IndexedDB access is not possible for HTTP sites.\n\t     */\n\t    SDK_INITIALIZED: 'initialize',\n\t    /**\n\t     * Occurs after the user subscribes to push notifications and a new user entry is created on OneSignal's server,\n\t     * and also occurs when the user begins a new site session and the last_session and last_active is updated on\n\t     * OneSignal's server.\n\t     */\n\t    REGISTERED: 'register',\n\t    /**\n\t     * Occurs as the HTTP popup is closing.\n\t     */\n\t    POPUP_CLOSING: 'popupClose',\n\t    /**\n\t     * Occurs when the native permission prompt is displayed.\n\t     */\n\t    PERMISSION_PROMPT_DISPLAYED: 'permissionPromptDisplay',\n\t    /**\n\t     * For internal testing only. Used for all sorts of things.\n\t     */\n\t    TEST_INIT_OPTION_DISABLED: 'testInitOptionDisabled',\n\t    TEST_WOULD_DISPLAY: 'testWouldDisplay',\n\t    POPUP_WINDOW_TIMEOUT: 'popupWindowTimeout',\n\t};\n\tOneSignal.NOTIFICATION_TYPES = {\n\t    SUBSCRIBED: 1,\n\t    UNSUBSCRIBED: -2\n\t};\n\tObject.defineProperty(OneSignal, 'LOGGING', {\n\t    get: function () {\n\t        return OneSignal._LOGGING;\n\t    },\n\t    set: function (logLevel) {\n\t        if (logLevel) {\n\t            log.setDefaultLevel(log.levels.TRACE);\n\t            OneSignal._LOGGING = true;\n\t        }\n\t        else {\n\t            log.setDefaultLevel(log.levels.WARN);\n\t            OneSignal._LOGGING = false;\n\t        }\n\t    },\n\t    enumerable: true,\n\t    configurable: true\n\t});\n\their.merge(OneSignal, new EventEmitter());\n\tif (OneSignal.LOGGING)\n\t    log.setDefaultLevel(log.levels.TRACE);\n\telse\n\t    log.setDefaultLevel(log.levels.WARN);\n\tlog.info(\"%cOneSignal Web SDK loaded (version \" + OneSignal._VERSION + \", \" + Environment_1.default.getEnv() + \" environment).\", utils_1.getConsoleStyle('bold'));\n\tif (Environment_1.default.isEs6DebuggingModule()) {\n\t    log.warn('OneSignal: This is a specially built version of the web SDK for debugging ES6 async/await.');\n\t}\n\tlog.debug(\"Current Page URL: \" + location.href);\n\tlog.debug(\"Browser Environment: \" + Browser.name + \" \" + Browser.version);\n\tmodule.exports = OneSignal;\n\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar ActiveAnimatedElement_1 = __webpack_require__(21);\n\tvar Badge = (function (_super) {\n\t    __extends(Badge, _super);\n\t    function Badge() {\n\t        return _super.call(this, '.onesignal-bell-launcher-badge', 'onesignal-bell-launcher-badge-opened', null, 'onesignal-bell-launcher-badge-active', null, 'hidden') || this;\n\t    }\n\t    Badge.prototype.increment = function () {\n\t        // If it IS a number (is not not a number)\n\t        if (!isNaN(this.content)) {\n\t            var badgeNumber = +this.content; // Coerce to int\n\t            badgeNumber += 1;\n\t            this.content = badgeNumber.toString();\n\t            return badgeNumber;\n\t        }\n\t    };\n\t    Badge.prototype.decrement = function () {\n\t        // If it IS a number (is not not a number)\n\t        if (!isNaN(this.content)) {\n\t            var badgeNumber = +this.content; // Coerce to int\n\t            badgeNumber -= 1;\n\t            if (badgeNumber > 0)\n\t                this.content = badgeNumber.toString();\n\t            else\n\t                this.content = '';\n\t            return badgeNumber;\n\t        }\n\t    };\n\t    return Badge;\n\t}(ActiveAnimatedElement_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Badge;\n\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar utils_1 = __webpack_require__(1);\n\tvar Event_1 = __webpack_require__(3);\n\tvar ActiveAnimatedElement_1 = __webpack_require__(21);\n\tvar Bell_1 = __webpack_require__(16);\n\tvar LimitStore_1 = __webpack_require__(14);\n\tvar Message_1 = __webpack_require__(31);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar Button = (function (_super) {\n\t    __extends(Button, _super);\n\t    function Button(bell) {\n\t        var _this = _super.call(this, '.onesignal-bell-launcher-button', null, null, 'onesignal-bell-launcher-button-active', null, 'shown', '') || this;\n\t        _this.bell = bell;\n\t        _this.events = {\n\t            mouse: 'bell.launcher.button.mouse'\n\t        };\n\t        _this.element.addEventListener('touchstart', function (e) {\n\t            _this.onHovering(e);\n\t            _this.onTap(e);\n\t        });\n\t        _this.element.addEventListener('mouseenter', function (e) {\n\t            _this.onHovering(e);\n\t        });\n\t        _this.element.addEventListener('mouseleave', function (e) {\n\t            _this.onHovered(e);\n\t        });\n\t        _this.element.addEventListener('touchmove', function (e) {\n\t            _this.onHovered(e);\n\t        });\n\t        _this.element.addEventListener('mousedown', function (e) {\n\t            _this.onTap(e);\n\t        });\n\t        _this.element.addEventListener('mouseup', function (e) {\n\t            _this.onEndTap(e);\n\t        });\n\t        _this.element.addEventListener('click', function (e) {\n\t            _this.onHovered(e);\n\t            _this.onClick(e);\n\t        });\n\t        return _this;\n\t    }\n\t    Button.prototype.onHovering = function (e) {\n\t        if (LimitStore_1.default.isEmpty(this.events.mouse) || LimitStore_1.default.getLast(this.events.mouse) === 'out') {\n\t            Event_1.default.trigger(Bell_1.default.EVENTS.HOVERING);\n\t        }\n\t        LimitStore_1.default.put(this.events.mouse, 'over');\n\t    };\n\t    Button.prototype.onHovered = function (e) {\n\t        LimitStore_1.default.put(this.events.mouse, 'out');\n\t        Event_1.default.trigger(Bell_1.default.EVENTS.HOVERED);\n\t    };\n\t    Button.prototype.onTap = function (e) {\n\t        this.pulse();\n\t        this.activate();\n\t        this.bell.badge.activate();\n\t    };\n\t    Button.prototype.onEndTap = function (e) {\n\t        this.inactivate();\n\t        this.bell.badge.inactivate();\n\t    };\n\t    Button.prototype.onClick = function (e) {\n\t        var _this = this;\n\t        Event_1.default.trigger(Bell_1.default.EVENTS.BELL_CLICK);\n\t        Event_1.default.trigger(Bell_1.default.EVENTS.LAUNCHER_CLICK);\n\t        if (this.bell.message.shown && this.bell.message.contentType == Message_1.default.TYPES.MESSAGE) {\n\t            // A message is being shown, it'll disappear soon\n\t            return;\n\t        }\n\t        var optedOut = LimitStore_1.default.getLast('subscription.optedOut');\n\t        if (this.bell.unsubscribed) {\n\t            if (optedOut) {\n\t                // The user is manually opted out, but still \"really\" subscribed\n\t                this.bell.launcher.activateIfInactive().then(function () {\n\t                    _this.bell.showDialogProcedure();\n\t                });\n\t            }\n\t            else {\n\t                // The user is actually subscribed, register him for notifications\n\t                OneSignal.registerForPushNotifications();\n\t                //// Show the 'Click Allow to receive notifications' tip, if they haven't already enabled permissions\n\t                //if (OneSignal.getNotificationPermission() === 'default') {\n\t                //  this.bell.message.display(Message.TYPES.MESSAGE, this.bell.text['message.action.subscribing'], Message.TIMEOUT)\n\t                //}\n\t                this.bell._ignoreSubscriptionState = true;\n\t                OneSignal.once(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, function (isSubscribed) {\n\t                    _this.bell.message.display(Message_1.default.TYPES.MESSAGE, _this.bell.text['message.action.subscribed'], Message_1.default.TIMEOUT)\n\t                        .then(function () {\n\t                        _this.bell._ignoreSubscriptionState = false;\n\t                        _this.bell.launcher.inactivate();\n\t                    });\n\t                });\n\t            }\n\t        }\n\t        else if (this.bell.subscribed) {\n\t            this.bell.launcher.activateIfInactive().then(function () {\n\t                _this.bell.showDialogProcedure();\n\t            });\n\t        }\n\t        else if (this.bell.blocked) {\n\t            if (SubscriptionHelper_1.default.isUsingSubscriptionWorkaround()) {\n\t                // Show the HTTP popup so users can re-allow notifications\n\t                OneSignal.registerForPushNotifications();\n\t            }\n\t            else {\n\t                this.bell.launcher.activateIfInactive().then(function () {\n\t                    _this.bell.showDialogProcedure();\n\t                });\n\t            }\n\t        }\n\t        return this.bell.message.hide();\n\t    };\n\t    Button.prototype.pulse = function () {\n\t        utils_1.removeDomElement('.pulse-ring');\n\t        utils_1.addDomElement(this.element, 'beforeend', '<div class=\"pulse-ring\"></div>');\n\t        this.bell.setCustomColorsIfSpecified();\n\t    };\n\t    return Button;\n\t}(ActiveAnimatedElement_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Button;\n\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar utils_1 = __webpack_require__(1);\n\tvar Event_1 = __webpack_require__(3);\n\tvar AnimatedElement_1 = __webpack_require__(22);\n\tvar Browser = __webpack_require__(8);\n\tvar Bell_1 = __webpack_require__(16);\n\tvar vars_1 = __webpack_require__(7);\n\tvar Dialog = (function (_super) {\n\t    __extends(Dialog, _super);\n\t    function Dialog(bell) {\n\t        var _this = _super.call(this, '.onesignal-bell-launcher-dialog', 'onesignal-bell-launcher-dialog-opened', null, 'hidden', ['opacity', 'transform'], '.onesignal-bell-launcher-dialog-body') || this;\n\t        _this.bell = bell;\n\t        _this.subscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #subscribe-button';\n\t        _this.unsubscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button';\n\t        _this.notificationIcons = null;\n\t        window.addEventListener('click', function (event) {\n\t            if (event.target === document.querySelector(_this.subscribeButtonId))\n\t                Event_1.default.trigger(Bell_1.default.EVENTS.SUBSCRIBE_CLICK);\n\t            else if (event.target === document.querySelector(_this.unsubscribeButtonId))\n\t                Event_1.default.trigger(Bell_1.default.EVENTS.UNSUBSCRIBE_CLICK);\n\t        });\n\t        return _this;\n\t    }\n\t    Dialog.prototype.getPlatformNotificationIcon = function () {\n\t        if (this.notificationIcons) {\n\t            if (Browser.chrome || Browser.firefox) {\n\t                return this.notificationIcons.chrome || this.notificationIcons.safari;\n\t            }\n\t            else if (Browser.safari) {\n\t                return this.notificationIcons.safari || this.notificationIcons.chrome;\n\t            }\n\t        }\n\t        else\n\t            return null;\n\t    };\n\t    Dialog.prototype.show = function () {\n\t        var _this = this;\n\t        return this.updateBellLauncherDialogBody()\n\t            .then(function () { return _super.prototype.show.call(_this); });\n\t    };\n\t    Object.defineProperty(Dialog.prototype, \"subscribeButtonSelectorId\", {\n\t        get: function () {\n\t            return 'subscribe-button';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Dialog.prototype, \"unsubscribeButtonSelectorId\", {\n\t        get: function () {\n\t            return 'unsubscribe-button';\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Dialog.prototype, \"subscribeButton\", {\n\t        get: function () {\n\t            return this.element.querySelector('#' + this.subscribeButtonSelectorId);\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Dialog.prototype, \"unsubscribeButton\", {\n\t        get: function () {\n\t            return this.element.querySelector('#' + this.unsubscribeButtonSelectorId);\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Dialog.prototype.updateBellLauncherDialogBody = function () {\n\t        var _this = this;\n\t        return OneSignal.getSubscription().then(function (currentSetSubscription) {\n\t            utils_1.clearDomElementChildren(document.querySelector(_this.nestedContentSelector));\n\t            var contents = 'Nothing to show.';\n\t            var footer = '';\n\t            if (_this.bell.options.showCredit) {\n\t                footer = \"<div class=\\\"divider\\\"></div>\\n                  <div class=\\\"kickback\\\">Powered by <a href=\\\"https://onesignal.com\\\" class=\\\"kickback\\\" target=\\\"_blank\\\">OneSignal</a></div>\";\n\t            }\n\t            if (_this.bell.state === Bell_1.default.STATES.SUBSCRIBED && currentSetSubscription === true ||\n\t                _this.bell.state === Bell_1.default.STATES.UNSUBSCRIBED && currentSetSubscription === false) {\n\t                var notificationIconHtml = '';\n\t                var imageUrl = _this.getPlatformNotificationIcon();\n\t                if (imageUrl) {\n\t                    notificationIconHtml = \"<div class=\\\"push-notification-icon\\\"><img src=\\\"\" + imageUrl + \"\\\"></div>\";\n\t                }\n\t                else {\n\t                    notificationIconHtml = \"<div class=\\\"push-notification-icon push-notification-icon-default\\\"></div>\";\n\t                }\n\t                var buttonHtml = '';\n\t                if (_this.bell.state !== Bell_1.default.STATES.SUBSCRIBED)\n\t                    buttonHtml = \"<button type=\\\"button\\\" class=\\\"action\\\" id=\\\"\" + _this.subscribeButtonSelectorId + \"\\\">\" + _this.bell.text['dialog.main.button.subscribe'] + \"</button>\";\n\t                else\n\t                    buttonHtml = \"<button type=\\\"button\\\" class=\\\"action\\\" id=\\\"\" + _this.unsubscribeButtonSelectorId + \"\\\">\" + _this.bell.text['dialog.main.button.unsubscribe'] + \"</button>\";\n\t                contents = \"\\n                  <h1>\" + _this.bell.text['dialog.main.title'] + \"</h1>\\n                  <div class=\\\"divider\\\"></div>\\n                  <div class=\\\"push-notification\\\">\\n                    \" + notificationIconHtml + \"\\n                    <div class=\\\"push-notification-text-container\\\">\\n                      <div class=\\\"push-notification-text push-notification-text-short\\\"></div>\\n                      <div class=\\\"push-notification-text\\\"></div>\\n                      <div class=\\\"push-notification-text push-notification-text-medium\\\"></div>\\n                      <div class=\\\"push-notification-text\\\"></div>\\n                      <div class=\\\"push-notification-text push-notification-text-medium\\\"></div>\\n                    </div>\\n                  </div>\\n                  <div class=\\\"action-container\\\">\\n                    \" + buttonHtml + \"\\n                  </div>\\n                  \" + footer + \"\\n                \";\n\t            }\n\t            else if (_this.bell.state === Bell_1.default.STATES.BLOCKED) {\n\t                var imageUrl = null;\n\t                if (Browser.chrome) {\n\t                    if (!Browser.mobile && !Browser.tablet) {\n\t                        imageUrl = vars_1.HOST_URL + '/bell/chrome-unblock.jpg';\n\t                    }\n\t                }\n\t                else if (Browser.firefox)\n\t                    imageUrl = vars_1.HOST_URL + '/bell/firefox-unblock.jpg';\n\t                else if (Browser.safari)\n\t                    imageUrl = vars_1.HOST_URL + '/bell/safari-unblock.jpg';\n\t                var instructionsHtml = '';\n\t                if (imageUrl) {\n\t                    instructionsHtml = \"\\n\\n            <a href=\\\"\" + imageUrl + \"\\\" target=\\\"_blank\\\"><img src=\\\"\" + imageUrl + \"\\\"></a></div>\\n            \";\n\t                }\n\t                if ((Browser.mobile || Browser.tablet) && Browser.chrome) {\n\t                    instructionsHtml = \"\\n            <ol>\\n            <li>Access <strong>Settings</strong> by tapping the three menu dots <strong>\\u22EE</strong></li>\\n            <li>Click <strong>Site settings</strong> under Advanced.</li>\\n            <li>Click <strong>Notifications</strong>.</li>\\n            <li>Find and click this entry for this website.</li>\\n            <li>Click <strong>Notifications</strong> and set it to <strong>Allow</strong>.</li>\\n            </ol>\\n          \";\n\t                }\n\t                contents = \"\\n                  <h1>\" + _this.bell.text['dialog.blocked.title'] + \"</h1>\\n                  <div class=\\\"divider\\\"></div>\\n                  <div class=\\\"instructions\\\">\\n                  <p>\" + _this.bell.text['dialog.blocked.message'] + \"</p>\\n                  \" + instructionsHtml + \"\\n                  </div>\\n                  \" + footer + \"\\n                \";\n\t            }\n\t            utils_1.addDomElement(document.querySelector(_this.nestedContentSelector), 'beforeend', contents);\n\t            _this.bell.setCustomColorsIfSpecified();\n\t        });\n\t    };\n\t    return Dialog;\n\t}(AnimatedElement_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Dialog;\n\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tvar ActiveAnimatedElement_1 = __webpack_require__(21);\n\tvar Launcher = (function (_super) {\n\t    __extends(Launcher, _super);\n\t    function Launcher(bell) {\n\t        var _this = _super.call(this, '.onesignal-bell-launcher', 'onesignal-bell-launcher-active', null, null, 'onesignal-bell-launcher-inactive', 'hidden', 'active') || this;\n\t        _this.bell = bell;\n\t        _this.wasInactive = false;\n\t        return _this;\n\t    }\n\t    Launcher.prototype.resize = function (size) {\n\t        var _this = this;\n\t        // If the size is the same, do nothing and resolve an empty promise\n\t        if ((size === 'small' && utils_1.hasCssClass(this.element, 'onesignal-bell-launcher-sm')) ||\n\t            (size === 'medium' && utils_1.hasCssClass(this.element, 'onesignal-bell-launcher-md')) ||\n\t            (size === 'large' && utils_1.hasCssClass(this.element, 'onesignal-bell-launcher-lg'))) {\n\t            return Promise.resolve(this);\n\t        }\n\t        utils_1.removeCssClass(this.element, 'onesignal-bell-launcher-sm');\n\t        utils_1.removeCssClass(this.element, 'onesignal-bell-launcher-md');\n\t        utils_1.removeCssClass(this.element, 'onesignal-bell-launcher-lg');\n\t        if (size === 'small') {\n\t            utils_1.addCssClass(this.element, 'onesignal-bell-launcher-sm');\n\t        }\n\t        else if (size === 'medium') {\n\t            utils_1.addCssClass(this.element, 'onesignal-bell-launcher-md');\n\t        }\n\t        else if (size === 'large') {\n\t            utils_1.addCssClass(this.element, 'onesignal-bell-launcher-lg');\n\t        }\n\t        else {\n\t            throw new Error('Invalid OneSignal bell size ' + size);\n\t        }\n\t        if (!this.shown) {\n\t            return Promise.resolve(this);\n\t        }\n\t        else {\n\t            return new Promise(function (resolve) {\n\t                // Once the launcher has finished shrinking down\n\t                if (_this.targetTransitionEvents.length == 0) {\n\t                    return resolve(_this);\n\t                }\n\t                else {\n\t                    var timerId = setTimeout(function () {\n\t                        log.debug(\"Launcher did not completely resize (state: \" + _this.state + \", activeState: \" + _this.activeState + \").\");\n\t                    }, _this.transitionCheckTimeout);\n\t                    utils_1.once(_this.element, 'transitionend', function (event, destroyListenerFn) {\n\t                        if (event.target === _this.element &&\n\t                            utils_1.contains(_this.targetTransitionEvents, event.propertyName)) {\n\t                            clearTimeout(timerId);\n\t                            // Uninstall the event listener for transitionend\n\t                            destroyListenerFn();\n\t                            return resolve(_this);\n\t                        }\n\t                    }, true);\n\t                }\n\t            });\n\t        }\n\t    };\n\t    Launcher.prototype.activateIfInactive = function () {\n\t        if (this.inactive) {\n\t            this.wasInactive = true;\n\t            return this.activate();\n\t        }\n\t        else\n\t            return utils_1.nothing();\n\t    };\n\t    Launcher.prototype.inactivateIfWasInactive = function () {\n\t        if (this.wasInactive) {\n\t            this.wasInactive = false;\n\t            return this.inactivate();\n\t        }\n\t        else\n\t            return utils_1.nothing();\n\t    };\n\t    Launcher.prototype.clearIfWasInactive = function () {\n\t        this.wasInactive = false;\n\t    };\n\t    Launcher.prototype.inactivate = function () {\n\t        var _this = this;\n\t        return this.bell.message.hide()\n\t            .then(function () {\n\t            if (_this.bell.badge.content.length > 0) {\n\t                return _this.bell.badge.hide()\n\t                    .then(function () { return Promise.all([_super.prototype.inactivate.call(_this), _this.resize('small')]); })\n\t                    .then(function () { return _this.bell.badge.show(); });\n\t            }\n\t            else {\n\t                return Promise.all([_super.prototype.inactivate.call(_this), _this.resize('small')]);\n\t            }\n\t        });\n\t    };\n\t    Launcher.prototype.activate = function () {\n\t        var _this = this;\n\t        if (this.bell.badge.content.length > 0) {\n\t            return this.bell.badge.hide()\n\t                .then(function () { return Promise.all([_super.prototype.activate.call(_this), _this.resize(_this.bell.options.size)]); });\n\t        }\n\t        else {\n\t            return Promise.all([_super.prototype.activate.call(this), this.resize(this.bell.options.size)]);\n\t        }\n\t    };\n\t    return Launcher;\n\t}(ActiveAnimatedElement_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Launcher;\n\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar OneSignalError_1 = __webpack_require__(10);\n\t(function (InvalidArgumentReason) {\n\t    InvalidArgumentReason[InvalidArgumentReason[\"Empty\"] = 0] = \"Empty\";\n\t    InvalidArgumentReason[InvalidArgumentReason[\"Malformed\"] = 1] = \"Malformed\";\n\t})(exports.InvalidArgumentReason || (exports.InvalidArgumentReason = {}));\n\tvar InvalidArgumentReason = exports.InvalidArgumentReason;\n\tvar InvalidArgumentError = (function (_super) {\n\t    __extends(InvalidArgumentError, _super);\n\t    function InvalidArgumentError(argName, reason) {\n\t        var _this;\n\t        switch (reason) {\n\t            case InvalidArgumentReason.Empty:\n\t                _this = _super.call(this, \"Supply a non-empty value to '\" + argName + \"'.\") || this;\n\t                break;\n\t            case InvalidArgumentReason.Malformed:\n\t                _this = _super.call(this, \"The value for '\" + argName + \"' was malformed.\") || this;\n\t                break;\n\t        }\n\t        _this.argument = argName;\n\t        _this.reason = InvalidArgumentReason[reason];\n\t        return _this;\n\t    }\n\t    return InvalidArgumentError;\n\t}(OneSignalError_1.default));\n\texports.InvalidArgumentError = InvalidArgumentError;\n\n\n/***/ },\n/* 47 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar OneSignalError_1 = __webpack_require__(10);\n\tvar PermissionMessageDismissedError = (function (_super) {\n\t    __extends(PermissionMessageDismissedError, _super);\n\t    function PermissionMessageDismissedError() {\n\t        return _super.call(this, 'The permission message was previously dismissed.') || this;\n\t    }\n\t    return PermissionMessageDismissedError;\n\t}(OneSignalError_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = PermissionMessageDismissedError;\n\n\n/***/ },\n/* 48 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || function (d, b) {\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n\t    function __() { this.constructor = d; }\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t};\n\tvar OneSignalError_1 = __webpack_require__(10);\n\tvar PushNotSupportedError = (function (_super) {\n\t    __extends(PushNotSupportedError, _super);\n\t    function PushNotSupportedError() {\n\t        return _super.call(this, 'Push notifications are not supported.') || this;\n\t    }\n\t    return PushNotSupportedError;\n\t}(OneSignalError_1.default));\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = PushNotSupportedError;\n\n\n/***/ },\n/* 49 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\tvar vars_1 = __webpack_require__(7);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar Database_1 = __webpack_require__(5);\n\tvar utils_1 = __webpack_require__(1);\n\tvar objectAssign = __webpack_require__(9);\n\tvar Postmam_1 = __webpack_require__(30);\n\tvar MainHelper_1 = __webpack_require__(11);\n\tvar ServiceWorkerHelper_1 = __webpack_require__(17);\n\tvar IndexedDb_1 = __webpack_require__(13);\n\tvar InitHelper_1 = __webpack_require__(35);\n\tvar EventHelper_1 = __webpack_require__(12);\n\tvar SubscriptionHelper_1 = __webpack_require__(6);\n\tvar InvalidStateError_1 = __webpack_require__(23);\n\tvar HttpHelper = (function () {\n\t    function HttpHelper() {\n\t    }\n\t    HttpHelper.isShowingHttpPermissionRequest = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        if (!SubscriptionHelper_1.default.isUsingSubscriptionWorkaround())\n\t                            return [3 /*break*/, 2];\n\t                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n\t                                OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST, null, function (reply) {\n\t                                    resolve(reply.data);\n\t                                });\n\t                            })];\n\t                    case 1: return [2 /*return*/, _a.sent()];\n\t                    case 2: return [2 /*return*/, OneSignal._showingHttpPermissionRequest];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    // Http only - Only called from iframe's init.js\n\t    HttpHelper.initHttp = function (options) {\n\t        var _this = this;\n\t        log.debug(\"Called %cinitHttp(\" + JSON.stringify(options, null, 4) + \")\", utils_1.getConsoleStyle('code'));\n\t        if (!utils_1.isPushNotificationsSupported()) {\n\t            log.warn('OneSignal: Push notifications are not supported.');\n\t            return;\n\t        }\n\t        ServiceWorkerHelper_1.default.applyServiceWorkerEnvPrefixes();\n\t        var creator = window.opener || window.parent;\n\t        if (creator == window) {\n\t            document.write(\"<span style='font-size: 14px; color: red; font-family: sans-serif;'>OneSignal: This page cannot be directly opened, and \\nmust be opened as a result of a subscription call.</span>\");\n\t            return;\n\t        }\n\t        // Forgetting this makes all our APIs stall forever because the promises expect this to be true\n\t        OneSignal.config = {};\n\t        OneSignal.initialized = true;\n\t        var sendToOrigin = options.origin;\n\t        var receiveFromOrigin = options.origin;\n\t        var shouldWipeData = utils_1.getUrlQueryParam('dangerouslyWipeData') || (window.__POSTDATA && window.__POSTDATA['dangerouslyWipeData'] === true);\n\t        var preinitializePromise = Promise.resolve();\n\t        if (shouldWipeData && Environment_1.default.isIframe()) {\n\t            OneSignal.LOGGING = true;\n\t            // Wipe IndexedDB and unsubscribe from push/unregister the service worker for testing.\n\t            log.warn('Wiping away previous HTTP data (called from HTTP iFrame).');\n\t            preinitializePromise = utils_1.wipeLocalIndexedDb()\n\t                .then(function () { return utils_1.unsubscribeFromPush(); })\n\t                .then(function () { return IndexedDb_1.default.put('Ids', { type: 'appId', id: options.appId }); });\n\t        }\n\t        OneSignal._thisIsThePopup = options.isPopup;\n\t        if (Environment_1.default.isPopup() || OneSignal._thisIsThePopup) {\n\t            OneSignal.popupPostmam = new Postmam_1.default(window.opener, sendToOrigin, receiveFromOrigin);\n\t            // The host page will receive this event, and then call connect()\n\t            OneSignal.popupPostmam.postMessage(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS, null);\n\t            OneSignal.popupPostmam.listen();\n\t            OneSignal.popupPostmam.on('connect', function (e) {\n\t                log.debug(\"(\" + Environment_1.default.getEnv() + \") The host page is now ready to receive commands from the HTTP popup.\");\n\t                Event_1.default.trigger('httpInitialize');\n\t            });\n\t        }\n\t        OneSignal._thisIsTheModal = options.isModal;\n\t        if (OneSignal._thisIsTheModal) {\n\t            OneSignal.modalPostmam = new Postmam_1.default(window.parent, sendToOrigin, receiveFromOrigin);\n\t        }\n\t        OneSignal.iframePostmam = new Postmam_1.default(window, sendToOrigin, receiveFromOrigin);\n\t        OneSignal.iframePostmam.listen();\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.CONNECTED, function (e) {\n\t            log.debug(\"(\" + Environment_1.default.getEnv() + \") Fired Postmam connect event!\");\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION, function (message) {\n\t            OneSignal.getNotificationPermission()\n\t                .then(function (permission) { return message.reply(permission); });\n\t            return false;\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET, function (message) {\n\t            // retrievals is an array of key-value pairs e.g. [{table: 'Ids', keys: 'userId'}, {table: 'Ids', keys: 'registrationId'}]\n\t            var retrievals = message.data;\n\t            var retrievalOpPromises = [];\n\t            for (var _i = 0, retrievals_1 = retrievals; _i < retrievals_1.length; _i++) {\n\t                var retrieval = retrievals_1[_i];\n\t                var table = retrieval.table, key = retrieval.key;\n\t                retrievalOpPromises.push(Database_1.default.get(table, key));\n\t            }\n\t            Promise.all(retrievalOpPromises)\n\t                .then(function (results) { return message.reply(results); });\n\t            return false;\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT, function (message) {\n\t            // insertions is an array of key-value pairs e.g. [table: {'Options': keypath: {key: persistNotification, value: '...'}}, {table: 'Ids', keypath: {type: 'userId', id: '...'}]\n\t            // It's formatted that way because our IndexedDB database is formatted that way\n\t            var insertions = message.data;\n\t            var insertionOpPromises = [];\n\t            for (var _i = 0, insertions_1 = insertions; _i < insertions_1.length; _i++) {\n\t                var insertion = insertions_1[_i];\n\t                var table = insertion.table, keypath = insertion.keypath;\n\t                insertionOpPromises.push(Database_1.default.put(table, keypath));\n\t            }\n\t            Promise.all(insertionOpPromises)\n\t                .then(function (results) { return message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE); });\n\t            return false;\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE, function (message) {\n\t            // removals is an array of key-value pairs e.g. [table: {'Options': keypath: {key: persistNotification, value: '...'}}, {table: 'Ids', keypath: {type: 'userId', id: '...'}]\n\t            // It's formatted that way because our IndexedDB database is formatted that way\n\t            var removals = message.data;\n\t            var removalOpPromises = [];\n\t            for (var _i = 0, removals_1 = removals; _i < removals_1.length; _i++) {\n\t                var removal = removals_1[_i];\n\t                var table = removal.table, keypath = removal.keypath;\n\t                removalOpPromises.push(Database_1.default.remove(table, keypath));\n\t            }\n\t            Promise.all(removalOpPromises)\n\t                .then(function (results) { return message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE); });\n\t            return false;\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE, function (message) {\n\t            log.info(\"(\" + Environment_1.default.getEnv() + \") The iFrame has just received initOptions from the host page!\");\n\t            preinitializePromise.then(function () {\n\t                OneSignal.config = objectAssign(message.data.hostInitOptions, options, {\n\t                    defaultUrl: message.data.defaultUrl,\n\t                    pageUrl: message.data.pageUrl,\n\t                    pageTitle: message.data.pageTitle\n\t                });\n\t                InitHelper_1.default.installNativePromptPermissionChangedHook();\n\t                var opPromises = [];\n\t                if (options.continuePressed) {\n\t                    opPromises.push(OneSignal.setSubscription(true));\n\t                }\n\t                // 3/30/16: For HTTP sites, put the host page URL as default URL if one doesn't exist already\n\t                opPromises.push(Database_1.default.get('Options', 'defaultUrl').then(function (defaultUrl) {\n\t                    if (!defaultUrl) {\n\t                        return Database_1.default.put('Options', { key: 'defaultUrl', value: new URL(OneSignal.config.defaultUrl).origin });\n\t                    }\n\t                }));\n\t                /**\n\t                 * When a user is on http://example.com and receives a notification, we want to open a new window only if the\n\t                 * notification's URL is different from http://example.com. The service worker, which only controls\n\t                 * subdomain.onesignal.com, doesn't know that the host URL is http://example.com. Although defaultUrl above\n\t                 * sets the HTTP's origin, this can be modified if users call setDefaultTitle(). lastKnownHostUrl therefore\n\t                 * stores the last visited full page URL.\n\t                 */\n\t                opPromises.push(Database_1.default.put('Options', { key: 'lastKnownHostUrl', value: OneSignal.config.pageUrl }));\n\t                opPromises.push(InitHelper_1.default.initSaveState());\n\t                opPromises.push(InitHelper_1.default.storeInitialValues());\n\t                opPromises.push(InitHelper_1.default.saveInitOptions());\n\t                Promise.all(opPromises)\n\t                    .then(function () {\n\t                    /* 3/20/16: In the future, if navigator.serviceWorker.ready is unusable inside of an insecure iFrame host, adding a message event listener will still work. */\n\t                    //if (navigator.serviceWorker) {\n\t                    //log.info('We have added an event listener for service worker messages.', Environment.getEnv());\n\t                    //navigator.serviceWorker.addEventListener('message', function(event) {\n\t                    //  log.info('Wow! We got a message!', event);\n\t                    //});\n\t                    //}\n\t                    if (navigator.serviceWorker && window.location.protocol === 'https:') {\n\t                        try {\n\t                            MainHelper_1.default.establishServiceWorkerChannel();\n\t                        }\n\t                        catch (e) {\n\t                            log.error(\"Error interacting with Service Worker inside an HTTP-hosted iFrame:\", e);\n\t                        }\n\t                    }\n\t                    message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE);\n\t                });\n\t            });\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH, function (message) {\n\t            log.debug(Environment_1.default.getEnv() + \" (Expected iFrame) has received the unsubscribe from push method.\");\n\t            utils_1.unsubscribeFromPush()\n\t                .then(function () { return message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE); })\n\t                .catch(function (e) { return log.debug('Failed to unsubscribe from push remotely.', e); });\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST, function (message) {\n\t            log.debug(Environment_1.default.getEnv() + \" Calling showHttpPermissionRequest() inside the iFrame, proxied from host.\");\n\t            var options = {};\n\t            if (message.data) {\n\t                options = message.data;\n\t            }\n\t            log.debug(Environment_1.default.getEnv() + 'HTTP permission request showing, message data:', message);\n\t            OneSignal.showHttpPermissionRequest(options)\n\t                .then(function (result) {\n\t                message.reply({ status: 'resolve', result: result });\n\t            })\n\t                .catch(function (e) {\n\t                if (e && e.reason === InvalidStateError_1.InvalidStateReason[InvalidStateError_1.InvalidStateReason.PushPermissionAlreadyGranted]) {\n\t                }\n\t                else {\n\t                    message.reply({ status: 'reject', result: e });\n\t                }\n\t            });\n\t        });\n\t        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST, function (message) { return __awaiter(_this, void 0, void 0, function () {\n\t            var isShowingHttpPermReq;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, HttpHelper.isShowingHttpPermissionRequest()];\n\t                    case 1:\n\t                        isShowingHttpPermReq = _a.sent();\n\t                        message.reply(isShowingHttpPermReq);\n\t                        return [2 /*return*/, false];\n\t                }\n\t            });\n\t        }); });\n\t        if (Environment_1.default.isIframe()) {\n\t            Event_1.default.trigger('httpInitialize');\n\t        }\n\t    };\n\t    HttpHelper.initPopup = function () {\n\t        OneSignal.config = {};\n\t        OneSignal.initialized = true;\n\t        ServiceWorkerHelper_1.default.applyServiceWorkerEnvPrefixes();\n\t        // Do not register OneSignalSDKUpdaterWorker.js for HTTP popup sites; the file does not exist\n\t        OneSignal.isPushNotificationsEnabled(function (isEnabled) {\n\t            if (!isEnabled) {\n\t                navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM).then(SubscriptionHelper_1.default.enableNotifications, ServiceWorkerHelper_1.default.registerError);\n\t            }\n\t            else {\n\t                window.close();\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Loads the iFrame with the OneSignal subdomain on the page so that subsequent SDK tasks can run on the service-worker-controlled origin.\n\t     */\n\t    HttpHelper.loadSubdomainIFrame = function () {\n\t        var subdomainLoadPromise = new Promise(function (resolve, reject) {\n\t            log.debug(\"Called %cloadSubdomainIFrame()\", utils_1.getConsoleStyle('code'));\n\t            var dangerouslyWipeData = OneSignal.config.dangerouslyWipeData;\n\t            if (dangerouslyWipeData) {\n\t                OneSignal.iframeUrl += '?&dangerouslyWipeData=true';\n\t            }\n\t            log.debug('Loading subdomain iFrame:', OneSignal.iframeUrl);\n\t            var iframe = MainHelper_1.default.createHiddenDomIFrame(OneSignal.iframeUrl);\n\t            iframe.onload = function () {\n\t                log.info('iFrame onload event was called for:', iframe.src);\n\t                var sendToOrigin = \"https://\" + OneSignal.config.subdomainName + \".onesignal.com\";\n\t                if (Environment_1.default.isDev()) {\n\t                    sendToOrigin = vars_1.DEV_FRAME_HOST;\n\t                }\n\t                else if (Environment_1.default.isStaging()) {\n\t                    sendToOrigin = vars_1.STAGING_FRAME_HOST;\n\t                }\n\t                var receiveFromOrigin = sendToOrigin;\n\t                OneSignal.iframePostmam = new Postmam_1.default(iframe.contentWindow, sendToOrigin, receiveFromOrigin);\n\t                OneSignal.iframePostmam.connect();\n\t                OneSignal.iframePostmam.on('connect', function (e) {\n\t                    log.debug(\"(\" + Environment_1.default.getEnv() + \") Fired Postmam connect event!\");\n\t                    Promise.all([\n\t                        Database_1.default.get('Options', 'defaultUrl'),\n\t                        Database_1.default.get('Options', 'defaultTitle')\n\t                    ])\n\t                        .then(function (_a) {\n\t                        var defaultUrlResult = _a[0], defaultTitleResult = _a[1];\n\t                        if (!defaultUrlResult) {\n\t                            var defaultUrl = location.href;\n\t                        }\n\t                        else {\n\t                            var defaultUrl = defaultUrlResult;\n\t                        }\n\t                        if (!defaultTitleResult) {\n\t                            var defaultTitle = document.title;\n\t                        }\n\t                        else {\n\t                            var defaultTitle = defaultTitleResult;\n\t                        }\n\t                        OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE, {\n\t                            hostInitOptions: JSON.parse(JSON.stringify(OneSignal.config)),\n\t                            defaultUrl: defaultUrl,\n\t                            pageUrl: window.location.href,\n\t                            pageTitle: defaultTitle,\n\t                        }, function (reply) {\n\t                            if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\n\t                                resolve();\n\t                                Event_1.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n\t                            }\n\t                            return false;\n\t                        });\n\t                    });\n\t                });\n\t                OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT, function (message) {\n\t                    // e.g. { eventName: 'subscriptionChange', eventData: true}\n\t                    var _a = message.data, eventName = _a.eventName, eventData = _a.eventData;\n\t                    Event_1.default.trigger(eventName, eventData, message.source);\n\t                    return false;\n\t                });\n\t                OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED, function (message) {\n\t                    var forceUpdatePermission = message.data.forceUpdatePermission;\n\t                    EventHelper_1.default.triggerNotificationPermissionChanged(forceUpdatePermission);\n\t                    return false;\n\t                });\n\t                OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REQUEST_HOST_URL, function (message) {\n\t                    message.reply(location.href);\n\t                    return false;\n\t                });\n\t            };\n\t            OneSignal._sessionIframeAdded = true;\n\t        });\n\t        return utils_1.executeAndTimeoutPromiseAfter(subdomainLoadPromise, 15000)\n\t            .catch(function () { return log.warn(\"OneSignal: Could not load iFrame with URL \" + OneSignal.iframeUrl + \". Please check that your 'subdomainName' matches that on your OneSignal Chrome platform settings. Also please check that your Site URL on your Chrome platform settings is a valid reachable URL pointing to your site.\"); });\n\t    };\n\t    HttpHelper.loadPopup = function (options) {\n\t        // Important: Don't use any promises until the window is opened, otherwise the popup will be blocked\n\t        var sendToOrigin = \"https://\" + OneSignal.config.subdomainName + \".onesignal.com\";\n\t        if (Environment_1.default.isDev()) {\n\t            sendToOrigin = vars_1.DEV_FRAME_HOST;\n\t        }\n\t        var receiveFromOrigin = sendToOrigin;\n\t        var dangerouslyWipeData = OneSignal.config.dangerouslyWipeData;\n\t        var postData = objectAssign({}, MainHelper_1.default.getPromptOptionsPostHash(), {\n\t            promptType: 'popup',\n\t            parentHostname: encodeURIComponent(location.hostname)\n\t        });\n\t        if (options && options.autoAccept) {\n\t            postData['autoAccept'] = true;\n\t        }\n\t        log.info('loadPopup(options):', options);\n\t        if (options && options.httpPermissionRequest) {\n\t            postData['httpPermissionRequest'] = true;\n\t            var overrides = {\n\t                childWidth: 250,\n\t                childHeight: 150,\n\t                left: -99999999,\n\t                top: 9999999,\n\t            };\n\t        }\n\t        if (dangerouslyWipeData) {\n\t            postData['dangerouslyWipeData'] = true;\n\t        }\n\t        log.info(\"Opening popup window to \" + OneSignal.popupUrl + \" with POST data:\", OneSignal.popupUrl);\n\t        var subdomainPopup = MainHelper_1.default.openSubdomainPopup(OneSignal.popupUrl, postData, overrides);\n\t        if (subdomainPopup) {\n\t            subdomainPopup.blur();\n\t            window.focus();\n\t        }\n\t        OneSignal.popupPostmam = new Postmam_1.default(subdomainPopup, sendToOrigin, receiveFromOrigin);\n\t        OneSignal.popupPostmam.startPostMessageReceive();\n\t        OneSignal.popupPostmam.on(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS, function (message) {\n\t            // e.g. { eventName: 'subscriptionChange', eventData: true}\n\t            log.debug(\"(Popup Postmam) (\" + Environment_1.default.getEnv() + \") Got direct postMessage() event from popup event to begin MessagePort comms.\");\n\t            OneSignal.popupPostmam.connect();\n\t            return false;\n\t        });\n\t        OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_LOADED, function (message) {\n\t            Event_1.default.trigger('popupLoad');\n\t        });\n\t        OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_ACCEPTED, function (message) {\n\t            MainHelper_1.default.triggerCustomPromptClicked('granted');\n\t        });\n\t        OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_REJECTED, function (message) {\n\t            MainHelper_1.default.triggerCustomPromptClicked('denied');\n\t        });\n\t        OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING, function (message) {\n\t            log.info('Detected popup is closing.');\n\t            Event_1.default.trigger(OneSignal.EVENTS.POPUP_CLOSING);\n\t            OneSignal.popupPostmam.destroy();\n\t        });\n\t        OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION, function (message) {\n\t            log.debug(Environment_1.default.getEnv() + \" Marking current session as a continuing browsing session.\");\n\t            MainHelper_1.default.beginTemporaryBrowserSession();\n\t        });\n\t        OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.WINDOW_TIMEOUT, function (message) {\n\t            log.debug(Environment_1.default.getEnv() + \" Popup window timed out and was closed.\");\n\t            Event_1.default.trigger(OneSignal.EVENTS.POPUP_WINDOW_TIMEOUT);\n\t        });\n\t        OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION, function (message) {\n\t            log.debug(Environment_1.default.getEnv() + \" Finishing HTTP popup registration inside the iFrame, sent from popup.\");\n\t            message.reply({ progress: true });\n\t            MainHelper_1.default.getAppId()\n\t                .then(function (appId) {\n\t                EventHelper_1.default.triggerNotificationPermissionChanged(window.Notification.permission);\n\t                OneSignal.popupPostmam.stopPostMessageReceive();\n\t                MainHelper_1.default.registerWithOneSignal(appId, message.data.subscriptionInfo)\n\t                    .then(function () { return EventHelper_1.default.checkAndTriggerSubscriptionChanged(); });\n\t            });\n\t        });\n\t    };\n\t    return HttpHelper;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = HttpHelper;\n\n\n/***/ },\n/* 50 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar objectAssign = __webpack_require__(9);\n\tvar HttpModal = (function () {\n\t    function HttpModal(options) {\n\t        if (!options) {\n\t            this.options = {};\n\t        }\n\t        else {\n\t            this.options = objectAssign({}, options);\n\t        }\n\t        if (!this.options['modalTitle'] || typeof this.options['modalTitle'] !== \"string\")\n\t            this.options['modalTitle'] = \"Thanks for subscribing\";\n\t        if (!this.options['modalMessage'] || typeof this.options['modalMessage'] !== \"string\")\n\t            this.options['modalMessage'] = \"You're now subscribed to notifications. You can unsubscribe at any time.\";\n\t        if (!this.options['modalButtonText'] || typeof this.options['modalButtonText'] !== \"string\")\n\t            this.options['modalButtonText'] = \"Close\";\n\t        this.options['modalTitle'] = this.options['modalTitle'].substring(0, 50);\n\t        this.options['modalMessage'] = this.options['modalMessage'].substring(0, 90);\n\t        this.options['modalButtonText'] = this.options['modalButtonText'].substring(0, 35);\n\t        __webpack_require__(70);\n\t    }\n\t    Object.defineProperty(HttpModal, \"EVENTS\", {\n\t        get: function () {\n\t            return {\n\t                FINISH_CLICK: 'httpModalFinishClick',\n\t                SHOWN: 'httpModalShown',\n\t                CLOSED: 'httpModalClosed',\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    HttpModal.prototype.create = function () {\n\t        try {\n\t            // Remove any existing container\n\t            if (this.container) {\n\t                utils_1.removeDomElement('#onesignal-modal-container');\n\t            }\n\t            var dialogHtml = \"\\n                        <div id=\\\"onesignal-modal-dialog\\\">\\n                            <div class=\\\"modal-exit\\\">&times;</div>\\n                            <div class=\\\"modal-body\\\">\\n                                <div class=\\\"modal-body-title\\\">\\n                                    \" + this.options['modalTitle'] + \"                                      \\n                                </div>\\n                                <div class=\\\"modal-body-message\\\">\\n                                    \" + this.options['modalMessage'] + \"                \\n                                </div>\\n                                <div class=\\\"clearfix\\\"></div>\\n                            </div>\\n                            <div class=\\\"modal-footer\\\">\\n                                <button id=\\\"onesignal-modal-finish-button\\\" class=\\\"primary modal-button\\\">\\n                                \" + this.options['modalButtonText'] + \"</button>\\n                                <div class=\\\"clearfix\\\"></div>\\n                            </div>\\n                        </div>                   \\n                    \";\n\t            // Insert the container\n\t            utils_1.addDomElement('body', 'beforeend', '<div id=\"onesignal-modal-container\" class=\"onesignal-modal-container onesignal-reset\"></div>');\n\t            // Insert the dialog\n\t            utils_1.addDomElement(this.container, 'beforeend', dialogHtml);\n\t            // Add click event handlers\n\t            this.container.addEventListener('click', this.onHttpModalFinished.bind(this));\n\t            Event_1.default.trigger(HttpModal.EVENTS.SHOWN);\n\t        }\n\t        catch (e) {\n\t            log.error(e);\n\t        }\n\t    };\n\t    HttpModal.prototype.onHttpModalFinished = function (e) {\n\t        OneSignal.registerForPushNotifications({ httpPermissionRequest: true });\n\t        Event_1.default.trigger(HttpModal.EVENTS.FINISH_CLICK);\n\t        this.close();\n\t    };\n\t    HttpModal.prototype.close = function () {\n\t        utils_1.addCssClass(this.container, 'close-modal');\n\t        utils_1.removeDomElement('#onesignal-modal-container');\n\t        Event_1.default.trigger(HttpModal.EVENTS.CLOSED);\n\t    };\n\t    Object.defineProperty(HttpModal.prototype, \"container\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-modal-container');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(HttpModal.prototype, \"dialog\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-modal-dialog');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(HttpModal.prototype, \"finishButton\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-modal-finish-button');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    return HttpModal;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = HttpModal;\n\n\n/***/ },\n/* 51 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar AppConfig = (function () {\n\t    function AppConfig() {\n\t    }\n\t    return AppConfig;\n\t}());\n\texports.AppConfig = AppConfig;\n\n\n/***/ },\n/* 52 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar AppState = (function () {\n\t    function AppState() {\n\t    }\n\t    return AppState;\n\t}());\n\texports.AppState = AppState;\n\n\n/***/ },\n/* 53 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar NotificationPermission;\n\t(function (NotificationPermission) {\n\t    /**\n\t     * The user has not granted notification permissions and may have just dismissed the notification permission prompt.\n\t     */\n\t    NotificationPermission[NotificationPermission[\"Default\"] = \"default\"] = \"Default\";\n\t    /**\n\t     * The user has granted notification permissions.\n\t     */\n\t    NotificationPermission[NotificationPermission[\"Granted\"] = \"granted\"] = \"Granted\";\n\t    /**\n\t     * The user has blocked notifications.\n\t     */\n\t    NotificationPermission[NotificationPermission[\"Denied\"] = \"denied\"] = \"Denied\";\n\t})(NotificationPermission || (NotificationPermission = {}));\n\texports.NotificationPermission = NotificationPermission;\n\n\n/***/ },\n/* 54 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t/**\n\t * Contains the SDK initialization options that configure future installations of our service worker.\n\t */\n\tvar ServiceWorkerConfig = (function () {\n\t    function ServiceWorkerConfig() {\n\t    }\n\t    return ServiceWorkerConfig;\n\t}());\n\texports.ServiceWorkerConfig = ServiceWorkerConfig;\n\n\n/***/ },\n/* 55 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ServiceWorkerState = (function () {\n\t    function ServiceWorkerState() {\n\t    }\n\t    return ServiceWorkerState;\n\t}());\n\texports.ServiceWorkerState = ServiceWorkerState;\n\n\n/***/ },\n/* 56 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar Subscription = (function () {\n\t    function Subscription() {\n\t    }\n\t    return Subscription;\n\t}());\n\texports.Subscription = Subscription;\n\n\n/***/ },\n/* 57 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar utils_1 = __webpack_require__(1);\n\tvar log = __webpack_require__(2);\n\tvar Event_1 = __webpack_require__(3);\n\tvar MainHelper_1 = __webpack_require__(11);\n\tvar Browser = __webpack_require__(8);\n\tvar objectAssign = __webpack_require__(9);\n\tvar Popover = (function () {\n\t    function Popover(options) {\n\t        __webpack_require__(71);\n\t        if (!options) {\n\t            this.options = {};\n\t        }\n\t        else {\n\t            this.options = objectAssign({}, options);\n\t        }\n\t        if (!this.options['actionMessage'] || typeof this.options['actionMessage'] !== \"string\")\n\t            this.options['actionMessage'] = \"We'd like to show you notifications for the latest news and updates.\";\n\t        if (!this.options['acceptButtonText'] || typeof this.options['acceptButtonText'] !== \"string\")\n\t            this.options['acceptButtonText'] = \"Allow\";\n\t        if (!this.options['cancelButtonText'] || typeof this.options['cancelButtonText'] !== \"string\")\n\t            this.options['cancelButtonText'] = \"No Thanks\";\n\t        this.options['actionMessage'] = this.options['actionMessage'].substring(0, 90);\n\t        this.options['acceptButtonText'] = this.options['acceptButtonText'].substring(0, 15);\n\t        this.options['cancelButtonText'] = this.options['cancelButtonText'].substring(0, 15);\n\t        this.notificationIcons = null;\n\t    }\n\t    Object.defineProperty(Popover, \"EVENTS\", {\n\t        get: function () {\n\t            return {\n\t                ALLOW_CLICK: 'popoverAllowClick',\n\t                CANCEL_CLICK: 'popoverCancelClick',\n\t                SHOWN: 'popoverShown',\n\t                CLOSED: 'popoverClosed',\n\t            };\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Popover.prototype.create = function () {\n\t        var _this = this;\n\t        try {\n\t            if (this.notificationIcons === null) {\n\t                MainHelper_1.default.getNotificationIcons().then(function (icons) {\n\t                    _this.notificationIcons = icons;\n\t                    // Remove any existing container\n\t                    if (_this.container) {\n\t                        utils_1.removeDomElement('#onesignal-popover-container');\n\t                    }\n\t                    var icon = _this.getPlatformNotificationIcon();\n\t                    var defaultIcon = \"data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2239.5%22%20height%3D%2240.5%22%20viewBox%3D%220%200%2079%2081%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctitle%3EOneSignal-Bell%3C%2Ftitle%3E%3Cg%20fill%3D%22%23BBB%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M39.96%2067.12H4.12s-3.2-.32-3.2-3.36%202.72-3.2%202.72-3.2%2010.72-5.12%2010.72-8.8c0-3.68-1.76-6.24-1.76-21.28%200-15.04%209.6-26.56%2021.12-26.56%200%200%201.6-3.84%206.24-3.84%204.48%200%206.08%203.84%206.08%203.84%2011.52%200%2021.12%2011.52%2021.12%2026.56s-1.6%2017.6-1.6%2021.28c0%203.68%2010.72%208.8%2010.72%208.8s2.72.16%202.72%203.2c0%202.88-3.36%203.36-3.36%203.36H39.96zM27%2070.8h24s-1.655%2010.08-11.917%2010.08S27%2070.8%2027%2070.8z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\";\n\t                    var dialogHtml = \"\\n                    <div id=\\\"normal-popover\\\">\\n                        <div class=\\\"popover-body\\\">\\n                            <div class=\\\"popover-body-icon \" + (icon === 'default-icon' ? 'default-icon' : '') + \"\\\" style=\\\"background-image: url('\" + (icon === 'default-icon' ? defaultIcon : icon) + \"');\\\">\\n                            </div>\\n                            <div class=\\\"popover-body-message\\\">\\n                                \" + _this.options['actionMessage'] + \"                \\n                            </div>\\n                            <div class=\\\"clearfix\\\"></div>\\n                        </div>\\n                        <div class=\\\"popover-footer\\\">\\n                            <button id=\\\"onesignal-popover-allow-button\\\" class=\\\"align-right primary popover-button\\\">\\n                            \" + _this.options['acceptButtonText'] + \"</button>\\n                            <button id=\\\"onesignal-popover-cancel-button\\\" class=\\\"align-right secondary popover-button\\\">\\n                            \" + _this.options['cancelButtonText'] + \"</button>\\n                            <div class=\\\"clearfix\\\"></div>\\n                        </div>\\n                    </div>                   \\n                \";\n\t                    // Insert the container\n\t                    utils_1.addDomElement('body', 'beforeend', '<div id=\"onesignal-popover-container\" class=\"onesignal-popover-container onesignal-reset\"></div>');\n\t                    // Insert the dialog\n\t                    utils_1.addDomElement(_this.container, 'beforeend', \"<div id=\\\"onesignal-popover-dialog\\\" class=\\\"onesignal-popover-dialog\\\">\" + dialogHtml + \"</div>\");\n\t                    // Animate it in depending on environment\n\t                    utils_1.addCssClass(_this.container, Browser.mobile ? 'slide-up' : 'slide-down');\n\t                    // Add click event handlers\n\t                    _this.allowButton.addEventListener('click', _this.onPopoverAllowed.bind(_this));\n\t                    _this.cancelButton.addEventListener('click', _this.onPopoverCanceled.bind(_this));\n\t                    Event_1.default.trigger(Popover.EVENTS.SHOWN);\n\t                });\n\t            }\n\t        }\n\t        catch (e) {\n\t            log.error(e);\n\t        }\n\t    };\n\t    Popover.prototype.onPopoverAllowed = function (e) {\n\t        Event_1.default.trigger(Popover.EVENTS.ALLOW_CLICK);\n\t    };\n\t    Popover.prototype.onPopoverCanceled = function (e) {\n\t        Event_1.default.trigger(Popover.EVENTS.CANCEL_CLICK);\n\t        this.close();\n\t    };\n\t    Popover.prototype.close = function () {\n\t        var _this = this;\n\t        utils_1.addCssClass(this.container, 'close-popover');\n\t        utils_1.once(this.dialog, 'animationend', function (event, destroyListenerFn) {\n\t            if (event.target === _this.dialog &&\n\t                (event.animationName === 'slideDownExit' || event.animationName === 'slideUpExit')) {\n\t                // Uninstall the event listener for animationend\n\t                utils_1.removeDomElement('#onesignal-popover-container');\n\t                destroyListenerFn();\n\t                Event_1.default.trigger(Popover.EVENTS.CLOSED);\n\t            }\n\t        }, true);\n\t    };\n\t    Popover.prototype.getPlatformNotificationIcon = function () {\n\t        if (this.notificationIcons) {\n\t            if (Browser.chrome || Browser.firefox) {\n\t                if (this.notificationIcons.chrome) {\n\t                    return this.notificationIcons.chrome;\n\t                }\n\t                else if (this.notificationIcons.firefox) {\n\t                    return this.notificationIcons.firefox;\n\t                }\n\t                else {\n\t                    return 'default-icon';\n\t                }\n\t            }\n\t            else if (Browser.safari) {\n\t                if (this.notificationIcons.safari) {\n\t                    return this.notificationIcons.safari;\n\t                }\n\t                else if (this.notificationIcons.chrome) {\n\t                    return this.notificationIcons.chrome;\n\t                }\n\t                else {\n\t                    return 'default-icon';\n\t                }\n\t            }\n\t        }\n\t        else\n\t            return 'default-icon';\n\t    };\n\t    Object.defineProperty(Popover.prototype, \"container\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-popover-container');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Popover.prototype, \"dialog\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-popover-dialog');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Popover.prototype, \"allowButton\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-popover-allow-button');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(Popover.prototype, \"cancelButton\", {\n\t        get: function () {\n\t            return document.querySelector('#onesignal-popover-cancel-button');\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    return Popover;\n\t}());\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\texports.default = Popover;\n\n\n/***/ },\n/* 58 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(fetch) {\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments)).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\t///<reference path=\"../../typings/globals/service_worker_api/index.d.ts\"/>\n\tvar vars_1 = __webpack_require__(7);\n\tvar Environment_1 = __webpack_require__(4);\n\tvar OneSignalApi_1 = __webpack_require__(15);\n\tvar log = __webpack_require__(2);\n\tvar Database_1 = __webpack_require__(5);\n\tvar utils_1 = __webpack_require__(1);\n\tvar objectAssign = __webpack_require__(9);\n\tvar swivel = __webpack_require__(28);\n\tvar Browser = __webpack_require__(8);\n\t/**\n\t * The main service worker script fetching and displaying notifications to users in the background even when the client\n\t * site is not running. The worker is registered via the navigator.serviceWorker.register() call after the user first\n\t * allows notification permissions, and is a pre-requisite to subscribing for push notifications.\n\t *\n\t * For HTTPS sites, the service worker is registered site-wide at the top-level scope. For HTTP sites, the service\n\t * worker is registered to the iFrame pointing to subdomain.onesignal.com.\n\t */\n\tvar ServiceWorker = (function () {\n\t    function ServiceWorker() {\n\t    }\n\t    Object.defineProperty(ServiceWorker, \"VERSION\", {\n\t        /**\n\t         * An incrementing integer defined in package.json. Value doesn't matter as long as it's different from the\n\t         * previous version.\n\t         */\n\t        get: function () {\n\t            return (\"120050\");\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ServiceWorker, \"environment\", {\n\t        /**\n\t         * Describes what context the JavaScript code is running in and whether we're running in local development mode.\n\t         */\n\t        get: function () {\n\t            return Environment_1.default;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ServiceWorker, \"log\", {\n\t        get: function () {\n\t            return log;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ServiceWorker, \"swivel\", {\n\t        /**\n\t         * Allows message passing between this service worker and its controlled clients, or webpages. Controlled\n\t         * clients include any HTTPS site page, or the nested iFrame pointing to OneSignal on any HTTP site. This allows\n\t         * events like notification dismissed, clicked, and displayed to be fired on the clients. It also allows the\n\t         * clients to communicate with the service worker to close all active notifications.\n\t         */\n\t        get: function () {\n\t            return swivel;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ServiceWorker, \"database\", {\n\t        /**\n\t         * An interface to the browser's IndexedDB.\n\t         */\n\t        get: function () {\n\t            return Database_1.default;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ServiceWorker, \"apiUrl\", {\n\t        get: function () {\n\t            return vars_1.API_URL;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    Object.defineProperty(ServiceWorker, \"browser\", {\n\t        /**\n\t         * Describes the current browser name and version.\n\t         */\n\t        get: function () {\n\t            return Browser;\n\t        },\n\t        enumerable: true,\n\t        configurable: true\n\t    });\n\t    /**\n\t     * Service worker entry point.\n\t     */\n\t    ServiceWorker.run = function () {\n\t        self.addEventListener('push', ServiceWorker.onPushReceived);\n\t        self.addEventListener('notificationclose', ServiceWorker.onNotificationClosed);\n\t        self.addEventListener('notificationclick', function (event) { return event.waitUntil(ServiceWorker.onNotificationClicked(event)); });\n\t        self.addEventListener('install', ServiceWorker.onServiceWorkerInstalled);\n\t        self.addEventListener('activate', ServiceWorker.onServiceWorkerActivated);\n\t        self.addEventListener('pushsubscriptionchange', ServiceWorker.onPushSubscriptionChange);\n\t        // Install messaging event handlers for page <-> service worker communication\n\t        swivel.on('data', ServiceWorker.onMessageReceived);\n\t        // 3/2/16: Firefox does not send the Origin header when making CORS request through service workers, which breaks some sites that depend on the Origin header being present (https://bugzilla.mozilla.org/show_bug.cgi?id=1248463)\n\t        // Fix: If the browser is Firefox and is v44, use the following workaround:\n\t        if (Browser.firefox && Browser.version && utils_1.contains(Browser.version, '44')) {\n\t            Database_1.default.get('Options', 'serviceWorkerRefetchRequests')\n\t                .then(function (refetchRequests) {\n\t                if (refetchRequests == true) {\n\t                    log.info('Detected Firefox v44; installing fetch handler to refetch all requests.');\n\t                    ServiceWorker.REFETCH_REQUESTS = true;\n\t                    self.addEventListener('fetch', ServiceWorker.onFetch);\n\t                }\n\t                else {\n\t                    ServiceWorker.SKIP_REFETCH_REQUESTS = true;\n\t                    log.info('Detected Firefox v44 but not refetching requests because option is set to false.');\n\t                }\n\t            })\n\t                .catch(function (e) {\n\t                log.error(e);\n\t                ServiceWorker.REFETCH_REQUESTS = true;\n\t                self.addEventListener('fetch', ServiceWorker.onFetch);\n\t            });\n\t        }\n\t    };\n\t    /**\n\t     * Occurs when a control message is received from the host page. Not related to the actual push message event.\n\t     * @param context Used to reply to the host page.\n\t     * @param data The message contents.\n\t     */\n\t    ServiceWorker.onMessageReceived = function (context, data) {\n\t        log.debug(\"%c\" + utils_1.capitalize(Environment_1.default.getEnv()) + \" \\u2B38 Host:\", utils_1.getConsoleStyle('serviceworkermessage'), data, context);\n\t        if (!data) {\n\t            log.debug('Returning from empty data message.');\n\t            return;\n\t        }\n\t        if (data === 'notification.closeall') {\n\t            // Used for testing; the host page can close active notifications\n\t            self.registration.getNotifications(null).then(function (notifications) {\n\t                for (var _i = 0, notifications_1 = notifications; _i < notifications_1.length; _i++) {\n\t                    var notification = notifications_1[_i];\n\t                    notification.close();\n\t                }\n\t            });\n\t        }\n\t        else if (data.query) {\n\t            ServiceWorker.processQuery(data.query, data.response);\n\t        }\n\t    };\n\t    ServiceWorker.processQuery = function (queryType, response) {\n\t        if (!ServiceWorker.queries) {\n\t            log.debug(\"queryClient() was not called before processQuery(). ServiceWorker.queries is empty.\");\n\t        }\n\t        if (!ServiceWorker.queries[queryType]) {\n\t            log.debug(\"Received query \" + queryType + \" response \" + response + \". Expected ServiceWorker.queries to be preset to a hash.\");\n\t            return;\n\t        }\n\t        else {\n\t            if (!ServiceWorker.queries[queryType].promise) {\n\t                log.debug(\"Expected ServiceWorker.queries[\" + queryType + \"].promise value to be a Promise: \" + ServiceWorker.queries[queryType]);\n\t                return;\n\t            }\n\t            ServiceWorker.queries[queryType].promiseResolve(response);\n\t        }\n\t    };\n\t    /**\n\t     * Messages the service worker client the specified queryString via postMessage(), and returns a Promise that\n\t     * resolves to the client's response.\n\t     * @param serviceWorkerClient A service worker client.\n\t     * @param queryType The message to send to the client.\n\t       */\n\t    ServiceWorker.queryClient = function (serviceWorkerClient, queryType) {\n\t        if (!ServiceWorker.queries) {\n\t            ServiceWorker.queries = {};\n\t        }\n\t        if (!ServiceWorker.queries[queryType]) {\n\t            ServiceWorker.queries[queryType] = {};\n\t        }\n\t        ServiceWorker.queries[queryType].promise = new Promise(function (resolve, reject) {\n\t            ServiceWorker.queries[queryType].promiseResolve = resolve;\n\t            ServiceWorker.queries[queryType].promiseReject = reject;\n\t            swivel.emit(serviceWorkerClient.id, queryType);\n\t        });\n\t        return ServiceWorker.queries[queryType].promise;\n\t    };\n\t    /**\n\t     * Occurs when a push message is received.\n\t     * This method handles the receipt of a push signal on all web browsers except Safari, which uses the OS to handle\n\t     * notifications.\n\t     */\n\t    ServiceWorker.onPushReceived = function (event) {\n\t        log.debug(\"Called %conPushReceived(\" + JSON.stringify(event, null, 4) + \"):\", utils_1.getConsoleStyle('code'), event);\n\t        event.waitUntil(ServiceWorker.parseOrFetchNotifications(event)\n\t            .then(function (notifications) {\n\t            if (!notifications || notifications.length == 0) {\n\t                log.debug(\"Because no notifications were retrieved, we'll display the last known notification, so\" +\n\t                    \" long as it isn't the welcome notification.\");\n\t                return ServiceWorker.displayBackupNotification();\n\t            }\n\t            //Display push notifications in the order we received them\n\t            var notificationEventPromiseFns = [];\n\t            for (var _i = 0, notifications_2 = notifications; _i < notifications_2.length; _i++) {\n\t                var rawNotification = notifications_2[_i];\n\t                log.debug('Raw Notification from OneSignal:', rawNotification);\n\t                var notification = ServiceWorker.buildStructuredNotificationObject(rawNotification);\n\t                // Never nest the following line in a callback from the point of entering from retrieveNotifications\n\t                notificationEventPromiseFns.push((function (notif) {\n\t                    return ServiceWorker.displayNotification(notif)\n\t                        .then(function () { return ServiceWorker.updateBackupNotification(notif).catch(function (e) { return log.error(e); }); })\n\t                        .then(function () { swivel.broadcast('notification.displayed', notif); })\n\t                        .then(function () { return ServiceWorker.executeWebhooks('notification.displayed', notif).catch(function (e) { return log.error(e); }); });\n\t                }).bind(null, notification));\n\t            }\n\t            return notificationEventPromiseFns.reduce(function (p, fn) {\n\t                return p = p.then(fn);\n\t            }, Promise.resolve());\n\t        })\n\t            .catch(function (e) {\n\t            log.debug('Failed to display a notification:', e);\n\t            if (ServiceWorker.UNSUBSCRIBED_FROM_NOTIFICATIONS) {\n\t                log.debug('Because we have just unsubscribed from notifications, we will not show anything.');\n\t            }\n\t            else {\n\t                log.debug(\"Because a notification failed to display, we'll display the last known notification, so long as it isn't the welcome notification.\");\n\t                return ServiceWorker.displayBackupNotification();\n\t            }\n\t        }));\n\t    };\n\t    /**\n\t     * Makes a POST call to a specified URL to forward certain events.\n\t     * @param event The name of the webhook event. Affects the DB key pulled for settings and the final event the user\n\t     *              consumes.\n\t     * @param notification A JSON object containing notification details the user consumes.\n\t     * @returns {Promise}\n\t     */\n\t    ServiceWorker.executeWebhooks = function (event, notification) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var deviceId, isServerCorsEnabled, webhookTargetUrl, postData, fetchOptions;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 1:\n\t                        deviceId = (_a.sent()).deviceId;\n\t                        return [4 /*yield*/, Database_1.default.get('Options', 'webhooks.cors')];\n\t                    case 2:\n\t                        isServerCorsEnabled = _a.sent();\n\t                        return [4 /*yield*/, Database_1.default.get('Options', \"webhooks.\" + event)];\n\t                    case 3:\n\t                        webhookTargetUrl = _a.sent();\n\t                        if (!webhookTargetUrl)\n\t                            return [3 /*break*/, 5];\n\t                        postData = {\n\t                            event: event,\n\t                            id: notification.id,\n\t                            userId: deviceId,\n\t                            action: notification.action,\n\t                            buttons: notification.buttons,\n\t                            heading: notification.heading,\n\t                            content: notification.content,\n\t                            url: notification.url,\n\t                            icon: notification.icon,\n\t                            data: notification.data\n\t                        };\n\t                        fetchOptions = {\n\t                            method: 'post',\n\t                            mode: 'no-cors',\n\t                            body: JSON.stringify(postData),\n\t                        };\n\t                        if (isServerCorsEnabled) {\n\t                            fetchOptions.mode = 'cors';\n\t                            fetchOptions.headers = {\n\t                                'X-OneSignal-Event': event,\n\t                                'Content-Type': 'application/json'\n\t                            };\n\t                        }\n\t                        log.debug(\"Executing \" + event + \" webhook \" + (isServerCorsEnabled ? 'with' : 'without') + \" CORS %cPOST \" + webhookTargetUrl, utils_1.getConsoleStyle('code'), ':', postData);\n\t                        return [4 /*yield*/, fetch(webhookTargetUrl, fetchOptions)];\n\t                    case 4: return [2 /*return*/, _a.sent()];\n\t                    case 5: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Gets an array of active window clients along with whether each window client is the HTTP site's iFrame or an\n\t     * HTTPS site page.\n\t     * An active window client is a browser tab that is controlled by the service worker.\n\t     * Technically, this list should only ever contain clients that are iFrames, or clients that are HTTPS site pages,\n\t     * and not both. This doesn't really matter though.\n\t     * @returns {Promise}\n\t     */\n\t    ServiceWorker.getActiveClients = function () {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var windowClients, activeClients, _i, windowClients_1, client;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0: return [4 /*yield*/, self.clients.matchAll({ type: 'window', includeUncontrolled: true })];\n\t                    case 1:\n\t                        windowClients = _a.sent();\n\t                        activeClients = [];\n\t                        for (_i = 0, windowClients_1 = windowClients; _i < windowClients_1.length; _i++) {\n\t                            client = windowClients_1[_i];\n\t                            // Test if this window client is the HTTP subdomain iFrame pointing to subdomain.onesignal.com\n\t                            if (client.frameType && client.frameType === 'nested') {\n\t                                // Subdomain iFrames point to 'https://subdomain.onesignal.com...'\n\t                                if ((Environment_1.default.isDev() && !utils_1.contains(client.url, vars_1.DEV_FRAME_HOST)) ||\n\t                                    !Environment_1.default.isDev() && !utils_1.contains(client.url, '.onesignal.com') ||\n\t                                    Environment_1.default.isStaging() && !utils_1.contains(client.url, vars_1.STAGING_FRAME_HOST)) {\n\t                                    continue;\n\t                                }\n\t                                // Indicates this window client is an HTTP subdomain iFrame\n\t                                client.isSubdomainIframe = true;\n\t                            }\n\t                            activeClients.push(client);\n\t                        }\n\t                        return [2 /*return*/, activeClients];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Constructs a structured notification object from the raw notification fetched from OneSignal's server. This\n\t     * object is passed around from event to event, and is also returned to the host page for notification event details.\n\t     * Constructed in onPushReceived, and passed along to other event handlers.\n\t     * @param rawNotification The raw notification JSON returned from OneSignal's server.\n\t     */\n\t    ServiceWorker.buildStructuredNotificationObject = function (rawNotification) {\n\t        var notification = {\n\t            id: rawNotification.custom.i,\n\t            heading: rawNotification.title,\n\t            content: rawNotification.alert,\n\t            data: rawNotification.custom.a,\n\t            url: rawNotification.custom.u,\n\t            icon: rawNotification.icon\n\t        };\n\t        // Add action buttons\n\t        if (rawNotification.o) {\n\t            notification.buttons = [];\n\t            for (var _i = 0, _a = rawNotification.o; _i < _a.length; _i++) {\n\t                var rawButton = _a[_i];\n\t                notification.buttons.push({\n\t                    action: rawButton.i,\n\t                    title: rawButton.n,\n\t                    icon: rawButton.p,\n\t                    url: rawButton.u\n\t                });\n\t            }\n\t        }\n\t        return utils_1.trimUndefined(notification);\n\t    };\n\t    /**\n\t     * Given an image URL, returns a proxied HTTPS image using the https://images.weserv.nl service.\n\t     * For a null image, returns null so that no icon is displayed.\n\t     * If the image protocol is HTTPS, or origin contains localhost or starts with 192.168.*.*, we do not proxy the image.\n\t     * @param imageUrl An HTTP or HTTPS image URL.\n\t     */\n\t    ServiceWorker.ensureImageResourceHttps = function (imageUrl) {\n\t        if (imageUrl) {\n\t            try {\n\t                var parsedImageUrl = new URL(imageUrl);\n\t                if (parsedImageUrl.hostname === 'localhost' ||\n\t                    parsedImageUrl.hostname.indexOf('192.168') !== -1 ||\n\t                    parsedImageUrl.hostname === '127.0.0.1' ||\n\t                    parsedImageUrl.protocol === 'https:') {\n\t                    return imageUrl;\n\t                }\n\t                if (parsedImageUrl.hostname === 'i0.wp.com' ||\n\t                    parsedImageUrl.hostname === 'i1.wp.com' ||\n\t                    parsedImageUrl.hostname === 'i2.wp.com' ||\n\t                    parsedImageUrl.hostname === 'i3.wp.com') {\n\t                    /* Their site already uses Jetpack, just make sure Jetpack is HTTPS */\n\t                    return \"https://\" + parsedImageUrl.hostname + parsedImageUrl.pathname;\n\t                }\n\t                /* HTTPS origin hosts can be used by prefixing the hostname with ssl: */\n\t                var replacedImageUrl = parsedImageUrl.host + parsedImageUrl.pathname;\n\t                return \"https://i0.wp.com/\" + replacedImageUrl;\n\t            }\n\t            catch (e) { }\n\t        }\n\t        else\n\t            return null;\n\t    };\n\t    /**\n\t     * Given a structured notification object, HTTPS-ifies the notification icon and action button icons, if they exist.\n\t     */\n\t    ServiceWorker.ensureNotificationResourcesHttps = function (notification) {\n\t        if (notification) {\n\t            if (notification.icon) {\n\t                notification.icon = ServiceWorker.ensureImageResourceHttps(notification.icon);\n\t            }\n\t            if (notification.buttons && notification.buttons.length > 0) {\n\t                for (var _i = 0, _a = notification.buttons; _i < _a.length; _i++) {\n\t                    var button = _a[_i];\n\t                    if (button.icon) {\n\t                        button.icon = ServiceWorker.ensureImageResourceHttps(button.icon);\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    };\n\t    /**\n\t     * Actually displays a visible notification to the user.\n\t     * Any event needing to display a notification calls this so that all the display options can be centralized here.\n\t     * @param notification A structured notification object.\n\t     */\n\t    ServiceWorker.displayNotification = function (notification, overrides) {\n\t        log.debug(\"Called %cdisplayNotification(\" + JSON.stringify(notification, null, 4) + \"):\", utils_1.getConsoleStyle('code'), notification);\n\t        return Promise.all([\n\t            // Use the default title if one isn't provided\n\t            ServiceWorker._getTitle(),\n\t            // Use the default icon if one isn't provided\n\t            Database_1.default.get('Options', 'defaultIcon'),\n\t            // Get option of whether we should leave notification displaying indefinitely\n\t            Database_1.default.get('Options', 'persistNotification'),\n\t            // Get app ID for tag value\n\t            Database_1.default.get('Ids', 'appId')\n\t        ])\n\t            .then(function (_a) {\n\t            var defaultTitle = _a[0], defaultIcon = _a[1], persistNotification = _a[2], appId = _a[3];\n\t            notification.heading = notification.heading ? notification.heading : defaultTitle;\n\t            notification.icon = notification.icon ? notification.icon : (defaultIcon ? defaultIcon : undefined);\n\t            var extra = {};\n\t            extra.tag = \"\" + appId;\n\t            extra.persistNotification = persistNotification;\n\t            // Allow overriding some values\n\t            if (!overrides)\n\t                overrides = {};\n\t            notification = objectAssign(notification, overrides);\n\t            ServiceWorker.ensureNotificationResourcesHttps(notification);\n\t            var notificationOptions = {\n\t                body: notification.content,\n\t                icon: notification.icon,\n\t                /*\n\t                 On Chrome 44+, use this property to store extra information which you can read back when the\n\t                 notification gets invoked from a notification click or dismissed event. We serialize the\n\t                 notification in the 'data' field and read it back in other events. See:\n\t                 https://developers.google.com/web/updates/2015/05/notifying-you-of-changes-to-notifications?hl=en\n\t                 */\n\t                data: notification,\n\t                /*\n\t                 On Chrome 48+, action buttons show below the message body of the notification. Clicking either\n\t                 button takes the user to a link. See:\n\t                 https://developers.google.com/web/updates/2016/01/notification-actions\n\t                 */\n\t                actions: notification.buttons,\n\t                /*\n\t                 Tags are any string value that groups notifications together. Two or notifications sharing a tag\n\t                 replace each other.\n\t                 */\n\t                tag: extra.tag,\n\t                /*\n\t                 On Chrome 47+ (desktop), notifications will be dismissed after 20 seconds unless requireInteraction\n\t                 is set to true. See:\n\t                 https://developers.google.com/web/updates/2015/10/notification-requireInteractiom\n\t                 */\n\t                requireInteraction: extra.persistNotification,\n\t                /*\n\t                 On Chrome 50+, by default notifications replacing identically-tagged notifications no longer\n\t                 vibrate/signal the user that a new notification has come in. This flag allows subsequent\n\t                 notifications to re-alert the user. See:\n\t                 https://developers.google.com/web/updates/2016/03/notifications\n\t                 */\n\t                renotify: true\n\t            };\n\t            return self.registration.showNotification(notification.heading, notificationOptions);\n\t        });\n\t    };\n\t    /**\n\t     * Stores the most recent notification into IndexedDB so that it can be shown as a backup if a notification fails\n\t     * to be displayed. This is to avoid Chrome's forced \"This site has been updated in the background\" message. See\n\t     * this post for more details: http://stackoverflow.com/a/35045513/555547.\n\t     * This is called every time is a push message is received so that the most recent message can be used as the\n\t     * backup notification.\n\t     * @param notification The most recent notification as a structured notification object.\n\t     */\n\t    ServiceWorker.updateBackupNotification = function (notification) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var isWelcomeNotification;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        isWelcomeNotification = notification.data && notification.data.__isOneSignalWelcomeNotification;\n\t                        // Don't save the welcome notification, that just looks broken\n\t                        if (isWelcomeNotification)\n\t                            return [2 /*return*/];\n\t                        return [4 /*yield*/, Database_1.default.put('Ids', { type: 'backupNotification', id: notification })];\n\t                    case 1:\n\t                        _a.sent();\n\t                        return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Displays a fail-safe notification during a push event in case notification contents could not be retrieved.\n\t     * This is to avoid Chrome's forced \"This site has been updated in the background\" message. See this post for\n\t     * more details: http://stackoverflow.com/a/35045513/555547.\n\t     */\n\t    ServiceWorker.displayBackupNotification = function () {\n\t        return Database_1.default.get('Ids', 'backupNotification')\n\t            .then(function (backupNotification) {\n\t            var overrides = {\n\t                // Don't persist our backup notification; users should ideally not see them\n\t                persistNotification: false,\n\t                data: { __isOneSignalBackupNotification: true }\n\t            };\n\t            if (backupNotification) {\n\t                return ServiceWorker.displayNotification(backupNotification, overrides);\n\t            }\n\t            else {\n\t                return ServiceWorker.displayNotification({\n\t                    content: 'You have new updates.'\n\t                }, overrides);\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Returns false if the given URL matches a few special URLs designed to skip opening a URL when clicking a\n\t     * notification. Otherwise returns true and the link will be opened.\n\t     * @param url\n\t       */\n\t    ServiceWorker.shouldOpenNotificationUrl = function (url) {\n\t        return (url !== 'javascript:void(0);' &&\n\t            url !== 'do_not_open' &&\n\t            !utils_1.contains(url, '_osp=do_not_open'));\n\t    };\n\t    /**\n\t     * Occurs when a notification is dismissed by the user (clicking the 'X') or all notifications are cleared.\n\t     * Supported on: Chrome 50+ only\n\t     */\n\t    ServiceWorker.onNotificationClosed = function (event) {\n\t        log.debug(\"Called %conNotificationClosed(\" + JSON.stringify(event, null, 4) + \"):\", utils_1.getConsoleStyle('code'), event);\n\t        var notification = event.notification.data;\n\t        swivel.broadcast('notification.dismissed', notification);\n\t        event.waitUntil(ServiceWorker.executeWebhooks('notification.dismissed', notification));\n\t    };\n\t    /**\n\t     * After clicking a notification, determines the URL to open based on whether an action button was clicked or the\n\t     * notification body was clicked.\n\t     */\n\t    ServiceWorker.getNotificationUrlToOpen = function (notification) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var launchUrl, dbDefaultNotificationUrl, _i, _a, button;\n\t            return __generator(this, function (_b) {\n\t                switch (_b.label) {\n\t                    case 0:\n\t                        launchUrl = self.registration.scope;\n\t                        return [4 /*yield*/, Database_1.default.getAppState()];\n\t                    case 1:\n\t                        dbDefaultNotificationUrl = (_b.sent()).defaultNotificationUrl;\n\t                        if (dbDefaultNotificationUrl)\n\t                            launchUrl = dbDefaultNotificationUrl;\n\t                        // If the user clicked an action button, use the URL provided by the action button\n\t                        // Unless the action button URL is null\n\t                        if (notification.action) {\n\t                            // Find the URL tied to the action button that was clicked\n\t                            for (_i = 0, _a = notification.buttons; _i < _a.length; _i++) {\n\t                                button = _a[_i];\n\t                                if (button.action === notification.action &&\n\t                                    button.url &&\n\t                                    button.url !== '') {\n\t                                    launchUrl = button.url;\n\t                                }\n\t                            }\n\t                        }\n\t                        else if (notification.url &&\n\t                            notification.url !== '') {\n\t                            // The user clicked the notification body instead of an action button\n\t                            launchUrl = notification.url;\n\t                        }\n\t                        return [2 /*return*/, launchUrl];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Occurs when the notification's body or action buttons are clicked. Does not occur if the notification is\n\t     * dismissed by clicking the 'X' icon. See the notification close event for the dismissal event.\n\t     */\n\t    ServiceWorker.onNotificationClicked = function (event) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var notification, notificationClickHandlerMatch, matchPreference, activeClients, launchUrl, notificationOpensLink, doNotOpenLink, _i, activeClients_1, client, clientUrl, lastKnownHostUrl, clientOrigin, launchOrigin, appId, deviceId;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        log.debug(\"Called %conNotificationClicked(\" + JSON.stringify(event, null, 4) + \"):\", utils_1.getConsoleStyle('code'), event);\n\t                        // Close the notification first here, before we do anything that might fail\n\t                        event.notification.close();\n\t                        notification = event.notification.data;\n\t                        // Chrome 48+: Get the action button that was clicked\n\t                        if (event.action)\n\t                            notification.action = event.action;\n\t                        notificationClickHandlerMatch = 'exact';\n\t                        return [4 /*yield*/, Database_1.default.get('Options', 'notificationClickHandlerMatch')];\n\t                    case 1:\n\t                        matchPreference = _a.sent();\n\t                        if (matchPreference)\n\t                            notificationClickHandlerMatch = matchPreference;\n\t                        return [4 /*yield*/, ServiceWorker.getActiveClients()];\n\t                    case 2:\n\t                        activeClients = _a.sent();\n\t                        return [4 /*yield*/, ServiceWorker.getNotificationUrlToOpen(notification)];\n\t                    case 3:\n\t                        launchUrl = _a.sent();\n\t                        notificationOpensLink = ServiceWorker.shouldOpenNotificationUrl(launchUrl);\n\t                        doNotOpenLink = false;\n\t                        _i = 0, activeClients_1 = activeClients;\n\t                        _a.label = 4;\n\t                    case 4:\n\t                        if (!(_i < activeClients_1.length))\n\t                            return [3 /*break*/, 9];\n\t                        client = activeClients_1[_i];\n\t                        clientUrl = client.url;\n\t                        if (!client.isSubdomainIframe)\n\t                            return [3 /*break*/, 7];\n\t                        return [4 /*yield*/, Database_1.default.get('Options', 'lastKnownHostUrl')];\n\t                    case 5:\n\t                        lastKnownHostUrl = _a.sent();\n\t                        clientUrl = lastKnownHostUrl;\n\t                        if (!!lastKnownHostUrl)\n\t                            return [3 /*break*/, 7];\n\t                        return [4 /*yield*/, Database_1.default.get('Options', 'defaultUrl')];\n\t                    case 6:\n\t                        clientUrl = _a.sent();\n\t                        _a.label = 7;\n\t                    case 7:\n\t                        clientOrigin = '';\n\t                        try {\n\t                            clientOrigin = new URL(clientUrl).origin;\n\t                        }\n\t                        catch (e) {\n\t                            log.error(\"Failed to get the HTTP site's actual origin:\", e);\n\t                        }\n\t                        launchOrigin = null;\n\t                        try {\n\t                            // Check if the launchUrl is valid; it can be null\n\t                            launchOrigin = new URL(launchUrl).origin;\n\t                        }\n\t                        catch (e) {\n\t                        }\n\t                        if ((notificationClickHandlerMatch === 'exact' && clientUrl === launchUrl) ||\n\t                            (notificationClickHandlerMatch === 'origin' && clientOrigin === launchOrigin)) {\n\t                            client.focus();\n\t                            swivel.emit(client.id, 'notification.clicked', notification);\n\t                            doNotOpenLink = true;\n\t                        }\n\t                        _a.label = 8;\n\t                    case 8:\n\t                        _i++;\n\t                        return [3 /*break*/, 4];\n\t                    case 9: return [4 /*yield*/, Database_1.default.put(\"NotificationOpened\", { url: launchUrl, data: notification, timestamp: Date.now() })];\n\t                    case 10:\n\t                        _a.sent();\n\t                        if (!(notificationOpensLink && !doNotOpenLink))\n\t                            return [3 /*break*/, 12];\n\t                        return [4 /*yield*/, ServiceWorker.openUrl(launchUrl)];\n\t                    case 11:\n\t                        _a.sent();\n\t                        _a.label = 12;\n\t                    case 12: return [4 /*yield*/, Database_1.default.getAppConfig()];\n\t                    case 13:\n\t                        appId = (_a.sent()).appId;\n\t                        return [4 /*yield*/, Database_1.default.getSubscription()];\n\t                    case 14:\n\t                        deviceId = (_a.sent()).deviceId;\n\t                        if (!(appId && deviceId))\n\t                            return [3 /*break*/, 16];\n\t                        return [4 /*yield*/, OneSignalApi_1.default.put('notifications/' + notification.id, {\n\t                                app_id: appId,\n\t                                player_id: deviceId,\n\t                                opened: true\n\t                            })];\n\t                    case 15: return [2 /*return*/, _a.sent()];\n\t                    case 16: return [4 /*yield*/, ServiceWorker.executeWebhooks('notification.clicked', notification)];\n\t                    case 17: return [2 /*return*/, _a.sent()];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Attempts to open the given url in a new browser tab. Called when a notification is clicked.\n\t     * @param url May not be well-formed.\n\t     */\n\t    ServiceWorker.openUrl = function (url) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var e_1;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        log.debug('Opening notification URL:', url);\n\t                        _a.label = 1;\n\t                    case 1:\n\t                        _a.trys.push([1, 3, , 4]);\n\t                        return [4 /*yield*/, self.clients.openWindow(url)];\n\t                    case 2: return [2 /*return*/, _a.sent()];\n\t                    case 3:\n\t                        e_1 = _a.sent();\n\t                        log.warn(\"Failed to open the URL '\" + url + \"':\", e_1);\n\t                        return [3 /*break*/, 4];\n\t                    case 4: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    ServiceWorker.onServiceWorkerInstalled = function (event) {\n\t        // At this point, the old service worker is still in control\n\t        log.debug(\"Called %conServiceWorkerInstalled(\" + JSON.stringify(event, null, 4) + \"):\", utils_1.getConsoleStyle('code'), event);\n\t        log.info(\"Installing service worker: %c\" + self.location.pathname, utils_1.getConsoleStyle('code'), \"(version \" + (\"120050\") + \")\");\n\t        if (utils_1.contains(self.location.pathname, \"OneSignalSDKWorker.js\"))\n\t            var serviceWorkerVersionType = 'WORKER1_ONE_SIGNAL_SW_VERSION';\n\t        else\n\t            var serviceWorkerVersionType = 'WORKER2_ONE_SIGNAL_SW_VERSION';\n\t        event.waitUntil(Database_1.default.put(\"Ids\", { type: serviceWorkerVersionType, id: (\"120050\") })\n\t            .then(function () { return self.skipWaiting(); }));\n\t    };\n\t    /*\n\t     1/11/16: Enable the waiting service worker to immediately become the active service worker: https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting\n\t     */\n\t    ServiceWorker.onServiceWorkerActivated = function (event) {\n\t        // The old service worker is gone now\n\t        log.debug(\"Called %conServiceWorkerActivated(\" + JSON.stringify(event, null, 4) + \"):\", utils_1.getConsoleStyle('code'), event);\n\t        var activationPromise = self.clients.claim()\n\t            .then(function () { return Database_1.default.get('Ids', 'userId'); })\n\t            .then(function (userId) {\n\t            if (self.registration && userId) {\n\t                return ServiceWorker._subscribeForPush(self.registration).catch(function (e) { return log.error(e); });\n\t            }\n\t        });\n\t        event.waitUntil(activationPromise);\n\t    };\n\t    ServiceWorker.onFetch = function (event) {\n\t        event.respondWith(fetch(event.request));\n\t    };\n\t    ServiceWorker.onPushSubscriptionChange = function (event) {\n\t        // Subscription expired\n\t        log.debug(\"Called %conPushSubscriptionChange(\" + JSON.stringify(event, null, 4) + \"):\", utils_1.getConsoleStyle('code'), event);\n\t        event.waitUntil(ServiceWorker._subscribeForPush(self.registration));\n\t    };\n\t    /**\n\t     * Simulates a service worker event.\n\t     * @param eventName An event name like 'pushsubscriptionchange'.\n\t     */\n\t    ServiceWorker.simulateEvent = function (eventName) {\n\t        self.dispatchEvent(new ExtendableEvent(eventName));\n\t    };\n\t    ServiceWorker._subscribeForPush = function (serviceWorkerRegistration) {\n\t        log.debug(\"Called %c_subscribeForPush()\", utils_1.getConsoleStyle('code'));\n\t        var appId = null;\n\t        return Database_1.default.get('Ids', 'appId')\n\t            .then(function (retrievedAppId) {\n\t            appId = retrievedAppId;\n\t            return serviceWorkerRegistration.pushManager.getSubscription();\n\t        }).then(function (oldSubscription) {\n\t            log.debug(\"Resubscribing old subscription\", oldSubscription, \"within the service worker ...\");\n\t            // Only re-subscribe if there was an existing subscription and we are on Chrome 54+ wth PushSubscriptionOptions\n\t            // Otherwise there's really no way to resubscribe since we don't have the manifest.json sender ID\n\t            if (oldSubscription && oldSubscription.options) {\n\t                return serviceWorkerRegistration.pushManager.subscribe(oldSubscription.options);\n\t            }\n\t            else {\n\t                return Promise.resolve();\n\t            }\n\t        }).then(function (subscription) {\n\t            var subscriptionInfo = null;\n\t            if (subscription) {\n\t                subscriptionInfo = {};\n\t                log.debug(\"Finished resubscribing for push:\", subscription);\n\t                if (typeof subscription.subscriptionId != \"undefined\") {\n\t                    // Chrome 43 & 42\n\t                    subscriptionInfo.endpointOrToken = subscription.subscriptionId;\n\t                }\n\t                else {\n\t                    // Chrome 44+ and FireFox\n\t                    // 4/13/16: We now store the full endpoint instead of just the registration token\n\t                    subscriptionInfo.endpointOrToken = subscription.endpoint;\n\t                }\n\t                // 4/13/16: Retrieve p256dh and auth for new encrypted web push protocol in Chrome 50\n\t                if (subscription.getKey) {\n\t                    // p256dh and auth are both ArrayBuffer\n\t                    var p256dh = null;\n\t                    try {\n\t                        p256dh = subscription.getKey('p256dh');\n\t                    }\n\t                    catch (e) {\n\t                    }\n\t                    var auth = null;\n\t                    try {\n\t                        auth = subscription.getKey('auth');\n\t                    }\n\t                    catch (e) {\n\t                    }\n\t                    if (p256dh) {\n\t                        // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\n\t                        var p256dh_base64encoded = btoa(String.fromCharCode.apply(null, new Uint8Array(p256dh)));\n\t                        subscriptionInfo.p256dh = p256dh_base64encoded;\n\t                    }\n\t                    if (auth) {\n\t                        // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\n\t                        var auth_base64encoded = btoa(String.fromCharCode.apply(null, new Uint8Array(auth)));\n\t                        subscriptionInfo.auth = auth_base64encoded;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                log.info('Could not subscribe your browser for push notifications.');\n\t            }\n\t            return ServiceWorker.registerWithOneSignal(appId, subscriptionInfo);\n\t        });\n\t    };\n\t    /**\n\t     * Creates a new or updates an existing OneSignal user (player) on the server.\n\t     *\n\t     * @param appId The app ID passed to init.\n\t     *        subscriptionInfo A hash containing 'endpointOrToken', 'auth', and 'p256dh'.\n\t     *\n\t     * @remarks Called from both the host page and HTTP popup.\n\t     *          If a user already exists and is subscribed, updates the session count by calling /players/:id/on_session; otherwise, a new player is registered via the /players endpoint.\n\t     *          Saves the user ID and registration ID to the local web database after the response from OneSignal.\n\t     */\n\t    ServiceWorker.registerWithOneSignal = function (appId, subscriptionInfo) {\n\t        var deviceType = utils_1.getDeviceTypeForBrowser();\n\t        return Promise.all([\n\t            Database_1.default.get('Ids', 'userId'),\n\t        ])\n\t            .then(function (_a) {\n\t            var userId = _a[0], subscription = _a[1];\n\t            if (!userId) {\n\t                return Promise.reject('No user ID found; cannot update existing player info');\n\t            }\n\t            var requestUrl = \"players/\" + userId;\n\t            var requestData = {\n\t                app_id: appId,\n\t                device_type: deviceType,\n\t                language: Environment_1.default.getLanguage(),\n\t                timezone: new Date().getTimezoneOffset() * -60,\n\t                device_model: navigator.platform + \" \" + Browser.name,\n\t                device_os: Browser.version,\n\t                sdk: ServiceWorker.VERSION,\n\t            };\n\t            if (subscriptionInfo) {\n\t                requestData.identifier = subscriptionInfo.endpointOrToken;\n\t                // Although we're passing the full endpoint to OneSignal, we still need to store only the registration ID for our SDK API getRegistrationId()\n\t                // Parse out the registration ID from the full endpoint URL and save it to our database\n\t                var registrationId = subscriptionInfo.endpointOrToken.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\n\t                Database_1.default.put(\"Ids\", { type: \"registrationId\", id: registrationId });\n\t                // New web push standard in Firefox 46+ and Chrome 50+ includes 'auth' and 'p256dh' in PushSubscription\n\t                if (subscriptionInfo.auth) {\n\t                    requestData.web_auth = subscriptionInfo.auth;\n\t                }\n\t                if (subscriptionInfo.p256dh) {\n\t                    requestData.web_p256 = subscriptionInfo.p256dh;\n\t                }\n\t            }\n\t            return OneSignalApi_1.default.put(requestUrl, requestData);\n\t        })\n\t            .then(function (response) {\n\t            if (response) {\n\t                if (!response.success) {\n\t                    log.error('Resubscription registration with OneSignal failed:', response);\n\t                }\n\t                var userId = response.id;\n\t                if (userId) {\n\t                    Database_1.default.put(\"Ids\", { type: \"userId\", id: userId });\n\t                }\n\t            }\n\t            else {\n\t                // No user ID found, this returns undefined\n\t                log.debug('Resubscription registration failed because no user ID found.');\n\t            }\n\t        });\n\t    };\n\t    /**\n\t     * Returns a promise that is fulfilled with either the default title from the database (first priority) or the page title from the database (alternate result).\n\t     */\n\t    ServiceWorker._getTitle = function () {\n\t        return new Promise(function (resolve, reject) {\n\t            Promise.all([Database_1.default.get('Options', 'defaultTitle'), Database_1.default.get('Options', 'pageTitle')])\n\t                .then(function (_a) {\n\t                var defaultTitle = _a[0], pageTitle = _a[1];\n\t                if (defaultTitle !== null) {\n\t                    resolve(defaultTitle);\n\t                }\n\t                else if (pageTitle != null) {\n\t                    resolve(pageTitle);\n\t                }\n\t                else {\n\t                    resolve('');\n\t                }\n\t            });\n\t        });\n\t    };\n\t    /**\n\t     * Returns an array of raw notification objects, either fetched from the server (as from legacy GCM push), or read\n\t     * from the event.data.payload property (as from the new web push protocol).\n\t     * @param event\n\t     * @returns An array of notifications. The new web push protocol will only ever contain one notification, however\n\t     * an array is returned for backwards compatibility with the rest of the service worker plumbing.\n\t       */\n\t    ServiceWorker.parseOrFetchNotifications = function (event) {\n\t        if (event.data) {\n\t            var isValidPayload = ServiceWorker.isValidPushPayload(event.data);\n\t            if (isValidPayload) {\n\t                log.debug('Received a valid encrypted push payload.');\n\t                return Promise.resolve([event.data.json()]);\n\t            }\n\t            else {\n\t                return Promise.reject('Unexpected push message payload received: ' + event.data.text());\n\t            }\n\t        }\n\t        else\n\t            return ServiceWorker.retrieveNotifications();\n\t    };\n\t    /**\n\t     * Returns true if the raw data payload is a OneSignal push message in the format of the new web push protocol.\n\t     * Otherwise returns false.\n\t     * @param rawData The raw PushMessageData from the push event's event.data, not already parsed to JSON.\n\t     */\n\t    ServiceWorker.isValidPushPayload = function (rawData) {\n\t        try {\n\t            var payload = rawData.json();\n\t            if (payload &&\n\t                payload.custom &&\n\t                payload.custom.i &&\n\t                utils_1.isValidUuid(payload.custom.i)) {\n\t                return true;\n\t            }\n\t            else {\n\t                log.debug('isValidPushPayload: Valid JSON but missing notification UUID:', payload);\n\t                return false;\n\t            }\n\t        }\n\t        catch (e) {\n\t            log.debug('isValidPushPayload: Parsing to JSON failed with:', e);\n\t            return false;\n\t        }\n\t    };\n\t    /**\n\t     * Retrieves unread notifications from OneSignal's servers. For Chrome and Firefox's legacy web push protocol,\n\t     * a push signal is sent to the service worker without any message contents, and the service worker must retrieve\n\t     * the contents from OneSignal's servers. In Chrome and Firefox's new web push protocols involving payloads, the\n\t     * notification contents will arrive with the push signal. The legacy format must be supported for a while.\n\t     */\n\t    ServiceWorker.retrieveNotifications = function () {\n\t        return new Promise(function (resolve, reject) {\n\t            var notifications = [];\n\t            // Each entry is like:\n\t            /*\n\t             Object {custom: Object, icon: \"https://onesignal.com/images/notification_logo.png\", alert: \"asd\", title: \"ss\"}\n\t             alert: \"asd\"\n\t             custom: Object\n\t             i: \"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"\n\t             __proto__: Object\n\t             icon: \"https://onesignal.com/images/notification_logo.png\"\n\t             title: \"ss\"\n\t             __proto__: Object\n\t             */\n\t            Database_1.default.get('Ids', 'userId')\n\t                .then(function (userId) {\n\t                if (userId) {\n\t                    log.debug(\"Legacy push signal received, retrieving contents from players/\" + userId + \"/chromeweb_notification\");\n\t                    return OneSignalApi_1.default.get(\"players/\" + userId + \"/chromeweb_notification\");\n\t                }\n\t                else {\n\t                    log.debug('Tried to get notification contents, but IndexedDB is missing user ID info.');\n\t                    return Promise.all([\n\t                        Database_1.default.get('Ids', 'appId'),\n\t                        self.registration.pushManager.getSubscription().then(function (subscription) { return subscription.endpoint; })\n\t                    ])\n\t                        .then(function (_a) {\n\t                        var appId = _a[0], identifier = _a[1];\n\t                        var deviceType = utils_1.getDeviceTypeForBrowser();\n\t                        // Get the user ID from OneSignal\n\t                        return OneSignalApi_1.default.getUserIdFromSubscriptionIdentifier(appId, deviceType, identifier).then(function (recoveredUserId) {\n\t                            if (recoveredUserId) {\n\t                                log.debug('Recovered OneSignal user ID:', recoveredUserId);\n\t                                // We now have our OneSignal user ID again\n\t                                return Promise.all([\n\t                                    Database_1.default.put('Ids', { type: 'userId', id: recoveredUserId }),\n\t                                    Database_1.default.put('Ids', {\n\t                                        type: 'registrationId',\n\t                                        id: identifier.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\")\n\t                                    }),\n\t                                ]).then(function () {\n\t                                    // Try getting the notification again\n\t                                    log.debug('Attempting to retrieve the notification again now with a recovered user ID.');\n\t                                    return OneSignalApi_1.default.get(\"players/\" + recoveredUserId + \"/chromeweb_notification\");\n\t                                });\n\t                            }\n\t                            else {\n\t                                return Promise.reject('Recovered user ID was null. Unsubscribing from push notifications.');\n\t                            }\n\t                        });\n\t                    })\n\t                        .catch(function (error) {\n\t                        log.debug('Unsuccessfully attempted to recover OneSignal user ID:', error);\n\t                        // Actually unsubscribe from push so this user doesn't get bothered again\n\t                        return self.registration.pushManager.getSubscription()\n\t                            .then(function (subscription) {\n\t                            return subscription.unsubscribe();\n\t                        })\n\t                            .then(function (unsubscriptionResult) {\n\t                            log.debug('Unsubscribed from push notifications result:', unsubscriptionResult);\n\t                            ServiceWorker.UNSUBSCRIBED_FROM_NOTIFICATIONS = true;\n\t                        });\n\t                    });\n\t                }\n\t            })\n\t                .then(function (response) {\n\t                // The response is an array literal -- response.json() has been called by apiCall()\n\t                // The result looks like this:\n\t                // OneSignalApi.get('players/7442a553-5f61-4b3e-aedd-bb574ef6946f/chromeweb_notification').then(function(response) { log.debug(response); });\n\t                // [\"{\"custom\":{\"i\":\"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"},\"icon\":\"https://onesignal.com/images/notification_logo.png\",\"alert\":\"asd\",\"title\":\"ss\"}\"]\n\t                // ^ Notice this is an array literal with JSON data inside\n\t                for (var i = 0; i < response.length; i++) {\n\t                    notifications.push(JSON.parse(response[i]));\n\t                }\n\t                if (notifications.length == 0) {\n\t                    log.warn('OneSignal Worker: Received a GCM push signal, but there were no messages to retrieve. Are you' +\n\t                        ' using the wrong API URL?', vars_1.API_URL);\n\t                }\n\t                resolve(notifications);\n\t            });\n\t        });\n\t    };\n\t    return ServiceWorker;\n\t}());\n\t// Expose this class to the global scope\n\tself.OneSignalWorker = ServiceWorker;\n\t// Set logging to the appropriate level\n\tlog.setDefaultLevel( false ? log.levels.TRACE : log.levels.ERROR);\n\t// Print it's happy time!\n\tlog.info(\"%cOneSignal Service Worker loaded (version \" + (\"120050\") + \", \" + Environment_1.default.getEnv() + \" environment).\", utils_1.getConsoleStyle('bold'));\n\t// Run our main file\n\tServiceWorker.run();\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(25)))\n\n/***/ },\n/* 59 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\tvar ValidatorUtils = (function () {\n\t    function ValidatorUtils() {\n\t    }\n\t    ValidatorUtils.isValidUrl = function (url, options) {\n\t        if (options && options.allowNull && url === null)\n\t            return true;\n\t        else if (options && options.allowEmpty && (url === null || url === undefined))\n\t            return true;\n\t        else {\n\t            try {\n\t                var parsedUrl = new URL(url);\n\t                if (options && options.requireHttps) {\n\t                    return parsedUrl.protocol === 'https:';\n\t                }\n\t                else\n\t                    return true;\n\t            }\n\t            catch (e) {\n\t                return false;\n\t            }\n\t        }\n\t    };\n\t    ValidatorUtils.isValidBoolean = function (bool, options) {\n\t        if (options && options.allowNull && bool === null)\n\t            return true;\n\t        else\n\t            return bool === true || bool === false;\n\t    };\n\t    ValidatorUtils.isValidArray = function (array, options) {\n\t        if (options && options.allowNull && array === null)\n\t            return true;\n\t        else if (options && options.allowEmpty && (array === null || array === undefined))\n\t            return true;\n\t        else\n\t            return array instanceof Array;\n\t    };\n\t    return ValidatorUtils;\n\t}());\n\texports.ValidatorUtils = ValidatorUtils;\n\n\n/***/ },\n/* 60 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar ticky = __webpack_require__(74);\n\t\n\tmodule.exports = function debounce (fn, args, ctx) {\n\t  if (!fn) { return; }\n\t  ticky(function run () {\n\t    fn.apply(ctx || null, args || []);\n\t  });\n\t};\n\n\n/***/ },\n/* 61 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(24)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"/*!\\n* CleanSlate\\n*   github.com/premasagar/cleanslate\\n*\\n*/.onesignal-reset,.onesignal-reset a,.onesignal-reset abbr,.onesignal-reset acronym,.onesignal-reset address,.onesignal-reset applet,.onesignal-reset area,.onesignal-reset article,.onesignal-reset aside,.onesignal-reset audio,.onesignal-reset b,.onesignal-reset big,.onesignal-reset blockquote,.onesignal-reset button,.onesignal-reset canvas,.onesignal-reset caption,.onesignal-reset cite,.onesignal-reset code,.onesignal-reset col,.onesignal-reset colgroup,.onesignal-reset datalist,.onesignal-reset dd,.onesignal-reset del,.onesignal-reset dfn,.onesignal-reset div,.onesignal-reset dl,.onesignal-reset dt,.onesignal-reset em,.onesignal-reset fieldset,.onesignal-reset figcaption,.onesignal-reset figure,.onesignal-reset footer,.onesignal-reset form,.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6,.onesignal-reset header,.onesignal-reset hr,.onesignal-reset i,.onesignal-reset iframe,.onesignal-reset img,.onesignal-reset input,.onesignal-reset ins,.onesignal-reset kbd,.onesignal-reset label,.onesignal-reset legend,.onesignal-reset li,.onesignal-reset main,.onesignal-reset map,.onesignal-reset mark,.onesignal-reset menu,.onesignal-reset meta,.onesignal-reset nav,.onesignal-reset object,.onesignal-reset ol,.onesignal-reset optgroup,.onesignal-reset option,.onesignal-reset output,.onesignal-reset p,.onesignal-reset pre,.onesignal-reset progress,.onesignal-reset q,.onesignal-reset samp,.onesignal-reset section,.onesignal-reset select,.onesignal-reset small,.onesignal-reset span,.onesignal-reset strike,.onesignal-reset strong,.onesignal-reset sub,.onesignal-reset summary,.onesignal-reset sup,.onesignal-reset table,.onesignal-reset tbody,.onesignal-reset td,.onesignal-reset textarea,.onesignal-reset tfoot,.onesignal-reset th,.onesignal-reset thead,.onesignal-reset time,.onesignal-reset tr,.onesignal-reset tt,.onesignal-reset ul,.onesignal-reset var,.onesignal-reset video{background-attachment:scroll;background-color:transparent;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#000;border:medium none currentColor;bottom:auto;clear:none;clip:auto;color:inherit;counter-increment:none;counter-reset:none;cursor:auto;direction:inherit;display:inline;float:none;font-family:inherit;font-size:inherit;font-style:inherit;font-variant:normal;font-weight:inherit;height:auto;left:auto;letter-spacing:normal;line-height:inherit;list-style-type:inherit;list-style-position:outside;list-style-image:none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;outline:medium none invert;overflow:visible;padding:0;position:static;quotes:\\\"\\\" \\\"\\\";right:auto;table-layout:auto;text-align:inherit;text-decoration:inherit;text-indent:0;text-transform:none;top:auto;unicode-bidi:normal;vertical-align:baseline;visibility:inherit;white-space:normal;width:auto;word-spacing:normal;z-index:auto;background-origin:padding-box;background-clip:border-box;background-size:auto;-o-border-image:none;border-image:none;border-radius:0;box-shadow:none;box-sizing:content-box;-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule:medium none #000;-moz-column-rule:medium none #000;column-rule:medium none #000;-webkit-column-span:1;-moz-column-span:1;column-span:1;-webkit-column-width:auto;-moz-column-width:auto;column-width:auto;-webkit-font-feature-settings:normal;font-feature-settings:normal;overflow-x:visible;overflow-y:visible;-webkit-hyphens:manual;-ms-hyphens:manual;hyphens:manual;-webkit-perspective:none;-ms-perspective:none;-o-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;-ms-perspective-origin:50% 50%;-o-perspective-origin:50% 50%;perspective-origin:50% 50%;-webkit-backface-visibility:visible;backface-visibility:visible;text-shadow:none;-webkit-transition:all 0s ease 0s;transition:all 0s ease 0s;-webkit-transform:none;transform:none;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transform-style:flat;transform-style:flat;word-break:normal}.onesignal-reset,.onesignal-reset address,.onesignal-reset article,.onesignal-reset audio,.onesignal-reset blockquote,.onesignal-reset caption,.onesignal-reset colgroup,.onesignal-reset dd,.onesignal-reset dialog,.onesignal-reset div,.onesignal-reset dl,.onesignal-reset dt,.onesignal-reset fieldset,.onesignal-reset figure,.onesignal-reset footer,.onesignal-reset form,.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6,.onesignal-reset header,.onesignal-reset hgroup,.onesignal-reset hr,.onesignal-reset main,.onesignal-reset menu,.onesignal-reset nav,.onesignal-reset ol,.onesignal-reset option,.onesignal-reset p,.onesignal-reset pre,.onesignal-reset progress,.onesignal-reset section,.onesignal-reset summary,.onesignal-reset ul,.onesignal-reset video{display:block}.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6{font-weight:700}.onesignal-reset h1{font-size:2em;padding:.67em 0}.onesignal-reset h2{font-size:1.5em;padding:.83em 0}.onesignal-reset h3{font-size:1.17em;padding:.83em 0}.onesignal-reset h4{font-size:1em}.onesignal-reset h5{font-size:.83em}.onesignal-reset p{margin:1em 0}.onesignal-reset table{display:table}.onesignal-reset thead{display:table-header-group}.onesignal-reset tbody{display:table-row-group}.onesignal-reset tfoot{display:table-footer-group}.onesignal-reset tr{display:table-row}.onesignal-reset td,.onesignal-reset th{display:table-cell;padding:2px}.onesignal-reset ol,.onesignal-reset ul{margin:1em 0}.onesignal-reset ol li,.onesignal-reset ol ol li,.onesignal-reset ol ol ol li,.onesignal-reset ol ol ul li,.onesignal-reset ol ul ul li,.onesignal-reset ul li,.onesignal-reset ul ol ol li,.onesignal-reset ul ul li,.onesignal-reset ul ul ol li,.onesignal-reset ul ul ul li{list-style-position:inside;margin-top:.08em}.onesignal-reset ol ol,.onesignal-reset ol ol ol,.onesignal-reset ol ol ul,.onesignal-reset ol ul,.onesignal-reset ol ul ul,.onesignal-reset ul ol,.onesignal-reset ul ol ol,.onesignal-reset ul ul,.onesignal-reset ul ul ol,.onesignal-reset ul ul ul{padding-left:40px;margin:0}.onesignal-reset nav ol,.onesignal-reset nav ul{list-style-type:none}.onesignal-reset menu,.onesignal-reset ul{list-style-type:disc}.onesignal-reset ol{list-style-type:decimal}.onesignal-reset menu menu,.onesignal-reset menu ul,.onesignal-reset ol menu,.onesignal-reset ol ul,.onesignal-reset ul menu,.onesignal-reset ul ul{list-style-type:circle}.onesignal-reset menu menu menu,.onesignal-reset menu menu ul,.onesignal-reset menu ol menu,.onesignal-reset menu ol ul,.onesignal-reset menu ul menu,.onesignal-reset menu ul ul,.onesignal-reset ol menu menu,.onesignal-reset ol menu ul,.onesignal-reset ol ol menu,.onesignal-reset ol ol ul,.onesignal-reset ol ul menu,.onesignal-reset ol ul ul,.onesignal-reset ul menu menu,.onesignal-reset ul menu ul,.onesignal-reset ul ol menu,.onesignal-reset ul ol ul,.onesignal-reset ul ul menu,.onesignal-reset ul ul ul{list-style-type:square}.onesignal-reset li{display:list-item;min-height:auto;min-width:auto;padding-left:20px}.onesignal-reset strong{font-weight:700}.onesignal-reset em{font-style:italic}.onesignal-reset code,.onesignal-reset kbd,.onesignal-reset pre,.onesignal-reset samp{font-family:monospace}.onesignal-reset a{color:blue;text-decoration:underline}.onesignal-reset a:visited{color:#529}.onesignal-reset a,.onesignal-reset a *,.onesignal-reset input[type=checkbox],.onesignal-reset input[type=radio],.onesignal-reset input[type=submit],.onesignal-reset select{cursor:pointer}.onesignal-reset button,.onesignal-reset input[type=submit]{text-align:center;padding:2px 6px 3px;border-radius:4px;text-decoration:none;font-family:arial,helvetica,sans-serif;font-size:small;-webkit-appearance:push-button;color:buttontext;border:1px solid #a6a6a6;background:#d3d3d3;background:#fff;background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fff),color-stop(100%,#ddd),color-stop(100%,#d1d1d1),color-stop(100%,#ddd));background:-webkit-linear-gradient(top,#fff,#ddd 100%,#d1d1d1 0,#ddd 0);background:linear-gradient(180deg,#fff 0,#ddd 100%,#d1d1d1 0,#ddd 0);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#dddddd',GradientType=0);-o-box-shadow:1px 1px 0 #eee;box-shadow:1px 1px 0 #eee;outline:initial}.onesignal-reset button{padding:1px 6px 2px;margin-right:5px}.onesignal-reset input[type=hidden]{display:none}.onesignal-reset textarea{-webkit-appearance:textarea;background:#fff;padding:2px;margin-left:4px;word-wrap:break-word;white-space:pre-wrap;font-size:11px;font-family:arial,helvetica,sans-serif;line-height:13px;resize:both}.onesignal-reset input,.onesignal-reset select,.onesignal-reset textarea{border:1px solid #ccc}.onesignal-reset select{font-size:11px;font-family:helvetica,arial,sans-serif;display:inline-block}.onesignal-reset input:focus,.onesignal-reset textarea:focus{outline:5px auto -webkit-focus-ring-color;outline:initial}.onesignal-reset input[type=text]{background:#fff;padding:1px;font-family:initial;font-size:small}.onesignal-reset input[type=checkbox],.onesignal-reset input[type=radio]{border:1px solid #2b2b2b;border-radius:4px;outline:intial}.onesignal-reset input[type=radio]{margin:2px 2px 3px}.onesignal-reset button:active,.onesignal-reset input[type=submit]:active{background:#3b679e;background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#3b679e),color-stop(50%,#2b88d9),color-stop(51%,#207cca),color-stop(100%,#7db9e8));background:-webkit-linear-gradient(top,#3b679e,#2b88d9 50%,#207cca 51%,#7db9e8);background:linear-gradient(180deg,#3b679e 0,#2b88d9 50%,#207cca 51%,#7db9e8);border-color:#5259b0}.onesignal-reset abbr[title],.onesignal-reset acronym[title],.onesignal-reset dfn[title]{cursor:help;border-bottom-width:1px;border-bottom-style:dotted}.onesignal-reset ins{background-color:#ff9;color:#000}.onesignal-reset del{text-decoration:line-through}.onesignal-reset blockquote,.onesignal-reset q{quotes:none}.onesignal-reset blockquote:after,.onesignal-reset blockquote:before,.onesignal-reset li:after,.onesignal-reset li:before,.onesignal-reset q:after,.onesignal-reset q:before{content:\\\"\\\"}.onesignal-reset input,.onesignal-reset select{vertical-align:middle}.onesignal-reset table{border-collapse:collapse;border-spacing:0}.onesignal-reset hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0}.onesignal-reset [dir=rtl]{direction:rtl}.onesignal-reset mark{background-color:#ff9;color:#000;font-style:italic;font-weight:700}.onesignal-reset menu{padding-left:40px;padding-top:8px}.onesignal-reset [hidden],.onesignal-reset template{display:none}.onesignal-reset abbr[title]{border-bottom:1px dotted}.onesignal-reset sub,.onesignal-reset sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.onesignal-reset sup{top:-.5em}.onesignal-reset sub{bottom:-.25em}.onesignal-reset img{border:0}.onesignal-reset figure{margin:0}.onesignal-reset textarea{overflow:auto;vertical-align:top}.onesignal-reset{font-size:medium;line-height:1;direction:ltr;text-align:left;text-align:start;font-family:Times New Roman,Times,serif;color:#000;font-style:normal;font-weight:400;text-decoration:none;list-style-type:disc}.onesignal-reset pre{white-space:pre}#onesignal-bell-container.onesignal-reset{z-index:2147483000;position:fixed}#onesignal-bell-container.onesignal-reset.onesignal-bell-container-bottom-left{bottom:0;left:0}#onesignal-bell-container.onesignal-reset.onesignal-bell-container-bottom-right{bottom:0;right:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:initial;position:absolute;z-index:2147483000;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;-webkit-transform:scale(.01) translateZ(0);transform:scale(.01) translateZ(0);opacity:0;-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left{bottom:20px;left:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm{-webkit-transform-origin:center center;transform-origin:center center;width:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{left:42px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{bottom:39px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{left:5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{left:7px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md{-webkit-transform-origin:center center;transform-origin:center center;width:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-message{left:61px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{bottom:58px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{left:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{left:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg{-webkit-transform-origin:center center;transform-origin:center center;width:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{left:81px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{bottom:78px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{left:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{left:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-badge{left:4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-message{-webkit-transform-origin:left center;transform-origin:left center}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-message:after{right:100%;border-right-color:#000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-button{left:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right{bottom:20px;right:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm{-webkit-transform-origin:center center;transform-origin:center center;width:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{right:42px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{bottom:39px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{right:5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{right:7px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md{-webkit-transform-origin:center center;transform-origin:center center;width:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-message{right:61px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{bottom:58px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{right:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{right:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg{-webkit-transform-origin:center center;transform-origin:center center;width:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{right:81px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{bottom:78px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{right:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{right:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-badge{right:4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-message{-webkit-transform-origin:right center;transform-origin:right center}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-message:after{left:100%;border-left-color:#000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-button{right:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button{position:absolute;bottom:0;border-radius:50%;-webkit-transition:border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;cursor:pointer;z-index:2147483000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button svg{width:100%;height:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button.onesignal-bell-launcher-button-hover{cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge{position:absolute;bottom:0;border-radius:50%;text-align:center;top:0;cursor:pointer;-webkit-filter:drop-shadow(0 2px 4px rgba(34,36,38,0));filter:drop-shadow(0 2px 4px rgba(34,36,38,0));-webkit-transition:border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;transition:border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;z-index:2147483400;opacity:0;-webkit-transform:scale(.01);transform:scale(.01);pointer-events:none}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge.onesignal-bell-launcher-badge-hover{cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge.onesignal-bell-launcher-badge-opened{opacity:1;-webkit-transform:scale(1);transform:scale(1)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message{position:absolute;color:#fff;background:#000;cursor:pointer;border-radius:5px;-webkit-transform:translateY(-50%) scaleX(0) translateZ(0);transform:translateY(-50%) scaleX(0) translateZ(0);opacity:0;pointer-events:none;-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;top:50%;z-index:2147481000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message:after{top:50%;border:solid transparent;content:\\\" \\\";height:0;width:0;position:absolute;pointer-events:none;border-color:transparent}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{z-index:2147482000;max-width:100%;white-space:nowrap;text-overflow:ellipsis}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message.onesignal-bell-launcher-message-opened{pointer-events:auto;opacity:1;-webkit-transform:translateY(-50%) scaleX(1) translateZ(0);transform:translateY(-50%) scaleX(1) translateZ(0)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog{cursor:pointer;position:absolute;background-color:#fff;border-radius:5px;border:1px solid rgba(0,0,0,.1);opacity:0;width:200px;-webkit-transform:scale(0) translateZ(0);transform:scale(0) translateZ(0);-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;z-index:2147481000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol{counter-reset:foo;display:table;border-spacing:.3em .75em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol>li{counter-increment:foo;display:table-row;margin-bottom:.75em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol>li:before{content:counter(foo) \\\".\\\";display:table-cell;text-align:right}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog:after,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog:before{top:100%;border:solid transparent;content:\\\" \\\";height:0;width:0;position:absolute}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{z-index:2147482000;max-width:100%;white-space:nowrap;text-overflow:ellipsis;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog.onesignal-bell-launcher-dialog-opened{-webkit-transform:scale(1) translateZ(0);transform:scale(1) translateZ(0);opacity:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a{box-sizing:border-box;text-decoration:none;color:initial}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:focus,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:hover,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:hover:active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:visited{text-decoration:none;color:initial}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button{box-sizing:border-box;border:1px solid transparent;padding:.625em 1em;box-shadow:none;border-radius:4px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;letter-spacing:.65px;cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action{color:#fff;background:#e54b4d;width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover{background:#dd2022}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active{background:#b1191b}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm{height:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-button{width:32px;height:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-badge{font-size:8px;width:12px;height:12px;line-height:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{padding:9.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message:after{border-width:6.6px;margin-top:-6.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:6.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:8.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md{height:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-button{width:48px;height:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-badge{font-size:12px;width:18px;height:18px;line-height:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message{padding:14.4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message:after{border-width:9.9px;margin-top:-9.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:9.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:11.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg{height:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-button{width:64px;height:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-badge{font-size:12px;width:24px;height:24px;line-height:24px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{padding:19.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message:after{border-width:13.2px;margin-top:-13.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:13.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:15.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .background{fill:#e54b4d}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .foreground{fill:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .stroke{fill:none;stroke:#fff;stroke-width:3px;stroke-miterlimit:10}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button.onesignal-bell-launcher-badge-active svg .background,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button.onesignal-bell-launcher-button-active svg .background{fill:#dd2022!important}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button .pulse-ring{border:7px solid hsla(0,0%,100%,.4)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-badge{border:1px solid #fff;background:#000;color:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .background{fill:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .foreground{fill:#e54b4d}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .stroke{fill:none;stroke:#e54b4d;stroke-width:3px;stroke-miterlimit:10}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button.onesignal-bell-launcher-badge-active svg .background,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button.onesignal-bell-launcher-button-active svg .background{fill:#f2f2f2!important}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button .pulse-ring{border:7px solid rgba(229,75,77,.4)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-badge{border:1px solid #fff;background:#e54b4d;color:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-enabled{-webkit-transform:scale(1);transform:scale(1);opacity:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-disabled{visibility:hidden}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-inactive{opacity:.5}#onesignal-bell-container.onesignal-reset .pulse-ring{border-radius:50%;position:absolute;left:0;top:0;bottom:0;right:0;-webkit-animation:notifyButtonPulse .35s ease-in-out;animation:notifyButtonPulse .35s ease-in-out;-webkit-animation-iteration-count:1;animation-iteration-count:1;opacity:0;z-index:1000;pointer-events:none}@media print{#onesignal-bell-container{display:none}}@-webkit-keyframes notifyButtonPulse{0%{-webkit-transform:scale(.1);transform:scale(.1);opacity:0;border-width:10px}50%{opacity:1;border-width:5px}to{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0;border-width:1px}}@keyframes notifyButtonPulse{0%{-webkit-transform:scale(.1);transform:scale(.1);opacity:0;border-width:10px}50%{opacity:1;border-width:5px}to{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0;border-width:1px}}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 62 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(24)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"#onesignal-modal-container{font-size:14px;position:fixed;top:0;left:0;right:0;bottom:0;z-index:2258594000;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(51,51,51,.2);-webkit-font-smoothing:initial;padding:2em}#onesignal-modal-container #onesignal-modal-dialog{width:600px;max-width:100%;box-sizing:border-box;margin:0 auto;box-shadow:0 0 20px 3px rgba(0,0,0,.22)!important;background:#fff!important;padding:0;border-bottom-left-radius:2px;border-bottom-right-radius:2px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}#onesignal-modal-container #onesignal-modal-dialog .modal-body{box-sizing:border-box;margin:0;padding-bottom:1.714em}#onesignal-modal-container #onesignal-modal-dialog .modal-body-icon{box-sizing:border-box;float:left;width:80px;height:80px;background-size:contain;background-position:0 0;background-repeat:no-repeat}#onesignal-modal-container #onesignal-modal-dialog .modal-body-icon.default-icon{background-size:initial;background-position:50% 0}#onesignal-modal-container #onesignal-modal-dialog .modal-body-message{box-sizing:border-box;text-align:center;width:100%;display:block;font-size:1.143em;padding:0 1.5em;line-height:1.45em;-o-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;font-weight:300;color:#666!important}#onesignal-modal-container #onesignal-modal-dialog .modal-body-title{background:#24a3f3;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:1em;text-align:center;font-size:1.4em;font-weight:300;color:#fff!important;margin-bottom:1.25em}#onesignal-modal-container #onesignal-modal-dialog .modal-exit{position:absolute;right:15px;top:15px;color:#fff;font-size:1.5em}#onesignal-modal-container #onesignal-modal-dialog button{box-sizing:border-box;display:inline-block;padding:.375rem 1rem;font-size:.9625em;font-weight:400;line-height:1.5;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;border-radius:.25rem;font-family:inherit;letter-spacing:.05em;-webkit-transition:background-color 75ms ease;transition:background-color 75ms ease;margin:0}#onesignal-modal-container #onesignal-modal-dialog .modal-button{padding:.714em 2em;font-size:1em;text-transform:uppercase;border-radius:2px;font-weight:400}#onesignal-modal-container #onesignal-modal-dialog .modal-button.primary{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 6px 0 rgba(0,0,0,.12);background:#24a3f3!important;color:#fff!important}#onesignal-modal-container #onesignal-modal-dialog .modal-button.primary:hover{background:#1e6ef2}#onesignal-modal-container #onesignal-modal-dialog .modal-button.primary:active{background:#0d5bdd}#onesignal-modal-container #onesignal-modal-dialog .modal-button.secondary{box-shadow:none;background:#fff!important;color:#4285f4!important}#onesignal-modal-container #onesignal-modal-dialog .modal-button.secondary:hover{color:#0e60e9}#onesignal-modal-container #onesignal-modal-dialog .modal-button.secondary:active{color:#083c92}#onesignal-modal-container #onesignal-modal-dialog .primary.modal-button+.secondary.modal-button{margin-right:.714em}#onesignal-modal-container #onesignal-modal-dialog .modal-footer{position:relative;margin:.571em;margin-bottom:1.15em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}#onesignal-modal-container #onesignal-modal-dialog .align-right{float:right}#onesignal-modal-container #onesignal-modal-dialog .clearfix{display:block}#onesignal-modal-container #onesignal-modal-dialog .clearfix:after{content:'';display:block;height:0;clear:both;visibility:hidden}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 63 */\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(24)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \"#onesignal-popover-container{font-size:14px;position:fixed;z-index:2258594000;left:0;right:0;-webkit-font-smoothing:initial}#onesignal-popover-container.slide-down{top:0}#onesignal-popover-container.slide-down.close-popover #onesignal-popover-dialog{-webkit-animation-name:slideDownExit;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:forwards;animation-name:slideDownExit;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:forwards}#onesignal-popover-container.slide-down #onesignal-popover-dialog{width:500px;-webkit-animation-name:slideDownEnter;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:forwards;animation-name:slideDownEnter;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:forwards}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog{padding:1.714em;width:612px;margin-bottom:18px}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog #blocked-popover{display:block}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog #normal-popover{display:none}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-body-message{padding:0 .2em;text-align:center;width:100%}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-body-message img{width:100%}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-body-message .unblock-image{margin:2em 0 .5em}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-button.secondary{padding:.714em 2em}#onesignal-popover-container #blocked-popover{display:none}#onesignal-popover-container.slide-up{bottom:0}#onesignal-popover-container.slide-up.close-popover #onesignal-popover-dialog{-webkit-animation-name:slideUpExit;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:forwards;animation-name:slideUpExit;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:forwards}#onesignal-popover-container.slide-up #onesignal-popover-dialog{width:100%;-webkit-animation-name:slideUpEnter;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:backwards;animation-name:slideUpEnter;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:backwards}#onesignal-popover-container #onesignal-popover-dialog{box-sizing:border-box;max-width:100%;margin:0 auto;box-shadow:0 0 20px 3px rgba(0,0,0,.22)!important;background:#fff!important;padding:1.286em;border-bottom-left-radius:2px;border-bottom-right-radius:2px;font-family:Roboto,Noto,Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-popover-container #onesignal-popover-dialog .popover-body{box-sizing:border-box;margin:0}#onesignal-popover-container #onesignal-popover-dialog .popover-body-icon{box-sizing:border-box;float:left;width:80px;height:80px;background-size:contain;background-position:0 0;background-repeat:no-repeat}#onesignal-popover-container #onesignal-popover-dialog .popover-body-icon.default-icon{background-size:initial;background-position:50% 0}#onesignal-popover-container #onesignal-popover-dialog .popover-body-message{box-sizing:border-box;padding:0 .2em 0 1.286em;float:left;width:calc(100% - 80px);font-size:1.143em;line-height:1.45em;-o-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;color:#666!important}#onesignal-popover-container #onesignal-popover-dialog button{box-sizing:border-box;display:inline-block;padding:.375rem 1rem;font-size:.9625em;font-weight:400;line-height:1.5;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;border-radius:.25rem;font-family:inherit;letter-spacing:.05em;-webkit-transition:background-color 75ms ease;transition:background-color 75ms ease;margin:0}#onesignal-popover-container #onesignal-popover-dialog .popover-button{padding:.714em 2em;font-size:1em;text-transform:uppercase;border-radius:2px;font-weight:400}#onesignal-popover-container #onesignal-popover-dialog .popover-button.primary{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 6px 0 rgba(0,0,0,.12);background:#4285f4!important;color:#fff!important}#onesignal-popover-container #onesignal-popover-dialog .popover-button.primary:hover{background:#1e6ef2}#onesignal-popover-container #onesignal-popover-dialog .popover-button.primary:active{background:#0d5bdd}#onesignal-popover-container #onesignal-popover-dialog .popover-button.secondary{box-shadow:none;background:#fff!important;color:#4285f4!important}#onesignal-popover-container #onesignal-popover-dialog .popover-button.secondary:hover{color:#0e60e9}#onesignal-popover-container #onesignal-popover-dialog .popover-button.secondary:active{color:#083c92}#onesignal-popover-container #onesignal-popover-dialog .primary.popover-button+.secondary.popover-button{margin-right:.714em}#onesignal-popover-container #onesignal-popover-dialog .popover-footer{position:relative;margin:.25em .25em 0 0}#onesignal-popover-container #onesignal-popover-dialog .align-right{float:right}#onesignal-popover-container #onesignal-popover-dialog .clearfix{display:block;-webkit-backface-visibility:initial!important;backface-visibility:initial!important}#onesignal-popover-container #onesignal-popover-dialog .clearfix:after{content:'';display:block;height:0;clear:both;visibility:hidden}@-webkit-keyframes slideDownEnter{0%{-webkit-transform:translateY(-150%)}to{-webkit-transform:translateY(0)}}@keyframes slideDownEnter{0%{-webkit-transform:translateY(-150%);transform:translateY(-150%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes slideDownExit{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(-150%)}}@keyframes slideDownExit{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(-150%);transform:translateY(-150%)}}@-webkit-keyframes slideUpEnter{0%{-webkit-transform:translateY(150%)}to{-webkit-transform:translateY(0)}}@keyframes slideUpEnter{0%{-webkit-transform:translateY(150%);transform:translateY(150%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes slideUpExit{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(150%)}}@keyframes slideUpExit{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(150%);transform:translateY(150%)}}\", \"\"]);\n\t\n\t// exports\n\n\n/***/ },\n/* 64 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tfunction _extendableBuiltin(cls) {\n\t  function ExtendableBuiltin() {\n\t    cls.apply(this, arguments);\n\t  }\n\t\n\t  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n\t    constructor: {\n\t      value: cls,\n\t      enumerable: false,\n\t      writable: true,\n\t      configurable: true\n\t    }\n\t  });\n\t\n\t  if (Object.setPrototypeOf) {\n\t    Object.setPrototypeOf(ExtendableBuiltin, cls);\n\t  } else {\n\t    ExtendableBuiltin.__proto__ = cls;\n\t  }\n\t\n\t  return ExtendableBuiltin;\n\t}\n\t\n\tvar ExtendableError = function (_extendableBuiltin2) {\n\t  _inherits(ExtendableError, _extendableBuiltin2);\n\t\n\t  function ExtendableError() {\n\t    var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\t\n\t    _classCallCheck(this, ExtendableError);\n\t\n\t    // extending Error is weird and does not propagate `message`\n\t    var _this = _possibleConstructorReturn(this, (ExtendableError.__proto__ || Object.getPrototypeOf(ExtendableError)).call(this, message));\n\t\n\t    Object.defineProperty(_this, 'message', {\n\t      configurable: true,\n\t      enumerable: false,\n\t      value: message,\n\t      writable: true\n\t    });\n\t\n\t    Object.defineProperty(_this, 'name', {\n\t      configurable: true,\n\t      enumerable: false,\n\t      value: _this.constructor.name,\n\t      writable: true\n\t    });\n\t\n\t    if (Error.hasOwnProperty('captureStackTrace')) {\n\t      Error.captureStackTrace(_this, _this.constructor);\n\t      return _possibleConstructorReturn(_this);\n\t    }\n\t\n\t    Object.defineProperty(_this, 'stack', {\n\t      configurable: true,\n\t      enumerable: false,\n\t      value: new Error(message).stack,\n\t      writable: true\n\t    });\n\t    return _this;\n\t  }\n\t\n\t  return ExtendableError;\n\t}(_extendableBuiltin(Error));\n\t\n\texports.default = ExtendableError;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 65 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar require;/* WEBPACK VAR INJECTION */(function(process, global) {/*!\n\t * @overview es6-promise - a tiny implementation of Promises/A+.\n\t * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n\t * @license   Licensed under MIT license\n\t *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n\t * @version   4.0.5\n\t */\n\t\n\t(function (global, factory) {\n\t     true ? module.exports = factory() :\n\t    typeof define === 'function' && define.amd ? define(factory) :\n\t    (global.ES6Promise = factory());\n\t}(this, (function () { 'use strict';\n\t\n\tfunction objectOrFunction(x) {\n\t  return typeof x === 'function' || typeof x === 'object' && x !== null;\n\t}\n\t\n\tfunction isFunction(x) {\n\t  return typeof x === 'function';\n\t}\n\t\n\tvar _isArray = undefined;\n\tif (!Array.isArray) {\n\t  _isArray = function (x) {\n\t    return Object.prototype.toString.call(x) === '[object Array]';\n\t  };\n\t} else {\n\t  _isArray = Array.isArray;\n\t}\n\t\n\tvar isArray = _isArray;\n\t\n\tvar len = 0;\n\tvar vertxNext = undefined;\n\tvar customSchedulerFn = undefined;\n\t\n\tvar asap = function asap(callback, arg) {\n\t  queue[len] = callback;\n\t  queue[len + 1] = arg;\n\t  len += 2;\n\t  if (len === 2) {\n\t    // If len is 2, that means that we need to schedule an async flush.\n\t    // If additional callbacks are queued before the queue is flushed, they\n\t    // will be processed by this flush that we are scheduling.\n\t    if (customSchedulerFn) {\n\t      customSchedulerFn(flush);\n\t    } else {\n\t      scheduleFlush();\n\t    }\n\t  }\n\t};\n\t\n\tfunction setScheduler(scheduleFn) {\n\t  customSchedulerFn = scheduleFn;\n\t}\n\t\n\tfunction setAsap(asapFn) {\n\t  asap = asapFn;\n\t}\n\t\n\tvar browserWindow = typeof window !== 'undefined' ? window : undefined;\n\tvar browserGlobal = browserWindow || {};\n\tvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\n\tvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\t\n\t// test for web worker but not in IE10\n\tvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\t\n\t// node\n\tfunction useNextTick() {\n\t  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n\t  // see https://github.com/cujojs/when/issues/410 for details\n\t  return function () {\n\t    return process.nextTick(flush);\n\t  };\n\t}\n\t\n\t// vertx\n\tfunction useVertxTimer() {\n\t  if (typeof vertxNext !== 'undefined') {\n\t    return function () {\n\t      vertxNext(flush);\n\t    };\n\t  }\n\t\n\t  return useSetTimeout();\n\t}\n\t\n\tfunction useMutationObserver() {\n\t  var iterations = 0;\n\t  var observer = new BrowserMutationObserver(flush);\n\t  var node = document.createTextNode('');\n\t  observer.observe(node, { characterData: true });\n\t\n\t  return function () {\n\t    node.data = iterations = ++iterations % 2;\n\t  };\n\t}\n\t\n\t// web worker\n\tfunction useMessageChannel() {\n\t  var channel = new MessageChannel();\n\t  channel.port1.onmessage = flush;\n\t  return function () {\n\t    return channel.port2.postMessage(0);\n\t  };\n\t}\n\t\n\tfunction useSetTimeout() {\n\t  // Store setTimeout reference so es6-promise will be unaffected by\n\t  // other code modifying setTimeout (like sinon.useFakeTimers())\n\t  var globalSetTimeout = setTimeout;\n\t  return function () {\n\t    return globalSetTimeout(flush, 1);\n\t  };\n\t}\n\t\n\tvar queue = new Array(1000);\n\tfunction flush() {\n\t  for (var i = 0; i < len; i += 2) {\n\t    var callback = queue[i];\n\t    var arg = queue[i + 1];\n\t\n\t    callback(arg);\n\t\n\t    queue[i] = undefined;\n\t    queue[i + 1] = undefined;\n\t  }\n\t\n\t  len = 0;\n\t}\n\t\n\tfunction attemptVertx() {\n\t  try {\n\t    var r = require;\n\t    var vertx = __webpack_require__(76);\n\t    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n\t    return useVertxTimer();\n\t  } catch (e) {\n\t    return useSetTimeout();\n\t  }\n\t}\n\t\n\tvar scheduleFlush = undefined;\n\t// Decide what async method to use to triggering processing of queued callbacks:\n\tif (isNode) {\n\t  scheduleFlush = useNextTick();\n\t} else if (BrowserMutationObserver) {\n\t  scheduleFlush = useMutationObserver();\n\t} else if (isWorker) {\n\t  scheduleFlush = useMessageChannel();\n\t} else if (browserWindow === undefined && \"function\" === 'function') {\n\t  scheduleFlush = attemptVertx();\n\t} else {\n\t  scheduleFlush = useSetTimeout();\n\t}\n\t\n\tfunction then(onFulfillment, onRejection) {\n\t  var _arguments = arguments;\n\t\n\t  var parent = this;\n\t\n\t  var child = new this.constructor(noop);\n\t\n\t  if (child[PROMISE_ID] === undefined) {\n\t    makePromise(child);\n\t  }\n\t\n\t  var _state = parent._state;\n\t\n\t  if (_state) {\n\t    (function () {\n\t      var callback = _arguments[_state - 1];\n\t      asap(function () {\n\t        return invokeCallback(_state, child, callback, parent._result);\n\t      });\n\t    })();\n\t  } else {\n\t    subscribe(parent, child, onFulfillment, onRejection);\n\t  }\n\t\n\t  return child;\n\t}\n\t\n\t/**\n\t  `Promise.resolve` returns a promise that will become resolved with the\n\t  passed `value`. It is shorthand for the following:\n\t\n\t  ```javascript\n\t  let promise = new Promise(function(resolve, reject){\n\t    resolve(1);\n\t  });\n\t\n\t  promise.then(function(value){\n\t    // value === 1\n\t  });\n\t  ```\n\t\n\t  Instead of writing the above, your code now simply becomes the following:\n\t\n\t  ```javascript\n\t  let promise = Promise.resolve(1);\n\t\n\t  promise.then(function(value){\n\t    // value === 1\n\t  });\n\t  ```\n\t\n\t  @method resolve\n\t  @static\n\t  @param {Any} value value that the returned promise will be resolved with\n\t  Useful for tooling.\n\t  @return {Promise} a promise that will become fulfilled with the given\n\t  `value`\n\t*/\n\tfunction resolve(object) {\n\t  /*jshint validthis:true */\n\t  var Constructor = this;\n\t\n\t  if (object && typeof object === 'object' && object.constructor === Constructor) {\n\t    return object;\n\t  }\n\t\n\t  var promise = new Constructor(noop);\n\t  _resolve(promise, object);\n\t  return promise;\n\t}\n\t\n\tvar PROMISE_ID = Math.random().toString(36).substring(16);\n\t\n\tfunction noop() {}\n\t\n\tvar PENDING = void 0;\n\tvar FULFILLED = 1;\n\tvar REJECTED = 2;\n\t\n\tvar GET_THEN_ERROR = new ErrorObject();\n\t\n\tfunction selfFulfillment() {\n\t  return new TypeError(\"You cannot resolve a promise with itself\");\n\t}\n\t\n\tfunction cannotReturnOwn() {\n\t  return new TypeError('A promises callback cannot return that same promise.');\n\t}\n\t\n\tfunction getThen(promise) {\n\t  try {\n\t    return promise.then;\n\t  } catch (error) {\n\t    GET_THEN_ERROR.error = error;\n\t    return GET_THEN_ERROR;\n\t  }\n\t}\n\t\n\tfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n\t  try {\n\t    then.call(value, fulfillmentHandler, rejectionHandler);\n\t  } catch (e) {\n\t    return e;\n\t  }\n\t}\n\t\n\tfunction handleForeignThenable(promise, thenable, then) {\n\t  asap(function (promise) {\n\t    var sealed = false;\n\t    var error = tryThen(then, thenable, function (value) {\n\t      if (sealed) {\n\t        return;\n\t      }\n\t      sealed = true;\n\t      if (thenable !== value) {\n\t        _resolve(promise, value);\n\t      } else {\n\t        fulfill(promise, value);\n\t      }\n\t    }, function (reason) {\n\t      if (sealed) {\n\t        return;\n\t      }\n\t      sealed = true;\n\t\n\t      _reject(promise, reason);\n\t    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\t\n\t    if (!sealed && error) {\n\t      sealed = true;\n\t      _reject(promise, error);\n\t    }\n\t  }, promise);\n\t}\n\t\n\tfunction handleOwnThenable(promise, thenable) {\n\t  if (thenable._state === FULFILLED) {\n\t    fulfill(promise, thenable._result);\n\t  } else if (thenable._state === REJECTED) {\n\t    _reject(promise, thenable._result);\n\t  } else {\n\t    subscribe(thenable, undefined, function (value) {\n\t      return _resolve(promise, value);\n\t    }, function (reason) {\n\t      return _reject(promise, reason);\n\t    });\n\t  }\n\t}\n\t\n\tfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n\t  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n\t    handleOwnThenable(promise, maybeThenable);\n\t  } else {\n\t    if (then$$ === GET_THEN_ERROR) {\n\t      _reject(promise, GET_THEN_ERROR.error);\n\t    } else if (then$$ === undefined) {\n\t      fulfill(promise, maybeThenable);\n\t    } else if (isFunction(then$$)) {\n\t      handleForeignThenable(promise, maybeThenable, then$$);\n\t    } else {\n\t      fulfill(promise, maybeThenable);\n\t    }\n\t  }\n\t}\n\t\n\tfunction _resolve(promise, value) {\n\t  if (promise === value) {\n\t    _reject(promise, selfFulfillment());\n\t  } else if (objectOrFunction(value)) {\n\t    handleMaybeThenable(promise, value, getThen(value));\n\t  } else {\n\t    fulfill(promise, value);\n\t  }\n\t}\n\t\n\tfunction publishRejection(promise) {\n\t  if (promise._onerror) {\n\t    promise._onerror(promise._result);\n\t  }\n\t\n\t  publish(promise);\n\t}\n\t\n\tfunction fulfill(promise, value) {\n\t  if (promise._state !== PENDING) {\n\t    return;\n\t  }\n\t\n\t  promise._result = value;\n\t  promise._state = FULFILLED;\n\t\n\t  if (promise._subscribers.length !== 0) {\n\t    asap(publish, promise);\n\t  }\n\t}\n\t\n\tfunction _reject(promise, reason) {\n\t  if (promise._state !== PENDING) {\n\t    return;\n\t  }\n\t  promise._state = REJECTED;\n\t  promise._result = reason;\n\t\n\t  asap(publishRejection, promise);\n\t}\n\t\n\tfunction subscribe(parent, child, onFulfillment, onRejection) {\n\t  var _subscribers = parent._subscribers;\n\t  var length = _subscribers.length;\n\t\n\t  parent._onerror = null;\n\t\n\t  _subscribers[length] = child;\n\t  _subscribers[length + FULFILLED] = onFulfillment;\n\t  _subscribers[length + REJECTED] = onRejection;\n\t\n\t  if (length === 0 && parent._state) {\n\t    asap(publish, parent);\n\t  }\n\t}\n\t\n\tfunction publish(promise) {\n\t  var subscribers = promise._subscribers;\n\t  var settled = promise._state;\n\t\n\t  if (subscribers.length === 0) {\n\t    return;\n\t  }\n\t\n\t  var child = undefined,\n\t      callback = undefined,\n\t      detail = promise._result;\n\t\n\t  for (var i = 0; i < subscribers.length; i += 3) {\n\t    child = subscribers[i];\n\t    callback = subscribers[i + settled];\n\t\n\t    if (child) {\n\t      invokeCallback(settled, child, callback, detail);\n\t    } else {\n\t      callback(detail);\n\t    }\n\t  }\n\t\n\t  promise._subscribers.length = 0;\n\t}\n\t\n\tfunction ErrorObject() {\n\t  this.error = null;\n\t}\n\t\n\tvar TRY_CATCH_ERROR = new ErrorObject();\n\t\n\tfunction tryCatch(callback, detail) {\n\t  try {\n\t    return callback(detail);\n\t  } catch (e) {\n\t    TRY_CATCH_ERROR.error = e;\n\t    return TRY_CATCH_ERROR;\n\t  }\n\t}\n\t\n\tfunction invokeCallback(settled, promise, callback, detail) {\n\t  var hasCallback = isFunction(callback),\n\t      value = undefined,\n\t      error = undefined,\n\t      succeeded = undefined,\n\t      failed = undefined;\n\t\n\t  if (hasCallback) {\n\t    value = tryCatch(callback, detail);\n\t\n\t    if (value === TRY_CATCH_ERROR) {\n\t      failed = true;\n\t      error = value.error;\n\t      value = null;\n\t    } else {\n\t      succeeded = true;\n\t    }\n\t\n\t    if (promise === value) {\n\t      _reject(promise, cannotReturnOwn());\n\t      return;\n\t    }\n\t  } else {\n\t    value = detail;\n\t    succeeded = true;\n\t  }\n\t\n\t  if (promise._state !== PENDING) {\n\t    // noop\n\t  } else if (hasCallback && succeeded) {\n\t      _resolve(promise, value);\n\t    } else if (failed) {\n\t      _reject(promise, error);\n\t    } else if (settled === FULFILLED) {\n\t      fulfill(promise, value);\n\t    } else if (settled === REJECTED) {\n\t      _reject(promise, value);\n\t    }\n\t}\n\t\n\tfunction initializePromise(promise, resolver) {\n\t  try {\n\t    resolver(function resolvePromise(value) {\n\t      _resolve(promise, value);\n\t    }, function rejectPromise(reason) {\n\t      _reject(promise, reason);\n\t    });\n\t  } catch (e) {\n\t    _reject(promise, e);\n\t  }\n\t}\n\t\n\tvar id = 0;\n\tfunction nextId() {\n\t  return id++;\n\t}\n\t\n\tfunction makePromise(promise) {\n\t  promise[PROMISE_ID] = id++;\n\t  promise._state = undefined;\n\t  promise._result = undefined;\n\t  promise._subscribers = [];\n\t}\n\t\n\tfunction Enumerator(Constructor, input) {\n\t  this._instanceConstructor = Constructor;\n\t  this.promise = new Constructor(noop);\n\t\n\t  if (!this.promise[PROMISE_ID]) {\n\t    makePromise(this.promise);\n\t  }\n\t\n\t  if (isArray(input)) {\n\t    this._input = input;\n\t    this.length = input.length;\n\t    this._remaining = input.length;\n\t\n\t    this._result = new Array(this.length);\n\t\n\t    if (this.length === 0) {\n\t      fulfill(this.promise, this._result);\n\t    } else {\n\t      this.length = this.length || 0;\n\t      this._enumerate();\n\t      if (this._remaining === 0) {\n\t        fulfill(this.promise, this._result);\n\t      }\n\t    }\n\t  } else {\n\t    _reject(this.promise, validationError());\n\t  }\n\t}\n\t\n\tfunction validationError() {\n\t  return new Error('Array Methods must be provided an Array');\n\t};\n\t\n\tEnumerator.prototype._enumerate = function () {\n\t  var length = this.length;\n\t  var _input = this._input;\n\t\n\t  for (var i = 0; this._state === PENDING && i < length; i++) {\n\t    this._eachEntry(_input[i], i);\n\t  }\n\t};\n\t\n\tEnumerator.prototype._eachEntry = function (entry, i) {\n\t  var c = this._instanceConstructor;\n\t  var resolve$$ = c.resolve;\n\t\n\t  if (resolve$$ === resolve) {\n\t    var _then = getThen(entry);\n\t\n\t    if (_then === then && entry._state !== PENDING) {\n\t      this._settledAt(entry._state, i, entry._result);\n\t    } else if (typeof _then !== 'function') {\n\t      this._remaining--;\n\t      this._result[i] = entry;\n\t    } else if (c === Promise) {\n\t      var promise = new c(noop);\n\t      handleMaybeThenable(promise, entry, _then);\n\t      this._willSettleAt(promise, i);\n\t    } else {\n\t      this._willSettleAt(new c(function (resolve$$) {\n\t        return resolve$$(entry);\n\t      }), i);\n\t    }\n\t  } else {\n\t    this._willSettleAt(resolve$$(entry), i);\n\t  }\n\t};\n\t\n\tEnumerator.prototype._settledAt = function (state, i, value) {\n\t  var promise = this.promise;\n\t\n\t  if (promise._state === PENDING) {\n\t    this._remaining--;\n\t\n\t    if (state === REJECTED) {\n\t      _reject(promise, value);\n\t    } else {\n\t      this._result[i] = value;\n\t    }\n\t  }\n\t\n\t  if (this._remaining === 0) {\n\t    fulfill(promise, this._result);\n\t  }\n\t};\n\t\n\tEnumerator.prototype._willSettleAt = function (promise, i) {\n\t  var enumerator = this;\n\t\n\t  subscribe(promise, undefined, function (value) {\n\t    return enumerator._settledAt(FULFILLED, i, value);\n\t  }, function (reason) {\n\t    return enumerator._settledAt(REJECTED, i, reason);\n\t  });\n\t};\n\t\n\t/**\n\t  `Promise.all` accepts an array of promises, and returns a new promise which\n\t  is fulfilled with an array of fulfillment values for the passed promises, or\n\t  rejected with the reason of the first passed promise to be rejected. It casts all\n\t  elements of the passed iterable to promises as it runs this algorithm.\n\t\n\t  Example:\n\t\n\t  ```javascript\n\t  let promise1 = resolve(1);\n\t  let promise2 = resolve(2);\n\t  let promise3 = resolve(3);\n\t  let promises = [ promise1, promise2, promise3 ];\n\t\n\t  Promise.all(promises).then(function(array){\n\t    // The array here would be [ 1, 2, 3 ];\n\t  });\n\t  ```\n\t\n\t  If any of the `promises` given to `all` are rejected, the first promise\n\t  that is rejected will be given as an argument to the returned promises's\n\t  rejection handler. For example:\n\t\n\t  Example:\n\t\n\t  ```javascript\n\t  let promise1 = resolve(1);\n\t  let promise2 = reject(new Error(\"2\"));\n\t  let promise3 = reject(new Error(\"3\"));\n\t  let promises = [ promise1, promise2, promise3 ];\n\t\n\t  Promise.all(promises).then(function(array){\n\t    // Code here never runs because there are rejected promises!\n\t  }, function(error) {\n\t    // error.message === \"2\"\n\t  });\n\t  ```\n\t\n\t  @method all\n\t  @static\n\t  @param {Array} entries array of promises\n\t  @param {String} label optional string for labeling the promise.\n\t  Useful for tooling.\n\t  @return {Promise} promise that is fulfilled when all `promises` have been\n\t  fulfilled, or rejected if any of them become rejected.\n\t  @static\n\t*/\n\tfunction all(entries) {\n\t  return new Enumerator(this, entries).promise;\n\t}\n\t\n\t/**\n\t  `Promise.race` returns a new promise which is settled in the same way as the\n\t  first passed promise to settle.\n\t\n\t  Example:\n\t\n\t  ```javascript\n\t  let promise1 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      resolve('promise 1');\n\t    }, 200);\n\t  });\n\t\n\t  let promise2 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      resolve('promise 2');\n\t    }, 100);\n\t  });\n\t\n\t  Promise.race([promise1, promise2]).then(function(result){\n\t    // result === 'promise 2' because it was resolved before promise1\n\t    // was resolved.\n\t  });\n\t  ```\n\t\n\t  `Promise.race` is deterministic in that only the state of the first\n\t  settled promise matters. For example, even if other promises given to the\n\t  `promises` array argument are resolved, but the first settled promise has\n\t  become rejected before the other promises became fulfilled, the returned\n\t  promise will become rejected:\n\t\n\t  ```javascript\n\t  let promise1 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      resolve('promise 1');\n\t    }, 200);\n\t  });\n\t\n\t  let promise2 = new Promise(function(resolve, reject){\n\t    setTimeout(function(){\n\t      reject(new Error('promise 2'));\n\t    }, 100);\n\t  });\n\t\n\t  Promise.race([promise1, promise2]).then(function(result){\n\t    // Code here never runs\n\t  }, function(reason){\n\t    // reason.message === 'promise 2' because promise 2 became rejected before\n\t    // promise 1 became fulfilled\n\t  });\n\t  ```\n\t\n\t  An example real-world use case is implementing timeouts:\n\t\n\t  ```javascript\n\t  Promise.race([ajax('foo.json'), timeout(5000)])\n\t  ```\n\t\n\t  @method race\n\t  @static\n\t  @param {Array} promises array of promises to observe\n\t  Useful for tooling.\n\t  @return {Promise} a promise which settles in the same way as the first passed\n\t  promise to settle.\n\t*/\n\tfunction race(entries) {\n\t  /*jshint validthis:true */\n\t  var Constructor = this;\n\t\n\t  if (!isArray(entries)) {\n\t    return new Constructor(function (_, reject) {\n\t      return reject(new TypeError('You must pass an array to race.'));\n\t    });\n\t  } else {\n\t    return new Constructor(function (resolve, reject) {\n\t      var length = entries.length;\n\t      for (var i = 0; i < length; i++) {\n\t        Constructor.resolve(entries[i]).then(resolve, reject);\n\t      }\n\t    });\n\t  }\n\t}\n\t\n\t/**\n\t  `Promise.reject` returns a promise rejected with the passed `reason`.\n\t  It is shorthand for the following:\n\t\n\t  ```javascript\n\t  let promise = new Promise(function(resolve, reject){\n\t    reject(new Error('WHOOPS'));\n\t  });\n\t\n\t  promise.then(function(value){\n\t    // Code here doesn't run because the promise is rejected!\n\t  }, function(reason){\n\t    // reason.message === 'WHOOPS'\n\t  });\n\t  ```\n\t\n\t  Instead of writing the above, your code now simply becomes the following:\n\t\n\t  ```javascript\n\t  let promise = Promise.reject(new Error('WHOOPS'));\n\t\n\t  promise.then(function(value){\n\t    // Code here doesn't run because the promise is rejected!\n\t  }, function(reason){\n\t    // reason.message === 'WHOOPS'\n\t  });\n\t  ```\n\t\n\t  @method reject\n\t  @static\n\t  @param {Any} reason value that the returned promise will be rejected with.\n\t  Useful for tooling.\n\t  @return {Promise} a promise rejected with the given `reason`.\n\t*/\n\tfunction reject(reason) {\n\t  /*jshint validthis:true */\n\t  var Constructor = this;\n\t  var promise = new Constructor(noop);\n\t  _reject(promise, reason);\n\t  return promise;\n\t}\n\t\n\tfunction needsResolver() {\n\t  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n\t}\n\t\n\tfunction needsNew() {\n\t  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n\t}\n\t\n\t/**\n\t  Promise objects represent the eventual result of an asynchronous operation. The\n\t  primary way of interacting with a promise is through its `then` method, which\n\t  registers callbacks to receive either a promise's eventual value or the reason\n\t  why the promise cannot be fulfilled.\n\t\n\t  Terminology\n\t  -----------\n\t\n\t  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n\t  - `thenable` is an object or function that defines a `then` method.\n\t  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n\t  - `exception` is a value that is thrown using the throw statement.\n\t  - `reason` is a value that indicates why a promise was rejected.\n\t  - `settled` the final resting state of a promise, fulfilled or rejected.\n\t\n\t  A promise can be in one of three states: pending, fulfilled, or rejected.\n\t\n\t  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n\t  state.  Promises that are rejected have a rejection reason and are in the\n\t  rejected state.  A fulfillment value is never a thenable.\n\t\n\t  Promises can also be said to *resolve* a value.  If this value is also a\n\t  promise, then the original promise's settled state will match the value's\n\t  settled state.  So a promise that *resolves* a promise that rejects will\n\t  itself reject, and a promise that *resolves* a promise that fulfills will\n\t  itself fulfill.\n\t\n\t\n\t  Basic Usage:\n\t  ------------\n\t\n\t  ```js\n\t  let promise = new Promise(function(resolve, reject) {\n\t    // on success\n\t    resolve(value);\n\t\n\t    // on failure\n\t    reject(reason);\n\t  });\n\t\n\t  promise.then(function(value) {\n\t    // on fulfillment\n\t  }, function(reason) {\n\t    // on rejection\n\t  });\n\t  ```\n\t\n\t  Advanced Usage:\n\t  ---------------\n\t\n\t  Promises shine when abstracting away asynchronous interactions such as\n\t  `XMLHttpRequest`s.\n\t\n\t  ```js\n\t  function getJSON(url) {\n\t    return new Promise(function(resolve, reject){\n\t      let xhr = new XMLHttpRequest();\n\t\n\t      xhr.open('GET', url);\n\t      xhr.onreadystatechange = handler;\n\t      xhr.responseType = 'json';\n\t      xhr.setRequestHeader('Accept', 'application/json');\n\t      xhr.send();\n\t\n\t      function handler() {\n\t        if (this.readyState === this.DONE) {\n\t          if (this.status === 200) {\n\t            resolve(this.response);\n\t          } else {\n\t            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n\t          }\n\t        }\n\t      };\n\t    });\n\t  }\n\t\n\t  getJSON('/posts.json').then(function(json) {\n\t    // on fulfillment\n\t  }, function(reason) {\n\t    // on rejection\n\t  });\n\t  ```\n\t\n\t  Unlike callbacks, promises are great composable primitives.\n\t\n\t  ```js\n\t  Promise.all([\n\t    getJSON('/posts'),\n\t    getJSON('/comments')\n\t  ]).then(function(values){\n\t    values[0] // => postsJSON\n\t    values[1] // => commentsJSON\n\t\n\t    return values;\n\t  });\n\t  ```\n\t\n\t  @class Promise\n\t  @param {function} resolver\n\t  Useful for tooling.\n\t  @constructor\n\t*/\n\tfunction Promise(resolver) {\n\t  this[PROMISE_ID] = nextId();\n\t  this._result = this._state = undefined;\n\t  this._subscribers = [];\n\t\n\t  if (noop !== resolver) {\n\t    typeof resolver !== 'function' && needsResolver();\n\t    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n\t  }\n\t}\n\t\n\tPromise.all = all;\n\tPromise.race = race;\n\tPromise.resolve = resolve;\n\tPromise.reject = reject;\n\tPromise._setScheduler = setScheduler;\n\tPromise._setAsap = setAsap;\n\tPromise._asap = asap;\n\t\n\tPromise.prototype = {\n\t  constructor: Promise,\n\t\n\t  /**\n\t    The primary way of interacting with a promise is through its `then` method,\n\t    which registers callbacks to receive either a promise's eventual value or the\n\t    reason why the promise cannot be fulfilled.\n\t  \n\t    ```js\n\t    findUser().then(function(user){\n\t      // user is available\n\t    }, function(reason){\n\t      // user is unavailable, and you are given the reason why\n\t    });\n\t    ```\n\t  \n\t    Chaining\n\t    --------\n\t  \n\t    The return value of `then` is itself a promise.  This second, 'downstream'\n\t    promise is resolved with the return value of the first promise's fulfillment\n\t    or rejection handler, or rejected if the handler throws an exception.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      return user.name;\n\t    }, function (reason) {\n\t      return 'default name';\n\t    }).then(function (userName) {\n\t      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n\t      // will be `'default name'`\n\t    });\n\t  \n\t    findUser().then(function (user) {\n\t      throw new Error('Found user, but still unhappy');\n\t    }, function (reason) {\n\t      throw new Error('`findUser` rejected and we're unhappy');\n\t    }).then(function (value) {\n\t      // never reached\n\t    }, function (reason) {\n\t      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n\t      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n\t    });\n\t    ```\n\t    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      throw new PedagogicalException('Upstream error');\n\t    }).then(function (value) {\n\t      // never reached\n\t    }).then(function (value) {\n\t      // never reached\n\t    }, function (reason) {\n\t      // The `PedgagocialException` is propagated all the way down to here\n\t    });\n\t    ```\n\t  \n\t    Assimilation\n\t    ------------\n\t  \n\t    Sometimes the value you want to propagate to a downstream promise can only be\n\t    retrieved asynchronously. This can be achieved by returning a promise in the\n\t    fulfillment or rejection handler. The downstream promise will then be pending\n\t    until the returned promise is settled. This is called *assimilation*.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      return findCommentsByAuthor(user);\n\t    }).then(function (comments) {\n\t      // The user's comments are now available\n\t    });\n\t    ```\n\t  \n\t    If the assimliated promise rejects, then the downstream promise will also reject.\n\t  \n\t    ```js\n\t    findUser().then(function (user) {\n\t      return findCommentsByAuthor(user);\n\t    }).then(function (comments) {\n\t      // If `findCommentsByAuthor` fulfills, we'll have the value here\n\t    }, function (reason) {\n\t      // If `findCommentsByAuthor` rejects, we'll have the reason here\n\t    });\n\t    ```\n\t  \n\t    Simple Example\n\t    --------------\n\t  \n\t    Synchronous Example\n\t  \n\t    ```javascript\n\t    let result;\n\t  \n\t    try {\n\t      result = findResult();\n\t      // success\n\t    } catch(reason) {\n\t      // failure\n\t    }\n\t    ```\n\t  \n\t    Errback Example\n\t  \n\t    ```js\n\t    findResult(function(result, err){\n\t      if (err) {\n\t        // failure\n\t      } else {\n\t        // success\n\t      }\n\t    });\n\t    ```\n\t  \n\t    Promise Example;\n\t  \n\t    ```javascript\n\t    findResult().then(function(result){\n\t      // success\n\t    }, function(reason){\n\t      // failure\n\t    });\n\t    ```\n\t  \n\t    Advanced Example\n\t    --------------\n\t  \n\t    Synchronous Example\n\t  \n\t    ```javascript\n\t    let author, books;\n\t  \n\t    try {\n\t      author = findAuthor();\n\t      books  = findBooksByAuthor(author);\n\t      // success\n\t    } catch(reason) {\n\t      // failure\n\t    }\n\t    ```\n\t  \n\t    Errback Example\n\t  \n\t    ```js\n\t  \n\t    function foundBooks(books) {\n\t  \n\t    }\n\t  \n\t    function failure(reason) {\n\t  \n\t    }\n\t  \n\t    findAuthor(function(author, err){\n\t      if (err) {\n\t        failure(err);\n\t        // failure\n\t      } else {\n\t        try {\n\t          findBoooksByAuthor(author, function(books, err) {\n\t            if (err) {\n\t              failure(err);\n\t            } else {\n\t              try {\n\t                foundBooks(books);\n\t              } catch(reason) {\n\t                failure(reason);\n\t              }\n\t            }\n\t          });\n\t        } catch(error) {\n\t          failure(err);\n\t        }\n\t        // success\n\t      }\n\t    });\n\t    ```\n\t  \n\t    Promise Example;\n\t  \n\t    ```javascript\n\t    findAuthor().\n\t      then(findBooksByAuthor).\n\t      then(function(books){\n\t        // found books\n\t    }).catch(function(reason){\n\t      // something went wrong\n\t    });\n\t    ```\n\t  \n\t    @method then\n\t    @param {Function} onFulfilled\n\t    @param {Function} onRejected\n\t    Useful for tooling.\n\t    @return {Promise}\n\t  */\n\t  then: then,\n\t\n\t  /**\n\t    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n\t    as the catch block of a try/catch statement.\n\t  \n\t    ```js\n\t    function findAuthor(){\n\t      throw new Error('couldn't find that author');\n\t    }\n\t  \n\t    // synchronous\n\t    try {\n\t      findAuthor();\n\t    } catch(reason) {\n\t      // something went wrong\n\t    }\n\t  \n\t    // async with promises\n\t    findAuthor().catch(function(reason){\n\t      // something went wrong\n\t    });\n\t    ```\n\t  \n\t    @method catch\n\t    @param {Function} onRejection\n\t    Useful for tooling.\n\t    @return {Promise}\n\t  */\n\t  'catch': function _catch(onRejection) {\n\t    return this.then(null, onRejection);\n\t  }\n\t};\n\t\n\tfunction polyfill() {\n\t    var local = undefined;\n\t\n\t    if (typeof global !== 'undefined') {\n\t        local = global;\n\t    } else if (typeof self !== 'undefined') {\n\t        local = self;\n\t    } else {\n\t        try {\n\t            local = Function('return this')();\n\t        } catch (e) {\n\t            throw new Error('polyfill failed because global object is unavailable in this environment');\n\t        }\n\t    }\n\t\n\t    var P = local.Promise;\n\t\n\t    if (P) {\n\t        var promiseToString = null;\n\t        try {\n\t            promiseToString = Object.prototype.toString.call(P.resolve());\n\t        } catch (e) {\n\t            // silently ignored\n\t        }\n\t\n\t        if (promiseToString === '[object Promise]' && !P.cast) {\n\t            return;\n\t        }\n\t    }\n\t\n\t    local.Promise = Promise;\n\t}\n\t\n\t// Strange compat..\n\tPromise.polyfill = polyfill;\n\tPromise.Promise = Promise;\n\t\n\treturn Promise;\n\t\n\t})));\n\t//# sourceMappingURL=es6-promise.map\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(39), (function() { return this; }())))\n\n/***/ },\n/* 66 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {module.exports = global[\"OneSignal\"] = __webpack_require__(41);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 67 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {module.exports = global[\"ServiceWorker\"] = __webpack_require__(58);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 68 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\n<svg version=\\\"1.1\\\" class=\\\"onesignal-bell-svg\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n\\t width=\\\"99.7px\\\" height=\\\"99.7px\\\" viewBox=\\\"0 0 99.7 99.7\\\" style=\\\"enable-background:new 0 0 99.7 99.7;\\\" xml:space=\\\"preserve\\\">\\n<g>\\n\\t<circle class=\\\"background\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" r=\\\"49.9\\\"/>\\n\\t<g id=\\\"Layer_2\\\">\\n\\t\\t<g>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M50.1,66.2H27.7c0,0-2-0.2-2-2.1c0-1.9,1.7-2,1.7-2s6.7-3.2,6.7-5.5c0-2.3-1.1-3.9-1.1-13.3\\n\\t\\t\\t\\ts6-16.6,13.2-16.6c0,0,1-2.4,3.9-2.4c2.8,0,3.8,2.4,3.8,2.4c7.2,0,13.2,7.2,13.2,16.6s-1,11-1,13.3c0,2.3,6.7,5.5,6.7,5.5\\n\\t\\t\\t\\ts1.7,0.1,1.7,2c0,1.8-2.1,2.1-2.1,2.1H50.1z\\\"/>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M42.9,68.5h14.5c0,0-1,6.3-7.2,6.3S42.9,68.5,42.9,68.5z\\\"/>\\n\\t\\t\\t<ellipse class=\\\"stroke\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" rx=\\\"37.4\\\" ry=\\\"36.9\\\"/>\\n\\t\\t</g>\\n\\t</g>\\n</g>\\n</svg>\\n\"\n\n/***/ },\n/* 69 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(61);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(27)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./bell.scss\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./bell.scss\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 70 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(62);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(27)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./httpModal.scss\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./httpModal.scss\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 71 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(63);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(27)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./popover.scss\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./popover.scss\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n/* 72 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar atoa = __webpack_require__(20);\n\tvar serialization = __webpack_require__(40);\n\tvar emitter = __webpack_require__(38);\n\t\n\tmodule.exports = createChannel;\n\t\n\tfunction createChannel () {\n\t  var channel = at(navigator.serviceWorker.controller);\n\t  return channel;\n\t\n\t  function at (worker) {\n\t    var internalEmitter = emitter();\n\t    var api = {\n\t      on: selfed('on'),\n\t      once: selfed('once'),\n\t      off: selfed('off'),\n\t      emit: postToWorker,\n\t      at: at\n\t    };\n\t    var postFromWorker = serialization.emission(internalEmitter, { broadcast: false });\n\t    navigator.serviceWorker.addEventListener('message', broadcastHandler);\n\t    return api;\n\t\n\t    function selfed (method) {\n\t      return function selfish () {\n\t        internalEmitter[method].apply(null, arguments);\n\t        return api;\n\t      };\n\t    }\n\t\n\t    function postToWorker () {\n\t      if (!worker) {\n\t        return Promise.reject(new Error('ServiceWorker not found.'));\n\t      }\n\t      var payload = serialization.parsePayload(atoa(arguments));\n\t      var messageChannel = new MessageChannel();\n\t      messageChannel.port1.addEventListener('message', postFromWorker);\n\t      return worker.postMessage(payload, [messageChannel.port2]);\n\t    }\n\t\n\t    function broadcastHandler (e) {\n\t      var data = e.data;\n\t      if (data) {\n\t        if (data.__broadcast) {\n\t          serialization.emission(internalEmitter, {broadcast: true})(e);\n\t        } else {\n\t          serialization.emission(internalEmitter, {broadcast: false})(e);\n\t        }\n\t      }\n\t    }\n\t  }\n\t}\n\n\n/***/ },\n/* 73 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar atoa = __webpack_require__(20);\n\tvar serialization = __webpack_require__(40);\n\tvar emitter = __webpack_require__(38);\n\t\n\tmodule.exports = createChannel;\n\t\n\tfunction createChannel () {\n\t  var internalEmitter = emitter();\n\t  var api = {\n\t    on: selfed('on'),\n\t    once: selfed('once'),\n\t    off: selfed('off'),\n\t    broadcast: broadcastToPages,\n\t    emit: replyToClient\n\t  };\n\t\n\t  self.addEventListener('message', postFromPage);\n\t\n\t  return api;\n\t\n\t  function selfed (method) {\n\t    return function selfish () {\n\t      internalEmitter[method].apply(null, arguments);\n\t      return api;\n\t    };\n\t  }\n\t\n\t  function postFromPage (e) {\n\t    var context = {\n\t      reply: replyToPage(e)\n\t    };\n\t    serialization.emission(internalEmitter, context)(e);\n\t  }\n\t\n\t  function broadcastToPages (type) {\n\t    var payload = atoa(arguments, 1);\n\t    return self.clients.matchAll({includeUncontrolled: true}).then(gotClients);\n\t    function gotClients (clients) {\n\t      return clients.map(emitToClient);\n\t    }\n\t    function emitToClient (client) {\n\t      return client.postMessage({ type: type, payload: payload, __broadcast: true });\n\t    }\n\t  }\n\t\n\t  function replyTo (client) {\n\t    var payload = serialization.parsePayload(atoa(arguments, 1));\n\t    return client.postMessage(payload);\n\t  }\n\t\n\t  function replyToPage (e) {\n\t    return replyTo.bind(null, e.ports[0]);\n\t  }\n\t\n\t  function replyToClient (clientId) {\n\t        var payload = serialization.parsePayload(atoa(arguments, 1));\n\t    return self.clients.matchAll({includeUncontrolled: true}).then(function(clients) {\n\t      var wasClientFound = false;\n\t      clients.forEach(function(client) {\n\t        if (client.id === clientId) {\n\t          wasClientFound = true;\n\t          return client.postMessage(payload);\n\t        }\n\t      });\n\t      if (!wasClientFound) {\n\t        return Promise.reject('Could not find service worker client with ID ' + clientId + ' to reply to.');\n\t      }\n\t    });\n\t  }\n\t}\n\n\n/***/ },\n/* 74 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {var si = typeof setImmediate === 'function', tick;\n\tif (si) {\n\t  tick = function (fn) { setImmediate(fn); };\n\t} else {\n\t  tick = function (fn) { setTimeout(fn, 0); };\n\t}\n\t\n\tmodule.exports = tick;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(29).setImmediate))\n\n/***/ },\n/* 75 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n/***/ },\n/* 76 */\n/***/ function(module, exports) {\n\n\t/* (ignored) */\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** OneSignalSDK.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b3a12f623ed401c31b4e\n **/","require('es6-promise').polyfill();\n\nimport Environment from './Environment';\nimport { getSdkLoadCount, incrementSdkLoadCount } from './utils';\nimport * as log from 'loglevel';\n\n\nif (Environment.isBrowser()) {\n  incrementSdkLoadCount();\n  if (getSdkLoadCount() > 1) {\n    log.warn(`OneSignal: The web push SDK is included more than once. For optimal performance, please include our ` +\n      `SDK only once on your page.`);\n    log.debug(`OneSignal: Exiting from SDK initialization to prevent double-initialization errors. ` +\n      `Occurred ${getSdkLoadCount()} times.`);\n  } else {\n    // We're running in the host page, iFrame of the host page, or popup window\n    // Load OneSignal's web SDK\n    if (typeof OneSignal !== \"undefined\")\n      var predefinedOneSignalPushes = OneSignal;\n\n    require(\"expose?OneSignal!./OneSignal.ts\");\n\n    if (predefinedOneSignalPushes)\n      for (var i = 0; i < predefinedOneSignalPushes.length; i++)\n        OneSignal.push(predefinedOneSignalPushes[i]);\n  }\n}\nelse if (Environment.isServiceWorker()) {\n  // We're running as the service worker\n  require(\"expose?ServiceWorker!./service-worker/ServiceWorker.ts\");\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/entry.ts\n **/","///<reference path=\"models/Action.ts\"/>\nimport * as log from 'loglevel';\nimport * as Browser from 'bowser';\nimport Environment from './Environment';\nimport IndexedDb from './IndexedDb';\nimport Database from './Database';\nimport PushNotSupportedError from \"./errors/PushNotSupportedError\";\nimport {InvalidArgumentError, InvalidArgumentReason} from \"./errors/InvalidArgumentError\";\nimport SubscriptionHelper from \"./helpers/SubscriptionHelper\";\n\nexport function isArray(variable) {\n  return Object.prototype.toString.call( variable ) === '[object Array]';\n}\n\nvar decodeTextArea = null;\nexport function decodeHtmlEntities(text) {\n  if (Environment.isBrowser()) {\n    if (!decodeTextArea) {\n      decodeTextArea = document.createElement(\"textarea\");\n    }\n  }\n  if (decodeTextArea) {\n    decodeTextArea.innerHTML = text;\n    return decodeTextArea.value;\n  } else {\n    // Not running in a browser environment, text cannot be decoded\n    return text;\n  }\n}\n\nexport function isPushNotificationsSupported () {\n  if (Browser.ios || (<any>Browser).ipod || (<any>Browser).iphone || (<any>Browser).ipad)\n    return false;\n\n  if (Browser.msedge || Browser.msie)\n    return false;\n\n  /* Firefox on Android push notifications not supported until at least 48: https://bugzilla.mozilla.org/show_bug.cgi?id=1206207#c6 */\n  if (Browser.firefox && Number(Browser.version) < 48 && (Browser.mobile || Browser.tablet)) {\n    return false;\n  }\n\n  if (Browser.firefox && Number(Browser.version) >= 44)\n    return true;\n\n  if (Browser.safari && Number(Browser.version) >= 7.1)\n    return true;\n\n  // Android Chrome WebView\n  if (navigator.appVersion.match(/ wv/))\n    return false;\n\n  if (Browser.chrome && Number(Browser.version) >= 42)\n    return true;\n\n  if ((<any>Browser).yandexbrowser && Number(Browser.version) >= 15.12)\n    return true;\n\n  // https://www.chromestatus.com/feature/5416033485586432\n  if (Browser.opera && Browser.mobile && Number(Browser.version) >= 37)\n    return true;\n\n  return false;\n}\n\nexport function removeDomElement(selector) {\n  var els = document.querySelectorAll(selector);\n  if (els.length > 0) {\n    for (let i = 0; i < els.length; i++)\n      els[i].parentNode.removeChild(els[i]);\n  }\n}\n\n/**\n * Helper method for public APIs that waits until OneSignal is initialized, rejects if push notifications are\n * not supported, and wraps these tasks in a Promise.\n */\nexport function awaitOneSignalInitAndSupported() {\n  return new Promise((resolve, reject) => {\n    if (!isPushNotificationsSupported()) {\n      throw new PushNotSupportedError();\n    }\n\n    if (!OneSignal.initialized) {\n      OneSignal.once(OneSignal.EVENTS.SDK_INITIALIZED, resolve);\n    } else {\n      resolve();\n    }\n  });\n}\n\n/**\n * JSON.stringify() but converts functions to \"[Function]\" so they aren't lost.\n * Helps when logging method calls.\n */\nexport function stringify(obj) {\n  return JSON.stringify(obj, (key, value) => {\n    if (typeof value === 'function') {\n      return \"[Function]\";\n    }\n    else {\n      return value;\n    }\n  }, 4);\n}\n\nexport function executeCallback<T>(callback: Action<T>, ...args: any[]) {\n  if (callback) {\n    return callback.apply(null, args);\n  }\n}\n\nexport function logMethodCall(methodName: string, ...args) {\n  return log.debug(`Called %c${methodName}(${args.map(stringify).join(', ')})`, getConsoleStyle('code'), '.');\n}\n\nexport function isValidEmail(email) {\n  return !!email &&\n         !!email.match(/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/)\n}\n\nexport function addDomElement(targetSelectorOrElement, addOrder, elementHtml) {\n  if (typeof targetSelectorOrElement === 'string')\n    document.querySelector(targetSelectorOrElement).insertAdjacentHTML(addOrder, elementHtml);\n  else if (typeof targetSelectorOrElement === 'object')\n    targetSelectorOrElement.insertAdjacentHTML(addOrder, elementHtml);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function clearDomElementChildren(targetSelectorOrElement) {\n  if (typeof targetSelectorOrElement === 'string') {\n    var element = document.querySelector(targetSelectorOrElement);\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n  }\n  else if (typeof targetSelectorOrElement === 'object') {\n    while (targetSelectorOrElement.firstChild) {\n      targetSelectorOrElement.removeChild(targetSelectorOrElement.firstChild);\n    }\n  }\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function addCssClass(targetSelectorOrElement, cssClass) {\n  if (typeof targetSelectorOrElement === 'string')\n    document.querySelector(targetSelectorOrElement).classList.add(cssClass);\n  else if (typeof targetSelectorOrElement === 'object')\n    targetSelectorOrElement.classList.add(cssClass);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function removeCssClass(targetSelectorOrElement, cssClass) {\n  if (typeof targetSelectorOrElement === 'string')\n    document.querySelector(targetSelectorOrElement).classList.remove(cssClass);\n  else if (typeof targetSelectorOrElement === 'object')\n    targetSelectorOrElement.classList.remove(cssClass);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nexport function hasCssClass(targetSelectorOrElement, cssClass) {\n  if (typeof targetSelectorOrElement === 'string')\n    return document.querySelector(targetSelectorOrElement).classList.contains(cssClass);\n  else if (typeof targetSelectorOrElement === 'object')\n    return targetSelectorOrElement.classList.contains(cssClass);\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\nvar DEVICE_TYPES = {\n  CHROME: 5,\n      SAFARI: 7,\n      FIREFOX: 8,\n};\n\nexport function getDeviceTypeForBrowser() {\n  if (Browser.chrome || (<any>Browser).yandexbrowser || Browser.opera) {\n    return DEVICE_TYPES.CHROME;\n  } else if (Browser.firefox) {\n    return DEVICE_TYPES.FIREFOX;\n  } else if (Browser.safari) {\n    return DEVICE_TYPES.SAFARI;\n  }\n}\n\nexport function getConsoleStyle(style) {\n  if (style == 'code') {\n    return `\n    padding: 0 1px 1px 5px;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n    font-family: Monaco,\"DejaVu Sans Mono\",\"Courier New\",monospace;\n    color: #444;\n    `\n  } else if (style == 'bold') {\n    return `\n      font-weight: 600;\n    color: rgb(51, 51, 51);\n    `;\n  } else if (style == 'alert') {\n    return `\n      font-weight: 600;\n    color: red;\n    `;\n  } else if (style == 'event') {\n    return `\n    color: green;\n    `;\n  } else if (style == 'postmessage') {\n    return `\n    color: orange;\n    `;\n  } else if (style == 'serviceworkermessage') {\n    return `\n    color: purple;\n    `;\n  }\n}\n\n/**\n * Returns a promise for the setTimeout() method.\n * @param durationMs\n * @returns {Promise} Returns a promise that resolves when the timeout is complete.\n */\nexport function delay(durationMs) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, durationMs)\n  });\n}\n\nexport function nothing(): Promise<any> {\n  return Promise.resolve();\n}\n\nexport function executeAndTimeoutPromiseAfter(promise, milliseconds, displayError?) {\n  let timeoutPromise = new Promise(resolve => setTimeout(() => resolve('promise-timed-out'), milliseconds));\n  return Promise.race([promise, timeoutPromise]).then(value => {\n    if (value === 'promise-timed-out') {\n      log.info(displayError || `Promise ${promise} timed out after ${milliseconds} ms.`);\n      return Promise.reject(displayError || `Promise ${promise} timed out after ${milliseconds} ms.`);\n    }\n    else return value;\n  });\n}\n\nexport function when(condition, promiseIfTrue, promiseIfFalse) {\n  if (promiseIfTrue === undefined)\n    promiseIfTrue = nothing();\n  if (promiseIfFalse === undefined)\n    promiseIfFalse = nothing();\n  return (condition ? promiseIfTrue : promiseIfFalse);\n}\n\nexport function guid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n    var crypto = window.crypto || (<any>window).msCrypto;\n    if (crypto) {\n      var r = crypto.getRandomValues(new Uint8Array(1))[0] % 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    } else {\n      return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n        return v.toString(16);\n      });\n    }\n  });\n}\n\n/**\n * Returns true if match is in string; otherwise, returns false.\n */\nexport function contains(indexOfAble, match) {\n  if (!indexOfAble)\n    return false;\n  return indexOfAble.indexOf(match) !== -1;\n}\n\n/**\n * Returns the current object without keys that have undefined values.\n * Regardless of whether the return result is used, the passed-in object is destructively modified.\n * Only affects keys that the object directly contains (i.e. not those inherited via the object's prototype).\n * @param object\n */\nexport function trimUndefined(object) {\n  for (var property in object) {\n    if (object.hasOwnProperty(property)) {\n      if (object[property] === undefined) {\n        delete object[property];\n      }\n    }\n  }\n  return object;\n}\n\n/**\n * Returns true if the UUID is a string of 36 characters;\n * @param uuid\n * @returns {*|boolean}\n */\nexport function isValidUuid(uuid) {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(uuid);\n}\n\n/**\n * Returns the correct subdomain if 'https://subdomain.onesignal.com' or something similar is passed.\n */\nexport function normalizeSubdomain(subdomain) {\n  subdomain = subdomain.trim();\n  let removeSubstrings = [\n    'http://www.',\n    'https://www.',\n    'http://',\n    'https://',\n    '.onesignal.com/',\n    '.onesignal.com'\n  ];\n  for (let removeSubstring of removeSubstrings) {\n    subdomain = subdomain.replace(removeSubstring, '');\n  }\n  return subdomain.toLowerCase();\n}\n\nexport function getUrlQueryParam(name) {\n  let url = window.location.href;\n  url = url.toLowerCase(); // This is just to avoid case sensitiveness\n  name = name.replace(/[\\[\\]]/g, \"\\\\$&\").toLowerCase();// This is just to avoid case sensitiveness for query parameter name\n  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n    results = regex.exec(url);\n  if (!results) return null;\n  if (!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\n/**\n * Wipe OneSignal-related IndexedDB data on the current origin. OneSignal does not have to be initialized to use this.\n */\nexport function wipeLocalIndexedDb() {\n  log.warn('OneSignal: Wiping local IndexedDB data.');\n  return Promise.all([\n    IndexedDb.remove('Ids'),\n    IndexedDb.remove('NotificationOpened'),\n    IndexedDb.remove('Options')\n  ]);\n}\n\n/**\n * Wipe OneSignal-related IndexedDB data on the \"correct\" computed origin, but OneSignal must be initialized first to use.\n */\nexport function wipeIndexedDb() {\n  log.warn('OneSignal: Wiping IndexedDB data.');\n  return Promise.all([\n    Database.remove('Ids'),\n    Database.remove('NotificationOpened'),\n    Database.remove('Options')\n  ]);\n}\n\n/**\n * Capitalizes the first letter of the string.\n * @returns {string} The string with the first letter capitalized.\n */\nexport function capitalize(text): string {\n  return text.charAt(0).toUpperCase() + text.slice(1);\n}\n\n/**\n * Unsubscribe from push notifications without removing the active service worker.\n */\nexport function unsubscribeFromPush() {\n  log.warn('OneSignal: Unsubscribing from push.');\n  if (Environment.isServiceWorker()) {\n    return (<any>self).registration.pushManager.getSubscription()\n                       .then(subscription => {\n                         if (subscription) {\n                           return subscription.unsubscribe();\n                         } else throw new Error('Cannot unsubscribe because not subscribed.');\n                       });\n  } else {\n    if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n      return new Promise((resolve, reject) => {\n        log.debug(\"Unsubscribe from push got called, and we're going to remotely execute it in HTTPS iFrame.\");\n        OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH, null, reply => {\n          log.debug(\"Unsubscribe from push succesfully remotely executed.\");\n          if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\n            resolve();\n          } else {\n            reject('Failed to remotely unsubscribe from push.');\n          }\n        });\n      });\n    } else {\n      if (!navigator.serviceWorker || !navigator.serviceWorker.controller)\n        return Promise.resolve();\n\n      return navigator.serviceWorker.ready\n                      .then(registration => registration.pushManager)\n                      .then(pushManager => pushManager.getSubscription())\n                      .then(subscription => {\n                        if (subscription) {\n                          return subscription.unsubscribe();\n                        }\n                      });\n    }\n  }\n}\n\n\n/**\n * Unregisters the active service worker.\n */\nexport function wipeServiceWorker() {\n  log.warn('OneSignal: Unregistering service worker.');\n  if (Environment.isIframe()) {\n    return;\n  }\n  if (!navigator.serviceWorker || !navigator.serviceWorker.controller)\n    return Promise.resolve();\n\n  return navigator.serviceWorker.ready\n      .then(registration => registration.unregister());\n}\n\n\n/**\n * Unsubscribe from push notifications and remove any active service worker.\n */\nexport function wipeServiceWorkerAndUnsubscribe() {\n  return Promise.all([\n    unsubscribeFromPush(),\n    wipeServiceWorker()\n  ]);\n}\n\nexport function wait(milliseconds) {\n  return new Promise(resolve => setTimeout(resolve, milliseconds));\n}\n\n/**\n * Returns the part of the string after the first occurence of the specified search.\n * @param string The entire string.\n * @param search The text returned will be everything *after* search.\n * e.g. substringAfter('A white fox', 'white') => ' fox'\n */\nexport function substringAfter(string, search) {\n  return string.substr(string.indexOf(search) + search.length);\n}\n\nexport function once(targetSelectorOrElement, event, task, manualDestroy=false) {\n  if (!event) {\n    log.error('Cannot call on() with no event: ', event);\n  }\n  if (!task) {\n    log.error('Cannot call on() with no task: ', task)\n  }\n  if (typeof targetSelectorOrElement === 'string') {\n    let els = document.querySelectorAll(targetSelectorOrElement);\n    if (els.length > 0) {\n      for (let i = 0; i < els.length; i++)\n        once(els[i], event, task);\n    }\n  }\n  else if (isArray(targetSelectorOrElement)) {\n    for (let i = 0; i < targetSelectorOrElement.length; i++)\n      once(targetSelectorOrElement[i], event, task);\n  }\n  else if (typeof targetSelectorOrElement === 'object') {\n    var taskWrapper = (function () {\n      var internalTaskFunction = function (e) {\n        var destroyEventListener = function() {\n          targetSelectorOrElement.removeEventListener(e.type, taskWrapper);\n        };\n        if (!manualDestroy) {\n          destroyEventListener();\n        }\n        task(e, destroyEventListener);\n      };\n      return internalTaskFunction;\n    })();\n    targetSelectorOrElement.addEventListener(event, taskWrapper);\n  }\n  else\n    throw new Error(`${targetSelectorOrElement} must be a CSS selector string or DOM Element object.`);\n}\n\n/**\n * Returns the number of times the SDK has been loaded into the browser.\n * Expects a browser environment, otherwise this call will fail.\n */\nexport function getSdkLoadCount() {\n  return (<any>window).__oneSignalSdkLoadCount || 0;\n}\n\nexport async function awaitSdkEvent(eventName: string, predicate?: Action<any>) {\n  return await new Promise((resolve, reject) => {\n    OneSignal.once(eventName, event => {\n      if (predicate) {\n        const predicateResult = predicate(event);\n        if (predicateResult)\n          resolve(event);\n      } else resolve(event);\n    });\n  });\n}\n\n/**\n * Increments the counter describing the number of times the SDK has been loaded into the browser.\n * Expects a browser environment, otherwise this call will fail.\n */\nexport function incrementSdkLoadCount() {\n  (<any>window).__oneSignalSdkLoadCount = getSdkLoadCount() + 1;\n}\n\n/**\n * Returns the email with all whitespace removed and converted to lower case.\n */\nexport function prepareEmailForHashing(email: string): string {\n  return email.replace(/\\s/g, '').toLowerCase();\n}\n\n/**\n * Taken from: http://lig-membres.imag.fr/donsez/cours/exemplescourstechnoweb/js_securehash/\n */\nexport function md5(str: string) {\n  /*\n   * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n   * Digest Algorithm, as defined in RFC 1321.\n   * Copyright (C) Paul Johnston 1999 - 2000.\n   * Updated by Greg Holt 2000 - 2001.\n   * See http://pajhome.org.uk/site/legal.html for details.\n   */\n\n  /*\n   * Convert a 32-bit number to a hex string with ls-byte first\n   */\n  var hex_chr = \"0123456789abcdef\";\n\n  function rhex(num) {\n    var str = \"\";\n    for (var j = 0; j <= 3; j++)\n      str += hex_chr.charAt((num >> (j * 8 + 4)) & 0x0F) +\n        hex_chr.charAt((num >> (j * 8)) & 0x0F);\n    return str;\n  }\n\n  /*\n   * Convert a string to a sequence of 16-word blocks, stored as an array.\n   * Append padding bits and the length, as described in the MD5 standard.\n   */\n  function str2blks_MD5(str) {\n    var nblk = ((str.length + 8) >> 6) + 1;\n    var blks = new Array(nblk * 16);\n    for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\n    for (var i = 0; i < str.length; i++)\n      blks[i >> 2] |= str.charCodeAt(i) << ((i % 4) * 8);\n    blks[i >> 2] |= 0x80 << ((i % 4) * 8);\n    blks[nblk * 16 - 2] = str.length * 8;\n    return blks;\n  }\n\n  /*\n   * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n   * to work around bugs in some JS interpreters.\n   */\n  function add(x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xFFFF);\n  }\n\n  /*\n   * Bitwise rotate a 32-bit number to the left\n   */\n  function rol(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt));\n  }\n\n  /*\n   * These functions implement the basic operation for each round of the\n   * algorithm.\n   */\n  function cmn(q, a, b, x, s, t) {\n    return add(rol(add(add(a, q), add(x, t)), s), b);\n  }\n\n  function ff(a, b, c, d, x, s, t) {\n    return cmn((b & c) | ((~b) & d), a, b, x, s, t);\n  }\n\n  function gg(a, b, c, d, x, s, t) {\n    return cmn((b & d) | (c & (~d)), a, b, x, s, t);\n  }\n\n  function hh(a, b, c, d, x, s, t) {\n    return cmn(b ^ c ^ d, a, b, x, s, t);\n  }\n\n  function ii(a, b, c, d, x, s, t) {\n    return cmn(c ^ (b | (~d)), a, b, x, s, t);\n  }\n\n  /*\n   * Take a string and return the hex representation of its MD5.\n   */\n  function calcMD5(str) {\n    var x = str2blks_MD5(str);\n    var a = 1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d = 271733878;\n\n    for (var i = 0; i < x.length; i += 16) {\n      var olda = a;\n      var oldb = b;\n      var oldc = c;\n      var oldd = d;\n\n      a = ff(a, b, c, d, x[i + 0], 7, -680876936);\n      d = ff(d, a, b, c, x[i + 1], 12, -389564586);\n      c = ff(c, d, a, b, x[i + 2], 17, 606105819);\n      b = ff(b, c, d, a, x[i + 3], 22, -1044525330);\n      a = ff(a, b, c, d, x[i + 4], 7, -176418897);\n      d = ff(d, a, b, c, x[i + 5], 12, 1200080426);\n      c = ff(c, d, a, b, x[i + 6], 17, -1473231341);\n      b = ff(b, c, d, a, x[i + 7], 22, -45705983);\n      a = ff(a, b, c, d, x[i + 8], 7, 1770035416);\n      d = ff(d, a, b, c, x[i + 9], 12, -1958414417);\n      c = ff(c, d, a, b, x[i + 10], 17, -42063);\n      b = ff(b, c, d, a, x[i + 11], 22, -1990404162);\n      a = ff(a, b, c, d, x[i + 12], 7, 1804603682);\n      d = ff(d, a, b, c, x[i + 13], 12, -40341101);\n      c = ff(c, d, a, b, x[i + 14], 17, -1502002290);\n      b = ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\n      a = gg(a, b, c, d, x[i + 1], 5, -165796510);\n      d = gg(d, a, b, c, x[i + 6], 9, -1069501632);\n      c = gg(c, d, a, b, x[i + 11], 14, 643717713);\n      b = gg(b, c, d, a, x[i + 0], 20, -373897302);\n      a = gg(a, b, c, d, x[i + 5], 5, -701558691);\n      d = gg(d, a, b, c, x[i + 10], 9, 38016083);\n      c = gg(c, d, a, b, x[i + 15], 14, -660478335);\n      b = gg(b, c, d, a, x[i + 4], 20, -405537848);\n      a = gg(a, b, c, d, x[i + 9], 5, 568446438);\n      d = gg(d, a, b, c, x[i + 14], 9, -1019803690);\n      c = gg(c, d, a, b, x[i + 3], 14, -187363961);\n      b = gg(b, c, d, a, x[i + 8], 20, 1163531501);\n      a = gg(a, b, c, d, x[i + 13], 5, -1444681467);\n      d = gg(d, a, b, c, x[i + 2], 9, -51403784);\n      c = gg(c, d, a, b, x[i + 7], 14, 1735328473);\n      b = gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n      a = hh(a, b, c, d, x[i + 5], 4, -378558);\n      d = hh(d, a, b, c, x[i + 8], 11, -2022574463);\n      c = hh(c, d, a, b, x[i + 11], 16, 1839030562);\n      b = hh(b, c, d, a, x[i + 14], 23, -35309556);\n      a = hh(a, b, c, d, x[i + 1], 4, -1530992060);\n      d = hh(d, a, b, c, x[i + 4], 11, 1272893353);\n      c = hh(c, d, a, b, x[i + 7], 16, -155497632);\n      b = hh(b, c, d, a, x[i + 10], 23, -1094730640);\n      a = hh(a, b, c, d, x[i + 13], 4, 681279174);\n      d = hh(d, a, b, c, x[i + 0], 11, -358537222);\n      c = hh(c, d, a, b, x[i + 3], 16, -722521979);\n      b = hh(b, c, d, a, x[i + 6], 23, 76029189);\n      a = hh(a, b, c, d, x[i + 9], 4, -640364487);\n      d = hh(d, a, b, c, x[i + 12], 11, -421815835);\n      c = hh(c, d, a, b, x[i + 15], 16, 530742520);\n      b = hh(b, c, d, a, x[i + 2], 23, -995338651);\n\n      a = ii(a, b, c, d, x[i + 0], 6, -198630844);\n      d = ii(d, a, b, c, x[i + 7], 10, 1126891415);\n      c = ii(c, d, a, b, x[i + 14], 15, -1416354905);\n      b = ii(b, c, d, a, x[i + 5], 21, -57434055);\n      a = ii(a, b, c, d, x[i + 12], 6, 1700485571);\n      d = ii(d, a, b, c, x[i + 3], 10, -1894986606);\n      c = ii(c, d, a, b, x[i + 10], 15, -1051523);\n      b = ii(b, c, d, a, x[i + 1], 21, -2054922799);\n      a = ii(a, b, c, d, x[i + 8], 6, 1873313359);\n      d = ii(d, a, b, c, x[i + 15], 10, -30611744);\n      c = ii(c, d, a, b, x[i + 6], 15, -1560198380);\n      b = ii(b, c, d, a, x[i + 13], 21, 1309151649);\n      a = ii(a, b, c, d, x[i + 4], 6, -145523070);\n      d = ii(d, a, b, c, x[i + 11], 10, -1120210379);\n      c = ii(c, d, a, b, x[i + 2], 15, 718787259);\n      b = ii(b, c, d, a, x[i + 9], 21, -343485551);\n\n      a = add(a, olda);\n      b = add(b, oldb);\n      c = add(c, oldc);\n      d = add(d, oldd);\n    }\n    return rhex(a) + rhex(b) + rhex(c) + rhex(d);\n  }\n\n  return calcMD5(str);\n}\n\n/**\n * Taken from: http://lig-membres.imag.fr/donsez/cours/exemplescourstechnoweb/js_securehash/sha1src.html\n */\nexport function sha1(str: string) {\n  /*\n   * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n   * in FIPS PUB 180-1\n   * Copyright (C) Paul Johnston 2000.\n   * See http://pajhome.org.uk/site/legal.html for details.\n   */\n\n  /*\n   * Convert a 32-bit number to a hex string with ms-byte first\n   */\n  var hex_chr = \"0123456789abcdef\";\n\n  function hex(num) {\n    var str = \"\";\n    for (var j = 7; j >= 0; j--)\n      str += hex_chr.charAt((num >> (j * 4)) & 0x0F);\n    return str;\n  }\n\n  /*\n   * Convert a string to a sequence of 16-word blocks, stored as an array.\n   * Append padding bits and the length, as described in the SHA1 standard.\n   */\n  function str2blks_SHA1(str) {\n    var nblk = ((str.length + 8) >> 6) + 1;\n    var blks = new Array(nblk * 16);\n    for (var i = 0; i < nblk * 16; i++) blks[i] = 0;\n    for (i = 0; i < str.length; i++)\n      blks[i >> 2] |= str.charCodeAt(i) << (24 - (i % 4) * 8);\n    blks[i >> 2] |= 0x80 << (24 - (i % 4) * 8);\n    blks[nblk * 16 - 1] = str.length * 8;\n    return blks;\n  }\n\n  /*\n   * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n   * to work around bugs in some JS interpreters.\n   */\n  function add(x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xFFFF);\n  }\n\n  /*\n   * Bitwise rotate a 32-bit number to the left\n   */\n  function rol(num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt));\n  }\n\n  /*\n   * Perform the appropriate triplet combination function for the current\n   * iteration\n   */\n  function ft(t, b, c, d) {\n    if (t < 20) return (b & c) | ((~b) & d);\n    if (t < 40) return b ^ c ^ d;\n    if (t < 60) return (b & c) | (b & d) | (c & d);\n    return b ^ c ^ d;\n  }\n\n  /*\n   * Determine the appropriate additive constant for the current iteration\n   */\n  function kt(t) {\n    return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 :\n      (t < 60) ? -1894007588 : -899497514;\n  }\n\n  /*\n   * Take a string and return the hex representation of its SHA-1.\n   */\n  function calcSHA1(str) {\n    var x = str2blks_SHA1(str);\n    var w = new Array(80);\n\n    var a = 1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d = 271733878;\n    var e = -1009589776;\n\n    for (var i = 0; i < x.length; i += 16) {\n      var olda = a;\n      var oldb = b;\n      var oldc = c;\n      var oldd = d;\n      var olde = e;\n\n      for (var j = 0; j < 80; j++) {\n        if (j < 16) w[j] = x[i + j];\n        else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);\n        var t = add(add(rol(a, 5), ft(j, b, c, d)), add(add(e, w[j]), kt(j)));\n        e = d;\n        d = c;\n        c = rol(b, 30);\n        b = a;\n        a = t;\n      }\n\n      a = add(a, olda);\n      b = add(b, oldb);\n      c = add(c, oldc);\n      d = add(d, oldd);\n      e = add(e, olde);\n    }\n    return hex(a) + hex(b) + hex(c) + hex(d) + hex(e);\n  }\n\n  return calcSHA1(str);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.ts\n **/","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n\n    function realMethod(methodName) {\n        if (typeof console === undefinedType) {\n            return false; // We can't build a real method without a console to log to\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // these private functions always need `this` to be set properly\n\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n    }\n\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      var storageKey = \"loglevel\";\n      if (name) {\n        storageKey += \":\" + name;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      /*\n       *\n       * Public API\n       *\n       */\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Package-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if (typeof name !== \"string\" || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    return defaultLogger;\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/loglevel/lib/loglevel.js\n ** module id = 2\n ** module chunks = 0\n **/","import * as log from 'loglevel';\nimport Environment from './Environment';\nimport { getConsoleStyle, contains, capitalize } from './utils';\n\n\nconst SILENT_EVENTS = [\n  'notifyButtonHovering',\n  'notifyButtonHover',\n  'notifyButtonButtonClick',\n  'notifyButtonLauncherClick',\n  'animatedElementHiding',\n  'aniamtedElementHidden',\n  'animatedElementShowing',\n  'animatedElementShown',\n  'activeAnimatedElementActivating',\n  'activeAnimatedElementActive',\n  'activeAnimatedElementInactivating',\n  'activeAnimatedElementInactive',\n  'dbRetrieved',\n  'dbSet',\n  'testEvent'\n  ];\n\nconst RETRIGGER_REMOTE_EVENTS = [\n  'onesignal.prompt.custom.clicked',\n  'onesignal.prompt.native.permissionchanged',\n  'onesignal.subscription.changed',\n  'onesignal.internal.subscriptionset',\n  'dbRebuilt',\n  'initialize',\n  'subscriptionSet',\n  'sendWelcomeNotification',\n  'subscriptionChange',\n  'notificationPermissionChange',\n  'dbSet',\n  'register',\n  'notificationDisplay',\n  'notificationDismiss',\n  'notificationClick',\n  'permissionPromptDisplay',\n  'testWouldDisplay',\n  'testInitOptionDisabled',\n  'popupWindowTimeout'\n];\n\nconst LEGACY_EVENT_MAP = {\n  'notificationPermissionChange': 'onesignal.prompt.native.permissionchanged',\n  'subscriptionChange': 'onesignal.subscription.changed',\n  'customPromptClick': 'onesignal.prompt.custom.clicked',\n};\n\nexport default class Event {\n\n  /**\n   * Triggers the specified event with optional custom data.\n   * @param eventName The string event name to be emitted.\n   * @param data Any JavaScript variable to be passed with the event.\n   * @param remoteTriggerEnv If this method is being called in a different environment (e.g. was triggered in iFrame but now retriggered on main host), this is the string of the original environment for logging purposes.\n   */\n  static trigger(eventName, data?, remoteTriggerEnv=null) {\n    if (!contains(SILENT_EVENTS, eventName)) {\n      let displayData = data;\n      if (remoteTriggerEnv) {\n        var env = `${capitalize(Environment.getEnv())} ⬸ ${capitalize(remoteTriggerEnv)}`;\n      } else {\n        var env = capitalize(Environment.getEnv());\n      }\n\n      if (displayData || displayData === false) {\n        log.debug(`(${env}) » %c${eventName}:`, getConsoleStyle('event'), displayData);\n      } else {\n        log.debug(`(${env}) » %c${eventName}`, getConsoleStyle('event'));\n      }\n    }\n\n    // Actually fire the event that can be listened to via OneSignal.on()\n    if (Environment.isBrowser()) {\n      if (eventName === OneSignal.EVENTS.SDK_INITIALIZED) {\n        if (OneSignal.initialized)\n          return;\n        else\n          OneSignal.initialized = true;\n      }\n      OneSignal.emit(eventName, data);\n    }\n    if (LEGACY_EVENT_MAP.hasOwnProperty(eventName)) {\n      let legacyEventName = LEGACY_EVENT_MAP[eventName];\n      Event._triggerLegacy(legacyEventName, data);\n    }\n\n    // If this event was triggered in an iFrame or Popup environment, also trigger it on the host page\n    if (Environment.isBrowser() &&\n        (Environment.isPopup() || Environment.isIframe())) {\n      var creator = opener || parent;\n      if (!creator) {\n        log.error(`Could not send event '${eventName}' back to host page because no creator (opener or parent) found!`);\n      } else {\n        // But only if the event matches certain events\n        if (contains(RETRIGGER_REMOTE_EVENTS, eventName)) {\n          if (Environment.isPopup()) {\n            OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT, {eventName: eventName, eventData: data});\n          } else {\n            OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT, {eventName: eventName, eventData: data});\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Fires the event to be listened to via window.addEventListener().\n   * @param eventName The string event name.\n   * @param data Any JavaScript variable to be passed with the event.\n   * @private\n   */\n  static _triggerLegacy(eventName, data) {\n    var event = new CustomEvent(eventName, {\n      bubbles: true, cancelable: true, detail: data\n    });\n    // Fire the event that listeners can listen to via 'window.addEventListener()'\n    window.dispatchEvent(event);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Event.ts\n **/","export default class Environment {\n  static get SERVICE_WORKER() {\n    return 'ServiceWorker';\n  }\n\n  static get HOST() {\n    return \"host\";\n  }\n\n  static get POPUP() {\n    return \"popup\";\n  }\n\n  static get IFRAME() {\n    return \"iFrame\";\n  }\n\n  static isEs6DebuggingModule() {\n    return __IS_ES6__;\n  }\n\n  static getEnv() {\n    if (typeof window === \"undefined\") {\n      if (typeof WorkerLocation !== \"undefined\" && location instanceof WorkerLocation)\n        return Environment.SERVICE_WORKER;\n    }\n    else {\n      // If the window is the root top-most level\n      if (window === window.top) {\n        if (location.href.indexOf(\"initOneSignal\") !== -1 ||\n          (location.pathname === '/subscribe' &&\n          location.search === '') &&\n          (\n            location.hostname.endsWith('.onesignal.com') ||\n            (location.hostname.indexOf('.localhost') !== -1 && Environment.isDev())\n          )\n        )\n          return Environment.POPUP;\n        else\n          return Environment.HOST;\n      }\n      else if (location.pathname === '/webPushIframe' ||\n        location.pathname === '/webPushModal') {\n        return Environment.IFRAME;\n      }\n      else return Environment.CUSTOM_SUBDOMAIN;\n    }\n  }\n\n  static isServiceWorker() {\n    return Environment.getEnv() === Environment.SERVICE_WORKER;\n  }\n\n  /**\n   * The main site page.\n   */\n  static isHost() {\n    return Environment.getEnv() === Environment.HOST;\n  }\n\n  /**\n   * The HTTP popup asking users using our subdomain workaround to subscribe,\n   */\n  static isPopup() {\n    return Environment.getEnv() === Environment.POPUP;\n  }\n\n  static get CUSTOM_SUBDOMAIN() {\n    return \"custom_subdomain\";\n  }\n\n  /**\n   * The HTTPS iFrame we put on HTTP sites to communicate with the service worker and IndexedDB.\n   * @returns {boolean}\n   */\n  static isIframe() {\n    return Environment.getEnv() === Environment.IFRAME;\n  }\n\n  /**\n   * True if not in a service worker environment.\n   */\n  static isBrowser() {\n    return typeof window !== 'undefined';\n  }\n\n  static isStaging() {\n    return __STAGING__;\n  }\n\n  static isDev() {\n    return __DEV__;\n  }\n\n  static isTest() {\n    return __TEST__;\n  }\n\n  static isCustomSubdomain() {\n    return Environment.getEnv() === Environment.CUSTOM_SUBDOMAIN;\n  }\n\n  static get TRADITIONAL_CHINESE_LANGUAGE_TAG() {\n    return ['tw', 'hant']\n  }\n\n  static get SIMPLIFIED_CHINESE_LANGUAGE_TAG() {\n    return ['cn', 'hans']\n  }\n\n  /* Specifications: https://tools.ietf.org/html/bcp47 */\n  static getLanguage(testLanguage?) {\n    let languageTag = testLanguage || navigator.language;\n    if (languageTag) {\n      languageTag = languageTag.toLowerCase();\n      let languageSubtags = languageTag.split('-');\n      if (languageSubtags[0] == 'zh') {\n        // The language is zh-?\n        // We must categorize the language as either zh-Hans (simplified) or zh-Hant (traditional); OneSignal only supports these two Chinese variants\n        for (let traditionalSubtag of Environment.TRADITIONAL_CHINESE_LANGUAGE_TAG) {\n          if (languageSubtags.indexOf(traditionalSubtag) !== -1) {\n            return 'zh-Hant';\n          }\n        }\n        for (let simpleSubtag of Environment.SIMPLIFIED_CHINESE_LANGUAGE_TAG) {\n          if (languageSubtags.indexOf(simpleSubtag) !== -1) {\n            return 'zh-Hans';\n          }\n        }\n        return 'zh-Hant'; // Return Chinese traditional by default\n      } else {\n        // Return the language subtag (it can be three characters, so truncate it down to 2 just to be sure)\n        return languageSubtags[0].substring(0, 2);\n      }\n    } else {\n      return 'en';\n    }\n  }\n\n  static supportsServiceWorkers() {\n    return 'serviceWorker' in navigator;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Environment.ts\n **/","import * as EventEmitter from 'wolfy87-eventemitter';\nimport * as heir from 'heir';\nimport Event from './Event';\nimport IndexedDb from './IndexedDb';\nimport Environment from './Environment';\nimport {AppState} from \"./models/AppState\";\nimport {Subscription} from \"./models/Subscription\";\nimport {AppConfig} from \"./models/AppConfig\";\nimport {Uuid} from \"./models/Uuid\";\nimport {ServiceWorkerConfig} from \"./models/ServiceWorkerConfig\";\nimport {ServiceWorkerState} from \"./models/ServiceWorkerState\";\nimport {Notification} from \"./models/Notification\";\nimport SubscriptionHelper from \"./helpers/SubscriptionHelper\";\nimport {Timestamp} from \"./models/Timestamp\";\n\nexport default class Database {\n\n  static get EVENTS() {\n    return {\n      REBUILT: 'dbRebuilt',\n      RETRIEVED: 'dbRetrieved',\n      SET: 'dbSet',\n      REMOVED: 'dbRemoved',\n    }\n  }\n\n  static _getReturnHelper(table: string, key: string, result) {\n    switch (table) {\n      case 'Options':\n        if (result && key) {\n          return result.value;\n        } else if (result && !key) {\n          return result;\n        } else {\n          return null;\n        }\n        break;\n      case 'Ids':\n        if (result && key) {\n          return result.id;\n        } else if (result && !key) {\n          return result;\n        } else {\n          return null;\n        }\n        break;\n      case 'NotificationOpened':\n        if (result && key) {\n          return {data: result.data, timestamp: result.timestamp};\n        } else if (result && !key) {\n          return result;\n        } else {\n          return null;\n        }\n        break;\n      default:\n        if (result) {\n          return result;\n        } else {\n          return null;\n        }\n        break;\n    }\n  }\n\n  /**\n   * Asynchronously retrieves the value of the key at the table (if key is specified), or the entire table (if key is not specified).\n   * If on an iFrame or popup environment, retrieves from the correct IndexedDB database using cross-domain messaging.\n   * @param table The table to retrieve the value from.\n   * @param key The key in the table to retrieve the value of. Leave blank to get the entire table.\n   * @returns {Promise} Returns a promise that fulfills when the value(s) are available.\n   */\n  static get<T>(table: string, key?: string): Promise<T> {\n    return new Promise((resolve) => {\n      if (!Environment.isServiceWorker() && SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n        OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET, [{table: table, key: key}], reply => {\n          let result = reply.data[0];\n          Event.trigger(Database.EVENTS.RETRIEVED, {table: table, key: key, result: result});\n          resolve(result);\n        });\n      } else {\n        return IndexedDb.get(table, key)\n          .then(result => {\n            let cleanResult = Database._getReturnHelper(table, key, result);\n            Event.trigger(Database.EVENTS.RETRIEVED, {table: table, key: key, result: cleanResult});\n            resolve(cleanResult);\n          });\n      }\n    });\n  }\n\n  /**\n   * Asynchronously puts the specified value in the specified table.\n   * @param table\n   * @param keypath\n   */\n  static put(table: string, keypath: any) {\n    return new Promise((resolve, reject) => {\n      if (!Environment.isServiceWorker() && SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n        OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT, [{table: table, keypath: keypath}], reply => {\n          if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\n            Event.trigger(Database.EVENTS.SET, keypath);\n            resolve();\n          } else {\n            reject(`(Database) Attempted remote IndexedDB put(${table}, ${keypath}), but did not get success response.`);\n          }\n        });\n      } else {\n        return IndexedDb.put(table, keypath)\n          .then(() => {\n            Event.trigger(Database.EVENTS.SET, keypath);\n            resolve();\n          });\n      }\n    });\n  }\n\n  /**\n   * Asynchronously removes the specified key from the table, or if the key is not specified, removes all keys in the table.\n   * @returns {Promise} Returns a promise containing a key that is fulfilled when deletion is completed.\n   */\n  static remove(table: string, keypath?: string) {\n    return new Promise((resolve, reject) => {\n      if (!Environment.isServiceWorker() && SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n        OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE, [{table: table, keypath: keypath}], reply => {\n          if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\n            Event.trigger(Database.EVENTS.REMOVED, [table, keypath]);\n            resolve();\n          } else {\n            reject(`(Database) Attempted remote IndexedDB remove(${table}, ${keypath}), but did not get success response.`);\n          }\n        });\n      } else {\n        return IndexedDb.remove(table, keypath)\n          .then(() => {\n            Event.trigger(Database.EVENTS.REMOVED, [table, keypath]);\n            resolve();\n          });\n      }\n    });\n  }\n\n  static async getAppConfig(): Promise<AppConfig> {\n    const config = new AppConfig();\n    config.appId = await Database.get<Uuid>('Ids', 'appId');\n    config.subdomain = await Database.get<string>('Options', 'subdomain');\n    config.autoRegister = await Database.get<boolean>('Options', 'autoRegister');\n    config.serviceWorkerConfig = await Database.get<ServiceWorkerConfig>('Options', 'serviceWorkerConfig');\n    return config;\n  }\n\n  static async setAppConfig(appConfig: AppConfig) {\n    if (appConfig.appId)\n      await Database.put('Ids', {type: 'appId', id: appConfig.appId})\n    if (appConfig.subdomain)\n      await Database.put('Options', {key: 'subdomain', value: appConfig.subdomain})\n    if (appConfig.autoRegister)\n      await Database.put('Options', {key: 'autoRegister', value: appConfig.autoRegister})\n    if (appConfig.serviceWorkerConfig)\n      await Database.put('Options', {key: 'serviceWorkerConfig', value: appConfig.serviceWorkerConfig})\n  }\n\n  static async getAppState(): Promise<AppState> {\n    const state = new AppState();\n    state.defaultNotificationUrl = await Database.get<URL>('Options', 'defaultUrl');\n    state.defaultNotificationTitle = await Database.get<string>('Options', 'defaultTitle');\n    state.lastKnownPushEnabled = await Database.get<boolean>('Options', 'isPushEnabled');\n    state.clickedNotifications = await Database.get<Map<URL, [Notification, Timestamp]>>('NotificationOpened');\n    return state;\n  }\n\n  static async setAppState(appState: AppState) {\n    if (appState.defaultNotificationUrl)\n      await Database.put(\"Options\", {key: \"defaultUrl\", value: appState.defaultNotificationUrl});\n    if (appState.defaultNotificationTitle)\n      await Database.put(\"Options\", {key: \"defaultTitle\", value: appState.defaultNotificationTitle});\n    if (appState.lastKnownPushEnabled != null)\n      await Database.put('Options', {key: 'isPushEnabled', value: appState.lastKnownPushEnabled});\n    if (appState.clickedNotifications) {\n      const clickedNotificationUrls = Object.keys(appState.clickedNotifications);\n      for (let url of clickedNotificationUrls) {\n        const notificationDetails = appState.clickedNotifications[url];\n        if (notificationDetails) {\n          await Database.put('NotificationOpened', {\n            url: url,\n            data: (notificationDetails as any).data,\n            timestamp: (notificationDetails as any).timestamp\n          });\n        } else if (notificationDetails === null) {\n          // If we get an object like:\n          // { \"http://site.com/page\": null}\n          // It means we need to remove that entry\n          await Database.remove('NotificationOpened', url);\n        }\n      }\n    }\n  }\n\n  static async getServiceWorkerConfig(): Promise<ServiceWorkerConfig> {\n    const config = new ServiceWorkerConfig();\n    config.scope = await Database.get<string>('Options', 'workerScope');\n    config.workerName = await Database.get<string>('Options', 'workerName');\n    config.updaterWorkerName = await Database.get<string>('Options', 'updaterWorkerName');\n    config.workerFilePath = await Database.get<string>('Options', 'workerFilePath');\n    return config;\n  }\n\n  static async setServiceWorkerConfig(config: ServiceWorkerConfig) {\n    if (config.scope)\n      await Database.put('Options', {key: 'workerScope', value: config.scope});\n    if (config.workerName)\n      await Database.put('Options', {key: 'workerName', value: config.workerName});\n    if (config.updaterWorkerName)\n      await Database.put('Options', {key: 'updaterWorkerName', value: config.updaterWorkerName});\n    if (config.workerFilePath)\n      await Database.put('Options', {key: 'workerFilePath', value: config.workerFilePath});\n  }\n\n  static async getServiceWorkerState(): Promise<ServiceWorkerState> {\n    const state = new ServiceWorkerState();\n    state.workerVersion = await Database.get<number>('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION');\n    state.updaterWorkerVersion = await Database.get<number>('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION');\n    state.backupNotification = await Database.get<Notification>('Ids', 'backupNotification');\n    return state;\n  }\n\n  static async setServiceWorkerState(state: ServiceWorkerState) {\n    if (state.workerVersion)\n      await Database.put('Ids', {type: 'WORKER1_ONE_SIGNAL_SW_VERSION', id: state.workerVersion});\n    if (state.updaterWorkerVersion)\n      await Database.put('Ids', {type: 'WORKER2_ONE_SIGNAL_SW_VERSION', id: state.updaterWorkerVersion});\n    if (state.backupNotification)\n      await Database.put('Ids', {type: 'backupNotification', id: state.backupNotification});\n  }\n\n  static async getSubscription(): Promise<Subscription> {\n    const subscription = new Subscription();\n    subscription.deviceId = await Database.get<Uuid>('Ids', 'userId');\n    subscription.pushEndpoint = await Database.get<URL>('Options', 'subscriptionEndpoint');\n    subscription.pushToken = await Database.get<string>('Ids', 'registrationId');\n\n    // The preferred database key to store our subscription\n    const dbOptedOut = await Database.get<boolean>('Options', 'optedOut');\n    // For backwards compatibility, we need to read from this if the above is not found\n    const dbNotOptedOut = await Database.get<boolean>('Options', 'subscription');\n\n    if (dbOptedOut != null) {\n      subscription.optedOut = dbOptedOut;\n    } else {\n      if (dbNotOptedOut == null) {\n        subscription.optedOut = false;\n      } else {\n        subscription.optedOut = !dbNotOptedOut;\n      }\n    }\n\n    return subscription;\n  }\n\n  static async setSubscription(subscription: Subscription) {\n    if (subscription.deviceId)\n      await Database.put('Ids', {type: 'userId', id: subscription.deviceId});\n    if (subscription.pushEndpoint)\n      await Database.put('Options', {key: 'subscriptionEndpoint', value: subscription.pushEndpoint});\n    if (subscription.pushToken)\n      await Database.put('Ids', {type: 'registrationId', id: subscription.pushToken});\n    if (subscription.optedOut != null) // Checks if null or undefined, allows false\n      await Database.put('Options', {key: 'optedOut', value: subscription.optedOut});\n  }\n\n  /**\n   * Asynchronously removes the Ids, NotificationOpened, and Options tables from the database and recreates them with blank values.\n   * @returns {Promise} Returns a promise that is fulfilled when rebuilding is completed, or rejects with an error.\n   */\n  static rebuild() {\n    return Promise.all([\n      Database.remove('Ids'),\n      Database.remove('NotificationOpened'),\n      Database.remove('Options'),\n    ]);\n  }\n\n  static printIds() {\n    return Promise.all([\n      Database.get('Ids', 'appId'),\n      Database.get('Ids', 'registrationId'),\n      Database.get('Ids', 'userId')\n    ]).then(function([appId, registrationId, userId]) {\n      if (console.table) {\n       console.table({'OneSignal Database IDs': {\n         'App ID': appId,\n         'Registration ID': registrationId,\n         'User ID': userId\n       }});\n      } else {\n        log.info('App ID:', appId);\n        log.info('Registration ID:', registrationId);\n        log.info('User ID:', userId);\n      }\n    });\n  }\n}\n\nheir.merge(Database, new EventEmitter());\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Database.ts\n **/","import { DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL } from '../vars';\r\nimport Environment from '../Environment';\r\nimport OneSignalApi from '../OneSignalApi';\r\nimport * as log from 'loglevel';\r\nimport LimitStore from '../LimitStore';\r\nimport Event from \"../Event\";\r\nimport Database from '../Database';\r\nimport * as Browser from 'bowser';\r\nimport {\r\n  getConsoleStyle, contains, normalizeSubdomain, getDeviceTypeForBrowser, capitalize,\r\n  unsubscribeFromPush, executeAndTimeoutPromiseAfter\r\n} from '../utils';\r\nimport * as objectAssign from 'object-assign';\r\nimport * as EventEmitter from 'wolfy87-eventemitter';\r\nimport * as heir from 'heir';\r\nimport * as swivel from 'swivel';\r\nimport Postmam from '../Postmam';\r\nimport * as Cookie from 'js-cookie';\r\nimport MainHelper from \"./MainHelper\";\r\nimport ServiceWorkerHelper from \"./ServiceWorkerHelper\";\r\nimport EventHelper from \"./EventHelper\";\r\nimport PushPermissionNotGrantedError from \"../errors/PushPermissionNotGrantedError\";\r\nimport TestHelper from \"./TestHelper\";\r\n\r\ndeclare var OneSignal: any;\r\n\r\n\r\nexport default class SubscriptionHelper {\r\n  /**\r\n   * Returns a Promise resolving to whether user subscriptions should be reset. This means clearing all of IndexedDB\r\n   * and actually unsubscribing from push notifications.\r\n   *\r\n   * Subscriptions are only wiped if the following conditions are met:\r\n   *   - The flag dangerouslyResetUserSubscriptions is set to any string  (used to name the \"reset session\")\r\n   *   - This user wasn't already reset (does this \"reset session name\" exist already)\r\n   *   - The site is using an HTTPS native integration  (HTTP sites can only reset subscriptions when the popup is open)\r\n   */\r\n  static shouldResetUserSubscription() {\r\n    return Promise.all([\r\n      OneSignal.config.dangerouslyResetUserSubscriptions,\r\n      Database.get('Options', 'userSubscriptionResetToken'),\r\n      SubscriptionHelper.isUsingSubscriptionWorkaround()\r\n    ]).then(([isFlagPresent, resetToken, isUsingWorkaround]) => {\r\n      return (isFlagPresent &&\r\n      resetToken !== OneSignal.config.dangerouslyResetUserSubscriptions && !isUsingWorkaround);\r\n    });\r\n  }\r\n\r\n  static checkAndWipeUserSubscription() {\r\n    return Promise.all([\r\n      OneSignal.isPushNotificationsEnabled(),\r\n      SubscriptionHelper.shouldResetUserSubscription()\r\n    ]).then(([wasPushOriginallyEnabled, shouldResetSubscription]) => {\r\n      if (shouldResetSubscription) {\r\n        log.warn(`OneSignal: Resetting user subscription. Wiping IndexedDB, unsubscribing from, ` +\r\n          `and resubscribing to push...`);\r\n        sessionStorage.clear();\r\n        return Database.rebuild()\r\n                       .then(() => Database.put('Options', {key: 'pageTitle', value: document.title}))\r\n                       .then(() => unsubscribeFromPush())\r\n                       .then(() => Database.put('Options', {\r\n                         key: 'userSubscriptionResetToken',\r\n                         value: OneSignal.config.dangerouslyResetUserSubscriptions\r\n                       }))\r\n                       .then(() => {\r\n                         if (wasPushOriginallyEnabled) {\r\n                           OneSignal.__doNotShowWelcomeNotification = true;\r\n                           log.warn('Wiped subscription and attempting to resubscribe.');\r\n                           return Database.put('Ids', {type: 'appId', id: OneSignal.config.appId})\r\n                         } else {\r\n                           Promise.reject('Wiped subscription, but not resubscribing because user was not originally subscribed.');\r\n                         }\r\n                       })\r\n                       .then(() => {\r\n                         OneSignal.registerForPushNotifications();\r\n                       });\r\n      }\r\n    });\r\n  }\r\n\r\n  static registerForW3CPush(options) {\r\n    log.debug(`Called %cregisterForW3CPush(${JSON.stringify(options)})`, getConsoleStyle('code'));\r\n    return Database.get('Ids', 'registrationId')\r\n                   .then(function _registerForW3CPush_GotRegistrationId(registrationIdResult) {\r\n                     if (!registrationIdResult || !options.fromRegisterFor || window.Notification.permission != \"granted\" || navigator.serviceWorker.controller == null) {\r\n                       navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\r\n                         var sw_path = \"\";\r\n\r\n                         if (OneSignal.config.path)\r\n                           sw_path = OneSignal.config.path;\r\n\r\n                         if (typeof serviceWorkerRegistration === \"undefined\") // Nothing registered, very first run\r\n                           ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                         else {\r\n                           if (serviceWorkerRegistration.active) {\r\n                             let previousWorkerUrl = serviceWorkerRegistration.active.scriptURL;\r\n                             if (contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_PATH)) {\r\n                               // OneSignalSDKWorker.js was installed\r\n                               Database.get('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION')\r\n                                       .then(function (version) {\r\n                                         if (version) {\r\n                                           if (version != OneSignal._VERSION) {\r\n                                             log.info(`Installing new service worker (${version} -> ${OneSignal._VERSION})`);\r\n                                             ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\r\n                                           }\r\n                                           else\r\n                                             ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                                         }\r\n                                         else\r\n                                           ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\r\n                                       });\r\n                             }\r\n                             else if (contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH)) {\r\n                               // OneSignalSDKUpdaterWorker.js was installed\r\n                               Database.get('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION')\r\n                                       .then(function (version) {\r\n                                         if (version) {\r\n                                           if (version != OneSignal._VERSION) {\r\n                                             log.info(`Installing new service worker (${version} -> ${OneSignal._VERSION})`);\r\n                                             ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                                           }\r\n                                           else\r\n                                             ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH);\r\n                                         }\r\n                                         else\r\n                                           ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                                       });\r\n                             } else {\r\n                               // Some other service worker not belonging to us was installed\r\n                               // Install ours over it after unregistering theirs to get a different registration token and avoid mismatchsenderid error\r\n                               log.info('Unregistering previous service worker:', serviceWorkerRegistration);\r\n                               serviceWorkerRegistration.unregister().then(unregistrationSuccessful => {\r\n                                 log.info('Result of unregistering:', unregistrationSuccessful);\r\n                                 ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                               });\r\n                             }\r\n                           }\r\n                           else if (serviceWorkerRegistration.installing == null)\r\n                             ServiceWorkerHelper.registerServiceWorker(sw_path + OneSignal.SERVICE_WORKER_PATH);\r\n                         }\r\n                       });\r\n                     }\r\n                   });\r\n  }\r\n\r\n  static enableNotifications(existingServiceWorkerRegistration) { // is ServiceWorkerRegistration type\r\n    log.debug(`Called %cenableNotifications()`, getConsoleStyle('code'));\r\n    if (!('PushManager' in window)) {\r\n      log.info(\"Push messaging is not supported. No PushManager.\");\r\n      MainHelper.beginTemporaryBrowserSession();\r\n      return;\r\n    }\r\n\r\n    if (window.Notification.permission === 'denied') {\r\n      log.warn(\"The user has blocked notifications.\");\r\n      return;\r\n    }\r\n\r\n    log.debug(`Calling %cnavigator.serviceWorker.ready() ...`, getConsoleStyle('code'));\r\n    navigator.serviceWorker.ready.then(function (serviceWorkerRegistration) {\r\n      log.debug('Finished calling %cnavigator.serviceWorker.ready', getConsoleStyle('code'));\r\n      MainHelper.establishServiceWorkerChannel(serviceWorkerRegistration);\r\n      SubscriptionHelper.subscribeForPush(serviceWorkerRegistration);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns true if web push subscription occurs on a subdomain of OneSignal.\r\n   * If true, our main IndexedDB is stored on the subdomain of onesignal.com, and not the user's site.\r\n   * @remarks\r\n   *   This method returns true if:\r\n   *     - The browser is not Safari\r\n   *         - Safari uses a different method of subscription and does not require our workaround\r\n   *     - The init parameters contain a subdomain (even if the protocol is HTTPS)\r\n   *         - HTTPS users using our subdomain workaround still have the main IndexedDB stored on our subdomain\r\n   *        - The protocol of the current webpage is http:\r\n   *   Exceptions are:\r\n   *     - Safe hostnames like localhost and 127.0.0.1\r\n   *          - Because we don't want users to get the wrong idea when testing on localhost that direct permission is supported on HTTP, we'll ignore these exceptions. HTTPS will always be required for direct permission\r\n   *        - We are already in popup or iFrame mode, or this is called from the service worker\r\n   */\r\n  static isUsingSubscriptionWorkaround() {\r\n    if (!OneSignal.config) {\r\n      throw new Error(`(${Environment.getEnv()}) isUsingSubscriptionWorkaround() cannot be called until OneSignal.config exists.`);\r\n    }\r\n    if (Browser.safari) {\r\n      return false;\r\n    }\r\n\r\n    if (SubscriptionHelper.isLocalhostAllowedAsSecureOrigin() &&\r\n        location.hostname === 'localhost' ||\r\n        (location.hostname as any) === '127.0.0.1') {\r\n      return false;\r\n    }\r\n\r\n    return (Environment.isHost() &&\r\n            (!!OneSignal.config.subdomainName || location.protocol === 'http:'));\r\n  }\r\n\r\n  static isLocalhostAllowedAsSecureOrigin() {\r\n    return OneSignal.config && OneSignal.config.allowLocalhostAsSecureOrigin === true;\r\n  }\r\n\r\n  static subscribeForPush(serviceWorkerRegistration) {\r\n    log.debug(`Called %c_subscribeForPush()`, getConsoleStyle('code'));\r\n    var notificationPermissionBeforeRequest = '';\r\n\r\n    OneSignal.getNotificationPermission().then((permission) => {\r\n      notificationPermissionBeforeRequest = permission as string;\r\n    })\r\n             .then(() => {\r\n               log.debug(`Calling %cServiceWorkerRegistration.pushManager.subscribe()`, getConsoleStyle('code'));\r\n               Event.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED);\r\n               /*\r\n                7/29/16: If the user dismisses the prompt, the prompt cannot be shown again via pushManager.subscribe()\r\n                See: https://bugs.chromium.org/p/chromium/issues/detail?id=621461\r\n                Our solution is to call Notification.requestPermission(), and then call\r\n                pushManager.subscribe(). Because notification and push permissions are shared, the subesequent call to\r\n                pushManager.subscribe() will go through successfully.\r\n                */\r\n               return MainHelper.requestNotificationPermissionPromise();\r\n             })\r\n             .then(permission => {\r\n               if (permission !== \"granted\") {\r\n                 throw new PushPermissionNotGrantedError();\r\n               } else {\r\n                 return executeAndTimeoutPromiseAfter(\r\n                   serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly: true}),\r\n                   15000,\r\n                   \"A possible Chrome bug (https://bugs.chromium.org/p/chromium/issues/detail?id=623062) is preventing this subscription from completing.\"\r\n                 );\r\n               }\r\n             })\r\n             .then(function (subscription: any) {\r\n               /*\r\n                7/29/16: New bug, even if the user dismisses the prompt, they'll be given a subscription\r\n                See: https://bugs.chromium.org/p/chromium/issues/detail?id=621461\r\n                Our solution is simply to check the permission before actually subscribing the user.\r\n                */\r\n               log.debug(`Finished calling %cServiceWorkerRegistration.pushManager.subscribe()`,\r\n                 getConsoleStyle('code'));\r\n               log.debug('Subscription details:', subscription);\r\n               // The user allowed the notification permission prompt, or it was already allowed; set sessionInit flag to false\r\n               OneSignal._sessionInitAlreadyRunning = false;\r\n               sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", window.Notification.permission);\r\n\r\n               MainHelper.getAppId()\r\n                        .then(appId => {\r\n                          log.debug(\"Finished subscribing for push via pushManager.subscribe().\");\r\n\r\n                          var subscriptionInfo: any = {};\r\n                          if (subscription) {\r\n                            if (typeof (subscription).subscriptionId != \"undefined\") {\r\n                              // Chrome 43 & 42\r\n                              subscriptionInfo.endpointOrToken = subscription.subscriptionId;\r\n                            }\r\n                            else {\r\n                              // Chrome 44+ and FireFox\r\n                              // 4/13/16: We now store the full endpoint instead of just the registration token\r\n                              subscriptionInfo.endpointOrToken = subscription.endpoint;\r\n                            }\r\n\r\n                            // 4/13/16: Retrieve p256dh and auth for new encrypted web push protocol in Chrome 50\r\n                            if (subscription.getKey) {\r\n                              // p256dh and auth are both ArrayBuffer\r\n                              let p256dh = null;\r\n                              try {\r\n                                p256dh = subscription.getKey('p256dh');\r\n                              } catch (e) {\r\n                                // User is most likely running < Chrome < 50\r\n                              }\r\n                              let auth = null;\r\n                              try {\r\n                                auth = subscription.getKey('auth');\r\n                              } catch (e) {\r\n                                // User is most likely running < Firefox 45\r\n                              }\r\n\r\n                              if (p256dh) {\r\n                                // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\r\n                                let p256dh_base64encoded = btoa(\r\n                                  String.fromCharCode.apply(null, new Uint8Array(p256dh)));\r\n                                subscriptionInfo.p256dh = p256dh_base64encoded;\r\n                              }\r\n                              if (auth) {\r\n                                // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\r\n                                let auth_base64encoded = btoa(\r\n                                  String.fromCharCode.apply(null, new Uint8Array(auth)));\r\n                                subscriptionInfo.auth = auth_base64encoded;\r\n                              }\r\n                            }\r\n                          }\r\n                          else\r\n                            log.warn('Could not subscribe your browser for push notifications.');\r\n\r\n                          if (OneSignal._thisIsThePopup) {\r\n                            // 12/16/2015 -- At this point, the user has just clicked Allow on the HTTP popup!!\r\n                            // 11/22/2016 - HTTP popup should move non-essential subscription parts to the iframe\r\n                            OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION, {\r\n                              subscriptionInfo: subscriptionInfo\r\n                            }, message => {\r\n                              if (message.data.progress === true) {\r\n                                log.debug('Got message from host page that remote reg. is in progress, closing popup.');\r\n                                var creator = opener || parent;\r\n                                if (opener) {\r\n                                  /* Note: This is hard to find, but this is actually the code that closes the HTTP popup window */\r\n                                  window.close();\r\n                                }\r\n                              } else {\r\n                                log.debug('Got message from host page that remote reg. could not be finished.');\r\n                              }\r\n                            });\r\n                          } else {\r\n                            // If we are not doing HTTP subscription, continue finish subscribing by registering with OneSignal\r\n                            MainHelper.registerWithOneSignal(appId, subscriptionInfo);\r\n                          }\r\n                        });\r\n             })\r\n             .catch(function (e) {\r\n               OneSignal._sessionInitAlreadyRunning = false;\r\n               if (e.message === 'Registration failed - no sender id provided' || e.message === 'Registration failed - manifest empty or missing') {\r\n                 let manifestDom = document.querySelector('link[rel=manifest]');\r\n                 if (manifestDom) {\r\n                   let manifestParentTagname = (document as any).querySelector('link[rel=manifest]').parentNode.tagName.toLowerCase();\r\n                   let manifestHtml = (document as any).querySelector('link[rel=manifest]').outerHTML;\r\n                   let manifestLocation = (document as any).querySelector('link[rel=manifest]').href;\r\n                   if (manifestParentTagname !== 'head') {\r\n                     log.warn(`OneSignal: Your manifest %c${manifestHtml}`,\r\n                       getConsoleStyle('code'),\r\n                       'must be referenced in the <head> tag to be detected properly. It is currently referenced ' +\r\n                       'in <${manifestParentTagname}>. Please see step 3.1 at ' +\r\n                       'https://documentation.onesignal.com/docs/web-push-sdk-setup-https.');\r\n                   } else {\r\n                     let manifestLocationOrigin = new URL(manifestLocation).origin;\r\n                     let currentOrigin = location.origin;\r\n                     if (currentOrigin !== manifestLocationOrigin) {\r\n                       log.warn(`OneSignal: Your manifest is being served from ${manifestLocationOrigin}, which is ` +\r\n                         `different from the current page's origin of ${currentOrigin}. Please serve your ` +\r\n                         `manifest from the same origin as your page's. If you are using a content delivery ` +\r\n                         `network (CDN), please add an exception so that the manifest is not served by your CDN. ` +\r\n                         `WordPress users, please see ` +\r\n                         `https://documentation.onesignal.com/docs/troubleshooting-web-push#section-wordpress-cdn-support.`);\r\n                     } else {\r\n                       log.warn(`OneSignal: Please check your manifest at ${manifestLocation}. The %cgcm_sender_id`,\r\n                         getConsoleStyle('code'),\r\n                         \"field is missing or invalid, and a valid value is required. Please see step 2 at \" +\r\n                         \"https://documentation.onesignal.com/docs/web-push-sdk-setup-https.\");\r\n                     }\r\n                   }\r\n                 } else if (location.protocol === 'https:') {\r\n                   log.warn(`OneSignal: You must reference a %cmanifest.json`,\r\n                     getConsoleStyle('code'),\r\n                     \"in the <head> of your page. Please see step 2 at \" +\r\n                     \"https://documentation.onesignal.com/docs/web-push-sdk-setup-https.\");\r\n                 }\r\n               } else {\r\n                 log.error('Error while subscribing for push:', e);\r\n               }\r\n\r\n               // In Chrome, closing a tab while the prompt is displayed is the same as dismissing the prompt by clicking X\r\n               // Our SDK receives the same event as if the user clicked X, when in fact the user just closed the tab. If\r\n               // we had some code that prevented showing the prompt for 8 hours, the user would accidentally not be able\r\n               // to subscribe.\r\n\r\n               // New addition (12/22/2015), adding support for detecting the cancel 'X'\r\n               // Chrome doesn't show when the user clicked 'X' for cancel\r\n               // We get the same error as if the user had clicked denied, but we can check Notification.permission to see if it is still 'default'\r\n               OneSignal.getNotificationPermission().then((permission) => {\r\n                 if (permission === 'default') {\r\n                   // The user clicked 'X'\r\n                   EventHelper.triggerNotificationPermissionChanged(true);\r\n                   TestHelper.markHttpsNativePromptDismissed();\r\n                 }\r\n\r\n                 if (!OneSignal._usingNativePermissionHook)\r\n                   EventHelper.triggerNotificationPermissionChanged();\r\n\r\n                 if (opener && OneSignal._thisIsThePopup)\r\n                   window.close();\r\n               });\r\n\r\n               // If there was an error subscribing like the timeout bug, close the popup anyways\r\n               if (opener && OneSignal._thisIsThePopup)\r\n                 window.close();\r\n             });\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers/SubscriptionHelper.ts\n **/","import Environment from \"./Environment\";\n\n\nexport const DEV_HOST = 'https://oregon:3001';\nexport const DEV_FRAME_HOST = 'https://washington.localhost:3001';\nexport const DEV_PREFIX = 'Dev-';\nexport const PROD_HOST = 'https://onesignal.com';\nexport const STAGING_HOST = 'https://onesignal-staging.pw';\nexport const STAGING_FRAME_HOST = 'https://washington.onesignal-staging.pw';\nexport const STAGING_PREFIX = 'Staging-';\n\nvar HOST_URL;\nvar API_URL;\nif (Environment.isDev()) {\n    HOST_URL = DEV_HOST;\n    API_URL = DEV_HOST + '/api/v1/';\n} else if (Environment.isStaging()) {\n    HOST_URL = STAGING_HOST;\n    API_URL = STAGING_HOST + '/api/v1/';\n} else {\n    HOST_URL = PROD_HOST;\n    API_URL = PROD_HOST + '/api/v1/';\n}\n\nexport { HOST_URL, API_URL };\n\n\n/** WEBPACK FOOTER **\n ** ./src/vars.ts\n **/","/*!\n * Bowser - a browser detector\n * https://github.com/ded/bowser\n * MIT License | (c) Dustin Diaz 2015\n */\n\n!function (name, definition) {\n  if (typeof module != 'undefined' && module.exports) module.exports = definition()\n  else if (typeof define == 'function' && define.amd) define(name, definition)\n  else this[name] = definition()\n}('bowser', function () {\n  /**\n    * See useragents.js for examples of navigator.userAgent\n    */\n\n  var t = true\n\n  function detect(ua) {\n\n    function getFirstMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[1]) || '';\n    }\n\n    function getSecondMatch(regex) {\n      var match = ua.match(regex);\n      return (match && match.length > 1 && match[2]) || '';\n    }\n\n    var iosdevice = getFirstMatch(/(ipod|iphone|ipad)/i).toLowerCase()\n      , likeAndroid = /like android/i.test(ua)\n      , android = !likeAndroid && /android/i.test(ua)\n      , nexusMobile = /nexus\\s*[0-6]\\s*/i.test(ua)\n      , nexusTablet = !nexusMobile && /nexus\\s*[0-9]+/i.test(ua)\n      , chromeos = /CrOS/.test(ua)\n      , silk = /silk/i.test(ua)\n      , sailfish = /sailfish/i.test(ua)\n      , tizen = /tizen/i.test(ua)\n      , webos = /(web|hpw)os/i.test(ua)\n      , windowsphone = /windows phone/i.test(ua)\n      , samsungBrowser = /SamsungBrowser/i.test(ua)\n      , windows = !windowsphone && /windows/i.test(ua)\n      , mac = !iosdevice && !silk && /macintosh/i.test(ua)\n      , linux = !android && !sailfish && !tizen && !webos && /linux/i.test(ua)\n      , edgeVersion = getFirstMatch(/edge\\/(\\d+(\\.\\d+)?)/i)\n      , versionIdentifier = getFirstMatch(/version\\/(\\d+(\\.\\d+)?)/i)\n      , tablet = /tablet/i.test(ua)\n      , mobile = !tablet && /[^-]mobi/i.test(ua)\n      , xbox = /xbox/i.test(ua)\n      , result\n\n    if (/opera/i.test(ua)) {\n      //  an old Opera\n      result = {\n        name: 'Opera'\n      , opera: t\n      , version: versionIdentifier || getFirstMatch(/(?:opera|opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/opr|opios/i.test(ua)) {\n      // a new Opera\n      result = {\n        name: 'Opera'\n        , opera: t\n        , version: getFirstMatch(/(?:opr|opios)[\\s\\/](\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/SamsungBrowser/i.test(ua)) {\n      result = {\n        name: 'Samsung Internet for Android'\n        , samsungBrowser: t\n        , version: versionIdentifier || getFirstMatch(/(?:SamsungBrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/coast/i.test(ua)) {\n      result = {\n        name: 'Opera Coast'\n        , coast: t\n        , version: versionIdentifier || getFirstMatch(/(?:coast)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/yabrowser/i.test(ua)) {\n      result = {\n        name: 'Yandex Browser'\n      , yandexbrowser: t\n      , version: versionIdentifier || getFirstMatch(/(?:yabrowser)[\\s\\/](\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/ucbrowser/i.test(ua)) {\n      result = {\n          name: 'UC Browser'\n        , ucbrowser: t\n        , version: getFirstMatch(/(?:ucbrowser)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/mxios/i.test(ua)) {\n      result = {\n        name: 'Maxthon'\n        , maxthon: t\n        , version: getFirstMatch(/(?:mxios)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/epiphany/i.test(ua)) {\n      result = {\n        name: 'Epiphany'\n        , epiphany: t\n        , version: getFirstMatch(/(?:epiphany)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/puffin/i.test(ua)) {\n      result = {\n        name: 'Puffin'\n        , puffin: t\n        , version: getFirstMatch(/(?:puffin)[\\s\\/](\\d+(?:\\.\\d+)?)/i)\n      }\n    }\n    else if (/sleipnir/i.test(ua)) {\n      result = {\n        name: 'Sleipnir'\n        , sleipnir: t\n        , version: getFirstMatch(/(?:sleipnir)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (/k-meleon/i.test(ua)) {\n      result = {\n        name: 'K-Meleon'\n        , kMeleon: t\n        , version: getFirstMatch(/(?:k-meleon)[\\s\\/](\\d+(?:\\.\\d+)+)/i)\n      }\n    }\n    else if (windowsphone) {\n      result = {\n        name: 'Windows Phone'\n      , windowsphone: t\n      }\n      if (edgeVersion) {\n        result.msedge = t\n        result.version = edgeVersion\n      }\n      else {\n        result.msie = t\n        result.version = getFirstMatch(/iemobile\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/msie|trident/i.test(ua)) {\n      result = {\n        name: 'Internet Explorer'\n      , msie: t\n      , version: getFirstMatch(/(?:msie |rv:)(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (chromeos) {\n      result = {\n        name: 'Chrome'\n      , chromeos: t\n      , chromeBook: t\n      , chrome: t\n      , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    } else if (/chrome.+? edge/i.test(ua)) {\n      result = {\n        name: 'Microsoft Edge'\n      , msedge: t\n      , version: edgeVersion\n      }\n    }\n    else if (/vivaldi/i.test(ua)) {\n      result = {\n        name: 'Vivaldi'\n        , vivaldi: t\n        , version: getFirstMatch(/vivaldi\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (sailfish) {\n      result = {\n        name: 'Sailfish'\n      , sailfish: t\n      , version: getFirstMatch(/sailfish\\s?browser\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/seamonkey\\//i.test(ua)) {\n      result = {\n        name: 'SeaMonkey'\n      , seamonkey: t\n      , version: getFirstMatch(/seamonkey\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/firefox|iceweasel|fxios/i.test(ua)) {\n      result = {\n        name: 'Firefox'\n      , firefox: t\n      , version: getFirstMatch(/(?:firefox|iceweasel|fxios)[ \\/](\\d+(\\.\\d+)?)/i)\n      }\n      if (/\\((mobile|tablet);[^\\)]*rv:[\\d\\.]+\\)/i.test(ua)) {\n        result.firefoxos = t\n      }\n    }\n    else if (silk) {\n      result =  {\n        name: 'Amazon Silk'\n      , silk: t\n      , version : getFirstMatch(/silk\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/phantom/i.test(ua)) {\n      result = {\n        name: 'PhantomJS'\n      , phantom: t\n      , version: getFirstMatch(/phantomjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/slimerjs/i.test(ua)) {\n      result = {\n        name: 'SlimerJS'\n        , slimer: t\n        , version: getFirstMatch(/slimerjs\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (/blackberry|\\bbb\\d+/i.test(ua) || /rim\\stablet/i.test(ua)) {\n      result = {\n        name: 'BlackBerry'\n      , blackberry: t\n      , version: versionIdentifier || getFirstMatch(/blackberry[\\d]+\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (webos) {\n      result = {\n        name: 'WebOS'\n      , webos: t\n      , version: versionIdentifier || getFirstMatch(/w(?:eb)?osbrowser\\/(\\d+(\\.\\d+)?)/i)\n      };\n      /touchpad\\//i.test(ua) && (result.touchpad = t)\n    }\n    else if (/bada/i.test(ua)) {\n      result = {\n        name: 'Bada'\n      , bada: t\n      , version: getFirstMatch(/dolfin\\/(\\d+(\\.\\d+)?)/i)\n      };\n    }\n    else if (tizen) {\n      result = {\n        name: 'Tizen'\n      , tizen: t\n      , version: getFirstMatch(/(?:tizen\\s?)?browser\\/(\\d+(\\.\\d+)?)/i) || versionIdentifier\n      };\n    }\n    else if (/qupzilla/i.test(ua)) {\n      result = {\n        name: 'QupZilla'\n        , qupzilla: t\n        , version: getFirstMatch(/(?:qupzilla)[\\s\\/](\\d+(?:\\.\\d+)+)/i) || versionIdentifier\n      }\n    }\n    else if (/chromium/i.test(ua)) {\n      result = {\n        name: 'Chromium'\n        , chromium: t\n        , version: getFirstMatch(/(?:chromium)[\\s\\/](\\d+(?:\\.\\d+)?)/i) || versionIdentifier\n      }\n    }\n    else if (/chrome|crios|crmo/i.test(ua)) {\n      result = {\n        name: 'Chrome'\n        , chrome: t\n        , version: getFirstMatch(/(?:chrome|crios|crmo)\\/(\\d+(\\.\\d+)?)/i)\n      }\n    }\n    else if (android) {\n      result = {\n        name: 'Android'\n        , version: versionIdentifier\n      }\n    }\n    else if (/safari|applewebkit/i.test(ua)) {\n      result = {\n        name: 'Safari'\n      , safari: t\n      }\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if (iosdevice) {\n      result = {\n        name : iosdevice == 'iphone' ? 'iPhone' : iosdevice == 'ipad' ? 'iPad' : 'iPod'\n      }\n      // WTF: version is not part of user agent in web apps\n      if (versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    }\n    else if(/googlebot/i.test(ua)) {\n      result = {\n        name: 'Googlebot'\n      , googlebot: t\n      , version: getFirstMatch(/googlebot\\/(\\d+(\\.\\d+))/i) || versionIdentifier\n      }\n    }\n    else {\n      result = {\n        name: getFirstMatch(/^(.*)\\/(.*) /),\n        version: getSecondMatch(/^(.*)\\/(.*) /)\n     };\n   }\n\n    // set webkit or gecko flag for browsers based on these engines\n    if (!result.msedge && /(apple)?webkit/i.test(ua)) {\n      if (/(apple)?webkit\\/537\\.36/i.test(ua)) {\n        result.name = result.name || \"Blink\"\n        result.blink = t\n      } else {\n        result.name = result.name || \"Webkit\"\n        result.webkit = t\n      }\n      if (!result.version && versionIdentifier) {\n        result.version = versionIdentifier\n      }\n    } else if (!result.opera && /gecko\\//i.test(ua)) {\n      result.name = result.name || \"Gecko\"\n      result.gecko = t\n      result.version = result.version || getFirstMatch(/gecko\\/(\\d+(\\.\\d+)?)/i)\n    }\n\n    // set OS flags for platforms that have multiple browsers\n    if (!result.msedge && (android || result.silk)) {\n      result.android = t\n    } else if (iosdevice) {\n      result[iosdevice] = t\n      result.ios = t\n    } else if (mac) {\n      result.mac = t\n    } else if (xbox) {\n      result.xbox = t\n    } else if (windows) {\n      result.windows = t\n    } else if (linux) {\n      result.linux = t\n    }\n\n    // OS version extraction\n    var osVersion = '';\n    if (result.windowsphone) {\n      osVersion = getFirstMatch(/windows phone (?:os)?\\s?(\\d+(\\.\\d+)*)/i);\n    } else if (iosdevice) {\n      osVersion = getFirstMatch(/os (\\d+([_\\s]\\d+)*) like mac os x/i);\n      osVersion = osVersion.replace(/[_\\s]/g, '.');\n    } else if (android) {\n      osVersion = getFirstMatch(/android[ \\/-](\\d+(\\.\\d+)*)/i);\n    } else if (result.webos) {\n      osVersion = getFirstMatch(/(?:web|hpw)os\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.blackberry) {\n      osVersion = getFirstMatch(/rim\\stablet\\sos\\s(\\d+(\\.\\d+)*)/i);\n    } else if (result.bada) {\n      osVersion = getFirstMatch(/bada\\/(\\d+(\\.\\d+)*)/i);\n    } else if (result.tizen) {\n      osVersion = getFirstMatch(/tizen[\\/\\s](\\d+(\\.\\d+)*)/i);\n    }\n    if (osVersion) {\n      result.osversion = osVersion;\n    }\n\n    // device type extraction\n    var osMajorVersion = osVersion.split('.')[0];\n    if (\n         tablet\n      || nexusTablet\n      || iosdevice == 'ipad'\n      || (android && (osMajorVersion == 3 || (osMajorVersion >= 4 && !mobile)))\n      || result.silk\n    ) {\n      result.tablet = t\n    } else if (\n         mobile\n      || iosdevice == 'iphone'\n      || iosdevice == 'ipod'\n      || android\n      || nexusMobile\n      || result.blackberry\n      || result.webos\n      || result.bada\n    ) {\n      result.mobile = t\n    }\n\n    // Graded Browser Support\n    // http://developer.yahoo.com/yui/articles/gbs\n    if (result.msedge ||\n        (result.msie && result.version >= 10) ||\n        (result.yandexbrowser && result.version >= 15) ||\n\t\t    (result.vivaldi && result.version >= 1.0) ||\n        (result.chrome && result.version >= 20) ||\n        (result.samsungBrowser && result.version >= 4) ||\n        (result.firefox && result.version >= 20.0) ||\n        (result.safari && result.version >= 6) ||\n        (result.opera && result.version >= 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] >= 6) ||\n        (result.blackberry && result.version >= 10.1)\n        || (result.chromium && result.version >= 20)\n        ) {\n      result.a = t;\n    }\n    else if ((result.msie && result.version < 10) ||\n        (result.chrome && result.version < 20) ||\n        (result.firefox && result.version < 20.0) ||\n        (result.safari && result.version < 6) ||\n        (result.opera && result.version < 10.0) ||\n        (result.ios && result.osversion && result.osversion.split(\".\")[0] < 6)\n        || (result.chromium && result.version < 20)\n        ) {\n      result.c = t\n    } else result.x = t\n\n    return result\n  }\n\n  var bowser = detect(typeof navigator !== 'undefined' ? navigator.userAgent || '' : '')\n\n  bowser.test = function (browserList) {\n    for (var i = 0; i < browserList.length; ++i) {\n      var browserItem = browserList[i];\n      if (typeof browserItem=== 'string') {\n        if (browserItem in bowser) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Get version precisions count\n   *\n   * @example\n   *   getVersionPrecision(\"1.10.3\") // 3\n   *\n   * @param  {string} version\n   * @return {number}\n   */\n  function getVersionPrecision(version) {\n    return version.split(\".\").length;\n  }\n\n  /**\n   * Array::map polyfill\n   *\n   * @param  {Array} arr\n   * @param  {Function} iterator\n   * @return {Array}\n   */\n  function map(arr, iterator) {\n    var result = [], i;\n    if (Array.prototype.map) {\n      return Array.prototype.map.call(arr, iterator);\n    }\n    for (i = 0; i < arr.length; i++) {\n      result.push(iterator(arr[i]));\n    }\n    return result;\n  }\n\n  /**\n   * Calculate browser version weight\n   *\n   * @example\n   *   compareVersions(['1.10.2.1',  '1.8.2.1.90'])    // 1\n   *   compareVersions(['1.010.2.1', '1.09.2.1.90']);  // 1\n   *   compareVersions(['1.10.2.1',  '1.10.2.1']);     // 0\n   *   compareVersions(['1.10.2.1',  '1.0800.2']);     // -1\n   *\n   * @param  {Array<String>} versions versions to compare\n   * @return {Number} comparison result\n   */\n  function compareVersions(versions) {\n    // 1) get common precision for both versions, for example for \"10.0\" and \"9\" it should be 2\n    var precision = Math.max(getVersionPrecision(versions[0]), getVersionPrecision(versions[1]));\n    var chunks = map(versions, function (version) {\n      var delta = precision - getVersionPrecision(version);\n\n      // 2) \"9\" -> \"9.0\" (for precision = 2)\n      version = version + new Array(delta + 1).join(\".0\");\n\n      // 3) \"9.0\" -> [\"000000000\"\", \"000000009\"]\n      return map(version.split(\".\"), function (chunk) {\n        return new Array(20 - chunk.length).join(\"0\") + chunk;\n      }).reverse();\n    });\n\n    // iterate in reverse order by reversed chunks array\n    while (--precision >= 0) {\n      // 4) compare: \"000000009\" > \"000000010\" = false (but \"9\" > \"10\" = true)\n      if (chunks[0][precision] > chunks[1][precision]) {\n        return 1;\n      }\n      else if (chunks[0][precision] === chunks[1][precision]) {\n        if (precision === 0) {\n          // all version chunks are same\n          return 0;\n        }\n      }\n      else {\n        return -1;\n      }\n    }\n  }\n\n  /**\n   * Check if browser is unsupported\n   *\n   * @example\n   *   bowser.isUnsupportedBrowser({\n   *     msie: \"10\",\n   *     firefox: \"23\",\n   *     chrome: \"29\",\n   *     safari: \"5.1\",\n   *     opera: \"16\",\n   *     phantom: \"534\"\n   *   });\n   *\n   * @param  {Object}  minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function isUnsupportedBrowser(minVersions, strictMode, ua) {\n    var _bowser = bowser;\n\n    // make strictMode param optional with ua param usage\n    if (typeof strictMode === 'string') {\n      ua = strictMode;\n      strictMode = void(0);\n    }\n\n    if (strictMode === void(0)) {\n      strictMode = false;\n    }\n    if (ua) {\n      _bowser = detect(ua);\n    }\n\n    var version = \"\" + _bowser.version;\n    for (var browser in minVersions) {\n      if (minVersions.hasOwnProperty(browser)) {\n        if (_bowser[browser]) {\n          // browser version and min supported version.\n          return compareVersions([version, minVersions[browser]]) < 0;\n        }\n      }\n    }\n\n    return strictMode; // not found\n  }\n\n  /**\n   * Check if browser is supported\n   *\n   * @param  {Object} minVersions map of minimal version to browser\n   * @param  {Boolean} [strictMode = false] flag to return false if browser wasn't found in map\n   * @param  {String}  [ua] user agent string\n   * @return {Boolean}\n   */\n  function check(minVersions, strictMode, ua) {\n    return !isUnsupportedBrowser(minVersions, strictMode, ua);\n  }\n\n  bowser.isUnsupportedBrowser = isUnsupportedBrowser;\n  bowser.compareVersions = compareVersions;\n  bowser.check = check;\n\n  /*\n   * Set our detect method to the main bowser object so we can\n   * reuse it to test other user agents.\n   * This is needed to implement future tests.\n   */\n  bowser._detect = detect;\n\n  return bowser\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bowser/src/bowser.js\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n/* eslint-disable no-unused-vars */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (e) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tsymbols = Object.getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/object-assign/index.js\n ** module id = 9\n ** module chunks = 0\n **/","import * as ExtendableError from \"es6-error\";\r\n\r\nexport default class OneSignalError extends ExtendableError {\r\n  constructor(message) {\r\n    super(message);\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/OneSignalError.js\n **/","import { DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL, STAGING_FRAME_HOST, DEV_PREFIX, STAGING_PREFIX } from '../vars';\r\nimport Environment from '../Environment';\r\nimport OneSignalApi from '../OneSignalApi';\r\nimport * as log from 'loglevel';\r\nimport LimitStore from '../LimitStore';\r\nimport Event from \"../Event\";\r\nimport Database from '../Database';\r\nimport * as Browser from 'bowser';\r\nimport {\r\n  getConsoleStyle, contains, normalizeSubdomain, getDeviceTypeForBrowser, capitalize,\r\n  awaitOneSignalInitAndSupported\r\n} from '../utils';\r\nimport * as objectAssign from 'object-assign';\r\nimport * as EventEmitter from 'wolfy87-eventemitter';\r\nimport * as heir from 'heir';\r\nimport * as swivel from 'swivel';\r\nimport Postmam from '../Postmam';\r\nimport * as Cookie from 'js-cookie';\r\nimport HttpModal from \"../http-modal/HttpModal\";\r\nimport Bell from \"../bell/Bell\";\r\nimport SubscriptionHelper from \"./SubscriptionHelper\";\r\nimport EventHelper from \"./EventHelper\";\r\n\r\ndeclare var OneSignal: any;\r\n\r\n\r\nexport default class MainHelper {\r\n\r\n  /**\r\n   * If there are multiple manifests, and one of them is our OneSignal manifest, we move it to the top of <head> to ensure our manifest is used for push subscription (manifests after the first are ignored as part of the spec).\r\n   */\r\n  static fixWordpressManifestIfMisplaced() {\r\n    var manifests = document.querySelectorAll('link[rel=manifest]');\r\n    if (!manifests || manifests.length <= 1) {\r\n      // Multiple manifests do not exist on this webpage; there is no issue\r\n      return;\r\n    }\r\n    for (let i = 0; i < manifests.length; i++) {\r\n      let manifest = manifests[i];\r\n      let url = (manifest as any).href;\r\n      if (contains(url, 'gcm_sender_id')) {\r\n        // Move the <manifest> to the first thing in <head>\r\n        document.querySelector('head').insertBefore(manifest, document.querySelector('head').children[0]);\r\n        log.info('OneSignal: Moved the WordPress push <manifest> to the first element in <head>.');\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * If the user has manually opted out of notifications (OneSignal.setSubscription), returns -2; otherwise returns 1.\r\n   * @param isOptedIn The result of OneSignal.getSubscription().\r\n   */\r\n  static getNotificationTypeFromOptIn(isOptedIn) {\r\n    if (isOptedIn == true || isOptedIn == null) {\r\n      return 1;\r\n    } else {\r\n      return -2;\r\n    }\r\n  }\r\n\r\n  /*\r\n   Returns the current browser-agnostic notification permission as \"default\", \"granted\", \"denied\".\r\n   safariWebId: Used only to get the current notification permission state in Safari (required as part of the spec).\r\n   */\r\n  static getNotificationPermission(safariWebId) {\r\n    return awaitOneSignalInitAndSupported()\r\n      .then(() => {\r\n        return new Promise((resolve, reject) => {\r\n          if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\r\n            // User is using our subscription workaround\r\n            OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION, {safariWebId: safariWebId}, reply => {\r\n              let remoteNotificationPermission = reply.data;\r\n              resolve(remoteNotificationPermission);\r\n            });\r\n          } else {\r\n            if (Browser.safari) {\r\n              // The user is on Safari\r\n              // A web ID is required to determine the current notificiation permission\r\n              if (safariWebId) {\r\n                resolve(window.safari.pushNotification.permission(safariWebId).permission);\r\n              }\r\n              else {\r\n                // The user didn't set up Safari web push properly; notifications are unlikely to be enabled\r\n                log.debug(`OneSignal: Invalid init option safari_web_id %c${safariWebId}`, getConsoleStyle('code'), '. Please pass in a valid safari_web_id to OneSignal init.');\r\n              }\r\n            }\r\n            else {\r\n              // Identical API on Firefox and Chrome\r\n              resolve(window.Notification.permission);\r\n            }\r\n          }\r\n        });\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Assigns a variable into sessionStorage to represent the beginning of a OneSignal session. A session is\r\n   * initiated by opening a new tab or window to a OneSignal active page. While the same session lasts, refreshes to\r\n   * the same page won't re-subscribe the user to OneSignal or update the last_active or session_count property.\r\n   *\r\n   * This method ensures that the sessionStorage is appropriately set for HTTP sites by communicating with the host\r\n   * page.\r\n   *\r\n   * The only time we do start a browsing session on HTTP is after we register, so we get the popupPostman and post\r\n   * a message back to the host to also start a browsing session.\r\n   */\r\n  static beginTemporaryBrowserSession() {\r\n    log.debug('OneSignal: Marking browser session as continuing.');\r\n    sessionStorage.setItem(\"ONE_SIGNAL_SESSION\", \"true\");\r\n    if (Environment.isPopup()) {\r\n      // If we're setting sessionStorage and we're in an Popup, we need to also set sessionStorage on the\r\n      // main page\r\n      if (!OneSignal.popupPostmam) {\r\n        return;\r\n      }\r\n      OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns true if the experimental HTTP permission request is being used to prompt the user.\r\n   */\r\n  static isUsingHttpPermissionRequest() {\r\n    return OneSignal.config.httpPermissionRequest &&\r\n      OneSignal.config.httpPermissionRequest.enable == true &&\r\n      (Environment.isIframe() ||\r\n      Environment.isHost() && SubscriptionHelper.isUsingSubscriptionWorkaround());\r\n  }\r\n\r\n  /**\r\n   * Returns true if the site using the HTTP permission request is supplying its own modal prompt to the user.\r\n   */\r\n  static isUsingCustomHttpPermissionRequestPostModal() {\r\n    return (OneSignal.config.httpPermissionRequest &&\r\n    OneSignal.config.httpPermissionRequest.useCustomModal == true);\r\n  }\r\n\r\n  /**\r\n   * Returns true if a session cookie exists for noting the user dismissed the native prompt.\r\n   */\r\n  static wasHttpsNativePromptDismissed() {\r\n    return Cookie.get('onesignal-notification-prompt') === 'dismissed';\r\n  }\r\n\r\n  /**\r\n   * Stores a flag in sessionStorage that we've already shown the HTTP popover to this user and that we should not\r\n   * show it again until they open a new window or tab to the site.\r\n   */\r\n  static markHttpPopoverShown() {\r\n    sessionStorage.setItem(\"ONESIGNAL_HTTP_PROMPT_SHOWN\", \"true\");\r\n  }\r\n\r\n  /**\r\n   * Returns true if the HTTP popover was already shown inside the same session.\r\n   */\r\n  static isHttpPromptAlreadyShown() {\r\n    return sessionStorage.getItem(\"ONESIGNAL_HTTP_PROMPT_SHOWN\") == \"true\";\r\n  }\r\n\r\n  /**\r\n   * Returns true if this current window session is continuing and not a newly opened tab or window.\r\n   */\r\n  static isContinuingBrowserSession() {\r\n    /*\r\n     We don't need to communicate with any iFrames for HTTP sites because the same sessionStorage is set on all\r\n     frames of the window.\r\n     */\r\n    return sessionStorage.getItem(\"ONE_SIGNAL_SESSION\") == \"true\";\r\n  }\r\n\r\n  /**\r\n   * Creates a new or updates an existing OneSignal user (player) on the server.\r\n   *\r\n   * @param appId The app ID passed to init.\r\n   *        subscriptionInfo A hash containing 'endpointOrToken', 'auth', and 'p256dh'.\r\n   *\r\n   * @remarks Called from both the host page and HTTP popup.\r\n   *          If a user already exists and is subscribed, updates the session count by calling /players/:id/on_session; otherwise, a new player is registered via the /players endpoint.\r\n   *          Saves the user ID and registration ID to the local web database after the response from OneSignal.\r\n   */\r\n  static registerWithOneSignal(appId, subscriptionInfo) {\r\n    let deviceType = getDeviceTypeForBrowser();\r\n    return Promise.all([\r\n      OneSignal.getUserId(),\r\n      OneSignal.getSubscription()\r\n    ])\r\n                  .then(([userId, subscription]) => {\r\n                    let requestUrl = userId ?\r\n                      `players/${userId}/on_session` :\r\n                      `players`;\r\n\r\n                    let requestData = {\r\n                      app_id: appId,\r\n                      device_type: deviceType,\r\n                      language: Environment.getLanguage(),\r\n                      timezone: new Date().getTimezoneOffset() * -60,\r\n                      device_model: navigator.platform + \" \" + Browser.name,\r\n                      device_os: Browser.version,\r\n                      sdk: OneSignal._VERSION,\r\n                      notification_types: MainHelper.getNotificationTypeFromOptIn(subscription)\r\n                    };\r\n\r\n                    if (subscriptionInfo) {\r\n                      (requestData as any).identifier = subscriptionInfo.endpointOrToken;\r\n                      // Although we're passing the full endpoint to OneSignal, we still need to store only the registration ID for our SDK API getRegistrationId()\r\n                      // Parse out the registration ID from the full endpoint URL and save it to our database\r\n                      let registrationId = subscriptionInfo.endpointOrToken.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\r\n                      Database.put(\"Ids\", {type: \"registrationId\", id: registrationId});\r\n                      // New web push standard in Firefox 46+ and Chrome 50+ includes 'auth' and 'p256dh' in PushSubscription\r\n                      if (subscriptionInfo.auth) {\r\n                        (requestData as any).web_auth = subscriptionInfo.auth;\r\n                      }\r\n                      if (subscriptionInfo.p256dh) {\r\n                        (requestData as any).web_p256 = subscriptionInfo.p256dh;\r\n                      }\r\n                    }\r\n\r\n                    return OneSignalApi.post(requestUrl, requestData);\r\n                  })\r\n                  .then((response: any) => {\r\n                    let {id: userId} = response;\r\n\r\n                    MainHelper.beginTemporaryBrowserSession();\r\n\r\n                    if (userId) {\r\n                      return Database.put(\"Ids\", {type: \"userId\", id: userId});\r\n                    }\r\n                  })\r\n                  .then(() => {\r\n                    // We've finished registering with OneSignal, our session_count and last_active has been updated\r\n                    Event.trigger(OneSignal.EVENTS.REGISTERED);\r\n                  });\r\n  }\r\n\r\n  static checkAndTriggerNotificationPermissionChanged() {\r\n    Promise.all([\r\n      Database.get('Options', 'notificationPermission'),\r\n      OneSignal.getNotificationPermission()\r\n    ])\r\n           .then(([previousPermission, currentPermission]) => {\r\n             if (previousPermission !== currentPermission) {\r\n               EventHelper.triggerNotificationPermissionChanged()\r\n                        .then(() => Database.put('Options', {\r\n                          key: 'notificationPermission',\r\n                          value: currentPermission\r\n                        }));\r\n             }\r\n           });\r\n  }\r\n\r\n  /**\r\n   * Calls Notification.requestPermission(), but returns a Promise instead of accepting a callback like the a ctual\r\n   * Notification.requestPermission();\r\n   */\r\n  static requestNotificationPermissionPromise() {\r\n    return new Promise(resolve => window.Notification.requestPermission(resolve));\r\n  }\r\n\r\n  static showNotifyButton() {\r\n    if (Environment.isBrowser() && !OneSignal.notifyButton) {\r\n      OneSignal.config.notifyButton = OneSignal.config.notifyButton || {};\r\n      if (OneSignal.config.bell) {\r\n        // If both bell and notifyButton, notifyButton's options take precedence\r\n        objectAssign(OneSignal.config.bell, OneSignal.config.notifyButton);\r\n        objectAssign(OneSignal.config.notifyButton, OneSignal.config.bell);\r\n      }\r\n      if (OneSignal.config.notifyButton.displayPredicate &&\r\n        typeof OneSignal.config.notifyButton.displayPredicate === \"function\") {\r\n        Promise.resolve(OneSignal.config.notifyButton.displayPredicate())\r\n               .then(predicateValue => {\r\n                 if (predicateValue !== false) {\r\n                   OneSignal.notifyButton = new Bell(OneSignal.config.notifyButton);\r\n                   OneSignal.notifyButton.create();\r\n                 } else {\r\n                   log.debug('Notify button display predicate returned false so not showing the notify button.');\r\n                 }\r\n               });\r\n      } else {\r\n        OneSignal.notifyButton = new Bell(OneSignal.config.notifyButton);\r\n        OneSignal.notifyButton.create();\r\n      }\r\n    }\r\n  }\r\n\r\n  static getPrefixedServiceWorkerNameForEnv() {\r\n    if (Environment.isDev()) {\r\n      OneSignal.SERVICE_WORKER_PATH = DEV_PREFIX + 'OneSignalSDKWorker.js';\r\n      OneSignal.SERVICE_WORKER_UPDATER_PATH = DEV_PREFIX + 'OneSignalSDKUpdaterWorker.js';\r\n    } else if (Environment.isStaging()) {\r\n      OneSignal.SERVICE_WORKER_PATH = STAGING_PREFIX + 'OneSignalSDKWorker.js';\r\n      OneSignal.SERVICE_WORKER_UPDATER_PATH = STAGING_PREFIX + 'OneSignalSDKUpdaterWorker.js';\r\n    }\r\n  }\r\n\r\n  static checkAndDoHttpPermissionRequest() {\r\n    log.debug('Called %ccheckAndDoHttpPermissionRequest()', getConsoleStyle('code'));\r\n    if (this.isUsingHttpPermissionRequest()) {\r\n      if (OneSignal.config.autoRegister) {\r\n        OneSignal.showHttpPermissionRequest({_sdkCall: true})\r\n                 .then(result => {\r\n                   if (result === 'granted' && !this.isUsingCustomHttpPermissionRequestPostModal()) {\r\n                     log.debug('Showing built-in post HTTP permission request in-page modal because permission is granted and not using custom modal.');\r\n                     this.showHttpPermissionRequestPostModal(OneSignal.config.httpPermissionRequest);\r\n                   }\r\n                 });\r\n      } else {\r\n        Event.trigger(OneSignal.EVENTS.TEST_INIT_OPTION_DISABLED);\r\n      }\r\n    }\r\n  }\r\n\r\n  static getNotificationIcons() {\r\n    var url = '';\r\n    return MainHelper.getAppId()\r\n                    .then(appId => {\r\n                      if (!appId) {\r\n                        return Promise.reject(null);\r\n                      } else {\r\n                        url = `${OneSignal._API_URL}apps/${appId}/icon`;\r\n                        return url;\r\n                      }\r\n                    }, () => {\r\n                      log.debug('No app ID, not getting notification icon for notify button.');\r\n                      return;\r\n                    })\r\n                    .then(url => fetch(url))\r\n                    .then(response => (response as any).json())\r\n                    .then(data => {\r\n                      if (data.errors) {\r\n                        log.error(`API call %c${url}`, getConsoleStyle('code'), 'failed with:', data.errors);\r\n                        throw new Error('Failed to get notification icons.');\r\n                      }\r\n                      return data;\r\n                    });\r\n  }\r\n\r\n  static establishServiceWorkerChannel(serviceWorkerRegistration?) {\r\n    if (OneSignal._channel) {\r\n      OneSignal._channel.off('data');\r\n      OneSignal._channel.off('notification.displayed');\r\n      OneSignal._channel.off('notification.clicked');\r\n    }\r\n    OneSignal._channel = (swivel as any).at(serviceWorkerRegistration ? serviceWorkerRegistration.active : null);\r\n    OneSignal._channel.on('data', function handler(context, data) {\r\n      log.debug(`%c${capitalize(Environment.getEnv())} ⬸ ServiceWorker:`, getConsoleStyle('serviceworkermessage'), data, context);\r\n    });\r\n    OneSignal._channel.on('notification.displayed', function handler(context, data) {\r\n      Event.trigger(OneSignal.EVENTS.NOTIFICATION_DISPLAYED, data);\r\n    });\r\n    OneSignal._channel.on('notification.clicked', function handler(context, data) {\r\n      Event.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED, data);\r\n    });\r\n    OneSignal._channel.on('notification.dismissed', function handler(context, data) {\r\n      Event.trigger(OneSignal.EVENTS.NOTIFICATION_DISMISSED, data);\r\n    });\r\n  }\r\n\r\n  static getNormalizedSubdomain(subdomain) {\r\n    if (subdomain) {\r\n      return normalizeSubdomain(subdomain);\r\n    }\r\n  }\r\n\r\n  static getPromptOptionsQueryString() {\r\n    let promptOptions = OneSignal.config['promptOptions'];\r\n    let promptOptionsStr = '';\r\n    if (promptOptions) {\r\n      let hash = MainHelper.getPromptOptionsPostHash();\r\n      for (let key of Object.keys(hash)) {\r\n        var value = hash[key];\r\n        promptOptionsStr += '&' + key + '=' + value;\r\n      }\r\n    }\r\n    return promptOptionsStr;\r\n  }\r\n\r\n  /**\r\n   * Shows the modal on the page users must click on after the local notification prompt to trigger the standard\r\n   * HTTP popup window.\r\n   */\r\n  static showHttpPermissionRequestPostModal(options) {\r\n    OneSignal.httpPermissionRequestPostModal = new HttpModal(options);\r\n    OneSignal.httpPermissionRequestPostModal.create();\r\n  }\r\n\r\n  static getPromptOptionsPostHash() {\r\n    let promptOptions = OneSignal.config['promptOptions'];\r\n    if (promptOptions) {\r\n      var legacyParams = {\r\n        'exampleNotificationTitleDesktop': 'exampleNotificationTitle',\r\n        'exampleNotificationMessageDesktop': 'exampleNotificationMessage',\r\n        'exampleNotificationTitleMobile': 'exampleNotificationTitle',\r\n        'exampleNotificationMessageMobile': 'exampleNotificationMessage',\r\n      };\r\n      for (let legacyParamKey of Object.keys(legacyParams)) {\r\n        let legacyParamValue = legacyParams[legacyParamKey];\r\n        if (promptOptions[legacyParamKey]) {\r\n          promptOptions[legacyParamValue] = promptOptions[legacyParamKey];\r\n        }\r\n      }\r\n      var allowedPromptOptions = [\r\n        'autoAcceptTitle',\r\n        'siteName',\r\n        'autoAcceptTitle',\r\n        'subscribeText',\r\n        'showGraphic',\r\n        'actionMessage',\r\n        'exampleNotificationTitle',\r\n        'exampleNotificationMessage',\r\n        'exampleNotificationCaption',\r\n        'acceptButtonText',\r\n        'cancelButtonText',\r\n        'timeout',\r\n      ];\r\n      var hash = {};\r\n      for (var i = 0; i < allowedPromptOptions.length; i++) {\r\n        var key = allowedPromptOptions[i];\r\n        var value = promptOptions[key];\r\n        var encoded_value = encodeURIComponent(value);\r\n        if (value || value === false || value === '') {\r\n          hash[key] = encoded_value;\r\n        }\r\n      }\r\n    }\r\n    return hash;\r\n  }\r\n\r\n  static triggerCustomPromptClicked(clickResult) {\r\n    Event.trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED, {\r\n      result: clickResult\r\n    });\r\n  }\r\n\r\n  static autoCorrectSubdomain(inputSubdomain) {\r\n    let normalizedSubdomain = MainHelper.getNormalizedSubdomain(inputSubdomain);\r\n    if (normalizedSubdomain !== inputSubdomain) {\r\n      log.info(`Auto-corrected subdomain '${inputSubdomain}' to '${normalizedSubdomain}'.`);\r\n    }\r\n    return normalizedSubdomain;\r\n  }\r\n\r\n  static createHiddenDomIFrame(url, name?) {\r\n    let node = document.createElement(\"iframe\");\r\n    node.style.display = \"none\";\r\n    if (!url) {\r\n      url = 'about:blank';\r\n    }\r\n    node.src = url;\r\n    if (name) {\r\n      node.name = name;\r\n    }\r\n    document.body.appendChild(node);\r\n    return node;\r\n  }\r\n\r\n  static createHiddenSubscriptionDomModal(url) {\r\n    let iframeContainer = document.createElement('div');\r\n    iframeContainer.setAttribute('id', 'OneSignal-iframe-modal');\r\n    iframeContainer.setAttribute('style', 'display:none !important');\r\n    iframeContainer.innerHTML = '<div id=\"notif-permission\" style=\"background: rgba(0, 0, 0, 0.7); position: fixed;' +\r\n      ' top: 0; left: 0; right: 0; bottom: 0; z-index: 3000000000; display: flex;' +\r\n      ' align-items: center; justify-content: center;\"></div>';\r\n    document.body.appendChild(iframeContainer);\r\n\r\n    let iframeContainerStyle = document.createElement('style');\r\n    iframeContainerStyle.innerHTML = `@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }`;\r\n    document.getElementsByTagName('head')[0].appendChild(iframeContainerStyle);\r\n\r\n    let iframe = document.createElement(\"iframe\");\r\n    iframe.className = \"OneSignal-permission-iframe\";\r\n    iframe.setAttribute('frameborder', '0');\r\n    iframe.width = OneSignal._windowWidth.toString();\r\n    iframe.height = OneSignal._windowHeight.toString();\r\n    iframe.src = url;\r\n\r\n    document.getElementById(\"notif-permission\").appendChild(iframe);\r\n    return iframe;\r\n  }\r\n\r\n  static showSubscriptionDomModal() {\r\n    const iframeContainer = document.getElementById('OneSignal-iframe-modal');\r\n    iframeContainer.setAttribute('style', '');\r\n  }\r\n\r\n  // Arguments :\r\n  //  verb : 'GET'|'POST'\r\n  //  target : an optional opening target (a name, or \"_blank\"), defaults to \"_self\"\r\n  static openWindowViaPost(url, data, overrides) {\r\n    var form = document.createElement(\"form\");\r\n    form.action = url;\r\n    form.method = 'POST';\r\n    form.target = \"onesignal-http-popup\";\r\n\r\n    var dualScreenLeft = window.screenLeft != undefined ? window.screenLeft : (screen as any).left;\r\n    var dualScreenTop = window.screenTop != undefined ? window.screenTop : (screen as any).top;\r\n    var thisWidth = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : screen.width;\r\n    var thisHeight = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : screen.height;\r\n    var childWidth = OneSignal._windowWidth;\r\n    var childHeight = OneSignal._windowHeight;\r\n    var left = ((thisWidth / 2) - (childWidth / 2)) + dualScreenLeft;\r\n    var top = ((thisHeight / 2) - (childHeight / 2)) + dualScreenTop;\r\n\r\n    if (overrides) {\r\n      if (overrides.childWidth) {\r\n        childWidth = overrides.childWidth;\r\n      }\r\n      if (overrides.childHeight) {\r\n        childHeight = overrides.childHeight;\r\n      }\r\n      if (overrides.left) {\r\n        left = overrides.left;\r\n      }\r\n      if (overrides.top) {\r\n        top = overrides.top;\r\n      }\r\n    }\r\n    const windowRef = window.open('about:blank', \"onesignal-http-popup\", `'scrollbars=yes, width=${childWidth}, height=${childHeight}, top=${top}, left=${left}`);\r\n\r\n    if (data) {\r\n      for (var key in data) {\r\n        var input = document.createElement(\"textarea\");\r\n        input.name = key;\r\n        input.value = typeof data[key] === \"object\" ? JSON.stringify(data[key]) : data[key];\r\n        form.appendChild(input);\r\n      }\r\n    }\r\n    form.style.display = 'none';\r\n    document.body.appendChild(form);\r\n    form.submit();\r\n    document.body.removeChild(form);\r\n\r\n    return windowRef;\r\n  };\r\n\r\n  static openSubdomainPopup(url, data, overrides) {\r\n    return MainHelper.openWindowViaPost(url, data, overrides);\r\n  }\r\n\r\n  static getAppId() {\r\n    if (OneSignal.config.appId) {\r\n      return Promise.resolve(OneSignal.config.appId);\r\n    }\r\n    else return Database.get('Ids', 'appId');\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers/MainHelper.ts\n **/","import OneSignalApi from '../OneSignalApi';\r\nimport * as log from 'loglevel';\r\nimport LimitStore from '../LimitStore';\r\nimport Event from \"../Event\";\r\nimport Database from '../Database';\r\nimport * as Browser from 'bowser';\r\nimport {\r\n  getConsoleStyle, contains, normalizeSubdomain, getDeviceTypeForBrowser, capitalize,\r\n  isPushNotificationsSupported, getUrlQueryParam, executeAndTimeoutPromiseAfter, wipeLocalIndexedDb,\r\n  unsubscribeFromPush, decodeHtmlEntities, logMethodCall\r\n} from '../utils';\r\nimport MainHelper from \"./MainHelper\";\r\nimport SubscriptionHelper from \"./SubscriptionHelper\";\r\n\r\ndeclare var OneSignal: any;\r\n\r\n\r\nexport default class EventHelper {\r\n  static onNotificationPermissionChange(event) {\r\n    EventHelper.checkAndTriggerSubscriptionChanged();\r\n  }\r\n\r\n  static async onInternalSubscriptionSet(optedOut) {\r\n    LimitStore.put('subscription.optedOut', optedOut);\r\n  }\r\n\r\n  static async checkAndTriggerSubscriptionChanged() {\r\n    logMethodCall('checkAndTriggerSubscriptionChanged');\r\n    const pushEnabled = await OneSignal.isPushNotificationsEnabled();\r\n    const appState = await Database.getAppState();\r\n    const { lastKnownPushEnabled } = appState;\r\n    const didStateChange = (lastKnownPushEnabled === null || pushEnabled !== lastKnownPushEnabled);\r\n    if (!didStateChange)\r\n      return;\r\n    log.info(`The user's subscription state changed from ` +\r\n              `${lastKnownPushEnabled === null ? '(not stored)' : lastKnownPushEnabled} ⟶ ${pushEnabled}`);\r\n    appState.lastKnownPushEnabled = pushEnabled;\r\n    await Database.setAppState(appState);\r\n    EventHelper.triggerSubscriptionChanged(pushEnabled);\r\n  }\r\n\r\n  static _onSubscriptionChanged(newSubscriptionState) {\r\n    if (OneSignal.__doNotShowWelcomeNotification) {\r\n      log.debug('Not showing welcome notification because user state was reset.');\r\n      return;\r\n    }\r\n    if (newSubscriptionState === true) {\r\n      Promise.all([\r\n        OneSignal.getUserId(),\r\n        MainHelper.getAppId()\r\n      ])\r\n             .then(([userId, appId]) => {\r\n               let welcome_notification_opts = OneSignal.config['welcomeNotification'];\r\n               let welcome_notification_disabled = ((welcome_notification_opts !== undefined) &&\r\n               (welcome_notification_opts['disable'] === true));\r\n               let title = ((welcome_notification_opts !== undefined) &&\r\n               (welcome_notification_opts['title'] !== undefined) &&\r\n               (welcome_notification_opts['title'] !== null)) ? welcome_notification_opts['title'] : '';\r\n               let message = ((welcome_notification_opts !== undefined) &&\r\n               (welcome_notification_opts['message'] !== undefined) &&\r\n               (welcome_notification_opts['message'] !== null) &&\r\n               (welcome_notification_opts['message'].length > 0)) ?\r\n                 welcome_notification_opts['message'] :\r\n                 'Thanks for subscribing!';\r\n               let unopenableWelcomeNotificationUrl = new URL(location.href).origin + '?_osp=do_not_open';\r\n               let url = (welcome_notification_opts &&\r\n               welcome_notification_opts['url'] &&\r\n               (welcome_notification_opts['url'].length > 0)) ?\r\n                 welcome_notification_opts['url'] :\r\n                 unopenableWelcomeNotificationUrl;\r\n               title = decodeHtmlEntities(title);\r\n               message = decodeHtmlEntities(message);\r\n               if (!welcome_notification_disabled) {\r\n                 log.debug('Sending welcome notification.');\r\n                 OneSignalApi.sendNotification(appId, [userId], {'en': title}, {'en': message}, url, null,\r\n                   {__isOneSignalWelcomeNotification: true}, undefined);\r\n                 Event.trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT, {title: title, message: message, url: url});\r\n               }\r\n             });\r\n    }\r\n  }\r\n\r\n  static _onDbValueSet(info) {\r\n    /*\r\n     For HTTPS sites, this is how the subscription change event gets fired.\r\n     For HTTP sites, leaving this enabled fires the subscription change event twice. The first event is from Postmam\r\n     remotely re-triggering the db.set event to notify the host page that the popup set the user ID in the db. The second\r\n     event is from Postmam remotely re-triggering the subscription.changed event which is also fired from the popup.\r\n     */\r\n    if (info.type === 'userId' && !SubscriptionHelper.isUsingSubscriptionWorkaround()) {\r\n      EventHelper.checkAndTriggerSubscriptionChanged();\r\n    }\r\n  }\r\n\r\n  static onDatabaseRebuilt() {\r\n    OneSignal._isNewVisitor = true;\r\n  }\r\n\r\n  static triggerNotificationPermissionChanged(updateIfIdentical = false) {\r\n    let newPermission, isUpdating;\r\n    return Promise.all([\r\n      OneSignal.getNotificationPermission(),\r\n      Database.get('Options', 'notificationPermission')\r\n    ])\r\n                  .then(([currentPermission, previousPermission]) => {\r\n                    newPermission = currentPermission;\r\n                    isUpdating = (currentPermission !== previousPermission || updateIfIdentical);\r\n\r\n                    if (isUpdating) {\r\n                      return Database.put('Options', {key: 'notificationPermission', value: currentPermission});\r\n                    }\r\n                  })\r\n                  .then(() => {\r\n                    if (isUpdating) {\r\n                      Event.trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, {\r\n                        to: newPermission\r\n                      });\r\n                    }\r\n                  });\r\n  }\r\n\r\n  static triggerSubscriptionChanged(to) {\r\n    Event.trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, to);\r\n  }\r\n\r\n  /**\r\n   * When notifications are clicked, because the site isn't open, the notification is stored in the database. The next\r\n   * time the page opens, the event is triggered if its less than 5 minutes (usually page opens instantly from click).\r\n   *\r\n   * This method is fired for both HTTPS and HTTP sites, so for HTTP sites, the host URL needs to be used, not the\r\n   * subdomain.onesignal.com URL.\r\n   */\r\n  static async fireStoredNotificationClicks(url: string = document.URL) {\r\n    const appState = await Database.getAppState();\r\n    const pageClickedNotifications = appState.clickedNotifications[url];\r\n    if (pageClickedNotifications) {\r\n      // Remove the clicked notification; we've processed it now\r\n      appState.clickedNotifications[url] = null;\r\n      Database.setAppState(appState);\r\n\r\n      const { data: notification, timestamp } = pageClickedNotifications;\r\n\r\n      if (timestamp) {\r\n        const minutesSinceNotificationClicked = (Date.now() - timestamp) / 1000 / 60;\r\n        if (minutesSinceNotificationClicked > 5)\r\n          return;\r\n      }\r\n      Event.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED, notification);\r\n    }\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers/EventHelper.ts\n **/","import * as log from 'loglevel';\nimport * as EventEmitter from 'wolfy87-eventemitter';\nimport * as heir from 'heir';\nimport Event from './Event.ts';\nimport { getConsoleStyle, contains } from './utils';\nimport Database from './Database';\n\n\nexport default class IndexedDb {\n\n  static _instance: IndexedDb;\n\n  /**\n   * Returns an existing instance or creates a new instances of the database.\n   * @returns {Promise} Returns a promise that is fulfilled when the database becomes accessible or rejects when an error occurs.\n   */\n  static getInstance(): Promise<IDBDatabase> {\n    return new Promise(function (resolve, reject) {\n      if (IndexedDb._instance) {\n        resolve(IndexedDb._instance);\n      } else {\n        try {\n          var request = indexedDB.open(\"ONE_SIGNAL_SDK_DB\", 1);\n        } catch (e) {\n          // Errors should be thrown on the request.onerror event, but just in case Firefox throws additional errors\n          // for profile schema too high\n        }\n        request.onsuccess = ({target}) => {\n          let db = (<any>target).result;\n          if (IndexedDb._instance) {\n            db.close();\n            resolve(IndexedDb._instance);\n          } else {\n            IndexedDb._instance = db;\n            resolve(db);\n          }\n        };\n        request.onerror = (event) => {\n          const error = (<any>event.target).error;\n          if (contains(error.message, 'The operation failed for reasons unrelated to the database itself and not covered by any other error code')) {\n            log.warn(\"OneSignal: IndexedDb web storage is not available on this origin since this profile's IndexedDb schema has been upgraded in a newer version of Firefox. See: https://bugzilla.mozilla.org/show_bug.cgi?id=1236557#c6\");\n            // Never reject the Promise\n          } else {\n            log.error('OneSignal: Unable to open IndexedDB.', error.name + ': ' + error.message);\n            reject(event);\n          }\n        };\n        request.onupgradeneeded = (event) => {\n          log.info('OneSignal: IndexedDB is being rebuilt or upgraded.', event);\n          let db = (<any>event.target).result;\n          db.createObjectStore(\"Ids\", {\n            keyPath: \"type\"\n          });\n          db.createObjectStore(\"NotificationOpened\", {\n            keyPath: \"url\"\n          });\n          db.createObjectStore(\"Options\", {\n            keyPath: \"key\"\n          });\n          Event.trigger(Database.EVENTS.REBUILT, null, null);\n        };\n        (<any>request).onversionchange = (event) => {\n          log.debug('The database is about to be deleted.');\n        };\n      }\n    });\n  }\n\n  /**\n   * Asynchronously retrieves the value of the key at the table (if key is specified), or the entire table (if key is not specified).\n   * @param table The table to retrieve the value from.\n   * @param key The key in the table to retrieve the value of. Leave blank to get the entire table.\n   * @returns {Promise} Returns a promise that fulfills when the value(s) are available.\n   */\n  static async get(table: string, key?: string): Promise<any> {\n    let db = await IndexedDb.getInstance();\n    if (key) {\n      // Return a table-key value\n      return new Promise((resolve, reject) => {\n        var request: IDBRequest = db.transaction(table).objectStore(table).get(key);\n        request.onsuccess = () => {\n          resolve(request.result);\n        };\n        request.onerror = () => {\n          reject(request.error);\n        };\n      });\n    } else {\n      // Return all values in table\n      return new Promise((resolve, reject) => {\n        let jsonResult = {};\n        let cursor = db.transaction(table).objectStore(table).openCursor();\n        cursor.onsuccess = (event: any) => {\n          var cursorResult: IDBCursorWithValue = event.target.result;\n          if (cursorResult) {\n            let cursorResultKey: any = cursorResult.key;\n            jsonResult[cursorResultKey] = cursorResult.value;\n            cursorResult.continue();\n          } else {\n            resolve(jsonResult);\n          }\n        };\n        cursor.onerror = (event) => {\n          reject(cursor.error);\n        };\n      });\n    }\n  }\n\n  /**\n   * Asynchronously puts the specified value in the specified table.\n   * @param table\n   * @param key\n   */\n  static put(table, key) {\n    return IndexedDb.getInstance().then((database) => {\n      return new Promise((resolve, reject) => {\n        try {\n          let request = database.transaction([table], 'readwrite').objectStore(table).put(key);\n          request.onsuccess = (event) => {\n            resolve(key);\n          };\n          request.onerror = (e) => {\n            log.error('Database PUT Transaction Error:', e);\n            reject(e);\n          };\n        } catch (e) {\n          log.error('Database PUT Error:', e);\n          reject(e);\n        }\n      });\n    });\n  }\n\n  /**\n   * Asynchronously removes the specified key from the table, or if the key is not specified, removes all keys in the table.\n   * @returns {Promise} Returns a promise containing a key that is fulfilled when deletion is completed.\n   */\n  static remove(table: string, key?: string) {\n    if (key) {\n      // Remove a single key from a table\n      var method = \"delete\";\n    } else {\n      // Remove all keys from the table (wipe the table)\n      var method = \"clear\";\n    }\n    return IndexedDb.getInstance().then((database) => {\n      return new Promise((resolve, reject) => {\n        try {\n          let request = database.transaction([table], 'readwrite').objectStore(table)[method](key);\n          request.onsuccess = (event) => {\n            resolve(key);\n          };\n          request.onerror = (e) => {\n            log.error('Database REMOVE Transaction Error:', e);\n            reject(e);\n          };\n        } catch (e) {\n          log.error('Database REMOVE Error:', e);\n          reject(e);\n        }\n      });\n    });\n  }\n\n  /**\n   * Asynchronously removes the Ids, NotificationOpened, and Options tables from the database and recreates them with blank values.\n   * @returns {Promise} Returns a promise that is fulfilled when rebuilding is completed, or rejects with an error.\n   */\n  static rebuild() {\n    return Promise.all([\n      IndexedDb.remove('Ids'),\n      IndexedDb.remove('NotificationOpened'),\n      IndexedDb.remove('Options'),\n    ]);\n  }\n}\n\nheir.merge(IndexedDb, new EventEmitter());\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/IndexedDb.ts\n **/","/*\n LimitStore.put('colorado', 'rocky');\n [\"rocky\"]\n LimitStore.put('colorado', 'mountain');\n [\"rocky\", \"mountain\"]\n LimitStore.put('colorado', 'national');\n [\"mountain\", \"national\"]\n LimitStore.put('colorado', 'park');\n [\"national\", \"park\"]\n */\nexport default class LimitStore {\n  static store = {};\n  static LIMIT = 2;\n\n  static put(key, value) {\n    if (LimitStore.store[key] === undefined) {\n      LimitStore.store[key] = [null, null];\n    }\n    LimitStore.store[key].push(value);\n    if (LimitStore.store[key].length == LimitStore.LIMIT + 1) {\n      LimitStore.store[key].shift();\n    }\n    return LimitStore.store[key];\n  }\n\n  static get(key) {\n    if (LimitStore.store[key] === undefined) {\n      LimitStore.store[key] = [null, null];\n    }\n    return LimitStore.store[key];\n  }\n\n  static getFirst(key) {\n    return LimitStore.get(key)[0];\n  }\n\n  static getLast(key) {\n    return LimitStore.get(key)[1];\n  }\n\n  static remove(key) {\n    delete LimitStore.store[key];\n  }\n\n  static isEmpty(key) {\n    let values = LimitStore.get(key);\n    return values[0] === null && values[1] === null;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/LimitStore.ts\n **/","import { API_URL } from './vars'\nimport * as log from 'loglevel';\nimport { contains, trimUndefined, wipeIndexedDb, unsubscribeFromPush } from './utils'\nimport {Uuid} from \"./models/Uuid\";\nimport SubscriptionHelper from \"./helpers/SubscriptionHelper\";\nimport * as objectAssign from 'object-assign';\n\n\nexport default class OneSignalApi {\n\n  static get(action, data?, headers?) {\n    return OneSignalApi.call('GET', action, data, headers);\n  }\n\n  static post(action, data?, headers?) {\n    return OneSignalApi.call('POST', action, data, headers);\n  }\n\n  static put(action, data?, headers?) {\n    return OneSignalApi.call('PUT', action, data, headers);\n  }\n\n  static delete(action, data?, headers?) {\n    return OneSignalApi.call('DELETE', action, data, headers);\n  }\n\n  static call(method, action, data, headers) {\n    let callHeaders: any = new Headers();\n    callHeaders.append('SDK-Version', `onesignal/web/${__VERSION__}`);\n    callHeaders.append('Content-Type', 'application/json;charset=UTF-8');\n    if (headers) {\n      for (let key of Object.keys(headers)) {\n        callHeaders.append(key, headers[key]);\n      }\n    }\n\n    let contents = {\n      method: method || 'NO_METHOD_SPECIFIED',\n      headers: callHeaders,\n      cache: 'no-cache'\n    };\n    if (data)\n      (contents as any).body = JSON.stringify(data);\n\n    var status;\n    return fetch(API_URL + action, contents)\n        .then(response => {\n          status = response.status;\n          return response.json();\n        })\n        .then(json => {\n          if (status >= 200 && status < 300)\n            return json;\n          else {\n            let error = OneSignalApi.identifyError(json);\n            if (error === 'no-user-id-error') {\n              // TODO: This returns undefined\n            } else {\n              return Promise.reject(json);\n            }\n          }\n        });\n  }\n\n  static identifyError(error) {\n    if (!error || !error.errors) {\n      return 'no-error';\n    }\n    let errors = error.errors;\n    if (contains(errors, 'No user with this id found') ||\n        contains(errors, 'Could not find app_id for given player id.')) {\n      return 'no-user-id-error';\n    }\n    return 'unknown-error';\n  }\n\n  /**\n   * Given a GCM or Firefox subscription endpoint or Safari device token, returns the user ID from OneSignal's server.\n   * Used if the user clears his or her IndexedDB database and we need the user ID again.\n   */\n  static getUserIdFromSubscriptionIdentifier(appId, deviceType, identifier) {\n    // Calling POST /players with an existing identifier returns us that player ID\n    return OneSignalApi.post('players', {\n      app_id: appId,\n      device_type: deviceType,\n      identifier: identifier\n    }).then(response => {\n      if (response && response.id) {\n        return response.id;\n      } else {\n        return null;\n      }\n    }).catch(e => {\n      log.debug('Error getting user ID from subscription identifier:', e);\n      return null;\n    });\n  }\n\n  static getPlayer(appId, playerId) {\n    return OneSignalApi.get(`players/${playerId}?app_id=${appId}`);\n  }\n\n  static updatePlayer(appId: Uuid, playerId: Uuid, options?: Object) {\n    return OneSignalApi.put(`players/${playerId}`, objectAssign({app_id: appId}, options));\n  }\n\n  static sendNotification(appId, playerIds, titles, contents, url, icon, data, buttons) {\n    var params = {\n      app_id: appId,\n      contents: contents,\n      include_player_ids: playerIds,\n      isAnyWeb: true,\n      data: data,\n      web_buttons: buttons\n    };\n    if (titles) {\n      (params as any).headings = titles;\n    }\n    if (url) {\n      (params as any).url = url;\n    }\n    if (icon) {\n      (params as any).chrome_web_icon = icon;\n      (params as any).firefox_icon = icon;\n    }\n    trimUndefined(params);\n    return OneSignalApi.post('notifications', params);\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/OneSignalApi.ts\n **/","import {\n  isPushNotificationsSupported, removeDomElement, addDomElement, addCssClass, delay, nothing, contains,\n  decodeHtmlEntities, once\n} from '../utils';\nimport * as log from 'loglevel';\nimport Event from '../Event';\nimport * as Browser from 'bowser';\nimport Database from '../Database';\nimport MainHelper from '../helpers/MainHelper';\nimport Launcher from './Launcher';\nimport Badge from './Badge';\nimport Button from './Button';\nimport Dialog from './Dialog';\nimport Message from './Message';\n\nimport SubscriptionHelper from \"../helpers/SubscriptionHelper\";\nvar logoSvg = require('raw!./../assets/bell.svg');\n\n\nexport default class Bell {\n  public enable: boolean;\n  public size: string;\n  public position: string;\n  public theme: string;\n  public showLauncherAfter: number;\n  public showBadgeAfter: number;\n  public text: any;\n  public prenotify: boolean;\n  public showCredit: boolean;\n  public colors: any;\n  public offset: any;\n  public options: any;\n  public state: any;\n  public _ignoreSubscriptionState: boolean;\n  public hovering: boolean;\n  public initialized: boolean;\n  public _launcher: any;\n  public _button: any;\n  public _badge: any;\n  public _message: any;\n  public _dialog: any;\n\n  static get EVENTS() {\n    return {\n      STATE_CHANGED: 'notifyButtonStateChange',\n      LAUNCHER_CLICK: 'notifyButtonLauncherClick',\n      BELL_CLICK: 'notifyButtonButtonClick',\n      SUBSCRIBE_CLICK: 'notifyButtonSubscribeClick',\n      UNSUBSCRIBE_CLICK: 'notifyButtonUnsubscribeClick',\n      HOVERING: 'notifyButtonHovering',\n      HOVERED: 'notifyButtonHover'\n    };\n  }\n\n  static get STATES() {\n    return {\n      UNINITIALIZED: 'uninitialized',\n      SUBSCRIBED: 'subscribed',\n      UNSUBSCRIBED: 'unsubscribed',\n      BLOCKED: 'blocked'\n    };\n  }\n\n  static get TEXT_SUBS() {\n    return {\n      'prompt.native.grant': {\n        default: 'Allow',\n        chrome: 'Allow',\n        firefox: 'Always Receive Notifications',\n        safari: 'Allow'\n      }\n    }\n  }\n\n  substituteText() {\n    // key: 'message.action.subscribing'\n    // value: 'Click <strong>{{prompt.native.grant}}</strong> to receive notifications'\n    for (var key in this.text) {\n      if (this.text.hasOwnProperty(key)) {\n        let value = this.text[key];\n        // browserName could be 'chrome' or 'firefox' or 'safari'\n        let browserName = Browser.name.toLowerCase();\n\n        // tKey: 'prompt.native.grant'  (from TEXT_SUBS)\n        // tValue: { chrome: 'Allow', firefox: 'Al... }\n        // zValue: 'Allow', if browserName === 'chrome'\n        for (var tKey in Bell.TEXT_SUBS) {\n          if (Bell.TEXT_SUBS.hasOwnProperty(tKey)) {\n            let tValue = Bell.TEXT_SUBS[tKey];\n            let zValue = tValue[browserName];\n            if (value && contains(value, '{{')) {\n              this.text[key] = value.replace(`{{${tKey}}}`, (zValue !== undefined ? zValue : tValue['default']));\n            }\n          }\n        }\n      }\n    }\n  }\n\n  constructor({\n    enable = false,\n    size = 'medium',\n    position = 'bottom-right',\n    theme = 'default',\n    showLauncherAfter = 10,\n    showBadgeAfter = 300,\n    text = {\n      'tip.state.unsubscribed': 'Subscribe to notifications',\n      'tip.state.subscribed': \"You're subscribed to notifications\",\n      'tip.state.blocked': \"You've blocked notifications\",\n      'message.prenotify': 'Click to subscribe to notifications',\n      'message.action.subscribing': \"Click <strong>{{prompt.native.grant}}</strong> to receive notifications\",\n      'message.action.subscribed': \"Thanks for subscribing!\",\n      'message.action.resubscribed': \"You're subscribed to notifications\",\n      'message.action.unsubscribed': \"You won't receive notifications again\",\n      'dialog.main.title': 'Manage Site Notifications',\n      'dialog.main.button.subscribe': 'SUBSCRIBE',\n      'dialog.main.button.unsubscribe': 'UNSUBSCRIBE',\n      'dialog.blocked.title': 'Unblock Notifications',\n      'dialog.blocked.message': \"Follow these instructions to allow notifications:\"\n    },\n    prenotify = true,\n    showCredit = true,\n    colors = null,\n    offset = null\n    } = {}) {\n    this.options = {\n      enable: enable,\n      size: size,\n      position: position,\n      theme: theme,\n      showLauncherAfter: showLauncherAfter,\n      showBadgeAfter: showBadgeAfter,\n      text: text,\n      prenotify: prenotify,\n      showCredit: showCredit,\n      colors: colors,\n      offset: offset,\n    };\n\n    require('./bell.scss');\n\n    if (!this.options.enable)\n      return;\n\n    if (!contains(['small', 'medium', 'large'], this.options.size))\n      throw new Error(`Invalid size ${this.options.size} for notify button. Choose among 'small', 'medium', or 'large'.`);\n    if (!contains(['bottom-left', 'bottom-right'], this.options.position))\n      throw new Error(`Invalid position ${this.options.position} for notify button. Choose either 'bottom-left', or 'bottom-right'.`);\n    if (!contains(['default', 'inverse'], this.options.theme))\n      throw new Error(`Invalid theme ${this.options.theme} for notify button. Choose either 'default', or 'inverse'.`);\n    if (this.options.showLauncherAfter < 0)\n      throw new Error(`Invalid delay duration of ${this.options.showLauncherAfter} for showing the notify button. Choose a value above 0.`);\n    if (this.options.showBadgeAfter < 0)\n      throw new Error(`Invalid delay duration of ${this.options.showBadgeAfter} for showing the notify button's badge. Choose a value above 0.`);\n    this.size = this.options.size;\n    this.position = this.options.position;\n    this.text = this.options.text;\n    if (!this.text['tip.state.unsubscribed'])\n      this.text['tip.state.unsubscribed'] = 'Subscribe to notifications';\n    if (!this.text['tip.state.subscribed'])\n      this.text['tip.state.subscribed'] = \"You're subscribed to notifications\";\n    if (!this.text['tip.state.blocked'])\n      this.text['tip.state.blocked'] = \"You've blocked notifications\";\n    if (!this.text['message.prenotify'])\n      this.text['message.prenotify'] = \"Click to subscribe to notifications\";\n    if (!this.text['message.action.subscribed'])\n      this.text['message.action.subscribed'] = \"Thanks for subscribing!\";\n    if (!this.text['message.action.resubscribed'])\n      this.text['message.action.resubscribed'] = \"You're subscribed to notifications\";\n    if (!this.text['message.action.subscribing'])\n      this.text['message.action.subscribing'] = \"Click <strong>{{prompt.native.grant}}</strong> to receive notifications\";\n    if (!this.text['message.action.unsubscribed'])\n      this.text['message.action.unsubscribed'] = \"You won't receive notifications again\";\n    if (!this.text['dialog.main.title'])\n      this.text['dialog.main.title'] = 'Manage Site Notifications';\n    if (!this.text['dialog.main.button.subscribe'])\n      this.text['dialog.main.button.subscribe'] = 'SUBSCRIBE';\n    if (!this.text['dialog.main.button.unsubscribe'])\n      this.text['dialog.main.button.unsubscribe'] = 'UNSUBSCRIBE';\n    if (!this.text['dialog.blocked.title'])\n      this.text['dialog.blocked.title'] = 'Unblock Notifications';\n    if (!this.text['dialog.blocked.message'])\n      this.text['dialog.blocked.message'] = 'Follow these instructions to allow notifications:';\n    this.substituteText();\n    this.state = Bell.STATES.UNINITIALIZED;\n    this._ignoreSubscriptionState = false;\n\n    // Install event hooks\n    OneSignal.on(Bell.EVENTS.SUBSCRIBE_CLICK, () => {\n      this.dialog.subscribeButton.disabled = true;\n      this._ignoreSubscriptionState = true;\n      OneSignal.setSubscription(true)\n        .then(() => {\n          this.dialog.subscribeButton.disabled = false;\n          return this.dialog.hide();\n        })\n        .then(() => {\n          return this.message.display(Message.TYPES.MESSAGE, this.text['message.action.resubscribed'], Message.TIMEOUT);\n        })\n        .then(() => {\n          this._ignoreSubscriptionState = false;\n          this.launcher.clearIfWasInactive();\n          return this.launcher.inactivate();\n        })\n        .then(() => {\n          return this.updateState();\n        });\n    });\n\n    OneSignal.on(Bell.EVENTS.UNSUBSCRIBE_CLICK, () => {\n      this.dialog.unsubscribeButton.disabled = true;\n      OneSignal.setSubscription(false)\n        .then(() => {\n          this.dialog.unsubscribeButton.disabled = false;\n          return this.dialog.hide();\n        })\n        .then(() => {\n          this.launcher.clearIfWasInactive();\n          return this.launcher.activate();\n        })\n        .then(() => {\n          return this.message.display(Message.TYPES.MESSAGE, this.text['message.action.unsubscribed'], Message.TIMEOUT);\n        })\n        .then(() => {\n          return this.updateState();\n        });\n    });\n\n    OneSignal.on(Bell.EVENTS.HOVERING, () => {\n      this.hovering = true;\n      this.launcher.activateIfInactive();\n\n      // If there's already a message being force shown, do not override\n      if (this.message.shown || this.dialog.shown) {\n        this.hovering = false;\n        return;\n      }\n\n      // If the message is a message and not a tip, don't show it (only show tips)\n      // Messages will go away on their own\n      if (this.message.contentType === Message.TYPES.MESSAGE) {\n        this.hovering = false;\n        return;\n      }\n\n      new Promise((resolve, reject) => {\n        // If a message is being shown\n        if (this.message.queued.length > 0) {\n          return this.message.dequeue().then((msg) => {\n            this.message.content = msg;\n            this.message.contentType = Message.TYPES.QUEUED;\n            resolve();\n          });\n        } else {\n          this.message.content = decodeHtmlEntities(this.message.getTipForState());\n          this.message.contentType = Message.TYPES.TIP;\n          resolve();\n        }\n      }).then(() => {\n          return this.message.show();\n        })\n        .then(() => {\n          this.hovering = false;\n        })\n    });\n\n    OneSignal.on(Bell.EVENTS.HOVERED, () => {\n      // If a message is displayed (and not a tip), don't control it. Visitors have no control over messages\n      if (this.message.contentType === Message.TYPES.MESSAGE) {\n        return;\n      }\n\n      if (!this.dialog.hidden) {\n        // If the dialog is being brought up when clicking button, don't shrink\n        return;\n      }\n\n      if (this.hovering) {\n        this.hovering = false;\n        // Hovering still being true here happens on mobile where the message could still be showing (i.e. animating) when a HOVERED event fires\n        // In other words, you tap on mobile, HOVERING fires, and then HOVERED fires immediately after because of the way mobile click events work\n        // Basically only happens if HOVERING and HOVERED fire within a few milliseconds of each other\n        this.message.waitUntilShown()\n          .then(() => delay(Message.TIMEOUT))\n          .then(() => this.message.hide())\n          .then(() => {\n            if (this.launcher.wasInactive && this.dialog.hidden) {\n              this.launcher.inactivate();\n              this.launcher.wasInactive = null;\n            }\n          });\n      }\n\n\n      if (this.message.shown) {\n        this.message.hide()\n          .then(() => {\n            if (this.launcher.wasInactive && this.dialog.hidden) {\n              this.launcher.inactivate();\n              this.launcher.wasInactive = null;\n            }\n          });\n      }\n    });\n\n    OneSignal.on(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, isSubscribed => {\n      if (isSubscribed == true) {\n        if (this.badge.shown && this.options.prenotify) {\n          this.badge.hide();\n        }\n        if (this.dialog.notificationIcons === null) {\n          MainHelper.getNotificationIcons().then((icons) => {\n            this.dialog.notificationIcons = icons;\n          });\n        }\n      }\n\n      OneSignal.getNotificationPermission(permission => {\n        this.setState((isSubscribed ?\n          Bell.STATES.SUBSCRIBED :\n          ((permission === 'denied') ? Bell.STATES.BLOCKED : Bell.STATES.UNSUBSCRIBED)), this._ignoreSubscriptionState);\n      });\n    });\n\n    OneSignal.on(Bell.EVENTS.STATE_CHANGED, (state) => {\n      if (state.to === Bell.STATES.SUBSCRIBED) {\n        this.launcher.inactivate();\n      } else if (state.to === Bell.STATES.UNSUBSCRIBED ||\n                              Bell.STATES.BLOCKED) {\n        this.launcher.activate();\n      }\n    });\n\n    OneSignal.on(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, (from, to) => {\n      this.updateState();\n    });\n\n    this.updateState();\n  }\n\n  showDialogProcedure() {\n    if (!this.dialog.shown) {\n      this.dialog.show()\n        .then(() => {\n          once(document, 'click', (e, destroyEventListener) => {\n            let wasDialogClicked = this.dialog.element.contains(e.target);\n            if (wasDialogClicked) {\n            } else {\n              destroyEventListener();\n              if (this.dialog.shown) {\n                this.dialog.hide()\n                  .then((e) => {\n                    this.launcher.inactivateIfWasInactive();\n                  });\n              }\n            }\n          }, true);\n        });\n    }\n  }\n\n  create() {\n    if (!isPushNotificationsSupported())\n      return;\n\n    if (!this.options.enable)\n      return;\n\n    // Remove any existing bell\n    if (this.container) {\n      removeDomElement('#onesignal-bell-container');\n    }\n\n    // Insert the bell container\n    addDomElement('body', 'beforeend', '<div id=\"onesignal-bell-container\" class=\"onesignal-bell-container onesignal-reset\"></div>');\n    // Insert the bell launcher\n    addDomElement(this.container, 'beforeend', '<div id=\"onesignal-bell-launcher\" class=\"onesignal-bell-launcher\"></div>');\n    // Insert the bell launcher button\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-button\"></div>');\n    // Insert the bell launcher badge\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-badge\"></div>');\n    // Insert the bell launcher message\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message\"></div>');\n    addDomElement(this.message.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-message-body\"></div>');\n    // Insert the bell launcher dialog\n    addDomElement(this.launcher.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog\"></div>');\n    addDomElement(this.dialog.selector, 'beforeend', '<div class=\"onesignal-bell-launcher-dialog-body\"></div>');\n\n    // Install events\n\n    // Add visual elements\n    addDomElement(this.button.selector, 'beforeEnd', logoSvg);\n\n    Promise.all([\n                  OneSignal.isPushNotificationsEnabled(),\n                  OneSignal.getSubscription(),\n                  Database.get('Options', 'popoverDoNotPrompt')\n                ])\n    .then(([isPushEnabled, notOptedOut, doNotPrompt]) => {\n      // Resize to small instead of specified size if enabled, otherwise there's a jerking motion where the bell, at a different size than small, jerks sideways to go from large -> small or medium -> small\n      let resizeTo = (isPushEnabled ? 'small' : this.options.size);\n      // Add default classes\n      this.launcher.resize(resizeTo).then(() => {\n        if (this.options.position === 'bottom-left') {\n          addCssClass(this.container, 'onesignal-bell-container-bottom-left')\n          addCssClass(this.launcher.selector, 'onesignal-bell-launcher-bottom-left')\n        }\n        else if (this.options.position === 'bottom-right') {\n          addCssClass(this.container, 'onesignal-bell-container-bottom-right')\n          addCssClass(this.launcher.selector, 'onesignal-bell-launcher-bottom-right')\n        }\n        else {\n          throw new Error('Invalid OneSignal notify button position ' + this.options.position);\n        }\n\n        if (this.options.theme === 'default') {\n          addCssClass(this.launcher.selector, 'onesignal-bell-launcher-theme-default')\n        }\n        else if (this.options.theme === 'inverse') {\n          addCssClass(this.launcher.selector, 'onesignal-bell-launcher-theme-inverse')\n        }\n        else {\n          throw new Error('Invalid OneSignal notify button theme ' + this.options.theme);\n        }\n\n        this.applyOffsetIfSpecified();\n        this.setCustomColorsIfSpecified();\n        this.patchSafariSvgFilterBug();\n\n        log.info('Showing the notify button.');\n\n        (isPushEnabled ? this.launcher.inactivate() : nothing())\n          .then(() => OneSignal.getSubscription())\n          .then(isNotOptedOut => {\n            if ((isPushEnabled || !isNotOptedOut) && this.dialog.notificationIcons === null) {\n              return MainHelper.getNotificationIcons().then((icons) => {\n                this.dialog.notificationIcons = icons;\n              });\n            } else return nothing();\n          })\n          .then(() => delay(this.options.showLauncherAfter))\n          .then(() => {\n            if (SubscriptionHelper.isUsingSubscriptionWorkaround() &&\n                notOptedOut &&\n                doNotPrompt !== true &&\n                !isPushEnabled &&\n                (OneSignal.config.autoRegister === true) &&\n                !MainHelper.isHttpPromptAlreadyShown() &&\n                !MainHelper.isUsingHttpPermissionRequest()) {\n              log.debug('Not showing notify button because popover will be shown.');\n              return nothing();\n            } else {\n              return this.launcher.show();\n            }\n          })\n          .then(() => {\n            return delay(this.options.showBadgeAfter);\n          })\n          .then(() => {\n            if (this.options.prenotify && !isPushEnabled && OneSignal._isNewVisitor) {\n              return this.message.enqueue(this.text['message.prenotify'])\n                .then(() => this.badge.show());\n            }\n            else return nothing();\n          })\n          .then(() => this.initialized = true);\n      });\n    });\n  }\n\n  patchSafariSvgFilterBug() {\n    if (!(Browser.safari && Number(Browser.version) >= 9.1)) {\n      let bellShadow = `drop-shadow(0 2px 4px rgba(34,36,38,0.35));`;\n      let badgeShadow = `drop-shadow(0 2px 4px rgba(34,36,38,0));`;\n      let dialogShadow = `drop-shadow(0px 2px 2px rgba(34,36,38,.15));`;\n      this.graphic.setAttribute('style', `filter: ${bellShadow}; -webkit-filter: ${bellShadow};`);\n      this.badge.element.setAttribute('style', `filter: ${badgeShadow}; -webkit-filter: ${badgeShadow};`);\n      this.dialog.element.setAttribute('style', `filter: ${dialogShadow}; -webkit-filter: ${dialogShadow};`);\n    }\n    if (Browser.safari) {\n      this.badge.element.setAttribute('style', `display: none;`);\n    }\n  }\n\n  applyOffsetIfSpecified() {\n    let offset = this.options.offset;\n    if (offset) {\n      // Reset styles first\n      this.launcher.element.style.cssText = '';\n\n      if (offset.bottom) {\n        this.launcher.element.style.cssText += `bottom: ${offset.bottom};`;\n      }\n\n      if (this.options.position === 'bottom-right') {\n        if (offset.right) {\n          this.launcher.element.style.cssText += `right: ${offset.right};`;\n        }\n      }\n      else if (this.options.position === 'bottom-left') {\n        if (offset.left) {\n          this.launcher.element.style.cssText += `left: ${offset.left};`;\n        }\n      }\n    }\n  }\n\n  setCustomColorsIfSpecified() {\n    // Some common vars first\n    let dialogButton = this.dialog.element.querySelector('button.action');\n    let pulseRing = this.button.element.querySelector('.pulse-ring');\n    // Reset added styles first\n    this.graphic.querySelector('.background').style.cssText = '';\n    let foregroundElements = this.graphic.querySelectorAll('.foreground');\n    for (let i = 0; i < foregroundElements.length; i++) {\n      let element = foregroundElements[i];\n      element.style.cssText = '';\n    }\n    this.graphic.querySelector('.stroke').style.cssText = '';\n    this.badge.element.style.cssText = '';\n    if (dialogButton) {\n      dialogButton.style.cssText = '';\n      dialogButton.style.cssText = '';\n    }\n    if (pulseRing) {\n      pulseRing.style.cssText = '';\n    }\n\n    // Set new styles\n    if (this.options.colors) {\n      let colors = this.options.colors;\n      if (colors['circle.background']) {\n        this.graphic.querySelector('.background').style.cssText += `fill: ${colors['circle.background']}`;\n      }\n      if (colors['circle.foreground']) {\n        let foregroundElements = this.graphic.querySelectorAll('.foreground');\n        for (let i = 0; i < foregroundElements.length; i++) {\n          let element = foregroundElements[i];\n          element.style.cssText += `fill: ${colors['circle.foreground']}`;\n        }\n        this.graphic.querySelector('.stroke').style.cssText += `stroke: ${colors['circle.foreground']}`;\n      }\n      if (colors['badge.background']) {\n        this.badge.element.style.cssText += `background: ${colors['badge.background']}`;\n      }\n      if (colors['badge.bordercolor']) {\n        this.badge.element.style.cssText += `border-color: ${colors['badge.bordercolor']}`;\n      }\n      if (colors['badge.foreground']) {\n        this.badge.element.style.cssText += `color: ${colors['badge.foreground']}`;\n      }\n      if (dialogButton) {\n        if (colors['dialog.button.background']) {\n          this.dialog.element.querySelector('button.action').style.cssText += `background: ${colors['dialog.button.background']}`;\n        }\n        if (colors['dialog.button.foreground']) {\n          this.dialog.element.querySelector('button.action').style.cssText += `color: ${colors['dialog.button.foreground']}`;\n        }\n        if (colors['dialog.button.background.hovering']) {\n          this.addCssToHead('onesignal-background-hover-style', `#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover { background: ${colors['dialog.button.background.hovering']} !important; }`);\n        }\n        if (colors['dialog.button.background.active']) {\n          this.addCssToHead('onesignal-background-active-style', `#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active { background: ${colors['dialog.button.background.active']} !important; }`);\n        }\n      }\n      if (pulseRing) {\n        if (colors['pulse.color']) {\n          this.button.element.querySelector('.pulse-ring').style.cssText = `border-color: ${colors['pulse.color']}`;\n        }\n      }\n    }\n  }\n\n  addCssToHead(id, css) {\n    let existingStyleDom = document.getElementById(id);\n    if (existingStyleDom)\n      return;\n    let styleDom = document.createElement('style');\n    styleDom.id = id;\n    styleDom.type = 'text/css';\n    styleDom.appendChild(document.createTextNode(css));\n    document.head.appendChild(styleDom);\n  }\n\n  /**\n   * Updates the current state to the correct new current state. Returns a promise.\n   */\n  updateState() {\n    Promise.all([\n      OneSignal.isPushNotificationsEnabled(),\n      OneSignal.getNotificationPermission()\n    ])\n    .then(([isEnabled, permission]) => {\n      this.setState(isEnabled ? Bell.STATES.SUBSCRIBED : Bell.STATES.UNSUBSCRIBED);\n      if (permission === 'denied') {\n        this.setState(Bell.STATES.BLOCKED);\n      }\n    });\n  }\n\n  /**\n   * Updates the current state to the specified new state.\n   * @param newState One of ['subscribed', 'unsubscribed'].\n   */\n  setState(newState, silent = false) {\n    let lastState = this.state;\n    this.state = newState;\n    if (lastState !== newState && !silent) {\n      Event.trigger(Bell.EVENTS.STATE_CHANGED, {from: lastState, to: newState});\n      // Update anything that should be changed here in the new state\n    }\n\n    // Update anything that should be reset to the same state\n  }\n\n  get container() {\n    return document.querySelector('#onesignal-bell-container');\n  }\n\n  get graphic() {\n    return this.button.element.querySelector('svg');\n  }\n\n  get launcher() {\n    if (!this._launcher)\n      this._launcher = new Launcher(this);\n    return this._launcher;\n  }\n\n  get button() {\n    if (!this._button)\n      this._button = new Button(this);\n    return this._button;\n  }\n\n  get badge() {\n    if (!this._badge)\n      this._badge = new Badge();\n    return this._badge;\n  }\n\n  get message() {\n    if (!this._message)\n      this._message = new Message(this);\n    return this._message;\n  }\n\n  get dialog() {\n    if (!this._dialog)\n      this._dialog = new Dialog(this);\n    return this._dialog;\n  }\n\n  get subscribed() {\n    return this.state === Bell.STATES.SUBSCRIBED;\n  }\n\n  get unsubscribed() {\n    return this.state === Bell.STATES.UNSUBSCRIBED;\n  }\n\n  get blocked() {\n    return this.state === Bell.STATES.BLOCKED;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Bell.ts\n **/","import { DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL, STAGING_FRAME_HOST, DEV_PREFIX, STAGING_PREFIX } from '../vars';\r\nimport Environment from '../Environment';\r\nimport OneSignalApi from '../OneSignalApi';\r\nimport * as log from 'loglevel';\r\nimport LimitStore from '../LimitStore';\r\nimport Event from \"../Event\";\r\nimport Database from '../Database';\r\nimport * as Browser from 'bowser';\r\nimport {\r\n  getConsoleStyle, contains, normalizeSubdomain, getDeviceTypeForBrowser, capitalize,\r\n  isPushNotificationsSupported\r\n} from '../utils';\r\nimport * as objectAssign from 'object-assign';\r\nimport * as EventEmitter from 'wolfy87-eventemitter';\r\nimport * as heir from 'heir';\r\nimport * as swivel from 'swivel';\r\nimport Postmam from '../Postmam';\r\nimport * as Cookie from 'js-cookie';\r\nimport MainHelper from \"./MainHelper\";\r\nimport SubscriptionHelper from \"./SubscriptionHelper\";\r\n\r\ndeclare var OneSignal: any;\r\n\r\n\r\nexport default class ServiceWorkerHelper {\r\n  static applyServiceWorkerEnvPrefixes() {\r\n    if (Environment.isDev()) {\r\n      OneSignal.SERVICE_WORKER_PATH = DEV_PREFIX + 'OneSignalSDKWorker.js';\r\n      OneSignal.SERVICE_WORKER_UPDATER_PATH = DEV_PREFIX + 'OneSignalSDKUpdaterWorker.js';\r\n    } else if (Environment.isStaging()) {\r\n      OneSignal.SERVICE_WORKER_PATH = STAGING_PREFIX + 'OneSignalSDKWorker.js';\r\n      OneSignal.SERVICE_WORKER_UPDATER_PATH = STAGING_PREFIX + 'OneSignalSDKUpdaterWorker.js';\r\n    }\r\n  }\r\n\r\n  static closeNotifications() {\r\n    if (navigator.serviceWorker && !SubscriptionHelper.isUsingSubscriptionWorkaround()) {\r\n      navigator.serviceWorker.getRegistration()\r\n        .then(registration => {\r\n          if (registration === undefined || !registration.active) {\r\n            throw new Error('There is no active service worker.');\r\n          } else if (OneSignal._channel) {\r\n            OneSignal._channel.emit('data', 'notification.closeall');\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  /*\r\n   Updates an existing OneSignal-only service worker if an older version exists. Does not install a new service worker if none is available or overwrite other service workers.\r\n   This also differs from the original update code we have below in that we do not subscribe for push after.\r\n   Because we're overwriting a service worker, the push token seems to \"carry over\" (this is good), whereas if we unregistered and registered a new service worker, the push token would be lost (this is bad).\r\n   By not subscribing for push after we register the SW, we don't have to care if notification permissions are granted or not, since users will not be prompted; this update process will be transparent.\r\n   This way we can update the service worker even for autoRegister: false users.\r\n   */\r\n  static updateServiceWorker() {\r\n\r\n    let updateCheckAlreadyRan = sessionStorage.getItem('onesignal-update-serviceworker-completed');\r\n    if (!navigator.serviceWorker || !Environment.isHost() || location.protocol !== 'https:' || updateCheckAlreadyRan == \"true\") {\r\n      log.debug('Skipping service worker update for existing session.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      sessionStorage.setItem('onesignal-update-serviceworker-completed', \"true\");\r\n    } catch (e) {\r\n      log.error(e);\r\n    }\r\n\r\n    return navigator.serviceWorker.getRegistration().then(function (serviceWorkerRegistration) {\r\n      var sw_path = \"\";\r\n\r\n      if (OneSignal.config.path)\r\n        sw_path = OneSignal.config.path;\r\n\r\n      if (serviceWorkerRegistration && serviceWorkerRegistration.active) {\r\n        // An existing service worker\r\n        let previousWorkerUrl = serviceWorkerRegistration.active.scriptURL;\r\n        if (contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_PATH)) {\r\n          // OneSignalSDKWorker.js was installed\r\n          log.debug('(Service Worker Update)', 'The main service worker is active.');\r\n          return Database.get('Ids', 'WORKER1_ONE_SIGNAL_SW_VERSION')\r\n                         .then(function (version) {\r\n                           // Get version of installed worker saved to IndexedDB\r\n                           if (version) {\r\n                             // If a version exists\r\n                             log.debug('(Service Worker Update)', `Stored service worker version v${version}.`);\r\n                             if (version != OneSignal._VERSION) {\r\n                               // If there is a different version\r\n                               log.debug('(Service Worker Update)', 'New service worker version exists:', OneSignal._VERSION);\r\n                               log.info(`Upgrading service worker (v${version} -> v${OneSignal._VERSION})`);\r\n                               return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH, OneSignal.SERVICE_WORKER_PARAM);\r\n                             }\r\n                             else {\r\n                               // No changed service worker version\r\n                               log.debug('(Service Worker Update)', 'You already have the latest service worker version.');\r\n                               return null;\r\n                             }\r\n                           }\r\n                           else {\r\n                             // No version was saved; somehow this got overwritten\r\n                             // Reinstall the alternate service worker\r\n                             log.debug('(Service Worker Update)', 'No stored service worker version. Reinstalling the service worker.');\r\n                             return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH, OneSignal.SERVICE_WORKER_PARAM);\r\n                           }\r\n\r\n                         });\r\n        }\r\n        else if (contains(previousWorkerUrl, sw_path + OneSignal.SERVICE_WORKER_UPDATER_PATH)) {\r\n          // OneSignalSDKUpdaterWorker.js was installed\r\n          log.debug('(Service Worker Update)', 'The alternate service worker is active.');\r\n          return Database.get('Ids', 'WORKER2_ONE_SIGNAL_SW_VERSION')\r\n                         .then(function (version) {\r\n                           // Get version of installed worker saved to IndexedDB\r\n                           if (version) {\r\n                             // If a version exists\r\n                             log.debug('(Service Worker Update)', `Stored service worker version v${version}.`);\r\n                             if (version != OneSignal._VERSION) {\r\n                               // If there is a different version\r\n                               log.debug('(Service Worker Update)', 'New service worker version exists:', OneSignal._VERSION);\r\n                               log.info(`Upgrading new service worker (v${version} -> v${OneSignal._VERSION})`);\r\n                               return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM);\r\n                             }\r\n                             else {\r\n                               // No changed service worker version\r\n                               log.debug('(Service Worker Update)', 'You already have the latest service worker version.');\r\n                               return null;\r\n                             }\r\n                           }\r\n                           else {\r\n                             // No version was saved; somehow this got overwritten\r\n                             // Reinstall the alternate service worker\r\n                             log.debug('(Service Worker Update)', 'No stored service worker version. Reinstalling the service worker.');\r\n                             return navigator.serviceWorker.register(sw_path + OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM);\r\n                           }\r\n                         });\r\n        } else {\r\n          // Some other service worker not belonging to us was installed\r\n          // Don't install ours over it\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  static registerServiceWorker(full_sw_and_path) {\r\n    log.debug(`Called %cregisterServiceWorker(${JSON.stringify(full_sw_and_path, null, 4)})`, getConsoleStyle('code'));\r\n    navigator.serviceWorker.register(full_sw_and_path, OneSignal.SERVICE_WORKER_PARAM).then(SubscriptionHelper.enableNotifications, ServiceWorkerHelper.registerError);\r\n  }\r\n\r\n  static registerError(err) {\r\n    log.error(\"ServiceWorker registration\", err);\r\n  }\r\n\r\n  static isServiceWorkerActive(callback?) {\r\n    if (!isPushNotificationsSupported()) {\r\n      return;\r\n    }\r\n    if (!('serviceWorker' in navigator)) {\r\n      return false;\r\n    }\r\n\r\n    function isServiceWorkerRegistrationActive(serviceWorkerRegistration) {\r\n      return serviceWorkerRegistration.active &&\r\n        serviceWorkerRegistration.active.state === 'activated' &&\r\n        (contains(serviceWorkerRegistration.active.scriptURL, 'OneSignalSDKWorker') ||\r\n        contains(serviceWorkerRegistration.active.scriptURL, 'OneSignalSDKUpdaterWorker'));\r\n    }\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (!SubscriptionHelper.isUsingSubscriptionWorkaround() && !Environment.isIframe()) {\r\n        let isServiceWorkerActive = false;\r\n        if (navigator.serviceWorker.getRegistrations) {\r\n          navigator.serviceWorker.getRegistrations().then(serviceWorkerRegistrations => {\r\n            for (let serviceWorkerRegistration of serviceWorkerRegistrations) {\r\n              if (isServiceWorkerRegistrationActive(serviceWorkerRegistration)) {\r\n                isServiceWorkerActive = true;\r\n              }\r\n            }\r\n            if (callback) {\r\n              callback(isServiceWorkerActive)\r\n            }\r\n            resolve(isServiceWorkerActive);\r\n          });\r\n        } else {\r\n          navigator.serviceWorker.ready.then(serviceWorkerRegistration => {\r\n            if (isServiceWorkerRegistrationActive(serviceWorkerRegistration)) {\r\n              isServiceWorkerActive = true;\r\n            }\r\n            if (callback) {\r\n              callback(isServiceWorkerActive)\r\n            }\r\n            resolve(isServiceWorkerActive);\r\n          });\r\n        }\r\n      } else {\r\n        if (callback) {\r\n          callback(false)\r\n        }\r\n        resolve(false);\r\n      }\r\n    });\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers/ServiceWorkerHelper.ts\n **/","/**\n * Heir v3.0.0 - http://git.io/F87mKg\n * Oliver Caldwell - http://oli.me.uk/\n * Unlicense - http://unlicense.org/\n */\n\n(function (name, root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define(factory);\n    }\n    else if (typeof exports === 'object') {\n        module.exports = factory();\n    }\n    else {\n        root[name] = factory();\n    }\n}('heir', this, function () {\n    /*global define,module*/\n    'use strict';\n\n    var heir = {\n        /**\n         * Causes your desired class to inherit from a source class. This uses\n         * prototypical inheritance so you can override methods without ruining\n         * the parent class.\n         *\n         * This will alter the actual destination class though, it does not\n         * create a new class.\n         *\n         * @param {Function} destination The target class for the inheritance.\n         * @param {Function} source Class to inherit from.\n         * @param {Boolean} addSuper Should we add the _super property to the prototype? Defaults to true.\n         */\n        inherit: function inherit(destination, source, addSuper) {\n            var proto = destination.prototype = heir.createObject(source.prototype);\n            proto.constructor = destination;\n\n            if (addSuper || typeof addSuper === 'undefined') {\n                destination._super = source.prototype;\n            }\n        },\n\n        /**\n         * Creates a new object with the source object nestled within its\n         * prototype chain.\n         *\n         * @param {Object} source Method to insert into the new object's prototype.\n         * @return {Object} An empty object with the source object in it's prototype chain.\n         */\n        createObject: Object.create || function createObject(source) {\n            var Host = function () {};\n            Host.prototype = source;\n            return new Host();\n        },\n\n        /**\n         * Mixes the specified object into your class. This can be used to add\n         * certain capabilities and helper methods to a class that is already\n         * inheriting from some other class. You can mix in as many object as\n         * you want, but only inherit from one.\n         *\n         * These values are mixed into the actual prototype object of your\n         * class, they are not added to the prototype chain like inherit.\n         *\n         * @param {Function} destination Class to mix the object into.\n         * @param {Object} source Object to mix into the class.\n         */\n        mixin: function mixin(destination, source) {\n            return heir.merge(destination.prototype, source);\n        },\n\n        /**\n         * Merges one object into another, change the object in place.\n         *\n         * @param {Object} destination The destination for the merge.\n         * @param {Object} source The source of the properties to merge.\n         */\n        merge: function merge(destination, source) {\n            var key;\n\n            for (key in source) {\n                destination[key] = source[key];\n            }\n        },\n\n        /**\n         * Shortcut for `Object.prototype.hasOwnProperty`.\n         *\n         * Uses `Object.prototype.hasOwnPropety` rather than\n         * `object.hasOwnProperty` as it could be overwritten.\n         *\n         * @param {Object} object The object to check\n         * @param {String} key The key to check for.\n         * @return {Boolean} Does object have key as an own propety?\n         */\n        hasOwn: function hasOwn(object, key) {\n            return Object.prototype.hasOwnProperty.call(object, key);\n        }\n    };\n\n    return heir;\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/heir/heir.js\n ** module id = 18\n ** module chunks = 0\n **/","/*!\n * EventEmitter v5.1.0 - git.io/ee\n * Unlicense - http://unlicense.org/\n * Oliver Caldwell - http://oli.me.uk/\n * @preserve\n */\n\n;(function (exports) {\n    'use strict';\n\n    /**\n     * Class for managing events.\n     * Can be extended to provide event functionality in other classes.\n     *\n     * @class EventEmitter Manages event registering and emitting.\n     */\n    function EventEmitter() {}\n\n    // Shortcuts to improve speed and size\n    var proto = EventEmitter.prototype;\n    var originalGlobalValue = exports.EventEmitter;\n\n    /**\n     * Finds the index of the listener for the event in its storage array.\n     *\n     * @param {Function[]} listeners Array of listeners to search through.\n     * @param {Function} listener Method to look for.\n     * @return {Number} Index of the specified listener, -1 if not found\n     * @api private\n     */\n    function indexOfListener(listeners, listener) {\n        var i = listeners.length;\n        while (i--) {\n            if (listeners[i].listener === listener) {\n                return i;\n            }\n        }\n\n        return -1;\n    }\n\n    /**\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\n     *\n     * @param {String} name The name of the target method.\n     * @return {Function} The aliased method\n     * @api private\n     */\n    function alias(name) {\n        return function aliasClosure() {\n            return this[name].apply(this, arguments);\n        };\n    }\n\n    /**\n     * Returns the listener array for the specified event.\n     * Will initialise the event object and listener arrays if required.\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\n     * Each property in the object response is an array of listener functions.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Function[]|Object} All listener functions for the event.\n     */\n    proto.getListeners = function getListeners(evt) {\n        var events = this._getEvents();\n        var response;\n        var key;\n\n        // Return a concatenated array of all matching events if\n        // the selector is a regular expression.\n        if (evt instanceof RegExp) {\n            response = {};\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    response[key] = events[key];\n                }\n            }\n        }\n        else {\n            response = events[evt] || (events[evt] = []);\n        }\n\n        return response;\n    };\n\n    /**\n     * Takes a list of listener objects and flattens it into a list of listener functions.\n     *\n     * @param {Object[]} listeners Raw listener objects.\n     * @return {Function[]} Just the listener functions.\n     */\n    proto.flattenListeners = function flattenListeners(listeners) {\n        var flatListeners = [];\n        var i;\n\n        for (i = 0; i < listeners.length; i += 1) {\n            flatListeners.push(listeners[i].listener);\n        }\n\n        return flatListeners;\n    };\n\n    /**\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\n     *\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\n     * @return {Object} All listener functions for an event in an object.\n     */\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\n        var listeners = this.getListeners(evt);\n        var response;\n\n        if (listeners instanceof Array) {\n            response = {};\n            response[evt] = listeners;\n        }\n\n        return response || listeners;\n    };\n\n    function isValidListener (listener) {\n        if (typeof listener === 'function' || listener instanceof RegExp) {\n            return true\n        } else if (listener && typeof listener === 'object') {\n            return isValidListener(listener.listener)\n        } else {\n            return false\n        }\n    }\n\n    /**\n     * Adds a listener function to the specified event.\n     * The listener will not be added if it is a duplicate.\n     * If the listener returns true then it will be removed after it is called.\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListener = function addListener(evt, listener) {\n        if (!isValidListener(listener)) {\n            throw new TypeError('listener must be a function');\n        }\n\n        var listeners = this.getListenersAsObject(evt);\n        var listenerIsWrapped = typeof listener === 'object';\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\n                listeners[key].push(listenerIsWrapped ? listener : {\n                    listener: listener,\n                    once: false\n                });\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of addListener\n     */\n    proto.on = alias('addListener');\n\n    /**\n     * Semi-alias of addListener. It will add a listener that will be\n     * automatically removed after its first execution.\n     *\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addOnceListener = function addOnceListener(evt, listener) {\n        return this.addListener(evt, {\n            listener: listener,\n            once: true\n        });\n    };\n\n    /**\n     * Alias of addOnceListener.\n     */\n    proto.once = alias('addOnceListener');\n\n    /**\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\n     * You need to tell it what event names should be matched by a regex.\n     *\n     * @param {String} evt Name of the event to create.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvent = function defineEvent(evt) {\n        this.getListeners(evt);\n        return this;\n    };\n\n    /**\n     * Uses defineEvent to define multiple events.\n     *\n     * @param {String[]} evts An array of event names to define.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.defineEvents = function defineEvents(evts) {\n        for (var i = 0; i < evts.length; i += 1) {\n            this.defineEvent(evts[i]);\n        }\n        return this;\n    };\n\n    /**\n     * Removes a listener function from the specified event.\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\n     * @param {Function} listener Method to remove from the event.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListener = function removeListener(evt, listener) {\n        var listeners = this.getListenersAsObject(evt);\n        var index;\n        var key;\n\n        for (key in listeners) {\n            if (listeners.hasOwnProperty(key)) {\n                index = indexOfListener(listeners[key], listener);\n\n                if (index !== -1) {\n                    listeners[key].splice(index, 1);\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeListener\n     */\n    proto.off = alias('removeListener');\n\n    /**\n     * Adds listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\n     * Yeah, this function does quite a bit. That's probably a bad thing.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.addListeners = function addListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(false, evt, listeners);\n    };\n\n    /**\n     * Removes listeners in bulk using the manipulateListeners method.\n     * If you pass an object as the second argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be removed.\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\n     *\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeListeners = function removeListeners(evt, listeners) {\n        // Pass through to manipulateListeners\n        return this.manipulateListeners(true, evt, listeners);\n    };\n\n    /**\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\n     * The first argument will determine if the listeners are removed (true) or added (false).\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\n     * You can also pass it an event name and an array of listeners to be added/removed.\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\n     *\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\n        var i;\n        var value;\n        var single = remove ? this.removeListener : this.addListener;\n        var multiple = remove ? this.removeListeners : this.addListeners;\n\n        // If evt is an object then pass each of its properties to this method\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\n            for (i in evt) {\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\n                    // Pass the single listener straight through to the singular method\n                    if (typeof value === 'function') {\n                        single.call(this, i, value);\n                    }\n                    else {\n                        // Otherwise pass back to the multiple function\n                        multiple.call(this, i, value);\n                    }\n                }\n            }\n        }\n        else {\n            // So evt must be a string\n            // And listeners must be an array of listeners\n            // Loop over it and pass each one to the multiple method\n            i = listeners.length;\n            while (i--) {\n                single.call(this, evt, listeners[i]);\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Removes all listeners from a specified event.\n     * If you do not specify an event then all listeners will be removed.\n     * That means every event will be emptied.\n     * You can also pass a regex to remove all events that match it.\n     *\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.removeEvent = function removeEvent(evt) {\n        var type = typeof evt;\n        var events = this._getEvents();\n        var key;\n\n        // Remove different things depending on the state of evt\n        if (type === 'string') {\n            // Remove all listeners for the specified event\n            delete events[evt];\n        }\n        else if (evt instanceof RegExp) {\n            // Remove all events matching the regex.\n            for (key in events) {\n                if (events.hasOwnProperty(key) && evt.test(key)) {\n                    delete events[key];\n                }\n            }\n        }\n        else {\n            // Remove all listeners in all events\n            delete this._events;\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of removeEvent.\n     *\n     * Added to mirror the node API.\n     */\n    proto.removeAllListeners = alias('removeEvent');\n\n    /**\n     * Emits an event of your choice.\n     * When emitted, every listener attached to that event will be executed.\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\n     * So they will not arrive within the array on the other side, they will be separate.\n     * You can also pass a regular expression to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emitEvent = function emitEvent(evt, args) {\n        var listenersMap = this.getListenersAsObject(evt);\n        var listeners;\n        var listener;\n        var i;\n        var key;\n        var response;\n\n        for (key in listenersMap) {\n            if (listenersMap.hasOwnProperty(key)) {\n                listeners = listenersMap[key].slice(0);\n\n                for (i = 0; i < listeners.length; i++) {\n                    // If the listener returns true then it shall be removed from the event\n                    // The function is executed either with a basic call or an apply if there is an args array\n                    listener = listeners[i];\n\n                    if (listener.once === true) {\n                        this.removeListener(evt, listener.listener);\n                    }\n\n                    response = listener.listener.apply(this, args || []);\n\n                    if (response === this._getOnceReturnValue()) {\n                        this.removeListener(evt, listener.listener);\n                    }\n                }\n            }\n        }\n\n        return this;\n    };\n\n    /**\n     * Alias of emitEvent\n     */\n    proto.trigger = alias('emitEvent');\n\n    /**\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\n     *\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\n     * @param {...*} Optional additional arguments to be passed to each listener.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.emit = function emit(evt) {\n        var args = Array.prototype.slice.call(arguments, 1);\n        return this.emitEvent(evt, args);\n    };\n\n    /**\n     * Sets the current value to check against when executing listeners. If a\n     * listeners return value matches the one set here then it will be removed\n     * after execution. This value defaults to true.\n     *\n     * @param {*} value The new value to check for when executing listeners.\n     * @return {Object} Current instance of EventEmitter for chaining.\n     */\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\n        this._onceReturnValue = value;\n        return this;\n    };\n\n    /**\n     * Fetches the current value to check against when executing listeners. If\n     * the listeners return value matches this one then it should be removed\n     * automatically. It will return true by default.\n     *\n     * @return {*|Boolean} The current value to check for or the default, true.\n     * @api private\n     */\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\n        if (this.hasOwnProperty('_onceReturnValue')) {\n            return this._onceReturnValue;\n        }\n        else {\n            return true;\n        }\n    };\n\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    proto._getEvents = function _getEvents() {\n        return this._events || (this._events = {});\n    };\n\n    /**\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\n     *\n     * @return {Function} Non conflicting EventEmitter class.\n     */\n    EventEmitter.noConflict = function noConflict() {\n        exports.EventEmitter = originalGlobalValue;\n        return EventEmitter;\n    };\n\n    // Expose the class either via AMD, CommonJS or the global object\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return EventEmitter;\n        });\n    }\n    else if (typeof module === 'object' && module.exports){\n        module.exports = EventEmitter;\n    }\n    else {\n        exports.EventEmitter = EventEmitter;\n    }\n}(this || {}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/wolfy87-eventemitter/EventEmitter.js\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = function atoa (a, n) { return Array.prototype.slice.call(a, n); }\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/atoa/atoa.js\n ** module id = 20\n ** module chunks = 0\n **/","import { addCssClass, removeCssClass, contains, once } from '../utils';\nimport * as log from 'loglevel';\nimport Event from '../Event';\nimport AnimatedElement from './AnimatedElement';\nimport * as objectAssign from 'object-assign';\n\nexport default class ActiveAnimatedElement extends AnimatedElement {\n\n  /**\n   * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n   * @param selector {string} The CSS selector of the element.\n   * @param showClass {string} The CSS class name to add to show the element.\n   * @param hideClass {string} The CSS class name to remove to hide the element.\n   * @param activeClass {string} The CSS class name to add to activate the element.\n   * @param inactiveClass {string} The CSS class name to remove to inactivate the element.\n   * @param state {string} The current state of the element, defaults to 'shown'.\n   * @param activeState {string} The current state of the element, defaults to 'active'.\n   * @param targetTransitionEvents {string} An array of properties (e.g. ['transform', 'opacity']) to look for on transitionend of show() and hide() to know the transition is complete. As long as one matches, the transition is considered complete.\n   * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n   */\n  constructor(public selector: string,\n              public showClass: string,\n              public hideClass: string,\n              public activeClass: string,\n              public inactiveClass: string,\n              public state = 'shown',\n              public activeState = 'active',\n              public targetTransitionEvents = ['opacity', 'transform'],\n              public nestedContentSelector = null) {\n    super(selector, showClass, hideClass, state, targetTransitionEvents);\n  }\n\n  /**\n   * Asynchronously activates an element by applying its {activeClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  activate() {\n    if (!this.inactive || !this.shown) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      this.activeState = 'activating';\n      Event.trigger(ActiveAnimatedElement.EVENTS.ACTIVATING, this);\n      if (this.inactiveClass)\n        removeCssClass(this.element, this.inactiveClass);\n      if (this.activeClass)\n        addCssClass(this.element, this.activeClass);\n      if (this.shown) {\n        if (this.targetTransitionEvents.length == 0) {\n          return resolve(this);\n        } else {\n          var timerId = setTimeout(() => {\n            log.debug(`Element did not completely activate (state: ${this.state}, activeState: ${this.activeState}).`)\n          }, this.transitionCheckTimeout);\n          once(this.element, 'transitionend', (event, destroyListenerFn) => {\n            if (event.target === this.element &&\n              contains(this.targetTransitionEvents, event.propertyName)) {\n              clearTimeout(timerId);\n              // Uninstall the event listener for transitionend\n              destroyListenerFn();\n              this.activeState = 'active';\n              Event.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, this);\n              return resolve(this);\n            }\n          }, true);\n        }\n      }\n      else {\n        log.debug(`Ending activate() transition (alternative).`);\n        this.activeState = 'active';\n        Event.trigger(ActiveAnimatedElement.EVENTS.ACTIVE, this);\n        return resolve(this);\n      }\n    });\n  }\n\n  /**\n   * Asynchronously activates an element by applying its {activeClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  inactivate() {\n    if (!this.active) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      this.activeState = 'inactivating';\n      Event.trigger(ActiveAnimatedElement.EVENTS.INACTIVATING, this);\n      if (this.activeClass)\n        removeCssClass(this.element, this.activeClass);\n      if (this.inactiveClass)\n        addCssClass(this.element, this.inactiveClass);\n      if (this.shown) {\n        if (this.targetTransitionEvents.length == 0) {\n          return resolve(this);\n        } else {\n          var timerId = setTimeout(() => {\n            log.debug(`Element did not completely inactivate (state: ${this.state}, activeState: ${this.activeState}).`)\n          }, this.transitionCheckTimeout);\n          once(this.element, 'transitionend', (event, destroyListenerFn) => {\n            if (event.target === this.element &&\n              contains(this.targetTransitionEvents, event.propertyName)) {\n              clearTimeout(timerId);\n              // Uninstall the event listener for transitionend\n              destroyListenerFn();\n              this.activeState = 'inactive';\n              Event.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, this);\n              return resolve(this);\n            }\n          }, true);\n        }\n      }\n      else {\n        this.activeState = 'inactive';\n        Event.trigger(ActiveAnimatedElement.EVENTS.INACTIVE, this);\n        return resolve(this);\n      }\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being active.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilActive() {\n    if (this.active)\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      OneSignal.once(ActiveAnimatedElement.EVENTS.ACTIVE, (event) => {\n        if (event === this) {\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being inactive.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilInactive() {\n    if (this.inactive)\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      OneSignal.once(ActiveAnimatedElement.EVENTS.INACTIVE, (event) => {\n        if (event === this) {\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  static get EVENTS() {\n    return objectAssign({}, AnimatedElement.EVENTS, {\n      ACTIVATING: 'activeAnimatedElementActivating',\n      ACTIVE: 'activeAnimatedElementActive',\n      INACTIVATING: 'activeAnimatedElementInactivating',\n      INACTIVE: 'activeAnimatedElementInactive',\n    });\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to being activated.\n   */\n  get activating() {\n    return this.activeState === 'activating';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already active.\n   */\n  get active() {\n    return this.activeState === 'active';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to inactive.\n   */\n  get inactivating() {\n    return this.activeState === 'inactivating';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already inactive.\n   */\n  get inactive() {\n    return this.activeState === 'inactive';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/ActiveAnimatedElement.ts\n **/","import { addCssClass, removeCssClass, contains, once } from '../utils';\nimport * as log from 'loglevel';\nimport Event from '../Event'\n\n\nexport default class AnimatedElement {\n\n  /**\n   * Abstracts common DOM operations like hiding and showing transitionable elements into chainable promises.\n   * @param selector {string} The CSS selector of the element.\n   * @param showClass {string} The CSS class name to add to show the element.\n   * @param hideClass {string} The CSS class name to remove to hide the element.\n   * @param state {string} The current state of the element, defaults to 'shown'.\n   * @param targetTransitionEvents {string} An array of properties (e.g. ['transform', 'opacity']) to look for on transitionend of show() and hide() to know the transition is complete. As long as one matches, the transition is considered complete.\n   * @param nestedContentSelector {string} The CSS selector targeting the nested element within the current element. This nested element will be used for content getters and setters.\n   */\n  constructor(public selector: string,\n              public showClass: string,\n              public hideClass: string,\n              public state = 'shown',\n              public targetTransitionEvents = ['opacity', 'transform'],\n              public nestedContentSelector: string = null,\n              public transitionCheckTimeout = 500) {\n  }\n\n  /**\n   * Asynchronously shows an element by applying its {showClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  show() {\n    if (!this.hidden) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      var self = this;\n      this.state = 'showing';\n      Event.trigger(AnimatedElement.EVENTS.SHOWING, this);\n      if (this.hideClass)\n        removeCssClass(this.element, this.hideClass);\n      if (this.showClass)\n        addCssClass(this.element, this.showClass);\n      if (this.targetTransitionEvents.length == 0) {\n        return resolve(this);\n      } else {\n        var timerId = setTimeout(() => {\n          log.debug(`Element did not completely show (state: ${this.state}).`)\n        }, this.transitionCheckTimeout);\n        once(this.element, 'transitionend', (event, destroyListenerFn) => {\n          if (event.target === this.element &&\n            contains(this.targetTransitionEvents, event.propertyName)) {\n            clearTimeout(timerId);\n            // Uninstall the event listener for transitionend\n            destroyListenerFn();\n            this.state = 'shown';\n            Event.trigger(AnimatedElement.EVENTS.SHOWN, this);\n            return resolve(this);\n          }\n        }, true);\n      }\n    });\n  }\n\n  /**\n   * Asynchronously hides an element by applying its {hideClass} CSS class.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  hide() {\n    if (!this.shown) {\n      return Promise.resolve(this);\n    }\n    else return new Promise((resolve) => {\n      this.state = 'hiding';\n      Event.trigger(AnimatedElement.EVENTS.HIDING, this);\n      if (this.showClass)\n        removeCssClass(this.element, this.showClass);\n      if (this.hideClass)\n        addCssClass(this.element, this.hideClass);\n      if (this.targetTransitionEvents.length == 0) {\n        return resolve(this);\n      } else {\n        once(this.element, 'transitionend', (event, destroyListenerFn) => {\n          var timerId = setTimeout(() => {\n            log.debug(`Element did not completely hide (state: ${this.state}).`)\n          }, this.transitionCheckTimeout);\n          if (event.target === this.element &&\n            contains(this.targetTransitionEvents, event.propertyName)) {\n            clearTimeout(timerId);\n            // Uninstall the event listener for transitionend\n            destroyListenerFn();\n            this.state = 'hidden';\n            Event.trigger(AnimatedElement.EVENTS.HIDDEN, this);\n            return resolve(this);\n          }\n        }, true);\n      }\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being shown.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilShown() {\n    if (this.state === 'shown')\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      OneSignal.once(AnimatedElement.EVENTS.SHOWN, (event) => {\n        var self = this;\n        if (event === this) {\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  /**\n   * Asynchronously waits for an element to finish transitioning to being hidden.\n   * @returns {Promise} Returns a promise that is resolved with this element when it has completed its transition.\n   */\n  waitUntilHidden() {\n    if (this.state === 'hidden')\n      return Promise.resolve(this);\n    else return new Promise((resolve) => {\n      OneSignal.once(AnimatedElement.EVENTS.HIDDEN, (event) => {\n        if (event === this) {\n          return resolve(this);\n        }\n      }, true);\n    });\n  }\n\n  static get EVENTS() {\n    return {\n      SHOWING: 'animatedElementShowing',\n      SHOWN: 'animatedElementShown',\n      HIDING: 'animatedElementHiding',\n      HIDDEN: 'aniamtedElementHidden',\n    };\n  }\n\n  /**\n   * Returns the native element's innerHTML property.\n   * @returns {string} Returns the native element's innerHTML property.\n   */\n  get content() {\n    if (this.nestedContentSelector)\n      return this.element.querySelector(this.nestedContentSelector).innerHTML;\n    else\n      return this.element.innerHTML;\n  }\n\n  /**\n   * Sets the native element's innerHTML property.\n   * @param value {string} The HTML to set to the element.\n   */\n  set content(value) {\n    if (this.nestedContentSelector) {\n      this.element.querySelector(this.nestedContentSelector).innerHTML = value;\n    }\n    else {\n      this.element.innerHTML = value;\n    }\n  }\n\n\n  /**\n   * Returns the native {Element} via document.querySelector().\n   * @returns {Element} Returns the native {Element} via document.querySelector().\n   */\n  get element() {\n    return document.querySelector(this.selector);\n  }\n\n  /* States an element can be in */\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to being shown.\n   */\n  get showing() {\n    return this.state === 'showing';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already shown.\n   */\n  get shown() {\n    return this.state === 'shown';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be transitioning to hiding.\n   */\n  get hiding() {\n    return this.state === 'hiding';\n  }\n\n  /**\n   * Synchronously returns the last known state of the element.\n   * @returns {boolean} Returns true if the element was last known to be already hidden.\n   */\n  get hidden() {\n    return this.state === 'hidden';\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/AnimatedElement.ts\n **/","import OneSignalError from \"./OneSignalError\";\r\nimport { PermissionPromptType } from \"../models/PermissionPromptType\";\r\n\r\n\r\nexport enum InvalidStateReason {\r\n  MissingAppId,\r\n  RedundantPermissionMessage,\r\n  PushPermissionAlreadyGranted,\r\n  UnsupportedEnvironment\r\n}\r\n\r\nexport class InvalidStateError extends OneSignalError {\r\n  reason: string;\r\n\r\n  constructor(reason: InvalidStateReason, extra?: {\r\n    permissionPromptType: PermissionPromptType\r\n  }) {\r\n    switch (reason) {\r\n      case InvalidStateReason.MissingAppId:\r\n        super(`Missing required app ID.`);\r\n        break;\r\n      case InvalidStateReason.RedundantPermissionMessage:\r\n        let extraInfo = '';\r\n        if (extra.permissionPromptType)\r\n          extraInfo = `(${PermissionPromptType[extra.permissionPromptType]})`;\r\n        super(`Another permission message ${extraInfo} is being displayed.`);\r\n        break;\r\n      case InvalidStateReason.PushPermissionAlreadyGranted:\r\n        super(`Push permission has already been granted.`);\r\n        break;\r\n      case InvalidStateReason.UnsupportedEnvironment:\r\n        super(`The current environment does not support this operation.`);\r\n        break;\r\n    }\r\n    this.reason = InvalidStateReason[reason];\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/InvalidStateError.ts\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 24\n ** module chunks = 0\n **/","/*** IMPORTS FROM imports-loader ***/\n(function() {\n\n(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = global.fetch;\n}.call(global));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/imports-loader?this=>global!./~/exports-loader?global.fetch!./~/whatwg-fetch/fetch.js\n ** module id = 25\n ** module chunks = 0\n **/","/*!\n * JavaScript Cookie v2.1.3\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\treturn (document.cookie = [\n\t\t\t\t\tkey, '=', value,\n\t\t\t\t\tattributes.expires ? '; expires=' + attributes.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE\n\t\t\t\t\tattributes.path ? '; path=' + attributes.path : '',\n\t\t\t\t\tattributes.domain ? '; domain=' + attributes.domain : '',\n\t\t\t\t\tattributes.secure ? '; secure' : ''\n\t\t\t\t].join(''));\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/js-cookie/src/js.cookie.js\n ** module id = 26\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 27\n ** module chunks = 0\n **/","'use strict';\n\nvar page = require('./page');\nvar worker = require('./worker');\nvar api;\n\nif ('serviceWorker' in navigator) {\n  api = page();\n} else if ('clients' in self) {\n  api = worker();\n} else {\n  api = {\n    on: complain,\n    once: complain,\n    off: complain,\n    emit: complain,\n    broadcast: complain\n  };\n}\n\nfunction complain () {\n  throw new Error('Swivel couldn\\'t detect ServiceWorker support. Please feature detect before using Swivel in your web pages!');\n}\n\nmodule.exports = api;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/swivel/swivel.js\n ** module id = 28\n ** module chunks = 0\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/timers-browserify/main.js\n ** module id = 29\n ** module chunks = 0\n **/","import { guid, contains } from './utils';\nimport * as EventEmitter from 'wolfy87-eventemitter';\nimport * as heir from 'heir';\nimport Environment from './Environment';\nimport { DEV_FRAME_HOST, STAGING_FRAME_HOST } from './vars';\nimport * as objectAssign from 'object-assign';\nimport * as log from 'loglevel';\n\ndeclare var OneSignal: any;\n\n\n/**\n * Establishes a cross-domain MessageChannel between the current browsing context (this page) and another (an iFrame, popup, or parent page).\n */\nexport default class Postmam {\n\n  static get HANDSHAKE_MESSAGE() {\n    return \"onesignal.postmam.handshake\";\n  }\n\n  static get CONNECTED_MESSAGE() {\n    return \"onesignal.postmam.connected\";\n  }\n\n  public channel: MessageChannel;\n  public messagePort: MessagePort;\n  public isListening: boolean;\n  public isConnected: boolean;\n  public replies: any;\n\n  /**\n   * Initializes Postmam with settings but does not establish a channel or set up any message listeners.\n   * @param windowReference The window to postMessage() the initial MessageChannel port to.\n   * @param sendToOrigin The origin that will receive the initial postMessage with the transferred message channel port object.\n   * @param receiveFromOrigin The origin to allow incoming messages from. If messages do not come from this origin they will be discarded. Only affects the initial handshake.\n   * @remarks The initiating (client) page must call this after the page has been loaded so that the other page has a chance to receive the initial handshake message. The receiving (server) page must set up a message listener to catch the initial handshake message.\n   */\n  constructor(public windowReference: any,\n              public sendToOrigin: string,\n              public receiveFromOrigin: string) {\n    if (!window || !window.postMessage) {\n      throw new Error('Must pass in a valid window reference supporting postMessage():' + windowReference);\n    }\n    if (!sendToOrigin || !receiveFromOrigin) {\n      throw new Error('Invalid origin. Must be set.');\n    }\n    heir.merge(this, new EventEmitter());\n    this.channel = new MessageChannel();\n    this.messagePort = null;\n    this.isListening = false;\n    this.isConnected = false;\n    this.replies = {};\n  }\n\n  /**\n   * Opens a message event listener to listen for a Postmam handshake from another browsing context. This listener is closed as soon as the connection is established.\n   */\n  listen() {\n    log.trace('(Postmam) Called listen().');\n    if (this.isListening) {\n      log.debug('(Postmam) Already listening for Postmam connections.');\n      return;\n    }\n    if (!Environment.isBrowser()) {\n      return;\n    }\n    this.isListening = true;\n    log.debug('(Postmam) Listening for Postmam connections.', this);\n    // One of the messages will contain our MessageChannel port\n    window.addEventListener('message', this.onWindowMessagePostmanConnectReceived.bind(this));\n  }\n\n  startPostMessageReceive() {\n    window.addEventListener('message', this.onWindowPostMessageReceived.bind(this));\n  }\n\n  stopPostMessageReceive() {\n    window.removeEventListener('message', this.onWindowPostMessageReceived);\n  }\n\n  destroy() {\n    this.stopPostMessageReceive();\n    (this as any).removeEvent();\n  }\n\n  onWindowPostMessageReceived(e) {\n    // Discard messages from unexpected origins; messages come frequently from other origins\n    if (!this.isSafeOrigin(e.origin)) {\n      // log.debug(`(Postmam) Discarding message because ${e.origin} is not an allowed origin:`, e.data)\n      return;\n    }\n    //log.debug(`(Postmam) (onWindowPostMessageReceived) (${Environment.getEnv()}):`, e);\n    let { id: messageId, command: messageCommand, data: messageData, source: messageSource } = e.data;\n    if (messageCommand === Postmam.CONNECTED_MESSAGE) {\n      (this as any).emit('connect');\n      this.isConnected = true;\n      return;\n    }\n    let messageBundle = {\n      id: messageId,\n      command: messageCommand,\n      data: messageData,\n      source: messageSource\n    };\n    let messageBundleWithReply = objectAssign({\n      reply: this.reply.bind(this, messageBundle)\n    }, messageBundle);\n    if (this.replies.hasOwnProperty(messageId)) {\n      log.info('(Postmam) This message is a reply.');\n      let replyFn = this.replies[messageId].bind(window);\n      let replyFnReturnValue = replyFn(messageBundleWithReply);\n      if (replyFnReturnValue === false) {\n        delete this.replies[messageId];\n      }\n    } else {\n      (this as any).emit(messageCommand, messageBundleWithReply);\n    }\n  }\n\n  onWindowMessagePostmanConnectReceived(e) {\n    log.trace(`(Postmam) (${Environment.getEnv()}) Window postmessage for Postman connect received:`, e);\n    // Discard messages from unexpected origins; messages come frequently from other origins\n    if (!this.isSafeOrigin(e.origin)) {\n      // log.debug(`(Postmam) Discarding message because ${e.origin} is not an allowed origin:`, e.data)\n      return;\n    }\n    var { handshake } = e.data;\n    if (handshake !== Postmam.HANDSHAKE_MESSAGE) {\n      log.info('(Postmam) Got a postmam message, but not our expected handshake:', e.data);\n      // This was not our expected handshake message\n      return;\n    } else {\n      log.info('(Postmam) Got our expected Postmam handshake message (and connecting...):', e.data);\n      // This was our expected handshake message\n      // Remove our message handler so we don't get spammed with cross-domain messages\n      window.removeEventListener('message', this.onWindowMessagePostmanConnectReceived);\n      // Get the message port\n      this.messagePort = e.ports[0];\n      this.messagePort.addEventListener('message', this.onMessageReceived.bind(this), false);\n      log.info('(Postmam) Removed previous message event listener for handshakes, replaced with main message listener.');\n      this.messagePort.start();\n      this.isConnected = true;\n      log.info(`(Postmam) (${Environment.getEnv()}) Connected.`);\n      this.message(Postmam.CONNECTED_MESSAGE);\n      (this as any).emit('connect');\n    }\n  }\n\n  /**\n   * Establishes a message channel with a listening Postmam on another browsing context.\n   * @remarks Only call this if listen() is called on another page.\n   */\n  connect() {\n    log.info(`(Postmam) (${Environment.getEnv()}) Establishing a connection to ${this.sendToOrigin}.`);\n    this.messagePort = this.channel.port1;\n    this.messagePort.addEventListener('message', this.onMessageReceived.bind(this), false);\n    this.messagePort.start();\n    this.windowReference.postMessage({\n      handshake: Postmam.HANDSHAKE_MESSAGE\n    }, this.sendToOrigin, [this.channel.port2]);\n  }\n\n  onMessageReceived(e) {\n    //log.debug(`(Postmam) (${Environment.getEnv()}):`, e.data);\n    if (!e.data) {\n      log.debug(`(${Environment.getEnv()}) Received an empty Postmam message:`, e);\n      return;\n    }\n    let { id: messageId, command: messageCommand, data: messageData, source: messageSource } = e.data;\n    if (messageCommand === Postmam.CONNECTED_MESSAGE) {\n      (this as any).emit('connect');\n      this.isConnected = true;\n      return;\n    }\n    let messageBundle = {\n      id: messageId,\n      command: messageCommand,\n      data: messageData,\n      source: messageSource\n    };\n    let messageBundleWithReply = objectAssign({\n      reply: this.reply.bind(this, messageBundle)\n    }, messageBundle);\n    if (this.replies.hasOwnProperty(messageId)) {\n      let replyFn = this.replies[messageId].bind(window);\n      let replyFnReturnValue = replyFn(messageBundleWithReply);\n      if (replyFnReturnValue === false) {\n        delete this.replies[messageId];\n      }\n    } else {\n      (this as any).emit(messageCommand, messageBundleWithReply);\n    }\n  }\n\n  reply(originalMessageBundle, data, onReply) {\n    const messageBundle = {\n      id: originalMessageBundle.id,\n      command: originalMessageBundle.command,\n      data: data,\n      source: Environment.getEnv(),\n      isReply: true\n    };\n    if (typeof onReply === 'function') {\n      this.replies[messageBundle.id] = onReply;\n    }\n    this.messagePort.postMessage(messageBundle);\n  }\n\n  /**\n   * Sends via window.postMessage.\n   */\n  postMessage(command, data, onReply) {\n    if (!command || command == '') {\n      throw new Error(\"(Postmam) Postmam command must not be empty.\");\n    }\n    if (typeof data === 'function') {\n      log.debug('You passed a function to data, did you mean to pass null?');\n      return;\n    }\n    const messageBundle = {\n      id: guid(),\n      command: command,\n      data: data,\n      source: Environment.getEnv()\n    };\n    if (typeof onReply === 'function') {\n      this.replies[messageBundle.id] = onReply;\n    }\n    this.windowReference.postMessage(messageBundle, '*');\n  }\n\n  /**\n   * Sends via MessageChannel.port.postMessage\n   */\n  message(command, data?, onReply?) {\n    if (!command || command == '') {\n      throw new Error(\"(Postmam) Postmam command must not be empty.\");\n    }\n    if (typeof data === 'function') {\n      log.debug('You passed a function to data, did you mean to pass null?')\n      return;\n    }\n    const messageBundle = {\n      id: guid(),\n      command: command,\n      data: data,\n      source: Environment.getEnv()\n    };\n    if (typeof onReply === 'function') {\n      this.replies[messageBundle.id] = onReply;\n    }\n    this.messagePort.postMessage(messageBundle);\n  }\n\n  /**\n   * If the provided Site URL on the dashboard, which restricts the post message origin, uses the https:// protocol\n   * Then relax the postMessage restriction to also allow the http:// protocol for the same domain.\n   */\n  generateSafeOrigins(origin) {\n    let otherAllowedOrigins = [origin];\n    try {\n      let url = new URL(origin);\n      let host = url.host.replace('www.', '');\n      if (url.protocol === 'https:') {\n        otherAllowedOrigins.push(`https://${host}`);\n        otherAllowedOrigins.push(`https://www.${host}`);\n      }\n      else if (url.protocol === 'http:') {\n        otherAllowedOrigins.push(`http://${host}`);\n        otherAllowedOrigins.push(`http://www.${host}`);\n        otherAllowedOrigins.push(`https://${host}`);\n        otherAllowedOrigins.push(`https://www.${host}`);\n      }\n    } catch (ex) {\n      // Invalid URL: Users can enter '*' or 'https://*.google.com' which is invalid.\n    }\n    return otherAllowedOrigins;\n  }\n\n  isSafeOrigin(messageOrigin) {\n    if (!OneSignal.config) {\n      var subdomain = \"test\";\n    } else {\n      var subdomain = OneSignal.config.subdomainName as string;\n    }\n\n    const otherAllowedOrigins = this.generateSafeOrigins(this.receiveFromOrigin);\n\n    return (// messageOrigin === '' || TODO: See if messageOrigin can be blank\n            messageOrigin === 'https://onesignal.com' ||\n            messageOrigin === `https://${subdomain || ''}.onesignal.com` ||\n            (Environment.isDev() && messageOrigin === DEV_FRAME_HOST) ||\n            (Environment.isStaging() && messageOrigin === STAGING_FRAME_HOST) ||\n            this.receiveFromOrigin === '*' ||\n            contains(otherAllowedOrigins, messageOrigin));\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/Postmam.ts\n **/","import { getConsoleStyle, delay, nothing, decodeHtmlEntities } from '../utils';\nimport * as log from 'loglevel';\nimport AnimatedElement from './AnimatedElement';\nimport Bell from './Bell';\n\n\nexport default class Message extends AnimatedElement {\n\n  public bell: any;\n  public contentType: string;\n  public queued: any;\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher-message', 'onesignal-bell-launcher-message-opened', null, 'hidden', ['opacity', 'transform'], '.onesignal-bell-launcher-message-body');\n\n    this.bell = bell;\n    this.contentType = '';\n    this.queued = [];\n  }\n\n  static get TIMEOUT() {\n    return 2500;\n  }\n\n  static get TYPES() {\n    return {\n      TIP: 'tip', // Appears on button hover, disappears on button endhover\n      MESSAGE: 'message', // Appears manually for a specified duration, site visitor cannot control its display. Messages override tips\n      QUEUED: 'queued' // This message was a user-queued message\n    };\n  }\n\n  display(type, content, duration = 0) {\n    log.debug(`Calling %cdisplay(${type}, ${content}, ${duration}).`, getConsoleStyle('code'));\n    return (this.shown ? this.hide() : nothing())\n      .then(() => {\n        this.content = decodeHtmlEntities(content);\n        this.contentType = type;\n      })\n      .then(() => {\n        return this.show();\n      })\n      .then(() => delay(duration))\n      .then(() => {\n        return this.hide();\n      })\n      .then(() => {\n        // Reset back to normal content type so stuff can show a gain\n        this.content = this.getTipForState();\n        this.contentType = 'tip';\n      });\n  }\n\n  getTipForState() {\n    if (this.bell.state === Bell.STATES.UNSUBSCRIBED)\n      return this.bell.text['tip.state.unsubscribed'];\n    else if (this.bell.state === Bell.STATES.SUBSCRIBED)\n      return this.bell.text['tip.state.subscribed'];\n    else if (this.bell.state === Bell.STATES.BLOCKED)\n      return this.bell.text['tip.state.blocked'];\n  }\n\n  enqueue(message, notify = false) {\n    this.queued.push(decodeHtmlEntities(message));\n    return new Promise((resolve) => {\n      if (this.bell.badge.shown) {\n        this.bell.badge.hide()\n          .then(() => this.bell.badge.increment())\n          .then(() => this.bell.badge.show())\n          .then(resolve);\n      } else {\n        this.bell.badge.increment();\n        if (this.bell.initialized)\n          this.bell.badge.show().then(resolve)\n        else resolve();\n      }\n    });\n  }\n\n  dequeue(message) {\n    let dequeuedMessage = this.queued.pop(message);\n    return new Promise((resolve) => {\n      if (this.bell.badge.shown) {\n        this.bell.badge.hide()\n          .then(() => this.bell.badge.decrement())\n          .then((numMessagesLeft) => {\n            if (numMessagesLeft > 0) {\n              return this.bell.badge.show()\n            } else {\n              return Promise.resolve(this);\n            }\n          })\n          .then(resolve(dequeuedMessage));\n      } else {\n        this.bell.badge.decrement();\n        resolve(dequeuedMessage);\n      }\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Message.ts\n **/","import OneSignalError from \"./OneSignalError\";\r\n\r\n\r\nexport default class AlreadySubscribedError extends OneSignalError {\r\n  constructor() {\r\n    super('This operation can only be performed when the user is not subscribed.');\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/AlreadySubscribedError.ts\n **/","import OneSignalError from \"./OneSignalError\";\r\n\r\n\r\nexport enum NotSubscribedReason {\r\n  Unknown,\r\n  NoDeviceId,\r\n  OptedOut\r\n}\r\n\r\nexport class NotSubscribedError extends OneSignalError {\r\n  reason: string;\r\n\r\n  constructor(reason: NotSubscribedReason) {\r\n    switch (reason) {\r\n      case NotSubscribedReason.Unknown || NotSubscribedReason.NoDeviceId:\r\n        super('This operation can only be performed after the user is subscribed.');\r\n        break;\r\n      case NotSubscribedReason.OptedOut:\r\n        super('The user has manually opted out of receiving of notifications. This operation can only be performed after the user is fully resubscribed.');\r\n        break;\r\n    }\r\n    this.reason = NotSubscribedReason[reason];\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/NotSubscribedError.ts\n **/","import OneSignalError from \"./OneSignalError\";\r\n\r\n\r\nexport default class PushPermissionNotGrantedError extends OneSignalError {\r\n  constructor() {\r\n    super(`The push permission was not granted.`);\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/PushPermissionNotGrantedError.ts\n **/","import { DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL } from '../vars';\r\nimport Environment from '../Environment';\r\nimport OneSignalApi from '../OneSignalApi';\r\nimport * as log from 'loglevel';\r\nimport LimitStore from '../LimitStore';\r\nimport Event from \"../Event\";\r\nimport Database from '../Database';\r\nimport * as Browser from 'bowser';\r\nimport {\r\n  getConsoleStyle, contains, normalizeSubdomain, getDeviceTypeForBrowser, capitalize, once,\r\n  isPushNotificationsSupported, getUrlQueryParam, wipeLocalIndexedDb, unsubscribeFromPush\r\n} from '../utils';\r\nimport * as objectAssign from 'object-assign';\r\nimport * as EventEmitter from 'wolfy87-eventemitter';\r\nimport * as heir from 'heir';\r\nimport * as swivel from 'swivel';\r\nimport Postmam from '../Postmam';\r\nimport * as Cookie from 'js-cookie';\r\nimport MainHelper from \"./MainHelper\";\r\nimport ServiceWorkerHelper from \"./ServiceWorkerHelper\";\r\nimport IndexedDb from \"../IndexedDb\";\r\nimport SubscriptionHelper from \"./SubscriptionHelper\";\r\nimport EventHelper from \"./EventHelper\";\r\nimport { InvalidStateError, InvalidStateReason } from \"../errors/InvalidStateError\";\r\nimport AlreadySubscribedError from \"../errors/AlreadySubscribedError\";\r\n\r\ndeclare var OneSignal: any;\r\n\r\n\r\nexport default class InitHelper {\r\n\r\n  static storeInitialValues() {\r\n    return Promise.all([\r\n                         OneSignal.isPushNotificationsEnabled(),\r\n                         OneSignal.getNotificationPermission(),\r\n                         OneSignal.getUserId(),\r\n                         OneSignal.isOptedOut()\r\n                       ])\r\n                  .then(([isPushEnabled, notificationPermission, userId, isOptedOut]) => {\r\n                    LimitStore.put('subscription.optedOut', isOptedOut);\r\n                    return Promise.all([\r\n                                         Database.put('Options', { key: 'isPushEnabled', value: isPushEnabled }),\r\n                                         Database.put('Options', {\r\n                                           key: 'notificationPermission',\r\n                                           value: notificationPermission\r\n                                         })\r\n                                       ]);\r\n                  });\r\n  }\r\n\r\n  /**\r\n   * This event occurs after init.\r\n   * For HTTPS sites, this event is called after init.\r\n   * For HTTP sites, this event is called after the iFrame is created, and a message is received from the iFrame signaling cross-origin messaging is ready.\r\n   * @private\r\n   */\r\n  static onSdkInitialized() {\r\n    // Store initial values of notification permission, user ID, and manual subscription status\r\n    // This is done so that the values can be later compared to see if anything changed\r\n    // This is done here for HTTPS, it is done after the call to _addSessionIframe in sessionInit for HTTP sites, since the iframe is needed for communication\r\n    InitHelper.storeInitialValues();\r\n    InitHelper.installNativePromptPermissionChangedHook();\r\n\r\n    if (navigator.serviceWorker && window.location.protocol === 'https:') {\r\n      navigator.serviceWorker.getRegistration()\r\n               .then(registration => {\r\n                 if (registration && registration.active) {\r\n                   MainHelper.establishServiceWorkerChannel(registration);\r\n                 }\r\n               })\r\n               .catch(e => {\r\n                 if (e.code === 9) { // Only secure origins are allowed\r\n                   if (location.protocol === 'http:' || Environment.isIframe()) {\r\n                     // This site is an HTTP site with an <iframe>\r\n                     // We can no longer register service workers since Chrome 42\r\n                     log.debug(`Expected error getting service worker registration on ${location.href}:`, e);\r\n                   }\r\n                 } else {\r\n                   log.error(`Error getting Service Worker registration on ${location.href}:`, e);\r\n                 }\r\n               });\r\n    }\r\n\r\n    MainHelper.showNotifyButton();\r\n\r\n    if (Browser.safari && OneSignal.config.autoRegister === false) {\r\n      OneSignal.isPushNotificationsEnabled(enabled => {\r\n        if (enabled) {\r\n          /*  The user is on Safari and *specifically* set autoRegister to false.\r\n           The normal case for a user on Safari is to not set anything related to autoRegister.\r\n           With autoRegister false, we don't automatically show the permission prompt on Safari.\r\n           However, if push notifications are already enabled, we're actually going to make the same\r\n           subscribe call and register the device token, because this will return the same device\r\n           token and allow us to update the user's session count and last active.\r\n           For sites that omit autoRegister, autoRegister is assumed to be true. For Safari, the session count\r\n           and last active is updated from this registration call.\r\n           */\r\n          InitHelper.sessionInit({__sdkCall: true});\r\n        }\r\n      });\r\n    }\r\n\r\n    if (SubscriptionHelper.isUsingSubscriptionWorkaround() && !MainHelper.isContinuingBrowserSession()) {\r\n      /*\r\n       The user is on an HTTP site and they accessed this site by opening a new window or tab (starting a new\r\n       session). This means we should increment their session_count and last_active by calling\r\n       registerWithOneSignal(). Without this call, the user's session and last_active is not updated. We only\r\n       do this if the user is actually registered with OneSignal though.\r\n       */\r\n      log.debug(`(${Environment.getEnv()}) Updating session info for HTTP site.`);\r\n      OneSignal.isPushNotificationsEnabled(isPushEnabled => {\r\n        if (isPushEnabled) {\r\n          return MainHelper.getAppId()\r\n                          .then(appId => MainHelper.registerWithOneSignal(appId, null));\r\n        }\r\n      });\r\n    }\r\n\r\n    SubscriptionHelper.checkAndWipeUserSubscription();\r\n    MainHelper.checkAndDoHttpPermissionRequest();\r\n  }\r\n\r\n  static installNativePromptPermissionChangedHook() {\r\n    if (navigator.permissions && !(Browser.firefox && Number(Browser.version) <= 45)) {\r\n      OneSignal._usingNativePermissionHook = true;\r\n      // If the browser natively supports hooking the subscription prompt permission change event\r\n      //     use it instead of our SDK method\r\n      navigator.permissions.query({name: 'notifications'}).then(function (permissionStatus) {\r\n        permissionStatus.onchange = function () {\r\n          EventHelper.triggerNotificationPermissionChanged();\r\n        };\r\n      });\r\n    }\r\n  }\r\n\r\n  static saveInitOptions() {\r\n    let opPromises = [];\r\n    if (OneSignal.config.persistNotification === false) {\r\n      opPromises.push(Database.put('Options', {key: 'persistNotification', value: false}));\r\n    } else {\r\n      opPromises.push(Database.put('Options', {key: 'persistNotification', value: true}));\r\n    }\r\n\r\n    let webhookOptions = OneSignal.config.webhooks;\r\n    ['notification.displayed', 'notification.clicked', 'notification.dismissed'].forEach(event => {\r\n      if (webhookOptions && webhookOptions[event]) {\r\n        opPromises.push(Database.put('Options', {key: `webhooks.${event}`, value: webhookOptions[event]}));\r\n      } else {\r\n        opPromises.push(Database.put('Options', {key: `webhooks.${event}`, value: false}));\r\n      }\r\n    });\r\n    if (webhookOptions && webhookOptions.cors) {\r\n      opPromises.push(Database.put('Options', {key: `webhooks.cors`, value: true}));\r\n    } else {\r\n      opPromises.push(Database.put('Options', {key: `webhooks.cors`, value: false}));\r\n    }\r\n\r\n    if (OneSignal.config.notificationClickHandlerMatch) {\r\n      opPromises.push(Database.put('Options', {\r\n        key: 'notificationClickHandlerMatch',\r\n        value: OneSignal.config.notificationClickHandlerMatch\r\n      }));\r\n    } else {\r\n      opPromises.push(Database.put('Options', {key: 'notificationClickHandlerMatch', value: 'exact'}));\r\n    }\r\n\r\n    if (OneSignal.config.serviceWorkerRefetchRequests === false) {\r\n      opPromises.push(Database.put('Options', {key: 'serviceWorkerRefetchRequests', value: false}));\r\n    } else {\r\n      opPromises.push(Database.put('Options', {key: 'serviceWorkerRefetchRequests', value: true}));\r\n    }\r\n    return Promise.all(opPromises);\r\n  }\r\n\r\n  static internalInit() {\r\n    log.debug('Called %cinternalInit()', getConsoleStyle('code'));\r\n    Database.get('Ids', 'appId')\r\n            .then(appId => {\r\n              // HTTPS - Only register for push notifications once per session or if the user changes notification permission to Ask or Allow.\r\n              if (sessionStorage.getItem(\"ONE_SIGNAL_SESSION\")\r\n                && !OneSignal.config.subdomainName\r\n                && (window.Notification.permission == \"denied\"\r\n                || sessionStorage.getItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\") == window.Notification.permission)) {\r\n                Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\r\n                return;\r\n              }\r\n\r\n              sessionStorage.setItem(\"ONE_SIGNAL_NOTIFICATION_PERMISSION\", window.Notification.permission);\r\n\r\n              if (Browser.safari && OneSignal.config.autoRegister === false) {\r\n                log.debug('On Safari and autoregister is false, skipping sessionInit().');\r\n                // This *seems* to trigger on either Safari's autoregister false or Chrome HTTP\r\n                // Chrome HTTP gets an SDK_INITIALIZED event from the iFrame postMessage, so don't call it here\r\n                if (!SubscriptionHelper.isUsingSubscriptionWorkaround()) {\r\n                  Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\r\n                }\r\n                return;\r\n              }\r\n\r\n              if (OneSignal.config.autoRegister === false && !OneSignal.config.subdomainName) {\r\n                log.debug('Skipping internal init. Not auto-registering and no subdomain.');\r\n                /* 3/25: If a user is already registered, re-register them in case the clicked Blocked and then Allow (which immediately invalidates the GCM token as soon as you click Blocked) */\r\n                OneSignal.isPushNotificationsEnabled().then(isPushEnabled => {\r\n                  if (isPushEnabled && !SubscriptionHelper.isUsingSubscriptionWorkaround()) {\r\n                    log.info('Because the user is already subscribed and has enabled notifications, we will re-register their GCM token.');\r\n                    // Resubscribes them, and in case their GCM registration token was invalid, gets a new one\r\n                    SubscriptionHelper.registerForW3CPush({});\r\n                  } else {\r\n                    ServiceWorkerHelper.updateServiceWorker();\r\n                  }\r\n                });\r\n                Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\r\n                return;\r\n              }\r\n\r\n              if (document.visibilityState !== \"visible\") {\r\n                once(document, 'visibilitychange', (e, destroyEventListener) => {\r\n                  if (document.visibilityState === 'visible') {\r\n                    destroyEventListener();\r\n                    InitHelper.sessionInit({__sdkCall: true});\r\n                  }\r\n                }, true);\r\n                return;\r\n              }\r\n\r\n              InitHelper.sessionInit({__sdkCall: true});\r\n            });\r\n  }\r\n\r\n  static initSaveState() {\r\n    return MainHelper.getAppId()\r\n                    .then(appId => {\r\n                      return Promise.all([\r\n                        Database.put(\"Ids\", {type: \"appId\", id: appId}),\r\n                        Database.put(\"Options\", {key: \"pageTitle\", value: document.title})\r\n                      ]).then(() => {\r\n                        log.info(`OneSignal: Set pageTitle to be '${document.title}'.`);\r\n                      });\r\n                    });\r\n  }\r\n\r\n  static sessionInit(options) {\r\n    log.debug(`Called %csessionInit(${JSON.stringify(options)})`, getConsoleStyle('code'));\r\n    if (OneSignal._sessionInitAlreadyRunning) {\r\n      log.debug('Returning from sessionInit because it has already been called.');\r\n      return;\r\n    } else {\r\n      OneSignal._sessionInitAlreadyRunning = true;\r\n    }\r\n\r\n    var hostPageProtocol = `${location.protocol}//`;\r\n\r\n    if (Browser.safari) {\r\n      if (OneSignal.config.safari_web_id) {\r\n        MainHelper.getAppId()\r\n                 .then(appId => {\r\n                   window.safari.pushNotification.requestPermission(\r\n                     `${OneSignal._API_URL}safari`,\r\n                     OneSignal.config.safari_web_id,\r\n                     {app_id: appId},\r\n                     pushResponse => {\r\n                       log.info('Safari Registration Result:', pushResponse);\r\n                       if (pushResponse.deviceToken) {\r\n                         let subscriptionInfo = {\r\n                           // Safari's subscription returns a device token (e.g. 03D5D4A2EBCE1EE2AED68E12B72B1B995C2BFB811AB7DBF973C84FED66C6D1D5)\r\n                           endpointOrToken: pushResponse.deviceToken.toLowerCase()\r\n                         };\r\n                         MainHelper.registerWithOneSignal(appId, subscriptionInfo);\r\n                       }\r\n                       else {\r\n                         MainHelper.beginTemporaryBrowserSession();\r\n                       }\r\n                       EventHelper.triggerNotificationPermissionChanged();\r\n                     }\r\n                   );\r\n                 });\r\n      }\r\n    }\r\n    else if (options.modalPrompt && options.fromRegisterFor) { // If HTTPS - Show modal\r\n      Promise.all([\r\n        MainHelper.getAppId(),\r\n        OneSignal.isPushNotificationsEnabled(),\r\n        OneSignal.getNotificationPermission()\r\n      ])\r\n             .then(([appId, isPushEnabled, notificationPermission]) => {\r\n               let modalUrl = `${OneSignal.modalUrl}?${MainHelper.getPromptOptionsQueryString()}&id=${appId}&httpsPrompt=true&pushEnabled=${isPushEnabled}&permissionBlocked=${notificationPermission === 'denied'}&promptType=modal`;\r\n               log.info('Opening HTTPS modal prompt:', modalUrl);\r\n               let modal = MainHelper.createHiddenSubscriptionDomModal(modalUrl);\r\n\r\n               let sendToOrigin = `https://onesignal.com`;\r\n               if (Environment.isDev()) {\r\n                 sendToOrigin = DEV_FRAME_HOST;\r\n               }\r\n               let receiveFromOrigin = sendToOrigin;\r\n               OneSignal.modalPostmam = new Postmam(modal, sendToOrigin, receiveFromOrigin);\r\n               OneSignal.modalPostmam.startPostMessageReceive();\r\n\r\n               OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_LOADED, message => {\r\n                 MainHelper.showSubscriptionDomModal();\r\n                 Event.trigger('modalLoaded');\r\n               });\r\n               OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_ACCEPTED, message => {\r\n                 log.debug('User accepted the HTTPS modal prompt.');\r\n                 OneSignal._sessionInitAlreadyRunning = false;\r\n                 let iframeModalDom = document.getElementById('OneSignal-iframe-modal');\r\n                 iframeModalDom.parentNode.removeChild(iframeModalDom);\r\n                 OneSignal.modalPostmam.destroy();\r\n                 MainHelper.triggerCustomPromptClicked('granted');\r\n                 log.debug('Calling setSubscription(true)');\r\n                 OneSignal.setSubscription(true)\r\n                          .then(() => SubscriptionHelper.registerForW3CPush(options));\r\n               });\r\n               OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_REJECTED, message => {\r\n                 log.debug('User rejected the HTTPS modal prompt.');\r\n                 OneSignal._sessionInitAlreadyRunning = false;\r\n                 let iframeModalDom = document.getElementById('OneSignal-iframe-modal');\r\n                 iframeModalDom.parentNode.removeChild(iframeModalDom);\r\n                 OneSignal.modalPostmam.destroy();\r\n                 MainHelper.triggerCustomPromptClicked('denied');\r\n               });\r\n               OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING, message => {\r\n                 log.info('Detected modal is closing.');\r\n                 OneSignal.modalPostmam.destroy();\r\n               });\r\n             });\r\n    }\r\n    else if ('serviceWorker' in navigator && !SubscriptionHelper.isUsingSubscriptionWorkaround()) { // If HTTPS - Show native prompt\r\n      if (options.__sdkCall && !MainHelper.wasHttpsNativePromptDismissed()) {\r\n        SubscriptionHelper.registerForW3CPush(options);\r\n      } else if (options.__sdkCall && MainHelper.wasHttpsNativePromptDismissed()) {\r\n        log.debug('OneSignal: Not automatically showing native HTTPS prompt because the user previously dismissed it.');\r\n        OneSignal._sessionInitAlreadyRunning = false;\r\n      } else {\r\n        SubscriptionHelper.registerForW3CPush(options);\r\n      }\r\n    }\r\n    else {\r\n      if (OneSignal.config.autoRegister !== true) {\r\n        log.debug('OneSignal: Not automatically showing popover because autoRegister is not specifically true.');\r\n      }\r\n      if (MainHelper.isHttpPromptAlreadyShown()) {\r\n        log.debug('OneSignal: Not automatically showing popover because it was previously shown in the same session.');\r\n      }\r\n      if ((OneSignal.config.autoRegister === true) && !MainHelper.isHttpPromptAlreadyShown()) {\r\n        OneSignal.showHttpPrompt().catch(e => {\r\n          if (e instanceof InvalidStateError && e.reason === InvalidStateReason[InvalidStateReason.RedundantPermissionMessage] ||\r\n              e instanceof AlreadySubscribedError) {\r\n            // Another prompt is being shown, that's okay\r\n          } else throw e;\r\n        })\r\n      }\r\n    }\r\n\r\n    Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers/InitHelper.ts\n **/","import { DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL, STAGING_FRAME_HOST, DEV_PREFIX, STAGING_PREFIX } from '../vars';\nimport Environment from '../Environment';\nimport OneSignalApi from '../OneSignalApi';\nimport * as log from 'loglevel';\nimport LimitStore from '../LimitStore';\nimport Event from \"../Event\";\nimport Database from '../Database';\nimport * as Browser from 'bowser';\nimport {\n  getConsoleStyle, contains, normalizeSubdomain, getDeviceTypeForBrowser, capitalize,\n  awaitOneSignalInitAndSupported\n} from '../utils';\nimport * as objectAssign from 'object-assign';\nimport * as EventEmitter from 'wolfy87-eventemitter';\nimport * as heir from 'heir';\nimport * as swivel from 'swivel';\nimport Postmam from '../Postmam';\nimport * as Cookie from 'js-cookie';\nimport HttpModal from \"../http-modal/HttpModal\";\nimport Bell from \"../bell/Bell\";\nimport SubscriptionHelper from \"./SubscriptionHelper\";\nimport EventHelper from \"./EventHelper\";\ndeclare var OneSignal: any;\n\n\nexport default class TestHelper {\n  /**\n   * Just for debugging purposes, removes the coookie from hiding the native prompt.\n   * @returns {*}\n   */\n  static unmarkHttpsNativePromptDismissed() {\n    if (Cookie.remove('onesignal-notification-prompt')) {\n      log.debug('OneSignal: Removed the native notification prompt dismissed cookie.')\n    } else {\n      log.debug('OneSignal: Cookie not marked.');\n    }\n  }\n\n  /**\n   * Creates a session cookie to note that the user does not want to be disturbed for the rest of the browser session.\n   */\n  static markHttpsNativePromptDismissed() {\n    log.debug('OneSignal: User dismissed the native notification prompt; storing flag.');\n    return Cookie.set('onesignal-notification-prompt', 'dismissed', {\n      // In 8 hours, or 1/3 of the day\n      expires: 0.333\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers/TestHelper.ts\n **/","export enum PermissionPromptType {\n  /**\n   * Local notification hack for HTTP sites triggered by prompting for local notification permissions.\n   */\n  HttpPermissionRequest = <any>'HTTP permission request',\n  /**\n   * The \"main\" browser native permission request dialog when prompting for local or push notification permissions.\n   */\n  HttpsPermissionRequest = <any>'HTTPS permission request',\n  /**\n   * The \"popup\" to subdomain.onesignal.com.\n   */\n  FullscreenHttpPermissionMessage = <any>'fullscreen HTTP permission message',\n  /**\n   * The full-screen HTTPS modal with a dimmed backdrop.\n   */\n  FullscreenHttpsPermissionMessage = <any>'fullscreen HTTPS permission message',\n  /**\n   * The \"sliding down\" prompt.\n   */\n  SlidedownPermissionMessage = <any>'slidedown permission message',\n  /**\n   * The \"notify button\".\n   */\n  SubscriptionBell = <any>'subscription bell'\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/PermissionPromptType.ts\n **/","'use strict';\n\nvar atoa = require('atoa');\nvar debounce = require('./debounce');\n\nmodule.exports = function emitter (thing, options) {\n  var opts = options || {};\n  var evt = {};\n  if (thing === undefined) { thing = {}; }\n  thing.on = function (type, fn) {\n    if (!evt[type]) {\n      evt[type] = [fn];\n    } else {\n      evt[type].push(fn);\n    }\n    return thing;\n  };\n  thing.once = function (type, fn) {\n    fn._once = true; // thing.off(fn) still works!\n    thing.on(type, fn);\n    return thing;\n  };\n  thing.off = function (type, fn) {\n    var c = arguments.length;\n    if (c === 1) {\n      delete evt[type];\n    } else if (c === 0) {\n      evt = {};\n    } else {\n      var et = evt[type];\n      if (!et) { return thing; }\n      et.splice(et.indexOf(fn), 1);\n    }\n    return thing;\n  };\n  thing.emit = function () {\n    var args = atoa(arguments);\n    return thing.emitterSnapshot(args.shift()).apply(this, args);\n  };\n  thing.emitterSnapshot = function (type) {\n    var et = (evt[type] || []).slice(0);\n    return function () {\n      var args = atoa(arguments);\n      var ctx = this || thing;\n      if (type === 'error' && opts.throws !== false && !et.length) { throw args.length === 1 ? args[0] : args; }\n      et.forEach(function emitter (listen) {\n        if (opts.async) { debounce(listen, args, ctx); } else { listen.apply(ctx, args); }\n        if (listen._once) { thing.off(type, listen); }\n      });\n      return thing;\n    };\n  };\n  return thing;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/contra/emitter.js\n ** module id = 38\n ** module chunks = 0\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 39\n ** module chunks = 0\n **/","'use strict';\n\nfunction serializeError (err) {\n  return err ? err.toString() : null;\n}\n\nfunction deserializeError (err) {\n  return err ? new Error(err) : null;\n}\n\nfunction parsePayload (payload) {\n  var type = payload.shift();\n  if (type === 'error') {\n    return { error: serializeError(payload[0]), type: type, payload: [] };\n  }\n  return { error: null, type: type, payload: payload };\n}\n\nfunction emission (emitter, context) {\n  return emit;\n  function emit (e) {\n    var data = e.data;\n    if (data.type === 'error') {\n      emitter.emit.call(null, 'error', context, deserializeError(data.error));\n    } else {\n      emitter.emit.apply(null, [data.type, context].concat(data.payload));\n    }\n  }\n}\n\nmodule.exports = {\n  parsePayload: parsePayload,\n  emission: emission\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/swivel/serialization.js\n ** module id = 40\n ** module chunks = 0\n **/","import { DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL, STAGING_FRAME_HOST, DEV_PREFIX, STAGING_PREFIX } from './vars';\nimport Environment from './Environment';\nimport OneSignalApi from './OneSignalApi';\nimport IndexedDb from './IndexedDb';\nimport * as log from 'loglevel';\nimport Event from \"./Event\";\nimport Bell from \"./bell/Bell\";\nimport * as Cookie from 'js-cookie';\nimport Database from './Database';\nimport * as Browser from 'bowser';\nimport {\n  isPushNotificationsSupported, logMethodCall, isValidEmail, awaitOneSignalInitAndSupported, getConsoleStyle,\n  contains, unsubscribeFromPush, decodeHtmlEntities, getUrlQueryParam, executeAndTimeoutPromiseAfter,\n  wipeLocalIndexedDb, prepareEmailForHashing, executeCallback, once, md5, sha1, awaitSdkEvent\n} from './utils';\nimport { ValidatorUtils, ValidatorOptions } from './utils/ValidatorUtils';\nimport * as objectAssign from 'object-assign';\nimport * as EventEmitter from 'wolfy87-eventemitter';\nimport * as heir from 'heir';\nimport * as swivel from 'swivel';\nimport Postmam from './Postmam';\nimport EventHelper from './helpers/EventHelper';\nimport MainHelper from './helpers/MainHelper';\nimport Popover from './popover/Popover';\nimport {Uuid} from \"./models/Uuid\";\nimport {InvalidArgumentError, InvalidArgumentReason} from \"./errors/InvalidArgumentError\";\nimport LimitStore from \"./LimitStore\";\nimport {InvalidStateError, InvalidStateReason} from \"./errors/InvalidStateError\";\nimport InitHelper from \"./helpers/InitHelper\";\nimport ServiceWorkerHelper from \"./helpers/ServiceWorkerHelper\";\nimport SubscriptionHelper from \"./helpers/SubscriptionHelper\";\nimport HttpHelper from \"./helpers/HttpHelper\";\nimport TestHelper from \"./helpers/TestHelper\";\nimport {NotificationActionButton} from \"./models/NotificationActionButton\";\nimport { NotificationPermission } from './models/NotificationPermission';\nimport PermissionMessageDismissedError from \"./errors/PermissionMessageDismissedError\";\nimport PushPermissionNotGrantedError from \"./errors/PushPermissionNotGrantedError\";\nimport { NotSubscribedError } from \"./errors/NotSubscribedError\";\nimport AlreadySubscribedError from \"./errors/AlreadySubscribedError\";\nimport { NotSubscribedReason } from \"./errors/NotSubscribedError\";\nimport { PermissionPromptType } from './models/PermissionPromptType';\nimport { Notification } from \"./models/Notification\";\n\n\n\nexport default class OneSignal {\n\n  /**\n   * Pass in the full URL of the default page you want to open when a notification is clicked.\n   * @PublicApi\n   */\n  static async setDefaultNotificationUrl(url: URL) {\n    if (!ValidatorUtils.isValidUrl(url, { allowNull: true }))\n      throw new InvalidArgumentError('url', InvalidArgumentReason.Malformed);\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('setDefaultNotificationUrl', url);\n    const appState = await Database.getAppState();\n    appState.defaultNotificationUrl = url;\n    await Database.setAppState(appState);\n  }\n\n  /**\n   * Sets the default title to display on notifications. Will default to the page's document.title if you don't call this.\n   * @remarks Either DB value defaultTitle or pageTitle is used when showing a notification title.\n   * @PublicApi\n   */\n  static async setDefaultTitle(title: string) {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('setDefaultTitle', title);\n    const appState = await Database.getAppState();\n    appState.defaultNotificationTitle = title;\n    await Database.setAppState(appState);\n  }\n\n  /**\n   * Hashes the provided email and uploads to OneSignal.\n   * @remarks The email is voluntarily provided.\n   * @PublicApi\n   */\n  static async syncHashedEmail(email) {\n    if (!email)\n      throw new InvalidArgumentError('email', InvalidArgumentReason.Empty);\n    let sanitizedEmail = prepareEmailForHashing(email);\n    if (!isValidEmail(sanitizedEmail))\n      throw new InvalidArgumentError('email', InvalidArgumentReason.Malformed);\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('syncHashedEmail', email);\n    const { appId } = await Database.getAppConfig();\n    const { deviceId } = await Database.getSubscription();\n    if (!deviceId)\n      throw new NotSubscribedError(NotSubscribedReason.NoDeviceId);\n    const result = await OneSignalApi.updatePlayer(appId, deviceId, {\n      em_m: md5(sanitizedEmail),\n      em_s: sha1(sanitizedEmail)\n    });\n    if (result && result.success) {\n      return true;\n    } else {\n      throw result;\n    }\n  }\n\n  /**\n   * Returns true if the current browser supports web push.\n   * @PublicApi\n   */\n  static isPushNotificationsSupported() {\n    logMethodCall('isPushNotificationsSupported');\n    return isPushNotificationsSupported();\n  }\n\n  /**\n   * Initializes the SDK, called by the developer.\n   * @PublicApi\n   */\n  static init(options) {\n    logMethodCall('init', options);\n\n    ServiceWorkerHelper.applyServiceWorkerEnvPrefixes();\n\n    if (OneSignal._initCalled) {\n      log.error(`OneSignal: Please don't call init() more than once. Any extra calls to init() are ignored. The following parameters were not processed: %c${JSON.stringify(Object.keys(options))}`, getConsoleStyle('code'));\n      return 'return';\n    }\n    OneSignal._initCalled = true;\n\n    OneSignal.config = objectAssign({\n      path: '/'\n    }, options);\n\n    if (!isPushNotificationsSupported()) {\n      log.warn('OneSignal: Push notifications are not supported.');\n      return;\n    }\n\n    if (Browser.safari && !OneSignal.config.safari_web_id) {\n      log.warn(\"OneSignal: Required parameter %csafari_web_id\", getConsoleStyle('code'), 'was not passed to OneSignal.init(), skipping SDK initialization.');\n      return;\n    }\n\n    function __init() {\n      if (OneSignal.__initAlreadyCalled) {\n        // Call from window.addEventListener('DOMContentLoaded', () => {\n        // Call from if (document.readyState === 'complete' || document.readyState === 'interactive')\n        return;\n      } else {\n        OneSignal.__initAlreadyCalled = true;\n      }\n      MainHelper.fixWordpressManifestIfMisplaced();\n\n      if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n        if (OneSignal.config.subdomainName) {\n          OneSignal.config.subdomainName = MainHelper.autoCorrectSubdomain(OneSignal.config.subdomainName);\n        } else {\n          log.error('OneSignal: Your JavaScript initialization code is missing a required parameter %csubdomainName',\n            getConsoleStyle('code'),\n            '. HTTP sites require this parameter to initialize correctly. Please see steps 1.4 and 2 at ' +\n            'https://documentation.onesignal.com/docs/web-push-sdk-setup-http)');\n          return;\n        }\n\n        if (Environment.isDev()) {\n          OneSignal.iframeUrl = `${DEV_FRAME_HOST}/webPushIframe`;\n          OneSignal.popupUrl = `${DEV_FRAME_HOST}/subscribe`;\n        }\n        else {\n          OneSignal.iframeUrl = `https://${OneSignal.config.subdomainName}.onesignal.com/webPushIframe`;\n          OneSignal.popupUrl = `https://${OneSignal.config.subdomainName}.onesignal.com/subscribe`;\n        }\n      } else {\n        if (Environment.isDev()) {\n          OneSignal.modalUrl = `${DEV_FRAME_HOST}/webPushModal`;\n        } else if (Environment.isStaging()) {\n          OneSignal.modalUrl = `${STAGING_FRAME_HOST}/webPushModal`;\n        } else {\n          OneSignal.modalUrl = `https://onesignal.com/webPushModal`;\n        }\n      }\n\n\n      let subdomainPromise = Promise.resolve();\n      if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n        subdomainPromise = HttpHelper.loadSubdomainIFrame()\n                                    .then(() => log.info('Subdomain iFrame loaded'))\n      }\n\n      OneSignal.on(Database.EVENTS.REBUILT, EventHelper.onDatabaseRebuilt);\n      OneSignal.on(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED, EventHelper.onNotificationPermissionChange);\n      OneSignal.on(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, EventHelper._onSubscriptionChanged);\n      OneSignal.on(Database.EVENTS.SET, EventHelper._onDbValueSet);\n      OneSignal.on(OneSignal.EVENTS.SDK_INITIALIZED, InitHelper.onSdkInitialized);\n      subdomainPromise.then(() => {\n        window.addEventListener('focus', (event) => {\n          // Checks if permission changed everytime a user focuses on the page, since a user has to click out of and back on the page to check permissions\n          MainHelper.checkAndTriggerNotificationPermissionChanged();\n        });\n\n        // If Safari - add 'fetch' pollyfill if it isn't already added.\n        if (Browser.safari && typeof window.fetch == \"undefined\") {\n          var s = document.createElement('script');\n          s.setAttribute('src', \"https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js\");\n          document.head.appendChild(s);\n        }\n\n        if (Environment.isCustomSubdomain()) {\n          Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\n          return;\n        }\n\n        InitHelper.initSaveState()\n                 .then(() => InitHelper.saveInitOptions())\n                 .then(() => InitHelper.internalInit());\n      });\n    }\n\n    if (document.readyState === 'complete' || document.readyState === 'interactive') {\n      __init();\n    }\n    else {\n      log.debug('OneSignal: Waiting for DOMContentLoaded or readyStateChange event before continuing' +\n        ' initialization...');\n      window.addEventListener('DOMContentLoaded', () => {\n        __init();\n      });\n      document.onreadystatechange = () => {\n        if (document.readyState === 'complete' || document.readyState === 'interactive') {\n          __init();\n        }\n      };\n    }\n  }\n\n  /**\n   * Shows a sliding modal prompt on the page for users to trigger the HTTP popup window to subscribe.\n   * @PublicApi\n   */\n  static showHttpPrompt(options?) {\n    return awaitOneSignalInitAndSupported()\n      .then(() => {\n        /*\n         Only show the HTTP popover if:\n         - Notifications aren't already enabled\n         - The user isn't manually opted out (if the user was manually opted out, we don't want to prompt the user)\n         */\n        if (OneSignal.__isPopoverShowing) {\n          throw new InvalidStateError(InvalidStateReason.RedundantPermissionMessage, {\n            permissionPromptType: PermissionPromptType.SlidedownPermissionMessage\n          });\n        }\n        return Promise.all([\n          OneSignal.getNotificationPermission(),\n          OneSignal.isPushNotificationsEnabled(),\n          OneSignal.getSubscription(),\n          Database.get('Options', 'popoverDoNotPrompt'),\n          OneSignal.httpHelper.isShowingHttpPermissionRequest()\n        ])\n                      .then(([permission, isEnabled, notOptedOut, doNotPrompt, isShowingHttpPermissionRequest]) => {\n                        if (doNotPrompt === true && (!options || options.force == false)) {\n                          throw new PermissionMessageDismissedError();\n                        }\n                        if (permission === NotificationPermission.Denied) {\n                          throw new PushPermissionNotGrantedError();\n                        }\n                        if (isEnabled) {\n                          throw new AlreadySubscribedError();\n                        }\n                        if (!notOptedOut) {\n                          throw new NotSubscribedError(NotSubscribedReason.OptedOut);\n                        }\n                        if (MainHelper.isUsingHttpPermissionRequest()\n                            ) {\n                          log.debug('The slidedown permission message cannot be used while the HTTP perm. req. is enabled.');\n                          throw new InvalidStateError(InvalidStateReason.RedundantPermissionMessage, {\n                            permissionPromptType: PermissionPromptType.HttpPermissionRequest\n                          });\n                        }\n                        MainHelper.markHttpPopoverShown();\n                        OneSignal.popover = new Popover(OneSignal.config.promptOptions);\n                        OneSignal.popover.create();\n                        log.debug('Showing the HTTP popover.');\n                        if (OneSignal.notifyButton && OneSignal.notifyButton.launcher.state !== 'hidden') {\n                          OneSignal.notifyButton.launcher.waitUntilShown()\n                                   .then(() => {\n                                     OneSignal.notifyButton.launcher.hide();\n                                   });\n                        }\n                        OneSignal.once(Popover.EVENTS.SHOWN, () => {\n                          OneSignal.__isPopoverShowing = true;\n                        });\n                        OneSignal.once(Popover.EVENTS.CLOSED, () => {\n                          OneSignal.__isPopoverShowing = false;\n                          if (OneSignal.notifyButton) {\n                            OneSignal.notifyButton.launcher.show();\n                          }\n                        });\n                        OneSignal.once(Popover.EVENTS.ALLOW_CLICK, () => {\n                          OneSignal.popover.close();\n                          OneSignal.registerForPushNotifications({autoAccept: true});\n                        });\n                        OneSignal.once(Popover.EVENTS.CANCEL_CLICK, () => {\n                          log.debug(\"Setting flag to not show the popover to the user again.\");\n                          Database.put('Options', {key: 'popoverDoNotPrompt', value: true});\n                        });\n                      });\n      });\n  }\n\n  /**\n   * Prompts the user to subscribe.\n   * @PublicApi\n   */\n  static registerForPushNotifications(options) {\n    if (!isPushNotificationsSupported()) {\n      log.debug('OneSignal: Push notifications are not supported.');\n    }\n\n    // WARNING: Do NOT add callbacks that have to fire to get from here to window.open in _sessionInit.\n    //          Otherwise the pop-up to ask for push permission on HTTP connections will be blocked by Chrome.\n    function __registerForPushNotifications() {\n      if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n        HttpHelper.loadPopup(options);\n      } else {\n        if (!options)\n          options = {};\n        options.fromRegisterFor = true;\n        InitHelper.sessionInit(options);\n      }\n    }\n\n    if (!OneSignal.initialized) {\n      OneSignal.once(OneSignal.EVENTS.SDK_INITIALIZED, () => __registerForPushNotifications());\n    } else {\n      return __registerForPushNotifications();\n    }\n  }\n\n  /**\n   * Prompts the user to subscribe using the remote local notification workaround for HTTP sites.\n   * @PublicApi\n   */\n  static showHttpPermissionRequest(options?: {_sdkCall: boolean}) {\n    log.debug('Called showHttpPermissionRequest().');\n\n    return awaitOneSignalInitAndSupported()\n      .then(() => new Promise((resolve, reject) => {\n        // Safari's push notifications are one-click Allow and shouldn't support this workaround\n        if (Browser.safari) {\n          throw new InvalidStateError(InvalidStateReason.UnsupportedEnvironment);\n        }\n\n        if (OneSignal.__isPopoverShowing) {\n          throw new InvalidStateError(InvalidStateReason.RedundantPermissionMessage, {\n            permissionPromptType: PermissionPromptType.SlidedownPermissionMessage\n          });\n        }\n\n        if (OneSignal._showingHttpPermissionRequest) {\n          throw new InvalidStateError(InvalidStateReason.RedundantPermissionMessage, {\n            permissionPromptType: PermissionPromptType.HttpPermissionRequest\n          });\n        }\n\n        if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n          OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST, options, reply => {\n            let {status, result} = reply.data;\n            if (status === 'resolve') {\n              resolve(result);\n            } else {\n              reject(result);\n            }\n          });\n        } else {\n          if (!MainHelper.isUsingHttpPermissionRequest()) {\n            log.debug('Not showing HTTP permission request because its not enabled. Check init option httpPermissionRequest.');\n            Event.trigger(OneSignal.EVENTS.TEST_INIT_OPTION_DISABLED);\n            return;\n          }\n\n          // Default call by our SDK, not forced by user, don't show if the HTTP perm. req. was dismissed by user\n          if (MainHelper.wasHttpsNativePromptDismissed()) {\n            if (options._sdkCall === true) {\n              // TODO: Throw an error; Postmam currently does not serialize errors across cross-domain messaging\n              //       In the future, Postmam should serialize errors so we can throw a PermissionMessageDismissedError\n              log.debug('The HTTP perm. req. permission was dismissed, so we are not showing the request.');\n              return;\n            } else {\n              log.debug('The HTTP perm. req. was previously dismissed, but this call was made explicitly.');\n            }\n          }\n\n          log.debug(`(${Environment.getEnv()}) Showing HTTP permission request.`);\n          if (window.Notification.permission === \"default\") {\n            OneSignal._showingHttpPermissionRequest = true;\n            window.Notification.requestPermission(permission => {\n              OneSignal._showingHttpPermissionRequest = false;\n              resolve(permission);\n              log.debug('HTTP Permission Request Result:', permission);\n              if (permission === 'default') {\n                TestHelper.markHttpsNativePromptDismissed();\n                OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED, {\n                  permission: permission,\n                  forceUpdatePermission: true\n                });\n              }\n            });\n            Event.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED);\n          } else {\n            Event.trigger(OneSignal.EVENTS.TEST_WOULD_DISPLAY);\n            throw new InvalidStateError(InvalidStateReason.PushPermissionAlreadyGranted);\n          }\n        }\n      }));\n  }\n\n  /**\n   * Returns a promise that resolves to the browser's current notification permission as 'default', 'granted', or 'denied'.\n   * @param callback A callback function that will be called when the browser's current notification permission has been obtained, with one of 'default', 'granted', or 'denied'.\n   * @PublicApi\n   */\n  static getNotificationPermission(onComplete?): Promise<NotificationPermission> {\n    return awaitOneSignalInitAndSupported()\n      .then(() => {\n        let safariWebId = null;\n        if (OneSignal.config) {\n          safariWebId = OneSignal.config.safari_web_id;\n        }\n        return MainHelper.getNotificationPermission(safariWebId);\n      })\n      .then(permission => {\n        if (onComplete) {\n          onComplete(permission);\n        }\n        return permission;\n      });\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async getTags(callback) {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('getTags', callback);\n    const { appId } = await Database.getAppConfig();\n    const { deviceId } = await Database.getSubscription();\n    if (!deviceId) {\n      // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n      log.info(new NotSubscribedError(NotSubscribedReason.NoDeviceId));\n      return null;\n    }\n    const { tags } = await OneSignalApi.getPlayer(appId, deviceId);\n    executeCallback(callback, tags);\n    return tags;\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async sendTag(key: string, value: any, callback?: Action<Object>): Promise<Object> {\n    const tag = {};\n    tag[key] = value;\n    return await OneSignal.sendTags(tag, callback);\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async sendTags(tags: Object, callback?: Action<Object>): Promise<Object> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('sendTags', tags, callback);\n    if (!tags || Object.keys(tags).length === 0) {\n      // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n      log.info(new InvalidArgumentError('tags', InvalidArgumentReason.Empty));\n      return;\n    }\n    // Our backend considers false as removing a tag, so convert false -> \"false\" to allow storing as a value\n    Object.keys(tags).forEach(key => {\n      if (tags[key] === false)\n        tags[key] = \"false\";\n    });\n    const { appId } = await Database.getAppConfig();\n    var { deviceId } = await Database.getSubscription();\n    if (!deviceId) {\n      await awaitSdkEvent(OneSignal.EVENTS.REGISTERED);\n    }\n    // After the user subscribers, he will have a device ID, so get it again\n    var { deviceId: newDeviceId } = await Database.getSubscription();\n    await OneSignalApi.updatePlayer(appId, newDeviceId, {\n      tags: tags\n    });\n    executeCallback(callback, tags);\n    return tags;\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async deleteTag(tag: string): Promise<Array<string>> {\n    return await OneSignal.deleteTags([tag]);\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async deleteTags(tags: Array<string>, callback?: Action<Array<string>>): Promise<Array<string>> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('deleteTags', tags, callback);\n    if (!ValidatorUtils.isValidArray(tags))\n      throw new InvalidArgumentError('tags', InvalidArgumentReason.Malformed);\n    if (tags.length === 0) {\n      // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n      log.info(new InvalidArgumentError('tags', InvalidArgumentReason.Empty));\n    }\n    const tagsToSend = {};\n    for (let tag of tags) {\n      tagsToSend[tag] = '';\n    }\n    const deletedTags = await OneSignal.sendTags(tagsToSend);\n    const deletedTagKeys = Object.keys(deletedTags);\n    executeCallback(callback, deletedTagKeys);\n    return deletedTagKeys;\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async addListenerForNotificationOpened(callback?: Action<Notification>) {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('addListenerForNotificationOpened', callback);\n    OneSignal.once(OneSignal.EVENTS.NOTIFICATION_CLICKED, notification => {\n      executeCallback(callback, notification);\n    });\n    EventHelper.fireStoredNotificationClicks(OneSignal.config.pageUrl);\n  }\n  /**\n   * @PublicApi\n   * @Deprecated\n   */\n  static async getIdsAvailable(callback?: Action<{userId: Uuid, registrationId: string}>):\n    Promise<{userId: Uuid, registrationId: string}> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('getIdsAvailable', callback);\n    const { deviceId, pushToken } = await Database.getSubscription();\n    const bundle = {\n      userId: deviceId,\n      registrationId: pushToken\n    };\n    executeCallback(callback, bundle);\n    return bundle;\n  }\n\n  /**\n   * Returns a promise that resolves to true if all required conditions for push messaging are met; otherwise resolves to false.\n   * @param callback A callback function that will be called when the current subscription status has been obtained.\n   * @PublicApi\n   */\n  static async isPushNotificationsEnabled(callback?: Action<boolean>): Promise<boolean> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('isPushNotificationsEnabled', callback);\n    const { deviceId, pushToken, optedOut } = await Database.getSubscription();\n    const notificationPermission = await OneSignal.getNotificationPermission();\n    const serviceWorkerActive = await ServiceWorkerHelper.isServiceWorkerActive();\n\n    let isPushEnabled = false;\n\n    if (Environment.supportsServiceWorkers() &&\n        !SubscriptionHelper.isUsingSubscriptionWorkaround() &&\n        !Environment.isIframe()) {\n      isPushEnabled = !!(deviceId &&\n                      pushToken &&\n                      notificationPermission === NotificationPermission.Granted &&\n                      !optedOut &&\n                      serviceWorkerActive)\n    } else {\n      isPushEnabled = !!(deviceId &&\n                         pushToken &&\n                         notificationPermission === NotificationPermission.Granted &&\n                         !optedOut)\n    }\n\n    executeCallback(callback, isPushEnabled);\n    return isPushEnabled;\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async setSubscription(newSubscription: boolean): Promise<void> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('setSubscription', newSubscription);\n    const appConfig = await Database.getAppConfig();\n    const { appId } = appConfig;\n    const subscription = await Database.getSubscription();\n    const { deviceId } = subscription;\n    if (!appConfig.appId)\n      throw new InvalidStateError(InvalidStateReason.MissingAppId);\n    if (!ValidatorUtils.isValidBoolean(newSubscription))\n      throw new InvalidArgumentError('newSubscription', InvalidArgumentReason.Malformed);\n    if (!deviceId) {\n      // TODO: Throw an error here in future v2; for now it may break existing client implementations.\n      log.info(new NotSubscribedError(NotSubscribedReason.NoDeviceId));\n      return;\n    }\n    subscription.optedOut = !newSubscription;\n    await OneSignalApi.updatePlayer(appId, deviceId, {\n      notification_types: MainHelper.getNotificationTypeFromOptIn(newSubscription)\n    });\n    await Database.setSubscription(subscription);\n    EventHelper.onInternalSubscriptionSet(subscription.optedOut);\n    EventHelper.checkAndTriggerSubscriptionChanged();\n  }\n\n  /**\n   * @PendingPublicApi\n   */\n  static async isOptedOut(callback?: Action<boolean>): Promise<boolean> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('isOptedOut', callback);\n    const { optedOut } = await Database.getSubscription();\n    executeCallback(callback, optedOut);\n    return optedOut;\n  }\n\n  /**\n   * Returns a promise that resolves once the manual subscription override has been set.\n   * @private\n   * @PendingPublicApi\n   */\n  static async optOut(doOptOut: boolean, callback?: Action<void>): Promise<void> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('optOut', doOptOut, callback);\n    if (!ValidatorUtils.isValidBoolean(doOptOut))\n      throw new InvalidArgumentError('doOptOut', InvalidArgumentReason.Malformed);\n    await OneSignal.setSubscription(!doOptOut);\n    executeCallback(callback);\n  }\n\n  /**\n   * Returns a promise that resolves to the stored OneSignal user ID if one is set; otherwise null.\n   * @param callback A function accepting one parameter for the OneSignal user ID.\n   * @PublicApi\n   */\n  static async getUserId(callback?: Action<Uuid>): Promise<Uuid> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('getUserId', callback);\n    const subscription = await Database.getSubscription();\n    const deviceId = subscription.deviceId;\n    executeCallback(callback, deviceId);\n    return deviceId;\n  }\n\n  /**\n   * Returns a promise that resolves to the stored push token if one is set; otherwise null.\n   * @PublicApi\n   */\n  static async getRegistrationId(callback?: Action<string>): Promise<string> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('getRegistrationId', callback);\n    const subscription = await Database.getSubscription();\n    const pushToken = subscription.pushToken;\n    executeCallback(callback, pushToken);\n    return pushToken;\n  }\n\n  /**\n   * Returns a promise that resolves to false if setSubscription(false) is \"in effect\". Otherwise returns true.\n   * This means a return value of true does not mean the user is subscribed, only that the user did not call\n   * setSubcription(false).\n   * @private\n   * @PublicApi (given to customers)\n   */\n  static async getSubscription(callback?: Action<boolean>): Promise<boolean> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('getSubscription', callback);\n    const subscription = await Database.getSubscription();\n    const subscriptionStatus = !subscription.optedOut;\n    executeCallback(callback, subscriptionStatus);\n    return subscriptionStatus;\n  }\n\n  /**\n   * @PublicApi\n   */\n  static async sendSelfNotification(title: string = 'OneSignal Test Message',\n                              message: string = 'This is an example notification.',\n                              url: string = new URL(location.href).origin + '?_osp=do_not_open',\n                              icon: URL,\n                              data: Map<String, any>,\n                              buttons: Array<NotificationActionButton>): Promise<void> {\n    await awaitOneSignalInitAndSupported();\n    logMethodCall('sendSelfNotification', title, message, url, icon, data, buttons);\n    const appConfig = await Database.getAppConfig();\n    const subscription = await Database.getSubscription();\n    if (!appConfig.appId)\n      throw new InvalidStateError(InvalidStateReason.MissingAppId);\n    if (!subscription.deviceId)\n      throw new NotSubscribedError(NotSubscribedReason.NoDeviceId);\n    if (!ValidatorUtils.isValidUrl(url))\n      throw new InvalidArgumentError('url', InvalidArgumentReason.Malformed);\n    if (!ValidatorUtils.isValidUrl(icon, { allowEmpty: true, requireHttps: true }))\n      throw new InvalidArgumentError('icon', InvalidArgumentReason.Malformed);\n    return await OneSignalApi.sendNotification(appConfig.appId, [subscription.deviceId], {'en': title}, {'en': message},\n                                               url, icon, data, buttons);\n  }\n\n  /**\n   * Used to load OneSignal asynchronously from a webpage.\n   * @InternalApi\n   */\n  static push(item) {\n    if (typeof(item) == \"function\")\n      item();\n    else {\n      var functionName = item.shift();\n      OneSignal[functionName].apply(null, item);\n    }\n  }\n\n  static __doNotShowWelcomeNotification: boolean;\n  static VERSION = __VERSION__;\n  static _VERSION = __VERSION__;\n  static _API_URL = API_URL;\n  static _notificationOpenedCallbacks = [];\n  static _idsAvailable_callback = [];\n  static _defaultLaunchURL = null;\n  static config = null;\n  static _thisIsThePopup = false;\n  static __isPopoverShowing = false;\n  static _sessionInitAlreadyRunning = false;\n  static _isNotificationEnabledCallback = [];\n  static _subscriptionSet = true;\n  static iframeUrl = null;\n  static popupUrl = null;\n  static modalUrl = null;\n  static _sessionIframeAdded = false;\n  static _windowWidth = 650;\n  static _windowHeight = 568;\n  static _isNewVisitor = false;\n  static _channel = null;\n  static cookie = Cookie;\n  static initialized = false;\n  static notifyButton = null;\n  static store = LimitStore;\n  static environment = Environment;\n  static database = Database;\n  static event = Event;\n  static browser = Browser;\n  static popover = null;\n  static log = log;\n  static swivel = swivel;\n  static api = OneSignalApi;\n  static indexedDb = IndexedDb;\n  static iframePostmam = null;\n  static popupPostmam = null;\n  static mainHelper = MainHelper;\n  static subscriptionHelper = SubscriptionHelper;\n  static workerHelper = ServiceWorkerHelper;\n  static httpHelper =  HttpHelper;\n  static eventHelper = EventHelper;\n  static testHelper = TestHelper;\n  static objectAssign = objectAssign;\n  /**\n   * The additional path to the worker file.\n   *\n   * Usually just the filename (in case the file is named differently), but also supports cases where the folder\n   * is different.\n   *\n   * However, the init options 'path' should be used to specify the folder path instead since service workers will not\n   * auto-update correctly on HTTPS site load if the config init options 'path' is not set.\n   */\n  static SERVICE_WORKER_UPDATER_PATH = 'OneSignalSDKUpdaterWorker.js';\n  static SERVICE_WORKER_PATH = 'OneSignalSDKWorker.js';\n\n  /**\n   * By default, the service worker is expected to be accessible at the root scope. If the service worker is only\n   * available with in a sub-directory, SERVICE_WORKER_PARAM must be changed to the sub-directory (with a trailing\n   * slash). This would allow pages to function correctly as not to block the service worker ready call, which would\n   * hang indefinitely if we requested root scope registration but the service was only available in a child scope.\n   */\n  static SERVICE_WORKER_PARAM = {scope: '/'};\n  static _LOGGING = false;\n  static LOGGING = false;\n  static _usingNativePermissionHook = false;\n  static _initCalled = false;\n  static __initAlreadyCalled = false;\n  static _thisIsTheModal: boolean;\n  static modalPostmam: any;\n  static httpPermissionRequestPostModal: any;\n  static closeNotifications = ServiceWorkerHelper.closeNotifications;\n  static isServiceWorkerActive = ServiceWorkerHelper.isServiceWorkerActive;\n  static _showingHttpPermissionRequest = false;\n  static checkAndWipeUserSubscription = SubscriptionHelper.checkAndWipeUserSubscription;\n\n\n  /**\n   * Used by Rails-side HTTP popup. Must keep the same name.\n   * @InternalApi\n   */\n  static _initHttp = HttpHelper.initHttp;\n\n  /**\n   * Used by Rails-side HTTP popup. Must keep the same name.\n   * @InternalApi\n   */\n  static _initPopup = HttpHelper.initPopup;\n\n  static POSTMAM_COMMANDS = {\n    CONNECTED: 'connect',\n    REMOTE_NOTIFICATION_PERMISSION: 'postmam.remoteNotificationPermission',\n    REMOTE_DATABASE_GET: 'postmam.remoteDatabaseGet',\n    REMOTE_DATABASE_PUT: 'postmam.remoteDatabasePut',\n    REMOTE_DATABASE_REMOVE: 'postmam.remoteDatabaseRemove',\n    REMOTE_OPERATION_COMPLETE: 'postman.operationComplete',\n    REMOTE_RETRIGGER_EVENT: 'postmam.remoteRetriggerEvent',\n    MODAL_LOADED: 'postmam.modalPrompt.loaded',\n    MODAL_PROMPT_ACCEPTED: 'postmam.modalPrompt.accepted',\n    MODAL_PROMPT_REJECTED: 'postmam.modalPrompt.canceled',\n    POPUP_LOADED: 'postmam.popup.loaded',\n    POPUP_ACCEPTED: 'postmam.popup.accepted',\n    POPUP_REJECTED: 'postmam.popup.canceled',\n    POPUP_CLOSING: 'postman.popup.closing',\n    REMOTE_NOTIFICATION_PERMISSION_CHANGED: 'postmam.remoteNotificationPermissionChanged',\n    IFRAME_POPUP_INITIALIZE: 'postmam.iframePopupInitialize',\n    UNSUBSCRIBE_FROM_PUSH: 'postmam.unsubscribeFromPush',\n    BEGIN_BROWSING_SESSION: 'postmam.beginBrowsingSession',\n    REQUEST_HOST_URL: 'postmam.requestHostUrl',\n    SHOW_HTTP_PERMISSION_REQUEST: 'postmam.showHttpPermissionRequest',\n    IS_SHOWING_HTTP_PERMISSION_REQUEST: 'postmam.isShowingHttpPermissionRequest',\n    WINDOW_TIMEOUT: 'postmam.windowTimeout',\n    FINISH_REMOTE_REGISTRATION: 'postmam.finishRemoteRegistration',\n    FINISH_REMOTE_REGISTRATION_IN_PROGRESS: 'postmam.finishRemoteRegistrationInProgress',\n    POPUP_BEGIN_MESSAGEPORT_COMMS: 'postmam.beginMessagePortComms'\n  };\n\n  static EVENTS = {\n    /**\n     * Occurs when the user clicks the \"Continue\" or \"No Thanks\" button on the HTTP popup or HTTPS modal prompt.\n     * For HTTP sites (and HTTPS sites using the modal prompt), this event is fired before the native permission\n     * prompt is shown. This event is mostly used for HTTP sites.\n     */\n    CUSTOM_PROMPT_CLICKED: 'customPromptClick',\n    /**\n     * Occurs when the user clicks \"Allow\" or \"Block\" on the native permission prompt on Chrome, Firefox, or Safari.\n     * This event is used for both HTTP and HTTPS sites and occurs after the user actually grants notification\n     * permissions for the site. Occurs before the user is actually subscribed to push notifications.\n     */\n    NATIVE_PROMPT_PERMISSIONCHANGED: 'notificationPermissionChange',\n    /**\n     * Occurs after the user is officially subscribed to push notifications. The service worker is fully registered\n     * and activated and the user is eligible to receive push notifications at any point after this.\n     */\n    SUBSCRIPTION_CHANGED: 'subscriptionChange',\n    /**\n     * Occurs after a POST call to OneSignal's server to send the welcome notification has completed. The actual\n     * notification arrives shortly after.\n     */\n    WELCOME_NOTIFICATION_SENT: 'sendWelcomeNotification',\n    /**\n     * Occurs when a notification is displayed.\n     */\n    NOTIFICATION_DISPLAYED: 'notificationDisplay',\n    /**\n     * Occurs when a notification is dismissed by the user either clicking 'X' or clearing all notifications\n     * (available in Android). This event is NOT called if the user clicks the notification's body or any of the\n     * action buttons.\n     */\n    NOTIFICATION_DISMISSED: 'notificationDismiss',\n    /**\n     * New event replacing legacy addNotificationOpenedHandler(). Used when the notification was clicked.\n     */\n    NOTIFICATION_CLICKED: 'notificationClick',\n    /**\n     * Occurs after the document ready event fires and, for HTTP sites, the iFrame to subdomain.onesignal.com has\n     * loaded.\n     * Before this event, IndexedDB access is not possible for HTTP sites.\n     */\n    SDK_INITIALIZED: 'initialize',\n    /**\n     * Occurs after the user subscribes to push notifications and a new user entry is created on OneSignal's server,\n     * and also occurs when the user begins a new site session and the last_session and last_active is updated on\n     * OneSignal's server.\n     */\n    REGISTERED: 'register',\n    /**\n     * Occurs as the HTTP popup is closing.\n     */\n    POPUP_CLOSING: 'popupClose',\n    /**\n     * Occurs when the native permission prompt is displayed.\n     */\n    PERMISSION_PROMPT_DISPLAYED: 'permissionPromptDisplay',\n    /**\n     * For internal testing only. Used for all sorts of things.\n     */\n    TEST_INIT_OPTION_DISABLED: 'testInitOptionDisabled',\n    TEST_WOULD_DISPLAY: 'testWouldDisplay',\n    POPUP_WINDOW_TIMEOUT: 'popupWindowTimeout',\n  };\n\n  static NOTIFICATION_TYPES = {\n    SUBSCRIBED: 1,\n    UNSUBSCRIBED: -2\n  };\n\n  /** To appease TypeScript, EventEmitter later overrides this */\n  static on(...args) {}\n  static off(...args) {}\n  static once(...args) {}\n}\n\nObject.defineProperty(OneSignal, 'LOGGING', {\n  get: function() {\n    return OneSignal._LOGGING;\n  },\n  set: function(logLevel) {\n    if (logLevel) {\n      log.setDefaultLevel((<any>log).levels.TRACE);\n      OneSignal._LOGGING = true;\n    }\n    else {\n      log.setDefaultLevel((<any>log).levels.WARN);\n      OneSignal._LOGGING = false;\n    }\n  },\n  enumerable: true,\n  configurable: true\n});\n\nheir.merge(OneSignal, new EventEmitter());\n\n\nif (OneSignal.LOGGING)\n  log.setDefaultLevel((<any>log).levels.TRACE);\nelse\n  log.setDefaultLevel((<any>log).levels.WARN);\n\nlog.info(`%cOneSignal Web SDK loaded (version ${OneSignal._VERSION}, ${Environment.getEnv()} environment).`, getConsoleStyle('bold'));\nif (Environment.isEs6DebuggingModule()) {\n  log.warn('OneSignal: This is a specially built version of the web SDK for debugging ES6 async/await.');\n}\nlog.debug(`Current Page URL: ${location.href}`);\nlog.debug(`Browser Environment: ${Browser.name} ${Browser.version}`);\n\nmodule.exports = OneSignal;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/OneSignal.ts\n **/","import ActiveAnimatedElement from './ActiveAnimatedElement';\n\n\nexport default class Badge extends ActiveAnimatedElement {\n\n  constructor() {\n    super('.onesignal-bell-launcher-badge', 'onesignal-bell-launcher-badge-opened', null, 'onesignal-bell-launcher-badge-active', null, 'hidden');\n  }\n\n  increment() {\n    // If it IS a number (is not not a number)\n    if (!isNaN(this.content as any)) {\n      let badgeNumber = +this.content; // Coerce to int\n      badgeNumber += 1;\n      this.content = badgeNumber.toString();\n      return badgeNumber;\n    }\n  }\n\n  decrement() {\n    // If it IS a number (is not not a number)\n    if (!isNaN(this.content as any)) {\n      let badgeNumber = +this.content; // Coerce to int\n      badgeNumber -= 1;\n      if (badgeNumber > 0)\n        this.content = badgeNumber.toString();\n      else\n        this.content = '';\n      return badgeNumber;\n    }\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Badge.ts\n **/","import {removeDomElement, addDomElement} from '../utils';\nimport Event from '../Event';\nimport ActiveAnimatedElement from './ActiveAnimatedElement';\nimport Bell from './Bell';\nimport LimitStore from '../LimitStore';\nimport Message from './Message';\nimport SubscriptionHelper from \"../helpers/SubscriptionHelper\";\nimport Database from \"../Database\";\n\n\nexport default class Button extends ActiveAnimatedElement {\n\n  public events: any;\n  public bell: any;\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher-button', null, null, 'onesignal-bell-launcher-button-active', null, 'shown', '');\n\n    this.bell = bell;\n    this.events = {\n      mouse: 'bell.launcher.button.mouse'\n    };\n\n    this.element.addEventListener('touchstart', (e) => {\n      this.onHovering(e);\n      this.onTap(e);\n    });\n\n    this.element.addEventListener('mouseenter', (e) => {\n      this.onHovering(e);\n    });\n\n    this.element.addEventListener('mouseleave', (e) => {\n      this.onHovered(e);\n    });\n    this.element.addEventListener('touchmove', (e) => {\n      this.onHovered(e);\n    });\n\n    this.element.addEventListener('mousedown', (e) => {\n      this.onTap(e);\n    });\n\n    this.element.addEventListener('mouseup', (e) => {\n      this.onEndTap(e);\n    });\n\n    this.element.addEventListener('click', (e) => {\n      this.onHovered(e);\n      this.onClick(e);\n    });\n  }\n\n  onHovering(e) {\n    if (LimitStore.isEmpty(this.events.mouse) || LimitStore.getLast(this.events.mouse) === 'out') {\n      Event.trigger(Bell.EVENTS.HOVERING);\n    }\n    LimitStore.put(this.events.mouse, 'over');\n  }\n\n  onHovered(e) {\n    LimitStore.put(this.events.mouse, 'out');\n    Event.trigger(Bell.EVENTS.HOVERED);\n  }\n\n  onTap(e) {\n    this.pulse();\n    this.activate();\n    this.bell.badge.activate();\n  }\n\n  onEndTap(e) {\n    this.inactivate();\n    this.bell.badge.inactivate();\n  }\n\n  onClick(e) {\n    Event.trigger(Bell.EVENTS.BELL_CLICK);\n    Event.trigger(Bell.EVENTS.LAUNCHER_CLICK);\n\n    if (this.bell.message.shown && this.bell.message.contentType == Message.TYPES.MESSAGE) {\n      // A message is being shown, it'll disappear soon\n      return;\n    }\n\n    var optedOut = LimitStore.getLast('subscription.optedOut');\n    if (this.bell.unsubscribed) {\n      if (optedOut) {\n        // The user is manually opted out, but still \"really\" subscribed\n        this.bell.launcher.activateIfInactive().then(() => {\n          this.bell.showDialogProcedure();\n        });\n      }\n      else {\n        // The user is actually subscribed, register him for notifications\n        OneSignal.registerForPushNotifications();\n        //// Show the 'Click Allow to receive notifications' tip, if they haven't already enabled permissions\n        //if (OneSignal.getNotificationPermission() === 'default') {\n        //  this.bell.message.display(Message.TYPES.MESSAGE, this.bell.text['message.action.subscribing'], Message.TIMEOUT)\n        //}\n        this.bell._ignoreSubscriptionState = true;\n        OneSignal.once(OneSignal.EVENTS.SUBSCRIPTION_CHANGED, isSubscribed => {\n          this.bell.message.display(Message.TYPES.MESSAGE, this.bell.text['message.action.subscribed'], Message.TIMEOUT)\n            .then(() => {\n              this.bell._ignoreSubscriptionState = false;\n              this.bell.launcher.inactivate();\n            });\n        });\n      }\n    }\n    else if (this.bell.subscribed) {\n      this.bell.launcher.activateIfInactive().then(() => {\n        this.bell.showDialogProcedure();\n      });\n    }\n    else if (this.bell.blocked) {\n      if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\n        // Show the HTTP popup so users can re-allow notifications\n        OneSignal.registerForPushNotifications();\n      } else {\n        this.bell.launcher.activateIfInactive().then(() => {\n          this.bell.showDialogProcedure();\n        });\n      }\n    }\n    return this.bell.message.hide();\n  }\n\n  pulse() {\n    removeDomElement('.pulse-ring');\n    addDomElement(this.element, 'beforeend', '<div class=\"pulse-ring\"></div>');\n    this.bell.setCustomColorsIfSpecified();\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Button.ts\n **/","import {clearDomElementChildren, once, addDomElement} from '../utils';\nimport Event from '../Event';\nimport AnimatedElement from './AnimatedElement';\nimport * as Browser from 'bowser';\nimport Bell from './Bell';\nimport { HOST_URL } from '../vars';\n\n\nexport default class Dialog extends AnimatedElement {\n\n  public bell: any;\n  public subscribeButtonId: any;\n  public unsubscribeButtonId: any;\n  public notificationIcons: any;\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher-dialog', 'onesignal-bell-launcher-dialog-opened', null, 'hidden', ['opacity', 'transform'], '.onesignal-bell-launcher-dialog-body');\n\n    this.bell = bell;\n    this.subscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #subscribe-button';\n    this.unsubscribeButtonId = '#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button';\n    this.notificationIcons = null;\n\n    window.addEventListener('click', (event) => {\n      if (event.target === document.querySelector(this.subscribeButtonId))\n        Event.trigger(Bell.EVENTS.SUBSCRIBE_CLICK);\n      else if (event.target === document.querySelector(this.unsubscribeButtonId))\n        Event.trigger(Bell.EVENTS.UNSUBSCRIBE_CLICK);\n    });\n  }\n\n  getPlatformNotificationIcon() {\n    if (this.notificationIcons) {\n      if (Browser.chrome || Browser.firefox) {\n        return this.notificationIcons.chrome || this.notificationIcons.safari;\n      }\n      else if (Browser.safari) {\n        return this.notificationIcons.safari || this.notificationIcons.chrome;\n      }\n    }\n    else return null;\n  }\n\n  show() {\n    return this.updateBellLauncherDialogBody()\n      .then(() => super.show());\n  }\n\n  get subscribeButtonSelectorId() {\n    return 'subscribe-button';\n  }\n\n  get unsubscribeButtonSelectorId() {\n    return 'unsubscribe-button';\n  }\n\n  get subscribeButton() {\n    return this.element.querySelector('#' + this.subscribeButtonSelectorId);\n  }\n\n  get unsubscribeButton() {\n    return this.element.querySelector('#' + this.unsubscribeButtonSelectorId);\n  }\n\n  updateBellLauncherDialogBody() {\n    return OneSignal.getSubscription().then((currentSetSubscription) => {\n      clearDomElementChildren(document.querySelector(this.nestedContentSelector));\n      let contents = 'Nothing to show.';\n\n      var footer = '';\n      if (this.bell.options.showCredit) {\n        footer = `<div class=\"divider\"></div>\n                  <div class=\"kickback\">Powered by <a href=\"https://onesignal.com\" class=\"kickback\" target=\"_blank\">OneSignal</a></div>`;\n      }\n\n      if (this.bell.state === Bell.STATES.SUBSCRIBED && currentSetSubscription === true ||\n        this.bell.state === Bell.STATES.UNSUBSCRIBED && currentSetSubscription === false) {\n\n        let notificationIconHtml = '';\n        let imageUrl = this.getPlatformNotificationIcon();\n        if (imageUrl) {\n          notificationIconHtml = `<div class=\"push-notification-icon\"><img src=\"${imageUrl}\"></div>`\n        } else {\n          notificationIconHtml = `<div class=\"push-notification-icon push-notification-icon-default\"></div>`\n        }\n\n        let buttonHtml = '';\n        if (this.bell.state !== Bell.STATES.SUBSCRIBED)\n          buttonHtml = `<button type=\"button\" class=\"action\" id=\"${this.subscribeButtonSelectorId}\">${this.bell.text['dialog.main.button.subscribe']}</button>`;\n        else\n          buttonHtml = `<button type=\"button\" class=\"action\" id=\"${this.unsubscribeButtonSelectorId}\">${this.bell.text['dialog.main.button.unsubscribe']}</button>`;\n\n        contents = `\n                  <h1>${this.bell.text['dialog.main.title']}</h1>\n                  <div class=\"divider\"></div>\n                  <div class=\"push-notification\">\n                    ${notificationIconHtml}\n                    <div class=\"push-notification-text-container\">\n                      <div class=\"push-notification-text push-notification-text-short\"></div>\n                      <div class=\"push-notification-text\"></div>\n                      <div class=\"push-notification-text push-notification-text-medium\"></div>\n                      <div class=\"push-notification-text\"></div>\n                      <div class=\"push-notification-text push-notification-text-medium\"></div>\n                    </div>\n                  </div>\n                  <div class=\"action-container\">\n                    ${buttonHtml}\n                  </div>\n                  ${footer}\n                `;\n      }\n      else if (this.bell.state === Bell.STATES.BLOCKED) {\n        let imageUrl = null;\n        if (Browser.chrome) {\n          if (!Browser.mobile && !Browser.tablet) {\n            imageUrl = HOST_URL + '/bell/chrome-unblock.jpg';\n          }\n        }\n        else if (Browser.firefox)\n          imageUrl = HOST_URL + '/bell/firefox-unblock.jpg';\n        else if (Browser.safari)\n          imageUrl = HOST_URL + '/bell/safari-unblock.jpg';\n\n        let instructionsHtml = '';\n        if (imageUrl) {\n          instructionsHtml = `\n\n            <a href=\"${imageUrl}\" target=\"_blank\"><img src=\"${imageUrl}\"></a></div>\n            `;\n        }\n\n        if ((Browser.mobile || Browser.tablet) && Browser.chrome) {\n          instructionsHtml = `\n            <ol>\n            <li>Access <strong>Settings</strong> by tapping the three menu dots <strong>⋮</strong></li>\n            <li>Click <strong>Site settings</strong> under Advanced.</li>\n            <li>Click <strong>Notifications</strong>.</li>\n            <li>Find and click this entry for this website.</li>\n            <li>Click <strong>Notifications</strong> and set it to <strong>Allow</strong>.</li>\n            </ol>\n          `;\n        }\n        contents = `\n                  <h1>${this.bell.text['dialog.blocked.title']}</h1>\n                  <div class=\"divider\"></div>\n                  <div class=\"instructions\">\n                  <p>${this.bell.text['dialog.blocked.message']}</p>\n                  ${instructionsHtml}\n                  </div>\n                  ${footer}\n                `;\n      }\n      addDomElement(document.querySelector(this.nestedContentSelector), 'beforeend', contents);\n      this.bell.setCustomColorsIfSpecified();\n    });\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Dialog.ts\n **/","import { hasCssClass, addCssClass, removeCssClass, nothing, contains, once } from '../utils';\nimport * as log from 'loglevel';\nimport ActiveAnimatedElement from './ActiveAnimatedElement';\n\n\nexport default class Launcher extends ActiveAnimatedElement {\n\n  public bell: any;\n  public wasInactive: boolean;\n\n  constructor(bell) {\n    super('.onesignal-bell-launcher', 'onesignal-bell-launcher-active', null, null, 'onesignal-bell-launcher-inactive', 'hidden', 'active');\n\n    this.bell = bell;\n    this.wasInactive = false;\n  }\n\n  resize(size) {\n    // If the size is the same, do nothing and resolve an empty promise\n    if ((size === 'small' && hasCssClass(this.element, 'onesignal-bell-launcher-sm')) ||\n        (size === 'medium' && hasCssClass(this.element, 'onesignal-bell-launcher-md')) ||\n        (size === 'large' && hasCssClass(this.element, 'onesignal-bell-launcher-lg'))) {\n      return Promise.resolve(this);\n    }\n    removeCssClass(this.element, 'onesignal-bell-launcher-sm');\n    removeCssClass(this.element, 'onesignal-bell-launcher-md');\n    removeCssClass(this.element, 'onesignal-bell-launcher-lg');\n    if (size === 'small') {\n      addCssClass(this.element, 'onesignal-bell-launcher-sm')\n    }\n    else if (size === 'medium') {\n      addCssClass(this.element, 'onesignal-bell-launcher-md')\n    }\n    else if (size === 'large') {\n      addCssClass(this.element, 'onesignal-bell-launcher-lg')\n    }\n    else {\n      throw new Error('Invalid OneSignal bell size ' + size);\n    }\n    if (!this.shown) {\n      return Promise.resolve(this);\n    }\n    else {\n      return new Promise((resolve) => {\n        // Once the launcher has finished shrinking down\n        if (this.targetTransitionEvents.length == 0) {\n          return resolve(this);\n        } else {\n          var timerId = setTimeout(() => {\n            log.debug(`Launcher did not completely resize (state: ${this.state}, activeState: ${this.activeState}).`)\n          }, this.transitionCheckTimeout);\n          once(this.element, 'transitionend', (event, destroyListenerFn) => {\n            if (event.target === this.element &&\n              contains(this.targetTransitionEvents, event.propertyName)) {\n              clearTimeout(timerId);\n              // Uninstall the event listener for transitionend\n              destroyListenerFn();\n              return resolve(this);\n            }\n          }, true);\n        }\n      });\n    }\n  }\n\n  activateIfInactive() {\n    if (this.inactive) {\n      this.wasInactive = true;\n      return this.activate();\n    }\n    else return nothing();\n  }\n\n  inactivateIfWasInactive() {\n    if (this.wasInactive) {\n      this.wasInactive = false;\n      return this.inactivate();\n    }\n    else return nothing();\n  }\n\n  clearIfWasInactive() {\n    this.wasInactive = false;\n  }\n\n  inactivate() {\n    return this.bell.message.hide()\n      .then(() => {\n        if (this.bell.badge.content.length > 0) {\n          return this.bell.badge.hide()\n            .then(() => Promise.all([super.inactivate(), this.resize('small')]))\n            .then(() => this.bell.badge.show());\n        }\n        else {\n          return Promise.all([super.inactivate(), this.resize('small')]);\n        }\n      });\n  }\n\n  activate() {\n    if (this.bell.badge.content.length > 0) {\n      return this.bell.badge.hide()\n        .then(() => Promise.all([super.activate(), this.resize(this.bell.options.size)]));\n    }\n    else {\n      return Promise.all([super.activate(), this.resize(this.bell.options.size)]);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bell/Launcher.ts\n **/","import OneSignalError from \"./OneSignalError\";\r\n\r\nexport enum InvalidArgumentReason {\r\n  Empty,\r\n  Malformed\r\n}\r\n\r\nexport class InvalidArgumentError extends OneSignalError {\r\n  argument: string;\r\n  reason: string;\r\n\r\n  constructor(argName: string, reason: InvalidArgumentReason) {\r\n    switch (reason) {\r\n      case InvalidArgumentReason.Empty:\r\n        super(`Supply a non-empty value to '${argName}'.`);\r\n        break;\r\n      case InvalidArgumentReason.Malformed:\r\n        super(`The value for '${argName}' was malformed.`);\r\n        break;\r\n    }\r\n    this.argument = argName;\r\n    this.reason = InvalidArgumentReason[reason];\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/InvalidArgumentError.ts\n **/","import OneSignalError from \"./OneSignalError\";\r\n\r\n\r\nexport default class PermissionMessageDismissedError extends OneSignalError {\r\n  constructor() {\r\n    super('The permission message was previously dismissed.');\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/PermissionMessageDismissedError.ts\n **/","import OneSignalError from \"./OneSignalError\";\r\n\r\n\r\nexport default class PushNotSupportedError extends OneSignalError {\r\n  constructor() {\r\n    super('Push notifications are not supported.');\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/errors/PushNotSupportedError.ts\n **/","import {DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL, STAGING_FRAME_HOST} from '../vars';\r\nimport Environment from '../Environment';\r\nimport OneSignalApi from '../OneSignalApi';\r\nimport * as log from 'loglevel';\r\nimport LimitStore from '../LimitStore';\r\nimport Event from \"../Event\";\r\nimport Database from '../Database';\r\nimport * as Browser from 'bowser';\r\nimport {\r\n  getConsoleStyle, contains, normalizeSubdomain, getDeviceTypeForBrowser, capitalize,\r\n  isPushNotificationsSupported, getUrlQueryParam, executeAndTimeoutPromiseAfter, wipeLocalIndexedDb, unsubscribeFromPush\r\n} from '../utils';\r\nimport * as objectAssign from 'object-assign';\r\nimport * as EventEmitter from 'wolfy87-eventemitter';\r\nimport * as heir from 'heir';\r\nimport * as swivel from 'swivel';\r\nimport Postmam from '../Postmam';\r\nimport * as Cookie from 'js-cookie';\r\nimport HttpModal from \"../http-modal/HttpModal\";\r\nimport Bell from \"../bell/Bell\";\r\nimport MainHelper from \"./MainHelper\";\r\nimport ServiceWorkerHelper from \"./ServiceWorkerHelper\";\r\nimport IndexedDb from \"../IndexedDb\";\r\nimport InitHelper from \"./InitHelper\";\r\nimport EventHelper from \"./EventHelper\";\r\nimport SubscriptionHelper from \"./SubscriptionHelper\";\r\nimport { InvalidStateReason } from \"../errors/InvalidStateError\";\r\n\r\ndeclare var OneSignal: any;\r\n\r\n\r\nexport default class HttpHelper {\r\n\r\n  static async isShowingHttpPermissionRequest() {\r\n    if (SubscriptionHelper.isUsingSubscriptionWorkaround()) {\r\n      return await new Promise((resolve, reject) => {\r\n        OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST, null, reply => {\r\n          resolve(reply.data);\r\n        });\r\n      });\r\n    } else {\r\n      return OneSignal._showingHttpPermissionRequest;\r\n    }\r\n  }\r\n\r\n  // Http only - Only called from iframe's init.js\r\n  static initHttp(options) {\r\n    log.debug(`Called %cinitHttp(${JSON.stringify(options, null, 4)})`, getConsoleStyle('code'));\r\n\r\n    if (!isPushNotificationsSupported()) {\r\n      log.warn('OneSignal: Push notifications are not supported.');\r\n      return;\r\n    }\r\n\r\n    ServiceWorkerHelper.applyServiceWorkerEnvPrefixes();\r\n\r\n    var creator = window.opener || window.parent;\r\n\r\n    if (creator == window) {\r\n      document.write(`<span style='font-size: 14px; color: red; font-family: sans-serif;'>OneSignal: This page cannot be directly opened, and \r\nmust be opened as a result of a subscription call.</span>`);\r\n      return;\r\n    }\r\n\r\n    // Forgetting this makes all our APIs stall forever because the promises expect this to be true\r\n    OneSignal.config = {};\r\n    OneSignal.initialized = true;\r\n\r\n    let sendToOrigin = options.origin;\r\n    let receiveFromOrigin = options.origin;\r\n    let shouldWipeData = getUrlQueryParam('dangerouslyWipeData') || (window.__POSTDATA && window.__POSTDATA['dangerouslyWipeData'] === true);\r\n\r\n    let preinitializePromise = Promise.resolve();\r\n    if (shouldWipeData && Environment.isIframe()) {\r\n      OneSignal.LOGGING = true;\r\n      // Wipe IndexedDB and unsubscribe from push/unregister the service worker for testing.\r\n      log.warn('Wiping away previous HTTP data (called from HTTP iFrame).');\r\n      preinitializePromise = wipeLocalIndexedDb()\r\n        .then(() => unsubscribeFromPush())\r\n        .then(() => IndexedDb.put('Ids', {type: 'appId', id: options.appId}));\r\n    }\r\n\r\n    OneSignal._thisIsThePopup = options.isPopup;\r\n    if (Environment.isPopup() || OneSignal._thisIsThePopup) {\r\n      OneSignal.popupPostmam = new Postmam(window.opener, sendToOrigin, receiveFromOrigin);\r\n      // The host page will receive this event, and then call connect()\r\n      OneSignal.popupPostmam.postMessage(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS, null);\r\n      OneSignal.popupPostmam.listen();\r\n      OneSignal.popupPostmam.on('connect', e => {\r\n        log.debug(`(${Environment.getEnv()}) The host page is now ready to receive commands from the HTTP popup.`);\r\n        Event.trigger('httpInitialize');\r\n      });\r\n    }\r\n\r\n    OneSignal._thisIsTheModal = options.isModal;\r\n    if (OneSignal._thisIsTheModal) {\r\n      OneSignal.modalPostmam = new Postmam(window.parent, sendToOrigin, receiveFromOrigin);\r\n    }\r\n\r\n    OneSignal.iframePostmam = new Postmam(window, sendToOrigin, receiveFromOrigin);\r\n    OneSignal.iframePostmam.listen();\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.CONNECTED, e => {\r\n      log.debug(`(${Environment.getEnv()}) Fired Postmam connect event!`);\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION, message => {\r\n      OneSignal.getNotificationPermission()\r\n               .then(permission => message.reply(permission));\r\n      return false;\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET, message => {\r\n      // retrievals is an array of key-value pairs e.g. [{table: 'Ids', keys: 'userId'}, {table: 'Ids', keys: 'registrationId'}]\r\n      let retrievals = message.data;\r\n      let retrievalOpPromises = [];\r\n      for (let retrieval of retrievals) {\r\n        let {table, key} = retrieval;\r\n        retrievalOpPromises.push(Database.get(table, key));\r\n      }\r\n      Promise.all(retrievalOpPromises)\r\n             .then(results => message.reply(results));\r\n      return false;\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT, message => {\r\n      // insertions is an array of key-value pairs e.g. [table: {'Options': keypath: {key: persistNotification, value: '...'}}, {table: 'Ids', keypath: {type: 'userId', id: '...'}]\r\n      // It's formatted that way because our IndexedDB database is formatted that way\r\n      let insertions = message.data;\r\n      let insertionOpPromises = [];\r\n      for (let insertion of insertions) {\r\n        let {table, keypath} = insertion;\r\n        insertionOpPromises.push(Database.put(table, keypath));\r\n      }\r\n      Promise.all(insertionOpPromises)\r\n             .then(results => message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE));\r\n      return false;\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE, message => {\r\n      // removals is an array of key-value pairs e.g. [table: {'Options': keypath: {key: persistNotification, value: '...'}}, {table: 'Ids', keypath: {type: 'userId', id: '...'}]\r\n      // It's formatted that way because our IndexedDB database is formatted that way\r\n      let removals = message.data;\r\n      let removalOpPromises = [];\r\n      for (let removal of removals) {\r\n        let {table, keypath} = removal;\r\n        removalOpPromises.push(Database.remove(table, keypath));\r\n      }\r\n      Promise.all(removalOpPromises)\r\n             .then(results => message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE));\r\n      return false;\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE, message => {\r\n      log.info(`(${Environment.getEnv()}) The iFrame has just received initOptions from the host page!`);\r\n\r\n      preinitializePromise.then(() => {\r\n        OneSignal.config = objectAssign(message.data.hostInitOptions, options, {\r\n          defaultUrl: message.data.defaultUrl,\r\n          pageUrl: message.data.pageUrl,\r\n          pageTitle: message.data.pageTitle\r\n        });\r\n\r\n        InitHelper.installNativePromptPermissionChangedHook();\r\n\r\n        let opPromises = [];\r\n        if (options.continuePressed) {\r\n          opPromises.push(OneSignal.setSubscription(true));\r\n        }\r\n        // 3/30/16: For HTTP sites, put the host page URL as default URL if one doesn't exist already\r\n        opPromises.push(Database.get('Options', 'defaultUrl').then(defaultUrl => {\r\n          if (!defaultUrl) {\r\n            return Database.put('Options', {key: 'defaultUrl', value: new URL(OneSignal.config.defaultUrl).origin});\r\n          }\r\n        }));\r\n\r\n        /**\r\n         * When a user is on http://example.com and receives a notification, we want to open a new window only if the\r\n         * notification's URL is different from http://example.com. The service worker, which only controls\r\n         * subdomain.onesignal.com, doesn't know that the host URL is http://example.com. Although defaultUrl above\r\n         * sets the HTTP's origin, this can be modified if users call setDefaultTitle(). lastKnownHostUrl therefore\r\n         * stores the last visited full page URL.\r\n         */\r\n        opPromises.push(\r\n            Database.put('Options', {key: 'lastKnownHostUrl', value: OneSignal.config.pageUrl})\r\n        );\r\n\r\n        opPromises.push(InitHelper.initSaveState());\r\n        opPromises.push(InitHelper.storeInitialValues());\r\n        opPromises.push(InitHelper.saveInitOptions());\r\n        Promise.all(opPromises as any[])\r\n               .then(() => {\r\n                 /* 3/20/16: In the future, if navigator.serviceWorker.ready is unusable inside of an insecure iFrame host, adding a message event listener will still work. */\r\n                 //if (navigator.serviceWorker) {\r\n                 //log.info('We have added an event listener for service worker messages.', Environment.getEnv());\r\n                 //navigator.serviceWorker.addEventListener('message', function(event) {\r\n                 //  log.info('Wow! We got a message!', event);\r\n                 //});\r\n                 //}\r\n\r\n                 if (navigator.serviceWorker && window.location.protocol === 'https:') {\r\n                   try {\r\n                     MainHelper.establishServiceWorkerChannel();\r\n                   } catch (e) {\r\n                     log.error(`Error interacting with Service Worker inside an HTTP-hosted iFrame:`, e);\r\n                   }\r\n                 }\r\n\r\n                 message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE);\r\n               });\r\n      });\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH, message => {\r\n      log.debug(Environment.getEnv() + \" (Expected iFrame) has received the unsubscribe from push method.\");\r\n      unsubscribeFromPush()\r\n        .then(() => message.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE))\r\n        .catch(e => log.debug('Failed to unsubscribe from push remotely.', e));\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST, message => {\r\n      log.debug(Environment.getEnv() + \" Calling showHttpPermissionRequest() inside the iFrame, proxied from host.\");\r\n      let options = {};\r\n      if (message.data) {\r\n        options = message.data;\r\n      }\r\n      log.debug(Environment.getEnv() + 'HTTP permission request showing, message data:', message);\r\n      OneSignal.showHttpPermissionRequest(options)\r\n               .then(result => {\r\n                 message.reply({status: 'resolve', result: result});\r\n               })\r\n               .catch(e => {\r\n                 if (e && e.reason === InvalidStateReason[InvalidStateReason.PushPermissionAlreadyGranted]) {\r\n                  // Don't do anything for this error, too common\r\n                 } else {\r\n                   message.reply({ status: 'reject', result: e })\r\n                 }\r\n               });\r\n    });\r\n    OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST, async message => {\r\n      const isShowingHttpPermReq = await HttpHelper.isShowingHttpPermissionRequest();\r\n      message.reply(isShowingHttpPermReq);\r\n      return false;\r\n    });\r\n    if (Environment.isIframe()) {\r\n      Event.trigger('httpInitialize');\r\n    }\r\n  }\r\n\r\n  static initPopup() {\r\n    OneSignal.config = {};\r\n    OneSignal.initialized = true;\r\n\r\n    ServiceWorkerHelper.applyServiceWorkerEnvPrefixes();\r\n\r\n    // Do not register OneSignalSDKUpdaterWorker.js for HTTP popup sites; the file does not exist\r\n    OneSignal.isPushNotificationsEnabled(isEnabled => {\r\n      if (!isEnabled) {\r\n        navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH, OneSignal.SERVICE_WORKER_PARAM).then(SubscriptionHelper.enableNotifications, ServiceWorkerHelper.registerError);\r\n      } else {\r\n        window.close();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Loads the iFrame with the OneSignal subdomain on the page so that subsequent SDK tasks can run on the service-worker-controlled origin.\r\n   */\r\n  static loadSubdomainIFrame() {\r\n    let subdomainLoadPromise = new Promise((resolve, reject) => {\r\n      log.debug(`Called %cloadSubdomainIFrame()`, getConsoleStyle('code'));\r\n\r\n      let dangerouslyWipeData = OneSignal.config.dangerouslyWipeData;\r\n      if (dangerouslyWipeData) {\r\n        OneSignal.iframeUrl += '?&dangerouslyWipeData=true';\r\n      }\r\n      log.debug('Loading subdomain iFrame:', OneSignal.iframeUrl);\r\n      let iframe = MainHelper.createHiddenDomIFrame(OneSignal.iframeUrl);\r\n      iframe.onload = () => {\r\n        log.info('iFrame onload event was called for:', iframe.src);\r\n        let sendToOrigin = `https://${OneSignal.config.subdomainName}.onesignal.com`;\r\n        if (Environment.isDev()) {\r\n          sendToOrigin = DEV_FRAME_HOST;\r\n        } else if (Environment.isStaging()) {\r\n          sendToOrigin = STAGING_FRAME_HOST;\r\n        }\r\n        let receiveFromOrigin = sendToOrigin;\r\n        OneSignal.iframePostmam = new Postmam(iframe.contentWindow, sendToOrigin, receiveFromOrigin);\r\n        OneSignal.iframePostmam.connect();\r\n        OneSignal.iframePostmam.on('connect', e => {\r\n          log.debug(`(${Environment.getEnv()}) Fired Postmam connect event!`);\r\n          Promise.all([\r\n            Database.get<string>('Options', 'defaultUrl'),\r\n            Database.get<string>('Options', 'defaultTitle')\r\n          ])\r\n                 .then(([defaultUrlResult, defaultTitleResult]) => {\r\n                   if (!defaultUrlResult) {\r\n                     var defaultUrl = location.href;\r\n                   } else {\r\n                     var defaultUrl = defaultUrlResult;\r\n                   }\r\n\r\n                   if (!defaultTitleResult) {\r\n                     var defaultTitle = document.title;\r\n                   } else {\r\n                     var defaultTitle = defaultTitleResult;\r\n                   }\r\n\r\n                   OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE, {\r\n                     hostInitOptions: JSON.parse(JSON.stringify(OneSignal.config)), // Removes functions and unmessageable objects\r\n                     defaultUrl: defaultUrl,\r\n                     pageUrl: window.location.href,\r\n                     pageTitle: defaultTitle,\r\n                   }, reply => {\r\n                     if (reply.data === OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE) {\r\n                       resolve();\r\n                       Event.trigger(OneSignal.EVENTS.SDK_INITIALIZED);\r\n                     }\r\n                     return false;\r\n                   });\r\n                 });\r\n        });\r\n        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT, message => {\r\n          // e.g. { eventName: 'subscriptionChange', eventData: true}\r\n          let {eventName, eventData} = message.data;\r\n          Event.trigger(eventName, eventData, message.source);\r\n          return false;\r\n        });\r\n        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED, message => {\r\n          let {forceUpdatePermission} = message.data;\r\n          EventHelper.triggerNotificationPermissionChanged(forceUpdatePermission);\r\n          return false;\r\n        });\r\n        OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REQUEST_HOST_URL, message => {\r\n          message.reply(location.href);\r\n          return false;\r\n        });\r\n      };\r\n      OneSignal._sessionIframeAdded = true;\r\n    });\r\n    return executeAndTimeoutPromiseAfter(subdomainLoadPromise, 15000)\r\n      .catch(() => log.warn(`OneSignal: Could not load iFrame with URL ${OneSignal.iframeUrl}. Please check that your 'subdomainName' matches that on your OneSignal Chrome platform settings. Also please check that your Site URL on your Chrome platform settings is a valid reachable URL pointing to your site.`));\r\n  }\r\n\r\n  static loadPopup(options) {\r\n    // Important: Don't use any promises until the window is opened, otherwise the popup will be blocked\r\n    let sendToOrigin = `https://${OneSignal.config.subdomainName}.onesignal.com`;\r\n    if (Environment.isDev()) {\r\n      sendToOrigin = DEV_FRAME_HOST;\r\n    }\r\n    let receiveFromOrigin = sendToOrigin;\r\n    let dangerouslyWipeData = OneSignal.config.dangerouslyWipeData;\r\n    let postData = objectAssign({}, MainHelper.getPromptOptionsPostHash(), {\r\n      promptType: 'popup',\r\n      parentHostname: encodeURIComponent(location.hostname)\r\n    });\r\n    if (options && options.autoAccept) {\r\n      postData['autoAccept'] = true;\r\n    }\r\n    log.info('loadPopup(options):', options);\r\n    if (options && options.httpPermissionRequest) {\r\n      postData['httpPermissionRequest'] = true;\r\n      var overrides = {\r\n        childWidth: 250,\r\n        childHeight: 150,\r\n        left: -99999999,\r\n        top: 9999999,\r\n      };\r\n    }\r\n    if (dangerouslyWipeData) {\r\n      postData['dangerouslyWipeData'] = true;\r\n    }\r\n    log.info(`Opening popup window to ${OneSignal.popupUrl} with POST data:`, OneSignal.popupUrl);\r\n    var subdomainPopup = MainHelper.openSubdomainPopup(OneSignal.popupUrl, postData, overrides);\r\n\r\n    if (subdomainPopup) {\r\n      subdomainPopup.blur();\r\n      window.focus();\r\n    }\r\n\r\n    OneSignal.popupPostmam = new Postmam(subdomainPopup, sendToOrigin, receiveFromOrigin);\r\n    OneSignal.popupPostmam.startPostMessageReceive();\r\n\r\n    OneSignal.popupPostmam.on(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS, message => {\r\n      // e.g. { eventName: 'subscriptionChange', eventData: true}\r\n      log.debug(`(Popup Postmam) (${Environment.getEnv()}) Got direct postMessage() event from popup event to begin MessagePort comms.`);\r\n      OneSignal.popupPostmam.connect();\r\n      return false;\r\n    });\r\n\r\n    OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_LOADED, message => {\r\n      Event.trigger('popupLoad');\r\n    });\r\n    OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_ACCEPTED, message => {\r\n      MainHelper.triggerCustomPromptClicked('granted');\r\n    });\r\n    OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_REJECTED, message => {\r\n      MainHelper.triggerCustomPromptClicked('denied');\r\n    });\r\n    OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING, message => {\r\n      log.info('Detected popup is closing.');\r\n      Event.trigger(OneSignal.EVENTS.POPUP_CLOSING);\r\n      OneSignal.popupPostmam.destroy();\r\n    });\r\n    OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION, message => {\r\n      log.debug(Environment.getEnv() + \" Marking current session as a continuing browsing session.\");\r\n      MainHelper.beginTemporaryBrowserSession();\r\n    });\r\n    OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.WINDOW_TIMEOUT, message => {\r\n      log.debug(Environment.getEnv() + \" Popup window timed out and was closed.\");\r\n      Event.trigger(OneSignal.EVENTS.POPUP_WINDOW_TIMEOUT);\r\n    });\r\n    OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION, message => {\r\n      log.debug(Environment.getEnv() + \" Finishing HTTP popup registration inside the iFrame, sent from popup.\");\r\n\r\n      message.reply({ progress: true });\r\n\r\n      MainHelper.getAppId()\r\n                .then(appId => {\r\n                  EventHelper.triggerNotificationPermissionChanged(window.Notification.permission);\r\n                  OneSignal.popupPostmam.stopPostMessageReceive();\r\n                  MainHelper.registerWithOneSignal(appId, message.data.subscriptionInfo)\r\n                            .then(() => EventHelper.checkAndTriggerSubscriptionChanged());\r\n                });\r\n    });\r\n  }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helpers/HttpHelper.ts\n **/","import { removeDomElement, addDomElement, addCssClass } from '../utils';\nimport * as log from 'loglevel';\nimport Event from '../Event';\nimport * as objectAssign from 'object-assign';\n\n\nexport default class HttpModal {\n\n    public options: any;\n\n    static get EVENTS() {\n        return {\n            FINISH_CLICK: 'httpModalFinishClick',\n            SHOWN: 'httpModalShown',\n            CLOSED: 'httpModalClosed',\n        };\n    }\n\n    constructor(options) {\n        if (!options) {\n            this.options = {};\n        } else {\n            this.options = objectAssign({}, options);\n        }\n        if (!this.options['modalTitle'] || typeof this.options['modalTitle'] !== \"string\")\n            this.options['modalTitle'] = \"Thanks for subscribing\";\n        if (!this.options['modalMessage'] || typeof this.options['modalMessage'] !== \"string\")\n            this.options['modalMessage'] = \"You're now subscribed to notifications. You can unsubscribe at any time.\";\n        if (!this.options['modalButtonText'] || typeof this.options['modalButtonText'] !== \"string\")\n            this.options['modalButtonText'] = \"Close\";\n        this.options['modalTitle'] = this.options['modalTitle'].substring(0, 50);\n        this.options['modalMessage'] = this.options['modalMessage'].substring(0, 90);\n        this.options['modalButtonText'] = this.options['modalButtonText'].substring(0, 35);\n\n        require(\"./httpModal.scss\");\n    }\n\n    create() {\n        try {\n            // Remove any existing container\n            if (this.container) {\n                removeDomElement('#onesignal-modal-container');\n            }\n\n            let dialogHtml = `\n                        <div id=\"onesignal-modal-dialog\">\n                            <div class=\"modal-exit\">&times;</div>\n                            <div class=\"modal-body\">\n                                <div class=\"modal-body-title\">\n                                    ${this.options['modalTitle']}                                      \n                                </div>\n                                <div class=\"modal-body-message\">\n                                    ${this.options['modalMessage']}                \n                                </div>\n                                <div class=\"clearfix\"></div>\n                            </div>\n                            <div class=\"modal-footer\">\n                                <button id=\"onesignal-modal-finish-button\" class=\"primary modal-button\">\n                                ${this.options['modalButtonText']}</button>\n                                <div class=\"clearfix\"></div>\n                            </div>\n                        </div>                   \n                    `;\n\n            // Insert the container\n            addDomElement('body', 'beforeend',\n                '<div id=\"onesignal-modal-container\" class=\"onesignal-modal-container onesignal-reset\"></div>');\n            // Insert the dialog\n            addDomElement(this.container, 'beforeend', dialogHtml);\n            // Add click event handlers\n            this.container.addEventListener('click', this.onHttpModalFinished.bind(this));\n            Event.trigger(HttpModal.EVENTS.SHOWN);\n        } catch (e) {\n            log.error(e);\n        }\n    }\n\n    onHttpModalFinished(e) {\n        OneSignal.registerForPushNotifications({httpPermissionRequest: true});\n        Event.trigger(HttpModal.EVENTS.FINISH_CLICK);\n        this.close();\n    }\n\n    close() {\n        addCssClass(this.container, 'close-modal');\n        removeDomElement('#onesignal-modal-container');\n        Event.trigger(HttpModal.EVENTS.CLOSED);\n    }\n\n    get container() {\n        return document.querySelector('#onesignal-modal-container');\n    }\n\n    get dialog() {\n        return document.querySelector('#onesignal-modal-dialog');\n    }\n\n    get finishButton() {\n        return document.querySelector('#onesignal-modal-finish-button');\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/http-modal/HttpModal.ts\n **/","import { Uuid } from \"./Uuid\";\r\nimport { ServiceWorkerConfig } from \"./ServiceWorkerConfig\";\r\n\r\n\r\nclass AppConfig {\r\n    appId: Uuid;\r\n    subdomain: string;\r\n    autoRegister: boolean;\r\n    serviceWorkerConfig: ServiceWorkerConfig;\r\n}\r\n\r\nexport { AppConfig };\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/AppConfig.ts\n **/","import {Notification} from \"./Notification\";\r\nimport {Timestamp} from \"./Timestamp\";\r\nclass AppState {\r\n    defaultNotificationUrl: URL;\r\n    defaultNotificationTitle: string;\r\n\r\n    /**\r\n     * Whether the user is currently completely subscribed, including not opted out. Database cached version of\r\n     * isPushNotificationsEnabled().\r\n     */\r\n    lastKnownPushEnabled: boolean;\r\n\r\n    clickedNotifications: Map<URL, [Notification, Timestamp]>\r\n}\r\n\r\nexport { AppState };\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/AppState.ts\n **/","enum NotificationPermission {\r\n  /**\r\n   * The user has not granted notification permissions and may have just dismissed the notification permission prompt.\r\n   */\r\n  Default = <any>\"default\",\r\n  /**\r\n   * The user has granted notification permissions.\r\n   */\r\n  Granted = <any>\"granted\",\r\n  /**\r\n   * The user has blocked notifications.\r\n   */\r\n  Denied = <any>\"denied\"\r\n}\r\n\r\nexport { NotificationPermission };\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/NotificationPermission.ts\n **/","/**\r\n * Contains the SDK initialization options that configure future installations of our service worker.\r\n */\r\nclass ServiceWorkerConfig {\r\n  /**\r\n   * Describes how much of the origin the service worker controls.\r\n   * This is currently always \"/\".\r\n   */\r\n  scope: string;\r\n  /**\r\n   * The filename of the \"main\" worker (e.g. OneSignalSDKWorker.js);\r\n   */\r\n  workerName: string;\r\n  /**\r\n   * The filename of the \"alternate\" worker, used to update an existing service worker.\r\n   * (e.g. OneSignalSDKUpdaterWorer.js)\r\n   */\r\n  updaterWorkerName: string;\r\n  /**\r\n   * The path to the directory containing both workers.\r\n   */\r\n  workerFilePath: string;\r\n}\r\n\r\nexport { ServiceWorkerConfig };\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/ServiceWorkerConfig.ts\n **/","import { Notification } from \"./Notification\";\r\n\r\n\r\nclass ServiceWorkerState {\r\n  workerVersion: number;\r\n  updaterWorkerVersion: number;\r\n  backupNotification: Notification;\r\n}\r\n\r\nexport { ServiceWorkerState };\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/ServiceWorkerState.ts\n **/","import {Uuid} from \"./Uuid\";\r\n\r\n\r\nexport class Subscription {\r\n    /**\r\n     * The OneSignal player ID.\r\n     */\r\n    deviceId: Uuid;\r\n    /**\r\n     * The GCM/FCM registration token, along with the full URL.\r\n     */\r\n    pushEndpoint: URL;\r\n    /**\r\n     * The GCM/FCM registration token, just the token part.\r\n     */\r\n    pushToken: string;\r\n    /**\r\n     * Whether the user is opted out of notifications, set by setSubscription().\r\n     */\r\n    optedOut: boolean;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/models/Subscription.ts\n **/","import {removeDomElement, addDomElement, addCssClass, once} from '../utils';\nimport * as log from 'loglevel';\nimport Event from '../Event';\nimport MainHelper from '../helpers/MainHelper';\nimport * as Browser from 'bowser';\nimport * as objectAssign from 'object-assign';\n\n\nexport default class Popover {\n\n    public options: any;\n    public notificationIcons: any;\n\n    static get EVENTS() {\n        return {\n            ALLOW_CLICK: 'popoverAllowClick',\n            CANCEL_CLICK: 'popoverCancelClick',\n            SHOWN: 'popoverShown',\n            CLOSED: 'popoverClosed',\n        };\n    }\n\n    constructor(options) {\n        require(\"./popover.scss\");\n        if (!options) {\n            this.options = {};\n        } else {\n            this.options = objectAssign({}, options);\n        }\n        if (!this.options['actionMessage'] || typeof this.options['actionMessage'] !== \"string\")\n            this.options['actionMessage'] = \"We'd like to show you notifications for the latest news and updates.\";\n        if (!this.options['acceptButtonText'] || typeof this.options['acceptButtonText'] !== \"string\")\n            this.options['acceptButtonText'] = \"Allow\";\n        if (!this.options['cancelButtonText'] || typeof this.options['cancelButtonText'] !== \"string\")\n            this.options['cancelButtonText'] = \"No Thanks\";\n        this.options['actionMessage'] = this.options['actionMessage'].substring(0, 90);\n        this.options['acceptButtonText'] = this.options['acceptButtonText'].substring(0, 15);\n        this.options['cancelButtonText'] = this.options['cancelButtonText'].substring(0, 15);\n\n        this.notificationIcons = null;\n    }\n\n    create() {\n        try {\n            if (this.notificationIcons === null) {\n                MainHelper.getNotificationIcons().then((icons) => {\n                    this.notificationIcons = icons;\n\n                    // Remove any existing container\n                    if (this.container) {\n                        removeDomElement('#onesignal-popover-container');\n                    }\n\n                    let icon = this.getPlatformNotificationIcon();\n                    let defaultIcon = `data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2239.5%22%20height%3D%2240.5%22%20viewBox%3D%220%200%2079%2081%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctitle%3EOneSignal-Bell%3C%2Ftitle%3E%3Cg%20fill%3D%22%23BBB%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M39.96%2067.12H4.12s-3.2-.32-3.2-3.36%202.72-3.2%202.72-3.2%2010.72-5.12%2010.72-8.8c0-3.68-1.76-6.24-1.76-21.28%200-15.04%209.6-26.56%2021.12-26.56%200%200%201.6-3.84%206.24-3.84%204.48%200%206.08%203.84%206.08%203.84%2011.52%200%2021.12%2011.52%2021.12%2026.56s-1.6%2017.6-1.6%2021.28c0%203.68%2010.72%208.8%2010.72%208.8s2.72.16%202.72%203.2c0%202.88-3.36%203.36-3.36%203.36H39.96zM27%2070.8h24s-1.655%2010.08-11.917%2010.08S27%2070.8%2027%2070.8z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E`;\n\n                    let dialogHtml = `\n                    <div id=\"normal-popover\">\n                        <div class=\"popover-body\">\n                            <div class=\"popover-body-icon ${icon === 'default-icon' ? 'default-icon' : ''}\" style=\"background-image: url('${icon === 'default-icon' ? defaultIcon : icon}');\">\n                            </div>\n                            <div class=\"popover-body-message\">\n                                ${this.options['actionMessage']}                \n                            </div>\n                            <div class=\"clearfix\"></div>\n                        </div>\n                        <div class=\"popover-footer\">\n                            <button id=\"onesignal-popover-allow-button\" class=\"align-right primary popover-button\">\n                            ${this.options['acceptButtonText']}</button>\n                            <button id=\"onesignal-popover-cancel-button\" class=\"align-right secondary popover-button\">\n                            ${this.options['cancelButtonText']}</button>\n                            <div class=\"clearfix\"></div>\n                        </div>\n                    </div>                   \n                `;\n\n                    // Insert the container\n                    addDomElement('body', 'beforeend',\n                                  '<div id=\"onesignal-popover-container\" class=\"onesignal-popover-container onesignal-reset\"></div>');\n                    // Insert the dialog\n                    addDomElement(this.container, 'beforeend',\n                                  `<div id=\"onesignal-popover-dialog\" class=\"onesignal-popover-dialog\">${dialogHtml}</div>`);\n                    // Animate it in depending on environment\n                    addCssClass(this.container, Browser.mobile ? 'slide-up' : 'slide-down');\n                    // Add click event handlers\n                    this.allowButton.addEventListener('click', this.onPopoverAllowed.bind(this));\n                    this.cancelButton.addEventListener('click', this.onPopoverCanceled.bind(this));\n                    Event.trigger(Popover.EVENTS.SHOWN);\n                });\n            }\n        } catch (e) {\n            log.error(e);\n        }\n    }\n\n    onPopoverAllowed(e) {\n        Event.trigger(Popover.EVENTS.ALLOW_CLICK);\n    }\n\n    onPopoverCanceled(e) {\n        Event.trigger(Popover.EVENTS.CANCEL_CLICK);\n        this.close();\n    }\n\n    close() {\n        addCssClass(this.container, 'close-popover');\n        once(this.dialog, 'animationend', (event, destroyListenerFn) => {\n            if (event.target === this.dialog &&\n                (event.animationName === 'slideDownExit' || event.animationName === 'slideUpExit')) {\n                // Uninstall the event listener for animationend\n                removeDomElement('#onesignal-popover-container');\n                destroyListenerFn();\n                Event.trigger(Popover.EVENTS.CLOSED);\n            }\n        }, true);\n    }\n\n    getPlatformNotificationIcon() {\n        if (this.notificationIcons) {\n            if (Browser.chrome || Browser.firefox) {\n                if (this.notificationIcons.chrome) {\n                    return this.notificationIcons.chrome;\n                } else if (this.notificationIcons.firefox) {\n                    return this.notificationIcons.firefox;\n                } else {\n                    return 'default-icon';\n                }\n            }\n            else if (Browser.safari) {\n                if (this.notificationIcons.safari) {\n                    return this.notificationIcons.safari;\n                } else if (this.notificationIcons.chrome) {\n                    return this.notificationIcons.chrome;\n                } else {\n                    return 'default-icon';\n                }\n            }\n        }\n        else return 'default-icon';\n    }\n\n    get container() {\n        return document.querySelector('#onesignal-popover-container');\n    }\n\n    get dialog() {\n        return document.querySelector('#onesignal-popover-dialog');\n    }\n\n    get allowButton() {\n        return document.querySelector('#onesignal-popover-allow-button');\n    }\n\n    get cancelButton() {\n        return document.querySelector('#onesignal-popover-cancel-button');\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/popover/Popover.ts\n **/","///<reference path=\"../../typings/globals/service_worker_api/index.d.ts\"/>\nimport { DEV_HOST, DEV_FRAME_HOST, PROD_HOST, API_URL, STAGING_FRAME_HOST } from '../vars';\nimport Environment from '../Environment'\nimport OneSignalApi from '../OneSignalApi';\nimport * as log from 'loglevel';\nimport Database from '../Database';\nimport { isPushNotificationsSupported, getConsoleStyle, contains, trimUndefined, getDeviceTypeForBrowser, substringAfter, isValidUuid, capitalize } from '../utils';\nimport * as objectAssign from 'object-assign';\nimport * as swivel from 'swivel';\nimport * as Browser from 'bowser';\nimport {Notification} from \"../models/Notification\";\n\ndeclare var self: ServiceWorkerGlobalScope;\n\n\n/**\n * The main service worker script fetching and displaying notifications to users in the background even when the client\n * site is not running. The worker is registered via the navigator.serviceWorker.register() call after the user first\n * allows notification permissions, and is a pre-requisite to subscribing for push notifications.\n *\n * For HTTPS sites, the service worker is registered site-wide at the top-level scope. For HTTP sites, the service\n * worker is registered to the iFrame pointing to subdomain.onesignal.com.\n */\nclass ServiceWorker {\n  static REFETCH_REQUESTS;\n  static SKIP_REFETCH_REQUESTS;\n  static queries;\n  static UNSUBSCRIBED_FROM_NOTIFICATIONS;\n\n  /**\n   * An incrementing integer defined in package.json. Value doesn't matter as long as it's different from the\n   * previous version.\n   */\n  static get VERSION() {\n    return __VERSION__;\n  }\n\n  /**\n   * Describes what context the JavaScript code is running in and whether we're running in local development mode.\n   */\n  static get environment() {\n    return Environment;\n  }\n\n  static get log() {\n    return log;\n  }\n\n  /**\n   * Allows message passing between this service worker and its controlled clients, or webpages. Controlled\n   * clients include any HTTPS site page, or the nested iFrame pointing to OneSignal on any HTTP site. This allows\n   * events like notification dismissed, clicked, and displayed to be fired on the clients. It also allows the\n   * clients to communicate with the service worker to close all active notifications.\n   */\n  static get swivel() {\n    return swivel;\n  }\n\n  /**\n   * An interface to the browser's IndexedDB.\n   */\n  static get database() {\n    return Database;\n  }\n\n  static get apiUrl() {\n    return API_URL;\n  }\n\n  /**\n   * Describes the current browser name and version.\n   */\n  static get browser() {\n    return Browser;\n  }\n\n  /**\n   * Service worker entry point.\n   */\n  static run() {\n    self.addEventListener('push', ServiceWorker.onPushReceived);\n    self.addEventListener('notificationclose', ServiceWorker.onNotificationClosed);\n    self.addEventListener('notificationclick', event => event.waitUntil(ServiceWorker.onNotificationClicked(event)));\n    self.addEventListener('install', ServiceWorker.onServiceWorkerInstalled);\n    self.addEventListener('activate', ServiceWorker.onServiceWorkerActivated);\n    self.addEventListener('pushsubscriptionchange', ServiceWorker.onPushSubscriptionChange);\n\n    // Install messaging event handlers for page <-> service worker communication\n    (swivel as any).on('data', ServiceWorker.onMessageReceived);\n\n    // 3/2/16: Firefox does not send the Origin header when making CORS request through service workers, which breaks some sites that depend on the Origin header being present (https://bugzilla.mozilla.org/show_bug.cgi?id=1248463)\n    // Fix: If the browser is Firefox and is v44, use the following workaround:\n    if (Browser.firefox && Browser.version && contains(Browser.version, '44')) {\n      Database.get('Options', 'serviceWorkerRefetchRequests')\n        .then(refetchRequests => {\n          if (refetchRequests == true) {\n            log.info('Detected Firefox v44; installing fetch handler to refetch all requests.');\n            ServiceWorker.REFETCH_REQUESTS = true;\n            self.addEventListener('fetch', ServiceWorker.onFetch);\n          } else {\n            ServiceWorker.SKIP_REFETCH_REQUESTS = true;\n            log.info('Detected Firefox v44 but not refetching requests because option is set to false.');\n          }\n        })\n        .catch(e => {\n          log.error(e);\n          ServiceWorker.REFETCH_REQUESTS = true;\n          self.addEventListener('fetch', ServiceWorker.onFetch);\n        });\n    }\n  }\n\n  /**\n   * Occurs when a control message is received from the host page. Not related to the actual push message event.\n   * @param context Used to reply to the host page.\n   * @param data The message contents.\n   */\n  static onMessageReceived(context, data) {\n    log.debug(`%c${capitalize(Environment.getEnv())} ⬸ Host:`, getConsoleStyle('serviceworkermessage'), data, context);\n\n    if (!data) {\n      log.debug('Returning from empty data message.');\n      return;\n    }\n\n    if (data === 'notification.closeall') {\n      // Used for testing; the host page can close active notifications\n      self.registration.getNotifications(null).then(notifications => {\n        for (let notification of notifications) {\n          notification.close();\n        }\n      });\n    }\n    else if (data.query) {\n      ServiceWorker.processQuery(data.query, data.response);\n    }\n  }\n\n  static processQuery(queryType, response) {\n    if (!ServiceWorker.queries) {\n      log.debug(`queryClient() was not called before processQuery(). ServiceWorker.queries is empty.`);\n    }\n    if (!ServiceWorker.queries[queryType]) {\n      log.debug(`Received query ${queryType} response ${response}. Expected ServiceWorker.queries to be preset to a hash.`);\n      return;\n    } else {\n      if (!ServiceWorker.queries[queryType].promise) {\n        log.debug(`Expected ServiceWorker.queries[${queryType}].promise value to be a Promise: ${ServiceWorker.queries[queryType]}`);\n        return;\n      }\n      ServiceWorker.queries[queryType].promiseResolve(response);\n    }\n  }\n\n  /**\n   * Messages the service worker client the specified queryString via postMessage(), and returns a Promise that\n   * resolves to the client's response.\n   * @param serviceWorkerClient A service worker client.\n   * @param queryType The message to send to the client.\n     */\n  static queryClient(serviceWorkerClient, queryType) {\n    if (!ServiceWorker.queries) {\n      ServiceWorker.queries = {};\n    }\n    if (!ServiceWorker.queries[queryType]) {\n      ServiceWorker.queries[queryType] = {};\n    }\n    ServiceWorker.queries[queryType].promise = new Promise((resolve, reject) => {\n      ServiceWorker.queries[queryType].promiseResolve = resolve;\n      ServiceWorker.queries[queryType].promiseReject = reject;\n      (swivel as any).emit(serviceWorkerClient.id, queryType);\n    });\n    return ServiceWorker.queries[queryType].promise;\n  }\n\n  /**\n   * Occurs when a push message is received.\n   * This method handles the receipt of a push signal on all web browsers except Safari, which uses the OS to handle\n   * notifications.\n   */\n  static onPushReceived(event) {\n    log.debug(`Called %conPushReceived(${JSON.stringify(event, null, 4)}):`, getConsoleStyle('code'), event);\n\n    event.waitUntil(\n        ServiceWorker.parseOrFetchNotifications(event)\n            .then((notifications: any) => {\n              if (!notifications || notifications.length == 0) {\n                log.debug(\"Because no notifications were retrieved, we'll display the last known notification, so\" +\n                          \" long as it isn't the welcome notification.\");\n                return ServiceWorker.displayBackupNotification();\n              }\n\n              //Display push notifications in the order we received them\n              let notificationEventPromiseFns = [];\n\n              for (let rawNotification of notifications) {\n                log.debug('Raw Notification from OneSignal:', rawNotification);\n                let notification = ServiceWorker.buildStructuredNotificationObject(rawNotification);\n\n                // Never nest the following line in a callback from the point of entering from retrieveNotifications\n                notificationEventPromiseFns.push((notif => {\n                  return ServiceWorker.displayNotification(notif)\n                      .then(() => ServiceWorker.updateBackupNotification(notif).catch(e => log.error(e)))\n                      .then(() => { (swivel as any).broadcast('notification.displayed', notif) })\n                      .then(() => ServiceWorker.executeWebhooks('notification.displayed', notif).catch(e => log.error(e)))\n                }).bind(null, notification));\n              }\n\n              return notificationEventPromiseFns.reduce((p, fn) => {\n                return p = p.then(fn);\n               }, Promise.resolve());\n            })\n            .catch(e => {\n              log.debug('Failed to display a notification:', e);\n              if (ServiceWorker.UNSUBSCRIBED_FROM_NOTIFICATIONS) {\n                log.debug('Because we have just unsubscribed from notifications, we will not show anything.');\n              } else {\n                log.debug(\n                    \"Because a notification failed to display, we'll display the last known notification, so long as it isn't the welcome notification.\");\n                return ServiceWorker.displayBackupNotification();\n              }\n            })\n    )\n  }\n\n  /**\n   * Makes a POST call to a specified URL to forward certain events.\n   * @param event The name of the webhook event. Affects the DB key pulled for settings and the final event the user\n   *              consumes.\n   * @param notification A JSON object containing notification details the user consumes.\n   * @returns {Promise}\n   */\n  static async executeWebhooks(event, notification) {\n    const {deviceId} = await Database.getSubscription();\n    const isServerCorsEnabled = await Database.get<boolean>('Options', 'webhooks.cors');\n    const webhookTargetUrl = await Database.get('Options', `webhooks.${event}`);\n\n    if (webhookTargetUrl) {\n      // JSON.stringify() does not include undefined values\n      // Our response will not contain those fields here which have undefined values\n      let postData = {\n        event: event,\n        id: notification.id,\n        userId: deviceId,\n        action: notification.action,\n        buttons: notification.buttons,\n        heading: notification.heading,\n        content: notification.content,\n        url: notification.url,\n        icon: notification.icon,\n        data: notification.data\n      };\n      let fetchOptions: any = {\n        method: 'post',\n        mode: 'no-cors',\n        body: JSON.stringify(postData),\n\n      };\n      if (isServerCorsEnabled) {\n        fetchOptions.mode = 'cors';\n        fetchOptions.headers = {\n          'X-OneSignal-Event': event,\n          'Content-Type': 'application/json'\n        };\n      }\n      log.debug(`Executing ${event} webhook ${isServerCorsEnabled ? 'with' : 'without'} CORS %cPOST ${webhookTargetUrl}`, getConsoleStyle('code'), ':', postData);\n      return await fetch(webhookTargetUrl, fetchOptions);\n    }\n  }\n\n  /**\n   * Gets an array of active window clients along with whether each window client is the HTTP site's iFrame or an\n   * HTTPS site page.\n   * An active window client is a browser tab that is controlled by the service worker.\n   * Technically, this list should only ever contain clients that are iFrames, or clients that are HTTPS site pages,\n   * and not both. This doesn't really matter though.\n   * @returns {Promise}\n   */\n  static async getActiveClients() {\n    const windowClients = await self.clients.matchAll({ type: 'window', includeUncontrolled: true })\n    let activeClients = [];\n\n    for (let client of windowClients) {\n      // Test if this window client is the HTTP subdomain iFrame pointing to subdomain.onesignal.com\n      if (client.frameType && client.frameType === 'nested') {\n        // Subdomain iFrames point to 'https://subdomain.onesignal.com...'\n        if ((Environment.isDev() && !contains(client.url, DEV_FRAME_HOST)) ||\n          !Environment.isDev() && !contains(client.url, '.onesignal.com') ||\n          Environment.isStaging() && !contains(client.url, STAGING_FRAME_HOST)) {\n          continue;\n        }\n        // Indicates this window client is an HTTP subdomain iFrame\n        (client as any).isSubdomainIframe = true;\n      }\n      activeClients.push(client);\n    }\n\n    return activeClients;\n  }\n\n  /**\n   * Constructs a structured notification object from the raw notification fetched from OneSignal's server. This\n   * object is passed around from event to event, and is also returned to the host page for notification event details.\n   * Constructed in onPushReceived, and passed along to other event handlers.\n   * @param rawNotification The raw notification JSON returned from OneSignal's server.\n   */\n  static buildStructuredNotificationObject(rawNotification) {\n    let notification: any = {\n      id: rawNotification.custom.i,\n      heading: rawNotification.title,\n      content: rawNotification.alert,\n      data: rawNotification.custom.a,\n      url: rawNotification.custom.u,\n      icon: rawNotification.icon\n    };\n\n    // Add action buttons\n    if (rawNotification.o) {\n      notification.buttons = [];\n      for (let rawButton of rawNotification.o) {\n        notification.buttons.push({\n                                    action: rawButton.i,\n                                    title: rawButton.n,\n                                    icon: rawButton.p,\n                                    url: rawButton.u\n                                  });\n      }\n    }\n    return trimUndefined(notification);\n  }\n\n  /**\n   * Given an image URL, returns a proxied HTTPS image using the https://images.weserv.nl service.\n   * For a null image, returns null so that no icon is displayed.\n   * If the image protocol is HTTPS, or origin contains localhost or starts with 192.168.*.*, we do not proxy the image.\n   * @param imageUrl An HTTP or HTTPS image URL.\n   */\n  static ensureImageResourceHttps(imageUrl) {\n    if (imageUrl) {\n      try {\n        let parsedImageUrl = new URL(imageUrl);\n        if (parsedImageUrl.hostname === 'localhost' ||\n            parsedImageUrl.hostname.indexOf('192.168') !== -1 ||\n            parsedImageUrl.hostname === '127.0.0.1' ||\n            parsedImageUrl.protocol === 'https:') {\n          return imageUrl;\n        }\n        if (parsedImageUrl.hostname === 'i0.wp.com' ||\n            parsedImageUrl.hostname === 'i1.wp.com' ||\n            parsedImageUrl.hostname === 'i2.wp.com' ||\n            parsedImageUrl.hostname === 'i3.wp.com') {\n          /* Their site already uses Jetpack, just make sure Jetpack is HTTPS */\n          return `https://${parsedImageUrl.hostname}${parsedImageUrl.pathname}`\n        }\n        /* HTTPS origin hosts can be used by prefixing the hostname with ssl: */\n        let replacedImageUrl = parsedImageUrl.host + parsedImageUrl.pathname;\n        return `https://i0.wp.com/${replacedImageUrl}`;\n      } catch (e) { }\n    } else return null;\n  }\n\n  /**\n   * Given a structured notification object, HTTPS-ifies the notification icon and action button icons, if they exist.\n   */\n  static ensureNotificationResourcesHttps(notification) {\n    if (notification) {\n      if (notification.icon) {\n        notification.icon = ServiceWorker.ensureImageResourceHttps(notification.icon);\n      }\n      if (notification.buttons && notification.buttons.length > 0) {\n        for (let button of notification.buttons) {\n          if (button.icon) {\n            button.icon = ServiceWorker.ensureImageResourceHttps(button.icon);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Actually displays a visible notification to the user.\n   * Any event needing to display a notification calls this so that all the display options can be centralized here.\n   * @param notification A structured notification object.\n   */\n  static displayNotification(notification, overrides?) {\n    log.debug(`Called %cdisplayNotification(${JSON.stringify(notification, null, 4)}):`, getConsoleStyle('code'), notification);\n    return Promise.all([\n          // Use the default title if one isn't provided\n          ServiceWorker._getTitle(),\n          // Use the default icon if one isn't provided\n          Database.get('Options', 'defaultIcon'),\n          // Get option of whether we should leave notification displaying indefinitely\n          Database.get('Options', 'persistNotification'),\n          // Get app ID for tag value\n          Database.get('Ids', 'appId')\n        ])\n        .then(([defaultTitle, defaultIcon, persistNotification, appId]) => {\n          notification.heading = notification.heading ? notification.heading : defaultTitle;\n          notification.icon = notification.icon ? notification.icon : (defaultIcon ? defaultIcon : undefined);\n          var extra: any = {};\n          extra.tag = `${appId}`;\n          extra.persistNotification = persistNotification;\n\n          // Allow overriding some values\n          if (!overrides)\n            overrides = {};\n          notification = objectAssign(notification, overrides);\n\n          ServiceWorker.ensureNotificationResourcesHttps(notification);\n\n          let notificationOptions = {\n            body: notification.content,\n            icon: notification.icon,\n            /*\n             On Chrome 44+, use this property to store extra information which you can read back when the\n             notification gets invoked from a notification click or dismissed event. We serialize the\n             notification in the 'data' field and read it back in other events. See:\n             https://developers.google.com/web/updates/2015/05/notifying-you-of-changes-to-notifications?hl=en\n             */\n            data: notification,\n            /*\n             On Chrome 48+, action buttons show below the message body of the notification. Clicking either\n             button takes the user to a link. See:\n             https://developers.google.com/web/updates/2016/01/notification-actions\n             */\n            actions: notification.buttons,\n            /*\n             Tags are any string value that groups notifications together. Two or notifications sharing a tag\n             replace each other.\n             */\n            tag: extra.tag,\n            /*\n             On Chrome 47+ (desktop), notifications will be dismissed after 20 seconds unless requireInteraction\n             is set to true. See:\n             https://developers.google.com/web/updates/2015/10/notification-requireInteractiom\n             */\n            requireInteraction: extra.persistNotification,\n            /*\n             On Chrome 50+, by default notifications replacing identically-tagged notifications no longer\n             vibrate/signal the user that a new notification has come in. This flag allows subsequent\n             notifications to re-alert the user. See:\n             https://developers.google.com/web/updates/2016/03/notifications\n             */\n            renotify: true\n          };\n          return self.registration.showNotification(notification.heading, notificationOptions)\n        });\n  }\n\n  /**\n   * Stores the most recent notification into IndexedDB so that it can be shown as a backup if a notification fails\n   * to be displayed. This is to avoid Chrome's forced \"This site has been updated in the background\" message. See\n   * this post for more details: http://stackoverflow.com/a/35045513/555547.\n   * This is called every time is a push message is received so that the most recent message can be used as the\n   * backup notification.\n   * @param notification The most recent notification as a structured notification object.\n   */\n  static async updateBackupNotification(notification): Promise<void> {\n    let isWelcomeNotification = notification.data && notification.data.__isOneSignalWelcomeNotification;\n    // Don't save the welcome notification, that just looks broken\n    if (isWelcomeNotification)\n      return;\n    await Database.put('Ids', {type: 'backupNotification', id: notification});\n  }\n\n  /**\n   * Displays a fail-safe notification during a push event in case notification contents could not be retrieved.\n   * This is to avoid Chrome's forced \"This site has been updated in the background\" message. See this post for\n   * more details: http://stackoverflow.com/a/35045513/555547.\n   */\n  static displayBackupNotification() {\n    return Database.get('Ids', 'backupNotification')\n        .then(backupNotification => {\n          let overrides = {\n            // Don't persist our backup notification; users should ideally not see them\n            persistNotification: false,\n            data: {__isOneSignalBackupNotification: true}\n          };\n          if (backupNotification) {\n            return ServiceWorker.displayNotification(backupNotification, overrides);\n          } else {\n            return ServiceWorker.displayNotification({\n              content: 'You have new updates.'\n            }, overrides);\n          }\n        });\n  }\n\n  /**\n   * Returns false if the given URL matches a few special URLs designed to skip opening a URL when clicking a\n   * notification. Otherwise returns true and the link will be opened.\n   * @param url\n     */\n  static shouldOpenNotificationUrl(url) {\n    return (url !== 'javascript:void(0);' &&\n            url !== 'do_not_open' &&\n            !contains(url, '_osp=do_not_open'));\n  }\n\n  /**\n   * Occurs when a notification is dismissed by the user (clicking the 'X') or all notifications are cleared.\n   * Supported on: Chrome 50+ only\n   */\n  static onNotificationClosed(event) {\n    log.debug(`Called %conNotificationClosed(${JSON.stringify(event, null, 4)}):`, getConsoleStyle('code'), event);\n    let notification = event.notification.data;\n\n    (swivel as any).broadcast('notification.dismissed', notification);\n    event.waitUntil(\n        ServiceWorker.executeWebhooks('notification.dismissed', notification)\n    );\n  }\n\n  /**\n   * After clicking a notification, determines the URL to open based on whether an action button was clicked or the\n   * notification body was clicked.\n   */\n  static async getNotificationUrlToOpen(notification): Promise<string> {\n    // Defaults to the URL the service worker was registered\n    // TODO: This should be fixed for HTTP sites\n    let launchUrl = self.registration.scope;\n\n    // Use the user-provided default URL if one exists\n    const { defaultNotificationUrl: dbDefaultNotificationUrl } = await Database.getAppState();\n    if (dbDefaultNotificationUrl)\n      launchUrl = dbDefaultNotificationUrl;\n\n    // If the user clicked an action button, use the URL provided by the action button\n    // Unless the action button URL is null\n    if (notification.action) {\n      // Find the URL tied to the action button that was clicked\n      for (let button of notification.buttons) {\n        if (button.action === notification.action &&\n            button.url &&\n            button.url !== '') {\n          launchUrl = button.url;\n        }\n      }\n    } else if (notification.url &&\n               notification.url !== '') {\n      // The user clicked the notification body instead of an action button\n      launchUrl = notification.url;\n    }\n\n    return launchUrl;\n  }\n\n  /**\n   * Occurs when the notification's body or action buttons are clicked. Does not occur if the notification is\n   * dismissed by clicking the 'X' icon. See the notification close event for the dismissal event.\n   */\n  static async onNotificationClicked(event) {\n    log.debug(`Called %conNotificationClicked(${JSON.stringify(event, null, 4)}):`, getConsoleStyle('code'), event);\n\n    // Close the notification first here, before we do anything that might fail\n    event.notification.close();\n\n    const notification = event.notification.data;\n\n    // Chrome 48+: Get the action button that was clicked\n    if (event.action)\n      notification.action = event.action;\n\n    let notificationClickHandlerMatch = 'exact';\n\n    const matchPreference = await Database.get<string>('Options', 'notificationClickHandlerMatch');\n    if (matchPreference)\n      notificationClickHandlerMatch = matchPreference;\n\n    const activeClients = await ServiceWorker.getActiveClients();\n\n    let launchUrl = await ServiceWorker.getNotificationUrlToOpen(notification);\n    let notificationOpensLink = ServiceWorker.shouldOpenNotificationUrl(launchUrl);\n\n    /*\n     Check if we can focus on an existing tab instead of opening a new url.\n     If an existing tab with exactly the same URL already exists, then this existing tab is focused instead of\n     an identical new tab being created. With a special setting, any existing tab matching the origin will\n     be focused instead of an identical new tab being created.\n     */\n    let doNotOpenLink = false;\n    for (let client of activeClients) {\n      let clientUrl = client.url;\n      if ((client as any).isSubdomainIframe) {\n        const lastKnownHostUrl = await Database.get<string>('Options', 'lastKnownHostUrl');\n        clientUrl = lastKnownHostUrl;\n        if (!lastKnownHostUrl) {\n          clientUrl = await Database.get<string>('Options', 'defaultUrl');\n        }\n      }\n      let clientOrigin = '';\n      try {\n        clientOrigin = new URL(clientUrl).origin;\n      } catch (e) {\n        log.error(`Failed to get the HTTP site's actual origin:`, e);\n      }\n      let launchOrigin = null;\n      try {\n        // Check if the launchUrl is valid; it can be null\n        launchOrigin = new URL(launchUrl).origin;\n      } catch (e) {\n      }\n\n      if ((notificationClickHandlerMatch === 'exact' && clientUrl === launchUrl) ||\n        (notificationClickHandlerMatch === 'origin' && clientOrigin === launchOrigin)) {\n        (client as any).focus();\n        (swivel as any).emit(client.id, 'notification.clicked', notification);\n        doNotOpenLink = true;\n      }\n    }\n\n    await Database.put(\"NotificationOpened\", { url: launchUrl, data: notification, timestamp: Date.now() });\n    if (notificationOpensLink && !doNotOpenLink) {\n      await ServiceWorker.openUrl(launchUrl);\n    }\n\n    const { appId } = await Database.getAppConfig();\n    const { deviceId } = await Database.getSubscription();\n    if (appId && deviceId) {\n      return await OneSignalApi.put('notifications/' + notification.id, {\n        app_id: appId,\n        player_id: deviceId,\n        opened: true\n      });\n    }\n    return await ServiceWorker.executeWebhooks('notification.clicked', notification);\n  }\n\n  /**\n   * Attempts to open the given url in a new browser tab. Called when a notification is clicked.\n   * @param url May not be well-formed.\n   */\n  static async openUrl(url): Promise<WindowClient> {\n    log.debug('Opening notification URL:', url);\n    try {\n      return await self.clients.openWindow(url);\n    } catch (e) {\n      log.warn(`Failed to open the URL '${url}':`, e);\n    }\n  }\n\n  static onServiceWorkerInstalled(event) {\n    // At this point, the old service worker is still in control\n    log.debug(`Called %conServiceWorkerInstalled(${JSON.stringify(event, null, 4)}):`, getConsoleStyle('code'), event);\n    log.info(`Installing service worker: %c${(self as any).location.pathname}`, getConsoleStyle('code'), `(version ${__VERSION__})`);\n\n    if (contains((self as any).location.pathname, \"OneSignalSDKWorker.js\"))\n      var serviceWorkerVersionType = 'WORKER1_ONE_SIGNAL_SW_VERSION';\n    else\n      var serviceWorkerVersionType = 'WORKER2_ONE_SIGNAL_SW_VERSION';\n\n\n    event.waitUntil(\n        Database.put(\"Ids\", {type: serviceWorkerVersionType, id: __VERSION__})\n            .then(() => self.skipWaiting())\n    );\n  }\n\n  /*\n   1/11/16: Enable the waiting service worker to immediately become the active service worker: https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting\n   */\n  static onServiceWorkerActivated(event) {\n    // The old service worker is gone now\n    log.debug(`Called %conServiceWorkerActivated(${JSON.stringify(event, null, 4)}):`, getConsoleStyle('code'), event);\n    var activationPromise = self.clients.claim()\n                                        .then(() => Database.get('Ids', 'userId'))\n                                        .then(userId => {\n                                          if (self.registration && userId) {\n                                            return ServiceWorker._subscribeForPush(self.registration).catch(e => log.error(e));\n                                          }\n                                        });\n    event.waitUntil(activationPromise);\n  }\n\n  static onFetch(event) {\n    event.respondWith(fetch(event.request));\n  }\n\n  static onPushSubscriptionChange(event) {\n    // Subscription expired\n    log.debug(`Called %conPushSubscriptionChange(${JSON.stringify(event, null, 4)}):`, getConsoleStyle('code'), event);\n    event.waitUntil(ServiceWorker._subscribeForPush(self.registration));\n  }\n\n  /**\n   * Simulates a service worker event.\n   * @param eventName An event name like 'pushsubscriptionchange'.\n   */\n  static simulateEvent(eventName) {\n    (self as any).dispatchEvent(new ExtendableEvent(eventName));\n  }\n\n  static _subscribeForPush(serviceWorkerRegistration) {\n    log.debug(`Called %c_subscribeForPush()`, getConsoleStyle('code'));\n\n    var appId = null;\n    return Database.get('Ids', 'appId')\n        .then(retrievedAppId => {\n          appId = retrievedAppId;\n          return serviceWorkerRegistration.pushManager.getSubscription()\n        }).then(oldSubscription => {\n          log.debug(`Resubscribing old subscription`, oldSubscription, `within the service worker ...`);\n          // Only re-subscribe if there was an existing subscription and we are on Chrome 54+ wth PushSubscriptionOptions\n          // Otherwise there's really no way to resubscribe since we don't have the manifest.json sender ID\n          if (oldSubscription && oldSubscription.options) {\n            return serviceWorkerRegistration.pushManager.subscribe(oldSubscription.options);\n          } else {\n            return Promise.resolve();\n          }\n        }).then(subscription => {\n          var subscriptionInfo: any = null;\n          if (subscription) {\n            subscriptionInfo = {};\n            log.debug(`Finished resubscribing for push:`, subscription);\n            if (typeof subscription.subscriptionId != \"undefined\") {\n              // Chrome 43 & 42\n              subscriptionInfo.endpointOrToken = subscription.subscriptionId;\n            }\n            else {\n              // Chrome 44+ and FireFox\n              // 4/13/16: We now store the full endpoint instead of just the registration token\n              subscriptionInfo.endpointOrToken = subscription.endpoint;\n            }\n\n            // 4/13/16: Retrieve p256dh and auth for new encrypted web push protocol in Chrome 50\n            if (subscription.getKey) {\n              // p256dh and auth are both ArrayBuffer\n              let p256dh = null;\n              try {\n                p256dh = subscription.getKey('p256dh');\n              } catch (e) {\n                // User is most likely running < Chrome < 50\n              }\n              let auth = null;\n              try {\n                auth = subscription.getKey('auth');\n              } catch (e) {\n                // User is most likely running < Firefox 45\n              }\n\n              if (p256dh) {\n                // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\n                let p256dh_base64encoded = btoa(\n                  String.fromCharCode.apply(null, new Uint8Array(p256dh)));\n                subscriptionInfo.p256dh = p256dh_base64encoded;\n              }\n              if (auth) {\n                // Base64 encode the ArrayBuffer (not URL-Safe, using standard Base64)\n                let auth_base64encoded = btoa(\n                  String.fromCharCode.apply(null, new Uint8Array(auth)));\n                subscriptionInfo.auth = auth_base64encoded;\n              }\n            }\n          }\n          else {\n            log.info('Could not subscribe your browser for push notifications.');\n          }\n\n          return ServiceWorker.registerWithOneSignal(appId, subscriptionInfo);\n        });\n  }\n\n  /**\n   * Creates a new or updates an existing OneSignal user (player) on the server.\n   *\n   * @param appId The app ID passed to init.\n   *        subscriptionInfo A hash containing 'endpointOrToken', 'auth', and 'p256dh'.\n   *\n   * @remarks Called from both the host page and HTTP popup.\n   *          If a user already exists and is subscribed, updates the session count by calling /players/:id/on_session; otherwise, a new player is registered via the /players endpoint.\n   *          Saves the user ID and registration ID to the local web database after the response from OneSignal.\n   */\n  static registerWithOneSignal(appId, subscriptionInfo) {\n    let deviceType = getDeviceTypeForBrowser();\n    return Promise.all([\n      Database.get('Ids', 'userId'),\n    ])\n        .then(([userId, subscription]) => {\n          if (!userId) {\n            return Promise.reject('No user ID found; cannot update existing player info');\n          }\n          let requestUrl = `players/${userId}`;\n\n          let requestData: any = {\n            app_id: appId,\n            device_type: deviceType,\n            language: Environment.getLanguage(),\n            timezone: new Date().getTimezoneOffset() * -60,\n            device_model: navigator.platform + \" \" + Browser.name,\n            device_os: Browser.version,\n            sdk: ServiceWorker.VERSION,\n          };\n\n          if (subscriptionInfo) {\n            requestData.identifier = subscriptionInfo.endpointOrToken;\n            // Although we're passing the full endpoint to OneSignal, we still need to store only the registration ID for our SDK API getRegistrationId()\n            // Parse out the registration ID from the full endpoint URL and save it to our database\n            let registrationId = subscriptionInfo.endpointOrToken.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\");\n            Database.put(\"Ids\", {type: \"registrationId\", id: registrationId});\n            // New web push standard in Firefox 46+ and Chrome 50+ includes 'auth' and 'p256dh' in PushSubscription\n            if (subscriptionInfo.auth) {\n              requestData.web_auth = subscriptionInfo.auth;\n            }\n            if (subscriptionInfo.p256dh) {\n              requestData.web_p256 = subscriptionInfo.p256dh;\n            }\n          }\n\n          return OneSignalApi.put(requestUrl, requestData);\n        })\n        .then((response: any) => {\n          if (response) {\n            if (!response.success) {\n              log.error('Resubscription registration with OneSignal failed:', response);\n            }\n            let { id: userId } = response;\n\n            if (userId) {\n              Database.put(\"Ids\", { type: \"userId\", id: userId });\n            }\n          } else {\n            // No user ID found, this returns undefined\n            log.debug('Resubscription registration failed because no user ID found.');\n          }\n        });\n  }\n\n  /**\n   * Returns a promise that is fulfilled with either the default title from the database (first priority) or the page title from the database (alternate result).\n   */\n  static _getTitle() {\n    return new Promise((resolve, reject) => {\n      Promise.all([Database.get('Options', 'defaultTitle'), Database.get('Options', 'pageTitle')])\n        .then(([defaultTitle, pageTitle]) => {\n          if (defaultTitle !== null) {\n            resolve(defaultTitle);\n          }\n          else if (pageTitle != null) {\n            resolve(pageTitle);\n          }\n          else {\n            resolve('');\n          }\n        });\n    });\n  }\n\n  /**\n   * Returns an array of raw notification objects, either fetched from the server (as from legacy GCM push), or read\n   * from the event.data.payload property (as from the new web push protocol).\n   * @param event\n   * @returns An array of notifications. The new web push protocol will only ever contain one notification, however\n   * an array is returned for backwards compatibility with the rest of the service worker plumbing.\n     */\n  static parseOrFetchNotifications(event) {\n    if (event.data) {\n      const isValidPayload = ServiceWorker.isValidPushPayload(event.data);\n      if (isValidPayload) {\n        log.debug('Received a valid encrypted push payload.');\n        return Promise.resolve([event.data.json()]);\n      } else {\n        return Promise.reject('Unexpected push message payload received: ' + event.data.text());\n        /*\n         We received a push message payload from another service provider or a malformed\n         payload. The last received notification will be displayed.\n         */\n      }\n    }\n    else return ServiceWorker.retrieveNotifications();\n  }\n\n  /**\n   * Returns true if the raw data payload is a OneSignal push message in the format of the new web push protocol.\n   * Otherwise returns false.\n   * @param rawData The raw PushMessageData from the push event's event.data, not already parsed to JSON.\n   */\n  static isValidPushPayload(rawData) {\n    try {\n      const payload = rawData.json();\n      if (payload &&\n          payload.custom &&\n          payload.custom.i &&\n          isValidUuid(payload.custom.i)) {\n        return true;\n      } else {\n        log.debug('isValidPushPayload: Valid JSON but missing notification UUID:', payload);\n        return false;\n      }\n    } catch (e) {\n      log.debug('isValidPushPayload: Parsing to JSON failed with:', e);\n      return false;\n    }\n  }\n\n  /**\n   * Retrieves unread notifications from OneSignal's servers. For Chrome and Firefox's legacy web push protocol,\n   * a push signal is sent to the service worker without any message contents, and the service worker must retrieve\n   * the contents from OneSignal's servers. In Chrome and Firefox's new web push protocols involving payloads, the\n   * notification contents will arrive with the push signal. The legacy format must be supported for a while.\n   */\n  static retrieveNotifications() {\n    return new Promise((resolve, reject) => {\n      var notifications = [];\n      // Each entry is like:\n      /*\n       Object {custom: Object, icon: \"https://onesignal.com/images/notification_logo.png\", alert: \"asd\", title: \"ss\"}\n       alert: \"asd\"\n       custom: Object\n       i: \"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"\n       __proto__: Object\n       icon: \"https://onesignal.com/images/notification_logo.png\"\n       title: \"ss\"\n       __proto__: Object\n       */\n      Database.get('Ids', 'userId')\n        .then(userId => {\n          if (userId) {\n            log.debug(`Legacy push signal received, retrieving contents from players/${userId}/chromeweb_notification`);\n            return OneSignalApi.get(`players/${userId}/chromeweb_notification`);\n          }\n          else {\n            log.debug('Tried to get notification contents, but IndexedDB is missing user ID info.');\n            return Promise.all([\n                    Database.get('Ids', 'appId'),\n                    self.registration.pushManager.getSubscription().then(subscription => subscription.endpoint)\n                  ])\n                .then(([appId, identifier]) => {\n                  let deviceType = getDeviceTypeForBrowser();\n                  // Get the user ID from OneSignal\n                  return OneSignalApi.getUserIdFromSubscriptionIdentifier(appId, deviceType, identifier).then(recoveredUserId => {\n                    if (recoveredUserId) {\n                      log.debug('Recovered OneSignal user ID:', recoveredUserId);\n                      // We now have our OneSignal user ID again\n                      return Promise.all([\n                        Database.put('Ids', {type: 'userId', id: recoveredUserId}),\n                        Database.put('Ids', {\n                          type: 'registrationId',\n                          id: identifier.replace(new RegExp(\"^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)\"), \"\")\n                        }),\n                      ]).then(() => {\n                        // Try getting the notification again\n                        log.debug('Attempting to retrieve the notification again now with a recovered user ID.');\n                        return OneSignalApi.get(`players/${recoveredUserId}/chromeweb_notification`);\n                      });\n                    } else {\n                      return Promise.reject('Recovered user ID was null. Unsubscribing from push notifications.');\n                    }\n                  });\n                })\n                .catch(error => {\n                  log.debug('Unsuccessfully attempted to recover OneSignal user ID:', error);\n                  // Actually unsubscribe from push so this user doesn't get bothered again\n                  return self.registration.pushManager.getSubscription()\n                      .then(subscription => {\n                        return subscription.unsubscribe()\n                      })\n                      .then (unsubscriptionResult => {\n                        log.debug('Unsubscribed from push notifications result:', unsubscriptionResult);\n                        ServiceWorker.UNSUBSCRIBED_FROM_NOTIFICATIONS = true;\n                      });\n                });\n          }\n        })\n        .then((response: any) => {\n          // The response is an array literal -- response.json() has been called by apiCall()\n          // The result looks like this:\n          // OneSignalApi.get('players/7442a553-5f61-4b3e-aedd-bb574ef6946f/chromeweb_notification').then(function(response) { log.debug(response); });\n          // [\"{\"custom\":{\"i\":\"6d7ec82f-bc56-494f-b73a-3a3b48baa2d8\"},\"icon\":\"https://onesignal.com/images/notification_logo.png\",\"alert\":\"asd\",\"title\":\"ss\"}\"]\n          // ^ Notice this is an array literal with JSON data inside\n          for (var i = 0; i < response.length; i++) {\n            notifications.push(JSON.parse(response[i]));\n          }\n          if (notifications.length == 0) {\n            log.warn('OneSignal Worker: Received a GCM push signal, but there were no messages to retrieve. Are you' +\n                ' using the wrong API URL?', API_URL);\n          }\n          resolve(notifications);\n        });\n    });\n  }\n}\n\n// Expose this class to the global scope\n(self as any).OneSignalWorker = ServiceWorker;\n\n// Set logging to the appropriate level\nlog.setDefaultLevel(__DEV__ ? (log as any).levels.TRACE : (log as any).levels.ERROR);\n\n// Print it's happy time!\nlog.info(`%cOneSignal Service Worker loaded (version ${__VERSION__}, ${Environment.getEnv()} environment).`, getConsoleStyle('bold'));\n\n// Run our main file\nServiceWorker.run();\n\n\n/** WEBPACK FOOTER **\n ** ./src/service-worker/ServiceWorker.ts\n **/","export interface ValidatorOptions {\r\n  allowNull?: boolean;\r\n  allowEmpty?: boolean;\r\n  /**\r\n   * For validating URLs, requires that the URL begins with https://.\r\n   */\r\n  requireHttps?: boolean;\r\n}\r\n\r\nexport class ValidatorUtils {\r\n  static isValidUrl(url: any, options?: ValidatorOptions) {\r\n    if (options && options.allowNull && url === null)\r\n        return true;\r\n    else if (options && options.allowEmpty && (url === null || url === undefined))\r\n      return true;\r\n    else {\r\n      try {\r\n        const parsedUrl = new URL(url);\r\n        if (options && options.requireHttps) {\r\n          return parsedUrl.protocol === 'https:';\r\n        } else\r\n          return true;\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n\r\n  static isValidBoolean(bool: any, options?: ValidatorOptions) {\r\n    if (options && options.allowNull && bool === null)\r\n      return true;\r\n    else\r\n      return bool === true || bool === false;\r\n  }\r\n\r\n  static isValidArray(array: any, options?: ValidatorOptions) {\r\n    if (options && options.allowNull && array === null)\r\n      return true;\r\n    else if (options && options.allowEmpty && (array === null || array === undefined))\r\n      return true;\r\n    else\r\n      return array instanceof Array;\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/ValidatorUtils.ts\n **/","'use strict';\n\nvar ticky = require('ticky');\n\nmodule.exports = function debounce (fn, args, ctx) {\n  if (!fn) { return; }\n  ticky(function run () {\n    fn.apply(ctx || null, args || []);\n  });\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/contra/debounce.js\n ** module id = 60\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"/*!\\n* CleanSlate\\n*   github.com/premasagar/cleanslate\\n*\\n*/.onesignal-reset,.onesignal-reset a,.onesignal-reset abbr,.onesignal-reset acronym,.onesignal-reset address,.onesignal-reset applet,.onesignal-reset area,.onesignal-reset article,.onesignal-reset aside,.onesignal-reset audio,.onesignal-reset b,.onesignal-reset big,.onesignal-reset blockquote,.onesignal-reset button,.onesignal-reset canvas,.onesignal-reset caption,.onesignal-reset cite,.onesignal-reset code,.onesignal-reset col,.onesignal-reset colgroup,.onesignal-reset datalist,.onesignal-reset dd,.onesignal-reset del,.onesignal-reset dfn,.onesignal-reset div,.onesignal-reset dl,.onesignal-reset dt,.onesignal-reset em,.onesignal-reset fieldset,.onesignal-reset figcaption,.onesignal-reset figure,.onesignal-reset footer,.onesignal-reset form,.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6,.onesignal-reset header,.onesignal-reset hr,.onesignal-reset i,.onesignal-reset iframe,.onesignal-reset img,.onesignal-reset input,.onesignal-reset ins,.onesignal-reset kbd,.onesignal-reset label,.onesignal-reset legend,.onesignal-reset li,.onesignal-reset main,.onesignal-reset map,.onesignal-reset mark,.onesignal-reset menu,.onesignal-reset meta,.onesignal-reset nav,.onesignal-reset object,.onesignal-reset ol,.onesignal-reset optgroup,.onesignal-reset option,.onesignal-reset output,.onesignal-reset p,.onesignal-reset pre,.onesignal-reset progress,.onesignal-reset q,.onesignal-reset samp,.onesignal-reset section,.onesignal-reset select,.onesignal-reset small,.onesignal-reset span,.onesignal-reset strike,.onesignal-reset strong,.onesignal-reset sub,.onesignal-reset summary,.onesignal-reset sup,.onesignal-reset table,.onesignal-reset tbody,.onesignal-reset td,.onesignal-reset textarea,.onesignal-reset tfoot,.onesignal-reset th,.onesignal-reset thead,.onesignal-reset time,.onesignal-reset tr,.onesignal-reset tt,.onesignal-reset ul,.onesignal-reset var,.onesignal-reset video{background-attachment:scroll;background-color:transparent;background-image:none;background-position:0 0;background-repeat:repeat;border-color:#000;border:medium none currentColor;bottom:auto;clear:none;clip:auto;color:inherit;counter-increment:none;counter-reset:none;cursor:auto;direction:inherit;display:inline;float:none;font-family:inherit;font-size:inherit;font-style:inherit;font-variant:normal;font-weight:inherit;height:auto;left:auto;letter-spacing:normal;line-height:inherit;list-style-type:inherit;list-style-position:outside;list-style-image:none;margin:0;max-height:none;max-width:none;min-height:0;min-width:0;opacity:1;outline:medium none invert;overflow:visible;padding:0;position:static;quotes:\\\"\\\" \\\"\\\";right:auto;table-layout:auto;text-align:inherit;text-decoration:inherit;text-indent:0;text-transform:none;top:auto;unicode-bidi:normal;vertical-align:baseline;visibility:inherit;white-space:normal;width:auto;word-spacing:normal;z-index:auto;background-origin:padding-box;background-clip:border-box;background-size:auto;-o-border-image:none;border-image:none;border-radius:0;box-shadow:none;box-sizing:content-box;-webkit-column-count:auto;-moz-column-count:auto;column-count:auto;-webkit-column-gap:normal;-moz-column-gap:normal;column-gap:normal;-webkit-column-rule:medium none #000;-moz-column-rule:medium none #000;column-rule:medium none #000;-webkit-column-span:1;-moz-column-span:1;column-span:1;-webkit-column-width:auto;-moz-column-width:auto;column-width:auto;-webkit-font-feature-settings:normal;font-feature-settings:normal;overflow-x:visible;overflow-y:visible;-webkit-hyphens:manual;-ms-hyphens:manual;hyphens:manual;-webkit-perspective:none;-ms-perspective:none;-o-perspective:none;perspective:none;-webkit-perspective-origin:50% 50%;-ms-perspective-origin:50% 50%;-o-perspective-origin:50% 50%;perspective-origin:50% 50%;-webkit-backface-visibility:visible;backface-visibility:visible;text-shadow:none;-webkit-transition:all 0s ease 0s;transition:all 0s ease 0s;-webkit-transform:none;transform:none;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-transform-style:flat;transform-style:flat;word-break:normal}.onesignal-reset,.onesignal-reset address,.onesignal-reset article,.onesignal-reset audio,.onesignal-reset blockquote,.onesignal-reset caption,.onesignal-reset colgroup,.onesignal-reset dd,.onesignal-reset dialog,.onesignal-reset div,.onesignal-reset dl,.onesignal-reset dt,.onesignal-reset fieldset,.onesignal-reset figure,.onesignal-reset footer,.onesignal-reset form,.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6,.onesignal-reset header,.onesignal-reset hgroup,.onesignal-reset hr,.onesignal-reset main,.onesignal-reset menu,.onesignal-reset nav,.onesignal-reset ol,.onesignal-reset option,.onesignal-reset p,.onesignal-reset pre,.onesignal-reset progress,.onesignal-reset section,.onesignal-reset summary,.onesignal-reset ul,.onesignal-reset video{display:block}.onesignal-reset h1,.onesignal-reset h2,.onesignal-reset h3,.onesignal-reset h4,.onesignal-reset h5,.onesignal-reset h6{font-weight:700}.onesignal-reset h1{font-size:2em;padding:.67em 0}.onesignal-reset h2{font-size:1.5em;padding:.83em 0}.onesignal-reset h3{font-size:1.17em;padding:.83em 0}.onesignal-reset h4{font-size:1em}.onesignal-reset h5{font-size:.83em}.onesignal-reset p{margin:1em 0}.onesignal-reset table{display:table}.onesignal-reset thead{display:table-header-group}.onesignal-reset tbody{display:table-row-group}.onesignal-reset tfoot{display:table-footer-group}.onesignal-reset tr{display:table-row}.onesignal-reset td,.onesignal-reset th{display:table-cell;padding:2px}.onesignal-reset ol,.onesignal-reset ul{margin:1em 0}.onesignal-reset ol li,.onesignal-reset ol ol li,.onesignal-reset ol ol ol li,.onesignal-reset ol ol ul li,.onesignal-reset ol ul ul li,.onesignal-reset ul li,.onesignal-reset ul ol ol li,.onesignal-reset ul ul li,.onesignal-reset ul ul ol li,.onesignal-reset ul ul ul li{list-style-position:inside;margin-top:.08em}.onesignal-reset ol ol,.onesignal-reset ol ol ol,.onesignal-reset ol ol ul,.onesignal-reset ol ul,.onesignal-reset ol ul ul,.onesignal-reset ul ol,.onesignal-reset ul ol ol,.onesignal-reset ul ul,.onesignal-reset ul ul ol,.onesignal-reset ul ul ul{padding-left:40px;margin:0}.onesignal-reset nav ol,.onesignal-reset nav ul{list-style-type:none}.onesignal-reset menu,.onesignal-reset ul{list-style-type:disc}.onesignal-reset ol{list-style-type:decimal}.onesignal-reset menu menu,.onesignal-reset menu ul,.onesignal-reset ol menu,.onesignal-reset ol ul,.onesignal-reset ul menu,.onesignal-reset ul ul{list-style-type:circle}.onesignal-reset menu menu menu,.onesignal-reset menu menu ul,.onesignal-reset menu ol menu,.onesignal-reset menu ol ul,.onesignal-reset menu ul menu,.onesignal-reset menu ul ul,.onesignal-reset ol menu menu,.onesignal-reset ol menu ul,.onesignal-reset ol ol menu,.onesignal-reset ol ol ul,.onesignal-reset ol ul menu,.onesignal-reset ol ul ul,.onesignal-reset ul menu menu,.onesignal-reset ul menu ul,.onesignal-reset ul ol menu,.onesignal-reset ul ol ul,.onesignal-reset ul ul menu,.onesignal-reset ul ul ul{list-style-type:square}.onesignal-reset li{display:list-item;min-height:auto;min-width:auto;padding-left:20px}.onesignal-reset strong{font-weight:700}.onesignal-reset em{font-style:italic}.onesignal-reset code,.onesignal-reset kbd,.onesignal-reset pre,.onesignal-reset samp{font-family:monospace}.onesignal-reset a{color:blue;text-decoration:underline}.onesignal-reset a:visited{color:#529}.onesignal-reset a,.onesignal-reset a *,.onesignal-reset input[type=checkbox],.onesignal-reset input[type=radio],.onesignal-reset input[type=submit],.onesignal-reset select{cursor:pointer}.onesignal-reset button,.onesignal-reset input[type=submit]{text-align:center;padding:2px 6px 3px;border-radius:4px;text-decoration:none;font-family:arial,helvetica,sans-serif;font-size:small;-webkit-appearance:push-button;color:buttontext;border:1px solid #a6a6a6;background:#d3d3d3;background:#fff;background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fff),color-stop(100%,#ddd),color-stop(100%,#d1d1d1),color-stop(100%,#ddd));background:-webkit-linear-gradient(top,#fff,#ddd 100%,#d1d1d1 0,#ddd 0);background:linear-gradient(180deg,#fff 0,#ddd 100%,#d1d1d1 0,#ddd 0);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff',endColorstr='#dddddd',GradientType=0);-o-box-shadow:1px 1px 0 #eee;box-shadow:1px 1px 0 #eee;outline:initial}.onesignal-reset button{padding:1px 6px 2px;margin-right:5px}.onesignal-reset input[type=hidden]{display:none}.onesignal-reset textarea{-webkit-appearance:textarea;background:#fff;padding:2px;margin-left:4px;word-wrap:break-word;white-space:pre-wrap;font-size:11px;font-family:arial,helvetica,sans-serif;line-height:13px;resize:both}.onesignal-reset input,.onesignal-reset select,.onesignal-reset textarea{border:1px solid #ccc}.onesignal-reset select{font-size:11px;font-family:helvetica,arial,sans-serif;display:inline-block}.onesignal-reset input:focus,.onesignal-reset textarea:focus{outline:5px auto -webkit-focus-ring-color;outline:initial}.onesignal-reset input[type=text]{background:#fff;padding:1px;font-family:initial;font-size:small}.onesignal-reset input[type=checkbox],.onesignal-reset input[type=radio]{border:1px solid #2b2b2b;border-radius:4px;outline:intial}.onesignal-reset input[type=radio]{margin:2px 2px 3px}.onesignal-reset button:active,.onesignal-reset input[type=submit]:active{background:#3b679e;background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#3b679e),color-stop(50%,#2b88d9),color-stop(51%,#207cca),color-stop(100%,#7db9e8));background:-webkit-linear-gradient(top,#3b679e,#2b88d9 50%,#207cca 51%,#7db9e8);background:linear-gradient(180deg,#3b679e 0,#2b88d9 50%,#207cca 51%,#7db9e8);border-color:#5259b0}.onesignal-reset abbr[title],.onesignal-reset acronym[title],.onesignal-reset dfn[title]{cursor:help;border-bottom-width:1px;border-bottom-style:dotted}.onesignal-reset ins{background-color:#ff9;color:#000}.onesignal-reset del{text-decoration:line-through}.onesignal-reset blockquote,.onesignal-reset q{quotes:none}.onesignal-reset blockquote:after,.onesignal-reset blockquote:before,.onesignal-reset li:after,.onesignal-reset li:before,.onesignal-reset q:after,.onesignal-reset q:before{content:\\\"\\\"}.onesignal-reset input,.onesignal-reset select{vertical-align:middle}.onesignal-reset table{border-collapse:collapse;border-spacing:0}.onesignal-reset hr{display:block;height:1px;border:0;border-top:1px solid #ccc;margin:1em 0}.onesignal-reset [dir=rtl]{direction:rtl}.onesignal-reset mark{background-color:#ff9;color:#000;font-style:italic;font-weight:700}.onesignal-reset menu{padding-left:40px;padding-top:8px}.onesignal-reset [hidden],.onesignal-reset template{display:none}.onesignal-reset abbr[title]{border-bottom:1px dotted}.onesignal-reset sub,.onesignal-reset sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.onesignal-reset sup{top:-.5em}.onesignal-reset sub{bottom:-.25em}.onesignal-reset img{border:0}.onesignal-reset figure{margin:0}.onesignal-reset textarea{overflow:auto;vertical-align:top}.onesignal-reset{font-size:medium;line-height:1;direction:ltr;text-align:left;text-align:start;font-family:Times New Roman,Times,serif;color:#000;font-style:normal;font-weight:400;text-decoration:none;list-style-type:disc}.onesignal-reset pre{white-space:pre}#onesignal-bell-container.onesignal-reset{z-index:2147483000;position:fixed}#onesignal-bell-container.onesignal-reset.onesignal-bell-container-bottom-left{bottom:0;left:0}#onesignal-bell-container.onesignal-reset.onesignal-bell-container-bottom-right{bottom:0;right:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-font-smoothing:initial;position:absolute;z-index:2147483000;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;-webkit-transform:scale(.01) translateZ(0);transform:scale(.01) translateZ(0);opacity:0;-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left{bottom:20px;left:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm{-webkit-transform-origin:center center;transform-origin:center center;width:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{left:42px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{bottom:39px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{left:5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{left:7px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md{-webkit-transform-origin:center center;transform-origin:center center;width:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-message{left:61px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{bottom:58px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{left:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{left:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg{-webkit-transform-origin:center center;transform-origin:center center;width:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{left:81px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{bottom:78px;left:0;-webkit-transform-origin:left bottom;transform-origin:left bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{left:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{left:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-badge{left:4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-message{-webkit-transform-origin:left center;transform-origin:left center}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-message:after{right:100%;border-right-color:#000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-left .onesignal-bell-launcher-button{left:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right{bottom:20px;right:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm{-webkit-transform-origin:center center;transform-origin:center center;width:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{right:42px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{bottom:39px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{right:5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{right:7px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md{-webkit-transform-origin:center center;transform-origin:center center;width:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-message{right:61px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{bottom:58px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{right:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{right:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg{-webkit-transform-origin:center center;transform-origin:center center;width:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{right:81px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{bottom:78px;right:0;-webkit-transform-origin:right bottom;transform-origin:right bottom}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{right:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{right:20px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-badge{right:4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-message{-webkit-transform-origin:right center;transform-origin:right center}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-message:after{left:100%;border-left-color:#000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-bottom-right .onesignal-bell-launcher-button{right:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button{position:absolute;bottom:0;border-radius:50%;-webkit-transition:border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,width 175ms ease-in-out,height 175ms ease-in-out,-webkit-transform 175ms ease-in-out;cursor:pointer;z-index:2147483000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button svg{width:100%;height:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-button.onesignal-bell-launcher-button-hover{cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge{position:absolute;bottom:0;border-radius:50%;text-align:center;top:0;cursor:pointer;-webkit-filter:drop-shadow(0 2px 4px rgba(34,36,38,0));filter:drop-shadow(0 2px 4px rgba(34,36,38,0));-webkit-transition:border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;transition:border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out;transition:transform 175ms ease-in-out,border 175ms ease-in-out,opacity .21s ease-in-out,width .21s ease-in-out,height .21s ease-in-out,position .21s ease-in-out,right .21s ease-in-out,top .21s ease-in-out,bottom .21s ease-in-out,left .21s ease-in-out,-webkit-transform 175ms ease-in-out;z-index:2147483400;opacity:0;-webkit-transform:scale(.01);transform:scale(.01);pointer-events:none}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge.onesignal-bell-launcher-badge-hover{cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-badge.onesignal-bell-launcher-badge-opened{opacity:1;-webkit-transform:scale(1);transform:scale(1)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message{position:absolute;color:#fff;background:#000;cursor:pointer;border-radius:5px;-webkit-transform:translateY(-50%) scaleX(0) translateZ(0);transform:translateY(-50%) scaleX(0) translateZ(0);opacity:0;pointer-events:none;-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;top:50%;z-index:2147481000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message:after{top:50%;border:solid transparent;content:\\\" \\\";height:0;width:0;position:absolute;pointer-events:none;border-color:transparent}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{z-index:2147482000;max-width:100%;white-space:nowrap;text-overflow:ellipsis}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-message.onesignal-bell-launcher-message-opened{pointer-events:auto;opacity:1;-webkit-transform:translateY(-50%) scaleX(1) translateZ(0);transform:translateY(-50%) scaleX(1) translateZ(0)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog{cursor:pointer;position:absolute;background-color:#fff;border-radius:5px;border:1px solid rgba(0,0,0,.1);opacity:0;width:200px;-webkit-transform:scale(0) translateZ(0);transform:scale(0) translateZ(0);-webkit-transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out;transition:transform 175ms ease-in-out,opacity 175ms ease-in-out,-webkit-transform 175ms ease-in-out;z-index:2147481000}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol{counter-reset:foo;display:table;border-spacing:.3em .75em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol>li{counter-increment:foo;display:table-row;margin-bottom:.75em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog ol>li:before{content:counter(foo) \\\".\\\";display:table-cell;text-align:right}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog:after,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog:before{top:100%;border:solid transparent;content:\\\" \\\";height:0;width:0;position:absolute}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{z-index:2147482000;max-width:100%;white-space:nowrap;text-overflow:ellipsis;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog.onesignal-bell-launcher-dialog-opened{-webkit-transform:scale(1) translateZ(0);transform:scale(1) translateZ(0);opacity:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a{box-sizing:border-box;text-decoration:none;color:initial}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:focus,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:hover,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:hover:active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog a:visited{text-decoration:none;color:initial}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button{box-sizing:border-box;border:1px solid transparent;padding:.625em 1em;box-shadow:none;border-radius:4px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;letter-spacing:.65px;cursor:pointer}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action{color:#fff;background:#e54b4d;width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover{background:#dd2022}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active{background:#b1191b}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm{height:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-button{width:32px;height:32px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-badge{font-size:8px;width:12px;height:12px;line-height:12px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message{padding:9.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message:after{border-width:6.6px;margin-top:-6.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:6.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:8.6px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-sm .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md{height:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-button{width:48px;height:48px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-badge{font-size:12px;width:18px;height:18px;line-height:18px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message{padding:14.4px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message:after{border-width:9.9px;margin-top:-9.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:9.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:11.9px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-md .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg{height:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-button{width:64px;height:64px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-badge{font-size:12px;width:24px;height:24px;line-height:24px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message{padding:19.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message:after{border-width:13.2px;margin-top:-13.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-message .onesignal-bell-launcher-message-body{font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog{padding:.3em .8em .6em;color:#333}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:after{border-top-color:#fff;border-width:13.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog:before{border-top-color:hsla(0,0%,71%,.1);border-width:15.2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body{font-size:14px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body h1{font-size:15px;line-height:1.2em;font-weight:500;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;letter-spacing:.2px;text-align:center;color:#41090a}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body p{font-size:14px;font-weight:400;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .divider{border-bottom:1px solid rgba(0,0,0,.1);margin:.25em -.93em}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .kickback{text-align:center;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:300;font-size:9.8px;letter-spacing:.5px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions{max-width:95vw;max-height:70vh;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;font-size:14px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .instructions img{width:100%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification{display:-webkit-box;display:-ms-flexbox;display:flex;max-width:330px;border:1px solid rgba(0,0,0,.1);border-radius:3px;background:hsla(0,0%,98%,.5);overflow:auto;margin:.5em 0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon{width:50px;height:50px;margin:6px;margin-right:3px;border-radius:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon.push-notification-icon-default{background:#e3e4e5}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-icon img{width:50px;height:50px;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container{margin:6px;margin-left:3px;-webkit-box-flex:1;-ms-flex:1;flex:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text{height:5px;width:100%;background:#e3e4e5;margin:5px 0;border-radius:1px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-short{width:75%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text.push-notification-text-medium{width:87%}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:first-of-type{margin-top:2px}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-lg .onesignal-bell-launcher-dialog .onesignal-bell-launcher-dialog-body .push-notification .push-notification-text-container .push-notification-text:last-of-type{margin-bottom:0}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .background{fill:#e54b4d}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .foreground{fill:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button svg .stroke{fill:none;stroke:#fff;stroke-width:3px;stroke-miterlimit:10}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button.onesignal-bell-launcher-badge-active svg .background,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button.onesignal-bell-launcher-button-active svg .background{fill:#dd2022!important}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-button .pulse-ring{border:7px solid hsla(0,0%,100%,.4)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-default .onesignal-bell-launcher-badge{border:1px solid #fff;background:#000;color:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .background{fill:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .foreground{fill:#e54b4d}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button svg .stroke{fill:none;stroke:#e54b4d;stroke-width:3px;stroke-miterlimit:10}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button.onesignal-bell-launcher-badge-active svg .background,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button.onesignal-bell-launcher-button-active svg .background{fill:#f2f2f2!important}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-button .pulse-ring{border:7px solid rgba(229,75,77,.4)}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher.onesignal-bell-launcher-theme-inverse .onesignal-bell-launcher-badge{border:1px solid #fff;background:#e54b4d;color:#fff}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-active,#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-enabled{-webkit-transform:scale(1);transform:scale(1);opacity:1}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-disabled{visibility:hidden}#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher-inactive{opacity:.5}#onesignal-bell-container.onesignal-reset .pulse-ring{border-radius:50%;position:absolute;left:0;top:0;bottom:0;right:0;-webkit-animation:notifyButtonPulse .35s ease-in-out;animation:notifyButtonPulse .35s ease-in-out;-webkit-animation-iteration-count:1;animation-iteration-count:1;opacity:0;z-index:1000;pointer-events:none}@media print{#onesignal-bell-container{display:none}}@-webkit-keyframes notifyButtonPulse{0%{-webkit-transform:scale(.1);transform:scale(.1);opacity:0;border-width:10px}50%{opacity:1;border-width:5px}to{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0;border-width:1px}}@keyframes notifyButtonPulse{0%{-webkit-transform:scale(.1);transform:scale(.1);opacity:0;border-width:10px}50%{opacity:1;border-width:5px}to{-webkit-transform:scale(1.2);transform:scale(1.2);opacity:0;border-width:1px}}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/autoprefixer-loader!./~/sass-loader!./src/bell/bell.scss\n ** module id = 61\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#onesignal-modal-container{font-size:14px;position:fixed;top:0;left:0;right:0;bottom:0;z-index:2258594000;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:rgba(51,51,51,.2);-webkit-font-smoothing:initial;padding:2em}#onesignal-modal-container #onesignal-modal-dialog{width:600px;max-width:100%;box-sizing:border-box;margin:0 auto;box-shadow:0 0 20px 3px rgba(0,0,0,.22)!important;background:#fff!important;padding:0;border-bottom-left-radius:2px;border-bottom-right-radius:2px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}#onesignal-modal-container #onesignal-modal-dialog .modal-body{box-sizing:border-box;margin:0;padding-bottom:1.714em}#onesignal-modal-container #onesignal-modal-dialog .modal-body-icon{box-sizing:border-box;float:left;width:80px;height:80px;background-size:contain;background-position:0 0;background-repeat:no-repeat}#onesignal-modal-container #onesignal-modal-dialog .modal-body-icon.default-icon{background-size:initial;background-position:50% 0}#onesignal-modal-container #onesignal-modal-dialog .modal-body-message{box-sizing:border-box;text-align:center;width:100%;display:block;font-size:1.143em;padding:0 1.5em;line-height:1.45em;-o-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;font-weight:300;color:#666!important}#onesignal-modal-container #onesignal-modal-dialog .modal-body-title{background:#24a3f3;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:1em;text-align:center;font-size:1.4em;font-weight:300;color:#fff!important;margin-bottom:1.25em}#onesignal-modal-container #onesignal-modal-dialog .modal-exit{position:absolute;right:15px;top:15px;color:#fff;font-size:1.5em}#onesignal-modal-container #onesignal-modal-dialog button{box-sizing:border-box;display:inline-block;padding:.375rem 1rem;font-size:.9625em;font-weight:400;line-height:1.5;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;border-radius:.25rem;font-family:inherit;letter-spacing:.05em;-webkit-transition:background-color 75ms ease;transition:background-color 75ms ease;margin:0}#onesignal-modal-container #onesignal-modal-dialog .modal-button{padding:.714em 2em;font-size:1em;text-transform:uppercase;border-radius:2px;font-weight:400}#onesignal-modal-container #onesignal-modal-dialog .modal-button.primary{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 6px 0 rgba(0,0,0,.12);background:#24a3f3!important;color:#fff!important}#onesignal-modal-container #onesignal-modal-dialog .modal-button.primary:hover{background:#1e6ef2}#onesignal-modal-container #onesignal-modal-dialog .modal-button.primary:active{background:#0d5bdd}#onesignal-modal-container #onesignal-modal-dialog .modal-button.secondary{box-shadow:none;background:#fff!important;color:#4285f4!important}#onesignal-modal-container #onesignal-modal-dialog .modal-button.secondary:hover{color:#0e60e9}#onesignal-modal-container #onesignal-modal-dialog .modal-button.secondary:active{color:#083c92}#onesignal-modal-container #onesignal-modal-dialog .primary.modal-button+.secondary.modal-button{margin-right:.714em}#onesignal-modal-container #onesignal-modal-dialog .modal-footer{position:relative;margin:.571em;margin-bottom:1.15em;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}#onesignal-modal-container #onesignal-modal-dialog .align-right{float:right}#onesignal-modal-container #onesignal-modal-dialog .clearfix{display:block}#onesignal-modal-container #onesignal-modal-dialog .clearfix:after{content:'';display:block;height:0;clear:both;visibility:hidden}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/autoprefixer-loader!./~/sass-loader!./src/http-modal/httpModal.scss\n ** module id = 62\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#onesignal-popover-container{font-size:14px;position:fixed;z-index:2258594000;left:0;right:0;-webkit-font-smoothing:initial}#onesignal-popover-container.slide-down{top:0}#onesignal-popover-container.slide-down.close-popover #onesignal-popover-dialog{-webkit-animation-name:slideDownExit;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:forwards;animation-name:slideDownExit;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:forwards}#onesignal-popover-container.slide-down #onesignal-popover-dialog{width:500px;-webkit-animation-name:slideDownEnter;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:forwards;animation-name:slideDownEnter;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:forwards}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog{padding:1.714em;width:612px;margin-bottom:18px}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog #blocked-popover{display:block}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog #normal-popover{display:none}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-body-message{padding:0 .2em;text-align:center;width:100%}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-body-message img{width:100%}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-body-message .unblock-image{margin:2em 0 .5em}#onesignal-popover-container.slide-down #onesignal-popover-dialog.blocked-dialog .popover-button.secondary{padding:.714em 2em}#onesignal-popover-container #blocked-popover{display:none}#onesignal-popover-container.slide-up{bottom:0}#onesignal-popover-container.slide-up.close-popover #onesignal-popover-dialog{-webkit-animation-name:slideUpExit;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:forwards;animation-name:slideUpExit;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:forwards}#onesignal-popover-container.slide-up #onesignal-popover-dialog{width:100%;-webkit-animation-name:slideUpEnter;-webkit-animation-iteration-count:1;-webkit-animation-timing-function:ease-out;-webkit-animation-duration:.4s;-webkit-animation-fill-mode:backwards;animation-name:slideUpEnter;animation-iteration-count:1;animation-timing-function:ease-out;animation-duration:.4s;animation-fill-mode:backwards}#onesignal-popover-container #onesignal-popover-dialog{box-sizing:border-box;max-width:100%;margin:0 auto;box-shadow:0 0 20px 3px rgba(0,0,0,.22)!important;background:#fff!important;padding:1.286em;border-bottom-left-radius:2px;border-bottom-right-radius:2px;font-family:Roboto,Noto,Helvetica Neue,Helvetica,Arial,sans-serif}#onesignal-popover-container #onesignal-popover-dialog .popover-body{box-sizing:border-box;margin:0}#onesignal-popover-container #onesignal-popover-dialog .popover-body-icon{box-sizing:border-box;float:left;width:80px;height:80px;background-size:contain;background-position:0 0;background-repeat:no-repeat}#onesignal-popover-container #onesignal-popover-dialog .popover-body-icon.default-icon{background-size:initial;background-position:50% 0}#onesignal-popover-container #onesignal-popover-dialog .popover-body-message{box-sizing:border-box;padding:0 .2em 0 1.286em;float:left;width:calc(100% - 80px);font-size:1.143em;line-height:1.45em;-o-user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default;color:#666!important}#onesignal-popover-container #onesignal-popover-dialog button{box-sizing:border-box;display:inline-block;padding:.375rem 1rem;font-size:.9625em;font-weight:400;line-height:1.5;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;border-radius:.25rem;font-family:inherit;letter-spacing:.05em;-webkit-transition:background-color 75ms ease;transition:background-color 75ms ease;margin:0}#onesignal-popover-container #onesignal-popover-dialog .popover-button{padding:.714em 2em;font-size:1em;text-transform:uppercase;border-radius:2px;font-weight:400}#onesignal-popover-container #onesignal-popover-dialog .popover-button.primary{box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 6px 0 rgba(0,0,0,.12);background:#4285f4!important;color:#fff!important}#onesignal-popover-container #onesignal-popover-dialog .popover-button.primary:hover{background:#1e6ef2}#onesignal-popover-container #onesignal-popover-dialog .popover-button.primary:active{background:#0d5bdd}#onesignal-popover-container #onesignal-popover-dialog .popover-button.secondary{box-shadow:none;background:#fff!important;color:#4285f4!important}#onesignal-popover-container #onesignal-popover-dialog .popover-button.secondary:hover{color:#0e60e9}#onesignal-popover-container #onesignal-popover-dialog .popover-button.secondary:active{color:#083c92}#onesignal-popover-container #onesignal-popover-dialog .primary.popover-button+.secondary.popover-button{margin-right:.714em}#onesignal-popover-container #onesignal-popover-dialog .popover-footer{position:relative;margin:.25em .25em 0 0}#onesignal-popover-container #onesignal-popover-dialog .align-right{float:right}#onesignal-popover-container #onesignal-popover-dialog .clearfix{display:block;-webkit-backface-visibility:initial!important;backface-visibility:initial!important}#onesignal-popover-container #onesignal-popover-dialog .clearfix:after{content:'';display:block;height:0;clear:both;visibility:hidden}@-webkit-keyframes slideDownEnter{0%{-webkit-transform:translateY(-150%)}to{-webkit-transform:translateY(0)}}@keyframes slideDownEnter{0%{-webkit-transform:translateY(-150%);transform:translateY(-150%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes slideDownExit{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(-150%)}}@keyframes slideDownExit{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(-150%);transform:translateY(-150%)}}@-webkit-keyframes slideUpEnter{0%{-webkit-transform:translateY(150%)}to{-webkit-transform:translateY(0)}}@keyframes slideUpEnter{0%{-webkit-transform:translateY(150%);transform:translateY(150%)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes slideUpExit{0%{-webkit-transform:translateY(0)}to{-webkit-transform:translateY(150%)}}@keyframes slideUpExit{0%{-webkit-transform:translateY(0);transform:translateY(0)}to{-webkit-transform:translateY(150%);transform:translateY(150%)}}\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/autoprefixer-loader!./~/sass-loader!./src/popover/popover.scss\n ** module id = 63\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _extendableBuiltin(cls) {\n  function ExtendableBuiltin() {\n    cls.apply(this, arguments);\n  }\n\n  ExtendableBuiltin.prototype = Object.create(cls.prototype, {\n    constructor: {\n      value: cls,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(ExtendableBuiltin, cls);\n  } else {\n    ExtendableBuiltin.__proto__ = cls;\n  }\n\n  return ExtendableBuiltin;\n}\n\nvar ExtendableError = function (_extendableBuiltin2) {\n  _inherits(ExtendableError, _extendableBuiltin2);\n\n  function ExtendableError() {\n    var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n    _classCallCheck(this, ExtendableError);\n\n    // extending Error is weird and does not propagate `message`\n    var _this = _possibleConstructorReturn(this, (ExtendableError.__proto__ || Object.getPrototypeOf(ExtendableError)).call(this, message));\n\n    Object.defineProperty(_this, 'message', {\n      configurable: true,\n      enumerable: false,\n      value: message,\n      writable: true\n    });\n\n    Object.defineProperty(_this, 'name', {\n      configurable: true,\n      enumerable: false,\n      value: _this.constructor.name,\n      writable: true\n    });\n\n    if (Error.hasOwnProperty('captureStackTrace')) {\n      Error.captureStackTrace(_this, _this.constructor);\n      return _possibleConstructorReturn(_this);\n    }\n\n    Object.defineProperty(_this, 'stack', {\n      configurable: true,\n      enumerable: false,\n      value: new Error(message).stack,\n      writable: true\n    });\n    return _this;\n  }\n\n  return ExtendableError;\n}(_extendableBuiltin(Error));\n\nexports.default = ExtendableError;\nmodule.exports = exports['default'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/es6-error/lib/index.js\n ** module id = 64\n ** module chunks = 0\n **/","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   4.0.5\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/es6-promise/dist/es6-promise.js\n ** module id = 65\n ** module chunks = 0\n **/","module.exports = global[\"OneSignal\"] = require(\"-!/Users/jpang/code/OneSignal-Website-SDK/node_modules/awesome-typescript-loader/dist/entry.js?tsconfig=./tsconfig.es5.json!/Users/jpang/code/OneSignal-Website-SDK/src/OneSignal.ts\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/expose-loader?OneSignal!./src/OneSignal.ts\n ** module id = 66\n ** module chunks = 0\n **/","module.exports = global[\"ServiceWorker\"] = require(\"-!/Users/jpang/code/OneSignal-Website-SDK/node_modules/awesome-typescript-loader/dist/entry.js?tsconfig=./tsconfig.es5.json!/Users/jpang/code/OneSignal-Website-SDK/src/service-worker/ServiceWorker.ts\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/expose-loader?ServiceWorker!./src/service-worker/ServiceWorker.ts\n ** module id = 67\n ** module chunks = 0\n **/","module.exports = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n<!-- Generator: Adobe Illustrator 19.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\n<svg version=\\\"1.1\\\" class=\\\"onesignal-bell-svg\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\n\\t width=\\\"99.7px\\\" height=\\\"99.7px\\\" viewBox=\\\"0 0 99.7 99.7\\\" style=\\\"enable-background:new 0 0 99.7 99.7;\\\" xml:space=\\\"preserve\\\">\\n<g>\\n\\t<circle class=\\\"background\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" r=\\\"49.9\\\"/>\\n\\t<g id=\\\"Layer_2\\\">\\n\\t\\t<g>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M50.1,66.2H27.7c0,0-2-0.2-2-2.1c0-1.9,1.7-2,1.7-2s6.7-3.2,6.7-5.5c0-2.3-1.1-3.9-1.1-13.3\\n\\t\\t\\t\\ts6-16.6,13.2-16.6c0,0,1-2.4,3.9-2.4c2.8,0,3.8,2.4,3.8,2.4c7.2,0,13.2,7.2,13.2,16.6s-1,11-1,13.3c0,2.3,6.7,5.5,6.7,5.5\\n\\t\\t\\t\\ts1.7,0.1,1.7,2c0,1.8-2.1,2.1-2.1,2.1H50.1z\\\"/>\\n\\t\\t\\t<path class=\\\"foreground\\\" d=\\\"M42.9,68.5h14.5c0,0-1,6.3-7.2,6.3S42.9,68.5,42.9,68.5z\\\"/>\\n\\t\\t\\t<ellipse class=\\\"stroke\\\" cx=\\\"49.9\\\" cy=\\\"49.9\\\" rx=\\\"37.4\\\" ry=\\\"36.9\\\"/>\\n\\t\\t</g>\\n\\t</g>\\n</g>\\n</svg>\\n\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./src/assets/bell.svg\n ** module id = 68\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./bell.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./bell.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./bell.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/bell/bell.scss\n ** module id = 69\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./httpModal.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./httpModal.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./httpModal.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/http-modal/httpModal.scss\n ** module id = 70\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./popover.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./popover.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/autoprefixer-loader/index.js!./../../node_modules/sass-loader/index.js!./popover.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/popover/popover.scss\n ** module id = 71\n ** module chunks = 0\n **/","'use strict';\n\nvar atoa = require('atoa');\nvar serialization = require('./serialization');\nvar emitter = require('contra/emitter');\n\nmodule.exports = createChannel;\n\nfunction createChannel () {\n  var channel = at(navigator.serviceWorker.controller);\n  return channel;\n\n  function at (worker) {\n    var internalEmitter = emitter();\n    var api = {\n      on: selfed('on'),\n      once: selfed('once'),\n      off: selfed('off'),\n      emit: postToWorker,\n      at: at\n    };\n    var postFromWorker = serialization.emission(internalEmitter, { broadcast: false });\n    navigator.serviceWorker.addEventListener('message', broadcastHandler);\n    return api;\n\n    function selfed (method) {\n      return function selfish () {\n        internalEmitter[method].apply(null, arguments);\n        return api;\n      };\n    }\n\n    function postToWorker () {\n      if (!worker) {\n        return Promise.reject(new Error('ServiceWorker not found.'));\n      }\n      var payload = serialization.parsePayload(atoa(arguments));\n      var messageChannel = new MessageChannel();\n      messageChannel.port1.addEventListener('message', postFromWorker);\n      return worker.postMessage(payload, [messageChannel.port2]);\n    }\n\n    function broadcastHandler (e) {\n      var data = e.data;\n      if (data) {\n        if (data.__broadcast) {\n          serialization.emission(internalEmitter, {broadcast: true})(e);\n        } else {\n          serialization.emission(internalEmitter, {broadcast: false})(e);\n        }\n      }\n    }\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/swivel/page.js\n ** module id = 72\n ** module chunks = 0\n **/","'use strict';\n\nvar atoa = require('atoa');\nvar serialization = require('./serialization');\nvar emitter = require('contra/emitter');\n\nmodule.exports = createChannel;\n\nfunction createChannel () {\n  var internalEmitter = emitter();\n  var api = {\n    on: selfed('on'),\n    once: selfed('once'),\n    off: selfed('off'),\n    broadcast: broadcastToPages,\n    emit: replyToClient\n  };\n\n  self.addEventListener('message', postFromPage);\n\n  return api;\n\n  function selfed (method) {\n    return function selfish () {\n      internalEmitter[method].apply(null, arguments);\n      return api;\n    };\n  }\n\n  function postFromPage (e) {\n    var context = {\n      reply: replyToPage(e)\n    };\n    serialization.emission(internalEmitter, context)(e);\n  }\n\n  function broadcastToPages (type) {\n    var payload = atoa(arguments, 1);\n    return self.clients.matchAll({includeUncontrolled: true}).then(gotClients);\n    function gotClients (clients) {\n      return clients.map(emitToClient);\n    }\n    function emitToClient (client) {\n      return client.postMessage({ type: type, payload: payload, __broadcast: true });\n    }\n  }\n\n  function replyTo (client) {\n    var payload = serialization.parsePayload(atoa(arguments, 1));\n    return client.postMessage(payload);\n  }\n\n  function replyToPage (e) {\n    return replyTo.bind(null, e.ports[0]);\n  }\n\n  function replyToClient (clientId) {\n        var payload = serialization.parsePayload(atoa(arguments, 1));\n    return self.clients.matchAll({includeUncontrolled: true}).then(function(clients) {\n      var wasClientFound = false;\n      clients.forEach(function(client) {\n        if (client.id === clientId) {\n          wasClientFound = true;\n          return client.postMessage(payload);\n        }\n      });\n      if (!wasClientFound) {\n        return Promise.reject('Could not find service worker client with ID ' + clientId + ' to reply to.');\n      }\n    });\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/swivel/worker.js\n ** module id = 73\n ** module chunks = 0\n **/","var si = typeof setImmediate === 'function', tick;\nif (si) {\n  tick = function (fn) { setImmediate(fn); };\n} else {\n  tick = function (fn) { setTimeout(fn, 0); };\n}\n\nmodule.exports = tick;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/ticky/ticky-browser.js\n ** module id = 74\n ** module chunks = 0\n **/","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-define.js\n ** module id = 75\n ** module chunks = 0\n **/"],"sourceRoot":""}