function CustomerValidators(){var o=[],s="passwordnotinblacklist",t="passwordnotcustomerfullname";return{addValidationBlackList:function(){$.validator.unobtrusive.adapters.add(s,["param"],function(e){e.rules[s]=!0,e.messages[s]=e.message}),$.validator.addMethod(s,function(e){return!o||!o.length||-1===o.indexOf(e)}),$.get(function(){var e="";{var o;e=UrlResolver.getAssetsPath?UrlResolver.combine(UrlResolver.getAssetsPath(),"Account","PasswordsBlacklist.js"):(o=UrlResolver.getVersion(),o?Model.CdnPath+Model.jsVirtualPath+"/assets/"+o+"/Account/PasswordsBlacklist.js":Model.jsVirtualPath+"/Account/PasswordsBlacklist")}return e}()).then(function(e){$.isArray(e)&&(o=e)}).done()},addValidationCustomerFullName:function(){var o;window.$customer&&(customer=window.$customer,o={firstName:customer.prop.firstName,lastName:customer.prop.lastName,combinations:[customer.prop.firstName+customer.prop.lastName,customer.prop.firstName+" "+customer.prop.lastName,customer.prop.lastName+customer.prop.firstName,customer.prop.lastName+" "+customer.prop.firstName]},$.validator.unobtrusive.adapters.add(t,["param"],function(e){e.rules[t]=!0,e.messages[t]=e.message}),$.validator.addMethod(t,function(e){return e!==o.firstName&&e!==o.lastName&&-1===o.combinations.indexOf(e)}))}}}function ForgotPasswordReset(){var e,o;return{Init:function(){(new CustomerValidators).addValidationBlackList(),jQuery.validator.unobtrusive.parse($("#ForgotPasswordResetForm")),e=new RevealPassword,o=new RevealPassword,window.externalEventsCallbacks.fire("forgot-password-view"),$(".password-input").on("keyup",function(){var e=$(".newPasswordError");e.is(":visible")&&e.hide()}),$(document).click(function(){window.externalEventsCallbacks.fire("forgot-password-interaction")}),$('form#ForgotPasswordResetForm input[type="submit"]').click(function(){e.HidePasswordText(),o.HidePasswordText(),window.externalEventsCallbacks.fire("forgot-password-submit"),StorageFactory(StorageFactory.eStorageType.session).setItem("forgotPasswordResetSubmitClicked",!0)}),$("#imgRefresh").click(function(){$.ajax({async:!1,url:Model.jsVirtualPath+"/CaptchaImage/Generate/",type:"POST",success:function(e){$("#captcha").replaceWith(e)}})}),e.Init({passwordInput:$("#newPassword"),icon:$("#newPasswordIcon"),form:$("#ForgotPasswordResetForm")}),o.Init({passwordInput:$("#pwdconfirm"),icon:$("#confirmPasswordIcon"),form:$("#ForgotPasswordResetForm")}),CookieHandler.CookiesEnabled()||popupManager.showCookiesDisabledPopUp(),void 0!==ShowPasswordCharacters&&(new ShowPasswordCharacters).init()}}}function RevealPassword(){var o,s,t,a,r={passwordTypeText:"password-type-text",passwordInput:"password-input",icoWbReveal:"ico-wb-reveal",icoWbRevealOff:"ico-wb-reveal-off",icoPassBlue:"ico-pass-blue"},i={enter:13,ctrlEnter:10};function n(){v(s)||(o.val(s.val()),l(),t.removeClass(r.icoWbRevealOff).addClass(r.icoWbReveal))}function l(){v(s)||(s.off(".RevealPassword"),s.remove(),s=null)}function d(e){""===s.val()?(l(),o.val("").prev().removeClass(r.icoPassBlue).removeClass(r.icoWbRevealOff).addClass(r.icoWbReveal)):(e=e).which!=i.ctrlEnter&&e.which!=i.enter||(e.preventDefault(),o.val(s.val()),l(),a.submit())}function e(){var e;e={width:o.width(),height:o.height(),top:o.offset().top,left:o.offset().left},(s=o.clone().attr("type","text").removeAttr("id").addClass(r.passwordTypeText).removeClass(r.passwordInput).insertAfter(a).offset({top:e.top,left:e.left}).innerWidth(o.innerWidth()).innerHeight(o.innerHeight())).on("keyup.RevealPassword",d),t.removeClass(r.icoWbReveal).addClass(r.icoWbRevealOff),p()&&s.val(o.val())}function c(){p()&&o.val(s.val()),l(),t.removeClass(r.icoWbRevealOff).addClass(r.icoWbReveal)}function u(){""!==o.val()&&(t.hasClass(r.icoWbReveal)?e:c)()}function f(){var e=o.css("box-shadow");""!==o.val()||Browser.isChrome()&&0<=e.indexOf("inset")?o.prev().addClass(r.icoPassBlue):o.prev().removeClass(r.icoPassBlue).removeClass(r.icoWbRevealOff).addClass(r.icoWbReveal)}function p(){return!v(s)&&0<s.length&&""!==s.val()}function v(e){return null==e}return{Init:function(e){o=e.passwordInput,t=e.icon,a=e.form,t.on("click.RevealPassword",u),o.on("keyup.RevealPassword",f),$(window).on("orientationchange.RevealPassword",n),setTimeout(f,100)},HidePasswordText:c,Dispose:function(){t.off("click.RevealPassword"),o.off("keyup.RevealPassword"),$(window).off("orientationchange.RevealPassword")}}}var ShowPasswordCharacters=function(){var e,o,s,t,a=function(){window.additionalPropertiesCallbacks.fire("ViewedPassword"),""!==o.val()&&(s.val(o.val()),i())},r=function(){o.is(":visible")||(s.val(""),i())},i=function(){s.toggle(),o.toggle()};return{init:function(){e=$(".pwd-wrapper"),o=e.find('input[type="password"]'),s=e.find('input[type="text"]'),(t=e.find("span.showpwd label")).mousedown(a),t.mouseup(r),t.mouseout(r)}}};!function(e,o){"use strict";"function"==typeof define&&define.amd?define("adjustUiPerDevice",[],o):e.adjustUiPerDevice=o()}("undefined"!=typeof self?self:this,function(){function o(){for(var e=document.querySelectorAll("[data-ios]"),o=0;o<e.length;o++){var s=e[o].getAttribute("data-ios");"adjustTop"==s?(e[o].style.top=0,e[o].style.position="absolute"):"adjustBottom"==s&&(e[o].style.position="relative",e[o].style.display="none")}}function s(){for(var e=document.querySelectorAll("[data-ios]"),o=0;o<e.length;o++){var s=e[o].getAttribute("data-ios");"adjustTop"==s?(e[o].style.top=0,e[o].style.position="fixed"):"adjustBottom"==s&&(e[o].style.position="fixed",e[o].style.display="")}}return function(e){null!==e&&(1!=e?0!=e?(e.onfocus=o,e.onblur=s):s():o())}});
//# sourceMappingURL=forgot.js.map