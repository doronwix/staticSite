function debounce(r,i,o){var a;return function(){var e=this,t=argsToArray(arguments);var n=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||r.apply(e,t)},i),n&&r.apply(e,t)}}function swipe(e,o,a){o=o||95;var s=0,l=0,t="ontouchend"in document,n=(t?"touchstart":"mousedown")+".swipe",r=(t?"touchmove":"mousemove")+".swipe",i=(t?"touchend":"mouseup")+".swipe";$(e).addClass("__swipe_parent"),$(e).on(n,function(e){var t=$(e.target).closest(".__swipe_parent").get(0);e.currentTarget===t&&e.stopPropagation(),l=e.timeStamp,s=e.originalEvent.touches?e.originalEvent.touches[0].pageX:e.pageX}).on(i,function(e){var t=$(e.target).closest(".__swipe_parent").get(0);e.currentTarget===t&&e.stopPropagation(),s=l=0}).on(r,debounce(function(e){var t=$(e.target).closest(".__swipe_parent").get(0);e.currentTarget===t&&e.stopPropagation();var n=e.originalEvent.touches?e.originalEvent.touches[0].pageX:e.pageX,r=0===s?0:Math.abs(n-s),i=e.timeStamp;0!==l&&i-l<1e3&&o<r&&((n<s||s<n)&&a(n,s,this),s=l=0)},5))}function swipeDestroy(e){$(e).off(".swipe")}!function(m,E){var n,t,g=m.document,e=m.location,r=m.navigator,i=m.jQuery,o=m.$,a=Array.prototype.push,v=Array.prototype.slice,s=Array.prototype.indexOf,l=Object.prototype.toString,u=Object.prototype.hasOwnProperty,c=String.prototype.trim,ge=function(e,t){return new ge.fn.init(e,t,n)},A=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,d=/\S/,D=/\s+/,p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,f=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,y=/^[\],:{}\s]*$/,w=/(?:^|:|,)(?:\s*\[)+/g,b=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,C=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,S=/^-ms-/,B=/-([\da-z])/gi,T=function(e,t){return(t+"").toUpperCase()},I=function(){g.addEventListener?(g.removeEventListener("DOMContentLoaded",I,!1),ge.ready()):"complete"===g.readyState&&(g.detachEvent("onreadystatechange",I),ge.ready())},F={};ge.fn=ge.prototype={constructor:ge,init:function(e,t,n){var r,i,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"!=typeof e)return ge.isFunction(e)?n.ready(e):(e.selector!==E&&(this.selector=e.selector,this.context=e.context),ge.makeArray(e,this));if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:f.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1])return o=(t=t instanceof ge?t[0]:t)&&t.nodeType?t.ownerDocument||t:g,e=ge.parseHTML(r[1],o,!0),h.test(r[1])&&ge.isPlainObject(t)&&this.attr.call(e,t,!0),ge.merge(this,e);if((i=g.getElementById(r[2]))&&i.parentNode){if(i.id!==r[2])return n.find(e);this.length=1,this[0]=i}return this.context=g,this.selector=e,this},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return v.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=ge.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return ge.each(this,e,t)},ready:function(e){return ge.ready.promise().done(e),this},eq:function(e){return-1===(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(v.apply(this,arguments),"slice",v.call(arguments).join(","))},map:function(n){return this.pushStack(ge.map(this,function(e,t){return n.call(e,t,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:a,sort:[].sort,splice:[].splice},ge.fn.init.prototype=ge.fn,ge.extend=ge.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},s=2),"object"==typeof a||ge.isFunction(a)||(a={}),l===s&&(a=this,--s);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(ge.isPlainObject(r)||(i=ge.isArray(r)))?(o=i?(i=!1,n&&ge.isArray(n)?n:[]):n&&ge.isPlainObject(n)?n:{},a[t]=ge.extend(u,o,r)):r!==E&&(a[t]=r));return a},ge.extend({noConflict:function(e){return m.$===ge&&(m.$=o),e&&m.jQuery===ge&&(m.jQuery=i),ge},isReady:!1,readyWait:1,holdReady:function(e){e?ge.readyWait++:ge.ready(!0)},ready:function(e){if(!0===e?!--ge.readyWait:!ge.isReady){if(!g.body)return setTimeout(ge.ready,1);(ge.isReady=!0)!==e&&0<--ge.readyWait||(t.resolveWith(g,[ge]),ge.fn.trigger&&ge(g).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ge.type(e)},isArray:Array.isArray||function(e){return"array"===ge.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):F[l.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==ge.type(e)||e.nodeType||ge.isWindow(e))return!1;try{if(e.constructor&&!u.call(e,"constructor")&&!u.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var t;for(t in e);return t===E||u.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||g,(r=h.exec(e))?[t.createElement(r[1])]:(r=ge.buildFragment([e],t,n?null:[]),ge.merge([],(r.cacheable?ge.clone(r.fragment):r.fragment).childNodes))):null},parseJSON:function(e){return e&&"string"==typeof e?(e=ge.trim(e),m.JSON&&m.JSON.parse?m.JSON.parse(e):y.test(e.replace(b,"@").replace(C,"]").replace(w,""))?new Function("return "+e)():void ge.error("Invalid JSON: "+e)):null},parseXML:function(e){var t;if(!e||"string"!=typeof e)return null;try{m.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=E}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||ge.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){e&&d.test(e)&&(m.execScript||function(e){m.eval.call(m,e)})(e)},camelCase:function(e){return e.replace(S,"ms-").replace(B,T)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=o===E||ge.isFunction(e);if(n)if(a){for(r in e)if(!1===t.apply(e[r],n))break}else for(;i<o&&!1!==t.apply(e[i++],n););else if(a){for(r in e)if(!1===t.call(e[r],r,e[r]))break}else for(;i<o&&!1!==t.call(e[i],i,e[i++]););return e},trim:c&&!c.call("\ufeffÂ ")?function(e){return null==e?"":c.call(e)}:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n,r=t||[];return null!=e&&(n=ge.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||ge.isWindow(e)?a.call(r,e):ge.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(s)return s.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;i<n;i++)e[r++]=t[i];else for(;t[i]!==E;)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i=0,o=e.length;for(n=!!n;i<o;i++)n!==!!t(e[i],i)&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=[],a=0,s=e.length;if(e instanceof ge||s!==E&&"number"==typeof s&&(0<s&&e[0]&&e[s-1]||0===s||ge.isArray(e)))for(;a<s;a++)null!=(r=t(e[a],a,n))&&(o[o.length]=r);else for(i in e)null!=(r=t(e[i],i,n))&&(o[o.length]=r);return o.concat.apply([],o)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),ge.isFunction(e)?(r=v.call(arguments,2),(i=function(){return e.apply(t,r.concat(v.call(arguments)))}).guid=e.guid=e.guid||ge.guid++,i):E},access:function(e,t,n,r,i,o,a){var s,l=null==n,u=0,c=e.length;if(n&&"object"==typeof n){for(u in n)ge.access(e,t,u,n[u],1,o,r);i=1}else if(r!==E){if(s=a===E&&ge.isFunction(r),l&&(t=s?(s=t,function(e,t,n){return s.call(ge(e),n)}):(t.call(e,r),null)),t)for(;u<c;u++)t(e[u],n,s?r.call(e[u],u,t(e[u],n)):r,a);i=1}return i?e:l?t.call(e):c?t(e[0],n):o},now:function(){return(new Date).getTime()}}),ge.ready.promise=function(e){if(!t)if(t=ge.Deferred(),"complete"===g.readyState)setTimeout(ge.ready,1);else if(g.addEventListener)g.addEventListener("DOMContentLoaded",I,!1),m.addEventListener("load",ge.ready,!1);else{g.attachEvent("onreadystatechange",I),m.attachEvent("onload",ge.ready);var n=!1;try{n=null==m.frameElement&&g.documentElement}catch(e){}n&&n.doScroll&&function t(){if(!ge.isReady){try{n.doScroll("left")}catch(e){return setTimeout(t,50)}ge.ready()}}()}return t.promise(e)},ge.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){F["[object "+t+"]"]=t.toLowerCase()}),n=ge(g);var x={};ge.Callbacks=function(i){var e,n;i="string"==typeof i?x[i]||(n=x[e=i]={},ge.each(e.split(D),function(e,t){n[t]=!0}),n):ge.extend({},i);var t,r,o,a,s,l,u=[],c=!i.once&&[],A=function(e){for(t=i.memory&&e,r=!0,l=a||0,a=0,s=u.length,o=!0;u&&l<s;l++)if(!1===u[l].apply(e[0],e[1])&&i.stopOnFalse){t=!1;break}o=!1,u&&(c?c.length&&A(c.shift()):t?u=[]:d.disable())},d={add:function(){if(u){var e=u.length;!function r(e){ge.each(e,function(e,t){var n=ge.type(t);"function"===n?i.unique&&d.has(t)||u.push(t):t&&t.length&&"string"!==n&&r(t)})}(arguments),o?s=u.length:t&&(a=e,A(t))}return this},remove:function(){return u&&ge.each(arguments,function(e,t){for(var n;-1<(n=ge.inArray(t,u,n));)u.splice(n,1),o&&(n<=s&&s--,n<=l&&l--)}),this},has:function(e){return-1<ge.inArray(e,u)},empty:function(){return u=[],this},disable:function(){return u=c=t=E,this},disabled:function(){return!u},lock:function(){return c=E,t||d.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],!u||r&&!c||(o?c.push(t):A(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ge.extend({Deferred:function(e){var a=[["resolve","done",ge.Callbacks("once memory"),"resolved"],["reject","fail",ge.Callbacks("once memory"),"rejected"],["notify","progress",ge.Callbacks("memory")]],i="pending",o={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var o=arguments;return ge.Deferred(function(i){ge.each(a,function(e,t){var n=t[0],r=o[e];s[t[1]](ge.isFunction(r)?function(){var e=r.apply(this,arguments);e&&ge.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[n+"With"](this===s?i:this,[e])}:i[n])}),o=null}).promise()},promise:function(e){return null!=e?ge.extend(e,o):o}},s={};return o.pipe=o.then,ge.each(a,function(e,t){var n=t[2],r=t[3];o[t[1]]=n.add,r&&n.add(function(){i=r},a[1^e][2].disable,a[2][2].lock),s[t[0]]=n.fire,s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){var i,t,n,r=0,o=v.call(arguments),a=o.length,s=1!==a||e&&ge.isFunction(e.promise)?a:0,l=1===s?e:ge.Deferred(),u=function(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?v.call(arguments):e,r===i?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(1<a)for(i=new Array(a),t=new Array(a),n=new Array(a);r<a;r++)o[r]&&ge.isFunction(o[r].promise)?o[r].promise().done(u(r,n,o)).fail(l.reject).progress(u(r,t,i)):--s;return s||l.resolveWith(n,o),l.promise()}}),ge.support=function(){var a,e,t,n,r,i,o,s,l,u,c,A=g.createElement("div");if(A.setAttribute("className","t"),A.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=A.getElementsByTagName("*"),t=A.getElementsByTagName("a")[0],!e||!t||!e.length)return{};r=(n=g.createElement("select")).appendChild(g.createElement("option")),i=A.getElementsByTagName("input")[0],t.style.cssText="top:1px;float:left;opacity:.5",a={leadingWhitespace:3===A.firstChild.nodeType,tbody:!A.getElementsByTagName("tbody").length,htmlSerialize:!!A.getElementsByTagName("link").length,style:/top/.test(t.getAttribute("style")),hrefNormalized:"/a"===t.getAttribute("href"),opacity:/^0.5/.test(t.style.opacity),cssFloat:!!t.style.cssFloat,checkOn:"on"===i.value,optSelected:r.selected,getSetAttribute:"t"!==A.className,enctype:!!g.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==g.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===g.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},i.checked=!0,a.noCloneChecked=i.cloneNode(!0).checked,n.disabled=!0,a.optDisabled=!r.disabled;try{delete A.test}catch(e){a.deleteExpando=!1}if(!A.addEventListener&&A.attachEvent&&A.fireEvent&&(A.attachEvent("onclick",c=function(){a.noCloneEvent=!1}),A.cloneNode(!0).fireEvent("onclick"),A.detachEvent("onclick",c)),(i=g.createElement("input")).value="t",i.setAttribute("type","radio"),a.radioValue="t"===i.value,i.setAttribute("checked","checked"),i.setAttribute("name","t"),A.appendChild(i),(o=g.createDocumentFragment()).appendChild(A.lastChild),a.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,a.appendChecked=i.checked,o.removeChild(i),o.appendChild(A),A.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})(u=(s="on"+l)in A)||(A.setAttribute(s,"return;"),u="function"==typeof A[s]),a[l+"Bubbles"]=u;return ge(function(){var e,t,n,r,i="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=g.getElementsByTagName("body")[0];o&&((e=g.createElement("div")).style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(e,o.firstChild),t=g.createElement("div"),e.appendChild(t),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=t.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",a.reliableHiddenOffsets=u&&0===n[0].offsetHeight,t.innerHTML="",t.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",a.boxSizing=4===t.offsetWidth,a.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,m.getComputedStyle&&(a.pixelPosition="1%"!==(m.getComputedStyle(t,null)||{}).top,a.boxSizingReliable="4px"===(m.getComputedStyle(t,null)||{width:"4px"}).width,(r=g.createElement("div")).style.cssText=t.style.cssText=i,r.style.marginRight=r.style.width="0",t.style.width="1px",t.appendChild(r),a.reliableMarginRight=!parseFloat((m.getComputedStyle(r,null)||{}).marginRight)),void 0!==t.style.zoom&&(t.innerHTML="",t.style.cssText=i+"width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=3===t.offsetWidth,t.style.display="block",t.style.overflow="visible",t.innerHTML="<div></div>",t.firstChild.style.width="5px",a.shrinkWrapBlocks=3!==t.offsetWidth,e.style.zoom=1),o.removeChild(e),e=t=n=r=null)}),o.removeChild(A),e=t=n=r=i=o=A=null,a}();var _=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,M=/([A-Z])/g;function N(e,t,n){if(n===E&&1===e.nodeType){var r="data-"+t.replace(M,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:_.test(n)?ge.parseJSON(n):n)}catch(e){}ge.data(e,t,n)}else n=E}return n}function k(e){var t;for(t in e)if(("data"!==t||!ge.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}ge.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(ge.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?ge.cache[e[ge.expando]]:e[ge.expando])&&!k(e)},data:function(e,t,n,r){if(ge.acceptData(e)){var i,o,a=ge.expando,s="string"==typeof t,l=e.nodeType,u=l?ge.cache:e,c=l?e[a]:e[a]&&a;if(c&&u[c]&&(r||u[c].data)||!s||n!==E)return c||(l?e[a]=c=ge.deletedIds.pop()||ge.guid++:c=a),u[c]||(u[c]={},l||(u[c].toJSON=ge.noop)),"object"!=typeof t&&"function"!=typeof t||(r?u[c]=ge.extend(u[c],t):u[c].data=ge.extend(u[c].data,t)),i=u[c],r||(i.data||(i.data={}),i=i.data),n!==E&&(i[ge.camelCase(t)]=n),s?null==(o=i[t])&&(o=i[ge.camelCase(t)]):o=i,o}},removeData:function(e,t,n){if(ge.acceptData(e)){var r,i,o,a=e.nodeType,s=a?ge.cache:e,l=a?e[ge.expando]:ge.expando;if(s[l]){if(t&&(r=n?s[l]:s[l].data)){ge.isArray(t)||(t=t in r?[t]:(t=ge.camelCase(t))in r?[t]:t.split(" "));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?k:ge.isEmptyObject)(r))return}(n||(delete s[l].data,k(s[l])))&&(a?ge.cleanData([e],!0):ge.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}},_data:function(e,t,n){return ge.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&ge.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),ge.fn.extend({data:function(n,e){var r,i,t,o,a,s=this[0],l=0,u=null;if(n!==E)return"object"==typeof n?this.each(function(){ge.data(this,n)}):((r=n.split(".",2))[1]=r[1]?"."+r[1]:"",i=r[1]+"!",ge.access(this,function(t){if(t===E)return(u=this.triggerHandler("getData"+i,[r[0]]))===E&&s&&(u=ge.data(s,n),u=N(s,n,u)),u===E&&r[1]?this.data(r[0]):u;r[1]=t,this.each(function(){var e=ge(this);e.triggerHandler("setData"+i,r),ge.data(this,n,t),e.triggerHandler("changeData"+i,r)})},null,e,1<arguments.length,null,!1));if(this.length&&(u=ge.data(s),1===s.nodeType&&!ge._data(s,"parsedAttrs"))){for(a=(t=s.attributes).length;l<a;l++)(o=t[l].name).indexOf("data-")||(o=ge.camelCase(o.substring(5)),N(s,o,u[o]));ge._data(s,"parsedAttrs",!0)}return u},removeData:function(e){return this.each(function(){ge.removeData(this,e)})}}),ge.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ge._data(e,t),n&&(!r||ge.isArray(n)?r=ge._data(e,t,ge.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ge.queue(e,t),r=n.length,i=n.shift(),o=ge._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ge.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ge._data(e,n)||ge._data(e,n,{empty:ge.Callbacks("once memory").add(function(){ge.removeData(e,t+"queue",!0),ge.removeData(e,n,!0)})})}}),ge.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ge.queue(this[0],t):n===E?this:this.each(function(){var e=ge.queue(this,t,n);ge._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ge.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ge.dequeue(this,e)})},delay:function(r,e){return r=ge.fx&&ge.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=setTimeout(e,r);t.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ge.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=E),e=e||"fx";a--;)(n=ge._data(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var U,P,Q,H=/[\t\r\n]/g,O=/\r/g,L=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,V=/^a(?:rea|)$/i,q=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,K=ge.support.getSetAttribute;ge.fn.extend({attr:function(e,t){return ge.access(this,ge.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ge.removeAttr(this,e)})},prop:function(e,t){return ge.access(this,ge.prop,e,t,1<arguments.length)},removeProp:function(e){return e=ge.propFix[e]||e,this.each(function(){try{this[e]=E,delete this[e]}catch(e){}})},addClass:function(t){var e,n,r,i,o,a,s;if(ge.isFunction(t))return this.each(function(e){ge(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(D),n=0,r=this.length;n<r;n++)if(1===(i=this[n]).nodeType)if(i.className||1!==e.length){for(o=" "+i.className+" ",a=0,s=e.length;a<s;a++)o.indexOf(" "+e[a]+" ")<0&&(o+=e[a]+" ");i.className=ge.trim(o)}else i.className=t;return this},removeClass:function(t){var e,n,r,i,o,a,s;if(ge.isFunction(t))return this.each(function(e){ge(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===E)for(e=(t||"").split(D),a=0,s=this.length;a<s;a++)if(1===(r=this[a]).nodeType&&r.className){for(n=(" "+r.className+" ").replace(H," "),i=0,o=e.length;i<o;i++)for(;0<=n.indexOf(" "+e[i]+" ");)n=n.replace(" "+e[i]+" "," ");r.className=t?ge.trim(n):""}return this},toggleClass:function(o,a){var s=typeof o,l="boolean"==typeof a;return ge.isFunction(o)?this.each(function(e){ge(this).toggleClass(o.call(this,e,this.className,a),a)}):this.each(function(){if("string"===s)for(var e,t=0,n=ge(this),r=a,i=o.split(D);e=i[t++];)r=l?r:!n.hasClass(e),n[r?"addClass":"removeClass"](e);else"undefined"!==s&&"boolean"!==s||(this.className&&ge._data(this,"__className__",this.className),this.className=this.className||!1===o?"":ge._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(H," ").indexOf(t))return!0;return!1},val:function(r){var i,e,o,t=this[0];return arguments.length?(o=ge.isFunction(r),this.each(function(e){var t,n=ge(this);1===this.nodeType&&(null==(t=o?r.call(this,e,n.val()):r)?t="":"number"==typeof t?t+="":ge.isArray(t)&&(t=ge.map(t,function(e){return null==e?"":e+""})),(i=ge.valHooks[this.type]||ge.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,t,"value")!==E||(this.value=t))})):t?(i=ge.valHooks[t.type]||ge.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&(e=i.get(t,"value"))!==E?e:"string"==typeof(e=t.value)?e.replace(O,""):null==e?"":e:void 0}}),ge.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(ge.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ge.nodeName(n.parentNode,"optgroup"))){if(t=ge(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=ge.makeArray(t);return ge(e).find("option").each(function(){this.selected=0<=ge.inArray(ge(this).val(),n)}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,t,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return r&&ge.isFunction(ge.fn[t])?ge(e)[t](n):void 0===e.getAttribute?ge.prop(e,t,n):((a=1!==s||!ge.isXMLDoc(e))&&(t=t.toLowerCase(),o=ge.attrHooks[t]||(q.test(t)?P:U)),n!==E?null===n?void ge.removeAttr(e,t):o&&"set"in o&&a&&(i=o.set(e,n,t))!==E?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&a&&null!==(i=o.get(e,t))?i:null===(i=e.getAttribute(t))?E:i)},removeAttr:function(e,t){var n,r,i,o,a=0;if(t&&1===e.nodeType)for(r=t.split(D);a<r.length;a++)(i=r[a])&&(n=ge.propFix[i]||i,(o=q.test(i))||ge.attr(e,i,""),e.removeAttribute(K?i:n),o&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(L.test(e.nodeName)&&e.parentNode)ge.error("type property can't be changed");else if(!ge.support.radioValue&&"radio"===t&&ge.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return U&&ge.nodeName(e,"button")?U.get(e,t):t in e?e.value:null},set:function(e,t,n){if(U&&ge.nodeName(e,"button"))return U.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!ge.isXMLDoc(e))&&(t=ge.propFix[t]||t,i=ge.propHooks[t]),n!==E?i&&"set"in i&&(r=i.set(e,n,t))!==E?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):R.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:E}}}}),P={get:function(e,t){var n,r=ge.prop(e,t);return!0===r||"boolean"!=typeof r&&(n=e.getAttributeNode(t))&&!1!==n.nodeValue?t.toLowerCase():E},set:function(e,t,n){var r;return!1===t?ge.removeAttr(e,n):((r=ge.propFix[n]||n)in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},K||(Q={name:!0,id:!0,coords:!0},U=ge.valHooks.button={get:function(e,t){var n;return(n=e.getAttributeNode(t))&&(Q[t]?""!==n.value:n.specified)?n.value:E},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=g.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},ge.each(["width","height"],function(e,n){ge.attrHooks[n]=ge.extend(ge.attrHooks[n],{set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}})}),ge.attrHooks.contenteditable={get:U.get,set:function(e,t,n){""===t&&(t="false"),U.set(e,t,n)}}),ge.support.hrefNormalized||ge.each(["href","src","width","height"],function(e,n){ge.attrHooks[n]=ge.extend(ge.attrHooks[n],{get:function(e){var t=e.getAttribute(n,2);return null===t?E:t}})}),ge.support.style||(ge.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||E},set:function(e,t){return e.style.cssText=t+""}}),ge.support.optSelected||(ge.propHooks.selected=ge.extend(ge.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),ge.support.enctype||(ge.propFix.enctype="encoding"),ge.support.checkOn||ge.each(["radio","checkbox"],function(){ge.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),ge.each(["radio","checkbox"],function(){ge.valHooks[this]=ge.extend(ge.valHooks[this],{set:function(e,t){if(ge.isArray(t))return e.checked=0<=ge.inArray(ge(e).val(),t)}})});var W=/^(?:textarea|input|select)$/i,j=/^([^\.]*|)(?:\.(.+)|)$/,z=/(?:^|\s)hover(\.\S+|)\b/,G=/^key/,J=/^(?:mouse|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,$=function(e){return ge.event.special.hover?e:e.replace(z,"mouseenter$1 mouseleave$1")};function Y(){return!1}function Z(){return!0}ge.event={add:function(e,t,n,r,i){var o,a,s,l,u,c,A,d,p,f,h;if(3!==e.nodeType&&8!==e.nodeType&&t&&n&&(o=ge._data(e))){for(n.handler&&(n=(p=n).handler,i=p.selector),n.guid||(n.guid=ge.guid++),(s=o.events)||(o.events=s={}),(a=o.handle)||(o.handle=a=function(e){return void 0===ge||e&&ge.event.triggered===e.type?E:ge.event.dispatch.apply(a.elem,arguments)},a.elem=e),t=ge.trim($(t)).split(" "),l=0;l<t.length;l++)c=(u=j.exec(t[l])||[])[1],A=(u[2]||"").split(".").sort(),h=ge.event.special[c]||{},c=(i?h.delegateType:h.bindType)||c,h=ge.event.special[c]||{},d=ge.extend({type:c,origType:u[1],data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ge.expr.match.needsContext.test(i),namespace:A.join(".")},p),(f=s[c])||((f=s[c]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,A,a)||(e.addEventListener?e.addEventListener(c,a,!1):e.attachEvent&&e.attachEvent("on"+c,a))),h.add&&(h.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),ge.event.global[c]=!0;e=null}},global:{},remove:function(e,t,n,r,i){var o,a,s,l,u,c,A,d,p,f,h,m=ge.hasData(e)&&ge._data(e);if(m&&(d=m.events)){for(t=ge.trim($(t||"")).split(" "),o=0;o<t.length;o++)if(s=l=(a=j.exec(t[o])||[])[1],u=a[2],s){for(p=ge.event.special[s]||{},c=(f=d[s=(r?p.delegateType:p.bindType)||s]||[]).length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,A=0;A<f.length;A++)h=f[A],!i&&l!==h.origType||n&&n.guid!==h.guid||u&&!u.test(h.namespace)||r&&r!==h.selector&&("**"!==r||!h.selector)||(f.splice(A--,1),h.selector&&f.delegateCount--,p.remove&&p.remove.call(e,h));0===f.length&&c!==f.length&&(p.teardown&&!1!==p.teardown.call(e,u,m.handle)||ge.removeEvent(e,s,m.handle),delete d[s])}else for(s in d)ge.event.remove(e,s+t[o],n,r,!0);ge.isEmptyObject(d)&&(delete m.handle,ge.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(e,t,n,r){if(!n||3!==n.nodeType&&8!==n.nodeType){var i,o,a,s,l,u,c,A,d,p,f=e.type||e,h=[];if(!X.test(f+ge.event.triggered)&&(0<=f.indexOf("!")&&(f=f.slice(0,-1),o=!0),0<=f.indexOf(".")&&(f=(h=f.split(".")).shift(),h.sort()),n&&!ge.event.customEvent[f]||ge.event.global[f]))if((e="object"==typeof e?e[ge.expando]?e:new ge.Event(f,e):new ge.Event(f)).type=f,e.isTrigger=!0,e.exclusive=o,e.namespace=h.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=f.indexOf(":")<0?"on"+f:"",n){if(e.result=E,e.target||(e.target=n),(t=null!=t?ge.makeArray(t):[]).unshift(e),!(c=ge.event.special[f]||{}).trigger||!1!==c.trigger.apply(n,t)){if(d=[[n,c.bindType||f]],!r&&!c.noBubble&&!ge.isWindow(n)){for(p=c.delegateType||f,s=X.test(p+f)?n:n.parentNode,l=n;s;s=s.parentNode)d.push([s,p]),l=s;l===(n.ownerDocument||g)&&d.push([l.defaultView||l.parentWindow||m,p])}for(a=0;a<d.length&&!e.isPropagationStopped();a++)s=d[a][0],e.type=d[a][1],(A=(ge._data(s,"events")||{})[e.type]&&ge._data(s,"handle"))&&A.apply(s,t),(A=u&&s[u])&&ge.acceptData(s)&&A.apply&&!1===A.apply(s,t)&&e.preventDefault();return e.type=f,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(n.ownerDocument,t)||"click"===f&&ge.nodeName(n,"a")||!ge.acceptData(n)||u&&n[f]&&("focus"!==f&&"blur"!==f||0!==e.target.offsetWidth)&&!ge.isWindow(n)&&((l=n[u])&&(n[u]=null),n[ge.event.triggered=f](),ge.event.triggered=E,l&&(n[u]=l)),e.result}}else for(a in i=ge.cache)i[a].events&&i[a].events[f]&&ge.event.trigger(e,t,i[a].handle.elem,!0)}},dispatch:function(e){e=ge.event.fix(e||m.event);var t,n,r,i,o,a,s,l,u,c=(ge._data(this,"events")||{})[e.type]||[],A=c.delegateCount,d=v.call(arguments),p=!e.exclusive&&!e.namespace,f=ge.event.special[e.type]||{},h=[];if((d[0]=e).delegateTarget=this,!f.preDispatch||!1!==f.preDispatch.call(this,e)){if(A&&(!e.button||"click"!==e.type))for(r=e.target;r!=this;r=r.parentNode||this)if(!0!==r.disabled||"click"!==e.type){for(o={},s=[],t=0;t<A;t++)o[u=(l=c[t]).selector]===E&&(o[u]=l.needsContext?0<=ge(u,this).index(r):ge.find(u,this,null,[r]).length),o[u]&&s.push(l);s.length&&h.push({elem:r,matches:s})}for(c.length>A&&h.push({elem:this,matches:c.slice(A)}),t=0;t<h.length&&!e.isPropagationStopped();t++)for(a=h[t],e.currentTarget=a.elem,n=0;n<a.matches.length&&!e.isImmediatePropagationStopped();n++)l=a.matches[n],(p||!e.namespace&&!l.namespace||e.namespace_re&&e.namespace_re.test(l.namespace))&&(e.data=l.data,e.handleObj=l,(i=((ge.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,d))!==E&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,e),e.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||g).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||o===E||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[ge.expando])return e;var t,n,r=e,i=ge.event.fixHooks[e.type]||{},o=i.props?this.props.concat(i.props):this.props;for(e=ge.Event(r),t=o.length;t;)e[n=o[--t]]=r[n];return e.target||(e.target=r.srcElement||g),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){ge.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=ge.extend(new ge.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ge.event.trigger(i,null,t):ge.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ge.event.handle=ge.event.dispatch,ge.removeEvent=g.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},ge.Event=function(e,t){if(!(this instanceof ge.Event))return new ge.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?Z:Y):this.type=e,t&&ge.extend(this,t),this.timeStamp=e&&e.timeStamp||ge.now(),this[ge.expando]=!0},ge.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=Z;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z,this.stopPropagation()},isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y},ge.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,i){ge.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;r.selector;return n&&(n===this||ge.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ge.support.submitBubbles||(ge.event.special.submit={setup:function(){if(ge.nodeName(this,"form"))return!1;ge.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ge.nodeName(t,"input")||ge.nodeName(t,"button")?t.form:E;n&&!ge._data(n,"_submit_attached")&&(ge.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ge._data(n,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ge.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(ge.nodeName(this,"form"))return!1;ge.event.remove(this,"._submit")}}),ge.support.changeBubbles||(ge.event.special.change={setup:function(){if(W.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ge.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ge.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ge.event.simulate("change",this,e,!0)})),!1;ge.event.add(this,"beforeactivate._change",function(e){var t=e.target;W.test(t.nodeName)&&!ge._data(t,"_change_attached")&&(ge.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ge.event.simulate("change",this.parentNode,e,!0)}),ge._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ge.event.remove(this,"._change"),!W.test(this.nodeName)}}),ge.support.focusinBubbles||ge.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){ge.event.simulate(t,e.target,ge.event.fix(e),!0)};ge.event.special[t]={setup:function(){0==n++&&g.addEventListener(e,r,!0)},teardown:function(){0==--n&&g.removeEventListener(e,r,!0)}}}),ge.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){for(a in"string"!=typeof t&&(n=n||t,t=E),e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=E):null==r&&("string"==typeof t?(r=n,n=E):(r=n,n=t,t=E)),!1===r)r=Y;else if(!r)return this;return 1===i&&(o=r,(r=function(e){return ge().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=ge.guid++)),this.each(function(){ge.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ge(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=E),!1===n&&(n=Y),this.each(function(){ge.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return ge(this.context).on(e,this.selector,t,n),this},die:function(e,t){return ge(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){ge.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return ge.event.trigger(e,t,this[0],!0)},toggle:function(n){var r=arguments,e=n.guid||ge.guid++,i=0,t=function(e){var t=(ge._data(this,"lastToggle"+n.guid)||0)%i;return ge._data(this,"lastToggle"+n.guid,t+1),e.preventDefault(),r[t].apply(this,arguments)||!1};for(t.guid=e;i<r.length;)r[i++].guid=e;return this.click(t)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ge.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){ge.fn[n]=function(e,t){return null==t&&(t=e,e=null),0<arguments.length?this.on(n,null,e,t):this.trigger(n)},G.test(n)&&(ge.event.fixHooks[n]=ge.event.keyHooks),J.test(n)&&(ge.event.fixHooks[n]=ge.event.mouseHooks)}),function(e,t){var b,n,C,o,u,c,A,a,d,S,s,r,p,f,i,h,l,m,g="undefined",E=("sizcache"+Math.random()).replace(".",""),v=String,D=e.document,y=D.documentElement,B=0,w=0,T=[].pop,I=[].push,F=[].slice,x=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},_=function(e,t){return e[E]=null==t||t,e},M=function(){var n={},r=[];return _(function(e,t){return r.push(e)>C.cacheLength&&delete n[r.shift()],n[e+" "]=t},n)},N=M(),k=M(),U=M(),P="[\\x20\\t\\r\\n\\f]",Q="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",H=Q.replace("w","w#"),O="\\["+P+"*("+Q+")"+P+"*(?:([*^$|!~]?=)"+P+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+H+")|)|)"+P+"*\\]",L=":("+Q+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+O+")|[^:]|\\\\.)*|.*))\\)|)",R=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+P+"*((?:-\\d)?\\d*)"+P+"*\\)|)(?=[^-]|$)",V=new RegExp("^"+P+"+|((?:^|[^\\\\])(?:\\\\.)*)"+P+"+$","g"),q=new RegExp("^"+P+"*,"+P+"*"),K=new RegExp("^"+P+"*([\\x20\\t\\r\\n\\f>+~])"+P+"*"),W=new RegExp(L),j=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,z=/[\x20\t\r\n\f]*[+~]/,G=/h\d/i,J=/input|select|textarea|button/i,X=/\\(?!\\)/g,$={ID:new RegExp("^#("+Q+")"),CLASS:new RegExp("^\\.("+Q+")"),NAME:new RegExp("^\\[name=['\"]?("+Q+")['\"]?\\]"),TAG:new RegExp("^("+Q.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+L),POS:new RegExp(R,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+P+"*(even|odd|(([+-]|)(\\d*)n|)"+P+"*(?:([+-]|)"+P+"*(\\d+)|))"+P+"*\\)|)","i"),needsContext:new RegExp("^"+P+"*[>+~]|"+R,"i")},Y=function(e){var t=D.createElement("div");try{return e(t)}catch(e){return!1}finally{t=null}},Z=Y(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),ee=Y(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==g&&"#"===e.firstChild.getAttribute("href")}),te=Y(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ne=Y(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),re=Y(function(e){e.id=E+0,e.innerHTML="<a name='"+E+"'></a><div name='"+E+"'></div>",y.insertBefore(e,y.firstChild);var t=D.getElementsByName&&D.getElementsByName(E).length===2+D.getElementsByName(E+0).length;return n=!D.getElementById(E),y.removeChild(e),t});try{F.call(y.childNodes,0)[0].nodeType}catch(e){F=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}function ie(e,t,n,r){n=n||[];var i,o,a,s,l=(t=t||D).nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(!(a=u(t))&&!r&&(i=j.exec(e)))if(s=i[1]){if(9===l){if(!(o=t.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&c(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return I.apply(n,F.call(t.getElementsByTagName(e),0)),n;if((s=i[3])&&ne&&t.getElementsByClassName)return I.apply(n,F.call(t.getElementsByClassName(s),0)),n}return he(e.replace(V,"$1"),t,n,r,a)}function oe(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ae(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function se(a){return _(function(o){return o=+o,_(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function le(e,t,n){if(e===t)return n;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}function ue(e,t){var n,r,i,o,a,s,l,u=k[E][e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=C.preFilter;a;){for(o in n&&!(r=q.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=K.exec(a))&&(i.push(n=new v(r.shift())),a=a.slice(n.length),n.type=r[0].replace(V," ")),C.filter)!(r=$[o].exec(a))||l[o]&&!(r=l[o](r))||(i.push(n=new v(r.shift())),a=a.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?a.length:a?ie.error(e):k(e,s).slice(0)}function ce(a,e,t){var s=e.dir,l=t&&"parentNode"===e.dir,u=w++;return e.first?function(e,t,n){for(;e=e[s];)if(l||1===e.nodeType)return a(e,t,n)}:function(e,t,n){if(n){for(;e=e[s];)if((l||1===e.nodeType)&&a(e,t,n))return e}else for(var r,i=B+" "+u+" ",o=i+b;e=e[s];)if(l||1===e.nodeType){if((r=e[E])===o)return e.sizset;if("string"==typeof r&&0===r.indexOf(i)){if(e.sizset)return e}else{if(e[E]=o,a(e,t,n))return e.sizset=!0,e;e.sizset=!1}}}}function Ae(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function de(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function pe(p,f,h,m,g,e){return m&&!m[E]&&(m=pe(m)),g&&!g[E]&&(g=pe(g,e)),_(function(e,t,n,r){var i,o,a,s=[],l=[],u=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)ie(e,t[r],n);return n}(f||"*",n.nodeType?[n]:n,[]),A=!p||!e&&f?c:de(c,s,p,n,r),d=h?g||(e?p:u||m)?[]:t:A;if(h&&h(A,d,n,r),m)for(i=de(d,l),m(i,[],n,r),o=i.length;o--;)(a=i[o])&&(d[l[o]]=!(A[l[o]]=a));if(e){if(g||p){if(g){for(i=[],o=d.length;o--;)(a=d[o])&&i.push(A[o]=a);g(null,d=[],i,r)}for(o=d.length;o--;)(a=d[o])&&-1<(i=g?x.call(e,a):s[o])&&(e[i]=!(t[i]=a))}}else d=de(d===t?d.splice(u,d.length):d),g?g(null,t,d,r):I.apply(t,d)})}function fe(e){for(var r,t,n,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=ce(function(e){return e===r},a,!0),u=ce(function(e){return-1<x.call(r,e)},a,!0),c=[function(e,t,n){return!o&&(n||t!==S)||((r=t).nodeType?l(e,t,n):u(e,t,n))}];s<i;s++)if(t=C.relative[e[s].type])c=[ce(Ae(c),t)];else{if((t=C.filter[e[s].type].apply(null,e[s].matches))[E]){for(n=++s;n<i&&!C.relative[e[n].type];n++);return pe(1<s&&Ae(c),1<s&&e.slice(0,s-1).join("").replace(V,"$1"),t,s<n&&fe(e.slice(s,n)),n<i&&fe(e=e.slice(n)),n<i&&e.join(""))}c.push(t)}return Ae(c)}function he(e,t,n,r,i){var o,a,s,l,u,c=ue(e);c.length;if(!r&&1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(s=a[0]).type&&9===t.nodeType&&!i&&C.relative[a[1].type]){if(!(t=C.find.ID(s.matches[0].replace(X,""),t,i)[0]))return n;e=e.slice(a.shift().length)}for(o=$.POS.test(e)?-1:a.length-1;0<=o&&(s=a[o],!C.relative[l=s.type]);o--)if((u=C.find[l])&&(r=u(s.matches[0].replace(X,""),z.test(a[0].type)&&t.parentNode||t,i))){if(a.splice(o,1),!(e=r.length&&a.join("")))return I.apply(n,F.call(r,0)),n;break}}return A(e,c)(r,t,i,n,z.test(e)),n}function me(){}ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){return 0<ie(t,null,null,[e]).length},o=ie.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},u=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},c=ie.contains=y.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},ie.attr=function(e,t){var n,r=u(e);return r||(t=t.toLowerCase()),(n=C.attrHandle[t])?n(e):r||te?e.getAttribute(t):(n=e.getAttributeNode(t))?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null},C=ie.selectors={cacheLength:50,createPseudo:_,match:$,attrHandle:ee?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:n?function(e,t,n){if(typeof t.getElementById!==g&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,t,n){if(typeof t.getElementById!==g&&!n){var r=t.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==g&&r.getAttributeNode("id").value===e?[r]:void 0:[]}},TAG:Z?function(e,t){if(typeof t.getElementsByTagName!==g)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if("*"!==e)return n;for(var r,i=[],o=0;r=n[o];o++)1===r.nodeType&&i.push(r);return i},NAME:re&&function(e,t){if(typeof t.getElementsByName!==g)return t.getElementsByName(name)},CLASS:ne&&function(e,t,n){if(typeof t.getElementsByClassName!==g&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(X,""),e[3]=(e[4]||e[5]||"").replace(X,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||ie.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n;return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(W.test(t)&&(n=ue(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:n?function(t){return t=t.replace(X,""),function(e){return e.getAttribute("id")===t}}:function(n){return n=n.replace(X,""),function(e){var t=typeof e.getAttributeNode!==g&&e.getAttributeNode("id");return t&&t.value===n}},TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(X,"").toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(e){var t=N[E][e+" "];return t||(t=new RegExp("(^|"+P+")"+e+"("+P+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==g&&e.getAttribute("class")||"")})},ATTR:function(r,i,o){return function(e,t){var n=ie.attr(e,r);return null==n?"!="===i:!i||(n+="","="===i?n===o:"!="===i?n!==o:"^="===i?o&&0===n.indexOf(o):"*="===i?o&&-1<n.indexOf(o):"$="===i?o&&n.substr(n.length-o.length)===o:"~="===i?-1<(" "+n+" ").indexOf(o):"|="===i&&(n===o||n.substr(0,o.length+1)===o+"-"))}},CHILD:function(n,e,i,o){return"nth"===n?function(e){var t,n,r=e.parentNode;if(1===i&&0===o)return!0;if(r)for(n=0,t=r.firstChild;t&&(1!==t.nodeType||(n++,e!==t));t=t.nextSibling);return(n-=o)===i||n%i==0&&0<=n/i}:function(e){var t=e;switch(n){case"only":case"first":for(;t=t.previousSibling;)if(1===t.nodeType)return!1;if("first"===n)return!0;t=e;case"last":for(;t=t.nextSibling;)if(1===t.nodeType)return!1;return!0}}},PSEUDO:function(e,o){var t,a=C.pseudos[e]||C.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return a[E]?a(o):1<a.length?(t=[e,e,"",o],C.setFilters.hasOwnProperty(e.toLowerCase())?_(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=x.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:_(function(e){var r=[],i=[],s=A(e.replace(V,"$1"));return s[E]?_(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),!i.pop()}}),has:_(function(t){return function(e){return 0<ie(t,e).length}}),contains:_(function(t){return function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!C.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if("@"<e.nodeName||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return G.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:oe("radio"),checkbox:oe("checkbox"),file:oe("file"),password:oe("password"),image:oe("image"),submit:ae("submit"),reset:ae("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return J.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:se(function(){return[0]}),last:se(function(e,t){return[t-1]}),eq:se(function(e,t,n){return[n<0?n+t:n]}),even:se(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:se(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:se(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:se(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},a=y.compareDocumentPosition?function(e,t){return e===t?(d=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return d=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],o=[],a=e.parentNode,s=t.parentNode,l=a;if(a===s)return le(e,t);if(!a)return-1;if(!s)return 1;for(;l;)i.unshift(l),l=l.parentNode;for(l=s;l;)o.unshift(l),l=l.parentNode;n=i.length,r=o.length;for(var u=0;u<n&&u<r;u++)if(i[u]!==o[u])return le(i[u],o[u]);return u===n?le(e,o[u],-1):le(i[u],t,1)},[0,0].sort(a),s=!d,ie.uniqueSort=function(e){var t,n=[],r=1,i=0;if(d=s,e.sort(a),d){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},A=ie.compile=function(e,t){var n,m,g,v,y,w,r=[],i=[],o=U[E][e+" "];if(!o){for(t||(t=ue(e)),n=t.length;n--;)(o=fe(t[n]))[E]?r.push(o):i.push(o);o=U(e,(m=i,v=0<(g=r).length,y=0<m.length,(w=function(e,t,n,r,i){var o,a,s,l=[],u=0,c="0",A=e&&[],d=null!=i,p=S,f=e||y&&C.find.TAG("*",i&&t.parentNode||t),h=B+=null==p?1:Math.E;for(d&&(S=t!==D&&t,b=w.el);null!=(o=f[c]);c++){if(y&&o){for(a=0;s=m[a];a++)if(s(o,t,n)){r.push(o);break}d&&(B=h,b=++w.el)}v&&((o=!s&&o)&&u--,e&&A.push(o))}if(u+=c,v&&c!==u){for(a=0;s=g[a];a++)s(A,l,t,n);if(e){if(0<u)for(;c--;)A[c]||l[c]||(l[c]=T.call(r));l=de(l)}I.apply(r,l),d&&!e&&0<l.length&&1<u+g.length&&ie.uniqueSort(r)}return d&&(B=h,S=p),A}).el=0,v?_(w):w))}return o},D.querySelectorAll&&(p=he,f=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,h=[":focus"],l=[":active"],m=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector,Y(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+P+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),Y(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&h.push("[*^$]="+P+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled")}),h=new RegExp(h.join("|")),he=function(e,t,n,r,i){if(!r&&!i&&!h.test(e)){var o,a,s=!0,l=E,u=t,c=9===t.nodeType&&e;if(1===t.nodeType&&"object"!==t.nodeName.toLowerCase()){for(o=ue(e),(s=t.getAttribute("id"))?l=s.replace(f,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",a=o.length;a--;)o[a]=l+o[a].join("");u=z.test(e)&&t.parentNode||t,c=o.join(",")}if(c)try{return I.apply(n,F.call(u.querySelectorAll(c),0)),n}catch(e){}finally{s||t.removeAttribute("id")}}return p(e,t,n,r,i)},m&&(Y(function(e){r=m.call(e,"div");try{m.call(e,"[test!='']:sizzle"),l.push("!=",L)}catch(e){}}),l=new RegExp(l.join("|")),ie.matchesSelector=function(e,t){if(t=t.replace(i,"='$1']"),!u(e)&&!l.test(t)&&!h.test(t))try{var n=m.call(e,t);if(n||r||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<ie(t,null,null,[e]).length})),C.pseudos.nth=C.pseudos.eq,C.filters=me.prototype=C.pseudos,C.setFilters=new me,ie.attr=ge.attr,ge.find=ie,ge.expr=ie.selectors,ge.expr[":"]=ge.expr.pseudos,ge.unique=ie.uniqueSort,ge.text=ie.getText,ge.isXMLDoc=ie.isXML,ge.contains=ie.contains}(m);var ee=/Until$/,te=/^(?:parents|prev(?:Until|All))/,ne=/^.[^:#\[\.,]*$/,re=ge.expr.match.needsContext,ie={children:!0,contents:!0,next:!0,prev:!0};function oe(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function ae(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function se(e,n,r){if(n=n||0,ge.isFunction(n))return ge.grep(e,function(e,t){return!!n.call(e,t,e)===r});if(n.nodeType)return ge.grep(e,function(e,t){return e===n===r});if("string"==typeof n){var t=ge.grep(e,function(e){return 1===e.nodeType});if(ne.test(n))return ge.filter(n,t,!r);n=ge.filter(n,t)}return ge.grep(e,function(e,t){return 0<=ge.inArray(e,n)===r})}function le(e){var t=Ae.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}ge.fn.extend({find:function(e){var t,n,r,i,o,a,s=this;if("string"!=typeof e)return ge(e).filter(function(){for(t=0,n=s.length;t<n;t++)if(ge.contains(s[t],this))return!0});for(a=this.pushStack("","find",e),t=0,n=this.length;t<n;t++)if(r=a.length,ge.find(e,this[t],a),0<t)for(i=r;i<a.length;i++)for(o=0;o<r;o++)if(a[o]===a[i]){a.splice(i--,1);break}return a},has:function(e){var t,n=ge(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(ge.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(se(this,e,!1),"not",e)},filter:function(e){return this.pushStack(se(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?re.test(e)?0<=ge(e,this.context).index(this[0]):0<ge.filter(e,this).length:0<this.filter(e).length)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=re.test(e)||"string"!=typeof e?ge(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?-1<a.index(n):ge.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return o=1<o.length?ge.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?ge.inArray(this[0],ge(e)):ge.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ge(e,t):ge.makeArray(e&&e.nodeType?[e]:e),r=ge.merge(this.get(),n);return this.pushStack(oe(n[0])||oe(r[0])?r:ge.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ge.fn.andSelf=ge.fn.addBack,ge.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ge.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ge.dir(e,"parentNode",n)},next:function(e){return ae(e,"nextSibling")},prev:function(e){return ae(e,"previousSibling")},nextAll:function(e){return ge.dir(e,"nextSibling")},prevAll:function(e){return ge.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ge.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ge.dir(e,"previousSibling",n)},siblings:function(e){return ge.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ge.sibling(e.firstChild)},contents:function(e){return ge.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ge.merge([],e.childNodes)}},function(r,i){ge.fn[r]=function(e,t){var n=ge.map(this,i,e);return ee.test(r)||(t=e),t&&"string"==typeof t&&(n=ge.filter(t,n)),n=1<this.length&&!ie[r]?ge.unique(n):n,1<this.length&&te.test(r)&&(n=n.reverse()),this.pushStack(n,r,v.call(arguments).join(","))}}),ge.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?ge.find.matchesSelector(t[0],e)?[t[0]]:[]:ge.find.matches(e,t)},dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(n===E||1!==i.nodeType||!ge(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ue,ce,Ae="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",de=/ jQuery\d+="(?:null|\d+)"/g,pe=/^\s+/,fe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,he=/<([\w:]+)/,me=/<tbody/i,ve=/<|&#?\w+;/,ye=/<(?:script|style|link)/i,we=/<(?:script|object|embed|option|style)/i,be=new RegExp("<(?:"+Ae+")[\\s/>]","i"),Ce=/^(?:checkbox|radio)$/,Se=/checked\s*(?:[^=]|=\s*.checked.)/i,Ee=/\/(java|ecma)script/i,De=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Be={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Te=le(g),Ie=Te.appendChild(g.createElement("div"));function Fe(e,t){if(1===t.nodeType&&ge.hasData(e)){var n,r,i,o=ge._data(e),a=ge._data(t,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;r<i;r++)ge.event.add(t,n,s[n][r]);a.data&&(a.data=ge.extend({},a.data))}}function xe(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(n=t.nodeName.toLowerCase())?(t.parentNode&&(t.outerHTML=e.outerHTML),ge.support.html5Clone&&e.innerHTML&&!ge.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ce.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(ge.expando))}function _e(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function Me(e){Ce.test(e.type)&&(e.defaultChecked=e.checked)}Be.optgroup=Be.option,Be.tbody=Be.tfoot=Be.colgroup=Be.caption=Be.thead,Be.th=Be.td,ge.support.htmlSerialize||(Be._default=[1,"X<div>","</div>"]),ge.fn.extend({text:function(e){return ge.access(this,function(e){return e===E?ge.text(this):this.empty().append((this[0]&&this[0].ownerDocument||g).createTextNode(e))},null,e,arguments.length)},wrapAll:function(t){if(ge.isFunction(t))return this.each(function(e){ge(this).wrapAll(t.call(this,e))});if(this[0]){var e=ge(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(n){return ge.isFunction(n)?this.each(function(e){ge(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ge(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=ge.isFunction(t);return this.each(function(e){ge(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){ge.nodeName(this,"body")||ge(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(e,this.firstChild)})},before:function(){if(!oe(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=ge.clean(arguments);return this.pushStack(ge.merge(e,this),"before",this.selector)}},after:function(){if(!oe(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=ge.clean(arguments);return this.pushStack(ge.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)e&&!ge.filter(e,[n]).length||(t||1!==n.nodeType||(ge.cleanData(n.getElementsByTagName("*")),ge.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&ge.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ge.clone(this,e,t)})},html:function(e){return ge.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===E)return 1===t.nodeType?t.innerHTML.replace(de,""):E;if("string"==typeof e&&!ye.test(e)&&(ge.support.htmlSerialize||!be.test(e))&&(ge.support.leadingWhitespace||!pe.test(e))&&!Be[(he.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(fe,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ge.cleanData(t.getElementsByTagName("*")),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(r){return oe(this[0])?this.length?this.pushStack(ge(ge.isFunction(r)?r():r),"replaceWith",r):this:ge.isFunction(r)?this.each(function(e){var t=ge(this),n=t.html();t.replaceWith(r.call(this,e,n))}):("string"!=typeof r&&(r=ge(r).detach()),this.each(function(){var e=this.nextSibling,t=this.parentNode;ge(this).remove(),e?ge(e).before(r):ge(t).append(r)}))},detach:function(e){return this.remove(e,!0)},domManip:function(n,r,i){var e,t,o,a,s,l,u=0,c=(n=[].concat.apply([],n))[0],A=[],d=this.length;if(!ge.support.checkClone&&1<d&&"string"==typeof c&&Se.test(c))return this.each(function(){ge(this).domManip(n,r,i)});if(ge.isFunction(c))return this.each(function(e){var t=ge(this);n[0]=c.call(this,e,r?t.html():E),t.domManip(n,r,i)});if(this[0]){if(t=(o=(e=ge.buildFragment(n,this,A)).fragment).firstChild,1===o.childNodes.length&&(o=t),t)for(r=r&&ge.nodeName(t,"tr"),a=e.cacheable||d-1;u<d;u++)i.call(r&&ge.nodeName(this[u],"table")?(s=this[u],l="tbody",s.getElementsByTagName(l)[0]||s.appendChild(s.ownerDocument.createElement(l))):this[u],u===a?o:ge.clone(o,!0,!0));o=t=null,A.length&&ge.each(A,function(e,t){t.src?ge.ajax?ge.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):ge.error("no ajax"):ge.globalEval((t.text||t.textContent||t.innerHTML||"").replace(De,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),ge.buildFragment=function(e,t,n){var r,i,o,a=e[0];return t=(t=!(t=t||g).nodeType&&t[0]||t).ownerDocument||t,!(1===e.length&&"string"==typeof a&&a.length<512&&t===g&&"<"===a.charAt(0))||we.test(a)||!ge.support.checkClone&&Se.test(a)||!ge.support.html5Clone&&be.test(a)||(i=!0,o=(r=ge.fragments[a])!==E),r||(r=t.createDocumentFragment(),ge.clean(e,t,r,n),i&&(ge.fragments[a]=o&&r)),{fragment:r,cacheable:i}},ge.fragments={},ge.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,l){ge.fn[s]=function(e){var t,n=0,r=[],i=ge(e),o=i.length,a=1===this.length&&this[0].parentNode;if((null==a||a&&11===a.nodeType&&1===a.childNodes.length)&&1===o)return i[l](this[0]),this;for(;n<o;n++)t=(0<n?this.clone(!0):this).get(),ge(i[n])[l](t),r=r.concat(t);return this.pushStack(r,s,i.selector)}}),ge.extend({clone:function(e,t,n){var r,i,o,a;if(ge.support.html5Clone||ge.isXMLDoc(e)||!be.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Ie.innerHTML=e.outerHTML,Ie.removeChild(a=Ie.firstChild)),!(ge.support.noCloneEvent&&ge.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ge.isXMLDoc(e)))for(xe(e,a),r=_e(e),i=_e(a),o=0;r[o];++o)i[o]&&xe(r[o],i[o]);if(t&&(Fe(e,a),n))for(r=_e(e),i=_e(a),o=0;r[o];++o)Fe(r[o],i[o]);return r=i=null,a},clean:function(e,t,n,r){var i,o,a,s,l,u,c,A,d,p,f,h=t===g&&Te,m=[];for(t&&void 0!==t.createDocumentFragment||(t=g),i=0;null!=(a=e[i]);i++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(ve.test(a)){for(h=h||le(t),c=t.createElement("div"),h.appendChild(c),a=a.replace(fe,"<$1></$2>"),s=(he.exec(a)||["",""])[1].toLowerCase(),u=(l=Be[s]||Be._default)[0],c.innerHTML=l[1]+a+l[2];u--;)c=c.lastChild;if(!ge.support.tbody)for(A=me.test(a),o=(d="table"!==s||A?"<table>"!==l[1]||A?[]:c.childNodes:c.firstChild&&c.firstChild.childNodes).length-1;0<=o;--o)ge.nodeName(d[o],"tbody")&&!d[o].childNodes.length&&d[o].parentNode.removeChild(d[o]);!ge.support.leadingWhitespace&&pe.test(a)&&c.insertBefore(t.createTextNode(pe.exec(a)[0]),c.firstChild),a=c.childNodes,c.parentNode.removeChild(c)}else a=t.createTextNode(a);a.nodeType?m.push(a):ge.merge(m,a)}if(c&&(a=c=h=null),!ge.support.appendChecked)for(i=0;null!=(a=m[i]);i++)ge.nodeName(a,"input")?Me(a):void 0!==a.getElementsByTagName&&ge.grep(a.getElementsByTagName("input"),Me);if(n)for(p=function(e){if(!e.type||Ee.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)},i=0;null!=(a=m[i]);i++)ge.nodeName(a,"script")&&p(a)||(n.appendChild(a),void 0!==a.getElementsByTagName&&(f=ge.grep(ge.merge([],a.getElementsByTagName("script")),p),m.splice.apply(m,[i+1,0].concat(f)),i+=f.length));return m},cleanData:function(e,t){for(var n,r,i,o,a=0,s=ge.expando,l=ge.cache,u=ge.support.deleteExpando,c=ge.event.special;null!=(i=e[a]);a++)if((t||ge.acceptData(i))&&(n=(r=i[s])&&l[r])){if(n.events)for(o in n.events)c[o]?ge.event.remove(i,o):ge.removeEvent(i,o,n.handle);l[r]&&(delete l[r],u?delete i[s]:i.removeAttribute?i.removeAttribute(s):i[s]=null,ge.deletedIds.push(r))}}}),ge.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},ce={},(ue=ge.uaMatch(r.userAgent)).browser&&(ce[ue.browser]=!0,ce.version=ue.version),ce.chrome?ce.webkit=!0:ce.webkit&&(ce.safari=!0),ge.browser=ce,ge.sub=function(){function n(e,t){return new n.fn.init(e,t)}ge.extend(!0,n,this),n.superclass=this,((n.fn=n.prototype=this()).constructor=n).sub=this.sub,n.fn.init=function(e,t){return t&&t instanceof ge&&!(t instanceof n)&&(t=n(t)),ge.fn.init.call(this,e,t,r)},n.fn.init.prototype=n.fn;var r=n(g);return n};var Ne,ke,Ue,Pe=/alpha\([^)]*\)/i,Qe=/opacity=([^)]*)/,He=/^(top|right|bottom|left)$/,Oe=/^(none|table(?!-c[ea]).+)/,Le=/^margin/,Re=new RegExp("^("+A+")(.*)$","i"),Ve=new RegExp("^("+A+")(?!px)[a-z%]+$","i"),qe=new RegExp("^([-+])=("+A+")","i"),Ke={BODY:"block"},We={position:"absolute",visibility:"hidden",display:"block"},je={letterSpacing:0,fontWeight:400},ze=["Top","Right","Bottom","Left"],Ge=["Webkit","O","Moz","ms"],Je=ge.fn.toggle;function Xe(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Ge.length;i--;)if((t=Ge[i]+n)in e)return t;return r}function $e(e,t){return e=t||e,"none"===ge.css(e,"display")||!ge.contains(e.ownerDocument,e)}function Ye(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i[o]=ge._data(n,"olddisplay"),t?(i[o]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&$e(n)&&(i[o]=ge._data(n,"olddisplay",nt(n.nodeName)))):(r=Ne(n,"display"),i[o]||"none"===r||ge._data(n,"olddisplay",r)));for(o=0;o<a;o++)(n=e[o]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?i[o]||"":"none"));return e}function Ze(e,t,n){var r=Re.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function et(e,t,n,r){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,o=0;i<4;i+=2)"margin"===n&&(o+=ge.css(e,n+ze[i],!0)),r?("content"===n&&(o-=parseFloat(Ne(e,"padding"+ze[i]))||0),"margin"!==n&&(o-=parseFloat(Ne(e,"border"+ze[i]+"Width"))||0)):(o+=parseFloat(Ne(e,"padding"+ze[i]))||0,"padding"!==n&&(o+=parseFloat(Ne(e,"border"+ze[i]+"Width"))||0));return o}function tt(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,i=!0,o=ge.support.boxSizing&&"border-box"===ge.css(e,"boxSizing");if(r<=0||null==r){if(((r=Ne(e,t))<0||null==r)&&(r=e.style[t]),Ve.test(r))return r;i=o&&(ge.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+et(e,t,n||(o?"border":"content"),i)+"px"}function nt(e){if(Ke[e])return Ke[e];var t=ge("<"+e+">").appendTo(g.body),n=t.css("display");return t.remove(),"none"!==n&&""!==n||(ke=g.body.appendChild(ke||ge.extend(g.createElement("iframe"),{frameBorder:0,width:0,height:0})),Ue&&ke.createElement||((Ue=(ke.contentWindow||ke.contentDocument).document).write("<!doctype html><html><body>"),Ue.close()),t=Ue.body.appendChild(Ue.createElement(e)),n=Ne(t,"display"),g.body.removeChild(ke)),Ke[e]=n}ge.fn.extend({css:function(e,t){return ge.access(this,function(e,t,n){return n!==E?ge.style(e,t,n):ge.css(e,t)},e,t,1<arguments.length)},show:function(){return Ye(this,!0)},hide:function(){return Ye(this)},toggle:function(e,t){var n="boolean"==typeof e;return ge.isFunction(e)&&ge.isFunction(t)?Je.apply(this,arguments):this.each(function(){(n?e:$e(this))?ge(this).show():ge(this).hide()})}}),ge.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ne(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ge.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ge.camelCase(t),l=e.style;if(t=ge.cssProps[s]||(ge.cssProps[s]=Xe(l,s)),a=ge.cssHooks[t]||ge.cssHooks[s],n===E)return a&&"get"in a&&(i=a.get(e,!1,r))!==E?i:l[t];if(!("string"===(o=typeof n)&&(i=qe.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ge.css(e,t)),o="number"),null==n||"number"===o&&isNaN(n)||("number"!==o||ge.cssNumber[s]||(n+="px"),a&&"set"in a&&(n=a.set(e,n,r))===E)))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var i,o,a,s=ge.camelCase(t);return t=ge.cssProps[s]||(ge.cssProps[s]=Xe(e.style,s)),(a=ge.cssHooks[t]||ge.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,r)),i===E&&(i=Ne(e,t)),"normal"===i&&t in je&&(i=je[t]),n||r!==E?(o=parseFloat(i),n||ge.isNumeric(o)?o||0:i):i},swap:function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r}}),m.getComputedStyle?Ne=function(e,t){var n,r,i,o,a=m.getComputedStyle(e,null),s=e.style;return a&&(""!==(n=a.getPropertyValue(t)||a[t])||ge.contains(e.ownerDocument,e)||(n=ge.style(e,t)),Ve.test(n)&&Le.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=n,n=a.width,s.width=r,s.minWidth=i,s.maxWidth=o)),n}:g.documentElement.currentStyle&&(Ne=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],o=e.style;return null==i&&o&&o[t]&&(i=o[t]),Ve.test(i)&&!He.test(t)&&(n=o.left,(r=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":i,i=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),""===i?"auto":i}),ge.each(["height","width"],function(e,r){ge.cssHooks[r]={get:function(e,t,n){if(t)return 0===e.offsetWidth&&Oe.test(Ne(e,"display"))?ge.swap(e,We,function(){return tt(e,r,n)}):tt(e,r,n)},set:function(e,t,n){return Ze(0,t,n?et(e,r,n,ge.support.boxSizing&&"border-box"===ge.css(e,"boxSizing")):0)}}}),ge.support.opacity||(ge.cssHooks.opacity={get:function(e,t){return Qe.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ge.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";(n.zoom=1)<=t&&""===ge.trim(o.replace(Pe,""))&&n.removeAttribute&&(n.removeAttribute("filter"),r&&!r.filter)||(n.filter=Pe.test(o)?o.replace(Pe,i):o+" "+i)}}),ge(function(){ge.support.reliableMarginRight||(ge.cssHooks.marginRight={get:function(e,t){return ge.swap(e,{display:"inline-block"},function(){if(t)return Ne(e,"marginRight")})}}),!ge.support.pixelPosition&&ge.fn.position&&ge.each(["top","left"],function(e,r){ge.cssHooks[r]={get:function(e,t){if(t){var n=Ne(e,r);return Ve.test(n)?ge(e).position()[r]+"px":n}}}})}),ge.expr&&ge.expr.filters&&(ge.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!ge.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||Ne(e,"display"))},ge.expr.filters.visible=function(e){return!ge.expr.filters.hidden(e)}),ge.each({margin:"",padding:"",border:"Width"},function(i,o){ge.cssHooks[i+o]={expand:function(e){var t,n="string"==typeof e?e.split(" "):[e],r={};for(t=0;t<4;t++)r[i+ze[t]+o]=n[t]||n[t-2]||n[0];return r}},Le.test(i)||(ge.cssHooks[i+o].set=Ze)});var rt=/%20/g,it=/\[\]$/,ot=/\r?\n/g,at=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,st=/^(?:select|textarea)/i;function lt(n,e,r,i){var t;if(ge.isArray(e))ge.each(e,function(e,t){r||it.test(n)?i(n,t):lt(n+"["+("object"==typeof t?e:"")+"]",t,r,i)});else if(r||"object"!==ge.type(e))i(n,e);else for(t in e)lt(n+"["+t+"]",e[t],r,i)}ge.fn.extend({serialize:function(){return ge.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?ge.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||st.test(this.nodeName)||at.test(this.type))}).map(function(e,n){var t=ge(this).val();return null==t?null:ge.isArray(t)?ge.map(t,function(e,t){return{name:n.name,value:e.replace(ot,"\r\n")}}):{name:n.name,value:t.replace(ot,"\r\n")}}).get()}}),ge.param=function(e,t){var n,r=[],i=function(e,t){t=ge.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===E&&(t=ge.ajaxSettings&&ge.ajaxSettings.traditional),ge.isArray(e)||e.jquery&&!ge.isPlainObject(e))ge.each(e,function(){i(this.name,this.value)});else for(n in e)lt(n,e[n],t,i);return r.join("&").replace(rt,"+")};var ut,ct,At=/#.*$/,dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,pt=/^(?:GET|HEAD)$/,ft=/^\/\//,ht=/\?/,mt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,gt=/([?&])_=[^&]*/,vt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,yt=ge.fn.load,wt={},bt={},Ct=["*/"]+["*"];try{ct=e.href}catch(e){(ct=g.createElement("a")).href="",ct=ct.href}function St(s){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r,i=e.toLowerCase().split(D),o=0,a=i.length;if(ge.isFunction(t))for(;o<a;o++)n=i[o],(r=/^\+/.test(n))&&(n=n.substr(1)||"*"),(s[n]=s[n]||[])[r?"unshift":"push"](t)}}function Et(e,t,n,r,i,o){(o=o||{})[i=i||t.dataTypes[0]]=!0;for(var a,s=e[i],l=0,u=s?s.length:0,c=e===wt;l<u&&(c||!a);l++)"string"==typeof(a=s[l](t,n,r))&&(a=!c||o[a]?E:(t.dataTypes.unshift(a),Et(e,t,n,r,a,o)));return!c&&a||o["*"]||(a=Et(e,t,n,r,"*",o)),a}function Dt(e,t){var n,r,i=ge.ajaxSettings.flatOptions||{};for(n in t)t[n]!==E&&((i[n]?e:r||(r={}))[n]=t[n]);r&&ge.extend(!0,e,r)}ut=vt.exec(ct.toLowerCase())||[],ge.fn.load=function(e,t,n){if("string"!=typeof e&&yt)return yt.apply(this,arguments);if(!this.length)return this;var r,i,o,a=this,s=e.indexOf(" ");return 0<=s&&(r=e.slice(s,e.length),e=e.slice(0,s)),ge.isFunction(t)?(n=t,t=E):t&&"object"==typeof t&&(i="POST"),ge.ajax({url:e,type:i,dataType:"html",data:t,complete:function(e,t){n&&a.each(n,o||[e.responseText,t,e])}}).done(function(e){o=arguments,a.html(r?ge("<div>").append(e.replace(mt,"")).find(r):e)}),this},ge.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){ge.fn[t]=function(e){return this.on(t,e)}}),ge.each(["get","post"],function(e,i){ge[i]=function(e,t,n,r){return ge.isFunction(t)&&(r=r||n,n=t,t=E),ge.ajax({type:i,url:e,data:t,success:n,dataType:r})}}),ge.extend({getScript:function(e,t){return ge.get(e,E,t,"script")},getJSON:function(e,t,n){return ge.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Dt(e,ge.ajaxSettings):(t=e,e=ge.ajaxSettings),Dt(e,t),e},ajaxSettings:{url:ct,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ut[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ct},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":m.String,"text html":!0,"text json":ge.parseJSON,"text xml":ge.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:St(wt),ajaxTransport:St(bt),ajax:function(e,t){"object"==typeof e&&(t=e,e=E),t=t||{};var c,A,n,d,p,r,f,i,h=ge.ajaxSetup({},t),m=h.context||h,g=m!==h&&(m.nodeType||m instanceof ge)?ge(m):ge.event,v=ge.Deferred(),y=ge.Callbacks("once memory"),w=h.statusCode||{},o={},a={},b=0,s="canceled",C={readyState:0,setRequestHeader:function(e,t){if(!b){var n=e.toLowerCase();e=a[n]=a[n]||e,o[e]=t}return this},getAllResponseHeaders:function(){return 2===b?A:null},getResponseHeader:function(e){var t;if(2===b){if(!n)for(n={};t=dt.exec(A);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return t===E?null:t},overrideMimeType:function(e){return b||(h.mimeType=e),this},abort:function(e){return e=e||s,d&&d.abort(e),l(0,e),this}};function l(e,t,n,r){var i,o,a,s,l,u=t;2!==b&&(b=2,p&&clearTimeout(p),d=E,A=r||"",C.readyState=0<e?4:0,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,l=e.dataTypes,u=e.responseFields;for(i in u)i in n&&(t[u[i]]=n[i]);for(;"*"===l[0];)l.shift(),r===E&&(r=e.mimeType||t.getResponseHeader("content-type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(h,C,n)),200<=e&&e<300||304===e?(h.ifModified&&((l=C.getResponseHeader("Last-Modified"))&&(ge.lastModified[c]=l),(l=C.getResponseHeader("Etag"))&&(ge.etag[c]=l)),i=304===e?(u="notmodified",!0):(u=(i=function(e,t){var n,r,i,o,a=e.dataTypes.slice(),s=a[0],l={},u=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(;i=a[++u];)if("*"!==i){if("*"!==s&&s!==i){if(!(n=l[s+" "+i]||l["* "+i]))for(r in l)if((o=r.split(" "))[1]===i&&(n=l[s+" "+o[0]]||l["* "+o[0]])){!0===n?n=l[r]:!0!==l[r]&&(i=o[0],a.splice(u--,0,i));break}if(!0!==n)if(n&&e.throws)t=n(t);else try{t=n(t)}catch(e){return{state:"parsererror",error:n?e:"No conversion from "+s+" to "+i}}}s=i}return{state:"success",data:t}}(h,s)).state,o=i.data,!(a=i.error))):(a=u)&&!e||(u="error",e<0&&(e=0)),C.status=e,C.statusText=(t||u)+"",i?v.resolveWith(m,[o,u,C]):v.rejectWith(m,[C,u,a]),C.statusCode(w),w=E,f&&g.trigger("ajax"+(i?"Success":"Error"),[C,h,i?o:a]),y.fireWith(m,[C,u]),f&&(g.trigger("ajaxComplete",[C,h]),--ge.active||ge.event.trigger("ajaxStop")))}if(v.promise(C),C.success=C.done,C.error=C.fail,C.complete=y.add,C.statusCode=function(e){var t;if(e)if(b<2)for(t in e)w[t]=[w[t],e[t]];else t=e[C.status],C.always(t);return this},h.url=((e||h.url)+"").replace(At,"").replace(ft,ut[1]+"//"),h.dataTypes=ge.trim(h.dataType||"*").toLowerCase().split(D),null==h.crossDomain&&(r=vt.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===ut[1]&&r[2]===ut[2]&&(r[3]||("http:"===r[1]?80:443))==(ut[3]||("http:"===ut[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ge.param(h.data,h.traditional)),Et(wt,h,t,C),2===b)return C;if(f=h.global,h.type=h.type.toUpperCase(),h.hasContent=!pt.test(h.type),f&&0==ge.active++&&ge.event.trigger("ajaxStart"),!h.hasContent&&(h.data&&(h.url+=(ht.test(h.url)?"&":"?")+h.data,delete h.data),c=h.url,!1===h.cache)){var u=ge.now(),S=h.url.replace(gt,"$1_="+u);h.url=S+(S===h.url?(ht.test(h.url)?"&":"?")+"_="+u:"")}for(i in(h.data&&h.hasContent&&!1!==h.contentType||t.contentType)&&C.setRequestHeader("Content-Type",h.contentType),h.ifModified&&(c=c||h.url,ge.lastModified[c]&&C.setRequestHeader("If-Modified-Since",ge.lastModified[c]),ge.etag[c]&&C.setRequestHeader("If-None-Match",ge.etag[c])),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ct+"; q=0.01":""):h.accepts["*"]),h.headers)C.setRequestHeader(i,h.headers[i]);if(h.beforeSend&&(!1===h.beforeSend.call(m,C,h)||2===b))return C.abort();for(i in s="abort",{success:1,error:1,complete:1})C[i](h[i]);if(d=Et(bt,h,t,C)){C.readyState=1,f&&g.trigger("ajaxSend",[C,h]),h.async&&0<h.timeout&&(p=setTimeout(function(){C.abort("timeout")},h.timeout));try{b=1,d.send(o,l)}catch(e){if(!(b<2))throw e;l(-1,e)}}else l(-1,"No Transport");return C},active:0,lastModified:{},etag:{}});var Bt=[],Tt=/\?/,It=/(=)\?(?=&|$)|\?\?/,Ft=ge.now();ge.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Bt.pop()||ge.expando+"_"+Ft++;return this[e]=!0,e}}),ge.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=e.data,s=e.url,l=!1!==e.jsonp,u=l&&It.test(s),c=l&&!u&&"string"==typeof a&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(a);if("jsonp"===e.dataTypes[0]||u||c)return r=e.jsonpCallback=ge.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,i=m[r],u?e.url=s.replace(It,"$1"+r):c?e.data=a.replace(It,"$1"+r):l&&(e.url+=(Tt.test(s)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ge.error(r+" was not called"),o[0]},e.dataTypes[0]="json",m[r]=function(){o=arguments},n.always(function(){m[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Bt.push(r)),o&&ge.isFunction(i)&&i(o[0]),o=i=E}),"script"}),ge.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return ge.globalEval(e),e}}}),ge.ajaxPrefilter("script",function(e){e.cache===E&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ge.ajaxTransport("script",function(t){if(t.crossDomain){var r,i=g.head||g.getElementsByTagName("head")[0]||g.documentElement;return{send:function(e,n){(r=g.createElement("script")).async="async",t.scriptCharset&&(r.charset=t.scriptCharset),r.src=t.url,r.onload=r.onreadystatechange=function(e,t){(t||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=E,t||n(200,"success"))},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var xt,_t,Mt=!!m.ActiveXObject&&function(){for(var e in xt)xt[e](0,1)},Nt=0;function kt(){try{return new m.XMLHttpRequest}catch(e){}}ge.ajaxSettings.xhr=m.ActiveXObject?function(){return!this.isLocal&&kt()||function(){try{return new m.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:kt,_t=ge.ajaxSettings.xhr(),ge.extend(ge.support,{ajax:!!_t,cors:!!_t&&"withCredentials"in _t}),ge.support.ajax&&ge.ajaxTransport(function(c){var A;if(!c.crossDomain||ge.support.cors)return{send:function(e,s){var l,t,u=c.xhr();if(c.username?u.open(c.type,c.url,c.async,c.username,c.password):u.open(c.type,c.url,c.async),c.xhrFields)for(t in c.xhrFields)u[t]=c.xhrFields[t];c.mimeType&&u.overrideMimeType&&u.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(t in e)u.setRequestHeader(t,e[t])}catch(e){}u.send(c.hasContent&&c.data||null),A=function(e,t){var n,r,i,o,a;try{if(A&&(t||4===u.readyState))if(A=E,l&&(u.onreadystatechange=ge.noop,Mt&&delete xt[l]),t)4!==u.readyState&&u.abort();else{n=u.status,i=u.getAllResponseHeaders(),o={},(a=u.responseXML)&&a.documentElement&&(o.xml=a);try{o.text=u.responseText}catch(e){}try{r=u.statusText}catch(e){r=""}n||!c.isLocal||c.crossDomain?1223===n&&(n=204):n=o.text?200:404}}catch(e){t||s(-1,e)}o&&s(n,r,o,i)},c.async?4===u.readyState?setTimeout(A,0):(l=++Nt,Mt&&(xt||(xt={},ge(m).unload(Mt)),xt[l]=A),u.onreadystatechange=A):A()},abort:function(){A&&A(0,1)}}});var Ut,Pt,Qt=/^(?:toggle|show|hide)$/,Ht=new RegExp("^(?:([-+])=|)("+A+")([a-z%]*)$","i"),Ot=/queueHooks$/,Lt=[function(t,e,n){var r,i,o,a,s,l,u,c,A,d=this,p=t.style,f={},h=[],m=t.nodeType&&$e(t);n.queue||(null==(c=ge._queueHooks(t,"fx")).unqueued&&(c.unqueued=0,A=c.empty.fire,c.empty.fire=function(){c.unqueued||A()}),c.unqueued++,d.always(function(){d.always(function(){c.unqueued--,ge.queue(t,"fx").length||c.empty.fire()})}));1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===ge.css(t,"display")&&"none"===ge.css(t,"float")&&(ge.support.inlineBlockNeedsLayout&&"inline"!==nt(t.nodeName)?p.zoom=1:p.display="inline-block"));n.overflow&&(p.overflow="hidden",ge.support.shrinkWrapBlocks||d.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in e)if(o=e[r],Qt.exec(o)){if(delete e[r],l=l||"toggle"===o,o===(m?"hide":"show"))continue;h.push(r)}if(a=h.length){"hidden"in(s=ge._data(t,"fxshow")||ge._data(t,"fxshow",{}))&&(m=s.hidden),l&&(s.hidden=!m),m?ge(t).show():d.done(function(){ge(t).hide()}),d.done(function(){var e;for(e in ge.removeData(t,"fxshow",!0),f)ge.style(t,e,f[e])});for(r=0;r<a;r++)i=h[r],u=d.createTween(i,m?s[i]:0),f[i]=s[i]||ge.style(t,i),i in s||(s[i]=u.start,m&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}],Rt={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Ht.exec(t),a=i.cur(),s=+a||0,l=1,u=20;if(o){if(n=+o[2],"px"!==(r=o[3]||(ge.cssNumber[e]?"":"px"))&&s)for(s=ge.css(i.elem,e,!0)||n||1;s/=l=l||".5",ge.style(i.elem,e,s+r),l!==(l=i.cur()/a)&&1!==l&&--u;);i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Vt(){return setTimeout(function(){Ut=E},0),Ut=ge.now()}function qt(o,e,t){var n,a,r,i=0,s=Lt.length,l=ge.Deferred().always(function(){delete u.elem}),u=function(){for(var e=Ut||Vt(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),r=0,i=c.tweens.length;r<i;r++)c.tweens[r].run(n);return l.notifyWith(o,[c,n,t]),n<1&&i?t:(l.resolveWith(o,[c]),!1)},c=l.promise({elem:o,props:ge.extend({},e),opts:ge.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:Ut||Vt(),duration:t.duration,tweens:[],createTween:function(e,t,n){var r=ge.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){for(var t=0,n=e?c.tweens.length:0;t<n;t++)c.tweens[t].run(1);return e?l.resolveWith(o,[c,e]):l.rejectWith(o,[c,e]),this}}),A=c.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(r=ge.camelCase(n),i=t[r],o=e[n],ge.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ge.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(A,c.opts.specialEasing);i<s;i++)if(n=Lt[i].call(c,o,A,c.opts))return n;return a=c,r=A,ge.each(r,function(e,t){for(var n=(Rt[e]||[]).concat(Rt["*"]),r=0,i=n.length;r<i;r++)if(n[r].call(a,e,t))return}),ge.isFunction(c.opts.start)&&c.opts.start.call(o,c),ge.fx.timer(ge.extend(u,{anim:c,queue:c.opts.queue,elem:o})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function Kt(e,t,n,r,i){return new Kt.prototype.init(e,t,n,r,i)}function Wt(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ze[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}ge.Animation=ge.extend(qt,{tweener:function(e,t){for(var n,r=0,i=(e=ge.isFunction(e)?(t=e,["*"]):e.split(" ")).length;r<i;r++)n=e[r],Rt[n]=Rt[n]||[],Rt[n].unshift(t)},prefilter:function(e,t){t?Lt.unshift(e):Lt.push(e)}}),((ge.Tween=Kt).prototype={constructor:Kt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ge.cssNumber[n]?"":"px")},cur:function(){var e=Kt.propHooks[this.prop];return e&&e.get?e.get(this):Kt.propHooks._default.get(this)},run:function(e){var t,n=Kt.propHooks[this.prop];return this.options.duration?this.pos=t=ge.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Kt.propHooks._default.set(this),this}}).init.prototype=Kt.prototype,(Kt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ge.css(e.elem,e.prop,!1,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){ge.fx.step[e.prop]?ge.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ge.cssProps[e.prop]]||ge.cssHooks[e.prop])?ge.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}}).scrollTop=Kt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ge.each(["toggle","show","hide"],function(r,i){var o=ge.fn[i];ge.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e||!r&&ge.isFunction(e)&&ge.isFunction(t)?o.apply(this,arguments):this.animate(Wt(i,!0),e,t,n)}}),ge.fn.extend({fadeTo:function(e,t,n,r){return this.filter($e).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ge.isEmptyObject(t),o=ge.speed(e,n,r),a=function(){var e=qt(this,ge.extend({},t),o);i&&e.stop(!0)};return i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=E),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ge.timers,r=ge._data(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&Ot.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||ge.dequeue(this,i)})}}),ge.each({slideDown:Wt("show"),slideUp:Wt("hide"),slideToggle:Wt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ge.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ge.speed=function(e,t,n){var r=e&&"object"==typeof e?ge.extend({},e):{complete:n||!n&&t||ge.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ge.isFunction(t)&&t};return r.duration=ge.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ge.fx.speeds?ge.fx.speeds[r.duration]:ge.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ge.isFunction(r.old)&&r.old.call(this),r.queue&&ge.dequeue(this,r.queue)},r},ge.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ge.timers=[],ge.fx=Kt.prototype.init,ge.fx.tick=function(){var e,t=ge.timers,n=0;for(Ut=ge.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||ge.fx.stop(),Ut=E},ge.fx.timer=function(e){e()&&ge.timers.push(e)&&!Pt&&(Pt=setInterval(ge.fx.tick,ge.fx.interval))},ge.fx.interval=13,ge.fx.stop=function(){clearInterval(Pt),Pt=null},ge.fx.speeds={slow:600,fast:200,_default:400},ge.fx.step={},ge.expr&&ge.expr.filters&&(ge.expr.filters.animated=function(t){return ge.grep(ge.timers,function(e){return t===e.elem}).length});var jt=/^(?:body|html)$/i;function zt(e){return ge.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}ge.fn.offset=function(t){if(arguments.length)return t===E?this:this.each(function(e){ge.offset.setOffset(this,t,e)});var e,n,r,i,o,a,s,l={top:0,left:0},u=this[0],c=u&&u.ownerDocument;return c?(n=c.body)===u?ge.offset.bodyOffset(u):(e=c.documentElement,ge.contains(e,u)?(void 0!==u.getBoundingClientRect&&(l=u.getBoundingClientRect()),r=zt(c),i=e.clientTop||n.clientTop||0,o=e.clientLeft||n.clientLeft||0,a=r.pageYOffset||e.scrollTop,s=r.pageXOffset||e.scrollLeft,{top:l.top+a-i,left:l.left+s-o}):l):void 0},ge.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return ge.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(ge.css(e,"marginTop"))||0,n+=parseFloat(ge.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=ge.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=ge(e),s=a.offset(),l=ge.css(e,"top"),u=ge.css(e,"left"),c={},A={};o=("absolute"===r||"fixed"===r)&&-1<ge.inArray("auto",[l,u])?(i=(A=a.position()).top,A.left):(i=parseFloat(l)||0,parseFloat(u)||0),ge.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(c.top=t.top-s.top+i),null!=t.left&&(c.left=t.left-s.left+o),"using"in t?t.using.call(e,c):a.css(c)}},ge.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),r=jt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(ge.css(e,"marginTop"))||0,n.left-=parseFloat(ge.css(e,"marginLeft"))||0,r.top+=parseFloat(ge.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(ge.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||g.body;e&&!jt.test(e.nodeName)&&"static"===ge.css(e,"position");)e=e.offsetParent;return e||g.body})}}),ge.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o=/Y/.test(i);ge.fn[t]=function(e){return ge.access(this,function(e,t,n){var r=zt(e);if(n===E)return r?i in r?r[i]:r.document.documentElement[t]:e[t];r?r.scrollTo(o?ge(r).scrollLeft():n,o?n:ge(r).scrollTop()):e[t]=n},t,e,arguments.length,null)}}),ge.each({Height:"height",Width:"width"},function(o,a){ge.each({padding:"inner"+o,content:a,"":"outer"+o},function(r,e){ge.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return ge.access(this,function(e,t,n){var r;return ge.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):n===E?ge.css(e,t,n,i):ge.style(e,t,n,i)},a,n?e:E,n,null)}})}),m.jQuery=m.$=ge,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ge})}(window),function(d,p,e){var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if("function"!=typeof d)throw new Error(f.nojQuery);var h,t,n,r,m="complete"===p.document.readyState,g=d(p),v="__Negotiate Aborted__",y={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},w=function(e,t,n){return t===e.state&&(e.state=n,d(e).triggerHandler(y.onStateChanged,[{oldState:t,newState:n}]),!0)},b=function(e){return e._.keepAliveData.activated&&e.transport.supportsKeepAlive(e)};function i(e,t){return t.match(/:\d+$/)?t:t+":"+("http:"===(n=e)?80:"https:"===n?443:void 0);var n}function o(t,e){var n=[];this.tryBuffer=function(e){return t.state===d.signalR.connectionState.connecting&&(n.push(e),!0)},this.drain=function(){if(t.state===d.signalR.connectionState.connected)for(;0<n.length;)e(n.shift())},this.clear=function(){n=[]}}(h=function(e,t,n){return new h.fn.init(e,t,n)})._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:("Microsoft Internet Explorer"===p.navigator.appName&&(r=/MSIE ([0-9]+\.[0-9]+)/.exec(p.navigator.userAgent))&&(n=p.parseFloat(r[1])),n),error:function(e,t,n){var r=new Error(e);return r.source=t,void 0!==n&&(r.context=n),r},transportError:function(e,t,n,r){var i=this.error(e,n,r);return i.transport=t?t.name:void 0,i},format:function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace("{"+t+"}",arguments[t+1]);return e},firefoxMajorVersion:function(e){var t=e.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(t){var e=t._.config,n=function(e){d(t).triggerHandler(y.onError,[e])};e&&!t._.pingIntervalId&&e.pingInterval&&(t._.pingIntervalId=p.setInterval(function(){h.transports._logic.pingServer(t).fail(n)},e.pingInterval))}},h.events=y,h.resources=f,h.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1},h.changeState=w,h.isDisconnecting=function(e){return e.state===h.connectionState.disconnected},h.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},h.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.")}},"function"==typeof g.on?g.on("load",function(){m=!0}):g.load(function(){m=!0}),h.fn=h.prototype={init:function(e,t,n){var r=d(this);this.url=e,this.qs=t,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new o(this,function(e){r.triggerHandler(y.onReceived,[e])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0},"boolean"==typeof n&&(this.logging=n)},_parseResponse:function(e){return e&&"string"==typeof e?this.json.parse(e):e},_originalJson:p.JSON,json:p.JSON,isCrossDomain:function(e,t){var n;return e=d.trim(e),t=t||p.location,0===e.indexOf("http")&&((n=p.document.createElement("a")).href=e,n.protocol+i(n.protocol,n.host)!==t.protocol+i(t.protocol,t.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:h.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(e,n){var a,t,r,i,s=this,l={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},u=s._deferral||d.Deferred(),o=p.document.createElement("a");if(s.lastError=null,s._deferral=u,!s.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if("function"===d.type(e)?n=e:"object"===d.type(e)&&(d.extend(l,e),"function"===d.type(l.callback)&&(n=l.callback)),l.transport=function(e,t){if(d.isArray(e)){for(var n=e.length-1;0<=n;n--){var r=e[n];"string"===d.type(r)&&h.transports[r]||(t.log("Invalid transport: "+r+", removing it from the transports list."),e.splice(n,1))}0===e.length&&(t.log("No transports remain within the specified transport array."),e=null)}else if(h.transports[e]||"auto"===e){if("auto"===e&&h._.ieVersion<=8)return["longPolling"]}else t.log("Invalid transport: "+e.toString()+"."),e=null;return e}(l.transport,s),!l.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");if(s._.config=l,!m&&!0===l.waitForPageLoad)return s._.deferredStartHandler=function(){s.start(e,n)},g.bind("load",s._.deferredStartHandler),u.promise();if(s.state===h.connectionState.connecting)return u.promise();if(!1===w(s,h.connectionState.disconnected,h.connectionState.connecting))return u.resolve(s),u.promise();(t=s)._.configuredStopReconnectingTimeout||(i=function(e){var t=h._.format(h.resources.reconnectTimeout,e.disconnectTimeout);e.log(t),d(e).triggerHandler(y.onError,[h._.error(t,"TimeoutException")]),e.stop(!1,!1)},t.reconnecting(function(){var e=this;e.state===h.connectionState.reconnecting&&(r=p.setTimeout(function(){i(e)},e.disconnectTimeout))}),t.stateChanged(function(e){e.oldState===h.connectionState.reconnecting&&p.clearTimeout(r)}),t._.configuredStopReconnectingTimeout=!0),o.href=s.url,o.protocol&&":"!==o.protocol?(s.protocol=o.protocol,s.host=o.host):(s.protocol=p.document.location.protocol,s.host=o.host||p.document.location.host),s.baseUrl=s.protocol+"//"+s.host,s.wsProtocol="https:"===s.protocol?"wss://":"ws://","auto"===l.transport&&!0===l.jsonp&&(l.transport="longPolling"),0===s.url.indexOf("//")&&(s.url=p.location.protocol+s.url,s.log("Protocol relative URL detected, normalizing it to '"+s.url+"'.")),this.isCrossDomain(s.url)&&(s.log("Auto detected cross domain url."),"auto"===l.transport&&(l.transport=["webSockets","serverSentEvents","longPolling"]),void 0===l.withCredentials&&(l.withCredentials=!0),l.jsonp||(l.jsonp=!d.support.cors,l.jsonp&&s.log("Using jsonp because this browser doesn't support CORS.")),s.contentType=h._.defaultContentType),s.withCredentials=l.withCredentials,s.ajaxDataType=l.jsonp?"jsonp":"text",d(s).bind(y.onStart,function(e,t){"function"===d.type(n)&&n.call(s),u.resolve(s)}),s._.initHandler=h.transports._logic.initHandler(s),a=function(e,t){var n=h._.error(f.noTransportOnInit);if((t=t||0)>=e.length)return 0===t?s.log("No transports supported by the server were selected."):1===t?s.log("No fallback transports were selected."):s.log("Fallback transports exhausted."),d(s).triggerHandler(y.onError,[n]),u.reject(n),void s.stop();if(s.state!==h.connectionState.disconnected){var r=e[t],i=h.transports[r],o=function(){a(e,t+1)};s.transport=i;try{s._.initHandler.start(i,function(){var e=11<=h._.firefoxMajorVersion(p.navigator.userAgent),t=!!s.withCredentials&&e;s.log("The start request succeeded. Transitioning to the connected state."),b(s)&&h.transports._logic.monitorKeepAlive(s),h.transports._logic.startHeartbeat(s),h._.configurePingInterval(s),w(s,h.connectionState.connecting,h.connectionState.connected)||s.log("WARNING! The connection was not in the connecting state."),s._.connectingMessageBuffer.drain(),d(s).triggerHandler(y.onStart),g.bind("unload",function(){s.log("Window unloading, stopping the connection."),s.stop(t)}),e&&g.bind("beforeunload",function(){p.setTimeout(function(){s.stop(t)},0)})},o)}catch(e){s.log(i.name+" transport threw '"+e.message+"' when attempting to start."),o()}}};var c=s.url+"/negotiate",A=function(e,t){var n=h._.error(f.errorOnNegotiate,e,t._.negotiateRequest);d(t).triggerHandler(y.onError,n),u.reject(n),t.stop()};return d(s).triggerHandler(y.onStarting),c=h.transports._logic.prepareQueryString(s,c),s.log("Negotiating with '"+c+"'."),s._.negotiateRequest=h.transports._logic.ajax(s,{url:c,error:function(e,t){t!==v?A(e,s):u.reject(h._.error(f.stoppedWhileNegotiating,null,s._.negotiateRequest))},success:function(e){var t,n,r,i=[],o=[];try{t=s._parseResponse(e)}catch(e){return void A(h._.error(f.errorParsingNegotiateResponse,e),s)}if(n=s._.keepAliveData,s.appRelativeUrl=t.Url,s.id=t.ConnectionId,s.token=t.ConnectionToken,s.webSocketServerUrl=t.WebSocketServerUrl,s._.pollTimeout=1e3*t.ConnectionTimeout+1e4,s.disconnectTimeout=1e3*t.DisconnectTimeout,s._.totalTransportConnectTimeout=s.transportConnectTimeout+1e3*t.TransportConnectTimeout,t.KeepAliveTimeout?(n.activated=!0,n.timeout=1e3*t.KeepAliveTimeout,n.timeoutWarning=n.timeout*s.keepAliveWarnAt,s._.beatInterval=(n.timeout-n.timeoutWarning)/3):n.activated=!1,s.reconnectWindow=s.disconnectTimeout+(n.timeout||0),!t.ProtocolVersion||t.ProtocolVersion!==s.clientProtocol)return r=h._.error(h._.format(f.protocolIncompatible,s.clientProtocol,t.ProtocolVersion)),d(s).triggerHandler(y.onError,[r]),void u.reject(r);d.each(h.transports,function(e){if(0===e.indexOf("_")||"webSockets"===e&&!t.TryWebSockets)return!0;o.push(e)}),d.isArray(l.transport)?d.each(l.transport,function(e,t){0<=d.inArray(t,o)&&i.push(t)}):"auto"===l.transport?i=o:0<=d.inArray(l.transport,o)&&i.push(l.transport),a(i)}}),u.promise()},starting:function(n){var r=this;return d(r).bind(y.onStarting,function(e,t){n.call(r)}),r},send:function(e){var t=this;if(t.state===h.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===h.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,e),t},received:function(n){var r=this;return d(r).bind(y.onReceived,function(e,t){n.call(r,t)}),r},stateChanged:function(n){var r=this;return d(r).bind(y.onStateChanged,function(e,t){n.call(r,t)}),r},error:function(r){var i=this;return d(i).bind(y.onError,function(e,t,n){i.lastError=t,r.call(i,t,n)}),i},disconnected:function(n){var r=this;return d(r).bind(y.onDisconnect,function(e,t){n.call(r)}),r},connectionSlow:function(n){var r=this;return d(r).bind(y.onConnectionSlow,function(e,t){n.call(r)}),r},reconnecting:function(n){var r=this;return d(r).bind(y.onReconnecting,function(e,t){n.call(r)}),r},reconnected:function(n){var r=this;return d(r).bind(y.onReconnect,function(e,t){n.call(r)}),r},stop:function(e,t){var n=this,r=n._deferral;return n._.deferredStartHandler&&g.unbind("load",n._.deferredStartHandler),delete n._.config,delete n._.deferredStartHandler,m||n._.config&&!0!==n._.config.waitForPageLoad?n.state!==h.connectionState.disconnected?(n.log("Stopping connection."),p.clearTimeout(n._.beatHandle),p.clearInterval(n._.pingIntervalId),n.transport&&(n.transport.stop(n),!1!==t&&n.transport.abort(n,e),b(n)&&h.transports._logic.stopMonitoringKeepAlive(n),n.transport=null),n._.negotiateRequest&&(n._.negotiateRequest.abort(v),delete n._.negotiateRequest),n._.initHandler&&n._.initHandler.stop(),delete n._deferral,delete n.messageId,delete n.groupsToken,delete n.id,delete n._.pingIntervalId,delete n._.lastMessageAt,delete n._.lastActiveAt,n._.connectingMessageBuffer.clear(),d(n).unbind(y.onStart),w(n,n.state,h.connectionState.disconnected),d(n).triggerHandler(y.onDisconnect),n):void 0:(n.log("Stopping connection prior to negotiate."),void(r&&r.reject(h._.error(f.stoppedWhileLoading))))},log:function(e){var t,n;t=e,!1!==this.logging&&void 0!==p.console&&(n="["+(new Date).toTimeString()+"] SignalR: "+t,p.console.debug?p.console.debug(n):p.console.log&&p.console.log(n))}},h.fn.init.prototype=h.fn,h.noConflict=function(){return d.connection===h&&(d.connection=t),h},d.connection&&(t=d.connection),d.connection=d.signalR=h}(window.jQuery,window),function(s,l,e){var u,c=s.signalR,A=s.signalR.events,t=s.signalR.changeState,d="__Start Aborted__";function i(e){var t,n,r;e._.keepAliveData.monitoring&&(r=(t=e)._.keepAliveData,t.state===c.connectionState.connected&&((n=(new Date).getTime()-t._.lastMessageAt)>=r.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):n>=r.timeoutWarning?r.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),s(t).triggerHandler(A.onConnectionSlow),r.userNotified=!0):r.userNotified=!1)),u.markActive(e)&&(e._.beatHandle=l.setTimeout(function(){i(e)},e._.beatInterval))}function p(e,t){var n=e.url+t;return e.transport&&(n+="?transport="+e.transport.name),u.prepareQueryString(e,n)}function n(e){this.connection=e,this.startRequested=!1,this.startCompleted=!1,this.connectionStopped=!1}c.transports={},n.prototype={start:function(t,e,n){var r=this,i=r.connection,o=!1;r.startRequested||r.connectionStopped?i.log("WARNING! "+t.name+" transport cannot be started. Initialization ongoing or completed."):(i.log(t.name+" transport starting."),t.start(i,function(){o||r.initReceived(t,e)},function(e){return o||(o=!0,r.transportFailed(t,e,n)),!r.startCompleted||r.connectionStopped}),r.transportTimeoutHandle=l.setTimeout(function(){o||(o=!0,i.log(t.name+" transport timed out when trying to connect."),r.transportFailed(t,void 0,n))},i._.totalTransportConnectTimeout))},stop:function(){this.connectionStopped=!0,l.clearTimeout(this.transportTimeoutHandle),c.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(e,t){var n=this,r=n.connection;n.startRequested?r.log("WARNING! The client received multiple init messages."):n.connectionStopped||(n.startRequested=!0,l.clearTimeout(n.transportTimeoutHandle),r.log(e.name+" transport connected. Initiating start request."),"webSockets"===e.name?(n.startCompleted=!0,t()):c.transports._logic.ajaxStart(r,function(){n.startCompleted=!0,t()}))},transportFailed:function(e,t,n){var r,i=this.connection,o=i._deferral;this.connectionStopped||(l.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(r=c._.error(c.resources.errorDuringStartRequest,t),i.log(e.name+" transport failed during the start request. Stopping the connection."),s(i).triggerHandler(A.onError,[r]),o&&o.reject(r),i.stop()):(e.stop(i),i.log(e.name+" transport failed to connect. Attempting to fall back."),n()))}},u=c.transports._logic={ajax:function(e,t){return s.ajax(s.extend(!0,{},s.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:e.withCredentials},contentType:e.contentType,dataType:e.ajaxDataType},t))},pingServer:function(n){var e,r,i=s.Deferred();return n.transport?(e=n.url+"/ping",e=u.addQs(e,n.qs),r=u.ajax(n,{url:e,success:function(e){var t;try{t=n._parseResponse(e)}catch(e){return i.reject(c._.transportError(c.resources.pingServerFailedParse,n.transport,e,r)),void n.stop()}"pong"===t.Response?i.resolve():i.reject(c._.transportError(c._.format(c.resources.pingServerFailedInvalidResponse,e),n.transport,null,r))},error:function(e){401===e.status||403===e.status?(i.reject(c._.transportError(c._.format(c.resources.pingServerFailedStatusCode,e.status),n.transport,e,r)),n.stop()):i.reject(c._.transportError(c.resources.pingServerFailed,n.transport,e,r))}})):i.reject(c._.transportError(c.resources.noConnectionTransport,n.transport)),i.promise()},prepareQueryString:function(e,t){var n;return n=u.addQs(t,"clientProtocol="+e.clientProtocol),n=u.addQs(n,e.qs),e.token&&(n+="&connectionToken="+l.encodeURIComponent(e.token)),e.data&&(n+="&connectionData="+l.encodeURIComponent(e.data)),n},addQs:function(e,t){var n,r=-1!==e.indexOf("?")?"&":"?";if(!t)return e;if("object"==typeof t)return e+r+s.param(t);if("string"==typeof t)return"?"!==(n=t.charAt(0))&&"&"!==n||(r=""),e+r+t;throw new Error("Query string property must be either a string or object.")},getUrl:function(e,t,n,r,i){var o=("webSockets"===t?"":e.baseUrl)+e.appRelativeUrl,a="transport="+t;return!i&&e.groupsToken&&(a+="&groupsToken="+l.encodeURIComponent(e.groupsToken)),n?(o+=r?"/poll":"/reconnect",!i&&e.messageId&&(a+="&messageId="+l.encodeURIComponent(e.messageId))):o+="/connect",o+="?"+a,o=u.prepareQueryString(e,o),i||(o+="&tid="+Math.floor(11*Math.random())),o},maximizePersistentResponse:function(e){return{MessageId:e.C,Messages:e.M,Initialized:void 0!==e.S,ShouldReconnect:void 0!==e.T,LongPollDelay:e.L,GroupsToken:e.G}},updateGroups:function(e,t){t&&(e.groupsToken=t)},stringifySend:function(e,t){return"string"==typeof t||null==t?t:e.json.stringify(t)},ajaxSend:function(n,r){var i,e=u.stringifySend(n,r),t=p(n,"/send"),o=function(e,t){s(t).triggerHandler(A.onError,[c._.transportError(c.resources.sendFailed,t.transport,e,i),r])};return i=u.ajax(n,{url:t,type:"jsonp"===n.ajaxDataType?"GET":"POST",contentType:c._.defaultContentType,data:{data:e},success:function(e){var t;if(e){try{t=n._parseResponse(e)}catch(e){return o(e,n),void n.stop()}u.triggerReceived(n,t)}},error:function(e,t){"abort"!==t&&"parsererror"!==t&&o(e,n)}})},ajaxAbort:function(e,t){if(void 0!==e.transport){t=void 0===t||t;var n=p(e,"/abort");u.ajax(e,{url:n,async:t,timeout:1e3,type:"POST"}),e.log("Fired ajax abort async = "+t+".")}},ajaxStart:function(i,o){var r=function(e){var t=i._deferral;t&&t.reject(e)},a=function(e){i.log("The start request failed. Stopping the connection."),s(i).triggerHandler(A.onError,[e]),r(e),i.stop()};i._.startRequest=u.ajax(i,{url:p(i,"/start"),success:function(t,e,n){var r;try{r=i._parseResponse(t)}catch(e){return void a(c._.error(c._.format(c.resources.errorParsingStartResponse,t),e,n))}"started"===r.Response?o():a(c._.error(c._.format(c.resources.invalidStartResponse,t),null,n))},error:function(e,t,n){t!==d?a(c._.error(c.resources.errorDuringStartRequest,n,e)):(i.log("The start request aborted because connection.stop() was called."),r(c._.error(c.resources.stoppedDuringStartRequest,null,e)))}})},tryAbortStartRequest:function(e){e._.startRequest&&(e._.startRequest.abort(d),delete e._.startRequest)},tryInitialize:function(e,t,n){t.Initialized&&n?n():t.Initialized&&e.log("WARNING! The client received an init message after reconnecting.")},triggerReceived:function(e,t){e._.connectingMessageBuffer.tryBuffer(t)||s(e).triggerHandler(A.onReceived,[t])},processMessages:function(n,e,t){var r;u.markLastMessage(n),e&&(r=u.maximizePersistentResponse(e),u.updateGroups(n,r.GroupsToken),r.MessageId&&(n.messageId=r.MessageId),r.Messages&&(s.each(r.Messages,function(e,t){u.triggerReceived(n,t)}),u.tryInitialize(n,r,t)))},monitorKeepAlive:function(e){var t=e._.keepAliveData;t.monitoring?e.log("Tried to monitor keep alive but it's already being monitored."):(t.monitoring=!0,u.markLastMessage(e),e._.keepAliveData.reconnectKeepAliveUpdate=function(){u.markLastMessage(e)},s(e).bind(A.onReconnect,e._.keepAliveData.reconnectKeepAliveUpdate),e.log("Now monitoring keep alive with a warning timeout of "+t.timeoutWarning+", keep alive timeout of "+t.timeout+" and disconnecting timeout of "+e.disconnectTimeout))},stopMonitoringKeepAlive:function(e){var t=e._.keepAliveData;t.monitoring&&(t.monitoring=!1,s(e).unbind(A.onReconnect,e._.keepAliveData.reconnectKeepAliveUpdate),e._.keepAliveData={},e.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(e){e._.lastActiveAt=(new Date).getTime(),i(e)},markLastMessage:function(e){e._.lastMessageAt=(new Date).getTime()},markActive:function(e){return!!u.verifyLastActive(e)&&(e._.lastActiveAt=(new Date).getTime(),!0)},isConnectedOrReconnecting:function(e){return e.state===c.connectionState.connected||e.state===c.connectionState.reconnecting},ensureReconnectingState:function(e){return!0===t(e,c.connectionState.connected,c.connectionState.reconnecting)&&s(e).triggerHandler(A.onReconnecting),e.state===c.connectionState.reconnecting},clearReconnectTimeout:function(e){e&&e._.reconnectTimeout&&(l.clearTimeout(e._.reconnectTimeout),delete e._.reconnectTimeout)},verifyLastActive:function(e){if((new Date).getTime()-e._.lastActiveAt>=e.reconnectWindow){var t=c._.format(c.resources.reconnectWindowTimeout,new Date(e._.lastActiveAt),e.reconnectWindow);return e.log(t),s(e).triggerHandler(A.onError,[c._.error(t,"TimeoutException")]),e.stop(!1,!1),!1}return!0},reconnect:function(e,t){var n=c.transports[t];if(u.isConnectedOrReconnecting(e)&&!e._.reconnectTimeout){if(!u.verifyLastActive(e))return;e._.reconnectTimeout=l.setTimeout(function(){u.verifyLastActive(e)&&(n.stop(e),u.ensureReconnectingState(e)&&(e.log(t+" reconnecting."),n.start(e)))},e.reconnectDelay)}},handleParseFailure:function(e,t,n,r,i){var o=c._.transportError(c._.format(c.resources.parseFailed,t),e.transport,n,i);r&&r(o)?e.log("Failed to parse server response while attempting to connect."):(s(e).triggerHandler(A.onError,[o]),e.stop())},initHandler:function(e){return new n(e)},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(l,u,e){var c=l.signalR,A=l.signalR.events,d=l.signalR.changeState,p=c.transports._logic;c.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,n){var e=p.stringifySend(t,n);try{t.socket.send(e)}catch(e){l(t).triggerHandler(A.onError,[c._.transportError(c.resources.webSocketsInvalidState,t.transport,e,t.socket),n])}},start:function(n,r,i){var e,o=!1,a=this,t=!r,s=l(n);u.WebSocket?n.socket||(e=n.webSocketServerUrl?n.webSocketServerUrl:n.wsProtocol+n.host,e+=p.getUrl(n,this.name,t),n.log("Connecting to websocket endpoint '"+e+"'."),n.socket=new u.WebSocket(e),n.socket.onopen=function(){o=!0,n.log("Websocket opened."),p.clearReconnectTimeout(n),!0===d(n,c.connectionState.reconnecting,c.connectionState.connected)&&s.triggerHandler(A.onReconnect)},n.socket.onclose=function(e){var t;this===n.socket&&(o&&void 0!==e.wasClean&&!1===e.wasClean?(t=c._.transportError(c.resources.webSocketClosed,n.transport,e),n.log("Unclean disconnect from websocket: "+(e.reason||"[no reason given]."))):n.log("Websocket closed."),i&&i(t)||(t&&l(n).triggerHandler(A.onError,[t]),a.reconnect(n)))},n.socket.onmessage=function(t){var e;try{e=n._parseResponse(t.data)}catch(e){return void p.handleParseFailure(n,t.data,e,i,t)}e&&(l.isEmptyObject(e)||e.M?p.processMessages(n,e,r):p.triggerReceived(n,e))}):i()},reconnect:function(e){p.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},stop:function(e){p.clearReconnectTimeout(e),e.socket&&(e.log("Closing the Websocket."),e.socket.close(),e.socket=null)},abort:function(e,t){p.ajaxAbort(e,t)}}}(window.jQuery,window),function(l,u,e){var c=l.signalR,A=l.signalR.events,d=l.signalR.changeState,p=c.transports._logic,f=function(e){u.clearTimeout(e._.reconnectAttemptTimeoutHandle),delete e._.reconnectAttemptTimeoutHandle};c.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(n,r,i){var e,o=this,t=!1,a=l(n),s=!r;if(n.eventSource&&(n.log("The connection already has an event source. Stopping it."),n.stop()),u.EventSource){e=p.getUrl(n,this.name,s);try{n.log("Attempting to connect to SSE endpoint '"+e+"'."),n.eventSource=new u.EventSource(e,{withCredentials:n.withCredentials})}catch(e){return n.log("EventSource failed trying to connect with error "+e.Message+"."),void(i?i():(a.triggerHandler(A.onError,[c._.transportError(c.resources.eventSourceFailedToConnect,n.transport,e)]),s&&o.reconnect(n)))}s&&(n._.reconnectAttemptTimeoutHandle=u.setTimeout(function(){!1===t&&n.eventSource.readyState!==u.EventSource.OPEN&&o.reconnect(n)},o.timeOut)),n.eventSource.addEventListener("open",function(e){n.log("EventSource connected."),f(n),p.clearReconnectTimeout(n),!1===t&&(t=!0)===d(n,c.connectionState.reconnecting,c.connectionState.connected)&&a.triggerHandler(A.onReconnect)},!1),n.eventSource.addEventListener("message",function(t){var e;if("initialized"!==t.data){try{e=n._parseResponse(t.data)}catch(e){return void p.handleParseFailure(n,t.data,e,i,t)}p.processMessages(n,e,r)}},!1),n.eventSource.addEventListener("error",function(e){var t=c._.transportError(c.resources.eventSourceError,n.transport,e);this===n.eventSource&&(i&&i(t)||(n.log("EventSource readyState: "+n.eventSource.readyState+"."),e.eventPhase===u.EventSource.CLOSED?(n.log("EventSource reconnecting due to the server connection ending."),o.reconnect(n)):(n.log("EventSource error."),a.triggerHandler(A.onError,[t]))))},!1)}else i&&(n.log("This browser doesn't support SSE."),i())},reconnect:function(e){p.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},send:function(e,t){p.ajaxSend(e,t)},stop:function(e){f(e),p.clearReconnectTimeout(e),e&&e.eventSource&&(e.log("EventSource calling close()."),e.eventSource.close(),e.eventSource=null,delete e.eventSource)},abort:function(e,t){p.ajaxAbort(e,t)}}}(window.jQuery,window),function(o,l,e){var t,n,a=o.signalR,r=o.signalR.events,i=o.signalR.changeState,u=a.transports._logic,c=function(){var e=l.document.createElement("iframe");return e.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),e},A=(t=null,n=0,{prevent:function(){a._.ieVersion<=8&&(0===n&&(t=l.setInterval(function(){var e=c();l.document.body.appendChild(e),l.document.body.removeChild(e),e=null},1e3)),n++)},cancel:function(){1===n&&l.clearInterval(t),0<n&&n--}});a.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(e,t,n){var r,i=this,o=u.foreverFrame.count+=1,a=c(),s=function(){e.log("Forever frame iframe finished loading and is no longer receiving messages."),n&&n()||i.reconnect(e)};l.EventSource?n&&(e.log("Forever Frame is not supported by SignalR on browsers with SSE support."),n()):(a.setAttribute("data-signalr-connection-id",e.id),A.prevent(),r=u.getUrl(e,this.name),r+="&frameId="+o,l.document.documentElement.appendChild(a),e.log("Binding to iframe's load event."),a.addEventListener?a.addEventListener("load",s,!1):a.attachEvent&&a.attachEvent("onload",s),a.src=r,(u.foreverFrame.connections[o]=e).frame=a,e.frameId=o,t&&(e.onSuccess=function(){e.log("Iframe transport started."),t()}))},reconnect:function(n){var r=this;u.isConnectedOrReconnecting(n)&&u.verifyLastActive(n)&&l.setTimeout(function(){if(u.verifyLastActive(n)&&n.frame&&u.ensureReconnectingState(n)){var e=n.frame,t=u.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'."),e.src=t}},n.reconnectDelay)},lostConnection:function(e){this.reconnect(e)},send:function(e,t){u.ajaxSend(e,t)},receive:function(e,t){var n,r,i;if(e.json!==e._originalJson&&(t=e._originalJson.stringify(t)),i=e._parseResponse(t),u.processMessages(e,i,e.onSuccess),e.state===o.signalR.connectionState.connected&&(e.frameMessageCount=(e.frameMessageCount||0)+1,e.frameMessageCount>a.transports.foreverFrame.iframeClearThreshold&&(e.frameMessageCount=0,(n=e.frame.contentWindow||e.frame.contentDocument)&&n.document&&n.document.body)))for(r=n.document.body;r.firstChild;)r.removeChild(r.firstChild)},stop:function(t){var e=null;if(A.cancel(),t.frame){if(t.frame.stop)t.frame.stop();else try{(e=t.frame.contentWindow||t.frame.contentDocument).document&&e.document.execCommand&&e.document.execCommand("Stop")}catch(e){t.log("Error occurred when stopping foreverFrame transport. Message = "+e.message+".")}t.frame.parentNode===l.document.documentElement&&l.document.documentElement.removeChild(t.frame),delete u.foreverFrame.connections[t.frameId],t.frame=null,t.frameId=null,delete t.frame,delete t.frameId,delete t.onSuccess,delete t.frameMessageCount,t.log("Stopping forever frame.")}},abort:function(e,t){u.ajaxAbort(e,t)},getConnection:function(e){return u.foreverFrame.connections[e]},started:function(e){!0===i(e,a.connectionState.reconnecting,a.connectionState.connected)&&o(e).triggerHandler(r.onReconnect)}}}(window.jQuery,window),function(f,h,e){var m=f.signalR,g=f.signalR.events,n=f.signalR.changeState,v=f.signalR.isDisconnecting,y=m.transports._logic;m.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(s,e,t){var l=this,u=function(){u=f.noop,s.log("LongPolling connected."),e?e():s.log("WARNING! The client received an init message after reconnecting.")},c=function(e){return!!t(e)&&(s.log("LongPolling failed to connect."),!0)},A=s._,d=0,p=function(e){h.clearTimeout(A.reconnectTimeoutId),!(A.reconnectTimeoutId=null)===n(e,m.connectionState.reconnecting,m.connectionState.connected)&&(e.log("Raising the reconnect event"),f(e).triggerHandler(g.onReconnect))};s.pollXhr&&(s.log("Polling xhr requests already exists, aborting."),s.stop()),s.messageId=null,A.reconnectTimeoutId=null,A.pollTimeoutId=h.setTimeout(function(){!function o(a,e){var t=!(null===a.messageId),n=!e,r=y.getUrl(a,l.name,t,n,!0),i={};a.messageId&&(i.messageId=a.messageId),a.groupsToken&&(i.groupsToken=a.groupsToken),!0!==v(a)&&(s.log("Opening long polling request to '"+r+"'."),a.pollXhr=y.ajax(s,{xhrFields:{onprogress:function(){y.markLastMessage(s)}},url:r,type:"POST",contentType:m._.defaultContentType,data:i,timeout:s._.pollTimeout,success:function(t){var e,n,r,i=0;s.log("Long poll complete."),d=0;try{e=s._parseResponse(t)}catch(e){return void y.handleParseFailure(a,t,e,c,a.pollXhr)}null!==A.reconnectTimeoutId&&p(a),e&&(n=y.maximizePersistentResponse(e)),y.processMessages(a,e,u),n&&"number"===f.type(n.LongPollDelay)&&(i=n.LongPollDelay),!0!==v(a)&&((r=n&&n.ShouldReconnect)&&!y.ensureReconnectingState(a)||(0<i?A.pollTimeoutId=h.setTimeout(function(){o(a,r)},i):o(a,r)))},error:function(e,t){var n=m._.transportError(m.resources.longPollFailed,s.transport,e,a.pollXhr);if(h.clearTimeout(A.reconnectTimeoutId),A.reconnectTimeoutId=null,"abort"!==t){if(!c(n)){if(d++,s.state!==m.connectionState.reconnecting&&(s.log("An error occurred using longPolling. Status = "+t+".  Response = "+e.responseText+"."),f(a).triggerHandler(g.onError,[n])),(s.state===m.connectionState.connected||s.state===m.connectionState.reconnecting)&&!y.verifyLastActive(s))return;if(!y.ensureReconnectingState(a))return;A.pollTimeoutId=h.setTimeout(function(){o(a,!0)},l.reconnectDelay)}}else s.log("Aborted xhr request.")}}),t&&!0===e&&(A.reconnectTimeoutId=h.setTimeout(function(){p(a)},Math.min(1e3*(Math.pow(2,d)-1),36e5))))}(s)},250)},lostConnection:function(e){e.pollXhr&&e.pollXhr.abort("lostConnection")},send:function(e,t){y.ajaxSend(e,t)},stop:function(e){h.clearTimeout(e._.pollTimeoutId),h.clearTimeout(e._.reconnectTimeoutId),delete e._.pollTimeoutId,delete e._.reconnectTimeoutId,e.pollXhr&&(e.pollXhr.abort(),e.pollXhr=null,delete e.pollXhr)},abort:function(e,t){y.ajaxAbort(e,t)}}}(window.jQuery,window),function(l,e,t){var u=l.signalR;function c(e){return e+".hubProxy"}function n(e){return l.isFunction(e)?null:"undefined"===l.type(e)?null:e}function o(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}function r(e,t){var n,r=e._.invocationCallbacks;for(var i in o(r)&&e.log("Clearing hub invocation callbacks with error: "+t+"."),e._.invocationCallbackId=0,delete e._.invocationCallbacks,e._.invocationCallbacks={},r)(n=r[i]).method.call(n.scope,{E:t})}function i(e,t){return new i.fn.init(e,t)}function a(e,t){var n={qs:null,logging:!1,useDefaultPath:!0};return l.extend(n,t),e&&!n.useDefaultPath||(e=(e||"")+"/signalr"),new a.fn.init(e,n)}(i.fn=i.prototype={init:function(e,t){this.state={},this.connection=e,this.hubName=t,this._={callbackMap:{}}},constructor:i,hasSubscriptions:function(){return o(this._.callbackMap)},on:function(e,n){var r=this,t=r._.callbackMap;return t[e=e.toLowerCase()]||(t[e]={}),t[e][n]=function(e,t){n.apply(r,t)},l(r).bind(c(e),t[e][n]),r},off:function(e,t){var n,r=this._.callbackMap;return(n=r[e=e.toLowerCase()])&&(n[t]?(l(this).unbind(c(e),n[t]),delete n[t],o(n)||delete r[e]):t||(l(this).unbind(c(e)),delete r[e])),this},invoke:function(i){var o=this,a=o.connection,e=function(e,t,n){var r,i=e.length,o=[];for(r=0;r<i;r+=1)e.hasOwnProperty(r)&&(o[r]=t.call(n,e[r],r,e));return o}(l.makeArray(arguments).slice(1),n),t={H:o.hubName,M:i,A:e,I:a._.invocationCallbackId},s=l.Deferred();return a._.invocationCallbacks[a._.invocationCallbackId.toString()]={scope:o,method:function(e){var t,n,r=o._maximizeHubResponse(e);l.extend(o.state,r.State),r.Progress?s.notifyWith?s.notifyWith(o,[r.Progress.Data]):a._.progressjQueryVersionLogged||(a.log("A hub method invocation progress update was received but the version of jQuery in use ("+l.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),a._.progressjQueryVersionLogged=!0):r.Error?(r.StackTrace&&a.log(r.Error+"\n"+r.StackTrace+"."),t=r.IsHubException?"HubException":"Exception",(n=u._.error(r.Error,t)).data=r.ErrorData,a.log(o.hubName+"."+i+" failed to execute. Error: "+n.message),s.rejectWith(o,[n])):(a.log("Invoked "+o.hubName+"."+i),s.resolveWith(o,[r.Result]))}},a._.invocationCallbackId+=1,l.isEmptyObject(o.state)||(t.S=o.state),a.log("Invoking "+o.hubName+"."+i),a.send(t),s.promise()},_maximizeHubResponse:function(e){return{State:e.S,Result:e.R,Progress:e.P?{Id:e.P.I,Data:e.P.D}:null,Id:e.I,IsHubException:e.H,Error:e.E,StackTrace:e.T,ErrorData:e.D}}}).init.prototype=i.fn,(a.fn=a.prototype=l.connection()).init=function(e,t){var n={qs:null,logging:!1,useDefaultPath:!0},s=this;l.extend(n,t),l.signalR.fn.init.call(s,e,n.qs,n.logging),s.proxies={},s._.invocationCallbackId=0,s._.invocationCallbacks={},s.received(function(e){var t,n,r,i,o,a;e&&(void 0!==e.P?(r=e.P.I.toString(),(i=s._.invocationCallbacks[r])&&i.method.call(i.scope,e)):void 0!==e.I?(r=e.I.toString(),(i=s._.invocationCallbacks[r])&&(s._.invocationCallbacks[r]=null,delete s._.invocationCallbacks[r],i.method.call(i.scope,e))):(t=this._maximizeClientHubInvocation(e),s.log("Triggering client hub event '"+t.Method+"' on hub '"+t.Hub+"'."),o=t.Hub.toLowerCase(),a=t.Method.toLowerCase(),n=this.proxies[o],l.extend(n.state,t.State),l(n).triggerHandler(c(a),[t.Args])))}),s.error(function(e,t){var n,r;t&&(n=t.I,(r=s._.invocationCallbacks[n])&&(s._.invocationCallbacks[n]=null,delete s._.invocationCallbacks[n],r.method.call(r.scope,{E:e})))}),s.reconnecting(function(){s.transport&&"webSockets"===s.transport.name&&r(s,"Connection started reconnecting before invocation result was received.")}),s.disconnected(function(){r(s,"Connection was disconnected before invocation result was received.")})},a.fn._maximizeClientHubInvocation=function(e){return{Hub:e.H,Method:e.M,Args:e.A,State:e.S}},a.fn._registerSubscribedHubs=function(){var n=this;n._subscribedToHubs||(n._subscribedToHubs=!0,n.starting(function(){var t=[];l.each(n.proxies,function(e){this.hasSubscriptions()&&(t.push({name:e}),n.log("Client subscribed to hub '"+e+"'."))}),0===t.length&&n.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),n.data=n.json.stringify(t)}))},a.fn.createHubProxy=function(e){e=e.toLowerCase();var t=this.proxies[e];return t||(t=i(this,e),this.proxies[e]=t),this._registerSubscribedHubs(),t},a.fn.init.prototype=a.fn,l.hubConnection=a}(window.jQuery,window),window.jQuery.signalR.version="2.2.2-pre",function(e,t){"use strict";var n=e.History=e.History||{},r=e.jQuery;if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(e,t,n){r(e).bind(t,n)},trigger:function(e,t,n){r(e).trigger(t,n)},extractEventData:function(e,t,n){return t&&t.originalEvent&&t.originalEvent[e]||n&&n[e]||void 0},onDomLoad:function(e){r(e)}},void 0!==n.init&&n.init()}(window),function(c,e){"use strict";var t=c.document,n=c.setTimeout||n,r=c.clearTimeout||r,s=c.setInterval||s,A=c.History=c.History||{};if(void 0!==A.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");A.initHtml4=function(){if(void 0!==A.initHtml4.initialized)return!1;A.initHtml4.initialized=!0,A.enabled=!0,A.savedHashes=[],A.isLastHash=function(e){return e===A.getHashByIndex()},A.isHashEqual=function(e,t){return(e=encodeURIComponent(e).replace(/%25/g,"%"))===(t=encodeURIComponent(t).replace(/%25/g,"%"))},A.saveHash=function(e){return!A.isLastHash(e)&&(A.savedHashes.push(e),!0)},A.getHashByIndex=function(e){return void 0===e?A.savedHashes[A.savedHashes.length-1]:e<0?A.savedHashes[A.savedHashes.length+e]:A.savedHashes[e]},A.discardedHashes={},A.discardedStates={},A.discardState=function(e,t,n){var r,i=A.getHashByState(e);return r={discardedState:e,backState:n,forwardState:t},A.discardedStates[i]=r,!0},A.discardHash=function(e,t,n){var r={discardedHash:e,backState:n,forwardState:t};return A.discardedHashes[e]=r,!0},A.discardedState=function(e){var t=A.getHashByState(e);return A.discardedStates[t]||!1},A.discardedHash=function(e){return A.discardedHashes[e]||!1},A.recycleState=function(e){var t=A.getHashByState(e);return A.discardedState(e)&&delete A.discardedStates[t],!0},A.emulated.hashChange&&(A.hashChangeInit=function(){A.checkerFunction=null;var n,r,i,o="",a=Boolean(A.getHash());return A.isInternetExplorer()?("historyjs-iframe",(n=t.createElement("iframe")).setAttribute("id","historyjs-iframe"),n.setAttribute("src","#"),n.style.display="none",t.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),r="",i=!1,A.checkerFunction=function(){if(i)return!1;i=!0;var e=A.getHash(),t=A.getHash(n.contentWindow.document);return e!==o?(t!==(o=e)&&(r=t=e,n.contentWindow.document.open(),n.contentWindow.document.close(),n.contentWindow.document.location.hash=A.escapeHash(e)),A.Adapter.trigger(c,"hashchange")):t!==r&&(r=t,a&&""===t?A.back():A.setHash(t,!1)),!(i=!1)}):A.checkerFunction=function(){var e=A.getHash()||"";return e!==o&&(o=e,A.Adapter.trigger(c,"hashchange")),!0},A.intervalList.push(s(A.checkerFunction,A.options.hashChangeInterval)),!0},A.Adapter.onDomLoad(A.hashChangeInit)),A.emulated.pushState&&(A.onHashChange=function(e){var t,n,r=e&&e.newURL||A.getLocationHref(),i=A.getHashByUrl(r);return A.isLastHash(i)?(A.busy(!1),!1):(A.doubleCheckComplete(),A.saveHash(i),i&&A.isTraditionalAnchor(i)?(A.Adapter.trigger(c,"anchorchange"),A.busy(!1),!1):(t=A.extractState(A.getFullUrl(i||A.getLocationHref()),!0),A.isLastSavedState(t)?(A.busy(!1),!1):(A.getHashByState(t),(n=A.discardedState(t))?(A.getHashByIndex(-2)===A.getHashByState(n.forwardState)?A.back(!1):A.forward(!1),!1):(A.pushState(t.data,t.title,encodeURI(t.url),!1),!0))))},A.Adapter.bind(c,"hashchange",A.onHashChange),A.pushState=function(e,t,n,r){if(n=encodeURI(n).replace(/%25/g,"%"),A.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&A.busy())return A.pushQueue({scope:A,callback:A.pushState,args:arguments,queue:r}),!1;A.busy(!0);var i=A.createStateObject(e,t,n),o=A.getHashByState(i),a=A.getState(!1),s=A.getHashByState(a),l=A.getHash(),u=A.expectedStateId==i.id;return A.storeState(i),A.expectedStateId=i.id,A.recycleState(i),A.setTitle(i),o===s?(A.busy(!1),!1):(A.saveState(i),u||A.Adapter.trigger(c,"statechange"),A.isHashEqual(o,l)||A.isHashEqual(o,A.getShortUrl(A.getLocationHref()))||A.setHash(o,!1),A.busy(!1),!0)},A.replaceState=function(e,t,n,r){if(n=encodeURI(n).replace(/%25/g,"%"),A.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==r&&A.busy())return A.pushQueue({scope:A,callback:A.replaceState,args:arguments,queue:r}),!1;A.busy(!0);var i=A.createStateObject(e,t,n),o=A.getHashByState(i),a=A.getState(!1),s=A.getHashByState(a),l=A.getStateByIndex(-2);return A.discardState(a,i,l),o===s?(A.storeState(i),A.expectedStateId=i.id,A.recycleState(i),A.setTitle(i),A.saveState(i),A.Adapter.trigger(c,"statechange"),A.busy(!1)):A.pushState(i.data,i.title,i.url,!1),!0}),A.emulated.pushState&&A.getHash()&&!A.emulated.hashChange&&A.Adapter.onDomLoad(function(){A.Adapter.trigger(c,"hashchange")})},void 0!==A.init&&A.init()}(window),function(s,n){"use strict";var l=s.console||n,u=s.document,r=s.navigator,i=!1,o=s.setTimeout,a=s.clearTimeout,c=s.setInterval,A=s.clearInterval,d=s.JSON,p=s.alert,f=s.History=s.History||{},h=s.history;try{(i=s.sessionStorage).setItem("TEST","1"),i.removeItem("TEST")}catch(e){i=!1}if(d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,void 0!==f.init)throw new Error("History.js Core has already been loaded...");f.init=function(e){return void 0!==f.Adapter&&(void 0!==f.initCore&&f.initCore(),void 0!==f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(e){if(void 0!==f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||u.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var e,t=f.intervalList;if(null!=t){for(e=0;e<t.length;e++)A(t[e]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(){var e,t,n,r,i,o=!(void 0===l||void 0===l.log||void 0===l.log.apply),a=u.getElementById("log");for(o?(e=(r=Array.prototype.slice.call(arguments)).shift(),void 0!==l.debug?l.debug.apply(l,[e,r]):l.log.apply(l,[e,r])):e="\n"+arguments[0]+"\n",t=1,n=arguments.length;t<n;++t){if("object"==typeof(i=arguments[t])&&void 0!==d)try{i=d.stringify(i)}catch(e){}e+="\n"+i+"\n"}return a?(a.value+=e+"\n-----\n",a.scrollTop=a.scrollHeight-a.clientHeight):o||p(e),!0},f.getInternetExplorerMajorVersion=function(){return f.getInternetExplorerMajorVersion.cached=void 0!==f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=u.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return 4<e&&e}()},f.isInternetExplorer=function(){return f.isInternetExplorer.cached=void 0!==f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion())},f.options.html4Mode?f.emulated={pushState:!0,hashChange:!0}:f.emulated={pushState:!Boolean(s.history&&s.history.pushState&&s.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in s||"onhashchange"in u)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.cloneObject=function(e){var t;return e?(t=d.stringify(e),d.parse(t)):{}},f.getRootUrl=function(){var e=u.location.protocol+"//"+(u.location.hostname||u.location.host);return u.location.port&&(e+=":"+u.location.port),e+="/"},f.getBaseHref=function(){var e=u.getElementsByTagName("base"),t="";return 1===e.length&&(t=e[0].href.replace(/[^\/]+$/,"")),(t=t.replace(/\/+$/,""))&&(t+="/"),t},f.getBaseUrl=function(){return f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl()},f.getPageUrl=function(){return((f.getState(!1,!1)||{}).url||f.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},f.getBasePageUrl=function(){return f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},f.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===r?f.getRootUrl()+e.replace(/^\/+/,""):"#"===r?f.getPageUrl().replace(/#.*/,"")+e:"?"===r?f.getPageUrl().replace(/[\?#].*/,"")+e:t?f.getBaseUrl()+e.replace(/^(\.\/)+/,""):f.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(e){var t=e,n=f.getBaseUrl(),r=f.getRootUrl();return f.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),f.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(e){return(e=e||u).URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=f.getLastSavedState();return!n&&t&&(n=f.createStateObject()),e&&((n=f.cloneObject(n)).url=n.cleanUrl||n.url),n},f.getIdByState=function(e){var t,n=f.extractId(e.url);if(!n)if(t=f.getStateString(e),void 0!==f.stateToId[t])n=f.stateToId[t];else if(void 0!==f.store.stateToId[t])n=f.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==f.idToState[n]||void 0!==f.store.idToState[n];);f.stateToId[t]=n,f.idToState[n]=e}return n},f.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),(t={normalized:!0}).title=e.title||"",t.url=f.getFullUrl(e.url?e.url:f.getLocationHref()),t.hash=f.getShortUrl(t.url),t.data=f.cloneObject(e.data),t.id=f.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!f.isEmptyObject(t.data),(t.title||n)&&!0!==f.options.disableSuid&&(t.hash=f.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=f.getFullUrl(t.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},f.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=f.normalizeState(r)},f.getStateById=function(e){return e=String(e),f.idToState[e]||f.store.idToState[e]||n},f.getStateString=function(e){var t;return t={data:f.normalizeState(e).data,title:e.title,url:e.url},d.stringify(t)},f.getStateId=function(e){return f.normalizeState(e).id},f.getHashByState=function(e){return f.normalizeState(e).hash},f.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,(t=/(.*)\&_suid=([0-9]+)$/.exec(n))&&t[1]||e,(t?String(t[2]||""):"")||!1},f.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},f.extractState=function(e,t){var n,r,i=null;return t=t||!1,(n=f.extractId(e))&&(i=f.getStateById(n)),i||(r=f.getFullUrl(e),(n=f.getIdByUrl(r)||!1)&&(i=f.getStateById(n)),i||!t||f.isTraditionalAnchor(e)||(i=f.createStateObject(null,null,r))),i},f.getIdByUrl=function(e){return f.urlToId[e]||f.store.urlToId[e]||n},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||n},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||n},f.hasUrlDuplicate=function(e){var t;return(t=f.extractState(e.url))&&t.id!==e.id},f.storeState=function(e){return f.urlToId[e.url]=e.id,f.storedStates.push(f.cloneObject(e)),e},f.isLastSavedState=function(e){var t=!1;return f.savedStates.length&&(t=e.id===f.getLastSavedState().id),t},f.saveState=function(e){return!f.isLastSavedState(e)&&(f.savedStates.push(f.cloneObject(e)),!0)},f.getStateByIndex=function(e){return void 0===e?f.savedStates[f.savedStates.length-1]:e<0?f.savedStates[f.savedStates.length+e]:f.savedStates[e]},f.getCurrentIndex=function(){return f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(e){var t=f.getLocationHref(e);return f.getHashByUrl(t)},f.unescapeHash=function(e){var t=f.normalizeHash(e);return t=decodeURIComponent(t)},f.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},f.setHash=function(e,t){var n,r;return!1!==t&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:t}),!1):(f.busy(!0),(n=f.extractState(e,!0))&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==e&&(f.bugs.setHash?(r=f.getPageUrl(),f.pushState(null,null,r+"#"+e,!1)):u.location.hash=e),f)},f.escapeHash=function(e){var t=f.normalizeHash(e);return t=s.encodeURIComponent(t),f.bugs.hashEscape||(t=t.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),t},f.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=f.unescapeHash(t)},f.setTitle=function(e){var t,n=e.title;n||(t=f.getStateByIndex(0))&&t.url===e.url&&(n=t.title||f.options.initialTitle);try{u.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return u.title=n,f},f.queues=[],f.busy=function(e){if(void 0!==e?f.busy.flag=e:void 0===f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){a(f.busy.timeout);var r=function(){var e,t,n;if(!f.busy.flag)for(e=f.queues.length-1;0<=e;--e)0!==(t=f.queues[e]).length&&(n=t.shift(),f.fireQueueItem(n),f.busy.timeout=o(r,f.options.busyDelay))};f.busy.timeout=o(r,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(e){return e.callback.apply(e.scope||f,e.args||[])},f.pushQueue=function(e){return f.queues[e.queue||0]=f.queues[e.queue||0]||[],f.queues[e.queue||0].push(e),f},f.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),f.busy()?f.pushQueue(e):f.fireQueueItem(e),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(a(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(e){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=o(function(){return f.doubleCheckClear(),f.stateChanged||e(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var e=f.extractState(f.getLocationHref());if(!f.isLastSavedState(e))return e||f.createStateObject(),f.Adapter.trigger(s,"popstate"),f},f.back=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),h.go(-1),!0)},f.forward=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),h.go(1),!0)},f.go=function(e,t){var n;if(0<e)for(n=1;n<=e;++n)f.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;e<=n;--n)f.back(t)}return f},f.emulated.pushState){var t=function(){};f.pushState=f.pushState||t,f.replaceState=f.replaceState||t}else f.onPopState=function(e,t){var n,r,i,o=!1,a=!1;return f.doubleCheckComplete(),(r=f.getHash())?((i=f.extractState(r||f.getLocationHref(),!0))?f.replaceState(i.data,i.title,i.url,!1):(f.Adapter.trigger(s,"anchorchange"),f.busy(!1)),f.expectedStateId=!1):((n=f.Adapter.extractEventData("state",e,t)||!1)?(o=f.getStateById(n),a=!0):o=f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()),o||(o=f.createStateObject(null,null,f.getLocationHref())),o.navigation=a,f.expectedStateId=!1,f.isLastSavedState(o)?(f.busy(!1),!1):(f.storeState(o),f.saveState(o),f.setTitle(o),f.Adapter.trigger(s,"statechange"),f.busy(!1),!0))},f.Adapter.bind(s,"popstate",f.onPopState),f.pushState=function(e,t,n,r){if(f.getHashByUrl(n)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:r}),!1;f.busy(!0);var i=f.createStateObject(e,t,n);return f.isLastSavedState(i)?f.busy(!1):(f.storeState(i),f.expectedStateId=i.id,h.pushState(i.id,i.title,i.url),f.Adapter.trigger(s,"popstate")),!0},f.replaceState=function(e,t,n,r){if(f.getHashByUrl(n)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==r&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:r}),!1;f.busy(!0);var i=f.createStateObject(e,t,n);return f.isLastSavedState(i)?f.busy(!1):(f.storeState(i),f.expectedStateId=i.id,h.replaceState(i.id,i.title,i.url),f.Adapter.trigger(s,"popstate")),!0};if(i){try{f.store=d.parse(i.getItem("History.store"))||{}}catch(e){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(s,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0))),i&&(f.onUnload=function(){var t,e,n;try{t=d.parse(i.getItem("History.store"))||{}}catch(e){t={}}for(e in t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{},f.idToState)f.idToState.hasOwnProperty(e)&&(t.idToState[e]=f.idToState[e]);for(e in f.urlToId)f.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=f.urlToId[e]);for(e in f.stateToId)f.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=f.stateToId[e]);f.store=t,f.normalizeStore(),n=d.stringify(t);try{i.setItem("History.store",n)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;i.length&&(i.removeItem("History.store"),i.setItem("History.store",n))}},f.intervalList.push(c(f.onUnload,f.options.storeInterval)),f.Adapter.bind(s,"beforeunload",f.onUnload),f.Adapter.bind(s,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(c(f.safariStatePoll,f.options.safariPollInterval)),"Apple Computer, Inc."!==r.vendor&&"Mozilla"!==(r.appCodeName||"")||(f.Adapter.bind(s,"hashchange",function(){f.Adapter.trigger(s,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(s,"hashchange")})))},f.options&&f.options.delayInit||f.init()}(window),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(I){var e,t,n,r;function i(e,t){var n,r,i,o=e.nodeName.toLowerCase();return"area"===o?(r=(n=e.parentNode).name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&(!!(i=I("img[usemap='#"+r+"']")[0])&&a(i))):(/^(input|select|textarea|button|object)$/.test(o)?!e.disabled:"a"===o&&e.href||t)&&a(e)}function a(e){return I.expr.filters.visible(e)&&!I(e).parents().addBack().filter(function(){return"hidden"===I.css(this,"visibility")}).length}I.ui=I.ui||{},I.extend(I.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),I.fn.extend({scrollParent:function(e){var t=this.css("position"),n="absolute"===t,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var e=I(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&i.length?i:I(this[0].ownerDocument||document)},uniqueId:(e=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&I(this).removeAttr("id")})}}),I.extend(I.expr[":"],{data:I.expr.createPseudo?I.expr.createPseudo(function(t){return function(e){return!!I.data(e,t)}}):function(e,t,n){return!!I.data(e,n[3])},focusable:function(e){return i(e,!isNaN(I.attr(e,"tabindex")))},tabbable:function(e){var t=I.attr(e,"tabindex"),n=isNaN(t);return(n||0<=t)&&i(e,!n)}}),I("<a>").outerWidth(1).jquery||I.each(["Width","Height"],function(e,n){var i="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),o={innerWidth:I.fn.innerWidth,innerHeight:I.fn.innerHeight,outerWidth:I.fn.outerWidth,outerHeight:I.fn.outerHeight};function a(e,t,n,r){return I.each(i,function(){t-=parseFloat(I.css(e,"padding"+this))||0,n&&(t-=parseFloat(I.css(e,"border"+this+"Width"))||0),r&&(t-=parseFloat(I.css(e,"margin"+this))||0)}),t}I.fn["inner"+n]=function(e){return void 0===e?o["inner"+n].call(this):this.each(function(){I(this).css(r,a(this,e)+"px")})},I.fn["outer"+n]=function(e,t){return"number"!=typeof e?o["outer"+n].call(this,e):this.each(function(){I(this).css(r,a(this,e,!0,t)+"px")})}}),I.fn.addBack||(I.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),I("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(I.fn.removeData=(t=I.fn.removeData,function(e){return arguments.length?t.call(this,I.camelCase(e)):t.call(this)})),I.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),I.fn.extend({focus:(r=I.fn.focus,function(t,n){return"number"==typeof t?this.each(function(){var e=this;setTimeout(function(){I(e).focus(),n&&n.call(e)},t)}):r.apply(this,arguments)}),disableSelection:(n="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.bind(n+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var t,n,r=I(this[0]);r.length&&r[0]!==document;){if(("absolute"===(t=r.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),I.ui.plugin={add:function(e,t,n){var r,i=I.ui[e].prototype;for(r in n)i.plugins[r]=i.plugins[r]||[],i.plugins[r].push([t,n[r]])},call:function(e,t,n,r){var i,o=e.plugins[t];if(o&&(r||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(i=0;i<o.length;i++)e.options[o[i][0]]&&o[i][1].apply(e.element,n)}};var o,s=0,l=Array.prototype.slice;I.cleanData=(o=I.cleanData,function(e){var t,n,r;for(r=0;null!=(n=e[r]);r++)try{(t=I._data(n,"events"))&&t.remove&&I(n).triggerHandler("remove")}catch(e){}o(e)}),I.widget=function(e,n,t){var r,i,o,a,s={},l=e.split(".")[0];return e=e.split(".")[1],r=l+"-"+e,t||(t=n,n=I.Widget),I.expr[":"][r.toLowerCase()]=function(e){return!!I.data(e,r)},I[l]=I[l]||{},i=I[l][e],o=I[l][e]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},I.extend(o,i,{version:t.version,_proto:I.extend({},t),_childConstructors:[]}),(a=new n).options=I.widget.extend({},a.options),I.each(t,function(t,r){var i,o;I.isFunction(r)?s[t]=(i=function(){return n.prototype[t].apply(this,arguments)},o=function(e){return n.prototype[t].apply(this,e)},function(){var e,t=this._super,n=this._superApply;return this._super=i,this._superApply=o,e=r.apply(this,arguments),this._super=t,this._superApply=n,e}):s[t]=r}),o.prototype=I.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||e},s,{constructor:o,namespace:l,widgetName:e,widgetFullName:r}),i?(I.each(i._childConstructors,function(e,t){var n=t.prototype;I.widget(n.namespace+"."+n.widgetName,o,t._proto)}),delete i._childConstructors):n._childConstructors.push(o),I.widget.bridge(e,o),o},I.widget.extend=function(e){for(var t,n,r=l.call(arguments,1),i=0,o=r.length;i<o;i++)for(t in r[i])n=r[i][t],r[i].hasOwnProperty(t)&&void 0!==n&&(I.isPlainObject(n)?e[t]=I.isPlainObject(e[t])?I.widget.extend({},e[t],n):I.widget.extend({},n):e[t]=n);return e},I.widget.bridge=function(o,t){var a=t.prototype.widgetFullName||o;I.fn[o]=function(n){var e="string"==typeof n,r=l.call(arguments,1),i=this;return e?this.each(function(){var e,t=I.data(this,a);return"instance"===n?(i=t,!1):t?I.isFunction(t[n])&&"_"!==n.charAt(0)?(e=t[n].apply(t,r))!==t&&void 0!==e?(i=e&&e.jquery?i.pushStack(e.get()):e,!1):void 0:I.error("no such method '"+n+"' for "+o+" widget instance"):I.error("cannot call methods on "+o+" prior to initialization; attempted to call method '"+n+"'")}):(r.length&&(n=I.widget.extend.apply(null,[n].concat(r))),this.each(function(){var e=I.data(this,a);e?(e.option(n||{}),e._init&&e._init()):I.data(this,a,new t(n,this))})),i}},I.Widget=function(){},I.Widget._childConstructors=[],I.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,t){t=I(t||this.defaultElement||this)[0],this.element=I(t),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=I(),this.hoverable=I(),this.focusable=I(),t!==this&&(I.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=I(t.style?t.ownerDocument:t.document||t),this.window=I(this.document[0].defaultView||this.document[0].parentWindow)),this.options=I.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:I.noop,_getCreateEventData:I.noop,_create:I.noop,_init:I.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(I.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:I.noop,widget:function(){return this.element},option:function(e,t){var n,r,i,o=e;if(0===arguments.length)return I.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(n=e.split(".")).shift(),n.length){for(r=o[e]=I.widget.extend({},this.options[e]),i=0;i<n.length-1;i++)r[n[i]]=r[n[i]]||{},r=r[n[i]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(a,s,e){var l,u=this;"boolean"!=typeof a&&(e=s,s=a,a=!1),e?(s=l=I(s),this.bindings=this.bindings.add(s)):(e=s,s=this.element,l=this.widget()),I.each(e,function(e,t){function n(){if(a||!0!==u.options.disabled&&!I(this).hasClass("ui-state-disabled"))return("string"==typeof t?u[t]:t).apply(u,arguments)}"string"!=typeof t&&(n.guid=t.guid=t.guid||n.guid||I.guid++);var r=e.match(/^([\w:-]*)\s*(.*)$/),i=r[1]+u.eventNamespace,o=r[2];o?l.delegate(o,i,n):s.bind(i,n)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t),this.bindings=I(this.bindings.not(e).get()),this.focusable=I(this.focusable.not(e).get()),this.hoverable=I(this.hoverable.not(e).get())},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){I(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){I(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){I(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){I(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,n){var r,i,o=this.options[e];if(n=n||{},(t=I.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],i=t.originalEvent)for(r in i)r in t||(t[r]=i[r]);return this.element.trigger(t,n),!(I.isFunction(o)&&!1===o.apply(this.element[0],[t].concat(n))||t.isDefaultPrevented())}},I.each({show:"fadeIn",hide:"fadeOut"},function(o,a){I.Widget.prototype["_"+o]=function(t,e,n){"string"==typeof e&&(e={effect:e});var r,i=e?!0===e||"number"==typeof e?a:e.effect||a:o;"number"==typeof(e=e||{})&&(e={duration:e}),r=!I.isEmptyObject(e),e.complete=n,e.delay&&t.delay(e.delay),r&&I.effects&&I.effects.effect[i]?t[o](e):i!==o&&t[i]?t[i](e.duration,e.easing,n):t.queue(function(e){I(this)[o](),n&&n.call(t[0]),e()})}});I.widget;var u=!1;I(document).mouseup(function(){u=!1});I.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){if(!0===I.data(e.target,t.widgetName+".preventClickEvent"))return I.removeData(e.target,t.widgetName+".preventClickEvent"),e.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,n=1===e.which,r=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&I(e.target).closest(this.options.cancel).length;return!(n&&!r&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?(e.preventDefault(),!0):(!0===I.data(e.target,this.widgetName+".preventClickEvent")&&I.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),u=!0))}},_mouseMove:function(e){if(this._mouseMoved){if(I.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&I.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),u=!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});!function(){I.ui=I.ui||{};var i,C,S=Math.max,E=Math.abs,D=Math.round,r=/left|center|right/,o=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,s=/^\w+/,l=/%$/,u=I.fn.position;function B(e,t,n){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?n/100:1)]}function T(e,t){return parseInt(I.css(e,t),10)||0}I.position={scrollbarWidth:function(){if(void 0!==i)return i;var e,t,n=I("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=n.children()[0];return I("body").append(n),e=r.offsetWidth,n.css("overflow","scroll"),e===(t=r.offsetWidth)&&(t=n[0].clientWidth),n.remove(),i=e-t},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?I.position.scrollbarWidth():0,height:r?I.position.scrollbarWidth():0}},getWithinInfo:function(e){var t=I(e||window),n=I.isWindow(t[0]),r=!!t[0]&&9===t[0].nodeType;return{element:t,isWindow:n,isDocument:r,offset:t.offset()||{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:n||r?t.width():t.outerWidth(),height:n||r?t.height():t.outerHeight()}}},I.fn.position=function(A){if(!A||!A.of)return u.apply(this,arguments);A=I.extend({},A);var d,p,f,h,m,e,t,n,g=I(A.of),v=I.position.getWithinInfo(A.within),y=I.position.getScrollInfo(v),w=(A.collision||"flip").split(" "),b={};return e=9===(n=(t=g)[0]).nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:I.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()},g[0].preventDefault&&(A.at="left top"),p=e.width,f=e.height,h=e.offset,m=I.extend({},h),I.each(["my","at"],function(){var e,t,n=(A[this]||"").split(" ");1===n.length&&(n=r.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=r.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",e=a.exec(n[0]),t=a.exec(n[1]),b[this]=[e?e[0]:0,t?t[0]:0],A[this]=[s.exec(n[0])[0],s.exec(n[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===A.at[0]?m.left+=p:"center"===A.at[0]&&(m.left+=p/2),"bottom"===A.at[1]?m.top+=f:"center"===A.at[1]&&(m.top+=f/2),d=B(b.at,p,f),m.left+=d[0],m.top+=d[1],this.each(function(){var n,e,a=I(this),s=a.outerWidth(),l=a.outerHeight(),t=T(this,"marginLeft"),r=T(this,"marginTop"),i=s+t+T(this,"marginRight")+y.width,o=l+r+T(this,"marginBottom")+y.height,u=I.extend({},m),c=B(b.my,a.outerWidth(),a.outerHeight());"right"===A.my[0]?u.left-=s:"center"===A.my[0]&&(u.left-=s/2),"bottom"===A.my[1]?u.top-=l:"center"===A.my[1]&&(u.top-=l/2),u.left+=c[0],u.top+=c[1],C||(u.left=D(u.left),u.top=D(u.top)),n={marginLeft:t,marginTop:r},I.each(["left","top"],function(e,t){I.ui.position[w[e]]&&I.ui.position[w[e]][t](u,{targetWidth:p,targetHeight:f,elemWidth:s,elemHeight:l,collisionPosition:n,collisionWidth:i,collisionHeight:o,offset:[d[0]+c[0],d[1]+c[1]],my:A.my,at:A.at,within:v,elem:a})}),A.using&&(e=function(e){var t=h.left-u.left,n=t+p-s,r=h.top-u.top,i=r+f-l,o={target:{element:g,left:h.left,top:h.top,width:p,height:f},element:{element:a,left:u.left,top:u.top,width:s,height:l},horizontal:n<0?"left":0<t?"right":"center",vertical:i<0?"top":0<r?"bottom":"middle"};p<s&&E(t+n)<p&&(o.horizontal="center"),f<l&&E(r+i)<f&&(o.vertical="middle"),S(E(t),E(n))>S(E(r),E(i))?o.important="horizontal":o.important="vertical",A.using.call(this,e,o)}),a.offset(I.extend(u,{using:e}))})},I.ui.position={fit:{left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,a=e.left-t.collisionPosition.marginLeft,s=i-a,l=a+t.collisionWidth-o-i;t.collisionWidth>o?0<s&&l<=0?(n=e.left+s+t.collisionWidth-o-i,e.left+=s-n):e.left=0<l&&s<=0?i:l<s?i+o-t.collisionWidth:i:0<s?e.left+=s:0<l?e.left-=l:e.left=S(e.left-a,e.left)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,s=i-a,l=a+t.collisionHeight-o-i;t.collisionHeight>o?0<s&&l<=0?(n=e.top+s+t.collisionHeight-o-i,e.top+=s-n):e.top=0<l&&s<=0?i:l<s?i+o-t.collisionHeight:i:0<s?e.top+=s:0<l?e.top-=l:e.top=S(e.top-a,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,o=i.offset.left+i.scrollLeft,a=i.width,s=i.isWindow?i.scrollLeft:i.offset.left,l=e.left-t.collisionPosition.marginLeft,u=l-s,c=l+t.collisionWidth-a-s,A="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];u<0?((n=e.left+A+d+p+t.collisionWidth-a-o)<0||n<E(u))&&(e.left+=A+d+p):0<c&&(0<(r=e.left-t.collisionPosition.marginLeft+A+d+p-s)||E(r)<c)&&(e.left+=A+d+p)},top:function(e,t){var n,r,i=t.within,o=i.offset.top+i.scrollTop,a=i.height,s=i.isWindow?i.scrollTop:i.offset.top,l=e.top-t.collisionPosition.marginTop,u=l-s,c=l+t.collisionHeight-a-s,A="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,d="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];u<0?((r=e.top+A+d+p+t.collisionHeight-a-o)<0||r<E(u))&&(e.top+=A+d+p):0<c&&(0<(n=e.top-t.collisionPosition.marginTop+A+d+p-s)||E(n)<c)&&(e.top+=A+d+p)}},flipfit:{left:function(){I.ui.position.flip.left.apply(this,arguments),I.ui.position.fit.left.apply(this,arguments)},top:function(){I.ui.position.flip.top.apply(this,arguments),I.ui.position.fit.top.apply(this,arguments)}}},function(){var e,t,n,r,i,o=document.getElementsByTagName("body")[0],a=document.createElement("div");for(i in e=document.createElement(o?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&I.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"}),n)e.style[i]=n[i];e.appendChild(a),(t=o||document.documentElement).insertBefore(e,t.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",r=I(a).offset().left,C=10<r&&r<11,e.innerHTML="",t.removeChild(e)}()}();I.ui.position;I.widget("ui.draggable",I.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var t=this.options;return this._blurActiveElement(e),!(this.helper||t.disabled||0<I(e.target).closest(".ui-resizable-handle").length)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(!0===t.iframeFix?"iframe":t.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=I(this);return I("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var t=this.document[0];if(this.handleElement.is(e.target))try{t.activeElement&&"body"!==t.activeElement.nodeName.toLowerCase()&&I(t.activeElement).blur()}catch(e){}},_mouseStart:function(e){var t=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),I.ui.ddmanager&&(I.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===I(this).css("position")}).length,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,t.cursorAt&&this._adjustOffsetFromHelper(t.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),I.ui.ddmanager&&!t.dropBehaviour&&I.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),I.ui.ddmanager&&I.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(e,t){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!t){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",I.ui.ddmanager&&I.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var t=this,n=!1;return I.ui.ddmanager&&!this.options.dropBehaviour&&(n=I.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||I.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?I(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==t._trigger("stop",e)&&t._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),I.ui.ddmanager&&I.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),I.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!I(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var t=this.options,n=I.isFunction(t.helper),r=n?I(t.helper.apply(this.element[0],[e])):"clone"===t.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===t.appendTo?this.element[0].parentNode:t.appendTo),n&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),I.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),t=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==t&&I.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,n,r=this.options,i=this.document[0];this.relativeContainer=null,r.containment?"window"!==r.containment?"document"!==r.containment?r.containment.constructor!==Array?("parent"===r.containment&&(r.containment=this.helper[0].parentNode),(n=(t=I(r.containment))[0])&&(e=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)):this.containment=r.containment:this.containment=[0,0,I(i).width()-this.helperProportions.width-this.margins.left,(I(i).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[I(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,I(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,I(window).scrollLeft()+I(window).width()-this.helperProportions.width-this.margins.left,I(window).scrollTop()+(I(window).height()||i.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=e.pageX,u=e.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(n=this.relativeContainer?(r=this.relativeContainer.offset(),[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(i=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-a.grid[1]:i+a.grid[1]:i,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,t,n){return n=n||this._uiHash(),I.ui.plugin.call(this,e,[t,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),I.Widget.prototype._trigger.call(this,e,t,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),I.ui.plugin.add("draggable","connectToSortable",{start:function(t,e,n){var r=I.extend({},e,{item:n.element});n.sortables=[],I(n.options.connectToSortable).each(function(){var e=I(this).sortable("instance");e&&!e.options.disabled&&(n.sortables.push(e),e.refreshPositions(),e._trigger("activate",t,r))})},stop:function(t,e,n){var r=I.extend({},e,{item:n.element});n.cancelHelperRemoval=!1,I.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(n,r,i){I.each(i.sortables,function(){var e=!1,t=this;t.positionAbs=i.positionAbs,t.helperProportions=i.helperProportions,t.offset.click=i.offset.click,t._intersectsWith(t.containerCache)&&(e=!0,I.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==t&&this._intersectsWith(this.containerCache)&&I.contains(t.element[0],this.element[0])&&(e=!1),e})),e?(t.isOver||(t.isOver=1,i._parent=r.helper.parent(),t.currentItem=r.helper.appendTo(t.element).data("ui-sortable-item",!0),t.options._helper=t.options.helper,t.options.helper=function(){return r.helper[0]},n.target=t.currentItem[0],t._mouseCapture(n,!0),t._mouseStart(n,!0,!0),t.offset.click.top=i.offset.click.top,t.offset.click.left=i.offset.click.left,t.offset.parent.left-=i.offset.parent.left-t.offset.parent.left,t.offset.parent.top-=i.offset.parent.top-t.offset.parent.top,i._trigger("toSortable",n),i.dropped=t.element,I.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,t.fromOutside=i),t.currentItem&&(t._mouseDrag(n),r.position=t.position)):t.isOver&&(t.isOver=0,t.cancelHelperRemoval=!0,t.options._revert=t.options.revert,t.options.revert=!1,t._trigger("out",n,t._uiHash(t)),t._mouseStop(n,!0),t.options.revert=t.options._revert,t.options.helper=t.options._helper,t.placeholder&&t.placeholder.remove(),r.helper.appendTo(i._parent),i._refreshOffsets(n),r.position=i._generatePosition(n,!0),i._trigger("fromSortable",n),i.dropped=!1,I.each(i.sortables,function(){this.refreshPositions()}))})}}),I.ui.plugin.add("draggable","cursor",{start:function(e,t,n){var r=I("body"),i=n.options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(e,t,n){var r=n.options;r._cursor&&I("body").css("cursor",r._cursor)}}),I.ui.plugin.add("draggable","opacity",{start:function(e,t,n){var r=I(t.helper),i=n.options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(e,t,n){var r=n.options;r._opacity&&I(t.helper).css("opacity",r._opacity)}}),I.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,t,n){var r=n.options,i=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+o.offsetHeight-e.pageY<r.scrollSensitivity?o.scrollTop=i=o.scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=i=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+o.offsetWidth-e.pageX<r.scrollSensitivity?o.scrollLeft=i=o.scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=i=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-I(a).scrollTop()<r.scrollSensitivity?i=I(a).scrollTop(I(a).scrollTop()-r.scrollSpeed):I(window).height()-(e.pageY-I(a).scrollTop())<r.scrollSensitivity&&(i=I(a).scrollTop(I(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-I(a).scrollLeft()<r.scrollSensitivity?i=I(a).scrollLeft(I(a).scrollLeft()-r.scrollSpeed):I(window).width()-(e.pageX-I(a).scrollLeft())<r.scrollSensitivity&&(i=I(a).scrollLeft(I(a).scrollLeft()+r.scrollSpeed)))),!1!==i&&I.ui.ddmanager&&!r.dropBehaviour&&I.ui.ddmanager.prepareOffsets(n,e)}}),I.ui.plugin.add("draggable","snap",{start:function(e,t,n){var r=n.options;n.snapElements=[],I(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=I(this),t=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:t.top,left:t.left})})},drag:function(e,t,n){var r,i,o,a,s,l,u,c,A,d,p=n.options,f=p.snapTolerance,h=t.offset.left,m=h+n.helperProportions.width,g=t.offset.top,v=g+n.helperProportions.height;for(A=n.snapElements.length-1;0<=A;A--)l=(s=n.snapElements[A].left-n.margins.left)+n.snapElements[A].width,c=(u=n.snapElements[A].top-n.margins.top)+n.snapElements[A].height,m<s-f||l+f<h||v<u-f||c+f<g||!I.contains(n.snapElements[A].item.ownerDocument,n.snapElements[A].item)?(n.snapElements[A].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,I.extend(n._uiHash(),{snapItem:n.snapElements[A].item})),n.snapElements[A].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(u-v)<=f,i=Math.abs(c-g)<=f,o=Math.abs(s-m)<=f,a=Math.abs(l-h)<=f,r&&(t.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),i&&(t.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(t.position.left=n._convertPositionTo("relative",{top:0,left:s-n.helperProportions.width}).left),a&&(t.position.left=n._convertPositionTo("relative",{top:0,left:l}).left)),d=r||i||o||a,"outer"!==p.snapMode&&(r=Math.abs(u-g)<=f,i=Math.abs(c-v)<=f,o=Math.abs(s-h)<=f,a=Math.abs(l-m)<=f,r&&(t.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),i&&(t.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(t.position.left=n._convertPositionTo("relative",{top:0,left:s}).left),a&&(t.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left)),!n.snapElements[A].snapping&&(r||i||o||a||d)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,I.extend(n._uiHash(),{snapItem:n.snapElements[A].item})),n.snapElements[A].snapping=r||i||o||a||d)}}),I.ui.plugin.add("draggable","stack",{start:function(e,t,n){var r,i=n.options,o=I.makeArray(I(i.stack)).sort(function(e,t){return(parseInt(I(e).css("zIndex"),10)||0)-(parseInt(I(t).css("zIndex"),10)||0)});o.length&&(r=parseInt(I(o[0]).css("zIndex"),10)||0,I(o).each(function(e){I(this).css("zIndex",r+e)}),this.css("zIndex",r+o.length))}}),I.ui.plugin.add("draggable","zIndex",{start:function(e,t,n){var r=I(t.helper),i=n.options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(e,t,n){var r=n.options;r._zIndex&&I(t.helper).css("zIndex",r._zIndex)}});I.ui.draggable;I.widget("ui.resizable",I.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(e,t){if("hidden"===I(e).css("overflow"))return!1;var n,r=t&&"left"===t?"scrollLeft":"scrollTop";return 0<e[r]||(e[r]=1,n=0<e[r],e[r]=0,n)},_create:function(){var e,t,n,r,o=this,i=this.options;if(this.element.addClass("ui-resizable"),I.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(I("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(I(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=I(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},t=0;t<e.length;t++)n=I.trim(e[t]),(r=I("<div class='ui-resizable-handle "+("ui-resizable-"+n)+"'></div>")).css({zIndex:i.zIndex}),"se"===n&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(r);this._renderAxis=function(e){var t,n,r,i;for(t in e=e||this.element,this.handles)this.handles[t].constructor===String?this.handles[t]=this.element.children(this.handles[t]).first().show():(this.handles[t].jquery||this.handles[t].nodeType)&&(this.handles[t]=I(this.handles[t]),this._on(this.handles[t],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=I(this.handles[t],this.element),i=/sw|ne|nw|se|n|s/.test(t)?n.outerHeight():n.outerWidth(),r=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(r,i),this._proportionallyResize()),this._handles=this._handles.add(this.handles[t])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(r=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=r&&r[1]?r[1]:"se")}),i.autoHide&&(this._handles.hide(),I(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(I(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){i.disabled||o.resizing||(I(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,t=function(e){I(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(e){var t,n,r=!1;for(t in this.handles)((n=I(this.handles[t])[0])===e.target||I.contains(n,e.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(e){var t,n,r,i=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),t=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),i.containment&&(t+=I(i.containment).scrollLeft()||0,n+=I(i.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:t,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:t,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof i.aspectRatio?i.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=I(".ui-resizable-"+this.axis).css("cursor"),I("body").css("cursor","auto"===r?this.axis+"-resize":r),o.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t,n,r=this.originalMousePosition,i=this.axis,o=e.pageX-r.left||0,a=e.pageY-r.top||0,s=this._change[i];return this._updatePrevProperties(),s&&(t=s.apply(this,[e,o,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),I.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges())),!1},_mouseStop:function(e){this.resizing=!1;var t,n,r,i,o,a,s,l=this.options,u=this;return this._helper&&(r=(n=(t=this._proportionallyResizeElements).length&&/textarea/i.test(t[0].nodeName))&&this._hasScroll(t[0],"left")?0:u.sizeDiff.height,i=n?0:u.sizeDiff.width,o={width:u.helper.width()-i,height:u.helper.height()-r},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,s=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(I.extend(o,{top:s,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),I("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,o,a=this.options;o={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,r=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,i=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),r>o.minHeight&&(o.minHeight=r),n<o.maxWidth&&(o.maxWidth=n),i<o.maxHeight&&(o.maxHeight=i)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===r&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===r&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,a=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,s=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,u=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),a&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),o&&u&&(e.left=s-t.minWidth),r&&u&&(e.left=s-t.maxWidth),a&&c&&(e.top=l-t.minHeight),i&&c&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseInt(r[t],10)||0,n[t]+=parseInt(i[t],10)||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||I("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize;return{left:this.originalPosition.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize;return{top:this.originalPosition.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(e,t,n){return I.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,n]))},sw:function(e,t,n){return I.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,n]))},ne:function(e,t,n){return I.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,n]))},nw:function(e,t,n){return I.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,n]))}},_propagate:function(e,t){I.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),I.ui.plugin.add("resizable","animate",{stop:function(t){var n=I(this).resizable("instance"),e=n.options,r=n._proportionallyResizeElements,i=r.length&&/textarea/i.test(r[0].nodeName),o=i&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,a=i?0:n.sizeDiff.width,s={width:n.size.width-a,height:n.size.height-o},l=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,u=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(I.extend(s,u&&l?{top:u,left:l}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var e={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};r&&r.length&&I(r[0]).css({width:e.width,height:e.height}),n._updateCache(e),n._propagate("resize",t)}})}}),I.ui.plugin.add("resizable","containment",{start:function(){var n,r,e,t,i,o,a,s=I(this).resizable("instance"),l=s.options,u=s.element,c=l.containment,A=c instanceof I?c.get(0):/parent/.test(c)?u.parent().get(0):c;A&&(s.containerElement=I(A),/document/.test(c)||c===document?(s.containerOffset={left:0,top:0},s.containerPosition={left:0,top:0},s.parentData={element:I(document),left:0,top:0,width:I(document).width(),height:I(document).height()||document.body.parentNode.scrollHeight}):(n=I(A),r=[],I(["Top","Right","Left","Bottom"]).each(function(e,t){r[e]=s._num(n.css("padding"+t))}),s.containerOffset=n.offset(),s.containerPosition=n.position(),s.containerSize={height:n.innerHeight()-r[3],width:n.innerWidth()-r[1]},e=s.containerOffset,t=s.containerSize.height,i=s.containerSize.width,o=s._hasScroll(A,"left")?A.scrollWidth:i,a=s._hasScroll(A)?A.scrollHeight:t,s.parentData={element:A,left:e.left,top:e.top,width:o,height:a}))},resize:function(e){var t,n,r,i,o=I(this).resizable("instance"),a=o.options,s=o.containerOffset,l=o.position,u=o._aspectRatio||e.shiftKey,c={top:0,left:0},A=o.containerElement,d=!0;A[0]!==document&&/static/.test(A.css("position"))&&(c=s),l.left<(o._helper?s.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-s.left:o.position.left-c.left),u&&(o.size.height=o.size.width/o.aspectRatio,d=!1),o.position.left=a.helper?s.left:0),l.top<(o._helper?s.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-s.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,d=!1),o.position.top=o._helper?s.top:0),r=o.containerElement.get(0)===o.element.parent().get(0),i=/relative|absolute/.test(o.containerElement.css("position")),r&&i?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),t=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-s.left)),n=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-s.top)),t+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-t,u&&(o.size.height=o.size.width/o.aspectRatio,d=!1)),n+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-n,u&&(o.size.width=o.size.height*o.aspectRatio,d=!1)),d||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var e=I(this).resizable("instance"),t=e.options,n=e.containerOffset,r=e.containerPosition,i=e.containerElement,o=I(e.helper),a=o.offset(),s=o.outerWidth()-e.sizeDiff.width,l=o.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(i.css("position"))&&I(this).css({left:a.left-r.left-n.left,width:s,height:l}),e._helper&&!t.animate&&/static/.test(i.css("position"))&&I(this).css({left:a.left-r.left-n.left,width:s,height:l})}}),I.ui.plugin.add("resizable","alsoResize",{start:function(){var e=I(this).resizable("instance").options;I(e.alsoResize).each(function(){var e=I(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,n){var t=I(this).resizable("instance"),r=t.options,i=t.originalSize,o=t.originalPosition,a={height:t.size.height-i.height||0,width:t.size.width-i.width||0,top:t.position.top-o.top||0,left:t.position.left-o.left||0};I(r.alsoResize).each(function(){var e=I(this),r=I(this).data("ui-resizable-alsoresize"),i={},t=e.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];I.each(t,function(e,t){var n=(r[t]||0)+(a[t]||0);n&&0<=n&&(i[t]=n||null)}),e.css(i)})},stop:function(){I(this).removeData("resizable-alsoresize")}}),I.ui.plugin.add("resizable","ghost",{start:function(){var e=I(this).resizable("instance"),t=e.options,n=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof t.ghost?t.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=I(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=I(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),I.ui.plugin.add("resizable","grid",{resize:function(){var e,t=I(this).resizable("instance"),n=t.options,r=t.size,i=t.originalSize,o=t.originalPosition,a=t.axis,s="number"==typeof n.grid?[n.grid,n.grid]:n.grid,l=s[0]||1,u=s[1]||1,c=Math.round((r.width-i.width)/l)*l,A=Math.round((r.height-i.height)/u)*u,d=i.width+c,p=i.height+A,f=n.maxWidth&&n.maxWidth<d,h=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>d,g=n.minHeight&&n.minHeight>p;n.grid=s,m&&(d+=l),g&&(p+=u),f&&(d-=l),h&&(p-=u),/^(se|s|e)$/.test(a)?(t.size.width=d,t.size.height=p):/^(ne)$/.test(a)?(t.size.width=d,t.size.height=p,t.position.top=o.top-A):/^(sw)$/.test(a)?(t.size.width=d,t.size.height=p,t.position.left=o.left-c):((p-u<=0||d-l<=0)&&(e=t._getPaddingPlusBorderDimensions(this)),0<p-u?(t.size.height=p,t.position.top=o.top-A):(p=u-e.height,t.size.height=p,t.position.top=o.top+i.height-p),0<d-l?(t.size.width=d,t.position.left=o.left-c):(d=l-e.width,t.size.width=d,t.position.left=o.left+i.width-d))}});I.ui.resizable,I.widget("ui.selectable",I.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e,t=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){(e=I(t.options.filter,t.element[0])).addClass("ui-selectee"),e.each(function(){var e=I(this),t=e.offset();I.data(this,"selectable-item",{element:this,$element:e,left:t.left,top:t.top,right:t.left+e.outerWidth(),bottom:t.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=e.addClass("ui-selectee"),this._mouseInit(),this.helper=I("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(n){var r=this,e=this.options;this.opos=[n.pageX,n.pageY],this.options.disabled||(this.selectees=I(e.filter,this.element[0]),this._trigger("start",n),I(e.appendTo).append(this.helper),this.helper.css({left:n.pageX,top:n.pageY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var e=I.data(this,"selectable-item");e.startselected=!0,n.metaKey||n.ctrlKey||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,r._trigger("unselecting",n,{unselecting:e.element}))}),I(n.target).parents().addBack().each(function(){var e,t=I.data(this,"selectable-item");if(t)return e=!n.metaKey&&!n.ctrlKey||!t.$element.hasClass("ui-selected"),t.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),t.unselecting=!e,t.selecting=e,(t.selected=e)?r._trigger("selecting",n,{selecting:t.element}):r._trigger("unselecting",n,{unselecting:t.element}),!1}))},_mouseDrag:function(n){if(this.dragged=!0,!this.options.disabled){var e,r=this,i=this.options,o=this.opos[0],a=this.opos[1],s=n.pageX,l=n.pageY;return s<o&&(e=s,s=o,o=e),l<a&&(e=l,l=a,a=e),this.helper.css({left:o,top:a,width:s-o,height:l-a}),this.selectees.each(function(){var e=I.data(this,"selectable-item"),t=!1;e&&e.element!==r.element[0]&&("touch"===i.tolerance?t=!(e.left>s||e.right<o||e.top>l||e.bottom<a):"fit"===i.tolerance&&(t=e.left>o&&e.right<s&&e.top>a&&e.bottom<l),t?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,r._trigger("selecting",n,{selecting:e.element}))):(e.selecting&&((n.metaKey||n.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),r._trigger("unselecting",n,{unselecting:e.element}))),e.selected&&(n.metaKey||n.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,r._trigger("unselecting",n,{unselecting:e.element})))))}),!1}},_mouseStop:function(t){var n=this;return this.dragged=!1,I(".ui-unselecting",this.element[0]).each(function(){var e=I.data(this,"selectable-item");e.$element.removeClass("ui-unselecting"),e.unselecting=!1,e.startselected=!1,n._trigger("unselected",t,{unselected:e.element})}),I(".ui-selecting",this.element[0]).each(function(){var e=I.data(this,"selectable-item");e.$element.removeClass("ui-selecting").addClass("ui-selected"),e.selecting=!1,e.selected=!0,e.startselected=!0,n._trigger("selected",t,{selected:e.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),I.widget("ui.sortable",I.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return t<=e&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),I.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var e=this.items.length-1;0<=e;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,t){var n=null,r=!1,i=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(e),I(e.target).parents().each(function(){if(I.data(this,i.widgetName+"-item")===i)return n=I(this),!1}),I.data(e.target,i.widgetName+"-item")===i&&(n=I(e.target)),!!n&&(!(this.options.handle&&!t&&(I(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(r=!0)}),!r))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(e,t,n){var r,i,o=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},I.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(i=this.document.find("body"),this.storedCursor=i.css("cursor"),i.css("cursor",o.cursor),this.storedStylesheet=I("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(i)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(r=this.containers.length-1;0<=r;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return I.ui.ddmanager&&(I.ui.ddmanager.current=this),I.ui.ddmanager&&!o.dropBehaviour&&I.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var t,n,r,i,o=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),e.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==a&&I.ui.ddmanager&&!o.dropBehaviour&&I.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t=this.items.length-1;0<=t;t--)if(r=(n=this.items[t]).item[0],(i=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(r===this.currentItem[0]||this.placeholder[1===i?"next":"prev"]()[0]===r||I.contains(this.placeholder[0],r)||"semi-dynamic"===this.options.type&&I.contains(this.element[0],r))){if(this.direction=1===i?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),I.ui.ddmanager&&I.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,t){if(e){if(I.ui.ddmanager&&!this.options.dropBehaviour&&I.ui.ddmanager.drop(this,e),this.options.revert){var n=this,r=this.placeholder.offset(),i=this.options.axis,o={};i&&"x"!==i||(o.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),i&&"y"!==i||(o.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,I(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,t);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),I.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?I(this.domPosition.prev).after(this.currentItem):I(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var e=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},I(e).each(function(){var e=(I(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);e&&n.push((t.key||e[1]+"[]")+"="+(t.key&&t.expression?e[1]:e[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(e){var t=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t.each(function(){n.push(I(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,o=e.left,a=o+e.width,s=e.top,l=s+e.height,u=this.offset.click.top,c=this.offset.click.left,A="x"===this.options.axis||s<r+u&&r+u<l,d="y"===this.options.axis||o<t+c&&t+c<a,p=A&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:o<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),r=t&&n,i=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!r&&(this.floating?o&&"right"===o||"down"===i?2:1:i&&("down"===i?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?"right"===i&&n||"left"===i&&!n:r&&("down"===r&&t||"up"===r&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(0<e?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(0<e?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(e){var t,n,r,i,o=[],a=[],s=this._connectWith();if(s&&e)for(t=s.length-1;0<=t;t--)for(n=(r=I(s[t],this.document[0])).length-1;0<=n;n--)(i=I.data(r[n],this.widgetFullName))&&i!==this&&!i.options.disabled&&a.push([I.isFunction(i.options.items)?i.options.items.call(i.element):I(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);function l(){o.push(this)}for(a.push([I.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):I(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),t=a.length-1;0<=t;t--)a[t][0].each(l);return I(o)},_removeCurrentsFromItems:function(){var n=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=I.grep(this.items,function(e){for(var t=0;t<n.length;t++)if(n[t]===e.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var t,n,r,i,o,a,s,l,u=this.items,c=[[I.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):I(this.options.items,this.element),this]],A=this._connectWith();if(A&&this.ready)for(t=A.length-1;0<=t;t--)for(n=(r=I(A[t],this.document[0])).length-1;0<=n;n--)(i=I.data(r[n],this.widgetFullName))&&i!==this&&!i.options.disabled&&(c.push([I.isFunction(i.options.items)?i.options.items.call(i.element[0],e,{item:this.currentItem}):I(i.options.items,i.element),i]),this.containers.push(i));for(t=c.length-1;0<=t;t--)for(o=c[t][1],n=0,l=(a=c[t][0]).length;n<l;n++)(s=I(a[n])).data(this.widgetName+"-item",o),u.push({item:s,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var t,n,r,i;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;0<=t;t--)(n=this.items[t]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?I(this.options.toleranceElement,n.item):n.item,e||(n.width=r.outerWidth(),n.height=r.outerHeight()),i=r.offset(),n.left=i.left,n.top=i.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--)i=this.containers[t].element.offset(),this.containers[t].containerCache.left=i.left,this.containers[t].containerCache.top=i.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this},_createPlaceholder:function(n){var r,i=(n=n||this).options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var e=n.currentItem[0].nodeName.toLowerCase(),t=I("<"+e+">",n.document[0]).addClass(r||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===e?n._createTrPlaceholder(n.currentItem.find("tr").eq(0),I("<tr>",n.document[0]).appendTo(t)):"tr"===e?n._createTrPlaceholder(n.currentItem,t):"img"===e&&t.attr("src",n.currentItem.attr("src")),r||t.css("visibility","hidden"),t},update:function(e,t){r&&!i.forcePlaceholderSize||(t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10)))}}),n.placeholder=I(i.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),i.placeholder.update(n,n.placeholder)},_createTrPlaceholder:function(e,t){var n=this;e.children().each(function(){I("<td>&#160;</td>",n.document[0]).attr("colspan",I(this).attr("colspan")||1).appendTo(t)})},_contactContainers:function(e){var t,n,r,i,o,a,s,l,u,c,A=null,d=null;for(t=this.containers.length-1;0<=t;t--)if(!I.contains(this.currentItem[0],this.containers[t].element[0]))if(this._intersectsWith(this.containers[t].containerCache)){if(A&&I.contains(this.containers[t].element[0],A.element[0]))continue;A=this.containers[t],d=t}else this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",e,this._uiHash(this)),this.containers[t].containerCache.over=0);if(A)if(1===this.containers.length)this.containers[d].containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1);else{for(r=1e4,i=null,o=(u=A.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",c=u?"clientX":"clientY",n=this.items.length-1;0<=n;n--)I.contains(this.containers[d].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(s=this.items[n].item.offset()[o],l=!1,e[c]-s>this.items[n][a]/2&&(l=!0),Math.abs(e[c]-s)<r&&(r=Math.abs(e[c]-s),i=this.items[n],this.direction=l?"up":"down"));if(!i&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[d])return void(this.currentContainer.containerCache.over||(this.containers[d]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));i?this._rearrange(e,i,null,!0):this._rearrange(e,null,this.containers[d].element,!0),this._trigger("change",e,this._uiHash()),this.containers[d]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[d],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",e,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(e){var t=this.options,n=I.isFunction(t.helper)?I(t.helper.apply(this.element[0],[e,this.currentItem])):"clone"===t.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||I("parent"!==t.appendTo?t.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!t.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!t.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),I.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&I.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&I.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,t,n,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),"document"!==r.containment&&"window"!==r.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=I(r.containment)[0],t=I(r.containment).offset(),n="hidden"!==I(e).css("overflow"),this.containment=[t.left+(parseInt(I(e).css("borderLeftWidth"),10)||0)+(parseInt(I(e).css("paddingLeft"),10)||0)-this.margins.left,t.top+(parseInt(I(e).css("borderTopWidth"),10)||0)+(parseInt(I(e).css("paddingTop"),10)||0)-this.margins.top,t.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(I(e).css("borderLeftWidth"),10)||0)-(parseInt(I(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,t.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(I(e).css("borderTopWidth"),10)||0)-(parseInt(I(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&I.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:r.scrollTop())*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())*n}},_generatePosition:function(e){var t,n,r=this.options,i=e.pageX,o=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&I.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(i=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(i=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),r.grid&&(t=this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1],o=this.containment?t-this.offset.click.top>=this.containment[1]&&t-this.offset.click.top<=this.containment[3]?t:t-this.offset.click.top>=this.containment[1]?t-r.grid[1]:t+r.grid[1]:t,n=this.originalPageX+Math.round((i-this.originalPageX)/r.grid[0])*r.grid[0],i=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-r.grid[0]:n+r.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:a.scrollTop()),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:a.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){this.reverting=!1;var n,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)"auto"!==this._storedCSS[n]&&"static"!==this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();function i(t,n,r){return function(e){r._trigger(t,e,n._uiHash(n))}}for(this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;0<=n;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===I.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var t=e||this;return{helper:t.helper,placeholder:t.placeholder||I([]),position:t.position,originalPosition:t.originalPosition,offset:t.positionAbs,item:t.currentItem,sender:e?e.element:null}}}),I.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(e){var t=I(e.target);!this.mouseHandled&&t.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),t.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&I(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){if(!this.previousFilter){var t=I(e.currentTarget);t.siblings(".ui-state-active").removeClass("ui-state-active"),this.focus(e,t)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(e){this._delay(function(){I.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=I(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){var t,n,r,i,o=!0;switch(e.keyCode){case I.ui.keyCode.PAGE_UP:this.previousPage(e);break;case I.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case I.ui.keyCode.HOME:this._move("first","first",e);break;case I.ui.keyCode.END:this._move("last","last",e);break;case I.ui.keyCode.UP:this.previous(e);break;case I.ui.keyCode.DOWN:this.next(e);break;case I.ui.keyCode.LEFT:this.collapse(e);break;case I.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case I.ui.keyCode.ENTER:case I.ui.keyCode.SPACE:this._activate(e);break;case I.ui.keyCode.ESCAPE:this.collapse(e);break;default:o=!1,n=this.previousFilter||"",r=String.fromCharCode(e.keyCode),i=!1,clearTimeout(this.filterTimer),r===n?i=!0:r=n+r,t=this._filterMenuItems(r),(t=i&&-1!==t.index(this.active.next())?this.active.nextAll(".ui-menu-item"):t).length||(r=String.fromCharCode(e.keyCode),t=this._filterMenuItems(r)),t.length?(this.focus(e,t),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&e.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(e):this.select(e))},refresh:function(){var e,t=this,r=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=I(this),t=e.parent(),n=I("<span>").addClass("ui-menu-icon ui-icon "+r).data("ui-menu-submenu-carat",!0);t.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",t.attr("id"))}),(e=n.add(this.element).find(this.options.items)).not(".ui-menu-item").each(function(){var e=I(this);t._isDivider(e)&&e.addClass("ui-widget-content ui-menu-divider")}),e.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),e.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!I.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),r=this.active.addClass("ui-state-focus").removeClass("ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),(n=t.children(".ui-menu")).length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(e){var t,n,r,i,o,a;this._hasScroll()&&(t=parseFloat(I.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(I.css(this.activeMenu[0],"paddingTop"))||0,r=e.offset().top-this.activeMenu.offset().top-t-n,i=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=e.outerHeight(),r<0?this.activeMenu.scrollTop(i+r):o<r+a&&this.activeMenu.scrollTop(i+r-o+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(e){var t=I.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(t)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var e=n?this.element:I(t&&t.target).closest(this.element.find(".ui-menu"));e.length||(e=this.element),this._close(e),this.blur(t),this.activeMenu=e},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(e){return!I(e.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]()),this.focus(n,r)},nextPage:function(e){var t,n,r;this.active?this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return(t=I(this)).offset().top-n-r<0}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())):this.next(e)},previousPage:function(e){var t,n,r;this.active?this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return 0<(t=I(this)).offset().top-n+r}),this.focus(e,t)):this.focus(e,this.activeMenu.find(this.options.items).first())):this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||I(e.target).closest(".ui-menu-item");var t={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,t)},_filterMenuItems:function(e){var t=e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),n=new RegExp("^"+t,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return n.test(I.trim(I(this).text()))})}});I.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var n,r,i,e=this.element[0].nodeName.toLowerCase(),t="textarea"===e,o="input"===e;this.isMultiLine=!!t||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[t||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))r=i=n=!0;else{r=i=n=!1;var t=I.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:n=!0,this._move("previousPage",e);break;case t.PAGE_DOWN:n=!0,this._move("nextPage",e);break;case t.UP:n=!0,this._keyEvent("previous",e);break;case t.DOWN:n=!0,this._keyEvent("next",e);break;case t.ENTER:this.menu.active&&(n=!0,e.preventDefault(),this.menu.select(e));break;case t.TAB:this.menu.active&&this.menu.select(e);break;case t.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:r=!0,this._searchTimeout(e)}}},keypress:function(e){if(n)return n=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault());if(!r){var t=I.ui.keyCode;switch(e.keyCode){case t.PAGE_UP:this._move("previousPage",e);break;case t.PAGE_DOWN:this._move("nextPage",e);break;case t.UP:this._keyEvent("previous",e);break;case t.DOWN:this._keyEvent("next",e)}}},input:function(e){if(i)return i=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),this._change(e))}}),this._initSource(),this.menu=I("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];I(e.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(e){e.target===t.element[0]||e.target===n||I.contains(n,e.target)||t.close()})})},menufocus:function(e,t){var n,r;if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){I(e.target).trigger(e.originalEvent)});r=t.item.data("ui-autocomplete-item"),!1!==this._trigger("focus",e,{item:r})&&e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(r.value),(n=t.item.attr("aria-label")||r.value)&&I.trim(n).length&&(this.liveRegion.children().hide(),I("<div>").text(n).appendTo(this.liveRegion))},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=I("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?I(e):this.document.find(e).eq(0)),e&&e[0]||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var n,r,i=this;I.isArray(this.options.source)?(n=this.options.source,this.source=function(e,t){t(I.ui.autocomplete.filter(n,e.term))}):"string"==typeof this.options.source?(r=this.options.source,this.source=function(e,t){i.xhr&&i.xhr.abort(),i.xhr=I.ajax({url:r,data:e,dataType:"json",success:function(e){t(e)},error:function(){t([])}})}):this.source=this.options.source},_searchTimeout:function(r){clearTimeout(this.searching),this.searching=this._delay(function(){var e=this.term===this._value(),t=this.menu.element.is(":visible"),n=r.altKey||r.ctrlKey||r.metaKey||r.shiftKey;e&&(!e||t||n)||(this.selectedItem=null,this.search(null,r))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return I.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:I.map(e,function(e){return"string"==typeof e?{label:e,value:e}:I.extend({},e,{label:e.label||e.value,value:e.value||e.label})})},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),t.show(),this._resizeMenu(),t.position(I.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(n,e){var r=this;I.each(e,function(e,t){r._renderItemData(n,t)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(e,t){return I("<li>").text(t.label).appendTo(e)},_move:function(e,t){if(this.menu.element.is(":visible"))return this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t);this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),I.extend(I.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,t){var n=new RegExp(I.ui.autocomplete.escapeRegex(t),"i");return I.grep(e,function(e){return n.test(e.label||e.value||e)})}}),I.widget("ui.autocomplete",I.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(1<e?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.children().hide(),I("<div>").text(t).appendTo(this.liveRegion))}});I.ui.autocomplete;var c,A="ui-button ui-widget ui-state-default ui-corner-all",d="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",p=function(){var e=I(this);setTimeout(function(){e.find(":ui-button").button("refresh")},1)},f=function(e){var t=e.name,n=e.form,r=I([]);return t&&(t=t.replace(/'/g,"\\'"),r=n?I(n).find("[name='"+t+"'][type=radio]"):I("[name='"+t+"'][type=radio]",e.ownerDocument).filter(function(){return!this.form})),r};I.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,p),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,n=this.options,e="checkbox"===this.type||"radio"===this.type,r=e?"":"ui-state-active";null===n.label&&(n.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(A).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){n.disabled||this===c&&I(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){n.disabled||I(this).removeClass(r)}).bind("click"+this.eventNamespace,function(e){n.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),e&&this.element.bind("change"+this.eventNamespace,function(){t.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(n.disabled)return!1;I(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var e=t.element[0];f(e).not(e).map(function(){return I(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(n.disabled)return!1;I(this).addClass("ui-state-active"),c=this,t.document.one("mouseup",function(){c=null})}).bind("mouseup"+this.eventNamespace,function(){if(n.disabled)return!1;I(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(n.disabled)return!1;e.keyCode!==I.ui.keyCode.SPACE&&e.keyCode!==I.ui.keyCode.ENTER||I(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){I(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===I.ui.keyCode.SPACE&&I(this).click()})),this._setOption("disabled",n.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),(n=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(A+" ui-state-active "+d).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){if(this._super(e,t),"disabled"===e)return this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),void(t&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")));this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?f(this.element[0]).each(function(){I(this).is(":checked")?I(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):I(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"!==this.type){var e=this.buttonElement.removeClass(d),t=I("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),n=this.options.icons,r=n.primary&&n.secondary,i=[];n.primary||n.secondary?(this.options.text&&i.push("ui-button-text-icon"+(r?"s":n.primary?"-primary":"-secondary")),n.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(i.push(r?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",I.trim(t)))):i.push("ui-button-text-only"),e.addClass(i.join(" "))}else this.options.label&&this.element.val(this.options.label)}}),I.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var e="rtl"===this.element.css("direction"),t=this.element.find(this.options.items),n=t.filter(":ui-button");t.not(":ui-button").button(),n.button("refresh"),this.buttons=t.map(function(){return I(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return I(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});var h;I.ui.button;function m(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},I.extend(this._defaults,this.regional[""]),this.regional.en=I.extend(!0,{},this.regional[""]),this.regional["en-US"]=I.extend(!0,{},this.regional.en),this.dpDiv=g(I("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function g(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){I(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&I(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&I(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",v)}function v(){I.datepicker._isDisabledDatepicker(h.inline?h.dpDiv.parent()[0]:h.input[0])||(I(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),I(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&I(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&I(this).addClass("ui-datepicker-next-hover"))}function y(e,t){for(var n in I.extend(e,t),t)null==t[n]&&(e[n]=t[n]);return e}I.extend(I.ui,{datepicker:{version:"1.11.4"}}),I.extend(m.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return y(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var n,r,i;r="div"===(n=e.nodeName.toLowerCase())||"span"===n,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(i=this._newInst(I(e),r)).settings=I.extend({},t||{}),"input"===n?this._connectDatepicker(e,i):r&&this._inlineDatepicker(e,i)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?g(I("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var n=I(e);t.append=I([]),t.trigger=I([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(t),I.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n,r,i,o=this._get(t,"appendText"),a=this._get(t,"isRTL");t.append&&t.append.remove(),o&&(t.append=I("<span class='"+this._appendClass+"'>"+o+"</span>"),e[a?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(n=this._get(t,"showOn"))&&"both"!==n||e.focus(this._showDatepicker),"button"!==n&&"both"!==n||(r=this._get(t,"buttonText"),i=this._get(t,"buttonImage"),t.trigger=I(this._get(t,"buttonImageOnly")?I("<img/>").addClass(this._triggerClass).attr({src:i,alt:r,title:r}):I("<button type='button'></button>").addClass(this._triggerClass).html(i?I("<img/>").attr({src:i,alt:r,title:r}):r)),e[a?"before":"after"](t.trigger),t.trigger.click(function(){return I.datepicker._datepickerShowing&&I.datepicker._lastInput===e[0]?I.datepicker._hideDatepicker():(I.datepicker._datepickerShowing&&I.datepicker._lastInput!==e[0]&&I.datepicker._hideDatepicker(),I.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,o=new Date(2009,11,20),a=this._get(e,"dateFormat");a.match(/[DM]/)&&(t=function(e){for(i=r=n=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},o.setMonth(t(this._get(e,a.match(/MM/)?"monthNames":"monthNamesShort"))),o.setDate(t(this._get(e,a.match(/DD/)?"dayNames":"dayNamesShort"))+20-o.getDay())),e.input.attr("size",this._formatDate(e,o).length)}},_inlineDatepicker:function(e,t){var n=I(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv),I.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,r,i){var o,a,s,l,u,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=I("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),I("body").append(this._dialogInput),(c=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},I.data(this._dialogInput[0],"datepicker",c)),y(c.settings,r||{}),t=t&&t.constructor===Date?this._formatDate(c,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null,this._pos||(a=document.documentElement.clientWidth,s=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[a/2-100+l,s/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),I.blockUI&&I.blockUI(this.dpDiv),I.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(e){var t,n=I(e),r=I.data(e,"datepicker");n.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),I.removeData(e,"datepicker"),"input"===t?(r.append.remove(),r.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||n.removeClass(this.markerClassName).empty(),h===r&&(h=null))},_enableDatepicker:function(t){var e,n,r=I(t),i=I.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((n=r.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=I.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,n,r=I(t),i=I.data(t,"datepicker");r.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((n=r.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=I.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return I.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r,i,o,a,s=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?I.extend({},I.datepicker._defaults):s?"all"===t?I.extend({},s.settings):this._get(s,t):null;r=t||{},"string"==typeof t&&((r={})[t]=n),s&&(this._curInst===s&&this._hideDatepicker(),i=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(s,"min"),a=this._getMinMaxDate(s,"max"),y(s.settings,r),null!==o&&void 0!==r.dateFormat&&void 0===r.minDate&&(s.settings.minDate=this._formatDate(s,o)),null!==a&&void 0!==r.dateFormat&&void 0===r.maxDate&&(s.settings.maxDate=this._formatDate(s,a)),"disabled"in r&&(r.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(I(e),s),this._autoSize(s),this._setDate(s,i),this._updateAlternate(s),this._updateDatepicker(s))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t,n,r,i=I.datepicker._getInst(e.target),o=!0,a=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,I.datepicker._datepickerShowing)switch(e.keyCode){case 9:I.datepicker._hideDatepicker(),o=!1;break;case 13:return(r=I("td."+I.datepicker._dayOverClass+":not(."+I.datepicker._currentClass+")",i.dpDiv))[0]&&I.datepicker._selectDay(e.target,i.selectedMonth,i.selectedYear,r[0]),(t=I.datepicker._get(i,"onSelect"))?(n=I.datepicker._formatDate(i),t.apply(i.input?i.input[0]:null,[n,i])):I.datepicker._hideDatepicker(),!1;case 27:I.datepicker._hideDatepicker();break;case 33:I.datepicker._adjustDate(e.target,e.ctrlKey?-I.datepicker._get(i,"stepBigMonths"):-I.datepicker._get(i,"stepMonths"),"M");break;case 34:I.datepicker._adjustDate(e.target,e.ctrlKey?+I.datepicker._get(i,"stepBigMonths"):+I.datepicker._get(i,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&I.datepicker._clearDate(e.target),o=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&I.datepicker._gotoToday(e.target),o=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&I.datepicker._adjustDate(e.target,a?1:-1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&I.datepicker._adjustDate(e.target,e.ctrlKey?-I.datepicker._get(i,"stepBigMonths"):-I.datepicker._get(i,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&I.datepicker._adjustDate(e.target,-7,"D"),o=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&I.datepicker._adjustDate(e.target,a?-1:1,"D"),o=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&I.datepicker._adjustDate(e.target,e.ctrlKey?+I.datepicker._get(i,"stepBigMonths"):+I.datepicker._get(i,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&I.datepicker._adjustDate(e.target,7,"D"),o=e.ctrlKey||e.metaKey;break;default:o=!1}else 36===e.keyCode&&e.ctrlKey?I.datepicker._showDatepicker(this):o=!1;o&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,n,r=I.datepicker._getInst(e.target);if(I.datepicker._get(r,"constrainInput"))return t=I.datepicker._possibleChars(I.datepicker._get(r,"dateFormat")),n=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||n<" "||!t||-1<t.indexOf(n)},_doKeyUp:function(e){var t=I.datepicker._getInst(e.target);if(t.input.val()!==t.lastVal)try{I.datepicker.parseDate(I.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,I.datepicker._getFormatConfig(t))&&(I.datepicker._setDateFromField(t),I.datepicker._updateAlternate(t),I.datepicker._updateDatepicker(t))}catch(e){}return!0},_showDatepicker:function(e){var t,n,r,i,o,a,s;("input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=I("input",e.parentNode)[0]),I.datepicker._isDisabledDatepicker(e)||I.datepicker._lastInput===e)||(t=I.datepicker._getInst(e),I.datepicker._curInst&&I.datepicker._curInst!==t&&(I.datepicker._curInst.dpDiv.stop(!0,!0),t&&I.datepicker._datepickerShowing&&I.datepicker._hideDatepicker(I.datepicker._curInst.input[0])),!1!==(r=(n=I.datepicker._get(t,"beforeShow"))?n.apply(e,[e,t]):{})&&(y(t.settings,r),t.lastVal=null,I.datepicker._lastInput=e,I.datepicker._setDateFromField(t),I.datepicker._inDialog&&(e.value=""),I.datepicker._pos||(I.datepicker._pos=I.datepicker._findPos(e),I.datepicker._pos[1]+=e.offsetHeight),i=!1,I(e).parents().each(function(){return!(i|="fixed"===I(this).css("position"))}),o={left:I.datepicker._pos[0],top:I.datepicker._pos[1]},I.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),I.datepicker._updateDatepicker(t),o=I.datepicker._checkOffset(t,o,i),t.dpDiv.css({position:I.datepicker._inDialog&&I.blockUI?"static":i?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),t.inline||(a=I.datepicker._get(t,"showAnim"),s=I.datepicker._get(t,"duration"),t.dpDiv.css("z-index",function(e){for(var t,n;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(n=parseInt(e.css("zIndex"),10),!isNaN(n)&&0!==n))return n;e=e.parent()}return 0}(I(e))+1),I.datepicker._datepickerShowing=!0,I.effects&&I.effects.effect[a]?t.dpDiv.show(a,I.datepicker._get(t,"showOptions"),s):t.dpDiv[a||"show"](a?s:null),I.datepicker._shouldFocusInput(t)&&t.input.focus(),I.datepicker._curInst=t)))},_updateDatepicker:function(e){this.maxRows=4,(h=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,n=this._getNumberOfMonths(e),r=n[1],i=e.dpDiv.find("."+this._dayOverClass+" a");0<i.length&&v.apply(i.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<r&&e.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),e.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===I.datepicker._curInst&&I.datepicker._datepickerShowing&&I.datepicker._shouldFocusInput(e)&&e.input.focus(),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),o=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(n?0:I(document).scrollLeft()),l=document.documentElement.clientHeight+(n?0:I(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-o:0,t.left-=n&&t.left===e.input.offset().left?I(document).scrollLeft():0,t.top-=n&&t.top===e.input.offset().top+a?I(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>s&&r<s?Math.abs(t.left+r-s):0),t.top-=Math.min(t.top,t.top+i>l&&i<l?Math.abs(i+a):0),t},_findPos:function(e){for(var t,n=this._getInst(e),r=this._get(n,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||I.expr.filters.hidden(e));)e=e[r?"previousSibling":"nextSibling"];return[(t=I(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,n,r,i,o=this._curInst;!o||e&&o!==I.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(o,"showAnim"),n=this._get(o,"duration"),r=function(){I.datepicker._tidyDialog(o)},I.effects&&(I.effects.effect[t]||I.effects[t])?o.dpDiv.hide(t,I.datepicker._get(o,"showOptions"),n,r):o.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?n:null,r),t||r(),this._datepickerShowing=!1,(i=this._get(o,"onClose"))&&i.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),I.blockUI&&(I.unblockUI(),I("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(I.datepicker._curInst){var t=I(e.target),n=I.datepicker._getInst(t[0]);(t[0].id===I.datepicker._mainDivId||0!==t.parents("#"+I.datepicker._mainDivId).length||t.hasClass(I.datepicker.markerClassName)||t.closest("."+I.datepicker._triggerClass).length||!I.datepicker._datepickerShowing||I.datepicker._inDialog&&I.blockUI)&&(!t.hasClass(I.datepicker.markerClassName)||I.datepicker._curInst===n)||I.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var r=I(e),i=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(i,t+("M"===n?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i))},_gotoToday:function(e){var t,n=I(e),r=this._getInst(n[0]);this._get(r,"gotoCurrent")&&r.currentDay?(r.selectedDay=r.currentDay,r.drawMonth=r.selectedMonth=r.currentMonth,r.drawYear=r.selectedYear=r.currentYear):(t=new Date,r.selectedDay=t.getDate(),r.drawMonth=r.selectedMonth=t.getMonth(),r.drawYear=r.selectedYear=t.getFullYear()),this._notifyChange(r),this._adjustDate(n)},_selectMonthYear:function(e,t,n){var r=I(e),i=this._getInst(r[0]);i["selected"+("M"===n?"Month":"Year")]=i["draw"+("M"===n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i,o=I(e);I(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||((i=this._getInst(o[0])).selectedDay=i.currentDay=I("a",r).html(),i.selectedMonth=i.currentMonth=t,i.selectedYear=i.currentYear=n,this._selectDate(e,this._formatDate(i,i.currentDay,i.currentMonth,i.currentYear)))},_clearDate:function(e){var t=I(e);this._selectDate(t,"")},_selectDate:function(e,t){var n,r=I(e),i=this._getInst(r[0]);t=null!=t?t:this._formatDate(i),i.input&&i.input.val(t),this._updateAlternate(i),(n=this._get(i,"onSelect"))?n.apply(i.input?i.input[0]:null,[t,i]):i.input&&i.input.trigger("change"),i.inline?this._updateDatepicker(i):(this._hideDatepicker(),this._lastInput=i.input[0],"object"!=typeof i.input[0]&&i.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t,n,r,i=this._get(e,"altField");i&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),n=this._getDate(e),r=this.formatDate(t,n,this._getFormatConfig(e)),I(i).each(function(){I(this).val(r)}))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(n,o,e){if(null==n||null==o)throw"Invalid arguments";if(""===(o="object"==typeof o?o.toString():o+""))return null;var r,t,i,a,s=0,l=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),c=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,A=(e?e.dayNames:null)||this._defaults.dayNames,d=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,p=(e?e.monthNames:null)||this._defaults.monthNames,f=-1,h=-1,m=-1,g=-1,v=!1,y=function(e){var t=r+1<n.length&&n.charAt(r+1)===e;return t&&r++,t},w=function(e){var t=y(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,r=new RegExp("^\\d{"+("y"===e?n:1)+","+n+"}"),i=o.substring(s).match(r);if(!i)throw"Missing number at position "+s;return s+=i[0].length,parseInt(i[0],10)},b=function(e,t,n){var r=-1,i=I.map(y(e)?n:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(I.each(i,function(e,t){var n=t[1];if(o.substr(s,n.length).toLowerCase()===n.toLowerCase())return r=t[0],s+=n.length,!1}),-1!==r)return r+1;throw"Unknown name at position "+s},C=function(){if(o.charAt(s)!==n.charAt(r))throw"Unexpected literal at position "+s;s++};for(r=0;r<n.length;r++)if(v)"'"!==n.charAt(r)||y("'")?C():v=!1;else switch(n.charAt(r)){case"d":m=w("d");break;case"D":b("D",c,A);break;case"o":g=w("o");break;case"m":h=w("m");break;case"M":h=b("M",d,p);break;case"y":f=w("y");break;case"@":f=(a=new Date(w("@"))).getFullYear(),h=a.getMonth()+1,m=a.getDate();break;case"!":f=(a=new Date((w("!")-this._ticksTo1970)/1e4)).getFullYear(),h=a.getMonth()+1,m=a.getDate();break;case"'":y("'")?C():v=!0;break;default:C()}if(s<o.length&&(i=o.substr(s),!/^\s+/.test(i)))throw"Extra/unparsed characters found in date: "+i;if(-1===f?f=(new Date).getFullYear():f<100&&(f+=(new Date).getFullYear()-(new Date).getFullYear()%100+(f<=u?0:-100)),-1<g)for(h=1,m=g;;){if(m<=(t=this._getDaysInMonth(f,h-1)))break;h++,m-=t}if((a=this._daylightSavingAdjust(new Date(f,h-1,m))).getFullYear()!==f||a.getMonth()+1!==h||a.getDate()!==m)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(n,e,t){if(!e)return"";var r,i=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,o=(t?t.dayNames:null)||this._defaults.dayNames,a=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,s=(t?t.monthNames:null)||this._defaults.monthNames,l=function(e){var t=r+1<n.length&&n.charAt(r+1)===e;return t&&r++,t},u=function(e,t,n){var r=""+t;if(l(e))for(;r.length<n;)r="0"+r;return r},c=function(e,t,n,r){return l(e)?r[t]:n[t]},A="",d=!1;if(e)for(r=0;r<n.length;r++)if(d)"'"!==n.charAt(r)||l("'")?A+=n.charAt(r):d=!1;else switch(n.charAt(r)){case"d":A+=u("d",e.getDate(),2);break;case"D":A+=c("D",e.getDay(),i,o);break;case"o":A+=u("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":A+=u("m",e.getMonth()+1,2);break;case"M":A+=c("M",e.getMonth(),a,s);break;case"y":A+=l("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":A+=e.getTime();break;case"!":A+=1e4*e.getTime()+this._ticksTo1970;break;case"'":l("'")?A+="'":d=!0;break;default:A+=n.charAt(r)}return A},_possibleChars:function(n){var r,e="",t=!1,i=function(e){var t=r+1<n.length&&n.charAt(r+1)===e;return t&&r++,t};for(r=0;r<n.length;r++)if(t)"'"!==n.charAt(r)||i("'")?e+=n.charAt(r):t=!1;else switch(n.charAt(r)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":i("'")?e+="'":t=!0;break;default:e+=n.charAt(r)}return e},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),o=i,a=this._getFormatConfig(e);try{o=this.parseDate(n,r,a)||i}catch(e){r=t?"":r}e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),e.currentDay=r?o.getDate():0,e.currentMonth=r?o.getMonth():0,e.currentYear=r?o.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(s,e,t){var n,r,i=null==e||""===e?t:"string"==typeof e?function(e){try{return I.datepicker.parseDate(I.datepicker._get(s,"dateFormat"),e,I.datepicker._getFormatConfig(s))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?I.datepicker._getDate(s):null)||new Date,n=t.getFullYear(),r=t.getMonth(),i=t.getDate(),o=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=o.exec(e);a;){switch(a[2]||"d"){case"d":case"D":i+=parseInt(a[1],10);break;case"w":case"W":i+=7*parseInt(a[1],10);break;case"m":case"M":r+=parseInt(a[1],10),i=Math.min(i,I.datepicker._getDaysInMonth(n,r));break;case"y":case"Y":n+=parseInt(a[1],10),i=Math.min(i,I.datepicker._getDaysInMonth(n,r))}a=o.exec(e)}return new Date(n,r,i)}(e):"number"==typeof e?isNaN(e)?t:(n=e,(r=new Date).setDate(r.getDate()+n),r):new Date(e.getTime());return(i=i&&"Invalid Date"===i.toString()?t:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,o=e.selectedYear,a=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=a.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=a.getMonth(),e.drawYear=e.selectedYear=e.currentYear=a.getFullYear(),i===e.selectedMonth&&o===e.selectedYear||n||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){I.datepicker._adjustDate(n,-t,"M")},next:function(){I.datepicker._adjustDate(n,+t,"M")},hide:function(){I.datepicker._hideDatepicker()},today:function(){I.datepicker._gotoToday(n)},selectDay:function(){return I.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return I.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return I.datepicker._selectMonthYear(n,this,"Y"),!1}};I(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,o,a,s,l,u,c,A,d,p,f,h,m,g,v,y,w,b,C,S,E,D,B,T,I,F,x,_,M,N,k,U,P,Q,H,O,L=new Date,R=this._daylightSavingAdjust(new Date(L.getFullYear(),L.getMonth(),L.getDate())),V=this._get(e,"isRTL"),q=this._get(e,"showButtonPanel"),K=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),j=this._getNumberOfMonths(e),z=this._get(e,"showCurrentAtPos"),G=this._get(e,"stepMonths"),J=1!==j[0]||1!==j[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),$=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-z,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),Y)for(t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-j[0]*j[1]+1,Y.getDate())),t=$&&t<$?$:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,n=this._get(e,"prevText"),n=W?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z-G,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>":K?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z+G,1)),this._getFormatConfig(e)):i,o=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+i+"</span></a>":K?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(V?"w":"e")+"'>"+i+"</span></a>",a=this._get(e,"currentText"),s=this._get(e,"gotoCurrent")&&e.currentDay?X:R,a=W?this.formatDate(a,s,this._getFormatConfig(e)):a,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",u=q?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(V?l:"")+(this._isInRange(e,s)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+a+"</button>":"")+(V?"":l)+"</div>":"",c=parseInt(this._get(e,"firstDay"),10),c=isNaN(c)?0:c,A=this._get(e,"showWeek"),d=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),h=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),v=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),w="",C=0;C<j[0];C++){for(S="",this.maxRows=4,E=0;E<j[1];E++){if(D=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),B=" ui-corner-all",T="",J){if(T+="<div class='ui-datepicker-group",1<j[1])switch(E){case 0:T+=" ui-datepicker-group-first",B=" ui-corner-"+(V?"right":"left");break;case j[1]-1:T+=" ui-datepicker-group-last",B=" ui-corner-"+(V?"left":"right");break;default:T+=" ui-datepicker-group-middle",B=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+B+"'>"+(/all|left/.test(B)&&0===C?V?o:r:"")+(/all|right/.test(B)&&0===C?V?r:o:"")+this._generateMonthYearHeader(e,Z,ee,$,Y,0<C||0<E,f,h)+"</div><table class='ui-datepicker-calendar'><thead><tr>",I=A?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",b=0;b<7;b++)I+="<th scope='col'"+(5<=(b+c+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+d[F=(b+c)%7]+"'>"+p[F]+"</span></th>";for(T+=I+"</tr></thead><tbody>",x=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,x)),_=(this._getFirstDayOfMonth(ee,Z)-c+7)%7,M=Math.ceil((_+x)/7),N=J&&this.maxRows>M?this.maxRows:M,this.maxRows=N,k=this._daylightSavingAdjust(new Date(ee,Z,1-_)),U=0;U<N;U++){for(T+="<tr>",P=A?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(k)+"</td>":"",b=0;b<7;b++)Q=m?m.apply(e.input?e.input[0]:null,[k]):[!0,""],O=(H=k.getMonth()!==Z)&&!v||!Q[0]||$&&k<$||Y&&Y<k,P+="<td class='"+(5<=(b+c+6)%7?" ui-datepicker-week-end":"")+(H?" ui-datepicker-other-month":"")+(k.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===k.getTime()&&y.getTime()===D.getTime()?" "+this._dayOverClass:"")+(O?" "+this._unselectableClass+" ui-state-disabled":"")+(H&&!g?"":" "+Q[1]+(k.getTime()===X.getTime()?" "+this._currentClass:"")+(k.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(H&&!g||!Q[2]?"":" title='"+Q[2].replace(/'/g,"&#39;")+"'")+(O?"":" data-handler='selectDay' data-event='click' data-month='"+k.getMonth()+"' data-year='"+k.getFullYear()+"'")+">"+(H&&!g?"&#xa0;":O?"<span class='ui-state-default'>"+k.getDate()+"</span>":"<a class='ui-state-default"+(k.getTime()===R.getTime()?" ui-state-highlight":"")+(k.getTime()===X.getTime()?" ui-state-active":"")+(H?" ui-priority-secondary":"")+"' href='#'>"+k.getDate()+"</a>")+"</td>",k.setDate(k.getDate()+1),k=this._daylightSavingAdjust(k);T+=P+"</tr>"}11<++Z&&(Z=0,ee++),S+=T+="</tbody></table>"+(J?"</div>"+(0<j[0]&&E===j[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}w+=S}return w+=u,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,o,a,s){var l,u,c,A,d,p,f,h,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),v=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",w="";if(o||!m)w+="<span class='ui-datepicker-month'>"+a[t]+"</span>";else{for(l=r&&r.getFullYear()===n,u=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",c=0;c<12;c++)(!l||c>=r.getMonth())&&(!u||c<=i.getMonth())&&(w+="<option value='"+c+"'"+(c===t?" selected='selected'":"")+">"+s[c]+"</option>");w+="</select>"}if(v||(y+=w+(!o&&m&&g?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",o||!g)y+="<span class='ui-datepicker-year'>"+n+"</span>";else{for(A=this._get(e,"yearRange").split(":"),d=(new Date).getFullYear(),f=(p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?d+parseInt(e,10):parseInt(e,10);return isNaN(t)?d:t})(A[0]),h=Math.max(f,p(A[1]||"")),f=r?Math.max(f,r.getFullYear()):f,h=i?Math.min(h,i.getFullYear()):h,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=h;f++)e.yearshtml+="<option value='"+f+"'"+(f===n?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),v&&(y+=(!o&&m&&g?"":"&#xa0;")+w),y+="</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"===n?t:0),i=e.drawMonth+("M"===n?t:0),o=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"===n?t:0),a=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,o)));e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),"M"!==n&&"Y"!==n||this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&r<i?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),o=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&o.setDate(this._getDaysInMonth(o.getFullYear(),o.getMonth())),this._isInRange(e,o)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),o=this._getMinMaxDate(e,"max"),a=null,s=null,l=this._get(e,"yearRange");return l&&(n=l.split(":"),r=(new Date).getFullYear(),a=parseInt(n[0],10),s=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(a+=r),n[1].match(/[+\-].*/)&&(s+=r)),(!i||t.getTime()>=i.getTime())&&(!o||t.getTime()<=o.getTime())&&(!a||t.getFullYear()>=a)&&(!s||t.getFullYear()<=s)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),I.fn.datepicker=function(e){if(!this.length)return this;I.datepicker.initialized||(I(document).mousedown(I.datepicker._checkExternalClick),I.datepicker.initialized=!0),0===I("#"+I.datepicker._mainDivId).length&&I("body").append(I.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?I.datepicker["_"+e+"Datepicker"].apply(I.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?I.datepicker["_"+e+"Datepicker"].apply(I.datepicker,[this].concat(t)):I.datepicker._attachDatepicker(this,e)}):I.datepicker["_"+e+"Datepicker"].apply(I.datepicker,[this[0]].concat(t))},I.datepicker=new m,I.datepicker.initialized=!1,I.datepicker.uuid=(new Date).getTime(),I.datepicker.version="1.11.4";I.datepicker,I.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var t=I(this).css(e).offset().top;t<0&&I(this).css("top",e.top-t)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&I.fn.draggable&&this._makeDraggable(),this.options.resizable&&I.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var e=this.options.appendTo;return e&&(e.jquery||e.nodeType)?I(e):this.document.find(e||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:I.noop,enable:I.noop,close:function(e){var t,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e)){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{(t=this.document[0].activeElement)&&"body"!==t.nodeName.toLowerCase()&&I(t).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!1,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+I(this).css("z-index")}).get(),i=Math.max.apply(null,r);return i>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",i+1),n=!0),n&&!t&&this._trigger("focus",e),n},open:function(){var e=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=I(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){e._focusTabbable(),e._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(e){function t(){var e=this.document[0].activeElement;this.uiDialog[0]===e||I.contains(this.uiDialog[0],e)||this._focusTabbable()}e.preventDefault(),t.call(this),this._delay(t)},_createWrapper:function(){this.uiDialog=I("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(e){if(this.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===I.ui.keyCode.ESCAPE)return e.preventDefault(),void this.close(e);if(e.keyCode===I.ui.keyCode.TAB&&!e.isDefaultPrevented()){var t=this.uiDialog.find(":tabbable"),n=t.filter(":first"),r=t.filter(":last");e.target!==r[0]&&e.target!==this.uiDialog[0]||e.shiftKey?e.target!==n[0]&&e.target!==this.uiDialog[0]||!e.shiftKey||(this._delay(function(){r.focus()}),e.preventDefault()):(this._delay(function(){n.focus()}),e.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var e;this.uiDialogTitlebar=I("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(e){I(e.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=I("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),e=I("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(e),this.uiDialog.attr({"aria-labelledby":e.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=I("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=I("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var i=this,e=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),I.isEmptyObject(e)||I.isArray(e)&&!e.length?this.uiDialog.removeClass("ui-dialog-buttons"):(I.each(e,function(e,t){var n,r;t=I.isFunction(t)?{click:t,text:e}:t,t=I.extend({type:"button"},t),n=t.click,t.click=function(){n.apply(i.element[0],arguments)},r={icons:t.icons,text:t.showText},delete t.icons,delete t.showText,I("<button></button>",t).button(r).appendTo(i.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var i=this,o=this.options;function a(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,t){I(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",e,a(t))},drag:function(e,t){i._trigger("drag",e,a(t))},stop:function(e,t){var n=t.offset.left-i.document.scrollLeft(),r=t.offset.top-i.document.scrollTop();o.position={my:"left top",at:"left"+(0<=n?"+":"")+n+" top"+(0<=r?"+":"")+r,of:i.window},I(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",e,a(t))}})},_makeResizable:function(){var o=this,a=this.options,e=a.resizable,t=this.uiDialog.css("position"),n="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";function s(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:n,start:function(e,t){I(this).addClass("ui-dialog-resizing"),o._blockFrames(),o._trigger("resizeStart",e,s(t))},resize:function(e,t){o._trigger("resize",e,s(t))},stop:function(e,t){var n=o.uiDialog.offset(),r=n.left-o.document.scrollLeft(),i=n.top-o.document.scrollTop();a.height=o.uiDialog.height(),a.width=o.uiDialog.width(),a.position={my:"left top",at:"left"+(0<=r?"+":"")+r+" top"+(0<=i?"+":"")+i,of:o.window},I(this).removeClass("ui-dialog-resizing"),o._unblockFrames(),o._trigger("resizeStop",e,s(t))}}).css("position",t)},_trackFocus:function(){this._on(this.widget(),{focusin:function(e){this._makeFocusTarget(),this._focusedElement=I(e.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var e=this._trackingInstances(),t=I.inArray(this,e);-1!==t&&e.splice(t,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(e){var n=this,r=!1,i={};I.each(e,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(r=!0),e in n.resizableRelatedOptions&&(i[e]=t)}),r&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",i)},_setOption:function(e,t){var n,r,i=this.uiDialog;"dialogClass"===e&&i.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&((n=i.is(":data(ui-draggable)"))&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&((r=i.is(":data(ui-resizable)"))&&!t&&i.resizable("destroy"),r&&"string"==typeof t&&i.resizable("option","handles",t),r||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n="number"==typeof r.maxHeight?Math.max(0,r.maxHeight-e):"none","auto"===r.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var e=I(this);return I("<div>").css({position:"absolute",width:e.outerWidth(),height:e.outerHeight()}).appendTo(e.parent()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(e){return!!I(e.target).closest(".ui-dialog").length||!!I(e.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=I("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}}),I.widget("ui.slider",I.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,t,n=this.options,r=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),i=[];for(t=n.values&&n.values.length||1,r.length>t&&(r.slice(t).remove(),r=r.slice(0,t)),e=r.length;e<t;e++)i.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>");this.handles=r.add(I(i.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){I(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,t="";e.range?(!0===e.range&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:I.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=I("<div></div>").appendTo(this.element),t="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(t+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var t,n,r,i,o,a,s,l=this,u=this.options;return!u.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(n-l.values(e));(t<r||r===t&&(e===l._lastChangedValue||l.values(e)===u.min))&&(r=t,i=I(this),o=e)}),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,i.addClass("ui-state-active").focus(),a=i.offset(),s=!I(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=s?{left:0,top:0}:{left:e.pageX-a.left-i.width()/2,top:e.pageY-a.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i;return 1<(n=("horizontal"===this.orientation?(t=this.elementSize.width,e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)))/t)&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),r=this._valueMax()-this._valueMin(),i=this._valueMin()+n*r,this._trimAlignValue(i)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,o;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&r<n||1===t&&n<r)&&(n=r),n!==this.values(t)&&((i=this.values())[t]=n,o=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),!1!==o&&this.values(t,n))):n!==this.value()&&!1!==(o=this._trigger("slide",e,{handle:this.handles[t],value:n}))&&this.value(n)},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,t){var n,r,i;if(1<arguments.length)return this.options.values[e]=this._trimAlignValue(t),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!I.isArray(e))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,r=e,i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(r[i]),this._change(null,i);this._refreshValue()},_setOption:function(e,t){var n,r=0;switch("range"===e&&!0===this.options.range&&("min"===t?(this.options.value=this._values(0),this.options.values=null):"max"===t&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),I.isArray(this.options.values)&&(r=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!t),this._super(e,t),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===t?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<r;n+=1)this._change(null,n);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=0<this.options.step?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=0<n?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var e=this.options.max,t=this._valueMin(),n=this.options.step;e=Math.floor(+(e-t).toFixed(this._precision())/n)*n+t,this.max=parseFloat(e.toFixed(this._precision()))},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var t,n,e,r,i,o=this.options.range,a=this.options,s=this,l=!this._animateOff&&a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(e){n=(s.values(e)-s._valueMin())/(s._valueMax()-s._valueMin())*100,u["horizontal"===s.orientation?"left":"bottom"]=n+"%",I(this).stop(1,1)[l?"animate":"css"](u,a.animate),!0===s.options.range&&("horizontal"===s.orientation?(0===e&&s.range.stop(1,1)[l?"animate":"css"]({left:n+"%"},a.animate),1===e&&s.range[l?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:a.animate})):(0===e&&s.range.stop(1,1)[l?"animate":"css"]({bottom:n+"%"},a.animate),1===e&&s.range[l?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:a.animate}))),t=n}):(e=this.value(),r=this._valueMin(),i=this._valueMax(),n=i!==r?(e-r)/(i-r)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:n+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:n+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(e){var t,n,r,i=I(e.target).data("ui-slider-handle-index");switch(e.keyCode){case I.ui.keyCode.HOME:case I.ui.keyCode.END:case I.ui.keyCode.PAGE_UP:case I.ui.keyCode.PAGE_DOWN:case I.ui.keyCode.UP:case I.ui.keyCode.RIGHT:case I.ui.keyCode.DOWN:case I.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,I(e.target).addClass("ui-state-active"),!1===this._start(e,i)))return}switch(r=this.options.step,t=n=this.options.values&&this.options.values.length?this.values(i):this.value(),e.keyCode){case I.ui.keyCode.HOME:n=this._valueMin();break;case I.ui.keyCode.END:n=this._valueMax();break;case I.ui.keyCode.PAGE_UP:n=this._trimAlignValue(t+(this._valueMax()-this._valueMin())/this.numPages);break;case I.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(t-(this._valueMax()-this._valueMin())/this.numPages);break;case I.ui.keyCode.UP:case I.ui.keyCode.RIGHT:if(t===this._valueMax())return;n=this._trimAlignValue(t+r);break;case I.ui.keyCode.DOWN:case I.ui.keyCode.LEFT:if(t===this._valueMin())return;n=this._trimAlignValue(t-r)}this._slide(e,i,n)},keyup:function(e){var t=I(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,t),this._change(e,t),I(e.target).removeClass("ui-state-active"))}}});function w(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}I.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var r={},i=this.element;return I.each(["min","max","step"],function(e,t){var n=i.attr(t);void 0!==n&&n.length&&(r[t]=n)}),r},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((0<t?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(e){var t;function n(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=t,this._delay(function(){this.previous=t}))}t=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),!1!==this._start(e)&&this._repeat(null,I(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(I(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,I(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&0<e.height()&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(e){var t=this.options,n=I.ui.keyCode;switch(e.keyCode){case n.UP:return this._repeat(null,1,e),!0;case n.DOWN:return this._repeat(null,-1,e),!0;case n.PAGE_UP:return this._repeat(null,t.page,e),!0;case n.PAGE_DOWN:return this._repeat(null,-t.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:n})||(this._value(n),this.counter++)},_increment:function(e){var t=this.options.incremental;return t?I.isFunction(t)?t(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return-1===n?0:t.length-n-1},_adjustValue:function(e){var t,n,r=this.options;return n=e-(t=null!==r.min?r.min:0),e=t+(n=Math.round(n/r.step)*r.step),e=parseFloat(e.toFixed(this._precision())),null!==r.max&&e>r.max?r.max:null!==r.min&&e<r.min?r.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var n=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(n))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:w(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&null!==(n=this._parse(e))&&(t||(n=this._adjustValue(n)),e=this._format(n)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:w(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:w(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:w(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:w(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());w(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}),function(e){if(e.support.touch="ontouchend"in document,e.support.touch){var t,n=e.ui.mouse.prototype,r=n._mouseInit,i=n._mouseDestroy;n._touchStart=function(e){!t&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(t=!0,this._touchMoved=!1,o(e,"mouseover"),o(e,"mousemove"),o(e,"mousedown"))},n._touchMove=function(e){t&&(this._touchMoved=!0,o(e,"mousemove"))},n._touchEnd=function(e){t&&(o(e,"mouseup"),o(e,"mouseout"),this._touchMoved||o(e,"click"),t=!1)},n._mouseInit=function(){this.element.bind({touchstart:e.proxy(this,"_touchStart"),touchmove:e.proxy(this,"_touchMove"),touchend:e.proxy(this,"_touchEnd")}),r.call(this)},n._mouseDestroy=function(){this.element.unbind({touchstart:e.proxy(this,"_touchStart"),touchmove:e.proxy(this,"_touchMove"),touchend:e.proxy(this,"_touchEnd")}),i.call(this)}}function o(e,t){if(!(1<e.originalEvent.touches.length)){e.preventDefault();var n=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}}}(jQuery),function(Dpa){var Jpa,Epa=this||eval("this"),Fpa=Epa.document,Gpa=Epa.navigator,Hpa=Epa.jQuery,Ipa=Epa.JSON;Jpa=function(e,i){var x=void 0!==e?e:{};x.exportSymbol=function(e,t){for(var n=e.split("."),r=x,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},x.exportProperty=function(e,t,n){e[t]=n},x.version="3.4.0",x.exportSymbol("version",x.version),x.options={deferUpdates:!1,useOnlyNativeEvents:!1},x.utils=function(){function p(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function e(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function t(e,t){return e.__proto__=t,e}var n={__proto__:[]}instanceof Array,r={},o={};r[Gpa&&/Firefox\/2/i.test(Gpa.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],r.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],p(r,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)o[t[n]]=e});var s={propertychange:!0},l=Fpa&&function(){for(var e=3,t=Fpa.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return 4<e?e:Dpa}(),a=/\S+/g;function i(e,t,n,r){var i=e[t].match(a)||[];x.utils.arrayForEach(n.match(a),function(e){x.utils.addOrRemoveItem(i,e,r)}),e[t]=i.join(" ")}return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},arrayIndexOf:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r))return e[r];return null},arrayRemoveItem:function(e,t){var n=x.utils.arrayIndexOf(e,t);0<n?e.splice(n,1):0===n&&e.shift()},arrayGetDistinctValues:function(e){for(var t=[],n=0,r=(e=e||[]).length;n<r;n++)x.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){for(var n=[],r=0,i=(e=e||[]).length;r<i;r++)n.push(t(e[r],r));return n},arrayFilter:function(e,t){for(var n=[],r=0,i=(e=e||[]).length;r<i;r++)t(e[r],r)&&n.push(e[r]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var r=x.utils.arrayIndexOf(x.utils.peekObservable(e),t);r<0?n&&e.push(t):n||e.splice(r,1)},canSetPrototype:n,extend:e,setPrototypeOf:t,setPrototypeOfOrExtend:n?t:e,objectForEach:p,objectMap:function(e,t){if(!e)return e;var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},emptyDomNode:function(e){for(;e.firstChild;)x.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){for(var t=x.utils.makeArray(e),n=(t[0]&&t[0].ownerDocument||Fpa).createElement("div"),r=0,i=t.length;r<i;r++)n.appendChild(x.cleanNode(t[r]));return n},cloneNodes:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var o=e[n].cloneNode(!0);i.push(t?x.cleanNode(o):o)}return i},setDomNodeChildren:function(e,t){if(x.utils.emptyDomNode(e),t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,o=0,a=t.length;o<a;o++)i.insertBefore(t[o],r);for(o=0,a=n.length;o<a;o++)x.removeNode(n[o])}},fixUpContinuousNodeArray:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);for(;1<e.length&&e[e.length-1].parentNode!==t;)e.length--;if(1<e.length){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)e.push(n),n=n.nextSibling;e.push(r)}}return e},setOptionNodeSelectionState:function(e,t){l<7?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return null===e||e===Dpa?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return x.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!x.utils.arrayFirst(e,x.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},catchFunctionErrors:function(e){return x.onError?function(){try{return e.apply(this,arguments)}catch(e){throw x.onError&&x.onError(e),e}}:e},setTimeout:function(e,t){return setTimeout(x.utils.catchFunctionErrors(e),t)},deferError:function(e){setTimeout(function(){throw x.onError&&x.onError(e),e},0)},registerEventHandler:function(t,e,n){var r=x.utils.catchFunctionErrors(n),i=l&&s[e];if(x.options.useOnlyNativeEvents||i||!Hpa)if(i||"function"!=typeof t.addEventListener){if(void 0===t.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var o=function(e){r.call(t,e)},a="on"+e;t.attachEvent(a,o),x.utils.domNodeDisposal.addDisposeCallback(t,function(){t.detachEvent(a,o)})}else t.addEventListener(e,r,!1);else Hpa(t).bind(e,r)},triggerEvent:function(e,t){if(!e||!e.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var n=function(e,t){if("input"!==x.utils.tagNameLower(e)||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}(e,t);if(x.options.useOnlyNativeEvents||!Hpa||n)if("function"==typeof Fpa.createEvent){if("function"!=typeof e.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var r=o[t]||"HTMLEvents",i=Fpa.createEvent(r);i.initEvent(t,!0,!0,Epa,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(i)}else if(n&&e.click)e.click();else{if(void 0===e.fireEvent)throw new Error("Browser doesn't support triggering events");e.fireEvent("on"+t)}else Hpa(e).trigger(t)},unwrapObservable:function(e){return x.isObservable(e)?e():e},peekObservable:function(e){return x.isObservable(e)?e.peek():e},toggleDomNodeCssClass:function(t,e,n){var r;e&&("object"==typeof t.classList?(r=t.classList[n?"add":"remove"],x.utils.arrayForEach(e.match(a),function(e){r.call(t.classList,e)})):"string"==typeof t.className.baseVal?i(t.className,"baseVal",e,n):i(t,"className",e,n))},setTextContent:function(e,t){var n=x.utils.unwrapObservable(t);null!==n&&n!==Dpa||(n="");var r=x.virtualElements.firstChild(e);!r||3!=r.nodeType||x.virtualElements.nextSibling(r)?x.virtualElements.setDomNodeChildren(e,[e.ownerDocument.createTextNode(n)]):r.data=n,x.utils.forceRefresh(e)},setElementName:function(e,t){if(e.name=t,l<=7)try{e.mergeAttributes(Fpa.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},forceRefresh:function(e){if(9<=l){var t=1==e.nodeType?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(l){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=x.utils.unwrapObservable(e),t=x.utils.unwrapObservable(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},makeArray:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},createSymbolOrString:function(e){return e},isIe6:6===l,isIe7:7===l,ieVersion:l,getFormFields:function(e,t){for(var n=x.utils.makeArray(e.getElementsByTagName("input")).concat(x.utils.makeArray(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],o=n.length-1;0<=o;o--)r(n[o])&&i.push(n[o]);return i},parseJson:function(e){return"string"==typeof e&&(e=x.utils.stringTrim(e))?Ipa&&Ipa.parse?Ipa.parse(e):new Function("return "+e)():null},stringifyJson:function(e,t,n){if(!Ipa||!Ipa.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return Ipa.stringify(x.utils.unwrapObservable(e),t,n)},postJson:function(e,t,n){var r=(n=n||{}).params||{},i=n.includeFields||this.fieldsIncludedWithJsonPost,o=e;if("object"==typeof e&&"form"===x.utils.tagNameLower(e)){var a=e;o=a.action;for(var s=i.length-1;0<=s;s--)for(var l=x.utils.getFormFields(a,i[s]),u=l.length-1;0<=u;u--)r[l[u].name]=l[u].value}t=x.utils.unwrapObservable(t);var c=Fpa.createElement("form");for(var A in c.style.display="none",c.action=o,c.method="post",t){var d=Fpa.createElement("input");d.type="hidden",d.name=A,d.value=x.utils.stringifyJson(x.utils.unwrapObservable(t[A])),c.appendChild(d)}p(r,function(e,t){var n=Fpa.createElement("input");n.type="hidden",n.name=e,n.value=t,c.appendChild(n)}),Fpa.body.appendChild(c),n.submitter?n.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),x.exportSymbol("utils",x.utils),x.exportSymbol("utils.arrayForEach",x.utils.arrayForEach),x.exportSymbol("utils.arrayFirst",x.utils.arrayFirst),x.exportSymbol("utils.arrayFilter",x.utils.arrayFilter),x.exportSymbol("utils.arrayGetDistinctValues",x.utils.arrayGetDistinctValues),x.exportSymbol("utils.arrayIndexOf",x.utils.arrayIndexOf),x.exportSymbol("utils.arrayMap",x.utils.arrayMap),x.exportSymbol("utils.arrayPushAll",x.utils.arrayPushAll),x.exportSymbol("utils.arrayRemoveItem",x.utils.arrayRemoveItem),x.exportSymbol("utils.extend",x.utils.extend),x.exportSymbol("utils.fieldsIncludedWithJsonPost",x.utils.fieldsIncludedWithJsonPost),x.exportSymbol("utils.getFormFields",x.utils.getFormFields),x.exportSymbol("utils.peekObservable",x.utils.peekObservable),x.exportSymbol("utils.postJson",x.utils.postJson),x.exportSymbol("utils.parseJson",x.utils.parseJson),x.exportSymbol("utils.registerEventHandler",x.utils.registerEventHandler),x.exportSymbol("utils.stringifyJson",x.utils.stringifyJson),x.exportSymbol("utils.range",x.utils.range),x.exportSymbol("utils.toggleDomNodeCssClass",x.utils.toggleDomNodeCssClass),x.exportSymbol("utils.triggerEvent",x.utils.triggerEvent),x.exportSymbol("utils.unwrapObservable",x.utils.unwrapObservable),x.exportSymbol("utils.objectForEach",x.utils.objectForEach),x.exportSymbol("utils.addOrRemoveItem",x.utils.addOrRemoveItem),x.exportSymbol("utils.setTextContent",x.utils.setTextContent),x.exportSymbol("unwrap",x.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(t){var n=this;if(1===arguments.length)return function(){return n.apply(t,arguments)};var r=Array.prototype.slice.call(arguments,1);return function(){var e=r.slice(0);return e.push.apply(e,arguments),n.apply(t,e)}}),x.utils.domData=new function(){var r=0,i="__ko__"+(new Date).getTime(),o={};function a(e,t){var n=e[i];if(!n||"null"===n||!o[n]){if(!t)return Dpa;n=e[i]="ko"+r++,o[n]={}}return o[n]}return{get:function(e,t){var n=a(e,!1);return n===Dpa?Dpa:n[t]},set:function(e,t,n){n===Dpa&&a(e,!1)===Dpa||(a(e,!0)[t]=n)},clear:function(e){var t=e[i];return!(!t||(delete o[t],e[i]=null))},nextKey:function(){return r+++i}}},x.exportSymbol("utils.domData",x.utils.domData),x.exportSymbol("utils.domData.clear",x.utils.domData.clear),x.utils.domNodeDisposal=new function(){var i=x.utils.domData.nextKey(),o={1:!0,8:!0,9:!0},a={1:!0,9:!0};function s(e,t){var n=x.utils.domData.get(e,i);return n===Dpa&&t&&(n=[],x.utils.domData.set(e,i,n)),n}function l(e){var t=s(e,!1);if(t){t=t.slice(0);for(var n=0;n<t.length;n++)t[n](e)}x.utils.domData.clear(e),x.utils.domNodeDisposal.cleanExternalData(e),a[e.nodeType]&&function(e){for(var t,n=e.firstChild;t=n;)n=t.nextSibling,8===t.nodeType&&l(t)}(e)}return{addDisposeCallback:function(e,t){if("function"!=typeof t)throw new Error("Callback must be a function");s(e,!0).push(t)},removeDisposeCallback:function(e,t){var n,r=s(e,!1);r&&(x.utils.arrayRemoveItem(r,t),0==r.length&&(n=e,x.utils.domData.set(n,i,Dpa)))},cleanNode:function(e){if(o[e.nodeType]&&(l(e),a[e.nodeType])){var t=[];x.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var n=0,r=t.length;n<r;n++)l(t[n])}return e},removeNode:function(e){x.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){Hpa&&"function"==typeof Hpa.cleanData&&Hpa.cleanData([e])}}},x.cleanNode=x.utils.domNodeDisposal.cleanNode,x.removeNode=x.utils.domNodeDisposal.removeNode,x.exportSymbol("cleanNode",x.cleanNode),x.exportSymbol("removeNode",x.removeNode),x.exportSymbol("utils.domNodeDisposal",x.utils.domNodeDisposal),x.exportSymbol("utils.domNodeDisposal.addDisposeCallback",x.utils.domNodeDisposal.addDisposeCallback),x.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",x.utils.domNodeDisposal.removeDisposeCallback),function(){var u=[0,"",""],e=[1,"<table>","</table>"],t=[3,"<table><tbody><tr>","</tr></tbody></table>"],n=[1,"<select multiple='multiple'>","</select>"],c={thead:e,tbody:e,tfoot:e,tr:[2,"<table><tbody>","</tbody></table>"],td:t,th:t,option:n,optgroup:n},A=x.utils.ieVersion<=8;function r(e,t){t||(t=Fpa);var n,r=t.parentWindow||t.defaultView||Epa,i=x.utils.stringTrim(e).toLowerCase(),o=t.createElement("div"),a=(n=i.match(/^<([a-z]+)[ >]/))&&c[n[1]]||u,s=a[0],l="ignored<div>"+a[1]+e+a[2]+"</div>";for("function"==typeof r.innerShiv?o.appendChild(r.innerShiv(l)):(A&&t.appendChild(o),o.innerHTML=l,A&&o.parentNode.removeChild(o));s--;)o=o.lastChild;return x.utils.makeArray(o.lastChild.childNodes)}x.utils.parseHtmlFragment=function(e,t){return Hpa?function(e,t){if(Hpa.parseHTML)return Hpa.parseHTML(e,t)||[];var n=Hpa.clean([e],t);if(n&&n[0]){for(var r=n[0];r.parentNode&&11!==r.parentNode.nodeType;)r=r.parentNode;r.parentNode&&r.parentNode.removeChild(r)}return n}(e,t):r(e,t)},x.utils.setHtml=function(e,t){if(x.utils.emptyDomNode(e),null!==(t=x.utils.unwrapObservable(t))&&t!==Dpa)if("string"!=typeof t&&(t=t.toString()),Hpa)Hpa(e).html(t);else for(var n=x.utils.parseHtmlFragment(t,e.ownerDocument),r=0;r<n.length;r++)e.appendChild(n[r])}}(),x.exportSymbol("utils.parseHtmlFragment",x.utils.parseHtmlFragment),x.exportSymbol("utils.setHtml",x.utils.setHtml),x.memoization=function(){var r={};function n(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}return{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var t=n()+n();return r[t]=e,"\x3c!--[ko_memo:"+t+"]--\x3e"},unmemoize:function(e,t){var n=r[e];if(n===Dpa)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return n.apply(null,t||[]),!0}finally{delete r[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];!function e(t,n){if(t)if(8==t.nodeType){var r=x.memoization.parseMemoText(t.nodeValue);null!=r&&n.push({domNode:t,memoId:r})}else if(1==t.nodeType)for(var i=0,o=t.childNodes,a=o.length;i<a;i++)e(o[i],n)}(e,n);for(var r=0,i=n.length;r<i;r++){var o=n[r].domNode,a=[o];t&&x.utils.arrayPushAll(a,t),x.memoization.unmemoize(n[r].memoId,a),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),x.exportSymbol("memoization",x.memoization),x.exportSymbol("memoization.memoize",x.memoization.memoize),x.exportSymbol("memoization.unmemoize",x.memoization.unmemoize),x.exportSymbol("memoization.parseMemoText",x.memoization.parseMemoText),x.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",x.memoization.unmemoizeDomNodeAndDescendants),x.tasks=function(){var e,t,r=[],i=0,n=1,o=0;function a(){if(i)for(var e,t=i,n=0;o<i;)if(e=r[o++]){if(t<o){if(5e3<=++n){o=i,x.utils.deferError(Error("'Too much recursion' after processing "+n+" task groups."));break}t=i}try{e()}catch(e){x.utils.deferError(e)}}}function s(){a(),o=i=r.length=0}return{scheduler:Epa.MutationObserver?(e=s,t=Fpa.createElement("div"),new MutationObserver(e).observe(t,{attributes:!0}),function(){t.classList.toggle("foo")}):Fpa&&"onreadystatechange"in Fpa.createElement("script")?function(e){var t=Fpa.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,Fpa.documentElement.removeChild(t),t=null,e()},Fpa.documentElement.appendChild(t)}:function(e){setTimeout(e,0)},schedule:function(e){return i||x.tasks.scheduler(s),r[i++]=e,n++},cancel:function(e){var t=e-(n-i);o<=t&&t<i&&(r[t]=null)},resetForTesting:function(){var e=i-o;return o=i=r.length=0,e},runEarly:a}}(),x.exportSymbol("tasks",x.tasks),x.exportSymbol("tasks.schedule",x.tasks.schedule),x.exportSymbol("tasks.runEarly",x.tasks.runEarly),x.extenders={throttle:function(t,n){t.throttleEvaluation=n;var r=null;return x.dependentObservable({read:t,write:function(e){clearTimeout(r),r=x.utils.setTimeout(function(){t(e)},n)}})},rateLimit:function(e,t){var n,r,i;"number"==typeof t?n=t:(n=t.timeout,r=t.method),e._deferUpdates=!1,i="notifyWhenChangesStop"==r?a:o,e.limit(function(e){return i(e,n)})},deferred:function(n,e){if(!0!==e)throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");n._deferUpdates||(n._deferUpdates=!0,n.limit(function(e){var t;return function(){x.tasks.cancel(t),t=x.tasks.schedule(e),n.notifySubscribers(Dpa,"dirty")}}))},notify:function(e,t){e.equalityComparer="always"==t?null:r}};var n={undefined:1,boolean:1,number:1,string:1};function r(e,t){return!!(null===e||typeof e in n)&&e===t}function o(e,t){var n;return function(){n||(n=x.utils.setTimeout(function(){n=Dpa,e()},t))}}function a(e,t){var n;return function(){clearTimeout(n),n=x.utils.setTimeout(e,t)}}x.exportSymbol("extenders",x.extenders),x.subscription=function(e,t,n){this._target=e,this.callback=t,this.disposeCallback=n,this.isDisposed=!1,x.exportProperty(this,"dispose",this.dispose)},x.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},x.subscribable=function(){x.utils.setPrototypeOfOrExtend(this,t),t.init(this)};var s="change";function l(e,t){t&&t!==s?"beforeChange"===t?this._limitBeforeChange(e):this._origNotifySubscribers(e,t):this._limitChange(e)}var t={init:function(e){e._subscriptions={},e._versionNumber=1},subscribe:function(e,t,n){var r=this;n=n||s;var i=t?e.bind(t):e,o=new x.subscription(r,i,function(){x.utils.arrayRemoveItem(r._subscriptions[n],o),r.afterSubscriptionRemove&&r.afterSubscriptionRemove(n)});return r.beforeSubscriptionAdd&&r.beforeSubscriptionAdd(n),r._subscriptions[n]||(r._subscriptions[n]=[]),r._subscriptions[n].push(o),o},notifySubscribers:function(e,t){if((t=t||s)===s&&this.updateVersion(),this.hasSubscriptionsForEvent(t))try{x.dependencyDetection.begin();for(var n,r=this._subscriptions[t].slice(0),i=0;n=r[i];++i)n.isDisposed||n.callback(e)}finally{x.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(e){return this.getVersion()!==e},updateVersion:function(){++this._versionNumber},limit:function(e){var t,n,r,i=this,o=x.isObservable(i);i._origNotifySubscribers||(i._origNotifySubscribers=i.notifySubscribers,i.notifySubscribers=l);var a=e(function(){i._notificationIsPending=!1,o&&r===i&&(r=i()),t=!1,i.isDifferent(n,r)&&i._origNotifySubscribers(n=r)});i._limitChange=function(e){i._notificationIsPending=t=!0,r=e,a()},i._limitBeforeChange=function(e){t||(n=e,i._origNotifySubscribers(e,"beforeChange"))}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(e){if(e)return this._subscriptions[e]&&this._subscriptions[e].length||0;var n=0;return x.utils.objectForEach(this._subscriptions,function(e,t){"dirty"!==e&&(n+=t.length)}),n},isDifferent:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var r=this;return e&&x.utils.objectForEach(e,function(e,t){var n=x.extenders[e];"function"==typeof n&&(r=n(r,t)||r)}),r}};x.exportProperty(t,"subscribe",t.subscribe),x.exportProperty(t,"extend",t.extend),x.exportProperty(t,"getSubscriptionsCount",t.getSubscriptionsCount),x.utils.canSetPrototype&&x.utils.setPrototypeOf(t,Function.prototype),x.subscribable.fn=t,x.isSubscribable=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},x.exportSymbol("subscribable",x.subscribable),x.exportSymbol("isSubscribable",x.isSubscribable),x.computedContext=x.dependencyDetection=function(){var t,n=[],r=0;function i(e){n.push(t),t=e}function o(){t=n.pop()}return{begin:i,end:o,registerDependency:function(e){if(t){if(!x.isSubscribable(e))throw new Error("Only subscribable things can act as dependencies");t.callback.call(t.callbackTarget,e,e._id||(e._id=++r))}},ignore:function(e,t,n){try{return i(),e.apply(t,n||[])}finally{o()}},getDependenciesCount:function(){if(t)return t.computed.getDependenciesCount()},isInitial:function(){if(t)return t.isInitial}}}(),x.exportSymbol("computedContext",x.computedContext),x.exportSymbol("computedContext.getDependenciesCount",x.computedContext.getDependenciesCount),x.exportSymbol("computedContext.isInitial",x.computedContext.isInitial),x.exportSymbol("ignoreDependencies",x.ignoreDependencies=x.dependencyDetection.ignore);var u=x.utils.createSymbolOrString("_latestValue");x.observable=function(e){function t(){return 0<arguments.length?(t.isDifferent(t[u],arguments[0])&&(t.valueWillMutate(),t[u]=arguments[0],t.valueHasMutated()),this):(x.dependencyDetection.registerDependency(t),t[u])}return t[u]=e,x.utils.canSetPrototype||x.utils.extend(t,x.subscribable.fn),x.subscribable.fn.init(t),x.utils.setPrototypeOfOrExtend(t,c),x.options.deferUpdates&&x.extenders.deferred(t,!0),t};var c={equalityComparer:r,peek:function(){return this[u]},valueHasMutated:function(){this.notifySubscribers(this[u])},valueWillMutate:function(){this.notifySubscribers(this[u],"beforeChange")}};x.utils.canSetPrototype&&x.utils.setPrototypeOf(c,x.subscribable.fn);var A=x.observable.protoProperty="__ko_proto__";c[A]=x.observable,x.hasPrototype=function(e,t){return null!==e&&e!==Dpa&&e[A]!==Dpa&&(e[A]===t||x.hasPrototype(e[A],t))},x.isObservable=function(e){return x.hasPrototype(e,x.observable)},x.isWriteableObservable=function(e){return"function"==typeof e&&e[A]===x.observable||!("function"!=typeof e||e[A]!==x.dependentObservable||!e.hasWriteFunction)},x.exportSymbol("observable",x.observable),x.exportSymbol("isObservable",x.isObservable),x.exportSymbol("isWriteableObservable",x.isWriteableObservable),x.exportSymbol("isWritableObservable",x.isWriteableObservable),x.exportSymbol("observable.fn",c),x.exportProperty(c,"peek",c.peek),x.exportProperty(c,"valueHasMutated",c.valueHasMutated),x.exportProperty(c,"valueWillMutate",c.valueWillMutate),x.observableArray=function(e){if("object"!=typeof(e=e||[])||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=x.observable(e);return x.utils.setPrototypeOfOrExtend(t,x.observableArray.fn),t.extend({trackArrayChanges:!0})},x.observableArray.fn={remove:function(t){for(var e=this.peek(),n=[],r="function"!=typeof t||x.isObservable(t)?function(e){return e===t}:t,i=0;i<e.length;i++){var o=e[i];r(o)&&(0===n.length&&this.valueWillMutate(),n.push(o),e.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(t){if(t!==Dpa)return t?this.remove(function(e){return 0<=x.utils.arrayIndexOf(t,e)}):[];var e=this.peek(),n=e.slice(0);return this.valueWillMutate(),e.splice(0,e.length),this.valueHasMutated(),n},destroy:function(t){var e=this.peek(),n="function"!=typeof t||x.isObservable(t)?function(e){return e===t}:t;this.valueWillMutate();for(var r=e.length-1;0<=r;r--)n(e[r])&&(e[r]._destroy=!0);this.valueHasMutated()},destroyAll:function(t){return t===Dpa?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=x.utils.arrayIndexOf(t,e)}):[]},indexOf:function(e){var t=this();return x.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},x.utils.canSetPrototype&&x.utils.setPrototypeOf(x.observableArray.fn,x.observable.fn),x.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(n){x.observableArray.fn[n]=function(){var e=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(e,n,arguments);var t=e[n].apply(e,arguments);return this.valueHasMutated(),t===e?this:t}}),x.utils.arrayForEach(["slice"],function(t){x.observableArray.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),x.exportSymbol("observableArray",x.observableArray);var d="arrayChange";x.extenders.trackArrayChanges=function(o,e){if(o.compareArrayOptions={},e&&"object"==typeof e&&x.utils.extend(o.compareArrayOptions,e),o.compareArrayOptions.sparse=!0,!o.cacheDiffForKnownOperation){var t,m=!1,g=null,v=0,n=o.beforeSubscriptionAdd,r=o.afterSubscriptionRemove;o.beforeSubscriptionAdd=function(e){n&&n.call(o,e),e===d&&function(){if(!m){m=!0;var n=o.notifySubscribers;o.notifySubscribers=function(e,t){return t&&t!==s||++v,n.apply(this,arguments)};var i=[].concat(o.peek()||[]);g=null,t=o.subscribe(function(e){if(e=[].concat(e||[]),o.hasSubscriptionsForEvent(d))var t=(n=i,r=e,(!g||1<v)&&(g=x.utils.compareArrays(n,r,o.compareArrayOptions)),g);var n,r;i=e,g=null,v=0,t&&t.length&&o.notifySubscribers(t,d)})}}()},o.afterSubscriptionRemove=function(e){r&&r.call(o,e),e!==d||o.hasSubscriptionsForEvent(d)||(t.dispose(),m=!1)},o.cacheDiffForKnownOperation=function(e,t,n){if(m&&!v){var r=[],i=e.length,o=n.length,a=0;switch(t){case"push":a=i;case"unshift":for(var s=0;s<o;s++)h("added",n[s],a+s);break;case"pop":a=i-1;case"shift":i&&h("deleted",e[a],a);break;case"splice":for(var l=Math.min(Math.max(0,n[0]<0?i+n[0]:n[0]),i),u=1===o?i:Math.min(l+(n[1]||0),i),c=l+o-2,A=Math.max(u,c),d=[],p=[],f=(s=l,2);s<A;++s,++f)s<u&&p.push(h("deleted",e[s],s)),s<c&&d.push(h("added",n[f],s));x.utils.findMovesInArrayComparison(p,d);break;default:return}g=r}function h(e,t,n){return r[r.length]={status:e,value:t,index:n}}}}};var p=x.utils.createSymbolOrString("_state");function f(e,t){null!==t&&t.dispose&&t.dispose()}function h(e,t){var n=this.computedObservable,r=n[p];r.isDisposed||(this.disposalCount&&this.disposalCandidates[t]?(n.addDependencyTracking(t,e,this.disposalCandidates[t]),this.disposalCandidates[t]=null,--this.disposalCount):r.dependencyTracking[t]||n.addDependencyTracking(t,e,r.isSleeping?{_target:e}:n.subscribeToDependency(e)))}x.computed=x.dependentObservable=function(e,t,n){if("object"==typeof e?n=e:(n=n||{},e&&(n.read=e)),"function"!=typeof n.read)throw Error("Pass a function that returns the value of the ko.computed");var r=n.write,i={latestValue:Dpa,isStale:!0,isBeingEvaluated:!1,suppressDisposalUntilDisposeWhenReturnsFalse:!1,isDisposed:!1,pure:!1,isSleeping:!1,readFunction:n.read,evaluatorFunctionTarget:t||n.owner,disposeWhenNodeIsRemoved:n.disposeWhenNodeIsRemoved||n.disposeWhenNodeIsRemoved||null,disposeWhen:n.disposeWhen||n.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};function o(){if(0<arguments.length){if("function"!=typeof r)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return r.apply(i.evaluatorFunctionTarget,arguments),this}return x.dependencyDetection.registerDependency(o),(i.isStale||i.isSleeping&&o.haveDependenciesChanged())&&o.evaluateImmediate(),i.latestValue}return o[p]=i,o.hasWriteFunction="function"==typeof r,x.utils.canSetPrototype||x.utils.extend(o,x.subscribable.fn),x.subscribable.fn.init(o),x.utils.setPrototypeOfOrExtend(o,m),n.pure?(i.pure=!0,i.isSleeping=!0,x.utils.extend(o,g)):n.deferEvaluation&&x.utils.extend(o,v),x.options.deferUpdates&&x.extenders.deferred(o,!0),o._options=n,i.disposeWhenNodeIsRemoved&&(i.suppressDisposalUntilDisposeWhenReturnsFalse=!0,i.disposeWhenNodeIsRemoved.nodeType||(i.disposeWhenNodeIsRemoved=null)),i.isSleeping||n.deferEvaluation||o.evaluateImmediate(),i.disposeWhenNodeIsRemoved&&o.isActive()&&x.utils.domNodeDisposal.addDisposeCallback(i.disposeWhenNodeIsRemoved,i.domNodeDisposalCallback=function(){o.dispose()}),o};var m={equalityComparer:r,getDependenciesCount:function(){return this[p].dependenciesCount},addDependencyTracking:function(e,t,n){if(this[p].pure&&t===this)throw Error("A 'pure' computed must not be called recursively");(this[p].dependencyTracking[e]=n)._order=this[p].dependenciesCount++,n._version=t.getVersion()},haveDependenciesChanged:function(){var e,t,n=this[p].dependencyTracking;for(e in n)if(n.hasOwnProperty(e)&&(t=n[e])._target.hasChanged(t._version))return!0},markDirty:function(){this._evalDelayed&&!this[p].isBeingEvaluated&&this._evalDelayed()},isActive:function(){return this[p].isStale||0<this[p].dependenciesCount},respondToChange:function(){this._notificationIsPending||this.evaluatePossiblyAsync()},subscribeToDependency:function(e){if(!e._deferUpdates||this[p].disposeWhenNodeIsRemoved)return e.subscribe(this.evaluatePossiblyAsync,this);var t=e.subscribe(this.markDirty,this,"dirty"),n=e.subscribe(this.respondToChange,this);return{_target:e,dispose:function(){t.dispose(),n.dispose()}}},evaluatePossiblyAsync:function(){var e=this,t=e.throttleEvaluation;t&&0<=t?(clearTimeout(this[p].evaluationTimeoutInstance),this[p].evaluationTimeoutInstance=x.utils.setTimeout(function(){e.evaluateImmediate(!0)},t)):e._evalDelayed?e._evalDelayed():e.evaluateImmediate(!0)},evaluateImmediate:function(e){var t=this[p],n=t.disposeWhen;if(!t.isBeingEvaluated&&!t.isDisposed){if(t.disposeWhenNodeIsRemoved&&!x.utils.domNodeIsAttachedToDocument(t.disposeWhenNodeIsRemoved)||n&&n()){if(!t.suppressDisposalUntilDisposeWhenReturnsFalse)return void this.dispose()}else t.suppressDisposalUntilDisposeWhenReturnsFalse=!1;t.isBeingEvaluated=!0;try{this.evaluateImmediate_CallReadWithDependencyDetection(e)}finally{t.isBeingEvaluated=!1}t.dependenciesCount||this.dispose()}},evaluateImmediate_CallReadWithDependencyDetection:function(e){var t=this[p],n=t.pure?Dpa:!t.dependenciesCount,r={computedObservable:this,disposalCandidates:t.dependencyTracking,disposalCount:t.dependenciesCount};x.dependencyDetection.begin({callbackTarget:r,callback:h,computed:this,isInitial:n}),t.dependencyTracking={},t.dependenciesCount=0;var i=this.evaluateImmediate_CallReadThenEndDependencyDetection(t,r);this.isDifferent(t.latestValue,i)&&(t.isSleeping||this.notifySubscribers(t.latestValue,"beforeChange"),t.latestValue=i,t.isSleeping?this.updateVersion():e&&this.notifySubscribers(t.latestValue)),n&&this.notifySubscribers(t.latestValue,"awake")},evaluateImmediate_CallReadThenEndDependencyDetection:function(e,t){try{var n=e.readFunction;return e.evaluatorFunctionTarget?n.call(e.evaluatorFunctionTarget):n()}finally{x.dependencyDetection.end(),t.disposalCount&&!e.isSleeping&&x.utils.objectForEach(t.disposalCandidates,f),e.isStale=!1}},peek:function(){var e=this[p];return(e.isStale&&!e.dependenciesCount||e.isSleeping&&this.haveDependenciesChanged())&&this.evaluateImmediate(),e.latestValue},limit:function(e){x.subscribable.fn.limit.call(this,e),this._evalDelayed=function(){this._limitBeforeChange(this[p].latestValue),this[p].isStale=!0,this._limitChange(this)}},dispose:function(){var e=this[p];!e.isSleeping&&e.dependencyTracking&&x.utils.objectForEach(e.dependencyTracking,function(e,t){t.dispose&&t.dispose()}),e.disposeWhenNodeIsRemoved&&e.domNodeDisposalCallback&&x.utils.domNodeDisposal.removeDisposeCallback(e.disposeWhenNodeIsRemoved,e.domNodeDisposalCallback),e.dependencyTracking=null,e.dependenciesCount=0,e.isDisposed=!0,e.isStale=!1,e.isSleeping=!1,e.disposeWhenNodeIsRemoved=null}},g={beforeSubscriptionAdd:function(e){var i=this,o=i[p];if(!o.isDisposed&&o.isSleeping&&"change"==e){if(o.isSleeping=!1,o.isStale||i.haveDependenciesChanged())o.dependencyTracking=null,o.dependenciesCount=0,o.isStale=!0,i.evaluateImmediate();else{var n=[];x.utils.objectForEach(o.dependencyTracking,function(e,t){n[t._order]=e}),x.utils.arrayForEach(n,function(e,t){var n=o.dependencyTracking[e],r=i.subscribeToDependency(n._target);r._order=t,r._version=n._version,o.dependencyTracking[e]=r})}o.isDisposed||i.notifySubscribers(o.latestValue,"awake")}},afterSubscriptionRemove:function(e){var n=this[p];n.isDisposed||"change"!=e||this.hasSubscriptionsForEvent("change")||(x.utils.objectForEach(n.dependencyTracking,function(e,t){t.dispose&&(n.dependencyTracking[e]={_target:t._target,_order:t._order,_version:t._version},t.dispose())}),n.isSleeping=!0,this.notifySubscribers(Dpa,"asleep"))},getVersion:function(){var e=this[p];return e.isSleeping&&(e.isStale||this.haveDependenciesChanged())&&this.evaluateImmediate(),x.subscribable.fn.getVersion.call(this)}},v={beforeSubscriptionAdd:function(e){"change"!=e&&"beforeChange"!=e||this.peek()}};x.utils.canSetPrototype&&x.utils.setPrototypeOf(m,x.subscribable.fn);var y,w,b=x.observable.protoProperty;x.computed[b]=x.observable,m[b]=x.computed,x.isComputed=function(e){return x.hasPrototype(e,x.computed)},x.isPureComputed=function(e){return x.hasPrototype(e,x.computed)&&e[p]&&e[p].pure},x.exportSymbol("computed",x.computed),x.exportSymbol("dependentObservable",x.computed),x.exportSymbol("isComputed",x.isComputed),x.exportSymbol("isPureComputed",x.isPureComputed),x.exportSymbol("computed.fn",m),x.exportProperty(m,"peek",m.peek),x.exportProperty(m,"dispose",m.dispose),x.exportProperty(m,"isActive",m.isActive),x.exportProperty(m,"getDependenciesCount",m.getDependenciesCount),x.pureComputed=function(e,t){return"function"==typeof e?x.computed(e,t,{pure:!0}):((e=x.utils.extend({},e)).pure=!0,x.computed(e,t))},x.exportSymbol("pureComputed",x.pureComputed),function(){function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(var r in e)t(r)}function n(){this.keys=[],this.values=[]}x.toJS=function(e){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return function r(i,o,a){a=a||new n;var e=!("object"!=typeof(i=o(i))||null===i||i===Dpa||i instanceof RegExp||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean);if(!e)return i;var s=i instanceof Array?[]:{};return a.save(i,s),t(i,function(e){var t=o(i[e]);switch(typeof t){case"boolean":case"number":case"string":case"function":s[e]=t;break;case"object":case"undefined":var n=a.get(t);s[e]=n!==Dpa?n:r(t,o,a)}}),s}(e,function(e){for(var t=0;x.isObservable(e)&&t<10;t++)e=e();return e})},x.toJSON=function(e,t,n){var r=x.toJS(e);return x.utils.stringifyJson(r,t,n)},n.prototype={constructor:n,save:function(e,t){var n=x.utils.arrayIndexOf(this.keys,e);0<=n?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var t=x.utils.arrayIndexOf(this.keys,e);return 0<=t?this.values[t]:Dpa}}}(),x.exportSymbol("toJS",x.toJS),x.exportSymbol("toJSON",x.toJSON),y="__ko__hasDomDataOptionValue__",x.selectExtensions={readValue:function(e){switch(x.utils.tagNameLower(e)){case"option":return!0===e[y]?x.utils.domData.get(e,x.bindingHandlers.options.optionValueDomDataKey):x.utils.ieVersion<=7?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?x.selectExtensions.readValue(e.options[e.selectedIndex]):Dpa;default:return e.value}},writeValue:function(e,t,n){switch(x.utils.tagNameLower(e)){case"option":switch(typeof t){case"string":x.utils.domData.set(e,x.bindingHandlers.options.optionValueDomDataKey,Dpa),y in e&&delete e[y],e.value=t;break;default:x.utils.domData.set(e,x.bindingHandlers.options.optionValueDomDataKey,t),e[y]=!0,e.value="number"==typeof t?t:""}break;case"select":""!==t&&null!==t||(t=Dpa);for(var r,i=-1,o=0,a=e.options.length;o<a;++o)if((r=x.selectExtensions.readValue(e.options[o]))==t||""==r&&t===Dpa){i=o;break}(n||0<=i||t===Dpa&&1<e.size)&&(e.selectedIndex=i);break;default:null!==t&&t!==Dpa||(t=""),e.value=t}}},x.exportSymbol("selectExtensions",x.selectExtensions),x.exportSymbol("selectExtensions.readValue",x.selectExtensions.readValue),x.exportSymbol("selectExtensions.writeValue",x.selectExtensions.writeValue),x.expressionRewriting=function(){var u=["true","false","null","undefined"],c=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,A=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),d=/[\])"'A-Za-z0-9_$]+$/,p={in:1,return:1,typeof:1};function r(e){var t=x.utils.stringTrim(e);123===t.charCodeAt(0)&&(t=t.slice(1,-1));var n,r=[],i=t.match(A),o=[],a=0;if(i){i.push(",");for(var s,l=0;s=i[l];++l){var u=s.charCodeAt(0);if(44===u){if(a<=0){r.push(n&&o.length?{key:n,value:o.join("")}:{unknown:n||o.join("")}),n=a=0,o=[];continue}}else if(58===u){if(!a&&!n&&1===o.length){n=o.pop();continue}}else if(47===u&&l&&1<s.length){var c=i[l-1].match(d);c&&!p[c[0]]&&((i=(t=t.substr(t.indexOf(s)+1)).match(A)).push(","),l=-1,s="/")}else 40===u||123===u||91===u?++a:41===u||125===u||93===u?--a:n||o.length||34!==u&&39!==u||(s=s.slice(1,-1));o.push(s)}}return r}var f={};return{bindingRewriteValidators:[],twoWayBindings:f,parseObjectLiteral:r,preProcessBindings:function(e,t){function i(e,t){var n,r;if(!l){if((r=x.getBindingHandler(e))&&r.preprocess&&!(t=r.preprocess(t,e,i)))return;f[e]&&(n=function(e){if(0<=x.utils.arrayIndexOf(u,e))return!1;var t=e.match(c);return null!==t&&(t[1]?"Object("+t[1]+")"+t[2]:e)}(t))&&a.push("'"+e+"':function(_z){"+n+"=_z}")}s&&(t="function(){return "+t+" }"),o.push("'"+e+"':"+t)}var o=[],a=[],s=(t=t||{}).valueAccessors,l=t.bindingParams,n="string"==typeof e?r(e):e;return x.utils.arrayForEach(n,function(e){i(e.key||e.unknown,e.value)}),a.length&&i("_ko_property_writers","{"+a.join(",")+" }"),o.join(",")},keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},writeValueToProperty:function(e,t,n,r,i){if(e&&x.isObservable(e))!x.isWriteableObservable(e)||i&&e.peek()===r||e(r);else{var o=t.get("_ko_property_writers");o&&o[n]&&o[n](r)}}}}(),x.exportSymbol("expressionRewriting",x.expressionRewriting),x.exportSymbol("expressionRewriting.bindingRewriteValidators",x.expressionRewriting.bindingRewriteValidators),x.exportSymbol("expressionRewriting.parseObjectLiteral",x.expressionRewriting.parseObjectLiteral),x.exportSymbol("expressionRewriting.preProcessBindings",x.expressionRewriting.preProcessBindings),x.exportSymbol("expressionRewriting._twoWayBindings",x.expressionRewriting.twoWayBindings),x.exportSymbol("jsonExpressionRewriting",x.expressionRewriting),x.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",x.expressionRewriting.preProcessBindings),function(){var n=Fpa&&"\x3c!--test--\x3e"===Fpa.createComment("test").text,r=n?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,t=n?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,o={ul:!0,ol:!0};function a(e){return 8==e.nodeType&&r.test(n?e.text:e.nodeValue)}function s(e){return 8==e.nodeType&&t.test(n?e.text:e.nodeValue)}function i(e,t){for(var n=e,r=1,i=[];n=n.nextSibling;){if(s(n)&&0==--r)return i;i.push(n),a(n)&&r++}if(!t)throw new Error("Cannot find closing comment tag to match: "+e.nodeValue);return null}function l(e,t){var n=i(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}function u(e){var t=e.firstChild,n=null;if(t)do{if(n)n.push(t);else if(a(t)){var r=l(t,!0);r?t=r:n=[t]}else s(t)&&(n=[t])}while(t=t.nextSibling);return n}x.virtualElements={allowedBindings:{},childNodes:function(e){return a(e)?i(e):e.childNodes},emptyNode:function(e){if(a(e))for(var t=x.virtualElements.childNodes(e),n=0,r=t.length;n<r;n++)x.removeNode(t[n]);else x.utils.emptyDomNode(e)},setDomNodeChildren:function(e,t){if(a(e)){x.virtualElements.emptyNode(e);for(var n=e.nextSibling,r=0,i=t.length;r<i;r++)n.parentNode.insertBefore(t[r],n)}else x.utils.setDomNodeChildren(e,t)},prepend:function(e,t){a(e)?e.parentNode.insertBefore(t,e.nextSibling):e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},insertAfter:function(e,t,n){n?a(e)?e.parentNode.insertBefore(t,n.nextSibling):n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):x.virtualElements.prepend(e,t)},firstChild:function(e){return a(e)?!e.nextSibling||s(e.nextSibling)?null:e.nextSibling:e.firstChild},nextSibling:function(e){return a(e)&&(e=l(e)),e.nextSibling&&s(e.nextSibling)?null:e.nextSibling},hasBindingValue:a,virtualNodeBindingValue:function(e){var t=(n?e.text:e.nodeValue).match(r);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(o[x.utils.tagNameLower(e)]){var t=e.firstChild;if(t)do{if(1===t.nodeType){var n=u(t);if(n)for(var r=t.nextSibling,i=0;i<n.length;i++)r?e.insertBefore(n[i],r):e.appendChild(n[i])}}while(t=t.nextSibling)}}}}(),x.exportSymbol("virtualElements",x.virtualElements),x.exportSymbol("virtualElements.allowedBindings",x.virtualElements.allowedBindings),x.exportSymbol("virtualElements.emptyNode",x.virtualElements.emptyNode),x.exportSymbol("virtualElements.insertAfter",x.virtualElements.insertAfter),x.exportSymbol("virtualElements.prepend",x.virtualElements.prepend),x.exportSymbol("virtualElements.setDomNodeChildren",x.virtualElements.setDomNodeChildren),x.bindingProvider=function(){this.bindingCache={}},x.utils.extend(x.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind")||x.components.getComponentNameForNode(e);case 8:return x.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t),r=n?this.parseBindingsString(n,t,e):null;return x.components.addBindingsForCustomElement(r,e,t,!1)},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t),r=n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null;return x.components.addBindingsForCustomElement(r,e,t,!0)},getBindingsString:function(e,t){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return x.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,e,n,r){try{return i=t,o=this.bindingCache,s=i+((a=r)&&a.valueAccessors||""),(o[s]||(o[s]=(l=i,u=a,c=x.expressionRewriting.preProcessBindings(l,u),new Function("$context","$element","with($context){with($data||{}){return{"+c+"}}}"))))(e,n)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+e.message,e}var i,o,a,s,l,u,c}}),x.bindingProvider.instance=new x.bindingProvider,x.exportSymbol("bindingProvider",x.bindingProvider),function(){x.bindingHandlers={};var o={script:!0,textarea:!0,template:!0};function s(e){return function(){return e}}function g(e){return e()}function l(n){return x.utils.objectMap(x.dependencyDetection.ignore(n),function(e,t){return function(){return n()[t]}})}function v(e,t){return l(this.getBindings.bind(this,e,t))}function a(e,t,n){var r,i=x.virtualElements.firstChild(t),o=x.bindingProvider.instance,a=o.preprocessNode;if(a){for(;r=i;)i=x.virtualElements.nextSibling(r),a.call(o,r);i=x.virtualElements.firstChild(t)}for(;r=i;)i=x.virtualElements.nextSibling(r),u(e,r,n)}function u(e,t,n){var r=!0,i=1===t.nodeType;i&&x.virtualElements.normaliseVirtualElementDomStructure(t),(i&&n||x.bindingProvider.instance.nodeHasBindings(t))&&(r=c(t,null,e,n).shouldBindDescendants),r&&!o[x.utils.tagNameLower(t)]&&a(e,t,!i)}x.getBindingHandler=function(e){return x.bindingHandlers[e]},x.bindingContext=function(n,r,i,o){var t,a=this,s="function"==typeof n&&!x.isObservable(n),l=x.dependentObservable(function(){var e=s?n():n,t=x.utils.unwrapObservable(e);return r?(r._subscribable&&r._subscribable(),x.utils.extend(a,r),l&&(a._subscribable=l)):(a.$parents=[],a.$root=t,a.ko=x),a.$rawData=e,a.$data=t,i&&(a[i]=t),o&&o(a,r,t),a.$data},null,{disposeWhen:function(){return t&&!x.utils.anyDomNodeIsAttachedToDocument(t)},disposeWhenNodeIsRemoved:!0});l.isActive()&&((a._subscribable=l).equalityComparer=null,t=[],l._addNode=function(e){t.push(e),x.utils.domNodeDisposal.addDisposeCallback(e,function(e){x.utils.arrayRemoveItem(t,e),t.length||(l.dispose(),a._subscribable=l=Dpa)})})},x.bindingContext.prototype.createChildContext=function(e,t,n){return new x.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},x.bindingContext.prototype.extend=function(n){return new x.bindingContext(this._subscribable||this.$data,this,null,function(e,t){e.$rawData=t.$rawData,x.utils.extend(e,"function"==typeof n?n():n)})};var y=x.utils.domData.nextKey();function c(i,e,o,t){var a,s,r,l,u,c,n=x.utils.domData.get(i,y);if(!e){if(n)throw Error("You cannot apply bindings multiple times to the same element.");x.utils.domData.set(i,y,!0)}if(!n&&t&&x.storedBindingContextForNode(i,o),e&&"function"!=typeof e)a=e;else{var A=x.bindingProvider.instance,d=A.getBindingAccessors||v,p=x.dependentObservable(function(){return(a=e?e(o,i):d.call(A,i,o))&&o._subscribable&&o._subscribable(),a},null,{disposeWhenNodeIsRemoved:i});a&&p.isActive()||(p=null)}if(a){var f=p?function(e){return function(){return g(p()[e])}}:function(e){return a[e]};function h(){return x.utils.objectMap(p?p():a,g)}h.get=function(e){return a[e]&&g(f(e))},h.has=function(e){return e in a};var m=(r=a,l=[],u={},c=[],x.utils.objectForEach(r,function t(e){if(!u[e]){var n=x.getBindingHandler(e);n&&(n.after&&(c.push(e),x.utils.arrayForEach(n.after,function(e){if(r[e]){if(-1!==x.utils.arrayIndexOf(c,e))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+c.join(", "));t(e)}}),c.length--),l.push({key:e,handler:n})),u[e]=!0}}),l);x.utils.arrayForEach(m,function(e){var t=e.handler.init,n=e.handler.update,r=e.key;8===i.nodeType&&function(e){if(!x.virtualElements.allowedBindings[e])throw new Error("The binding '"+e+"' cannot be used with virtual elements")}(r);try{"function"==typeof t&&x.dependencyDetection.ignore(function(){var e=t(i,f(r),h,o.$data,o);if(e&&e.controlsDescendantBindings){if(s!==Dpa)throw new Error("Multiple bindings ("+s+" and "+r+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");s=r}}),"function"==typeof n&&x.dependentObservable(function(){n(i,f(r),h,o.$data,o)},null,{disposeWhenNodeIsRemoved:i})}catch(e){throw e.message='Unable to process binding "'+r+": "+a[r]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:s===Dpa}}var n=x.utils.domData.nextKey();function A(e){return e&&e instanceof x.bindingContext?e:new x.bindingContext(e)}x.storedBindingContextForNode=function(e,t){if(2!=arguments.length)return x.utils.domData.get(e,n);x.utils.domData.set(e,n,t),t._subscribable&&t._subscribable._addNode(e)},x.applyBindingAccessorsToNode=function(e,t,n){return 1===e.nodeType&&x.virtualElements.normaliseVirtualElementDomStructure(e),c(e,t,A(n),!0)},x.applyBindingsToNode=function(e,t,n){var r,i,o,a=A(n);return x.applyBindingAccessorsToNode(e,(i=a,o=e,"function"==typeof(r=t)?l(r.bind(null,i,o)):x.utils.objectMap(r,s)),a)},x.applyBindingsToDescendants=function(e,t){1!==t.nodeType&&8!==t.nodeType||a(A(e),t,!0)},x.applyBindings=function(e,t){if(!Hpa&&Epa.jQuery&&(Hpa=Epa.jQuery),t&&1!==t.nodeType&&8!==t.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||Epa.document.body,u(A(e),t,!0)},x.contextFor=function(e){switch(e.nodeType){case 1:case 8:var t=x.storedBindingContextForNode(e);if(t)return t;if(e.parentNode)return x.contextFor(e.parentNode)}return Dpa},x.dataFor=function(e){var t=x.contextFor(e);return t?t.$data:Dpa},x.exportSymbol("bindingHandlers",x.bindingHandlers),x.exportSymbol("applyBindings",x.applyBindings),x.exportSymbol("applyBindingsToDescendants",x.applyBindingsToDescendants),x.exportSymbol("applyBindingAccessorsToNode",x.applyBindingAccessorsToNode),x.exportSymbol("applyBindingsToNode",x.applyBindingsToNode),x.exportSymbol("contextFor",x.contextFor),x.exportSymbol("dataFor",x.dataFor)}(),function(s){var u={},c={};function A(e,t){return e.hasOwnProperty(t)?e[t]:s}function d(t,n,r,i){i||(i=x.components.loaders.slice(0));var e=i.shift();if(e){var o=e[t];if(o){var a=!1;if(o.apply(e,n.concat(function(e){a?r(null):null!==e?r(e):d(t,n,r,i)}))!==s&&(a=!0,!e.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else d(t,n,r,i)}else r(null)}x.components={get:function(e,t){var r,n,i,o,a,s,l=A(c,e);l?l.isSynchronousComponent?x.dependencyDetection.ignore(function(){t(l.definition)}):x.tasks.schedule(function(){t(l.definition)}):(n=t,(o=A(u,r=e))?o.subscribe(n):((o=u[r]=new x.subscribable).subscribe(n),s=function(e,t){var n=!(!t||!t.synchronous);c[r]={definition:e,isSynchronousComponent:n},delete u[r],i||n?o.notifySubscribers(e):x.tasks.schedule(function(){o.notifySubscribers(e)})},d("getConfig",[a=r],function(t){t?d("loadComponent",[a,t],function(e){s(e,t)}):s(null,null)}),i=!0))},clearCachedDefinition:function(e){delete c[e]},_getFirstResultFromLoaders:d},x.components.loaders=[],x.exportSymbol("components",x.components),x.exportSymbol("components.get",x.components.get),x.exportSymbol("components.clearCachedDefinition",x.components.clearCachedDefinition)}(),function(e){var n={};x.components.register=function(e,t){if(!t)throw new Error("Invalid configuration for "+e);if(x.components.isRegistered(e))throw new Error("Component "+e+" is already registered");n[e]=t},x.components.isRegistered=function(e){return n.hasOwnProperty(e)},x.components.unregister=function(e){delete n[e],x.components.clearCachedDefinition(e)},x.components.defaultLoader={getConfig:function(e,t){t(n.hasOwnProperty(e)?n[e]:null)},loadComponent:function(c,e,A){var d=r(c);f(d,e,function(e){var t,n,r,i,o,a,s,l,u;t=c,n=d,i=A,o={},a=2,s=function(){0==--a&&i(o)},l=(r=e).template,u=r.viewModel,l?f(n,l,function(e){x.components._getFirstResultFromLoaders("loadTemplate",[t,e],function(e){o.template=e,s()})}):s(),u?f(n,u,function(e){x.components._getFirstResultFromLoaders("loadViewModel",[t,e],function(e){o[p]=e,s()})}):s()})},loadTemplate:function(e,t,n){!function(e,t,n){if("string"==typeof t)n(x.utils.parseHtmlFragment(t));else if(t instanceof Array)n(t);else if(s(t))n(x.utils.makeArray(t.childNodes));else if(t.element){var r=t.element;if(o=r,Epa.HTMLElement?o instanceof HTMLElement:o&&o.tagName&&1===o.nodeType)n(a(r));else if("string"==typeof r){var i=Fpa.getElementById(r);i?n(a(i)):e("Cannot find element with ID "+r)}else e("Unknown element type: "+r)}else e("Unknown template value: "+t);var o}(r(e),t,n)},loadViewModel:function(e,t,n){!function e(t,n,r){if("function"==typeof n)r(function(e){return new n(e)});else if("function"==typeof n[p])r(n[p]);else if("instance"in n){var i=n.instance;r(function(e,t){return i})}else"viewModel"in n?e(t,n.viewModel,r):t("Unknown viewModel value: "+n)}(r(e),t,n)}};var p="createViewModel";function a(e){switch(x.utils.tagNameLower(e)){case"script":return x.utils.parseHtmlFragment(e.text);case"textarea":return x.utils.parseHtmlFragment(e.value);case"template":if(s(e.content))return x.utils.cloneNodes(e.content.childNodes)}return x.utils.cloneNodes(e.childNodes)}function s(e){return Epa.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType}function f(e,t,n){"string"==typeof t.require?i||Epa.require?(i||Epa.require)([t.require],n):e("Uses require, but no AMD loader is present"):n(t)}function r(t){return function(e){throw new Error("Component '"+t+"': "+e)}}x.exportSymbol("components.register",x.components.register),x.exportSymbol("components.isRegistered",x.components.isRegistered),x.exportSymbol("components.unregister",x.components.unregister),x.exportSymbol("components.defaultLoader",x.components.defaultLoader),x.components.loaders.push(x.components.defaultLoader),x.components._allRegisteredComponents=n}(),function(e){x.components.getComponentNameForNode=function(e){var t=x.utils.tagNameLower(e);if(x.components.isRegistered(t)&&(-1!=t.indexOf("-")||""+e=="[object HTMLUnknownElement]"||x.utils.ieVersion<=8&&e.tagName===t))return t},x.components.addBindingsForCustomElement=function(e,t,n,r){if(1===t.nodeType){var i=x.components.getComponentNameForNode(t);if(i){if((e=e||{}).component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var o={name:i,params:function(r,e){var t=r.getAttribute("params");if(t){var n=a.parseBindingsString(t,e,r,{valueAccessors:!0,bindingParams:!0}),i=x.utils.objectMap(n,function(e,t){return x.computed(e,null,{disposeWhenNodeIsRemoved:r})}),o=x.utils.objectMap(i,function(t,e){var n=t.peek();return t.isActive()?x.computed({read:function(){return x.utils.unwrapObservable(t())},write:x.isWriteableObservable(n)&&function(e){t()(e)},disposeWhenNodeIsRemoved:r}):n});return o.hasOwnProperty("$raw")||(o.$raw=i),o}return{$raw:{}}}(t,n)};e.component=r?function(){return o}:o}}return e};var r,t,a=new x.bindingProvider;x.utils.ieVersion<9&&(x.components.register=(t=x.components.register,function(e){return Fpa.createElement(e),t.apply(this,arguments)}),Fpa.createDocumentFragment=(r=Fpa.createDocumentFragment,function(){var e=r(),t=x.components._allRegisteredComponents;for(var n in t)t.hasOwnProperty(n)&&e.createElement(n);return e}))}(),w=0,x.bindingHandlers.component={init:function(A,t,e,n,d){var p,f,h=function(){var e=p&&p.dispose;"function"==typeof e&&e.call(p),f=p=null},m=x.utils.makeArray(x.virtualElements.childNodes(A));return x.utils.domNodeDisposal.addDisposeCallback(A,h),x.computed(function(){var l,u,e=x.utils.unwrapObservable(t());if("string"==typeof e?l=e:(l=x.utils.unwrapObservable(e.name),u=x.utils.unwrapObservable(e.params)),!l)throw new Error("No component name specified");var c=f=++w;x.components.get(l,function(e){if(f===c){if(h(),!e)throw new Error("Unknown component '"+l+"'");!function(e,t,n){var r=t.template;if(!r)throw new Error("Component '"+e+"' has no template");var i=x.utils.cloneNodes(r);x.virtualElements.setDomNodeChildren(n,i)}(l,e,A);var t,n,r,i,o,a=(n=A,r=m,i=u,(o=(t=e).createViewModel)?o.call(t,i,{element:n,templateNodes:r}):i),s=d.createChildContext(a,void 0,function(e){e.$component=a,e.$componentTemplateNodes=m});p=a,x.applyBindingsToDescendants(s,A)}})},null,{disposeWhenNodeIsRemoved:A}),{controlsDescendantBindings:!0}}},x.virtualElements.allowedBindings.component=!0;var C={class:"className",for:"htmlFor"};x.bindingHandlers.attr={update:function(r,e,t){var n=x.utils.unwrapObservable(e())||{};x.utils.objectForEach(n,function(e,t){var n=!1===(t=x.utils.unwrapObservable(t))||null===t||t===Dpa;n&&r.removeAttribute(e),x.utils.ieVersion<=8&&e in C?(e=C[e],n?r.removeAttribute(e):r[e]=t):n||r.setAttribute(e,t.toString()),"name"===e&&x.utils.setElementName(r,n?"":t.toString())})}},x.bindingHandlers.checked={after:["value","attr"],init:function(i,o,a){var s=x.pureComputed(function(){return a.has("checkedValue")?x.utils.unwrapObservable(a.get("checkedValue")):a.has("value")?x.utils.unwrapObservable(a.get("value")):i.value});function e(){var e=i.checked,t=d?s():e;if(!x.computedContext.isInitial()&&(!l||e)){var n=x.dependencyDetection.ignore(o);if(u){var r=c?n.peek():n;A!==t?(e&&(x.utils.addOrRemoveItem(r,t,!0),x.utils.addOrRemoveItem(r,A,!1)),A=t):x.utils.addOrRemoveItem(r,t,e),c&&x.isWriteableObservable(n)&&n(r)}else x.expressionRewriting.writeValueToProperty(n,a,"checked",t,!0)}}var t="checkbox"==i.type,l="radio"==i.type;if(t||l){var n=o(),u=t&&x.utils.unwrapObservable(n)instanceof Array,c=!(u&&n.push&&n.splice),A=u?s():Dpa,d=l||u;l&&!i.name&&x.bindingHandlers.uniqueName.init(i,function(){return!0}),x.computed(e,null,{disposeWhenNodeIsRemoved:i}),x.utils.registerEventHandler(i,"click",e),x.computed(function(){var e=x.utils.unwrapObservable(o());i.checked=u?0<=x.utils.arrayIndexOf(e,s()):t?e:s()===e},null,{disposeWhenNodeIsRemoved:i}),n=Dpa}}},x.expressionRewriting.twoWayBindings.checked=!0,x.bindingHandlers.checkedValue={update:function(e,t){e.value=x.utils.unwrapObservable(t())}};var S="__ko__cssValue";x.bindingHandlers.css={update:function(n,e){var t=x.utils.unwrapObservable(e());null!==t&&"object"==typeof t?x.utils.objectForEach(t,function(e,t){t=x.utils.unwrapObservable(t),x.utils.toggleDomNodeCssClass(n,e,t)}):(t=x.utils.stringTrim(String(t||"")),x.utils.toggleDomNodeCssClass(n,n[S],!1),n[S]=t,x.utils.toggleDomNodeCssClass(n,t,!0))}},x.bindingHandlers.enable={update:function(e,t){var n=x.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},x.bindingHandlers.disable={update:function(e,t){x.bindingHandlers.enable.update(e,function(){return!x.utils.unwrapObservable(t())})}},x.bindingHandlers.event={init:function(e,o,a,s,l){var t=o()||{};x.utils.objectForEach(t,function(i){"string"==typeof i&&x.utils.registerEventHandler(e,i,function(e){var t,n=o()[i];if(n){try{var r=x.utils.makeArray(arguments);s=l.$data,r.unshift(s),t=n.apply(s,r)}finally{!0!==t&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1!==a.get(i+"Bubble")||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},x.bindingHandlers.foreach={makeTemplateValueAccessor:function(n){return function(){var e=n(),t=x.utils.peekObservable(e);return t&&"number"!=typeof t.length?(x.utils.unwrapObservable(e),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:x.nativeTemplateEngine.instance}):{foreach:e,templateEngine:x.nativeTemplateEngine.instance}}},init:function(e,t,n,r,i){return x.bindingHandlers.template.init(e,x.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return x.bindingHandlers.template.update(e,x.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,r,i)}},x.expressionRewriting.bindingRewriteValidators.foreach=!1,x.virtualElements.allowedBindings.foreach=!0;var E="__ko_hasfocusUpdating",D="__ko_hasfocusLastValue";function B(e,l,u,c){x.bindingHandlers[e]={init:function(r,i,e,t,o){var a,s;return x.computed(function(){var e=x.utils.unwrapObservable(i()),t=!u!=!e,n=!s;(n||l||t!==a)&&(n&&x.computedContext.getDependenciesCount()&&(s=x.utils.cloneNodes(x.virtualElements.childNodes(r),!0)),t?(n||x.virtualElements.setDomNodeChildren(r,x.utils.cloneNodes(s)),x.applyBindingsToDescendants(c?c(o,e):o,r)):x.virtualElements.emptyNode(r),a=t)},null,{disposeWhenNodeIsRemoved:r}),{controlsDescendantBindings:!0}}},x.expressionRewriting.bindingRewriteValidators[e]=!1,x.virtualElements.allowedBindings[e]=!0}x.bindingHandlers.hasfocus={init:function(i,o,a){var e=function(e){i[E]=!0;var t=i.ownerDocument;if("activeElement"in t){var n;try{n=t.activeElement}catch(e){n=t.body}e=n===i}var r=o();x.expressionRewriting.writeValueToProperty(r,a,"hasfocus",e,!0),i[D]=e,i[E]=!1},t=e.bind(null,!0),n=e.bind(null,!1);x.utils.registerEventHandler(i,"focus",t),x.utils.registerEventHandler(i,"focusin",t),x.utils.registerEventHandler(i,"blur",n),x.utils.registerEventHandler(i,"focusout",n)},update:function(e,t){var n=!!x.utils.unwrapObservable(t());e[E]||e[D]===n||(n?e.focus():e.blur(),!n&&e[D]&&e.ownerDocument.body.focus(),x.dependencyDetection.ignore(x.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},x.expressionRewriting.twoWayBindings.hasfocus=!0,x.bindingHandlers.hasFocus=x.bindingHandlers.hasfocus,x.expressionRewriting.twoWayBindings.hasFocus=!0,x.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){x.utils.setHtml(e,t())}},B("if"),B("ifnot",!1,!0),B("with",!0,!1,function(e,t){return e.createChildContext(t)});var T,I={};x.bindingHandlers.options={init:function(e){if("select"!==x.utils.tagNameLower(e))throw new Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(a,e,s){function t(){return x.utils.arrayFilter(a.options,function(e){return e.selected})}var n,r,i=0==a.length,o=a.multiple,l=!i&&o?a.scrollTop:null,u=x.utils.unwrapObservable(e()),c=s.get("valueAllowUnset")&&s.has("value"),A=s.get("optionsIncludeDestroyed"),d={},p=[];function f(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}c||(o?p=x.utils.arrayMap(t(),x.selectExtensions.readValue):0<=a.selectedIndex&&p.push(x.selectExtensions.readValue(a.options[a.selectedIndex]))),u&&(void 0===u.length&&(u=[u]),r=x.utils.arrayFilter(u,function(e){return A||e===Dpa||null===e||!x.utils.unwrapObservable(e._destroy)}),s.has("optionsCaption")&&null!==(n=x.utils.unwrapObservable(s.get("optionsCaption")))&&n!==Dpa&&r.unshift(I));var h=!1;function m(e,t){if(h&&c)x.selectExtensions.writeValue(a,x.utils.unwrapObservable(s.get("value")),!0);else if(p.length){var n=0<=x.utils.arrayIndexOf(p,x.selectExtensions.readValue(t[0]));x.utils.setOptionNodeSelectionState(t[0],n),h&&!n&&x.dependencyDetection.ignore(x.utils.triggerEvent,null,[a,"change"])}}d.beforeRemove=function(e){a.removeChild(e)};var g=m;s.has("optionsAfterRender")&&"function"==typeof s.get("optionsAfterRender")&&(g=function(e,t){m(0,t),x.dependencyDetection.ignore(s.get("optionsAfterRender"),null,[t[0],e!==I?e:Dpa])}),x.utils.setDomNodeChildrenFromArrayMapping(a,r,function(e,t,n){n.length&&(p=!c&&n[0].selected?[x.selectExtensions.readValue(n[0])]:[],h=!0);var r=a.ownerDocument.createElement("option");if(e===I)x.utils.setTextContent(r,s.get("optionsCaption")),x.selectExtensions.writeValue(r,Dpa);else{var i=f(e,s.get("optionsValue"),e);x.selectExtensions.writeValue(r,x.utils.unwrapObservable(i));var o=f(e,s.get("optionsText"),i);x.utils.setTextContent(r,o)}return[r]},d,g),x.dependencyDetection.ignore(function(){c?x.selectExtensions.writeValue(a,x.utils.unwrapObservable(s.get("value")),!0):(o?p.length&&t().length<p.length:p.length&&0<=a.selectedIndex?x.selectExtensions.readValue(a.options[a.selectedIndex])!==p[0]:p.length||0<=a.selectedIndex)&&x.utils.triggerEvent(a,"change")}),x.utils.ensureSelectElementIsRenderedCorrectly(a),l&&20<Math.abs(l-a.scrollTop)&&(a.scrollTop=l)}},x.bindingHandlers.options.optionValueDomDataKey=x.utils.domData.nextKey(),x.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(n,r,i){x.utils.registerEventHandler(n,"change",function(){var e=r(),t=[];x.utils.arrayForEach(n.getElementsByTagName("option"),function(e){e.selected&&t.push(x.selectExtensions.readValue(e))}),x.expressionRewriting.writeValueToProperty(e,i,"selectedOptions",t)})},update:function(e,t){if("select"!=x.utils.tagNameLower(e))throw new Error("values binding applies only to SELECT elements");var n=x.utils.unwrapObservable(t()),r=e.scrollTop;n&&"number"==typeof n.length&&x.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=0<=x.utils.arrayIndexOf(n,x.selectExtensions.readValue(e));e.selected!=t&&x.utils.setOptionNodeSelectionState(e,t)}),e.scrollTop=r}},x.expressionRewriting.twoWayBindings.selectedOptions=!0,x.bindingHandlers.style={update:function(n,e){var t=x.utils.unwrapObservable(e()||{});x.utils.objectForEach(t,function(e,t){null!==(t=x.utils.unwrapObservable(t))&&t!==Dpa&&!1!==t||(t=""),n.style[e]=t})}},x.bindingHandlers.submit={init:function(r,i,e,t,o){if("function"!=typeof i())throw new Error("The value for a submit binding must be a function");x.utils.registerEventHandler(r,"submit",function(e){var t,n=i();try{t=n.call(o.$data,r)}finally{!0!==t&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}})}},x.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){x.utils.setTextContent(e,t())}},x.virtualElements.allowedBindings.text=!0,function(){if(Epa&&Epa.navigator)var e=function(e){if(e)return parseFloat(e[1])},d=Epa.opera&&Epa.opera.version&&parseInt(Epa.opera.version()),t=Epa.navigator.userAgent,p=e(t.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),f=e(t.match(/Firefox\/([^ ]*)/));if(x.utils.ieVersion<10)var r=x.utils.domData.nextKey(),i=x.utils.domData.nextKey(),o=function(e){var t=this.activeElement,n=t&&x.utils.domData.get(t,i);n&&n(e)},h=function(e,t){var n=e.ownerDocument;x.utils.domData.get(n,r)||(x.utils.domData.set(n,r,!0),x.utils.registerEventHandler(n,"selectionchange",o)),x.utils.domData.set(e,i,t)};x.bindingHandlers.textInput={init:function(n,r,i){var o,a,s=n.value,l=function(e){clearTimeout(o),a=o=Dpa;var t=n.value;s!==t&&(e&&(n._ko_textInputProcessedEvent=e.type),s=t,x.expressionRewriting.writeValueToProperty(r(),i,"textInput",t))},t=function(e){if(!o){a=n.value;var t=l.bind(n,{type:e.type});o=x.utils.setTimeout(t,4)}},u=9==x.utils.ieVersion?t:l,c=function(){var e=x.utils.unwrapObservable(r());null!==e&&e!==Dpa||(e=""),a===Dpa||e!==a?n.value!==e&&(s=e,n.value=e):x.utils.setTimeout(c,4)},A=function(e,t){x.utils.registerEventHandler(n,e,t)};x.bindingHandlers.textInput._forceUpdateOn?x.utils.arrayForEach(x.bindingHandlers.textInput._forceUpdateOn,function(e){"after"==e.slice(0,5)?A(e.slice(5),t):A(e,l)}):x.utils.ieVersion<10?(A("propertychange",function(e){"value"===e.propertyName&&u(e)}),8==x.utils.ieVersion&&(A("keyup",l),A("keydown",l)),8<=x.utils.ieVersion&&(h(n,u),A("dragend",t))):(A("input",l),p<5&&"textarea"===x.utils.tagNameLower(n)?(A("keydown",t),A("paste",t),A("cut",t)):d<11?A("keydown",t):f<4&&(A("DOMAutoComplete",l),A("dragdrop",l),A("drop",l))),A("change",l),x.computed(c,null,{disposeWhenNodeIsRemoved:n})}},x.expressionRewriting.twoWayBindings.textInput=!0,x.bindingHandlers.textinput={preprocess:function(e,t,n){n("textInput",e)}}}(),x.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++x.bindingHandlers.uniqueName.currentIndex;x.utils.setElementName(e,n)}}},x.bindingHandlers.uniqueName.currentIndex=0,x.bindingHandlers.value={after:["options","foreach"],init:function(i,o,a){if("input"!=i.tagName.toLowerCase()||"checkbox"!=i.type&&"radio"!=i.type){var e=["change"],t=a.get("valueUpdate"),n=!1,s=null;t&&("string"==typeof t&&(t=[t]),x.utils.arrayPushAll(e,t),e=x.utils.arrayGetDistinctValues(e));var r=function(){s=null,n=!1;var e=o(),t=x.selectExtensions.readValue(i);x.expressionRewriting.writeValueToProperty(e,a,"value",t)};x.utils.ieVersion&&"input"==i.tagName.toLowerCase()&&"text"==i.type&&"off"!=i.autocomplete&&(!i.form||"off"!=i.form.autocomplete)&&-1==x.utils.arrayIndexOf(e,"propertychange")&&(x.utils.registerEventHandler(i,"propertychange",function(){n=!0}),x.utils.registerEventHandler(i,"focus",function(){n=!1}),x.utils.registerEventHandler(i,"blur",function(){n&&r()})),x.utils.arrayForEach(e,function(e){var t=r;x.utils.stringStartsWith(e,"after")&&(t=function(){s=x.selectExtensions.readValue(i),x.utils.setTimeout(r,0)},e=e.substring("after".length)),x.utils.registerEventHandler(i,e,t)});var l=function(){var e=x.utils.unwrapObservable(o()),t=x.selectExtensions.readValue(i);if(null===s||e!==s){if(e!==t)if("select"===x.utils.tagNameLower(i)){var n=a.get("valueAllowUnset"),r=function(){x.selectExtensions.writeValue(i,e,n)};r(),n||e===x.selectExtensions.readValue(i)?x.utils.setTimeout(r,0):x.dependencyDetection.ignore(x.utils.triggerEvent,null,[i,"change"])}else x.selectExtensions.writeValue(i,e)}else x.utils.setTimeout(l,0)};x.computed(l,null,{disposeWhenNodeIsRemoved:i})}else x.applyBindingAccessorsToNode(i,{checkedValue:o})},update:function(){}},x.expressionRewriting.twoWayBindings.value=!0,x.bindingHandlers.visible={update:function(e,t){var n=x.utils.unwrapObservable(t()),r=!("none"==e.style.display);n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},T="click",x.bindingHandlers[T]={init:function(e,t,n,r,i){return x.bindingHandlers.event.init.call(this,e,function(){var e={};return e[T]=t(),e},n,r,i)}},x.templateEngine=function(){},x.templateEngine.prototype.renderTemplateSource=function(e,t,n,r){throw new Error("Override renderTemplateSource")},x.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(e){throw new Error("Override createJavaScriptEvaluatorBlock")},x.templateEngine.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){var n=(t=t||Fpa).getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new x.templateSources.domElement(n)}if(1==e.nodeType||8==e.nodeType)return new x.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},x.templateEngine.prototype.renderTemplate=function(e,t,n,r){var i=this.makeTemplateSource(e,r);return this.renderTemplateSource(i,t,n,r)},x.templateEngine.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},x.templateEngine.prototype.rewriteTemplate=function(e,t,n){var r=this.makeTemplateSource(e,n),i=t(r.text());r.text(i),r.data("isRewritten",!0)},x.exportSymbol("templateEngine",x.templateEngine),x.templateRewriting=function(){var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,r=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;function i(e,t,n,r){var i=x.expressionRewriting.parseObjectLiteral(e);!function(e){for(var t=x.expressionRewriting.bindingRewriteValidators,n=0;n<e.length;n++){var r=e[n].key;if(t.hasOwnProperty(r)){var i=t[r];if("function"==typeof i){var o=i(e[n].value);if(o)throw new Error(o)}else if(!i)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}(i);var o="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+x.expressionRewriting.preProcessBindings(i,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')";return r.createJavaScriptEvaluatorBlock(o)+t}return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return x.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,t){return e.replace(n,function(){return i(arguments[4],arguments[1],arguments[2],t)}).replace(r,function(){return i(arguments[1],"\x3c!-- ko --\x3e","#comment",t)})},applyMemoizedBindingsToNextSibling:function(r,i){return x.memoization.memoize(function(e,t){var n=e.nextSibling;n&&n.nodeName.toLowerCase()===i&&x.applyBindingAccessorsToNode(n,r,t)})}}}(),x.exportSymbol("__tr_ambtns",x.templateRewriting.applyMemoizedBindingsToNextSibling),function(){x.templateSources={},x.templateSources.domElement=function(e){if(this.domElement=e){var t=x.utils.tagNameLower(e);this.templateType="script"===t?1:"textarea"===t?2:"template"==t&&e.content&&11===e.content.nodeType?3:4}},x.templateSources.domElement.prototype.text=function(){var e=1===this.templateType?"text":2===this.templateType?"value":"innerHTML";if(0==arguments.length)return this.domElement[e];var t=arguments[0];"innerHTML"===e?x.utils.setHtml(this.domElement,t):this.domElement[e]=t};var t=x.utils.domData.nextKey()+"_";x.templateSources.domElement.prototype.data=function(e){if(1===arguments.length)return x.utils.domData.get(this.domElement,t+e);x.utils.domData.set(this.domElement,t+e,arguments[1])};var n=x.utils.domData.nextKey();function r(e){return x.utils.domData.get(e,n)||{}}function i(e,t){x.utils.domData.set(e,n,t)}x.templateSources.domElement.prototype.nodes=function(){var e=this.domElement;if(0==arguments.length)return r(e).containerData||(3===this.templateType?e.content:4===this.templateType?e:Dpa);i(e,{containerData:arguments[0]})},x.templateSources.anonymousTemplate=function(e){this.domElement=e},x.templateSources.anonymousTemplate.prototype=new x.templateSources.domElement,x.templateSources.anonymousTemplate.prototype.constructor=x.templateSources.anonymousTemplate,x.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var e=r(this.domElement);return e.textData===Dpa&&e.containerData&&(e.textData=e.containerData.innerHTML),e.textData}var t=arguments[0];i(this.domElement,{textData:t})},x.exportSymbol("templateSources",x.templateSources),x.exportSymbol("templateSources.domElement",x.templateSources.domElement),x.exportSymbol("templateSources.anonymousTemplate",x.templateSources.anonymousTemplate)}(),function(){var u;function r(e,t,n){for(var r,i=e,o=x.virtualElements.nextSibling(t);i&&(r=i)!==o;)n(r,i=x.virtualElements.nextSibling(r))}function c(e,t){if(e.length){var i=e[0],o=e[e.length-1],n=i.parentNode,a=x.bindingProvider.instance,s=a.preprocessNode;if(s){if(r(i,o,function(e,t){var n=e.previousSibling,r=s.call(a,e);r&&(e===i&&(i=r[0]||t),e===o&&(o=r[r.length-1]||n))}),e.length=0,!i)return;i===o?e.push(i):(e.push(i,o),x.utils.fixUpContinuousNodeArray(e,n))}r(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||x.applyBindings(t,e)}),r(i,o,function(e){1!==e.nodeType&&8!==e.nodeType||x.memoization.unmemoizeDomNodeAndDescendants(e,[t])}),x.utils.fixUpContinuousNodeArray(e,n)}}function A(e){return e.nodeType?e:0<e.length?e[0]:null}function d(e,t,n,r,i){i=i||{};var o=(e&&A(e)||n||{}).ownerDocument,a=i.templateEngine||u;x.templateRewriting.ensureTemplateIsRewritten(n,a,o);var s=a.renderTemplate(n,r,i,o);if("number"!=typeof s.length||0<s.length&&"number"!=typeof s[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var l=!1;switch(t){case"replaceChildren":x.virtualElements.setDomNodeChildren(e,s),l=!0;break;case"replaceNode":x.utils.replaceDomNodes(e,s),l=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+t)}return l&&(c(s,r),i.afterRender&&x.dependencyDetection.ignore(i.afterRender,null,[s,r.$data])),s}function p(e,t,n){return x.isObservable(e)?e():"function"==typeof e?e(t,n):e}x.setTemplateEngine=function(e){if(e!=Dpa&&!(e instanceof x.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");u=e},x.renderTemplate=function(r,i,o,a,s){if(((o=o||{}).templateEngine||u)==Dpa)throw new Error("Set a template engine before calling renderTemplate");if(s=s||"replaceChildren",a){var l=A(a),e=l&&"replaceNode"==s?l.parentNode:l;return x.dependentObservable(function(){var e=i&&i instanceof x.bindingContext?i:new x.bindingContext(x.utils.unwrapObservable(i)),t=p(r,e.$data,e),n=d(a,s,t,e,o);"replaceNode"==s&&(l=A(a=n))},null,{disposeWhen:function(){return!l||!x.utils.domNodeIsAttachedToDocument(l)},disposeWhenNodeIsRemoved:e})}return x.memoization.memoize(function(e){x.renderTemplate(r,i,o,e,"replaceNode")})},x.renderTemplateForEach=function(n,r,i,o,a){var s,l=function(e,t){return s=a.createChildContext(e,i.as,function(e){e.$index=t}),d(null,"ignoreTargetNode",p(n,e,s),s,i)},u=function(e,t,n){c(t,s),i.afterRender&&i.afterRender(t,e),s=null};return x.dependentObservable(function(){var e=x.utils.unwrapObservable(r)||[];void 0===e.length&&(e=[e]);var t=x.utils.arrayFilter(e,function(e){return i.includeDestroyed||e===Dpa||null===e||!x.utils.unwrapObservable(e._destroy)});x.dependencyDetection.ignore(x.utils.setDomNodeChildrenFromArrayMapping,null,[o,t,l,i,u])},null,{disposeWhenNodeIsRemoved:o})};var m=x.utils.domData.nextKey();x.bindingHandlers.template={init:function(e,t){var n=x.utils.unwrapObservable(t());if("string"==typeof n||n.name)x.virtualElements.emptyNode(e);else if("nodes"in n){var r=n.nodes||[];if(x.isObservable(r))throw new Error('The "nodes" option must be a plain, non-observable array.');var i=x.utils.moveCleanedNodesToContainerElement(r);new x.templateSources.anonymousTemplate(e).nodes(i)}else{var o=x.virtualElements.childNodes(e);i=x.utils.moveCleanedNodesToContainerElement(o),new x.templateSources.anonymousTemplate(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var o,a,s,l,u,c=t(),A=x.utils.unwrapObservable(c),d=!0,p=null;if("string"==typeof A?(a=c,A={}):(a=A.name,"if"in A&&(d=x.utils.unwrapObservable(A.if)),d&&"ifnot"in A&&(d=!x.utils.unwrapObservable(A.ifnot)),o=x.utils.unwrapObservable(A.data)),"foreach"in A){var f=d&&A.foreach||[];p=x.renderTemplateForEach(a||e,f,A,e,i)}else if(d){var h="data"in A?i.createChildContext(o,A.as):i;p=x.renderTemplate(a||e,h,A,e)}else x.virtualElements.emptyNode(e);s=e,l=p,(u=x.utils.domData.get(s,m))&&"function"==typeof u.dispose&&u.dispose(),x.utils.domData.set(s,m,l&&l.isActive()?l:Dpa)}},x.expressionRewriting.bindingRewriteValidators.template=function(e){var t=x.expressionRewriting.parseObjectLiteral(e);return 1==t.length&&t[0].unknown?null:x.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},x.virtualElements.allowedBindings.template=!0}(),x.exportSymbol("setTemplateEngine",x.setTemplateEngine),x.exportSymbol("renderTemplate",x.renderTemplate),x.utils.findMovesInArrayComparison=function(e,t,n){var r,i,o,a,s;if(e.length&&t.length)for(r=i=0;(!n||r<n)&&(a=e[i]);++i){for(o=0;s=t[o];++o)if(a.value===s.value){a.moved=s.index,s.moved=a.index,t.splice(o,1),r=o=0;break}r+=o}},x.utils.compareArrays=function(){function r(e,t,n,r,i){var o,a,s,l,u,c=Math.min,A=Math.max,d=[],p=e.length,f=t.length,h=f-p||1,m=p+f+1;for(o=0;o<=p;o++)for(l=s,d.push(s=[]),u=c(f,o+h),a=A(0,o-1);a<=u;a++)if(a)if(o)if(e[o-1]===t[a-1])s[a]=l[a-1];else{var g=l[a]||m,v=s[a-1]||m;s[a]=c(g,v)+1}else s[a]=a+1;else s[a]=o+1;var y,w=[],b=[],C=[];for(o=p,a=f;o||a;)y=d[o][a]-1,a&&y===d[o][a-1]?b.push(w[w.length]={status:n,value:t[--a],index:a}):o&&y===d[o-1][a]?C.push(w[w.length]={status:r,value:e[--o],index:o}):(--a,--o,i.sparse||w.push({status:"retained",value:t[a]}));return x.utils.findMovesInArrayComparison(C,b,!i.dontLimitMoves&&10*p),w.reverse()}return function(e,t,n){return n="boolean"==typeof n?{dontLimitMoves:n}:n||{},t=t||[],(e=e||[]).length<t.length?r(e,t,"added","deleted",n):r(t,e,"deleted","added",n)}}(),x.exportSymbol("utils.compareArrays",x.utils.compareArrays),function(){function T(t,n,r,i,o){var a=[],e=x.dependentObservable(function(){var e=n(r,o,x.utils.fixUpContinuousNodeArray(a,t))||[];0<a.length&&(x.utils.replaceDomNodes(a,e),i&&x.dependencyDetection.ignore(i,null,[r,e,o])),a.length=0,x.utils.arrayPushAll(a,e)},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return!x.utils.anyDomNodeIsAttachedToDocument(a)}});return{mappedNodes:a,dependentObservable:e.isActive()?e:Dpa}}var I=x.utils.domData.nextKey(),F=x.utils.domData.nextKey();x.utils.setDomNodeChildrenFromArrayMapping=function(n,e,t,r,i){e=e||[],r=r||{};var o,a=x.utils.domData.get(n,I)===Dpa,s=x.utils.domData.get(n,I)||[],l=x.utils.arrayMap(s,function(e){return e.arrayEntry}),u=x.utils.compareArrays(l,e,r.dontLimitMoves),c=[],A=0,d=0,p=[],f=[],h=[],m=[],g=[];function v(e,t){o=s[t],d!==t&&(m[e]=o),o.indexObservable(d++),x.utils.fixUpContinuousNodeArray(o.mappedNodes,n),c.push(o),f.push(o)}function y(t,n){if(t)for(var r=0,e=n.length;r<e;r++)n[r]&&x.utils.arrayForEach(n[r].mappedNodes,function(e){t(e,r,n[r].arrayEntry)})}for(var w,b,C=0;w=u[C];C++)switch(b=w.moved,w.status){case"deleted":b===Dpa&&((o=s[A]).dependentObservable&&(o.dependentObservable.dispose(),o.dependentObservable=Dpa),x.utils.fixUpContinuousNodeArray(o.mappedNodes,n).length&&(r.beforeRemove&&(c.push(o),f.push(o),o.arrayEntry===F?o=null:h[C]=o),o&&p.push.apply(p,o.mappedNodes))),A++;break;case"retained":v(C,A++);break;case"added":b!==Dpa?v(C,b):(o={arrayEntry:w.value,indexObservable:x.observable(d++)},c.push(o),f.push(o),a||(g[C]=o))}x.utils.domData.set(n,I,c),y(r.beforeMove,m),x.utils.arrayForEach(p,r.beforeRemove?x.cleanNode:x.removeNode),C=0;for(var S,E,D=x.virtualElements.firstChild(n);o=f[C];C++){o.mappedNodes||x.utils.extend(o,T(n,t,o.arrayEntry,i,o.indexObservable));for(var B=0;E=o.mappedNodes[B];D=E.nextSibling,S=E,B++)E!==D&&x.virtualElements.insertAfter(n,E,S);!o.initialized&&i&&(i(o.arrayEntry,o.mappedNodes,o.indexObservable),o.initialized=!0)}for(y(r.beforeRemove,h),C=0;C<h.length;++C)h[C]&&(h[C].arrayEntry=F);y(r.afterMove,m),y(r.afterAdd,g)}}(),x.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",x.utils.setDomNodeChildrenFromArrayMapping),x.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},x.nativeTemplateEngine.prototype=new x.templateEngine,x.nativeTemplateEngine.prototype.constructor=x.nativeTemplateEngine,x.nativeTemplateEngine.prototype.renderTemplateSource=function(e,t,n,r){var i=x.utils.ieVersion<9||!e.nodes?null:e.nodes();if(i)return x.utils.makeArray(i.cloneNode(!0).childNodes);var o=e.text();return x.utils.parseHtmlFragment(o,r)},x.nativeTemplateEngine.instance=new x.nativeTemplateEngine,x.setTemplateEngine(x.nativeTemplateEngine.instance),x.exportSymbol("nativeTemplateEngine",x.nativeTemplateEngine),function(){x.jqueryTmplTemplateEngine=function(){var d=this.jQueryTmplVersion=function(){if(!Hpa||!Hpa.tmpl)return 0;try{if(0<=Hpa.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(e,t,n,r){r=r||Fpa,n=n||{},function(){if(d<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}();var i=e.data("precompiled");if(!i){var o=e.text()||"";o="{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}",i=Hpa.template(null,o),e.data("precompiled",i)}var a,s,l,u=[t.$data],c=Hpa.extend({koBindingContext:t},n.templateOptions),A=(a=i,s=u,l=c,Hpa.tmpl(a,s,l));return A.appendTo(r.createElement("div")),Hpa.fragments={},A},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){Fpa.write("<script type='text/html' id='"+e+"'>"+t+"<\/script>")},0<d&&(Hpa.tmpl.tag.ko_code={open:"__.push($1 || '');"},Hpa.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},x.jqueryTmplTemplateEngine.prototype=new x.templateEngine,x.jqueryTmplTemplateEngine.prototype.constructor=x.jqueryTmplTemplateEngine;var e=new x.jqueryTmplTemplateEngine;0<e.jQueryTmplVersion&&x.setTemplateEngine(e),x.exportSymbol("jqueryTmplTemplateEngine",x.jqueryTmplTemplateEngine)}()},"function"==typeof define&&define.amd?define(["exports","require"],Jpa):"object"==typeof exports&&"object"==typeof module?Jpa(module.exports||exports):Jpa(Epa.ko={})}(),function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.postbox={})}(function(u,c,A){var d,s,l={},p=1;c.subscriptions=l,u.subscribable.call(c),c.topicCache={},c.serializer=u.toJSON,c.publish=function(e,t){e&&(c.topicCache[e]={value:t,serialized:c.serializer(t)},c.notifySubscribers(t,e))},s=c.subscribe,c.subscribe=function(e,t,n,r){var i,o,a;if(e)return"boolean"==typeof n&&(r=n,n=A),(i=s.call(c,t,n,e)).subId=++p,l[p]=i,r&&(o=c.topicCache[e])!==A&&t.call(n,o.value),a=i.dispose,i.dispose=function(){delete l[i.subId],a.call(i)},i},c.reset=function(){var e;for(var t in l)l.hasOwnProperty(t)&&(e=l[t])&&"function"==typeof e.dispose&&e.dispose();c.topicCache={}},c.defaultComparer=function(e,t){return t&&c.serializer(e)===t.serialized},u.subscribable.fn.publishOn=function(t,e,n){var r,i,o;return t&&("function"==typeof e?n=e:r=e,n=n||c.defaultComparer,d.call(this,t,"publishOn"),(i=this.subscribe(function(e){n.call(this,e,c.topicCache[t])||c.publish(t,e)},this)).id=++p,l[p]=i,o=i.dispose,i.dispose=function(){delete this.postboxSubs[t].publishOn,delete l[i.id],o.call(i)}.bind(this),this.postboxSubs[t].publishOn=i,r||c.publish(t,this())),this},d=function(e,t){var n=this.postboxSubs=this.postboxSubs||{};n[e]=n[e]||{},n[e][t]&&n[e][t].dispose()},u.subscribable.fn.stopPublishingOn=function(e){return d.call(this,e,"publishOn"),this},u.subscribable.fn.subscribeTo=function(e,t,n){var r,i,o,a,s,l=this;return"function"==typeof t?n=t:r=t,e&&u.isWriteableObservable(this)&&(d.call(this,e,"subscribeTo"),o=function(e){l(n?n.call(l,e):e)},a=c.subscribe(e,o),this.postboxSubs[e].subscribeTo=a,s=a.dispose,a.dispose=function(){delete this.postboxSubs[e].subscribeTo,s.call(a)}.bind(this),r&&(i=c.topicCache[e])!==A&&o(i.value)),this},u.subscribable.fn.unsubscribeFrom=function(e){return d.call(this,e,"subscribeTo"),this},u.subscribable.fn.syncWith=function(e,t,n,r){return this.subscribeTo(e,t).publishOn(e,n,r),this},u.postbox=c}),function(e){"function"==typeof define&&define.amd?define(["knockout","jquery","jquery.ui.sortable"],e):e(window.ko,jQuery)}(function(f,h,m){var g="ko_sortItem",v="ko_sortList",y="ko_parentList",w="ko_dragItem",o=function(e,t){f.utils.arrayForEach(e,function(e){1===e.nodeType&&(f.utils.domData.set(e,g,t),f.utils.domData.set(e,y,f.utils.domData.get(e.parentNode,v)))})},b=function(e,t){var n,r={},i=f.utils.unwrapObservable(e());return i.data?(r[t]=i.data,r.name=i.template):r[t]=e(),f.utils.arrayForEach(["afterAdd","afterRender","beforeRemove","includeDestroyed","templateEngine","templateOptions"],function(e){r[e]=i[e]||f.bindingHandlers.sortable[e]}),"foreach"===t&&(r.afterRender?(n=r.afterRender,r.afterRender=function(e,t){o.call(t,e,t),n.call(t,e,t)}):r.afterRender=o),r};f.bindingHandlers.sortable={init:function(n,e,t,r,i){var o,a,A,s=h(n),l=f.utils.unwrapObservable(e())||{},d=b(e,"foreach"),p={};return f.utils.arrayForEach(n.childNodes,function(e){e&&3===e.nodeType&&e.parentNode.removeChild(e)}),h.extend(!0,p,f.bindingHandlers.sortable),l.options&&p.options&&(f.utils.extend(p.options,l.options),delete l.options),f.utils.extend(p,l),p.connectClass&&(f.isObservable(p.allowDrop)||"function"==typeof p.allowDrop)?f.computed({read:function(){var e=f.utils.unwrapObservable(p.allowDrop),t="function"==typeof e?e.call(this,d.foreach):e;f.utils.toggleDomNodeCssClass(n,p.connectClass,t)},disposeWhenNodeIsRemoved:n},this):f.utils.toggleDomNodeCssClass(n,p.connectClass,p.allowDrop),f.bindingHandlers.template.init(n,function(){return d},t,r,i),a=p.options.start,A=p.options.update,o=setTimeout(function(){var c;s.sortable(f.utils.extend(p.options,{start:function(e,t){t.item.find("input:focus").change(),a&&a.apply(this,arguments)},receive:function(e,t){(c=f.utils.domData.get(t.item[0],w))&&c.clone&&(c=c.clone())},update:function(e,t){var n,r,i,o,a,s,l=t.item[0],u=f.utils.domData.get(l,g)||c;if(c=null,this===t.item.parent()[0]&&u){if(n=f.utils.domData.get(l,y),r=f.utils.domData.get(l.parentNode,v),i=f.utils.arrayIndexOf(t.item.parent().children(),l),!d.includeDestroyed)for(a=r(),o=0;o<i;o++)a[o]&&a[o]._destroy&&i++;if((p.beforeMove||p.afterMove)&&(s={item:u,sourceParent:n,sourceParentNode:n&&l.parentNode,sourceIndex:n&&n.indexOf(u),targetParent:r,targetIndex:i,cancelDrop:!1}),p.beforeMove&&(p.beforeMove.call(this,s,e,t),s.cancelDrop))return void(s.sourceParent?h(s.sourceParent===s.targetParent?this:t.sender).sortable("cancel"):h(l).remove());0<=i&&(n&&(n.remove(u),f.processAllDeferredBindingUpdates&&f.processAllDeferredBindingUpdates()),r.splice(i,0,u)),f.utils.domData.set(l,g,null),t.item.remove(),f.processAllDeferredBindingUpdates&&f.processAllDeferredBindingUpdates(),p.afterMove&&p.afterMove.call(this,s,e,t)}A&&A.apply(this,arguments)},connectWith:!!p.connectClass&&"."+p.connectClass})),p.isEnabled!==m&&f.computed({read:function(){s.sortable(f.utils.unwrapObservable(p.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:n})},0),f.utils.domNodeDisposal.addDisposeCallback(n,function(e){clearTimeout(o),(h(n).data("ui-sortable")||h(n).data("sortable"))&&h(e).sortable("destroy")}),{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var o=b(t,"foreach");f.utils.domData.set(e,v,o.foreach),f.bindingHandlers.template.update(e,function(){return o},n,r,i)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},f.bindingHandlers.draggable={init:function(e,t,n,r,i){var o=f.utils.unwrapObservable(t())||{},a=o.options||{},s=f.utils.extend({},f.bindingHandlers.draggable.options),l=b(t,"data"),u=o.connectClass||f.bindingHandlers.draggable.connectClass,c=o.isEnabled!==m?o.isEnabled:f.bindingHandlers.draggable.isEnabled;return o=o.data||o,f.utils.domData.set(e,w,o),f.utils.extend(s,a),s.connectToSortable=!!u&&"."+u,h(e).draggable(s),c!==m&&f.computed({read:function(){h(e).draggable(f.utils.unwrapObservable(c)?"enable":"disable")},disposeWhenNodeIsRemoved:e}),f.bindingHandlers.template.init(e,function(){return l},n,r,i)},update:function(e,t,n,r,i){var o=b(t,"data");return f.bindingHandlers.template.update(e,function(){return o},n,r,i)},connectClass:f.bindingHandlers.sortable.connectClass,options:{helper:"clone"}}}),function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.validation={})}(function(u,e){if(void 0===typeof u)throw"Knockout is required, please ensure it is loaded before loading this validation plug-in";var t,r,i,n,o,a,s={registerExtenders:!0,messagesOnModified:!0,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateElement:!1,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",grouping:{deep:!1,observable:!0}},l=u.utils.extend({},s),c=["required","pattern","min","max","step"],A=(t=(new Date).getTime(),r={},i="__ko_validation__",{isArray:function(e){return e.isArray||"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"object"==typeof e},values:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},getValue:function(e){return"function"==typeof e?e():e},hasAttribute:function(e,t){return null!==e.getAttribute(t)},isValidatable:function(e){return e&&e.rules&&e.isValid&&e.isModified},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},newId:function(){return t+=1},getConfigOptions:function(e){return A.contextFor(e)||l},setDomData:function(e,t){var n=e[i];n||(e[i]=n=A.newId()),r[n]=t},getDomData:function(e){var t=e[i];if(t)return r[t]},contextFor:function(e){switch(e.nodeType){case 1:case 8:var t=A.getDomData(e);if(t)return t;if(e.parentNode)return A.contextFor(e.parentNode)}},isEmptyVal:function(e){return null==e||""===e||void 0}}),d=(n=0,{utils:A,init:function(e,t){0<n&&!t||((e=e||{}).errorElementClass=e.errorElementClass||e.errorClass||l.errorElementClass,e.errorMessageClass=e.errorMessageClass||e.errorClass||l.errorMessageClass,u.utils.extend(l,e),l.registerExtenders&&u.validation.registerExtenders(),n=1)},configure:function(e){u.validation.init(e)},reset:function(){l=$.extend(l,s)},group:function(e,o){o=u.utils.extend(l.grouping,o);var a=u.observableArray([]),n=null,r=function t(e,n){var r=[],i=u.utils.unwrapObservable(e);n=void 0!==n?n:o.deep?1:-1,u.isObservable(e)&&(e.isValid||e.extend({validatable:!0}),a.push(e)),i&&(A.isArray(i)?r=i:A.isObject(i)&&(r=A.values(i))),0!==n&&u.utils.arrayForEach(r,function(e){e&&!e.nodeType&&t(e,n+1)})};return(n=o.observable?(r(e),u.computed(function(){var t=[];return u.utils.arrayForEach(a(),function(e){e.isValid()||t.push(e.error)}),t})):function(){var t=[];return a([]),r(e),u.utils.arrayForEach(a(),function(e){e.isValid()||t.push(e.error)}),t}).showAllMessages=function(t){null==t&&(t=!0),n(),u.utils.arrayForEach(a(),function(e){e.isModified(t)})},e.errors=n,e.isValid=function(){return 0===e.errors().length},e.isAnyMessageShown=function(){var t=!1;return n(),u.utils.arrayForEach(a(),function(e){!e.isValid()&&e.isModified()&&(t=!0)}),t},n},formatMessage:function(e,t){return"function"==typeof e?e(t):e.replace(/\{0\}/gi,t)},addRule:function(e,t){return e.extend({validatable:!0}),e.rules.push(t),e},addAnonymousRule:function(e,t){var n=A.newId();return void 0===t.message&&(t.message="Error"),u.validation.rules[n]=t,u.validation.addRule(e,{rule:n,params:t.params}),n},addExtender:function(n){u.extenders[n]=function(e,t){return t.message||t.onlyIf?u.validation.addRule(e,{rule:n,message:t.message,params:!!A.isEmptyVal(t.params)||t.params,condition:t.onlyIf}):u.validation.addRule(e,{rule:n,params:t})}},registerExtenders:function(){if(l.registerExtenders)for(var e in u.validation.rules)u.validation.rules.hasOwnProperty(e)&&(u.extenders[e]||u.validation.addExtender(e))},registerExtendersLocal:function(){if(l.registerExtenders)for(var e in d.rules)d.rules.hasOwnProperty(e)&&(u.extenders[e]||d.addExtender(e))},insertValidationMessage:function(e){var t=document.createElement("SPAN");return t.className=A.getConfigOptions(e).errorMessageClass,A.insertAfter(e,t),t},parseInputValidationAttributes:function(t,n){u.utils.arrayForEach(c,function(e){A.hasAttribute(t,e)&&u.validation.addRule(n(),{rule:e,params:t.getAttribute(e)||!0})})},writeInputValidationAttributes:function(r,e){var t=e();if(t&&t.rules){var i=t.rules();u.utils.arrayForEach(c,function(t){var e,n=u.utils.arrayFirst(i,function(e){return e.rule.toLowerCase()===t.toLowerCase()});n&&(e=n.params,"pattern"==n.rule&&n.params instanceof RegExp&&(e=n.params.source),r.setAttribute(t,e))}),i=null}}});function p(r,i,o){r.isValidating(!0);i.validator(r(),o.params||!0,function(e){var t=!1,n="";r.__valid__()&&(e.message?(t=e.isValid,n=e.message):t=e,t||(r.error=u.validation.formatMessage(n||o.message||i.message,o.params),r.__valid__(t))),r.isValidating(!1)})}d.rules={},d.rules.required={validator:function(e,t){var n;return null==e||""===e?!t:("string"==typeof(n=e)&&(n=e.replace(/^\s+|\s+$/g,"")),!t||0<(n+"").length)},message:""},d.rules.min={validator:function(e,t){return A.isEmptyVal(e)||e>u.utils.unwrapObservable(t)},message:"Please enter a value greater than"},d.rules.max={validator:function(e,t){return A.isEmptyVal(e)||e<u.utils.unwrapObservable(t)},message:"Please enter a value less than"},d.rules.minLength={validator:function(e,t){return A.isEmptyVal(e)||e.length>=t},message:"Please enter at least {0} characters."},d.rules.maxLength={validator:function(e,t){return A.isEmptyVal(e)||e.length<=t},message:"Please enter no more than {0} characters."},d.rules.pattern={validator:function(e,t){return A.isEmptyVal(e)||null!=e.match(t)},message:"Please check this value."},d.rules.step={validator:function(e,t){return A.isEmptyVal(e)||100*e%(100*t)==0},message:"The value must increment by {0}"},d.rules.email={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e))},message:"Please enter a proper email address"},d.rules.date={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&!/Invalid|NaN/.test(new Date(e)))},message:"Please enter a proper date"},d.rules.dateISO={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e))},message:"Please enter a proper date"},d.rules.number={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e))},message:"Please enter a number"},d.rules.alphanumeric={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&/^[A-Za-z0-9]+$/.test(e))},message:"Please enter a number"},d.rules.iban={validator:function(e,t){return!t||(IBAN.isValid(e)||!e||""==e)},message:""},d.rules.digit={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&/^\d+$/.test(e))},message:"Please enter a digit"},d.rules.phoneUS={validator:function(e,t){return!t||"string"==typeof e&&(!!A.isEmptyVal(e)||(e=e.replace(/\s+/g,""),t&&9<e.length&&e.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)))},message:"Please specify a valid phone number"},d.rules.equal={validator:function(e,t){var n=t;return e===A.getValue(n)},message:"Values must equal"},d.rules.notEqual={validator:function(e,t){var n=t;return e!==A.getValue(n)},message:"Please choose another value."},d.rules.unique={validator:function(t,n){var e=A.getValue(n.collection),r=A.getValue(n.externalValue),i=0;return!t||!e||(u.utils.arrayFilter(u.utils.unwrapObservable(e),function(e){t===(n.valueAccessor?n.valueAccessor(e):e)&&i++}),i<(void 0!==r&&t!==r?1:2))},message:"Please make sure the value is unique."},d.rules.rate={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&/^\d*\,?\d*\.?\d*$/.test(e))},message:"Invalid Rate"},d.rules.amount={validator:function(e,t){return!t||(A.isEmptyVal(e)||t&&/^\d*\,?\d*\.?\d*$/.test(e))},message:"Invalid Amount"},d.rules.positiveInteger={validator:function(e,t){if(!t)return!0;var n=Math.floor(Number(e));return A.isEmptyVal(e)||n==e&&0<n},message:"Invalid positiveInteger"},d.rules.range={validator:function(e,t){return!t||(null==t.isBetween||t.isBetween?A.isEmptyVal(e)||e>t.min&&e<t.max:A.isEmptyVal(e)||e>t.min||e<t.max)},message:"Invalid Range"},d.rules.rangeInterval={validator:function(e,t){if(!t)return!0;var n=isStringType(e)&&""!==e?Globalize.parseFloat(e):e,r=n>t.minfar&&n<t.minnear,i=n>t.maxnear&&n<t.maxfar;return A.isEmptyVal(n)||r||i},message:"Invalid rangeinterval"},d.registerExtendersLocal(),u.bindingHandlers.validationCore={init:function(e,t,n,r,i){var o,a=A.getConfigOptions(e);if(a.parseInputAttributes&&(o=function(){u.validation.parseInputValidationAttributes(e,t)},window.setImmediate?window.setImmediate(o):window.setTimeout(o,0)),a.insertMessages&&A.isValidatable(t())){var s=u.validation.insertValidationMessage(e);a.messageTemplate?u.renderTemplate(a.messageTemplate,{field:t()},null,s,"replaceNode"):u.applyBindingsToNode(s,{validationMessage:t()})}a.writeInputAttributes&&A.isValidatable(t())&&u.validation.writeInputValidationAttributes(e,t),a.decorateElement&&A.isValidatable(t())&&u.applyBindingsToNode(e,{validationElement:t()})},update:function(e,t,n,r,i){}},o=u.bindingHandlers.value.init,a=u.bindingHandlers.textInput.init,u.bindingHandlers.value.init=function(e,t,n,r,i){return o(e,t,n),u.bindingHandlers.validationCore.init(e,t,n,r,i)},u.bindingHandlers.textInput.init=function(e,t,n,r,i){return a(e,t,n),u.bindingHandlers.validationCore.init(e,t,n,r,i)},u.bindingHandlers.validationMessage={update:function(e,t){var n,r,i=t(),o=A.getConfigOptions(e);u.utils.unwrapObservable(i);i.extend({validatable:!0}),n=i.isModified(),r=i.isValid();u.bindingHandlers.text.update(e,function(){return!o.messagesOnModified||n?r?null:i.error:null}),u.bindingHandlers.visible.update(e,function(){return!!n&&!r})}},u.bindingHandlers.validationElement={update:function(e,t){var n,r,i=t(),o=A.getConfigOptions(e);u.utils.unwrapObservable(i);i.extend({validatable:!0}),n=i.isModified(),r=i.isValid();u.bindingHandlers.css.update(e,function(){var e={},t=!!n&&!r;return o.decorateElement||(t=!1),e[o.errorElementClass]=t,e})}},u.bindingHandlers.validationOptions={init:function(e,t,n,r,i){var o=u.utils.unwrapObservable(t());if(o){var a=u.utils.extend({},l);u.utils.extend(a,o),A.setDomData(e,a)}}},u.extenders.validation=function(t,e){return u.utils.arrayForEach(A.isArray(e)?e:[e],function(e){u.validation.addAnonymousRule(t,e)}),t},u.extenders.validatable=function(e,t){if(t&&!A.isValidatable(e)){e.error=null,e.rules=u.observableArray(),e.isValidating=u.observable(!1),e.__valid__=u.observable(!0),e.isModified=u.observable(!1);var n=u.computed(function(){e(),e.rules();return u.validation.validateObservable(e),!0});e.isValid=u.computed(function(){return e.__valid__()});var r=e.subscribe(function(){e.isModified(!0)});e._disposeValidation=function(){e.isValid.dispose(),e.rules.removeAll(),e.isModified._subscriptions.change=[],e.isValidating._subscriptions.change=[],e.__valid__._subscriptions.change=[],r.dispose(),n.dispose(),delete e.rules,delete e.error,delete e.isValid,delete e.isValidating,delete e.__valid__,delete e.isModified}}else!1===t&&A.isValidatable(e)&&e._disposeValidation&&e._disposeValidation();return e},d.validateObservable=function(e){for(var t,n,r,i,o,a=0,s=e.rules(),l=s.length;a<l;a++)if(!(n=s[a]).condition||n.condition())if((t=u.validation.rules[n.rule]).async||n.async)p(e,t,n);else if(r=e,o=n,!(i=t).validator(r(),void 0===o.params||o.params)&&(r.error=u.validation.formatMessage(o.message||i.message,o.params),r.__valid__(!1),1))return!1;return e.error=null,e.__valid__(!0),!0},u.validatedObservable=function(e){if(!u.validation.utils.isObject(e))return u.observable(e).extend({validatable:!0});var t=u.observable(e);return t.errors=u.validation.group(e),t.isValid=u.computed(function(){return 0===t.errors().length}),t},d.localize=function(e){var t;for(t in e)u.validation.rules.hasOwnProperty(t)&&(u.validation.rules[t].message=e[t])},u.applyBindingsWithValidation=function(e,t,n){var r,i,o=arguments.length;2<o?(r=t,i=n):o<2?r=document.body:t.nodeType?r=t:i=t,u.validation.init(),i&&u.validation.utils.setDomData(r,i),u.applyBindings(e,t)};var f=u.applyBindings;u.applyBindings=function(e,t){u.validation.init(),f(e,t)},u.utils.extend(e,d)}),function(e,t){var r,w,b,C,n,l,a,c,p,A,d,k,U,f,h,T,I,F,i,x,_,M,u,S,m,P,Q,H,O,L,g,v;r=function(e){return new r.prototype.init(e)},void 0!==require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=r:e.Globalize=r,r.cultures={},r.prototype={constructor:r,init:function(e){return this.cultures=r.cultures,this.cultureSelector=e,this}},r.prototype.init.prototype=r.prototype,r.cultures.default={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},r.cultures.default.calendar=r.cultures.default.calendars.standard,r.cultures.en=r.cultures.default,r.cultureSelector="en",w=/^0x[a-f0-9]+$/i,b=/^[+\-]?infinity$/i,C=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,n=/^\s+|\s+$/g,l=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},c=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},s=2),"object"==typeof a||A(a)||(a={});s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(d(r)||(i=p(r)))?(o=i?(i=!1,n&&p(n)?n:[]):n&&d(n)?n:{},a[t]=c(u,o,r)):void 0!==r&&(a[t]=r));return a},p=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},A=function(e){return"[object Function]"===Object.prototype.toString.call(e)},d=function(e){return"[object Object]"===Object.prototype.toString.call(e)},k=function(e,t){return 0===e.indexOf(t)},U=function(e){return(e+"").replace(n,"")},f=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},h=function(e,t,n){var r;for(r=e.length;r<t;r+=1)e=n?"0"+e:e+"0";return e},T=function(e,t){for(var n=0,r=!1,i=0,o=e.length;i<o;i++){var a=e.charAt(i);switch(a){case"'":r?t.push("'"):n++,r=!1;break;case"\\":r&&t.push("\\"),r=!r;break;default:t.push(a),r=!1}}return n},I=function(e,t){t=t||"F";var n,r=e.patterns,i=t.length;if(1===i){if(!(n=r[t]))throw"Invalid date format string '"+t+"'.";t=n}else 2===i&&"%"===t.charAt(0)&&(t=t.charAt(1));return t},F=function(e,t,n){var r,i=n.calendar,o=i.convert;if(!t||!t.length||"i"===t){if(n&&n.name.length)if(o)r=F(e,i.patterns.F,n);else{var a=new Date(e.getTime()),s=_(e,i.eras);a.setFullYear(M(e,i,s)),r=a.toLocaleString()}else r=e.toString();return r}var l=i.eras,u="s"===t;t=I(i,t),r=[];var c,A,d,p,f=["0","00","000"],h=/([^d]|^)(d|dd)([^d]|$)/g,m=0,g=x();function v(e,t){var n,r=e+"";return 1<t&&r.length<t?(n=f[t-2]+r).substr(n.length-t,t):n=r}function y(e,t){if(p)return p[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}for(!u&&o&&(p=o.fromGregorian(e));;){var w=g.lastIndex,b=g.exec(t),C=t.slice(w,b?b.index:t.length);if(m+=T(C,r),!b)break;if(m%2)r.push(b[0]);else{var S=b[0],E=S.length;switch(S){case"ddd":case"dddd":var D=3===E?i.days.namesAbbr:i.days.names;r.push(D[e.getDay()]);break;case"d":case"dd":A=!0,r.push(v(y(e,2),E));break;case"MMM":case"MMMM":var B=y(e,1);r.push(i.monthsGenitive&&(A||d||(A=h.test(t),d=!0),A)?i.monthsGenitive[3===E?"namesAbbr":"names"][B]:i.months[3===E?"namesAbbr":"names"][B]);break;case"M":case"MM":r.push(v(y(e,1)+1,E));break;case"y":case"yy":case"yyyy":B=p?p[0]:M(e,i,_(e,l),u),E<4&&(B%=100),r.push(v(B,E));break;case"h":case"hh":0===(c=e.getHours()%12)&&(c=12),r.push(v(c,E));break;case"H":case"HH":r.push(v(e.getHours(),E));break;case"m":case"mm":r.push(v(e.getMinutes(),E));break;case"s":case"ss":r.push(v(e.getSeconds(),E));break;case"t":case"tt":B=e.getHours()<12?i.AM?i.AM[0]:" ":i.PM?i.PM[0]:" ",r.push(1===E?B.charAt(0):B);break;case"f":case"ff":case"fff":r.push(v(e.getMilliseconds(),3).substr(0,E));break;case"z":case"zz":c=e.getTimezoneOffset()/60,r.push((c<=0?"+":"-")+v(Math.floor(Math.abs(c)),E));break;case"zzz":c=e.getTimezoneOffset()/60,r.push((c<=0?"+":"-")+v(Math.floor(Math.abs(c)),2)+":"+v(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":i.eras&&r.push(i.eras[_(e,l)].name);break;case"/":r.push(i["/"]);break;default:throw"Invalid date format pattern '"+S+"'."}}}return r.join("")},m=function(e,t,n){var r=n.groupSizes,i=r[0],o=1,a=Math.pow(10,t),s=Math.round(e*a)/a;isFinite(s)||(s=e);var l=(e=s)+"",u="",c=l.split(/e/i),A=1<c.length?parseInt(c[1],10):0;l=(c=(l=c[0]).split("."))[0],u=1<c.length?c[1]:"",0<A?(l+=(u=h(u,A,!1)).slice(0,A),u=u.substr(A)):A<0&&(u=(l=h(l,1+(A=-A),!0)).slice(-A,l.length)+u,l=l.slice(0,-A)),u=0<t?n["."]+(u.length>t?u.slice(0,t):h(u,t)):"";for(var d=l.length-1,p=n[","],f="";0<=d;){if(0===i||d<i)return l.slice(0,d+1)+(f.length?p+f+u:u);f=l.slice(d-i+1,d+1)+(f.length?p+f:""),d-=i,o<r.length&&(i=r[o],o++)}return l.slice(0,d+1)+p+f+u},i=function(e,t,n){if(!isFinite(e))return e===1/0?n.numberFormat.positiveInfinity:e===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!t||"i"===t)return n.name.length?e.toLocaleString():e.toString();t=t||"D";var r,i=n.numberFormat,o=Math.abs(e),a=-1;1<t.length&&(a=parseInt(t.slice(1),10));var s,l=t.charAt(0).toUpperCase();switch(l){case"D":r="n",o=f(o),-1!==a&&(o=h(""+o,a,!0)),e<0&&(o="-"+o);break;case"N":s=i;case"C":s=s||i.currency;case"P":s=s||i.percent,r=e<0?s.pattern[0]:s.pattern[1]||"n",-1===a&&(a=s.decimals),o=m(o*("P"===l?100:1),a,s);break;default:throw"Bad number format specifier: "+l}for(var u=/n|\$|-|%/g,c="";;){var A=u.lastIndex,d=u.exec(r);if(c+=r.slice(A,d?d.index:r.length),!d)break;switch(d[0]){case"n":c+=o;break;case"$":c+=i.currency.symbol;break;case"-":/[1-9]/.test(o)&&(c+=i["-"]);break;case"%":c+=i.percent.symbol}}return c},x=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},_=function(e,t){if(!t)return 0;for(var n,r=e.getTime(),i=0,o=t.length;i<o;i++)if(null===(n=t[i].start)||n<=r)return i;return 0},M=function(e,t,n,r){var i=e.getFullYear();return!r&&t.eras&&(i-=t.eras[n].offset),i},P=function(e,t){if(t<100){var n=new Date,r=_(n),i=M(n,e,r),o=e.twoDigitYearMax;(o="string"==typeof o?(new Date).getFullYear()%100+parseInt(o,10):o)<(t+=i-i%100)&&(t-=100)}return t},Q=function(e,t,n){var r,i=e.days,o=e._upperDays;return o||(e._upperDays=o=[v(i.names),v(i.namesAbbr),v(i.namesShort)]),t=g(t),n?-1===(r=l(o[1],t))&&(r=l(o[2],t)):r=l(o[0],t),r},H=function(e,t,n){var r=e.months,i=e.monthsGenitive||e.months,o=e._upperMonths,a=e._upperMonthsGen;o||(e._upperMonths=o=[v(r.names),v(r.namesAbbr)],e._upperMonthsGen=a=[v(i.names),v(i.namesAbbr)]),t=g(t);var s=l(n?o[1]:o[0],t);return s<0&&(s=l(n?a[1]:a[0],t)),s},O=function(e,t){var n=e._parseRegExp;if(n){var r=n[t];if(r)return r}else e._parseRegExp=n={};for(var i,o=I(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),a=["^"],s=[],l=0,u=0,c=x();null!==(i=c.exec(o));){var A=o.slice(l,i.index);if(l=c.lastIndex,(u+=T(A,a))%2)a.push(i[0]);else{var d,p=i[0],f=p.length;switch(p){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":d="(\\D+)";break;case"tt":case"t":d="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":d="(\\d{"+f+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":d="(\\d\\d?)";break;case"zzz":d="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":d="([+-]?\\d\\d?)";break;case"/":d="(\\/)";break;default:throw"Invalid date format pattern '"+p+"'."}d&&a.push(d),s.push(i[0])}}T(o.slice(l),a),a.push("$");var h={regExp:a.join("").replace(/\s+/g,"\\s+"),groups:s};return n[t]=h},L=function(e,t,n){return e<t||n<e},g=function(e){return e.split("Â ").join(" ").toUpperCase()},v=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=g(e[n]);return t},u=function(e,t,n){e=U(e);var r=n.calendar,i=O(r,t),o=new RegExp(i.regExp).exec(e);if(null===o)return null;for(var a,s=i.groups,l=null,u=null,c=null,A=null,d=null,p=0,f=0,h=0,m=0,g=null,v=!1,y=0,w=s.length;y<w;y++){var b=o[y+1];if(b){var C=s[y],S=C.length,E=parseInt(b,10);switch(C){case"dd":case"d":if(L(A=E,1,31))return null;break;case"MMM":case"MMMM":if(c=H(r,b,3===S),L(c,0,11))return null;break;case"M":case"MM":if(L(c=E-1,0,11))return null;break;case"y":case"yy":case"yyyy":if(u=S<4?P(r,E):E,L(u,0,9999))return null;break;case"h":case"hh":if(12===(p=E)&&(p=0),L(p,0,11))return null;break;case"H":case"HH":if(L(p=E,0,23))return null;break;case"m":case"mm":if(L(f=E,0,59))return null;break;case"s":case"ss":if(L(h=E,0,59))return null;break;case"tt":case"t":if(!(v=r.PM&&(b===r.PM[0]||b===r.PM[1]||b===r.PM[2]))&&(!r.AM||b!==r.AM[0]&&b!==r.AM[1]&&b!==r.AM[2]))return null;break;case"f":case"ff":case"fff":if(m=E*Math.pow(10,3-S),L(m,0,999))return null;break;case"ddd":case"dddd":if(d=Q(r,b,3===S),L(d,0,6))return null;break;case"zzz":var D=b.split(/:/);if(2!==D.length)return null;if(a=parseInt(D[0],10),L(a,-12,13))return null;var B=parseInt(D[1],10);if(L(B,0,59))return null;g=60*a+(k(b,"-")?-B:B);break;case"z":case"zz":if(L(a=E,-12,13))return null;g=60*a;break;case"g":case"gg":var T=b;if(!T||!r.eras)return null;T=U(T.toLowerCase());for(var I=0,F=r.eras.length;I<F;I++)if(T===r.eras[I].name.toLowerCase()){l=I;break}if(null===l)return null}}}var x,_=new Date,M=r.convert;if(x=M?M.fromGregorian(_)[0]:_.getFullYear(),null===u?u=x:r.eras&&(u+=r.eras[l||0].offset),null===c&&(c=0),null===A&&(A=1),M){if(null===(_=M.toGregorian(u,c,A)))return null}else{if(_.setFullYear(u,c,A),_.getDate()!==A)return null;if(null!==d&&_.getDay()!==d)return null}if(v&&p<12&&(p+=12),_.setHours(p,f,h,m),null!==g){var N=_.getMinutes()-(g+_.getTimezoneOffset());_.setHours(_.getHours()+parseInt(N/60,10),N%60)}return _},S=function(e,t,n){var r,i=t["-"],o=t["+"];switch(n){case"n -":i=" "+i,o=" "+o;case"n-":a(e,i)?r=["-",e.substr(0,e.length-i.length)]:a(e,o)&&(r=["+",e.substr(0,e.length-o.length)]);break;case"- n":i+=" ",o+=" ";case"-n":k(e,i)?r=["-",e.substr(i.length)]:k(e,o)&&(r=["+",e.substr(o.length)]);break;case"(n)":k(e,"(")&&a(e,")")&&(r=["-",e.substr(1,e.length-2)])}return r||["",e]},r.prototype.findClosestCulture=function(e){return r.findClosestCulture.call(this,e)},r.prototype.format=function(e,t,n){return r.format.call(this,e,t,n)},r.prototype.localize=function(e,t){return r.localize.call(this,e,t)},r.prototype.parseInt=function(e,t,n){return r.parseInt.call(this,e,t,n)},r.prototype.parseFloat=function(e,t,n){return r.parseFloat.call(this,e,t,n)},r.prototype.culture=function(e){return r.culture.call(this,e)},r.addCultureInfo=function(e,t,n){var r={},i=!1;r="string"!=typeof e?(n=e,e=this.culture().name,this.cultures[e]):"string"!=typeof t?(n=t,i=null==this.cultures[e],this.cultures[e]||this.cultures.default):(i=!0,this.cultures[t]),this.cultures[e]=c(!0,{},r,n),i&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},r.findClosestCulture=function(e){var t;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures.default;if("string"==typeof e&&(e=e.split(",")),p(e)){var n,r,i=this.cultures,o=e,a=o.length,s=[];for(r=0;r<a;r++){var l,u=(e=U(o[r])).split(";");n=U(u[0]),l=1===u.length?1:0===(e=U(u[1])).indexOf("q=")?(e=e.substr(2),l=parseFloat(e),isNaN(l)?0:l):1,s.push({lang:n,pri:l})}for(s.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0}),r=0;r<a;r++)if(t=i[n=s[r].lang])return t;for(r=0;r<a;r++)for(n=s[r].lang;;){var c=n.lastIndexOf("-");if(-1===c)break;if(t=i[n=n.substr(0,c)])return t}for(r=0;r<a;r++)for(var A in n=s[r].lang,i){var d=i[A];if(d.language===n)return d}}else if("object"==typeof e)return e;return t||null},r.format=function(e,t,n){var r=this.findClosestCulture(n);return e instanceof Date?e=F(e,t,r):"number"==typeof e&&(e=i(e,t,r)),e},r.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures.default.messages[e]},r.parseDate=function(e,t,n){var r,i,o;if(n=this.findClosestCulture(n),t){if("string"==typeof t&&(t=[t]),t.length)for(var a=0,s=t.length;a<s;a++){var l=t[a];if(l&&(r=u(e,l,n)))break}}else for(i in o=n.calendar.patterns)if(r=u(e,o[i],n))break;return r||null},r.parseInt=function(e,t,n){return f(r.parseFloat(e,t,n))},r.parseFloat=function(e,t,n){"number"!=typeof t&&(n=t,t=10);var r=this.findClosestCulture(n),i=NaN,o=r.numberFormat;if(-1<e.indexOf(r.numberFormat.currency.symbol)&&(e=(e=e.replace(r.numberFormat.currency.symbol,"")).replace(r.numberFormat.currency["."],r.numberFormat["."])),-1<e.indexOf(r.numberFormat.percent.symbol)&&(e=e.replace(r.numberFormat.percent.symbol,"")),e=e.replace(/ /g,""),b.test(e))i=parseFloat(e);else if(!t&&w.test(e))i=parseInt(e,16);else{var a=S(e,o,o.pattern[0]),s=a[0],l=a[1];""===s&&"(n)"!==o.pattern[0]&&(s=(a=S(e,o,"(n)"))[0],l=a[1]),""===s&&"-n"!==o.pattern[0]&&(s=(a=S(e,o,"-n"))[0],l=a[1]),s=s||"+";var u,c,A=l.indexOf("e");A<0&&(A=l.indexOf("E")),u=A<0?(c=l,null):(c=l.substr(0,A),l.substr(A+1));var d,p,f=o["."],h=c.indexOf(f);p=h<0?(d=c,null):(d=c.substr(0,h),c.substr(h+f.length));var m=o[","];d=d.split(m).join("");var g=m.replace(/\u00A0/g," ");m!==g&&(d=d.split(g).join(""));var v=s+d;if(null!==p&&(v+="."+p),null!==u){var y=S(u,o,"-n");v+="e"+(y[0]||"+")+y[1]}C.test(v)&&(i=parseFloat(v))}return i},r.culture=function(e){return void 0!==e&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures.default}}(this),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.latinize=t()}(this,function(){function t(e){return"string"==typeof e?e.replace(/[^A-Za-z0-9]/g,function(e){return t.characters[e]||e}):e}return t.characters={"Ã":"A","Ä":"A","áº®":"A","áº¶":"A","áº°":"A","áº²":"A","áº´":"A","Ç":"A","Ã":"A","áº¤":"A","áº¬":"A","áº¦":"A","áº¨":"A","áºª":"A","Ã":"A","Ç":"A","È¦":"A","Ç ":"A","áº ":"A","È":"A","Ã":"A","áº¢":"A","È":"A","Ä":"A","Ä":"A","Ã":"A","Çº":"A","á¸":"A","Èº":"A","Ã":"A","ê²":"AA","Ã":"AE","Ç¼":"AE","Ç¢":"AE","ê´":"AO","ê¶":"AU","ê¸":"AV","êº":"AV","ê¼":"AY","á¸":"B","á¸":"B","Æ":"B","á¸":"B","É":"B","Æ":"B","Ä":"C","Ä":"C","Ã":"C","á¸":"C","Ä":"C","Ä":"C","Æ":"C","È»":"C","Ä":"D","á¸":"D","á¸":"D","á¸":"D","á¸":"D","Æ":"D","á¸":"D","Ç²":"D","Ç":"D","Ä":"D","Æ":"D","Ç±":"DZ","Ç":"DZ","Ã":"E","Ä":"E","Ä":"E","È¨":"E","á¸":"E","Ã":"E","áº¾":"E","á»":"E","á»":"E","á»":"E","á»":"E","á¸":"E","Ã":"E","Ä":"E","áº¸":"E","È":"E","Ã":"E","áºº":"E","È":"E","Ä":"E","á¸":"E","á¸":"E","Ä":"E","É":"E","áº¼":"E","á¸":"E","êª":"ET","á¸":"F","Æ":"F","Ç´":"G","Ä":"G","Ç¦":"G","Ä¢":"G","Ä":"G","Ä ":"G","Æ":"G","á¸ ":"G","Ç¤":"G","á¸ª":"H","È":"H","á¸¨":"H","Ä¤":"H","â±§":"H","á¸¦":"H","á¸¢":"H","á¸¤":"H","Ä¦":"H","Ã":"I","Ä¬":"I","Ç":"I","Ã":"I","Ã":"I","á¸®":"I","Ä°":"I","á»":"I","È":"I","Ã":"I","á»":"I","È":"I","Äª":"I","Ä®":"I","Æ":"I","Ä¨":"I","á¸¬":"I","ê¹":"D","ê»":"F","ê½":"G","ê":"R","ê":"S","ê":"T","ê¬":"IS","Ä´":"J","É":"J","á¸°":"K","Ç¨":"K","Ä¶":"K","â±©":"K","ê":"K","á¸²":"K","Æ":"K","á¸´":"K","ê":"K","ê":"K","Ä¹":"L","È½":"L","Ä½":"L","Ä»":"L","á¸¼":"L","á¸¶":"L","á¸¸":"L","â± ":"L","ê":"L","á¸º":"L","Ä¿":"L","â±¢":"L","Ç":"L","Å":"L","Ç":"LJ","á¸¾":"M","á¹":"M","á¹":"M","â±®":"M","Å":"N","Å":"N","Å":"N","á¹":"N","á¹":"N","á¹":"N","Ç¸":"N","Æ":"N","á¹":"N","È ":"N","Ç":"N","Ã":"N","Ç":"NJ","Ã":"O","Å":"O","Ç":"O","Ã":"O","á»":"O","á»":"O","á»":"O","á»":"O","á»":"O","Ã":"O","Èª":"O","È®":"O","È°":"O","á»":"O","Å":"O","È":"O","Ã":"O","á»":"O","Æ ":"O","á»":"O","á»¢":"O","á»":"O","á»":"O","á» ":"O","È":"O","ê":"O","ê":"O","Å":"O","á¹":"O","á¹":"O","Æ":"O","Çª":"O","Ç¬":"O","Ã":"O","Ç¾":"O","Ã":"O","á¹":"O","á¹":"O","È¬":"O","Æ¢":"OI","ê":"OO","Æ":"E","Æ":"O","È¢":"OU","á¹":"P","á¹":"P","ê":"P","Æ¤":"P","ê":"P","â±£":"P","ê":"P","ê":"Q","ê":"Q","Å":"R","Å":"R","Å":"R","á¹":"R","á¹":"R","á¹":"R","È":"R","È":"R","á¹":"R","É":"R","â±¤":"R","ê¾":"C","Æ":"E","Å":"S","á¹¤":"S","Å ":"S","á¹¦":"S","Å":"S","Å":"S","È":"S","á¹ ":"S","á¹¢":"S","á¹¨":"S","Ã":"ss","Å¤":"T","Å¢":"T","á¹°":"T","È":"T","È¾":"T","á¹ª":"T","á¹¬":"T","Æ¬":"T","á¹®":"T","Æ®":"T","Å¦":"T","â±¯":"A","ê":"L","Æ":"M","É":"V","ê¨":"TZ","Ã":"U","Å¬":"U","Ç":"U","Ã":"U","á¹¶":"U","Ã":"U","Ç":"U","Ç":"U","Ç":"U","Ç":"U","á¹²":"U","á»¤":"U","Å°":"U","È":"U","Ã":"U","á»¦":"U","Æ¯":"U","á»¨":"U","á»°":"U","á»ª":"U","á»¬":"U","á»®":"U","È":"U","Åª":"U","á¹º":"U","Å²":"U","Å®":"U","Å¨":"U","á¹¸":"U","á¹´":"U","ê":"V","á¹¾":"V","Æ²":"V","á¹¼":"V","ê ":"VY","áº":"W","Å´":"W","áº":"W","áº":"W","áº":"W","áº":"W","â±²":"W","áº":"X","áº":"X","Ã":"Y","Å¶":"Y","Å¸":"Y","áº":"Y","á»´":"Y","á»²":"Y","Æ³":"Y","á»¶":"Y","á»¾":"Y","È²":"Y","É":"Y","á»¸":"Y","Å¹":"Z","Å½":"Z","áº":"Z","â±«":"Z","Å»":"Z","áº":"Z","È¤":"Z","áº":"Z","Æµ":"Z","Ä²":"IJ","Å":"OE","á´":"A","á´":"AE","Ê":"B","á´":"B","á´":"C","á´":"D","á´":"E","ê°":"F","É¢":"G","Ê":"G","Ê":"H","Éª":"I","Ê":"R","á´":"J","á´":"K","Ê":"L","á´":"L","á´":"M","É´":"N","á´":"O","É¶":"OE","á´":"O","á´":"OU","á´":"P","Ê":"R","á´":"N","á´":"R","ê±":"S","á´":"T","â±»":"E","á´":"R","á´":"U","á´ ":"V","á´¡":"W","Ê":"Y","á´¢":"Z","Ã¡":"a","Ä":"a","áº¯":"a","áº·":"a","áº±":"a","áº³":"a","áºµ":"a","Ç":"a","Ã¢":"a","áº¥":"a","áº­":"a","áº§":"a","áº©":"a","áº«":"a","Ã¤":"a","Ç":"a","È§":"a","Ç¡":"a","áº¡":"a","È":"a","Ã ":"a","áº£":"a","È":"a","Ä":"a","Ä":"a","á¶":"a","áº":"a","Ã¥":"a","Ç»":"a","á¸":"a","â±¥":"a","Ã£":"a","ê³":"aa","Ã¦":"ae","Ç½":"ae","Ç£":"ae","êµ":"ao","ê·":"au","ê¹":"av","ê»":"av","ê½":"ay","á¸":"b","á¸":"b","É":"b","á¸":"b","áµ¬":"b","á¶":"b","Æ":"b","Æ":"b","Éµ":"o","Ä":"c","Ä":"c","Ã§":"c","á¸":"c","Ä":"c","É":"c","Ä":"c","Æ":"c","È¼":"c","Ä":"d","á¸":"d","á¸":"d","È¡":"d","á¸":"d","á¸":"d","É":"d","á¶":"d","á¸":"d","áµ­":"d","á¶":"d","Ä":"d","É":"d","Æ":"d","Ä±":"i","È·":"j","É":"j","Ê":"j","Ç³":"dz","Ç":"dz","Ã©":"e","Ä":"e","Ä":"e","È©":"e","á¸":"e","Ãª":"e","áº¿":"e","á»":"e","á»":"e","á»":"e","á»":"e","á¸":"e","Ã«":"e","Ä":"e","áº¹":"e","È":"e","Ã¨":"e","áº»":"e","È":"e","Ä":"e","á¸":"e","á¸":"e","â±¸":"e","Ä":"e","á¶":"e","É":"e","áº½":"e","á¸":"e","ê«":"et","á¸":"f","Æ":"f","áµ®":"f","á¶":"f","Çµ":"g","Ä":"g","Ç§":"g","Ä£":"g","Ä":"g","Ä¡":"g","É ":"g","á¸¡":"g","á¶":"g","Ç¥":"g","á¸«":"h","È":"h","á¸©":"h","Ä¥":"h","â±¨":"h","á¸§":"h","á¸£":"h","á¸¥":"h","É¦":"h","áº":"h","Ä§":"h","Æ":"hv","Ã­":"i","Ä­":"i","Ç":"i","Ã®":"i","Ã¯":"i","á¸¯":"i","á»":"i","È":"i","Ã¬":"i","á»":"i","È":"i","Ä«":"i","Ä¯":"i","á¶":"i","É¨":"i","Ä©":"i","á¸­":"i","êº":"d","ê¼":"f","áµ¹":"g","ê":"r","ê":"s","ê":"t","ê­":"is","Ç°":"j","Äµ":"j","Ê":"j","É":"j","á¸±":"k","Ç©":"k","Ä·":"k","â±ª":"k","ê":"k","á¸³":"k","Æ":"k","á¸µ":"k","á¶":"k","ê":"k","ê":"k","Äº":"l","Æ":"l","É¬":"l","Ä¾":"l","Ä¼":"l","á¸½":"l","È´":"l","á¸·":"l","á¸¹":"l","â±¡":"l","ê":"l","á¸»":"l","Å":"l","É«":"l","á¶":"l","É­":"l","Å":"l","Ç":"lj","Å¿":"s","áº":"s","áº":"s","áº":"s","á¸¿":"m","á¹":"m","á¹":"m","É±":"m","áµ¯":"m","á¶":"m","Å":"n","Å":"n","Å":"n","á¹":"n","Èµ":"n","á¹":"n","á¹":"n","Ç¹":"n","É²":"n","á¹":"n","Æ":"n","áµ°":"n","á¶":"n","É³":"n","Ã±":"n","Ç":"nj","Ã³":"o","Å":"o","Ç":"o","Ã´":"o","á»":"o","á»":"o","á»":"o","á»":"o","á»":"o","Ã¶":"o","È«":"o","È¯":"o","È±":"o","á»":"o","Å":"o","È":"o","Ã²":"o","á»":"o","Æ¡":"o","á»":"o","á»£":"o","á»":"o","á»":"o","á»¡":"o","È":"o","ê":"o","ê":"o","â±º":"o","Å":"o","á¹":"o","á¹":"o","Ç«":"o","Ç­":"o","Ã¸":"o","Ç¿":"o","Ãµ":"o","á¹":"o","á¹":"o","È­":"o","Æ£":"oi","ê":"oo","É":"e","á¶":"e","É":"o","á¶":"o","È£":"ou","á¹":"p","á¹":"p","ê":"p","Æ¥":"p","áµ±":"p","á¶":"p","ê":"p","áµ½":"p","ê":"p","ê":"q","Ê ":"q","É":"q","ê":"q","Å":"r","Å":"r","Å":"r","á¹":"r","á¹":"r","á¹":"r","È":"r","É¾":"r","áµ³":"r","È":"r","á¹":"r","É¼":"r","áµ²":"r","á¶":"r","É":"r","É½":"r","â":"c","ê¿":"c","É":"e","É¿":"r","Å":"s","á¹¥":"s","Å¡":"s","á¹§":"s","Å":"s","Å":"s","È":"s","á¹¡":"s","á¹£":"s","á¹©":"s","Ê":"s","áµ´":"s","á¶":"s","È¿":"s","É¡":"g","á´":"o","á´":"o","á´":"u","Å¥":"t","Å£":"t","á¹±":"t","È":"t","È¶":"t","áº":"t","â±¦":"t","á¹«":"t","á¹­":"t","Æ­":"t","á¹¯":"t","áµµ":"t","Æ«":"t","Ê":"t","Å§":"t","áµº":"th","É":"a","á´":"ae","Ç":"e","áµ·":"g","É¥":"h","Ê®":"h","Ê¯":"h","á´":"i","Ê":"k","ê":"l","É¯":"m","É°":"m","á´":"oe","É¹":"r","É»":"r","Éº":"r","â±¹":"r","Ê":"t","Ê":"v","Ê":"w","Ê":"y","ê©":"tz","Ãº":"u","Å­":"u","Ç":"u","Ã»":"u","á¹·":"u","Ã¼":"u","Ç":"u","Ç":"u","Ç":"u","Ç":"u","á¹³":"u","á»¥":"u","Å±":"u","È":"u","Ã¹":"u","á»§":"u","Æ°":"u","á»©":"u","á»±":"u","á»«":"u","á»­":"u","á»¯":"u","È":"u","Å«":"u","á¹»":"u","Å³":"u","á¶":"u","Å¯":"u","Å©":"u","á¹¹":"u","á¹µ":"u","áµ«":"ue","ê¸":"um","â±´":"v","ê":"v","á¹¿":"v","Ê":"v","á¶":"v","â±±":"v","á¹½":"v","ê¡":"vy","áº":"w","Åµ":"w","áº":"w","áº":"w","áº":"w","áº":"w","â±³":"w","áº":"w","áº":"x","áº":"x","á¶":"x","Ã½":"y","Å·":"y","Ã¿":"y","áº":"y","á»µ":"y","á»³":"y","Æ´":"y","á»·":"y","á»¿":"y","È³":"y","áº":"y","É":"y","á»¹":"y","Åº":"z","Å¾":"z","áº":"z","Ê":"z","â±¬":"z","Å¼":"z","áº":"z","È¥":"z","áº":"z","áµ¶":"z","á¶":"z","Ê":"z","Æ¶":"z","É":"z","ï¬":"ff","ï¬":"ffi","ï¬":"ffl","ï¬":"fi","ï¬":"fl","Ä³":"ij","Å":"oe","ï¬":"st","â":"a","â":"e","áµ¢":"i","â±¼":"j","â":"o","áµ£":"r","áµ¤":"u","áµ¥":"v","â":"x","Ð":"YO","Ð":"I","Ð¦":"TS","Ð£":"U","Ð":"K","Ð":"E","Ð":"N","Ð":"G","Ð¨":"SH","Ð©":"SCH","Ð":"Z","Ð¥":"H","Ðª":"'","Ñ":"yo","Ð¹":"i","Ñ":"ts","Ñ":"u","Ðº":"k","Ðµ":"e","Ð½":"n","Ð³":"g","Ñ":"sh","Ñ":"sch","Ð·":"z","Ñ":"h","Ñ":"'","Ð¤":"F","Ð«":"I","Ð":"V","Ð":"a","Ð":"P","Ð ":"R","Ð":"O","Ð":"L","Ð":"D","Ð":"ZH","Ð­":"E","Ñ":"f","Ñ":"i","Ð²":"v","Ð°":"a","Ð¿":"p","Ñ":"r","Ð¾":"o","Ð»":"l","Ð´":"d","Ð¶":"zh","Ñ":"e","Ð¯":"Ya","Ð§":"CH","Ð¡":"S","Ð":"M","Ð":"I","Ð¢":"T","Ð¬":"'","Ð":"B","Ð®":"YU","Ñ":"ya","Ñ":"ch","Ñ":"s","Ð¼":"m","Ð¸":"i","Ñ":"t","Ñ":"'","Ð±":"b","Ñ":"yu"},t}),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PouchDB=e()}(function(){return function o(a,s,l){function u(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[t]={exports:{}};a[t][0].call(i.exports,function(e){return u(a[t][1][e]||e)},i,i.exports,o,a,s,l)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,t,n){"use strict";t.exports=function(r){return function(){var e=arguments.length;if(e){for(var t=[],n=-1;++n<e;)t[n]=arguments[n];return r.call(this,t)}return r.call(this,[])}}},{}],2:[function(n,r,o){(function(t){function e(){var e;try{e=o.storage.debug}catch(e){}return!e&&void 0!==t&&"env"in t&&(e=t.env.DEBUG),e}(o=r.exports=n(3)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},o.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+o.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(i=++r)}),e.splice(i,0,n)}},o.save=function(e){try{null==e?o.storage.removeItem("debug"):o.storage.debug=e}catch(e){}},o.load=e,o.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},o.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),o.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},o.enable(e())}).call(this,n(9))},{3:3,9:9}],3:[function(e,t,l){function n(e){var r;function s(){if(s.enabled){var i=s,e=+new Date,t=e-(r||e);i.diff=t,i.prev=r,i.curr=e,r=e;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=l.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=l.formatters[t];if("function"==typeof n){var r=o[a];e=n.call(i,r),o.splice(a,1),a--}return e}),l.formatArgs.call(i,o),(s.log||l.log||console.log.bind(console)).apply(i,o)}}return s.namespace=e,s.enabled=l.enabled(e),s.useColors=l.useColors(),s.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return l.colors[Math.abs(n)%l.colors.length]}(e),s.destroy=i,"function"==typeof l.init&&l.init(s),l.instances.push(s),s}function i(){var e=l.instances.indexOf(this);return-1!==e&&(l.instances.splice(e,1),!0)}(l=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},l.disable=function(){l.enable("")},l.enable=function(e){var t;l.save(e),l.names=[],l.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?l.skips.push(new RegExp("^"+e.substr(1)+"$")):l.names.push(new RegExp("^"+e+"$")));for(t=0;t<l.instances.length;t++){var i=l.instances[t];i.enabled=l.enabled(i.namespace)}},l.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=l.skips.length;t<n;t++)if(l.skips[t].test(e))return!1;for(t=0,n=l.names.length;t<n;t++)if(l.names[t].test(e))return!0;return!1},l.humanize=e(8),l.instances=[],l.names=[],l.skips=[],l.formatters={}},{8:8}],4:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function l(e){return"function"==typeof e}function u(e){return"object"==typeof e&&null!==e}function c(e){return void 0===e}((t.exports=r).EventEmitter=r).prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,i,o,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(c(n=this._events[e]))return!1;if(l(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(u(n))for(i=Array.prototype.slice.call(arguments,1),r=(a=n.slice()).length,o=0;o<r;o++)a[o].apply(this,i);return!0},r.prototype.on=r.prototype.addListener=function(e,t){var n;if(!l(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,l(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(n=c(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.once=function(e,t){if(!l(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var n,r,i,o;if(!l(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||l(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(u(n)){for(o=i;0<o--;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(l(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?l(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(l(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],5:[function(e,c,t){(function(t){"use strict";var n,r,e=t.MutationObserver||t.WebKitMutationObserver;if(e){var i=0,o=new e(u),a=t.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=i=++i%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var s=new t.MessageChannel;s.port1.onmessage=u,n=function(){s.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}c.exports=function(e){1!==l.push(e)||r||n()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],7:[function(e,t,n){"use strict";var i=e(5);function u(){}var c={},o=["REJECTED"],a=["FULFILLED"],r=["PENDING"];function s(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,e!==u&&p(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function A(t,n,r){i(function(){var e;try{e=n(r)}catch(e){return c.reject(t,e)}e===t?c.reject(t,new TypeError("Cannot resolve promise with itself")):c.resolve(t,e)})}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,c.reject(t,e))}function i(e){n||(n=!0,c.resolve(t,e))}var o=f(function(){e(i,r)});"error"===o.status&&r(o.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=s).prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(u);return this.state!==r?A(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){c.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){A(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){c.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){A(this.promise,this.onRejected,e)},c.resolve=function(e,t){var n=f(d,t);if("error"===n.status)return c.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},c.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},s.resolve=function(e){return e instanceof this?e:c.resolve(new this(u),e)},s.reject=function(e){var t=new this(u);return c.reject(t,e)},s.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var o=new Array(r),a=0,t=-1,s=new this(u);++t<r;)l(e[t],t);return s;function l(e,t){n.resolve(e).then(function(e){o[t]=e,++a!==r||i||(i=!0,c.resolve(s,o))},function(e){i||(i=!0,c.reject(s,e))})}},s.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r,i=-1,o=new this(u);++i<t;)r=e[i],this.resolve(r).then(function(e){n||(n=!0,c.resolve(o,e))},function(e){n||(n=!0,c.reject(o,e))});return o}},{5:5}],8:[function(e,t,n){function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){t=t||{};var n,r,i=typeof e;if("string"===i&&0<e.length)return function(e){if(!(100<(e=String(e)).length)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===i&&!1===isNaN(e))return t.long?o(n=e,864e5,"day")||o(n,36e5,"hour")||o(n,6e4,"minute")||o(n,1e3,"second")||n+" ms":864e5<=(r=e)?Math.round(r/864e5)+"d":36e5<=r?Math.round(r/36e5)+"h":6e4<=r?Math.round(r/6e4)+"m":1e3<=r?Math.round(r/1e3)+"s":r+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],9:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var u,c=[],A=!1,d=-1;function p(){A&&u&&(A=!1,u.length?c=u.concat(c):d=-1,c.length&&f())}function f(){if(!A){var e=l(p);A=!0;for(var t=c.length;t;){for(u=c,c=[];++d<t;)u&&u[d].run();d=-1,t=c.length}u=null,A=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||A||l(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],10:[function(e,n,r){!function(e){if("object"==typeof r)n.exports=e();else{var t;try{t=window}catch(e){t=self}t.SparkMD5=e()}}(function(c){"use strict";var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function u(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function A(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function d(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var t,n,r,i,o,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)u(l,A(e.substring(t-64,t)));for(n=(e=e.substring(t-64)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(u(l,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,u(l,r),l}function n(e){var t,n="";for(t=0;t<4;t+=1)n+=r[e>>8*t+4&15]+r[e>>8*t&15];return n}function a(e){var t;for(t=0;t<e.length;t+=1)e[t]=n(e[t]);return e.join("")}function o(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function s(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function l(){this.reset()}return a(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function u(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(e,t){var n,r,i,o,a=this.byteLength,s=u(e,a),l=a;return t!==c&&(l=u(t,a)),l<s?new ArrayBuffer(0):(n=l-s,r=new ArrayBuffer(n),i=new Uint8Array(r),o=new Uint8Array(this,s,n),i.set(o),r)}}(),l.prototype.append=function(e){return this.appendBinary(o(e)),this},l.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)u(this._hash,A(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},l.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=s(n)),this.reset(),n},l.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},l.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},l.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},l.prototype._finish=function(e,t){var n,r,i,o=t;if(e[o>>2]|=128<<(o%4<<3),55<o)for(u(this._hash,e),o=0;o<16;o+=1)e[o]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,u(this._hash,e)},l.hash=function(e,t){return l.hashBinary(o(e),t)},l.hashBinary=function(e,t){var n=a(i(e));return t?s(n):n},(l.ArrayBuffer=function(){this.reset()}).prototype.append=function(e){var t,n,r,i,o=(n=this._buff.buffer,r=e,!0,(i=new Uint8Array(n.byteLength+r.byteLength)).set(new Uint8Array(n)),i.set(new Uint8Array(r),n.byteLength),i),a=o.length;for(this._length+=e.byteLength,t=64;t<=a;t+=64)u(this._hash,d(o.subarray(t-64,t)));return this._buff=t-64<a?new Uint8Array(o.buffer.slice(t-64)):new Uint8Array(0),this},l.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=a(this._hash),e&&(n=s(n)),this.reset(),n},l.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},l.ArrayBuffer.prototype.getState=function(){var e,t=l.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},l.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return o}(e.buff),l.prototype.setState.call(this,e)},l.ArrayBuffer.prototype.destroy=l.prototype.destroy,l.ArrayBuffer.prototype._finish=l.prototype._finish,l.ArrayBuffer.hash=function(e,t){var n=a(function(e){var t,n,r,i,o,a,s=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)u(l,d(e.subarray(t-64,t)));for(n=(e=t-64<s?e.subarray(t-64):new Uint8Array(0)).length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),55<t)for(u(l,r),t=0;t<16;t+=1)r[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,u(l,r),l}(new Uint8Array(e)));return t?s(n):n},l})},{}],11:[function(e,t,n){var r=e(14),i=e(15),o=i;o.v1=r,o.v4=i,t.exports=o},{14:14,15:15}],12:[function(e,t,n){for(var i=[],r=0;r<256;++r)i[r]=(r+256).toString(16).substr(1);t.exports=function(e,t){var n=t||0,r=i;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}},{}],13:[function(e,t,n){var r="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(r){var i=new Uint8Array(16);t.exports=function(){return r(i),i}}else{var o=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},{}],14:[function(e,t,n){var f,h,m=e(13),g=e(12),v=0,y=0;t.exports=function(e,t,n){var r=t&&n||0,i=t||[],o=(e=e||{}).node||f,a=void 0!==e.clockseq?e.clockseq:h;if(null==o||null==a){var s=m();null==o&&(o=f=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=h=16383&(s[6]<<8|s[7]))}var l=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:y+1,c=l-v+(u-y)/1e4;if(c<0&&void 0===e.clockseq&&(a=a+1&16383),(c<0||v<l)&&void 0===e.nsecs&&(u=0),1e4<=u)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=l,h=a;var A=(1e4*(268435455&(l+=122192928e5))+(y=u))%4294967296;i[r++]=A>>>24&255,i[r++]=A>>>16&255,i[r++]=A>>>8&255,i[r++]=255&A;var d=l/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=255&d,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var p=0;p<6;++p)i[r+p]=o[p];return t||g(i)}},{12:12,13:13}],15:[function(e,t,n){var a=e(13),s=e(12);t.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||s(i)}},{12:12,13:13}],16:[function(e,t,n){"use strict";function p(e,t,n){var r=n[n.length-1];e===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;Array.isArray(i)?i.push(e):o===t.length-2?i[t.pop()]=e:t.push(e)}n.stringify=function(e){var t=[];t.push({obj:e});for(var n,r,i,o,a,s,l,u,c,A,d="";n=t.pop();)if(r=n.obj,d+=n.prefix||"",i=n.val||"")d+=i;else if("object"!=typeof r)d+=void 0===r?null:JSON.stringify(r);else if(null===r)d+="null";else if(Array.isArray(r)){for(t.push({val:"]"}),o=r.length-1;0<=o;o--)a=0===o?"":",",t.push({obj:r[o],prefix:a});t.push({val:"["})}else{for(l in s=[],r)r.hasOwnProperty(l)&&s.push(l);for(t.push({val:"}"}),o=s.length-1;0<=o;o--)c=r[u=s[o]],A=0<o?",":"",A+=JSON.stringify(u)+":",t.push({obj:c,prefix:A});t.push({val:"{"})}return d},n.parse=function(e){for(var t,n,r,i,o,a,s,l,u,c=[],A=[],d=0;;)if("}"!==(t=e[d++])&&"]"!==t&&void 0!==t)switch(t){case" ":case"\t":case"\n":case":":case",":break;case"n":d+=3,p(null,c,A);break;case"t":d+=3,p(!0,c,A);break;case"f":d+=4,p(!1,c,A);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",d--;;){if(r=e[d++],!/[\d\.\-e\+]/.test(r)){d--;break}n+=r}p(parseFloat(n),c,A);break;case'"':for(i="",o=void 0,a=0;'"'!==(s=e[d++])||"\\"===o&&a%2==1;)i+=s,"\\"===(o=s)?a++:a=0;p(JSON.parse('"'+i+'"'),c,A);break;case"[":l={element:[],index:c.length},c.push(l.element),A.push(l);break;case"{":u={element:{},index:c.length},c.push(u.element),A.push(u);break;default:throw new Error("unexpectedly reached end of input: "+t)}else{if(1===c.length)return c.pop();p(c.pop(),c,A)}}},{}],17:[function(Vr,qr,e){(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var n=t(Vr(7)),C=t(Vr(1)),S=t(Vr(5)),s=Vr(4),r=t(Vr(6)),i=t(Vr(11)),o=t(Vr(2)),d=t(Vr(10)),a=t(Vr(16)),H="function"==typeof Promise?Promise:n;var E,F,l=Function.prototype.toString,u=l.call(Object);function O(e){var t,n,r,i;if(!e||"object"!=typeof e)return e;if(Array.isArray(e)){for(t=[],n=0,r=e.length;n<r;n++)t[n]=O(e[n]);return t}if(e instanceof Date)return e.toISOString();if(i=e,"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer||"undefined"!=typeof Blob&&i instanceof Blob)return function(e){if(e instanceof ArrayBuffer)return function(e){if("function"==typeof e.slice)return e.slice(0);var t=new ArrayBuffer(e.byteLength),n=new Uint8Array(t),r=new Uint8Array(e);return n.set(r),t}(e);var t=e.size,n=e.type;return"function"==typeof e.slice?e.slice(0,t,n):e.webkitSlice(0,t,n)}(e);if(!function(e){var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}(e))return e;for(n in t={},e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=O(e[n]);void 0!==o&&(t[n]=o)}return t}function c(t){var n=!1;return C(function(e){if(n)throw new Error("once called more than once");n=!0,t.apply(this,e)})}function D(a){return C(function(i){var o=this,t="function"==typeof(i=O(i))[i.length-1]&&i.pop(),e=new H(function(n,r){var e;try{var t=c(function(e,t){e?r(e):n(t)});i.push(t),(e=a.apply(o,i))&&"function"==typeof e.then&&n(e)}catch(e){r(e)}});return t&&e.then(function(e){t(null,e)},t),e})}function A(o,e){return D(C(function(r){if(this._closed)return H.reject(new Error("database is closed"));if(this._destroyed)return H.reject(new Error("database is destroyed"));var i=this;return function(r,i,e){if(r.constructor.listeners("debug").length){for(var t=["api",r.name,i],n=0;n<e.length-1;n++)t.push(e[n]);r.constructor.emit("debug",t);var o=e[e.length-1];e[e.length-1]=function(e,t){var n=["api",r.name,i];n=n.concat(e?["error",e]:["success",t]),r.constructor.emit("debug",n),o(e,t)}}}(i,o,r),this.taskqueue.isReady?e.apply(this,r):new H(function(t,n){i.taskqueue.addTask(function(e){e?n(e):t(i[o].apply(i,r))})})}))}function p(e){return"$"+e}function f(){this._store={}}function h(e){if(this._store=new f,e&&Array.isArray(e))for(var t=0,n=e.length;t<n;t++)this.add(e[t])}function m(e,t){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];o in e&&(n[o]=e[o])}return n}f.prototype.get=function(e){var t=p(e);return this._store[t]},f.prototype.set=function(e,t){var n=p(e);return this._store[n]=t,!0},f.prototype.has=function(e){return p(e)in this._store},f.prototype.delete=function(e){var t=p(e),n=t in this._store;return delete this._store[t],n},f.prototype.forEach=function(e){for(var t=Object.keys(this._store),n=0,r=t.length;n<r;n++){var i=t[n];e(this._store[i],i=i.substring(1))}},Object.defineProperty(f.prototype,"size",{get:function(){return Object.keys(this._store).length}}),h.prototype.add=function(e){return this._store.set(e,!0)},h.prototype.has=function(e){return this._store.has(e)},h.prototype.forEach=function(n){this._store.forEach(function(e,t){n(t)})},Object.defineProperty(h.prototype,"size",{get:function(){return this._store.size}}),F=function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var e=Object.getOwnPropertyDescriptor(Map,Symbol.species);return e&&"get"in e&&Map[Symbol.species]===Map}()?(E=Set,Map):(E=h,f);var g,v=6;function y(e){return e}function w(e){return[{ok:e}]}function b(i,o,c){var e=o.docs,A=new F;e.forEach(function(e){A.has(e.id)?A.get(e.id).push(e):A.set(e.id,[e])});var d=A.size,p=0,f=new Array(d);var n=[];A.forEach(function(e,t){n.push(t)});var a=0;!function u(){if(!(a>=n.length)){var r,e=Math.min(a+v,n.length),t=n.slice(a,e);r=a,t.forEach(function(a,e){var s=r+e,t=A.get(a),n=m(t[0],["atts_since","attachments"]);n.open_revs=t.map(function(e){return e.rev}),n.open_revs=n.open_revs.filter(y);var l=y;0===n.open_revs.length&&(delete n.open_revs,l=w),["revs","attachments","binary","ajax","latest"].forEach(function(e){e in o&&(n[e]=o[e])}),i.get(a,n,function(e,t){var n,r,i,o;n=e?[{error:e}]:l(t),r=a,i=n,f[s]={id:r,docs:i},++p===d&&(o=[],f.forEach(function(t){t.docs.forEach(function(e){o.push({id:t.id,docs:[e]})})}),c(null,{results:o})),u()})}),a+=t.length}}()}function B(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}if(B())g=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),g=!!localStorage.getItem("_pouch_check_localstorage")}catch(e){g=!1}function T(){return g}function I(){var t;s.EventEmitter.call(this),this._listeners={},t=this,B()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):T()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function x(e){if("undefined"!=typeof console&&"function"==typeof console[e]){var t=Array.prototype.slice.call(arguments,1);console[e].apply(console,t)}}function L(e){var t,n,r=0;return e||(r=2e3),t=e,n=r,t=parseInt(t,10)||0,(n=parseInt(n,10))!=n||n<=t?n=(t||1)<<1:n+=1,6e5<n&&(t=3e5,n=6e5),~~((n-t)*Math.random()+t)}function _(e,t){x("info","The above "+e+" is totally normal. "+t)}r(I,s.EventEmitter),I.prototype.addListener=function(e,t,n,r){if(!this._listeners[t]){var i=this,o=!1;this._listeners[t]=a,this.on(e,a)}function a(){if(i._listeners[t])if(o)o="waiting";else{o=!0;var e=m(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(e).on("change",function(e){e.seq>r.since&&!r.cancelled&&(r.since=e.seq,r.onChange(e))}).on("complete",function(){"waiting"===o&&S(a),o=!1}).on("error",function(){o=!1})}}},I.prototype.removeListener=function(e,t){t in this._listeners&&(s.EventEmitter.prototype.removeListener.call(this,e,this._listeners[t]),delete this._listeners[t])},I.prototype.notifyLocalWindows=function(e){B()?chrome.storage.local.set({dbName:e}):T()&&(localStorage[e]="a"===localStorage[e]?"b":"a")},I.prototype.notify=function(e){this.emit(e),this.notifyLocalWindows(e)};var M="function"==typeof Object.assign?Object.assign:function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};function N(e,t,n){Error.call(this,n),this.status=e,this.name=t,this.message=n,this.error=!0}r(N,Error),N.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})},new N(401,"unauthorized","Name or password is incorrect.");var k=new N(400,"bad_request","Missing JSON list of 'docs'"),U=new N(404,"not_found","missing"),P=new N(409,"conflict","Document update conflict"),Q=new N(400,"bad_request","_id field must contain a string"),R=new N(412,"missing_id","_id is required for puts"),V=new N(400,"bad_request","Only reserved document ids may start with underscore."),q=(new N(412,"precondition_failed","Database not open"),new N(500,"unknown_error","Database encountered an unknown error")),K=new N(500,"badarg","Some query argument is invalid"),W=(new N(400,"invalid_request","Request was invalid"),new N(400,"query_parse_error","Some query parameter is invalid")),j=new N(500,"doc_validation","Bad special document member"),z=new N(400,"bad_request","Something wrong with the request"),G=new N(400,"bad_request","Document must be a JSON object"),J=(new N(404,"not_found","Database not found"),new N(500,"indexed_db_went_bad","unknown")),X=new N(500,"web_sql_went_bad","unknown"),$=(new N(500,"levelDB_went_went_bad","unknown"),new N(403,"forbidden","Forbidden by design doc validate_doc_update function"),new N(400,"bad_request","Invalid rev format")),Y=(new N(412,"file_exists","The database could not be created, the file already exists."),new N(412,"missing_stub","A pre-existing attachment stub wasn't found"));function Z(n,e){function t(e){for(var t in n)"function"!=typeof n[t]&&(this[t]=n[t]);void 0!==e&&(this.reason=e)}return t.prototype=N.prototype,new t(e)}function ee(e){if("object"!=typeof e){var t=e;(e=q).data=t}return"error"in e&&"conflict"===e.error&&(e.name="conflict",e.status=409),"name"in e||(e.name=e.error||"unknown"),"status"in e||(e.status=500),"message"in e||(e.message=e.message||e.reason),e}function te(r){var i={},o=r.filter&&"function"==typeof r.filter;return i.query=r.query_params,function(e){e.doc||(e.doc={});var t=o&&function(e,t,n){try{return!e(t,n)}catch(e){var r="Filter function threw: "+e.toString();return Z(z,r)}}(r.filter,e.doc,i);if("object"==typeof t)return t;if(t)return!1;if(r.include_docs){if(!r.attachments)for(var n in e.doc._attachments)e.doc._attachments.hasOwnProperty(n)&&(e.doc._attachments[n].stub=!0)}else delete e.doc;return!0}}function ne(e){for(var t=[],n=0,r=e.length;n<r;n++)t=t.concat(e[n]);return t}function re(e){var t;if(e?"string"!=typeof e?t=Z(Q):/^_/.test(e)&&!/^_(design|local)/.test(e)&&(t=Z(V)):t=Z(R),t)throw t}function ie(e){return"boolean"==typeof e._remote?e._remote:"function"==typeof e.type&&(x("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===e.type())}function oe(e){if(!e)return null;var t=e.split("/");return 2===t.length?t:1===t.length?[e,e]:null}function ae(e){var t=oe(e);return t?t.join("/"):null}new N(413,"invalid_url","Provided URL is invalid");var se=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],le="queryKey",ue=/(?:^|&)([^&=]*)=?([^&]*)/g,ce=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function Ae(e){for(var t=ce.exec(e),r={},n=14;n--;){var i=se[n],o=t[n]||"",a=-1!==["user","password"].indexOf(i);r[i]=a?decodeURIComponent(o):o}return r[le]={},r[se[12]].replace(ue,function(e,t,n){t&&(r[le][t]=n)}),r}function de(e,t){var n=[],r=[];for(var i in t)t.hasOwnProperty(i)&&(n.push(i),r.push(t[i]));return n.push(e),Function.apply(null,n).apply(null,r)}function pe(u,c,A){return new H(function(s,l){u.get(c,function(e,t){if(e){if(404!==e.status)return l(e);t={}}var n,r,i,o=t._rev,a=A(t);if(!a)return s({updated:!1,rev:o});a._id=c,a._rev=o,s((r=a,i=A,(n=u).put(r).then(function(e){return{updated:!0,rev:e.rev}},function(e){if(409!==e.status)throw e;return pe(n,r._id,i)})))})})}function fe(){return i.v4().replace(/-/g,"").toLowerCase()}var he=i.v4;function me(e){for(var t,n,r,i,o=e.rev_tree.slice();i=o.pop();){var a=i.ids,s=a[2],l=i.pos;if(s.length)for(var u=0,c=s.length;u<c;u++)o.push({pos:l+1,ids:s[u]});else{var A=!!a[1].deleted,d=a[0];t&&!(r!==A?r:n!==l?n<l:t<d)||(t=d,n=l,r=A)}}return n+"-"+t}function ge(e,t){for(var n,r=e.slice();n=r.pop();)for(var i=n.pos,o=n.ids,a=o[2],s=t(0===a.length,i,o[0],n.ctx,o[1]),l=0,u=a.length;l<u;l++)r.push({pos:i+1,ids:a[l],ctx:s})}function ve(e,t){return e.pos-t.pos}function ye(e){var o=[];ge(e,function(e,t,n,r,i){e&&o.push({rev:t+"-"+n,pos:t,opts:i})}),o.sort(ve).reverse();for(var t=0,n=o.length;t<n;t++)delete o[t].pos;return o}function we(e){for(var t=me(e),n=ye(e.rev_tree),r=[],i=0,o=n.length;i<o;i++){var a=n[i];a.rev===t||a.opts.deleted||r.push(a.rev)}return r}function be(e){var o=[];return ge(e.rev_tree,function(e,t,n,r,i){"available"!==i.status||e||(o.push(t+"-"+n),i.status="missing")}),o}function Ce(e){for(var t,n=[],r=e.slice();t=r.pop();){var i=t.pos,o=t.ids,a=o[0],s=o[1],l=o[2],u=0===l.length,c=t.history?t.history.slice():[];c.push({id:a,opts:s}),u&&n.push({pos:i+1-c.length,ids:c});for(var A=0,d=l.length;A<d;A++)r.push({pos:i+1,ids:l[A],history:c})}return n.reverse()}function Se(e,t){return e.pos-t.pos}function Ee(e,t){for(var n,r,i=t,o=e.length;i<o;i++){var a=e[i],s=[a.id,a.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function De(e,t){return e[0]<t[0]?-1:1}function Be(e,t){for(var n,r,i,o=[{tree1:e,tree2:t}],a=!1;0<o.length;){var s=o.pop(),l=s.tree1,u=s.tree2;(l[1].status||u[1].status)&&(l[1].status="available"===l[1].status||"available"===u[1].status?"available":"missing");for(var c=0;c<u[2].length;c++)if(l[2][0]){for(var A=!1,d=0;d<l[2].length;d++)l[2][d][0]===u[2][c][0]&&(o.push({tree1:l[2][d],tree2:u[2][c]}),A=!0);A||(a="new_branch",i=function(e,t,n){for(var r,i=0,o=e.length;i<o;)n(e[r=i+o>>>1],t)<0?i=r+1:o=r;return i}(n=l[2],r=u[2][c],De),n.splice(i,0,r))}else a="new_leaf",l[2][0]=u[2][c]}return{conflicts:a,tree:e}}function Te(e,t,n){var r,i=[],o=!1,a=!1;if(!e.length)return{tree:[t],conflicts:"new_leaf"};for(var s=0,l=e.length;s<l;s++){var u=e[s];if(u.pos===t.pos&&u.ids[0]===t.ids[0])r=Be(u.ids,t.ids),i.push({pos:u.pos,ids:r.tree}),o=o||r.conflicts,a=!0;else if(!0!==n){var c=u.pos<t.pos?u:t,A=u.pos<t.pos?t:u,d=A.pos-c.pos,p=[],f=[];for(f.push({ids:c.ids,diff:d,parent:null,parentIdx:null});0<f.length;){var h=f.pop();if(0!==h.diff)for(var m=h.ids[2],g=0,v=m.length;g<v;g++)f.push({ids:m[g],diff:h.diff-1,parent:h.ids,parentIdx:g});else h.ids[0]===A.ids[0]&&p.push(h)}var y=p[0];y?(r=Be(y.ids,A.ids),y.parent[2][y.parentIdx]=r.tree,i.push({pos:c.pos,ids:c.ids}),o=o||r.conflicts,a=!0):i.push(u)}else i.push(u)}return a||i.push(t),i.sort(Se),{tree:i,conflicts:o||"internal_node"}}function Ie(e,t,n){var r=Te(e,t),i=function(e,t){for(var r,n,i=Ce(e),o=0,a=i.length;o<a;o++){var s,l=i[o],u=l.ids;if(u.length>t){r||(r={});var c=u.length-t;s={pos:l.pos+c,ids:Ee(u,c)};for(var A=0;A<c;A++){var d=l.pos+A+"-"+u[A].id;r[d]=!0}}else s={pos:l.pos,ids:Ee(u,0)};n=n?Te(n,s,!0).tree:[s]}return r&&ge(n,function(e,t,n){delete r[t+"-"+n]}),{tree:n,revs:r?Object.keys(r):[]}}(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function Fe(e){return e.ids}function xe(e,t){t||(t=me(e));for(var n,r=t.substring(t.indexOf("-")+1),i=e.rev_tree.map(Fe);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function _e(e){return/^_local/.test(e)}function Me(e,t){for(var n,r=t.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,a=o[0],s=o[1],l=o[2],u=0===l.length,c=n.history?n.history.slice():[];if(c.push({id:a,pos:i,opts:s}),u)for(var A=0,d=c.length;A<d;A++){var p=c[A];if(p.pos+"-"+p.id===e)return i+"-"+a}for(var f=0,h=l.length;f<h;f++)r.push({pos:i+1,ids:l[f],history:c})}throw new Error("Unable to resolve latest revision for id "+t.id+", rev "+e)}function Ne(r,t,n){s.EventEmitter.call(this);var i=this;this.db=r;var o=(t=t?O(t):{}).complete=c(function(e,t){var n;e?("error",0<("listenerCount"in(n=i)?n.listenerCount("error"):s.EventEmitter.listenerCount(n,"error"))&&i.emit("error",e)):i.emit("complete",t),i.removeAllListeners(),r.removeListener("destroyed",a)});function a(){i.cancel()}n&&(i.on("complete",function(e){n(null,e)}),i.on("error",n)),r.once("destroyed",a),t.onChange=function(e,t,n){i.isCancelled||function(e,t,n,r){try{e.emit("change",t,n,r)}catch(e){x("error",'Error in .on("change", function):',e)}}(i,e,t,n)};var e=new H(function(n,r){t.complete=function(e,t){e?r(e):n(t)}});i.once("cancel",function(){r.removeListener("destroyed",a),t.complete(null,{status:"cancelled"})}),this.then=e.then.bind(e),this.catch=e.catch.bind(e),this.then(function(e){o(null,e)},o),r.taskqueue.isReady?i.validateChanges(t):r.taskqueue.addTask(function(e){e?t.complete(e):i.isCancelled?i.emit("cancel"):i.validateChanges(t)})}function ke(e,t,n){var r=[{rev:e._rev}];"all_docs"===n.style&&(r=ye(t.rev_tree).map(function(e){return{rev:e.rev}}));var i={id:t.id,changes:r,doc:e};return xe(t,e._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=we(t),i.doc._conflicts.length||delete i.doc._conflicts),i}function Ue(e,t){return e<t?-1:t<e?1:0}function Pe(n,r){return function(e,t){e||t[0]&&t[0].error?((e=e||t[0]).docId=r,n(e)):n(null,t.length?t[0]:t)}}function Qe(e,t){var n=Ue(e._id,t._id);return 0!==n?n:Ue(e._revisions?e._revisions.start:0,t._revisions?t._revisions.start:0)}function He(){s.EventEmitter.call(this)}function Oe(){this.isReady=!1,this.failed=!1,this.queue=[]}function Le(e,t){if(!(this instanceof Le))return new Le(e,t);var n=this;if(t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),this.__opts=t=O(t),n.auto_compaction=t.auto_compaction,n.prefix=Le.prefix,"string"!=typeof e)throw new Error("Missing/invalid DB name");var r=function(e,t){var n=e.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Le.adapters,i=Le.preferredAdapters,o=Le.prefix,a=t.adapter;if(!a)for(var s=0;s<i.length&&"idb"===(a=i[s])&&"websql"in r&&T()&&localStorage["_pouch__websqldb_"+o+e];++s)x("log",'PouchDB is downgrading "'+e+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');var l=r[a];return{name:l&&"use_prefix"in l&&!l.use_prefix?e:o+e,adapter:a}}((t.prefix||"")+e,t);if(t.name=r.name,t.adapter=t.adapter||r.adapter,n.name=e,n._adapter=t.adapter,Le.emit("debug",["adapter","Picked adapter: ",t.adapter]),!Le.adapters[t.adapter]||!Le.adapters[t.adapter].valid())throw new Error("Invalid Adapter: "+t.adapter);He.call(n),n.taskqueue=new Oe,n.adapter=t.adapter,Le.adapters[t.adapter].call(n,t,function(e){if(e)return n.taskqueue.fail(e);!function(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}(n),n.emit("created",n),Le.emit("created",n.name),n.taskqueue.ready(n)})}r(Ne,s.EventEmitter),Ne.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},Ne.prototype.validateChanges=function(t){var n=t.complete,r=this;Le._changesFilterPlugin?Le._changesFilterPlugin.validate(t,function(e){if(e)return n(e);r.doChanges(t)}):r.doChanges(t)},Ne.prototype.doChanges=function(t){var n=this,r=t.complete;if("live"in(t=O(t))&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=ke,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"!==t.since){if(Le._changesFilterPlugin){if(Le._changesFilterPlugin.normalize(t),Le._changesFilterPlugin.shouldFilter(this,t))return Le._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&x("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=r;var i=this.db._changes(t);if(i&&"function"==typeof i.cancel){var o=n.cancel;n.cancel=C(function(e){i.cancel(),o.apply(this,e)})}}else this.db.info().then(function(e){n.isCancelled?r(null,{status:"cancelled"}):(t.since=e.update_seq,n.doChanges(t))},r)},r(He,s.EventEmitter),He.prototype.post=A("post",function(e,t,n){if("function"==typeof t&&(n=t,t={}),"object"!=typeof e||Array.isArray(e))return n(Z(G));this.bulkDocs({docs:[e]},t,Pe(n,e._id))}),He.prototype.put=A("put",function(n,t,r){if("function"==typeof t&&(r=t,t={}),"object"!=typeof n||Array.isArray(n))return r(Z(G));if(re(n._id),_e(n._id)&&"function"==typeof this._putLocal)return n._deleted?this._removeLocal(n,r):this._putLocal(n,r);var e,i,o,a,s=this;function l(e){"function"==typeof s._put&&!1!==t.new_edits?s._put(n,t,e):s.bulkDocs({docs:[n]},t,Pe(e,n._id))}t.force&&n._rev?(i=(e=n._rev.split("-"))[1],o=parseInt(e[0],10)+1,a=fe(),n._revisions={start:o,ids:[a,i]},n._rev=o+"-"+a,t.new_edits=!1,l(function(e){var t=e?null:{ok:!0,id:n._id,rev:n._rev};r(e,t)})):l(r)}),He.prototype.putAttachment=A("putAttachment",function(t,n,r,i,o){var a=this;function s(e){var t="_rev"in e?parseInt(e._rev,10):0;return e._attachments=e._attachments||{},e._attachments[n]={content_type:o,data:i,revpos:++t},a.put(e)}return"function"==typeof o&&(o=i,i=r,r=null),void 0===o&&(o=i,i=r,r=null),o||x("warn","Attachment",n,"on document",t,"is missing content_type"),a.get(t).then(function(e){if(e._rev!==r)throw Z(P);return s(e)},function(e){if(e.reason===U.message)return s({_id:t});throw e})}),He.prototype.removeAttachment=A("removeAttachment",function(e,n,r,i){var o=this;o.get(e,function(e,t){if(e)i(e);else if(t._rev===r){if(!t._attachments)return i();delete t._attachments[n],0===Object.keys(t._attachments).length&&delete t._attachments,o.put(t,i)}else i(Z(P))})}),He.prototype.remove=A("remove",function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,n="function"==typeof t?(r=t,{}):(r=n,t)),(n=n||{}).was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev,_deleted:!0};if(_e(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,Pe(r,o._id))}),He.prototype.revsDiff=A("revsDiff",function(o,e,a){"function"==typeof e&&(a=e,e={});var u=Object.keys(o);if(!u.length)return a(null,{});var c=0,A=new F;function d(e,t){A.has(e)||A.set(e,{missing:[]}),A.get(e).missing.push(t)}u.map(function(i){this._getRevisionTree(i,function(e,t){if(e&&404===e.status&&"missing"===e.message)A.set(i,{missing:o[i]});else{if(e)return a(e);n=t,l=o[s=i].slice(0),ge(n,function(e,t,n,r,i){var o=t+"-"+n,a=l.indexOf(o);-1!==a&&(l.splice(a,1),"available"!==i.status&&d(s,o))}),l.forEach(function(e){d(s,e)})}var s,n,l;if(++c===u.length){var r={};return A.forEach(function(e,t){r[t]=e}),a(null,r)}})},this)}),He.prototype.bulkGet=A("bulkGet",function(e,t){b(this,e,t)}),He.prototype.compactDocument=A("compactDocument",function(r,i,u){var c=this;this._getRevisionTree(r,function(e,t){if(e)return u(e);var o,a,n=(o={},a=[],ge(t,function(e,t,n,r){var i=t+"-"+n;return e&&(o[i]=0),void 0!==r&&a.push({from:r,to:i}),i}),a.reverse(),a.forEach(function(e){void 0===o[e.from]?o[e.from]=1+o[e.to]:o[e.from]=Math.min(o[e.from],1+o[e.to])}),o),s=[],l=[];Object.keys(n).forEach(function(e){n[e]>i&&s.push(e)}),ge(t,function(e,t,n,r,i){var o=t+"-"+n;"available"===i.status&&-1!==s.indexOf(o)&&l.push(o)}),c._doCompaction(r,l,u)})}),He.prototype.compact=A("compact",function(e,t){"function"==typeof e&&(t=e,e={});e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:t}),1===this._compactionQueue.length&&function n(r){var e=r._compactionQueue[0],t=e.opts,i=e.callback;r.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(t.last_seq=e.last_seq),r._compact(t,function(e,t){e?i(e):i(null,t),S(function(){r._compactionQueue.shift(),r._compactionQueue.length&&n(r)})})})}(this)}),He.prototype._compact=function(e,n){var r=this,t={return_docs:!1,last_seq:e.last_seq||0},i=[];r.changes(t).on("change",function(e){i.push(r.compactDocument(e.id,0))}).on("complete",function(e){var t=e.last_seq;H.all(i).then(function(){return pe(r,"_local/compaction",function(e){return(!e.last_seq||e.last_seq<t)&&(e.last_seq=t,e)})}).then(function(){n(null,{ok:!0})}).catch(n)}).on("error",n)},He.prototype.get=A("get",function(w,b,C){if("function"==typeof b&&(C=b,b={}),"string"!=typeof w)return C(Z(Q));if(_e(w)&&"function"==typeof this._getLocal)return this._getLocal(w,C);var n=[],S=this;function r(){var a=[],s=n.length;if(!s)return C(null,a);n.forEach(function(o){S.get(w,{rev:o,revs:b.revs,latest:b.latest,attachments:b.attachments,binary:b.binary},function(e,t){if(e)a.push({missing:o});else{for(var n,r=0,i=a.length;r<i;r++)if(a[r].ok&&a[r].ok._rev===t._rev){n=!0;break}n||a.push({ok:t})}--s||C(null,a)})})}if(!b.open_revs)return this._get(w,b,function(e,t){if(e)return e.docId=w,C(e);var i=t.doc,n=t.metadata,o=t.ctx;if(b.conflicts){var r=we(n);r.length&&(i._conflicts=r)}if(xe(n,i._rev)&&(i._deleted=!0),b.revs||b.revs_info){for(var a=i._rev.split("-"),s=parseInt(a[0],10),l=a[1],u=Ce(n.rev_tree),c=null,A=0;A<u.length;A++){var d=u[A],p=d.ids.map(function(e){return e.id}).indexOf(l);(p===s-1||!c&&-1!==p)&&(c=d)}var f=c.ids.map(function(e){return e.id}).indexOf(i._rev.split("-")[1])+1,h=c.ids.length-f;if(c.ids.splice(f,h),c.ids.reverse(),b.revs&&(i._revisions={start:c.pos+c.ids.length-1,ids:c.ids.map(function(e){return e.id})}),b.revs_info){var m=c.pos+c.ids.length;i._revs_info=c.ids.map(function(e){return{rev:--m+"-"+e.id,status:e.opts.status}})}}if(b.attachments&&i._attachments){var g=i._attachments,v=Object.keys(g).length;if(0===v)return C(null,i);Object.keys(g).forEach(function(r){this._getAttachment(i._id,r,g[r],{rev:i._rev,binary:b.binary,ctx:o},function(e,t){var n=i._attachments[r];n.data=t,delete n.stub,delete n.length,--v||C(null,i)})},S)}else{if(i._attachments)for(var y in i._attachments)i._attachments.hasOwnProperty(y)&&(i._attachments[y].stub=!0);C(null,i)}});if("all"===b.open_revs)this._getRevisionTree(w,function(e,t){if(e)return C(e);n=ye(t).map(function(e){return e.rev}),r()});else{if(!Array.isArray(b.open_revs))return C(Z(q,"function_clause"));n=b.open_revs;for(var e=0;e<n.length;e++){var t=n[e];if("string"!=typeof t||!/^\d+-/.test(t))return C(Z($))}r()}}),He.prototype.getAttachment=A("getAttachment",function(n,r,i,o){var a=this;i instanceof Function&&(o=i,i={}),this._get(n,i,function(e,t){return e?o(e):t.doc._attachments&&t.doc._attachments[r]?(i.ctx=t.ctx,i.binary=!0,void a._getAttachment(n,r,t.doc._attachments[r],i,o)):o(Z(U))})}),He.prototype.allDocs=A("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(Z(W,"Query parameter `"+n+"` is not compatible with multi-get"));if(!ie(this)&&(i="limit"in(r=t)?r.keys.slice(r.skip,r.limit+r.skip):0<r.skip?r.keys.slice(r.skip):r.keys,r.keys=i,r.skip=0,delete r.limit,r.descending&&(i.reverse(),r.descending=!1),0===t.keys.length))return this._allDocs({limit:0},e)}var r,i;return this._allDocs(t,e)}),He.prototype.changes=function(e,t){return"function"==typeof e&&(t=e,e={}),new Ne(this,e,t)},He.prototype.close=A("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}),He.prototype.info=A("info",function(n){var r=this;this._info(function(e,t){if(e)return n(e);t.db_name=t.db_name||r.name,t.auto_compaction=!(!r.auto_compaction||ie(r)),t.adapter=r.adapter,n(null,t)})}),He.prototype.id=A("id",function(e){return this._id(e)}),He.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},He.prototype.bulkDocs=A("bulkDocs",function(e,i,o){if("function"==typeof i&&(o=i,i={}),i=i||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return o(Z(k));for(var t=0;t<e.docs.length;++t)if("object"!=typeof e.docs[t]||Array.isArray(e.docs[t]))return o(Z(G));var r;if(e.docs.forEach(function(n){n._attachments&&Object.keys(n._attachments).forEach(function(e){var t;r=r||"_"===(t=e).charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'",n._attachments[e].content_type||x("warn","Attachment",e,"on document",n._id,"is missing content_type")})}),r)return o(Z(z,r));"new_edits"in i||(i.new_edits=!("new_edits"in e)||e.new_edits);var a=this;i.new_edits||ie(a)||e.docs.sort(Qe),function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=m(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}(e.docs);var s=e.docs.map(function(e){return e._id});return this._bulkDocs(e,i,function(e,t){if(e)return o(e);if(i.new_edits||(t=t.filter(function(e){return e.error})),!ie(a))for(var n=0,r=t.length;n<r;n++)t[n].id=t[n].id||s[n];o(null,t)})}),He.prototype.registerDependentDatabase=A("registerDependentDatabase",function(t,e){var n=new this.constructor(t,this.__opts);pe(this,"_local/_pouch_dependentDbs",function(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}).then(function(){e(null,{db:n})}).catch(e)}),He.prototype.destroy=A("destroy",function(e,o){"function"==typeof e&&(o=e,e={});var a=this,s=!("use_prefix"in a)||a.use_prefix;function l(){a._destroy(e,function(e,t){if(e)return o(e);a._destroyed=!0,a.emit("destroyed"),o(null,t||{ok:!0})})}if(ie(a))return l();a.get("_local/_pouch_dependentDbs",function(e,t){if(e)return 404!==e.status?o(e):l();var n=t.dependentDbs,r=a.constructor,i=Object.keys(n).map(function(e){var t=s?e.replace(new RegExp("^"+r.prefix),""):e;return new r(t,a.__opts).destroy()});H.all(i).then(l,o)})}),Oe.prototype.execute=function(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()},Oe.prototype.fail=function(e){this.failed=e,this.execute()},Oe.prototype.ready=function(e){this.isReady=!0,this.db=e,this.execute()},Oe.prototype.addTask=function(e){this.queue.push(e),this.failed&&this.execute()},r(Le,He),Le.adapters={},Le.preferredAdapters=[],Le.prefix="_pouch_";var Re=new s.EventEmitter;function Ve(e,t){for(var n=e,r=0,i=t.length;r<i&&(n=n[t[r]]);r++);return n}function qe(e){for(var t=[],n="",r=0,i=e.length;r<i;r++){var o=e[r];"."===o?n=0<r&&"\\"===e[r-1]?n.substring(0,n.length-1)+".":(t.push(n),""):n+=o}return t.push(n),t}!function(t){Object.keys(s.EventEmitter.prototype).forEach(function(e){"function"==typeof s.EventEmitter.prototype[e]&&(t[e]=Re[e].bind(Re))});var r=t._destructionListeners=new F;t.on("ref",function(e){r.has(e.name)||r.set(e.name,[]),r.get(e.name).push(e)}),t.on("unref",function(e){if(r.has(e.name)){var t=r.get(e.name),n=t.indexOf(e);n<0||(t.splice(n,1),1<t.length?r.set(e.name,t):r.delete(e.name))}}),t.on("destroyed",function(e){if(r.has(e)){var t=r.get(e);r.delete(e),t.forEach(function(e){e.emit("destroyed",!0)})}})}(Le),Le.adapter=function(e,t,n){t.valid()&&(Le.adapters[e]=t,n&&Le.preferredAdapters.push(e))},Le.plugin=function(t){if("function"==typeof t)t(Le);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){Le.prototype[e]=t[e]})}return this.__defaults&&(Le.__defaults=M({},this.__defaults)),Le},Le.defaults=function(e){function n(e,t){if(!(this instanceof n))return new n(e,t);t=t||{},e&&"object"==typeof e&&(e=(t=e).name,delete t.name),t=M({},n.__defaults,t),Le.call(this,e,t)}return r(n,Le),n.preferredAdapters=Le.preferredAdapters.slice(),Object.keys(Le).forEach(function(e){e in n||(n[e]=Le[e])}),n.__defaults=M({},this.__defaults,e),n};var Ke=["$or","$nor","$not"];function We(e){return-1<Ke.indexOf(e)}function je(e){return Object.keys(e)[0]}function ze(e){var n={};return e.forEach(function(t){Object.keys(t).forEach(function(e){var d=t[e];if("object"!=typeof d&&(d={$eq:d}),We(e))d instanceof Array?n[e]=d.map(function(e){return ze([e])}):n[e]=ze([d]);else{var p=n[e]=n[e]||{};Object.keys(d).forEach(function(e){var t,n,r,i,o,a,s,l,u,c,A=d[e];return"$gt"===e||"$gte"===e?(l=e,u=A,void(void 0===(c=p).$eq&&(void 0!==c.$gte?"$gte"===l?u>c.$gte&&(c.$gte=u):u>=c.$gte&&(delete c.$gte,c.$gt=u):void 0!==c.$gt?"$gte"===l?u>c.$gt&&(delete c.$gt,c.$gte=u):u>c.$gt&&(c.$gt=u):c[l]=u))):"$lt"===e||"$lte"===e?(o=e,a=A,void(void 0===(s=p).$eq&&(void 0!==s.$lte?"$lte"===o?a<s.$lte&&(s.$lte=a):a<=s.$lte&&(delete s.$lte,s.$lt=a):void 0!==s.$lt?"$lte"===o?a<s.$lt&&(delete s.$lt,s.$lte=a):a<s.$lt&&(s.$lt=a):s[o]=a))):"$ne"===e?(r=A,void("$ne"in(i=p)?i.$ne.push(r):i.$ne=[r])):"$eq"===e?(t=A,delete(n=p).$gt,delete n.$gte,delete n.$lt,delete n.$lte,delete n.$ne,void(n.$eq=t)):void(p[e]=A)})}})}),n}var Ge=-324,Je=3,Xe="";function $e(e,t){if(e===t)return 0;e=Ye(e),t=Ye(t);var n,r,i=nt(e),o=nt(t);if(i-o!=0)return i-o;switch(typeof e){case"number":return e-t;case"boolean":return e<t?-1:1;case"string":return(n=e)===(r=t)?0:r<n?1:-1}return Array.isArray(e)?function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=$e(e[r],t[r]);if(0!==i)return i}return e.length===t.length?0:e.length>t.length?1:-1}(e,t):function(e,t){for(var n=Object.keys(e),r=Object.keys(t),i=Math.min(n.length,r.length),o=0;o<i;o++){var a=$e(n[o],r[o]);if(0!==a)return a;if(0!==(a=$e(e[n[o]],t[r[o]])))return a}return n.length===r.length?0:n.length>r.length?1:-1}(e,t)}function Ye(e){switch(typeof e){case"undefined":return null;case"number":return e===1/0||e===-1/0||isNaN(e)?null:e;case"object":var t=e;if(Array.isArray(e)){var n=e.length;e=new Array(n);for(var r=0;r<n;r++)e[r]=Ye(t[r])}else{if(e instanceof Date)return e.toJSON();if(null!==e)for(var i in e={},t)if(t.hasOwnProperty(i)){var o=t[i];void 0!==o&&(e[i]=Ye(o))}}}return e}function Ze(e){return nt(e=Ye(e))+Xe+function(e){if(null!==e)switch(typeof e){case"boolean":return e?1:0;case"number":return function(e){if(0===e)return"1";var o,a,t=e.toExponential().split(/e\+?/),n=parseInt(t[1],10),r=e<0,i=r?"0":"2",s=(o=((r?-n:n)-Ge).toString(),a=Je,function(e,t,n){for(var r="",i=a-o.length;r.length<i;)r+="0";return r}()+o);i+=Xe+s;var l=Math.abs(parseFloat(t[0]));r&&(l=10-l);var u=l.toFixed(20);return u=u.replace(/\.?0+$/,""),i+(Xe+u)}(e);case"string":return e.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var t=Array.isArray(e),n=t?e:Object.keys(e),r=-1,i=n.length,o="";if(t)for(;++r<i;)o+=Ze(n[r]);else for(;++r<i;){var a=n[r];o+=Ze(a)+Ze(e[a])}return o}return""}(e)+"\0"}function et(e,t){var n,r=t;if("1"===e[t])n=0,t++;else{var i="0"===e[t];t++;var o="",a=e.substring(t,t+Je),s=parseInt(a,10)+Ge;for(i&&(s=-s),t+=Je;;){var l=e[t];if("\0"===l)break;o+=l,t++}n=1===(o=o.split(".")).length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:t-r}}function tt(e,t){var n=e.pop();if(t.length){var r=t[t.length-1];n===r.element&&(t.pop(),r=t[t.length-1]);var i=r.element,o=r.index;Array.isArray(i)?i.push(n):o===e.length-2?i[e.pop()]=n:e.push(n)}}function nt(e){var t=["boolean","number","string","object"].indexOf(typeof e);return~t?null===e?1:Array.isArray(e)?5:t<3?t+2:t+3:Array.isArray(e)?5:void 0}function rt(s,l,e){return e.every(function(e){var t,n,r,i=l[e],o=qe(e),a=Ve(s,o);return We(e)?(n=i,r=s,"$or"===(t=e)?n.some(function(e){return rt(r,e,Object.keys(e))}):"$not"===t?!rt(r,n,Object.keys(n)):!n.find(function(e){return rt(r,e,Object.keys(e))})):it(i,s,o,a)})}function it(n,r,i,o){return!n||Object.keys(n).every(function(e){var t=n[e];return function(e,t,n,r,i){if(!lt[e])throw new Error('unknown operator "'+e+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return lt[e](t,n,r,i)}(e,r,t,i,o)})}function ot(e){return null!=e}function at(e){return void 0!==e}function st(t,e){return e.some(function(e){return t instanceof Array?-1<t.indexOf(e):t===e})}var lt={$elemMatch:function(t,n,r,e){return!!Array.isArray(e)&&0!==e.length&&("object"==typeof e[0]?e.some(function(e){return rt(e,n,Object.keys(n))}):e.some(function(e){return it(n,t,r,e)}))},$allMatch:function(t,n,r,e){return!!Array.isArray(e)&&0!==e.length&&("object"==typeof e[0]?e.every(function(e){return rt(e,n,Object.keys(n))}):e.every(function(e){return it(n,t,r,e)}))},$eq:function(e,t,n,r){return at(r)&&0===$e(r,t)},$gte:function(e,t,n,r){return at(r)&&0<=$e(r,t)},$gt:function(e,t,n,r){return at(r)&&0<$e(r,t)},$lte:function(e,t,n,r){return at(r)&&$e(r,t)<=0},$lt:function(e,t,n,r){return at(r)&&$e(r,t)<0},$exists:function(e,t,n,r){return t?at(r):!at(r)},$mod:function(e,t,n,r){return ot(r)&&function(e,t){var n=t[0],r=t[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(e,10)===e&&e%n===r}(r,t)},$ne:function(e,t,n,r){return t.every(function(e){return 0!==$e(r,e)})},$in:function(e,t,n,r){return ot(r)&&st(r,t)},$nin:function(e,t,n,r){return ot(r)&&!st(r,t)},$size:function(e,t,n,r){return ot(r)&&(i=t,r.length===i);var i},$all:function(e,t,n,r){return Array.isArray(r)&&(i=r,t.every(function(e){return-1<i.indexOf(e)}));var i},$regex:function(e,t,n,r){return ot(r)&&(i=r,new RegExp(t).test(i));var i},$type:function(e,t,n,r){return function(e,t){switch(t){case"null":return null===e;case"boolean":return"boolean"==typeof e;case"number":return"number"==typeof e;case"string":return"string"==typeof e;case"array":return e instanceof Array;case"object":return"[object Object]"==={}.toString.call(e)}throw new Error(t+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}(r,t)}};function ut(e,s){if("object"!=typeof s)throw new Error("Selector error: expected a JSON object");var t=function(e,t,n){if(e=e.filter(function(e){return rt(e.doc,t.selector,n)}),t.sort){var r=function(e){function o(n){return e.map(function(e){var t=qe(je(e));return Ve(n,t)})}return function(e,t){var n,r,i=$e(o(e.doc),o(t.doc));return 0!==i?i:(n=e.doc._id)<(r=t.doc._id)?-1:r<n?1:0}}(t.sort);e=e.sort(r),"string"!=typeof t.sort[0]&&"desc"===(i=t.sort[0])[je(i)]&&(e=e.reverse())}var i;if("limit"in t||"skip"in t){var o=t.skip||0,a=("limit"in t?t.limit:e.length)+o;e=e.slice(o,a)}return e}([{doc:e}],{selector:s=function(e){var t=O(s),n=!1;"$and"in t&&(t=ze(t.$and),n=!0),["$or","$nor"].forEach(function(e){e in t&&t[e].forEach(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n],i=e[r];"object"==typeof i&&null!==i||(e[r]={$eq:i})}})}),"$not"in t&&(t.$not=ze([t.$not]));for(var r=Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o];"object"!=typeof a||null===a?a={$eq:a}:"$ne"in a&&!n&&(a.$ne=[a.$ne]),t[o]=a}return t}()},Object.keys(s));return t&&1===t.length}function ct(e,t){if(e.selector&&e.filter&&"_selector"!==e.filter){var n="string"==typeof e.filter?e.filter:"function";return t(new Error('selector invalid for filter "'+n+'"'))}t()}function At(e){e.view&&!e.filter&&(e.filter="_view"),e.selector&&!e.filter&&(e.filter="_selector"),e.filter&&"string"==typeof e.filter&&("_view"===e.filter?e.view=ae(e.view):e.filter=ae(e.filter))}function dt(e,t){return t.filter&&"string"==typeof t.filter&&!t.doc_ids&&!ie(e.db)}function pt(r,i){var o=i.complete;if("_view"===i.filter){if(!i.view||"string"!=typeof i.view){var e=Z(z,"`view` filter parameter not found or invalid.");return o(e)}var a=oe(i.view);r.db.get("_design/"+a[0],function(e,t){if(r.isCancelled)return o(null,{status:"cancelled"});if(e)return o(ee(e));var n=t&&t.views&&t.views[a[1]]&&t.views[a[1]].map;if(!n)return o(Z(U,t.views?"missing json key: "+a[1]:"missing json key: views"));i.filter=de(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+n+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{}),r.doChanges(i)})}else if(i.selector)i.filter=function(e){return ut(e,i.selector)},r.doChanges(i);else{var s=oe(i.filter);r.db.get("_design/"+s[0],function(e,t){if(r.isCancelled)return o(null,{status:"cancelled"});if(e)return o(ee(e));var n=t&&t.filters&&t.filters[s[1]];if(!n)return o(Z(U,t&&t.filters?"missing json key: "+s[1]:"missing json key: filters"));i.filter=de('"use strict";\nreturn '+n+";",{}),r.doChanges(i)})}}function ft(e){return e.reduce(function(e,t){return e[t]=!0,e},{})}Le.plugin(function(e){e.debug=o;var r={};e.on("debug",function(e){var t=e[0],n=e.slice(1);r[t]||(r[t]=o("pouchdb:"+t)),r[t].apply(null,n)})}),Le.plugin(function(e){e._changesFilterPlugin={validate:ct,normalize:At,shouldFilter:dt,filter:pt}}),Le.version="6.4.3";var ht=ft(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),mt=ft(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function gt(e){if(!/^\d+-./.test(e))return Z($);var t=e.indexOf("-"),n=e.substring(0,t),r=e.substring(t+1);return{prefix:parseInt(n,10),id:r}}function vt(e,t){var n,r,i,o={status:"available"};if(e._deleted&&(o.deleted=!0),t)if(e._id||(e._id=he()),r=fe(),e._rev){if((i=gt(e._rev)).error)return i;e._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[r,o,[]]]]}],n=i.prefix+1}else e._rev_tree=[{pos:1,ids:[r,o,[]]}],n=1;else if(e._revisions&&(e._rev_tree=function(e,t){for(var n=e.start-e.ids.length+1,r=e.ids,i=[r[0],t,[]],o=1,a=r.length;o<a;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}(e._revisions,o),n=e._revisions.start,r=e._revisions.ids[0]),!e._rev_tree){if((i=gt(e._rev)).error)return i;n=i.prefix,r=i.id,e._rev_tree=[{pos:n,ids:[r,o,[]]}]}re(e._id),e._rev=n+"-"+r;var a={metadata:{},data:{}};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l="_"===s[0];if(l&&!ht[s]){var u=Z(j,s);throw u.message=j.message+": "+s,u}l&&!mt[s]?a.metadata[s.slice(1)]=e[s]:a.data[s]=e[s]}return a}var yt=function(e){return atob(e)},wt=function(e){return btoa(e)};function bt(t,n){t=t||[],n=n||{};try{return new Blob(t,n)}catch(e){if("TypeError"!==e.name)throw e;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(n.type)}}function Ct(e,t){return bt([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(e)],{type:t})}function St(e,t){return Ct(yt(e),t)}function Et(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return t}function Dt(e,n){if("undefined"==typeof FileReader)return n(Et((new FileReaderSync).readAsArrayBuffer(e)));var t=new FileReader,r="function"==typeof t.readAsBinaryString;t.onloadend=function(e){var t=e.target.result||"";if(r)return n(t);n(Et(t))},r?t.readAsBinaryString(e):t.readAsArrayBuffer(e)}function Bt(e,t){Dt(e,function(e){t(e)})}function Tt(e,t){Bt(e,function(e){t(wt(e))})}function It(e,n){if("undefined"==typeof FileReader)return n((new FileReaderSync).readAsArrayBuffer(e));var t=new FileReader;t.onloadend=function(e){var t=e.target.result||new ArrayBuffer(0);n(t)},t.readAsArrayBuffer(e)}var Ft=e.setImmediate||e.setTimeout,xt=32768;function _t(t,e,n,r,i){var o,a,s;(0<n||r<e.size)&&(a=n,s=r,e=(o=e).webkitSlice?o.webkitSlice(a,s):o.slice(a,s)),It(e,function(e){t.append(e),i()})}function Mt(e,t,n,r,i){(0<n||r<t.length)&&(t=t.substring(n,r)),e.appendBinary(t),i()}function Nt(t,n){var e="string"==typeof t,r=e?t.length:t.size,i=Math.min(xt,r),o=Math.ceil(r/i),a=0,s=e?new d:new d.ArrayBuffer,l=e?Mt:_t;function u(){Ft(A)}function c(){var e=s.end(!0),t=wt(e);n(t),s.destroy()}function A(){var e=a*i;l(s,t,e,e+i,++a<o?u:c)}A()}function kt(e,t,n){if(e.stub)return n();var r,i,o;"string"==typeof e.data?function(t,e,n){var r=function(e){try{return yt(e)}catch(e){return{error:Z(K,"Attachment is not a valid base64 string")}}}(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?Ct(r,t.content_type):"base64"===e?wt(r):r,Nt(r,function(e){t.digest="md5-"+e,n()})}(e,t,n):(i=t,o=n,Nt((r=e).data,function(e){r.digest="md5-"+e,r.length=r.data.size||r.data.length||0,"binary"===i?Bt(r.data,function(e){r.data=e,o()}):"base64"===i?Tt(r.data,function(e){r.data=e,o()}):o()}))}function Ut(e,o,t){if(!e.length)return t();var a,n=0;function s(){n++,e.length===n&&(a?t(a):t())}e.forEach(function(e){var t=e.data&&e.data._attachments?Object.keys(e.data._attachments):[],n=0;if(!t.length)return s();function r(e){a=e,++n===t.length&&s()}for(var i in e.data._attachments)e.data._attachments.hasOwnProperty(i)&&kt(e.data._attachments[i],o,r)})}function Pt(l,e,i,u,o,c,A,d,t){l=l||1e3;var p=d.new_edits,a=new F,n=0,s=e.length;function f(){++n===s&&t&&t()}e.forEach(function(e,n){if(e._id&&_e(e._id)){var t=e._deleted?"_removeLocal":"_putLocal";i[t](e,{ctx:o},function(e,t){c[n]=e||t,f()})}else{var r=e.metadata.id;a.has(r)?(s--,a.get(r).push([e,n])):a.set(r,[[e,n]])}}),a.forEach(function(i,o){var a=0;function s(){++a<i.length?e():f()}function e(){var e=i[a],t=e[0],n=e[1];if(u.has(o))!function(e,t,n,r,i,o,a,s){if(function(e,t){for(var n,r=e.slice(),i=t.split("-"),o=parseInt(i[0],10),a=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===a)return!0;for(var s=n.ids[2],l=0,u=s.length;l<u;l++)r.push({pos:n.pos+1,ids:s[l]})}return!1}(t.rev_tree,n.metadata.rev))return r[i]=n,o();var l=t.winningRev||me(t),u="deleted"in t?t.deleted:xe(t,l),c="deleted"in n.metadata?n.metadata.deleted:xe(n.metadata),A=/^1-/.test(n.metadata.rev);if(u&&!c&&s&&A){var d=n.data;d._rev=l,d._id=n.metadata.id,n=vt(d,s)}var p=Ie(t.rev_tree,n.metadata.rev_tree[0],e);if(s&&(u&&c&&"new_leaf"!==p.conflicts||!u&&"new_leaf"!==p.conflicts||u&&!c&&"new_branch"===p.conflicts)){var f=Z(P);return r[i]=f,o()}var h=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],t.rev_map&&(n.metadata.rev_map=t.rev_map);var m=me(n.metadata),g=xe(n.metadata,m),v=u===g?0:u<g?-1:1;a(n,m,g,h===m?g:xe(n.metadata,h),!0,v,i,o)}(l,u.get(o),t,c,n,s,A,p);else{var r=Ie([],t.metadata.rev_tree[0],l);t.metadata.rev_tree=r.tree,t.stemmedRevs=r.stemmedRevs||[],function(e,t,n){var r=me(e.metadata),i=xe(e.metadata,r);if("was_delete"in d&&i)return c[t]=Z(U,"deleted"),n();if(p&&"missing"===e.metadata.rev_tree[0].ids[1].status){var o=Z(P);return c[t]=o,n()}A(e,r,i,i,!1,i?0:1,t,n)}(t,n,s)}}e()})}var Qt="document-store",Ht="by-sequence",Ot="attach-store",Lt="attach-seq-store",Rt="meta-store",Vt="local-store",qt="detect-blob-support";function Kt(t){try{return JSON.parse(t)}catch(e){return a.parse(t)}}function Wt(t){try{return JSON.stringify(t)}catch(e){return a.stringify(t)}}function jt(n){return function(e){var t="unknown_error";e.target&&e.target.error&&(t=e.target.error.name||e.target.error.message),n(Z(J,t,e.type))}}function zt(e,t,n){return{data:Wt(e),winningRev:t,deletedOrLocal:n?"1":"0",seq:e.seq,id:e.id}}function Gt(e){if(!e)return null;var t=Kt(e.data);return t.winningRev=e.winningRev,t.deleted="1"===e.deletedOrLocal,t.seq=e.seq,t}function Jt(e){if(!e)return e;var t=e._doc_id_rev.lastIndexOf(":");return e._id=e._doc_id_rev.substring(0,t-1),e._rev=e._doc_id_rev.substring(t+1),delete e._doc_id_rev,e}function Xt(e,t,n,r){n?r(e?"string"!=typeof e?e:St(e,t):bt([""],{type:t})):e?"string"!=typeof e?Dt(e,function(e){r(wt(e))}):r(e):r("")}function $t(i,o,a,e){var t=Object.keys(i._attachments||{});if(!t.length)return e&&e();var n=0;function s(){++n===t.length&&e&&e()}t.forEach(function(e){var t,n,r;o.attachments&&o.include_docs?(t=e,r=(n=i._attachments[t]).digest,a.objectStore(Ot).get(r).onsuccess=function(e){n.body=e.target.result.body,s()}):(i._attachments[e].stub=!0,s())})}function Yt(e,a){return H.all(e.map(function(o){if(o.doc&&o.doc._attachments){var e=Object.keys(o.doc._attachments);return H.all(e.map(function(n){var r=o.doc._attachments[n];if("body"in r){var e=r.body,i=r.content_type;return new H(function(t){Xt(e,i,a,function(e){o.doc._attachments[n]=M(m(r,["digest","content_type"]),{data:e}),t()})})}}))}}))}function Zt(e,r,t){var i=[],o=t.objectStore(Ht),n=t.objectStore(Ot),a=t.objectStore(Lt),s=e.length;function l(){--s||i.length&&i.forEach(function(t){a.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::ï¿¿",!1,!1)).onsuccess=function(e){e.target.result||n.delete(t)}})}e.forEach(function(e){var t=o.index("_doc_id_rev"),n=r+"::"+e;t.getKey(n).onsuccess=function(e){var t=e.target.result;if("number"!=typeof t)return l();o.delete(t),a.index("seq").openCursor(IDBKeyRange.only(t)).onsuccess=function(e){var t=e.target.result;if(t){var n=t.value.digestSeq.split("::")[0];i.push(n),a.delete(t.primaryKey),t.continue()}else l()}}})}function en(e,t,n){try{return{txn:e.transaction(t,n)}}catch(e){return{error:e}}}var tn=new I;function nn(n,r,e,i,o){var a,s,t;function l(e){s=e.target.result,a&&o(a,s,t)}function u(e){a=e.target.result,s&&o(a,s,t)}function c(e){var t=e.target.result;if(!t)return o();o([t.key],[t.value],t)}"function"==typeof n.getAll&&"function"==typeof n.getAllKeys&&1<i&&!e?(t={continue:function(){if(!a.length)return o();var e,t=a[a.length-1];if(r&&r.upper)try{e=IDBKeyRange.bound(t,r.upper,!0,r.upperOpen)}catch(e){if("DataError"===e.name&&0===e.code)return o()}else e=IDBKeyRange.lowerBound(t,!0);r=e,s=a=null,n.getAll(r,i).onsuccess=l,n.getAllKeys(r,i).onsuccess=u}},n.getAll(r,i).onsuccess=l,n.getAllKeys(r,i).onsuccess=u):e?n.openCursor(r,"prev").onsuccess=c:n.openCursor(r).onsuccess=c}function rn(s,e,t){var n,r,i="startkey"in s&&s.startkey,o="endkey"in s&&s.endkey,a="key"in s&&s.key,l="keys"in s&&s.keys,u=s.skip||0,c="number"==typeof s.limit?s.limit:-1,A=!1!==s.inclusive_end;if(!l&&(r=(n=function(e,t,n,r,i){try{if(e&&t)return i?IDBKeyRange.bound(t,e,!n,!1):IDBKeyRange.bound(e,t,!1,!n);if(e)return i?IDBKeyRange.upperBound(e):IDBKeyRange.lowerBound(e);if(t)return i?IDBKeyRange.lowerBound(t,!n):IDBKeyRange.upperBound(t,!n);if(r)return IDBKeyRange.only(r)}catch(e){return{error:e}}return null}(i,o,A,a,s.descending))&&n.error)&&("DataError"!==r.name||0!==r.code))return t(Z(J,r.name,r.message));var d=[Qt,Ht,Rt];s.attachments&&d.push(Ot);var p=en(e,d,"readonly");if(p.error)return t(p.error);var f=p.txn;f.oncomplete=function(){s.attachments?Yt(B,s.binary).then(x):x()},f.onabort=jt(t);var h,m,g,v,y,w,b,C=f.objectStore(Qt),S=f.objectStore(Ht),E=f.objectStore(Rt),D=S.index("_doc_id_rev"),B=[];function T(e,t){var n,r,i,o,a={id:t.id,key:t.id,value:{rev:e}};t.deleted?l&&(B.push(a),a.value.deleted=!0,a.doc=null):u--<=0&&(B.push(a),s.include_docs&&(r=a,i=e,o=(n=t).id+"::"+i,D.get(o).onsuccess=function(e){if(r.doc=Jt(e.target.result),s.conflicts){var t=we(n);t.length&&(r.doc._conflicts=t)}$t(r.doc,s,f)}))}function I(e){for(var t=0,n=e.length;t<n&&B.length!==c;t++){var r=e[t];if(r.error&&l)B.push(r);else{var i=Gt(r);T(i.winningRev,i)}}}function F(e,t,n){n&&(I(t),B.length<c&&n.continue())}function x(){var e={total_rows:h,offset:s.skip,rows:B};s.update_seq&&void 0!==m&&(e.update_seq=m),t(null,e)}return E.get(Rt).onsuccess=function(e){h=e.target.result.docCount},s.update_seq&&(S.openCursor(null,"prev").onsuccess=function(e){var t,n=e.target.result,r=void 0;return n&&n.key&&(r=n.key),void((t={target:{result:[r]}}).target.result&&0<t.target.result.length&&(m=t.target.result[0]))}),r||0===c?void 0:l?(g=s.keys,v=C,y=F,w=[],b=0,void g.forEach(function(t,n){v.get(t).onsuccess=function(e){e.target.result?w[n]=e.target.result:w[n]={key:t,error:"not_found"},++b===g.length&&y(g,w,{})}})):-1===c?function(e,t,n){if("function"!=typeof e.getAll){var r=[];e.openCursor(t).onsuccess=function(e){var t=e.target.result;t?(r.push(t.value),t.continue()):n({target:{result:r}})}}else e.getAll(t).onsuccess=n}(C,n,function(e){var t=e.target.result;s.descending&&(t=t.reverse()),I(t)}):void nn(C,n,s.descending,c+u,F)}var on=!1,an=[];function sn(){!on&&an.length&&(on=!0,an.shift()())}var ln,un=new F,cn=new F;function An(t,e){var n,r,i,o=this;n=function(e){!function(A,r,d){var p=r.name,f=null;function a(e,i){var o=e.objectStore(Qt);o.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),o.openCursor().onsuccess=function(e){var t=e.target.result;if(t){var n=t.value,r=xe(n);n.deletedOrLocal=r?"1":"0",o.put(n),t.continue()}else i()}}function s(e,d){var p=e.objectStore(Vt),f=e.objectStore(Qt),h=e.objectStore(Ht);f.openCursor().onsuccess=function(e){var n=e.target.result;if(n){var t=n.value,r=t.id,i=_e(r),o=me(t);if(i){var a=r+"::"+o,s=r+"::",l=r+"::~",u=h.index("_doc_id_rev"),c=IDBKeyRange.bound(s,l,!1,!1),A=u.openCursor(c);A.onsuccess=function(e){if(A=e.target.result){var t=A.value;t._doc_id_rev===a&&p.put(t),h.delete(A.primaryKey),A.continue()}else f.delete(n.primaryKey),n.continue()}}else n.continue()}else d&&d()}}function l(e,u){var t=e.objectStore(Ht),n=e.objectStore(Ot),c=e.objectStore(Lt);n.count().onsuccess=function(e){if(!e.target.result)return u();t.openCursor().onsuccess=function(e){var t=e.target.result;if(!t)return u();for(var n=t.value,r=t.primaryKey,i=Object.keys(n._attachments||{}),o={},a=0;a<i.length;a++){o[n._attachments[i[a]].digest]=!0}var s=Object.keys(o);for(a=0;a<s.length;a++){var l=s[a];c.put({seq:r,digestSeq:l+"::"+r})}t.continue()}}}function u(e){var l=e.objectStore(Ht),u=e.objectStore(Qt);u.openCursor().onsuccess=function(e){var t,n=e.target.result;if(n){var r,i,o,a=(t=n.value).data?Gt(t):(t.deleted="1"===t.deletedOrLocal,t);if(a.winningRev=a.winningRev||me(a),a.seq)return s();r=a.id+"::",i=a.id+"::ï¿¿",o=0,l.index("_doc_id_rev").openCursor(IDBKeyRange.bound(r,i)).onsuccess=function(e){var t=e.target.result;if(!t)return a.seq=o,s();var n=t.primaryKey;o<n&&(o=n),t.continue()}}function s(){var e=zt(a,a.winningRev,a.deleted);u.put(e).onsuccess=function(){n.continue()}}}}A._meta=null,A._remote=!1,A.type=function(){return"idb"},A._id=D(function(e){e(null,A._meta.instanceId)}),A._bulkDocs=function(e,t,n){!function(a,e,s,A,t,n){for(var d,p,f,h,m,r,i,o,l=e.docs,u=0,c=l.length;u<c;u++){var g=l[u];g._id&&_e(g._id)||(g=l[u]=vt(g,s.new_edits)).error&&!i&&(i=g)}if(i)return n(i);var v=!1,y=0,w=new Array(l.length),b=new F,C=!1,S=A._meta.blobSupport?"blob":"base64";function E(){v=!0,D()}function D(){o&&v&&(o.docCount+=y,r.put(o))}function B(){C||(tn.notify(A._meta.name),n(null,w))}function T(e,t,n,r,i,o,a,s){e.metadata.winningRev=t,e.metadata.deleted=n;var l=e.data;if(l._id=e.metadata.id,l._rev=e.metadata.rev,r&&(l._deleted=!0),l._attachments&&Object.keys(l._attachments).length)return function(s,l,e,t,n,r){var i=s.data,u=0,o=Object.keys(i._attachments);function c(){u===o.length&&I(s,l,e,t,n,r)}function A(){u++,c()}o.forEach(function(e){var n,r,i,t=s.data._attachments[e];if(t.stub)u++,c();else{var o=t.data;delete t.data,t.revpos=parseInt(l,10);var a=t.digest;n=a,r=o,i=A,h.count(n).onsuccess=function(e){if(e.target.result)return i();var t={digest:n,body:r};h.put(t).onsuccess=i}}})}(e,t,n,i,a,s);y+=o,D(),I(e,t,n,i,a,s)}function I(r,i,o,a,e,t){var n=r.data,s=r.metadata;function l(e){var t=r.stemmedRevs||[];a&&A.auto_compaction&&(t=t.concat(be(r.metadata))),t&&t.length&&Zt(t,r.metadata.id,d),s.seq=e.target.result;var n=zt(s,i,o);p.put(n).onsuccess=u}function u(){w[e]={ok:!0,id:s.id,rev:s.rev},b.set(r.metadata.id,r.metadata),function(e,t,n){var r,i,o,a=0,s=Object.keys(e.data._attachments||{});if(!s.length)return n();function l(){++a===s.length&&n()}for(var u=0;u<s.length;u++)r=s[u],o=void 0,i=e.data._attachments[r].digest,(o=m.put({seq:t,digestSeq:i+"::"+t})).onsuccess=l,o.onerror=function(e){e.preventDefault(),e.stopPropagation(),l()}}(r,s.seq,t)}n._doc_id_rev=s.id+"::"+s.rev,delete n._id,delete n._rev;var c=f.put(n);c.onsuccess=l,c.onerror=function(e){e.preventDefault(),e.stopPropagation(),f.index("_doc_id_rev").getKey(n._doc_id_rev).onsuccess=function(e){f.put(n,e.target.result).onsuccess=l}}}Ut(l,S,function(e){if(e)return n(e);!function(){var e=en(t,[Qt,Ht,Ot,Vt,Lt,Rt],"readwrite");if(e.error)return n(e.error);(d=e.txn).onabort=jt(n),d.ontimeout=jt(n),d.oncomplete=B,p=d.objectStore(Qt),f=d.objectStore(Ht),h=d.objectStore(Ot),m=d.objectStore(Lt),(r=d.objectStore(Rt)).get(Rt).onsuccess=function(e){o=e.target.result,D()},function(t){var i=[];if(l.forEach(function(n){n.data&&n.data._attachments&&Object.keys(n.data._attachments).forEach(function(e){var t=n.data._attachments[e];t.stub&&i.push(t.digest)})}),!i.length)return t();var o,a=0;i.forEach(function(e){var n,r;n=e,r=function(e){e&&!o&&(o=e),++a===i.length&&t(o)},h.get(n).onsuccess=function(e){if(e.target.result)r();else{var t=Z(Y,"unknown stub attachment with digest "+n);t.status=412,r(t)}}})}(function(e){if(e)return C=!0,n(e);!function(){if(l.length)for(var e=0,t=0,n=l.length;t<n;t++){var r=l[t];r._id&&_e(r._id)?i():p.get(r.metadata.id).onsuccess=o}function i(){++e===l.length&&Pt(a.revs_limit,l,A,b,d,w,T,s,E)}function o(e){var t=Gt(e.target.result);t&&b.set(t.id,t),i()}}()})}()})}(r,e,t,A,f,n)},A._get=function(e,i,t){var o,a,s,l=i.ctx;if(!l){var n=en(f,[Qt,Ht,Ot],"readonly");if(n.error)return t(n.error);l=n.txn}function u(){t(s,{doc:o,metadata:a,ctx:l})}l.objectStore(Qt).get(e).onsuccess=function(e){if(!(a=Gt(e.target.result)))return s=Z(U,"missing"),u();var t;if(i.rev)t=i.latest?Me(i.rev,a):i.rev;else if(t=a.winningRev,xe(a))return s=Z(U,"deleted"),u();var n=l.objectStore(Ht),r=a.id+"::"+t;n.index("_doc_id_rev").get(r).onsuccess=function(e){if((o=e.target.result)&&(o=Jt(o)),!o)return s=Z(U,"missing"),u();u()}}},A._getAttachment=function(e,t,n,r,i){var o;if(r.ctx)o=r.ctx;else{var a=en(f,[Qt,Ht,Ot],"readonly");if(a.error)return i(a.error);o=a.txn}var s=n.digest,l=n.content_type;o.objectStore(Ot).get(s).onsuccess=function(e){Xt(e.target.result.body,l,r.binary,function(e){i(null,e)})}},A._info=function(e){var n,t,r=en(f,[Rt,Ht],"readonly");if(r.error)return e(r.error);var i=r.txn;i.objectStore(Rt).get(Rt).onsuccess=function(e){t=e.target.result.docCount},i.objectStore(Ht).openCursor(null,"prev").onsuccess=function(e){var t=e.target.result;n=t?t.key:0},i.oncomplete=function(){e(null,{doc_count:t,update_seq:n,idb_attachment_format:A._meta.blobSupport?"binary":"base64"})}},A._allDocs=function(e,t){rn(e,f,t)},A._changes=function(e){return function(u,e,t,n){if((u=O(u)).continuous){var r=t+":"+he();return tn.addListener(t,r,e,u),tn.notify(t),{cancel:function(){tn.removeListener(t,r)}}}var c=u.doc_ids&&new E(u.doc_ids);u.since=u.since||0;var A,d=u.since,p="limit"in u?u.limit:-1;0===p&&(p=1),A="return_docs"in u?u.return_docs:!("returnDocs"in u)||u.returnDocs;var f,i,h,o,m=[],g=0,v=te(u),y=new F;function w(e,t,n,r){if(n.seq!==t)return r();if(n.winningRev===e._rev)return r(n,e);var i=e._id+"::"+n.winningRev;o.get(i).onsuccess=function(e){r(n,Jt(e.target.result))}}function a(){u.complete(null,{results:m,last_seq:d})}var s=[Qt,Ht];u.attachments&&s.push(Ot);var l=en(n,s,"readonly");if(l.error)return u.complete(l.error);(f=l.txn).onabort=jt(u.complete),f.oncomplete=function(){!u.continuous&&u.attachments?Yt(m).then(a):a()},i=f.objectStore(Ht),h=f.objectStore(Qt),o=i.index("_doc_id_rev"),nn(i,u.since&&!u.descending?IDBKeyRange.lowerBound(u.since,!0):null,u.descending,p,function(r,e,i){if(i&&r.length){var o=new Array(r.length),a=new Array(r.length),s=0;e.forEach(function(e,n){!function(t,n,r){if(c&&!c.has(t._id))return r();var i=y.get(t._id);if(i)return w(t,n,i,r);h.get(t._id).onsuccess=function(e){i=Gt(e.target.result),y.set(t._id,i),w(t,n,i,r)}}(Jt(e),r[n],function(e,t){a[n]=e,o[n]=t,++s===r.length&&function(){for(var e=0,t=o.length;e<t&&g!==p;e++){var n=o[e];n&&l(a[e],n)}g!==p&&i.continue()}()})})}function l(e,t){var n=u.processChange(t,e,u);d=n.seq=e.seq;var r=v(n);if("object"==typeof r)return u.complete(r);r&&(g++,A&&m.push(n),u.attachments&&u.include_docs?$t(t,u,f,function(){Yt([n],u.binary).then(function(){u.onChange(n)})}):u.onChange(n))}})}(e,A,p,f)},A._close=function(e){f.close(),un.delete(p),e()},A._getRevisionTree=function(e,n){var t=en(f,[Qt],"readonly");if(t.error)return n(t.error);t.txn.objectStore(Qt).get(e).onsuccess=function(e){var t=Gt(e.target.result);t?n(null,t.rev_tree):n(Z(U))}},A._doCompaction=function(i,a,e){var t=en(f,[Qt,Ht,Ot,Lt],"readwrite");if(t.error)return e(t.error);var o=t.txn;o.objectStore(Qt).get(i).onsuccess=function(e){var t=Gt(e.target.result);ge(t.rev_tree,function(e,t,n,r,i){var o=t+"-"+n;-1!==a.indexOf(o)&&(i.status="missing")}),Zt(a,i,o);var n=t.winningRev,r=t.deleted;o.objectStore(Qt).put(zt(t,n,r))},o.onabort=jt(e),o.oncomplete=function(){e()}},A._getLocal=function(e,n){var t=en(f,[Vt],"readonly");if(t.error)return n(t.error);var r=t.txn.objectStore(Vt).get(e);r.onerror=jt(n),r.onsuccess=function(e){var t=e.target.result;t?(delete t._doc_id_rev,n(null,t)):n(Z(U))}},A._putLocal=function(n,r,i){"function"==typeof r&&(i=r,r={}),delete n._revisions;var o=n._rev,e=n._id;n._rev=o?"0-"+(parseInt(o.split("-")[1],10)+1):"0-1";var a,t=r.ctx;if(!t){var s=en(f,[Vt],"readwrite");if(s.error)return i(s.error);(t=s.txn).onerror=jt(i),t.oncomplete=function(){a&&i(null,a)}}var l,u=t.objectStore(Vt);o?(l=u.get(e)).onsuccess=function(e){var t=e.target.result;t&&t._rev===o?u.put(n).onsuccess=function(){a={ok:!0,id:n._id,rev:n._rev},r.ctx&&i(null,a)}:i(Z(P))}:((l=u.add(n)).onerror=function(e){i(Z(P)),e.preventDefault(),e.stopPropagation()},l.onsuccess=function(){a={ok:!0,id:n._id,rev:n._rev},r.ctx&&i(null,a)})},A._removeLocal=function(n,r,i){"function"==typeof r&&(i=r,r={});var o,e=r.ctx;if(!e){var t=en(f,[Vt],"readwrite");if(t.error)return i(t.error);(e=t.txn).oncomplete=function(){o&&i(null,o)}}var a=n._id,s=e.objectStore(Vt),l=s.get(a);l.onerror=jt(i),l.onsuccess=function(e){var t=e.target.result;t&&t._rev===n._rev?(s.delete(a),o={ok:!0,id:a,rev:"0-0"},r.ctx&&i(null,o)):i(Z(U))}},A._destroy=function(e,t){tn.removeAllListeners(p);var n=cn.get(p);n&&n.result&&(n.result.close(),un.delete(p));var r=indexedDB.deleteDatabase(p);r.onsuccess=function(){cn.delete(p),T()&&p in localStorage&&delete localStorage[p],t(null,{ok:!0})},r.onerror=jt(t)};var e,t=un.get(p);if(t)return f=t.idb,A._meta=t.global,S(function(){d(null,A)});e=r.storage?function(e,t){try{return indexedDB.open(e,{version:5,storage:t})}catch(t){return indexedDB.open(e,5)}}(p,r.storage):indexedDB.open(p,5),cn.set(p,e),e.onupgradeneeded=function(e){var t=e.target.result;if(e.oldVersion<1)return function(e){var t=e.createObjectStore(Qt,{keyPath:"id"});e.createObjectStore(Ht,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.createObjectStore(Ot,{keyPath:"digest"}),e.createObjectStore(Rt,{keyPath:"id",autoIncrement:!1}),e.createObjectStore(qt),t.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),e.createObjectStore(Vt,{keyPath:"_id"});var n=e.createObjectStore(Lt,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}(t);var n,r=e.currentTarget.transaction;e.oldVersion<3&&t.createObjectStore(Vt,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),e.oldVersion<4&&((n=t.createObjectStore(Lt,{autoIncrement:!0})).createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0}));var i=[a,s,l,u],o=e.oldVersion;!function e(){var t=i[o-1];o++,t&&t(r,e)}()},e.onsuccess=function(e){(f=e.target.result).onversionchange=function(){f.close(),un.delete(p)},f.onabort=function(e){x("error","Database has a global failure",e.target.error),f.close(),un.delete(p)};var t,n,r,i,o,a,s=f.transaction([Rt,qt,Qt],"readwrite"),l=!1;function u(){void 0!==r&&l&&(A._meta={name:p,instanceId:i,blobSupport:r},un.set(p,{idb:f,global:A._meta}),d(null,A))}function c(){if(void 0!==n&&void 0!==t){var e=p+"_id";e in t?i=t[e]:t[e]=i=he(),t.docCount=n,s.objectStore(Rt).put(t)}}s.objectStore(Rt).get(Rt).onsuccess=function(e){t=e.target.result||{id:Rt},c()},o=function(e){n=e,c()},s.objectStore(Qt).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(e){o(e.target.result)},ln||(a=s,ln=new H(function(n){var e=bt([""]);a.objectStore(qt).put(e,"key").onsuccess=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),t=navigator.userAgent.match(/Edge\//);n(t||!e||43<=parseInt(e[1],10))},a.onabort=function(e){e.preventDefault(),e.stopPropagation(),n(!1)}}).catch(function(){return!1})),ln.then(function(e){r=e,u()}),s.oncomplete=function(){l=!0,u()},s.onabort=jt(d)},e.onerror=function(){var e="Failed to open indexedDB, are you in private browsing mode?";x("error",e),d(Z(J,e))}}(o,t,e)},r=e,i=o.constructor,an.push(function(){n(function(e,t){!function(e,t,n,r){try{e(t,n)}catch(t){r.emit("error",t)}}(r,e,t,i),on=!1,S(function(){sn()})})}),sn()}function dn(e){return e<65?e-48:e-55}function pn(e,t){return"UTF-8"===t?(n=function(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(dn(e.charCodeAt(t++))<<4|dn(e.charCodeAt(t++)));return r}(e,0,e.length),decodeURIComponent(escape(n))):function(e,t,n){for(var r="";t<n;)r+=String.fromCharCode(dn(e.charCodeAt(t+2))<<12|dn(e.charCodeAt(t+3))<<8|dn(e.charCodeAt(t))<<4|dn(e.charCodeAt(t+1))),t+=4;return r}(e,0,e.length);var n}function fn(e){return"'"+e+"'"}An.valid=function(){var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");try{return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}};var hn=7,mn=fn("document-store"),gn=fn("by-sequence"),vn=fn("attach-store"),yn=fn("local-store"),wn=fn("metadata-store"),bn=fn("attach-seq-store");function Cn(e){return delete e._id,delete e._rev,JSON.stringify(e)}function Sn(e,t,n){return(e=JSON.parse(e))._id=t,e._rev=n,e}function En(e){for(var t="(";e--;)t+="?",e&&(t+=",");return t+")"}function Dn(e,t,n,r,i){return"SELECT "+e+" FROM "+("string"==typeof t?t:t.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function Bn(e,n,r){if(e.length){var t=0,o=[];e.forEach(function(e){var t="SELECT seq FROM "+gn+" WHERE doc_id=? AND rev=?";r.executeSql(t,[n,e],function(e,t){if(!t.rows.length)return i();var n=t.rows.item(0).seq;o.push(n),e.executeSql("DELETE FROM "+gn+" WHERE seq=?",[n],i)})})}function i(){++t===e.length&&function(){if(o.length){var e="SELECT DISTINCT digest AS digest FROM "+bn+" WHERE seq IN "+En(o.length);r.executeSql(e,o,function(e,t){for(var i=[],n=0;n<t.rows.length;n++)i.push(t.rows.item(n).digest);if(i.length){var r="DELETE FROM "+bn+" WHERE seq IN ("+o.map(function(){return"?"}).join(",")+")";e.executeSql(r,o,function(e){var t="SELECT digest FROM "+bn+" WHERE digest IN ("+i.map(function(){return"?"}).join(",")+")";e.executeSql(t,i,function(t,e){for(var n=new E,r=0;r<e.rows.length;r++)n.add(e.rows.item(r).digest);i.forEach(function(e){n.has(e)||(t.executeSql("DELETE FROM "+bn+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+vn+" WHERE digest=?",[e]))})})})}})}}()}}function Tn(r){return function(e){x("error","WebSQL threw an error",e);var t=e&&e.constructor.toString().match(/function ([^(]+)/),n=(t&&t[1]||e.type,e.target||e.message);r(Z(X,n))}}function In(e,t,n,g,r,i,o){var v,a=n.new_edits,l=t.docs.map(function(e){return e._id&&_e(e._id)?e:vt(e,a)}),s=l.filter(function(e){return e.error});if(s.length)return o(s[0]);var u,y=new Array(l.length),w=new F;function c(){if(u)return o(u);i.notify(g._name),o(null,y)}function A(A,l,e,n,u,t,c,d){function r(){var u=A.data,o=n?1:0,a=u._id,s=u._rev,l=Cn(u),e="INSERT INTO "+gn+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",t=[a,s,l,o];function c(e,t){var n,r,i,o=0,a=Object.keys(u._attachments||{});if(!a.length)return t();function s(){return++o===a.length&&t(),!1}for(var l=0;l<a.length;l++)n=a[l],r="INSERT INTO "+bn+" (digest, seq) VALUES (?,?)",i=[u._attachments[n].digest,e],v.executeSql(r,i,s,s)}v.executeSql(e,t,function(e,t){var n=t.insertId;c(n,function(){m(e,n)})},function(){var e=Dn("seq",gn,null,"doc_id=? AND rev=?");return v.executeSql(e,[a,s],function(e,t){var n=t.rows.item(0).seq,r="UPDATE "+gn+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",i=[l,o,a,s];e.executeSql(r,i,function(e){c(n,function(){m(e,n)})})}),!1})}function p(e){i||(e?d(i=e):f===o.length&&r())}var i=null,f=0;A.data._id=A.metadata.id,A.data._rev=A.metadata.rev;var o=Object.keys(A.data._attachments||{});function h(e){f++,p(e)}function m(e,t){var n=A.metadata.id,r=A.stemmedRevs||[];u&&g.auto_compaction&&(r=be(A.metadata).concat(r)),r.length&&Bn(r,n,e),A.metadata.seq=t;var i=A.metadata.rev;delete A.metadata.rev;var o=u?"UPDATE "+mn+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+gn+" WHERE doc_id="+mn+".id AND rev=?) WHERE id=?":"INSERT INTO "+mn+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",a=Wt(A.metadata),s=u?[a,t,l,n]:[n,t,t,a];e.executeSql(o,s,function(){y[c]={ok:!0,id:A.metadata.id,rev:i},w.set(n,A.metadata),d()})}n&&(A.data._deleted=!0),o.forEach(function(e){var r,i,o,a,t=A.data._attachments[e];if(t.stub)f++,p();else{var n=t.data;delete t.data,t.revpos=parseInt(l,10);var s=t.digest;r=s,i=n,o=h,a="SELECT digest FROM "+vn+" WHERE digest=?",v.executeSql(a,[r],function(e,t){if(t.rows.length)return o();var n;a="INSERT INTO "+vn+" (digest, body, escaped) VALUES (?,?,1)",e.executeSql(a,[r,(n=i,n.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,""))],function(){o()},function(){return o(),!1})})}}),o.length||r()}function d(){Pt(e.revs_limit,l,g,w,v,y,A,n)}Ut(l,"binary",function(e){if(e)return o(e);r.transaction(function(e){v=e,function(n){var o=[];if(l.forEach(function(n){n.data&&n.data._attachments&&Object.keys(n.data._attachments).forEach(function(e){var t=n.data._attachments[e];t.stub&&o.push(t.digest)})}),!o.length)return n();var a,s=0;o.forEach(function(e){var r,i,t;r=e,i=function(e){e&&!a&&(a=e),++s===o.length&&n(a)},t="SELECT count(*) as cnt FROM "+vn+" WHERE digest=?",v.executeSql(t,[r],function(e,t){if(0===t.rows.item(0).cnt){var n=Z(Y,"unknown stub attachment with digest "+r);i(n)}else i()})})}(function(e){e?u=e:function(e){if(!l.length)return e();var t=0;function i(){++t===l.length&&e()}l.forEach(function(e){if(e._id&&_e(e._id))return i();var r=e.metadata.id;v.executeSql("SELECT json FROM "+mn+" WHERE id = ?",[r],function(e,t){if(t.rows.length){var n=Kt(t.rows.item(0).json);w.set(r,n)}i()})})}(d)})},Tn(o),c)})}var Fn=new F,xn=new I;function _n(o,a,s,l,e){var t=Object.keys(o._attachments||{});if(!t.length)return e&&e();var n=0;function u(){++n===t.length&&e&&e()}t.forEach(function(e){var n,r,i,t;a.attachments&&a.include_docs?(r=e,i=(n=o)._attachments[r],t={binary:a.binary,ctx:l},s._getAttachment(n._id,r,i,t,function(e,t){n._attachments[r]=M(m(i,["digest","content_type"]),{data:t}),u()})):(o._attachments[e].stub=!0,u())})}var Mn=1,Nn="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+gn+" (seq, deleted)",kn="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+gn+" (doc_id, rev)",Un="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+mn+" (winningseq)",Pn="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+bn+" (seq)",Qn="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+bn+" (digest, seq)",Hn=gn+".seq = "+mn+".winningseq",On=gn+".seq AS seq, "+gn+".deleted AS deleted, "+gn+".json AS data, "+gn+".rev AS rev, "+mn+".json AS metadata";function Ln(e,t,n,r){return openDatabase(e,t,n,r)}function Rn(e,t){x("warn","WebSQL is deprecated and will be removed in future releases of PouchDB. Please migrate to IndexedDB: https://pouchdb.com/2018/01/23/pouchdb-6.4.2.html");var n=M({websql:Ln},e);(function(r,e){var t,c,v=this,A=null,n="size"in(t=r)?1e6*t.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1,i=[];v._name=r.name;var o,a,s=(o=M({},r,{version:Mn,description:r.name,size:n}),(a=Fn.get(o.name))||(a=function(e){try{return{db:(t=e,t.websql(t.name,t.version,t.description,t.size))}}catch(e){return{error:e}}var t}(o),Fn.set(o.name,a)),a);if(s.error)return Tn(e)(s.error);var y=s.db;function d(t,l){t.executeSql(Un),t.executeSql("ALTER TABLE "+gn+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(Nn),t.executeSql("ALTER TABLE "+mn+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+mn+" (local, id)");var e="SELECT "+mn+".winningseq AS seq, "+mn+".json AS metadata FROM "+gn+" JOIN "+mn+" ON "+gn+".seq = "+mn+".winningseq";t.executeSql(e,[],function(e,t){for(var n=[],r=[],i=0;i<t.rows.length;i++){var o=t.rows.item(i),a=o.seq,s=JSON.parse(o.metadata);xe(s)&&n.push(a),_e(s.id)&&r.push(s.id)}e.executeSql("UPDATE "+mn+"SET local = 1 WHERE id IN "+En(r.length),r,function(){e.executeSql("UPDATE "+gn+" SET deleted = 1 WHERE seq IN "+En(n.length),n,l)})})})})}function p(t,o){var e="CREATE TABLE IF NOT EXISTS "+yn+" (id UNIQUE, rev, json)";t.executeSql(e,[],function(){var e="SELECT "+mn+".id AS id, "+gn+".json AS data FROM "+gn+" JOIN "+mn+" ON "+gn+".seq = "+mn+".winningseq WHERE local = 1";t.executeSql(e,[],function(r,e){for(var i=[],t=0;t<e.rows.length;t++)i.push(e.rows.item(t));!function t(){if(!i.length)return o(r);var n=i.shift(),e=JSON.parse(n.data)._rev;r.executeSql("INSERT INTO "+yn+" (id, rev, json) VALUES (?,?,?)",[n.id,e,n.data],function(e){e.executeSql("DELETE FROM "+mn+" WHERE id=?",[n.id],function(e){e.executeSql("DELETE FROM "+gn+" WHERE seq=?",[n.seq],function(){t()})})})}()})})}function f(s,l){var e="ALTER TABLE "+gn+" ADD COLUMN doc_id";s.executeSql(e,[],function(e){var t="ALTER TABLE "+gn+" ADD COLUMN rev";e.executeSql(t,[],function(e){e.executeSql(kn,[],function(e){var t="SELECT hex(doc_id_rev) as hex FROM "+gn;e.executeSql(t,[],function(e,t){for(var a,n=[],r=0;r<t.rows.length;r++)n.push(t.rows.item(r));a=n,function e(){if(!a.length)return l(s);var t=pn(a.shift().hex,c),n=t.lastIndexOf("::"),r=t.substring(0,n),i=t.substring(n+2),o="UPDATE "+gn+" SET doc_id=?, rev=? WHERE doc_id_rev=?";s.executeSql(o,[r,i,t],function(){e()})}()})})})})}function h(e,f){function t(e){var t="SELECT COUNT(*) AS cnt FROM "+vn;e.executeSql(t,[],function(t,e){if(!e.rows.item(0).cnt)return f(t);var n=0;!function p(){var e=Dn(On+", "+mn+".id AS id",[mn,gn],Hn,null,mn+".id ");e+=" LIMIT 10 OFFSET "+n,n+=10,t.executeSql(e,[],function(n,e){if(!e.rows.length)return f(n);for(var t,r,i,o={},a=0;a<e.rows.length;a++)for(var s=e.rows.item(a),l=Sn(s.data,s.id,s.rev),u=Object.keys(l._attachments||{}),c=0;c<u.length;c++)t=l._attachments[u[c]].digest,r=s.seq,i=void 0,-1===(i=o[t]=o[t]||[]).indexOf(r)&&i.push(r);var A=[];if(Object.keys(o).forEach(function(t){o[t].forEach(function(e){A.push([t,e])})}),!A.length)return p();var d=0;A.forEach(function(e){var t="INSERT INTO "+bn+" (digest, seq) VALUES (?,?)";n.executeSql(t,e,function(){++d===A.length&&p()})})})}()})}var n="CREATE TABLE IF NOT EXISTS "+bn+" (digest, seq INTEGER)";e.executeSql(n,[],function(e){e.executeSql(Qn,[],function(e){e.executeSql(Pn,[],t)})})}function m(e,t){var n="ALTER TABLE "+vn+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";e.executeSql(n,[],t)}function g(e,n){var t="ALTER TABLE "+mn+" ADD COLUMN max_seq INTEGER";e.executeSql(t,[],function(e){var t="UPDATE "+mn+" SET max_seq=(SELECT MAX(seq) FROM "+gn+" WHERE doc_id=id)";e.executeSql(t,[],function(e){var t="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+mn+" (max_seq)";e.executeSql(t,[],n)})})}function w(){for(;0<i.length;)i.pop()(null,A)}function l(n,t){if(0===t){var e="CREATE TABLE IF NOT EXISTS "+wn+" (dbid, db_version INTEGER)",r="CREATE TABLE IF NOT EXISTS "+vn+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",i="CREATE TABLE IF NOT EXISTS "+bn+" (digest, seq INTEGER)",o="CREATE TABLE IF NOT EXISTS "+mn+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",a="CREATE TABLE IF NOT EXISTS "+gn+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",s="CREATE TABLE IF NOT EXISTS "+yn+" (id UNIQUE, rev, json)";n.executeSql(r),n.executeSql(s),n.executeSql(i,[],function(){n.executeSql(Pn),n.executeSql(Qn)}),n.executeSql(o,[],function(){n.executeSql(Un),n.executeSql(a,[],function(){n.executeSql(Nn),n.executeSql(kn),n.executeSql(e,[],function(){var e="INSERT INTO "+wn+" (db_version, dbid) VALUES (?,?)";A=he();var t=[hn,A];n.executeSql(e,t,function(){w()})})})})}else{var l=[d,p,f,h,m,g,function(){t<hn&&n.executeSql("UPDATE "+wn+" SET db_version = "+hn);var e="SELECT dbid FROM "+wn;n.executeSql(e,[],function(e,t){A=t.rows.item(0).dbid,w()})}],u=t,c=function(e){l[u-1](e,c),u++};c(n)}}function b(e,r){var t="SELECT MAX(seq) AS seq FROM "+gn;e.executeSql(t,[],function(e,t){var n=t.rows.item(0).seq||0;r(n)})}function C(e,n){var t=Dn("COUNT("+mn+".id) AS 'num'",[mn,gn],Hn,gn+".deleted=0");e.executeSql(t,[],function(e,t){n(t.rows.item(0).num)})}"function"!=typeof y.readTransaction&&(y.readTransaction=y.transaction),y.transaction(function(t){var r;r=function(){var e;e="SELECT sql FROM sqlite_master WHERE tbl_name = "+wn,t.executeSql(e,[],function(e,t){t.rows.length?/db_version/.test(t.rows.item(0).sql)?e.executeSql("SELECT db_version FROM "+wn,[],function(e,t){l(e,t.rows.item(0).db_version)}):e.executeSql("ALTER TABLE "+wn+" ADD COLUMN db_version INTEGER",[],function(){l(e,1)}):l(e,0)})},t.executeSql('SELECT HEX("a") AS hex',[],function(e,t){var n=t.rows.item(0).hex;c=2===n.length?"UTF-8":"UTF-16",r()})},Tn(e),function(){T()&&(window.localStorage["_pouch__websqldb_"+v._name]=!0),e(null,v)}),v._remote=!1,v.type=function(){return"websql"},v._id=D(function(e){e(null,A)}),v._info=function(e){var t,n;y.readTransaction(function(e){b(e,function(e){t=e}),C(e,function(e){n=e})},Tn(e),function(){e(null,{doc_count:n,update_seq:t,websql_encoding:c})})},v._bulkDocs=function(e,t,n){In(r,e,t,v,y,xn,n)},v._get=function(t,r,n){var i,o,e,a,s,l,u,c,A,d,p,f=r.ctx;if(!f)return y.readTransaction(function(e){v._get(t,M({ctx:e},r),n)});function h(e){n(e,{doc:i,metadata:o,ctx:f})}if(r.rev){if(r.latest)return s=f,l=t,u=r.rev,c=function(e){r.latest=!1,r.rev=e,v._get(t,r,n)},A=h,d=Dn(On,[mn,gn],Hn,mn+".id=?"),p=[l],void s.executeSql(d,p,function(e,t){if(!t.rows.length){var n=Z(U,"missing");return A(n)}var r=Kt(t.rows.item(0).metadata);c(Me(u,r))});e=Dn(On,[mn,gn],mn+".id="+gn+".doc_id",[gn+".doc_id=?",gn+".rev=?"]),a=[t,r.rev]}else e=Dn(On,[mn,gn],Hn,mn+".id=?"),a=[t];f.executeSql(e,a,function(e,t){if(!t.rows.length)return h(Z(U,"missing"));var n=t.rows.item(0);if(o=Kt(n.metadata),n.deleted&&!r.rev)return h(Z(U,"deleted"));i=Sn(n.data,o.id,n.rev),h()})},v._allDocs=function(d,t){var n,r,p=[],e="startkey"in d&&d.startkey,i="endkey"in d&&d.endkey,o="key"in d&&d.key,f="keys"in d&&d.keys,a="descending"in d&&d.descending,s="limit"in d?d.limit:-1,l="skip"in d?d.skip:0,u=!1!==d.inclusive_end,c=[],A=[];if(f){var h=[],m="";f.forEach(function(e){-1===h.indexOf(e)&&(h.push(e),m+="?,")}),m=m.substring(0,m.length-1),A.push(mn+".id IN ("+m+")"),c=c.concat(h)}else if(!1!==o)A.push(mn+".id = ?"),c.push(o);else if(!1!==e||!1!==i){if(!1!==e&&(A.push(mn+".id "+(a?"<=":">=")+" ?"),c.push(e)),!1!==i){var g=a?">":"<";u&&(g+="="),A.push(mn+".id "+g+" ?"),c.push(i)}!1!==o&&(A.push(mn+".id = ?"),c.push(o))}f||A.push(gn+".deleted = 0"),y.readTransaction(function(e){if(C(e,function(e){n=e}),d.update_seq&&b(e,function(e){r=e}),0!==s){var t=Dn(On,[mn,gn],Hn,A,mn+".id "+(a?"DESC":"ASC"));t+=" LIMIT "+s+" OFFSET "+l,e.executeSql(t,c,function(e,t){for(var n=0,r=t.rows.length;n<r;n++){var i=t.rows.item(n),o=Kt(i.metadata),a=o.id,s=Sn(i.data,a,i.rev),l=s._rev,u={id:a,key:a,value:{rev:l}};if(d.include_docs){if(u.doc=s,u.doc._rev=l,d.conflicts){var c=we(o);c.length&&(u.doc._conflicts=c)}_n(u.doc,d,v,e)}if(i.deleted){if(!f)continue;u.value.deleted=!0,u.doc=null}if(f)for(var A=f.indexOf(a,A);p[A]=u,-1<(A=f.indexOf(a,A+1))&&A<f.length;);else p.push(u)}f&&f.forEach(function(e,t){p[t]||(p[t]={key:e,error:"not_found"})})})}},Tn(t),function(){var e={total_rows:n,offset:d.skip,rows:p};d.update_seq&&(e.update_seq=r),t(null,e)})},v._changes=function(d){if((d=O(d)).continuous){var e=v._name+":"+he();return xn.addListener(v._name,e,v,d),xn.notify(v._name),{cancel:function(){xn.removeListener(v._name,e)}}}var a=d.descending;d.since=d.since&&!a?d.since:0;var p,f="limit"in d?d.limit:-1;0===f&&(f=1),p="return_docs"in d?d.return_docs:!("returnDocs"in d)||d.returnDocs;var h=[],m=0;!function(){var e=mn+".json AS metadata, "+mn+".max_seq AS maxSeq, "+gn+".json AS winningDoc, "+gn+".rev AS winningRev ",t=mn+" JOIN "+gn,n=mn+".id="+gn+".doc_id AND "+mn+".winningseq="+gn+".seq",r=["maxSeq > ?"],i=[d.since];d.doc_ids&&(r.push(mn+".id IN "+En(d.doc_ids.length)),i=i.concat(d.doc_ids));var o=Dn(e,t,n,r,"maxSeq "+(a?"DESC":"ASC")),c=te(d);d.view||d.filter||(o+=" LIMIT "+f);var A=d.since||0;y.readTransaction(function(e){e.executeSql(o,i,function(e,t){function n(e){return function(){d.onChange(e)}}for(var r=0,i=t.rows.length;r<i;r++){var o=t.rows.item(r),a=Kt(o.metadata);A=o.maxSeq;var s=Sn(o.winningDoc,a.id,o.winningRev),l=d.processChange(s,a,d);l.seq=o.maxSeq;var u=c(l);if("object"==typeof u)return d.complete(u);if(u&&(m++,p&&h.push(l),d.attachments&&d.include_docs?_n(s,d,v,e,n(l)):n(l)()),m===f)break}})},Tn(d.complete),function(){d.continuous||d.complete(null,{results:h,last_seq:A})})}()},v._close=function(e){e()},v._getAttachment=function(e,t,n,i,o){var a,r=i.ctx,s=n.digest,l=n.content_type,u="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+vn+" WHERE digest=?";r.executeSql(u,[s],function(e,t){var n=t.rows.item(0),r=n.escaped?n.body.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""):pn(n.body,c);a=i.binary?Ct(r,l):wt(r),o(null,a)})},v._getRevisionTree=function(n,r){y.readTransaction(function(e){var t="SELECT json AS metadata FROM "+mn+" WHERE id = ?";e.executeSql(t,[n],function(e,t){if(t.rows.length){var n=Kt(t.rows.item(0).metadata);r(null,n.rev_tree)}else r(Z(U))})})},v._doCompaction=function(i,a,e){if(!a.length)return e();y.transaction(function(e){var t="SELECT json AS metadata FROM "+mn+" WHERE id = ?";e.executeSql(t,[i],function(e,t){var n=Kt(t.rows.item(0).metadata);ge(n.rev_tree,function(e,t,n,r,i){var o=t+"-"+n;-1!==a.indexOf(o)&&(i.status="missing")});var r="UPDATE "+mn+" SET json = ? WHERE id = ?";e.executeSql(r,[Wt(n),i])}),Bn(a,i,e)},Tn(e),function(){e()})},v._getLocal=function(i,o){y.readTransaction(function(e){var t="SELECT json, rev FROM "+yn+" WHERE id=?";e.executeSql(t,[i],function(e,t){if(t.rows.length){var n=t.rows.item(0),r=Sn(n.json,i,n.rev);o(null,r)}else o(Z(U))})})},v._putLocal=function(e,r,i){"function"==typeof r&&(i=r,r={}),delete e._revisions;var o,a=e._rev,s=e._id;o=e._rev=a?"0-"+(parseInt(a.split("-")[1],10)+1):"0-1";var l,u=Cn(e);function t(e){var t,n;n=a?(t="UPDATE "+yn+" SET rev=?, json=? WHERE id=? AND rev=?",[o,u,s,a]):(t="INSERT INTO "+yn+" (id, rev, json) VALUES (?,?,?)",[s,o,u]),e.executeSql(t,n,function(e,t){t.rowsAffected?(l={ok:!0,id:s,rev:o},r.ctx&&i(null,l)):i(Z(P))},function(){return i(Z(P)),!1})}r.ctx?t(r.ctx):y.transaction(t,Tn(i),function(){l&&i(null,l)})},v._removeLocal=function(r,i,o){var a;function e(e){var t="DELETE FROM "+yn+" WHERE id=? AND rev=?",n=[r._id,r._rev];e.executeSql(t,n,function(e,t){if(!t.rowsAffected)return o(Z(U));a={ok:!0,id:r._id,rev:"0-0"},i.ctx&&o(null,a)})}"function"==typeof i&&(o=i,i={}),i.ctx?e(i.ctx):y.transaction(e,Tn(o),function(){a&&o(null,a)})},v._destroy=function(e,t){xn.removeAllListeners(v._name),y.transaction(function(t){[mn,gn,vn,wn,yn,bn].forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},Tn(t),function(){T()&&(delete window.localStorage["_pouch__websqldb_"+v._name],delete window.localStorage[v._name]),t(null,{ok:!0})})}}).call(this,n,t)}Rn.valid=function(){return"function"==typeof openDatabase&&function(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var e=T(),t="_pouch__websqldb_valid_"+navigator.userAgent;if(e&&localStorage[t])return"1"===localStorage[t];var n=function(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(e){return!1}}();return e&&(localStorage[t]=n?"1":"0"),n}()},Rn.use_prefix=!0;var Vn=function(){try{return new XMLHttpRequest,!0}catch(e){return!1}}();function qn(e,t){return Vn||e.xhr?function(r,i){var o,e,a=!1,t=function(){a=!0,o.abort(),s()},n={abort:function(){o.abort(),s()}},s=function(){clearTimeout(e),n.abort=function(){},o&&(o.onprogress=void 0,o.upload&&(o.upload.onprogress=void 0),o.onreadystatechange=void 0,o=void 0)};o=r.xhr?new r.xhr:new XMLHttpRequest;try{o.open(r.method,r.url)}catch(r){return i(new Error(r.name||"Url is invalid"))}for(var l in o.withCredentials=!("withCredentials"in r)||r.withCredentials,"GET"===r.method?delete r.headers["Content-Type"]:r.json&&(r.headers.Accept="application/json",r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json",r.body&&r.processData&&"string"!=typeof r.body&&(r.body=JSON.stringify(r.body))),r.binary&&(o.responseType="arraybuffer"),"body"in r||(r.body=null),r.headers)r.headers.hasOwnProperty(l)&&o.setRequestHeader(l,r.headers[l]);return 0<r.timeout&&(e=setTimeout(t,r.timeout),o.onprogress=function(){clearTimeout(e),4!==o.readyState&&(e=setTimeout(t,r.timeout))},void 0!==o.upload&&(o.upload.onprogress=o.onprogress)),o.onreadystatechange=function(){if(4===o.readyState){var e={statusCode:o.status};if(200<=o.status&&o.status<300){var t;t=r.binary?bt([o.response||""],{type:o.getResponseHeader("Content-Type")}):o.responseText,i(null,e,t)}else{var n={};if(a)(n=new Error("ETIMEDOUT")).code="ETIMEDOUT";else if("string"==typeof o.response&&""!==o.response)try{n=JSON.parse(o.response)}catch(e){}n.status=o.status,i(n)}s()}},r.body&&r.body instanceof Blob?It(r.body,function(e){o.send(e)}):o.send(r.body),n}(e,t):(n=e,r=t,s=new Headers,l={method:n.method,credentials:"include",headers:s},n.json&&(s.set("Accept","application/json"),s.set("Content-Type",n.headers["Content-Type"]||"application/json")),n.body&&n.processData&&"string"!=typeof n.body?l.body=JSON.stringify(n.body):l.body="body"in n?n.body:null,Object.keys(n.headers).forEach(function(e){n.headers.hasOwnProperty(e)&&s.set(e,n.headers[e])}),i=function(){for(var n={},e=new H(function(e,t){n.resolve=e,n.reject=t}),t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];return n.promise=e,H.resolve().then(function(){return fetch.apply(null,t)}).then(function(e){n.resolve(e)}).catch(function(e){n.reject(e)}),n}(n.url,l),0<n.timeout&&(o=setTimeout(function(){i.reject(new Error("Load timeout for resource: "+n.url))},n.timeout)),i.promise.then(function(e){return a={statusCode:e.status},0<n.timeout&&clearTimeout(o),200<=a.statusCode&&a.statusCode<300?n.binary?e.blob():e.text():e.json()}).then(function(e){200<=a.statusCode&&a.statusCode<300?r(null,a,e):(e.status=a.statusCode,r(e))}).catch(function(e){e||(e=new Error("canceled")),r(e)}),{abort:i.reject});var n,r,i,o,a,s,l}function Kn(e,t){var a,s,n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),i=-1!==n.indexOf("msie"),o=-1!==n.indexOf("trident"),l=-1!==n.indexOf("edge"),u=r||(i||o||l)&&"GET"===e.method,c=!("cache"in e)||e.cache;if(!/^blob:/.test(e.url)&&(u||!c)){var A=-1!==e.url.indexOf("?");e.url+=(A?"&":"?")+"_nonce="+Date.now()}return s=t,a=O(a=e),(a=M({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},a)).json&&(a.binary||(a.headers.Accept="application/json"),a.headers["Content-Type"]=a.headers["Content-Type"]||"application/json"),a.binary&&(a.encoding=null,a.json=!1),a.processData||(a.json=!1),qn(a,function(e,t,n){if(e)return s(ee(e));var r,i=t.headers&&t.headers["content-type"],o=n||"";if(!a.binary&&(a.json||!a.processData)&&"object"!=typeof o&&(/json/.test(i)||/^[\s]*\{/.test(o)&&/\}[\s]*$/.test(o)))try{o=JSON.parse(o.toString())}catch(e){}200<=t.statusCode&&t.statusCode<300?function(e,t,n){if(!a.binary&&a.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(e){return n(e)}Array.isArray(e)&&(e=e.map(function(e){return e.error||e.missing?ee(e):e})),a.binary,n(null,e,t)}(o,t,s):((r=ee(o)).status=t.statusCode,s(r))})}var Wn={};function jn(e){var n=(e.doc||e.ok)._attachments;n&&Object.keys(n).forEach(function(e){var t=n[e];t.data=St(t.data,t.content_type)})}function zn(e){return/^_design/.test(e)?"_design/"+encodeURIComponent(e.slice(8)):/^_local/.test(e)?"_local/"+encodeURIComponent(e.slice(7)):encodeURIComponent(e)}function Gn(n){return n._attachments&&Object.keys(n._attachments)?H.all(Object.keys(n._attachments).map(function(e){var t=n._attachments[e];if(t.data&&"string"!=typeof t.data)return new H(function(e){Tt(t.data,e)}).then(function(e){t.data=e})})):H.resolve()}function Jn(e,t){return Xn(e,e.db+"/"+t)}function Xn(e,t){var n=e.path?"/":"";return e.protocol+"://"+e.host+(e.port?":"+e.port:"")+"/"+e.path+n+t}function $n(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function Yn(e,t){var n,a=this,g=function(e,t){if(function(e){if(!e.prefix)return!1;var t=Ae(e.prefix).protocol;return"http"===t||"https"===t}(t)){var n=t.name.substr(t.prefix.length);e=t.prefix+encodeURIComponent(n)}var r=Ae(e);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=i.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=i.join("/"),r}(e.name,e),r=Jn(g,""),v=(e=O(e)).ajax||{};if(e.auth||g.auth){var i=e.auth||g.auth,o=i.username+":"+i.password,s=wt(unescape(encodeURIComponent(o)));v.headers=v.headers||{},v.headers.Authorization="Basic "+s}function y(e,t,n){var r=(e||{}).ajax||{},i=M(O(v),r,t),o=O(v.headers||{});return i.headers=M(o,r.headers,t.headers||{}),a.constructor.listeners("debug").length&&a.constructor.emit("debug",["http",i.method,i.url]),a._ajax(i,n)}function l(e,t){return new H(function(n,r){y(e,t,function(e,t){if(e)return r(e);n(t)})})}function u(e,n){return A(e,C(function(t){w().then(function(){return n.apply(this,t)}).catch(function(e){t.pop()(e)})}))}function w(){return e.skipSetup||e.skip_setup?H.resolve():n||((n=l({},{method:"GET",url:r}).catch(function(e){return e&&e.status&&404===e.status?(_(404,"PouchDB is just detecting if the remote exists."),l({},{method:"PUT",url:r})):H.reject(e)}).catch(function(e){return!(!e||!e.status||412!==e.status)||H.reject(e)})).catch(function(){n=null}),n)}function c(e){return e.split("/").map(encodeURIComponent).join("/")}a._ajax=Kn,S(function(){t(null,a)}),a._remote=!0,a.type=function(){return"http"},a.id=u("id",function(r){y({},{method:"GET",url:Xn(g,"")},function(e,t){var n=t&&t.uuid?t.uuid+g.db:Jn(g,"");r(null,n)})}),a.request=u("request",function(e,t){e.url=Jn(g,e.url),y({},e,t)}),a.compact=u("compact",function(r,i){"function"==typeof r&&(i=r,r={}),y(r=O(r),{url:Jn(g,"_compact"),method:"POST"},function(){!function n(){a.info(function(e,t){t&&!t.compact_running?i(null,{ok:!0}):setTimeout(n,r.interval||200)})}()})}),a.bulkGet=A("bulkGet",function(a,s){var l=this;function e(n){var e={};a.revs&&(e.revs=!0),a.attachments&&(e.attachments=!0),a.latest&&(e.latest=!0),y(a,{url:Jn(g,"_bulk_get"+$n(e)),method:"POST",body:{docs:a.docs}},function(e,t){!e&&a.attachments&&a.binary&&t.results.forEach(function(e){e.docs.forEach(jn)}),n(e,t)})}function n(){var r=Math.ceil(a.docs.length/50),i=0,o=new Array(r);function e(n){return function(e,t){o[n]=t.results,++i===r&&s(null,{results:ne(o)})}}for(var t=0;t<r;t++){var n=m(a,["revs","attachments","binary","latest"]);n.ajax=v,n.docs=a.docs.slice(50*t,Math.min(a.docs.length,50*(t+1))),b(l,n,e(t))}}var r=Xn(g,""),t=Wn[r];"boolean"!=typeof t?e(function(e,t){e?(Wn[r]=!1,_(e.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),n()):(Wn[r]=!0,s(null,t))}):t?e(s):n()}),a._info=function(n){w().then(function(){y({},{method:"GET",url:Jn(g,"")},function(e,t){if(e)return n(e);t.host=Jn(g,""),n(null,t)})}).catch(n)},a.get=u("get",function(t,a,n){"function"==typeof a&&(n=a,a={});var e={};(a=O(a)).revs&&(e.revs=!0),a.revs_info&&(e.revs_info=!0),a.latest&&(e.latest=!0),a.open_revs&&("all"!==a.open_revs&&(a.open_revs=JSON.stringify(a.open_revs)),e.open_revs=a.open_revs),a.rev&&(e.rev=a.rev),a.conflicts&&(e.conflicts=a.conflicts),a.update_seq&&(e.update_seq=a.update_seq),t=zn(t);var r={method:"GET",url:Jn(g,t+$n(e))};function i(i){var o=i._attachments,e=o&&Object.keys(o);if(o&&e.length){var A,t=e.map(function(r){return function(){return t=o[e=r],n=zn(i._id)+"/"+c(e)+"?rev="+i._rev,l(a,{method:"GET",url:Jn(g,n),binary:!0}).then(function(t){return a.binary?t:new H(function(e){Tt(t,e)})}).then(function(e){delete t.stub,delete t.length,t.data=e});var e,t,n}});return A=t,5,new H(function(e,t){var n,r=0,i=0,o=0,a=A.length;function s(){++o===a?n?t(n):e():c()}function l(){r--,s()}function u(e){r--,n=n||e,s()}function c(){for(;r<5&&i<a;)r++,A[i++]().then(l,u)}c()})}}l(a,r).then(function(t){return H.resolve().then(function(){if(a.attachments)return e=t,Array.isArray(e)?H.all(e.map(function(e){if(e.ok)return i(e.ok)})):i(e);var e}).then(function(){n(null,t)})}).catch(function(e){e.docId=t,n(e)})}),a.remove=u("remove",function(e,t,n,r){var i;"string"==typeof t?(i={_id:e,_rev:t},"function"==typeof n&&(r=n,n={})):(i=e,n="function"==typeof t?(r=t,{}):(r=n,t));var o=i._rev||n.rev;y(n,{method:"DELETE",url:Jn(g,zn(i._id))+"?rev="+o},r)}),a.getAttachment=u("getAttachment",function(e,t,n,r){"function"==typeof n&&(r=n,n={});var i=n.rev?"?rev="+n.rev:"";y(n,{method:"GET",url:Jn(g,zn(e))+"/"+c(t)+i,binary:!0},r)}),a.removeAttachment=u("removeAttachment",function(e,t,n,r){y({},{method:"DELETE",url:Jn(g,zn(e)+"/"+c(t))+"?rev="+n},r)}),a.putAttachment=u("putAttachment",function(e,t,n,r,i,o){"function"==typeof i&&(o=i,i=r,r=n,n=null);var a=zn(e)+"/"+c(t),s=Jn(g,a);if(n&&(s+="?rev="+n),"string"==typeof r){var l;try{l=yt(r)}catch(e){return o(Z(K,"Attachment is not a valid base64 string"))}r=l?Ct(l,i):""}y({},{headers:{"Content-Type":i},method:"PUT",url:s,processData:!1,body:r,timeout:v.timeout||6e4},o)}),a._bulkDocs=function(e,t,n){e.new_edits=t.new_edits,w().then(function(){return H.all(e.docs.map(Gn))}).then(function(){y(t,{method:"POST",url:Jn(g,"_bulk_docs"),timeout:t.timeout,body:e},function(e,t){if(e)return n(e);t.forEach(function(e){e.ok=!0}),n(null,t)})}).catch(n)},a._put=function(n,e,r){w().then(function(){return Gn(n)}).then(function(){y(e,{method:"PUT",url:Jn(g,zn(n._id)),body:n},function(e,t){if(e)return e.docId=n&&n._id,r(e);r(null,t)})}).catch(r)},a.allDocs=u("allDocs",function(t,n){"function"==typeof t&&(n=t,t={});var e,r={},i="GET";(t=O(t)).conflicts&&(r.conflicts=!0),t.update_seq&&(r.update_seq=!0),t.descending&&(r.descending=!0),t.include_docs&&(r.include_docs=!0),t.attachments&&(r.attachments=!0),t.key&&(r.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(r.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(r.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(r.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(r.limit=t.limit),void 0!==t.skip&&(r.skip=t.skip);var o=$n(r);void 0!==t.keys&&(i="POST",e={keys:t.keys}),l(t,{method:i,url:Jn(g,"_all_docs"+o),body:e}).then(function(e){t.include_docs&&t.attachments&&t.binary&&e.rows.forEach(jn),n(null,e)}).catch(n)}),a._changes=function(a){var s="batch_size"in a?a.batch_size:25;!(a=O(a)).continuous||"heartbeat"in a||(a.heartbeat=1e4);var r="timeout"in a?a.timeout:"timeout"in v?v.timeout:3e4;"timeout"in a&&a.timeout&&r-a.timeout<5e3&&(r=a.timeout+5e3),"heartbeat"in a&&a.heartbeat&&r-a.heartbeat<5e3&&(r=a.heartbeat+5e3);var i={};"timeout"in a&&a.timeout&&(i.timeout=a.timeout);var l,u=void 0!==a.limit&&a.limit;l="return_docs"in a?a.return_docs:!("returnDocs"in a)||a.returnDocs;var c=u;if(a.style&&(i.style=a.style),(a.include_docs||a.filter&&"function"==typeof a.filter)&&(i.include_docs=!0),a.attachments&&(i.attachments=!0),a.continuous&&(i.feed="longpoll"),a.seq_interval&&(i.seq_interval=a.seq_interval),a.conflicts&&(i.conflicts=!0),a.descending&&(i.descending=!0),a.update_seq&&(i.update_seq=!0),"heartbeat"in a&&a.heartbeat&&(i.heartbeat=a.heartbeat),a.filter&&"string"==typeof a.filter&&(i.filter=a.filter),a.view&&"string"==typeof a.view&&(i.filter="_view",i.view=a.view),a.query_params&&"object"==typeof a.query_params)for(var e in a.query_params)a.query_params.hasOwnProperty(e)&&(i[e]=a.query_params[e]);var o,A,d,p="GET";a.doc_ids?(i.filter="_doc_ids",p="POST",o={doc_ids:a.doc_ids}):a.selector&&(i.filter="_selector",p="POST",o={selector:a.selector});var f=function(e,t){if(!a.aborted){i.since=e,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),a.descending?u&&(i.limit=c):i.limit=!u||s<c?s:c;var n={method:p,url:Jn(g,"_changes"+$n(i)),timeout:r,body:o};d=e,a.aborted||w().then(function(){A=y(a,n,t)}).catch(t)}},h={results:[]},m=function(e,t){if(!a.aborted){var n=0;if(t&&t.results){n=t.results.length,h.last_seq=t.last_seq;var r=null,i=null;"number"==typeof t.pending&&(r=t.pending),"string"!=typeof h.last_seq&&"number"!=typeof h.last_seq||(i=h.last_seq),a.query_params,t.results=t.results.filter(function(e){c--;var t=te(a)(e);return t&&(a.include_docs&&a.attachments&&a.binary&&jn(e),l&&h.results.push(e),a.onChange(e,r,i)),t})}else if(e)return a.aborted=!0,void a.complete(e);t&&t.last_seq&&(d=t.last_seq);var o=u&&c<=0||t&&n<s||a.descending;(!a.continuous||u&&c<=0)&&o?a.complete(null,h):S(function(){f(d,m)})}};return f(a.since||0,m),{cancel:function(){a.aborted=!0,A&&A.abort()}}},a.revsDiff=u("revsDiff",function(e,t,n){"function"==typeof t&&(n=t,t={}),y(t,{method:"POST",url:Jn(g,"_revs_diff"),body:e},n)}),a._close=function(e){e()},a._destroy=function(e,n){y(e,{url:Jn(g,""),method:"DELETE"},function(e,t){if(e&&e.status&&404!==e.status)return n(e);n(null,t)})}}function Zn(e){this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Zn)}catch(e){}}function er(e){this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,er)}catch(e){}}function tr(e){this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,tr)}catch(e){}}function nr(e,t){return t&&e.then(function(e){S(function(){t(null,e)})},function(e){S(function(){t(e)})}),e}function rr(n,r){return function(){var e=arguments,t=this;return n.add(function(){return r.apply(t,e)})}}function ir(e){var t=new E(e),n=new Array(t.size),r=-1;return t.forEach(function(e){n[++r]=e}),n}function or(e){var n=new Array(e.size),r=-1;return e.forEach(function(e,t){n[++r]=t}),n}function ar(e){return new tr("builtin "+e+" function requires map values to be numbers or number arrays")}function sr(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];if("number"!=typeof i){if(!Array.isArray(i))throw ar("_sum");t="number"==typeof t?[t]:t;for(var o=0,a=i.length;o<a;o++){var s=i[o];if("number"!=typeof s)throw ar("_sum");void 0===t[o]?t.push(s):t[o]+=s}}else"number"==typeof t?t+=i:t[0]+=i}return t}Yn.valid=function(){return!0},r(Zn,Error),r(er,Error),r(tr,Error);var lr=x.bind(null,"log"),ur=Array.isArray,cr=JSON.parse;function Ar(e,t){return de("return ("+e.replace(/;\s*$/,"")+");",{emit:t,sum:sr,log:lr,isArray:ur,toJSON:cr})}function dr(){this.promise=new H(function(e){e()})}function pr(e){if(!e)return"undefined";switch(typeof e){case"function":case"string":return e.toString();default:return JSON.stringify(e)}}function fr(i,o,a,s,n,l){var e,u,c=(e=s,pr(a)+pr(e)+"undefined");if(!n&&(u=i._cachedViews=i._cachedViews||{})[c])return u[c];var t=i.info().then(function(e){var t,r=e.db_name+"-mrview-"+(n?"temp":(t=c,d.hash(t)));return pe(i,"_local/"+l,function(e){e.views=e.views||{};var t=o;-1===t.indexOf("/")&&(t=o+"/"+o);var n=e.views[t]=e.views[t]||{};if(!n[r])return n[r]=!0,e}).then(function(){return i.registerDependentDatabase(r).then(function(e){var t=e.db;t.auto_compaction=!0;var n={name:r,db:t,sourceDB:i,adapter:i.adapter,mapFun:a,reduceFun:s};return n.db.get("_local/lastSeq").catch(function(e){if(404!==e.status)throw e}).then(function(e){return n.seq=e?e.seq:0,u&&n.db.once("destroyed",function(){delete u[c]}),n})})})});return u&&(u[c]=t),t}dr.prototype.add=function(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise},dr.prototype.finish=function(){return this.promise};var hr={},mr=new dr;function gr(e){return-1===e.indexOf("/")?[e,e]:e.split("/")}function vr(e,t){try{e.emit("error",t)}catch(e){x("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),x("error",t)}}var yr=function(e,t){return sr(t)},wr=function(e,t){return t.length},br=function(e,t){return{sum:sr(t),min:Math.min.apply(null,t),max:Math.max.apply(null,t),count:t.length,sumsqr:function(e){for(var t=0,n=0,r=e.length;n<r;n++){var i=e[n];t+=i*i}return t}(t)}},Cr=function(c,t,f,e){function d(e,t,n){try{t(n)}catch(t){vr(e,t)}}function h(e,t,n,r,i){try{return{output:t(n,r,i)}}catch(t){return vr(e,t),{error:t}}}function p(e,t){var n=$e(e.key,t.key);return 0!==n?n:$e(e.value,t.value)}function m(e){var t=e.value;return t&&"object"==typeof t&&t._id||e.id}function A(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&e.rows.forEach(function(e){var n=e.doc&&e.doc._attachments;n&&Object.keys(n).forEach(function(e){var t=n[e];n[e].data=St(t.data,t.content_type)})}),e}}function g(e,t,n,r){var i=t[e];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(e+"="+i))}function a(e){if(void 0!==e){var t=Number(e);return isNaN(t)||t!==parseInt(e,10)?e:t}}function v(n,e){var t=n.descending?"endkey":"startkey",r=n.descending?"startkey":"endkey";if(void 0!==n[t]&&void 0!==n[r]&&0<$e(n[t],n[r]))throw new Zn("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==n.reduce){if(n.include_docs)throw new Zn("{include_docs:true} is invalid for reduce");if(n.keys&&1<n.keys.length&&!n.group&&!n.group_level)throw new Zn("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var t=function(e){if(e){if("number"!=typeof e)return new Zn('Invalid value for integer: "'+e+'"');if(e<0)return new Zn('Invalid value for positive integer: "'+e+'"')}}(n[e]);if(t)throw t})}function y(t){return function(e){if(404===e.status)return t;throw e}}function r(e){var t="string"==typeof e?e:e.name,n=hr[t];return n||(n=hr[t]=new dr),n}function w(e){return rr(r(e),function(){return function(a){var s,l,u=t(a.mapFun,function(e,t){var n={id:l._id,key:Ye(e)};null!=t&&(n.value=Ye(t)),s.push(n)}),c=a.seq||0;function r(t,n){return function(){return l=t,r=n,e="_local/lastSeq",(s=a).db.get(e).catch(y({_id:e,seq:0})).then(function(n){var e=or(l);return H.all(e.map(function(e){return n=s,o={_id:i="_local/doc_"+(t=e),keys:[]},a=l.get(t),u=a[0],(1===(r=a[1]).length&&/^1-/.test(r[0].rev)?H.resolve(o):n.db.get(i).catch(y(o))).then(function(t){return(e=t,e.keys.length?n.db.allDocs({keys:e.keys,include_docs:!0}):H.resolve({rows:[]})).then(function(e){return function(e,t){for(var r=[],i=new E,n=0,o=t.rows.length;n<o;n++){var a=t.rows[n].doc;if(a&&(r.push(a),i.add(a._id),a._deleted=!u.has(a._id),!a._deleted)){var s=u.get(a._id);"value"in s&&(a.value=s.value)}}var l=or(u);return l.forEach(function(e){if(!i.has(e)){var t={_id:e},n=u.get(e);"value"in n&&(t.value=n.value),r.push(t)}}),e.keys=ir(l.concat(e.keys)),r.push(e),r}(t,e)});var e});var t,n,r,i,o,a,u})).then(function(e){var t=ne(e);return n.seq=r,t.push(n),s.db.bulkDocs({docs:t})})});var s,l,r,e}}var i=new dr;function o(){return a.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:c,limit:50}).then(e)}function e(e){var t=e.results;if(t.length){var n=function(e){for(var t=new F,n=0,r=e.length;n<r;n++){var i=e[n];if("_"!==i.doc._id[0]){s=[],(l=i.doc)._deleted||d(a.sourceDB,u,l),s.sort(p);var o=A(s);t.set(i.doc._id,[o,i.changes])}c=i.seq}return t}(t);if(i.add(r(n,c)),!(t.length<50))return o()}}function A(e){for(var t,n=new F,r=0,i=e.length;r<i;r++){var o=e[r],a=[o.key,o.id];0<r&&0===$e(o.key,t)&&a.push(r),n.set(Ze(a),o),t=o.key}return n}return o().then(function(){return i.finish()}).then(function(){a.seq=c})}(e)})()}function b(e,t){return rr(r(e),function(){return function(r,i){var o,a=r.reduceFun&&!1!==i.reduce,s=i.skip||0;function n(e){return e.include_docs=!0,r.db.allDocs(e).then(function(e){return o=e.total_rows,e.rows.map(function(e){if("value"in e.doc&&"object"==typeof e.doc.value&&null!==e.doc.value){var t=Object.keys(e.doc.value).sort(),n=["id","key","value"];if(!(t<n||n<t))return e.doc.value}var r=function(e){for(var t=[],n=[],r=0;;){var i=e[r++];if("\0"!==i)switch(i){case"1":t.push(null);break;case"2":t.push("1"===e[r]),r++;break;case"3":var o=et(e,r);t.push(o.num),r+=o.length;break;case"4":for(var a="";;){var s=e[r];if("\0"===s)break;a+=s,r++}a=a.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),t.push(a);break;case"5":var l={element:[],index:t.length};t.push(l.element),n.push(l);break;case"6":var u={element:{},index:t.length};t.push(u.element),n.push(u);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===t.length)return t.pop();tt(t,n)}}}(e.doc._id);return{key:r[0],id:r[1],value:"value"in e.doc?e.doc.value:null}})})}function e(t){var n;if(n=a?function(e,t,n){0===n.group_level&&delete n.group_level;var r,i,o,a=n.group||n.group_level,s=f(e.reduceFun),l=[],u=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;t.forEach(function(e){var t=l[l.length-1],n=a?e.key:null;if(a&&Array.isArray(n)&&(n=n.slice(0,u)),t&&0===$e(t.groupKey,n))return t.keys.push([e.key,e.id]),void t.values.push(e.value);l.push({keys:[[e.key,e.id]],values:[e.value],groupKey:n})}),t=[];for(var c=0,A=l.length;c<A;c++){var d=l[c],p=h(e.sourceDB,s,d.keys,d.values,!1);if(p.error&&p.error instanceof tr)throw p.error;t.push({value:p.error?null:p.output,key:d.groupKey})}return{rows:(r=t,i=n.limit,o=n.skip,o=o||0,"number"==typeof i?r.slice(o,i+o):0<o?r.slice(o):r)}}(r,t,i):{total_rows:o,offset:s,rows:t},i.update_seq&&(n.update_seq=r.seq),i.include_docs){var e=ir(t.map(m));return r.sourceDB.allDocs({keys:e,include_docs:!0,conflicts:i.conflicts,attachments:i.attachments,binary:i.binary}).then(function(e){var r=new F;return e.rows.forEach(function(e){r.set(e.id,e.doc)}),t.forEach(function(e){var t=m(e),n=r.get(t);n&&(e.doc=n)}),n})}return n}if(void 0===i.keys||i.keys.length||(i.limit=0,delete i.keys),void 0!==i.keys){var t=i.keys.map(function(e){var t={startkey:Ze([e]),endkey:Ze([e,{}])};return i.update_seq&&(t.update_seq=!0),n(t)});return H.all(t).then(ne).then(e)}var l,u,c={descending:i.descending};if(i.update_seq&&(c.update_seq=!0),"start_key"in i&&(l=i.start_key),"startkey"in i&&(l=i.startkey),"end_key"in i&&(u=i.end_key),"endkey"in i&&(u=i.endkey),void 0!==l&&(c.startkey=i.descending?Ze([l,{}]):Ze([l])),void 0!==u){var A=!1!==i.inclusive_end;i.descending&&(A=!A),c.endkey=Ze(A?[u,{}]:[u])}if(void 0!==i.key){var d=Ze([i.key]),p=Ze([i.key,{}]);c.descending?(c.endkey=d,c.startkey=p):(c.startkey=d,c.endkey=p)}return a||("number"==typeof i.limit&&(c.limit=i.limit),c.skip=s),n(c).then(e)}(e,t)})()}function s(n,e,r){if("function"==typeof n._query)return t=n,i=e,o=r,new H(function(n,r){t._query(i,o,function(e,t){if(e)return r(e);n(t)})});var t,i,o;if(ie(n))return function(e,t,n){var r,i=[],o="GET";if(g("reduce",n,i),g("include_docs",n,i),g("attachments",n,i),g("limit",n,i),g("descending",n,i),g("group",n,i),g("group_level",n,i),g("skip",n,i),g("stale",n,i),g("conflicts",n,i),g("startkey",n,i,!0),g("start_key",n,i,!0),g("endkey",n,i,!0),g("end_key",n,i,!0),g("inclusive_end",n,i),g("key",n,i,!0),g("update_seq",n,i),i=""===(i=i.join("&"))?"":"?"+i,void 0!==n.keys){var a="keys="+encodeURIComponent(JSON.stringify(n.keys));a.length+i.length+1<=2e3?i+=("?"===i[0]?"&":"?")+a:(o="POST","string"==typeof t?r={keys:n.keys}:t.keys=n.keys)}if("string"!=typeof t)return r=r||{},Object.keys(t).forEach(function(e){Array.isArray(t[e])?r[e]=t[e]:r[e]=t[e].toString()}),e.request({method:"POST",url:"_temp_view"+i,body:r}).then(A(n));var s=gr(t);return e.request({method:o,url:"_design/"+s[0]+"/_view/"+s[1]+i,body:r}).then(function(e){return e.rows.forEach(function(e){if(e.value&&e.value.error&&"builtin_reduce_error"===e.value.error)throw new Error(e.reason)}),e}).then(A(n))}(n,e,r);if("string"!=typeof e)return v(r,e),mr.add(function(){return fr(n,"temp_view/temp_view",e.map,e.reduce,!0,c).then(function(e){return t=w(e).then(function(){return b(e,r)}),n=function(){return e.db.destroy()},t.then(function(e){return n().then(function(){return e})},function(e){return n().then(function(){throw e})});var t,n})}),mr.finish();var a=e,s=gr(a),l=s[0],u=s[1];return n.get("_design/"+l).then(function(e){var t=e.views&&e.views[u];if(!t)throw new er("ddoc "+e._id+" has no view named "+u);return function(e,t){var n=e.views&&e.views[t];if("string"!=typeof n.map)throw new er("ddoc "+e._id+" has no string view named "+t+", instead found object of type: "+typeof n.map)}(e,u),v(r,t),fr(n,a,t.map,t.reduce,!1,c).then(function(e){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&S(function(){w(e)}),b(e,r)):w(e).then(function(){return b(e,r)})})})}var i;return{query:function(e,t,n){var r,i=this;"function"==typeof t&&(n=t,t={}),t=t?((r=t).group_level=a(r.group_level),r.limit=a(r.limit),r.skip=a(r.skip),r):{},"function"==typeof e&&(e={map:e});var o=H.resolve().then(function(){return s(i,e,t)});return nr(o,n),o},viewCleanup:(i=function(){var e,n;return"function"==typeof this._viewCleanup?(e=this,new H(function(n,r){e._viewCleanup(function(e,t){if(e)return r(e);n(t)})})):ie(this)?this.request({method:"POST",url:"_view_cleanup"}):(n=this).get("_local/"+c).then(function(s){var l=new F;Object.keys(s.views).forEach(function(e){var t=gr(e),n="_design/"+t[0],r=t[1],i=l.get(n);i||(i=new E,l.set(n,i)),i.add(r)});var e={keys:or(l),include_docs:!0};return n.allDocs(e).then(function(e){var a={};e.rows.forEach(function(i){var o=i.key.substring(8);l.get(i.key).forEach(function(e){var t=o+"/"+e;s.views[t]||(t=e);var n=Object.keys(s.views[t]),r=i.doc&&i.doc.views&&i.doc.views[e];n.forEach(function(e){a[e]=a[e]||r})})});var t=Object.keys(a).filter(function(e){return!a[e]}).map(function(e){return rr(r(e),function(){return new n.constructor(e,n.__opts).destroy()})()});return H.all(t).then(function(){return{ok:!0}})})},y({ok:!0}))},C(function(e){var t=e.pop(),n=i.apply(this,e);return"function"==typeof t&&nr(n,t),n}))}}("mrviews",function(e,t){if("function"!=typeof e||2!==e.length)return Ar(e.toString(),t);var n=e;return function(e){return n(e,t)}},function(e){var t=e.toString();return function(e){if(/^_sum/.test(e))return yr;if(/^_count/.test(e))return wr;if(/^_stats/.test(e))return br;if(/^_/.test(e))throw new Error(e+" is not a supported reduce function.")}(t)||Ar(t)}),Sr={query:function(e,t,n){return Cr.query.call(this,e,t,n)},viewCleanup:function(e){return Cr.viewCleanup.call(this,e)}};function Er(e){return/^1-/.test(e)}function Dr(t,n){var e=Object.keys(n._attachments);return H.all(e.map(function(e){return t.getAttachment(n._id,e,{rev:n._rev})}))}function Br(r,l,i,o){i=O(i);var a=[],u=!0;return H.resolve().then(function(){var e,t=Object.keys(i).filter(function(e){var t=i[e].missing;return 1===t.length&&Er(t[0])});if(0<t.length)return e=t,r.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(e){if(o.cancelled)throw new Error("cancelled");e.rows.forEach(function(e){var t,n;e.deleted||!e.doc||!Er(e.value.rev)||(n=e.doc)._attachments&&0<Object.keys(n._attachments).length||(t=e.doc)._conflicts&&0<t._conflicts.length||(e.doc._conflicts&&delete e.doc._conflicts,a.push(e.doc),delete i[e.id])})})}).then(function(){var e,n,t=(e=i,n=[],Object.keys(e).forEach(function(t){e[t].missing.forEach(function(e){n.push({id:t,rev:e})})}),{docs:n,revs:!0,latest:!0});if(t.docs.length)return r.bulkGet(t).then(function(e){if(o.cancelled)throw new Error("cancelled");return H.all(e.results.map(function(e){return H.all(e.docs.map(function(e){var o,a,s,t,n,i=e.ok;return e.error&&(u=!1),i&&i._attachments?(o=l,a=r,s=i,t=ie(a)&&!ie(o),n=Object.keys(s._attachments),t?o.get(s._id).then(function(i){return H.all(n.map(function(e){return n=s,r=e,(t=i)._attachments&&t._attachments[r]&&t._attachments[r].digest===n._attachments[r].digest?o.getAttachment(i._id,e):a.getAttachment(s._id,e);var t,n,r}))}).catch(function(e){if(404!==e.status)throw e;return Dr(a,s)}):Dr(a,s)).then(function(e){var r=Object.keys(i._attachments);return e.forEach(function(e,t){var n=i._attachments[r[t]];delete n.stub,delete n.length,n.data=e}),i}):i}))})).then(function(e){a=a.concat(ne(e).filter(Boolean))})})}).then(function(){return{ok:u,docs:a}})}var Tr=1,Ir="pouchdb",Fr=5;function xr(t,n,r,i,o){return t.get(n).catch(function(e){if(404===e.status)return"http"!==t.adapter&&"https"!==t.adapter||_(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:i,_id:n,history:[],replicator:Ir,version:Tr};throw e}).then(function(e){if(!o.cancelled&&e.last_seq!==r)return e.history=(e.history||[]).filter(function(e){return e.session_id!==i}),e.history.unshift({last_seq:r,session_id:i}),e.history=e.history.slice(0,Fr),e.version=Tr,e.replicator=Ir,e.session_id=i,e.last_seq=r,t.put(e).catch(function(e){if(409===e.status)return xr(t,n,r,i,o);throw e})})}function _r(e,t,n,r,i){this.src=e,this.target=t,this.id=n,this.returnValue=r,this.opts=i||{}}_r.prototype.writeCheckpoint=function(e,t){var n=this;return this.updateTarget(e,t).then(function(){return n.updateSource(e,t)})},_r.prototype.updateTarget=function(e,t){return this.opts.writeTargetCheckpoint?xr(this.target,this.id,e,t,this.returnValue):H.resolve(!0)},_r.prototype.updateSource=function(e,t){if(this.opts.writeSourceCheckpoint){var n=this;return xr(this.src,this.id,e,t,this.returnValue).catch(function(e){if(kr(e))return!(n.opts.writeSourceCheckpoint=!1);throw e})}return H.resolve(!0)};var Mr={undefined:function(e,t){return 0===$e(e.last_seq,t.last_seq)?t.last_seq:0},1:function(e,t){return(n=t,r=e,n.session_id===r.session_id?{last_seq:n.last_seq,history:n.history}:function e(t,n){var r=t[0],i=t.slice(1),o=n[0],a=n.slice(1);return r&&0!==n.length?Nr(r.session_id,n)?{last_seq:r.last_seq,history:t}:Nr(o.session_id,i)?{last_seq:o.last_seq,history:a}:e(i,a):{last_seq:0,history:[]}}(n.history,r.history)).last_seq;var n,r}};function Nr(e,t){var n=t[0],r=t.slice(1);return!(!e||0===t.length)&&(e===n.session_id||Nr(e,r))}function kr(e){return"number"==typeof e.status&&4===Math.floor(e.status/100)}_r.prototype.getCheckpoint=function(){var t=this;return t.opts&&t.opts.writeSourceCheckpoint&&!t.opts.writeTargetCheckpoint?t.src.get(t.id).then(function(e){return e.last_seq||0}).catch(function(e){if(404!==e.status)throw e;return 0}):t.target.get(t.id).then(function(n){return t.opts&&t.opts.writeTargetCheckpoint&&!t.opts.writeSourceCheckpoint?n.last_seq||0:t.src.get(t.id).then(function(e){return n.version!==e.version?0:(t=n.version?n.version.toString():"undefined")in Mr?Mr[t](n,e):0;var t},function(e){if(404===e.status&&n.last_seq)return t.src.put({_id:t.id,last_seq:0}).then(function(){return 0},function(e){return kr(e)?(t.opts.writeSourceCheckpoint=!1,n.last_seq):0});throw e})}).catch(function(e){if(404!==e.status)throw e;return 0})};var Ur=0;function Pr(u,c,A,d,i){var r,p,f,o=[],a={seq:0,changes:[],docs:[]},n=!1,s=!1,l=!1,h=0,m=A.continuous||A.live||!1,t=A.batch_size||100,g=A.batches_limit||10,v=!1,y=A.doc_ids,w=A.selector,b=[],C=he(),S=A.seq_interval;i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var E={};function e(){return f?H.resolve():(e=u,t=c,n=A,i=n.doc_ids?n.doc_ids.sort($e):"",o=n.filter?n.filter.toString():"",a="",s="",l="",n.selector&&(l=JSON.stringify(n.selector)),n.filter&&n.query_params&&(a=JSON.stringify((r=n.query_params,Object.keys(r).sort($e).reduce(function(e,t){return e[t]=r[t],e},{})))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),H.all([e.id(),t.id()]).then(function(e){var t=e[0]+e[1]+o+s+a+i+l;return new H(function(e){Nt(t,e)})}).then(function(e){return"_local/"+e.replace(/\//g,".").replace(/\+/g,"_")})).then(function(e){p=e;var t;t=!1===A.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===A.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===A.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},f=new _r(u,c,p,d,t)});var e,t,n,r,i,o,a,s,l}function D(){if(b=[],0!==r.docs.length){var n=r.docs,e={timeout:A.timeout};return c.bulkDocs({docs:n,new_edits:!1},e).then(function(e){if(d.cancelled)throw _(),new Error("cancelled");var r=Object.create(null);e.forEach(function(e){e.error&&(r[e.id]=e)});var t=Object.keys(r).length;i.doc_write_failures+=t,i.docs_written+=n.length-t,n.forEach(function(e){var t=r[e._id];if(t){i.errors.push(t);var n=(t.name||"").toLowerCase();if("unauthorized"!==n&&"forbidden"!==n)throw t;d.emit("denied",O(t))}else b.push(e)})},function(e){throw i.doc_write_failures+=n.length,e})}}function B(){if(r.error)throw new Error("There was a problem getting docs.");i.last_seq=h=r.seq;var e=O(i);return b.length&&(e.docs=b,"number"==typeof r.pending&&(e.pending=r.pending,delete r.pending),d.emit("change",e)),n=!0,f.writeCheckpoint(r.seq,C).then(function(){if(n=!1,d.cancelled)throw _(),new Error("cancelled");r=void 0,U()}).catch(function(e){throw Q(e),e})}function T(){return Br(u,c,r.diffs,d).then(function(e){r.error=!e.ok,e.docs.forEach(function(e){delete r.diffs[e._id],i.docs_read++,r.docs.push(e)})})}function I(){var t;d.cancelled||r||(0!==o.length?(r=o.shift(),(t={},r.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(e){return e.rev}))}),c.revsDiff(t).then(function(e){if(d.cancelled)throw _(),new Error("cancelled");r.diffs=e})).then(T).then(D).then(B).then(I).catch(function(e){x("batch processing terminated with error",e)})):F(!0))}function F(e){0!==a.changes.length?(e||s||a.changes.length>=t)&&(o.push(a),a={seq:0,changes:[],docs:[]},"pending"!==d.state&&"stopped"!==d.state||(d.state="active",d.emit("active")),I()):0!==o.length||r||((m&&E.live||s)&&(d.state="pending",d.emit("paused")),s&&_())}function x(e,t){l||(t.message||(t.message=e),i.ok=!1,i.status="aborting",o=[],a={seq:0,changes:[],docs:[]},_(t))}function _(e){if(!(l||d.cancelled&&(i.status="cancelled",n)))if(i.status=i.status||"complete",i.end_time=new Date,i.last_seq=h,l=!0,e){(e=Z(e)).result=i;var t=(e.name||"").toLowerCase();"unauthorized"===t||"forbidden"===t?(d.emit("error",e),d.removeAllListeners()):function(e,t,n,r){if(!1===e.retry)return t.emit("error",n),t.removeAllListeners();if("function"!=typeof e.back_off_function&&(e.back_off_function=L),t.emit("requestError",n),"active"===t.state||"pending"===t.state){t.emit("paused",n),t.state="stopped";var i=function(){e.current_back_off=Ur};t.once("paused",function(){t.removeListener("active",i)}),t.once("active",i)}e.current_back_off=e.current_back_off||Ur,e.current_back_off=e.back_off_function(e.current_back_off),setTimeout(function(){Pr(u,c,A,d)},e.current_back_off)}(A,d,e)}else d.emit("complete",i),d.removeAllListeners()}function M(e,t,n){if(d.cancelled)return _();"number"==typeof t&&(a.pending=t),te(A)(e)&&(a.seq=e.seq||n,a.changes.push(e),F(0===o.length&&E.live))}function N(e){if(v=!1,d.cancelled)return _();if(0<e.results.length)E.since=e.last_seq,U(),F(!0);else{var t=function(){m?(E.live=!0,U()):s=!0,F(!0)};r||0!==e.results.length?t():(n=!0,f.writeCheckpoint(e.last_seq,C).then(function(){n=!1,i.last_seq=h=e.last_seq,t()}).catch(Q))}}function k(e){if(v=!1,d.cancelled)return _();x("changes rejected",e)}function U(){if(!v&&!s&&o.length<g){v=!0,d._changes&&(d.removeListener("cancel",d._abortChanges),d._changes.cancel()),d.once("cancel",t);var e=u.changes(E).on("change",M);e.then(n,n),e.then(N).catch(k),A.retry&&(d._changes=e,d._abortChanges=t)}function t(){e.cancel()}function n(){d.removeListener("cancel",t)}}function P(){e().then(function(){if(!d.cancelled)return f.getCheckpoint().then(function(e){!(E={since:h=e,limit:t,batch_size:t,style:"all_docs",doc_ids:y,selector:w,return_docs:!0})!==S&&(E.seq_interval=S||t),A.filter&&("string"!=typeof A.filter?E.include_docs=!0:E.filter=A.filter),"heartbeat"in A&&(E.heartbeat=A.heartbeat),"timeout"in A&&(E.timeout=A.timeout),A.query_params&&(E.query_params=A.query_params),A.view&&(E.view=A.view),U()});_()}).catch(function(e){x("getCheckpoint rejected with ",e)})}function Q(e){n=!1,x("writeCheckpoint completed with error",e)}d.ready(u,c),d.cancelled?_():(d._addedListeners||(d.once("cancel",_),"function"==typeof A.complete&&(d.once("error",A.complete),d.once("complete",function(e){A.complete(null,e)})),d._addedListeners=!0),void 0===A.since?P():e().then(function(){return n=!0,f.writeCheckpoint(A.since,C)}).then(function(){n=!1,d.cancelled?_():(h=A.since,P())}).catch(Q))}function Qr(){s.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var n=this,r=new H(function(e,t){n.once("complete",e),n.once("error",t)});n.then=function(e,t){return r.then(e,t)},n.catch=function(e){return r.catch(e)},n.catch(function(){})}function Hr(e,t){var n=t.PouchConstructor;return"string"==typeof e?new n(e,t):e}function Or(e,t,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw Z(z,"`doc_ids` filter parameter is not a list.");n.complete=r,(n=O(n)).continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new Qr(n);return Pr(Hr(e,n),Hr(t,n),n,i),i}function Lr(e,t,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),(n=O(n)).PouchConstructor=n.PouchConstructor||this,new Rr(e=Hr(e,n),t=Hr(t,n),n,r)}function Rr(e,t,n,r){var i=this;this.canceled=!1;var o=n.push?M({},n,n.push):n,a=n.pull?M({},n,n.pull):n;function s(e){i.emit("change",{direction:"pull",change:e})}function l(e){i.emit("change",{direction:"push",change:e})}function u(e){i.emit("denied",{direction:"push",doc:e})}function c(e){i.emit("denied",{direction:"pull",doc:e})}function A(){i.pushPaused=!0,i.pullPaused&&i.emit("paused")}function d(){i.pullPaused=!0,i.pushPaused&&i.emit("paused")}function p(){i.pushPaused=!1,i.pullPaused&&i.emit("active",{direction:"push"})}function f(){i.pullPaused=!1,i.pushPaused&&i.emit("active",{direction:"pull"})}this.push=Or(e,t,o),this.pull=Or(t,e,a),this.pushPaused=!0,this.pullPaused=!0;var h={};function m(n){return function(e,t){("change"===e&&(t===s||t===l)||"denied"===e&&(t===c||t===u)||"paused"===e&&(t===d||t===A)||"active"===e&&(t===f||t===p))&&(e in h||(h[e]={}),h[e][n]=!0,2===Object.keys(h[e]).length&&i.removeAllListeners(e))}}function g(e,t,n){-1==e.listeners(t).indexOf(n)&&e.on(t,n)}n.live&&(this.push.on("complete",i.pull.cancel.bind(i.pull)),this.pull.on("complete",i.push.cancel.bind(i.push))),this.on("newListener",function(e){"change"===e?(g(i.pull,"change",s),g(i.push,"change",l)):"denied"===e?(g(i.pull,"denied",c),g(i.push,"denied",u)):"active"===e?(g(i.pull,"active",f),g(i.push,"active",p)):"paused"===e&&(g(i.pull,"paused",d),g(i.push,"paused",A))}),this.on("removeListener",function(e){"change"===e?(i.pull.removeListener("change",s),i.push.removeListener("change",l)):"denied"===e?(i.pull.removeListener("denied",c),i.push.removeListener("denied",u)):"active"===e?(i.pull.removeListener("active",f),i.push.removeListener("active",p)):"paused"===e&&(i.pull.removeListener("paused",d),i.push.removeListener("paused",A))}),this.pull.on("removeListener",m("pull")),this.push.on("removeListener",m("push"));var v=H.all([this.push,this.pull]).then(function(e){var t={push:e[0],pull:e[1]};return i.emit("complete",t),r&&r(null,t),i.removeAllListeners(),t},function(e){if(i.cancel(),r?r(e):i.emit("error",e),i.removeAllListeners(),r)throw e});this.then=function(e,t){return v.then(e,t)},this.catch=function(e){return v.catch(e)}}r(Qr,s.EventEmitter),Qr.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Qr.prototype.ready=function(e,t){var n=this;function r(){n.cancel()}n._readyCalled||(n._readyCalled=!0,e.once("destroyed",r),t.once("destroyed",r),n.once("complete",function(){e.removeListener("destroyed",r),t.removeListener("destroyed",r)}))},r(Rr,s.EventEmitter),Rr.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},Le.plugin(function(e){e.adapter("idb",An,!0)}).plugin(function(e){e.adapter("websql",Rn,!0)}).plugin(function(e){e.adapter("http",Yn,!1),e.adapter("https",Yn,!1)}).plugin(Sr).plugin(function(e){e.replicate=Or,e.sync=Lr,Object.defineProperty(e.prototype,"replicate",{get:function(){var r=this;return void 0===this.replicateMethods&&(this.replicateMethods={from:function(e,t,n){return r.constructor.replicate(e,r,t,n)},to:function(e,t,n){return r.constructor.replicate(r,e,t,n)}}),this.replicateMethods}}),e.prototype.sync=function(e,t,n){return this.constructor.sync(this,e,t,n)}}),qr.exports=Le}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,10:10,11:11,16:16,2:2,4:4,5:5,6:6,7:7}]},{},[17])(17)});var JSON2=JSON;function removeByValue(e,t,n){if(null!=e)for(var r=0;r<e.length;r++)e[r][t]==n&&e.splice(r,1);return e}!function(r){var i={};r.publish=function(e,t){i[e]&&r.each(i[e],function(){try{this.apply(r,t||[])}catch(e){}})},r.subscribe=function(e,t){return i[e]||(i[e]=[]),i[e].push(t),[e,t]},r.unsubscribe=function(t){var n=t[0];i[n]&&r.each(i[n],function(e){this==t[1]&&i[n].splice(e,1)})}}(jQuery),window.IMContainer={currentActiveProposition:null};var IMdataService=function(){var Token=null,TokenUrl=null,ServiceBase=null,RetryInterval=1e3,LanguageId=null,Req=null,self=this,Current=0,ItemsCount=0,MaxRetries=60,CurrentRetry=0,RequestInterval=15e3,RequestIntervalMode=1,Interval=0,IsAnnoncement=!1,CurrentRowVersion=null,currentActiveProposition=null,PopupCssClass={PopupClass:"popupContainer",CloseClass:"closePopUP",OverlayClass:"bg_shadow",EnvelopePopupClass:".envelope",EnvelopePopupClassMobile:".envelope a",SmartBannerWideClass:"smartBannerWide",SmartBannerSmallClass:"smartBannerSmall",smartBannerWideViewOfferClass:"details",smartBannerSmallViewOfferClass:"smartBannerSmall"},Events={onCompleteGetActiveIM:"onCompleteGetActiveIM",onCompleteShowIM:"onCompleteShowIM",onErrorIM:"onErrorIM",onPopupClose_Event:"onPopupClose",onReportIMAction:"onReportIMAction",onReportIMStatus:"onReportIMStatus",onSmartBanner:"onSmartBanner",stopGetActiveIMCalls:"onStopGetActiveIMCalls",restartGetActiveIMCalls:"onRestartGetActiveIMCalls"},init=function(e,t,n,r,i,o){ServiceBase=t,LanguageId=n,RequestInterval=r,RequestIntervalMode=i,IsAnnoncement=o,IMclearInterval(Interval);var a=!1;null!=(Token=e)&&(a=/^[a-z0-9]+$/i.test(Token)),1==a&&getActiveIM(Token,t,o),$.subscribe(Events.stopGetActiveIMCalls,function(){IMclearInterval(Interval)}),$.subscribe(Events.restartGetActiveIMCalls,function(){init(e,t,n,r,i,o)})},proceedNextMessage=function(){Current+1<ItemsCount?(++Current,handleActiveIM()):(RequestIntervalMode=1,0!=Interval&&clearInterval(Interval),Interval=setInterval(function(){getActiveIM(Token,ServiceBase,IsAnnoncement)},RequestInterval))},IMclearInterval=function(e){clearInterval(e)},getTokenIM=function(e,t){$.ajax({url:e,type:"POST",async:!0,success:t})},getDataCORS=function(e,t,n,r){var i=getInternetExplorerVersion(),o=e+"/"+t;-1==i||10<=i?getDataIE10(o,n,r):8<=i?getDataIE8(o=e+"/xdr/"+t+"XDR",n,r):window.external&&getDataIE8(o,n,r)};function getDataIE10(e,t,n){$.ajax({async:!0,type:"POST",url:e,data:t,contentType:"application/json; charset=utf-8",dataType:"json",processData:!0,crossDomain:!0,success:function(e){null!=n&&n(e)},error:function(e){}})}function getDataIE8(e,t,n){if(window.XDomainRequest){var r=new XDomainRequest;r&&(r.onerror=function(){},r.ontimeout=function(){},r.onprogress=function(){},r.onload=function(){var e=r.responseText;if(null==e||""==e);else{var t=JSON.parse(e);n(t)}},r.timeout=1e4,r.open("POST",e),r.send(JSON.stringify(t)))}}var getActiveIM=function(e,t,n){var r={RequestToken:e,Mode:RequestIntervalMode,CurrentRowVersion:CurrentRowVersion},i=JSON2.stringify(r);getDataCORS(t,"GetActiveIM",i,function(){"true"==n?onGetActiveIMAnnoncementComplete.apply(self,arguments):onGetActiveIMComplete.apply(self,arguments)})},onGetActiveIMComplete=function(e){null!=(Req=removeByValue(e,"MessageType","14"))&&""!=Req?(ItemsCount=Req.length,(Current=0)!=Interval&&(clearInterval(Interval),Interval=0),handleActiveIM()):0==Interval&&proceedNextMessage()},onGetActiveIMAnnoncementComplete=function(e){null!=(Req=removeByValue(Req=removeByValue(Req=removeByValue(Req=removeByValue(Req=removeByValue(Req=removeByValue(e,"MessageType","17"),"MessageType","19"),"MessageType","21"),"MessageType","31"),"MessageType","32"),"MessageType","17"))&&""!=Req&&(ItemsCount=Req.length,1==Req[Current=0].ErrorCode&&(0<ItemsCount&&("FullSite"===systemInfo.clientApplicationParams[eClientParams.Device]?require(["StateObject!IM"],function(e){e.update("message","new"),$(document).delegate(PopupCssClass.EnvelopePopupClass,"click",function(){showIM(Req[Current]),e.update("message","no-new")})}):($(PopupCssClass.EnvelopePopupClassMobile).addClass("new"),$(document).delegate(PopupCssClass.EnvelopePopupClassMobile,"click",function(){showIM(Req[Current]),$(PopupCssClass.EnvelopePopupClassMobile).removeClass("new"),$(PopupCssClass.EnvelopePopupClassMobile).addClass("no-new")}))),RequestIntervalMode=1))},handleActiveIM=function(){1==Req[Current].ErrorCode?(17==Req[Current].MessageType&&0==Req[Current].State&&null!=Req[Current].CurrentRowVersion&&(CurrentRowVersion=Req[Current].CurrentRowVersion,currentActiveProposition=Req[Current],IMContainer.currentActiveProposition=Req[Current]),0!=Req[Current].State||31==Req[Current].MessageType||32==Req[Current].MessageType?showIM(Req[Current]):proceedNextMessage(),RequestIntervalMode=1):CurrentRetry+1<MaxRetries&&(setTimeout(function(){getActiveIM(Token,ServiceBase,IsAnnoncement)},RetryInterval),++CurrentRetry)},showIM=function(e){if(null!=e){var t={RequestToken:Token,CustomerMessageID:e.CustomerMessageID,LanguageID:LanguageId,IMMetaData:e},n=JSON2.stringify(t);Req[Current]=e,getDataCORS(ServiceBase,"ShowIM",n,onShowIMComplete)}},onShowIMComplete=function(e){null!=e&&""!=e&&$.publish(Events.onCompleteShowIM,[e,Req[Current].CustomerMessageID,e.Content,PopupCssClass,Current,ItemsCount,{req:Req}])},ReportIMAction=function(e){if(null!=Req){var t={RequestToken:Token,CustomerMessageID:e[0],ActionTypeID:e[1]},n=JSON2.stringify(t);getDataCORS(ServiceBase,"ReportIMAction",n,function(){onReportIMActionComplete.apply(self,arguments)})}},onReportIMActionComplete=function(e){},onReportIMAction_Event=function(){$.subscribe(Events.onReportIMAction,function(){ReportIMAction(arguments)})},ReportIMStatus=function(e){if(null!=Req){var t={RequestToken:Token,CustomerMessageID:e[0],StatusID:e[1]},n=JSON2.stringify(t);getDataCORS(ServiceBase,"ReportIMStatus",n,function(){onReportIMStatusComplete.apply(self,arguments)})}},onReportIMStatusComplete=function(e){},onReportIMStatus_Event=function(){$.subscribe(Events.onReportIMStatus,function(){ReportIMStatus(arguments)})},onErrorIM_Event=function(e){e&&"function"==typeof e&&$.subscribe(Events.onErrorIM,e)},onCompleteGetActiveIM_Event=function(e){},onCompleteShowIM_Event=function(e){e&&"function"==typeof e&&$.subscribe(Events.onCompleteShowIM,e)},TrackinigDetailsGet=function(callback){var myObject={RequestToken:arguments[2]},json=JSON2.stringify(myObject),method="CustomerTrackingDetailsGet";getDataCORS(arguments[1],method,json,function(){eval(callback).apply(self,arguments)})},getInternetExplorerVersion=function(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))}return e};return{init:init,onErrorIM_Event:onErrorIM_Event,onCompleteGetActiveIM_Event:onCompleteGetActiveIM_Event,onCompleteShowIM_Event:onCompleteShowIM_Event,PopupCssClass:PopupCssClass,Current:Current,ItemsCount:ItemsCount,Event_onCompleteShowIM:Events.onCompleteShowIM,Events_onPopupClose_Event:Events.onPopupClose_Event,showIM:showIM,Events_onReportIMAction_Event:Events.onReportIMAction,Events_onReportIMStatus_Event:Events.onReportIMStatus,onReportIMAction_Event:onReportIMAction_Event,onReportIMStatus_Event:onReportIMStatus_Event,proceedNextMessage:proceedNextMessage,IMclearInterval:IMclearInterval,Interval:Interval,getTokenIM:getTokenIM,TrackinigDetailsGet:TrackinigDetailsGet,Events_onSmartBanner_Event:Events.onSmartBanner,IsAnnoncement:IsAnnoncement,CurrentActiveProposition:function(){return IMContainer.currentActiveProposition}}},IMlayoutService=function(){var l,r=0,n={Deposit:"deposit",Notice:"notice",Accept:"accept",WalkThroughDeal:"walkthroughdeal",PrivacyPolicy:"privacypolicy",imClosedDeals:"imClosedDeals",imOpenDeals:"imOpenDeals",imNewDeal:"imNewDeal"},i={Pending:"pending",Displayed:"displayed",Dismissed:"dismissed",Expired:"expired"},o=function(e){var t;switch(e.toLowerCase()){case n.Deposit:t=2;break;case n.Notice:t=3;break;case n.Accept:t=5;break;case n.WalkThroughDeal:t=6;break;case n.PrivacyPolicy:t=7;break;case n.imClosedDeals:t=8;break;case n.imOpenDeals:t=9;break;case n.imNewDeal:t=10;break;default:t=2}null!=r&&0!=r&&$.publish(l.Events_onReportIMAction_Event,[r,t]),$.publish(e,[e])},a=function(e){var t;switch(e.toLowerCase()){case i.Pending:t=0;break;case i.Displayed:t=1;break;case i.Dismissed:t=2;break;case i.Expired:t=3;break;default:t=1}null!=r&&0!=r&&$.publish(l.Events_onReportIMStatus_Event,[r,t]),$.publish(e,[e])},e=function(e){if(r=0,null!=e&&""!=e){var t=e[4],n=e[5];u(e[2],e[3],e[6].req[t]),r=e[6].req[t].CustomerMessageID,t<n&&++t}},s=function(e){$.publish(l.Events_onPopupClose_Event,e,!0),$("."+l.PopupCssClass.PopupClass).hide(),$("#"+l.PopupCssClass.OverlayClass).hide(),l.proceedNextMessage()},u=function(e,t,n){var r=$("."+t.PopupClass);if(null!=e&&""!=e){var i=$(e).filter("link").outerHTML();if(null!=i&&""!=i){var o=$('link[href*="'+i+' "]').attr("id","im_css");0==$("#im_css").length||$("#im_css").remove(),$("head").append(o)}if(31==n.MessageType||32==n.MessageType){var a="";if(31==n.MessageType?a=t.SmartBannerWideClass:32==n.MessageType&&(a=t.SmartBannerSmallClass),0==l.IsAnnoncement){var s=new Date(parseInt(n.ExpirationDate.replace("/Date(","")));$.publish(l.Events_onSmartBanner_Event,[s,n.State,a,n.ContentKey,e,function(){l.showIM(l.CurrentActiveProposition())}])}l.proceedNextMessage()}else r.hide(),$("#"+t.OverlayClass).hide(),r.html(e),setTimeout(function(){r.show(),$("#"+t.OverlayClass).fadeIn(500)},500);l.IMclearInterval(l.Interval)}else l.proceedNextMessage()};return{init:function(e){l=e},showWin:u,onCompleteShowIM_Subscribe:function(){$.subscribe(l.Event_onCompleteShowIM,function(){e(arguments)})},onPopupClose_Subscribe:function(e){e&&"function"==typeof e&&$.subscribe(l.Events_onPopupClose_Event,e),$(document).delegate("."+l.PopupCssClass.CloseClass,"click",function(e){e.stopPropagation(),e.preventDefault(),s()}),$(document).delegate("#"+l.PopupCssClass.CloseClass,"click",function(e){e.stopPropagation(),e.preventDefault(),s()})},onIMUIAction_Subscribe:function(e,t){t&&"function"==typeof t&&($(document).delegate("#"+l.PopupCssClass.PopupClass+" ."+e,"click",function(){o(e),s()}),$.subscribe(e,t))},onIMUIStatus_Subscribe:function(e,t){$(document).delegate("#"+l.PopupCssClass.PopupClass+" ."+e,"click",function(){a(e),$(".notice-box").hide()}),$.subscribe(e,t)},IMUIActionType:n,IMUIStatusType:i,onSmartBanner_Subscribe:function(e){e&&"function"==typeof e&&$.subscribe(l.Events_onSmartBanner_Event,e)}}};function InitAll(t,n,r,i,o,a,s,l){$(document).ready(function(){var e=new IMdataService;ConfigureIMDataAndLayoutServices(e,new IMlayoutService,o,s,l),e.init(t,n,r,i,a,s)})}function InitAllFallback(n,r,i,o,a,s,l,u){$(document).ready(function(){var t=new IMdataService,e=new IMlayoutService;ConfigureIMDataAndLayoutServices(t,e,a,l,u);t.getTokenIM(n,function(e){t.init(e,r,i,o,s,l)})})}function ConfigureIMDataAndLayoutServices(e,t,n,r,i){e.onErrorIM_Event(onErrorIM),e.PopupCssClass.OverlayClass="bg_shadow",e.PopupCssClass.PopupClass="popupContainer",e.PopupCssClass.CloseClass="closePopUP","false"==r&&(e.onReportIMAction_Event(),e.onReportIMStatus_Event()),t.init(e),t.onCompleteShowIM_Subscribe(),t.onPopupClose_Subscribe(),"false"==r&&(t.onIMUIAction_Subscribe(t.IMUIActionType.Deposit,n.deposit),t.onIMUIAction_Subscribe(t.IMUIActionType.Accept,n.accept),t.onIMUIAction_Subscribe(t.IMUIActionType.WalkThroughDeal,n.walkthrough),t.onIMUIAction_Subscribe(t.IMUIActionType.PrivacyPolicy,n.privacypolicy),t.onIMUIAction_Subscribe(t.IMUIActionType.imClosedDeals,n.imClosedDeals),t.onIMUIAction_Subscribe(t.IMUIActionType.imOpenDeals,n.imOpenDeals),t.onIMUIAction_Subscribe(t.IMUIActionType.imNewDeal,n.imNewDeal)),t.onSmartBanner_Subscribe(i)}function InitIMInitialDataManager(e,t,n){var r=new IMdataService,i=!1;null!=e&&(i=/^[a-z0-9]+$/i.test(e)),1==i&&r.TrackinigDetailsGet(n,t,e)}var onErrorIM=function(e,t){};jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",($(window).height()-this.height())/2+$(window).scrollTop()+"px"),this.css("left",($(window).width()-this.width())/2+$(window).scrollLeft()+"px"),this},jQuery.fn.outerHTML=function(e){return e?this.before(e).remove():jQuery("<p>").append(this.eq(0).clone()).html()};var Browser=function(){var e,i=window,r=function(){return isNullOrUndefined(e)&&(e={older:{iphSeSimilar:320===i.screen.width&&568===i.screen.height&&2===i.devicePixelRatio},notch:{iphXSimilar:375===i.screen.width&&812===i.screen.height&&3===i.devicePixelRatio,iphXr:414===i.screen.width&&896===i.screen.height&&2===i.devicePixelRatio,iphXsMax:414===i.screen.width&&896===i.screen.height&&3===i.devicePixelRatio}}),e},t=function(e){var t=i.navigator.userAgent,n=t.indexOf("MSIE ");if(0<n)return parseInt(t.substring(n+5,t.indexOf(".",n)),10);if(0<t.indexOf("Trident/")){var r=t.indexOf("rv:");return parseInt(t.substring(r+3,t.indexOf(".",r)),10)}return!e&&o()},o=function(){var e=i.navigator.userAgent,t=e.indexOf("Edge/");return 0<t&&parseInt(e.substring(t+5,e.indexOf(".",t)),10)},n=function(){var e=2<s().split(".").length?s().split(".")[0]:s();return Browser.isInternetExplorer()&&40<Number(e)},a=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},s=function(){return $.uaMatch(i.navigator.userAgent).version.split(".")[0]},l=function(){return-1!==navigator.userAgent.indexOf("Mac OS")},u=function(){try{var e=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){return!1}return!0}();return{getMobileOperatingSystem:function(){var e=navigator.userAgent||navigator.vendor||window.opera;return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?"Android":/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":"unknown"},isPassiveEventListenersSupported:function(){return u},isInternetExplorer:t,isEdge:o,isIEVersionGreaterThen:function(e){return!!n()||Number(s())>Number(e)},isIEVersionEqualTo:function(e){return t()&&Number(s())==e},isDefinePropertySupported:function(){return"function"==typeof Object.defineProperty&&(!Browser.isInternetExplorer()||Browser.isIEVersionGreaterThen(8))},getBrowserName:function(){return o()?"Edge":t(!0)?"Internet Explorer":i.opera||0<=i.navigator.userAgent.indexOf(" OPR/")?"Opera":a()?"Safari":$.browser&&$.browser.chrome?"Chrome":$.browser&&$.browser.mozilla?"Mozilla":i.navigator.userAgent},getBrowserVersion:s,getOperatingSystemName:function(){return-1!=i.navigator.userAgent.indexOf("Windows")?"Windows":-1!=i.navigator.userAgent.indexOf("Mac")?"Mac/iOS":-1!=i.navigator.userAgent.indexOf("X11")?"UNIX":-1!=i.navigator.userAgent.indexOf("Linux")?"Linux":i.navigator.userAgent},getOperatingSystemNameAndVersion:function(){return-1!=i.navigator.userAgent.indexOf("Windows NT 10.0")?"Windows 10":-1!=i.navigator.userAgent.indexOf("Windows NT 6.2")?"Windows 8":-1!=i.navigator.userAgent.indexOf("Windows NT 6.1")?"Windows 7":-1!=i.navigator.userAgent.indexOf("Windows NT 6.0")?"Windows Vista":-1!=i.navigator.userAgent.indexOf("Windows NT 5.1")?"Windows XP":-1!=i.navigator.userAgent.indexOf("Windows NT 5.0")?"Windows 2000":-1!=i.navigator.userAgent.indexOf("Mac OS X 10_5")||-1!=i.navigator.userAgent.indexOf("Mac OS X 10.5")?"Mac 10.5":-1!=i.navigator.userAgent.indexOf("Mac OS X 10_6")||-1!=i.navigator.userAgent.indexOf("Mac OS X 10.6")?"Mac 10.6":-1!=i.navigator.userAgent.indexOf("Mac OS X 10_7")||-1!=i.navigator.userAgent.indexOf("Mac OS X 10.7")?"Mac 10.7":-1!=i.navigator.userAgent.indexOf("Mac OS X 10_8")||-1!=i.navigator.userAgent.indexOf("Mac OS X 10.8")?"Mac 10.8":-1!=i.navigator.userAgent.indexOf("X11")?"UNIX":-1!=i.navigator.userAgent.indexOf("Linux")?"Linux":i.navigator.userAgent},getScreenResolution:function(){return i.screen.width+"x"+i.screen.height},getLargestResolutionDimension:function(){return Math.max(i.screen.width,i.screen.height)},isChromeOnIOS:function(){return-1!==navigator.userAgent.indexOf("CriOS")},isMacOs:l,isSafariOnMacIOS:function(){return l()&&a()},isChrome:function(){return-1!==navigator.userAgent.indexOf("Chrome")&&-1===navigator.userAgent.indexOf("Edge")},replaceWindowWith:function(e){i=e},isIeEdgePrivateMode:function(){return!window.indexedDB&&(window.PointerEvent||window.MSPointerEvent)},isSafariMobile:function(){return navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)},getiosDevices:r,forceRepaintIosRotate:function(){var e,t,n=document.getElementById("main");n&&((t=r()).notch.iphXSimilar||t.notch.iphXr||t.notch.iphXsMax)&&(void 0!==e&&clearTimeout(e),n.style.border="1px solid transparent",e=setTimeout(function(){n.style.border=""},200))},getBrowserDetails:function(){return{screenColorDept:screen.colorDepth,screenHeight:screen.height,screenWidth:screen.width,screenResolution:screen.pixelDepth,javaEnabled:navigator.javaEnabled(),javaScriptEnabled:!0,language:navigator.language,timeZoneOffset:(new Date).getTimezoneOffset(),userAgent:navigator.userAgent.substr(0,2048)}}}}();function StorageFactory(e){var n={},r=StorageFactory.isSupported(e),i=function(){if(r)switch(e){case StorageFactory.eStorageType.session:return window.sessionStorage;case StorageFactory.eStorageType.local:default:return window.localStorage}}();return{getItem:function(e){return r?i.getItem(e):n[e]||null},setItem:function(e,t){r?i.setItem(e,t):n[e]=t},removeItem:function(e){r?i.removeItem(e):delete n[e]},clear:function(){r?i.clear():n={}},key:function(e){return r?i.key(e):Object.keys(n)[e]||null}}}function RevealPassword(){var n,r,t,i,o={passwordTypeText:"password-type-text",passwordInput:"password-input",icoWbReveal:"ico-wb-reveal",icoWbRevealOff:"ico-wb-reveal-off",icoPassBlue:"ico-pass-blue"},a={enter:13,ctrlEnter:10};function s(){f(r)||(n.val(r.val()),l(),t.removeClass(o.icoWbRevealOff).addClass(o.icoWbReveal))}function l(){f(r)||(r.off(".RevealPassword"),r.remove(),r=null)}function u(e){var t;""===r.val()?(l(),n.val("").prev().removeClass(o.icoPassBlue).removeClass(o.icoWbRevealOff).addClass(o.icoWbReveal)):(t=e).which!=a.ctrlEnter&&t.which!=a.enter||(t.preventDefault(),n.val(r.val()),l(),i.submit())}function e(){var e;e={width:n.width(),height:n.height(),top:n.offset().top,left:n.offset().left},(r=n.clone().attr("type","text").removeAttr("id").addClass(o.passwordTypeText).removeClass(o.passwordInput).insertAfter(i).offset({top:e.top,left:e.left}).innerWidth(n.innerWidth()).innerHeight(n.innerHeight())).on("keyup.RevealPassword",u),t.removeClass(o.icoWbReveal).addClass(o.icoWbRevealOff),p()&&r.val(n.val())}function c(){p()&&n.val(r.val()),l(),t.removeClass(o.icoWbRevealOff).addClass(o.icoWbReveal)}function A(){""!==n.val()&&(t.hasClass(o.icoWbReveal)?e():c())}function d(){var e=n.css("box-shadow");""!==n.val()||Browser.isChrome()&&0<=e.indexOf("inset")?n.prev().addClass(o.icoPassBlue):n.prev().removeClass(o.icoPassBlue).removeClass(o.icoWbRevealOff).addClass(o.icoWbReveal)}function p(){return!f(r)&&0<r.length&&""!==r.val()}function f(e){return null==e}return{Init:function(e){n=e.passwordInput,t=e.icon,i=e.form,t.on("click.RevealPassword",A),n.on("keyup.RevealPassword",d),$(window).on("orientationchange.RevealPassword",s),setTimeout(d,100)},HidePasswordText:c,Dispose:function(){t.off("click.RevealPassword"),n.off("keyup.RevealPassword"),$(window).off("orientationchange.RevealPassword")}}}StorageFactory.isSupported=function(e){try{var t=null;switch(e){case StorageFactory.eStorageType.session:t=window.sessionStorage;break;case StorageFactory.eStorageType.local:default:t=window.localStorage}var n="__tst_strg_key__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}},StorageFactory.eStorageType={local:0,session:1},function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).html2canvas=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function e(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var B=function(){return(B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function u(o,a,s,l){return new(s||(s=Promise))(function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((l=l.apply(o,a||[])).next())})}function Z(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var T=(i.prototype.add=function(e,t,n,r){return new i(this.left+e,this.top+t,this.width+n,this.height+r)},i.fromClientRect=function(e){return new i(e.left,e.top,e.width,e.height)},i);function i(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}for(var I=function(e){return T.fromClientRect(e.getBoundingClientRect())},c=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(55296<=i&&i<=56319&&n<r){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&i)<<10)+(1023&o)+65536):(t.push(i),n--)}else t.push(i)}return t},d=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var a=e[i];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(i+1===n||16384<r.length)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="undefined"==typeof Uint8Array?[]:new Uint8Array(256),n=0;n<t.length;n++)A[t.charCodeAt(n)]=n;function o(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))}var a=(s.prototype.get=function(e){var t;if(0<=e){if(e<55296||56319<e&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s);function s(e,t,n,r,i,o){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}function h(e,t,n,r){var i=r[n];if(Array.isArray(e)?-1!==e.indexOf(i):e===i)for(var o=n;o<=r.length;){if((l=r[++o])===t)return!0;if(l!==E)break}if(i===E)for(o=n;0<o;){var a=r[--o];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=n;s<=r.length;){var l;if((l=r[++s])===t)return!0;if(l!==E)break}if(a!==E)break}return!1}function m(e,t){for(var n=e;0<=n;){var r=t[n];if(r!==E)return r;n--}return 0}function p(e,t,n,r,i){if(0===n[r])return $;var o=r-1;if(Array.isArray(i)&&!0===i[o])return $;var a=o-1,s=1+o,l=t[o],u=0<=a?t[a]:0,c=t[s];if(2===l&&3===c)return $;if(-1!==te.indexOf(l))return"!";if(-1!==te.indexOf(c))return $;if(-1!==ne.indexOf(c))return $;if(8===m(o,t))return"Ã·";if(11===Y.get(e[o])&&(c===j||c===V||c===q))return $;if(7===l||7===c)return $;if(9===l)return $;if(-1===[E,D,F].indexOf(l)&&9===c)return $;if(-1!==[x,_,M,P,L].indexOf(c))return $;if(m(o,t)===U)return $;if(h(23,U,o,t))return $;if(h([x,_],k,o,t))return $;if(h(12,12,o,t))return $;if(l===E)return"Ã·";if(23===l||23===c)return $;if(16===c||16===l)return"Ã·";if(-1!==[D,F,k].indexOf(c)||14===l)return $;if(36===u&&-1!==ae.indexOf(l))return $;if(l===L&&36===c)return $;if(c===N&&-1!==ee.concat(N,M,Q,j,V,q).indexOf(l))return $;if(-1!==ee.indexOf(c)&&l===Q||-1!==ee.indexOf(l)&&c===Q)return $;if(l===O&&-1!==[j,V,q].indexOf(c)||-1!==[j,V,q].indexOf(l)&&c===H)return $;if(-1!==ee.indexOf(l)&&-1!==re.indexOf(c)||-1!==re.indexOf(l)&&-1!==ee.indexOf(c))return $;if(-1!==[O,H].indexOf(l)&&(c===Q||-1!==[U,F].indexOf(c)&&t[1+s]===Q)||-1!==[U,F].indexOf(l)&&c===Q||l===Q&&-1!==[Q,L,P].indexOf(c))return $;if(-1!==[Q,L,P,x,_].indexOf(c))for(var A=o;0<=A;){if((d=t[A])===Q)return $;if(-1===[L,P].indexOf(d))break;A--}if(-1!==[O,H].indexOf(c))for(A=-1!==[x,_].indexOf(l)?a:o;0<=A;){var d;if((d=t[A])===Q)return $;if(-1===[L,P].indexOf(d))break;A--}if(z===l&&-1!==[z,G,K,W].indexOf(c)||-1!==[G,K].indexOf(l)&&-1!==[G,J].indexOf(c)||-1!==[J,W].indexOf(l)&&c===J)return $;if(-1!==oe.indexOf(l)&&-1!==[N,H].indexOf(c)||-1!==oe.indexOf(c)&&l===O)return $;if(-1!==ee.indexOf(l)&&-1!==ee.indexOf(c))return $;if(l===P&&-1!==ee.indexOf(c))return $;if(-1!==ee.concat(Q).indexOf(l)&&c===U||-1!==ee.concat(Q).indexOf(c)&&l===_)return $;if(41===l&&41===c){for(var p=n[o],f=1;0<p&&41===t[--p];)f++;if(f%2!=0)return $}return l===V&&c===q?$:"Ã·"}var l,f,g,v,y,w,b,C,S,E=10,D=13,F=15,x=17,_=18,M=19,N=20,k=21,U=22,P=24,Q=25,H=26,O=27,L=28,R=30,V=32,q=33,K=34,W=35,j=37,z=38,G=39,J=40,X=42,$="Ã",Y=(l=function(e){var t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),c=Array.isArray(u)?u:new Uint8Array(u);for(t=0;t<s;t+=4)n=A[e.charCodeAt(t)],r=A[e.charCodeAt(t+1)],i=A[e.charCodeAt(t+2)],o=A[e.charCodeAt(t+3)],c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),f=Array.isArray(l)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n}(l):new Uint32Array(l),v=o(g=Array.isArray(l)?function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n}(l):new Uint16Array(l),12,f[4]/2),y=2===f[5]?o(g,(24+f[4])/2):(w=f,b=Math.ceil((24+f[4])/4),w.slice?w.slice(b,void 0):new Uint32Array(Array.prototype.slice.call(w,b,void 0))),new a(f[0],f[1],f[2],f[3],v,y)),ee=[R,36],te=[1,2,3,5],ne=[E,8],re=[O,H],ie=te.concat(ne),oe=[z,G,J,K,W],ae=[F,D],se=(le.prototype.slice=function(){return d.apply(void 0,this.codePoints.slice(this.start,this.end))},le);function le(e,t,n,r){this.codePoints=e,this.required="!"===t,this.start=n,this.end=r}function ue(e){return 48<=e&&e<=57}function ce(e){return ue(e)||65<=e&&e<=70||97<=e&&e<=102}function Ae(e){return 10===e||9===e||32===e}function de(e){return 97<=e&&e<=122||65<=e&&e<=90||128<=e||95===e}function pe(e){return de(e)||ue(e)||45===e}function fe(e,t){return 92===e&&10!==t}function he(e,t,n){return 45===e?de(t)||fe(t,n):!!de(e)||!(92!==e||!fe(e,t))}function me(e,t,n){return 43===e||45===e?!!ue(t)||46===t&&ue(n):ue(46===e?t:e)}(S=C||(C={}))[S.STRING_TOKEN=0]="STRING_TOKEN",S[S.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",S[S.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",S[S.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",S[S.COMMA_TOKEN=4]="COMMA_TOKEN",S[S.HASH_TOKEN=5]="HASH_TOKEN",S[S.DELIM_TOKEN=6]="DELIM_TOKEN",S[S.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",S[S.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",S[S.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",S[S.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",S[S.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",S[S.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",S[S.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",S[S.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",S[S.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",S[S.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",S[S.NUMBER_TOKEN=17]="NUMBER_TOKEN",S[S.FUNCTION=18]="FUNCTION",S[S.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",S[S.IDENT_TOKEN=20]="IDENT_TOKEN",S[S.COLUMN_TOKEN=21]="COLUMN_TOKEN",S[S.URL_TOKEN=22]="URL_TOKEN",S[S.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",S[S.CDC_TOKEN=24]="CDC_TOKEN",S[S.CDO_TOKEN=25]="CDO_TOKEN",S[S.COLON_TOKEN=26]="COLON_TOKEN",S[S.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",S[S.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",S[S.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",S[S.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",S[S.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",S[S.EOF_TOKEN=32]="EOF_TOKEN";var ge={type:C.LEFT_PARENTHESIS_TOKEN},ve={type:C.RIGHT_PARENTHESIS_TOKEN},ye={type:C.COMMA_TOKEN},we={type:C.SUFFIX_MATCH_TOKEN},be={type:C.PREFIX_MATCH_TOKEN},Ce={type:C.COLUMN_TOKEN},Se={type:C.DASH_MATCH_TOKEN},Ee={type:C.INCLUDE_MATCH_TOKEN},De={type:C.LEFT_CURLY_BRACKET_TOKEN},Be={type:C.RIGHT_CURLY_BRACKET_TOKEN},Te={type:C.SUBSTRING_MATCH_TOKEN},Ie={type:C.BAD_URL_TOKEN},Fe={type:C.BAD_STRING_TOKEN},xe={type:C.CDO_TOKEN},_e={type:C.CDC_TOKEN},Me={type:C.COLON_TOKEN},Ne={type:C.SEMICOLON_TOKEN},ke={type:C.LEFT_SQUARE_BRACKET_TOKEN},Ue={type:C.RIGHT_SQUARE_BRACKET_TOKEN},Pe={type:C.WHITESPACE_TOKEN},Qe={type:C.EOF_TOKEN},He=(Oe.prototype.write=function(e){this._value=this._value.concat(c(e))},Oe.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==Qe;)e.push(t),t=this.consumeToken();return e},Oe.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(pe(t)||fe(n,r)){var i=he(t,n,r)?2:1,o=this.consumeName();return{type:C.HASH_TOKEN,value:o,flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),we;break;case 39:return this.consumeStringToken(39);case 40:return ge;case 41:return ve;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Te;break;case 43:if(me(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return ye;case 45:var a=e,s=this.peekCodePoint(0),l=this.peekCodePoint(1);if(me(a,s,l))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(he(a,s,l))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(45===s&&62===l)return this.consumeCodePoint(),this.consumeCodePoint(),_e;break;case 46:if(me(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var u=this.consumeCodePoint();if(42===u&&47===(u=this.consumeCodePoint()))return this.consumeToken();if(-1===u)return this.consumeToken()}break;case 58:return Me;case 59:return Ne;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),xe;break;case 64:if(he(this.peekCodePoint(0),this.peekCodePoint(1),this.peekCodePoint(2)))return o=this.consumeName(),{type:C.AT_KEYWORD_TOKEN,value:o};break;case 91:return ke;case 92:if(fe(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return Ue;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),be;break;case 123:return De;case 125:return Be;case 117:case 85:var c=this.peekCodePoint(0),A=this.peekCodePoint(1);return 43!==c||!ce(A)&&63!==A||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Se;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Ce;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ee;break;case-1:return Qe}return Ae(e)?(this.consumeWhiteSpace(),Pe):ue(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):de(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:C.DELIM_TOKEN,value:d(e)}},Oe.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},Oe.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},Oe.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},Oe.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();ce(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(d.apply(void 0,e.map(function(e){return 63===e?48:e})),16),i=parseInt(d.apply(void 0,e.map(function(e){return 63===e?70:e})),16);return{type:C.UNICODE_RANGE_TOKEN,start:r,end:i}}var o=parseInt(d.apply(void 0,e),16);if(45===this.peekCodePoint(0)&&ce(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var a=[];ce(t)&&a.length<6;)a.push(t),t=this.consumeCodePoint();return i=parseInt(d.apply(void 0,a),16),{type:C.UNICODE_RANGE_TOKEN,start:o,end:i}}return{type:C.UNICODE_RANGE_TOKEN,start:o,end:o}},Oe.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:C.FUNCTION_TOKEN,value:e}):{type:C.IDENT_TOKEN,value:e}},Oe.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:C.URL_TOKEN,value:""};var t,n=this.peekCodePoint(0);if(39===n||34===n){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===C.STRING_TOKEN&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:C.URL_TOKEN,value:r.value}):(this.consumeBadUrlRemnants(),Ie)}for(;;){var i=this.consumeCodePoint();if(-1===i||41===i)return{type:C.URL_TOKEN,value:d.apply(void 0,e)};if(Ae(i))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:C.URL_TOKEN,value:d.apply(void 0,e)}):(this.consumeBadUrlRemnants(),Ie);if(34===i||39===i||40===i||0<=(t=i)&&t<=8||11===t||14<=t&&t<=31||127===t)return this.consumeBadUrlRemnants(),Ie;if(92===i){if(!fe(i,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Ie;e.push(this.consumeEscapedCodePoint())}else e.push(i)}},Oe.prototype.consumeWhiteSpace=function(){for(;Ae(this.peekCodePoint(0));)this.consumeCodePoint()},Oe.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||-1===e)return;fe(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},Oe.prototype.consumeStringSlice=function(e){for(var t="";0<e;){var n=Math.min(6e4,e);t+=d.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),t},Oe.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(-1===r||void 0===r||r===e)return t+=this.consumeStringSlice(n),{type:C.STRING_TOKEN,value:t};if(10===r)return this._value.splice(0,n),Fe;if(92===r){var i=this._value[n+1];-1!==i&&void 0!==i&&(10===i?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):fe(r,i)&&(t+=this.consumeStringSlice(n),t+=d(this.consumeEscapedCodePoint()),n=-1))}n++}},Oe.prototype.consumeNumber=function(){var e=[],t=4,n=this.peekCodePoint(0);for(43!==n&&45!==n||e.push(this.consumeCodePoint());ue(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&ue(r))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;ue(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===n||101===n)&&((43===r||45===r)&&ue(i)||ue(r)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;ue(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[function(e){var t=0,n=1;43!==e[t]&&45!==e[t]||(45===e[t]&&(n=-1),t++);for(var r=[];ue(e[t]);)r.push(e[t++]);var i=r.length?parseInt(d.apply(void 0,r),10):0;46===e[t]&&t++;for(var o=[];ue(e[t]);)o.push(e[t++]);var a=o.length,s=a?parseInt(d.apply(void 0,o),10):0;69!==e[t]&&101!==e[t]||t++;var l=1;43!==e[t]&&45!==e[t]||(45===e[t]&&(l=-1),t++);for(var u=[];ue(e[t]);)u.push(e[t++]);var c=u.length?parseInt(d.apply(void 0,u),10):0;return n*(i+s*Math.pow(10,-a))*Math.pow(10,l*c)}(e),t]},Oe.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0);if(he(r,this.peekCodePoint(1),this.peekCodePoint(2))){var i=this.consumeName();return{type:C.DIMENSION_TOKEN,number:t,flags:n,unit:i}}return 37===r?(this.consumeCodePoint(),{type:C.PERCENTAGE_TOKEN,number:t,flags:n}):{type:C.NUMBER_TOKEN,number:t,flags:n}},Oe.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(ce(e)){for(var t=d(e);ce(this.peekCodePoint(0))&&t.length<6;)t+=d(this.consumeCodePoint());Ae(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||55296<=n&&n<=57343||1114111<n?65533:n}return-1===e?65533:e},Oe.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(pe(t))e+=d(t);else{if(!fe(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=d(this.consumeEscapedCodePoint())}}},Oe);function Oe(){this._value=[]}var Le=(Re.create=function(e){var t=new He;return t.write(e),new Re(t.read())},Re.parseValue=function(e){return Re.create(e).parseComponentValue()},Re.parseValues=function(e){return Re.create(e).parseComponentValues()},Re.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===C.WHITESPACE_TOKEN;)e=this.consumeToken();if(e.type===C.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);for(var t=this.consumeComponentValue();(e=this.consumeToken()).type===C.WHITESPACE_TOKEN;);if(e.type===C.EOF_TOKEN)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},Re.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(t.type===C.EOF_TOKEN)return e;e.push(t),e.push()}},Re.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case C.LEFT_CURLY_BRACKET_TOKEN:case C.LEFT_SQUARE_BRACKET_TOKEN:case C.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(e.type);case C.FUNCTION_TOKEN:return this.consumeFunction(e)}return e},Re.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(n.type===C.EOF_TOKEN||at(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},Re.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:C.FUNCTION};;){var n=this.consumeToken();if(n.type===C.EOF_TOKEN||n.type===C.RIGHT_PARENTHESIS_TOKEN)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},Re.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?Qe:e},Re.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},Re);function Re(e){this._tokens=e}function Ve(e){return e.type===C.DIMENSION_TOKEN}function qe(e){return e.type===C.NUMBER_TOKEN}function Ke(e){return e.type===C.IDENT_TOKEN}function We(e){return e.type===C.STRING_TOKEN}function je(e,t){return Ke(e)&&e.value===t}function ze(e){return e.type!==C.WHITESPACE_TOKEN}function Ge(e){return e.type!==C.WHITESPACE_TOKEN&&e.type!==C.COMMA_TOKEN}function Je(e){var t=[],n=[];return e.forEach(function(e){if(e.type===C.COMMA_TOKEN){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}e.type!==C.WHITESPACE_TOKEN&&n.push(e)}),n.length&&t.push(n),t}function Xe(e){return e.type===C.NUMBER_TOKEN||e.type===C.DIMENSION_TOKEN}function $e(e){return e.type===C.PERCENTAGE_TOKEN||Xe(e)}function Ye(e){return 1<e.length?[e[0],e[1]]:[e[0]]}function Ze(e,t,n){var r=e[0],i=e[1];return[ct(r,t),ct(void 0!==i?i:r,n)]}function et(e){return e.type===C.DIMENSION_TOKEN&&("deg"===e.unit||"grad"===e.unit||"rad"===e.unit||"turn"===e.unit)}function tt(e){switch(e.filter(Ke).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[st,st];case"to top":case"bottom":return dt(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[st,ut];case"to right":case"left":return dt(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ut,ut];case"to bottom":case"top":return dt(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ut,st];case"to left":case"right":return dt(270)}return 0}function nt(e){return 0==(255&e)}function rt(e){var t=255&e,n=255&e>>8,r=255&e>>16,i=255&e>>24;return t<255?"rgba("+i+","+r+","+n+","+t/255+")":"rgb("+i+","+r+","+n+")"}function it(e,t){if(e.type===C.NUMBER_TOKEN)return e.number;if(e.type!==C.PERCENTAGE_TOKEN)return 0;var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}function ot(e){var t=e.filter(Ge);if(3===t.length){var n=t.map(it),r=n[0],i=n[1],o=n[2];return ft(r,i,o,1)}if(4!==t.length)return 0;var a=t.map(it),s=(r=a[0],i=a[1],o=a[2],a[3]);return ft(r,i,o,s)}var at=function(e,t){return t===C.LEFT_CURLY_BRACKET_TOKEN&&e.type===C.RIGHT_CURLY_BRACKET_TOKEN||t===C.LEFT_SQUARE_BRACKET_TOKEN&&e.type===C.RIGHT_SQUARE_BRACKET_TOKEN||t===C.LEFT_PARENTHESIS_TOKEN&&e.type===C.RIGHT_PARENTHESIS_TOKEN},st={type:C.NUMBER_TOKEN,number:0,flags:4},lt={type:C.PERCENTAGE_TOKEN,number:50,flags:4},ut={type:C.PERCENTAGE_TOKEN,number:100,flags:4},ct=function(e,t){if(e.type===C.PERCENTAGE_TOKEN)return e.number/100*t;if(Ve(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},At=function(e){if(e.type===C.DIMENSION_TOKEN)switch(e.unit){case"deg":return Math.PI*e.number/180;case"grad":return Math.PI/200*e.number;case"rad":return e.number;case"turn":return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},dt=function(e){return Math.PI*e/180},pt=function(e){if(e.type===C.FUNCTION){var t=bt[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return t(e.values)}if(e.type===C.HASH_TOKEN){if(3===e.value.length){var n=e.value.substring(0,1),r=e.value.substring(1,2),i=e.value.substring(2,3);return ft(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),1)}if(4===e.value.length){n=e.value.substring(0,1),r=e.value.substring(1,2),i=e.value.substring(2,3);var o=e.value.substring(3,4);return ft(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(6===e.value.length)return n=e.value.substring(0,2),r=e.value.substring(2,4),i=e.value.substring(4,6),ft(parseInt(n,16),parseInt(r,16),parseInt(i,16),1);if(8===e.value.length)return n=e.value.substring(0,2),r=e.value.substring(2,4),i=e.value.substring(4,6),o=e.value.substring(6,8),ft(parseInt(n,16),parseInt(r,16),parseInt(i,16),parseInt(o,16)/255)}if(e.type===C.IDENT_TOKEN){var a=Ct[e.value.toUpperCase()];if(void 0!==a)return a}return Ct.TRANSPARENT},ft=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r)<<0)>>>0};function ht(e,t,n){return n<0&&(n+=1),1<=n&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}function mt(e){var t=e.filter(Ge),n=t[0],r=t[1],i=t[2],o=t[3],a=(n.type===C.NUMBER_TOKEN?dt(n.number):At(n))/(2*Math.PI),s=$e(r)?r.number/100:0,l=$e(i)?i.number/100:0,u=void 0!==o&&$e(o)?ct(o,1):1;if(0==s)return ft(255*l,255*l,255*l,1);var c=l<=.5?l*(1+s):l+s-l*s,A=2*l-c,d=ht(A,c,a+1/3),p=ht(A,c,a),f=ht(A,c,a-1/3);return ft(255*d,255*p,255*f,u)}var gt,vt,yt,wt,bt={hsl:mt,hsla:mt,rgb:ot,rgba:ot},Ct={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};function St(e){var t=pt(e[0]),n=e[1];return n&&$e(n)?{color:t,stop:n}:{color:t,stop:null}}function Et(e,n){var t=e[0],r=e[e.length-1];null===t.stop&&(t.stop=st),null===r.stop&&(r.stop=ut);for(var i=[],o=0,a=0;a<e.length;a++){var s=e[a].stop;if(null!==s){var l=ct(s,n);o<l?i.push(l):i.push(o),o=l}else i.push(null)}var u=null;for(a=0;a<i.length;a++){var c=i[a];if(null===c)null===u&&(u=a);else if(null!==u){for(var A=a-u,d=(c-i[u-1])/(1+A),p=1;p<=A;p++)i[u+p-1]=d*p;u=null}}return e.map(function(e,t){return{color:e.color,stop:Math.max(Math.min(1,i[t]/n),0)}})}function Dt(e,t){return Math.sqrt(e*e+t*t)}function Bt(e,t,o,a,s){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var n=t[0],r=t[1],i=Dt(o-n,a-r);return(s?i<e.optimumDistance:i>e.optimumDistance)?{optimumCorner:t,optimumDistance:i}:e},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner}function Tt(e){var i=dt(180),o=[];return Je(e).forEach(function(e,t){if(0===t){var n=e[0];if(n.type===C.IDENT_TOKEN&&-1!==["top","left","right","bottom"].indexOf(n.value))return void(i=tt(e));if(et(n))return void(i=(At(n)+dt(270))%dt(360))}var r=St(e);o.push(r)}),{angle:i,stops:o,type:Rt.LINEAR_GRADIENT}}function It(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]}(vt=gt||(gt={}))[vt.VALUE=0]="VALUE",vt[vt.LIST=1]="LIST",vt[vt.IDENT_VALUE=2]="IDENT_VALUE",vt[vt.TYPE_VALUE=3]="TYPE_VALUE",vt[vt.TOKEN_VALUE=4]="TOKEN_VALUE",(wt=yt||(yt={}))[wt.BORDER_BOX=0]="BORDER_BOX",wt[wt.PADDING_BOX=1]="PADDING_BOX";var Ft={name:"background-clip",initialValue:"border-box",prefix:!(wt[wt.CONTENT_BOX=2]="CONTENT_BOX"),type:gt.LIST,parse:function(e){return e.map(function(e){if(Ke(e))switch(e.value){case"padding-box":return yt.PADDING_BOX;case"content-box":return yt.CONTENT_BOX}return yt.BORDER_BOX})}},xt={name:"background-color",initialValue:"transparent",prefix:!1,type:gt.TYPE_VALUE,format:"color"},_t=function(e,t,n,r,i){var o="http://www.w3.org/2000/svg",a=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return a.setAttributeNS(null,"width",e.toString()),a.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(i),a},Mt=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})},Nt={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var r=t.getBoundingClientRect(),i=Math.round(r.height);if(e.body.removeChild(n),123===i)return!0}}return!1}(document);return Object.defineProperty(Nt,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(Nt,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(r){var e=r.createElement("canvas");e.width=100,e.height=100;var i=e.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,100,100);var t=new Image,o=e.toDataURL();t.src=o;var n=_t(100,100,0,0,t);return i.fillStyle="red",i.fillRect(0,0,100,100),Mt(n).then(function(e){i.drawImage(e,0,0);var t=i.getImageData(0,0,100,100).data;i.fillStyle="red",i.fillRect(0,0,100,100);var n=r.createElement("div");return n.style.backgroundImage="url("+o+")",n.style.height="100px",It(t)?Mt(_t(100,100,0,0,n)):Promise.reject(!1)}).then(function(e){return i.drawImage(e,0,0),It(i.getImageData(0,0,100,100).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Nt,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(Nt,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Nt,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Nt,"SUPPORT_CORS_XHR",{value:e}),e}},kt=(Ut.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,[this.id,this.getTime()+"ms"].concat(e)):this.info.apply(this,e))},Ut.prototype.getTime=function(){return Date.now()-this.start},Ut.create=function(e){Ut.instances[e.id]=new Ut(e)},Ut.destroy=function(e){delete Ut.instances[e]},Ut.getInstance=function(e){var t=Ut.instances[e];if(void 0===t)throw new Error("No logger instance found with id "+e);return t},Ut.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,[this.id,this.getTime()+"ms"].concat(e))},Ut.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,[this.id,this.getTime()+"ms"].concat(e)):this.info.apply(this,e))},Ut.instances={},Ut);function Ut(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}var Pt=(Qt.create=function(e,t){return Qt._caches[e]=new Ht(e,t)},Qt.destroy=function(e){delete Qt._caches[e]},Qt.open=function(e){var t=Qt._caches[e];if(void 0!==t)return t;throw new Error('Cache with key "'+e+'" not found')},Qt.getOrigin=function(e){var t=Qt._link;return t?(t.href=e,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},Qt.isSameOrigin=function(e){return Qt.getOrigin(e)===Qt._origin},Qt.setContext=function(e){Qt._link=e.document.createElement("a"),Qt._origin=Qt.getOrigin(e.location.href)},Qt.getInstance=function(){var e=Qt._current;if(null===e)throw new Error("No cache instance attached");return e},Qt.attachInstance=function(e){Qt._current=e},Qt.detachInstance=function(){Qt._current=null},Qt._caches={},Qt._origin="about:blank",Qt._current=null,Qt);function Qt(){}var Ht=(Ot.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(Zt(e)||Xt(e))&&(this._cache[e]=this.loadImage(e)),t},Ot.prototype.match=function(e){return this._cache[e]},Ot.prototype.loadImage=function(a){return u(this,void 0,void 0,function(){var t,r,n,i,o=this;return Z(this,function(e){switch(e.label){case 0:return t=Pt.isSameOrigin(a),r=!$t(a)&&!0===this._options.useCORS&&Nt.SUPPORT_CORS_IMAGES&&!t,n=!$t(a)&&!t&&"string"==typeof this._options.proxy&&Nt.SUPPORT_CORS_XHR&&!r,t||!1!==this._options.allowTaint||$t(a)||n||r?(i=a,n?[4,this.proxy(i)]:[3,2]):[2];case 1:i=e.sent(),e.label=2;case 2:return kt.getInstance(this.id).debug("Added image "+a.substring(0,256)),[4,new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,(Yt(i)||r)&&(n.crossOrigin="anonymous"),n.src=i,!0===n.complete&&setTimeout(function(){return e(n)},500),0<o._options.imageTimeout&&setTimeout(function(){return t("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,e.sent()]}})})},Ot.prototype.has=function(e){return void 0!==this._cache[e]},Ot.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},Ot.prototype.proxy=function(o){var a=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var l=o.substring(0,256);return new Promise(function(t,n){var r=Nt.SUPPORT_RESPONSE_TYPE?"blob":"text",i=new XMLHttpRequest;if(i.onload=function(){if(200===i.status)if("text"==r)t(i.response);else{var e=new FileReader;e.addEventListener("load",function(){return t(e.result)},!1),e.addEventListener("error",function(e){return n(e)},!1),e.readAsDataURL(i.response)}else n("Failed to proxy resource "+l+" with status code "+i.status)},i.onerror=n,i.open("GET",s+"?url="+encodeURIComponent(o)+"&responseType="+r),"text"!=r&&i instanceof XMLHttpRequest&&(i.responseType=r),a._options.imageTimeout){var e=a._options.imageTimeout;i.timeout=e,i.ontimeout=function(){return n("Timed out ("+e+"ms) proxying "+l)}}i.send()})},Ot);function Ot(e,t){this.id=e,this._options=t,this._cache={}}function Lt(e){var i=qt.CIRCLE,o=Wt.FARTHEST_CORNER,a=[],s=[];return Je(e).forEach(function(e,t){var n=!0;if(0===t?n=e.reduce(function(e,t){if(Ke(t))switch(t.value){case"center":return s.push(lt),!1;case"top":case"left":return s.push(st),!1;case"right":case"bottom":return s.push(ut),!1}else if($e(t)||Xe(t))return s.push(t),!1;return e},n):1===t&&(n=e.reduce(function(e,t){if(Ke(t))switch(t.value){case"circle":return i=qt.CIRCLE,!1;case"ellipse":return i=qt.ELLIPSE,!1;case"contain":case tn:return o=Wt.CLOSEST_SIDE,!1;case nn:return o=Wt.FARTHEST_SIDE,!1;case rn:return o=Wt.CLOSEST_CORNER,!1;case"cover":case on:return o=Wt.FARTHEST_CORNER,!1}else if(Xe(t)||$e(t))return Array.isArray(o)||(o=[]),o.push(t),!1;return e},n)),n){var r=St(e);a.push(r)}}),{size:o,shape:i,stops:a,position:s,type:Rt.RADIAL_GRADIENT}}var Rt,Vt,qt,Kt,Wt,jt,zt=/^data:image\/svg\+xml/i,Gt=/^data:image\/.*;base64,/i,Jt=/^data:image\/.*/i,Xt=function(e){return Nt.SUPPORT_SVG_DRAWING||!en(e)},$t=function(e){return Jt.test(e)},Yt=function(e){return Gt.test(e)},Zt=function(e){return"blob"===e.substr(0,4)},en=function(e){return"svg"===e.substr(-3).toLowerCase()||zt.test(e)},tn="closest-side",nn="farthest-side",rn="closest-corner",on="farthest-corner";(Vt=Rt||(Rt={}))[Vt.URL=0]="URL",Vt[Vt.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",Vt[Vt.RADIAL_GRADIENT=2]="RADIAL_GRADIENT",(Kt=qt||(qt={}))[Kt.CIRCLE=0]="CIRCLE",Kt[Kt.ELLIPSE=1]="ELLIPSE",(jt=Wt||(Wt={}))[jt.CLOSEST_SIDE=0]="CLOSEST_SIDE",jt[jt.FARTHEST_SIDE=1]="FARTHEST_SIDE",jt[jt.CLOSEST_CORNER=2]="CLOSEST_CORNER",jt[jt.FARTHEST_CORNER=3]="FARTHEST_CORNER";var an,sn,ln=function(e){if(e.type===C.URL_TOKEN){var t={url:e.value,type:Rt.URL};return Pt.getInstance().addImage(e.value),t}if(e.type!==C.FUNCTION)throw new Error("Unsupported image type");var n=un[e.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(e.values)},un={"linear-gradient":function(e){var i=dt(180),o=[];return Je(e).forEach(function(e,t){if(0===t){var n=e[0];if(n.type===C.IDENT_TOKEN&&"to"===n.value)return void(i=tt(e));if(et(n))return void(i=At(n))}var r=St(e);o.push(r)}),{angle:i,stops:o,type:Rt.LINEAR_GRADIENT}},"-moz-linear-gradient":Tt,"-ms-linear-gradient":Tt,"-o-linear-gradient":Tt,"-webkit-linear-gradient":Tt,"radial-gradient":function(e){var o=qt.CIRCLE,a=Wt.FARTHEST_CORNER,s=[],l=[];return Je(e).forEach(function(e,t){var n=!0;if(0===t){var r=!1;n=e.reduce(function(e,t){if(r)if(Ke(t))switch(t.value){case"center":return l.push(lt),e;case"top":case"left":return l.push(st),e;case"right":case"bottom":return l.push(ut),e}else($e(t)||Xe(t))&&l.push(t);else if(Ke(t))switch(t.value){case"circle":return o=qt.CIRCLE,!1;case"ellipse":return o=qt.ELLIPSE,!1;case"at":return!(r=!0);case tn:return a=Wt.CLOSEST_SIDE,!1;case"cover":case nn:return a=Wt.FARTHEST_SIDE,!1;case"contain":case rn:return a=Wt.CLOSEST_CORNER,!1;case on:return a=Wt.FARTHEST_CORNER,!1}else if(Xe(t)||$e(t))return Array.isArray(a)||(a=[]),a.push(t),!1;return e},n)}if(n){var i=St(e);s.push(i)}}),{size:a,shape:o,stops:s,position:l,type:Rt.RADIAL_GRADIENT}},"-moz-radial-gradient":Lt,"-ms-radial-gradient":Lt,"-o-radial-gradient":Lt,"-webkit-radial-gradient":Lt,"-webkit-gradient":function(e){var t=dt(180),a=[],s=Rt.LINEAR_GRADIENT,n=qt.CIRCLE,r=Wt.FARTHEST_CORNER;return Je(e).forEach(function(e,t){var n=e[0];if(0===t){if(Ke(n)&&"linear"===n.value)return void(s=Rt.LINEAR_GRADIENT);if(Ke(n)&&"radial"===n.value)return void(s=Rt.RADIAL_GRADIENT)}if(n.type===C.FUNCTION)if("from"===n.name){var r=pt(n.values[0]);a.push({stop:st,color:r})}else if("to"===n.name)r=pt(n.values[0]),a.push({stop:ut,color:r});else if("color-stop"===n.name){var i=n.values.filter(Ge);if(2===i.length){r=pt(i[1]);var o=i[0];qe(o)&&a.push({stop:{type:C.PERCENTAGE_TOKEN,number:100*o.number,flags:o.flags},color:r})}}}),s===Rt.LINEAR_GRADIENT?{angle:(t+dt(180))%dt(360),stops:a,type:s}:{size:r,shape:n,stops:a,position:[],type:s}}},cn={name:"background-image",initialValue:"none",type:gt.LIST,prefix:!1,parse:function(e){if(0===e.length)return[];var t=e[0];return t.type===C.IDENT_TOKEN&&"none"===t.value?[]:e.filter(function(e){return Ge(e)&&((t=e).type!==C.FUNCTION||un[t.name]);var t}).map(ln)}},An={name:"background-origin",initialValue:"border-box",prefix:!1,type:gt.LIST,parse:function(e){return e.map(function(e){if(Ke(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},dn={name:"background-position",initialValue:"0% 0%",type:gt.LIST,prefix:!1,parse:function(e){return Je(e).map(function(e){return e.filter($e)}).map(Ye)}};(sn=an||(an={}))[sn.REPEAT=0]="REPEAT",sn[sn.NO_REPEAT=1]="NO_REPEAT",sn[sn.REPEAT_X=2]="REPEAT_X";var pn,fn,hn={name:"background-repeat",initialValue:"repeat",prefix:!(sn[sn.REPEAT_Y=3]="REPEAT_Y"),type:gt.LIST,parse:function(e){return Je(e).map(function(e){return e.filter(Ke).map(function(e){return e.value}).join(" ")}).map(mn)}},mn=function(e){switch(e){case"no-repeat":return an.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return an.REPEAT_X;case"repeat-y":case"no-repeat repeat":return an.REPEAT_Y;case"repeat":default:return an.REPEAT}};function gn(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:gt.TYPE_VALUE,format:"color"}}function vn(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:gt.LIST,parse:function(e){return Ye(e.filter($e))}}}(fn=pn||(pn={})).AUTO="auto",fn.CONTAIN="contain";var yn,wn,bn={name:"background-size",initialValue:"0",prefix:!(fn.COVER="cover"),type:gt.LIST,parse:function(e){return Je(e).map(function(e){return e.filter(Cn)})}},Cn=function(e){return Ke(e)||$e(e)},Sn=gn("top"),En=gn("right"),Dn=gn("bottom"),Bn=gn("left"),Tn=vn("top-left"),In=vn("top-right"),Fn=vn("bottom-right"),xn=vn("bottom-left");function _n(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:gt.IDENT_VALUE,parse:function(e){switch(e){case"none":return yn.NONE}return yn.SOLID}}}function Mn(e){return{name:"border-"+e+"-width",initialValue:"0",type:gt.VALUE,prefix:!1,parse:function(e){return Ve(e)?e.number:0}}}(wn=yn||(yn={}))[wn.NONE=0]="NONE",wn[wn.SOLID=1]="SOLID";var Nn,kn,Un=_n("top"),Pn=_n("right"),Qn=_n("bottom"),Hn=_n("left"),On=Mn("top"),Ln=Mn("right"),Rn=Mn("bottom"),Vn=Mn("left"),qn={name:"color",initialValue:"transparent",prefix:!1,type:gt.TYPE_VALUE,format:"color"},Kn={name:"display",initialValue:"inline-block",prefix:!1,type:gt.LIST,parse:function(e){return e.filter(Ke).reduce(function(e,t){return e|Wn(t.value)},0)}},Wn=function(e){switch(e){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};(kn=Nn||(Nn={}))[kn.NONE=0]="NONE",kn[kn.LEFT=1]="LEFT",kn[kn.RIGHT=2]="RIGHT",kn[kn.INLINE_START=3]="INLINE_START";var jn,zn,Gn,Jn,Xn={name:"float",initialValue:"none",prefix:!(kn[kn.INLINE_END=4]="INLINE_END"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"left":return Nn.LEFT;case"right":return Nn.RIGHT;case"inline-start":return Nn.INLINE_START;case"inline-end":return Nn.INLINE_END}return Nn.NONE}},$n={name:"letter-spacing",initialValue:"0",prefix:!1,type:gt.VALUE,parse:function(e){return e.type===C.IDENT_TOKEN&&"normal"===e.value?0:e.type===C.NUMBER_TOKEN?e.number:e.type===C.DIMENSION_TOKEN?e.number:0}},Yn={name:"line-break",initialValue:(zn=jn||(jn={})).NORMAL="normal",prefix:!(zn.STRICT="strict"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"strict":return jn.STRICT;case"normal":default:return jn.NORMAL}}},Zn={name:"line-height",initialValue:"normal",prefix:!1,type:gt.TOKEN_VALUE},er={name:"list-style-image",initialValue:"none",type:gt.VALUE,prefix:!1,parse:function(e){return e.type===C.IDENT_TOKEN&&"none"===e.value?null:ln(e)}};(Jn=Gn||(Gn={}))[Jn.INSIDE=0]="INSIDE";var tr,nr,rr={name:"list-style-position",initialValue:"outside",prefix:!(Jn[Jn.OUTSIDE=1]="OUTSIDE"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"inside":return Gn.INSIDE;case"outside":default:return Gn.OUTSIDE}}};function ir(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:gt.TOKEN_VALUE}}(nr=tr||(tr={}))[nr.NONE=-1]="NONE",nr[nr.DISC=0]="DISC",nr[nr.CIRCLE=1]="CIRCLE",nr[nr.SQUARE=2]="SQUARE",nr[nr.DECIMAL=3]="DECIMAL",nr[nr.CJK_DECIMAL=4]="CJK_DECIMAL",nr[nr.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",nr[nr.LOWER_ROMAN=6]="LOWER_ROMAN",nr[nr.UPPER_ROMAN=7]="UPPER_ROMAN",nr[nr.LOWER_GREEK=8]="LOWER_GREEK",nr[nr.LOWER_ALPHA=9]="LOWER_ALPHA",nr[nr.UPPER_ALPHA=10]="UPPER_ALPHA",nr[nr.ARABIC_INDIC=11]="ARABIC_INDIC",nr[nr.ARMENIAN=12]="ARMENIAN",nr[nr.BENGALI=13]="BENGALI",nr[nr.CAMBODIAN=14]="CAMBODIAN",nr[nr.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",nr[nr.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",nr[nr.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",nr[nr.DEVANAGARI=18]="DEVANAGARI",nr[nr.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",nr[nr.GEORGIAN=20]="GEORGIAN",nr[nr.GUJARATI=21]="GUJARATI",nr[nr.GURMUKHI=22]="GURMUKHI",nr[nr.HEBREW=22]="HEBREW",nr[nr.HIRAGANA=23]="HIRAGANA",nr[nr.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",nr[nr.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",nr[nr.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",nr[nr.KANNADA=27]="KANNADA",nr[nr.KATAKANA=28]="KATAKANA",nr[nr.KATAKANA_IROHA=29]="KATAKANA_IROHA",nr[nr.KHMER=30]="KHMER",nr[nr.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",nr[nr.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",nr[nr.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",nr[nr.LAO=34]="LAO",nr[nr.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",nr[nr.MALAYALAM=36]="MALAYALAM",nr[nr.MONGOLIAN=37]="MONGOLIAN",nr[nr.MYANMAR=38]="MYANMAR",nr[nr.ORIYA=39]="ORIYA",nr[nr.PERSIAN=40]="PERSIAN",nr[nr.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",nr[nr.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",nr[nr.TAMIL=43]="TAMIL",nr[nr.TELUGU=44]="TELUGU",nr[nr.THAI=45]="THAI",nr[nr.TIBETAN=46]="TIBETAN",nr[nr.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",nr[nr.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",nr[nr.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",nr[nr.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN";var or,ar,sr={name:"list-style-type",initialValue:"none",prefix:!(nr[nr.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"disc":return tr.DISC;case"circle":return tr.CIRCLE;case"square":return tr.SQUARE;case"decimal":return tr.DECIMAL;case"cjk-decimal":return tr.CJK_DECIMAL;case"decimal-leading-zero":return tr.DECIMAL_LEADING_ZERO;case"lower-roman":return tr.LOWER_ROMAN;case"upper-roman":return tr.UPPER_ROMAN;case"lower-greek":return tr.LOWER_GREEK;case"lower-alpha":return tr.LOWER_ALPHA;case"upper-alpha":return tr.UPPER_ALPHA;case"arabic-indic":return tr.ARABIC_INDIC;case"armenian":return tr.ARMENIAN;case"bengali":return tr.BENGALI;case"cambodian":return tr.CAMBODIAN;case"cjk-earthly-branch":return tr.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return tr.CJK_HEAVENLY_STEM;case"cjk-ideographic":return tr.CJK_IDEOGRAPHIC;case"devanagari":return tr.DEVANAGARI;case"ethiopic-numeric":return tr.ETHIOPIC_NUMERIC;case"georgian":return tr.GEORGIAN;case"gujarati":return tr.GUJARATI;case"gurmukhi":return tr.GURMUKHI;case"hebrew":return tr.HEBREW;case"hiragana":return tr.HIRAGANA;case"hiragana-iroha":return tr.HIRAGANA_IROHA;case"japanese-formal":return tr.JAPANESE_FORMAL;case"japanese-informal":return tr.JAPANESE_INFORMAL;case"kannada":return tr.KANNADA;case"katakana":return tr.KATAKANA;case"katakana-iroha":return tr.KATAKANA_IROHA;case"khmer":return tr.KHMER;case"korean-hangul-formal":return tr.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return tr.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return tr.KOREAN_HANJA_INFORMAL;case"lao":return tr.LAO;case"lower-armenian":return tr.LOWER_ARMENIAN;case"malayalam":return tr.MALAYALAM;case"mongolian":return tr.MONGOLIAN;case"myanmar":return tr.MYANMAR;case"oriya":return tr.ORIYA;case"persian":return tr.PERSIAN;case"simp-chinese-formal":return tr.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return tr.SIMP_CHINESE_INFORMAL;case"tamil":return tr.TAMIL;case"telugu":return tr.TELUGU;case"thai":return tr.THAI;case"tibetan":return tr.TIBETAN;case"trad-chinese-formal":return tr.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return tr.TRAD_CHINESE_INFORMAL;case"upper-armenian":return tr.UPPER_ARMENIAN;case"disclosure-open":return tr.DISCLOSURE_OPEN;case"disclosure-closed":return tr.DISCLOSURE_CLOSED;case"none":default:return tr.NONE}}},lr=ir("top"),ur=ir("right"),cr=ir("bottom"),Ar=ir("left");function dr(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:gt.TYPE_VALUE,format:"length-percentage"}}(ar=or||(or={}))[ar.VISIBLE=0]="VISIBLE",ar[ar.HIDDEN=1]="HIDDEN",ar[ar.SCROLL=2]="SCROLL";var pr,fr,hr,mr,gr={name:"overflow",initialValue:"visible",prefix:!(ar[ar.AUTO=3]="AUTO"),type:gt.LIST,parse:function(e){return e.filter(Ke).map(function(e){switch(e.value){case"hidden":return or.HIDDEN;case"scroll":return or.SCROLL;case"auto":return or.AUTO;case"visible":default:return or.VISIBLE}})}},vr={name:"overflow-wrap",initialValue:(fr=pr||(pr={})).NORMAL="normal",prefix:!(fr.BREAK_WORD="break-word"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"break-word":return pr.BREAK_WORD;case"normal":default:return pr.NORMAL}}},yr=dr("top"),wr=dr("right"),br=dr("bottom"),Cr=dr("left");(mr=hr||(hr={}))[mr.LEFT=0]="LEFT",mr[mr.CENTER=1]="CENTER";var Sr,Er,Dr={name:"text-align",initialValue:"left",prefix:!(mr[mr.RIGHT=2]="RIGHT"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"right":return hr.RIGHT;case"center":case"justify":return hr.CENTER;case"left":default:return hr.LEFT}}};(Er=Sr||(Sr={}))[Er.STATIC=0]="STATIC",Er[Er.RELATIVE=1]="RELATIVE",Er[Er.ABSOLUTE=2]="ABSOLUTE",Er[Er.FIXED=3]="FIXED";var Br,Tr,Ir={name:"position",initialValue:"static",prefix:!(Er[Er.STICKY=4]="STICKY"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"relative":return Sr.RELATIVE;case"absolute":return Sr.ABSOLUTE;case"fixed":return Sr.FIXED;case"sticky":return Sr.STICKY}return Sr.STATIC}},Fr={name:"text-shadow",initialValue:"none",type:gt.LIST,prefix:!1,parse:function(e){return 1===e.length&&je(e[0],"none")?[]:Je(e).map(function(e){for(var t={color:Ct.TRANSPARENT,offsetX:st,offsetY:st,blur:st},n=0,r=0;r<e.length;r++){var i=e[r];Xe(i)?(0===n?t.offsetX=i:1===n?t.offsetY=i:t.blur=i,n++):t.color=pt(i)}return t})}};(Tr=Br||(Br={}))[Tr.NONE=0]="NONE",Tr[Tr.LOWERCASE=1]="LOWERCASE",Tr[Tr.UPPERCASE=2]="UPPERCASE";var xr,_r,Mr={name:"text-transform",initialValue:"none",prefix:!(Tr[Tr.CAPITALIZE=3]="CAPITALIZE"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"uppercase":return Br.UPPERCASE;case"lowercase":return Br.LOWERCASE;case"capitalize":return Br.CAPITALIZE}return Br.NONE}},Nr={name:"transform",initialValue:"none",prefix:!0,type:gt.VALUE,parse:function(e){if(e.type===C.IDENT_TOKEN&&"none"===e.value)return null;if(e.type!==C.FUNCTION)return null;var t=kr[e.name];if(void 0===t)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return t(e.values)}},kr={matrix:function(e){var t=e.filter(function(e){return e.type===C.NUMBER_TOKEN}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return e.type===C.NUMBER_TOKEN}).map(function(e){return e.number}),n=t[0],r=t[1],i=(t[2],t[3],t[4]),o=t[5],a=(t[6],t[7],t[8],t[9],t[10],t[11],t[12]),s=t[13];return t[14],t[15],16===t.length?[n,r,i,o,a,s]:null}},Ur={type:C.PERCENTAGE_TOKEN,number:50,flags:4},Pr=[Ur,Ur],Qr={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:gt.LIST,parse:function(e){var t=e.filter($e);return 2!==t.length?Pr:[t[0],t[1]]}};(_r=xr||(xr={}))[_r.VISIBLE=0]="VISIBLE",_r[_r.HIDDEN=1]="HIDDEN";var Hr,Or,Lr={name:"visible",initialValue:"none",prefix:!(_r[_r.COLLAPSE=2]="COLLAPSE"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"hidden":return xr.HIDDEN;case"collapse":return xr.COLLAPSE;case"visible":default:return xr.VISIBLE}}};(Or=Hr||(Hr={})).NORMAL="normal",Or.BREAK_ALL="break-all";var Rr,Vr,qr={name:"word-break",initialValue:"normal",prefix:!(Or.KEEP_ALL="keep-all"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"break-all":return Hr.BREAK_ALL;case"keep-all":return Hr.KEEP_ALL;case"normal":default:return Hr.NORMAL}}},Kr={name:"z-index",initialValue:"auto",prefix:!1,type:gt.VALUE,parse:function(e){if(e.type===C.IDENT_TOKEN)return{auto:!0,order:0};if(qe(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Wr={name:"opacity",initialValue:"1",type:gt.VALUE,prefix:!1,parse:function(e){return qe(e)?e.number:1}},jr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:gt.TYPE_VALUE,format:"color"},zr={name:"text-decoration-line",initialValue:"none",prefix:!1,type:gt.LIST,parse:function(e){return e.filter(Ke).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},Gr={name:"font-family",initialValue:"",prefix:!1,type:gt.LIST,parse:function(e){return e.filter(Jr).map(function(e){return e.value})}},Jr=function(e){return e.type===C.STRING_TOKEN||e.type===C.IDENT_TOKEN},Xr={name:"font-size",initialValue:"0",prefix:!1,type:gt.TYPE_VALUE,format:"length"},$r={name:"font-weight",initialValue:"normal",type:gt.VALUE,prefix:!1,parse:function(e){if(qe(e))return e.number;if(Ke(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Yr={name:"font-variant",initialValue:"none",type:gt.LIST,prefix:!1,parse:function(e){return e.filter(Ke).map(function(e){return e.value})}};function Zr(e,t){return 0!=(e&t)}function ei(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""}(Vr=Rr||(Rr={})).NORMAL="normal",Vr.ITALIC="italic";var ti={name:"font-style",initialValue:"normal",prefix:!(Vr.OBLIQUE="oblique"),type:gt.IDENT_VALUE,parse:function(e){switch(e){case"oblique":return Rr.OBLIQUE;case"italic":return Rr.ITALIC;case"normal":default:return Rr.NORMAL}}},ni={name:"content",initialValue:"none",type:gt.LIST,prefix:!1,parse:function(e){if(0===e.length)return[];var t=e[0];return t.type===C.IDENT_TOKEN&&"none"===t.value?[]:e}},ri={name:"counter-increment",initialValue:"none",prefix:!0,type:gt.LIST,parse:function(e){if(0===e.length)return null;var t=e[0];if(t.type===C.IDENT_TOKEN&&"none"===t.value)return null;for(var n=[],r=e.filter(ze),i=0;i<r.length;i++){var o=r[i],a=r[i+1];if(o.type===C.IDENT_TOKEN){var s=a&&qe(a)?a.number:1;n.push({counter:o.value,increment:s})}}return n}},ii={name:"counter-reset",initialValue:"none",prefix:!0,type:gt.LIST,parse:function(e){if(0===e.length)return[];for(var t=[],n=e.filter(ze),r=0;r<n.length;r++){var i=n[r],o=n[r+1];if(Ke(i)&&"none"!==i.value){var a=o&&qe(o)?o.number:0;t.push({counter:i.value,reset:a})}}return t}},oi={name:"quotes",initialValue:"none",prefix:!0,type:gt.LIST,parse:function(e){if(0===e.length)return null;var t=e[0];if(t.type===C.IDENT_TOKEN&&"none"===t.value)return null;var n=[],r=e.filter(We);if(r.length%2!=0)return null;for(var i=0;i<r.length;i+=2){var o=r[i].value,a=r[i+1].value;n.push({open:o,close:a})}return n}},ai={name:"box-shadow",initialValue:"none",type:gt.LIST,prefix:!1,parse:function(e){return 1===e.length&&je(e[0],"none")?[]:Je(e).map(function(e){for(var t={color:255,offsetX:st,offsetY:st,blur:st,spread:st,inset:!1},n=0,r=0;r<e.length;r++){var i=e[r];je(i,"inset")?t.inset=!0:Xe(i)?(0===n?t.offsetX=i:1===n?t.offsetY=i:2===n?t.blur=i:t.spread=i,n++):t.color=pt(i)}return t})}},si=(li.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&this.visibility===xr.VISIBLE},li.prototype.isTransparent=function(){return nt(this.backgroundColor)},li.prototype.isTransformed=function(){return null!==this.transform},li.prototype.isPositioned=function(){return this.position!==Sr.STATIC},li.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},li.prototype.isFloating=function(){return this.float!==Nn.NONE},li.prototype.isInlineLevel=function(){return Zr(this.display,4)||Zr(this.display,33554432)||Zr(this.display,268435456)||Zr(this.display,536870912)||Zr(this.display,67108864)||Zr(this.display,134217728)},li);function li(e){this.backgroundClip=di(Ft,e.backgroundClip),this.backgroundColor=di(xt,e.backgroundColor),this.backgroundImage=di(cn,e.backgroundImage),this.backgroundOrigin=di(An,e.backgroundOrigin),this.backgroundPosition=di(dn,e.backgroundPosition),this.backgroundRepeat=di(hn,e.backgroundRepeat),this.backgroundSize=di(bn,e.backgroundSize),this.borderTopColor=di(Sn,e.borderTopColor),this.borderRightColor=di(En,e.borderRightColor),this.borderBottomColor=di(Dn,e.borderBottomColor),this.borderLeftColor=di(Bn,e.borderLeftColor),this.borderTopLeftRadius=di(Tn,e.borderTopLeftRadius),this.borderTopRightRadius=di(In,e.borderTopRightRadius),this.borderBottomRightRadius=di(Fn,e.borderBottomRightRadius),this.borderBottomLeftRadius=di(xn,e.borderBottomLeftRadius),this.borderTopStyle=di(Un,e.borderTopStyle),this.borderRightStyle=di(Pn,e.borderRightStyle),this.borderBottomStyle=di(Qn,e.borderBottomStyle),this.borderLeftStyle=di(Hn,e.borderLeftStyle),this.borderTopWidth=di(On,e.borderTopWidth),this.borderRightWidth=di(Ln,e.borderRightWidth),this.borderBottomWidth=di(Rn,e.borderBottomWidth),this.borderLeftWidth=di(Vn,e.borderLeftWidth),this.boxShadow=di(ai,e.boxShadow),this.color=di(qn,e.color),this.display=di(Kn,e.display),this.float=di(Xn,e.cssFloat),this.fontFamily=di(Gr,e.fontFamily),this.fontSize=di(Xr,e.fontSize),this.fontStyle=di(ti,e.fontStyle),this.fontVariant=di(Yr,e.fontVariant),this.fontWeight=di($r,e.fontWeight),this.letterSpacing=di($n,e.letterSpacing),this.lineBreak=di(Yn,e.lineBreak),this.lineHeight=di(Zn,e.lineHeight),this.listStyleImage=di(er,e.listStyleImage),this.listStylePosition=di(rr,e.listStylePosition),this.listStyleType=di(sr,e.listStyleType),this.marginTop=di(lr,e.marginTop),this.marginRight=di(ur,e.marginRight),this.marginBottom=di(cr,e.marginBottom),this.marginLeft=di(Ar,e.marginLeft),this.opacity=di(Wr,e.opacity);var t=di(gr,e.overflow);this.overflowX=t[0],this.overflowY=t[1<t.length?1:0],this.overflowWrap=di(vr,e.overflowWrap),this.paddingTop=di(yr,e.paddingTop),this.paddingRight=di(wr,e.paddingRight),this.paddingBottom=di(br,e.paddingBottom),this.paddingLeft=di(Cr,e.paddingLeft),this.position=di(Ir,e.position),this.textAlign=di(Dr,e.textAlign),this.textDecorationColor=di(jr,e.textDecorationColor||e.color),this.textDecorationLine=di(zr,e.textDecorationLine),this.textShadow=di(Fr,e.textShadow),this.textTransform=di(Mr,e.textTransform),this.transform=di(Nr,e.transform),this.transformOrigin=di(Qr,e.transformOrigin),this.visibility=di(Lr,e.visibility),this.wordBreak=di(qr,e.wordBreak),this.zIndex=di(Kr,e.zIndex)}var ui,ci=function(e){this.content=di(ni,e.content),this.quotes=di(oi,e.quotes)},Ai=function(e){this.counterIncrement=di(ri,e.counterIncrement),this.counterReset=di(ii,e.counterReset)},di=function(e,t){var n=new He,r=null!=t?t.toString():e.initialValue;n.write(r);var i=new Le(n.read());switch(e.type){case gt.IDENT_VALUE:var o=i.parseComponentValue();return e.parse(Ke(o)?o.value:e.initialValue);case gt.VALUE:return e.parse(i.parseComponentValue());case gt.LIST:return e.parse(i.parseComponentValues());case gt.TOKEN_VALUE:return i.parseComponentValue();case gt.TYPE_VALUE:switch(e.format){case"angle":return At(i.parseComponentValue());case"color":return pt(i.parseComponentValue());case"image":return ln(i.parseComponentValue());case"length":var a=i.parseComponentValue();return Xe(a)?a:st;case"length-percentage":var s=i.parseComponentValue();return $e(s)?s:st}}throw new Error("Attempting to parse unsupported css format type "+e.format)},pi=function(e){this.styles=new si(window.getComputedStyle(e,null)),this.textNodes=[],this.elements=[],null!==this.styles.transform&&ao(e)&&(e.style.transform="none"),this.bounds=I(e),this.flags=0},fi=function(e,t){this.text=e,this.bounds=t},hi=function(e,t){for(var n,r=function(e,t){var n=c(e),r=function(n,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var t=function(e,i){void 0===i&&(i="strict");var o=[],a=[],s=[];return e.forEach(function(e,t){var n=Y.get(e);if(50<n?(s.push(!0),n-=50):s.push(!1),-1!==["normal","auto","loose"].indexOf(i)&&-1!==[8208,8211,12316,12448].indexOf(e))return a.push(t),o.push(16);if(4!==n&&11!==n)return a.push(t),31===n?o.push("strict"===i?k:j):n===X?o.push(R):29===n?o.push(R):43===n?131072<=e&&e<=196605||196608<=e&&e<=262141?o.push(j):o.push(R):void o.push(n);if(0===t)return a.push(t),o.push(R);var r=o[t-1];return-1===ie.indexOf(r)?(a.push(a[t-1]),o.push(r)):(a.push(t),o.push(R))}),[a,o,s]}(n,e.lineBreak),r=t[0],i=t[1],o=t[2];return"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(i=i.map(function(e){return-1!==[Q,R,X].indexOf(e)?j:e})),[r,i,"keep-all"===e.wordBreak?o.map(function(e,t){return e&&19968<=n[t]&&n[t]<=40959}):void 0]}(n,t),i=r[0],o=r[1],a=r[2],s=n.length,l=0,u=0;return{next:function(){if(s<=u)return{done:!0,value:null};for(var e=$;u<s&&(e=p(n,o,i,++u,a))===$;);if(e===$&&u!==s)return{done:!0,value:null};var t=new se(n,e,l,u);return l=u,{value:t,done:!1}}}}(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap===pr.BREAK_WORD?"break-word":t.wordBreak}),i=[];!(n=r.next()).done;)n.value&&i.push(n.value.slice());return i},mi=function(e,t){var n,r,i,o,a,s,l,u;this.text=gi(e.data,t.textTransform),this.textBounds=(n=this.text,i=e,o=n,s=0!==(a=r=t).letterSpacing?c(o).map(function(e){return d(e)}):hi(o,a),l=[],u=0,s.forEach(function(e){if(r.textDecorationLine.length||0<e.trim().length)if(Nt.SUPPORT_RANGE_BOUNDS)l.push(new fi(e,function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(e,t),i.setEnd(e,t+n),T.fromClientRect(i.getBoundingClientRect())}(i,u,e.length)));else{var t=i.splitText(e.length);l.push(new fi(e,function(e){var t=e.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(n,e);var i=I(n);return n.firstChild&&r.replaceChild(n.firstChild,n),i}}return new T(0,0,0,0)}(i))),i=t}else Nt.SUPPORT_RANGE_BOUNDS||(i=i.splitText(e.length));u+=e.length}),l)},gi=function(e,t){switch(t){case Br.LOWERCASE:return e.toLowerCase();case Br.CAPITALIZE:return e.replace(vi,yi);case Br.UPPERCASE:return e.toUpperCase();default:return e}},vi=/(^|\s|:|-|\(|\))([a-z])/g,yi=function(e,t,n){return 0<e.length?t+n.toUpperCase():e},wi=(e(bi,ui=pi),bi);function bi(e){var t=ui.call(this,e)||this;return t.src=e.currentSrc||e.src,t.intrinsicWidth=e.naturalWidth,t.intrinsicHeight=e.naturalHeight,Pt.getInstance().addImage(t.src),t}var Ci,Si=(e(Ei,Ci=pi),Ei);function Ei(e){var t=Ci.call(this,e)||this;return t.canvas=e,t.intrinsicWidth=e.width,t.intrinsicHeight=e.height,t}var Di,Bi=(e(Ti,Di=pi),Ti);function Ti(e){var t=Di.call(this,e)||this,n=new XMLSerializer;return t.svg="data:image/svg+xml,"+encodeURIComponent(n.serializeToString(e)),t.intrinsicWidth=e.width.baseVal.value,t.intrinsicHeight=e.height.baseVal.value,Pt.getInstance().addImage(t.svg),t}var Ii,Fi=(e(xi,Ii=pi),xi);function xi(e){var t=Ii.call(this,e)||this;return t.value=e.value,t}var _i,Mi=(e(Ni,_i=pi),Ni);function Ni(e){var t=_i.call(this,e)||this;return t.start=e.start,t.reversed="boolean"==typeof e.reversed&&!0===e.reversed,t}var ki,Ui=[{type:C.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],Pi=[{type:C.PERCENTAGE_TOKEN,flags:0,number:50}],Qi="checkbox",Hi="radio",Oi=(e(Li,ki=pi),Li);function Li(e){var t,n,r,i=ki.call(this,e)||this;switch(i.type=e.type.toLowerCase(),i.checked=e.checked,i.value=0===(r="password"===(n=e).type?new Array(n.value.length+1).join("â¢"):n.value).length?n.placeholder||"":r,i.type!==Qi&&i.type!==Hi||(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=yn.SOLID,i.styles.backgroundClip=[yt.BORDER_BOX],i.styles.backgroundOrigin=[0],i.bounds=(t=i.bounds).width>t.height?new T(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new T(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t),i.type){case Qi:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Ui;break;case Hi:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=Pi}return i}var Ri,Vi=(e(qi,Ri=pi),qi);function qi(e){var t=Ri.call(this,e)||this,n=e.options[e.selectedIndex||0];return t.value=n&&n.text||"",t}var Ki,Wi=(e(ji,Ki=pi),ji);function ji(e){var t=Ki.call(this,e)||this;return t.value=e.value,t}function zi(e){return pt(Le.create(e).parseComponentValue())}var Gi,Ji=(e(Xi,Gi=pi),Xi);function Xi(e){var t=Gi.call(this,e)||this;t.src=e.src,t.width=parseInt(e.width,10)||0,t.height=parseInt(e.height,10)||0,t.backgroundColor=t.styles.backgroundColor;try{if(e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement){t.tree=to(e.contentWindow.document.documentElement);var n=e.contentWindow.document.documentElement?zi(getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):Ct.TRANSPARENT,r=e.contentWindow.document.body?zi(getComputedStyle(e.contentWindow.document.body).backgroundColor):Ct.TRANSPARENT;t.backgroundColor=nt(n)?nt(r)?t.styles.backgroundColor:r:n}}catch(e){}return t}function $i(e){return"STYLE"===e.tagName}var Yi=["OL","UL","MENU"],Zi=function(e,t,n){for(var r=e.firstChild,i=void 0;r;r=i)if(i=r.nextSibling,io(r)&&0<r.data.trim().length)t.textNodes.push(new mi(r,t.styles));else if(oo(r)){var o=eo(r);o.styles.isVisible()&&(no(r,o,n)?o.flags|=4:ro(o.styles)&&(o.flags|=2),-1!==Yi.indexOf(r.tagName)&&(o.flags|=8),t.elements.push(o),mo(r)||co(r)||go(r)||Zi(r,o,n))}},eo=function(e){return fo(e)?new wi(e):po(e)?new Si(e):co(e)?new Bi(e):so(e)?new Fi(e):lo(e)?new Mi(e):uo(e)?new Oi(e):go(e)?new Vi(e):mo(e)?new Wi(e):ho(e)?new Ji(e):new pi(e)},to=function(e){var t=eo(e);return t.flags|=4,Zi(e,t,t),t},no=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Ao(e)&&n.styles.isTransparent()},ro=function(e){return e.isPositioned()||e.isFloating()},io=function(e){return e.nodeType===Node.TEXT_NODE},oo=function(e){return e.nodeType===Node.ELEMENT_NODE},ao=function(e){return void 0!==e.style},so=function(e){return"LI"===e.tagName},lo=function(e){return"OL"===e.tagName},uo=function(e){return"INPUT"===e.tagName},co=function(e){return"svg"===e.tagName},Ao=function(e){return"BODY"===e.tagName},po=function(e){return"CANVAS"===e.tagName},fo=function(e){return"IMG"===e.tagName},ho=function(e){return"IFRAME"===e.tagName},mo=function(e){return"TEXTAREA"===e.tagName},go=function(e){return"SELECT"===e.tagName},vo=(yo.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},yo.prototype.getCounterValues=function(e){return this.counters[e]||[]},yo.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},yo.prototype.parse=function(e){var n=this,t=e.counterIncrement,r=e.counterReset,i=!0;null!==t&&t.forEach(function(e){var t=n.counters[e.counter];t&&0!==e.increment&&(i=!1,t[Math.max(0,t.length-1)]+=e.increment)});var o=[];return i&&r.forEach(function(e){var t=n.counters[e.counter];o.push(e.counter),t||(t=n.counters[e.counter]=[]),t.push(e.reset)}),o},yo);function yo(){this.counters={}}function wo(r,e,t,i,n,o){return r<e||t<r?_o(r,n,0<o.length):i.integers.reduce(function(e,t,n){for(;t<=r;)r-=t,e+=i.values[n];return e},"")+o}function bo(e,t,n,r){for(var i="";n||e--,i=r(e)+i,t<=(e/=t)*t;);return i}function Co(e,t,n,r,i){var o=n-t+1;return(e<0?"-":"")+(bo(Math.abs(e),o,r,function(e){return d(Math.floor(e%o)+t)})+i)}function So(e,t,n){void 0===n&&(n=". ");var r=t.length;return bo(Math.abs(e),r,!1,function(e){return t[Math.floor(e%r)]})+n}function Eo(e,t,n,r,i,o){if(e<-9999||9999<e)return _o(e,tr.CJK_DECIMAL,0<i.length);var a=Math.abs(e),s=i;if(0===a)return t[0]+s;for(var l=0;0<a&&l<=4;l++){var u=a%10;0==u&&Zr(o,1)&&""!==s?s=t[u]+s:1<u||1==u&&0===l||1==u&&1===l&&Zr(o,2)||1==u&&1===l&&Zr(o,4)&&100<e||1==u&&1<l&&Zr(o,8)?s=t[u]+(0<l?n[l-1]:"")+s:1==u&&0<l&&(s=n[l-1]+s),a=Math.floor(a/10)}return(e<0?r:"")+s}var Do,Bo,To={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Io={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Õ","Ô¿","Ô¾","Ô½","Ô¼","Ô»","Ôº","Ô¹","Ô¸","Ô·","Ô¶","Ôµ","Ô´","Ô³","Ô²","Ô±"]},Fo={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["××³","××³","××³","××³","××³","××³","××³","××³","××³","××³","×ª","×©","×¨","×§","×¦","×¤","×¢","×¡","× ","×","×","×","××","××","××","××","××","×","×","×","×","×","×","×","×","×","×"]},xo={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["áµ","á°","á¯","á´","á®","á­","á¬","á«","áª","á©","á¨","á§","á¦","á¥","á¤","á³","á¢","á¡","á ","á","á","á","á²","á","á","á","á","á","á","á±","á","á","á","á","á","á","á"]},_o=function(e,t,n){var r=n?". ":"",i=n?"ã":"",o=n?", ":"",a=n?" ":"";switch(t){case tr.DISC:return"â¢"+a;case tr.CIRCLE:return"â¦"+a;case tr.SQUARE:return"â¾"+a;case tr.DECIMAL_LEADING_ZERO:var s=Co(e,48,57,!0,r);return s.length<4?"0"+s:s;case tr.CJK_DECIMAL:return So(e,"ãä¸äºä¸åäºå­ä¸å«ä¹",i);case tr.LOWER_ROMAN:return wo(e,1,3999,To,tr.DECIMAL,r).toLowerCase();case tr.UPPER_ROMAN:return wo(e,1,3999,To,tr.DECIMAL,r);case tr.LOWER_GREEK:return Co(e,945,969,!1,r);case tr.LOWER_ALPHA:return Co(e,97,122,!1,r);case tr.UPPER_ALPHA:return Co(e,65,90,!1,r);case tr.ARABIC_INDIC:return Co(e,1632,1641,!0,r);case tr.ARMENIAN:case tr.UPPER_ARMENIAN:return wo(e,1,9999,Io,tr.DECIMAL,r);case tr.LOWER_ARMENIAN:return wo(e,1,9999,Io,tr.DECIMAL,r).toLowerCase();case tr.BENGALI:return Co(e,2534,2543,!0,r);case tr.CAMBODIAN:case tr.KHMER:return Co(e,6112,6121,!0,r);case tr.CJK_EARTHLY_BRANCH:return So(e,"å­ä¸å¯å¯è¾°å·³åæªç³éæäº¥",i);case tr.CJK_HEAVENLY_STEM:return So(e,"ç²ä¹ä¸ä¸æå·±åºè¾å£¬ç¸",i);case tr.CJK_IDEOGRAPHIC:case tr.TRAD_CHINESE_INFORMAL:return Eo(e,"é¶ä¸äºä¸åäºå­ä¸å«ä¹","åç¾åè¬","è² ",i,14);case tr.TRAD_CHINESE_FORMAL:return Eo(e,"é¶å£¹è²³åèä¼é¸ææç","æ¾ä½°ä»è¬","è² ",i,15);case tr.SIMP_CHINESE_INFORMAL:return Eo(e,"é¶ä¸äºä¸åäºå­ä¸å«ä¹","åç¾åè¬","è´",i,14);case tr.SIMP_CHINESE_FORMAL:return Eo(e,"é¶å£¹è´°åèä¼éææç","æ¾ä½°ä»è¬","è´",i,15);case tr.JAPANESE_INFORMAL:return Eo(e,"ãä¸äºä¸åäºå­ä¸å«ä¹","åç¾åä¸","ãã¤ãã¹",i,0);case tr.JAPANESE_FORMAL:return Eo(e,"é¶å£±å¼ååä¼å­ä¸å«ä¹","æ¾ç¾åä¸","ãã¤ãã¹",i,7);case tr.KOREAN_HANGUL_FORMAL:return Eo(e,"ìì¼ì´ì¼ì¬ì¤ì¡ì¹ íêµ¬","ì­ë°±ì²ë§","ë§ì´ëì¤",o,7);case tr.KOREAN_HANJA_INFORMAL:return Eo(e,"é¶ä¸äºä¸åäºå­ä¸å«ä¹","åç¾åè¬","ë§ì´ëì¤",o,0);case tr.KOREAN_HANJA_FORMAL:return Eo(e,"é¶å£¹è²³ååäºå­ä¸å«ä¹","æ¾ç¾å","ë§ì´ëì¤",o,7);case tr.DEVANAGARI:return Co(e,2406,2415,!0,r);case tr.GEORGIAN:return wo(e,1,19999,xo,tr.DECIMAL,r);case tr.GUJARATI:return Co(e,2790,2799,!0,r);case tr.GURMUKHI:return Co(e,2662,2671,!0,r);case tr.HEBREW:return wo(e,1,10999,Fo,tr.DECIMAL,r);case tr.HIRAGANA:return So(e,"ããããããããããããããããã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ãããããããããããããããã");case tr.HIRAGANA_IROHA:return So(e,"ããã¯ã«ã»ã¸ã¨ã¡ãã¬ããããããããã¤ã­ãªããããã®ãããã¾ããµããã¦ãããããã¿ããã²ããã");case tr.KANNADA:return Co(e,3302,3311,!0,r);case tr.KATAKANA:return So(e,"ã¢ã¤ã¦ã¨ãªã«ã­ã¯ã±ã³ãµã·ã¹ã»ã½ã¿ããããããããããããããããã ã¡ã¢ã¤ã¦ã¨ã©ãªã«ã¬ã­ã¯ã°ã±ã²ã³",i);case tr.KATAKANA_IROHA:return So(e,"ã¤ã­ãããããããªãã«ã²ã¯ã«ã¨ã¿ã¬ã½ãããã©ã ã¦ã°ããªã¯ã¤ãã±ãã³ã¨ãã¢ãµã­ã¦ã¡ãã·ã±ãã¢ã»ã¹",i);case tr.LAO:return Co(e,3792,3801,!0,r);case tr.MONGOLIAN:return Co(e,6160,6169,!0,r);case tr.MYANMAR:return Co(e,4160,4169,!0,r);case tr.ORIYA:return Co(e,2918,2927,!0,r);case tr.PERSIAN:return Co(e,1776,1785,!0,r);case tr.TAMIL:return Co(e,3046,3055,!0,r);case tr.TELUGU:return Co(e,3174,3183,!0,r);case tr.THAI:return Co(e,3664,3673,!0,r);case tr.TIBETAN:return Co(e,3872,3881,!0,r);case tr.DECIMAL:default:return Co(e,48,57,!0,r)}},Mo="data-html2canvas-ignore",No=(ko.prototype.toIFrame=function(e,n){var t=this,r=Qo(e,n);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var i=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,a=r.contentWindow,s=a.document,l=Ho(r).then(function(){return u(t,void 0,void 0,function(){var t;return Z(this,function(e){switch(e.label){case 0:return this.scrolledElements.forEach(Vo),a&&(a.scrollTo(n.left,n.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===n.top&&a.scrollX===n.left||(s.documentElement.style.top=-n.top+"px",s.documentElement.style.left=-n.left+"px",s.documentElement.style.position="absolute")),t=this.options.onclone,void 0===this.clonedReferenceElement?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:e.sent(),e.label=2;case 2:return"function"==typeof t?[2,Promise.resolve().then(function(){return t(s)}).then(function(){return r})]:[2,r]}})})});return s.open(),s.write(Lo(document.doctype)+"<html></html>"),Ro(this.referenceElement.ownerDocument,i,o),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),l},ko.prototype.createElementClone=function(e){return po(e)?this.createCanvasClone(e):$i(e)?this.createStyleClone(e):e.cloneNode(!1)},ko.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e},""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(e){if(kt.getInstance(this.options.id).error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},ko.prototype.createCanvasClone=function(e){if(this.options.inlineImages&&e.ownerDocument){var t=e.ownerDocument.createElement("img");try{return t.src=e.toDataURL(),t}catch(e){kt.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var r=e.getContext("2d"),i=n.getContext("2d");return i&&(r?i.putImageData(r.getImageData(0,0,e.width,e.height),0,0):i.drawImage(e,0,0)),n}catch(e){}return n},ko.prototype.cloneNode=function(e){if(io(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var t=e.ownerDocument.defaultView;if(ao(e)&&t){var n=this.createElementClone(e),r=t.getComputedStyle(e),i=t.getComputedStyle(e,":before"),o=t.getComputedStyle(e,":after");this.referenceElement===e&&(this.clonedReferenceElement=n),Ao(n)&&jo(n);for(var a=this.counters.parse(new Ai(r)),s=this.resolvePseudoContent(e,n,i,Do.BEFORE),l=e.firstChild;l;l=l.nextSibling)oo(l)&&("SCRIPT"===l.tagName||l.hasAttribute(Mo)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(l))||this.options.copyStyles&&oo(l)&&$i(l)||n.appendChild(this.cloneNode(l));s&&n.insertBefore(s,n.firstChild);var u=this.resolvePseudoContent(e,n,o,Do.AFTER);return u&&n.appendChild(u),this.counters.pop(a),r&&this.options.copyStyles&&!ho(e)&&Oo(r,n),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(mo(e)||go(e))&&(mo(n)||go(n))&&(n.value=e.value),n}return e.cloneNode(!1)},ko.prototype.resolvePseudoContent=function(f,e,t,n){var h=this;if(t){var r=t.content,m=e.ownerDocument;if(m&&r&&"none"!==r&&"-moz-alt-content"!==r&&"none"!==t.display){this.counters.parse(new Ai(t));var g=new ci(t),v=m.createElement("html2canvaspseudoelement");return Oo(t,v),g.content.forEach(function(e){if(e.type===C.STRING_TOKEN)v.appendChild(m.createTextNode(e.value));else if(e.type===C.URL_TOKEN){var t=m.createElement("img");t.src=e.value,t.style.opacity="1",v.appendChild(t)}else if(e.type===C.FUNCTION){if("attr"===e.name){var n=e.values.filter(Ke);n.length&&v.appendChild(m.createTextNode(f.getAttribute(n[0].value)||""))}else if("counter"===e.name){var r=e.values.filter(Ge),i=r[0],o=r[1];if(i&&Ke(i)){var a=h.counters.getCounterValue(i.value),s=o&&Ke(o)?sr.parse(o.value):tr.DECIMAL;v.appendChild(m.createTextNode(_o(a,s,!1)))}}else if("counters"===e.name){var l=e.values.filter(Ge),u=(i=l[0],l[1]);if(o=l[2],i&&Ke(i)){var c=h.counters.getCounterValues(i.value),A=o&&Ke(o)?sr.parse(o.value):tr.DECIMAL,d=u&&u.type===C.STRING_TOKEN?u.value:"",p=c.map(function(e){return _o(e,A,!1)}).join(d);v.appendChild(m.createTextNode(p))}}}else if(e.type===C.IDENT_TOKEN)switch(e.value){case"open-quote":v.appendChild(m.createTextNode(ei(g.quotes,h.quoteDepth++,!0)));break;case"close-quote":v.appendChild(m.createTextNode(ei(g.quotes,--h.quoteDepth,!1)));break;default:v.appendChild(m.createTextNode(e.value))}}),v.className=qo+" "+Ko,e.className+=n===Do.BEFORE?" "+qo:" "+Ko,v}}},ko.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},ko);function ko(e,t){if(this.options=t,this.scrolledElements=[],this.referenceElement=e,this.counters=new vo,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement)}(Bo=Do||(Do={}))[Bo.BEFORE=0]="BEFORE",Bo[Bo.AFTER=1]="AFTER";var Uo,Po,Qo=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(Mo,"true"),e.body.appendChild(n),n},Ho=function(i){return new Promise(function(t,e){var n=i.contentWindow;if(!n)return e("No window assigned for iframe");var r=n.document;n.onload=i.onload=r.onreadystatechange=function(){n.onload=i.onload=r.onreadystatechange=null;var e=setInterval(function(){0<r.body.childNodes.length&&"complete"===r.readyState&&(clearInterval(e),t(i))},50)}})},Oo=function(e,t){for(var n=e.length-1;0<=n;n--){var r=e.item(n);"content"!==r&&t.style.setProperty(r,e.getPropertyValue(r))}return t},Lo=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},Ro=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},Vo=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},qo="___html2canvas___pseudoelement_before",Ko="___html2canvas___pseudoelement_after",Wo='{\n    content: "" !important;\n    display: none !important;\n}',jo=function(e){zo(e,"."+qo+":before"+Wo+"\n         ."+Ko+":after"+Wo)},zo=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}};function Go(e,n){return e.length===n.length&&e.some(function(e,t){return e===n[t]})}(Po=Uo||(Uo={}))[Po.VECTOR=0]="VECTOR",Po[Po.BEZIER_CURVE=1]="BEZIER_CURVE";var Jo=(Xo.prototype.add=function(e,t){return new Xo(this.x+e,this.y+t)},Xo);function Xo(e,t){this.type=Uo.VECTOR,this.x=e,this.y=t}function $o(e,t,n){return new Jo(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)}var Yo=(Zo.prototype.subdivide=function(e,t){var n=$o(this.start,this.startControl,e),r=$o(this.startControl,this.endControl,e),i=$o(this.endControl,this.end,e),o=$o(n,r,e),a=$o(r,i,e),s=$o(o,a,e);return t?new Zo(this.start,n,o,s):new Zo(s,a,i,this.end)},Zo.prototype.add=function(e,t){return new Zo(this.start.add(e,t),this.startControl.add(e,t),this.endControl.add(e,t),this.end.add(e,t))},Zo.prototype.reverse=function(){return new Zo(this.end,this.endControl,this.startControl,this.start)},Zo);function Zo(e,t,n,r){this.type=Uo.BEZIER_CURVE,this.start=e,this.startControl=t,this.endControl=n,this.end=r}function ea(e){return e.type===Uo.BEZIER_CURVE}var ta,na,ra=function(e){var t=e.styles,n=e.bounds,r=Ze(t.borderTopLeftRadius,n.width,n.height),i=r[0],o=r[1],a=Ze(t.borderTopRightRadius,n.width,n.height),s=a[0],l=a[1],u=Ze(t.borderBottomRightRadius,n.width,n.height),c=u[0],A=u[1],d=Ze(t.borderBottomLeftRadius,n.width,n.height),p=d[0],f=d[1],h=[];h.push((i+s)/n.width),h.push((p+c)/n.width),h.push((o+f)/n.height),h.push((l+A)/n.height);var m=Math.max.apply(Math,h);1<m&&(i/=m,o/=m,s/=m,l/=m,c/=m,A/=m,p/=m,f/=m);var g=n.width-s,v=n.height-A,y=n.width-c,w=n.height-f,b=t.borderTopWidth,C=t.borderRightWidth,S=t.borderBottomWidth,E=t.borderLeftWidth,D=ct(t.paddingTop,e.bounds.width),B=ct(t.paddingRight,e.bounds.width),T=ct(t.paddingBottom,e.bounds.width),I=ct(t.paddingLeft,e.bounds.width);this.topLeftBorderBox=0<i||0<o?aa(n.left,n.top,i,o,ta.TOP_LEFT):new Jo(n.left,n.top),this.topRightBorderBox=0<s||0<l?aa(n.left+g,n.top,s,l,ta.TOP_RIGHT):new Jo(n.left+n.width,n.top),this.bottomRightBorderBox=0<c||0<A?aa(n.left+y,n.top+v,c,A,ta.BOTTOM_RIGHT):new Jo(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=0<p||0<f?aa(n.left,n.top+w,p,f,ta.BOTTOM_LEFT):new Jo(n.left,n.top+n.height),this.topLeftPaddingBox=0<i||0<o?aa(n.left+E,n.top+b,Math.max(0,i-E),Math.max(0,o-b),ta.TOP_LEFT):new Jo(n.left+E,n.top+b),this.topRightPaddingBox=0<s||0<l?aa(n.left+Math.min(g,n.width+E),n.top+b,g>n.width+E?0:s-E,l-b,ta.TOP_RIGHT):new Jo(n.left+n.width-C,n.top+b),this.bottomRightPaddingBox=0<c||0<A?aa(n.left+Math.min(y,n.width-E),n.top+Math.min(v,n.height+b),Math.max(0,c-C),A-S,ta.BOTTOM_RIGHT):new Jo(n.left+n.width-C,n.top+n.height-S),this.bottomLeftPaddingBox=0<p||0<f?aa(n.left+E,n.top+w,Math.max(0,p-E),f-S,ta.BOTTOM_LEFT):new Jo(n.left+E,n.top+n.height-S),this.topLeftContentBox=0<i||0<o?aa(n.left+E+I,n.top+b+D,Math.max(0,i-(E+I)),Math.max(0,o-(b+D)),ta.TOP_LEFT):new Jo(n.left+E+I,n.top+b+D),this.topRightContentBox=0<s||0<l?aa(n.left+Math.min(g,n.width+E+I),n.top+b+D,g>n.width+E+I?0:s-E+I,l-(b+D),ta.TOP_RIGHT):new Jo(n.left+n.width-(C+B),n.top+b+D),this.bottomRightContentBox=0<c||0<A?aa(n.left+Math.min(y,n.width-(E+I)),n.top+Math.min(v,n.height+b+D),Math.max(0,c-(C+B)),A-(S+T),ta.BOTTOM_RIGHT):new Jo(n.left+n.width-(C+B),n.top+n.height-(S+T)),this.bottomLeftContentBox=0<p||0<f?aa(n.left+E+I,n.top+w,Math.max(0,p-(E+I)),f-(S+T),ta.BOTTOM_LEFT):new Jo(n.left+E+I,n.top+n.height-(S+T))};function ia(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]}function oa(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]}(na=ta||(ta={}))[na.TOP_LEFT=0]="TOP_LEFT",na[na.TOP_RIGHT=1]="TOP_RIGHT",na[na.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",na[na.BOTTOM_LEFT=3]="BOTTOM_LEFT";var aa=function(e,t,n,r,i){var o=(Math.sqrt(2)-1)/3*4,a=n*o,s=r*o,l=e+n,u=t+r;switch(i){case ta.TOP_LEFT:return new Yo(new Jo(e,u),new Jo(e,u-s),new Jo(l-a,t),new Jo(l,t));case ta.TOP_RIGHT:return new Yo(new Jo(e,t),new Jo(e+a,t),new Jo(l,u-s),new Jo(l,u));case ta.BOTTOM_RIGHT:return new Yo(new Jo(l,t),new Jo(l,t+s),new Jo(e+a,u),new Jo(e,u));case ta.BOTTOM_LEFT:default:return new Yo(new Jo(l,u),new Jo(l-a,u),new Jo(e,t+s),new Jo(e,t))}},sa=function(e,t,n){this.type=0,this.offsetX=e,this.offsetY=t,this.matrix=n,this.target=6},la=function(e,t){this.type=1,this.target=t,this.path=e},ua=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},ca=(Aa.prototype.getParentEffects=function(){var e=this.effects.slice(0);if(this.container.styles.overflowX!==or.VISIBLE){var t=ia(this.curves),n=oa(this.curves);Go(t,n)||e.push(new la(n,6))}return e},Aa);function Aa(e,t){if(this.container=e,this.effects=t.slice(0),this.curves=new ra(e),null!==e.styles.transform){var n=e.bounds.left+e.styles.transformOrigin[0].number,r=e.bounds.top+e.styles.transformOrigin[1].number,i=e.styles.transform;this.effects.push(new sa(n,r,i))}if(e.styles.overflowX!==or.VISIBLE){var o=ia(this.curves),a=oa(this.curves);Go(o,a)?this.effects.push(new la(o,6)):(this.effects.push(new la(o,2)),this.effects.push(new la(a,4)))}}function da(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))}function pa(e){var t=e.styles,n=e.bounds,r=ct(t.paddingLeft,n.width),i=ct(t.paddingRight,n.width),o=ct(t.paddingTop,n.width),a=ct(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+i),-(t.borderTopWidth+t.borderBottomWidth+o+a))}function fa(e,t,n){var r,i,o,a,s=(o=wa(e.styles.backgroundOrigin,t),a=e,0===o?a.bounds:2===o?pa(a):da(a)),l=(r=wa(e.styles.backgroundClip,t),i=e,r===yt.BORDER_BOX?i.bounds:r===yt.CONTENT_BOX?pa(i):da(i)),u=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1];if($e(a)&&s&&$e(s))return[ct(a,n.width),ct(s,n.height)];var l=ma(o);if(Ke(a)&&(a.value===pn.CONTAIN||a.value===pn.COVER))return ma(o)?n.width/n.height<o!=(a.value===pn.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var u=ma(r),c=ma(i),A=u||c;if(ha(a)&&(!s||ha(s)))return u&&c?[r,i]:l||A?A&&l?[u?r:i*o,c?i:r/o]:[u?r:n.width,c?i:n.height]:[n.width,n.height];if(l){var d=0,p=0;return $e(a)?d=ct(a,n.width):$e(s)&&(p=ct(s,n.height)),ha(a)?d=p*o:s&&!ha(s)||(p=d/o),[d,p]}var f=null,h=null;if($e(a)?f=ct(a,n.width):s&&$e(s)&&(h=ct(s,n.height)),null===f||s&&!ha(s)||(h=u&&c?f/r*i:n.height),null!==h&&ha(a)&&(f=u&&c?h/i*r:n.width),null!==f&&null!==h)return[f,h];throw new Error("Unable to calculate background-size for element")}(wa(e.styles.backgroundSize,t),n,s),c=u[0],A=u[1],d=Ze(wa(e.styles.backgroundPosition,t),s.width-c,s.height-A);return[function(e,t,n,r,i){var o=t[0],a=t[1],s=n[0],l=n[1];switch(e){case an.REPEAT_X:return[new Jo(Math.round(r.left),Math.round(r.top+a)),new Jo(Math.round(r.left+r.width),Math.round(r.top+a)),new Jo(Math.round(r.left+r.width),Math.round(l+r.top+a)),new Jo(Math.round(r.left),Math.round(l+r.top+a))];case an.REPEAT_Y:return[new Jo(Math.round(r.left+o),Math.round(r.top)),new Jo(Math.round(r.left+o+s),Math.round(r.top)),new Jo(Math.round(r.left+o+s),Math.round(r.height+r.top)),new Jo(Math.round(r.left+o),Math.round(r.height+r.top))];case an.NO_REPEAT:return[new Jo(Math.round(r.left+o),Math.round(r.top+a)),new Jo(Math.round(r.left+o+s),Math.round(r.top+a)),new Jo(Math.round(r.left+o+s),Math.round(r.top+a+l)),new Jo(Math.round(r.left+o),Math.round(r.top+a+l))];default:return[new Jo(Math.round(i.left),Math.round(i.top)),new Jo(Math.round(i.left+i.width),Math.round(i.top)),new Jo(Math.round(i.left+i.width),Math.round(i.height+i.top)),new Jo(Math.round(i.left),Math.round(i.height+i.top))]}}(wa(e.styles.backgroundRepeat,t),d,u,s,l),Math.round(s.left+d[0]),Math.round(s.top+d[1]),c,A]}function ha(e){return Ke(e)&&e.value===pn.AUTO}function ma(e){return"number"==typeof e}var ga=function(c,A,d,p){c.container.elements.forEach(function(e){var t=Zr(e.flags,4),n=Zr(e.flags,2),r=new ca(e,c.getParentEffects());Zr(e.styles.display,2048)&&p.push(r);var i=Zr(e.flags,8)?[]:p;if(t||n){var o=t||e.styles.isPositioned()?d:A,a=new ua(r);if(e.styles.isPositioned()||e.styles.opacity<1||e.styles.isTransformed()){var s=e.styles.zIndex.order;if(s<0){var l=0;o.negativeZIndex.some(function(e,t){return s>e.element.container.styles.zIndex.order?(l=t,!1):0<l}),o.negativeZIndex.splice(l,0,a)}else if(0<s){var u=0;o.positiveZIndex.some(function(e,t){return s>e.element.container.styles.zIndex.order?(u=t+1,!1):0<u}),o.positiveZIndex.splice(u,0,a)}else o.zeroOrAutoZIndexOrTransformedOrOpacity.push(a)}else e.styles.isFloating()?o.nonPositionedFloats.push(a):o.nonPositionedInlineLevel.push(a);ga(r,a,t?a:d,i)}else e.styles.isInlineLevel()?A.inlineLevel.push(r):A.nonInlineLevel.push(r),ga(r,A,d,i);Zr(e.flags,8)&&va(e,i)})},va=function(e,t){for(var n=e instanceof Mi?e.start:1,r=e instanceof Mi&&e.reversed,i=0;i<t.length;i++){var o=t[i];o.container instanceof Fi&&"number"==typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=_o(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},ya=function(e,t,n,r){var i=[];return ea(e)?i.push(e.subdivide(.5,!1)):i.push(e),ea(n)?i.push(n.subdivide(.5,!0)):i.push(n),ea(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),ea(t)?i.push(t.subdivide(.5,!1).reverse()):i.push(t),i},wa=function(e,t){var n=e[t];return void 0===n?e[0]:n},ba="Hidden Text",Ca=(Sa.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",o.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=e,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(ba)),n.appendChild(i),n.appendChild(r);var a=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(ba)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:a,middle:s}},Sa.prototype.getMetrics=function(e,t){var n=e+" "+t;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},Sa);function Sa(e){this._data={},this._document=e}var Ea=(Da.prototype.applyEffects=function(e,t){for(var n=this;this._activeEffects.length;)this.popEffect();e.filter(function(e){return Zr(e.target,t)}).forEach(function(e){return n.applyEffect(e)})},Da.prototype.applyEffect=function(e){this.ctx.save(),0===e.type&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),1===e.type&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},Da.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},Da.prototype.renderStack=function(n){return u(this,void 0,void 0,function(){var t;return Z(this,function(e){switch(e.label){case 0:return(t=n.element.container.styles).isVisible()?(this.ctx.globalAlpha=t.opacity,[4,this.renderStackContent(n)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},Da.prototype.renderNode=function(t){return u(this,void 0,void 0,function(){return Z(this,function(e){switch(e.label){case 0:return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},Da.prototype.renderTextWithLetterSpacing=function(n,e){var r=this;0===e?this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+n.bounds.height):c(n.text).map(function(e){return d(e)}).reduce(function(e,t){return r.ctx.fillText(t,e,n.bounds.top+n.bounds.height),e+r.ctx.measureText(t).width},n.bounds.left)},Da.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),n=e.fontFamily.join(", "),r=Ve(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},Da.prototype.renderTextNode=function(r,s){return u(this,void 0,void 0,function(){var t,n,i,o,a=this;return Z(this,function(e){return t=this.createFontStyle(s),n=t[0],i=t[1],o=t[2],this.ctx.font=n,r.textBounds.forEach(function(r){a.ctx.fillStyle=rt(s.color),a.renderTextWithLetterSpacing(r,s.letterSpacing);var e=s.textShadow;e.length&&r.text.trim().length&&(e.slice(0).reverse().forEach(function(e){a.ctx.shadowColor=rt(e.color),a.ctx.shadowOffsetX=e.offsetX.number*a.options.scale,a.ctx.shadowOffsetY=e.offsetY.number*a.options.scale,a.ctx.shadowBlur=e.blur.number,a.ctx.fillText(r.text,r.bounds.left,r.bounds.top+r.bounds.height)}),a.ctx.shadowColor="",a.ctx.shadowOffsetX=0,a.ctx.shadowOffsetY=0,a.ctx.shadowBlur=0),s.textDecorationLine.length&&(a.ctx.fillStyle=rt(s.textDecorationColor||s.color),s.textDecorationLine.forEach(function(e){switch(e){case 1:var t=a.fontMetrics.getMetrics(i,o).baseline;a.ctx.fillRect(r.bounds.left,Math.round(r.bounds.top+t),r.bounds.width,1);break;case 2:a.ctx.fillRect(r.bounds.left,Math.round(r.bounds.top),r.bounds.width,1);break;case 3:var n=a.fontMetrics.getMetrics(i,o).middle;a.ctx.fillRect(r.bounds.left,Math.ceil(r.bounds.top+n),r.bounds.width,1)}}))}),[2]})})},Da.prototype.renderReplacedElement=function(e,t,n){if(n&&0<e.intrinsicWidth&&0<e.intrinsicHeight){var r=pa(e),i=oa(t);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},Da.prototype.renderNodeContent=function(g){return u(this,void 0,void 0,function(){var r,i,o,a,s,l,u,c,A,d,p,f,h,m;return Z(this,function(e){switch(e.label){case 0:this.applyEffects(g.effects,4),r=g.container,i=g.curves,o=r.styles,a=0,s=r.textNodes,e.label=1;case 1:return a<s.length?(l=s[a],[4,this.renderTextNode(l,o)]):[3,4];case 2:e.sent(),e.label=3;case 3:return a++,[3,1];case 4:if(!(r instanceof wi))return[3,8];e.label=5;case 5:return e.trys.push([5,7,,8]),[4,this.options.cache.match(r.src)];case 6:return f=e.sent(),this.renderReplacedElement(r,i,f),[3,8];case 7:return e.sent(),kt.getInstance(this.options.id).error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Si&&this.renderReplacedElement(r,i,r.canvas),!(r instanceof Bi))return[3,12];e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.options.cache.match(r.svg)];case 10:return f=e.sent(),this.renderReplacedElement(r,i,f),[3,12];case 11:return e.sent(),kt.getInstance(this.options.id).error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof Ji&&r.tree?[4,new Da({id:this.options.id,scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:r.width,height:r.height,cache:this.options.cache,windowWidth:r.width,windowHeight:r.height}).render(r.tree)]:[3,14];case 13:u=e.sent(),r.width&&r.height&&this.ctx.drawImage(u,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),e.label=14;case 14:if(r instanceof Oi&&(c=Math.min(r.bounds.width,r.bounds.height),r.type===Qi?r.checked&&(this.ctx.save(),this.path([new Jo(r.bounds.left+.39363*c,r.bounds.top+.79*c),new Jo(r.bounds.left+.16*c,r.bounds.top+.5549*c),new Jo(r.bounds.left+.27347*c,r.bounds.top+.44071*c),new Jo(r.bounds.left+.39694*c,r.bounds.top+.5649*c),new Jo(r.bounds.left+.72983*c,r.bounds.top+.23*c),new Jo(r.bounds.left+.84*c,r.bounds.top+.34085*c),new Jo(r.bounds.left+.39363*c,r.bounds.top+.79*c)]),this.ctx.fillStyle=rt(707406591),this.ctx.fill(),this.ctx.restore()):r.type===Hi&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+c/2,r.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=rt(707406591),this.ctx.fill(),this.ctx.restore())),Ba(r)&&r.value.length){switch(this.ctx.font=this.createFontStyle(o)[0],this.ctx.fillStyle=rt(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign=Ia(r.styles.textAlign),m=pa(r),A=0,r.styles.textAlign){case hr.CENTER:A+=m.width/2;break;case hr.RIGHT:A+=m.width}d=m.add(A,0,0,-m.height/2+1),this.ctx.save(),this.path([new Jo(m.left,m.top),new Jo(m.left+m.width,m.top),new Jo(m.left+m.width,m.top+m.height),new Jo(m.left,m.top+m.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new fi(r.value,d),o.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(!Zr(r.styles.display,2048))return[3,20];if(null===r.styles.listStyleImage)return[3,19];if((p=r.styles.listStyleImage).type!==Rt.URL)return[3,18];f=void 0,h=p.url,e.label=15;case 15:return e.trys.push([15,17,,18]),[4,this.options.cache.match(h)];case 16:return f=e.sent(),this.ctx.drawImage(f,r.bounds.left-(f.width+10),r.bounds.top),[3,18];case 17:return e.sent(),kt.getInstance(this.options.id).error("Error loading list-style-image "+h),[3,18];case 18:return[3,20];case 19:g.listValue&&r.styles.listStyleType!==tr.NONE&&(this.ctx.font=this.createFontStyle(o)[0],this.ctx.fillStyle=rt(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",m=new T(r.bounds.left,r.bounds.top+ct(r.styles.paddingTop,r.bounds.width),r.bounds.width,(t=o.lineHeight,n=o.fontSize.number,(Ke(t)&&"normal"===t.value?1.2*n:t.type===C.NUMBER_TOKEN?n*t.number:$e(t)?ct(t,n):n)/2+1)),this.renderTextWithLetterSpacing(new fi(g.listValue,m),o.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),e.label=20;case 20:return[2]}var t,n})})},Da.prototype.renderStackContent=function(m){return u(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l,u,c,A,d,p,f,h;return Z(this,function(e){switch(e.label){case 0:return[4,this.renderNodeBackgroundAndBorders(m.element)];case 1:e.sent(),t=0,n=m.negativeZIndex,e.label=2;case 2:return t<n.length?(h=n[t],[4,this.renderStack(h)]):[3,5];case 3:e.sent(),e.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(m.element)];case 6:e.sent(),r=0,i=m.nonInlineLevel,e.label=7;case 7:return r<i.length?(h=i[r],[4,this.renderNode(h)]):[3,10];case 8:e.sent(),e.label=9;case 9:return r++,[3,7];case 10:o=0,a=m.nonPositionedFloats,e.label=11;case 11:return o<a.length?(h=a[o],[4,this.renderStack(h)]):[3,14];case 12:e.sent(),e.label=13;case 13:return o++,[3,11];case 14:s=0,l=m.nonPositionedInlineLevel,e.label=15;case 15:return s<l.length?(h=l[s],[4,this.renderStack(h)]):[3,18];case 16:e.sent(),e.label=17;case 17:return s++,[3,15];case 18:u=0,c=m.inlineLevel,e.label=19;case 19:return u<c.length?(h=c[u],[4,this.renderNode(h)]):[3,22];case 20:e.sent(),e.label=21;case 21:return u++,[3,19];case 22:A=0,d=m.zeroOrAutoZIndexOrTransformedOrOpacity,e.label=23;case 23:return A<d.length?(h=d[A],[4,this.renderStack(h)]):[3,26];case 24:e.sent(),e.label=25;case 25:return A++,[3,23];case 26:p=0,f=m.positiveZIndex,e.label=27;case 27:return p<f.length?(h=f[p],[4,this.renderStack(h)]):[3,30];case 28:e.sent(),e.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},Da.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},Da.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},Da.prototype.formatPath=function(e){var r=this;e.forEach(function(e,t){var n=ea(e)?e.start:e;0===t?r.ctx.moveTo(n.x,n.y):r.ctx.lineTo(n.x,n.y),ea(e)&&r.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},Da.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},Da.prototype.resizeImage=function(e,t,n){if(e.width===t&&e.height===n)return e;var r=this.canvas.ownerDocument.createElement("canvas");return r.width=t,r.height=n,r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),r},Da.prototype.renderBackgroundImage=function(Y){return u(this,void 0,void 0,function(){var X,t,$,n,r,i;return Z(this,function(e){switch(e.label){case 0:X=Y.styles.backgroundImage.length-1,t=function(v){var y,w,b,C,S,E,D,B,T,I,F,x,_,M,N,k,U,P,Q,H,O,L,R,V,q,K,W,j,z,G,J;return Z(this,function(e){switch(e.label){case 0:if(v.type!==Rt.URL)return[3,5];y=void 0,w=v.url,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,$.options.cache.match(w)];case 2:return y=e.sent(),[3,4];case 3:return e.sent(),kt.getInstance($.options.id).error("Error loading background-image "+w),[3,4];case 4:return y&&(b=fa(Y,X,[y.width,y.height,y.width/y.height]),k=b[0],L=b[1],R=b[2],Q=b[3],H=b[4],M=$.ctx.createPattern($.resizeImage(y,Q,H),"repeat"),$.renderRepeat(k,M,L,R)),[3,6];case 5:v.type!==Rt.LINEAR_GRADIENT?v.type===Rt.RADIAL_GRADIENT&&(N=fa(Y,X,[null,null,null]),k=N[0],U=N[1],P=N[2],Q=N[3],H=N[4],O=0===v.position.length?[lt]:v.position,L=ct(O[0],Q),R=ct(O[O.length-1],H),V=function(e,t,n,r,i){var o=0,a=0;switch(e.size){case Wt.CLOSEST_SIDE:e.shape===qt.CIRCLE?o=a=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):e.shape===qt.ELLIPSE&&(o=Math.min(Math.abs(t),Math.abs(t-r)),a=Math.min(Math.abs(n),Math.abs(n-i)));break;case Wt.CLOSEST_CORNER:if(e.shape===qt.CIRCLE)o=a=Math.min(Dt(t,n),Dt(t,n-i),Dt(t-r,n),Dt(t-r,n-i));else if(e.shape===qt.ELLIPSE){var s=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(t),Math.abs(t-r)),l=Bt(r,i,t,n,!0),u=l[0],c=l[1];a=s*(o=Dt(u-t,(c-n)/s))}break;case Wt.FARTHEST_SIDE:e.shape===qt.CIRCLE?o=a=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-i)):e.shape===qt.ELLIPSE&&(o=Math.max(Math.abs(t),Math.abs(t-r)),a=Math.max(Math.abs(n),Math.abs(n-i)));break;case Wt.FARTHEST_CORNER:if(e.shape===qt.CIRCLE)o=a=Math.max(Dt(t,n),Dt(t,n-i),Dt(t-r,n),Dt(t-r,n-i));else if(e.shape===qt.ELLIPSE){s=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(t),Math.abs(t-r));var A=Bt(r,i,t,n,!1);a=s*(o=Dt((u=A[0])-t,((c=A[1])-n)/s))}}return Array.isArray(e.size)&&(o=ct(e.size[0],r),a=2===e.size.length?ct(e.size[1],i):o),[o,a]}(v,L,R,Q,H),q=V[0],K=V[1],0<q&&0<q&&(W=$.ctx.createRadialGradient(U+L,P+R,0,U+L,P+R,q),Et(v.stops,2*q).forEach(function(e){return W.addColorStop(e.stop,rt(e.color))}),$.path(k),$.ctx.fillStyle=W,q!==K?(j=Y.bounds.left+.5*Y.bounds.width,z=Y.bounds.top+.5*Y.bounds.height,J=1/(G=K/q),$.ctx.save(),$.ctx.translate(j,z),$.ctx.transform(1,0,0,G,0,0),$.ctx.translate(-j,-z),$.ctx.fillRect(U,J*(P-z)+z,Q,H*J),$.ctx.restore()):$.ctx.fill())):(C=fa(Y,X,[null,null,null]),k=C[0],L=C[1],R=C[2],Q=C[3],H=C[4],t=v.angle,n=Q,r=H,A="number"==typeof t?t:(s=(o=n)/2,l=(a=r)/2,u=ct((i=t)[0],o)-s,c=l-ct(i[1],a),(Math.atan2(c,u)+2*Math.PI)%(2*Math.PI)),d=Math.abs(n*Math.sin(A))+Math.abs(r*Math.cos(A)),p=n/2,f=r/2,h=d/2,m=Math.sin(A-Math.PI/2)*h,g=Math.cos(A-Math.PI/2)*h,E=(S=[d,p-g,p+g,f-m,f+m])[0],D=S[1],B=S[2],T=S[3],I=S[4],(F=document.createElement("canvas")).width=Q,F.height=H,x=F.getContext("2d"),_=x.createLinearGradient(D,T,B,I),Et(v.stops,E).forEach(function(e){return _.addColorStop(e.stop,rt(e.color))}),x.fillStyle=_,x.fillRect(0,0,Q,H),0<Q&&0<H&&(M=$.ctx.createPattern(F,"repeat"),$.renderRepeat(k,M,L,R))),e.label=6;case 6:return X--,[2]}var t,n,r,i,o,a,s,l,u,c,A,d,p,f,h,m,g})},$=this,n=0,r=Y.styles.backgroundImage.slice(0).reverse(),e.label=1;case 1:return n<r.length?(i=r[n],[5,t(i)]):[3,4];case 2:e.sent(),e.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},Da.prototype.renderBorder=function(t,n,r){return u(this,void 0,void 0,function(){return Z(this,function(e){return this.path(function(e,t){switch(n){case 0:return ya(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return ya(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return ya(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return ya(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}}(r)),this.ctx.fillStyle=rt(t),this.ctx.fill(),[2]})})},Da.prototype.renderNodeBackgroundAndBorders=function(c){return u(this,void 0,void 0,function(){var t,n,r,i,o,a,s,l,u=this;return Z(this,function(e){switch(e.label){case 0:return this.applyEffects(c.effects,2),t=c.container.styles,n=!nt(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor},{style:t.borderRightStyle,color:t.borderRightColor},{style:t.borderBottomStyle,color:t.borderBottomColor},{style:t.borderLeftStyle,color:t.borderLeftColor}],i=Ta(wa(t.backgroundClip,0),c.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),nt(t.backgroundColor)||(this.ctx.fillStyle=rt(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(c.container)]):[3,2];case 1:e.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(e){u.ctx.save();var t,n,r,i,o,a=ia(c.curves),s=e.inset?0:1e4,l=(t=a,n=-s+(e.inset?1:-1)*e.spread.number,r=(e.inset?1:-1)*e.spread.number,i=e.spread.number*(e.inset?-2:2),o=e.spread.number*(e.inset?-2:2),t.map(function(e,t){switch(t){case 0:return e.add(n,r);case 1:return e.add(n+i,r);case 2:return e.add(n+i,r+o);case 3:return e.add(n,r+o)}return e}));e.inset?(u.path(a),u.ctx.clip(),u.mask(l)):(u.mask(a),u.ctx.clip(),u.path(l)),u.ctx.shadowOffsetX=e.offsetX.number+s,u.ctx.shadowOffsetY=e.offsetY.number,u.ctx.shadowColor=rt(e.color),u.ctx.shadowBlur=e.blur.number,u.ctx.fillStyle=e.inset?rt(e.color):"rgba(0,0,0,1)",u.ctx.fill(),u.ctx.restore()}),e.label=2;case 2:a=o=0,s=r,e.label=3;case 3:return a<s.length?(l=s[a]).style===yn.NONE||nt(l.color)?[3,5]:[4,this.renderBorder(l.color,o,c.curves)]:[3,7];case 4:e.sent(),e.label=5;case 5:o++,e.label=6;case 6:return a++,[3,3];case 7:return[2]}})})},Da.prototype.render=function(o){return u(this,void 0,void 0,function(){var i;return Z(this,function(e){switch(e.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=rt(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),t=new ca(o,[]),n=new ua(t),ga(t,n,n,r=[]),va(t.container,r),i=n,[4,this.renderStack(i)];case 1:return e.sent(),this.applyEffects([],2),[2,this.canvas]}var t,n,r})})},Da);function Da(e){this._activeEffects=[],this.canvas=e.canvas?e.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),(this.options=e).canvas||(this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px"),this.fontMetrics=new Ca(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x+e.scrollX,-e.y+e.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],kt.getInstance(e.id).debug("Canvas renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale)}var Ba=function(e){return e instanceof Wi||e instanceof Vi||e instanceof Oi&&e.type!==Hi&&e.type!==Qi},Ta=function(e,t){switch(e){case yt.BORDER_BOX:return ia(t);case yt.CONTENT_BOX:return[(n=t).topLeftContentBox,n.topRightContentBox,n.bottomRightContentBox,n.bottomLeftContentBox];case yt.PADDING_BOX:default:return oa(t)}var n},Ia=function(e){switch(e){case hr.CENTER:return"center";case hr.RIGHT:return"right";case hr.LEFT:default:return"left"}},Fa=(xa.prototype.render=function(r){return u(this,void 0,void 0,function(){var t,n;return Z(this,function(e){switch(e.label){case 0:return t=_t(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,r),[4,Ma(t)];case 1:return n=e.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=rt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},xa);function xa(e){this.canvas=e.canvas?e.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=e,this.canvas.width=Math.floor(e.width*e.scale),this.canvas.height=Math.floor(e.height*e.scale),this.canvas.style.width=e.width+"px",this.canvas.style.height=e.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-e.x+e.scrollX,-e.y+e.scrollY),kt.getInstance(e.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+e.width+"x"+e.height+" at "+e.x+","+e.y+") with scale "+e.scale)}function _a(e){return pt(Le.create(e).parseComponentValue())}var Ma=function(r){return new Promise(function(e,t){var n=new Image;n.onload=function(){e(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(r))})};Pt.setContext(window);return function(e,t){return void 0===t&&(t={}),E=e,D=t,u(void 0,void 0,void 0,function(){var t,n,r,i,o,a,s,l,u,c,A,d,p,f,h,m,g,v,y,w,b,C,S;return Z(this,function(e){switch(e.label){case 0:if(!(t=E.ownerDocument))throw new Error("Element is not attached to a Document");if(!(n=t.defaultView))throw new Error("Document is not attached to a Window");return r=(Math.round(1e3*Math.random())+Date.now()).toString(16),i=Ao(E)||"HTML"===E.tagName?function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),i=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new T(0,0,r,i)}(t):I(E),o=i.width,a=i.height,s=i.left,l=i.top,u=B({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},D),c={backgroundColor:"#ffffff",cache:D.cache?D.cache:Pt.create(r,u),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:n.devicePixelRatio||1,windowWidth:n.innerWidth,windowHeight:n.innerHeight,scrollX:n.pageXOffset,scrollY:n.pageYOffset,x:s,y:l,width:Math.ceil(o),height:Math.ceil(a),id:r},A=B({},c,u,D),d=new T(A.scrollX,A.scrollY,A.windowWidth,A.windowHeight),kt.create({id:r,enabled:A.logging}),kt.getInstance(r).debug("Starting document clone"),p=new No(E,{id:r,onclone:A.onclone,ignoreElements:A.ignoreElements,inlineImages:A.foreignObjectRendering,copyStyles:A.foreignObjectRendering}),(f=p.clonedReferenceElement)?[4,p.toIFrame(t,d)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=e.sent(),m=t.documentElement?_a(getComputedStyle(t.documentElement).backgroundColor):Ct.TRANSPARENT,g=t.body?_a(getComputedStyle(t.body).backgroundColor):Ct.TRANSPARENT,v=D.backgroundColor,y="string"==typeof v?_a(v):null===v?Ct.TRANSPARENT:4294967295,w=E===t.documentElement?nt(m)?nt(g)?y:g:m:y,b={id:r,cache:A.cache,canvas:A.canvas,backgroundColor:w,scale:A.scale,x:A.x,y:A.y,scrollX:A.scrollX,scrollY:A.scrollY,width:A.width,height:A.height,windowWidth:A.windowWidth,windowHeight:A.windowHeight},A.foreignObjectRendering?(kt.getInstance(r).debug("Document cloned, using foreign object rendering"),[4,new Fa(b).render(f)]):[3,3];case 2:return C=e.sent(),[3,5];case 3:return kt.getInstance(r).debug("Document cloned, using computed rendering"),Pt.attachInstance(A.cache),kt.getInstance(r).debug("Starting DOM parsing"),S=to(f),Pt.detachInstance(),w===S.styles.backgroundColor&&(S.styles.backgroundColor=Ct.TRANSPARENT),kt.getInstance(r).debug("Starting renderer"),[4,new Ea(b).render(S)];case 4:C=e.sent(),e.label=5;case 5:return!0===A.removeContainer&&(No.destroy(h)||kt.getInstance(r).error("Cannot detach cloned iframe as it is not in the DOM anymore")),kt.getInstance(r).debug("Finished rendering"),kt.destroy(r),Pt.destroy(r),[2,C]}})});var E,D}});"use strict";var Point=function(){function e(e,t,n){this.x=e,this.y=t,this.time=n||Date.now()}return e.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},e.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},e.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):0},e}(),Bezier=function(){function i(e,t,n,r,i,o){this.startPoint=e,this.control2=t,this.control1=n,this.endPoint=r,this.startWidth=i,this.endWidth=o}return i.fromPoints=function(e,t){var n=this.calculateControlPoints(e[0],e[1],e[2]).c2,r=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new i(e[1],n,r,e[2],t.start,t.end)},i.calculateControlPoints=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=t.x-n.x,a=t.y-n.y,s=(e.x+t.x)/2,l=(e.y+t.y)/2,u=(t.x+n.x)/2,c=(t.y+n.y)/2,A=Math.sqrt(r*r+i*i),d=Math.sqrt(o*o+a*a),p=d/(A+d),f=u+(s-u)*p,h=c+(l-c)*p,m=t.x-f,g=t.y-h;return{c1:new Point(s+m,l+g),c2:new Point(u+m,c+g)}},i.prototype.length=function(){for(var e,t,n=0,r=0;r<=10;r+=1){var i=r/10,o=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(0<r){var s=o-e,l=a-t;n+=Math.sqrt(s*s+l*l)}e=o,t=a}return n},i.prototype.point=function(e,t,n,r,i){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*r*(1-e)*e*e+i*e*e*e},i}();function throttle(i,o){void 0===o&&(o=250);var a,s,l,u=0,c=null,A=function(){u=Date.now(),c=null,a=i.apply(s,l),c||(s=null,l=[])};return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Date.now(),r=o-(n-u);return s=this,l=e,r<=0||o<r?(c&&(clearTimeout(c),c=null),u=n,a=i.apply(s,l),c||(s=null,l=[])):c||(c=window.setTimeout(A,r)),a}}var SignaturePad=function(){function r(e,t){void 0===t&&(t={});var n=this;this.canvas=e,this.options=t,this._handleMouseDown=function(e){1===e.which&&(n._mouseButtonDown=!0,n._strokeBegin(e))},this._handleMouseMove=function(e){n._mouseButtonDown&&n._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(e))},this._handleTouchStart=function(e){if(e.preventDefault(),1===e.targetTouches.length){var t=e.changedTouches[0];n._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];n._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){if(e.target===n.canvas){e.preventDefault();var t=e.changedTouches[0];n._strokeEnd(t)}},this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=throttle(r.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=r.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._ctx=e.getContext("2d"),this.clear(),this.on()}return r.prototype.clear=function(){var e=this._ctx,t=this.canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},r.prototype.fromDataURL=function(e,t,n){var r=this;void 0===t&&(t={});var i=new Image,o=t.ratio||window.devicePixelRatio||1,a=t.width||this.canvas.width/o,s=t.height||this.canvas.height/o;this._reset(),i.onload=function(){r._ctx.drawImage(i,0,0,a,s),n&&n()},i.onerror=function(e){n&&n(e)},i.src=e,this._isEmpty=!1},r.prototype.toDataURL=function(e,t){switch(void 0===e&&(e="image/png"),e){case"image/svg+xml":return this._toSVG();default:return this.canvas.toDataURL(e,t)}},r.prototype.on=function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",window.PointerEvent?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())},r.prototype.off=function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.removeEventListener("pointerdown",this._handleMouseDown),this.canvas.removeEventListener("pointermove",this._handleMouseMove),document.removeEventListener("pointerup",this._handleMouseUp),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)},r.prototype.isEmpty=function(){return this._isEmpty},r.prototype.fromData=function(e){var r=this;this.clear(),this._fromData(e,function(e){var t=e.color,n=e.curve;return r._drawCurve({color:t,curve:n})},function(e){var t=e.color,n=e.point;return r._drawDot({color:t,point:n})}),this._data=e},r.prototype.toData=function(){return this._data},r.prototype._strokeBegin=function(e){var t={color:this.penColor,points:[]};this._data.push(t),this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)},r.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,r=this._createPoint(t,n),i=this._data[this._data.length-1],o=i.points,a=0<o.length&&o[o.length-1],s=!!a&&r.distanceTo(a)<=this.minDistance,l=i.color;if(!a||!a||!s){var u=this._addPoint(r);a?u&&this._drawCurve({color:l,curve:u}):this._drawDot({color:l,point:r}),o.push({time:r.time,x:r.x,y:r.y})}},r.prototype._strokeEnd=function(e){this._strokeUpdate(e),"function"==typeof this.onEnd&&this.onEnd(e)},r.prototype._handlePointerEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("pointerdown",this._handleMouseDown),this.canvas.addEventListener("pointermove",this._handleMouseMove),document.addEventListener("pointerup",this._handleMouseUp)},r.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},r.prototype._handleTouchEvents=function(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)},r.prototype._reset=function(){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},r.prototype._createPoint=function(e,t){var n=this.canvas.getBoundingClientRect();return new Point(e-n.left,t-n.top,(new Date).getTime())},r.prototype._addPoint=function(e){var t=this._lastPoints;if(t.push(e),2<t.length){3===t.length&&t.unshift(t[0]);var n=this._calculateCurveWidths(t[1],t[2]),r=Bezier.fromPoints(t,n);return t.shift(),r}return null},r.prototype._calculateCurveWidths=function(e,t){var n=this.velocityFilterWeight*t.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(n),i={end:r,start:this._lastWidth};return this._lastVelocity=n,this._lastWidth=r,i},r.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},r.prototype._drawCurveSegment=function(e,t,n){var r=this._ctx;r.moveTo(e,t),r.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},r.prototype._drawCurve=function(e){var t=e.color,n=e.curve,r=this._ctx,i=n.endWidth-n.startWidth,o=2*Math.floor(n.length());r.beginPath(),r.fillStyle=t;for(var a=0;a<o;a+=1){var s=a/o,l=s*s,u=l*s,c=1-s,A=c*c,d=A*c,p=d*n.startPoint.x;p+=3*A*s*n.control1.x,p+=3*c*l*n.control2.x,p+=u*n.endPoint.x;var f=d*n.startPoint.y;f+=3*A*s*n.control1.y,f+=3*c*l*n.control2.y,f+=u*n.endPoint.y;var h=n.startWidth+u*i;this._drawCurveSegment(p,f,h)}r.closePath(),r.fill()},r.prototype._drawDot=function(e){var t=e.color,n=e.point,r=this._ctx,i="function"==typeof this.dotSize?this.dotSize():this.dotSize;r.beginPath(),this._drawCurveSegment(n.x,n.y,i),r.closePath(),r.fillStyle=t,r.fill()},r.prototype._fromData=function(e,t,n){for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.color,s=o.points;if(1<s.length)for(var l=0;l<s.length;l+=1){var u=s[l],c=new Point(u.x,u.y,u.time);this.penColor=a,0===l&&this._reset();var A=this._addPoint(c);A&&t({color:a,curve:A})}else this._reset(),n({color:a,point:s[0]})}},r.prototype._toSVG=function(){var o=this,e=this._data,t=Math.max(window.devicePixelRatio||1,1),n=this.canvas.width/t,r=this.canvas.height/t,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("width",this.canvas.width.toString()),a.setAttribute("height",this.canvas.height.toString()),this._fromData(e,function(e){var t=e.color,n=e.curve,r=document.createElement("path");if(!(isNaN(n.control1.x)||isNaN(n.control1.y)||isNaN(n.control2.x)||isNaN(n.control2.y))){var i="M "+n.startPoint.x.toFixed(3)+","+n.startPoint.y.toFixed(3)+" C "+n.control1.x.toFixed(3)+","+n.control1.y.toFixed(3)+" "+n.control2.x.toFixed(3)+","+n.control2.y.toFixed(3)+" "+n.endPoint.x.toFixed(3)+","+n.endPoint.y.toFixed(3);r.setAttribute("d",i),r.setAttribute("stroke-width",(2.25*n.endWidth).toFixed(3)),r.setAttribute("stroke",t),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),a.appendChild(r)}},function(e){var t=e.color,n=e.point,r=document.createElement("circle"),i="function"==typeof o.dotSize?o.dotSize():o.dotSize;r.setAttribute("r",i.toString()),r.setAttribute("cx",n.x.toString()),r.setAttribute("cy",n.y.toString()),r.setAttribute("fill",t),a.appendChild(r)});var i='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+n+" "+r+'" width="'+n+'" height="'+r+'">',s=a.innerHTML;if(void 0===s){var l=document.createElement("dummy"),u=a.childNodes;l.innerHTML="";for(var c=0;c<u.length;c+=1)l.appendChild(u[c].cloneNode(!0));s=l.innerHTML}return"data:image/svg+xml;base64,"+btoa(i+s+"</svg>")},r}(),requirejs,require,define;function TrackingEventRaiser(){Date.now=Date.now||function(){return+new Date};var t=function(e){return("0"+e).slice(-2)},e=function(e){return t(e.getDate())+"/"+t(e.getMonth()+1)+"/"+e.getFullYear()+" "+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())},n={},r=function(){n.EventTime="undefined"!=typeof $cacheManager?e($cacheManager.ServerTime()):e(new Date(Date.now()+60*(new Date).getTimezoneOffset()*1e3))},i=function(){return $.extend(!0,{},n)};return{eventData:n,raiseEvent:function(){r(),function(){try{window.dataLayer.push(i())}catch(e){ErrorManager.onError("callGoogleApi","Google Tag Manager has failed for event: "+n.event,eErrorSeverity.high)}}(),function(){for(var e in n)n.hasOwnProperty(e)&&delete n[e]}()},formatEventDate:e}}function TrackingEventsCollector(n,e,t){var r=!1,i=!1,o=!1,a=[],s=function(){r=!0,i&&o&&c(),A("exposeUI")},l=function(){i=!0,r&&o&&c()},u=function(){o=!0,r&&i&&c()},c=function(){for(var e=0;e<a.length;e++)A(a[e].eventName,a[e].additionalData)},A=function(e,t){if(d())a.push({eventName:e,additionalData:t});else{if(p(),window.environmentData&&window.environmentData.isDesktop)return $.extend(n.getCurrentEventData(),t),void n.raiseEvent(e);n[e](t)}},d=function(){return!r||!i},p=function(){$.extend(n.getCurrentEventData(),e.getProperties())};return{init:function(){t?(o=i=r=!0,window.environmentData&&window.environmentData.isDesktop||window.externalEventsCallbacks.add(A)):(ko.postbox.subscribe("trading-event",A),ko.postbox.subscribe("ui-loaded",s),ko.postbox.subscribe("scmm-data-loaded",l),ko.postbox.subscribe("customer-data-loaded",u))},consumeEvent:A}}function TrackingCommonData(e){var t,n=e;return{IPCountry:"undefined"!=typeof systemInfo?systemInfo.countryNameByIP:"undefined"!==window.Model?window.Model.CountryNameByIP:"",ResolutionScreen:Browser.getScreenResolution(),OS:Browser.getOperatingSystemName(),OSVersion:Browser.getOperatingSystemNameAndVersion(),Browser:function(){if(window.CookieHandler){if(null!==window.CookieHandler.ReadCookie("NativeIosApp")&&"true"===window.CookieHandler.ReadCookie("NativeIosApp"))return"App iPhone";if(null!=window.CookieHandler.ReadCookie("NativeAndroidApp")&&"true"===window.CookieHandler.ReadCookie("NativeIosApp"))return"App Android"}return Browser.getBrowserName()}(),BrowserVersion:Browser.getBrowserVersion(),Device:window.environmentData&&window.environmentData.isDesktop?"Desktop":CookieHandler.ReadCookie("ViewMode"),TrackingSessionId:(null==n.getItem("TrackingSessionId")&&(t=Math.random(),n.setItem("TrackingSessionId",t.toString())),n.getItem("TrackingSessionId")),Language:CookieHandler.ReadCookie("Language")}}function removeParametersFromReferrerUrl(e){return e.split("?")[0]}!function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){var n;if(e)for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){var n;if(e)for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(n,e,r,i){return e&&eachProp(e,function(e,t){!r&&hasProp(n,t)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?n[t]=e:(n[t]||(n[t]={}),mixin(n[t],e,r,i)))}),n}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),(i=getOwn(contexts,a))||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(t,n,r){var e,i=t&&t.config||{};if(isBrowser)return(e=req.createNode(i,n,r)).setAttribute("data-requirecontext",t.contextName),e.setAttribute("data-requiremodule",n),!e.attachEvent||e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0||isOpera?(e.addEventListener("load",t.onScriptLoad,!1),e.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,e.attachEvent("onreadystatechange",t.onScriptLoad)),e.src=r,i.onNodeCreated&&i.onNodeCreated(e,i,n,r),currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),t.completeLoad(n)}catch(e){t.onError(makeError("importscripts","importScripts failed for "+n+" at "+r,e,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,n,t){var r,i;"string"!=typeof e&&(t=n,n=e,e=null),isArray(n)||(t=n,n=null),!n&&isFunction(t)&&(n=[],t.length&&(t.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,t){n.push(t)}),n=(1===t.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,n,t]),i.defQueueMap[e]=!0):globalDefQueue.push([e,n,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(l){var n,e,p,u,c,m={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},A={},d={},r={},f=[],h={},i={},g={},v=1,y=1;function w(e,t,n){var r,i,o,a,s,l,u,c,A,d,p=t&&t.split("/"),f=m.map,h=f&&f["*"];if(e&&(l=(e=e.split("/")).length-1,m.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&p&&(e=p.slice(0,p.length-1).concat(e)),function(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;0<t&&(e.splice(t-1,2),t-=2)}}(e),e=e.join("/")),n&&f&&(p||h)){e:for(o=(i=e.split("/")).length;0<o;o-=1){if(s=i.slice(0,o).join("/"),p)for(a=p.length;0<a;a-=1)if((r=getOwn(f,p.slice(0,a).join("/")))&&(r=getOwn(r,s))){u=r,c=o;break e}!A&&h&&getOwn(h,s)&&(A=getOwn(h,s),d=o)}!u&&A&&(u=A,c=d),u&&(i.splice(0,c,u),e=i.join("/"))}return getOwn(m.pkgs,e)||e}function b(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===p.contextName)return e.parentNode.removeChild(e),!0})}function C(e){var t=getOwn(m.paths,e);if(t&&isArray(t)&&1<t.length)return t.shift(),p.require.undef(e),p.makeRequire(null,{skipMap:!0})([e]),!0}function S(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,r){var i,o,a,s,l=null,u=t?t.name:null,c=e,A=!0,d="";return e||(A=!1,e="_@r"+(v+=1)),l=(s=S(e))[0],e=s[1],l&&(l=w(l,u,r),o=getOwn(h,l)),e&&(l?d=n?e:o&&o.normalize?o.normalize(e,function(e){return w(e,u,r)}):-1===e.indexOf("!")?w(e,u,r):e:(l=(s=S(d=w(e,u,r)))[0],d=s[1],n=!0,i=p.nameToUrl(d))),{prefix:l,name:d,parentMap:t,unnormalized:!!(a=!l||o||n?"":"_unnormalized"+(y+=1)),url:i,originalName:c,isDefine:A,id:(l?l+"!"+d:d)+a}}function D(e){var t=e.id,n=getOwn(A,t);return n||(n=A[t]=new p.Module(e)),n}function B(e,t,n){var r=e.id,i=getOwn(A,r);!hasProp(h,r)||i&&!i.defineEmitComplete?(i=D(e)).error&&"error"===t?n(i.error):i.on(t,n):"defined"===t&&n(h[r])}function T(n,e){var t=n.requireModules,r=!1;e?e(n):(each(t,function(e){var t=getOwn(A,e);t&&(t.error=n,t.events.error&&(r=!0,t.emit("error",n)))}),r||req.onError(n))}function I(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(p.defQueueMap[t]=!0),f.push(e)}),globalDefQueue=[])}function F(e){delete A[e],delete d[e]}function x(){var e,r,t=1e3*m.waitSeconds,i=t&&p.startTime+t<(new Date).getTime(),o=[],a=[],s=!1,l=!0;if(!n){if(n=!0,eachProp(d,function(e){var t=e.map,n=t.id;if(e.enabled&&(t.isDefine||a.push(e),!e.error))if(!e.inited&&i)C(n)?s=r=!0:(o.push(n),b(n));else if(!e.inited&&e.fetched&&t.isDefine&&(s=!0,!t.prefix))return l=!1}),i&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=p.contextName,T(e);l&&each(a,function(e){!function i(o,a,s){var e=o.map.id;o.error?o.emit("error",o.error):(a[e]=!0,each(o.depMaps,function(e,t){var n=e.id,r=getOwn(A,n);!r||o.depMatched[t]||s[n]||(getOwn(a,n)?(o.defineDep(t,h[n]),o.check()):i(r,a,s))}),s[e]=!0)}(e,{},{})}),i&&!r||!s||!isBrowser&&!isWebWorker||c||(c=setTimeout(function(){c=0,x()},50)),n=!1}}function a(e){hasProp(h,e[0])||D(E(e[0],null,!0)).init(e[1],e[2])}function o(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function s(e){var t=e.currentTarget||e.srcElement;return o(t,p.onScriptLoad,"load","onreadystatechange"),o(t,p.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;for(I();f.length;){if(null===(e=f.shift())[0])return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));a(e)}p.defQueueMap={}}return u={require:function(e){return e.require?e.require:e.require=p.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?h[e.map.id]=e.exports:e.exports=h[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(m.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(e=function(e){this.events=getOwn(r,e.id)||{},this.map=e,this.shim=getOwn(m.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,p.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();p.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;i[e]||(i[e]=!0,p.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var t,e,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=p.execCb(n,o,r,i)}catch(e){t=e}else i=p.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&((e=this.module)?i=e.exports:this.usingExports&&(i=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",T(this.error=t)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(h[n]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(p,this.map,a)}F(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(p.defQueueMap,n)||this.fetch()}},callPlugin:function(){var l=this.map,u=l.id,e=E(l.prefix);this.depMaps.push(e),B(e,"defined",bind(this,function(e){var o,t,n,r=getOwn(g,this.map.id),i=this.map.name,a=this.map.parentMap?this.map.parentMap.name:null,s=p.makeRequire(l.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(e.normalize&&(i=e.normalize(i,function(e){return w(e,a,!0)})||""),B(t=E(l.prefix+"!"+i,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=t,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((n=getOwn(A,t.id))&&(this.depMaps.push(t),this.events.error&&n.on("error",bind(this,function(e){this.emit("error",e)})),n.enable()))):r?(this.map.url=p.nameToUrl(r),void this.load()):((o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,(this.error=e).requireModules=[u],eachProp(A,function(e){0===e.map.id.indexOf(u+"_unnormalized")&&F(e.map.id)}),T(e)}),o.fromText=bind(this,function(e,t){var n=l.name,r=E(n),i=useInteractive;t&&(e=t),i&&(useInteractive=!1),D(r),hasProp(m.config,u)&&(m.config[n]=m.config[u]);try{req.exec(e)}catch(e){return T(makeError("fromtexteval","fromText eval for "+u+" failed: "+e,e,[u]))}i&&(useInteractive=!0),this.depMaps.push(r),p.completeLoad(n),s([n],o)}),void e.load(l.name,s,o,m))})),p.enable(e,this),this.pluginMaps[e.id]=e},enable:function(){(d[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(u,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,B(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?B(e,"error",bind(this,this.errback)):this.events.error&&B(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=A[n],hasProp(u,n)||!r||r.enabled||p.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(A,e.id);t&&!t.enabled&&p.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(p={config:m,contextName:l,registry:A,defined:h,urlFetched:i,defQueue:f,defQueueMap:{},Module:e,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var n=e.urlArgs;e.urlArgs=function(e,t){return(-1===t.indexOf("?")?"?":"&")+n}}var r=m.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(m[t]||(m[t]={}),mixin(m[t],e,!0,!0)):m[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(g[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=p.makeShimExports(e)),r[t]=e}),m.shim=r),e.packages&&each(e.packages,function(e){var t;t=(e="string"==typeof e?{name:e}:e).name,e.location&&(m.paths[t]=e.location),m.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(A,function(e,t){e.inited||e.map.unnormalized||(e.map=E(t,null,!0))}),(e.deps||e.callback)&&p.require(e.deps||[],e.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}},makeRequire:function(o,a){function s(e,t,n){var r,i;return a.enableBuildCallback&&t&&isFunction(t)&&(t.__requireJsBuild=!0),"string"==typeof e?isFunction(t)?T(makeError("requireargs","Invalid require call"),n):o&&hasProp(u,e)?u[e](A[o.id]):req.get?req.get(p,e,o,s):(r=E(e,o,!1,!0).id,hasProp(h,r)?h[r]:T(makeError("notloaded",'Module name "'+r+'" has not been loaded yet for context: '+l+(o?"":". Use require([])")))):(_(),p.nextTick(function(){_(),(i=D(E(null,o))).skipMap=a.skipMap,i.init(e,t,n,{enabled:!0}),x()}),s)}return a=a||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var t,n=e.lastIndexOf("."),r=e.split("/")[0];return-1!==n&&(!("."===r||".."===r)||1<n)&&(t=e.substring(n,e.length),e=e.substring(0,n)),p.nameToUrl(w(e,o&&o.id,!0),t,!0)},defined:function(e){return hasProp(h,E(e,o,!1,!0).id)},specified:function(e){return e=E(e,o,!1,!0).id,hasProp(h,e)||hasProp(A,e)}}),o||(s.undef=function(n){I();var e=E(n,o,!0),t=getOwn(A,n);t.undefed=!0,b(n),delete h[n],delete i[e.url],delete r[n],eachReverse(f,function(e,t){e[0]===n&&f.splice(t,1)}),delete p.defQueueMap[n],t&&(t.events.defined&&(r[n]=t.events),F(n))}),s},enable:function(e){getOwn(A,e.id)&&D(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(m.shim,e)||{},o=i.exports;for(I();f.length;){if(null===(n=f.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);a(n)}if(p.defQueueMap={},r=getOwn(A,e),!t&&!hasProp(h,e)&&r&&!r.inited){if(!(!m.enforceDefine||o&&getGlobal(o)))return C(e)?void 0:T(makeError("nodefine","No define call for "+e,null,[e]));a([e,i.deps||[],i.exportsFn])}x()},nameToUrl:function(e,t,n){var r,i,o,a,s,l,u=getOwn(m.pkgs,e);if(u&&(e=u),l=getOwn(g,e))return p.nameToUrl(l,t,n);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(r=m.paths,o=(i=e.split("/")).length;0<o;o-=1)if(s=getOwn(r,i.slice(0,o).join("/"))){isArray(s)&&(s=s[0]),i.splice(0,o,s);break}a=i.join("/"),a=("/"===(a+=t||(/^data\:|^blob\:|\?/.test(a)||n?"":".js")).charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+a}return m.urlArgs&&!/^blob\:/.test(a)?a+m.urlArgs(e,a):a},load:function(e,t){req.load(p,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=s(e);p.completeLoad(t.id)}},onScriptError:function(e){var n=s(e);if(!C(n.id)){var r=[];return eachProp(A,function(e,t){0!==t.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===n.id)return r.push(t),!0})}),T(makeError("scripterror",'Script error for "'+n.id+(r.length?'", needed by: '+r.join(", "):'"'),e,[n.id]))}}}).require=p.makeRequire(),p}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("text",["module"],function(e){var u,i,a,s,l,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,A=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,p=c&&(location.port||void 0),f={},h=e.config&&e.config()||{};function m(e,t){return void 0===e||""===e?t:e}return u={version:"2.0.16",strip:function(e){if(e){var t=(e=e.replace(n,"")).match(o);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(e){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.lastIndexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||1<o)?(t=e.substring(0,o),n=e.substring(o+1)):t=e,-1!==(o=(r=n||t).indexOf("!"))&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i,o,a,s=u.xdRegExp.exec(e);return!s||(i=s[2],a=(o=(o=s[3]).split(":"))[1],o=o[0],(!i||i===t)&&(!o||o.toLowerCase()===n.toLowerCase())&&(!a&&!o||function(e,t,n,r){if(t===r)return!0;if(e===n){if("http"===e)return m(t,"80")===m(r,"80");if("https"===e)return m(t,"443")===m(r,"443")}return!1}(i,a,t,r)))},finishLoad:function(e,t,n,r){n=t?u.strip(n):n,h.isBuild&&(f[e]=n),r(n)},load:function(t,e,n,r){if(r&&r.isBuild&&!r.inlineText)n();else{h.isBuild=r&&r.isBuild;var i=u.parseName(t),o=i.moduleName+(i.ext?"."+i.ext:""),a=e.toUrl(o),s=h.useXhr||u.useXhr;0!==a.indexOf("empty:")?!c||s(a,A,d,p)?u.get(a,function(e){u.finishLoad(t,i.strip,e,n)},function(e){n.error&&n.error(e)}):e([o],function(e){u.finishLoad(i.moduleName+"."+i.ext,i.strip,e,n)},function(e){n.error&&n.error(e)}):n()}},write:function(e,t,n,r){if(f.hasOwnProperty(t)){var i=u.jsEscape(f[t]);n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n")}},writeFile:function(n,e,t,r,i){var o=u.parseName(e),a=o.ext?"."+o.ext:"",s=o.moduleName+a,l=t.toUrl(o.moduleName+a)+".js";u.load(s,t,function(e){var t=function(e){return r(l,e)};t.asModule=function(e,t){return r.asModule(e,l,t)},u.write(n,s,t,i)},i)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),u.get=function(e,t,n){try{var r=i.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(e){n&&n(e)}}):"xhr"===h.env||!h.env&&u.createXhr()?u.get=function(r,i,o,e){var t,a=u.createXhr();if(a.open("GET",r,!0),e)for(t in e)e.hasOwnProperty(t)&&a.setRequestHeader(t.toLowerCase(),e[t]);h.onXhr&&h.onXhr(a,r),a.onreadystatechange=function(e){var t,n;4===a.readyState&&(399<(t=a.status||0)&&t<600?((n=new Error(r+" HTTP status: "+t)).xhr=a,o&&o(n)):i(a.responseText),h.onXhrComplete&&h.onXhrComplete(a,r))},a.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?u.get=function(e,t){var n,r,i=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),s="";try{for(n=new java.lang.StringBuffer,(r=a.readLine())&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(o),n.append(r);s=String(n.toString())}finally{a.close()}t(s)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),l="@mozilla.org/windows-registry-key;1"in a,u.get=function(e,t){var n,r,i,o={};l&&(e=e.replace(/\//g,"\\")),i=new FileUtils.File(e);try{(n=a["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream)).init(i,1,0,!1),(r=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream)).init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),t(o.value)}catch(e){throw new Error((i&&i.path||"")+": "+e)}}),u}),function(e,t){"function"==typeof define&&define.amd?define("GoogleTagManager",["tracking/loggers/datalayer"],t):e.googleTagManager=t(e.dataLayer)}("undefined"!=typeof self?self:this,function(e){var a;return window.googleTagManager={Init:function(e){a=e,function(){var e=window,t=document,n="dataLayer",r=a;e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var i=t.getElementsByTagName("script")[0],o=t.createElement("script");o.async=!0,o.src="https://www.googletagmanager.com/gtm.js?id="+r,i.parentNode.insertBefore(o,i)}()},StartChat:function(){try{e.push({event:"start-chat"})}catch(e){ErrorManager.onError("startChat","Google Tag Manager has failed",eErrorSeverity.low)}},ConfigAttributes:function(e){ko.postbox.publish(eFxNetEvents.GtmConfigurationSet,e)}},window.googleTagManager});var PerformanceDataCollector=function(){var t={},i=window.performance&&window.performance.getEntriesByType?window.performance.getEntriesByType("resource"):[];return{Timestamps:t,getResourceTiming:function(e){var t=new RegExp(e,"gi"),n=0,r=i.filter(function(e){return t.test(e.name)});return r&&r.length&&r.forEach(function(e){n+=e.responseEnd-e.startTime}),n},isNewVersion:function(){var e=!1;if(StorageFactory.isSupported(StorageFactory.eStorageType.local)){var t=CookieHandler.ReadCookie("Version"),n=StorageFactory(StorageFactory.eStorageType.local);n.getItem("fxnet_version")!==t&&(e=!0,n.setItem("fxnet_version",t))}return e},registerEventTimestamp:function(e){t[e]=Date.now()},loadEventEnd:function(){var e="";try{e=window.performance.timing.loadEventEnd}catch(e){ErrorManager.onWarning("window.performance.timing.loadEventEnd","window.performance.timing.loadEventEnd is not supported in this OS")}return e},responseEnd:function(){var e="";try{e=window.performance.timing.responseEnd}catch(e){ErrorManager.onWarning("window.performance.timing.responseEnd","window.performance.timing.responseEnd is not supported in this OS")}return e},fetchStart:function(){var e="";try{e=window.performance.timing.fetchStart}catch(e){ErrorManager.onWarning("window.performance.timing.responseEnd","window.performance.timing.fetchStart is not supported in this OS")}return e}}}(),TradingEventsHandler=function(){var e="socket-connection-test",t="active-view",n="preset-changed",r="favorite-instruments-reorder-drag",i="favorite-instruments-reorder-drop",o="favorite-instrument-update",a="instrument-trade",s="new-deal-click",l="new-limit-click",u="new-limit-details",c="main-tab-click",A="sub-tab-click",d="deal-slip-error-details",p="deal-slip-view",f="new-deal-dragged",h="deal-slip-interaction",m="deal-slip-submit",g="deal-slip-switch-instrument",v="deal-slip-switch-tab",y="deal-slip-expand-limit",w="deal-slip-collapse-limit",b="deal-slip-expand-tools",C="deal-slip-collapse-tools",S="deal-slip-toggle",E="new-limit-error-details",D="new-limit-view",B="limit-slip-interaction",T="new-limit-submit",I="new-limit-success",F="deposit-iframe-loaded",x="deposit-type-changed",_="ui-loaded",M="deal-slip-success",N="deposit-success",k="withdrawal-error",U="deposit-failed-data",P="deposit-failed",Q="deposit-alert",H="search",O="search-interaction",L="deal-slip-search",R="deal-slip-search-interaction",V="message-view",q="sb-view-offer-clicked",K="sb-deposit-clicked",W="reward-cta-clicked",j="preset-selection-save",z="back-button-click",G="trading-button-click",J="stop-loss-changed",X="take-profit-changed",Y="instrument-show-more",Z="instrument-show-less",ee="click-sunday-banner-button-main",te="show-sunday-banner-main",ne="switch-main-view",re="tutorial-view-active",ie="tutorial-open",oe="tutorial-close",ae="tutorial-agreement-view",se="tutorial-agreement-agree",le="tutorial-agreement-decline",ue="signals-menu-click",ce="signals-drill-down",Ae="signals-view-more",de="signals-detail-new-deal",pe="short-term-signal-chart",fe="economic-calendar-menu-click",he="cash-back-instrument-click",me="questionnaire-navigation",ge="questionnaire-page",ve="questionnaire-question",ye="questionnaire-faq",we="support-interaction",be="deposit-faq",Ce="deal-slip-chart-interaction",Se="chart-interaction",Ee="chart-performance",De="view-sentiments",Be="closed-deals-events",Te="notifications-settings-change",Ie="tools-chart",Fe="start-callback-request-chat",xe="hub-menu-close",_e="hub-menu-open",Me="hub-map-collapse",Ne="hub-map-expand",ke="action-source",Ue="account-state",Pe="price-alerts-menu-view",Qe="price-alert-create",He="price-alert-error",Oe="deal-slip-change-highlow-term",Le={startTime:0,category:"",questionnaireType:null},Re={viewId:"",presetName:"",instrumentName:"",tradingDirection:"",orderDirName:"",newDealButton:"",newLimitDetails:{},depositType:"",takeProfitType:"none",stopLossType:"none",tabName:"",limit:"",enableSLLimit:"",enableTPLimit:"",tools:"",timestamp:"",isCashBackInstrumentClick:!1,actionSource:"Other"},Ve={fromSearch:{Characters:"undefined",Instrument:"undefined"}},qe="",Ke="",We="main tab",je=function(){Object.keys(eMarketInfoEvents).forEach(function(e){var t=eMarketInfoEvents[e];ko.postbox.subscribe(t,function(){window.trackingEventsCollector.consumeEvent(t,Dt())})})},ze=function(e){window.trackingEventsCollector.consumeEvent(Oe,e)},Ge=function(e){window.trackingEventsCollector.consumeEvent(He,e)},Je=function(){window.trackingEventsCollector.consumeEvent(Qe)},Xe=function(){window.trackingEventsCollector.consumeEvent(Pe)},$e=function(){window.trackingEventsCollector.consumeEvent(e)},Ye=function(e){var t={element:e};switch($viewModelsManager.VManager.ActiveFormType()){case eForms.ClientQuestionnaire:case eForms.Help:t.category=Le.category,t.view="questionnaire";break;case eForms.Deposit:case eForms.HelpDeposit:t.category="deposit choice",t.view="deposit";break;case eForms.ConcretePaymentForm:case eForms.HelpConcretePaymentForm:t.category="deposit form",t.view="deposit";break;case eForms.DepositPending:case eForms.DepositSuccess:case eForms.HelpDepositThankYou:t.category="deposit confirm",t.view="deposit";break;case eForms.HelpUploadDocuments:t.category="upload documents",t.view="upload documents";break;default:t.category="",t.view=$viewModelsManager.VManager.ActiveFormName()}window.trackingEventsCollector.consumeEvent(we,t)},Ze=function(e){window.trackingEventsCollector.consumeEvent(ye,{category:Le.category,questionID:e,view:"questionnaire"})},et=function(e){var t={questionID:e};switch($viewModelsManager.VManager.ActiveFormType()){case eForms.Deposit:case eForms.HelpDeposit:t.category="deposit choice",t.view="deposit";break;case eForms.ConcretePaymentForm:case eForms.HelpConcretePaymentForm:t.category="deposit form",t.view="deposit";break;case eForms.DepositPending:case eForms.DepositSuccess:case eForms.HelpDepositThankYou:t.category="deposit confirm",t.view="deposit";break;case eForms.HelpUploadDocuments:t.category="upload documents",t.view="upload documents";break;default:t.category="",t.view=$viewModelsManager.VManager.ActiveFormName()}window.trackingEventsCollector.consumeEvent(be,t)},tt=function(e){Le.category=e.category,e.questionnaireType===eQuestionnaireType.MIFID&&(Le.startTime=0),Le.questionnaireType=e.questionnaireType},nt=function(e){var t,n=(new Date).getTime();if(0===Le.startTime){Le.startTime=n,t=0;var r=Le.questionnaireType===eQuestionnaireType.MIFID?"questionnaire-quiz-start":"questionnaire-start";window.trackingEventsCollector.consumeEvent(r,{category:Le.category})}else t=((n-Le.startTime)/1e3).toFixed();window.trackingEventsCollector.consumeEvent(ve,{category:Le.category,questionID:e,elapsedTime:t})},rt=function(e){e=e||{},Ve.fromSearch.Characters=e.Characters,delete Ve.fromSearch.Instrument,window.trackingEventsCollector.consumeEvent(H,{Characters:e.Characters})},it=function(e){var t;e=e||{},Ve.fromSearch.Instrument=e.Instrument,(t=$instrumentsManager.GetInstrument(e.Instrument.id))&&(Ve.fromSearch.Instrument.ccyPair=t.ccyPair),window.trackingEventsCollector.consumeEvent(O,{Instrument:Ve.fromSearch.Instrument.ccyPair,SearchResult:!0})},ot=function(e){e=e||{},Ve.fromSearch.Characters=e.Characters,delete Ve.fromSearch.Instrument,window.trackingEventsCollector.consumeEvent(L,{Characters:e.Characters})},at=function(e){var t;e=e||{},Ve.fromSearch.Instrument=e.Instrument,(t=$instrumentsManager.GetInstrument(e.Instrument.id))&&(Ve.fromSearch.Instrument.ccyPair=t.ccyPair),window.trackingEventsCollector.consumeEvent(R,{Instrument:Ve.fromSearch.Instrument.ccyPair,SearchResult:!0})},st=function(e){Re.viewId!==e?(Re.viewId=e,Re.instrumentName="",Re.tradingDirection="",Re.newDealButton="",qe="Auto",Le.startTime=0,window.trackingEventsCollector.consumeEvent("View")):Re.actionSource="Other"},lt=function(e){window.trackingEventsCollector.consumeEvent(me,e)},ut=function(e){Re.presetName=e,Re.instrumentName="",Re.tradingDirection="",Re.newDealButton=""},ct=function(e){Re.instrumentId=e},At=function(){window.trackingEventsCollector.consumeEvent("favorite-instruments-reorder",{instrumentId:Re.instrumentId})},dt=function(e){e.isAddInstrument?window.trackingEventsCollector.consumeEvent("favorite-instruments-add",{instrumentId:e.instrumentId}):e.isRemoveInstrument&&window.trackingEventsCollector.consumeEvent("favorite-instruments-remove",{instrumentId:e.instrumentId})},pt=function(e){Re.instrumentName=e.instrumentName,Re.tradingDirection=0==isDefinedType(e.tradingDirection)?"":e.tradingDirection,qe="Manual"},ft=function(){Re.newDealButton="NewDeal",Re.presetName="",Re.instrumentName="",Re.tradingDirection="",qe="Manual"},ht=function(){qe="Manual"},mt=function(e){We="main tab",window.trackingEventsCollector.consumeEvent("switch-tab",$.extend({viewId:Re.viewId,hierarchy:We,presetName:Re.presetName},e||{}))},gt=function(){We="sub tab",window.trackingEventsCollector.consumeEvent("switch-tab",{viewId:Re.viewId,hierarchy:We,presetName:Re.presetName})},vt=function(e){Re.timestamp=(new Date).getTime(),e.displayMode=On(),e.referrer=Hn(),Et(e),Dt(e),window.trackingEventsCollector.consumeEvent("new-limit-view",e)},yt=function(e){Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),Et(e),Dt(e),window.trackingEventsCollector.consumeEvent("limit-slip-interaction",e)},wt=function(){var e={};e.ElapsedTime=Ln(),Et(e),Dt(e),window.trackingEventsCollector.consumeEvent("new-limit-submit",e)},bt=function(e){Re.newLimitDetails.tradingDirection=e.tradingDirection,Re.newLimitDetails.dealSize=e.dealSize,Re.newLimitDetails.isAdvancedView=e.isAdvancedView,Re.newLimitDetails.expirationType=e.expirationType},Ct=function(){var e=StorageFactory(StorageFactory.eStorageType.session);e.getItem("registrationSubmitClicked")&&(e.removeItem("registrationSubmitClicked"),window.trackingEventsCollector.consumeEvent("registration-success"),window.trackingEventsCollector.consumeEvent("login-success")),e.getItem("loginSubmitClicked")&&(e.removeItem("loginSubmitClicked"),window.trackingEventsCollector.consumeEvent("login-success",e.getItem("isAutologin"))),e.getItem("registrationCompleteLoginButtonClicked")&&(e.removeItem("registrationCompleteLoginButtonClicked"),window.trackingEventsCollector.consumeEvent("login-success")),e.getItem("forgotPasswordResetSubmitClicked")&&(e.removeItem("forgotPasswordResetSubmitClicked"),window.trackingEventsCollector.consumeEvent("forgot-password-success"),window.trackingEventsCollector.consumeEvent("login-success"))},St=function(e){e.TabName="minimized"===Re.tools?"":Re.tabName,e.Limit=Re.limit,e.Tools=Re.tools};function Et(e){e.version="AmntValue2018"}function Dt(e){var t=["TradingSentiment","MarketInfo","HighLow","InstrumentInfo"],n=window.hasOwnProperty("CustomerProfileManager")?window.CustomerProfileManager:null,r=window.hasOwnProperty("InitConfiguration")?window.InitConfiguration:null,i=isEmptyValue(n)?null:n.ProfileCustomer(),o=isEmptyValue(r)?{}:r.MarketInfoSectionsConfiguration,a=function(e){return e?"maximized":"minimized"},s=[];return e=e||{},i&&Object.keys(eMarketInfoSectionsProps).forEach(function(e){isEmptyValue(i[e])?s.push(t[eMarketInfoSectionsProps[e]]+":"+a(o[e])):s.push(t[eMarketInfoSectionsProps[e]]+":"+a(i[e]))}),e.SlipExpandedInfoAreas=s.join(" "),e}var Bt=function(e){St(e),Et(e),e.referrer=Hn()},Tt=function(e){Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),Dt(e),window.trackingEventsCollector.consumeEvent("deal-slip-error",e)},It=function(e){Re.timestamp=(new Date).getTime(),Re.tabName=e.tabName,Re.limit=e.limit,Re.tools=e.tools,Re.instrumentName=e.instrument,Re.tradingDirection=e.orderDir==eOrderDir.Buy?"ask":e.orderDir==eOrderDir.Sell?"bid":"none",Re.newDealButton=e.orderDir==eOrderDir.None?Re.newDealButton:"",Bt(e),e.displayMode=qe,isDefinedType(Ve.fromSearch.Instrument)&&e.id===Ve.fromSearch.Instrument.id?e.SearchResult=!0:(e.SearchResult=!1,delete Ve.fromSearch.Instrument),Re.isCashBackInstrumentClick=!1,Dt(e),window.trackingEventsCollector.consumeEvent("deal-slip-view",e)},Ft=function(e){Bt(e),e.ElapsedTime=Ln(),window.trackingEventsCollector.consumeEvent("new-deal-dragged",e)},xt=function(e){Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),Dt(e),window.trackingEventsCollector.consumeEvent("deal-slip-interaction",e)},_t=function(e){Bt(e),Re.tradingDirection=e.orderDir==eOrderDir.Buy?"ask":e.orderDir==eOrderDir.Sell?"bid":"none",Re.orderDirName=e.orderDir==eOrderDir.Buy?"Buy":e.orderDir==eOrderDir.Sell?"Sell":"None",Re.dealSize=e.dealSize,Re.enableSLLimit=e.enableSLLimit,Re.enableTPLimit=e.enableTPLimit,e.stopLossType=Re.stopLossType,e.takeProfitType=Re.takeProfitType,e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),Dt(e),window.trackingEventsCollector.consumeEvent("deal-slip-submit",e)},Mt=function(e){Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&Ve.fromSearch.Instrument.id===e.id,e.SearchResult||delete Ve.fromSearch.Instrument,window.trackingEventsCollector.consumeEvent("deal-slip-switch-instrument",e)},Nt=function(e){Re.tabName=e.tabName,Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),window.trackingEventsCollector.consumeEvent("deal-slip-switch-tab",e)},kt=function(e){Re.limit=e.limit,Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),window.trackingEventsCollector.consumeEvent("deal-slip-expand-limit",e)},Ut=function(e){Re.limit=e.limit,Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),window.trackingEventsCollector.consumeEvent("deal-slip-collapse-limit",e)},Pt=function(e){Re.limit=e.limit},Qt=function(e){Re.tools=e.tools,Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),window.trackingEventsCollector.consumeEvent("deal-slip-expand-tools",e)},Ht=function(e){Re.tools=e.tools,Bt(e),e.ElapsedTime=Ln(),e.SearchResult=isDefinedType(Ve.fromSearch.Instrument)&&isDefinedType(Ve.fromSearch.Instrument.id),window.trackingEventsCollector.consumeEvent("deal-slip-collapse-tools",e)},Ot=function(e){e.ElapsedTime=Ln(),Et(e),Dt(e),window.trackingEventsCollector.consumeEvent("new-limit-error",e)},Lt=function(e){var t=e[0],n=e[1];"string"!=typeof n||""===n?window.trackingEventsCollector.consumeEvent("deposit-error",{type:"server",errorMessage:t}):Wt()},Rt=function(e){var t=$("iframe[id="+e.iframeid+"]");t.contents().click(function(){window.trackingEventsCollector.consumeEvent("deposit-interaction")});var n=t.contents().find("[data-deposit-button]");1==n.length&&$(n[0]).click(function(){window.trackingEventsCollector.consumeEvent("deposit-submit")})},Vt=function(e){Re.depositType=e.depositType},qt=function(e){Bt(e),e.ElapsedTime=Ln(),e.displayMode=qe,e.type=Re.orderDirName,e.dealSize=Re.dealSize,e.stopLossType=Re.stopLossType,e.takeProfitType=Re.takeProfitType,e.enableSLLimit=Re.enableSLLimit,e.enableTPLimit=Re.enableTPLimit,Dt(e),window.trackingData.incrementDealsNumber(),window.trackingEventsCollector.consumeEvent("deal-slip-success",e),window.trackingData.updateActualDealType("deal-slip-success")},Kt=function(e){e.ElapsedTime=Ln(),e.type=Re.newLimitDetails.tradingDirection,e.dealSize=Re.newLimitDetails.dealSize,e.advancedView=Re.newLimitDetails.isAdvancedView,e.expirationType=Re.newLimitDetails.expirationType,e.stopLossType=Re.stopLossType,e.takeProfitType=Re.takeProfitType,Et(e),Dt(e),window.trackingData.incrementDealsNumber(),window.trackingEventsCollector.consumeEvent("new-limit-success",e)},Wt=function(){window.trackingEventsCollector.consumeEvent("deposit-success"),window.trackingData.incrementDepositsNumber()},jt=function(e){var t={type:"server"};e&&(t.errorMessage=e.message,t.errorMessageKey=e.key),window.trackingEventsCollector.consumeEvent("deposit-error",t)},zt=function(e){var t={type:"server"};t.errorMessage=e,window.trackingEventsCollector.consumeEvent("deposit-error",t)},Gt=function(e){window.trackingEventsCollector.consumeEvent("withdrawal-error",{reason:e})},Jt=function(e){window.trackingEventsCollector.consumeEvent("message-view",{text:Zt(e.text),type:e.type})},Xt=function(e){window.trackingEventsCollector.consumeEvent("sb-view-offer-clicked",{text:e.text,type:e.type})},$t=function(e){window.trackingEventsCollector.consumeEvent("sb-deposit-clicked",{text:e.text})},Yt=function(e){window.trackingEventsCollector.consumeEvent("reward-cta-clicked",{})},Zt=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},en=function(e){window.trackingEventsCollector.consumeEvent("switch-tab",{viewId:Re.viewId,presetName:e})},tn=function(e){Re.presetName=e},nn=function(e){e.type===eViewTypes.vWithdrawal&&window.trackingEventsCollector.consumeEvent("withdrawal-cancel")},rn=function(e){Re.stopLossType=e},on=function(e){Re.takeProfitType=e},an=function(){window.trackingEventsCollector.consumeEvent("instrument-show-more",{TabName:Re.presetName,tabHierarchy:"sub tab"})},sn=function(){window.trackingEventsCollector.consumeEvent("instrument-show-less",{TabName:Re.presetName,tabHierarchy:"sub tab"})},ln=function(e){window.trackingEventsCollector.consumeEvent(De,e)},un=function(e){window.trackingEventsCollector.consumeEvent("click-sunday-banner-button-main",{Element:e})},cn=function(e){window.trackingEventsCollector.consumeEvent("show-sunday-banner-main",{Element:e})},An=function(e){window.trackingEventsCollector.consumeEvent("switch-main-view",e)},dn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("tutorial-events",$.extend({event:"view-tutorials-page"},e))},pn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("tutorial-events",$.extend({event:"tutorial-open"},e))},fn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("tutorial-events",$.extend({event:"tutorial-close"},e))},hn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("tutorial-events",$.extend({event:"agreement-view"},e))},mn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("tutorial-events",$.extend({event:"agreement-agree"},e))},gn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("tutorial-events",$.extend({event:"agreement-decline"},e))},vn=function(){window.trackingEventsCollector.consumeEvent("signals-menu-click")},yn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("signals-drill-down",e)},wn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("signals-view-more",e)},bn=function(e){var t=(e||{}).signalData||{};t.instrument=t.instrument||{};var n={signalId:t.signalId,symbol:t.symbol,instrumentId:t.instrument.id};window.trackingEventsCollector.consumeEvent("signals-detail-new-deal",n)},Cn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent("short-term-signal-chart",e)},Sn=function(){window.trackingEventsCollector.consumeEvent("economic-calendar-menu-click")},En=function(){Re.isCashBackInstrumentClick=!0},Dn=function(e){St(e),e.ElapsedTime=Ln(),window.trackingEventsCollector.consumeEvent("deal-slip-chart-interaction",e)},Bn=function(e){St(e),window.trackingEventsCollector.consumeEvent("chart-interaction",e)},Tn=function(e){window.trackingEventsCollector.consumeEvent("chart-performance",e)},In=function(e){window.trackingEventsCollector.consumeEvent(Be,e)},Fn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent(Te,e)},xn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent(Ie,e)},_n=function(e){e=e||{},window.trackingEventsCollector.consumeEvent(Fe,e)},Mn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent(xe,e)},Nn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent(_e,e)},kn=function(e){e=e||{},window.trackingEventsCollector.consumeEvent(Me,e)},Un=function(e){e=e||{},window.trackingEventsCollector.consumeEvent(Ne,e)},Pn=function(e){Re.actionSource=e},Qn=function(e){trackingData.updateAccountStatus(e)},Hn=function(){var e=Re.viewId;return"1"===Re.viewId&&(e+="+main"),Re.isCashBackInstrumentClick?e+"+CashBack":Re.newDealButton!=String.empty?e+"+"+Re.newDealButton:(Re.presetName!=String.empty&&(e=e+"+"+Re.presetName),Re.instrumentName!=String.empty&&(e=e+"+"+Re.instrumentName),Re.tradingDirection!=String.empty&&(e=e+"+"+Re.tradingDirection),e)},On=function(){return qe};function Ln(){return(((new Date).getTime()-Re.timestamp)/1e3).toFixed()}return{init:function(){ko.postbox.subscribe(e,$e),ko.postbox.subscribe(we,Ye),ko.postbox.subscribe(ye,Ze),ko.postbox.subscribe(be,et),ko.postbox.subscribe(ge,tt),ko.postbox.subscribe(ve,nt),ko.postbox.subscribe(me,lt),ko.postbox.subscribe(t,st),ko.postbox.subscribe(n,ut),ko.postbox.subscribe(r,ct),ko.postbox.subscribe(i,At),ko.postbox.subscribe(o,dt),ko.postbox.subscribe(a,pt),ko.postbox.subscribe(s,ft),ko.postbox.subscribe(l,ht),ko.postbox.subscribe(u,bt),ko.postbox.subscribe(c,mt),ko.postbox.subscribe(A,gt),ko.postbox.subscribe(d,Tt),ko.postbox.subscribe(p,It),ko.postbox.subscribe(f,Ft),ko.postbox.subscribe(h,xt),ko.postbox.subscribe(m,_t),ko.postbox.subscribe(g,Mt),ko.postbox.subscribe(v,Nt),ko.postbox.subscribe(y,kt),ko.postbox.subscribe(w,Ut),ko.postbox.subscribe(S,Pt),ko.postbox.subscribe(b,Qt),ko.postbox.subscribe(C,Ht),ko.postbox.subscribe(E,Ot),ko.postbox.subscribe(F,Rt),ko.postbox.subscribe(x,Vt),ko.postbox.subscribe(_,Ct),ko.postbox.subscribe(M,qt),ko.postbox.subscribe(N,Wt),ko.postbox.subscribe(U,jt),ko.postbox.subscribe(P,zt),ko.postbox.subscribe(k,Gt),ko.postbox.subscribe(Q,Lt),ko.postbox.subscribe(D,vt),ko.postbox.subscribe(B,yt),ko.postbox.subscribe(T,wt),ko.postbox.subscribe(I,Kt),ko.postbox.subscribe(V,Jt),ko.postbox.subscribe(q,Xt),ko.postbox.subscribe(K,$t),ko.postbox.subscribe(W,Yt),ko.postbox.subscribe(j,en),ko.postbox.subscribe(G,tn),ko.postbox.subscribe(z,nn),ko.postbox.subscribe(J,rn),ko.postbox.subscribe(X,on),ko.postbox.subscribe(Y,an),ko.postbox.subscribe(Z,sn),ko.postbox.subscribe(ee,un),ko.postbox.subscribe(te,cn),ko.postbox.subscribe(ne,An),ko.postbox.subscribe(H,rt),ko.postbox.subscribe(O,it),ko.postbox.subscribe(L,ot),ko.postbox.subscribe(R,at),ko.postbox.subscribe(De,ln),ko.postbox.subscribe(re,dn),ko.postbox.subscribe(ie,pn),ko.postbox.subscribe(oe,fn),ko.postbox.subscribe(ae,hn),ko.postbox.subscribe(se,mn),ko.postbox.subscribe(le,gn),ko.postbox.subscribe(ue,vn),ko.postbox.subscribe(ce,yn),ko.postbox.subscribe(Ae,wn),ko.postbox.subscribe(de,bn),ko.postbox.subscribe(pe,Cn),ko.postbox.subscribe(fe,Sn),ko.postbox.subscribe(he,En),ko.postbox.subscribe(Ce,Dn),ko.postbox.subscribe(Se,Bn),ko.postbox.subscribe(Ee,Tn),ko.postbox.subscribe(Be,In),ko.postbox.subscribe(Te,Fn),ko.postbox.subscribe(Ie,xn),ko.postbox.subscribe(Fe,_n),ko.postbox.subscribe(xe,Mn),ko.postbox.subscribe(_e,Nn),ko.postbox.subscribe(Me,kn),ko.postbox.subscribe(Ne,Un),ko.postbox.subscribe(ke,Pn),ko.postbox.subscribe(Ue,Qn),ko.postbox.subscribe(Pe,Xe),ko.postbox.subscribe(Qe,Je),ko.postbox.subscribe(He,Ge),ko.postbox.subscribe(Oe,ze),je()},data:Re,getReferrerDescription:Hn,tradeFormDisplayMode:On,getRefferingView:function(){return Ke},updateRefferingView:function(e){Ke=e}}};function TrackingEvents(f){this.getCurrentEventData=function(){return f.eventData},this.exposeUI=function(){var e,t,n,r,i,o,a=f.eventData;a.event="exposeUI",a.start=Date.now();try{a.htmlFromCdnDuration=Preloader.Timestamps.getHtmlDuration(),a.initialDataDuration=Preloader.Timestamps.getInitialDataDuration();var s=PerformanceDataCollector.getResourceTiming(UrlResolver.getContentPath("contentdata")),l=PerformanceDataCollector.getResourceTiming(".*.css"),u=PerformanceDataCollector.getResourceTiming("favicon"),c=PerformanceDataCollector.getResourceTiming("assets/"+window.version+"/js/preloader.js"),A=PerformanceDataCollector.getResourceTiming("assets/"+window.version+"/js/main.js")+PerformanceDataCollector.getResourceTiming("assets/"+window.version+"/js/mobilemain.js"),d=PerformanceDataCollector.getResourceTiming(".*style.css"),p=PerformanceDataCollector.getResourceTiming(".*main.html");a.cssLoadDuration=Math.ceil(l),a.contentLoadDuration=Math.ceil(s),a.bundleLoadDuration=Math.ceil(A),a.preloaderDuration=Math.ceil(c),a.faviconLoadDuration=Math.ceil(u),a.networkDuration=(i=PerformanceDataCollector.fetchStart(),""===(o=PerformanceDataCollector.responseEnd())||""===i?"":o-i),a.domParseDuration=(n=PerformanceDataCollector.responseEnd(),""===(r=PerformanceDataCollector.loadEventEnd())||""===n?"":r-n),a.applicationStartDuration=""===(t=PerformanceDataCollector.loadEventEnd())?"":PerformanceDataCollector.Timestamps[eFxNetEvents.Init]-t,a.managersInit=PerformanceDataCollector.Timestamps[eFxNetEvents.Start]-PerformanceDataCollector.Timestamps[eFxNetEvents.Init],a.loadedNewVersion=PerformanceDataCollector.isNewVersion(),a.average3FilesLoadDuration=Math.ceil((d+p+A)/3),a.waitInitialDataDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.InitialDataEnd]-PerformanceDataCollector.Timestamps[eFxNetEvents.InitialDataStart],a.waitHtmlDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.WaitHtmlEnd]-PerformanceDataCollector.Timestamps[eFxNetEvents.WaitHtmlStart],a.applyBindingsDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.ApplyBindingsEnd]-PerformanceDataCollector.Timestamps[eFxNetEvents.ApplyBindingsStart],a.cacheLoadDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.CacheLoadEnd]-PerformanceDataCollector.Timestamps[eFxNetEvents.CacheLoadStart],a.uiLayerDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.UiLayerEnd]-PerformanceDataCollector.Timestamps[eFxNetEvents.UiLayerStart],a.applicationInitDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi]-PerformanceDataCollector.Timestamps[eFxNetEvents.Init],a.exposeUIDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi]-PerformanceDataCollector.Timestamps[eFxNetEvents.SplashScreenRemoved],a.loginDuration=""===(e=PerformanceDataCollector.fetchStart())?"":PerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi]-e,a.fromExposeUiToFirstQuote=Math.max(0,PerformanceDataCollector.Timestamps[eFxNetEvents.FirstQuoteEvent]-PerformanceDataCollector.Timestamps[eFxNetEvents.ExposeUi]),a.webSocketStartToComplete=Preloader.Timestamps.getSocketConnectionDuration(),a.webSocketCompleteConnectionToFirstQuote=Preloader.Timestamps.getSocketFromCompleteConnectionToFirstQuote(),a.webSocketsFromCompleteConnectionToFirstFrame=Preloader.Timestamps.getSocketFromCompleteConnectionToFirstFrame()}catch(e){throw a.duration=0,e}finally{f.raiseEvent()}},this["socket-connection-test"]=function(){f.eventData.event="socket-connection-test",f.raiseEvent()},this["deal-slip-view"]=function(e){f.eventData.event="deal-slip-view",f.eventData.Version=e.version,f.eventData.Instrument=e.instrument,f.eventData.Referrer=e.referrer,f.eventData.DisplayMode=e.displayMode,f.eventData.InstrumentStatus=e.instrumentStatus,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.SearchResult=e.SearchResult,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["deal-slip-interaction"]=function(e){f.eventData.event="deal-slip-interaction",f.eventData.Version=e.version,f.eventData.Element=e.element,f.eventData.Referrer=e.referrer,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["deal-slip-submit"]=function(e){f.eventData.event="deal-slip-submit",f.eventData.Version=e.version,f.eventData.Instrument=e.instrument,f.eventData.DealSize=e.dealSize,f.eventData.StopLossType=e.stopLossType,f.eventData.TakeProfitType=e.takeProfitType,f.eventData.Referrer=e.referrer,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.EnableSLLimit=e.enableSLLimit,f.eventData.EnableTPLimit=e.enableTPLimit,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["switch-main-view"]=function(e){f.eventData.event="switch-main-view",f.raiseEvent()},this["new-deal-dragged"]=function(e){f.eventData.event="new-deal-dragged",f.eventData.Version=e.version,f.eventData.Referrer=e.referrer,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.raiseEvent()},this["deal-slip-switch-instrument"]=function(e){f.eventData.event="deal-slip-switch-instrument",f.eventData.Referrer=e.referrer,f.eventData.Version=e.version,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.raiseEvent()},this["deal-slip-switch-tab"]=function(e){f.eventData.event="deal-slip-switch-tab",f.eventData.Referrer=e.referrer,f.eventData.Version=e.version,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.raiseEvent()},this["deal-slip-expand-limit"]=function(e){f.eventData.event="deal-slip-expand-limit",f.eventData.Referrer=e.referrer,f.eventData.Version=e.version,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.raiseEvent()},this["deal-slip-collapse-limit"]=function(e){f.eventData.event="deal-slip-collapse-limit",f.eventData.Referrer=e.referrer,f.eventData.Version=e.version,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.raiseEvent()},this["deal-slip-expand-tools"]=function(e){f.eventData.event="deal-slip-expand-tools",f.eventData.Referrer=e.referrer,f.eventData.Version=e.version,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.raiseEvent()},this["deal-slip-collapse-tools"]=function(e){f.eventData.event="deal-slip-collapse-tools",f.eventData.Referrer=e.referrer,f.eventData.Version=e.version,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.raiseEvent()},this["new-limit-view"]=function(e){f.eventData.event="new-limit-view",f.eventData.Version=e.version,f.eventData.Instrument=e.instrument,f.eventData.Referrer=e.referrer,f.eventData.DisplayMode=e.displayMode,f.eventData.InstrumentStatus=e.instrumentStatus,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["new-limit-submit"]=function(e){f.eventData.event="new-limit-submit",f.eventData.Version=e.version,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["limit-slip-interaction"]=function(e){f.eventData.event="limit-slip-interaction",f.eventData.Version=e.version,f.eventData.Element=e.element,f.eventData.Referrer=e.referrer,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SearchResult=e.SearchResult,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["witdrawal-view"]=function(){f.eventData.event="withdrawal-view",f.raiseEvent()},this["withdrawal-interaction"]=function(){f.eventData.event="withdrawal-interaction",f.raiseEvent()},this["withdrawal-submit"]=function(){f.eventData.event="withdrawal-submit",f.raiseEvent()},this["withdrawal-cancel"]=function(){f.eventData.event="withdrawal-cancel",f.raiseEvent()},this["withdrawal-print"]=function(){f.eventData.event="withdrawal-print",f.raiseEvent()},this["deposit-view"]=function(){f.eventData.event="deposit-view",f.raiseEvent()},this["deposit-interaction"]=function(){f.eventData.event="deposit-interaction",f.raiseEvent()},this["agreement-view"]=function(){f.eventData.event="agreement-view",f.raiseEvent()},this["agreement-first-interaction"]=function(){f.eventData.event="agreement-first-interaction",f.raiseEvent()},this["agreement-submit"]=function(){f.eventData.event="agreement-submit",f.raiseEvent()},this["agreement-success"]=function(){f.eventData.event="agreement-success",f.raiseEvent()},this["registration-success"]=function(){f.eventData.event="registration-success",f.eventData.Referrer=removeParametersFromReferrerUrl(document.referrer),f.raiseEvent()},this["login-success"]=function(e){f.eventData.event="login-success",f.eventData.Referrer=removeParametersFromReferrerUrl(document.referrer),f.eventData.IsAutologin=!isEmptyType(e)&&!0===JSON.parse(e),f.raiseEvent()},this["forgot-password-success"]=function(){f.eventData.event="forgot-password-success",f.raiseEvent()},this["withdrawal-success"]=function(){f.eventData.event="withdrawal-success",f.raiseEvent()},this.View=function(){var e=window.tradingEventsHandler.data.viewId;f.eventData.event="View",f.eventData.ViewId=e,f.eventData.RefferingView=window.tradingEventsHandler.getRefferingView(),f.eventData.ActionSource=window.tradingEventsHandler.data.actionSource,window.tradingEventsHandler.data.actionSource="Other",window.tradingEventsHandler.updateRefferingView(e),f.raiseEvent()},this["instrument-advanced"]=function(){f.eventData.event="instrument-advanced",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["instrument-simple"]=function(){f.eventData.event="instrument-simple",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["information-maximize"]=function(){f.eventData.event="information-maximize",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["information-minimize"]=function(){f.eventData.event="information-minimize",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["account-summary-advanced"]=function(){f.eventData.event="account-summary-advanced",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["account-summary-simple"]=function(){f.eventData.event="account-summary-simple",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["summary-available-margin"]=function(){f.eventData.event="account-summary-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Element="available margin",f.raiseEvent()},this["summary-pending-withdrawals"]=function(){f.eventData.event="account-summary-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Element="pending withdrawals",f.raiseEvent()},this["summary-used-margin"]=function(){f.eventData.event="account-summary-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Element="used margin",f.raiseEvent()},this["summary-margin-utilization"]=function(){f.eventData.event="account-summary-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Element="margin utilization",f.raiseEvent()},this["cashback-from-wallet"]=function(){f.eventData.event="account-summary-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Element="cash back",f.raiseEvent()},this["cashback-extra-info"]=function(){f.eventData.event="cash-back-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Element="cash back extra-info",f.raiseEvent()},this["net-exposure-one-currency"]=function(){f.eventData.event="net-exposure-one-currency",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Currency=$customer.prop.selectedCcyName(),f.eventData.Element="pending bonus",f.raiseEvent()},this["net-exposure-original-currency"]=function(){f.eventData.event="net-exposure-original-currency",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["deal-slip-success"]=function(e){f.eventData.event="deal-slip-success",f.eventData.Version=e.version,f.eventData.Referrer=e.referrer,f.eventData.DisplayMode=e.displayMode,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.EnableSLLimit=e.enableSLLimit,f.eventData.EnableTPLimit=e.enableTPLimit,f.eventData.Instrument=e.instrument,f.eventData.Type=e.type,f.eventData.DealSize=e.dealSize,f.eventData.StopLossType=e.stopLossType,f.eventData.TakeProfitType=e.takeProfitType,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["new-limit-success"]=function(e){f.eventData.event="new-limit-success",f.eventData.Version=e.version,f.eventData.Instrument=e.instrument,f.eventData.Type=e.type,f.eventData.DealSize=e.dealSize,f.eventData.AdvancedView=e.advancedView,f.eventData.ExpirationType=e.expirationType,f.eventData.StopLossType=e.stopLossType,f.eventData.TakeProfitType=e.takeProfitType,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["change-currency"]=function(){f.eventData.event="change-currency",f.eventData.Currency=$customer.prop.selectedCcyName(),f.raiseEvent()},this["change-language"]=function(){f.eventData.event="change-language",f.eventData.Language=CookieHandler.ReadCookie("Language"),f.raiseEvent()},this["sign-out"]=function(){f.eventData.event="sign-out",f.raiseEvent()},this["cancel-limit"]=function(){f.eventData.event="cancel-limit",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["update-limit"]=function(){f.eventData.event="update-limit",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["close-deal-selected"]=function(){f.eventData.event="close-deal-success",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Method="selected",f.raiseEvent()},this["close-deal"]=function(){f.eventData.event="close-deal-success",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.Method="deal",f.raiseEvent()},this["switch-tab"]=function(e){f.eventData.event="switch-tab",f.eventData.CurrentView=e.viewId,f.eventData.TabName=e.presetName,e.hasOwnProperty("hierarchy")&&(f.eventData.Hierarchy=e.hierarchy),f.raiseEvent()},this["deal-slip-error"]=function(e){f.eventData.event="deal-slip-error",f.eventData.Version=e.version,f.eventData.Referrer=e.referrer,f.eventData.TabName=e.TabName,f.eventData.Limit=e.Limit,f.eventData.Tools=e.Tools,f.eventData.Type=e.type,f.eventData.Reason=e.reason,f.eventData.NewDeal=eNewDealValue.Popup,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["new-limit-error"]=function(e){f.eventData.event="new-limit-error",f.eventData.Version=e.version,f.eventData.Type=e.type,f.eventData.Reason=e.reason,f.eventData.ElapsedTime=e.ElapsedTime,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()},this["deposit-submit"]=function(){f.eventData.event="deposit-submit",f.eventData.DepositType=window.tradingEventsHandler.data.depositType,f.raiseEvent()},this["deposit-success"]=function(){f.eventData.event="deposit-success",f.eventData.DepositType=window.tradingEventsHandler.data.depositType,f.raiseEvent()},this["deposit-error"]=function(e){f.eventData.event="deposit-error",f.eventData.Type=e.type,f.eventData.DepositType=window.tradingEventsHandler.data.depositType,e.hasOwnProperty("errorMessage")&&(f.eventData.ErrorMessage=encodeURI(e.errorMessage)),e.hasOwnProperty("errorMessageKey")&&(f.eventData.ErrorMessageKey=encodeURI(e.errorMessageKey)),f.raiseEvent()},this["withdrawal-error"]=function(e){f.eventData.event="withdrawal-error",f.eventData.Reason=e.reason,f.raiseEvent()},this["message-view"]=function(e){f.eventData.event="message-view",f.eventData.Text=e.text,f.eventData.Type=e.type,f.raiseEvent()},this["sb-view-offer-clicked"]=function(e){f.eventData.event="sb-view-offer-clicked",f.eventData.Text=e.text,f.eventData.Type=e.type,f.raiseEvent()},this["sb-deposit-clicked"]=function(e){f.eventData.event="sb-deposit-clicked",f.eventData.Text=e.text,f.raiseEvent()},this["reward-cta-clicked"]=function(e){f.eventData.event="reward-cta-clicked",f.raiseEvent()},this["instrument-show-more"]=function(e){f.eventData.event="instrument-show-more",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.TabName=e.TabName,f.eventData.Hierarchy=e.tabHierarchy,f.raiseEvent()},this["instrument-show-less"]=function(e){f.eventData.event="instrument-show-less",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,f.eventData.TabName=e.TabName,f.eventData.Hierarchy=e.tabHierarchy,f.raiseEvent()},this["show-sunday-banner-main"]=function(e){f.eventData.event="show-sunday-banner-main",f.eventData.Element=e.Element,f.raiseEvent()},this["click-sunday-banner-button-main"]=function(e){f.eventData.event="click-sunday-banner-button-main",f.eventData.Element=e.Element,f.raiseEvent()},this.search=function(e){f.eventData.event="search",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,$.extend(f.eventData,e),f.raiseEvent()},this["search-interaction"]=function(e){f.eventData.event="search-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,$.extend(f.eventData,e),f.raiseEvent()},this["deal-slip-search"]=function(e){f.eventData.event="deal-slip-search",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,$.extend(f.eventData,e),f.raiseEvent()},this["deal-slip-search-interaction"]=function(e){f.eventData.event="deal-slip-search-interaction",f.eventData.CurrentView=window.tradingEventsHandler.data.viewId,$.extend(f.eventData,e),f.raiseEvent()},this["tutorial-events"]=function(e){$.extend(f.eventData,e),f.eventData.ViewID=window.tradingEventsHandler.data.viewId,f.raiseEvent()},this["signals-menu-click"]=function(){f.eventData.event="signals-menu-click",f.raiseEvent()},this["signals-drill-down"]=function(e){$.extend(f.eventData,e),f.eventData.event="signals-drill-down",f.raiseEvent()},this["signals-view-more"]=function(e){$.extend(f.eventData,e),f.eventData.event="signals-view-more",f.raiseEvent()},this["signals-detail-new-deal"]=function(e){$.extend(f.eventData,e),f.eventData.event="signals-detail-new-deal",f.raiseEvent()},this["short-term-signal-chart"]=function(e){$.extend(f.eventData,e),f.eventData.event="short-term-signal-chart",f.raiseEvent()},this["economic-calendar-menu-click"]=function(){f.eventData.event="economic-calendar-menu-click",f.raiseEvent()},this["questionnaire-navigation"]=function(e){$.extend(f.eventData,e),f.eventData.event="questionnaire-navigation",f.raiseEvent()},this["questionnaire-question"]=function(e){$.extend(f.eventData,e),f.eventData.event="questionnaire-question",f.raiseEvent()},this["questionnaire-start"]=function(e){$.extend(f.eventData,e),f.eventData.event="questionnaire-start",f.raiseEvent()},this["questionnaire-quiz-start"]=function(e){$.extend(f.eventData,e),f.eventData.event="questionnaire-quiz-start",f.raiseEvent()},this["questionnaire-faq"]=function(e){$.extend(f.eventData,e),f.eventData.event="questionnaire-faq",f.raiseEvent()},this["deposit-faq"]=function(e){$.extend(f.eventData,e),f.eventData.event="deposit-faq",f.raiseEvent()},this["upload-documents-faq"]=function(e){$.extend(f.eventData,e),f.eventData.event="upload-documents-faq",f.raiseEvent()},this["support-interaction"]=function(e){$.extend(f.eventData,e),f.eventData.event="support-interaction",f.raiseEvent()},this["deal-slip-chart-interaction"]=function(e){$.extend(f.eventData,e),f.eventData.event="deal-slip-chart-interaction",f.raiseEvent()},this["chart-interaction"]=function(e){$.extend(f.eventData,e),f.eventData.event="chart-interaction",f.raiseEvent()},this["favorite-instruments-add"]=function(e){$.extend(f.eventData,e),f.eventData.event="favorite-instruments-add",f.raiseEvent()},this["favorite-instruments-remove"]=function(e){$.extend(f.eventData,e),f.eventData.event="favorite-instruments-remove",f.raiseEvent()},this["favorite-instruments-reorder"]=function(e){$.extend(f.eventData,e),f.eventData.event="favorite-instruments-reorder",f.raiseEvent()},this["view-sentiments"]=function(e){$.extend(f.eventData,e),f.eventData.event="view-sentiments",f.raiseEvent()},this["closed-deals-events"]=function(e){$.extend(f.eventData,e.data),f.eventData.event=e.event+"-closed-deals",f.raiseEvent()},this["notifications-settings-change"]=function(e){f.eventData.Element=e,f.eventData.event="notifications-settings-change",f.raiseEvent()},this["chart-performance"]=function(e){$.extend(f.eventData,e),f.eventData.chartInitDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.ChartInitComplete]-PerformanceDataCollector.Timestamps[eFxNetEvents.ChartInit],f.eventData.chartGetHistoryDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.ChartGetHistoryResponse]-PerformanceDataCollector.Timestamps[eFxNetEvents.ChartGetHistoryRequest],f.eventData.chartStartDuration=PerformanceDataCollector.Timestamps[eFxNetEvents.ChartStartComplete]-PerformanceDataCollector.Timestamps[eFxNetEvents.ChartStart],f.raiseEvent()},this["tools-chart"]=function(e){$.extend(f.eventData,e),f.eventData.event="tools-chart-"+f.eventData.event,f.raiseEvent()},this["start-callback-request-chat"]=function(e){$.extend(f.eventData,e),f.eventData.event="start-callback-request-chat",f.raiseEvent()},this["hub-menu-close"]=function(e){$.extend(f.eventData,e),f.eventData.event="hub-menu-close",f.raiseEvent()},this["hub-menu-open"]=function(e){$.extend(f.eventData,e),f.eventData.event="hub-menu-open",f.raiseEvent()},this["hub-map-expand"]=function(e){$.extend(f.eventData,e),f.eventData.event="hub-map-expand",f.raiseEvent()},this["hub-map-collapse"]=function(e){$.extend(f.eventData,e),f.eventData.event="hub-map-collapse",f.raiseEvent()},this["price-alerts-menu-view"]=function(e){$.extend(f.eventData,e),f.eventData.event="price-alerts-menu-view",f.raiseEvent()},this["price-alert-create"]=function(e){$.extend(f.eventData,e),f.eventData.event="price-alert-create",f.raiseEvent()},this["price-alert-error"]=function(e){$.extend(f.eventData,e),f.eventData.event="price-alert-error",f.raiseEvent()},this["deal-slip-change-highlow-term"]=function(e){f.eventData.Element=e,f.eventData.event="deal-slip-change-highlow-term",f.raiseEvent()};var n,r=this;n=eMarketInfoEvents,Object.keys(n).forEach(function(e){var t=n[e];r[t]=function(e){e&&$.extend(f.eventData,e),f.eventData.event=t,f.eventData.SlipExpandedInfoAreas=e.SlipExpandedInfoAreas,f.raiseEvent()}})}var TrackingData=function(r,i,o,t){var a={},e=function(){var e=t.get("countries");a.AccountNumber=r.prop.accountNumber,a.Broker=r.prop.brokerName,a.AccountType=r.prop.customerType===eCustomerType.TradingBonus?"Practice":"Real",a.SAProcess=r.prop.SAProcess,a.Serial=0===r.prop.serial?null:r.prop.serial,a.IsCFD=r.prop.futureStatus==eTradingPermissions.Blocked?"No":"Yes",a.IsShares=r.prop.shareStatus==eTradingPermissions.Blocked?"No":"Yes",a.Country=e[r.prop.countryID],a.GroupName=r.prop.abTestings.groupsNames,a.TestName=r.prop.abTestings.testsNames},n=function(){a.AML=c(),a.NewDeal=l(),a.DealSlipVersion=1==$customerProfileManager.GetUiVersion()?eTrackingDealVersion.NewDealSlip:eTrackingDealVersion.OldDealSlip,a.Currency=r.prop.selectedCcyName(),a.FolderType=A(o.States.FolderTypeId(),r.prop.isLive,r.prop.isPending);var e,t,n=(e=window.$portfolioManager.Portfolio,{availableMargin:(t=window.$csHolderManager.CSHolder).availableMargin,usedMargin:t.usedMargin,pendingWithdrawals:e.pendingWithdrawals,pendingBonus:e.pendingBonus,tradingBonus:e.tradingBonus});a.AvailableMargin=n.availableMargin,a.UsedMargin=n.usedMargin,a.PendingWithdrawal=n.pendingWithdrawals,a.PendingBonus=n.pendingBonus,a.TradingBonus=n.tradingBonus,a.OpenAccountSummary=i.VmAccountMarket.IsCollapsed()?"No":"Yes"},s=function(e){var t=JSONHelper.STR2JSON("TUserTracking.dataLoadCompleteFromScmm",e.Response);$.extend(a,t[0]),ko.postbox.publish("scmm-data-loaded")},l=function(){return i.VManager.ActiveFormType()!=r.prop.mainPage||o.States.IsPortfolioInactive()?u()?eNewDealValue.Popup:eNewDealValue.None:eNewDealValue.Inline},u=function(){},c=function(){var e=o.States.AmlStatus();for(var t in eAMLStatus)if(eAMLStatus.hasOwnProperty(t)&&eAMLStatus[t]==e)return t.toString();return e},A=function(e,t,n){switch(e){case 0:return"None";case 1:return"Other";case 2:return t?"Live":n?"Pending":"Other";case 3:return"Other";case 4:return"Nostro";case 5:return"PTA";case 6:return"DebitFraud";case 9:return"DemoGame"}return"Other"};return{init:function(){a=TrackingCommonData(FxNet.SessionStorage),e()},getProperties:function(){return n(),a},incrementDealsNumber:function(){a.hasOwnProperty("NumberOfDeals")?a.NumberOfDeals=Number(a.NumberOfDeals)+1:a.NumberOfDeals=0},incrementDepositsNumber:function(){a.hasOwnProperty("NumberOfDeposits")?a.NumberOfDeposits=Number(a.NumberOfDeposits)+1:a.NumberOfDeposits=0},updateActualDealType:function(){"None"===a.ActualDealType?a.ActualDealType="CFD":"BO"===a.ActualDealType&&(a.ActualDealType="Both")},updateScmmData:function(e){InitIMInitialDataManager(e,r.prop.interactiveMessagesUrl,s)},getErrorTrackingData:function(){return{Domain:window.location.host,Broker:a.Broker,Language:CookieHandler.ReadCookie("Language"),Country:a.Country,AmlStatus:a.AML,Browser:a.Browser,OperatingSystem:a.OS,DealSpilVersion:a.DealSlipVersion,ResolutionScreen:a.ResolutionScreen,OsVersion:a.OSVersion,BrowserVersion:a.BrowserVersion,Device:a.Device,TrackingSessionId:a.TrackingSessionId}},updateAccountStatus:function(t){a.AccountStatus=Object.keys(eUserStatus).find(function(e){return eUserStatus[e]===t})}}};!function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/datalayer",[],t):e.dataLayer=t(e)}("undefined"!=typeof self?self:this,function(e){(e=e||window).dataLayer=e.dataLayer||[];var t,n=e.dataLayer,r=350;function i(){if(!(r>n.length||function(){if("boolean"!=typeof t)for(var e=0;e<n.length;e++)if(n[e]&&0===(n[e].event||"").indexOf("gtm.")){t=!0;break}return t=t||!1}()))for(;r<n.length;)n.shift()}function o(){var t=[].slice.call(arguments,0),e=n.originalPush.apply(n,t);return n.subscribers.forEach(function(e){try{e.apply(this,t)}catch(e){}}),i(),"boolean"!=typeof e||e}return n.init=function(){n.originalPush=n.push,n.push=o,n.subscribers=[],n.subscribers.originalPush=n.subscribers.push,n.subscribers.push=function(e){if(n.subscribers.indexOf(e)<0){var t=[].slice.call(arguments,0);n.subscribers.originalPush.apply(n.subscribers,t)}}},n}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/gglanalitycsconfigs",[],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.gglAnalitycsConfigs=t())}("undefined"!=typeof self?self:this,function(){var t={"account-type-view":"Registration","registration-view":"Registration","demo-click":"Registration","real-click":"Registration","registration-interaction":"Registration","registration-submit":"Registration","registration-error":"Registration","registration-success":"Registration","login-view":"Login","login-success":"Login","login-interaction":"Login","login-error":"Login","login-submit":"Login","deal-slip-view":"Deal","deal-slip-interaction":"Deal","deal-slip-submit":"Deal","deal-slip-success":"Deal","deal-slip-error":"Deal"},n={1:"Main",2:"Open Deals",3:"Limits",4:"Closed Deals",5:"Account Statement",15:"Trading Signals",12:"View and Print Withdrawal",51:"Change Password",28:"Upload Documents",30:"Trading Signals"};return{GetSection:function(e){return t[e]||"None"},GetName:function(e){return n[e]||e}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/gglanalyticslogger",["tracking/loggers/datalayer","tracking/loggers/pagenocaptcha","tracking/loggers/pagewithcaptcha"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.gglAnalyticsLogger=t(e.dataLayer,e.fxTracking.pageNoCaptcha,e.fxTracking.pageWithCaptcha))}("undefined"!=typeof self?self:this,function(e,t,n){function r(e){if(e&&"load-google-analytics"===e.event){!function(){(window.GoogleAnalyticsObject="ga")in window||(window.ga=function(){window.ga.q.push(arguments)},window.ga.q=[]),window.ga.l=(new Date).getTime();var e=document.createElement("script");e.src="//www.google-analytics.com/analytics.js",e.async=!0;var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var t=e.gaclientid||"",n=e.gauserid||"",r=window.localStorage.getItem("sauser");if(""!=t?window.ga("create","UA-20661807-41",{clientId:t}):""!=n?window.ga("create","UA-20661807-41","auto",{userId:n}):r?window.ga("create","UA-20661807-41","auto"):window.ga("create","UA-20661807-28","auto"),void 0!==window.__gaq&&window.__gaq.q)for(var i=0;i<window.__gaq.q.length;i++)window.ga.apply(window,window.__gaq.q[i]);window.__gaq=function(){window.ga.apply(window,arguments)};try{var o=trackingData.getProperties();if(o.AccountNumber){window._gadimensions={2:"AccountNumber",3:"ActualDealType",4:"Broker",5:"DepositCategory",6:"FirstDealDate",7:"FolderType",8:"NumberOfDeals",9:"NumberOfDeposits",10:"Serial",11:"VolumeCategory"};var a={};for(var s in window._gadimensions)"string"==typeof window._gadimensions[s]&&o[window._gadimensions[s]]&&(a["dimension"+s]=o[window._gadimensions[s]],delete window._gadimensions[s]);window.ga("set",a)}}catch(e){}window.ga("send","pageview")}}return{init:function(){e.subscribers.push(r),null!==window.location.href.match(/\/Parse/i)?n.init():t.init()}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/fxeventslogger",["tracking/loggers/datalayer","tracking/loggers/gglanalitycsconfigs"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.fxEventsLogger=t(e.dataLayer,e.fxTracking.gglAnalitycsConfigs))}("undefined"!=typeof self?self:this,function(D,B){var T,I=["fb-ready","create-helpwidget","load-google-analytics","trackingdata-loaded","interaction","hotjar-init","self-activation-user"],F=[2,3,4,6,9,15,17,18,19,20,21],x=["deal-slip-interaction","account-summary-interaction","new-limit-view"];function t(e){var t=e.event;if(!(t.match(/^[gtm|_]/gi)||"interaction"===t&&!0===e.artificial)){var n=e.ViewId,r=B.GetSection(t),i=e.action,o=e.category,a=0<=F.indexOf(n),s=0<=x.indexOf(t),l=0<=I.indexOf(t);window.__gaq=window.__gaq||function(){window.__gaq.q=window.__gaq.q||[],window.__gaq.q.push(arguments)};try{var u=function(e){for(var t=D.length;t--;)if(D[t].event&&D[t].event==e){var n={};for(var r in D[t])"event"!=r&&(n[r]=D[t][r]);return n}return{}}(t);u.TrackingSessionId?window.sessionStorage.setItem("TrackingSessionId",u.TrackingSessionId):u.TrackingSessionId=window.sessionStorage.getItem("TrackingSessionId"),u.SAProcess?window.sessionStorage.setItem("SAProcess",u.SAProcess):u.SAProcess=window.sessionStorage.getItem("SAProcess");var c=t;if(!c||"string"!=typeof c||""==c.replace(/ /g,""))return void D.push({event:"unknown"});var A=trackingData.getProperties().AccountNumber;A&&(u.AccountNumber=A);try{if(window._gadimensions){var d=trackingData.getProperties(),p={};for(var f in window._gadimensions)"string"==typeof window._gadimensions[f]&&d[window._gadimensions[f]]&&(p["dimension"+f]=d[window._gadimensions[f]],delete window._gadimensions[f]);if(void 0!==window.hj)try{p.dimension14=window.hj.pageVisit.property.get("userId")}catch(e){}window.__gaq("set",p)}}catch(e){}if("registration-interaction"==t&&document.location.href.match(/\/Confirm/)){var h=document.getElementsByName("UserWithExperience");if(0<h.length)for(var m=0;m<h.length;m++)if(h[m].checked){window.sessionStorage.setItem("hasExperience",h[m].value);break}}else if(trackingData.getProperties().SAProcess){var g=window.sessionStorage.getItem("hasExperience");if(window.sessionStorage.removeItem("hasExperience"),g){window.__gaq("set","dimension12",g),window.__gaq("send","pageview","/virtual-pages/vp_experience_"+("True"==g?"true":"false"));try{window.hj=window.hj||function(){(window.hj.q=window.hj.q||[]).push(arguments)},window.hj("tagRecording",["vp_experience_"+("True"==g?"true":"false")])}catch(e){}}}if("View"==t){var v=B.GetName(n);window.__gaq("set",{page:"/view/"+n+"/"+v,title:v}),window.__gaq("send","pageview"),u.ItemName=v}else if("None"!=r){var y="demo-click"===t?"Practice":"real-click"===t?"Real":"";if("Help"==r&&"Click"==i){var w=w,b=b;(w||b)&&(y+=(w||"")+" "+(b||""))}window.__gaq("send","event",r,i,y)}var C=function(e,t,n,r,i){if("Help"==e&&"Show"==t)return"vp_help-widget-start";if("questionnaire-navigation"==n)switch(r){case"Cdd part 1":return"vp_cdd-page-1";case"Cdd part 2":return"vp_cdd-page-2";case"Kyc":return"vp_cdd-submit"}return"View"!=n||10!=i&&27!=i?!n.match(/^agreement/)||6!=i&&15!=i?n.match(/^deposit/)?"vp_"+n:null:"vp_missing-information"+n.replace(/^agreement/,""):"vp_cdd-start"}(r,i,t,o,n);if(C&&(window.__gaq("send","pageview","/virtual_pages/"+C),void 0!==window.hj&&window.hj("tagRecording",[C])),!l){var S=[];for(var E in u)S.push(E+"="+u[E]);(new Image).src=T+"?name="+c+"&"+S.join("&")+"&random="+Math.random()}"interaction"!=t&&("View"==t&&a||s)&&D.push({event:"interaction",artificial:!0})}catch(e){}}}return{init:function(e){T=e,D.subscribers.push(t)}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/fbeventslogger",["tracking/loggers/datalayer"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.fbEventsLogger=t(e.dataLayer))}("undefined"!=typeof self?self:this,function(s){function t(e,t,n,r,i,o,a){e.fbq||(i=e.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},e._fbq||(e._fbq=i),(i.push=i).loaded=!0,i.version="2.0",i.queue=[],(o=t.createElement(n)).async=!0,o.src=r,(a=t.getElementsByTagName(n)[0]).parentNode.insertBefore(o,a),e.fbq("init","871141973245420"),e.fbq("track","PageView"),s.push({event:"fb-ready"})),window.fbq&&window.fbq("track","ViewContent",{value:trackingData.getProperties().NumberOfDeposits})}function e(e){e&&e.event&&e.event&&"login-success"==e.event.toLowerCase()&&t(window,document,"script","//connect.facebook.net/en_US/fbevents.js")}return{init:function(){s.indexOf(function(e){return e.event&&e.event&&"login-success"===e.event.toLowerCase()})<0?s.subscribers.push(e):t(window,document,"script","//connect.facebook.net/en_US/fbevents.js")}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/hotjareventslogger",["tracking/loggers/datalayer"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.hotJarEventsLogger=t(e.dataLayer))}("undefined"!=typeof self?self:this,function(e){var i=0;function o(){var e,t,n,r;if(!(40<(i+=1)))if("undefined"==typeof trackingData||void 0===trackingData.getProperties)window.setTimeout(o,250);else try{e=window,t=document,e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:567267,hjsv:5},n=t.getElementsByTagName("head")[0],(r=t.createElement("script")).async=1,r.src="//static.hotjar.com/c/hotjar-"+e._hjSettings.hjid+".js?sv="+e._hjSettings.hjsv,n.appendChild(r),window.hj=window.hj||function(){(window.hj.q=window.hj.q||[]).push(arguments)},window.hj("trigger","sauser_to_record")}catch(e){}}function t(e){e&&"hotjar-init"===e.event&&o()}return{init:function(){e.subscribers.push(t)}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/pagenocaptcha",["tracking/loggers/datalayer","tracking/loggers/gglanalyticslogger"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.pageNoCaptcha=t(e.dataLayer))}("undefined"!=typeof self?self:this,function(r){return{init:function(){var t=0,n=function(){if(!(40<(t+=1)))if("undefined"==typeof trackingData||void 0===trackingData.getProperties||void 0===trackingData.getProperties().AccountNumber)window.setTimeout(n,250);else{var e;e=trackingData.getProperties().SAProcess?{event:"load-google-analytics",gauserid:trackingData.getProperties().AccountNumber,gaclientid:""}:{event:"load-google-analytics",gauserid:"",gaclientid:""},r.push(e)}};if(null===window.location.href.match(/\/Parse/i))if(document.location.href.match(/\/login/i)){document.location.search.match(/sauser=true/)&&window.localStorage.setItem("sauser",!0);var e={event:"load-google-analytics",gauserid:"",gaclientid:window.localStorage.getItem("gaclientid")||""};r.push(e)}else n()}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/pagewithcaptcha",["tracking/loggers/datalayer","tracking/loggers/gglanalyticslogger"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.pageWithCaptcha=t(e.dataLayer))}("undefined"!=typeof self?self:this,function(i){return{init:function(){var n=0,r=function(){if(!(40<(n+=1)))if("undefined"==typeof trackingData||void 0===trackingData.getProperties||void 0===trackingData.getProperties().Meta)window.setTimeout(r,250);else{var e=trackingData.getProperties().Meta;e.gaclientid&&window.localStorage.setItem("gaclientid",e.gaclientid);var t={event:"load-google-analytics",gauserid:"",gaclientid:e.gaclientid||""};i.push(t)}};null!==window.location.href.match(/\/Parse/i)&&r()}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/snapengagechat",["tracking/loggers/datalayer","LoadDictionaryContent!SnapEngageConfig"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.snapEngageChat=t(e.dataLayer,e.fxTracking.trackingConfig.snapengageconfig))}("undefined"!=typeof self?self:this,function(e,t){function r(){return(document.location.search.match(/sauser=true/)||trackingData.getProperties().SAProcess||window.localStorage.getItem("sauser"))&&t.snapengagewidgetid_sauser?t.snapengagewidgetid_sauser:t.snapengagewidgetid}function i(){return t.callbackwidgetid}function n(e){if(e&&e.event&&!(["start-chat","start-callback-request-chat","start-proactive-chat"].indexOf(e.event)<0)&&"undefined"!=typeof SnapEngage){var t=trackingData.getProperties().IPCountry;switch(e.event){case"start-chat":t.match(/(Poland|Italy|France|Spain|Greece|Holland|Germany)/i)?SnapEngage.setWidgetId(i()):SnapEngage.setWidgetId(r()),SnapEngage.startLink();break;case"start-callback-request-chat":try{SnapEngage.setWidgetId(i()),SnapEngage.startLink()}catch(e){}break;case"start-proactive-chat":var n=e.snapengage_message;SnapEngage.openProactiveChat(!0,!1,n)}}}var o=0;function a(){40<(o+=1)||("undefined"==typeof trackingData||void 0===trackingData.getProperties?window.setTimeout(a,250):(!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//storage.googleapis.com/code.snapengage.com/js/"+r()+".js";var t=!1;e.onload=e.onreadystatechange=function(){if(!(t||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)){t=!0;var e=trackingData.getProperties().AccountNumber;e&&(SnapEngage.setUserName(trackingData.getProperties().AccountNumber),SnapEngage.setUserEmail(e+"@trader.com"))}};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}(),e.subscribers.push(n)))}return{init:function(){window.SnapEngage||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a())}}}),function(e,t){"function"==typeof define&&define.amd?define("tracking/loggers/fxtracking.lib",["tracking/loggers/datalayer","GoogleTagManager","tracking/loggers/fxeventslogger","tracking/loggers/fbeventslogger","tracking/loggers/hotjareventslogger","tracking/loggers/snapengagechat","tracking/loggers/gglanalyticslogger"],t):(e.fxTracking=e.fxTracking||{},e.fxTracking.init=t(e.dataLayer,e.googleTagManager,e.fxTracking.fxEventsLogger,e.fxTracking.fbEventsLogger,e.fxTracking.hotJarEventsLogger,e.fxTracking.snapEngageChat,e.fxTracking.gglAnalyticsLogger).init)}("undefined"!=typeof self?self:this,function(l,u,c,A,d,p,f){return{init:function(e,t,n){var r={},i={"disable-gtm":"disableGTM","disable-gtm-fxtracking":"disableGTMFXTracking","disable-gtm-gglanalytics":"disableGTMGoogleAnalytics","disable-gtm-fbevents":"disableGTMFacebookEvents","disable-gtm-hotjar":"disableGTMHotjar","disable-gtm-snapchat":"disableGTMSnapChat"};for(var o in i)!0===t[o]&&(r[i[o]]=!0);window.gtmConfiguration={},0<Object.keys(r).length&&(window.gtmConfiguration=r),l.init(),"#"==e||r.disableGTM||u.Init(e),a=r,s=n,a.disableGTMGoogleAnalytics&&f.init(),a.disableGTMFXTracking&&c.init(s),a.disableGTMFacebookEvents&&A.init(),a.disableGTMHotjar&&d.init(),a.disableGTMSnapChat&&p.init();var a,s}}});var cConfig={MaxConnectionFailure:50,AmountRoundingThreshold:10},cTileLayout={FourTilesContainerMinWidth:1024},cKeyCode={CtrlEnter:10,Enter:13},cTextMarks={Ltr:"â",ZeroWidthNoBreakSpace:"\ufeff"},cEmptyRate=".....",cArabicChars=/[\u0590-\u05FF\u0600-\u06FF\u0750-\u077F\uFB50-\uFC3F\uFE70-\uFEFC]/,eResult={Error:0,Success:1},eRequestMode={Initial:0,Correct:1,Failed:2},eOrderResult={OK:0,Error:1},eQuoteStates={NotChanged:0,Enabled:1,NotActive:2,Up:3,Down:4},eMessages={InvalidLimitRate:1,LimitRateIsEmpty:2,TPRateNotInRange:3,SLRateNotInRange:4,InvalidTPRate:5,InvalidSLRate:6,InvalidDate:7},eOrderDir={Sell:0,Buy:1,None:2},eStartSpinFrom={Below:0,Above:1,None:2},eDateFilter={Yesterday:0,Today:1,Tomorrow:2,ThisWeek:3,NextWeek:4},eImportanceFilter={Low:1,Medium:2,Hight:3},eCountryFilter={AU:0,CA:1,CN:2,DE:3,EU:4,FR:5,IT:6,JP:7,NZ:8,CH:9,UK:10,US:11},eNewDealTool={None:0,Chart:1,MarketLiveInfo:2,EconomicCalendar:3,Signals:4,InstrumentInfo:5},eNewDealValue={Inline:"Inline",Popup:"Popup",None:"None"},eDealPage={NewDeal:"NewDeal",NewLimitViewModel:"NewLimitViewModel",CloseDeal:"CloseDeal",EditClosingLimit:"EditClosingLimit",EditLimitViewModel:"EditLimitViewModel",EditIfDoneLimit:"EditIfDoneLimit"},eTrackingDealVersion={NewDealSlip:"2016",OldDealSlip:""},eLimitType={None:0,StopLoss:1,TakeProfit:2},eLimitMode={None:0,OpenDeal:1,CloseDeal:2,Add:3,PriceAlert:4},eLimitValidationMode={All:0,Single:1,Amount:2,Rate:3,Percent:4},eHistoryLimitRequest={All:0,Deleted:1,Edited:2,Expired:3,EitherOr:4,PositionClosed:5,Executed:6,EquityAlert:7,ExposureAlert:8,PositionMissing:9,CloseAllDeals:10},eStatus={New:0,Edited:1,Removed:2,Cancelled:3},eMarketState={Open:1,Close:2},eDealPLState={None:0,Up:1,Down:2},eMessageBoxIcon={Info:0,Error:1,Warning:2,Question:3},eAMLStatus={NotRequired:0,Unverified:1,Denied:2,Approved:3,Pending:4,Restricted:5},eKYCStatus={NotRequired:0,NotComplete:1,GaveUp:2,Complete:3,Passed:4,Failed:5,FailedAware:6},eCDDStatus={NotRequired:1,NotComplete:2,Complete:3},eKYCReviewStatus={NotReviewed:0,Appropriate:1,Rejected:2,Experienced:3,Eligible:4,Review:5,Tested:6,Inappropriate:7,Unsuitable:8},eLocalStorageKeys={QuestionsAnswersCDDKYC:"QuestionsAnswersCDDKYC"},ePEPStatus={NotRequired:1,Required:2,No:3,Statement2a:4,Statement2b:5,Statement2c:6,Statement2d:7,Statement2e:8,Statement2f:9,Statement3:10,Statement4a:11,Statement4b:12},eSmartBannerStatus={Invisible:0,Visible:1},eSmartBannerPosition={Wide:"smartBannerWide",Small:"smartBannerSmall",None:"None"},eAccountType={Pending:0,Active:1},eDialogType={Order:0,Other:1},eDealPermit={None:0,Islamic:3,SpotOnly:4,ZeroSpread:17},eDealType={Spot:2,Islamic:6,Future:7,Share:8},eRowAlternatingStyle={EveryRow:1,EveryTwoRows:2},eRateFormatStyle={SevenDigit:1,EightDigit:2,NineDigit:3},exTypes={html:0,array:1},eBrowserType={chrome:0,safari:1,opera:2,ie:3,firefox:4},eDataStatus={partial:0,full:1},eFlagState={Initial:-1,NotActive:0,Active:1},eViewMode={simple:0,advance:1},eErrorSeverity={warning:0,low:1,medium:2,high:3,critical:4},eCustomerType={Standard:1,TradingBonus:39},eFolderType={TradingBonus:"10"},eFolder={IntDebit:39},eUserRole={customer:"FXnet_Customers",QA:"FXnet_QA"},eRegulationStatus={customer:"FXnet_Customers",QA:"FXnet_QA"},eOrderAction={NewLimit:"NewLimit",EditLimit:"EditLimit",DeleteLimit:"DeleteLimit",NewDeal:"NewDeal",CloseDeal:"CloseDeal",SaveLimits:"SaveLimits",PendingBonus:"PendingBonus",GetOvernightFinancing:"GetOvernightFinancing",CashBack:"CashBackGetVolumes",NewPriceAlert:"NewPriceAlert"},eOrderActionType={None:0,NewLimit:1,EditLimit:2,DeleteLimit:3,NewDeal:4,CloseDeal:5,PendingBonus:6,NewPriceAlert:7,GetOvernightFinancing:8,CashBack:9,DeletePriceAlert:10},eTradingAgreement={Needed:0,NotNeeded:1},eKeepAliveError={None:0,HttpContextRequired:1,SessionMissingOrDuplicate:2},eTradingPermissions={Allowed:3,Required:2,Blocked:1},eNotificationType={InstrumentEdited:31,AmountGroupEdited:25,MinDealGroupEdited:46},eScreenId={CreditCard:1,RegularWireTransfer:2,RealTimeWireTransfer:3,MoneyBooker:4,Cachu:6},eDepositingActionType={NA:0,Regular:1,ForceDeposit:2,Moneybookers:3,PayPal:5,GlobalCollectAPM:7,WireTransfer:20,SafechargePPP:31,EmpCashU:32,SafeChargeCashier:33,Epaylinks:34,Astropay:36,NetellerGO:37,PaySafeCard:38,InatecAPM:41,NoAPIClearer:42,EcoPayz:43,SofortDirect:44,Kluwp:45,RPN:46,AstropayCard:47,PayRetailers:48,RisingSunAPM:49,Jeton:50},eDepositCreditCardType={Unknown:0,AmericanExpress:1,Diners:2,Discover:3,Jcb:5,Laser:6,Mastercard:7,Maestro:8,Solo:9,Switch:10,Visa:13},ePaymentMethods={Regular:"pmCreditCard",ForceDeposit:"pmForceDeposit",Moneybookers:"pmMoneyBooker",CashU:"pmCashU",WireTransfer:"pmRegularWireTransfer"},eCountryPaymentsInfosResponse={Country:0,DepositingActionType:1},ePaymentsChallengeWindowSize={Fullscreen:"05"},eChangePasswordStatus={None:0,Success:1,OldPasswordDoesNotMatch:2,NewPasswordsDoNotMatch:3,InvalidNewPassword:4,PreviousPasswordRecurrence:5,UserLockedOut:7,UserNotFound:8},eClientParams={Interval:0,Device:1,MaxIdleTime:2,IdleTimer:3,TutorialUrlTemplate:4,JsErrorBlacklistRegex:5,ClientStateLatencyInterval:10},eUIOrderType={Default:0,Custom:1},eTileLayout={Single:1,Split:2,FourSplit:4},eChartInstanceType={newDealSlip:3,newDealMobile:4},eChartDirection={Same:1,Opposite:2},eChartPeriod={Ticks:0,OneMinute:1,FiveMinutes:2,FifteenMinutes:3,ThirtyMinutes:4,OneHour:5,SixHours:6,TwelveHours:7,OneDay:8,OneWeek:9,OneMonth:10,TenSeconds:11,TwoHours:12,FourHours:13},eChartTimeFramesIds={tick:"1T","1 Minute":"1M","5 Mintes":"5M","10 Minutes":"10M","15 Minutes":"15M","30 Minutes":"30M","1 Hour":"60M","2 Hours":"2H","4 Hours":"4H","5 Hours":"5H","6 Hours":"6H","7 Hours":"7H","8 Hours":"8H","9 Hours":"9H","10 Hours":"10H","12 Hours":"12H","14 Hours":"14H","1 Day":"1D","1 Week":"1W","1 Month":"1N","3 Months":"3N","6 Months":"6N","1 Year":"1Y"},eChartMode={Collapsed:"collapsed",Expanded:"expanded"},eChartRateType={Ask:0,Bid:1},eChartPriceLineType={CurrentRate:0,LimitLevel:1,StopLoss:2,TakeProfit:3,OpenRate:4},eChartCustomTemplates={mobile:"customMobileTemplate",web:"customtemplate"},eCandleHistoryProperites={date:0,open:1,high:2,low:3,close:4},eTickHistoryProperites={date:0,rate:1},eClientStateResult={NotFound:0,Success:1,Failed:2},eOperationStatus={None:0,Success:1,RequestFailed:2,InternalServerError:3,ValidationFailed:4,ExportValidationFailed:5},eViewState={Initial:0,Start:1,Stop:2,Save:3,Update:4,Refresh:5},eLimitsType={Active:"Active",Executed:"Executed",Deleted:"Deleted"},eCSFlagStates={NotActive:0,Active:1,MaintenanceMode:3},eFrameContentValidation={Available:0,NotAvailable:1,SecurityFailure:2},eRegistrationListName={QuotesTable:"QuotesTable",ContractQuotesTable:"ContractQuotesTable",InBetweenQuote:"InBetweenQuote",SingleQuote:"SingleQuote",TradingSignals:"TradingSignals",Search:"Search"},eInstrumentType={Mixed:0,Currencies:1,Commodities:2,Indices:3,Shares:4,ETF:8,Crypto:9,Stocks:10},eAssetType={Forex:1,Future:2,Share:3,Interest:4},ePresetType={PresetCustomized:0,PresetMostPopular:2,PresetMostPopularWithoutFutures:1,PresetMostPopularCurrencies:3,PresetUsdCurrencies:4,PresetEurCurrencies:5,PresetGbpCurrencies:6,PresetJpyCurrencies:7,PresetOtherCurrencies:8,PresetCommodities:9,PresetCommoditiesWithoutFutures:10,IndiciesMostPopular_NoShares:11,PresetShares:12,PresetSharesUS:13,PresetSharesGermany:15,PresetSharesSpain:16,PresetSharesItaly:17,PresetSharesUK:20,PresetSharesFrance:21,PresetSharesJapan:22,PresetSharesRussia:23,PresetCommoditiesAgricultural:24,PresetCommoditiesEnergy:25,PresetCommoditiesMetals:26,IndicesEurope_NoShares:27,IndicesNorthAmerica_NoShares:28,IndicesOther_NoShares:29,PresetSharesSouthCorea:30,PresetSharesNetherlands:31,PresetSharesSwitzerland:32,PresetSharesSweden:33,PresetSharesHongKong:125,PresetSharesAustralia:126,PresetSharesMexico:127,PresetSharesPoland:128,PresetSharesGreece:129,PresetSharesCzechRepublic:130,PresetSharesHungary:131,PresetSharesFinland:132,SharesSaudiArabia:135,PresetSharesIndia:140,PresetMostPopularWithoutShares:18,PresetMostPopularWithoutFuturesWithoutShares:19,MainHot:80,CurrenciesHot:81,SharesHot:82,MainHot_NoShares:83,MainHot_NoSharesNoFutures:84,MainTopGainers:85,CurrenciesTopGainers:86,SharesTopGainers:87,MainTopGainers_NoShares:88,MainTopGainers_NoSharesNoFuture:89,MainTopLosers:90,CurrenciesTopLosers:91,SharesTopLosers:92,MainTopLosers_NoShares:93,MainTopLosers_NoSharesNoFutures:94,CommoditiesHot:95,CommoditiesTopGainers:96,CommoditiesTopLosers:97,IndicesHot_NoShares:98,IndicesTopGainers_NoShares:99,IndicesTopLosers_NoShares:100,MainHot_NoFutures:101,MainTopGainers_NoFutures:102,MainTopLosers_NoFutures:103,ETFMostPopular:104,ETFHot:105,ETFTopGainers:106,ETFTopLosers:107,ETFCommodities:108,ETFEquityCountries:109,ETFEquityIndices:110,ETFEquitySectors:111,ETFFixedIncome:112,IndicesMostPopular:113,IndicesHot:114,IndicesTopGainers:115,IndicesTopLosers:116,IndicesEurope:117,IndicesNorthAmerica:118,IndicesOther:119,CryptoMostPopular:120,CryptoHot:121,CryptoTopGainers:122,CryptoTopLosers:123,CryptoCurrencies:124,PresetNewReleases:136,PresetNewReleasesNoFutures:137,PresetNewReleasesNoShares:138,PresetNewReleasesNoSharesNoFutures:139,StocksMostPopular:141},Operation={Add:0,Substruct:1},eTopic={onCancelPendingRedrawal:"onCancelPendingRedrawal",onDoubleLoginEvent:"onDoubleLoginEvent",onDynamicScriptsLoaded:"onDynamicScriptsLoaded",onCustomQuotesSaved:"onCustomQuotesSaved"},eShutDownHandlerTopics={stopClientStateManagerCalls:"onStopClientStateManagerCalls",stopKeepAliveCalls:"onStopKeepAliveCalls",stopGetActiveIMCalls:"onStopGetActiveIMCalls",stopGetRatesRecentWebCalls:"stopGetRatesRecentWebCalls",restartClientStateManagerCalls:"onRestartClientStateManagerCalls",restartKeepAliveCalls:"onRestartKeepAliveCalls",restartGetActiveIMCalls:"onRestartGetActiveIMCalls",restartGetRatesRecentWebCalls:"restartGetRatesRecentWebCalls"},eAppEvents={formChangeEvent:"formChangeEvent",formChangedEvent:"formChangedEvent",amlStatusLoadedEvent:"amlStatusLoadedEvent",cddStatusLoadedEvent:"cddStatusLoadedEvent",dialogClosed:"dialogClosed",exportDataLoadedEvent:"exportDataLoadedEvent",rolledOverDataLoaded:"rolledOverDataLoaded",accountCardRecordsDataLoaded:"accountCardRecordsDataLoaded",contractRolloverDataLoaded:"contractRolloverDataLoaded",customerInformationLoadedEvent:"customerInformationLoadedEvent",depositConfirmationLoadedEvent:"depositConfirmationLoadedEvent"},eGender={Female:"F",Male:"M"},eClaimActionType={Save:1,Fetch:2,Update:3,Delete:4},eClaimRecordType={photocopyOfIDPassport:1,utilityBill:2,creditCardPhotocopy:3,PhotocopyOfCardholdersID:4,CardHolderAuthorization:5,depositConfirmation:6,withdrawalConfirmation:7,generalDocument:8,AMLapproval:9,TaxCard:10,PEP:11,KeyManager:12,CreditCard:13,Agreement:14,BeneficiaryDeclaration:15,CVV:16},ePostboxTopic={ClaimRequestFailed:"ClaimRequestFailed",UploadCCNumberResult:"UploadResult",CCNumberValidation:"CCNumberValidation",CVVValidation:"CVVValidation",StartTokenizationFlowIfCCValid:"StartTokenizationFlowIfCCValid",UsedCCNumber:"UsedCCNumber",ClearCCData:"ClearCCData",CCNumberIframeReady:"CCNumberIframeReady",SetSpinnerVisibility:"SetSpinnerVisibility",PaymentDeposit:"payment-deposit",PaymentFormValid:"payment-formValid",EnableCCFormFieldsValidation:"EnableCCFormFieldsValidation",ValidateCCIframeFields:"ValidateCCIframeFields",ValidateCCIframeFieldsResult:"ValidateCCIframeFieldsResult",ConcretePaymentData:"ConcretePaymentData",ReloadConcretePayments:"ReloadConcretePayments",ConcretePaymentSelectedCountry:"ConcretePaymentSelectedCountry",MissingInfo:"MissingInfo",PaymentButtonsVisible:"ButtonsVisible"},eTokenizationError={frameNotLoaded:0,uploadError:1,claimError:2,frameNotLoadedDepositIntended:3},eAjaxerState={None:0,Retry:1,SlaCompromised:2},eUIVersion={Default:0},eSignalType={TechnicalAnalysis:1,Alert:2,CandleStick:3,Pattern:4},eSignalTrendsValues={Equal:"(=)",PlusOne:"(+1)",PlusTwo:"(+2)",None:""},eDirections={Up:"up",Down:"down",Bold:"bold"},ePCIValidationType={StartDepositFlow:0,StartDepositValidation:1,ResetValidation:2},eConcretePaymentCategory={Recommended:0,CreditCard:1,EPayments:2,BankTransfer:3,PrepaidCards:4,LastPayment:5},eFxNetEvents={Init:"fx-net-init-event",Start:"fx-net-start-event",End:"fx-net-end-event",UiLayerStart:"fx-net-ui-layer-start-event",UiLayerEnd:"fx-net-ui-layer-end-event",CacheLoadStart:"fx-net-start-cache-load-event",CacheLoadEnd:"fx-net-end-cache-load-event",InitialDataStart:"fx-net-start-initial-data-event",InitialDataEnd:"fx-net-end-initial-data-event",WaitHtmlStart:"fx-net-start-wait-html-event",WaitHtmlEnd:"fx-net-end-wait-html-event",ApplyBindingsStart:"fx-net-start-apply-bindings-event",ApplyBindingsEnd:"fx-net-end-apply-bindings-event",SplashScreenRemoved:"fx-net-splash-screen-removed",ExposeUi:"fx-net-expose-ui-event",GtmConfigurationSet:"fx-net-gtm-configuration-set",ChartInit:"fx-net-chart-instance-init",ChartInitComplete:"fx-net-chart-instance-init-complete",ChartStart:"fx-net-chart-instance-start",ChartStartComplete:"fx-net-chart-instance-start-complete",ChartGetHistoryRequest:"fx-net-chart-get-history-request",ChartGetHistoryResponse:"fx-net-chart-get-history-response",FirstQuoteEvent:"fx-net-first-quote-event",Trading_Central_Added:"Trading_Central_Added",Trading_Central_Removed:"Trading_Central_Removed"},eRefDomElementsIds={newDealRefParentTopElement:"#AccSummaryEquityTitle"},eAvailabilityState={Unknown:-1,NotAvailable:0,Available:1},eApplicationTypes={Web:0,Mobile:1,Dealer:3},eDeepLinkParameterType={Instrument:1,OrderDir:2,Tab:3,Form:4,AccountNumber:5,WithdrawalId:6,LoginOption:7,WireTransferId:8,PositionId:9,AccountTransactionId:10,View:11},eTransactionSwitcher={None:0,NewDeal:1,NewLimit:2,NewPriceAlert:4},eExpirationDateUIType={Select:1,RadioGroup:2},ePresetsOrder={None:0,Ascending:1,Descending:2},eConfigContentValues={False:"0",True:"1"},ePlatformSwitch={Demo:"demo",Real:"real",None:"none"},ePendingBonusType={cashBack:0,spreadDiscount:1},eHistoryStateType={ExitFullscren:"exitfullscren",EnterFullscren:"enterfullscren",CloseAlert:"closealert",CloseDialog:"closedialog",Invalid:"invalid",View:"view",Questionnaire:"questionnaire",Wizard:"wizard"},ePopupType={Alert:"alert",Dialog:"dialog"},eNavigateDirection={Next:0,Prev:1},eSetLimitsTabs={None:0,Rate:1,Amount:2,NoTabs:3,Percent:4},eUIScreens={FXNetMobileDefault:11,FXNetMobileTradingMajors:12,FXNetMobileTradingMinors:13,FXNetMobileEuroCrosses:14,FXNetMobileGBPCrosses:15,FXNetMobileJPYCrosses:16,FXNetMobileOtherCrosses:17,FXNetMobileCFD:32,FXNetMobileDefaultWithoutfutures:33},eWeekendFinancingTypes={None:0,Friday:1,Thursday:2},eResourcesNames={ChartsResources:"charts_resources",FaqDeposit:"faqdeposit",FaqDepositThankYou:"faqdepositthankyou",Support:"support",FaqUploadDocuments:"faquploaddocuments"},eStateObjectTopics={ReadyForUse:"ReadyForUse",ToolsToggle:"toolsToggle",SignalChartToggle:"signalChartToggle",CsmOutOfDate:"CsmOutOfDate",UserFlowChanged:"UserFlowChanged",ClosedDealsUseFilters:"ClosedDealsUseFilters"},eQuestionnaireType={CDD:0,KYC:1,MIFID:2},eAccountMode={None:"0",Demo:"1",Real:"2"},eEducationalTutorialsType={Basic:"novice",Advanced:"advanced"},eWireTransferStatus={Pending:3,Approved:4,Canceled:5,ApprovalOnPending:6,CanceledPendingDeposit:7},eUploadDocumentType={ProofOfID:1,ProofOfResidence:2,CreditCardCopy:3,DepositConfirmation:6,WithdrawalPendingRequest:7,OtherDocuments:8,TaxCard:10},eUploadDocumentStatus={Approved:1,AwaitingDocument:2,Processing:3,Incomplete:4,NotRequired:5,AwaitingSignature:6,AwaitingSignatureHighAmount:7},eCountryAttributes={Id:0,Name:1,IsActive:2},eFormActions={newDeal:"NewDeal",newLimit:"NewLimit",deposit:"Deposit"},eFixPosition={deletePosition:1,restorePosition:0},registerParams={traderInstrumentId:"trader_instrumentId=",traderOrderDir:"&trader_orderdir=",traderFrom:"trader_from"},eUserFlowSteps={None:-1,OpenedAnAccount:0,GeneralInforamtionQuestionnaire:1,TradingKnowledgeQuiz:2,ProofOfIdentity:3,FundYourAccount:4,Trade:5},eUserStatus={NA:-1,NotActivated:0,ReadyToTrade:1,ActiveLimited:2,Active:3,Restricted:4,Locked:5},eStepStatus={NotActive:0,Seamless:1,Error:2,Restricted:3,Available:4,Complete:5,Hidden:6},eCta={None:0,Seamless:1,ContactUs:2,ClientQuestionnaire:3,Deposit:4,UploadDocuments:5},eAccountRedirectForms={WithdrawalAutomation:1013,WireTransfers:1015,NewApproveWireTransfer:1016,WithdrawalProcess:1017,ConvertBalance:1018,ConvertAccountLine:1019,GeneralAccountActions:1020,FixPosition:1021},eRequestAccessType={Signals:0,VideoLessons:1,Tutorials:2},eStateObjectAccessRequest={Signals:"Signals",VideoLessons:"VideoLessons",Tutorials:"Tutorials"},eAccessRequestStatus={RequestNotSubmitted:1,RequestSubmitted:2,ExtensionNotSubmitted:3,ExtensionSubmitted:4},instrumentInfoProps={pipValue:"pipValue",pipWorth:"pipWorth",requiredMargin:"requiredMargin",offHoursRequiredMargin:"offHoursRequiredMargin",maximumLeverage:"maximumLeverage",minDealAmount:"minDealAmount",maxDealAmount:"maxDealAmount",marketPriceTolerance:"marketPriceTolerance",ofSell:"ofSell",ofBuy:"ofBuy",ofPercentageSell:"ofPercentageSell",ofPercentageBuy:"ofPercentageBuy",overnightFinancingGMT:"overnightFinancingGMT",rolloverDate:"rolloverDate",dividendDate:"dividendDate",dividendAmount:"dividendAmount",weekendFinancing:"weekendFinancing"},eDealerParams={DealerCurrency:"dealerCurrency",DealerAdvancedWalletView:"dealerAdvancedWalletView"},ePeriodTabs={None:-1,Short:0,Medium:1,Long:2},eMarketInfoPeriods={FiveMin:1,OneH:2,TwelveHours:3,Today:4,OneDay:5,OneWeek:6,TwoWeeks:7,ThisMonth:8,ThirtyDays:9,NinetyDays:10,FiftyTwoWeeks:11,ThisYear:12},eRateIDataPositions={Id:0,High:1,Low:2},eMarketInfoPrefixEvent={NewDeal:"deal-slip",NewLimitViewModel:"limit-slip",CloseDeal:"close-deal",EditLimitViewModel:"edit-limit",EditClosingLimit:"edit-closing-limit"},eMarketInfoNameEvent={TradingSentiment:"trading-sentiment",MarketInfo:"market-info",HighLow:"high-low",InstrumentInfo:"instrument-info"},eAccordionState={collapse:"collapse",expand:"expand"},eMarketInfoEvents={DealSlipTradingSentimentCollapse:"deal-slip-collapse-trading-sentiment",DealSlipTradingSentimentExpand:"deal-slip-expand-trading-sentiment",DealSlipMarketInfoCollapse:"deal-slip-collapse-market-info",DealSlipMarketInfoExpand:"deal-slip-expand-market-info",DealSlipHighLowCollapse:"deal-slip-collapse-high-low",DealSlipHighLowExpand:"deal-slip-expand-high-low",DealSlipInstrumentInfoCollapse:"deal-slip-collapse-instrument-info",DealSlipInstrumentInfoExpand:"deal-slip-expand-instrument-info",LimitSlipTradingSentimentCollapse:"limit-slip-collapse-trading-sentiment",LimitSlipTradingSentimentExpand:"limit-slip-expand-trading-sentiment",LimitSlipMarketInfoCollapse:"limit-slip-collapse-market-info",LimitSlipMarketInfoExpand:"limit-slip-expand-market-info",LimitSlipHighLowCollapse:"limit-slip-collapse-high-low",LimitSlipHighLowExpand:"limit-slip-expand-high-low",LimitSlipInstrumentInfoCollapse:"limit-slip-collapse-instrument-info",LimitSlipInstrumentInfoExpand:"limit-slip-expand-instrument-info",CloseDealTradingSentimentCollapse:"close-deal-collapse-trading-sentiment",CloseDealTradingSentimentExpand:"close-deal-expand-trading-sentiment",CloseDealMarketInfoCollapse:"close-deal-collapse-market-info",CloseDealMarketInfoExpand:"close-deal-expand-market-info",CloseDealHighLowCollapse:"close-deal-collapse-high-low",CloseDealHighLowExpand:"close-deal-expand-high-low",CloseDealInstrumentInfoCollapse:"close-deal-collapse-instrument-info",CloseDealInstrumentInfoExpand:"close-deal-expand-instrument-info",EditClosingLimitTradingSentimentCollapse:"edit-closing-limit-collapse-trading-sentiment",EditClosingLimitTradingSentimentExpand:"edit-closing-limit-expand-trading-sentiment",EditClosingLimitMarketInfoCollapse:"edit-closing-limit-collapse-market-info",EditClosingLimitMarketInfoExpand:"edit-closing-limit-expand-market-info",EditClosingLimitHighLowCollapse:"edit-closing-limit-collapse-high-low",EditClosingLimitHighLowExpand:"edit-closing-limit-expand-high-low",EditClosingLimitInstrumentInfoCollapse:"edit-closing-limit-collapse-instrument-info",EditClosingLimitInstrumentInfoExpand:"edit-closing-limit-expand-instrument-info",EditLimitTradingSentimentCollapse:"edit-limit-collapse-trading-sentiment",EditLimitTradingSentimentExpand:"edit-limit-expand-trading-sentiment",EditLimitMarketInfoCollapse:"edit-limit-collapse-market-info",EditLimitMarketInfoExpand:"edit-limit-expand-market-info",EditLimitHighLowCollapse:"edit-limit-collapse-high-low",EditLimitHighLowExpand:"edit-limit-expand-high-low",EditLimitInstrumentInfoCollapse:"edit-limit-collapse-instrument-info",EditLimitInstrumentInfoExpand:"edit-limit-expand-instrument-info"},eMarketInfoSectionsProps={tsArea:0,miArea:1,hlArea:2,iiArea:3},eWithdrawalSteps={setAmount:1,setMethod:2,setBankDetails:3,setCreditCard:4,setApproval:5,confirm:6},eWithdrawalMethods={bank:0,card:1},IMRequestIntervalModes={PreLogin:-1,Login:0,InSession:1,AccountSwitch:2},eClientState={portfolioStatic:0,portfolioSummary:1,flags:2,ticks:3,ohlcs:4,deals:5,limits:6,notifications:7,serverTime:8,bonus:9},eSubscriptionRequestFlags={Balance:0,ClientStateHolder:1,Deals:2,Exposures:3,Flags:4,Limits:5,Notifications:6,PL:7,PortfolioStatic:8,Quotes:9,TradingNotifications:10,All:11},ePortfolioSummary={csHolder:0,dealPL:1,netExposure:2,isUpdated:3,instrumentVolumes:4,optionIndication:5},eInstruments={id:0,amountGroupId:1,factor:2,hasSignals:3,ccyPair:4,tradable:5,defaultDealSize:6,signalName:7,maxDeal:8,SLMinDistance:9,TPMinDistance:10,DecimalDigit:11,PipDigit:12,SpecialFontStart:13,SpecialFontLength:14,assetTypeId:15,expirationDate:16,instrumentTypeId:17,baseSymbolId:18,otherSymbolId:19,exchangeInstrumentName:20,exchange:21,contractMonthAndYear:22,instrumentEnglishName:23,weightedVolumeFactor:24,eventDate:25,eventAmount:26,marketPriceTolerance:27},eQuotes={instrumentID:0,bid:1,ask:2,open:3,high:4,low:5,tradeTime:6,state:7,close:8},eSymbol={id:0,name:1},eExposure={symbolID:0,amount:1,accountSymbolAmount:2,status:3},eInstrumentVolume={InstrumentID:0,BaseSymbolNetExposure:1,OtherSymbolNetExposure:2,AccountSymbolAmount:3,RequiredMarginPercentage:4,UsedMargin:5,MarginUtilizationPercentage:6,AvailableMargin:7,MarginUtilizationStatus:8,Status:9,OrdersCounter:10,LastUpdate:11,BaseSymbolAmount:12,OtherSymbolAmount:13},eMarginUtilizationStatus={NA:0,Low:1,Medium:2,High:3},ePortfolioStatic={accountSymbol:0,maxExposure:1,securities:2,tradingBonus:3,pendingBonus:4,isActive:5,isDemo:6,kycStatus:7,amlStatus:8,pendingWithdrawals:9,pepStatus:12,cddStatus:13,pendingBonusType:15,pendingBonusVolumePercentage:16,kycReviewStatus:17},eCSHolder={accountBalance:0,equity:1,netExposure:2,margin:3,exposureCoverage:4,totalEquity:5,openPL:6,usedMargin:7,marginUtilizationPercentage:8,availableMargin:9,marginUtilizationStatus:10},eCSFlags={exposureCoverageAlert:0,equityAlert:1,exposureAlert:2,marketState:3,systemMode:4,isUpdated:5,limitMultiplier:6},eSystemMode={none:0,active:1,closing:2,inactive:3,shutdown:4},eCustomer={accountBaseSymbol:0,defaultCcy:1,email:2,accountNumber:3,language:4,dealPermit:5,accountsCcy:6},eLimit={instrumentID:0,orderID:1,positionNumber:2,orderDir:3,orderRate:4,buySymbolID:5,buyAmount:6,sellSymbolID:7,sellAmount:8,type:9,mode:10,expirationDate:11,entryTime:12,slRate:13,tpRate:14,otherLimitID:15,dealType:16,status:17},eHistoricalLimit={instrumentID:0,orderID:1,positionNumber:2,orderDir:3,orderRate:4,buySymbolID:5,buyAmount:6,sellSymbolID:7,sellAmount:8,type:9,mode:10,executionDate:11,entryTime:12,slRate:13,tpRate:14,status:15},eDeal={instrumentID:0,orderID:1,positionNumber:2,orderDir:3,orderRate:4,buySymbolID:5,buyAmount:6,sellSymbolID:7,sellAmount:8,valueDate:9,dealType:10,exeTime:11,slRate:12,slID:13,tpRate:14,tpID:15,additionalPL:16,status:17,spreadDiscount:20},eDealPL={instrumentID:0,dealID:1,spotRate:2,fwPips:3,closingRate:4,pl:5,lastUpdate:6,commission:7},eClosedDealsBase={orderID:0,positionNumber:1,instrumentID:2,buyAmount:3,sellAmount:4,orderDir:5,dealType:6,valueDate:7,executionTime:8,forwardPips:9,instrumentEnglishName:10,pipDigit:11,decimalDigit:12,specialFontStart:13,specialFontLength:14},eClosedDeals={dealRate:15,pl:16,originalPosNum:17,plCCY:18,positionStart:19,additionalPL:20},eClosedDealsSummaries={orderRateOpen:15,orderRateClosed:16,pl:17,originalPosNum:18,plCCY:19,positionStart:20,additionalPL:21,spreadDiscount:22,commission:23},eAccountingAction={actionID:0,actionTypeID:1,symbolID:2,date:3,credit:4,debit:5,posNum:6,comment:7,balance:8,totalsum:9},eContractRollover={actionID:0,posNum:1,symbol:2,date:3,debit:4,credit:5,gap:6,closeMidRate:7,openMidRate:8,spread:9},eAccountingActionsCategory={All:0,Deposits:1,Withdrawals:2,DealPL:3,OvernightFinancing:4,General:5,OvernightHistory:6,ContractRollover:7,Dividend:8},eMinDealValue={instrumentID:0,groupID:1,minAmount:2},eActivityLog={MessageType:0,DateTime:1,SourceType:2,Message:3},eExpiredOptions={InstrumentID:0,OptionID:1,Amount:2,AmountCCY:3,BaseCCY:4,OtherCCY:5,OpenRate:6,ServerRate:7,ITMReturn:8,OTMReturn:9,EqualReturn:10,OptionReturn:11,USDValue:12,ExpirationTime:13,TimeGenerated:14,ClosingRate:15,Direction:16,Distance:17,ExpirationBid:18,ExpirationAsk:19,ExpirationTradeTime:20,Canceled:21},eActivityLogFilterType={Positions:1,Limits:2,Account:3,Logins:5},eCreditCard={CardTypeID:0,Name:1,OrderID:2,Currencies:3,D3SecureStatus:4,DepositingActionType:5},eDepositCurrency={CurrencyID:0,SortOrderID:1},eDepositCurrencyWithValidation={CurrencyID:0,SortOrderID:1,MinAmount:3,MaxAmount:4,MaxAmlAmount:5},eDepositErrorType={fieldValidation:0,upload:1,claim:2,isInvalidLuhn:4,ccTypeUnknown:5},ePaymentAuthStatus={Disable:0,Optional:1,Required:2},eCardView={PaymentID:0,CardHolderName:1,Last4:2,CardNumberLength:3,ExpirationMonth:4,ExpirationYear:5,IsDefault:6,IsCVVRequired:7,CardTypeID:8,First6:9,CcGuid:10},eWireTransferCountry={CountryID:0,Name:1},eWireTransferCountryContainer={CountryID:0,Name:1,DefaultCurrencyID:2,DefaultCurrencyName:3,LocalCurrencies:4,InternationalCurrencies:5},eWireTransferBankCurrency={CurrencyID:0,SortOrderID:1,MinDeposit:2},eDepositResponse={RequestID:0,EngineStatusID:1,ValidationStatusID:2,ClearingStatusID:3,DepositingTransactionStatusID:4,CreditCardMaintenanceStatusID:5,DepositingRequest3DSecureStatusID:6,CreditCardAuthenticationModeID:7,MessageDetails:8,MoneybookersURL:9,D3SecureURL:10,WireTransferInvoiceInfo:11,GlobalCollectAPMURL:12,ConfirmationCode:13,ClearerRequestUrl:14,ClearerPostData:15,BaseClearerTypeId:16,TransactionDescriptor:17,ClearerUrlHash:18,Last4:19},ePostData={Name:0,Value:1},eDepositEngineStatus={Pending:10,Valid:20,Success:70,CCStored:80,Finished:100,Failed:200},eDepositValidationStatus={CardIDNotFound:1,AccountNumberNotFound:2,Blocked:3,BadLuhn:4,UnkownCCType:5,MaxCCReached:6,Spoofing:7,DoubleUse:8,MinDeposit:9,MaxDeposit:10,DepositRangeValidationFailed:11,InvalidCardType:12,InvalidEmailFormat:13,CreditCardExpired:14,InvalidWMID:15,WMCurrencyMismatch:16,WMAmountMismatch:17,AMLComplianceDenied:18,RequestedCVVNotFound:19,InvalidMobileFormat:20,Valid:21,WhiteList:23,TransactionCancelledByUser:25,RefundableClearer:26,ExceededLimit:27,Unknown:28,MinMaxDepositBlocked:29,MeikoPayMaxAmount:30,InvalidConfiguration:31,CCBinCountryBlacklist:32,NoSupportedClearers:33,MaxCardTypeUSDAmount:34,ShowAdditionalPaymentOnFailedDeposit:35},eSecureFlow={Need:0,NotNeed:1,Failed:2},ePaymentAuthMode={None:1,D3Secure:2},eClearingStatus={TransactionRequired:0,TransactionApproved:1,FailedOn3DMissing:11,FailedOnMoneybookersRequestCanceled:7},eWireTransferType={NA:0,Local:1,International:2},eWithdrawalView={withdrawalID:0,actionID:1,amount:2,symbolID:3,requestDate:4,withdrawalStatus:5,rowVersion:6,accountMaxRowVersion:7,symbolName:8,bankName:9,bankAccount:10,bankAddress:11,bankCountryID:12,bankCountryName:13,bankBranch:14,bankBeneficiary:15,bankComments:16},eWithdrawalStatus={NA:0,pendingWithdrawal:1,Approved:2,Rejected:3,processingWithdrawal:4},eDepositingRequest3DSecureStatus={WaitngForResponse:0,Enrolled:1,AttemptedNotEnrolled:2,NotEligible:3,NoSupportedClearers:4},eKeepAlive={Success:0,Error:1},eQuotesUIOrder={InstrumentID:0,DealAmount:1},eNotification={NotificationType:0,ItemId:1,RelatedItemId:2,Version:3},eTransactionsReports={PositionNumber:0,TransactionNumber:1,ExecutionDate:2,BuySell:3,Item:4,UnitPrice:5,QuantityTraded:6,TotalAmountCurrency:7,USDVolume:8,TypeOfOrder:9,OpenRolloverClose:10,BaseCur:11,OtherCur:12,Commission:13,InstrumentId:14},eInitialScreen={ScreenId:0,IsCustomScreen:1},ePresetCategory={InstrumentType:0,Presets:1},ePreset={PresetId:0,InstrumentType:1,IsSelected:2},eTradingSignal={signalId:0,signalTitle:1,signalDate:2,imagePath:3,mediumTermLevel:4,weekDelta:5,longTermLevel:6,monthDelta:7,summary:8,symbol:9,story:10,shortTerm:11},eAlertSignal={ma20:0,ma50:1,ma20_50:2,macd_sl:3,macd_0:4,bollinger:5,rsi70:6,rsi30:7,volume:8,periodUnit:9,periodValue:10,id:11,symbol:12,dateTime:13,title:14},eCandlestickSignal={candlestick:0,last:1,opinion:2,invalidation:3,id:4,symbol:5,dateTime:6,title:7},eTechAnalysisSignal={week:0,weekDelta:1,month:2,monthDelta:3,id:4,symbol:5,dateTime:6,title:7},eTicks={instrumentID:0,bid:1,ask:2,tradeTimeOffset:3,state:4},eOhlc={instrumentID:0,open:1,close:2,high:3,low:4},eBonus={amountBase:0,amountGivenBase:1,volumeUsd:2,startDate:3,endDate:4,accumulatedVolumeUsd:5},eNameValuePairIndex={name:0,value:1},eDepositResponseThreeDIndex={paReq:0,md:1,termUrl:2,acsUrl:3},AlertTypes={CloseDealAlert:0,ServerResponseAlert:1,SimpleClientAlert:2,MaxIdleTimeAlert:3,DoubleLoginAlert:4,ExposureCoverageAlert:5,MinEquityAlert:6,BonusAlert:7,ExitAlert:8,CCDeposit:9,ClientQuestionnaire:10,CddClientQuestionnaire:11,GeneralOkCancelAlert:12,ClosePositionsConfirmation:13,SignalsDisclaimerAlert:14,GeneralCancelableAlert:15,PopupClientQuestionnaire:16,DealsClosedServerResponseAlert:17,DealAddServerResponseAlert:18,LimitsServerResponseAlert:19,GeneralOkAlert:20,RemoveCreditCardConfirmationAlert:27,MultipleDealsClosedConfirmation:28,ClientKnowledgeQuestionnaire:29,RemoveFingerprintLoginOptionConfirmationAlert:40,AddFingerprintLoginOptionConfirmationAlert:41,ScanFingerprintLoginOptionConfirmationAlert:42,FingerprintLoginActivatedAlert:43,DeviceNotSupportFingerprintAlert:44,DepositSuccessAlert:45,HelpAlert:46,DepositConfirmationEmailSentAlert:47,ContactUsCTAAlert:48,TradingConfirmationRetryAlert:49,MultiplePriceAlertsClosedConfirmation:50,PriceAlertServerResponseAlert:51,PriceAlertClosedServerResponseAlert:52,IframeAlert:53,RequestAccessVideoLessonsAlert:54,RequestAccessTutorialsAlert:55,SessionEndedAlert:56,DepositConfirmationSignatureAlert:57},PostClientStatesLoginsAlerts={ExposureAlert:21,ExposureCoverageAlert:22,SystemMode:23,MarketState:24,SystemModeApplicationClosing:25,SystemModeApplicationShutDown:26},PostPortfoliosLoginsAlerts={AmlStatus:30,IsActive:31,IsDemo:32,IsReal:35,KycStatus:33,PepStatus:34},SaveWithdrawalResponseReturnType={NotPossible:0,EquityLimit:1,AmountLimit:2,Succeded:3,EquityChanged:4,HasOpenPos:5,BalanceError:6,TradingBonusTakeoutRequired:7,TradingBonusTakeoutRequiredRich:8},KnowledgeAlertTypes={Retry:0,Review:1,Tested:2,Inappropriate:3,Unsuitable:4};window.environmentData=window.environmentData||{},window.environmentData.paymentBehaviorConfig=[{Id:eDepositingActionType.Regular,ShowInMobile:1,SubViews:[{ViewId:"creditcardregular",Name:"CreditCard",ViewType:"vCreditCardRegular",ViewModel:"CreditCardRegular",DepositType:"creditcard",ControllerAction:"creditcard-creditcardregular",MobileName:"CreditCardRegularMobile",DesktopName:"CreditCardRegularDesktop"},{ViewId:"genericcreditcard",Name:"CreditCard",ViewType:"vGenericCreditCard",ViewModel:"GenericCreditCard",DepositType:"creditcardgeneric",ControllerAction:"creditcard-genericcreditcard",MobileName:"GenericCreditCardMobile"}]},{Id:eDepositingActionType.SafechargePPP,Name:"CreditCard3rdParty",ViewType:"vCreditCard3rdParty",DepositType:"safechargeppp",ControllerAction:"creditcard-safechargeppp",ShowInMobile:1,Resources:["creditcard_safechargeppp"]},{Id:eDepositingActionType.EmpCashU,Name:"EmpCashU",ViewType:"vEmpCashU",DepositType:"empcashu",ControllerAction:"emp-cashu",ViewModel:"DefaultEwallet",ShowInMobile:1},{Id:eDepositingActionType.SafeChargeCashier,Name:"SafechargeCashier",ViewType:"vSafeChargeCashier",DepositType:"safechargecaschier",ControllerAction:"safecharge-cashier",ViewModel:"DefaultEwallet",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_safecharge_cashier","payments_ewallet"]},{Id:eDepositingActionType.Epaylinks,Name:"Epaylinks",ViewType:"vEpaylinks",DepositType:"epaylinks",ControllerAction:"deposit-defaultpaymentview",ViewModel:"DefaultEwallet",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.WireTransfer,Name:"RegularWireTransfer",ViewType:"vWireTransfer",DepositType:"regularWireTransfer",MobileName:"MobileRegularWireTransfer",ShowInMobile:1,Resources:["payments_regularWireTransfer"]},{Id:eDepositingActionType.Moneybookers,Name:"MoneyBookers",DepositType:"moneybookers",ViewType:"vMoneyBookers",ShowInMobile:1,Resources:["payments_moneyBookers"]},{Id:eDepositingActionType.GlobalCollectAPM,Name:"GlobalCollectAPM",ViewType:"vGlobalCollectAPM",DepositType:"globalCollectAPM",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.Astropay,Name:"Astropay",ViewType:"vAstropay",DepositType:"astropay",ShowInMobile:1,Resources:["payments_astropay"]},{Id:eDepositingActionType.NetellerGO,Name:"NetellerGO",ViewType:"vNetellerGO",DepositType:"netellerGO",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_genericcreditcard","payments_ewallet"]},{Id:eDepositingActionType.PaySafeCard,Name:"PaySafeCard",ViewType:"vPaySafeCard",DepositType:"paySafeCard",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.InatecAPM,SubViews:[{ViewId:"giropay",Name:"InatecAPM",ViewType:"vInatecAPMGiropay",DepositType:"inatecAPM",ControllerAction:"inatecapm-giropay",Resources:["payments_inatecAPM"]},{ViewId:"p24",Name:"InatecAPM",ViewType:"vInatecAPMPrzelewy24",DepositType:"inatecAPM",ControllerAction:"inatecapm-przelewy24",Resources:["payments_inatecAPM"]}],ShowInMobile:1},{Id:eDepositingActionType.NoAPIClearer,Name:"NoAPIClearer",ViewType:"vNoAPIClearer",DepositType:"noAPIClearer",ControllerAction:"deposit-noapiclearer",ShowInMobile:1},{Id:eDepositingActionType.EcoPayz,Name:"EcoPayz",ViewType:"vEcoPayz",DepositType:"ecoPayz",ViewModel:"DefaultEwallet",ShowInMobile:1,Resources:["payments_ewallet"]},{Id:eDepositingActionType.SofortDirect,Name:"SofortDirect",ViewType:"vSofortDirect",DepositType:"sofortDirect",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.Kluwp,Name:"Kluwp",ViewType:"vKluwp",DepositType:"kluwp",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.RPN,Name:"RPN",ViewType:"vRPN",DepositType:"RPN",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.PayPal,Name:"PayPal",ViewType:"vPayPal",DepositType:"PayPal",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.AstropayCard,Name:"AstropayCard",ViewType:"vAstropayCard",DepositType:"AstropayCard",ViewModel:"AstropayCard",ShowInMobile:1,Resources:["payments_creditcardregular"]},{Id:eDepositingActionType.PayRetailers,Name:"PayRetailers",ViewType:"vPayRetailers",DepositType:"PayRetailers",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.RisingSunAPM,Name:"RisingSunAPM",ViewType:"vRisingSunAPM",DepositType:"RisingSunAPM",ViewModel:"DefaultEwallet",MobileName:"RisingSunAPM",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]},{Id:eDepositingActionType.Jeton,Name:"Jeton",ViewType:"vJeton",DepositType:"Jeton",ViewModel:"DefaultEwallet",ControllerAction:"deposit-defaultpaymentview",ShowInMobile:1,Templates:["fx-template-payment-amount"],Resources:["payments_ewallet"]}],define("fxnet/commonconstants/enums/paymentsconfigsettings",[],function(){return window.environmentData.paymentBehaviorConfig}),define("FxNet/Common/Constants/Collections/PresetsDefinitions",function(){var e={Display:{label:"lblDisplay",order:0,columnId:0},CrossRates:{label:"lblCrossRates",order:1,columnId:0},Group:{label:"lblGroup",order:2,columnId:0},Region:{label:"lblRegion",order:3,columnId:0},Americas:{label:"lblAmericas",order:4,sortAlphabetically:!0,columnId:0},APAC:{label:"lblAPAC",order:5,sortAlphabetically:!0,columnId:0},EMEA:{label:"lblEMEA",order:6,sortAlphabetically:!0,columnId:1},Assets:{label:"lblAssets",order:7,columnId:0}};return[{presets:{PresetCustomized:{id:0,subCategory:e.Display},PresetMostPopular:{id:2,subCategory:e.Display},PresetMostPopularWithoutFutures:{id:1,subCategory:e.Display},PresetMostPopularWithoutShares:{id:18,subCategory:e.Display},PresetMostPopularWithoutFuturesWithoutShares:{id:19,subCategory:e.Display},PresetNewReleases:{id:136,subCategory:e.Display},PresetNewReleasesNoFutures:{id:137,subCategory:e.Display},PresetNewReleasesNoShares:{id:138,subCategory:e.Display},PresetNewReleasesNoSharesNoFutures:{id:139,subCategory:e.Display},MainHot:{id:80,subCategory:e.Display},MainHot_NoShares:{id:83,subCategory:e.Display},MainHot_NoSharesNoFutures:{id:84,subCategory:e.Display},MainTopGainers:{id:85,subCategory:e.Display},MainTopGainers_NoShares:{id:88,subCategory:e.Display},MainTopGainers_NoSharesNoFuture:{id:89,subCategory:e.Display},MainTopLosers:{id:90,subCategory:e.Display},MainTopLosers_NoShares:{id:93,subCategory:e.Display},MainTopLosers_NoSharesNoFutures:{id:94,subCategory:e.Display},MainHot_NoFutures:{id:101,subCategory:e.Display},MainTopGainers_NoFutures:{id:102,subCategory:e.Display},MainTopLosers_NoFutures:{id:103,subCategory:e.Display}},ascOrderPresetIds:[90,93,94,103],descOrderPresetIds:[85,88,89,102],categoryName:"PresetMainTab",presetOrder:0,sortPresetsAlphabetically:!1,instrumentType:eInstrumentType.Mixed,searchPresetIds:[]},{presets:{PresetMostPopularCurrencies:{id:3,subCategory:e.Display},CurrenciesHot:{id:81,subCategory:e.Display},CurrenciesTopGainers:{id:86,subCategory:e.Display},CurrenciesTopLosers:{id:91,subCategory:e.Display},PresetUsdCurrencies:{id:4,subCategory:e.CrossRates},PresetEurCurrencies:{id:5,subCategory:e.CrossRates},PresetGbpCurrencies:{id:6,subCategory:e.CrossRates},PresetJpyCurrencies:{id:7,subCategory:e.CrossRates},PresetOtherCurrencies:{id:8,subCategory:e.CrossRates}},ascOrderPresetIds:[91],descOrderPresetIds:[86],categoryName:"PresetCurrenciesTab",presetOrder:1,sortPresetsAlphabetically:!1,instrumentType:eInstrumentType.Currencies,searchPresetIds:[4,5,6,7,8]},{presets:{PresetCommodities:{id:9,subCategory:e.Display},PresetCommoditiesWithoutFutures:{id:10,subCategory:e.Display},CommoditiesHot:{id:95,subCategory:e.Display},CommoditiesTopGainers:{id:96,subCategory:e.Display},CommoditiesTopLosers:{id:97,subCategory:e.Display},PresetCommoditiesAgricultural:{id:24,subCategory:e.Group},PresetCommoditiesEnergy:{id:25,subCategory:e.Group},PresetCommoditiesMetals:{id:26,subCategory:e.Group}},ascOrderPresetIds:[97],descOrderPresetIds:[96],categoryName:"PresetCommoditiesTab",presetOrder:2,sortPresetsAlphabetically:!1,instrumentType:eInstrumentType.Commodities,searchPresetIds:[10,24,25,26]},{presets:{IndiciesMostPopular_NoShares:{id:11,subCategory:e.Display},IndicesHot_NoShares:{id:98,subCategory:e.Display},IndicesTopGainers_NoShares:{id:99,subCategory:e.Display},IndicesTopLosers_NoShares:{id:100,subCategory:e.Display},IndicesEMEA_NoShares:{id:27,subCategory:e.Display},IndicesNorthAmericas_NoShares:{id:28,subCategory:e.Display},IndicesOther_NoShares:{id:29,subCategory:e.Display},IndicesMostPopular:{id:113,subCategory:e.Display},IndicesHot:{id:114,subCategory:e.Display},IndicesTopGainers:{id:115,subCategory:e.Display},IndicesTopLosers:{id:116,subCategory:e.Display},IndicesNorthAmericas:{id:118,subCategory:e.Region},IndicesOther:{id:119,subCategory:e.Region},IndicesEMEA:{id:117,subCategory:e.Region}},ascOrderPresetIds:[100,116],descOrderPresetIds:[99,115],categoryName:"PresetIndicesTab",presetOrder:3,sortPresetsAlphabetically:!1,instrumentType:eInstrumentType.Indices,searchPresetIds:[27,28,29,117,118,119]},{presets:{PresetShares:{id:12,subCategory:e.Display},SharesHot:{id:82,subCategory:e.Display},SharesTopGainers:{id:87,subCategory:e.Display},SharesTopLosers:{id:92,subCategory:e.Display},PresetSharesUS:{id:13,subCategory:e.Americas},PresetSharesUK:{id:20,subCategory:e.EMEA},PresetSharesJapan:{id:22,subCategory:e.APAC},PresetSharesHongKong:{id:125,subCategory:e.APAC},PresetSharesGermany:{id:15,subCategory:e.EMEA},PresetSharesFrance:{id:21,subCategory:e.EMEA},PresetSharesIndia:{id:140,subCategory:e.APAC},PresetSharesItaly:{id:17,subCategory:e.EMEA},PresetSharesNetherlands:{id:31,subCategory:e.EMEA},PresetSharesAustralia:{id:126,subCategory:e.APAC},PresetSharesSouthCorea:{id:30,subCategory:e.APAC},PresetsSharesSaudiArabia:{id:135,subCategory:e.EMEA},PresetSharesSpain:{id:16,subCategory:e.EMEA},PresetSharesRussia:{id:23,subCategory:e.EMEA},PresetSharesMexico:{id:127,subCategory:e.Americas},PresetSharesSwitzerland:{id:32,subCategory:e.EMEA},PresetSharesSweden:{id:33,subCategory:e.EMEA},PresetSharesPoland:{id:128,subCategory:e.EMEA},PresetSharesFinland:{id:132,subCategory:e.EMEA},PresetSharesGreece:{id:129,subCategory:e.EMEA},PresetSharesCzechRepublic:{id:130,subCategory:e.EMEA},PresetSharesHungary:{id:131,subCategory:e.EMEA}},ascOrderPresetIds:[92],descOrderPresetIds:[87],categoryName:"PresetSharesTab",presetOrder:4,sortPresetsAlphabetically:!0,instrumentType:eInstrumentType.Shares,searchPresetIds:[13,20,22,125,15,21,140,17,31,126,30,135,16,23,127,32,33,128,132,129,130,131]},{presets:{StocksMostPopular:{id:141,subCategory:e.Display}},categoryName:"PresetStocksTab",presetOrder:5,instrumentType:eInstrumentType.Stocks,ascOrderPresetIds:[],descOrderPresetIds:[],searchPresetIds:[141]},{presets:{ETFMostPopular:{id:104,subCategory:e.Display},ETFHot:{id:105,subCategory:e.Display},ETFTopGainers:{id:106,subCategory:e.Display},ETFTopLosers:{id:107,subCategory:e.Display},ETFCommodities:{id:108,subCategory:e.Assets},ETFEquityCountries:{id:109,subCategory:e.Assets},ETFEquityIndices:{id:110,subCategory:e.Assets},ETFEquitySectors:{id:111,subCategory:e.Assets},ETFFixedIncome:{id:112,subCategory:e.Assets}},ascOrderPresetIds:[107],descOrderPresetIds:[106],categoryName:"PresetETFTab",presetOrder:6,instrumentType:eInstrumentType.ETF,searchPresetIds:[108,109,110,111,112]},{presets:{CryptoMostPopular:{id:120,subCategory:e.Display},CryptoHot:{id:121,subCategory:e.Display},CryptoTopGainers:{id:122,subCategory:e.Display},CryptoTopLosers:{id:123,subCategory:e.Display},CryptoCurrencies:{id:124,subCategory:e.Display}},ascOrderPresetIds:[123],descOrderPresetIds:[122],categoryName:"PresetCryptoTab",presetOrder:7,instrumentType:eInstrumentType.Crypto,searchPresetIds:[124]}]});var eSignalTrendsImageClasses={South:"ico-sh-arrow-down",SouthEast:"ico-sh-arrow-south-east",East:"ico-sh-arrow-right",North:"ico-sh-arrow-up",NorthEast:"ico-sh-arrow-north-east",None:""},eSignalTrendsColorClasses={Green:"green",Red:"red",Neutral:"neutral"},eSignalTrendsValues={StrongSell:"-2",Sell:"-1",Neutral:"0",Buy:"1",StrongBuy:"2"},eForms={Quotes:1,OpenDeals:2,Limits:3,ClosedDeals:4,Wallet:5,ClosedDealDetails:7,Balance:10,NetExposure:11,Withdrawal:12,EditFavoriteInstruments:13,Deposit:15,EditClosingLimit:16,InternalContactUs:17,PendingWithdrawal:18,EditLimit:20,Menu:21,Charts:23,AddInstrument:24,ThirdParty:25,Aml:26,ClientQuestionnaire:27,UploadDocuments:28,TradingSignals:30,EconomicCalendar:31,TradingSignalDetails:32,EconomicCalendarFilter:33,ConcretePaymentForm:34,Transaction:35,CashBack:50,ChangePassword:51,NotificationsSettings:52,ClosedDealsFilter:53,CloseDeal:54,ContractRollover:55,AccountCardRecords:56,WithdrawalBankDetails:57,WithdrawalCCDetails:58,AccountCardRecordsCosts:60,EducationalTutorials:61,EducationalTutorialsAccess:62,SignalsDisclaimer:63,DepositSuccess:64,DepositPending:65,HelpDepositThankYou:68,LoginOptions:69,HelpUploadDocuments:70,PriceAlerts:71,WireTransfer:72,WireTransferSuccess:73,NewPriceAlert:74,UserFlowMap:75,LanguageSettings:76,PersonalInformation:77},eViewTypes={vQuotes:1,vOpenDeals:2,vLimits:3,vClosedDeals:4,vWallet:5,vNewDeal:6,vClosedDealDetails:7,vNewLimit:9,vBalance:10,vNetExposure:11,vWithdrawal:12,vEditFavoriteInstruments:13,vQuotesPreset:14,vCreditCardRegular:15,vEditClosingLimit:16,vContact:17,vPendingWithdrawal:18,vEditLimit:20,vMenu:21,vCharts:23,vAddInstrument:24,vTradingSummery:25,vSummeryView:26,vHomepageContent:27,vSideMenu:28,vChangePassword:29,vActivityLog:31,vPersonalDetails:34,vToolBar:35,vPageTitle:36,vClosedDealsSummaries:39,vCloseDeal:40,vRolledOver:41,vEditDealLimit:42,vOrderTabs:43,vMarginStatus:44,vViewAndPrintWithdrawal:46,vTransactionsReport:47,vRelatedPosition:48,vUploadDocuments:49,vComodoSSLImage:50,vThirdParty:51,vTradingSignals:52,vTradingSignalsTutorials:53,vDynamicHeader:54,vTutorials:59,vCreditCard3rdParty:60,vPaymentTypes:61,vEmpCashU:62,vEpaylinks:63,vSafeChargeCashier:100,vAmlStatus:64,vClientQuestionnaire:65,vMissingCustomerInformation:66,vAstropay:69,vNetellerGO:70,vPaySafeCard:71,vMoneyBookers:72,vConcretePaymentForm:75,vGlobalCollectAPM:76,vCashBack:77,vInatecAPMGiropay:78,vInatecAPMPrzelewy24:79,vMarketClosed:80,vNoAPIClearer:81,vEcoPayz:82,vSofortDirect:83,vClosedDealsFilter:84,vSignalsDisclaimer:130,vEconomicCalendar:200,vTradingSignalDetails:201,vEconomicCalendarFilter:202,vPopupHeader:203,vTransactionSwitcher:204,vKluwp:205,vNotificationsSettings:206,vRPN:207,vPayPal:208,vContractRollover:209,vAccountCardRecords:210,vWithdrawalBankDetails:211,vWithdrawalCCDetails:212,vAstropayCard:213,vInternalContactUs:214,vEducationalTutorialsSwitcher:216,vEducationalTutorialsAccess:217,vGenericCreditCard:218,vDepositSuccessThankYou:219,vDepositPendingThankYou:220,vHelpDepositThankYou:223,vLoginOptions:224,vHelpUploadDocuments:225,vPayRetailers:226,vPriceAlerts:227,vRisingSunAPM:228,vWireTransfer:229,vWireTransferSuccess:230,vNewPriceAlert:231,vUserFlowMap:232,vLanguageSettings:233,vPersonalInformation:234,vJeton:235},eTemplateNames={editLimitNavigator:"deal-details-navigator"},eFullScreenControl={},eFullScreenTogleControls={};function addMemberOnObject(e,t,n){void 0!==Browser&&Browser.isDefinePropertySupported()?Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!1,configurable:!0}):n[e]=t}function addMemberOnArrayPrototype(e,t){addMemberOnObject(e,t,Array.prototype)}function addMemberOnArray(e,t){addMemberOnObject(e,t,Array)}addMemberOnArrayPrototype("remove",function(e){for(var t=[],n=0;n<this.length;n++)-1===e.indexAt(this[n])&&t.push(this[n]);return t}),addMemberOnArrayPrototype("removeItem",function(e){var t=this.indexAt(e);-1<t&&this.splice(t,1)}),addMemberOnArrayPrototype("clear",function(){for(;0<this.length;)this.pop()}),addMemberOnArrayPrototype("compareTo",function(e){if(this.length!==e.length)return!1;for(var t=0;t<e.length;t++){if(this[t].compare&&!this[t].compare(e[t]))return!1;if(this[t]!==e[t])return!1}return!0}),addMemberOnArrayPrototype("indexAt",function(e){for(var t=this.length,n=0;n<t;){if(this[n]===e)return n;++n}return-1}),addMemberOnArrayPrototype("addUnique",function(e){return-1===this.indexAt(e)&&this.push(e),this}),addMemberOnArrayPrototype("contains",function(e){for(var t=this.length;t--;)if(this[t]==e)return!0;return!1}),Array.isArray||addMemberOnArray("isArray",function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.find||(addMemberOnArrayPrototype("find",function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(o in n&&(t=n[o],e.call(i,t,o,n)))return t}),Array.prototype.filter||addMemberOnArrayPrototype("filter",function(e){if(null==this)throw new TypeError;var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var r=[],i=2<=arguments.length?arguments[1]:void 0,o=0;o<n;o++)if(o in t){var a=t[o];e.call(i,a,o,t)&&r.push(a)}return r})),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return o;return-1},enumerable:!1,configurable:!0,writable:!0}),Array.prototype.indexOf||addMemberOnArrayPrototype("indexOf",function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),i<=o)return-1;for(n=Math.max(0<=o?o:i-Math.abs(o),0);n<i;){if(n in r&&r[n]===e)return n;n++}return-1}),Array.prototype.map||addMemberOnArrayPrototype("map",function(e,t){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),a=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(n=t),r=new Array(a),i=0;i<a;){var s,l;i in o&&(s=o[i],l=e.call(n,s,i,o),r[i]=l),i++}return r}),Array.prototype.reduce||addMemberOnArrayPrototype("reduce",{value:function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),r=n.length>>>0,i=0;if(2<=arguments.length)t=arguments[1];else{for(;i<r&&!(i in n);)i++;if(r<=i)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;i<r;)i in n&&(t=e(t,n[i],i,n)),i++;return t}}),addMemberOnArrayPrototype("concatUnique",function(e){if(!e||!isArrayType(e)||isEmptyType(e))return this;var t=this;return this.concat(e.filter(function(e){return t.indexOf(e)<0}))}),addMemberOnArrayPrototype("concatUniqueObject",function(e){if(!e||!isArrayType(e)||isEmptyType(e))return this;var n=this;return this.concat(e.filter(function(t,e){return-1===n.findIndex(function(e){return JSON.stringify(e)===JSON.stringify(t)})}))}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=t[i];if(e.call(r,o,i,t))return o;i++}},configurable:!0,writable:!0});var eDayOfWeek={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};function timeStamp(){return(new Date).getTime()}function datePad(e){return e<10?"0"+e:e}function TAjaxerStatus(e,t){this.State=e||eAjaxerState.None,this.Data=t||null}function TAjaxer(e){var d=this,p=function(){var e;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)for(var t=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp","Microsoft.XMLHTTP"],n=0;n<t.length;n++)try{e=new ActiveXObject(t[n])}catch(e){}return e}(),A=0,f=5,r=e||1e3,h=!1,i=null,o=UrlResolver.getApplicationRelativePath();function m(t,n,e){var r=Q.defer();return t=isFunctionType(t)?t:emptyFn,n=isFunctionType(n)?n:emptyFn,e=isFunctionType(e)?e:emptyFn,r.promise.progress(e.bind(d,r)),r.promise=r.promise.then(function(e){return t.call(d,e)||e}),r.promise.fail(function(e){throw n.call(d,e),e}),r}function g(e,t,n){if(n.State=n.State||eAjaxerState.None,n.State===eAjaxerState.Retry){if(a(),!isFunctionType(e))return;i=setTimeout(e.bind(d,t),r)}}function v(e,t,n,r,i,o,a,s,l,u){l=!isBooleanType(l)||l,o=o||1;var c=isNumber(a)?Number(a):f,A=Date.now();return u||(u=m(r,i,function(e,t){o+=1,g(v.bind(d,t.Data.callerInfo,t.Data.url,null,t.Data.onComplete,t.Data.onError,o,t.Data.maxRetries,t.Data.SLA,null,e),e,t)})),p?(n&&(t+=(-1===t.indexOf("?")?"?":"&")+n),p.open("GET",C(t,l),!0),UrlResolver.isCors(t)||(p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.setRequestHeader("Accept","application/json")),p.onreadystatechange=b.bind(p,e,t,n,o,c,u,s,A),p.send()):u.reject(new Error("AJAXER (description: XMLHttpRequest could not be created, callerInfo: "+e+", url: "+t+", params: "+n+", request time: "+A+", tryCounter: "+o+", maxRetries: "+c+", SLA: "+s+",noCahe: "+l+")")),u.promise}function y(e,t,n,r,i,o,a,s,l){o=o||1;var u=isNumber(a)?Number(a):A,c=Date.now();if(l||(l=m(r,i,function(e,t){o+=1,g(y.bind(d,t.Data.callerInfo,t.Data.url,t.Data.params,t.Data.onComplete,t.Data.onError,o,t.Data.maxRetries,t.Data.SLA,e),e,t)})),p){if(n){n.match(/SecurityToken/i)&&!$customer.isAuthenticated()&&l.reject(new Error("AJAXER (description: Request is not authenticated, callerInfo: "+e+", url: "+t+", params: "+n+", request time: "+c+", tryCounter: "+o+", maxRetries: "+u+", SLA: "+s+")"))}}else l.reject(new Error("AJAXER (description: XMLHttpRequest could not be created, callerInfo: "+e+", url: "+t+", params: "+n+", request time: "+c+", tryCounter: "+o+", maxRetries: "+u+", SLA: "+s+")"));if(l.promise.isPending()){p.open("POST",C(t,!0),!0),p.onreadystatechange=b.bind(p,e,t,n,o,u,l,s,c),UrlResolver.isCors(t)||(p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.setRequestHeader("X-Requested-With","XMLHttpRequest")),p.send(n)}return l.promise}function w(e,t,n,r,i,o,a,s,l){o=o||1;var u=isNumber(a)?Number(a):A,c=Date.now();if(l||(l=m(r,i,function(e,t){o+=1,g(w.bind(d,t.Data.callerInfo,t.Data.url,t.Data.params,t.Data.onComplete,t.Data.onError,o,t.Data.maxRetries,t.Data.SLA,e),e,t)})),p){p.open("POST",C(t,!0),!0),p.onreadystatechange=b.bind(p,e,t,n,o,u,l,s,c,!0),UrlResolver.isCors(t)||(p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.setRequestHeader("Content-Type","application/json; charset=utf-8")),p.send(n)}else l.reject(new Error("AJAXER (description: XMLHttpRequest could not be created, callerInfo: "+e+", url: "+t+", params: "+n+", request time: "+c+", tryCounter: "+o+", maxRetries: "+u+", SLA: "+s+")"));return l.promise}function b(e,t,n,r,i,o,a,s){var l,u,c=this,A=C(t);if(4==c.readyState){u=(l=Date.now())-s;var d=c.getAllResponseHeaders?c.getAllResponseHeaders():"";switch(c.status){case 200:a&&s&&a<u&&o.notify(new TAjaxerStatus(eAjaxerState.SlaCompromised,{url:A,params:n,"request time":s,"response time":l,duration:u,callerInfo:e,tryCounter:r,maxRetries:i,SLA:a})),c.responseText&&(-1!=c.responseText.indexOf('"result":"ServerError"')?ErrorManager.onError(A,"Server Error",eErrorSeverity.high):-1!=c.responseText.indexOf('"result":"SecurityError"')?ErrorManager.onError(A,"Security Error",eErrorSeverity.high):-1!=c.responseText.indexOf('"result":"ServiceError"')?ErrorManager.onError(A,"Service Unavailable",eErrorSeverity.low):-1!=c.responseText.indexOf('"status":"ServerError"')&&o.reject(new AjaxError("Http500",d),t),o.resolve(c.responseText));break;case 401:case 403:case 420:o.reject(new AjaxError(c.status,"http"+c.status,t));break;case 417:o.reject(new AjaxError(c.status,'AJAXER (description: Double request for resource "'+t+'", callerInfo: '+e+", url: "+t+", params: "+n+", request time: "+s+", response time: "+l+", duration: "+u+", tryCounter: "+r+", maxRetries: "+i+", SLA: "+a+")"));break;case 424:!h&&r<i?o.notify(new TAjaxerStatus(eAjaxerState.Retry,{url:A,params:n,"request time":s,"response time":l,duration:u,callerInfo:e,tryCounter:r,maxRetries:i,SLA:a})):o.reject(AjaxError.fromXHR(c,'AJAXER (description: Version mismatch for resource "'+t+'", callerInfo: '+e+", url: "+t+", params: "+n+", request time: "+s+", response time: "+l+", duration: "+u+", tryCounter: "+r+", maxRetries: "+i+", SLA: "+a+")"));break;case 0:!h&&r<i?o.notify(new TAjaxerStatus(eAjaxerState.Retry,{url:A,params:n,"request time":s,"response time":l,duration:u,callerInfo:e,tryCounter:r,maxRetries:i,SLA:a})):o.reject(AjaxError.fromXHR(c,'AJAXER (description: Request was aborted for resource "'+t+'", callerInfo: '+e+", url: "+t+", params: "+n+", request time: "+s+", response time: "+l+", duration: "+u+", tryCounter: "+r+", maxRetries: "+i+", SLA: "+a+")response headers: "+d));break;default:!h&&r<i?o.notify(new TAjaxerStatus(eAjaxerState.Retry,{url:A,params:n,"request time":s,"response time":l,duration:u,callerInfo:e,tryCounter:r,maxRetries:i,SLA:a})):o.reject(new AjaxError(c.status,'AJAXER (description: Request failed for resource "'+t+'", status code was '+c.status+", callerInfo: "+e+", url: "+t+", params: "+n+", request time: "+s+", response time: "+l+", duration: "+u+", tryCounter: "+r+", maxRetries: "+i+", SLA: "+a+")response headers: "+d))}}}function C(e,t){var n,r=String.empty;return t&&(e=UrlResolver.getUrlWithRndKeyValue(e)),n=e.startsWith(o)||e.startsWith("http")?String.empty:o,UrlResolver.combine(n,e,r)}function a(e){h=!!e,i&&(clearTimeout(i),i=null)}function t(){p&&(a(),p.abort())}return{abort:t,get:function(){v.apply(d,arguments).done()},post:function(){y.apply(d,arguments).done()},jsonPost:function(){w.apply(d,arguments).done()},promises:{abort:t,get:v,post:y,jsonPost:w}}}Date.prototype.toDotNetString=function(){return"/Date("+this.getTime()+")/"},Date.prototype.AddSeconds=function(e){var t=1e3*e;return this.setTime(this.getTime()+t),this},Date.prototype.AddDays=function(e){return this.setDate(this.getDate()+e),this},Date.prototype.AddWeeks=function(e){return this.setDate(this.getDate()+7*e),this},Date.prototype.AddMonths=function(e){return this.setMonth(this.getMonth()+e),this},Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},Date.prototype.Clone=function(){return new Date(this.getTime())},Date.prototype.ExtractDate=function(){return this.getDate()+"/"+(this.getMonth()+1)+"/"+this.getFullYear()},Date.prototype.ExtractDateUTC=function(){return this.getUTCDate()+"/"+(this.getUTCMonth()+1)+"/"+this.getUTCFullYear()},Date.prototype.ExtractDateShortYear=function(){return pad(this.getDate(),2)+"/"+pad(this.getMonth()+1,2)+"/"+this.getFullYear().toString().substr(2,2)},Date.prototype.ExtractDateLongYear=function(){return pad(this.getDate(),2)+"/"+pad(this.getMonth()+1,2)+"/"+this.getFullYear()},Date.prototype.ExtractDateShortYearUTC=function(){return pad(this.getUTCDate(),2)+"/"+pad(this.getUTCMonth()+1,2)+"/"+this.getUTCFullYear().toString().substr(2,2)},Date.prototype.ExtractNextYearDate=function(){return this.getDate()+"/"+(this.getMonth()+1)+"/"+(this.getFullYear()+1)},Date.prototype.ExtractHour=function(){return this.getHours()},Date.prototype.ExtractTime=function(){return pad(this.getHours(),2)+":"+pad(this.getMinutes(),2)},Date.prototype.ExtractTimeUTC=function(){return pad(this.getUTCHours(),2)+":"+pad(this.getUTCMinutes(),2)},Date.prototype.ExtractFullTime=function(){return pad(this.getHours(),2)+":"+pad(this.getMinutes(),2)+":"+pad(this.getSeconds(),2)},Date.prototype.shortDateTime=function(){return this.getDate()+"/"+(this.getMonth()+1)+"/"+this.getFullYear()+"  "+this.getHours()+":"+this.getMinutes()+":"+this.getSeconds()},Date.prototype.AddYear=function(e){return this.setFullYear(this.getFullYear()+e),this},Date.prototype.compareTo=function(e){return"string"==typeof e&&(e=new Date(e)),this.valueOf()>e.valueOf()?1:0},Date.prototype.isWeekend=function(){var e=this.getDay();return e===eDayOfWeek.Sunday||e===eDayOfWeek.Saturday},Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+datePad(this.getUTCMonth()+1)+"-"+datePad(this.getUTCDate())+"T"+datePad(this.getUTCHours())+":"+datePad(this.getUTCMinutes())+":"+datePad(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}),Date.prototype.toShortISOString=function(){return this.getUTCFullYear()+"-"+datePad(this.getUTCMonth()+1)+"-"+datePad(this.getUTCDate())},Date.prototype.skipWeekendDays=function(){return this.getDay()===eDayOfWeek.Saturday&&(this.AddDays(2),this.setHours(23),this.setMinutes(59)),this.getDay()===eDayOfWeek.Sunday&&(this.AddDays(1),this.setHours(23),this.setMinutes(59)),this},Date.prototype.toLaterDate=function(){return this.AddDays(14),this.setHours(23),this.setMinutes(59),this.setSeconds(0),this},Date.prototype.getPureUTCDate=function(){return new Date(this.getUTCDate(),this.getUTCMonth(),this.getUTCFullYear())},Date.prototype.isValid=function(e,t,n){return this.setYear(e),this.setDate(n),this.setMonth(t-1),this.getDate()===n&&this.getMonth()+1===t&&this.getFullYear()===e},Number.toStr=function(e){for(var t=e.toString(),n=(t+="").split("."),r=n[0],i=1<n.length?"."+n[1]:"",o=/(\d+)(\d{3})/;o.test(r);)r=r.replace(o,"$1,$2");return r+i.substr(0,5)},Number.fromStr=function(e){var t=1;return e?(0<=e.indexOf(",")&&(e=e.replace(/,/g,"")),0<=e.indexOf("M")&&(t=1e6,e=e.replace(/M/g,"")),0<=e.indexOf("K")&&(t=1e3,e=e.replace(/K/g,"")),Number(e)*t):Number.NaN},Number.prototype.sign=function(){return Math.round(this)},"number"!=typeof Number.MIN_SAFE_INTEGER&&(Number.MIN_SAFE_INTEGER=-9007199254740991),"number"!=typeof Number.MAX_SAFE_INTEGER&&(Number.MAX_SAFE_INTEGER=9007199254740991),"number"!=typeof Number.MAX_INT32_SAFE_INTEGER&&(Number.MAX_INT32_SAFE_INTEGER=2147483647),String.empty="",String.format=function(){var e,t,n;if("object"==typeof arguments[1])for(e=0;e<arguments[1].length;e++)t=new RegExp("\\{"+e+"\\}","gm"),arguments[0]=arguments[0].replace(t,arguments[1][e]);else for(e=1;e<arguments.length;e++)n=new RegExp("\\{"+(e-1)+"\\}","gm"),arguments[0]=arguments[0].replace(n,arguments[e]);return arguments[0]},String.prototype.round=function(){var e=this;if(e&&0<e.length){var t=e.replace(/,/g,""),n=Math.round(t);isNaN(n)||(e=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}return e},String.prototype.sign=function(){var e=this.replace(/,/g,""),t=Math.round(e);return isNaN(t)?0:t},String.prototype.cleanComma=function(){var e=this.replace(/,/g,"");return isNaN(e)?0:e},String.prototype.replaceAll=function(e,t,n){var r,i,o=-1;if((r=this.toString())&&"string"==typeof e)for(i=!0===n?e.toLowerCase():void 0;-1!==(o=void 0!==i?r.toLowerCase().indexOf(i,0<=o?o+t.length:0):r.indexOf(e,0<=o?o+t.length:0));)r=r.substring(0,o).concat(t).concat(r.substring(o+e.length));return r},String.prototype.toNumeric=function(){if(isNumberType(this))return this;for(var e=[],t=0;t<this.length;t++){var n=this.substr(t,1);","!==n&&e.push(n)}return parseFloat(e.join(""))},String.prototype.containsNotEmpty||(String.prototype.containsNotEmpty=function(){return!!(arguments&&0<arguments[0].length)&&-1!==String.prototype.indexOf.apply(this,arguments)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.capitalizeFirstLetter||(String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t||0,e.length)===e}),String.prototype.isRtlText=function(){return cArabicChars.test(this)},Object.keys=Object.keys||function(){var i=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=a.length;return function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var n in e)i.call(e,n)&&t.push(n);if(o)for(var r=0;r<s;r++)i.call(e,a[r])&&t.push(a[r]);return t}}(),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),Object.isEmpty=Object.isEmpty||function(e){return 0===Object.keys(e).length&&JSON.stringify(e)===JSON.stringify({})};var AmountConverter={Convert:function(e,t,n){var r,i;if(!isNullOrUndefined(t))return r="function"==typeof t.bid?t.bid():t.bid,i="function"==typeof t.ask?t.ask():t.ask,!0===n&&(i=r=Format.toMidRate(r,i)),t.isOppositeInstrumentFound?e<0?e*t.instrumentFactor/r:e*t.instrumentFactor/i:e<0?e*i/t.instrumentFactor:e*r/t.instrumentFactor}},ContentHandler=function(){var t=String.format('href="#" data-bind="click: {0}" ',function(){$viewModelsManager.VManager.SwitchViewVisible(eForms.UploadDocuments,{})}.toString());return{replaceComplianceDocumentLink:function(e){return e.replaceAll('href="ComplianceDocument.aspx"',t)}}}(),CookieHandler={CookiesEnabled:function(){try{document.cookie="cookietest=1";var e=-1!==document.cookie.indexOf("cookietest=");return document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(e){return!1}},CreateCookie:function(e,t,n){var r;t&&(r=n?"; expires="+n.toGMTString():"",document.cookie=e+"="+t+r+"; path=/")},ReadCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return null},EraseCookie:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/"}};function TDeal(e,t){e=e||[],t=t||[],this.instrumentID=e[eDeal.instrumentID],this.orderID=e[eDeal.orderID],this.baseSymbol=e[eDeal.baseSymbol],this.otherSymbol=e[eDeal.otherSymbol],this.positionNumber=e[eDeal.positionNumber],this.accountNumber=e[eDeal.accountNumber],this.orderDir=e[eDeal.orderDir],this.orderRate=e[eDeal.orderRate],this.buySymbolID=e[eDeal.buySymbolID],this.buyAmount=e[eDeal.buyAmount],this.sellSymbolID=e[eDeal.sellSymbolID],this.sellAmount=e[eDeal.sellAmount],this.valueDate=e[eDeal.valueDate],this.dealType=e[eDeal.dealType],this.exeTime=e[eDeal.exeTime],this.slRate=e[eDeal.slRate],this.slID=e[eDeal.slID],this.tpRate=e[eDeal.tpRate],this.tpID=e[eDeal.tpID],this.additionalPL=e[eDeal.additionalPL]||0,this.spreadDiscount=e[eDeal.spreadDiscount]||0,this.spotRate=t[eDealPL.spotRate]||0,this.fwPips=t[eDealPL.fwPips]||0,this.closingRate=t[eDealPL.closingRate]||0,this.pl=t[eDealPL.pl]||0,this.lastUpdate=t[eDealPL.lastUpdate],this.commission=t[eDealPL.commission]||0}function TDelegate(){this._items=[]}function AttachEvent(e,t,n){return null!=e&&(!!e.id&&("function"==typeof n&&($("#"+e.id).on(t,n),!0)))}function RemoveEvent(e,t){return null!=e&&(""!=e.id&&(void 0===t?$("#"+e.id).off():$("#"+e.id).off(t),!0))}function functionName(e){var t=e.toString();return t.substring(t.indexOf("function")+9,t.indexOf("("))||"anonymous"}function ref(e){return document.getElementById(e)}function refByName(e){return document.getElementsByName(e)}TDeal.prototype.Update=function(e){this.instrumentID=e[eDeal.instrumentID],this.baseSymbol=e[eDeal.baseSymbol],this.otherSymbol=e[eDeal.otherSymbol],this.orderID=e[eDeal.orderID],this.positionNumber=e[eDeal.positionNumber],this.accountNumber=e[eDeal.accountNumber],this.orderDir=e[eDeal.orderDir],this.orderRate=e[eDeal.orderRate],this.buySymbolID=e[eDeal.buySymbolID],this.buyAmount=e[eDeal.buyAmount],this.sellSymbolID=e[eDeal.sellSymbolID],this.sellAmount=e[eDeal.sellAmount],this.valueDate=e[eDeal.valueDate],this.dealType=e[eDeal.dealType],this.exeTime=e[eDeal.exeTime],this.slRate=e[eDeal.slRate],this.slID=e[eDeal.slID],this.tpRate=e[eDeal.tpRate],this.tpID=e[eDeal.tpID],this.additionalPL=e[eDeal.additionalPL],this.spreadDiscount=e[eDeal.spreadDiscount]||0},TDeal.prototype.UpdatePL=function(e){this.spotRate=e[eDealPL.spotRate],this.fwPips=e[eDealPL.fwPips],this.closingRate=e[eDealPL.closingRate],this.pl=e[eDealPL.pl],this.lastUpdate=e[eDealPL.lastUpdate],this.commission=e[eDealPL.commission]},TDelegate.prototype.Add=function(e){isFunctionType(e)&&this._items.push(e)},TDelegate.prototype.Invoke=function(){for(var e=this._items.slice(0),t=e.length,n=argsToArray(arguments),r=0;r<t;r++)isFunctionType(e[r])&&e[r].apply(null,n);e.length=0},TDelegate.prototype.Remove=function(e){for(var t=this._items.length,n=0;n<t;n++)if(this._items[n]===e){this._items.splice(n,1);break}},TDelegate.prototype.Flush=function(){this._items.splice(0)},$.fn.isBound=function(e,t){var n=this.data("events");if(!n)return!1;var r=n[e];return null!=r&&(!!r.length&&-1!==$.inArray(t,r))};var pow10cache=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function RateRound(e,t){if(!isNumber(e))return"NA";var n=e.toString(),r="-"===n[0],i=r?n.substring(1,n.length):n,o=t||7;if(0==lenAfterDelimeter(i))return r?0-parseInt(i,10):parseInt(i,10);var a=o-lenBeforeDelimiter(i)-1,s=Math.pow(10,a),l=Math.round(toNumeric(i)*s)/s;return r?0-l:l}function trailingZeros(e,t){if(!isNumber(e))return"NA";if(e.toString().length<t){for(var n=e.toString().split(""),r=n.length;r<t;r++)n[r]=n.join("").indexOf(".")<0?".":"0";var i=n.join("");e=0==i.split(".")[1].length?i.replace(".",""):i}return e.toString()}function InRange(e,t){return e>t.far()&&e<t.near()||e>t.near()&&e<t.far()}var RateAndPipsAndLastClosePip=function(e,t,n){return{rate:e,pips:t,lastPip:n}};function lenBeforeDelimiter(e){return isNumber(e)?Math.floor(Math.abs(e)).toString().length:"NA"}function lenAfterDelimeter(e){if(!isNumber(e))return"NA";var t=e.toString().split(".");return 1==t.length?0:t[1].length}function isInt(e){var t=parseInt(e,10);return!isNaN(t)&&e==t}function isEmpty(e){return 0==e.length||""==e}function isNumber(e){var t=parseFloat(e);return!isNaN(t)&&e==t}function isPos(e){var t=0;return isNumber(e)&&(t=parseFloat(e)),0<t}function toInt(e){var t=parseInt(e.replace(/,/g,""),10);return isNaN(t)?"NA":t}function toNumeric(e){if(isDefinedType(e)&&!isNullType(e)){if(isNumberType(e))return e;for(var t=[],n=0;n<e.length;n++){var r=e.substr(n,1);","!==r&&t.push(r)}var i=parseFloat(t.join(""));return isNaN(i)?"NA":i}}function toBoolean(e){return(!isStringType(e)||"false"!=e.toLowerCase())&&Boolean(e)}function GetMouseCoords(e){var t={x:0,y:0};return(e=e||window.event).pageX||e.pageY?(t.x=e.pageX,t.y=e.pageY):(t.x=e.clientX+(document.body.scrollLeft||document.documentElement.scrollLeft)-document.documentElement.clientLeft,t.y=e.clientY+(document.body.scrollTop||document.documentElement.scrollTop)-document.documentElement.clientTop),t}function PageYScroll(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop}function WindowInfo(){var e={height:0,width:0,innerHeight:0,yScroll:0};return e.height=Math.max($(document).height(),$(window).height(),document.documentElement.clientHeight),e.width=Math.max($(document).width(),$(window).width(),document.documentElement.clientWidth),e.innerHeight=window.innerHeight||document.documentElement.offsetHeight,e.yScroll=PageYScroll(),e}function BlockNonInteger(e){var t="";if((e=e||window.event).keyCode?t=e.keyCode:e.which&&(t=e.which),isNaN(t))return!0;if(8==t)return!0;var n=String.fromCharCode(t);return/\d/.test(n)}function pad(e,t){for(var n=String(e);n.length<t;)n="0"+n;return n}function SplitDateTime(e){var t,n="01",r="01",i="1900",o="00",a="00",s="00",l="000",u=e.split(" "),c=u.shift();if(c&&-1!=c.indexOf("/")){var A=c.split("/");n=A[0]?2==A[0].length?A[0]:"0"+A[0]:"01",r=A[1]?2==A[1].length?A[1]:"0"+A[1]:"01",i=A[2]?4==A[2].length?A[2]:"20"+A[2]:"1900",u.push(c),c=u.shift()}if(t=n+"/"+r+"/"+i,c&&-1!=c.indexOf(":")){var d=c.split(":");o=d[0]?2==d[0].length?d[0]:"0"+d[0]:"00",a=d[1]?2==d[1].length?d[1]:"0"+d[1]:"00",s=d[2]?2==d[2].length?d[2]:"0"+d[2]:"00",l=d[3]?d[3]:"000",u.push(c)}return{day:n,month:r,year:i,date:t,time:o+":"+a+":"+s,hour:o,min:a,sec:s,ms:l}}var SelectOptionItem=function(e,t){this.value=e,this.text=t},fillHoursList=function(e,t,n,r){if(e){e.length=0;for(var i=r=r||0;i<=t;i++){var o=(i<10?"0"+i:i)+":00";e.push(new SelectOptionItem(o,o))}if(0!=n){var a=(t<10?"0"+t:t)+":"+(n<10?"0"+n:n);e.push(new SelectOptionItem(a,a))}}},str2Date=function(e,t){if(!e)return null;t=t||"d/m/Y";for(var n,r,i,o,a,s=e.split(/\W+/),l=t.split(/\W+/),u=new Date,c=0;c<s.length;c++)switch(l[c]){case"d":case"e":n=parseInt(s[c],10);break;case"m":r=parseInt(s[c],10)-1;break;case"Y":case"y":i=parseInt(s[c],10),i+=100<i?0:i<29?2e3:1900;break;case"H":case"I":case"k":case"l":o=parseInt(s[c],10);break;case"P":case"p":/pm/i.test(s[c])&&o<12?o+=12:/am/i.test(s[c])&&12<=o&&(o-=12);break;case"M":a=parseInt(s[c],10)}return new Date(void 0===i?u.getFullYear():i,void 0===r?u.getMonth():r,void 0===n?u.getDate():n,void 0===o?u.getHours():o,void 0===a?u.getMinutes():a,0)},addSign=function(e,t){return e!==eOrderDir.Sell&&e!==eOrderDir.Buy&&e!==eOrderDir.None?"NA":t===eLimitType.StopLoss?e==eOrderDir.Sell?">":"<":e===eOrderDir.Sell?"<":">"};function CompareValues(e,t,n){return isNumber(e)&&isNumber(t)?e==t?0:(Number(e)<Number(t)?-1:1)*(n?1:-1):e.localeCompare(t)}var setrDirectionMessageText=function(e){return e==eLimitType.StopLoss?Dictionary.GetItem("limtype1_short")+": ":e==eLimitType.TakeProfit?Dictionary.GetItem("limtype2_short")+": ":""},formatNumber=function(e,t){var n=e.replace(/,/g,""),r=Math.round(10*n)/10,i=Math.abs(r);return 999999999<i?r=(r/1e9).toFixed(2)+Dictionary.GetItem("roundB"):999999<i?r=(r/1e6).toFixed(2)+Dictionary.GetItem("roundM"):"K"==t&&9999<i&&(r%1e3==0?r/=1e3:r=(r/1e3).toFixed(1),r+=Dictionary.GetItem("roundK")),formatNumberWithThousandsSeparator(r)},formatRoundM=function(e){return formatNumber(e,"M")},formatWithThresholdAndDecimals=function(e,t){var n=e.replace(/,/g,""),r=Number(n).toFixed(2),i=Math.abs(r);return 999999999<i?r=(r/1e9).toFixed(2)+Dictionary.GetItem("roundB"):999999<i?r=(r/1e6).toFixed(2)+Dictionary.GetItem("roundM"):"K"==t&&9999<i&&(r%1e3==0?r/=1e3:r=(r/1e3).toFixed(1),r+=Dictionary.GetItem("roundK")),formatNumberWithThousandsSeparator(r)},formatRoundBasedOnThreshold=function(e,t){if(Math.abs(Number(e))>cConfig.AmountRoundingThreshold)return formatWithThresholdAndDecimals(e,t);var n=e.replace(/,/g,""),r=Number(n).toFixed(2);return formatNumberWithThousandsSeparator(r)},formatRoundMBasedOnThreshold=function(e){return formatRoundBasedOnThreshold(e,"M")},formatNumberWithThousandsSeparator=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},roundedNumberFromAmount=function(e){var t=e.toString().replace(/,/g,"");return Math.round(t)};function isNullType(e){return null===e}function isDefinedType(e){return void 0!==e}function isDefinedNotNullTypeReturnType(e){return null!=e?e:{}}function isArrayType(e){return"[object Array]"==Object.prototype.toString.apply(e)}function isStringType(e){return"string"==typeof e}function isBooleanType(e){return"boolean"==typeof e}function isNumberType(e){return"number"==typeof e&&isFinite(e)}function isIntType(e){return isNumberType(e)&&parseInt(e,10)==e}function isNullOrUndefined(e){return!isDefinedType(e)||!!isNullType(e)}function isEmptyType(e){return isEmptyValue(e)}function isEmptyValue(e){return!isDefinedType(e)||(!!isNullType(e)||(!!(isArrayType(e)&&e.length<1)||!!(isStringType(e)&&e.length<1)))}function isPrimitiveType(e){return isStringType(e)||isNumberType(e)||isBooleanType(e)}function isObjectType(e){return!!e&&"[object Object]"===Object.prototype.toString.apply(e)}function isDateType(e){return"[object Date]"===Object.prototype.toString.apply(e)}function isRegExpType(e){return"[object RegExp]"==Object.prototype.toString.apply(e)}function isFunctionType(e){return"function"==typeof e}function isIterableType(e){return!(!isArrayType(e)&&!e.callee)||(!!/NodeList|HTMLCollection/.test(Object.prototype.toString.call(e))||((void 0!==e.nextNode||e.item)&&isNumberType(e.length)||!1))}function eachType(e,t,n){if(!isEmptyValue(e)){isIterableType(e)&&!isPrimitiveType(e)||(e=[e]);for(var r=0,i=e.length;r<i;r++)if(!1===t.apply(n||e[r],[e[r],r,e]))return}}function iterateType(e,t,n){if(!isEmptyValue(e))if(isIterableType(e))eachType(e,t,n);else if(isObjectType(e))for(var r in e)if(e.hasOwnProperty(r)&&!1===t.apply(n||e,[r,e[r],e]))return}function extendType(e,t,n){if(n&&extendType(e,n),e&&t&&"object"==typeof t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function extendIfType(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(isDefinedType(e[n])||(e[n]=t[n]));return e}function cloneHardCopy(e){return $.extend(!0,{},e)}function urlEncode(e,t){var n,r=[],i=encodeURIComponent;return iterateType(e,function(t,e){eachType((n=isEmptyValue(e))?t:e,function(e){r.push("&",i(t),"=",isEmptyValue(e)||e==t&&n?"":isDateType(e)?i(e).replace(/"/g,""):i(e))})}),t?-1==t.lastIndexOf("?")&&(r.shift(),t+="?"):(r.shift(),t=""),t+r.join("")}function urlDecode(e,t){if(e.length<1)return{};for(var n,r,i={},o=(e=e.split("#")[0]).slice(e.indexOf("?")+1).split("&"),a=decodeURIComponent,s=0,l=o.length;s<l;s++){var u=o[s].split("=");n=u[0],r=a(u[1]),i[n]=t||!i[n]?r:[].concat(i[n]).concat(r)}return i}function escapeRe(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")}function emptyFn(){}function simulatedContentStringLegth(e,t){var n=t||"23px arial",r=$("<div>"+e+"</div>").css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:n}).appendTo($("body")),i=r.width();return r.remove(),i}function equals(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!=e&&t!=t)return!0;var n,r,i,o=typeof e;if(o==typeof t&&"object"==o){if(!isArrayType(e)){if(isDateType(e))return isDateType(t)&&e.getTime()==t.getTime();if(isRegExpType(e)&&isRegExpType(t))return e.toString()==t.toString();if(isArrayType(t))return!1;for(r in i={},e)if(!isFunctionType(e[r])){if(!equals(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!i.hasOwnProperty(r)&&void 0!==t[r]&&!isFunctionType(t[r]))return!1;return!0}if(!isArrayType(t))return!1;if((n=e.length)==t.length){for(r=0;r<n;r++)if(!equals(e[r],t[r]))return!1;return!0}}return!1}function argsToArray(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n];return t}function getKeyByValue(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n;return null}function padNumber(e){return("0"+e).slice(-2)}function extractNumberFromString(e){if(isEmptyValue(e))return"NA";var t=e.match(/[+-]?\d+(\.\d+)?/g);return null==t?"NA":parseFloat(t.join(""))}function createGuid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function extractGuid(e){var t=e.indexOf("#"),n="";if(-1!==t)for(var r=e.substring(t,e.length).split("&"),i=0;i<r.length;i++)if(-1!==r[i].indexOf("guid")){n=r[i].split("=")[1];break}return n}function objectFirst(e,t){if(!e||!t||!isFunctionType(t))return null;if(isArrayType(e)){for(var n=0,r=e.length;n<r;n++)if(t(e[n],n))return e[n];return null}for(var i in e)if(e.hasOwnProperty(i)&&t(e[i]))return e[i];return null}function objectFilter(e,t){if(!e||!t||!isFunctionType(t))return null;if(isArrayType(e))return e.filter(t);var n=[];for(var r in e)e.hasOwnProperty(r)&&t(e[r])&&n.push(e[r]);return n}function objectContainsKey(e,t){if(!e)return null;for(var n in e)if(e.hasOwnProperty(n)&&n==t)return!0;return!1}function objectContainsValue(e,t){if(!e)return null;for(var n in e)if(e.hasOwnProperty(n)&&e[n]==t)return!0;return!1}function objectMap(e,t){if(!e||!t||!isFunctionType(t))return null;if(isArrayType(e))return e.map(t);var n=[];for(var r in e)e.hasOwnProperty(r)&&n.push(t(e[r]));return n}function objectToArray(e){if(!e)return null;if(isArrayType(e))return e;var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function disposeArray(e){for(var t,n=0,r=e.length;n<r;n++)(t=e[n])&&isFunctionType(t.dispose)&&t.dispose();e.length=0}function containsHtmlTags(e){return/<[a-z][\s\S]*>/i.test(e)}function isPromiseFulfilled(e){return"fulfilled"===e.inspect().state}function latinizeString(e){return latinize(e)}function getEnumName(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n;return null}Function.prototype.override=function(e){if(!isFunctionType(e))throw new SyntaxError("Function is required");var t=this;return function(){return this.superFunction=t,e.apply(this,arguments)}},Boolean.parse=function(e){if(isStringType(e)){var t={no:!1,false:!1,yes:!0,true:!0};if((e=String(e).toLowerCase())in t)return t[e]}return!!e};var Format={toAmount:function(e,t){return isNumber(e)?(e=Math.abs(Number(e)),t?e.toFixed(t):Math.floor(e)):"NA"},toFixedAmount:function(e){var t=roundedNumberFromAmount(e);return isNumber(t)?formatNumberWithThousandsSeparator(t):"NA"},toNumberWithThousandsSeparator:function(e,t,n){var r=toNumeric(e);return n=isDefinedType(n)?n:"NA",isNumber(r)?(0<=t&&(r=r.toFixed(t)),formatNumberWithThousandsSeparator(r)):n},toSign:function(e){var t={"signNumber symbol":function(e,t){return e.push(" "+t),e.join("")},"sign number symbol":function(e,t){return e.splice(1,0," "),e.push(" "+t),e.join("")},"symbol signNumber":function(e,t){return e.splice(0,0,t+" "),e.join("")},"signSymbol number":function(e,t){return e.splice(1,0,t+" "),e.join("")},symbolSignNumber:function(e,t){return e.splice(0,0,t),e.join("")}},n={sign:e,isWithSpace:!0,format:t["symbol signNumber"]},r={4:{currency:"CHF",sign:"&#70;&#114;&#46;",isWithSpace:!0,format:t["symbol signNumber"]},9:{currency:"CZK",sign:"&#75;&#269;",isWithSpace:!0,format:t["sign number symbol"]},14:{currency:"EUR",sign:"&#8364;",isWithSpace:!1,format:t["symbol signNumber"]},16:{currency:"GBP",sign:"&#163;",isWithSpace:!1,format:t["signSymbol number"]},18:{currency:"HKD",sign:"&#36;",isWithSpace:!1,format:t["signSymbol number"]},19:{currency:"HUF",sign:"&#70;&#116;",isWithSpace:!1,format:t["sign number symbol"]},20:{currency:"ILS",sign:"&#8362;",isWithSpace:!1,format:t["symbol signNumber"]},23:{currency:"JPY",sign:"&#165;",isWithSpace:!1,format:t["signSymbol number"]},24:{currency:"MXN",sign:"&#36;",isWithSpace:!1,format:t["signSymbol number"]},33:{currency:"PLN",sign:"&#122;&#322;",isWithSpace:!0,format:t["sign number symbol"]},34:{currency:"LEI",sign:"&#108;&#101;&#105;",isWithSpace:!0,format:t["sign number symbol"]},40:{currency:"SEK",sign:"&#107;&#114;",isWithSpace:!0,format:t["sign number symbol"]},46:{currency:"TRY",sign:"&#8378;",isWithSpace:!0,format:t["sign number symbol"]},47:{currency:"USD",sign:"&#36;",isWithSpace:!1,format:t["symbol signNumber"]},69:{currency:"KRW",sign:"&#8361;",isWithSpace:!1,format:t["symbol signNumber"]},77:{currency:"RUB",sign:"&#8381;",isWithSpace:!1,format:t["signNumber symbol"]}};return e in r&&(n=r[e]),n},toNumberWithCurrency:function(e,t){t=t||{};var n=2,r=0;if(!isNumber(toNumeric(e))||!isDefinedType(t.currencyId))return"";isNumberType(t.decimals)&&(n=r=t.decimals);var i={style:"decimal",useGrouping:!isBooleanType(t.useGrouping)||t.useGrouping,maximumFractionDigits:isNumberType(t.maximumFractionDigits)?t.maximumFractionDigits:n,minimumFractionDigits:isNumberType(t.minimumFractionDigits)?t.minimumFractionDigits:r},o=toNumeric(e).toString();o.indexOf(".")<0&&(o+=".00000000");var a=Number(o.substring(0,o.indexOf(".")+i.maximumFractionDigits+1)).toLocaleString("en-GB",i);return Format.addCurrencyToNumber(a,t.currencyId,e)},addCurrencyToNumber:function(e,t,n){var r=Format.toSign(t),i=e.split("-"),o="";return o=isNumber(n)?0<=Number(n)?"":"-":0<=e.indexOf("-")?"-":"",i.splice(0,0,o),(e=r.format(i,r.sign)).trim().replace(" ","&nbsp;")},toAmountWithCurrency:function(e,t,n,r){e||(e=Format.toAmount);var i=e(t);return n&&"NA"!==i&&(i=r?n+" "+i:i+" "+n),i},toRate:function(e,t,n,r){if(!isNumber(e))return"NA";var i=7,o=e.toString(),a="-"===o[0],s=a?o.substring(1,o.length):o;if(isDefinedType(r))i=lenBeforeDelimiter(s.toString())+r+1;else{var l=$instrumentsManager.GetInstrument(n);l&&(i=lenBeforeDelimiter(s.toString())+l.DecimalDigit+1)}var u=t?RateRound(s,i).toString():s.toString();return u=trailingZeros(u,i),a?"-"+u:u},roundToPip:function(e,t,n,r){t=t||0,n=n||0<t?t:0;var i,o,a=parseFloat(e),s=Math.pow(10,t),l=">"==r?.59:-.59;return!isNaN(a)&&(i=a*s,o=">"==r||"<"==r?Math.round(i+l)/s:Math.round(i)/s,parseFloat(o).toFixed(n))},toMidRate:function(e,t){if(!isNumber(e)||!isNumber(t))return"NA";var n=10*(toNumeric(e)+toNumeric(t))*.05,r=lenBeforeDelimiter(n)+lenAfterDelimeter(e)+parseInt(lenBeforeDelimiter(e)<0?0:1);return trailingZeros(RateRound(n,r),r)},toTime:function(e){if(isNullOrUndefined(e))return"";var t=e.split(" ")[1];return isDefinedType(t)||(t="00:00:00"),t},toShortYear:function(e){if(isNullOrUndefined(e)||0===e.trim().length)return"";var t=e.split(/\s+/),n=t[1],r=t[0];return isNullOrUndefined(n)||!isDefinedType(r)?"("+e+") ":"("+r+" "+n.substring(2)+") "},toRoundNumber:function(e){return isNumber(e)?Math.round(e):"NA"},toPercent:function(e,t){if(!isNumber(e))return t?e:"NA";e=Math.round(100*e)/100;var n=String(e).split(".");return 1==n.length?(n[0]="-0"==n[0]?"0":n[0],n[0]+".00%"):1==n[1].length?n[0]+"."+n[1]+"0%":n[0]+"."+n[1].substring(0,2)+"%"},toPercentWithPrecision:function(e,t){return isNumber(e)?(t=t||2,e=e.toFixed(t),String(e)+"%"):"NA"},toSignedPercent:function(e,t){if(!isNumber(e))return isNullOrUndefined(t)?"NA":t;var n=Format.toPercent(e);return("0.00%"===n||0<=n.indexOf("-")?"":"+")+Format.toPercent(e)},toCCNumber:function(e,t){return 4!==t.length?"NA":0<e.length&&6!==e.length?"NA":e+(0<e.length?"-":"")+"XXXX-"+t},addDotInRange:function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r],o=i.near()<i.far(),a=o?i.near():i.far(),s=o?i.far():i.near(),l=Math.floor(a),u=Math.floor(s);if(l<=n&&n<=u)return n+"."}return n},toSignedNumericWithDecimals:function(e,t){(t=t||{}).decimals=isDefinedType(t.decimals)?t.decimals:2,t.showThousandSeparator=!!t.showThousandSeparator;var n=toNumeric(e);if(!isNumber(n))return"NA";var r=n.toFixed(t.decimals),i=-1!==r.indexOf("-")?r:"+"+r;return t.showThousandSeparator?formatNumberWithThousandsSeparator(i):i},toKAmount:function(e){return isNumber(e)?(Math.round(e/1e3*1e4)/1e4).toString():"NA"},secToMil:function(e){return isNumber(e)?(1e3*e).toString():"NA"},tenthOfPipSplitRate:function(e,t,n,r){var i={label:{first:"0",last:"0"},button:{first:"0",middle:"0",last:"0"}};if(!isDefinedType(n)||!isDefinedType(r)){var o=$instrumentsManager.GetInstrument(t);if(isNullOrUndefined(o))return i;n=o.SpecialFontStart,r=o.SpecialFontLength}var a=e.toString(),s=a.length-n,l=a.substring(0,s),u=a.substring(s,s+r),c=a.substring(s+r);return i.label.first=l+u,i.label.last=c,i.button.first=l,i.button.middle=u,i.button.last=c,i},formatDealAmount:function(e){var t=toNumeric(e);return isNumber(t)?0==t?"":t<10?t.toFixed(1):formatNumberWithThousandsSeparator(Math.round(t)):"NA"},toDateTimeUTC:function(e){var t=new Date(e);return t.ExtractDateShortYearUTC()+" "+t.ExtractTimeUTC()},toDateTime:function(e){if(!e)return"";var t=new Date(e);return t.ExtractDateShortYear()+" "+t.ExtractTime()},toTimehhmm:function(e){return new Date(e).ExtractTimeUTC()},toLocaleDate:function(e,t){return new Date(e.split("T")[0]).toLocaleDateString(t,{weekday:"long",year:"numeric",month:"long",day:"numeric"})},rateWithPipTemplate:function(e,t,n){return n=n||"tenths",isNullOrUndefined(e)||isNullOrUndefined(t)?"N/A":"<span>"+Format.tenthOfPipSplitRate(e,t).label.first+'</span><span class="'+n+'">'+Format.tenthOfPipSplitRate(e,t).label.last+"</span>"}};function THashTable(){var n=0,A={},r=function(e,t){isDefinedType(t)&&(isDefinedType(A[e])||(n+=1,A[e]=t))},i=function(e){return A.hasOwnProperty(e)&&isDefinedType(A[e])};return{count:function(){return n},Sort:function(e){var t,n,r=[],i=[];for(var o in A)A.hasOwnProperty(o)&&null!==(t=A[o])&&"object"==typeof t&&(isInt(n=t[e])||isStringType(n))&&i.push(new Array(n,o));for(var a=1,s=i.length;a<s;a++)for(var l=0;l<s-a;l++)if(i[l][0]>i[l+1][0]){var u=i[l];i[l]=i[l+1],i[l+1]=u}for(var c=0;c<i.length;c++)r[c]=i[c][1];return r},Clear:function(){for(var e in A)A.hasOwnProperty(e)&&(!isNullOrUndefined(A[e])&&isFunctionType(A[e].dispose)&&A[e].dispose(),delete A[e]);n=0},GetItem:function(e){return A.hasOwnProperty(e)&&isDefinedType(A[e])?A[e]:null},SetItem:r,HasItem:i,OverrideItem:function(e,t){i(e)?isDefinedType(t)&&(A[e]=t):r(e,t)},RemoveItem:function(e){A.hasOwnProperty(e)&&isDefinedType(A[e])&&(n-=1,delete A[e])},Container:A,firstItem:function(){for(var e in A)if(A.hasOwnProperty(e))return A[e];return null},hasItems:function(){return 0<n},ForEach:function(e){for(var t in A)if(A.hasOwnProperty(t)&&!1===e(t,A[t]))break},Filter:function(e){var t=new THashTable;for(var n in A)A.hasOwnProperty(n)&&e(n,A[n])&&t.SetItem(n,A[n]);return t},Find:function(e){var t=new THashTable;for(var n in A)if(A.hasOwnProperty(n)&&e(n,A[n]))return t.SetItem(n,A[n]),t;return t}}}function clone(e){function t(){}return t.prototype=e,new t}function extendClass(i,o){if("function"!=typeof i)throw new Error("Argument exception: parentClass is not a function.");if("function"!=typeof o)throw new Error("Argument exception: inheritedClass is not a function.");return function(){var e=argsToArray(arguments),t={},n=new(Function.prototype.bind.apply(i,[null].concat(e)));t.parent=n,t.__proto__=n;var r=o.apply(t,e);return Object.assign(t,r),t}}function Instrument(e,t,n){this.id=e[eInstruments.id],this.ccyPair=e[eInstruments.ccyPair],this.amountGroupId=e[eInstruments.amountGroupId],this.factor=e[eInstruments.factor],this.isTradable=1==e[eInstruments.tradable],this.hasSignal=1==e[eInstruments.hasSignals],this.signalName=e[eInstruments.signalName],this.dealMinMaxAmounts=[],this.defaultDealSize=e[eInstruments.defaultDealSize],this.maxDeal=e[eInstruments.maxDeal],this.SLMinDistance=e[eInstruments.SLMinDistance],this.TPMinDistance=e[eInstruments.TPMinDistance],this.DecimalDigit=e[eInstruments.DecimalDigit],this.PipDigit=e[eInstruments.PipDigit],this.SpecialFontStart=e[eInstruments.SpecialFontStart],this.SpecialFontLength=e[eInstruments.SpecialFontLength],this.instrumentTypeId=e[eInstruments.instrumentTypeId],this.assetTypeId=e[eInstruments.assetTypeId],this.expirationDate=""===e[eInstruments.expirationDate]?null:e[eInstruments.expirationDate],this.isFuture=this.assetTypeId===eAssetType.Future,this.isShare=this.assetTypeId===eAssetType.Share,this.isForex=this.assetTypeId===eAssetType.Forex,this.isStock=this.instrumentTypeId===eInstrumentType.Stocks,this.futureValueDate=null,this.baseSymbol=e[eInstruments.baseSymbolId],this.otherSymbol=e[eInstruments.otherSymbolId],this.baseSymbolName=e[eInstruments.ccyPair].toString().split(/\//g)[0],this.otherSymbolName=e[eInstruments.ccyPair].toString().split(/\//g)[1],this.exchangeInstrumentName=e[eInstruments.exchangeInstrumentName],this.exchange=e[eInstruments.exchange],this.contractMonthAndYear=e[eInstruments.contractMonthAndYear],this.instrumentEnglishName=e[eInstruments.instrumentEnglishName],this.weightedVolumeFactor=t?parseFloat(e[eInstruments.weightedVolumeFactor]):1,this.eventDate=e[eInstruments.eventDate],this.eventAmount=e[eInstruments.eventAmount],this.marketPriceTolerance=e[eInstruments.marketPriceTolerance],this.isOvernightOnForex=n}function TLimit(e,t){t=t||[],this.orderID=e,this.instrumentID=t[eLimit.instrumentID],this.baseSymbol=t[eLimit.baseSymbol],this.otherSymbol=t[eLimit.otherSymbol],this.positionNumber=t[eLimit.positionNumber],this.accountNumber=t[eLimit.accountNumber],this.orderDir=t[eLimit.orderDir],this.orderRate=t[eLimit.orderRate],this.buySymbolID=t[eLimit.buySymbolID],this.buyAmount=t[eLimit.buyAmount],this.sellSymbolID=t[eLimit.sellSymbolID],this.sellAmount=t[eLimit.sellAmount],this.type=t[eLimit.type],this.mode=t[eLimit.mode],this.expirationDate=t[eLimit.expirationDate],this.entryTime=t[eLimit.entryTime],this.slRate=t[eLimit.slRate],this.tpRate=t[eLimit.tpRate],this.otherLimitID=t[eLimit.otherLimitID],this.status=""}"function"!=typeof Object.create&&(Object.create=function(){var n=function(){};return function(e){if(1<arguments.length)throw Error("Second argument not supported");if("object"!=typeof e)throw TypeError("Argument must be an object");n.prototype=e;var t=new n;return n.prototype=null,t}}()),function(e,t){"function"==typeof define&&define.amd&&define("JSONHelper",[],t),e.JSONHelper=t()}("undefined"!=typeof self?self:this,function(){return window.JSONHelper=new function(){return{STR2JSON:function(t,n,r,i){if(isObjectType(n))return n;r=r||eErrorSeverity.medium;try{return window.$.parseJSON(n)}catch(e){var o=JSON.stringify({error:"JSONHelper.STR2JSON threw an exception",name:e.name,message:e.message,str:n,stack:e.stack},null,4);return Logger.log(t,o,i,r),null}},IsValid:function(e){try{return!!e&&!!JSON.parse(e)}catch(e){return!1}}}}}),define("handlers/LanguageHelper",["require","CookieHandler"],function(e){var t=e("CookieHandler");return window.LanguageHelper={GetLanguage:function(){return t.ReadCookie("Language")},IsRtlLanguage:function(){var e=this.GetLanguage();return-1!==["Hebrew","Arabic"].indexOf(e)}},window.LanguageHelper}),TLimit.prototype.Update=function(e){this.orderID=e[eLimit.orderID],this.instrumentID=e[eLimit.instrumentID],this.baseSymbol=e[eLimit.baseSymbol],this.otherSymbol=e[eLimit.otherSymbol],this.positionNumber=e[eLimit.positionNumber],this.accountNumber=e[eLimit.accountNumber],this.orderDir=e[eLimit.orderDir],this.orderRate=e[eLimit.orderRate],this.buySymbolID=e[eLimit.buySymbolID],this.buyAmount=e[eLimit.buyAmount],this.sellSymbolID=e[eLimit.sellSymbolID],this.sellAmount=e[eLimit.sellAmount],this.type=e[eLimit.type],this.mode=e[eLimit.mode],this.expirationDate=e[eLimit.expirationDate],this.entryTime=e[eLimit.entryTime],this.slRate=e[eLimit.slRate],this.tpRate=e[eLimit.tpRate],this.otherLimitID=e[eLimit.otherLimitID]};var Logger={log:function(e,t,n,r){r=r||eErrorSeverity.medium,dalCommon.AddLog(e,t,n,r)},warn:function(e,t,n,r){r=r||eErrorSeverity.warning,dalCommon.AddWarning(e,t,n,r)}};function TStateMachine(){var r,i,o={};return{Init:function(e){for(var t=0,n=(r=e).length;t<n;t++)o[r[t].name]=t,r[t].initial&&(i=e[t])},ConsumeEvent:function(e){i.events[e]&&(i=r[o[i.events[e]]])},GetStatus:function(){return i.name}}}function StringBuilder(){this._length=0,this._buffer=[]}define("RequireError",["require","Customer","KoComponentLoader"],function(e){var t=e("Customer"),r=e("KoComponentLoader");function n(e,t){this.message=e,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.innerError=t,this.loadedUrls=Object.keys(requirejs.s.contexts._.urlFetched),this.pendingModules=Object.keys(requirejs.s.contexts._.registry),this.loadedModules=Object.keys(requirejs.s.contexts._.defined);var n=Object.keys(r.Components);this.loadedComponents=n.filter(function(e){return!0===r.Components[e]}),this.pendingComponents=n.filter(function(e){return!1===r.Components[e]})}return((n.prototype=Object.create(Error.prototype)).constructor=n).prototype.getFullExceptionMessage=function(){var e={Message:this.message,LoadedUrls:this.loadedUrls,PendingModules:this.pendingModules,PendingComponents:this.pendingComponents,StackTrace:(this.stack||"").replace(this.message,"").replace(/\n|\r\n/g," ").replace(/\s\s+/g," "),AccountNumber:t.prop.accountNumber,UserAgent:window.navigator.userAgent};return JSON.stringify(e)},n}),StringBuilder.prototype.append=function(e){this._buffer[this._length]=e,this._length+=1},StringBuilder.prototype.toString=function(){return this._buffer.join("")},StringBuilder.prototype.isEmpty=function(){return 0===this._length};var SyncRequestHelper={Send:function(e,t){var n,r,i,o=UrlResolver.getApplicationRelativePath();if(window.XMLHttpRequest)n=new XMLHttpRequest;else if(window.ActiveXObject)for(var a=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp","Microsoft.XMLHTTP"],s=0;s<a.length;s++)try{n=new ActiveXObject(a[s])}catch(e){}if(n)if(n.open("POST",(r=e,i=(r=UrlResolver.getUrlWithRndKeyValue(r)).startsWith(o)||r.startsWith("http")?String.empty:o,UrlResolver.combine(i,r)),!1),t){if(t.match(/SecurityToken/i)&&!$customer.isAuthenticated())return!1;n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(t)}else n.send();return n}},Transliterator=function(e){var n=$.extend({},{"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"AE","Ã":"C","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã":"D","Ã":"N","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Å":"O","Ã":"O","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Å°":"U","Ã":"Y","Ã":"TH","Ã":"ss","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã¦":"ae","Ã§":"c","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã°":"d","Ã±":"n","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Å":"o","Ã¸":"o","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Å±":"u","Ã½":"y","Ã¾":"th","Ã¿":"y","Â©":"(c)"},{"Î":"A","Î":"B","Î":"G","Î":"D","Î":"E","Î":"Z","Î":"H","Î":"8","Î":"I","Î":"K","Î":"L","Î":"M","Î":"N","Î":"3","Î":"O","Î ":"P","Î¡":"R","Î£":"S","Î¤":"T","Î¥":"Y","Î¦":"F","Î§":"X","Î¨":"PS","Î©":"W","Î":"A","Î":"E","Î":"I","Î":"O","Î":"Y","Î":"H","Î":"W","Îª":"I","Î«":"Y","Î±":"a","Î²":"b","Î³":"g","Î´":"d","Îµ":"e","Î¶":"z","Î·":"h","Î¸":"8","Î¹":"i","Îº":"k","Î»":"l","Î¼":"m","Î½":"n","Î¾":"3","Î¿":"o","Ï":"p","Ï":"r","Ï":"s","Ï":"t","Ï":"y","Ï":"f","Ï":"x","Ï":"ps","Ï":"w","Î¬":"a","Î­":"e","Î¯":"i","Ï":"o","Ï":"y","Î®":"h","Ï":"w","Ï":"s","Ï":"i","Î°":"y","Ï":"y","Î":"i"},{"Å":"S","Ä°":"I","Ã":"C","Ã":"U","Ã":"O","Ä":"G","Å":"s","Ä±":"i","Ã§":"c","Ã¼":"u","Ã¶":"o","Ä":"g"},{"Ð":"A","Ð":"B","Ð":"V","Ð":"G","Ð":"D","Ð":"E","Ð":"Yo","Ð":"Zh","Ð":"Z","Ð":"I","Ð":"J","Ð":"K","Ð":"L","Ð":"M","Ð":"N","Ð":"O","Ð":"P","Ð ":"R","Ð¡":"S","Ð¢":"T","Ð£":"U","Ð¤":"F","Ð¥":"H","Ð¦":"C","Ð§":"Ch","Ð¨":"Sh","Ð©":"Sh","Ðª":"","Ð«":"Y","Ð¬":"","Ð­":"E","Ð®":"Yu","Ð¯":"Ya","Ð°":"a","Ð±":"b","Ð²":"v","Ð³":"g","Ð´":"d","Ðµ":"e","Ñ":"yo","Ð¶":"zh","Ð·":"z","Ð¸":"i","Ð¹":"j","Ðº":"k","Ð»":"l","Ð¼":"m","Ð½":"n","Ð¾":"o","Ð¿":"p","Ñ":"r","Ñ":"s","Ñ":"t","Ñ":"u","Ñ":"f","Ñ":"h","Ñ":"c","Ñ":"ch","Ñ":"sh","Ñ":"sh","Ñ":"","Ñ":"y","Ñ":"","Ñ":"e","Ñ":"yu","Ñ":"ya"},{"Ð":"Ye","Ð":"I","Ð":"Yi","Ò":"G","Ñ":"ye","Ñ":"i","Ñ":"yi","Ò":"g"},{"Ä":"C","Ä":"D","Ä":"E","Å":"N","Å":"R","Å ":"S","Å¤":"T","Å®":"U","Å½":"Z","Ä":"c","Ä":"d","Ä":"e","Å":"n","Å":"r","Å¡":"s","Å¥":"t","Å¯":"u","Å¾":"z"},{"Ä":"A","Ä":"C","Ä":"e","Å":"L","Å":"N","Ã":"o","Å":"S","Å¹":"Z","Å»":"Z","Ä":"a","Ä":"c","Ä":"e","Å":"l","Å":"n","Ã³":"o","Å":"s","Åº":"z","Å¼":"z"},{"Ä":"A","Ä":"C","Ä":"E","Ä¢":"G","Äª":"i","Ä¶":"k","Ä»":"L","Å":"N","Å ":"S","Åª":"u","Å½":"Z","Ä":"a","Ä":"c","Ä":"e","Ä£":"g","Ä«":"i","Ä·":"k","Ä¼":"l","Å":"n","Å¡":"s","Å«":"u","Å¾":"z"});return e.transliterate=function(e){for(var t in n)n.hasOwnProperty(t)&&(e=e.replace(RegExp(t,"g"),n[t]));return e},e}(window.Transliterator||{});function TDALAccountingActions(){return{LoadAccountingActions:function(e,t){var n=new TAjaxer,r={symbolId:e.SymbolId,actionCategory:e.ActionCategory,from:e.From,to:e.To,page:e.Page,position:e.Position,pageSize:e.pagesize||e.PageSize,exportdata:e.exportdata||!1,showCosts:e.ShowCosts||!1,closedDate:e.ClosedDate};n.get("TDALAccountingActions/loadAccountingActions","Handlers/HistoricalData/AccountingActions.ashx?methodName=GetData&enableTranslations=true",urlEncode(r),t,function(){ErrorManager.onError("TDALAccountingActions/loadAccountingActions","",eErrorSeverity.medium)})},GetAccountSymbols:function(e){(new TAjaxer).get("TDALAccountingActions/getAccountSymbols","Handlers/HistoricalData/AccountingActions.ashx?methodName=GetAccountSymbols","",e,function(){ErrorManager.onError("TDALAccountingActions/getAccountSymbols","",eErrorSeverity.medium)})},GetContractRollover:function(e,t){var n=TAjaxer(),r={page:e.Page,position:e.Position,pageSize:e.pagesize||e.PageSize,exportdata:e.exportdata||!1};n.get("TDALAccountingActions/getContractRollover","Handlers/HistoricalData/AccountingActions.ashx?methodName=GetAdditionalPl",urlEncode(r),t,function(){ErrorManager.onError("TDALAccountingActions/getContractRollover","",eErrorSeverity.medium)})}}}define("FxNet/DataAccessLayer/dalPouchDB",["require","pouchdb","ErrorManager","Customer","Q"],function(e){var n,t=e("pouchdb"),r=e("ErrorManager"),i=e("Customer"),o=e("Q"),a="db",s=o.defer();function l(){try{n=new t(a+i.prop.accountNumber,{revs_limit:1}),s.resolve()}catch(e){r.onError("dalPouchDB","exception general: "+e.message,eErrorSeverity.low),n=null}}return setTimeout(l,0),{Get:function(e){n||l();var t=o.defer();return s.promise.then(function(){n.get(e).then(t.resolve).catch(t.reject)}),t.promise},Save:function(e,t){isObjectType(n)&&(t._id=e,n.get(e).then(function(e){t._rev=e._rev,n.put(t).catch(function(e){r.onError("dalPouchDB/save- updating",e.message,eErrorSeverity.low)})}).catch(function(e){"missing"===e.message&&n.put(t).catch(function(e){r.onError("dalPouchDB/save- inserting",e.message,eErrorSeverity.low)})}))}}});var dalAccountingActions=new TDALAccountingActions,TDALOrder=function(){var c=timeStamp(),A=function(e,t){var n,r=JSONHelper.STR2JSON("dalOreder:analyzeResponse",e);if(!r)return[{status:0,msgKey:"OrderError1",itemId:"",arguments:null}];r.arguments=null,r.length||(r=[r]);for(var i=0,o=r.length;i<o;i++){var a=r[i];s(a,isDefinedType(t)?t:a.action),a.arguments=null,a.responseArgumentsJson&&(n=JSONHelper.STR2JSON("dalOreder:analyzeResponse",a.responseArgumentsJson),Array.isArray(n)?a.arguments=n:(a.arguments=[],a.arguments.push(n)))}return r},s=function(e,t){e.status==eResult.Success?t==eOrderActionType.NewPriceAlert?e.msgKey="SuccessPriceAlertAdd":t==eOrderActionType.NewLimit?e.msgKey="SuccessLimitAdd":t==eOrderActionType.EditLimit?e.msgKey="SuccessLimitEdit":t==eOrderActionType.DeleteLimit?e.msgKey="SuccessLimitDelete":t==eOrderActionType.DeletePriceAlert?e.msgKey="SuccessPriceAlertDelete":t==eOrderActionType.NewDeal?e.msgKey="SuccessDealAdd":t==eOrderActionType.CloseDeal&&(e.msgKey="SuccessDealClose"):e.msgKey=e.result};return{OpenDeal:function(r,i){var e=new TAjaxer;c=timeStamp();var t=new StringBuilder;t.append(String.format("DealType={0}&",r.dealType)),t.append(String.format("InstrumentId={0}&",r.instrumentID)),t.append(String.format("Amount={0}&",r.amount)),t.append(String.format("MarketRate={0}&",r.marketRate)),t.append(String.format("OtherRateSeen={0}&",r.otherRateSeen)),t.append(String.format("OrderDirection={0}&",r.orderDir)),t.append(String.format("TakeProfitRate={0}&",r.tpRate)),t.append(String.format("StopLossRate={0}&",r.slRate)),t.append(String.format("SecurityToken={0}",systemInfo.securityToken)),e.post("dalOrder/openDeal","Deals/OpenDeal",t.toString(),function(e){var t=eOrderAction.NewDeal,n=A(e,eOrderActionType.NewDeal);i(n,t,r.instrumentID,r)},function(e){ErrorManager.onError("dalOrder/openDeal",e.message,eErrorSeverity.medium)})},CloseDeals:function(e,r,t){var n=new TAjaxer,i=t&&t.hasOwnProperty("failCallback")&&"function"==typeof t.failCallback?t.failCallback:null;c=timeStamp();for(var o=[],a=[],s=0,l=e.length;s<l;s++)a[s]=ko.toJS(e[s]),o.push(String.format("{0}#{1}#{2}",a[s].positionNumber,a[s].spotRate,a[s].fwPips));var u=o.join("_");n.post("dalOrder/closeDeals","Deals/CloseDeals",String.format("positions={0}&SecurityToken={1}",u,systemInfo.securityToken),function(e){var t=eOrderAction.CloseDeal,n=A(e,eOrderActionType.CloseDeal);r(n,t,a)},function(e){ErrorManager.onError("dalOrder/closeDeals",e.message,eErrorSeverity.medium),i&&i()})},AddLimit:function(r,i,e){var t=new TAjaxer;c=timeStamp();var n={limit:r,SecurityToken:systemInfo.securityToken},o=function(e){var t=r.mode===eLimitMode.PriceAlert?eOrderAction.NewPriceAlert:eOrderAction.NewLimit,n=A(e,r.mode===eLimitMode.PriceAlert?eOrderActionType.NewPriceAlert:eOrderActionType.NewLimit);i(n,t,r.instrumentID,r)};e?t.jsonPost("dalOrder/addLimit","Limits/AddLimit",JSON.stringify(n),o,function(e){ErrorManager.onError("dalOrder/addLimit",e.message,eErrorSeverity.medium)}):t.post("dalOrder/addLimit","Handlers/Order/Limits.ashx?methodName=AddLimit",JSON.stringify(n),o,function(e){ErrorManager.onError("dalOrder/addLimit",e.message,eErrorSeverity.medium)})},EditLimit:function(r,i){var e=new TAjaxer;c=timeStamp();var t={limit:r,SecurityToken:systemInfo.securityToken};e.post("dalOrder/editLimit","Handlers/Order/Limits.ashx?methodName=EditLimit",JSON.stringify(t),function(e){var t=eOrderAction.EditLimit,n=A(e,eOrderActionType.EditLimit);i(n,t,r)},function(e){ErrorManager.onError("dalOrder/editLimit",e.message,eErrorSeverity.medium)})},SaveLimits:function(r,i){var e=new TAjaxer;c=timeStamp();var t={limits:r,SecurityToken:systemInfo.securityToken};e.post("dalOrder/editLimit","Handlers/Order/Limits.ashx?methodName=SaveLimits",JSON.stringify(t),function(e){var t=eOrderAction.SaveLimits,n=A(e);i(n,t,null,r)},function(e){ErrorManager.onError("dalOrder/saveLimits",e.message,eErrorSeverity.medium)})},DeleteLimit:function(r,i){var e=new TAjaxer;c=timeStamp();var t={limit:r,SecurityToken:systemInfo.securityToken};e.post("dalOrder/deleteLimit","Handlers/Order/Limits.ashx?methodName=DeleteLimit",JSON.stringify(t),function(e){var t=eOrderAction.DeleteLimit,n=A(e,r.mode===eLimitMode.PriceAlert?eOrderActionType.DeletePriceAlert:eOrderActionType.DeleteLimit);i(n,t,r)},function(e){ErrorManager.onError("dalOrder/deleteLimit",e.message,eErrorSeverity.medium)})},DeleteLimits:function(r,i){var e=new TAjaxer;c=timeStamp();var t={limits:r,SecurityToken:systemInfo.securityToken};e.post("dalOrder/deleteLimits","Handlers/Order/Limits.ashx?methodName=DeleteLimits",JSON.stringify(t),function(e){var t=eOrderAction.DeleteLimit,n=A(e,r[0].mode===eLimitMode.PriceAlert?eOrderActionType.DeletePriceAlert:eOrderActionType.DeleteLimit);i(n,t,r)},function(e){ErrorManager.onError("dalOrder/deleteLimits",e.message,eErrorSeverity.medium)})},DeletePriceAlerts:function(r,i){var e=new TAjaxer;c=timeStamp();var t={limits:r,SecurityToken:systemInfo.securityToken};e.post("dalOrder/deleteLimits","Handlers/Order/Limits.ashx?methodName=DeleteLimits",JSON.stringify(t),function(e){var t=eOrderAction.DeleteLimit,n=A(e,r[0].mode===eLimitMode.PriceAlert?eOrderActionType.DeletePriceAlert:eOrderActionType.DeleteLimit);i(n,t,r)},function(e){ErrorManager.onError("dalOrder/deleteLimits",e.message,eErrorSeverity.medium)})},lastTimeRequest:function(){return c},resetTimeRequest:function(){c=timeStamp()},CashBackVolumesInfo:function(){var e=new TAjaxer;c=timeStamp();var t=new StringBuilder;t.append(String.format("SecurityToken={0}",systemInfo.securityToken));return e.promises.get("dalOrder/cashBackVolumes","Deals/CashBackGetVolumes",t.toString(),null,null,null,null,null,!1).then(function(e){return A(e,eOrderActionType.CashBack)}).fail(function(e){throw ErrorManager.onError("dalOrder/cashBackVolumes",e.message,eErrorSeverity.medium),e})},GetDealMarginDetails:function(e){c=timeStamp();var t=TAjaxer(),n=new StringBuilder;return n.append(String.format("instrumentId={0}",e)),t.promises.get("dalOrder/getDealMarginDetails","Deals/GetDealMarginDetails",n.toString(),null,null,1,null,null,!1).then(function(e){return A(e)}).fail(function(e){throw ErrorManager.onError("dalOrder/getDealMarginDetails",e.message,eErrorSeverity.medium),e})},GetOvernightFinancing:function(e,t){c=timeStamp();var n=TAjaxer(),r=new StringBuilder;return r.append(String.format("instrumentId={0}&",e)),r.append(String.format("amount={0}",t)),n.promises.get("dalOrder/getOvernightFinancing","Deals/GetOvernightFinancing",r.toString(),null,null,null,null,!1).then(function(e){return A(e,eOrderActionType.GetOvernightFinancing)}).fail(function(e){throw ErrorManager.onError("dalOrder/getOvernightFinancing",e.message,eErrorSeverity.medium),e})},GetMinDealAmounts:function(){var t=new TAjaxer,n=UrlResolver.getMinDealGroupId(),e=UrlResolver.getMinDealsVersion(),r=UrlResolver.getMinDealsHash(),i=function(){return UrlResolver.getStaticInitialDataMinDealAmountsUrl(n,e,r)};return t.promises.get("TDALNotificationData/getMinDealAmounts",i()).then(function(e){return A(e)}).fail(function(e){return ErrorManager.onWarning("Min deal group version sync retry failed. Url: "+i()+". Headers: "+e),t.promises.get("TDALNotificationData/getMinDealAmounts","InitialData/MinDealAmountsFromOrigin?groupId="+n).then(function(e){return A(e)})})}}},dalOrder=TDALOrder(),TDALClientState=function(){var n=new TAjaxer,r=new TAjaxer,i=systemInfo.slaTimeout||1e3,o=function(){i+=1e3},a=function(e){if(e.State=e.State||eAjaxerState.None,e.State===eAjaxerState.SlaCompromised){e.Data=e.Data||{};var t="SLA has been compromised: "+JSON.stringify(e);void 0!==Logger&&Logger.warn("TDALClientState",t,o,eErrorSeverity.warning)}else e.State,eAjaxerState.Retry};return{GetData:function(e,t){n.promises.get("TDALClientState/getData","Handlers/ClientState/ClientState.ashx?methodName=GetData&requestMode="+e+"&csmg="+$initialDataManager.prop.csmg,"",t,function(){ErrorManager.onError("TDALClientState/getData","",eErrorSeverity.high)},0,1e3,i).progress(a).done()},GetQuotesData:function(e,t){r.promises.get("TDALClientState/getQuotesData","Handlers/ClientState/ClientState.ashx?methodName=GetQuotesData&requestMode="+e+"&csmg="+$initialDataManager.prop.csmg,"",t,function(){ErrorManager.onError("TDALClientState/getQuotesData","",eErrorSeverity.high)},0,1e3,i).progress(a).done()},Register:function(e){var t="SecurityToken="+systemInfo.securityToken;return r.promises.post("Handlers/ClientState/ClientState.ashx?","Handlers/ClientState/ClientState.ashx?methodName=Register&csmg="+$initialDataManager.prop.csmg+"&instruments=["+e.join(",")+"]",t).then(function(e){return e.toString()===eOperationStatus.Success.toString()})},Unregister:function(){var e="SecurityToken="+systemInfo.securityToken;return r.promises.post("Handlers/ClientState/ClientState.ashx?","Handlers/ClientState/ClientState.ashx?methodName=Unregister&csmg="+$initialDataManager.prop.csmg,e).then(function(e){return e.toString()===eOperationStatus.Success.toString()})},SetDisplaySymbol:function(e){var t="SecurityToken="+systemInfo.securityToken,n=SyncRequestHelper.Send("Handlers/ClientState/ClientState.ashx?methodName=SetDisplaySymbol&csmg="+$initialDataManager.prop.csmg+"&symbolId="+e,t);return!(!n||200!=n.status)&&n.responseText==eOperationStatus.Success},GetclientStateSlaTimeout:function(){return i}}};define("TDALSocketClientState",["require","StateObject!SystemNotificationEvents","StateObject!DealerParams"],function(e){var t=e("StateObject!SystemNotificationEvents"),s=e("StateObject!DealerParams");return function(){if(!SocketConnection.isConnected())throw new Error("Cannot establish web socket connection");var a=!0;return t.set(eShutDownHandlerTopics.stopClientStateManagerCalls,null),t.subscribe(eShutDownHandlerTopics.stopClientStateManagerCalls,function(){SocketConnection.stop()}),{registerMessageCallback:function(e){SocketConnection.setMessageHandler(e)},registerReconnectedCallback:function(e){SocketConnection.setReconnectedHandler(e)},Register:function(e,t){var n,r=$customerProfileManager.ProfileCustomer(),i=s.get(eDealerParams.DealerCurrency)||r.displaySymbol;if(a||t){a=!1,n="RegisterQuotesAndGetInitialAll";var o=$customer.prop||{};SocketConnection.send(n,{instruments:e,symbol:i!==o.baseCcyId()?i:null})}else n="RegisterQuotesAndGetInitialQuotes",SocketConnection.send(n,{instruments:e})},Unregister:function(){SocketConnection.send("Unregister")},SetDisplaySymbol:function(e){SocketConnection.send("SetDisplaySymbol",{symbol:e})},HasStarted:SocketConnection.hasStarted}}}),define("fxnet/dataaccesslayer/dalcommon",["UrlResolver"],function(n){var t=function(e){e.State=e.State||eAjaxerState.None,e.State,eAjaxerState.Retry},e=!1,r=function(e,t,n){var r=new TAjaxer,i=JSON.stringify({errorType:e,errorDetails:t,frameGuid:n});r.jsonPost("Error/WriteUploadErrorActivityLog","Error/WriteUploadErrorActivityLog",i,emptyFn,function(){ErrorManager.onError("Error/WriteUploadErrorActivityLog","",eErrorSeverity.medium)})};return window.dalCommon={GetJWTLogin:function(){var t=(new TAjaxer).promises.get("dalCommon/GetJWTLogin","account/GetJWTLogin","",null,function(e){ErrorManager.onError("dalCommon/getGwtToken","",eErrorSeverity.low),t.reject(e)});return t},AddLog:function(e,t,n){var r=new TAjaxer,i=JSON.stringify({loggedErrorString:JSON.stringify({Location:e,Info:t})});r.promises.jsonPost("Error/logError","Error/Log",i).then(n).fail(function(e){}).done()},AddWarning:function(e,t,n){var r=new TAjaxer,i=JSON.stringify({loggedErrorString:JSON.stringify({Location:e,Info:t})});r.promises.jsonPost("Warning/logWarning","Error/Warn",i).then(n).fail(function(e){}).done()},Logout:function(e){FxNet.SessionStorage.removeItem("TrackingSessionId"),window.$cacheManager&&$cacheManager.Unregister(),window.ShutDownHandler&&ShutDownHandler.StopRunningServices();var t=e?"?"+e:"";window.location=n.combine(n.getApplicationRelativePath(),"Account/Logout",($initialDataManager.prop.csmg||"")+t)},Login:function(e){FxNet.SessionStorage.removeItem("TrackingSessionId");var t=e?"?"+e:"";window.location=n.combine(n.getApplicationRelativePath(),"Account/Login",t)},SwitchAccount:function(){e||(e=!0,$cacheManager.Unregister(),ShutDownHandler&&ShutDownHandler.StopRunningServices(),window.location.replace(n.combine(n.getApplicationRelativePath(),"Account/Switch?"+n.getRndKeyValue())))},Exit:function(e){FxNet.SessionStorage.removeItem("TrackingSessionId"),window.$cacheManager&&$cacheManager.Unregister();var t=e?"?"+e:"";window.ShutDownHandler&&ShutDownHandler.StopRunningServices(),window.location=n.combine(n.getApplicationRelativePath(),"Account/Exit",($initialDataManager.prop.csmg||"")+t)},KeepAlive:function(e){(new TAjaxer).promises.get("dalCommon/keepAlive","Handlers/General/keepAlive.ashx?methodName=KeepAlive","",e,function(){ErrorManager.onError("dalCommon/keepAlive","",eErrorSeverity.high)},0,1e3).progress(t).done()},LogUploadActivityMessage:r,LogUploadCommunication:function(e,t,n){var r=new TAjaxer,i=JSON.stringify({messageType:e,message:t,action:n});r.jsonPost("Error/LogUploadCommunication","Error/LogUploadCommunication",i,emptyFn,function(){ErrorManager.onError("Error/LogUploadCommunication","",eErrorSeverity.medium)})},LogFrameNotLoadedMessage:function(e,t,n){r(e,t,n)},WriteInfoLog:function(e,t,n){var r=new TAjaxer,i=JSON.stringify({messageType:e,message:t,action:n});r.jsonPost("Error/WriteInfoLog","Error/WriteInfoLog",i,emptyFn,function(e){ErrorManager.onError("Error/WriteInfoLog",e,eErrorSeverity.medium)})}}}),define("FxNet/DataAccessLayer/dalConversion",[],function(){var e={},a="Handlers/General/Conversion.ashx?";return e.getInBetweenQuote=function(e,t){var n=new TAjaxer,r=urlEncode({fromSymbolId:e,toSymbolId:t});return n.promises.get("dalConversion/getInBetweenQuote",a+"methodName=GetInBetweenQuote",r).then(function(e){return JSONHelper.STR2JSON("getInBetweenQuote/onLoadComplete",e)}).fail(function(e){throw ErrorManager.onError("dalConversion/getInBetweenQuote","",eErrorSeverity.medium),e})},e.getConversionRateFormated=function(e,t,n,r){var i=new TAjaxer,o=urlEncode({fromSymbolId:e,toSymbolId:t,fromSymbolName:n,toSymbolName:r});return i.promises.get("dalConversion/getConversionRateFormated",a+"methodName=GetConversionRateFormated",o).then(function(e){return JSONHelper.STR2JSON("getConversionRateFormated/onLoadComplete",e)}).fail(function(e){throw ErrorManager.onError("dalConversion/getConversionRateFormated","",eErrorSeverity.medium),e})},e}),define("FxNet/DataAccessLayer/dalCompliance",["require","Q"],function(e){var r=e("Q");return{setPepStatus:function(e,t){isFunctionType(t)||(t=emptyFn);var n="dataPep="+e;(new TAjaxer).post("TDALRegulation/setPepStatus","Compliance/SetPepComplianceStatus",n,t,function(e){window.ErrorManager.onError("DalCompliance/setPepStatus",e.message,eErrorSeverity.medium)})},getPepStatus:function(e){isFunctionType(e)||(e=emptyFn),(new TAjaxer).jsonPost("TDALRegulation/getPepStatus","Compliance/GetPepComplianceStatus",null,e,function(){window.ErrorManager.onError("DalCompliance/getPepStatus","",eErrorSeverity.medium)})},logUploadResult:function(e,t){(new TAjaxer).post("TDALCompliance/LogUploadedDocsActionResult","Compliance/LogUploadedDocsActionResult",$.param(e),t,function(e){window.ErrorManager.onError("DalCompliance/LogUploadedDocsActionResult",e.message,eErrorSeverity.medium)})},getNotificationsSettings:function(e){return isFunctionType(e)||(e=emptyFn),(new TAjaxer).promises.get("TDALRegulation/getNotificationsSettings","Compliance/GetNotificationsSettings","",e,function(){window.ErrorManager.onError("DalCompliance/getNotificationsSettings","",eErrorSeverity.medium)})},setNotificationsSettings:function(e,t){isFunctionType(t)||(t=emptyFn);var n=JSON.stringify(e);return(new TAjaxer).promises.jsonPost("TDALRegulation/setNotificationsSettings","Compliance/SetNotificationsSettings",n,t,function(e){window.ErrorManager.onError("DalCompliance/setNotificationsSettings",e.message,eErrorSeverity.medium)})},logUserShouldCompleteCdd:function(e){var t=new TAjaxer,n=JSON.stringify(e());t.jsonPost("TDALCompliance/LogUserShouldCompleteCdd","compliance/LogUserShouldCompleteCdd",n,null,function(e){window.ErrorManager.onError("DalCompliance/LogUserShouldCompleteCdd",e.message,eErrorSeverity.medium)})},getUploadDocumentsData:function(e){isFunctionType(e)||(e=emptyFn),(new TAjaxer).post("TDALCompliance/getUploadDocumentsData","Compliance/GetUploadDocumentsData",null,e,function(e){window.ErrorManager.onError("DalCompliance/getUploadDocumentsData",e.message,eErrorSeverity.medium)})},sendDepositConfirmation:function(e){isFunctionType(e)||(e=emptyFn),(new TAjaxer).post("TDALCompliance/sendDepositConfirmation","Compliance/SendDepositConfirmation",null,e,function(e){window.ErrorManager.onError("DalCompliance/SendDepositConfirmation",e.message,eErrorSeverity.medium)})},sendExposureCoverage:function(e,t){isFunctionType(t)||(t=emptyFn),(new TAjaxer).post("TDALCompliance/SendExposureCoverage","Compliance/SendExposureCoverage",e.toString(),t,function(e){window.ErrorManager.onError("DalCompliance/SendExposureCoverage",e.message,eErrorSeverity.medium)})},sendRequestAccess:function(e){return(new TAjaxer).promises.jsonPost("TDALCompliance/RequestAccess","Compliance/RequestAccess/?"+Math.random(),JSON.stringify({RequestType:e})).then(JSON.parse).fail(function(e){var t,n;return t=e,n="TDALCompliance/RequestAccess",ErrorManager.onError(n,t.message,eErrorSeverity.medium),r.reject()})}}});var TDALInitialData=function(){return{GetData:function(e){return(new TAjaxer).promises.get("TDALInitialData/getData","InitialData/GetData","",e,function(e){ErrorManager.onError("TDALInitialData/getData",ErrorManager.getFullExceptionMessage(e),eErrorSeverity.high)},null,null,null,!1)}}},TDALInstruments=function(){function a(e){return JSONHelper.STR2JSON("dalInstruments:processResponse",e)}function s(e){return t("TDALInstruments/getPresets",e)}function i(e){return t("TDALInstruments/getScheduleGroup",e)}function t(e,t){throw ErrorManager.onError(e,t.message,eErrorSeverity.medium),t}function l(e){if((e=e||{}).State=e.State||eAjaxerState.None,e.State===eAjaxerState.Retry&&isDefinedType(Logger)){var t="Client cache has expired - retried: "+JSON.stringify(e);Logger.warn("TDALInstruments",t,emptyFn,eErrorSeverity.warning)}}return{ChangeUIOrder:function(e,t){e=e||[];var n=new TAjaxer,r=String.format("uiOrder={0}",e.join("|"));n.post("dalCommon/ChangeUIOrder","Handlers/General/ChangeUIOrder.ashx?methodName=ChangeUIOrder",r,t,function(e){ErrorManager.onError("TdalCommon/ChangeUIOrder",e.message,eErrorSeverity.low)})},GetPresets:function(e){var i=new TAjaxer(1e3),t="";t+="fu"+e.futuresPermission,t+="-s"+e.stocksPermission,t+="-fo"+e.folderId,t+="-br"+e.brokerId;var o=UrlResolver.getStaticJSActionPath("Presets",t);return i.promises.get("TDALInstruments/getPresets",o,null,null,null,null,null,null,!1).progress(l).then(a).fail(function(e){return t=e,n=i,r=o,ErrorManager.onError("TDALInstruments/getPresets",t.message,eErrorSeverity.medium),n.promises.get("TDALInstruments/getPresets from origin",r).progress(l).then(a).fail(s);var t,n,r})},GetScheduleGroup:function(e){var t=TAjaxer(),n="schgrp"+e,r=UrlResolver.getStaticResourcePath(n);return t.promises.get("TDALInstruments/getScheduleGroup",r,"",null,null,null,null,null,!1).then(a).fail(i)}}},TDALNotificationData=function(){return{GetUpdatedCacheElementsData:function(e){return(new TAjaxer).promises.get("TDALNotificationData/getUpdatedCacheElementsData",e,null,null,null,null,null,null,!1)}}},TDALCustomer=function(){return{getCustomer:function(){return(new TAjaxer).promises.get("TDALCustomer/getCustomer","customer/GetCustomer",null,emptyFn,function(){ErrorManager.onError("TDALCustomer/getCustomerDetails","",eErrorSeverity.medium)})},GetCustomerDetails:function(){return(new TAjaxer).promises.get("TDALCustomer/getCustomerDetails","customer/customerDetails",null,emptyFn,function(){ErrorManager.onError("TDALCustomer/getCustomerDetails","",eErrorSeverity.medium)})},GetRequiredFieldsForDeposit:function(e){(new TAjaxer).get("TDALCustomer/getRequiredFieldsForDeposit","Customer/GetRequiredFieldsForDeposit","",e,function(){ErrorManager.onError("TDALCustomer/getRequiredFieldsForDeposit","",eErrorSeverity.medium)})},IsIdNumberValid:function(e,t,n){(new TAjaxer).get("TDALCustomer/isIdNumberValid","Customer/IsIdNumberValid?"+String.format("valueToValidate={0}",e),"",t,function(){ErrorManager.onError("TDALCustomer/getRequiredFieldsForDeposit","",eErrorSeverity.medium),n()})},UpdateMissingInformation:function(e,t){(new TAjaxer).jsonPost("TDALCustomer/updateMissingInformation","Customer/UpdateMissingCustomerInformation"+String.format("?SecurityToken={0}",systemInfo.securityToken),JSON.stringify(e),t,function(e){ErrorManager.onError("TDALCustomer/updateMissingInformation",e.message,eErrorSeverity.low)},0)},getCustomerSignalsPermissions:function(e){return isFunctionType(e)||(e=emptyFn),(new TAjaxer).promises.get("TDALTradingSignals/getLatestTradingSignal","Handlers/TradingSignals/TradingSignals.ashx?methodName=GetClientSignalsPermissions","",e,function(){ErrorManager.onError("TDALTradingSignals/getCustomerSignalsPermissions","",eErrorSeverity.medium)})},GetCustomerAgreementPhrase:function(e){isFunctionType(e)||(e=emptyFn);var t=new TAjaxer,n="countryID="+$customer.prop.countryID;return t.promises.get("TDALCustomer/getCustomerAgreementPhrase","Account/AgreementPhrase",n,e,function(){ErrorManager.onError("TDALCustomer/getCustomerAgreementPhrase","",eErrorSeverity.medium)})},HasMissingInformation:function(){return(new TAjaxer).promises.get("TDALCustomer/getHasMissingInformation","customer/hasMissingInformation",null,emptyFn,function(){ErrorManager.onError("TDALCustomer/getHasMissingInformation","",eErrorSeverity.medium)})},GetEducationalTutorials:function(){return(new TAjaxer).promises.get("TDALCustomer/getEducationalTutorials","Tutorials/GetVideoLessons",null,null,null,1,null,null,!1).then(function(e){return JSONHelper.STR2JSON("dalCustomer/getEducationalTutorials",e)}).fail(function(e){throw ErrorManager.onError("TDALCustomer/getEducationalTutorials",e.message,eErrorSeverity.medium),e})},GetToken:function(){return(new TAjaxer).promises.get("GetToken","Account/GetToken",null,emptyFn,function(){ErrorManager.onError("GetToken","",eErrorSeverity.medium)})}}};define("dalCustomerProfile",["require","ErrorManager"],function(e){var a=e("ErrorManager");return new function(){var i=function(e,t,n){-1<n.indexOf("ServerError")&&a.onWarning(e,"Server Error; Params: "+t)};function o(e){return!(isEmptyValue(e)||(isNullOrUndefined(t=e)||isObjectType(t)&&equals(t,{})));var t}return{SaveStartUpPage:function(e,t){if(o(e)){var n=new TAjaxer,r=JSON.stringify(e);n.post("TDALCustomerProfile/SaveStartUpPage","Handlers/General/ClientProfileHandler.ashx?methodName=SaveStartUpPage",r,t,function(e){a.onError("TDALCustomerProfile/SaveStartUpPage",e.message,eErrorSeverity.medium)})}},SaveProfile:function(e,t){if(o(e)){var n=new TAjaxer,r=JSON.stringify(e);n.post("TDALCustomerProfile/SaveProfile","Handlers/General/ClientProfileHandler.ashx?methodName=SaveProfile",r,t,function(e){a.onError("TDALCustomerProfile/SaveProfile",e.message,eErrorSeverity.medium)},1,2)}},SaveProfileInstrument:function(e,t){if(o(e)){var n=new TAjaxer,r=JSON.stringify(e);n.post("TDALCustomerProfile/SaveProfile","Handlers/General/ClientProfileHandler.ashx?methodName=SaveProfileInstrument",r,t,function(e){a.onError("TDALCustomerProfile/SaveProfileInstrument",e.message,eErrorSeverity.medium)})}},SaveClientScreen:function(e){if(o(e)){var t=new TAjaxer,n=JSON.stringify(e),r="TDALCustomerProfile/saveClientScreen";return t.promises.post(r,"Handlers/General/ClientProfileHandler.ashx?methodName=UpdateScreen",n,null,null,1,2).then(function(e){return i(r,n,e),JSONHelper.STR2JSON(r+"/onLoadComplete",e)}).fail(function(e){throw a.onError(r,"",eErrorSeverity.medium),e})}},SaveSentimentsToProfileWebMobile:function(e,t){if(o(e)){var n=new TAjaxer,r=JSON.stringify(e);n.post("TDALCustomerProfile/SaveProfileWebMobile","Handlers/General/ClientProfileHandler.ashx?methodName=SaveSentimentsToProfileWebMobile",r,t,function(e){a.onError("TDALCustomerProfile/SaveSentimentsToProfileWebMobile",e.message,eErrorSeverity.medium)})}}}}});var TDALRetention=function(){return{GetToken:function(e){return(new TAjaxer).promises.get("TDALRetention/getToken",$customer.prop.interactiveMessagesToken,"",e,function(e){ErrorManager.onError("TDALRetention/getToken",ErrorManager.getFullExceptionMessage(e),eErrorSeverity.high)},null,null,null,!1)}}},TDALTradingSignals=function(){return{getLatestTradingSignal:function(e,t){isFunctionType(t)||(t=emptyFn);var n=TAjaxer(),r=urlEncode(e);return n.promises.get("TDALTradingSignals/getLatestTradingSignal","Handlers/TradingSignals/TradingSignals.ashx?methodName=GetLatestTradingSignal",r,t,function(){ErrorManager.onError("TDALTradingSignals/getLatestTradingSignal","",eErrorSeverity.medium)},0)},getSignalsDetailsForTechAnalysis:function(e,t){isFunctionType(t)||(t=emptyFn);var n=TAjaxer(),r=urlEncode(e);return n.promises.get("TDALTradingSignals/getSignalsDetailsForTechAnalysis","Handlers/TradingSignals/TradingSignals.ashx?methodName=GetSignalsDetailsForTechAnalysis",r,t,function(){ErrorManager.onError("TDALTradingSignals/getSignalsDetailsForTechAnalysis","",eErrorSeverity.medium)},0)},getTradingSignal:function(e,t){isFunctionType(t)||(t=emptyFn);var n=TAjaxer(),r=urlEncode(e);return n.promises.get("TDALTradingSignals/getTradingSignal","Handlers/TradingSignals/TradingSignals.ashx?methodName=GetTradingSignal",r,t,function(){ErrorManager.onError("TDALTradingSignals/getTradingSignal","",eErrorSeverity.medium)},0)},getSignalsForGrids:function(e,t){isFunctionType(t)||(t=emptyFn);return TAjaxer().promises.get("TDALTradingSignals/getSignalsForGrids","Handlers/TradingSignals/TradingSignals.ashx?methodName=GetSignalsForGrids&filters=["+e+"]","",t,function(){ErrorManager.onError("TDALTradingSignals/getSignalsForGrids","",eErrorSeverity.medium)},0)}}};define("FxNet/DataAccessLayer/dalClaims",["require","ErrorManager"],function(e){var i=e("ErrorManager");return{getClaim:function(e,t,n){var r="Claims/GetUploadClaim";return TAjaxer().promises.jsonPost("TDALClaims/GetUploadClaim",r,JSON.stringify({actionType:e,recordType:t,account:n})).fail(function(e,t){i.onError(e,t.message,eErrorSeverity.medium)}.bind(null,r))},postGetCCClaim:function(e,t,n){return TAjaxer().promises.jsonPost("TDALClaims/GetCCClaims","Claims/GetCCClaims",JSON.stringify({actionType:e,recordTypes:t,account:n}))}}});var TDALDeposit=function(){var t=function(t,e,n,r){return(new TAjaxer).promises.get(n,e).fail(function(e){if(!(e instanceof AjaxError)||504!==e.httpStatus&&0!==e.httpStatus||!isFunctionType(t))throw ErrorManager.onError(n,r,eErrorSeverity.medium),e;t()})};function r(e,t,n,r){var i=new TAjaxer,o=JSON.stringify({errorType:e,errorDetails:t,isGenericCreditCard:n,frameGuid:r});i.jsonPost("Deposit/WriteDepositErrorActivityLog","Deposit/WriteDepositErrorActivityLog",o,emptyFn,function(e){var t=e?e.message:"";ErrorManager.onError("Deposit/WriteDepositErrorActivityLog",t,eErrorSeverity.medium)})}function i(e,t,n,r){var i=new TAjaxer,o=JSON.stringify({messageType:e,message:t,action:n,isGenericCreditCard:r});i.jsonPost("Deposit/LogDepositCommunication","Deposit/LogDepositCommunication",o,emptyFn,function(){ErrorManager.onError("Deposit/LogDepositCommunication","",eErrorSeverity.medium)})}return{getPaymentStatus:function(e){return t(e,"Payments/Deposit/GetPaymentStatus","TDALDeposit/getPaymentStatus","getPaymentStatus")},getFinalPaymentStatus:function(e){return t(e,"Payments/Deposit/getFinalPaymentStatus","TDALDeposit/getFinalPaymentStatus","getFinalPaymentStatus")},getCreditCardData:function(e){return(new TAjaxer).promises.get("TDALDeposit/GetCreditCardData","Handlers/Deposit/CreditCard.ashx?methodName=GetCreditCardData&depositingActionType="+e,"",null,null,0).fail(function(e){return ErrorManager.onError("TDALDeposit/GetCreditCardData","GetCreditCardData",eErrorSeverity.medium),e})},getAllowedCreditCardData:function(){return(new TAjaxer).promises.get("TDALDeposit/getAllowedCreditCards","Payments/CreditCard/GetAllowedCreditCards",null,null,null,null,null,null,!1).fail(function(e){throw ErrorManager.onError("TDALDeposit/GetAllowedCreditCards","GetAllowedCreditCards",eErrorSeverity.medium),e})},getAllowedCreditCardsWithAmountValidation:function(){return(new TAjaxer).promises.get("TDALDeposit/GetCreditCardData","Handlers/Deposit/CreditCard.ashx?methodName=GetAllowedCreditCardsWithAmountValidation").fail(function(e){throw ErrorManager.onError("TDALDeposit/GetAllowedCreditCardsWithAmountValidation","GetAllowedCreditCardsWithAmountValidation",eErrorSeverity.medium),e})},reloadCreditCardData:function(){return(new TAjaxer).promise.get("TDALDeposit/reloadCreditCardData","Handlers/Deposit/CreditCard.ashx?methodName=ReloadCreditCardData","",null,null,0).fail(function(){ErrorManager.onError("TDALDeposit/reloadCreditCardData","reloadCreditCardData",eErrorSeverity.medium)})},depositCreditCard:function(e){var t=new TAjaxer,n=new StringBuilder,r=Object.assign({challengeWindowSize:ePaymentsChallengeWindowSize.Fullscreen},Browser.getBrowserDetails());return n.append(String.format("paymentID={0}&",e.paymentID||"-1")),n.append(String.format("cardNumber={0}&",e.cardNumber)),n.append(String.format("expMonth={0}&",e.expMonth)),n.append(String.format("expYear={0}&",e.expYear)),n.append(String.format("cardTypeID={0}&",e.cardTypeID)),n.append(String.format("depositCurrency={0}&",e.depositCurrency)),n.append(String.format("cardHolderName={0}&",e.cardHolderName)),n.append(String.format("amount={0}&",e.amount)),n.append(String.format("cvv={0}&",e.cvv)),n.append(String.format("paymentAuthMode={0}&",e.paymentAuthMode)),n.append(String.format("browserData={0}&",JSON.stringify(r))),n.append(String.format("SecurityToken={0}",systemInfo.securityToken)),t.promises.post("dalDeposit:depositCreditCard","Handlers/Deposit/CreditCard.ashx?methodName=DepositCreditCard",n.toString(),null,null,0).fail(function(e){ErrorManager.onError("Handlers/Deposit/CreditCard.ashx",e.message,eErrorSeverity.medium)})},depositEWallet:function(e){return(new TAjaxer).promises.post("dalDeposit:depositEWallet","Payments/EWallet/Deposit",$.param(e),null,null,0).fail(function(e){ErrorManager.onError("Payments/EWallet/Deposit",e.message,eErrorSeverity.medium)})},depositMoneyBookers:function(e){return(new TAjaxer).promises.post("dalDeposit:depositEWallet","Payments/MoneyBookers/Deposit",$.param(e),null,null,0).fail(function(e){ErrorManager.onError("Payments/MoneyBookers/Deposit",e.message,eErrorSeverity.medium)})},depositInatecAPM:function(e){return(new TAjaxer).promises.post("dalDeposit:depositInatecAPM","Payments/InatecAPM/Deposit",$.param(e),null,null,0).fail(function(e){ErrorManager.onError("Payments/InatecAPM/Deposit",e.message,eErrorSeverity.medium)})},setUsedCardAsDefault:function(e){return(new TAjaxer).promises.post("TDALDeposit/setUsedCardAsDefault","Handlers/Deposit/CreditCard.ashx?methodName=SetUsedCardAsDefault&paymentID="+e,"",null,null,0).fail(function(e){ErrorManager.onError("TDALDeposit/setUsedCardAsDefault",e.message,eErrorSeverity.low)}).done()},removeUsedCard:function(e){return(new TAjaxer).promises.post("TDALDeposit/removeUsedCard","Handlers/Deposit/CreditCard.ashx?methodName=RemoveUsedCard&paymentID="+e,"",null,null,0).fail(function(e){ErrorManager.onError("TDALDeposit/removeUsedCard",e.message,eErrorSeverity.low)})},getWireTransferInfo:function(){return(new TAjaxer).promises.get("TDALDeposit/getWireTransferInfo","Handlers/Deposit/WireTransfer.ashx?methodName=GetWireTransferInfo","countryID="+$customer.prop.countryID,null,null,0).fail(function(){ErrorManager.onError("TDALDeposit/getWireTransferInfo","",eErrorSeverity.medium)})},getWireTransferCountryInfo:function(e){return(new TAjaxer).promises.get("RegularWireTransfer/getWireTransferCountryInfo","Payments/RegularWireTransfer/GetWireTransferCountryInfo","countryID="+e,null,null,0).fail(function(){ErrorManager.onError("RegularWireTransfer/GetWireTransferCountryInfo","",eErrorSeverity.medium)})},depositWireTransfer:function(e){return(new TAjaxer).promises.post("dalDeposit:depositWireTransfer","Payments/RegularWireTransfer/Deposit",$.param(e),null,null,0).fail(function(e){ErrorManager.onError("Payments/RegularWireTransfer/Deposit",e.message,eErrorSeverity.medium)})},getCashU:function(){var e=new TAjaxer,t="countryID="+$customer.prop.countryID+"&borkerID="+$customer.prop.brokerID;return e.promises.get("TDALDeposit/getCashU","Handlers/Deposit/CashU.ashx?methodName=GetCashUInfo",t,null,null,0).fail(function(){ErrorManager.onError("TDALDeposit/GetCashUInfo","",eErrorSeverity.medium)})},getMoneyBookers:function(){var e=new TAjaxer,t="countryID="+$customer.prop.countryID+"&borkerID="+$customer.prop.brokerID;return e.promises.get("TDALDeposit/getMoneyBookers","Handlers/Deposit/MoneyBookers.ashx?methodName=GetMoneyBookersInfo",t,null,null,0).fail(function(){ErrorManager.onError("TDALDeposit/getMoneyBookersInfo","",eErrorSeverity.medium)})},getEWalletCurrencies:function(e,t,n){return(new TAjaxer).promises.get("TDALDeposit/getCurrencies","Payments/EWallet/GetCurrencies?paymentType="+e+"&countryId="+t+"&concretePaymentTypeId="+n,"",null,null,0).fail(function(){ErrorManager.onError("TDALDeposit/getEWalletCurrencies","getEWalletCurrencies",eErrorSeverity.low)})},getAstropayPaymentMethods:function(){return(new TAjaxer).promises.get("Astropay/getPaymentMethods","Payments/Astropay/GetPaymentMethods",null,null,null,0,null,null,!1).fail(function(){ErrorManager.onError("Astropay/getPaymentMethods","",eErrorSeverity.medium)})},getWireTransferCountries:function(){return(new TAjaxer).promises.get("RegularWireTransfer/getWireTransferCountries","Payments/RegularWireTransfer/GetWireTransferCountries",null,null,null,0).fail(function(){ErrorManager.onError("RegularWireTransfer/getWireTransferCountries","",eErrorSeverity.medium)})},getConcretePayments:function(e,t,n){var r=new TAjaxer,i="ConcretePayments/co"+e+"-uco"+t+"-br"+n,o=UrlResolver.getStaticJSActionPath("Payments/Deposit",i);return r.promises.get("TDALDeposit/GetConcretePayments",o,null,null,null,null,null,null,!1)},getPaymentCountries:function(e,t){var n=new TAjaxer,r="Countries/br"+e+"c"+t,i=UrlResolver.getStaticJSActionPath("Payments/Deposit",r);return n.promises.get("TDALDeposit/GetPaymentCountries",i,null,null,null,0,null,null,!1).fail(function(){ErrorManager.onError("TDALDeposit/GetPaymentCountries","getPaymentCountries",eErrorSeverity.low)})},getUserDepositDetails:function(){return(new TAjaxer).promises.get("TDALDeposit/GetUserActions","Payments/Deposit/GetUserActions","")},getLastSuccesfullDepositCurrency:function(){return(new TAjaxer).promises.get("TDALDeposit/GetLastSuccesfullDepositCurrency","Payments/Deposit/GetLastSuccesfullDepositCurrency","").fail(function(){ErrorManager.onError("TDALDeposit/GetLastSuccesfullDepositCurrency","getLastSuccesfullDepositCurrency",eErrorSeverity.low)})},failDeposit:function(e){var t=new TAjaxer,n=JSON.stringify({requestId:e});return t.promises.jsonPost("TDALDeposit/failDeposit","Payments/Deposit/FailDeposit",n,null,null).fail(function(e){ErrorManager.onError("Payments/Deposit/FailDeposit",e.message,eErrorSeverity.medium)}).done()},getForcedClearers:function(){return(new TAjaxer).promises.get("dalDeposit","api/backoffice/deposit/getforcedclearers/",null,null,null,0,null,null,!1).then(JSON.parse).fail(function(e){ErrorManager.onError("dalDeposit",e.message,eErrorSeverity.medium)})},submitForcedDeposit:function(e){return(new TAjaxer).promises.jsonPost("dalDeposit","api/backoffice/deposit/doforceddeposit",JSON.stringify(e),null,null).fail(function(e){return ErrorManager.onError("dalDeposit",e.message,eErrorSeverity.medium),e})},LogDepositCommunication:function(e,t,n){i(e,t,n,!1)},LogGenericCCDepositActivityMessage:function(e,t){r(e,t,!0)},LogGenericCCDepositCommunication:function(e,t,n){i(e,t,n,!0)},LogFrameNotLoadedMessage:function(e,t,n){r(e,t,!0,n)}}};function TDALClosedDeals(){function r(e){isEmptyType(e.positionNumber)&&(e.positionNumber=0)}function i(e){(isEmptyType(e.instrumentId)||e.instrumentId==Number.MAX_SAFE_INTEGER||-1===e.instrumentId)&&(e.instrumentId=0)}return{LoadClosedDeals:function(e,t){var n=new TAjaxer;r(e=e||{}),i(e),n.get("dalClosedDeals/LoadClosedDeals","Handlers/HistoricalData/ClosedDeals.ashx?methodName=LoadClosedDeals",urlEncode(e),t,function(){ErrorManager.onError("dalClosedDeals/loadClosedDealsSummaries","",eErrorSeverity.medium)})},LoadRolledOverHistory:function(e,t){var n=new TAjaxer,r="positionNumber="+e.PositionNumber+"&page="+e.Page+"&pageSize="+e.PageSize;n.get("TDALHistoricalData/loadRolledOverHistory","Handlers/HistoricalData/ClosedDeals.ashx?methodName=LoadRolledOverHistory",r,t,function(){ErrorManager.onError("TDALHistoricalData/loadRolledOverHistory","",eErrorSeverity.medium)})},LoadClosedDealsSummaries:function(e,t){var n=new TAjaxer;r(e=e||{}),i(e),n.get("dalClosedDeals/loadClosedDealsSummaries","Handlers/HistoricalData/ClosedDeals.ashx?methodName=LoadClosedDealsSummaries",urlEncode(e),t,function(){ErrorManager.onError("dalClosedDeals/loadClosedDealsSummaries","",eErrorSeverity.medium)})},LoadClosedDealsSummariesWithThreshold:function(e,t){var n=new TAjaxer;r(e=e||{}),i(e),n.get("dalClosedDeals/loadClosedDealsSummariesWithThreshold","Handlers/HistoricalData/ClosedDeals.ashx?methodName=LoadClosedDealsSummariesWithThreshold",urlEncode(e),t,function(){ErrorManager.onError("dalClosedDeals/loadClosedDealsSummaries","",eErrorSeverity.medium)})}}}var dalClosedDeals=new TDALClosedDeals,TDALWithdrawal=function(){return{getWithdrawalInfo:function(e){(new TAjaxer).get("dalWithdrawal/getWithdrawalInfo",String.format("Handlers/Withdrawal/Withdrawal.ashx?methodName=GetWithdrawalInfo&symbolID={0}&SecurityToken={1}",$customer.prop.baseCcyId(),systemInfo.securityToken),null,e,function(){ErrorManager.onError("dalWithdrawal/getWithdrawalInfo","",eErrorSeverity.medium)},0)},getWithdrawalRequestById:function(e,t){(new TAjaxer).get("dalWithdrawal/getWithdrawalRequestById",String.format("Handlers/Withdrawal/Withdrawal.ashx?methodName=GetWithdrawalRequestById&symbolID={0}&withdrawalID={1}&SecurityToken={2}",$customer.prop.baseCcyId(),e,systemInfo.securityToken),null,t,function(){ErrorManager.onError("dalWithdrawal/getWithdrawalRequestById","",eErrorSeverity.medium)},0)},saveWithdrawalRequest:function(e,t){var n=new TAjaxer,r=new StringBuilder;r.append(String.format("request={0}&",encodeURIComponent(t))),r.append(String.format("SecurityToken={0}",systemInfo.securityToken)),n.post("dalWithdrawal/saveWithdrawal","Handlers/Withdrawal/Withdrawal.ashx?methodName=SaveWithdrawal",r.toString(),e,function(e){ErrorManager.onError("dalWithdrawal/saveWithdrawalRequest",e.message,eErrorSeverity.medium)},0)},saveWithdrawalBackOfficeRequest:function(t,e){(new TAjaxer).promises.jsonPost("dalWithdrawal/saveWithdrawal","api/backoffice/withdrawal/saveWithdrawal",e).then(function(e){if(JSON.parse(e).Status!==eOperationStatus.Success)throw new Error("Withdrawal from BackOffice failed. Server error");t(JSON.stringify(JSON.parse(e).Result))}).fail(function(e){ErrorManager.onError("dalWithdrawal/saveWithdrawalBackOfficeRequest",e.message,eErrorSeverity.medium)})},getPendingWithdrawals:function(e,t,n){(new TAjaxer).get("dalWithdrawal/getPendingWithdrawals",String.format("Handlers/Withdrawal/Withdrawal.ashx?methodName=GetPendingWithdrawals&page={0}&pageSize={1}&SecurityToken={2}",e,t,systemInfo.securityToken),null,n,function(){ErrorManager.onError("dalWithdrawal/GetPendingWithdrawals","",eErrorSeverity.medium)},0)},getAllPendingWithdrawalsByAccount:function(e){(new TAjaxer).get("dalWithdrawal/getAllPendingWithdrawalsByAccount",String.format("Handlers/Withdrawal/Withdrawal.ashx?methodName=GetAllPendingWithdrawalsByAccount&SecurityToken={0}",systemInfo.securityToken),null,e,function(){ErrorManager.onError("dalWithdrawal/getAllPendingWithdrawalsByAccount","",eErrorSeverity.medium)},0)},cancelPendingWithdrawal:function(t,n){var e=new TAjaxer,r=new StringBuilder;r.append(String.format("withdrawalID={0}&",t[eWithdrawalView.withdrawalID])),r.append(String.format("accountingActionId={0}&",t[eWithdrawalView.actionID])),r.append(String.format("SecurityToken={0}&",systemInfo.securityToken)),r.append(String.format("rv={0}&",encodeURIComponent(t[eWithdrawalView.rowVersion]))),r.append(String.format("amrv={0}",encodeURIComponent(t[eWithdrawalView.accountMaxRowVersion]))),e.post("dalWithdrawal/CancelPendingWithdrawal","Handlers/Withdrawal/Withdrawal.ashx?methodName=CancelPendingWithdrawal",r.toString(),function(e){n(t,e)},function(e){ErrorManager.onError("dalWithdrawal/CancelPendingWithdrawal",e.message,eErrorSeverity.medium)},0)},getCCDeposits:function(e){(new TAjaxer).get("dalWithdrawal/getCCDeposits",String.format("Handlers/Withdrawal/Withdrawal.ashx?methodName=GetCCDeposits&SecurityToken={0}",systemInfo.securityToken),null,e,function(){ErrorManager.onError("dalWithdrawal/getCCDeposits","",eErrorSeverity.medium)},0)},getCreditCardCurrencies:function(e,t){var n=new TAjaxer,r=new StringBuilder;r.append(String.format("cardTypeId={0}&",e)),r.append(String.format("SecurityToken={0}",systemInfo.securityToken)),n.post("dalWithdrawal/getCreditCardCurrencies","Handlers/Withdrawal/Withdrawal.ashx?methodName=GetCreditCardCurrencies",r.toString(),t,function(){ErrorManager.onError("dalWithdrawal/getCreditCardCurrencies","",eErrorSeverity.medium)},0)}}},dalWithdrawal=new TDALWithdrawal,TDALDemoAccount=function(){var t=new TAjaxer;return{processDemoDeposit:function(e){t.get("TDALDemoAccount/processDemoDeposit","DemoAccount/ProcessDemoDeposit","",e,function(e){ErrorManager.onError("TDALDemoAccount/processDemoDeposit",e.message,eErrorSeverity.low)},0,null,null,!1)}}},TDALMarketState=function(){function e(e){throw ErrorManager.onError("TDALMarketState/get","",eErrorSeverity.high),e}function t(e){var t=JSONHelper.STR2JSON("dalMarketState:analyzeResponse",e);if(isNullType(t)||"ServerError"===t.status)throw new Error("Cannot get market state");return t.Result}return{GetData:function(){return(new TAjaxer).promises.get("TDALMarketState/get","api/MarketState/GetState").then(t).fail(e)}}};define("FxNet/DataAccessLayer/dalKycClientQuestionnaire",[],function(){var e={},i=new TAjaxer,o="dalKycClientQuestionnaire";return e.post=function(e,n,t){i.jsonPost(o,"compliance/KycCustomerAnswers",JSON.stringify(e),function(e){var t=JSON.parse(e);isFunctionType(n)&&n(t)},function(e){isFunctionType(t)&&t(e)})},e.postKycKnowledgeQuestionnaire=function(e,n,t){i.jsonPost(o,"compliance/KycKnowledgeCustomerAnswers",JSON.stringify(e),function(e){var t=JSON.parse(e);isFunctionType(n)&&n(t)},function(e){isFunctionType(t)&&t(e)})},e.postCustomerFailedAware=function(n){i.jsonPost(o,"compliance/CustomerFailedAware",null,function(e){if(n){var t=JSON.parse(e);n(t)}})},e.get=function(n,t){var r="compliance/CustomerAnswers";i.get(o,r,null,function(e){var t=JSON.parse(e);isFunctionType(n)&&n(t)},function(e){throw isFunctionType(t)&&t(e),new Error("Client Questionnaire Dal- ajax request failed:"+r)})},e}),define("FxNet/DataAccessLayer/dalCddClientQuestionnaire",["require","knockout","StateObject!PostLoginAlerts"],function(e){e("knockout");var t={},i=new TAjaxer,o=e("StateObject!PostLoginAlerts");return t.post=function(e,n,t){var r="compliance/CddCustomerAnswers?_="+(new Date).getTime();i.jsonPost("dalCddClientQuestionnaire",r,JSON.stringify(e),function(e){o.update("SetAlertsBehaviorMode",1);var t=JSON.parse(e);isFunctionType(n)&&n(t)},function(e){isFunctionType(t)&&t(e)})},t}),define("dalRates",["require","ErrorManager"],function(e){var o=e("ErrorManager");return new function(){return{FetchPeriods:function(e,t,n){var r=new TAjaxer,i=JSON.stringify({instrumentId:e,termIds:n,direction:t});return r.promises.jsonPost("dalRates/FetchPeriods","FeedsHistory/GetTermResults",i).then(function(e){return t=e,(n=JSON.parse(t)).length?n.map(function(e){return{id:e[eRateIDataPositions.Id],low:e[eRateIDataPositions.Low],high:e[eRateIDataPositions.High]}}):[];var t,n}).fail(function(e){!function(e,t){throw o.onError(e,"",eErrorSeverity.high),t}("TDALRatesData/fetchRates",e)})}}}}),define("CacheManager",["require","Q","ErrorManager","RegistrationManager","AjaxCacheManager","SocketCacheManager","ClientStateDataProcessor","Preloader"],function(e){var o=e("Q"),a=e("ErrorManager"),s=e("RegistrationManager"),l=e("AjaxCacheManager"),u=e("SocketCacheManager"),c=e("ClientStateDataProcessor"),A=e("Preloader");return window.$cacheManager=new function(){var r,e=o.defer();function t(){return n().then(function(){return r.LoadData()})}function i(){return n().then(function(){return r.LoadFinished})}function n(){return e.promise}return{Init:function(){A.IsCSMPushServiceEnabled()?(SocketConnection.setNotAvailableHandler(function(){a.onWarning("SocketConnection","Socket connection is not available when PushService is enabled, falling back to ajax"),r&&((r=new l(c)).OnRegisterRequest.Add(s.Register),r.OnLoadRequest.Add(function(){t().done()}),r.LoadData().done())}),SocketConnection.hasStarted().then(function(){r=new u(c),e.resolve()}).fail(function(){r=new l(c),e.resolve(),a.onWarning("SocketConnection","WebSocket not supported")}).done()):(r=new l(c),e.resolve()),e.promise.then(function(){r.OnRegisterRequest.Add(s.Register),r.OnLoadRequest.Add(function(){t().done()})}).done()},Register:function(e,t,n){i().then(function(){r.Register(e,t,n)}).done()},Unregister:function(){i().then(function(){r.Unregister()}).done()},LoadData:t,SetDisplaySymbol:function(e){n().then(function(){r.SetDisplaySymbol(e)}).done()},ServerTime:c.ServerTime}}}),define("SocketCacheManager",["require","TDALSocketClientState","ErrorManager","SystemInfo"],function(e){var o=e("TDALSocketClientState"),y=e("ErrorManager"),w=e("SystemInfo");return function(c){var r,A=Q.defer(),e=new TDelegate,t=new TDelegate,d=0,p=0,f=1,h=-1,m=null,g=null;try{(r=new o).registerMessageCallback(function(e){var t,n,r,i,o,a,s,l,u;(n=w.get("slaTimeout")||1e3,r=w.get("slaTimeout")||1e3,i=c.ServerTime().getTime(),o=i-p,a=Date.now(),s=a-d,0<d&&n<s&&(t={clientPrevMsgTime:d,clientCurrentMsgTime:a,clientDuration:s,clientSlaTimeout:n,serverPrevMsgTime:p,serverCurrentMsgTime:i,serverDuration:o,serverSlaTimeout:r,description:"SLA has been compromised"}),p=i,d=a,isEmptyValue(t)||setTimeout(y.onWarning,0,"slaMonitor",t),isNullOrUndefined(e.msgId)||function(e,t){if(!isNumber(e))return!1;var n=(new Date).toISOString();return 0<e&&Math.abs(e-h)>f?(y.onWarning("missed messages,\nprevious="+h+", serverTime: "+m+", clientTime: "+g+",\nnext="+e+", serverTime: "+t+", clientTime: "+n),v(),!1):(h=e,m=t,g=n,!0)}(e.msgId,e.time))&&(l=e.data,u=!1,l&&0<l.length&&c.processData(l,u),A.resolve())}),r.registerReconnectedCallback(v)}catch(e){throw y.onError("SocketCacheManager/SocketCacheManager","cannot establish socket connection",eErrorSeverity.medium),e}function v(){i().then(function(){t.Invoke(eSubscriptionRequestFlags.All,!0)}).done()}function n(){return Q.all([i(),A.promise])}function i(){return r.HasStarted()}return{Register:function(e,t,n){i().then(function(){r.Register(e,n)}).done()},LoadData:n,Unregister:function(e,t,n){i().then(function(){r.Unregister(e,n)}).done()},SetDisplaySymbol:function(e){i().then(function(){r.SetDisplaySymbol(e)}).done()},LoadFinished:n,OnLoadRequest:e,OnRegisterRequest:t}}}),define("AjaxCacheManager",["require","Q","JSONHelper","dalClientState","ErrorManager","StateObject!Csm","StateObject!SystemNotificationEvents"],function(e){var y=e("Q"),w=e("JSONHelper"),b=e("dalClientState"),C=e("ErrorManager"),S=e("StateObject!Csm"),E=e("StateObject!SystemNotificationEvents");return function(n){var s=eRequestMode.Initial,r=!1,l=0,u=0,c=0,i=(new Date).getTime(),o=y.defer(),A=new TDelegate,d=new TDelegate,p=!1,f=0;function a(e,t,n){var r,i,o=w.STR2JSON("CacheManager/onLoadComplete",n,eErrorSeverity.high);if((o=o||{}).status==eOperationStatus.Success)if(o.clientStateResult=o.clientStateResult||eClientStateResult.NotFound,o.clientStateResult!=eClientStateResult.Success)r=function(){d.Invoke(eSubscriptionRequestFlags.All,!0),S.update(eStateObjectTopics.CsmOutOfDate,!0)},u&&(clearTimeout(u),u=0),u=setTimeout(r,v());else{var a=t===eRequestMode.Initial;g(o.data,a),S.update(eStateObjectTopics.CsmOutOfDate,!1),c&&(clearTimeout(c),c=0),e.resolve()}i=function(){var e=parseInt(systemInfo.clientApplicationParams[eClientParams.ClientStateLatencyInterval])+b.GetclientStateSlaTimeout();A.Invoke(),c=setTimeout(function(){f+=1,C.onWarning("AjaxerCacheManager","CSM out-dated data: latency_of="+e+",counter="+f)},e)},l&&(clearTimeout(l),l=0),p&&(h(eRequestMode.Initial),p=!1),l=setTimeout(i,v(),s)}function h(e){e==eRequestMode.Initial?(s=eRequestMode.Initial,p=!0):s=eRequestMode.Correct}function m(e){switch(e){case eSubscriptionRequestFlags.Quotes:b.GetQuotesData(eRequestMode.Initial,t);break;case eSubscriptionRequestFlags.All:h(eRequestMode.Initial)}}function t(e){var t=w.STR2JSON("CacheManager/onLoadInitialComplete",e,eErrorSeverity.high);t&&g(t.data)}function g(e,t){e&&0<e.length&&(n.processData(e,t),h(eRequestMode.Correct)),o.resolve()}function v(){var e=parseInt(systemInfo.clientApplicationParams[eClientParams.Interval])-((new Date).getTime()-i);return e=e<0?0:e}function e(){return o.promise}return E.set(eShutDownHandlerTopics.stopClientStateManagerCalls,null),E.subscribe(eShutDownHandlerTopics.stopClientStateManagerCalls,function(){r=!0,l&&(clearTimeout(l),l=0),u&&(clearTimeout(u),u=0),c&&(clearTimeout(c),c=0)}),{Register:function(e,t,n){b.Register(e).then(function(e){e?m(t):n&&setTimeout(function(){d.Invoke(eSubscriptionRequestFlags.All,!0),S.update(eStateObjectTopics.CsmOutOfDate,!0)},systemInfo.clientApplicationParams[eClientParams.Interval])}).done()},Unregister:function(){e().then(function(){return b.Unregister()}).done()},LoadData:function(e){var t=isDefinedType(e)?e:s,n=y.defer();return r||(i=(new Date).getTime(),b.GetData(t,a.bind(this,n,t))),n.promise},SetDisplaySymbol:function(e){b.SetDisplaySymbol(e)&&m(eSubscriptionRequestFlags.All)},LoadFinished:e,OnLoadRequest:A,OnRegisterRequest:d}}}),define("NotificationManager",["require","JSONHelper","dalNotificationData","ErrorManager","CookieHandler","UrlResolver"],function(e){var s=e("JSONHelper"),n=e("dalNotificationData"),r=e("ErrorManager"),l=e("CookieHandler"),i=e("UrlResolver"),u=new TDelegate,c=new TDelegate,o=[];var a=debounce(function(e,o,t){var a=function(e){var t,n,r;switch(e){case eNotificationType.InstrumentEdited:n=u,t=/(.*\|)([\d]+)(-VER\|)([\w]+)(-H)/i;break;case eNotificationType.MinDealGroupEdited:t=/(.*\|)([\d]+)(-MVER\|)([\w]+)(-MH)/i,n=c}return{updateditem:function(e){for(r in eNotificationType)if(eNotificationType[r]===e)return r}(e),regex:t,callback:n}}(t);n.GetUpdatedCacheElementsData(e).then(function(e){var t,n,r,i;t=o,n=a,r=e,(i=s.STR2JSON("NotificationsManager/onUpdate"+n.updateditem+"Complete",r,eErrorSeverity.high))&&(l.CreateCookie("B",l.ReadCookie("B").replace(n.regex,"$1"+t.ver+"$3"+t.hash+"$5"),(new Date).AddMonths(6)),n.callback.Invoke(i))}).fail(function(){r.onWarning("NotificationsManager/onRetryUpdate"+a.updateditem,a.updateditem+" version sync retry failed")}).done()},5e3);function t(e){if(e.id===i.getMinDealGroupId()&&e.ver!==i.getMinDealsVersion()){var t=i.getStaticInitialDataMinDealAmountsUrl(e.id,e.ver,e.hash);a(t,e,eNotificationType.MinDealGroupEdited)}}function A(e){if(e.ver!==i.getInstrumentsVersion()){var t=i.getStaticInitialDataInstrumentsUrl(e.ver,e.hash);a(t,e,eNotificationType.InstrumentEdited)}}return o[eNotificationType.InstrumentEdited]=new TDelegate,o[eNotificationType.InstrumentEdited].Add(A),o[eNotificationType.MinDealGroupEdited]=new TDelegate,o[eNotificationType.MinDealGroupEdited].Add(t),{ProcessData:function(e){for(var t=0,n=e.length;t<n;t++)o[e[t][eNotification.NotificationType]].Invoke({id:e[t][eNotification.ItemId],ver:e[t][eNotification.RelatedItemId],hash:e[t][eNotification.Version]})},OnInstrumentsUpdated:u,OnMinDealAmountsUpdated:c}}),define("DealsManager",[],function(){return new function(){var s=new THashTable,l=new TDelegate,a=new TDelegate;return{Deals:s,OnDealsChange:l,OnDealsPLChange:a,ProcessDeals:function(o,e){var t,n,r,i,a={newItems:[],editedItems:[],removedItems:[]};for(e&&s.ForEach(function(e){for(var t=!1,n=[],r=0,i=o.length;r<i;r++)if(o[r][eDeal.orderID]==e){t=!0;break}t||(n[eDeal.status]=eStatus.Removed,n[eDeal.orderID]=e,o.push(n))}),t=0,n=o.length;t<n;t++)switch(r=o[t][eDeal.orderID],i=s.GetItem(r),o[t][eDeal.status]){case eStatus.New:case eStatus.Edited:i?(i.Update(o[t]),a.editedItems.push(r)):(i=new TDeal(o[t]),s.SetItem(r,i),a.newItems.push(r));break;case eStatus.Removed:i&&(s.RemoveItem(r),a.removedItems.push(r))}l.Invoke(a)},ProcessDealsPL:function(e){var t,n,r,i,o=[];for(t=0,n=e.length;t<n;t++)r=e[t][eDealPL.dealID],(i=s.GetItem(r))&&(i.UpdatePL(e[t]),o.push(i.orderID));a.Invoke(o)}}}}),define("ClientStateFlagsManager",[],function(){var n=new TDelegate,r={exposureCoverageAlert:"",equityAlert:"",exposureAlert:"",marketState:"",systemMode:"",limitMultiplier:""};return window.$csFlagsManager={CSFlags:r,OnChange:n,ProcessData:function(e){var t;e[eCSFlags.isUpdated]&&(t=e,r.exposureCoverageAlert=t[eCSFlags.exposureCoverageAlert],r.equityAlert=t[eCSFlags.equityAlert],r.exposureAlert=t[eCSFlags.exposureAlert],r.marketState=t[eCSFlags.marketState],r.systemMode=t[eCSFlags.systemMode],r.limitMultiplier=t[eCSFlags.limitMultiplier],n.Invoke(r))}}}),define("ClientStateHolderManager",["Customer"],function(n){var r=new TDelegate,i={accountBalance:0,equity:0,netExposure:0,margin:0,exposureCoverage:0,totalEquity:0,openPL:0,usedMargin:0,marginUtilizationPercentage:0,availableMargin:0,marginUtilizationStatus:0,maintenanceMargin:0};return window.$csHolderManager={CSHolder:i,OnChange:r,ProcessData:function(e){var t;t=e,i.accountBalance=t[eCSHolder.accountBalance],i.equity=t[eCSHolder.equity],i.netExposure=t[eCSHolder.netExposure],i.margin=t[eCSHolder.margin],i.exposureCoverage=t[eCSHolder.exposureCoverage],i.totalEquity=t[eCSHolder.totalEquity],i.openPL=t[eCSHolder.openPL],i.usedMargin=t[eCSHolder.usedMargin],i.maintenanceMargin=formatNumberWithThousandsSeparator((toNumeric(i.usedMargin)*n.prop.maintenanceMarginPercentage/100).toFixed(2)),i.marginUtilizationPercentage=t[eCSHolder.marginUtilizationPercentage],i.availableMargin=t[eCSHolder.availableMargin],i.marginUtilizationStatus=t[eCSHolder.marginUtilizationStatus],r.Invoke(i)}}}),define("NetExposureManager",[],function(){function s(){this.symbolId="",this.amount="",this.accountSymbolAmount="",this.status=""}var l=new THashTable,u=new TDelegate;return window.$netExposureManager={Exposures:l,OnChange:u,ProcessData:function(e){var t,n,r=[],i=e.length;if(0<i){for(t=0;t<i;t++)(n=l.GetItem(e[t][eExposure.symbolID]))||(n=new s,l.SetItem(e[t][eExposure.symbolID],n)),r.push(n),o=n,a=e[t],o.symbolId=a[eExposure.symbolID],o.amount=a[eExposure.amount],o.accountSymbolAmount=a[eExposure.accountSymbolAmount],o.status=a[eExposure.status];u.Invoke(r)}var o,a}}}),define("BonusManager",["require","knockout"],function(e){var t=e("knockout"),n={};return n.onChange=new TDelegate,n.bonus=t.observable({volumeUsd:null,amountBase:null,amountGivenBase:null,startDate:null,endDate:null,accumulatedVolumeUsd:null}),n.ProcessData=function(e){n.bonus({volumeUsd:toNumeric(e[eBonus.volumeUsd]),amountBase:toNumeric(e[eBonus.amountBase]),amountGivenBase:toNumeric(e[eBonus.amountGivenBase]),startDate:e[eBonus.startDate],endDate:e[eBonus.endDate],accumulatedVolumeUsd:toNumeric(e[eBonus.accumulatedVolumeUsd])}),n.onChange.Invoke()},window.$bonusManager=n}),define("PortfolioStaticManager",[],function(){var n=new TDelegate,r={maxExposure:0,securities:0,tradingBonus:0,pendingBonus:0,pendingWithdrawals:0,kycStatus:0,amlStatus:0,cddStatus:0,kycReviewStatus:0,isDemo:0,isActive:0,pepStatus:0,pendingBonusType:0,spreadDiscountVolumePercentage:0};return window.$portfolioManager={Portfolio:r,OnChange:n,ProcessData:function(e){var t;t=e,r.maxExposure=t[ePortfolioStatic.maxExposure],r.securities=t[ePortfolioStatic.securities],r.tradingBonus=t[ePortfolioStatic.tradingBonus],r.pendingBonus=t[ePortfolioStatic.pendingBonus],r.kycStatus=t[ePortfolioStatic.kycStatus],r.amlStatus=t[ePortfolioStatic.amlStatus],r.cddStatus=t[ePortfolioStatic.cddStatus],r.kycReviewStatus=t[ePortfolioStatic.kycReviewStatus],r.pendingWithdrawals=t[ePortfolioStatic.pendingWithdrawals],r.isDemo=1===t[ePortfolioStatic.isDemo],r.isActive=1===t[ePortfolioStatic.isActive],r.pepStatus=t[ePortfolioStatic.pepStatus],r.pendingBonusType=t[ePortfolioStatic.pendingBonusType],r.spreadDiscountVolumePercentage=t[ePortfolioStatic.pendingBonusVolumePercentage],n.Invoke(r)}}}),define("InstrumentVolumeManager",[],function(){function s(){this.InstrumentID=0,this.BaseSymbolNetExposure=0,this.OtherSymbolNetExposure=0,this.AccountSymbolAmount=0,this.RequiredMarginPercentage=0,this.UsedMargin=0,this.MarginUtilizationPercentage=0,this.AvailableMargin=0,this.MarginUtilizationStatus=eMarginUtilizationStatus.NA,this.Status=eStatus.Removed,this.LastUpdate="",this.BaseSymbolAmount=0,this.OtherSymbolAmount=0}var l=new THashTable,u=new TDelegate;function c(e,t){for(var n in eInstrumentVolume)eInstrumentVolume.hasOwnProperty(n)&&isDefinedType(e[n])&&(e[n]=t[eInstrumentVolume[n]])}return window.$instrumentVolumeManager={InstrumentVolumes:l,OnChange:u,ProcessData:function(e){for(var t,n,r={newItems:[],editedItems:[],removedItems:[]},i=0,o=e.length;i<o;i++){var a=e[i][eInstrumentVolume.InstrumentID];switch(e[i][eInstrumentVolume.Status]){case eStatus.New:case eStatus.Edited:l.GetItem(a)?(c(l.GetItem(a),e[i]),r.editedItems.push(a)):(l.SetItem(a,(t=e[i],c(n=new s,t),n)),r.newItems.push(a));break;case eStatus.Removed:l.GetItem(a)&&(l.RemoveItem(a),r.removedItems.push(a))}}u.Invoke(r)}}}),define("QuotesManager",["require","PerformanceDataCollector"],function(e){function s(e){this.id=e,this.bid=0,this.ask="",this.open="",this.high="",this.low="",this.highBid="",this.lowAsk="",this.tradeTime="",this.change=0,this.changePips=0,this.state=eQuoteStates.NotChanged,this.close=""}var t=e("PerformanceDataCollector"),l=new TDelegate,u=new THashTable;function a(e,t,n){if(e.state=i(e,t),e.bid=t[eTicks.bid],e.ask=t[eTicks.ask],n){var r=new Date(n.getTime());r.AddSeconds(-t[eTicks.tradeTimeOffset]),e.tradeTime=r.ExtractDateShortYear()+" "+r.ExtractFullTime()}e.changePips=e.bid-e.close,e.change=0!=e.close?100*(e.bid/e.close-1):0}function i(e,t){return t[eTicks.state]!=eQuoteStates.Enabled?eQuoteStates.NotActive:e.bid<t[eTicks.bid]?eQuoteStates.Up:e.bid>t[eTicks.bid]?eQuoteStates.Down:eQuoteStates.NotChanged}return l.Add(function e(){t.registerEventTimestamp(eFxNetEvents.FirstQuoteEvent);l.Remove(e)}),window.$quotesManager={OnChange:l,Quotes:u,ProcessTickData:function(e,t){u.ForEach(function(e,t){t.state!==eQuoteStates.NotActive&&(t.state=eQuoteStates.NotChanged)});for(var n=[],r=0,i=e.length;r<i;r++){var o=u.GetItem(e[r][eTicks.instrumentID]);o||(o=new s(e[r][eTicks.instrumentID]),u.SetItem(o.id,o)),a(o,e[r],t),n.push(o.id)}l.Invoke(n)},ProcessOhlcData:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=u.GetItem(e[n][eOhlc.instrumentID]);i||(i=new s(e[n][eOhlc.instrumentID]),u.SetItem(i.id,i)),o=i,a=e[n],o.open=a[eOhlc.open],o.highBid=a[eOhlc.high],o.lowAsk=a[eOhlc.low],o.close=a[eOhlc.close],t.push(i.id)}var o,a;l.Invoke(t)},GetState:i,RemoveItems:function(e){for(var t=0,n=e.length;t<n;t++)u.Remove(e[t])}}}),define("ActiveLimitsManager",[],function(){var s=new TDelegate,l=new THashTable;return{limits:l,GetPriceAlerts:function(){return l.Filter(function(e,t){return t.mode===eLimitMode.PriceAlert})},HasPriceAlerts:function(n){return l.Find(function(e,t){return t.instrumentID===n&&t.mode===eLimitMode.PriceAlert}).hasItems()},OnChange:s,ProcessData:function(r,e){var i,o,t,n,a={newLimits:[],editedLimits:[],removedLimits:[]};for(e&&l.ForEach(function(e){var t=!1,n=[];for(i=0,o=r.length;i<o;i++)if(r[i][eLimit.orderID]==e){t=!0;break}t||(n[eLimit.status]=eStatus.Removed,n[eLimit.orderID]=e,r.push(n))}),i=0,o=r.length;i<o;i++)switch(t=r[i][eLimit.orderID],n=l.GetItem(t),r[i][eLimit.status]){case eStatus.New:case eStatus.Edited:n?(n.Update(r[i]),a.editedLimits.push(t)):(n=new TLimit(t,r[i]),l.SetItem(t,n),a.newLimits.push(t));break;case eStatus.Removed:n&&(l.RemoveItem(t),a.removedLimits.push(t))}s.Invoke(a)}}}),define("ClientStateDataProcessor",["require","NotificationManager","ClientStateFlagsManager","ClientStateHolderManager","PortfolioStaticManager","InstrumentVolumeManager","NetExposureManager","QuotesManager","ActiveLimitsManager","DealsManager","BonusManager","StateObject!PerformaceEvents"],function(e){var r=null,i=e("QuotesManager"),o=e("ActiveLimitsManager"),a=e("DealsManager"),s=e("NotificationManager"),l=e("NetExposureManager"),u=e("PortfolioStaticManager"),c=e("ClientStateFlagsManager"),A=e("ClientStateHolderManager"),d=e("InstrumentVolumeManager"),p=e("BonusManager"),t=e("StateObject!PerformaceEvents");return t.set("InitialDataLoadCompleted",null),t.subscribe("InitialDataLoadCompleted",function(e){var t=SplitDateTime(e);r=new Date(t.year,t.month-1,t.day,t.hour,t.min,t.sec)}),{processData:function(e,t){if(e&&0<e.length){if(e[eClientState.serverTime]&&0<e[eClientState.serverTime].length){var n=SplitDateTime(e[eClientState.serverTime]);r=new Date(n.year,n.month-1,n.day,n.hour,n.min,n.sec,n.ms)}e[eClientState.portfolioStatic]&&0<e[eClientState.portfolioStatic].length&&u.ProcessData(e[eClientState.portfolioStatic]),e[eClientState.ohlcs]&&0<e[eClientState.ohlcs].length&&i.ProcessOhlcData(e[eClientState.ohlcs]),e[eClientState.ticks]&&0<e[eClientState.ticks].length&&i.ProcessTickData(e[eClientState.ticks],r),e[eClientState.flags]&&0<e[eClientState.flags].length&&c.ProcessData(e[eClientState.flags]),e[eClientState.limits]&&0<e[eClientState.limits].length&&o.ProcessData(e[eClientState.limits],t),e[eClientState.deals]&&0<e[eClientState.deals].length&&a.ProcessDeals(e[eClientState.deals],t),e[eClientState.portfolioSummary]&&0<e[eClientState.portfolioSummary].length&&(0<e[eClientState.portfolioSummary][ePortfolioSummary.dealPL].length&&a.ProcessDealsPL(e[eClientState.portfolioSummary][ePortfolioSummary.dealPL]),0<e[eClientState.portfolioSummary][ePortfolioSummary.csHolder].length&&A.ProcessData(e[eClientState.portfolioSummary][ePortfolioSummary.csHolder]),0<e[eClientState.portfolioSummary][ePortfolioSummary.netExposure].length&&l.ProcessData(e[eClientState.portfolioSummary][ePortfolioSummary.netExposure]),0<e[eClientState.portfolioSummary][ePortfolioSummary.instrumentVolumes].length&&d.ProcessData(e[eClientState.portfolioSummary][ePortfolioSummary.instrumentVolumes])),e[eClientState.notifications]&&0<e[eClientState.notifications].length&&s.ProcessData(e[eClientState.notifications]),e[eClientState.bonus]&&0<e[eClientState.bonus].length&&p.ProcessData(e[eClientState.bonus])}},ServerTime:function(){return r}}}),define("FxNet/LogicLayer/Deal/DealPermissions",["require","Customer","PortfolioStaticManager","BonusManager"],function(e){var t=e("Customer"),n=e("PortfolioStaticManager"),r=e("BonusManager");return{CustomerDealPermit:function(){return t.prop.dealPermit},HasSpreadDiscount:function(){return n.Portfolio.pendingBonusType===ePendingBonusType.spreadDiscount&&0<r.bonus().amountBase}}});var TDeepLinkHandler=function(){var n=new RegExp("(.*)/"+UrlResolver.getRedirectPath()+"/(.*)","i"),o=!1,e=Q.defer(),a=null,s=null,l=null,u="",r=function(e,t){a={startUpForm:e,args:t,isDeepLink:o=!1,mode:null}},c=function(e,t){return e.ValueFromRequest?!isEmptyType(t)&&DeepLinkParameterValidator.IsValid(e,t)?DeepLinkParameterConverter.Convert(e,t):e.Optional?null:e.DefaultValue:e.Value},A=function(e,t){if(!e||!t)return null;var n=Object.keys(e).find(function(e){return e.toLowerCase()===t.toLowerCase()});return n?e[n]:null},d=function(e){var t=e.match(n);return t&&3==t.length?urlDecode(e=t[1]+"?Name="+t[2].replace("?","&")):null},t=function(e){var t=function(e){for(var t,n=[urlDecode,d],r=0;r<n.length;r++){var i=n[r](e);if(!isEmptyType(t=i)&&!isNullOrUndefined(A(eFormsDeepLinkMap,t.Name)))return i}return null}(e);if(t){u=t.Name;var n,r,i=A(eFormsDeepLinkMap,t.Name);if(i)if($permissionsModule.CheckFormPermissions(i.Form.Value||i.Form.DefaultValue,!0))l=i.Actions,function(e,t){if(s={},!isEmptyType(e))for(var n in e)if(e.hasOwnProperty(n)){var r=c(e[n],A(t,n));isEmptyType(r)||(s[n]=r)}}(i.Parameters,t),n=i,r=t,o=!0,a.startUpForm=c(n.Form,A(r,"Form")),a.args=!0===n.PassParametersToViews?s:{},a.isDeepLink=!0,a.mode=r.mode}},i=function(){l&&Q.when(FxNet.UiRenderedPromise).then(function(){var e=l.map(function(e){return e&&e.HandleDeepLink?Q.fcall(e.HandleDeepLink,s):(ErrorManager.onWarning("DeepLinkHandler:processActions","HandleDeepLink name:"+u+" params:"+JSON.stringify(s)),null)});return Q.all(e)}).then(function(){e.resolve()}).done()},p=function(){return!0===o};return{Init:function(){r(null,null),t(LocationWrapper.GetAbsoluteLocation())},InternalRedirect:function(e){return t(e),p()?(o=!1,Object.assign({processActions:i},a)):(r(null,null),Object.assign({processActions:emptyFn},a))},Handle:function(e,t){return p()?(o=!1,Object.assign({processActions:i},a)):(r(e,t),Object.assign({processActions:emptyFn},a))},ProcessActionsCompleted:e.promise}},DeepLinkParameterConverter=function(){var n=[];n[eDeepLinkParameterType.LoginOption]=function(e){return e},n[eDeepLinkParameterType.Instrument]=function(e){return parseInt(e)},n[eDeepLinkParameterType.AccountNumber]=function(e){return parseInt(e)},n[eDeepLinkParameterType.WithdrawalId]=function(e){return parseInt(e)},n[eDeepLinkParameterType.OrderDir]=function(e){return eOrderDir[e]},n[eDeepLinkParameterType.Tab]=function(e){return e},n[eDeepLinkParameterType.Form]=function(e){return eForms[e]},n[eDeepLinkParameterType.WireTransferId]=function(e){return parseInt(e)},n[eDeepLinkParameterType.AccountTransactionId]=function(e){return parseInt(e)},n[eDeepLinkParameterType.PositionId]=function(e){return parseInt(e)},n[eDeepLinkParameterType.View]=function(e){return parseInt(e)};return{Convert:function(e,t){return n[e.Type](t)}}}(),DeepLinkParameterValidator=function(){var n=[];n[eDeepLinkParameterType.LoginOption]=function(e){return!isEmptyType(e)},n[eDeepLinkParameterType.Instrument]=function(e){var t=parseInt(e);return!isNaN(t)&&$instrumentsManager.GetInstrument(t)},n[eDeepLinkParameterType.OrderDir]=function(e){return!isEmptyType(eOrderDir[e])},n[eDeepLinkParameterType.AccountNumber]=function(e){return!isEmptyType(e)},n[eDeepLinkParameterType.WithdrawalId]=function(e){return!isEmptyType(e)},n[eDeepLinkParameterType.Tab]=function(e){return!isEmptyType(eNewDealTool[e])},n[eDeepLinkParameterType.Form]=function(e,t){if(isEmptyType(e)||isEmptyType(eForms[e]))return!1;if(t.AllowOnlyFormsContainingView){var n=t.AllowOnlyFormsContainingView,r=eForms[e];return-1<FxNet.ViewModelsManager.VManager.GetFormProperties(r).mappedViews.indexOf(n)}return!0},n[eDeepLinkParameterType.WireTransferId]=function(e){return!isEmptyType(e)},n[eDeepLinkParameterType.AccountTransactionId]=function(e){return!isNaN(parseInt(e))},n[eDeepLinkParameterType.PositionId]=function(e){return!isNaN(parseInt(e))},n[eDeepLinkParameterType.View]=function(e){return!isNaN(parseInt(e))};return{IsValid:function(e,t){return n[e.Type](t,e)}}}(),DepositActionHandler=function(){var t=function(){var e=require("ViewsManager"),t=require("ViewsRouterManager").GetFormToRedirect(eForms.Deposit).viewType;t!==eForms.Deposit&&e.SwitchViewVisible(t)};return{HandleDeepLink:function(){if(FxNet.IsCacheLoaded())t();else var e=FxNet.IsCacheLoaded.subscribe(function(){e.dispose(),t()})}}}(),eFormsDeepLinkMap={LoginOptions:{Form:{Value:eForms.LoginOptions},Parameters:{option:{ValueFromRequest:!0,Optional:!0,Type:eDeepLinkParameterType.LoginOption}},PassParametersToViews:!0},Deals:{Form:{Value:eForms.Quotes}},OpenDeals:{Form:{Value:eForms.OpenDeals}},Limits:{Form:{Value:eForms.Limits}},ClosedDeals:{Form:{Value:eForms.ClosedDeals}},Questionnaire:{Form:{Value:eForms.ClientQuestionnaire}},Wallet:{Form:{Value:eForms.Wallet}},NewDeal:{PassParametersToViews:!0,Form:{Value:eForms.Transaction},Parameters:{instrumentId:{ValueFromRequest:!0,DefaultValue:3631,Type:eDeepLinkParameterType.Instrument},tab:{ValueFromRequest:!0,Optional:!0,Type:eDeepLinkParameterType.Tab},orderDir:{ValueFromRequest:!0,Optional:!0,Type:eDeepLinkParameterType.OrderDir},transactionTab:{Value:"NewDeal"}}},NewLimit:{PassParametersToViews:!0,Form:{Value:eForms.Transaction},Parameters:{instrumentId:{ValueFromRequest:!0,DefaultValue:3631,Type:eDeepLinkParameterType.Instrument},orderDir:{ValueFromRequest:!0,Optional:!0,Type:eDeepLinkParameterType.OrderDir},transactionTab:{Value:"NewLimit"}}},Balance:{Form:{Value:eForms.Balance}},NetExposure:{Form:{Value:eForms.NetExposure}},Withdrawal:{Form:{Value:eForms.Withdrawal}},CustomizeQuotes:{Form:{Value:eForms.EditFavoriteInstruments}},Deposit:{Form:{Value:eForms.Deposit},Actions:[DepositActionHandler]},ChangePassword:{Form:{Value:eForms.ChangePassword}},PendingWithdrawal:{Form:{Value:eForms.PendingWithdrawal}},UploadDocuments:{Form:{Value:eForms.UploadDocuments}},NotificationsSettings:{Form:{Value:eForms.NotificationsSettings}},TradingSignals:{Form:{Value:eForms.TradingSignals}},EconomicCalendar:{Form:{Value:eForms.EconomicCalendar}},CashBack:{Form:{Value:eForms.CashBack}},PersonalInformation:{Form:{Value:eForms.PersonalInformation}}},Dictionary=function(){var i={};function n(e,t,n){t=(t||"contentdata").toLowerCase();var r="";return i.hasOwnProperty(t)&&(r=i[t][e.toLowerCase()]),r||n||(r=String.format("***{0}",e)),r||n}return{AddResource:function(e,t){i[e.toLowerCase()]=t},GetItem:n,GetAllKeys:function(e){var t=null;return i.hasOwnProperty(e)&&(t=Object.keys(i[e])),t},GetAllItemsForResource:function(e){var t=null;return i.hasOwnProperty(e)&&(t=i[e]),t},GetGlobalItem:function(e,t){return n(e,"contentdata",t)},GetTemplate:function(e){var t=(systemInfo.templates||(systemInfo.templates={}),systemInfo.templates),n=t[e];return n||(n=String.format("***{0}",e)),t[e]=n},ValueIsEmpty:function(e,t){return t=(t||"contentdata").toLowerCase(),!i.hasOwnProperty(t)||isEmptyValue(i[t][e.toLowerCase()])}}}(),LocationWrapper={GetRootUrl:function(){var e=document.location.protocol+"//"+(document.location.hostname||document.location.host);return document.location.port&&(e+=":"+document.location.port),e},GetAbsoluteLocation:function(){return window.location.href},GetQueryString:function(){return window.location.search},SetAbsoluteLocation:function(e){window.location.href=e}};function LimitRange(){this.near=ko.observable(""),this.far=ko.observable("")}define("ErrorManager",["require","Logger","StatesManager","Customer","PermissionsModule","UrlResolver","RequireError","StateObject!ViewsManager"],function(e){var a=e("Logger"),r=e("StatesManager"),i=e("Customer"),t=e("PermissionsModule"),n=e("UrlResolver"),s=e("RequireError"),l=e("StateObject!ViewsManager");return window.ErrorManager=new function(){function o(e){return!(!e||403!==e.httpStatus&&401!==e.httpStatus&&420!==e.httpStatus||(t.IsRestrictedUser()||window.location.replace(n.combine(n.getApplicationRelativePath(),"account/login?reason="+eLoginLogoutReason.errorManager_httpError)),0))}return Error.prototype.getFullExceptionMessage=function(){var e={Message:this.message,StackTrace:(this.stack||"").replace(this.message,"").replace(/\n|\r\n/g," ").replace(/\s\s+/g," "),Form:"",Views:[],AccountNumber:i.prop.accountNumber,UserAgent:window.navigator.userAgent};if(window.trackingData){var t=window.trackingData.getErrorTrackingData();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}try{e.Form=urlDecode(window.location.search).view||"",l&&(e.Views=l.get("ActiveViews"))}catch(e){}return JSON.stringify(e)},{getFullExceptionMessage:function(e){return e.getFullExceptionMessage()},onRequireError:function(e){if("mismatch"===e.requireType)throw new s("Mismatched anonymous define() module",e);throw e},onError:function(e,t,n){if(n=n||eErrorSeverity.low,"http403"===t)r.PushState(r.StatePropertiesEnum.Forbidden,eErrorSeverity.medium,r.StatePropertiesEnum.Forbidden);else switch(n){case eErrorSeverity.critical:r.PushState(r.StatePropertiesEnum.ServerErrorStatus,eErrorSeverity.critical,r.StatePropertiesEnum.ServerErrorStatus);break;case eErrorSeverity.high:r.PushState(r.StatePropertiesEnum.ServerErrorStatus,eErrorSeverity.high,r.StatePropertiesEnum.ServerErrorStatus);break;case eErrorSeverity.medium:r.PushState(r.StatePropertiesEnum.ServerErrorStatus,eErrorSeverity.medium,r.StatePropertiesEnum.ServerErrorStatus);break;case eErrorSeverity.low:r.PushState(r.StatePropertiesEnum.ServerErrorStatus,eErrorSeverity.low,r.StatePropertiesEnum.ServerErrorStatus)}},onWarning:function(e,t){var n={Message:t,AccountNumber:i.prop.accountNumber,UserAgent:window.navigator.userAgent};a.warn(e,JSON.stringify(n))},onException:function(e,t,n,r,i){if(isNullOrUndefined(i))return!0;if(o(i))return!0;if(i&&"function"==typeof i.handler)return i.handler(),!0;throw function(e,t){if("undefined"!=typeof systemInfo&&void 0!==a){var n=systemInfo.clientApplicationParams&&systemInfo.clientApplicationParams[eClientParams.JsErrorBlacklistRegex]||"",r=new RegExp(n,"i"),i=0<n.length&&(0<e.length&&r.test(e)||t&&0<t.message.length&&r.test(t.message));if(!i){var o=t&&t.getFullExceptionMessage()||e;a.log("UnknownError",o)}}}(e,i),i},createErrorType:function(t,e){function n(e){this.name=t,this.message=e,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}return(n.prototype=Object.create(Error.prototype)).name=t,(n.prototype.constructor=n).prototype.handler="function"==typeof e?e:function(){},n}}}}),define("ShutDownHandler",["require","jquery","StateObject!SystemNotificationEvents"],function(e){var t=e("jquery"),n=e("StateObject!SystemNotificationEvents");return window.ShutDownHandler=new function(){var e=!0;return{StopRunningServices:function(){e&&(n.update(eShutDownHandlerTopics.stopClientStateManagerCalls),n.update(eShutDownHandlerTopics.stopKeepAliveCalls),n.update(eShutDownHandlerTopics.stopGetRatesRecentWebCalls),t.publish(eShutDownHandlerTopics.stopGetActiveIMCalls)),e=!1},RestartStoppedServices:function(){e||(n.update(eShutDownHandlerTopics.restartClientStateManagerCalls),n.update(eShutDownHandlerTopics.restartGetActiveIMCalls),n.update(eShutDownHandlerTopics.restartGetRatesRecentWebCalls),t.publish(eShutDownHandlerTopics.restartGetActiveIMCalls)),e=!0}}}}),define("FxNet/LogicLayer/GeneralManager/SessionSupervisor",["require","JSONHelper","dalCommon","ErrorManager","ShutDownHandler","SystemInfo","StateObject!SessionSupervisor","StateObject!SystemNotificationEvents"],function(s){var l=s("JSONHelper"),u=s("dalCommon"),c=s("ErrorManager"),A=s("ShutDownHandler"),d=s("SystemInfo"),p=s("StateObject!SessionSupervisor"),f=s("StateObject!SystemNotificationEvents");return new function(){var n=null,r=5e3,i=!1,o=StorageFactory(StorageFactory.eStorageType.session);function a(){i||u.KeepAlive(t)}function e(){i=!0,n&&(clearTimeout(n),n=null)}function t(e){var t=l.STR2JSON("SessionSupervisor/onKeepAliveComplete",e,eErrorSeverity.low);if(t&&"SecurityError"!=t.result&&"ServerError"!=t.result)if(t.result[eKeepAlive.Success])d.save("securityToken",t.securityToken),p.update("userLoggedIn",t.userLoggedIn),t.isSessionGap&&o.removeItem("TrackingSessionId"),i||(n&&(clearTimeout(n),n=null),n=setTimeout(a,r));else switch(t.result[eKeepAlive.Error]){case eKeepAliveError.SessionMissingOrDuplicate:A.StopRunningServices(),s(["DoubleLoginAlert"],function(e){e.Show()});break;case eKeepAliveError.HttpContextRequired:c.onError("Keepalive","HttpContextRequired",eErrorSeverity.low),u.Login(eLoginLogoutReason.sessionSupervisor_keepAliveHttpContextRequired)}else u.Login(eLoginLogoutReason.sessionSupervisor_keepAliveCompleteError)}return{Start:function(){f.set(eShutDownHandlerTopics.stopKeepAliveCalls,null),f.subscribe(eShutDownHandlerTopics.stopKeepAliveCalls,e),a()}}}}),define("ActivitySupervisor",["require","ShutDownHandler","dalOrders","dalCommon","MaxIdleTimeAlert","Customer"],function(e){var u=e("ShutDownHandler"),c=e("dalOrders"),A=e("dalCommon"),d=e("MaxIdleTimeAlert"),p=e("Customer");return window.ActivitySupervisor=new function(){var e,t=null,n=null,r=null,i=timeStamp(),o=null;function a(){return null!==t||isDefinedType(systemInfo.clientApplicationParams)?(null===t&&(t=parseInt(systemInfo.clientApplicationParams[eClientParams.MaxIdleTime],10),n=parseInt(systemInfo.clientApplicationParams[eClientParams.IdleTimer],10),e=t+n),i=timeStamp(),l()<t?(r=setTimeout(a,3e4),!0):(o=setTimeout(s,e-l()),d.Show(),!1)):(setTimeout(a,1e3),!1)}function s(){r&&(clearTimeout(r),r=null),o&&(clearTimeout(o),o=null),p.isAutologin()?u.StopRunningServices():A.Exit(eLoginLogoutReason.activitySupervisor_logout)}function l(){return timeStamp()-c.lastTimeRequest()}return{Start:function(){a()},ResetTimeRequest:function(){timeStamp()-i>e&&s(),c.resetTimeRequest()},UpdateStay:function(){o?(clearTimeout(o),o=null):A.Login(eLoginLogoutReason.activitySupervisor_updateAsStay),c.resetTimeRequest(),a()},Logout:s,Exit:function(){A.Exit(eLoginLogoutReason.activitySupervisor_exit)}}}}),define("fxnet/LogicLayer/GeneralManager/StatesManager",["require","knockout","Customer","ClientStateFlagsManager","PortfolioStaticManager","FxNet/DataAccessLayer/dalCompliance","Dictionary"],function(e){var c=e("knockout"),A=e("Customer"),d=e("ClientStateFlagsManager"),p=e("PortfolioStaticManager"),f=e("Dictionary"),h=e("FxNet/DataAccessLayer/dalCompliance");return window.$statesManager=new function(){var t={SystemMode:1,DemoStatus:2,IsActive:3,AmlStatus:4,KycStatus:5,MarketState:6,EquityAlert:7,ExposureAlert:8,ExposureCoverageAlert:9,ServerErrorStatus:10,PepStatus:11,CddStatus:12,Forbidden:13,KycReviewStatus:14,docProofOfID:15,docProofOfResidence:16,docCreditCardCopy:17,docDepositConfirmation:18,docWithdrawalPendingRequest:19,docTaxCard:20,docOtherDocuments:21,Folder:22,FolderType:23,FolderTypeId:24,fxDenied:25,minDepositGroup:26,signAgreementDate:27},n={},r=!1,i=new ObservableHashTable("StateType",{enabled:!0,sortProperty:"Priority",asc:!0});function o(e,t,n){this.StateType=e,this.Value=c.observable(t),this.Priority=n}function a(e,t,n){var r=new o(e,t,n);i.Add(r)||i.UpdateAlways(e,r)}function e(e){var t=i.Get(e);return t?t.Value:null}function s(e){a(t.EquityAlert,e.equityAlert,t.EquityAlert),a(t.ExposureAlert,e.exposureAlert,t.ExposureAlert),a(t.ExposureCoverageAlert,e.exposureCoverageAlert,t.ExposureCoverageAlert),a(t.MarketState,e.marketState,t.MarketState),a(t.SystemMode,e.systemMode,t.SystemMode)}function l(e){a(t.PepStatus,e.pepStatus,t.PepStatus),a(t.CddStatus,e.cddStatus,t.CddStatus),a(t.AmlStatus,e.amlStatus,t.AmlStatus),a(t.IsActive,e.isActive,t.IsActive),a(t.DemoStatus,e.isDemo?eFlagState.Active:eFlagState.NotActive,t.DemoStatus),a(t.KycStatus,e.kycStatus,t.KycStatus),a(t.KycReviewStatus,e.kycReviewStatus,t.KycReviewStatus),A.GetCustomer().then(function(e){var t=JSON.parse(e);n.Folder(t.folder),n.FolderType(t.folderType),n.FolderTypeId(t.folderTypeId),n.fxDenied(0==t.allowFXnet),n.minDepositGroup(t.minDepositGroup),n.signAgreementDate(str2Date(t.signAgreementDate)),c.postbox.publish("customer-data-loaded")}).done(),A.prop.abTestings.configuration["account-hub-map"]&&r&&u()}function u(){h.getUploadDocumentsData(function(e){var t=JSONHelper.STR2JSON("UserFlowBaseViewModel/getUploadDocumentsData",e,eErrorSeverity.medium);t&&t.Data&&t.Data.forEach(function(e){e.DocumentTypeID===eUploadDocumentType.ProofOfID?n.docProofOfID(e.DocumentStatus):e.DocumentTypeID===eUploadDocumentType.ProofOfResidence?n.docProofOfResidence(e.DocumentStatus):e.DocumentTypeID===eUploadDocumentType.CreditCardCopy?n.docCreditCardCopy(e.DocumentStatus):e.DocumentTypeID===eUploadDocumentType.DepositConfirmation?n.docDepositConfirmation(e.DocumentStatus):e.DocumentTypeID===eUploadDocumentType.WithdrawalPendingRequest?n.docWithdrawalPendingRequest(e.DocumentStatus):e.DocumentTypeID===eUploadDocumentType.TaxCard?n.docTaxCard(e.DocumentStatus):e.DocumentTypeID===eUploadDocumentType.OtherDocuments&&n.docOtherDocuments(e.DocumentStatus)})})}return{startGetDocumentsStatus:function(){r||(r=!0,u())},Init:function(){!function(){for(var e in t)t.hasOwnProperty(e)&&a(t[e],eFlagState.Initial,t[e])}(),n.docProofOfID=e(t.docProofOfID),n.docProofOfResidence=e(t.docProofOfResidence),n.docCreditCardCopy=e(t.docCreditCardCopy),n.docDepositConfirmation=e(t.docDepositConfirmation),n.docWithdrawalPendingRequest=e(t.docWithdrawalPendingRequest),n.docTaxCard=e(t.docTaxCard),n.docOtherDocuments=e(t.docOtherDocuments),n.Folder=e(t.Folder),n.FolderType=e(t.FolderType),n.FolderTypeId=e(t.FolderTypeId),n.fxDenied=e(t.fxDenied),n.minDepositGroup=e(t.minDepositGroup),n.signAgreementDate=e(t.signAgreementDate),n.EquityAlert=e(t.EquityAlert),n.ExposureAlert=e(t.ExposureAlert),n.ExposureCoverageAlert=e(t.ExposureCoverageAlert),n.MarketState=e(t.MarketState),n.SystemMode=e(t.SystemMode),n.IsActive=e(t.IsActive),n.AmlStatus=e(t.AmlStatus),n.DemoStatus=e(t.DemoStatus),n.KycStatus=e(t.KycStatus),n.PepStatus=e(t.PepStatus),n.CddStatus=e(t.CddStatus),n.KycReviewStatus=e(t.KycReviewStatus),n.isIntDebit=c.computed(function(){return this.Folder()===eFolder.IntDebit},n),n.IsDemo=c.computed(function(){return this.DemoStatus()===eFlagState.Active},n),n.IsMarketClosed=c.computed(function(){return this.MarketState()===eCSFlagStates.NotActive},n),n.IsPortfolioInactive=c.computed(function(){return!1===this.IsActive()},n),n.IsAmlRestricted=c.computed(function(){var e=this.AmlStatus();return e===eAMLStatus.Restricted||e===eAMLStatus.Unverified},n),n.IsAmlPending=c.computed(function(){var e=this.AmlStatus();return e===eAMLStatus.Pending},n),n.IsKycStatusRequired=c.computed(function(){var e=this.KycStatus();return e===eKYCStatus.NotComplete},n),n.IsKycReviewStatusRequired=c.computed(function(){return this.KycStatus()===eKYCStatus.Failed&&(this.KycReviewStatus()===eKYCReviewStatus.NotReviewed||this.KycReviewStatus()===eKYCReviewStatus.Review||this.KycReviewStatus()===eKYCReviewStatus.Tested)},n),n.IsCddStatusNotComplete=c.computed(function(){var e=this.CddStatus();return e===eCDDStatus.NotComplete},n),n.IsCddStatusRequired=c.computed(function(){var e=this.CddStatus();return e===eCDDStatus.NotComplete||e===eCDDStatus.Complete},n),n.IsPepRequired=c.computed(function(){return this.PepStatus()==ePEPStatus.Required},n),n.IsActiveButNotSinceTradingBonus=c.computed(function(){return this.IsActive()==eFlagState.Active&&A.prop.customerType!==eCustomerType.TradingBonus},n),n.IsTradingBonusGoingToCDDAfterDeposit=c.computed(function(){var e=this.CddStatus();return"1"===f.GetItem("TradingBonusGoesToCDDAfterDeposit")&&A.prop.customerType===eCustomerType.TradingBonus&&e===eCDDStatus.NotRequired},n),n.IsCddOrKycRequired=c.computed(function(){return this.KycStatus()!==eKYCStatus.NotRequired||this.CddStatus()!==eCDDStatus.NotRequired},n),n.ServerErrorStatus=e(t.ServerErrorStatus).extend({notify:"always"}),n.Forbidden=e(t.Forbidden).extend({notify:"always"}),d.OnChange.Add(s),p.OnChange.Add(l)},StateValue:e,States:n,PushState:a,StatePropertiesEnum:t}}}),define("RegistrationManager",[],function(){var r=new TDelegate,i=[],o=new THashTable;function n(e,t){var a,n=(a=[],o.ForEach(function(e,t){if(t)if("object"==typeof t)if(e==eRegistrationListName.QuotesTable||e==eRegistrationListName.Search)for(var n=0,r=t.length;n<r;n++)a.addUnique(toNumeric(t[n][eQuotesUIOrder.InstrumentID]));else for(var i=0,o=t.length;i<o;i++)a.addUnique(toNumeric(t[i]));else a.addUnique(toNumeric(t))}),a);!t&&function(e,t){for(var n,r=0,i=t.length;r<i;r+=1)if(n=t[r],e.indexOf(n)<0)return!1;return!0}(i,n)||(i=n.slice(),r.Invoke(i,e,t))}return window.$regManager={Register:n,Update:function(e,t){o.OverrideItem(e,t),n(eSubscriptionRequestFlags.Quotes)},OnRegistrationListChanged:r}}),define("DealTypeManager",["require","Customer"],function(e){var t,n=e("Customer"),r=[{name:"initial",initial:!0,events:{islamic:eDealType.Islamic,spot_or_spotonly_no_future:eDealType.Spot,future:eDealType.Future,share:eDealType.Share}},{name:eDealType.Islamic,events:{}},{name:eDealType.Spot,events:{future:eDealType.Future,share:eDealType.Share}},{name:eDealType.Future,events:{spot_or_spotonly_no_future:eDealType.Spot,share:eDealType.Share}},{name:eDealType.Share,events:{spot_or_spotonly_no_future:eDealType.Spot,future:eDealType.Future}}];function i(){switch(n.prop.dealPermit){case eDealPermit.SpotOnly:case eDealPermit.ZeroSpread:t.ConsumeEvent("spot_or_spotonly_no_future");break;case eDealPermit.Islamic:t.ConsumeEvent("islamic")}}return{Init:function(){(t=new TStateMachine).Init(r),i()},GetStatus:function(){return t.GetStatus()},ConsumeEvent:function(e){i(),t.ConsumeEvent(e)}}}),define("EncryptDecryptManager",["require","Customer","Vendor/sjcl"],function(e){var n=e("Customer"),r=e("Vendor/sjcl");return{Encrypt:function(e){var t=null;if(isNullOrUndefined(n.prop.sjcKey))return t;try{t=r.encrypt(n.prop.sjcKey,e)}catch(e){}return t},Decrypt:function(e){var t=null;if(isNullOrUndefined(n.prop.sjcKey))return t;try{t=r.decrypt(n.prop.sjcKey,e)}catch(e){}return t}}}),define("LocalStoreDoubleTabsListener",["require","CookieHandler","dalCommon"],function(){var i=require("CookieHandler"),o=require("dalCommon");return function(e,t){0<t&&setTimeout(function e(t,n){var r;(r=t)&&r!==i.ReadCookie("csmg")?o.Exit(eLoginLogoutReason.initialDataManager_dataError):setTimeout(e,2*n,t,n)},t,e,t),i.CreateCookie("csmg",e)}}),define("UserFlowBroker3",["require","StatesManager","Customer"],function(e){var t,n,r,i,o,a,s=e("StatesManager"),l=e("Customer"),u=!1,c=s.States,A=function(){return 51===c.Folder()},d=function(){return!1===c.fxDenied()};return function(){if(!c.IsActive||-1===c.IsActive()||-1===c.AmlStatus()||-1===c.KycReviewStatus()||-1===c.KycStatus()||-1===c.fxDenied()||-1===c.Folder()||-1===c.minDepositGroup())return null;l.prop.isSeamless?(n=eUserStatus.NotActivated,r="registerToStartTarde",a=eCta.Seamless,i=eUserFlowSteps.OpenedAnAccount,o="registerNow",t=[eStepStatus.Seamless,eStepStatus.NotActive,eStepStatus.Hidden,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive]):c.KycReviewStatus()===eKYCReviewStatus.Inappropriate?(n=eUserStatus.Locked,t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Error,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive],r="quizFailed",a=eCta.ContactUs,i=eUserFlowSteps.TradingKnowledgeQuiz,o="contactUs"):c.KycReviewStatus()===eKYCReviewStatus.Unsuitable?(n=eUserStatus.Locked,t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Error,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive],r="unsuitable",a=eCta.ContactUs,i=eUserFlowSteps.TradingKnowledgeQuiz,o="contactUs"):103===c.minDepositGroup()||A()?o=c.AmlStatus()!==eAMLStatus.Restricted&&!A()&&d()?(t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Restricted,eStepStatus.NotActive],n=eUserStatus.Restricted,r="contactComplianceProgress",a=eCta.ContactUs,i=eUserFlowSteps.FundYourAccount,"contactUs"):(s.startGetDocumentsStatus(),n=eUserStatus.Locked,c.docProofOfID()===eUploadDocumentStatus.Incomplete||c.docProofOfResidence()===eUploadDocumentStatus.Incomplete?(t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Error,eStepStatus.NotActive],r="contactComplianceActivation",a=eCta.ContactUs,i=eUserFlowSteps.FundYourAccount,"contactUs"):c.docProofOfID()===eUploadDocumentStatus.AwaitingDocument||c.docProofOfResidence()===eUploadDocumentStatus.AwaitingDocument?(t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.NotActive,eStepStatus.NotActive],r="accountBlockedDocuments",a=eCta.UploadDocuments,i=eUserFlowSteps.ProofOfIdentity,"uploadDocuments"):(t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Error,eStepStatus.NotActive],r="contactComplianceActivation",a=eCta.ContactUs,i=eUserFlowSteps.FundYourAccount,"contactUs")):c.CddStatus()===eCDDStatus.NotComplete&&c.KycStatus()===eKYCStatus.NotComplete?(n=eUserStatus.NotActivated,r="activateToStartTarde",a=eCta.ClientQuestionnaire,i=eUserFlowSteps.GeneralInforamtionQuestionnaire,o="activateYourAccount",t=[eStepStatus.Complete,eStepStatus.Available,eStepStatus.Hidden,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive]):c.CddStatus()!==eCDDStatus.NotComplete&&c.IsKycReviewStatusRequired()?(n=eUserStatus.NotActivated,r="quizToStartTarde",a=eCta.ClientQuestionnaire,i=eUserFlowSteps.TradingKnowledgeQuiz,o="completeQuiz",t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive]):c.IsActive()&&c.IsActiveButNotSinceTradingBonus()?c.AmlStatus()!==eAMLStatus.Restricted&&d()?(r="enjoyTrading",a=eCta.None,o="",c.AmlStatus()===eAMLStatus.Approved||c.AmlStatus()===eAMLStatus.NotRequired?(n=eUserStatus.Active,i=eUserFlowSteps.Trade,t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete],c.AmlStatus()===eAMLStatus.NotRequired&&(c.docProofOfID(eUploadDocumentStatus.NotRequired),c.docProofOfResidence(eUploadDocumentStatus.NotRequired))):(s.startGetDocumentsStatus(),n=eUserStatus.ActiveLimited,t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.Complete,eStepStatus.Complete],i=eUserFlowSteps.ProofOfIdentity,c.docProofOfID()===eUploadDocumentStatus.Incomplete||c.docProofOfResidence()===eUploadDocumentStatus.Incomplete?(a=eCta.ContactUs,o="contactUs"):c.docProofOfID()===eUploadDocumentStatus.AwaitingDocument||c.docProofOfResidence()===eUploadDocumentStatus.AwaitingDocument?(t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.Complete,eStepStatus.Complete],a=eCta.UploadDocuments,o="uploadDocuments"):c.docProofOfID()===eUploadDocumentStatus.Approved&&c.docProofOfResidence()===eUploadDocumentStatus.Approved&&(t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete],a=eCta.ContactUs,o="contactUs"))):(t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Restricted],n=eUserStatus.Restricted,r="contactComplianceProgress",o="contactUs",a=eCta.ContactUs,i=eUserFlowSteps.Trade):(n=eUserStatus.ReadyToTrade,r="fundAccount",a=eCta.Deposit,i=eUserFlowSteps.FundYourAccount,o="fundTxt",t=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.Available,eStepStatus.NotActive]),(c.KycStatus()!==eKYCStatus.Failed&&c.KycStatus()!==eKYCStatus.FailedAware||c.KycReviewStatus()===eKYCReviewStatus.Unsuitable)&&(t[eUserFlowSteps.TradingKnowledgeQuiz]=eStepStatus.Hidden);var e=-1;return n!==eUserStatus.Locked&&c.AmlStatus()!==eAMLStatus.Approved&&c.AmlStatus()!==eAMLStatus.NotRequired&&c.signAgreementDate()&&-1!==c.signAgreementDate()&&(e=14-Math.floor(((new Date).getTime()-c.signAgreementDate().getTime())/864e5)),c.IsCddOrKycRequired()||(t[eUserFlowSteps.GeneralInforamtionQuestionnaire]=eStepStatus.NotActive),u=!(c.IsActive()||l.prop.customerType===eCustomerType.TradingBonus||l.prop.isDemo),{documentProofOfResidenceStatus:c.docProofOfResidence(),documentProofOfIDStatus:c.docProofOfID(),currentStep:i,userStatus:n,daysCounter:e,maxDaysCounter:14,userMessage:r,ctaText:o,cta:a,userFlowStepsStatuses:t,activationRequired:u}}}),define("UserFlowBroker33",["require","StatesManager","Customer"],function(e){var d,p,f,h,m,g,v=e("StatesManager"),y=e("Customer"),w=v.States,b=!1,C=function(){return 51===w.Folder()};return function(){if(!w.IsActive||-1===w.IsActive()||-1===w.AmlStatus()||-1===w.KycReviewStatus()||-1===w.KycStatus()||-1===w.fxDenied()||-1===w.Folder()||-1===w.minDepositGroup())return null;var e=function(e,t){return-1!==t.indexOf(e)};v.startGetDocumentsStatus();var t=w.AmlStatus(),n=w.CddStatus(),r=w.KycStatus(),i=w.KycReviewStatus(),o=w.docProofOfID(),a=w.docProofOfResidence(),s=o===eUploadDocumentStatus.AwaitingDocument||a===eUploadDocumentStatus.AwaitingDocument,l=o===eUploadDocumentStatus.Approved&&a===eUploadDocumentStatus.Approved,u=!(103===w.minDepositGroup()||C()),c=t===eAMLStatus.NotRequired,A=function(){var e=w.IsActive()||w.IsActiveButNotSinceTradingBonus();u?(d=e?(p=eUserStatus.Active,f="enjoyTrading",h=eUserFlowSteps.Trade,g=eCta.None,m="",[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.Complete,eStepStatus.Complete]):(p=eUserStatus.ReadyToTrade,f="fundAccount",h=eUserFlowSteps.FundYourAccount,g=eCta.Deposit,m="fundTxt",[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.Available,eStepStatus.NotActive]),(l||c)&&(d[eUserFlowSteps.ProofOfIdentity]=eStepStatus.Complete)):e?(p=eUserStatus.Restricted,f="contactComplianceProgress",h=eUserFlowSteps.None,g=eCta.ContactUs,m="contactUs",d=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.Restricted,eStepStatus.NotActive],(l||c)&&(d[eUserFlowSteps.ProofOfIdentity]=eStepStatus.Complete)):(p=eUserStatus.NotActivated,h=eUserFlowSteps.ProofOfIdentity,g=eCta.ContactUs,m="contactUs",d=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.NotActive,eStepStatus.NotActive],o===eUploadDocumentStatus.Incomplete||a===eUploadDocumentStatus.Incomplete?f="contactToConfirmDetails":s?(f="uploadIdDocToActivate",g=eCta.UploadDocuments,m="uploadDocuments"):l?(f="contactToConfirmDetails",d[eUserFlowSteps.ProofOfIdentity]=eStepStatus.Complete,h=eUserFlowSteps.None):f="documentsUnderReview",c&&(d[eUserFlowSteps.ProofOfIdentity]=eStepStatus.Complete))};return y.prop.isSeamless?(p=eUserStatus.NotActivated,f="registerToStartTarde",h=eUserFlowSteps.OpenedAnAccount,g=eCta.Seamless,m="registerNow",d=[eStepStatus.Seamless,eStepStatus.NotActive,eStepStatus.Hidden,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive]):e(i,[eKYCReviewStatus.Inappropriate,eKYCReviewStatus.Unsuitable])?(p=eUserStatus.Locked,f=w.KycReviewStatus()===eKYCReviewStatus.Inappropriate?"quizFailed":"unsuitable",h=eUserFlowSteps.None,g=eCta.ContactUs,m="contactUs",d=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Error,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive]):t===eAMLStatus.Restricted||C()||!1!==w.fxDenied()?u?(p=eUserStatus.Restricted,f="contactComplianceProgress",h=eUserFlowSteps.None,g=eCta.ContactUs,m="contactUs",d=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.Complete,eStepStatus.Restricted],l&&(d[eUserFlowSteps.ProofOfIdentity]=eStepStatus.Complete)):(p=eUserStatus.Locked,f="contactComplianceActivation",h=eUserFlowSteps.None,g=eCta.ContactUs,m="contactUs",d=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.NotActive,eStepStatus.NotActive],s?(f="accountBlockedDocuments",h=eUserFlowSteps.ProofOfIdentity,g=eCta.UploadDocuments,m="uploadDocuments"):l&&(d[eUserFlowSteps.ProofOfIdentity]=eStepStatus.Complete)):n!==eCDDStatus.NotComplete&&e(r,[eKYCStatus.Passed,eKYCStatus.FailedAware,eKYCStatus.NotRequired])?A():n!==eCDDStatus.NotComplete&&r===eKYCStatus.Failed?e(i,[eKYCReviewStatus.Experienced,eKYCReviewStatus.Appropriate])?A():(p=eUserStatus.NotActivated,f="quizToStartTarde",h=eUserFlowSteps.TradingKnowledgeQuiz,m="completeQuiz",g=eCta.ClientQuestionnaire,d=[eStepStatus.Complete,eStepStatus.Complete,eStepStatus.Available,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive]):(p=eUserStatus.NotActivated,f="activateToStartTarde",h=eUserFlowSteps.GeneralInforamtionQuestionnaire,g=eCta.ClientQuestionnaire,m="activateYourAccount",d=[eStepStatus.Complete,eStepStatus.Available,eStepStatus.Hidden,eStepStatus.NotActive,eStepStatus.NotActive,eStepStatus.NotActive]),(w.KycStatus()!==eKYCStatus.Failed&&w.KycStatus()!==eKYCStatus.FailedAware||w.KycReviewStatus()===eKYCReviewStatus.Unsuitable)&&(d[eUserFlowSteps.TradingKnowledgeQuiz]=eStepStatus.Hidden),w.IsCddOrKycRequired()||(d[eUserFlowSteps.GeneralInforamtionQuestionnaire]=eStepStatus.NotActive),b=!(w.IsActive()||y.prop.customerType===eCustomerType.TradingBonus||y.prop.isDemo),{documentProofOfResidenceStatus:w.docProofOfResidence(),documentProofOfIDStatus:w.docProofOfID(),currentStep:h,userStatus:p,userMessage:f,daysCounter:-1,maxDaysCounter:14,ctaText:m,cta:g,userFlowStepsStatuses:d,activationRequired:b}}}),define("UserFlowManager",["require","UserFlowBroker3","UserFlowBroker33","knockout","Customer","StatesManager","StateObject!userFlow"],function(e){var r=e("knockout"),t=e("StatesManager"),i=e("UserFlowBroker3"),o=e("UserFlowBroker33"),a=e("Customer"),s=e("StateObject!userFlow");return s.set(eStateObjectTopics.UserFlowChanged,{}),r.computed(function(){var e=null,t=a.prop.brokerID,n={broker3:i,broker33:o};-1!==["3","33"].indexOf(a.prop.brokerID)&&(e=n["broker"+t]()),null===e&&(e={ctaText:"",documentProofOfResidenceStatus:null,documentProofOfIDStatus:null,currentStep:null,userStatus:eUserStatus.NA,daysCounter:0,maxDaysCounter:0,userMessage:"",cta:eCta.None,userFlowStepsStatuses:null,activationRequired:!1}),s.update(eStateObjectTopics.UserFlowChanged,e),r.postbox.publish("account-state",e.userStatus)}),{startGetDocumentsStatus:t.startGetDocumentsStatus}}),define("fxnet/LogicLayer/InitialDataManagers/Customer",["require","knockout","CookieHandler","SymbolsManager","Containers","dalCustomer"],function(e){var s=e("knockout"),t=e("CookieHandler"),l=e("SymbolsManager"),u=e("Containers"),c=e("dalCustomer"),A={},d=!1,n=null!==t.ReadCookie("RememberMe");return window.$customer={prop:A,Init:function(e,t,n,r){A.brokerType="3",A.email=e.Email,A.minPctEQXP=e.MinPctEQXP,A.selectedCcyId=s.observable(e.AccountBaseSymbol),A.baseCcyId=s.observable(e.AccountBaseSymbol),A.defaultCcy=s.observable(l.GetTranslatedSymbolById(e.AccountBaseSymbol)),A.sjcKey=r,A.selectedCcyName=s.computed(function(){return l.GetTranslatedSymbolById(A.selectedCcyId())}),A.baseCcyName=s.computed(function(){return l.GetTranslatedSymbolById(A.baseCcyId())}),A.accountNumber=e.AccountNumber,A.language=e.Language,A.dealPermit=e.DealPermit,A.isQA=e.isQA,A.countryID=e.CountryID,A.brokerID=e.BrokerID,A.shareStatus=e.StocksTradingPermission,A.futureStatus=e.FuturesTradingPermission,A.interactiveMessagesToken=e.InteractiveMessagesToken,A.interactiveMessagesUrl=e.InteractiveMessagesUrl,A.ratesServiceHost=e.RatesServiceHost,A.hasTransactionsReport=e.HasTransactionsReport,A.tradingPermissions=(i=t,o=n,a={},o||(o=u.MainForm),0===i&&(i=u.MainForm),A.mainPage=o,a.hasTransactionsReport="True"==A.hasTransactionsReport,a.isOnlyForexCustomer=!0,A.startUpForm=i,a),A.dateAdded=str2Date(e.DateAdded),A.isLive=Boolean.parse(e.IsLive),A.isPending=Boolean.parse(e.IsPending),A.isAccountExpired=e.IsAccountExpired,A.customerType=e.AccountType,A.SAProcess=e.SAProcess,A.serial=e.Serial,A.brokerName=e.BrokerName,A.brokerAllowLimitsOnNoRates=e.BrokerAllowLimitsOnNoRates,A.LiquidationPercentage=e.LiquidationPercentage,A.isDemo=Boolean.parse(e.IsDemo),A.hasActiveDemo=Boolean.parse(e.HasActiveDemo),A.signalsEndDate=e.SignalsEndDate,A.hasWeightedVolumeFactor=e.HasWeightedVolumeFactor,A.autoConvert=e.AutoConvert,A.isOvernightOnForex=e.IsOvernightOnForex,A.showSuggestionChangePassword=e.ShowSuggestionChangePassword,A.userName=e.UserName,A.firstName=e.FirstName,A.lastName=e.LastName,A.agreementType=e.AgreementType,A.signAgreementDate=str2Date(e.SignAgreementDate),A.hasMissingInformation=Boolean.parse(e.HasMissingInformation),A.sjcKey=e.sjcKey,A.abTestings={groupsNames:e.ABTestings.map(function(e){return e.GroupName}),testsNames:e.ABTestings.map(function(e){return e.TestName}),configuration:e.ABTestings.reduce(function(e,t){return Object.assign(e,JSON.parse(t.Configuration))},{})},A.compliance=e.compliance,A.maintenanceMarginPercentage=e.maintenanceMargin,d=!0,A.isSeamless=e.IsSeamless,c.getCustomerSignalsPermissions().then(function(e){var t=JSONHelper.STR2JSON("getLatestTradingSignal/onLoadComplete",e);t=t||{},A.AreSignalsAllowed=t.status==eResult.Success&&"True"==t.result,A.signalsEndDate=A.AreSignalsAllowed?str2Date(t.signalsEndDate).ExtractDate():""}).done();var i,o,a},isAuthenticated:function(){return d},isAutologin:function(){return n},Logout:function(){d=!1},HasMissingAgreement:function(){return null===A.signAgreementDate&&0===A.agreementType},UpdateMissingInformation:function(e){var t;t=e,A.userName=t.UserName,A.fullName=t.FullName,A.personalNumber=t.PersonalNumber,A.dateOfBirth=t.DateOfBirth,A.agreementType=t.AgreementType,A.signAgreementDate=str2Date(t.SignAgreementDate),A.hasMissingInformation=Boolean.parse(t.HasMissingInformation),A.idNumber=t.IDNumber,A.address=t.Address},UpdateHasMissingInformation:function(){c.HasMissingInformation().then(function(e){var t=JSON.parse(e);A.hasMissingInformation=t.HasMissingInformation}).done()},GetCustomer:function(){return c.getCustomer()},GetCustomerDetails:function(){return c.GetCustomerDetails()},GetToken:function(){return c.GetToken()}}}),define("InitialDataManager",["require","Q","Preloader","ErrorManager","Logger","JSONHelper","dalInitialData","dalCommon","Customer","SymbolsManager","CustomerProfileManager","InstrumentsManager","applicationConfiguration","SystemInfo","LocalStoreDoubleTabsListener","StateObject!PerformaceEvents","StateObject!DealerParams"],function(e){var a=e("Q"),s=e("Preloader"),t=e("ErrorManager"),l=e("Logger"),f=e("dalCommon"),h=e("dalInitialData"),m=e("JSONHelper"),g=e("InstrumentsManager"),v=e("Customer"),y=e("CustomerProfileManager"),w=e("SymbolsManager"),b=e("applicationConfiguration"),C=e("SystemInfo"),S=e("LocalStoreDoubleTabsListener"),E=e("StateObject!PerformaceEvents"),D=e("StateObject!DealerParams");return window.$initialDataManager=new function(u){var c={profileCustomer:null,profileInstrument:null,defaultFirstPage:-1,initialScreen:{screenId:-1},csmg:"",ready:!1},e=new TDelegate,A=new TDelegate,n=t.createErrorType("InitialDataError",function(){l.log("TDALClientState",this.getFullExceptionMessage(),function(){f.Logout(eLoginLogoutReason.initialDataManager_dataError)})});function r(e){if(!e)throw new n("ServerError: Initial data could not be loaded");c.ready=!0}function i(){e.Invoke(eFxNetEvents.InitialDataEnd)}function d(e){return isStringType(e)?m.STR2JSON("InitialDataManager/onLoadComplete",e,eErrorSeverity.high):e||{}}function o(e){var t,n,r,i,o,a,s,l=d(e);return"ServerError"!=l.Main.status&&(r=d((t=l).Countries),(n=t.Main.systemInfo||{}).clientApplicationParams=t.Main.clientParams||{},n.slaTimeout=1e3,n.limitRatePercentage=parseFloat(n.limitRatePercentage||"0.5"),n.instruments=d(t.Instruments),n.countries=p(r),n.uiExclusionCountries=p(r.filter(function(e){return 0===e[eCountryAttributes.IsActive]})),n.symbols=d(t.Symbols),C.save(n),D.set(eDealerParams.DealerCurrency,window.environmentData.dealerCurrency),D.set(eDealerParams.DealerAdvancedWalletView,window.environmentData.dealerAdvancedWalletView),o=l.Main.personalInfo,a=l.Symbols,s={customer:{},defaultFirstPage:0,profileCustomer:{},profileInstrument:{},customQuotesUIOrder:[],initialScreen:[],initialQuotesUIOrder:[],availableScreens:[]},Object.assign(s,o||{}),i=s,b.applicationType===eApplicationTypes.Web?(i.profileCustomer.dealSlipVersion=eUIVersion.Default,1===i.profileCustomer.homePage&&(i.profileCustomer.homePage=eForms.Deals),1===i.defaultFirstPage&&(i.defaultFirstPage=eForms.Deals)):i.profileCustomer.homePage=eForms.Quotes,i.profileCustomer.isAllowedSwitchView=0,c.profileCustomer=s.profileCustomer,c.profileInstrument=s.profileInstrument,c.defaultFirstPage=s.defaultFirstPage,c.csmg=s.csmg,c.initialScreen.screenId=s.initialScreen,A.Invoke(s.availableScreens),w.Init(a||[]),v.Init(s.customer,c.defaultFirstPage,c.profileCustomer.homePage),y.Init(c.profileCustomer,v.prop.startUpForm,c.profileInstrument,c.initialScreen.screenId),y.Events.onStartUpFormChanged.Add(function(e){v.prop.startUpForm=e,c.defaultFirstPage=e}),y.Events.onInitialScreenChanged.Add(function(e){c.initialScreen.screenId=e}),v.prop.selectedCcyId(D.get(eDealerParams.DealerCurrency)||y.ProfileCustomer().displaySymbol||v.prop.selectedCcyId()),g.Init({customerType:v.prop.customerType,hasWeightedVolumeFactor:v.prop.hasWeightedVolumeFactor,isOvernightOnForex:v.prop.isOvernightOnForex,customUiOrder:s.customQuotesUIOrder,initialUiOrder:s.initialQuotesUIOrder,initialScreenId:c.initialScreen.screenId,initialProfileInstrument:c.profileInstrument}),S(c.csmg,u),E.update("InitialDataLoadCompleted",l.Main.initialServerTime),!0)}function p(e){for(var t={},n=0,r=e.length;n<r;n++)t[e[n][eCountryAttributes.Id]]=e[n][eCountryAttributes.Name];return t}return{LoadData:function(){return e.Invoke(eFxNetEvents.InitialDataStart),(t=a.defer(),function e(){s.DataObjects.initialDataReady?t.resolve(s.DataObjects.initialData):s.SetInitialDataLoadEvent(e)}(),t.promise).then(o).then(r).finally(i);var t},LoadOnlySymbols:function(t){h.GetData().then(d).then(function(e){if("ServerError"==e.status)return f.Logout(eLoginLogoutReason.initialDataManager_symbolsDataError),!1;var t=e.systemInfo||{};return t.clientApplicationParams=e.clientParams||{},C.save(t),!0}).then(function(e){if(!e||!isFunctionType(t))throw new n("ServerError: Initial data could not be loaded");t()}).done()},UpdateInitialScreen:function(e){c.initialScreen.screenId=e},prop:c,OnInitialScreens:A,OnTimestamp:e}}(b.doubleTabListenInterval)}),define("SymbolsManager",["require","Logger","Dictionary","InstrumentsManager"],function(e){var r=e("Logger"),i=e("Dictionary"),a=e("InstrumentsManager");function s(e,t){this.id=e,this.name=t}return window.$symbolsManager=new function(){var o=new THashTable,n=function(e){var t=i.GetItem("symbol_"+e);return t||r.log("TSymbolsManager/getSymbol",String.format("symbol {0} not exist",e)),t};return{Symbols:o,Init:function(e){var t=e;if(!isEmptyValue(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];o.SetItem(i[eSymbol.id],new s(i[eSymbol.id],i[eSymbol.name]))}},GetSymbol:function(e){var t=o.GetItem(e);return t||r.log("TSymbolsManager/getSymbol",String.format("symbol {0} not exist",e)),t},GetTranslatedSymbolById:n,GetTranslatedSymbolByName:function(e){var t=i.GetItem("symbolbyname_"+e);return t||r.log("TSymbolsManager/getSymbol",String.format("symbol {0} not exist",e)),t},ExtractSymbolsNames:function(e){var t=a.GetInstrument(e);if(t)return{base:n(t.baseSymbol),other:n(t.otherSymbol)}}}}}),define("DealsAmountsManager",["require","Q","dalOrders"],function(e){var t=e("dalOrders"),n=e("Q").defer();return new function(){var i=new THashTable;function e(e){!function(e){if(!isEmptyValue(e)){var t,n=e.length;for(t=0;t<n;t++)i.OverrideItem(e[t][eMinDealValue.instrumentID],toNumeric(e[t][eMinDealValue.minAmount]))}}(e)}return{Init:function(){t.GetMinDealAmounts().then(e).then(function(){n.resolve()})},GetDealMinMaxAmounts:function(e,t){var n=i.GetItem(e),r=Number(t.replace(/[^0-9\.]+/g,""));return r<n&&(n=r),[n,r]},UpdateMinDealAmounts:e,MinDealAmountsPromise:n.promise}}}),define("InstrumentsManager",["require","Q","DealsAmountsManager","ProfileInstruments"],function(e){var b=e("Q"),C=e("DealsAmountsManager"),S=e("ProfileInstruments");return Instrument.prototype.isOvernightFinancing=function(){return this.isFuture||this.isShare||this.isForex&&this.isOvernightOnForex},Instrument.prototype.getCorporateActionDate=function(){return this.isShare?this.expirationDate:null},Instrument.prototype.getInstrumentDividendDate=function(){return this.isShare?this.eventDate:null},Instrument.prototype.getInstrumentDividendAmount=function(){return this.isShare?this.eventAmount:null},Instrument.prototype.getInstrumentRolloverDate=function(){return this.isFuture?this.eventDate:null},Instrument.prototype.roundRateToPip=function(e,t,n){var r=addSign(t,n),i=Format.roundToPip(e,this.PipDigit,this.DecimalDigit,r);return!1===i?"":i},window.$instrumentsManager=new function(){var s,o,l,a,i=[],n=[],r=[],u=new THashTable,c={},A=[],d=new TDelegate,p=new TDelegate,f=new TDelegate;function h(e){var t;for(var n in e)e.hasOwnProperty(n)&&(t=e[n].map(function(e){var t=[];return t[eQuotesUIOrder.InstrumentID]=e[eQuotesUIOrder.InstrumentID],t[eQuotesUIOrder.DealAmount]=e[eQuotesUIOrder.DealAmount].toLocaleString(),t}),!1===equals(c[n],t)&&(c[n]=t))}function m(){for(var e=systemInfo.instruments||[],t=0,n=e.length;t<n;t++){var r=new Instrument(e[t],o,a);r.isTradable&&i.push(r.id),u.OverrideItem(r.id,r)}u.ForEach(function(e,t){!isDefinedType(t.id)||t.weightedVolumeFactor<=1||A.push({id:t.id,weightedVolumeFactor:t.weightedVolumeFactor})})}function g(e){return u.GetItem(e)}function v(){return n}function t(){var e=[ePresetType.PresetMostPopular,ePresetType.PresetMostPopularWithoutFutures,ePresetType.PresetMostPopularCurrencies,ePresetType.PresetMostPopularWithoutShares,ePresetType.PresetMostPopularWithoutFuturesWithoutShares];return window.objectFirst(e,function(e){var t=c[e];return t&&0<t.length})}function y(e,t,n){var r,i=[];if(isNullOrUndefined(e))return i;for(var o=n||e.length,a=0;a<o;a++)(r=g(e[a][eQuotesUIOrder.InstrumentID]))&&(r.presetId=t,i.push(r));return i}function w(e,t){n=(e=e||[]).slice(0),!1!==equals(c[ePresetType.PresetCustomized],n)||t||(c[ePresetType.PresetCustomized]=n,p.Invoke())}return{Init:function(e){var t,n,r,i;s=e.customerType,l=e.initialProfileInstrument.list,o=e.hasWeightedVolumeFactor,a=e.isOvernightOnForex,w(e.customUiOrder),t=e.customUiOrder,n=e.initialUiOrder,r=e.initialScreenId,(i={})[ePresetType.PresetCustomized]=t,i[r]=n,h(i),m()},Clear:function(){i.length=0,n.length=0,r.length=0,u.Clear(),c={},A.length=0,d.Flush(),p.Flush(),f.Flush(),a=o=s=null},SetPresetIntruments:h,GetInstrumentIds:function(){return i},GetCustomizedUiOrder:v,SetCustomizedUiOrder:w,GetQuotesUIOrder:function(){return r},SetQuotesUIOrder:function(e,t,n){e=e||[],n=n||eRegistrationListName.QuotesTable,r=e.slice(0),t||d.Invoke(n,r)},ForeachInstrument:function(e){return u.ForEach(e)},GetEnhancedInstruments:function(){return A},GetInstrument:g,HasInstrumentId:function(e){return u.HasItem(e)},GetInstrumentPropUsedForConversion:function(n,r){var i=null;return u.ForEach(function(e,t){t.baseSymbol==n&&t.otherSymbol==r&&(i={id:t.id,factor:t.factor,isOppositeInstrumentFound:!1}),t.otherSymbol==n&&t.baseSymbol==r&&(i={id:t.id,factor:t.factor,isOppositeInstrumentFound:!0})}),i},GetInstrumentName:function(e){var t=g(e);return t?t.ccyPair:e},GetInstrumentAttribute:function(e,t){var n=g(e);return n?n[t]:""},GetFavoriteInstruments:function(e){return(e=e||n.length)>n.length&&(e=n.length),y(n,ePresetType.PresetCustomized,e)},GetMainMostPopularInstruments:function(){var e=t();return y(c[e],e)},SetInstrumentDealAmount:function(e,t){var n=u.GetItem(e);n&&(n.defaultDealSize=t,u.SetItem(e,n)),S.UpdateInstrumentAmount(e,t)},GetUpdatedInstrumentWithDealMinMaxAmounts:function(e){var t=u.GetItem(e);return 0<t.dealMinMaxAmounts.length?b({dealMinMaxAmounts:t.dealMinMaxAmounts,defaultDealSize:t.defaultDealSize}):C.MinDealAmountsPromise.then(function(){return function(e){var t,n,r,i,o=v();if(e.dealMinMaxAmounts=C.GetDealMinMaxAmounts(e.id,e.maxDeal),l)for(i=0,r=l.length;i<r;i++)if(l[i].instrument==e.id){n=l[i];break}if(n)t=n.defaultAmount;else{for(t=e.defaultDealSize,i=0,r=o.length;i<r;i++)if(o[i][eQuotesUIOrder.InstrumentID]==e.id){t=o[i][eQuotesUIOrder.DealAmount];break}s===eCustomerType.TradingBonus&&(t=e.dealMinMaxAmounts[0])}if(t){var a=toNumeric(e.dealMinMaxAmounts[0])<=toNumeric(t)&&toNumeric(t)<=toNumeric(e.dealMinMaxAmounts[1]);e.defaultDealSize=a?toNumeric(t):e.dealMinMaxAmounts[0]}else e.defaultDealSize=e.dealMinMaxAmounts[0];u.OverrideItem(e.id,e)}(t),{dealMinMaxAmounts:(t=u.GetItem(e)).dealMinMaxAmounts,defaultDealSize:t.defaultDealSize}})},ResetInstrumentsDealAmounts:function(e){for(var t=systemInfo.instruments||[],n=0,r=t.length;n<r;n++){var i=new Instrument(t[n],o,a);i.dealMinMaxAmounts=[],u.OverrideItem(i.id,i)}C.UpdateMinDealAmounts(e)},GetPresetInstruments:function(e){return void 0!==e?c[e]:c},GetInstrumentBySignalName:function(n){var r;return u.ForEach(function(e,t){t.signalName.trim().toLowerCase()==n.trim().toLowerCase()&&(r=t)}),r},GetUserDefaultInstrumentId:function(){var e=3631,t=S.GetSelected();return t&&g(t)&&(e=t),e},UpdateInstruments:function(e){var t=A.splice(0);systemInfo.instruments=e||[],i.length=0,u.Clear(),m(),equals(A,t)||f.Invoke()},OnUiOrderChanged:d,OnEnhancedInstrumentsChange:f,OnFavoritesPresetChanged:p,GetPresetsForInstrument:function(e){var t=[];for(var n in c)if(c.hasOwnProperty(n))for(var r=c[n],i=0;i<r.length;i++)if(r[i][0]===e){t.push(n);break}return t},GetInstrumentFirstChar:function(e){var t=g(e).instrumentEnglishName;return t&&0<t.length?t.substring(0,1):"***"},IsInstrumentStock:function(e){var t=g(e);return!isNullOrUndefined(t)&&t.isStock},GetMainMostPopularPresetId:t}}});var LimitRangesCalculator={CalculateOpeningRanges:function(e,t,n,r,i,o,a){this.CalculateLimitRanges(e,t,eLimitMode.OpenDeal,n,r,i,o,a)},CalculateClosingRanges:function(e,t,n,r,i,o,a){this.CalculateLimitRanges(e,t,eLimitMode.CloseDeal,n,r,i,o,a)},CalculateIfDoneRanges:function(e,t,n,r,i,o,a,s){switch(n){case eOrderDir.Sell:this.CalculateIfDoneShortLimits(e,t,a,Number(o),r,i,s);break;default:this.CalculateIfDoneLongLimits(e,t,a,Number(o),r,i,s)}},CalculateLimitRanges:function(e,t,n,r,i,o,a,s){switch(n){case eLimitMode.OpenDeal:switch(r){case eOrderDir.Sell:this.CalculateOpenShortLimits(e,t,a,i,o,s);break;default:this.CalculateOpenLongLimits(e,t,a,i,o,s)}break;case eLimitMode.CloseDeal:switch(r){case eOrderDir.Sell:this.CalculateCloseShortLimits(e,t,a,i,o,s);break;default:this.CalculateCloseLongLimits(e,t,a,i,o,s)}}},CalculateOpenLongLimits:function(e,t,n,r,i,o){r&&(r.near(this.CalculateNearLimit(t,n.SLMinDistance,o,Operation.Add,n.PipDigit)),r.far(this.CalculateFarLimit(t,systemInfo.config.MaxOpenLimitDist,Operation.Add))),i&&(i.near(this.CalculateNearLimit(e,n.TPMinDistance,o,Operation.Substruct,n.PipDigit)),i.far(this.CalculateFarLimit(e,systemInfo.config.MaxOpenLimitDist,Operation.Substruct)))},CalculateOpenShortLimits:function(e,t,n,r,i,o){r&&(r.near(this.CalculateNearLimit(e,n.SLMinDistance,o,Operation.Substruct,n.PipDigit)),r.far(this.CalculateFarLimit(e,systemInfo.config.MaxOpenLimitDist,Operation.Substruct))),i&&(i.near(this.CalculateNearLimit(t,n.TPMinDistance,o,Operation.Add,n.PipDigit)),i.far(this.CalculateFarLimit(t,systemInfo.config.MaxOpenLimitDist,Operation.Add)))},CalculateCloseLongLimits:function(e,t,n,r,i,o){r&&(r.near(this.CalculateNearLimit(e,n.SLMinDistance,o,Operation.Substruct,n.PipDigit)),r.far(this.CalculateFarLimit(e,systemInfo.config.MaxCloseLimitDist,Operation.Substruct))),i&&(i.near(this.CalculateNearLimit(t,n.TPMinDistance,o,Operation.Add,n.PipDigit)),i.far(this.CalculateFarLimit(t,systemInfo.config.MaxCloseLimitDist,Operation.Add)))},CalculateCloseShortLimits:function(e,t,n,r,i,o){r&&(r.near(this.CalculateNearLimit(t,n.SLMinDistance,o,Operation.Add,n.PipDigit)),r.far(this.CalculateFarLimit(t,systemInfo.config.MaxCloseLimitDist,Operation.Add))),i&&(i.near(this.CalculateNearLimit(e,n.TPMinDistance,o,Operation.Substruct,n.PipDigit)),i.far(this.CalculateFarLimit(e,systemInfo.config.MaxCloseLimitDist,Operation.Substruct)))},CalculateIfDoneShortLimits:function(e,t,n,r,i,o,a){i&&(i.near(this.CalculateNearLimit(r+(t-e),n.SLMinDistance,a,Operation.Add,n.PipDigit)),i.far(this.CalculateFarLimit(r+(t-e),systemInfo.config.MaxCloseLimitDist,Operation.Add))),o&&(o.near(this.CalculateNearLimit(r,n.TPMinDistance,a,Operation.Substruct,n.PipDigit)),o.far(this.CalculateFarLimit(r,systemInfo.config.MaxCloseLimitDist,Operation.Substruct)))},CalculateIfDoneLongLimits:function(e,t,n,r,i,o,a){i&&(i.near(this.CalculateNearLimit(r-(t-e),n.SLMinDistance,a,Operation.Substruct,n.PipDigit)),i.far(this.CalculateFarLimit(r-(t-e),systemInfo.config.MaxCloseLimitDist,Operation.Substruct))),o&&(o.near(this.CalculateNearLimit(r,n.TPMinDistance,a,Operation.Add,n.PipDigit)),o.far(this.CalculateFarLimit(r,systemInfo.config.MaxCloseLimitDist,Operation.Add)))},CalculateNearLimit:function(e,t,n,r,i){var o;switch(n=n||1,o=0<=i?t*n/pow10cache[i]:t*n*pow10cache[-1*i],r){case Operation.Add:return Number(e)+o;case Operation.Substruct:return Number(e)-o;default:throw new RangeException("operation")}},CalculateFarLimit:function(e,t,n){var r;switch(n){case Operation.Add:r=100+t;break;case Operation.Substruct:r=100-t;break;default:throw new RangeException("operation")}return Number(e)*r/100}};function LimitValues(e,t,n,r){this.amount=isDefinedType(e)?e:"",this.value=isDefinedType(t)?t:"",this.rate=isDefinedType(n)?n:"",this.percent=isDefinedType(r)?r:"",this.isValid=""!==this.amount&&"NA"!==this.amount&&""!==this.value&&"NA"!==this.value&&""!==this.rate&&"NA"!==this.rate&&""!==this.percent&&"NA"!==this.percent}var LimitValuesCalculator={CalculateValuesFromRate:function(e,t,n,r,i,o,a,s,l,u){if(u=isNumber(u)?u:0,!isNumber(n))return new LimitValues;if(!InRange(n=parseFloat(n),a))return new LimitValues("NA","NA",n,"NA");var c=r==eOrderDir.Sell?parseFloat(e):parseFloat(t),A=this.CalculateAmountFromRate(c,n,o,r)+u,d=this.CalculatePercentFromRate(c,n)+u/(100*o);return new LimitValues(A,this.CalculateValue(A,s),n=Format.toRate(n,!0,l),d)},CalculateValuesFromAmount:function(e,t,n,r,i,o,a,s,l){if(!isNumber(n))return new LimitValues;var u=Math.abs(parseFloat(n)),c=r==eOrderDir.Sell?parseFloat(e):parseFloat(t),A=this.CalculateRateFromAmount(c,u,o,r,i);if(!InRange(A=Format.toRate(A,!0,l),a))return new LimitValues(n,"NA","NA","NA");var d=this.CalculatePercentFromRate(c,A,o);return new LimitValues(n,this.CalculateValue(u,s),A,d)},CalculateValuesFromPercent:function(e,t,n,r,i,o,a,s,l){if(!isNumber(n))return new LimitValues;var u=r==eOrderDir.Sell?parseFloat(e):parseFloat(t),c=parseFloat(n),A=this.CalculateRateFromPercent(u,c,r,i);if(!InRange(A=Format.toRate(A,!0,l),a))return new LimitValues("NA","NA","NA",n);var d=this.CalculateAmountFromRate(u,A,o,r);return new LimitValues(d,this.CalculateValue(d,s),A,n)},CalculateRateFromAmount:function(e,t,n,r,i){if(n<=0)return 0;var o=t/n;return r==eOrderDir.Sell&&(o*=-1),i==eLimitType.TakeProfit?e+o:e-o},CalculateRateFromPercent:function(e,t,n,r){var i=t*e/100;return n===eOrderDir.Buy&&r===eLimitType.StopLoss?e-i:n===eOrderDir.Buy&&r===eLimitType.TakeProfit?e+i:n===eOrderDir.Sell&&r===eLimitType.StopLoss?e+i:n===eOrderDir.Sell&&r===eLimitType.TakeProfit?e-i:r===eLimitType.StopLoss?e-i:e+i},CalculateValue:function(e,t){return AmountConverter.Convert(e,t)},CalculateAmount:function(e,t,n){return n==eLimitType.StopLoss&&(e*=-1),AmountConverter.Convert(e,t)},CalculateAmountFromRate:function(e,t,n,r){return n*RateRound((t-e)*(r===eOrderDir.Sell?-1:1))},CalculatePercentFromRate:function(e,t){return 0===t?100:100*Math.abs(e-t)/e}},LastWithdrawalRequest=function(){var t=null;return{storeValue:function(e){return t=e},readValue:function(){return t},hasValue:function(){return!isEmptyType(t)},clearValue:function(){t=null}}}(),WithdrawalRequestInfo=function(){var n={bankInfo:null,ccyList:new THashTable,maxWithdrawalAmount:{}},t=function(e){var t=e.LastWithdrawalRequest;0<t.length&&(n.bankInfo={},n.bankInfo.symbolName=t[eWithdrawalView.symbolName],n.bankInfo.bankName=t[eWithdrawalView.bankName],n.bankInfo.bankAccount=t[eWithdrawalView.bankAccount],n.bankInfo.bankAddress=t[eWithdrawalView.bankAddress],n.bankInfo.bankCountryID=t[eWithdrawalView.bankCountryID],n.bankInfo.bankCountryName=t[eWithdrawalView.bankCountryName],n.bankInfo.bankBranch=t[eWithdrawalView.bankBranch],n.bankInfo.bankBeneficiary=t[eWithdrawalView.bankBeneficiary],n.bankInfo.bankComments=t[eWithdrawalView.bankComments])},r=function(e){n.maxWithdrawalAmount.value=e.MaxWithdrawalAmount},i=function(e){n.ccyList=e.CcyList.slice(0)};return{prop:n,hasData:function(e){return n.ccyList.hasItems()},setRequestInfo:function(e){t(e),i(e),r(e)}}};function ObservableDataSet(e,t){var n=this;e=e||{};var o=ko.observable(!1),r={columns:[],idField:"id",statusField:"status",totalField:"total",dataField:"data",pagination:{pagesPerPage:5,pageSizeField:"pagesize",pageIndexField:"page"},Filter:{},DAL:{reference:function(){},callerName:"ObservableDataSet",errorSeverity:eErrorSeverity.medium,onLoad:function(){}}},s=extendType({},e,r),l=new ObservableHashTable(s.idField,t),a=ko.observable(1),i=ko.observable(10),u=ko.observableArray(),c=ko.observable(s.pagination.pagesPerPage),A=ko.observable(0),d=ko.observable(!1),p=!1,f=ko.computed(function(){return Math.ceil(A()/i())}),h=ko.computed(function(){return a()<f()}),m=ko.computed(function(){return a()==f()}),g=ko.computed(function(){return 1==a()}),v=ko.computed(function(){return 1<a()}),y=ko.computed(function(){return d()&&1<f()}),w=function(e){var t=s.pagination.pageIndexField;ko.isWriteableObservable(s.Filter[t])?s.Filter[t](e):s.Filter[t]=e};a.subscribe(function(e){w(e),D()});var b=function(){!function(){for(var e={name:"",transform:function(e,t,n,r,i){return e}},t=0;t<s.columns.length;t++)s.columns[t]=s.columns[t]||{},isStringType(s.columns[t])&&(s.columns[t]={name:s.columns[t]}),extendIfType(s.columns[t],e)}(),C()},C=function(){var e=s.pagination.pageSizeField,t=10;e in s.Filter&&isNumber(s.Filter[e])?t=s.Filter[e]:s.Filter[e]=t,i(t),w(1)},S=function(i,o){if(!isEmptyType(i)){var a={};isArrayType(i)?$.each(s.columns,function(e,t){var n=t.name,r="";"dataIndex"in t&&isDefinedType(i[t.dataIndex])&&(r=i[t.dataIndex]),isFunctionType(t.transform)&&(r=t.transform(r,o,e,i,a)),a[n]=r}):isObjectType(i)||isStringType(i)&&(a.value=i),s.idField in a||(a[s.idField]=o),l.Add(a)}},E=function(e){p=!1;var t=JSONHelper.STR2JSON(s.DAL.callerName,e,s.DAL.errorSeverity);if(t){var n={};if(n[s.statusField]="RequestFailed",n[s.totalField]=0,n[s.dataField]=[],extendType(n,t),A(n[s.totalField]),eOperationStatus[n[s.statusField]]==eOperationStatus.Success){d(0<n[s.dataField].length);for(var r=0,i=n[s.dataField].length;r<i;r++)S(n[s.dataField][r],r);!function(){u.removeAll();var e,t=a()%c(),n=(e=0==t?a()-c():a()-t)+c();n>f()&&(n=f());for(var r=e;r<n;r++)u.push(r+1)}()}isFunctionType(s.DAL.onLoad)&&s.DAL.onLoad(n),o(!1)}},D=function(){var e=function(){var e={};for(var t in s.Filter)s.Filter.hasOwnProperty(t)&&(ko.isObservable(s.Filter[t])?e[t]=s.Filter[t]():ko.isComputed(s.Filter[t])?e[t]=s.Filter[t]():e[t]=s.Filter[t]);return e}();if(o(!0),!0!==p&&(l.Clear(),d(!1)),isFunctionType(s.DAL.reference))return s.DAL.reference.apply(n,[e,E])};return{Init:b,DataRows:l.Values,Load:D,Clean:function(){l.Clear(),u.removeAll(),d(!1),a(1),A(0)},HasRecords:d,ShowPaging:y,ApplyFilter:function(){o(!0),1!=a()?a(1):D()},IsLoadingData:o,SetFilter:function(e){s.Filter=e||{},C()},Paging:{ShowMore:function(){a()<f()&&(p=!0,a(parseInt(a()+1)))},TotalRecords:A,TotalPages:f,PageSize:i,Pages:u,CurrentPage:a,NextPage:function(){a()<f()&&a(parseInt(a()+1))},PrevPage:function(){1<a()&&a(parseInt(a()-1))},FirstPage:function(){1<a()&&a(1)},LastPage:function(){a()<f()&&a(f())},IsFirstPage:g,HasPrevPage:v,HasNextPage:h,IsLastPage:m},UpdateColumnModel:function(e){s=extendType({},e,r),l.KeyProperty(s.idField),b()},SetSorting:l.SetSorting,SortProperties:l.SortProperties}}function ObservableHashTable(e,t){var s=ko.observable(e),l=ko.observableArray([]),u=new THashTable,c=void 0===t?{enabled:!1,sortProperty:"",asc:!0}:t,o=ko.observable(c),n=function(e,t,n){var r,i,o=n&&!c.enabled?l():l,a=(r=e,i=ko.unwrap(r),ko.toJS(i[s()]));return!u.HasItem(a)&&(c.enabled?o.pushSorted(c.sortProperty,c.asc,e):"number"==typeof t?o.splice(t,0,e):o.push(e),u.SetItem(a,e),!0)},r=function(e){if(c.enabled){var t=e;l.remove(t),l.pushSorted(c.sortProperty,c.asc,e)}};return{Clear:function(){u.Clear(),ko.utils.arrayForEach(l(),function(e){e&&"function"==typeof e.dispose&&e.dispose()}),l.removeAll()},Add:function(e){return n(e)},AddRange:function(e){for(var t=0;t<e.length;t++)n(e[t],null,!0);c.enabled||l.valueHasMutated()},AddAt:function(e,t){return n(t,e)},Update:function(e,t){var n=u.GetItem(e);null!==n&&ko.utils.updateShallowFrom(t,n,c.sortProperty)&&r(n)},UpdateAlways:function(e,t){var n=u.GetItem(e);null!==n&&ko.utils.updateDeepFrom(t,n,c.sortProperty)&&r(n)},Get:function(e){return u.GetItem(e)},Contains:function(e){return u.HasItem(e)},Remove:function(e){var t=u.GetItem(e);return null!==t&&(u.RemoveItem(e),l.remove(t),!0)},SetSorting:function(e,t,n){var r=!c.enabled&&e||c.sortProperty!=t,i=c.asc!=n;c.enabled=e,c.sortProperty=t,c.asc=n,o(c),1<l().length&&(r?l.sortByProperty(c.sortProperty,c.asc):i&&l.reverse())},SortProperties:o,Keys:u,HasItems:function(){return u.hasItems()},Values:l,KeyProperty:s}}!function(e,t){"function"==typeof define&&define.amd?define("fxnet/UILayer/UILayerHelpers/KOExtensions",["knockout"],t):t(window.ko)}("undefined"!=typeof self&&self,function(u){var a,s;u.observableArray.fn.pushSorted=function(e,t,n){var r=this(),i=u.toJS(n[e]),o=r.length,a=0;if(0<o){var s=u.toJS(r[o-1][e]),l=CompareValues(s,i,t);if(l<=0)return this.push(n),o-1;do{if(0<=(l=CompareValues(s=u.toJS(r[a][e]),i,t)))return this.splice(a,0,n),a}while(a++<o)}return this.push(n),a},u.isObservableArray=function(e){return!!e&&("function"==typeof e.remove&&"function"==typeof e.removeAll&&"function"==typeof e.destroy&&"function"==typeof e.destroyAll&&"function"==typeof e.indexOf&&"function"==typeof e.replace)},u.observableArray.fn.sortByProperty=function(n,r){this.sort(function(e,t){return CompareValues(u.toJS(e[n]),u.toJS(t[n]),r)})},u.utils.updateShallowFrom=function(e,t,n){var r=!1;for(var i in e)if(e.hasOwnProperty(i)&&i in t){var o=u.toJS(e[i]),a=void 0!==n&&i==n;u.isObservable(t[i])?u.isWriteableObservable(t[i])&&t[i]()!=o&&(r=a,t[i](o)):t[i]!=o&&(r=a,t[i]=o)}return r},u.utils.updateDeepFrom=function(e,t,n){var r=!1;for(var i in e)if(e.hasOwnProperty(i)&&i in t){var o=u.toJS(e[i]),a=void 0!==n&&i==n;u.isObservable(t[i])?u.isWriteableObservable(t[i])&&(r=a,t[i](o)):(r=a,t[i]=o)}return r},u.subscribable.fn.subscribeChanged=function(t){var n;return this.subscribe(function(e){n=e},null,"beforeChange"),this.subscribe(function(e){t(e,n)})},u.utils.dirtyGroup=function(t,e){isObjectType(t)||(t={});var n=[];$.each(e,function(){n.push(this)}),t.dirtyGroup=[];t.isDirty=u.computed(function(){return t.dirtyGroup=[],u.utils.arrayForEach(n,function(e){e&&e.isDirty()&&t.dirtyGroup.push(e)}),0<t.dirtyGroup.length})},u.extenders.asyncValidation=function(e,t){var n=u.utils.extend({withAsyncValidationFix:!0},t);if(n.withAsyncValidationFix){var r=e.isValid;e.isValid=function(){return!e.isValidating()&&r.apply(this,arguments)}}e.extend({asyncValidator:n.asyncFunction})},u.extenders.initialyVisible=function(e,t){e.isVisible=!0===t?u.observable(!0):u.observable(!1)},u.validation.registerExtenders(),a={dispose:function(){}},s={},u.postbox.subscribeSingleton=function(e,t,n,r){(s[e]||a).dispose();var i=u.postbox.subscribe(e,t,n,r),o=i.dispose.bind(i);return i.dispose=function(){o(),delete s[e]},s[e]=i},u.extenders.intersectArray=function(t,o){return u.pureComputed({read:function(){var e=t();if(!Array.isArray(e)||e.length<=0)return[];if(null==o||null==o.withArray)return e;var n=o.withArray();if(!Array.isArray(n)||n.length<=0)return o.allowEmptyArray?[]:e;var r=o.prop,i=o.withProp;return u.utils.arrayFilter(e,function(t){return u.utils.arrayFirst(n,function(e){return(r?t[r]:t).toString()===(i?e[i]:e).toString()})})},write:function(e){t(e)}}).extend({notify:"always"})}}),ko.validation.rules.in={validator:function(e,t){return t.contains(e)},message:""},ko.validation.rules.asyncValidator={async:!0,validator:function(e,n,r){n(e,function(e){var t=JSONHelper.STR2JSON(n.name,e);r(Boolean.parse(t))},function(){r(!1)})},message:""},ko.validation.rules.phoneNumber={validator:function(e,t){return!t||"string"==typeof e&&(""===e||t&&e.match(/^(?=(?:\D*\d){5,})(\(?\+?\d{1,3}\)?\s*[-â]?\s*)+\d*$/))},message:"Please specify a valid phone number"},ko.validation.rules.minAge18={validator:function(e,t){if(t&&(-1!==e.indexOf("undefined")||-1!==e.indexOf("...")))return!1;var n=e.split("/"),r=parseInt(n[0]),i=parseInt(n[1]),o=parseInt(n[2]),a=new Date,s=(o+"-"+i+"-"+r).toString();try{var l=$.datepicker.parseDate("yy-mm-dd",s);return i-=1,l.setFullYear(o,i,r),a.setFullYear(a.getFullYear()-18),!(a-l<0)}catch(e){return!1}},message:"You must be at least {0} years of age."},define("VmHelpers",["require","knockout"],function(e){var a=e("knockout");return window.$vmHelpers=new function(){var o=function(e){return a.isObservableArray(e)?[]:(!a.isObservable(e)||"boolean"!=typeof a.unwrap(e))&&""};return{GeneratePrimitiveTypeArray:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&(isFunctionType(e[n])||(t[n]=e[n]));return t},CleanKoObservableSimpleObject:function(e,t){var n=cloneHardCopy(e);for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];if(!isFunctionType(i))continue;a.isWriteableObservable(i)&&i(o(i)),t&&a.isComputed(i)&&i.dispose()}return e=n}}}}),ko.extenders.dirty=function(e,t){return e.cleanValue=ko.observable(ko.toJS(e)),e.originalValue=e.cleanValue,e.dirtyOverride=ko.observable(ko.utils.unwrapObservable(t)),e.isDirty=ko.computed(function(){var e=ko.toJS(this),t=this.cleanValue(),n=this.dirtyOverride();return"object"==typeof e?n||!equals(e,t):isNaN(e)||isNaN(t)?n||e!==t:n||Number(e)!=Number(t)},e),e.markClean=function(){this.cleanValue(ko.toJS(this)),this.dirtyOverride(!1)},e.markDirty=function(){this.dirtyOverride(!0)},e},ko.extenders.toNumericLength=function(e,u){return!1!==u&&e?(e.toNumericLengthSubscriber&&isFunctionType(e.toNumericLengthSubscriber.dispose)&&e.toNumericLengthSubscriber.dispose(),e.toNumericLengthSubscriber=e.subscribe(function(e){var t,n=Number.MAX_SAFE_INTEGER,r=u.ranges,i=ko.utils.unwrapObservable(u.isAllowNAValue),o=ko.utils.unwrapObservable(u.isForceCeil),a=toNumeric(e);if(""!==e&&(!i||"NA"!==e))if("NA"!=a&&a<=n){a=Math.abs(a);var s=(t=a,r.find(function(e){return t>=e.from&&t<e.to}).decimalDigits);if(s<lenAfterDelimeter(a)){var l=Math.pow(10,s);a=o?Math.ceil(a*l)/l:Math.floor(a*l)/l}a!=e&&this(a)}else this("")},e)):e&&e.toNumericLengthSubscriber&&(e.toNumericLengthSubscriber.dispose(),e.toNumericLengthSubscriber=null),e},ko.extenders.amountValidation=function(n,e){if(!1!==e&&n){var t=ko.utils.unwrapObservable(e);n.minAmount=ko.observable(),n.maxAmount=ko.observable(),n.minAmount(t.reduce(function(e,t){return Math.min(e,t)},t[0]||0)),n.maxAmount(t.reduce(function(e,t){return Math.max(e,t)},t[t.length-1]||1e10)),r(),n.validationRule=ko.validation.addAnonymousRule(n,{validator:function(e){var t=toNumeric(e);return isNaN(t)&&(t=-1),n.minAmount()<=t&&t<=n.maxAmount()},params:!0})}else!1===e&&n&&r();function r(){if(isDefinedType(n.rules)&&!isEmptyValue(n.validationRule)){var e=n.rules().find(function(e){return e.rule===n.validationRule});e&&n.rules.remove(e)}}},ko.extenders.empty=function(e,t){return t&&!e.isEmpty?e.isEmpty=ko.computed(function(){return isEmptyValue(ko.utils.unwrapObservable(this))},e):e.isEmpty&&e.isEmpty.dispose(),e},ko.extenders.triggerValidation=function(e,t){return t&&ko.validation.utils.isValidatable(e)?e.triggerValidation=function(){var e=ko.utils.unwrapObservable(this);this.notifySubscribers(e)}:!t&&e.triggerValidation&&(e.triggerValidation=null),e},ko.extenders.tooltipValidation=function(e,t){return!1!==t?(e.tooltipClosed=ko.observable(!1),e.dummyObservable=ko.observable(""),e.tooltipVisible=ko.pureComputed(function(){var e=this.showTooltip(),t=this.isValid(),n=this.tooltipClosed();return this.dummyObservable.notifySubscribers(),!n&&!t&&e},e),e.showTooltip=ko.pureComputed("function"==typeof t.showTooltip?t.showTooltip:function(){return!0}),e.closeTooltip=function(){this.tooltipClosed(!0)},e.resetTooltip=function(){this.tooltipClosed(!1)},e._selfSubscriber=e.subscribe(function(){this.tooltipClosed(!1)},e),e.tooltipMessage=ko.pureComputed(function(){return this.dummyObservable(),t.message?t.message:this.error},e),ko.validation.utils.isValidatable(e)&&"always"===t.notify&&(e.__valid__=e.__valid__.extend({notify:"always"}),e.isValid=e.isValid.extend({notify:"always"}))):(e.tooltipMessage.dispose(),e._selfSubscriber.dispose(),e.showTooltip.dispose(),e.tooltipVisible.dispose(),e.resetTooltip=null,e.closeTooltip=null,e.dummyObservable=null,e.tooltipClosed=null,delete e.tooltipMessage,delete e._selfSubscriber,delete e.showTooltip,delete e.tooltipVisible,delete e.resetTooltip,delete e.closeTooltip,delete e.dummyObservable,delete e.tooltipClosed),e},ko.extenders.incremental=function(e,n){if(!1!==n){n=n||{};var t={precision:4,ranges:[{from:0,to:10,step:1},{from:10,to:100,step:5},{from:100,to:1e3,step:50},{from:1e3,to:Number.MAX_VALUE,step:500}]};n=ko.utils.extend(t,n);var c=function(t){var e=n.ranges.find(function(e){return t>=e.from&&t<e.to});return e?e.step:1},r=function(e,t,n){t=Number(t);var r,i,o=Math.pow(10,n),a=c(t),s=Math.floor(a*o),l=Math.floor(t*o),u=l;if("up"===e)u=(r=l+s)-(i=r%s);else if("down"===e){if(0!==(i=(r=l-s)%s))u=l-i;else u=l-c(t-a)*o}return u/o};e.increment=function(e){var t=r("up",this(),n.precision);return e||this(t),t},e.decrement=function(e){var t=r("down",this(),n.precision);return e||this(t),t},e.step=ko.computed(function(){return c(e())}),ko.subscribable.fn.isIncremental=function(){return"function"==typeof this.increment&&"function"==typeof this.decrement}}else e.step.dispose(),e.step=null,e.increment=null,e.decrement=null;return e},define("KoComponentViewModel",["knockout"],function(o){function e(){this._settings={},this._disposables=[],this.Data={},this._valid=!0}return e.prototype.createComputed=function(e,t,n){var r,i={owner:t||this};if("function"==typeof e)i.read=e;else{if("object"!=typeof e)throw new Error("Argument mismatch, object literal was expected");o.utils.extend(i,e)}return r=!1===n?o.computed(i):o.pureComputed(i),this._disposables.push(r),r},e.prototype.subscribeTo=function(e,t,n,r){var i=e.subscribe(t,n||this,r);return this._disposables.push(i),i},e.prototype.subscribeAndNotify=function(e,t,n,r){var i=this.subscribeTo(e,t,n,r);return e.notifySubscribers(e()),i},e.prototype.subscribeChanged=function(e,t){var n,r=e.subscribe(function(e){n=e},null,"beforeChange");this._disposables.push(r);var i=e.subscribe(function(e){t(e,n)});return this._disposables.push(i),i},e.prototype.setSettings=function(e,t){var n=e||{},r=t||{};o.utils.extend(this._settings,r),o.utils.extend(this._settings,n)},e.prototype.getSettings=function(){return o.utils.extend({},this._settings)},e.prototype.init=function(e){this.setSettings(e)},e.prototype.addDisposable=function(e){e&&"function"==typeof e.dispose&&this._disposables.push(e)},e.prototype.dispose=function(){var n=function(e){e&&"function"==typeof e.dispose&&e.dispose()};o.utils.arrayForEach(this._disposables,function(e){n(e)}),this._disposables.length=0,o.utils.objectForEach(this,function(e,t){n(t)})},e});var AmlPopupManager=function(e){return e.show=function(){switch(InitConfiguration.ApplicationConfiguration.applicationType){case window.eApplicationTypes.Web:e={title:Dictionary.GetItem("AMLStatus"),closeOnEscape:!1,dialogClass:"fx-dialog amlPopup",width:620},isDefinedType(DialogViewModel)&&DialogViewModel.openAsync(eAppEvents.amlStatusLoadedEvent,eDialog.AmlStatus,e,eViewTypes.vAmlStatus,null);break;case window.eApplicationTypes.Mobile:$viewModelsManager.VManager.SwitchViewVisible(eForms.Aml,{});break;default:(new PopupInSameWindowForSC).Navigate({ActionUrl:"/webpl3/Compliance/AmlStatusWrapper"}),window.external.ResizeHostForm(651,588)}var e},e}(window.AmlPopupManager||{});function CollectionNavigateManager(){var r,i,t=0,n=1,o=0,a=0,s=function(e){t=e||0,i.isFirst(0==t),i.isLast(t==a-1)},l=function(){n=t+1<=a-1?t+1:a-1,o=0<t-1?t-1:0};return{Init:function(e,t,n){i=n,a=(r=e).length,s(t)},getCollection:function(){return r},GetNewSelectedItem:function(e,t){switch(l(),e){case eNavigateDirection.Next:s(n),t(r[n]);break;case eNavigateDirection.Prev:s(o),t(r[o])}window.scrollTo(0,1)}}}define("ChartLayoutSettings",["require","ChartSettingManager","InstrumentsManager"],function(e){var a=e("ChartSettingManager"),s=e("InstrumentsManager"),n=4;function l(){var e=(s.GetFavoriteInstruments()||[]).filter(r);if(e.length>=n)return e.map(i);var t=s.GetMainMostPopularInstruments().filter(r);return e.concat(t).map(i)}function r(e){return s.HasInstrumentId(e.id)}function i(e){return e.id}function t(e){return e.instrumentId}function u(){return a.Chart().tileChartSettings.map(t)}return{Init:function(){var e,t,n=!1;isEmptyValue(a.Chart().tileChartSettings)&&(a.Chart().tileChartSettings=[{instrumentId:(e=l())[0]},{instrumentId:e[1]},{instrumentId:e[2]},{instrumentId:e[3]}],n=!0),(t=u()).filter(s.HasInstrumentId).length<t.length&&(a.Chart().tileChartSettings=function(){for(var e=a.Chart().tileChartSettings,t=u(),n=l().filter(function(e){return!t.contains(e)}),r=-1,i=0;i<t.length;i++){var o=t[i];s.HasInstrumentId(o)||(e[i].instrumentId=n[++r])}return e}(),n=!0),n&&a.SaveChart()},GetSettings:function(e){return""===e?a.Chart().chartUserSettings:a.Chart().tileChartSettings[e]},GetTileInstruments:u,UpdateSettings:function(e,t){""===e?a.Chart().chartUserSettings=t:a.Chart().tileChartSettings[e]=t,a.SaveChart()}}}),define("ChartSettingManager",["require","CustomerProfileManager","LoadFromPouchDB!chart","FxNet/DataAccessLayer/dalPouchDB"],function(e){var t=e("CustomerProfileManager"),n=e("LoadFromPouchDB!chart"),r=e("FxNet/DataAccessLayer/dalPouchDB"),i={},o=debounce(function(){var e=JSON.parse(JSON.stringify(i));r.Save("chart",e)},1e4);return n?i=n:(i.chartUserSettings=t.OldChart().chartUserSettings||{},i.tileChartSettings=t.OldChart().tileChartSettings||[],i.tileSettings=t.OldChart().tileSettings||{},i.chartFavorites=t.OldChart().chartFavorites||{},i.chartIndicatorsSettings=t.OldChart().chartIndicatorsSettings||[],i.chartsZoomSettings=t.OldChart().chartsZoomSettings||{}),{Chart:function(){return i},SaveChart:o}}),define("ChartStudySettings",["require","knockout","ChartSettingManager"],function(e){var t=e("knockout"),n=e("ChartSettingManager"),r=t.observable([]),i=t.observable([]),o={compares:"chartComparesFavorites",indicators:"chartIndicatorsFavorites"},a=[];function s(e){var t;return n.Chart().chartFavorites&&(t=n.Chart().chartFavorites[e]),t||[]}function l(e){c(o.compares,e)}function u(e){c(o.indicators,e)}function c(e,t){isNullOrUndefined(n.Chart().chartFavorites)&&(n.Chart().chartFavorites={}),n.Chart().chartFavorites[e]=t,n.SaveChart()}return{Init:function(){a.push(r),a.push(i),r(s(o.compares)),i(s(o.indicators)),a.push(r.subscribe(l)),a.push(i.subscribe(u))},Dispose:function(){for(var e,t=0,n=a.length;t<n;t++)(e=a[t])&&isFunctionType(e.dispose)&&e.dispose();a.length=0},ComparesFavorites:r,IndicatorsFavorites:i,GetSettings:function(){return n.Chart().chartIndicatorsSettings},SetSettings:function(e){n.Chart().chartIndicatorsSettings=e,n.SaveChart()}}}),define("ChartZoomSettingsManager",["require","Q","ChartSettingManager"],function(e){var o=e("Q"),a=e("ChartSettingManager"),m="user",g="history",v="restorezoom",y="zoomfullrange";return function(e){var c,r,A,t=e,d=o.defer();function n(e){switch(e){case"zoom_default":var t=c.chart.TimeScale,n=p();delete n[t],f(n);break;case"zoom_left":case"zoom_in":case"zoom_out":case"zoom_all":case"zoom_right":A=e}isFunctionType(r)&&r.apply(this,arguments)}function p(){var e=a.Chart().chartsZoomSettings||(a.Chart().chartsZoomSettings={});return e[t]||(e[t]={})}function f(e){a.Chart().chartsZoomSettings=a.Chart().chartsZoomSettings||{},a.Chart().chartsZoomSettings[t]=e,a.SaveChart()}function i(e){if(c&&c.chart){var t=p(),n=e.future,r=e.zoomSize,i=e.timescale,o=e.source,a=e.bufferSize;if(o==v&&(delete t[i],f(t),i==eChartTimeFramesIds.tick?c.chart.SetZoom(.05*a,1.05*a,!0):c.chart.SetZoom(.6*a,a+2,!0)),o==m||o==y||A){if(A="",.01<n/r&&n/r<=.5)return t[i]={future:e.future,visibleCandles:e.end-e.start+1},f(t),h(e);.5<n/r&&(delete t[i],f(t))}if(o==g){var s=t[i];if(s&&!s.visibleCandles&&(s.visibleCandles=s.end-s.start+1),s){if("pending"===d.promise.inspect().state&&d.resolve(),a+s.future<s.visibleCandles)return h(e);var l=a+s.future-s.visibleCandles,u=a+s.future;return e.start=l,e.end=u,e.zoomSize=u-l+1,e.future=s.future,e}return h(e)}}}function h(e){"pending"===d.promise.inspect().state&&d.resolve();var t=e.timeScale==eChartTimeFramesIds.tick?.05:.6,n=parseInt(e.bufferSize*t),r=parseInt(1.05*e.bufferSize);return e.start=n,e.end=r,e.zoomSize=r-n+1,e.future=r-e.bufferSize+1,e}return{Dispose:function(){r&&c&&c.events&&(c.events.actions.onActionRun=r),c&&c.chart&&(c.chart.OnZoomChangeCallback=null),c=null},Start:function(e){if(!e||!isDefinedType(e.ExtraData.additionalStartArgs.containerSuffix))throw new Error("Argument exception: initializedChartObject is not valid.");c=e,isNumberType(t)||(t=c.ExtraData.additionalStartArgs.containerSuffix||-1),c.chart.OnZoomChangeCallback=i,isFunctionType(c.events.actions.onActionRun)&&(r=c.events.actions.onActionRun),c.events.actions.onActionRun=n},IsZoomRestored:d.promise}}}),define("CustomerProfileManager",["require","knockout","dalCustomerProfile","ProfileInstruments","PermissionsModule","StateObject!DealerParams"],function(e){var o,t=e("knockout"),a=e("dalCustomerProfile"),s=e("ProfileInstruments"),l=e("StateObject!DealerParams"),n=e("PermissionsModule"),u=t.observable({}).extend({dirty:!1}),c=t.observable(0).extend({dirty:!1}),r=t.observable(""),i=t.observable(""),A=t.observable(-1).extend({dirty:!1}),d=1e4,p=new TDelegate,f=new TDelegate,h={};function m(e){var t=u();t.advancedWalletView=e?1:0,u(t)}function g(){if(n.CheckPermissions("customerProfile")){if(c.isDirty()){var e={defaultFirstPage:c()};c.markClean(),p.Invoke(c()),a.SaveStartUpPage(e)}u.isDirty()&&(u.markClean(),a.SaveProfile(u())),A.isDirty()&&a.SaveClientScreen({ScreenId:A()}).then(function(e){e&&e.status==eOperationStatus.Success&&(A.markClean(),f.Invoke(A()))}).done(),clearTimeout(o),o=setTimeout(g,d)}}return window.CustomerProfileManager=window.$customerProfileManager={ProfileCustomer:u,OldChart:function(){return h},LastSelectedPresetId:A,UpdateIsAdvancedView:m,DefaultPage:c,GetUiVersion:function(){return u().dealSlipVersion||eUIVersion.Default},CashBackVolume:r,MaxCashBack:i,Init:function(e,t,n,r){var i;A(r),A.markClean(),c(t),c.markClean(),s.Init(n),s.OnUpdate.Add(function(e){a.SaveProfileInstrument(e)}),(i=(i=e)||{}).chartUserSettings||i.tileChartSettings||i.tileSettings||i.chartFavorites||i.chartIndicatorsSettings||i.chartsZoomSettings?(h.chartUserSettings=i.chartUserSettings?JSON.parse(i.chartUserSettings):{},h.tileChartSettings=i.tileChartSettings?JSON.parse(i.tileChartSettings):[],h.tileSettings=i.tileSettings?JSON.parse(i.tileSettings):{},h.chartFavorites=i.chartFavorites?JSON.parse(i.chartFavorites):{},h.chartIndicatorsSettings=i.chartIndicatorsSettings?JSON.parse(i.chartIndicatorsSettings):{},h.chartsZoomSettings=i.chartsZoomSettings?JSON.parse(i.chartsZoomSettings):{},delete i.chartUserSettings,delete i.tileChartSettings,delete i.tileSettings,delete i.chartFavorites,delete i.chartIndicatorsSettings,delete i.chartsZoomSettings,u(i)):(u(i),u.markClean()),m(!(!l.get(eDealerParams.DealerAdvancedWalletView)&&!u().advancedWalletView)),o=setTimeout(g,d)},Dispose:function(){p.Flush(),f.Flush(),clearTimeout(o)},Events:{onStartUpFormChanged:p,onInitialScreenChanged:f}}}),define("HistoryManager",["require","jquery","history"],function(e){var m=e("jquery"),g=e("history");function t(){this.type=""}function v(){this.type=eHistoryStateType.Invalid}function y(e,t){this.type=e,this.popupType=e,this.popupId=t}function w(e,t){this.type=eHistoryStateType.Wizard,this.step=t,this.view=e}function b(e){this.type=eHistoryStateType.Questionnaire,this.pageNumber=e,this.view=eForms.ClientQuestionnaire}function C(e,t){this.type=eHistoryStateType.View,this.view=e,this.viewArgs=t}function S(e,t){this.type="startup",this.view=e,this.viewArgs=t}return(v.prototype=Object.create(t.prototype)).constructor=v,((y.prototype=Object.create(t.prototype)).constructor=y).prototype.toString=function(){return"?popup="+this.popupId},((w.prototype=Object.create(t.prototype)).constructor=w).prototype.toString=function(){return"?view="+this.view+"&step="+(isEmptyValue(this.step)?1:this.step)},((b.prototype=Object.create(t.prototype)).constructor=b).prototype.toString=function(){return"?view="+this.view+"&questionnaire="+this.pageNumber},((C.prototype=Object.create(t.prototype)).constructor=C).prototype.toString=function(){return"?view="+this.view},(S.prototype=Object.create(C.prototype)).constructor=S,window.HistoryManager=new function(){var n=new TDelegate,r=!0,i=function(e){return isDefinedType(e.data.type)},o=function(e){return i(e)&&isDefinedType(e.data.view)},a=function(e){return i(e)&&!isEmptyType(e.data.popupType)},s=function(e){return i(e)&&!isEmptyType(e.data.pageNumber)},l=function(e){return i(e)&&!isEmptyType(e.data.step)},u=function(e){return a(e)&&e.data.popupType===ePopupType.Alert},c=function(e){return a(e)&&e.data.popupType===ePopupType.Dialog},A=function(e){return o(e)&&"startup"===e.data.type},d=function(){return g.getStateByIndex(g.getCurrentIndex()-1)},p=function(e,t,n){f(new C(e,t),n)};function f(e,t){var n=g.getState();isFunctionType(t)&&(equals(n.data,e)?setTimeout(t):m(window).one("statechange",t)),g.pushState(e,window.document.title,e.toString())}function h(e){g.replaceState(e,window.document.title,e.toString())}var t=function(e,t){isFunctionType(t)&&m(window).one("statechange",function(){t()}),g.go(e)};return{Start:function(e,t,n){var r=g.getState();o(r)&&!A(r)&&(r.url.containsNotEmpty(window.location.search)||window.location.hash.containsNotEmpty(g.getHash()))?(g.Adapter.trigger(window,"statechange"),isFunctionType(n)&&n()):p(e,t,n)},Init:function(){return!!g.enabled&&(g.clearQueue(),m(window).on("statechange",function(){var e=g.getState(),t=d();A(e)&&r?r=!1:(l(e)&&n.Invoke(new w(e.data.view,e.data.step)),(s(e)||a(e))&&n.Invoke(new b(e.data.step)),function(e,t){var n=eFullScreenTogleControls;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];if(i.full===t.data.popupId&&i.default===e.data.popupId)return!0}return!1}(e,t)&&n.Invoke(new y(eHistoryStateType.ExitFullscren,t.data.popupId)),function(e,t){var n=eFullScreenTogleControls;for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];if(i.full===e.data.popupId&&(i.default===t.data.popupId||i.default===t.data.view))return!0}return!1}(e,t)&&n.Invoke(new y(eHistoryStateType.EnterFullscren,t.data.popupId)),a(e)||(u(t)&&e.navigation?n.Invoke(new y(eHistoryStateType.CloseAlert,t.data.popupId)):c(t)&&e.navigation?n.Invoke(new y(eHistoryStateType.CloseDialog,t.data.popupId)):o(e)?n.Invoke(new C(e.data.view,e.data.viewArgs)):i(e)?n.Invoke(e.data):n.Invoke(new v)))}),!0)},Back:function(e){t(-1,e)},Forward:function(e){t(1,e)},GetCurrentState:g.getState,PushSubState:function(e,t){var n,r=g.getState();s(r)?n=new b(r.data.pageNumber):a(r)?n=new y(r.data.popupType,r.data.popupId):o(r)&&(n=new C(r.data.view,r.data.viewArgs)),n&&(n.toString=function(){return Object.getPrototypeOf(n).toString.apply(n,arguments)+"&"+e},f(n,t))},PushViewState:p,ReplaceViewState:function(e,t,n){h(new C(e,t))},PushPopupState:function(e,t,n){if(e!==ePopupType.Dialog&&e!==ePopupType.Alert)throw new Error("Not implemented Type: "+e);f(new y(e,t),n)},PushStartUpState:function(e,t,n){f(new S(e,t),n)},PushQuestionnaireState:function(e){1===e?h(new b(e)):f(new b(e))},PushWizardState:function(e,t,n){f(new w(e,t),n)},HasAlert:function(e){var t=g.getState();return u(t)&&t.data.popupId===e},HasDialog:function(e){var t=g.getState();return c(t)&&t.data.popupId===e},OnStateChanged:n}}}),define("InstrumentTranslationsManager",["require","ErrorManager","InstrumentsManager","handlers/LanguageHelper","Dictionary"],function(e){var s=e("ErrorManager"),l=e("InstrumentsManager"),n=e("handlers/LanguageHelper"),i=e("Dictionary");function r(e){this.ccyPairLong=i.GetGlobalItem("instr_"+e,""),this.ccyPairShort=i.GetGlobalItem("instr_basic_"+e,""),this.ccyPairOriginal=i.GetGlobalItem("instr_raw_"+e,""),this.baseSymbolName=this.ccyPairOriginal.split(/\//g)[0],this.otherSymbolName=this.ccyPairOriginal.split(/\//g)[1]}return window.$instrumentTranslationsManager=new function(){function o(e){return new r(e)}function a(e){var t="symboltooltip_",n=l.GetInstrument(e),r=n.contractMonthAndYear||"";return i.ValueIsEmpty(t+n.baseSymbolName+n.otherSymbolName)?n.baseSymbolName+"/"+n.otherSymbolName:i.GetGlobalItem(t+n.baseSymbolName+n.otherSymbolName)+function(e,t){if(!e)return"";var n=e.substr(-2),r=e.substr(-1),i=e.split(" ")[0],o={JAN:"F",FEB:"G",MAR:"H",APR:"J",MAY:"K",JUN:"M",JUL:"N",AUG:"Q",SEP:"U",OCT:"V",NOV:"X",DEC:"Z"}[i=i?i.slice(0,3).toUpperCase():i];return o||(o=i="-",s.onWarning("InstrumentTranslationsManager/buildContractMonth",String.format("Instrument {0} does not have a valid contract month: [{1}].",t,e))),String.format(" {0}{1} {4}({2}{3}){4}",i,n,o,r,cTextMarks.Ltr)}(r,e)}function t(e){return!n.IsRtlLanguage()||e&&e.isRtlText()?e:e=String.format("{1}{0}{1}",e,cTextMarks.Ltr)}return{GetTooltipByInstrumentId:a,GetTranslatedInstrumentById:o,Long:function(e){return t(o(e).ccyPairLong)},Short:function(e){return t(o(e).ccyPairShort)},Original:function(e){return o(e).ccyPairOriginal},GetFullTextLatinized:function(e){var t=o(e),n=t.baseSymbolName+t.otherSymbolName,r=a(e),i=l.GetInstrument(e);return latinizeString(t.ccyPairShort+" "+t.ccyPairLong+" "+n+" "+r+(i?" "+i.instrumentEnglishName:""))}}}}),define("FxNet/UILayer/Managers/InterWindowsCommunicator",["require","JSONHelper","dalCommon"],function(e){var l=e("JSONHelper"),u=e("dalCommon");return function(n,r){var i,o;function a(e){if(i&&o&&e.origin.replace(/\/$/,"")===i.replace(/\/$/,"")){var t=l.STR2JSON("InterWindowsCommunication/receiveMessage",e.data,eErrorSeverity.medium);isNullOrUndefined(t)||r&&(!t.id||t.id!==r)||(o.hasOwnProperty(t.msg)?o[t.msg](t.value):u.WriteInfoLog(t.msg,"[Not a function] Message object: "+s(t)+",\nEvent object:"+s(e)+",\nEvent origin:"+s(e.origin)+",\nEvent data:"+s(e.data)))}}function s(e){var t=e.toString()+"\n";for(var n in e)e.hasOwnProperty(n)&&(t+="\t"+n+"\n");return t}return{registerMessageHandler:function(e,t){!function(e,t){var n="";for(var r in t)t.hasOwnProperty(r)&&(n+="\t"+r+"\n");u.WriteInfoLog("RegisterHandler","Registered handler for source: "+e+"\nHandler members:\n"+n.slice(0,-1))}(e,t),i=e,o=t,n.addEventListener?n.addEventListener("message",a,!1):n.attachEvent("onmessage",a)},unregisterMessageHandler:function(){n.removeEventListener?n.removeEventListener("message",a):n.detachEvent("onmessage",a)},postMessage:function(e,t,n){(function(e,t){if(!e||!e.postMessage)return!1;var n=!1;try{e.location&&0<=e.location.href.indexOf(t)&&(n=!0)}catch(e){n=!0}return n})(e,n)&&e.postMessage(JSON.stringify(t),n)}}}});var PopupInNewWindowManager=function(){var e,n=null;systemInfo.isNative||(n=window.open((e=UrlResolver.combine(UrlResolver.getApplicationRelativePath(),"/Payments/Deposit/Spinner"),environmentData.isDesktop&&(e=location.protocol+"//"+location.hostname+e),e),"_system","resizable=1, height=850, width=800, scrollbars=yes"));var t=function(e){n&&!n.closed?setTimeout(function(){t(e)},1e3):e()};return{Navigate:function(e){var t="?actionUrl="+encodeURIComponent(e.ActionUrl)+"&postDataValue="+encodeURIComponent(JSON.stringify(e.PostDataArr))+"&hash="+e.Hash+"&accountNumber="+e.AccountNumber,n=UrlResolver.combine(UrlResolver.getApplicationRelativePath(),"/Payments/Deposit/RedirectToClearerPage",t);window.open(n,"_system")},Resize:function(e,t){n.resizeTo(e,t)},Close:function(){n&&(n.close(),n=null)},IsPopupOpen:function(){return n&&!n.closed},OnClose:t}};define("managers/PopupInAlertManager",["require","AlertsManager"],function(e){var i=e("AlertsManager");return function(){var n=emptyFn,r=AlertTypes.IframeAlert;return{Navigate:function(e){var t={iframeUrl:e.ActionUrl,alertType:r,onCloseCallback:n};i.UpdateAlert(r,e.Title,null,null,t),i.PopAlert(r)},Close:function(){var e=i.GetAlert(r);e&&e.hide(),n()},OnClose:function(e){n=e}}}}),define("PopUpManager",[],function(){return window.PopUpManager=new function(){return{OpenAsPopup:function(e,t){switch(e){case eViewTypes.vClientQuestionnaire:var n={title:t.title,modal:!0,draggable:!0,resizable:!1,width:950,persistent:!1,dialogClass:"fx-dialog"};extendType(n,t),isDefinedType(DialogViewModel)?DialogViewModel.openAsync(eAppEvents.cddStatusLoadedEvent,eDialog.ClientQuestionnaire,n,eViewTypes.vClientQuestionnaire):(AlertsManager.UpdateAlert(AlertTypes.PopupClientQuestionnaire,null,null,null),AlertsManager.PopAlert(AlertTypes.PopupClientQuestionnaire))}},ClosePopup:function(){isDefinedType(window.DialogViewModel)?window.DialogViewModel.close():AlertsManager.GetAlert(AlertTypes.PopupClientQuestionnaire).visible()&&AlertsManager.GetAlert(AlertTypes.PopupClientQuestionnaire).visible(!1)},IsPopupOpen:function(){return isDefinedType(DialogViewModel)?DialogViewModel.isOpen():AlertsManager.HasAlert()}}}}),define("PresetBuilder",["require","knockout","InitialDataManager","Dictionary"],function(e){var p=e("knockout"),f=e("Dictionary"),h=e("InitialDataManager");return{NewPreset:function(e,t){var n,r={},i=e.presets[t].id,o=e.presets[t].subCategory,a=function(e){for(var t in ePresetType)if(ePresetType.hasOwnProperty(t)&&ePresetType[t]===e.presetId)return t;return""}(r={presetId:i,instrumentType:e.instrumentType,subCategory:o,categoryNameKey:e.categoryName,presetOrder:e.presetOrder,isInitial:i==h.prop.initialScreen.screenId,ascOrderPresetIds:e.ascOrderPresetIds,descOrderPresetIds:e.descOrderPresetIds}),s=new ObservableHashTable("id"),l=new TDelegate,u=p.observable(!1),c=p.observable(!1),A=p.pureComputed(function(){return s.Values().filter(function(e){return!1===e.isFake}).length});function d(){c(!1),s.Clear()}return{Id:r.presetId,IdString:r.presetId.toString(),InstrumentType:parseInt(r.instrumentType),CategoryNameKey:r.categoryNameKey,IsReady:c,Order:(n=r,n.ascOrderPresetIds&&0<=n.ascOrderPresetIds.indexOf(n.presetId)?ePresetsOrder.Ascending:n.descOrderPresetIds&&0<=n.descOrderPresetIds.indexOf(n.presetId)?ePresetsOrder.Descending:ePresetsOrder.None),PresetOrder:r.presetOrder,subCategory:r.subCategory,Name:a,Label:f.GetItem(a),IsCustomScreen:r.presetId===ePresetType.PresetCustomized,isSelected:u,OnOrderUpdate:l,UpdateOrder:function(){var e=s.Values().filter(function(e){return!1===e.isFake}).map(function(e){return e.id});l.Invoke(e),p.postbox.publish("favorite-instruments-reorder-drop")},QuotesCollection:s,TemporaryQuotesCollection:[],Count:A,Update:function(){d(),u()&&(u(!1),u(!0))},AddRange:function(e){s.AddRange(e),c(!0)},Clear:d}}}}),define("PresetCategoryBuilder",["require","knockout","InstrumentsManager","Dictionary"],function(e){var d=e("knockout"),p=e("Dictionary"),f=e("InstrumentsManager");return{NewCategory:function(e,t){var n=e.length?e[0].CategoryNameKey:t,r=d.observable("").extend({notify:"always"}),i=null,o=p.GetItem(n),a=e;a.forEach(function(t){t.isSelected.subscribe(function(e){e&&(i=t)},t)});var s=d.pureComputed(function(){return!!a.find(function(e){return e.isSelected()})});function l(e,t){var n=e.Label,r=t.Label;return n.localeCompare(r)}function u(e,t){return e.subCategory.order-t.subCategory.order}function c(e){e.subCategory.sortAlphabetically&&e.presets.sort(l)}function A(e){return e.sort(u).forEach(c)}return{Key:n,SelectedPreset:r,LastSelectedPreset:i,Label:o,GetGroupedPresetsByColumns:function(){for(var e=[],t={},n=0;n<a.length;n++){for(var r=a[n],i=r.subCategory.columnId,o=t[r.subCategory.label];e.length<=i;)e.push([]);o||(o={subCategory:r.subCategory,presets:[]},t[r.subCategory.label]=o,e[i].push(o)),o.presets.push(r)}return e.forEach(A),e},Presets:a,isSelected:s,Select:function(){if(a.length){var e=a[0];0<a.length&&0===e.Count()&&"PresetMainTab"===e.CategoryNameKey&&0===f.GetPresetInstruments(e.Id).length&&(e=a[1]),r(i?i.Id:e.Id),d.postbox.publish("main-tab-click")}}}}}}),define("PresetCollectionBuilder",["require","PresetBuilder"],function(e){var s=e("PresetBuilder");return{NewCollection:function(e,t){var n=[];t=t||[];for(var r=0,i=e.length;r<i;r++){var o=e[r];for(var a in o.presets)o.presets.hasOwnProperty(a)&&t.contains(o.presets[a].id)&&n.push(s.NewPreset(o,a))}return n}}}),define("ProfileInstruments",[],function(){var o=ko.observable({}),t=new TDelegate;function e(){return o()}return{Init:function(e){o(e),o.subscribe(function(e){t.Invoke(e)})},OnUpdate:t,GetAll:e,GetSelected:function(){return e().selected},UpdateInstrumentAmount:function(e,t){var n=o(),r=!1;if(n.list){for(var i=0;i<n.list.length;i++)if(n.list[i].instrument==e){n.list[i].defaultAmount=t.toString(),r=!0;break}}else n.list=[];r||n.list.push({instrument:e,defaultAmount:t.toString()}),n.selected=e,o(n)}}}),define("RetentionManager",["require","knockout","environmentData","Customer","dalRetention","ViewsManager","StateObject!SessionSupervisor","Q"],function(e){var p=e("knockout"),f=e("environmentData"),h=e("Customer"),m=e("dalRetention"),g=e("ViewsManager"),v=e("StateObject!SessionSupervisor"),y=e("Q");return new function(){var t=new TDelegate,n=y.defer(),i=!1,o=function(){var e=argsToArray(arguments);t.Invoke.apply(null,e)},e=function(e){-1===e.indexOf("ServerError")&&!0!==containsHtmlTags(e)&&n.resolve(e)},a=function(e){r(),h.prop.isDemo||g.RedirectToForm(eForms.Deposit,{})},s=function(){r()},l=function(){r()},u=function(){r()},c=function(){r()},A=function(){r()},d=function(){void 0!==window.__walkthroughwidget&&window.__walkthroughwidget.play(2425)},r=function(){p.postbox.publish("reward-cta-clicked",{})};return{OnSmartBanner:t,SubscribeToInteractiveMessage:function(r){v.set("userLoggedIn",!1),v.subscribe("userLoggedIn",function(e){if(!i||!0===e){var t;window.JSON2=JSON,t=f.switchToPlatform?IMRequestIntervalModes.AccountSwitch:e?IMRequestIntervalModes.Login:IMRequestIntervalModes.InSession;var n={deposit:a,accept:s,walkthrough:d,privacypolicy:l,imClosedDeals:u,imOpenDeals:A,imNewDeal:c};InitAll(r,h.prop.interactiveMessagesUrl,h.prop.language,15e3,n,t,"false",o),InitAll(r,h.prop.interactiveMessagesUrl,h.prop.language,36e6,n,IMRequestIntervalModes.InSession,"true",o),i=!0}})},UpdateToken:function(){return m.GetToken(e)},GetCurrentToken:function(){return n.promise}}}});var SpinnerManager={isSpinnerVisible:ko.observable().subscribeTo(ePostboxTopic.SetSpinnerVisibility)};define("ViewsManager",["require","jquery","knockout","environmentData","Containers","HistoryManager","Customer","CustomerProfileManager","ViewsRouterManager","PermissionsModule","StateObject!ViewsManager"],function(e){var i=e("knockout"),o=e("jquery"),t=e("environmentData"),a=e("Containers"),s=e("HistoryManager"),l=e("Customer"),n=e("CustomerProfileManager"),u=e("ViewsRouterManager"),c=e("PermissionsModule"),A=e("StateObject!ViewsManager"),d={},p=new v,r=new TDelegate,f=i.observable(),h=i.pureComputed(function(){for(var e in eForms)if(eForms.hasOwnProperty(e)&&eForms[e]===f())return e.toLowerCase();return""}),m=new TDeepLinkHandler(t);function g(e){this.state=i.observable(e),this.previousState=i.observable(),this.visible=i.computed(function(){return this.state()!==eViewState.Stop},this),this.args={}}function v(){this.viewsList={},this.isReset=i.observable(!1).extend({notify:"always"}),this.args={},this.historicalData=!1}v.prototype.SetViews=function(e){for(var t in eViewTypes)eViewTypes.hasOwnProperty(t)&&(e&&e.contains(eViewTypes[t])?this.viewsList[eViewTypes[t]]=new g(eViewState.Start):this.viewsList[eViewTypes[t]]=new g(eViewState.Stop))},v.prototype.Reset=function(){this.isReset(!0)},v.prototype.IsHistoricalData=function(e){return isBooleanType(e)&&(this.historicalData=e),this.historicalData};var y=function(){for(var e in eForms)eForms.hasOwnProperty(e)&&(d[eForms[e]]=new v,d[eForms[e]].SetViews(a.Forms.Container[eForms[e]].mappedViews));p.SetViews()},w=function(){var e=[];for(var t in eViewTypes)eViewTypes.hasOwnProperty(t)&&S(eViewTypes[t])!==eViewState.Stop&&e.push(t);return e},b=function(e,t){if(c.CheckFormPermissions(e,!0,t)){D(e),o(document).trigger(eAppEvents.formChangeEvent),i.postbox.publish("active-view",e),f(e),p.type=e,p.args=t,p.IsHistoricalData(a.Forms.Container[e].exportSupport&&a.Forms.Container[e].exportSupport.historicalData||!1);var n=d[e].viewsList;for(var r in n)n.hasOwnProperty(r)&&(n[r].state()!==eViewState.Start&&(p.viewsList[r].state()===n[r].state()||a.IndependentViews&&a.IndependentViews.contains(r))||(p.viewsList[r].args=t,p.viewsList[r].previousState(p.viewsList[r].state()),p.viewsList[r].state(n[r].state())));p.Reset(),A.update("ActiveViews",w())}},C=function(e){return d[e]},S=function(e){if(e)return p.viewsList[e].state()},E=function(e,t,n){if(c.CheckFormPermissions(e,!0,t)){var r=u.GetFormToRedirect(e,t);setTimeout(function(e,t,n,r){e.PushViewState(t,n,r)},0,s,r.viewType,r.viewArgs,n)}},D=function(e){var t=e==eForms.Deals?e:l.prop.mainPage;n.DefaultPage(t)},B=function(e){return!1===l.prop.isDemo&&e===eAccountMode.Demo},T=function(e,t,n){return!0===l.prop.isDemo&&(t===eAccountMode.Real||e===eForms.Deposit||e===eForms.Withdrawal||e===eForms.UploadDocuments||e===eForms.ChangePassword||e===eForms.ClientQuestionnaire||e===eForms.NotificationsSettings||e===eForms.Settings&&(n===eViewTypes.vChangePassword||n===eViewTypes.vNotificationsSettings))},I=function(t,e,n){if(T(t,null,e)){if(!c.CheckFormPermissions(t,!0,e))return;var r=Object.keys(eForms).find(function(e){return eForms[e]===t});window.location.replace("Account/Redirect/"+r+"?viewArgs="+e)}else{if((i=e)&&i.hasOwnProperty("step")&&!isEmptyValue(i.step))return function(e,t,n){if(c.CheckFormPermissions(e,!0,t)){var r=u.GetFormToRedirect(e,t);setTimeout(function(e,t,n,r){e.PushWizardState(t,n.step,r)},0,s,r.viewType,r.viewArgs,n)}}(t,e,n);var i;E(t,e,n)}};return{Init:function(e){a.Init(e),y(),s.Init(),s.OnStateChanged.Add(function(e){switch(e.type){case eHistoryStateType.View:b(e.view,e.viewArgs);break;case eHistoryStateType.Invalid:E(l.prop.startUpForm,{},function(){c.CheckPermissions("commonLogout")&&(AlertsManager.UpdateAlert(AlertTypes.ExitAlert),AlertsManager.PopAlert(AlertTypes.ExitAlert))});break;case eHistoryStateType.CloseAlert:var t=AlertsManager.GetAlert(e.popupId);t&&t.visible()&&t.hide()}}),AlertsManager.OnShowAlert.Add(function(t,e){var n=e.visible.subscribe(function(e){e||(n.dispose(),s.HasAlert(t)&&s.Back())});e.properties.backFormTarget&&s.ReplaceViewState(e.properties.backFormTarget),s.PushPopupState(ePopupType.Alert,t)}),f.subscribe(function(e){r.Invoke(e)}),m.Init()},Start:function(e){var t=C(e).args||{},n=m.Handle(e,t);n.isDeepLink?(n.startUpForm!=e&&s.PushStartUpState(e,t),s.Start(n.startUpForm,n.args,function(){n.processActions()})):s.Start(e,t),i.postbox.publish("main-page-load")},GetFormProperties:function(e){return e=e||f(),a.Forms.GetItem(e)||{}},GetActiveFormViewProperties:function(e){return p.viewsList[e]},SwitchViewVisible:E,RedirectToForm:I,RedirectToURL:function(e){var t=m.InternalRedirect(e),n=t.startUpForm,r=t.args||{};if(t.isDeepLink){if(T(n,t.mode)||B(t.mode))return void window.location.replace(e);I(n,r,function(){t.processActions()})}else I(l.prop.mainPage,{})},GetViewArgs:function(e){var t=p.viewsList[e];if(t)return t.args||{}},GetViewArgsByKeyName:function(e,t,n){return p.viewsList[e].args&&!isEmptyValue(p.viewsList[e].args[t])?p.viewsList[e].args[t]:n},Activeform:function(){return p},ActiveFormType:f,ActiveFormName:h,ChangeViewState:function(e,t,n){e&&(p.viewsList[e].previousState(p.viewsList[e].state()),t==eViewState.Stop?p.viewsList[e].args="":p.viewsList[e].args=n,p.viewsList[e].previousState()===t&&p.viewsList[e].state()===eViewState.Update&&p.viewsList[e].state(-1),p.viewsList[e].state(t)),A.set("ActiveViews",w())},GetViewState:S,Refresh:function(){for(var e in p.viewsList)p.viewsList.hasOwnProperty(e)&&p.viewsList[e].visible()&&p.viewsList[e].state(eViewState.Refresh)},Reload:function(e){isDefinedType(e)||(e=p.type),window.location=window.location.pathname+"?view="+e},History:{GoBack:function(e){s.Back(e)},GoForward:function(e){s.Forward(e)}},OnActiveFormChanged:r}}),define("ViewsRouterManager",["require","ComplianceBeforeDeposit"],function(e){var r=e("ComplianceBeforeDeposit");return{GetFormToRedirect:function(e,t){var n;switch(e){case eForms.Deposit:if(r.showMifidPopupBeforeDeposit()){n=eForms.ClientQuestionnaire,t={from:{form:eForms.Deposit,viewArgs:t}};break}if(r.isMoveToCddFullNoPopupBeforeDeposit()){n=eForms.ClientQuestionnaire,t={from:{form:eForms.Deposit,viewArgs:t}};break}n=eForms.Deposit;break;default:n=e}return{viewType:n,viewArgs:t}}}}),define("AccountBalanceViewModel",["require","ClientStateHolderManager","KoComponentViewModel"],function(e){var i=e("ClientStateHolderManager");return function(){var e,t={accountBalance:ko.observable()},n=function(){i.OnChange.Add(r),e=function(){i.OnChange.Remove(r)}},r=function(e){t.accountBalance(e.accountBalance)};return{Init:function(){n()},Stop:function(){e&&e()},ViewProperties:t}}}),define("ViewModelsManager",["require","VmHelpers","initConfiguration","ViewsManager","QuotesViewModel","QuotesPresetViewModel","PortfolioStaticManager","PermissionsModule","BaseOrder","DealsManager","ViewModelBase","FxNet/LogicLayer/Deal/DealPermissions","FxNet/UILayer/ViewModels/ClosedDealDetailsViewModel","AccountBalanceViewModel"],function(e){var n=e("initConfiguration"),t=e("ViewsManager"),r=e("VmHelpers"),i=e("QuotesViewModel"),o=e("QuotesPresetViewModel"),a=e("PortfolioStaticManager"),s=e("PermissionsModule"),l=e("BaseOrder"),u=e("DealsManager"),c=e("ViewModelBase"),A=e("FxNet/LogicLayer/Deal/DealPermissions"),d=e("FxNet/UILayer/ViewModels/ClosedDealDetailsViewModel"),p=e("AccountBalanceViewModel");function f(){this.VmHelpers=r,this.VManager=t,this.VmQuotes=new i,this.VmQuotesPreset=new o(c),this.VmMenu=new MenuViewModel(s),this.VmBalance=new BalanceViewModel(c,u),this.VmNetExposure=new NetExposureViewModel,this.VmClosedDealDetails=new d(A),this.VmPendingWithdrawals=new PendingWithdrawalViewModel(c,a,new l),this.VmAccountMarket=new AccountMarketViewModel,this.VmMarginStatus=new MarginStatusViewModel(c),this.VmAccountBalance=new p}return f.prototype.Init=function(e,t){this.VManager.Init(e),this.VmQuotes.Init(n.FavoriteInstrumentsConfiguration),this.VmQuotesPreset.Init(n.QuotesPresetConfiguration),this.VmBalance.Init(n.BalanceConfiguration),this.VmNetExposure.Init(),this.VmMenu.Init(),this.VmClosedDealDetails.Init(),this.VmPendingWithdrawals.Init(n.PendingWithdrawalConfiguration),this.VmAccountMarket.Init(),this.VmMarginStatus.Init(),this.VManager.Start(t),this.VmAccountBalance.Init()},window.$viewModelsManager=new f}),define("BuilderForInBetweenQuote",["require","knockout","Q","InstrumentsManager","RegistrationManager","QuotesManager","FxNet/DataAccessLayer/dalConversion"],function(e){var s=e("knockout"),l=e("Q"),u=e("InstrumentsManager"),c=e("RegistrationManager"),A=e("QuotesManager"),d=e("FxNet/DataAccessLayer/dalConversion");return{GetInBetweenQuote:function(e,t){if(e==t)return l({ask:s.observable(1),bid:s.observable(1),instrumentFactor:1,isOppositeInstrumentFound:!1});var n=u.GetInstrumentPropUsedForConversion(e,t);return isNullOrUndefined(n)?d.getInBetweenQuote(e,t).then(function(e){var t=e.result,n=null;return t&&(n={ask:s.observable(t.ask),bid:s.observable(t.bid),instrumentFactor:t.instrumentFactor,isOppositeInstrumentFound:t.isOppositeInstrumentFound}),n}):(r=n.id,i=l.defer(),o={ask:s.observable(),bid:s.observable()},a=function(){var e=A.Quotes.GetItem(r);return!!e&&(o.bid(e.bid),o.ask(e.ask),i.resolve(o),!0)},A.OnChange.Add(a),!1===a()&&c.Update(eRegistrationListName.InBetweenQuote,r),i.promise).then(function(e){return{ask:e.ask,bid:e.bid,instrumentFactor:n.factor,isOppositeInstrumentFound:n.isOppositeInstrumentFound}});var r,i,o,a}}}),define("waitEnvironmentData",["Preloader"],function(i){return{load:function(e,t,n,r){r&&r.isBuild?n(null):function e(t){void 0!==window.environmentData&&window.environmentData.isReady?t(window.environmentData):i.SetEnvironmentDataCallback(e.bind(this,t))}(n)}}}),define("environmentData",["waitEnvironmentData!"],function(e){return e}),define("FavoriteInstrumentsManager",["require","InstrumentsManager","dalInstruments","initConfiguration"],function(e){var s=e("InstrumentsManager"),n=e("dalInstruments"),a=e("initConfiguration");function l(){return s.GetCustomizedUiOrder().map(function(e){return e[eQuotesUIOrder.InstrumentID]})}function u(e){return 0<=l().indexOf(e)}function c(e,t){n.ChangeUIOrder(e,t)}function A(e,t){e=e||[],s.SetCustomizedUiOrder(e,t)}return{GetFavoriteInstrumentIds:l,AddFavoriteInstrument:function(e,t){var n=s.GetCustomizedUiOrder();if(u(e))isFunctionType(t)&&t('{"status": 1 }');else{var r=l();if(r.length>=a.FavoriteInstrumentsConfiguration.favoriteInstrumentsLimit){var i=String.format(Dictionary.GetItem("FavoritesList_MaximumLimitReached"),a.FavoriteInstrumentsConfiguration.favoriteInstrumentsLimit);return AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,null,i,""),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert),void(isFunctionType(t)&&t('{"status": 0 }'))}r.unshift(e);var o=s.GetInstrument(e);o?(A(n=[[e,o.defaultDealSize]].concat(n)),c(r,t)):isFunctionType(t)&&t('{"status": 0 }')}},RemoveFavoriteInstrument:function(t,e){if(u(t)){var n=l().filter(function(e){return e!==t});A(s.GetCustomizedUiOrder().filter(function(e){return e[eQuotesUIOrder.InstrumentID]!=t})),c(n,e)}else isFunctionType(e)&&e('{"status": 1 }')},IsFavoriteInstrument:u,ChangeUIOrder:function(e,t,n){if(e){for(var r=[],i=0;i<e.length;i++){var o=e[i],a=s.GetInstrument(o);r.push([o,a.defaultDealSize])}A(r,t),c(e,n)}else isFunctionType(n)&&n('{"status": 1 }')}}}),define("InstrumentsSearchModule",["require","knockout"],function(e){var t=e("knockout"),n={bx10000000:parseInt("10000000",2),bx01000000:parseInt("01000000",2),bx00100000:parseInt("00100000",2),bx00010000:parseInt("00010000",2),bx00001000:parseInt("00001000",2),bx00000100:parseInt("00000100",2),bx00000010:parseInt("00000010",2),bx00000001:parseInt("00000001",2)},l=[{field:"instrumentName",startWithScore:n.bx10000000,middleOfScore:n.bx00001000},{field:"symbolName",startWithScore:n.bx01000000,middleOfScore:n.bx00000100},{field:"fullName",startWithScore:n.bx00100000,middleOfScore:n.bx00000010},{field:"fullText",startWithScore:n.bx00010000,middleOfScore:n.bx00000001}],r=/[-[\]{}()*+?.,\\/^$|#\s]/g;return function(e){var o=e||t.observableArray([]),i="",a=t.observableArray();function s(e,t){var n=latinizeString(t).replace(r,"\\$&"),i=new RegExp("("+n+")","im");return e.map(function(n){var t,e=(t=n,o().findIndex(function(e){return e.id===t.id})),r=0;return l.forEach(function(e){if(n[e.field]){var t=latinizeString(n[e.field]).match(i);isNullOrUndefined(t)||(0===t.index&&(r=e.startWithScore|r),0<t.index&&(r=e.middleOfScore|r))}}),{idx:e,ccyOrder:n.ccyOrder,score:r}})}function n(e,t){var n=s(e,t);(n=n.filter(function(e){return e.score&&0<e.score})).sort(function(e,t){var n=t.score-e.score;return 0===n&&(n=e.ccyOrder-t.ccyOrder),n});var r=n.map(function(e){return o()[e.idx]});return a(r),i=t,r}return{dispose:function(){o=null,a.removeAll(),i=""},search:function(e){return n(o(),e)},typingSearch:function(e){return e.term&&(e=e.term),t=e,""===i||0!==t.toLowerCase().indexOf(i.toLowerCase())||a().length<=0?n(o(),e):n(a(),e);var t},searchResult:a}}}),define("KoComponentLoader",["require","knockout","Q"],function(i){var o=i("knockout"),t=i("Q");return new function(){var r={};return{Register:function(){var e={loadComponent:function(e,t,n){r[e]=!1,isArrayType(t.deps)&&t.deps.length?i(t.deps,function(){o.components.defaultLoader.loadComponent(e,t,function(){r[e]=!0,n.apply(null,argsToArray(arguments))})}):o.components.defaultLoader.loadComponent(e,t,function(){r[e]=!0,n.apply(null,argsToArray(arguments))})}};o.components.loaders.unshift(e)},Unregister:function(){},Preload:function(e){return t.Promise(function(t,n){o.components.get(e,function(e){e?t(e):n(new Error(String.format("'{0}' component could not be loaded.")))})})},Exists:function(e){return o.components.isRegistered(e)},Components:r}}}),define("LoadDictionaryContent",["require","Dictionary","UrlResolver","JSONHelper"],function(e){var a=e("Dictionary"),s=e("UrlResolver"),l=e("JSONHelper");return{load:function(n,e,r,t){if(t&&t.isBuild)r(null);else{var i="LoadDictionaryContent!"+n,o=s.getContentPath(n);(new TAjaxer).get(i,o,"",function(e){var t=l.STR2JSON(i,e)||{};a.AddResource(n,t),r(t)},null,null,null,null,!1)}}}}),define("LoadFromPouchDB",["require","ErrorManager","FxNet/DataAccessLayer/dalPouchDB"],function(e){var i=e("ErrorManager"),o=e("FxNet/DataAccessLayer/dalPouchDB");return{load:function(e,t,n,r){r&&r.isBuild||Browser.isIeEdgePrivateMode()||Browser.isSafariMobile()?n(null):o.Get(e).then(function(e){null!==n&&n(e)}).catch(function(e){i.onError("dalPouchDB/get","exception get: "+e.message,eErrorSeverity.low),null!==n&&n(null)}).done()}}}),define("fxnet/uilayer/Modules/PermissionsModule",["require","knockout","SystemInfo","SeamlessPermissionsModule"],function(e){e("knockout");var t=e("SystemInfo"),r=e("SeamlessPermissionsModule"),n=["commonLogout","uploadDocuments","chat","deposit","tutorials","apiIM","gtm","customerProfile","changePassword","notificationsSettings"];function i(){return t.get("isRestrictedUser",!1)}return window.$permissionsModule={Init:function(){},CheckPermissions:function(e){return!i()||-1===n.indexOf(e)},CheckFormPermissions:function(e,t,n){return r.IsFormRestricted(e)?(t&&r.PopAlert(e,null,n),!1):(r.IsFormVisibleRestricted(e)&&r.PopAlert(e,null,n),!0)},CheckActionAllowed:function(e,t,n){return!r.IsActionRestricted(e)||(t&&r.PopAlert(null,e,n),!1)},IsRestrictedUser:i,RegisterLeadType:function(){r.RegisterLeadType()},IsTradingUser:function(){return i()&&t.get("hasTradingPermission",!1)}}}),define("PresetsManager",["require","Q","Customer","ErrorManager","Logger","dalInstruments","UrlResolver","StatesManager"],function(e){var t=e("Q"),n=e("Customer"),r=e("ErrorManager"),i=e("Logger"),o=e("dalInstruments"),a=e("StatesManager"),s=e("UrlResolver"),l=3e5,u=t.defer(),c=!1,A=[],d=u.promise,p=new TDelegate,f=r.createErrorType("QuotesPresetsError",function(){i.log("TDALClientState",this.getFullExceptionMessage(),function(){})});function h(){var e,t;(t=n.prop,o.GetPresets({folderId:(e=a.States.Folder,isNullOrUndefined(e)||isNullOrUndefined(e())||-1===e()?s.getFolderForInstruments():e()),brokerId:t.brokerID,futuresPermission:t.futureStatus,stocksPermission:t.shareStatus})).then(g).catch(m).finally(v).done()}function m(e){throw new f("PresetsManager: Error on load/parse presets: "+e.message)}function g(e){if(!e)throw new f("ServerError: Presets could not be loaded");var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=parseInt(n);if(isNaN(r))continue;t.push(r)}!function(e,t){y(t),p.Invoke(e,t),u.resolve(this)}(e,t)}function v(){setTimeout(h,l)}function y(e){A=A.concatUnique(e)}return{HasData:d,GetDefaultCFDScreenId:function(){return e=this.GetAvailableScreens(),0<=e.indexOf(ePresetType.PresetMostPopular)?ePresetType.PresetMostPopular:0<=e.indexOf(ePresetType.PresetMostPopularWithoutShares)?ePresetType.PresetMostPopularWithoutShares:0<=e.indexOf(ePresetType.PresetMostPopularWithoutFutures)?ePresetType.PresetMostPopularWithoutFutures:0<=e.indexOf(ePresetType.PresetMostPopularWithoutFuturesWithoutShares)?ePresetType.PresetMostPopularWithoutFuturesWithoutShares:0<=e.indexOf(ePresetType.PresetMostPopularCurrencies)?ePresetType.PresetMostPopularCurrencies:-1;var e},SetAvailableScreens:y,GetAvailableScreens:function(){return A||[]},Start:function(){c||h(),c=!0},OnPresetsUpdated:p}}),define("knockout",[],function(){return window.ko}),define("postbox",[],function(){return window.ko.postbox}),define("pouchdb",[],function(){return window.PouchDB}),define("jquery",[],function(){return window.jQuery}),define("jquery-ui",["jquery"],function(e){return e}),define("history",function(){return window.History}),define("Q",[],function(){return window.Q}),define("Preloader",[],function(){return window.Preloader}),define("CookieHandler",[],function(){return window.CookieHandler}),define("HashTable",[],function(){return window.THashTable}),define("Logger",[],function(){return window.Logger}),define("UrlResolver",[],function(){return window.UrlResolver}),define("CreditCardManager",[],function(){return new TCreditCardManager}),define("TDepositCurrency",[],function(){return window.TDepositCurrency}),define("TCreditCardView",[],function(){return window.TCreditCardView}),define("LimitRangesCalculator",[],function(){return window.LimitRangesCalculator}),define("LimitValuesCalculator",[],function(){return window.LimitValuesCalculator}),define("AmountConverter",[],function(){return window.AmountConverter}),define("Transliterator",[],function(){return window.Transliterator}),define("PerformanceDataCollector",function(){return window.PerformanceDataCollector}),define("LocationWrapper",[],function(){return window.LocationWrapper}),define("Dictionary",[],function(){return window.Dictionary}),define("AmlPopupManager",[],function(){return window.AmlPopupManager}),define("initConfiguration",[],function(){return window.InitConfiguration||{}}),define("applicationConfiguration",["initConfiguration"],function(e){return e.ApplicationConfiguration}),define("GTMConfiguration",["initConfiguration"],function(e){return e.GTMConfiguration}),define("editClosingLimitSettings",["initConfiguration"],function(e){return e.EditClosingLimitConfiguration}),define("closeDealSettings",["initConfiguration"],function(e){return e.CloseDealSettingsConfiguration}),define("extendedCloseDealSettings",["initConfiguration"],function(e){return e.ExtendedCloseDealSettingsConfiguration}),define("editLimitSettings",["initConfiguration"],function(e){return e.EditLimitSettingsConfiguration}),define("defaultChartConfiguration",["initConfiguration"],function(e){return e.DefaultChartConfiguration}),define("dealTabsConfiguration",["initConfiguration"],function(e){return e.DealTabsConfiguration}),define("economicCalendarConfig",["initConfiguration"],function(e){return e.EconomicCalendarConfiguration}),define("sentimentsConfig",["initConfiguration"],function(e){return e.MarketInfoConfiguration}),define("signalsConfig",["initConfiguration"],function(e){return e.SignalsConfiguration}),define("newLimitSettings",["initConfiguration"],function(e){return e.NewLimitConfiguration}),define("newDealSettings",["initConfiguration"],function(e){return e.NewDealConfiguration||{}}),define("openDealsGridSettings",["initConfiguration"],function(e){return e.OpenDealsConfiguration||{}}),define("closedDealsGridSettings",["initConfiguration"],function(e){return e.ClosedDealsConfiguration||{}}),define("favoriteInstrumentsSettings",["initConfiguration"],function(e){return e.FavoriteInstrumentsConfiguration}),define("advinionChartSettings",["initConfiguration"],function(e){return e.AdvinionChartConfiguration}),define("ActiveLimitsConfiguration",["initConfiguration"],function(e){return e.ActiveLimitsConfiguration}),define("contractRolloverSettings",["initConfiguration"],function(e){return e.ContractRolloverConfiguration}),define("walletSettings",["initConfiguration"],function(e){return e.WalletConfiguration}),define("thankYouConfiguration",["initConfiguration"],function(e){return e.ThankYouConfiguration}),define("marketInfoSectionsConfiguration",["initConfiguration"],function(e){return e.MarketInfoSectionsConfiguration}),define("depositConfirmationConfiguration",["initConfiguration"],function(e){return e.DepositConfirmationConfiguration}),define("DealAmountPrefixKey",["newDealSettings"],function(e){return e.dealAmountPrefixKey}),define("LastWithdrawalRequest",[],function(){return window.LastWithdrawalRequest}),define("RevealPassword",[],function(){return window.RevealPassword}),define("dalInitialData",[],function(){return new TDALInitialData}),define("dalOrders",[],function(){return new TDALOrder}),define("dalCustomer",[],function(){return new TDALCustomer}),define("dalDeposit",[],function(){return new TDALDeposit}),define("dalTradingSignals",[],function(){return new TDALTradingSignals}),define("dalInstruments",[],function(){return new TDALInstruments}),define("dalDemoAccount",[],function(){return new TDALDemoAccount}),define("dalAccountingActions",[],function(){return new TDALAccountingActions}),define("dalRetention",[],function(){return new TDALRetention}),define("dalNotificationData",[],function(){return new TDALNotificationData}),define("dalClientState",[],function(){return new TDALClientState}),define("dalDemoAccount",[],function(){return new TDALDemoAccount}),define("dalClosedDeals",[],function(){return new TDALClosedDeals}),define("dalMarketState",[],function(){return new TDALMarketState}),define("dalWithdrawal",[],function(){return new TDALWithdrawal}),define("OneSignalSDK",["Scripts/Vendor/OneSignal/OneSignalSDK.js"],function(){return window.OneSignal=window.OneSignal||[]}),define("QuotesViewModel",["ViewModelBase","InstrumentTranslationsManager","FavoriteInstrumentsManager"],function(){return QuotesViewModel}),define("mock-jquery-ui-datepicker",["jquery"],function(e){return e}),define("SignaturePad",[],function(){return window.SignaturePad}),define("StateObject",[],function(){function a(e){this._data=[],this._keys=[],this._name=e,this._currentListeners={},this._nextListeners={}}a.prototype.containsKey=function(e){return 0<=this._keys.indexOf(e)},a.prototype.set=function(e,t){var n=this._keys.indexOf(e);return-1!==n&&n<this._data.length?this.get(e):(this._keys.push(e),n=this._data.push(t)-1,this._nextListeners[e]=this._currentListeners[e]=[],this._data[n])},a.prototype.update=function(e,t){var n=this._keys.indexOf(e),r=this._currentListeners[e]=this._nextListeners[e];if(r)for(var i=0,o=r.length;i<o;i++)(0,r[i])(t);return-1!==n&&n<this._data.length?(this._data[n]=t,this._data[n]):this.set(e,t)},a.prototype.get=function(e){var t=this._keys.indexOf(e);return-1!==t&&t<this._data.length?this._data[t]:null},a.prototype.unset=function(e){var t=this._keys.indexOf(e);-1!==t&&t<this._data.length&&(this._keys.splice(t,1),this._data.splice(t,1))},a.prototype.getAll=function(){for(var e={},t=0;t<this._keys.length;t++)e[this._keys[t]]=this._data[t];return e},a.prototype.subscribe=function(e,t){if(-1===this._keys.indexOf(e)&&this.set(e,null),"function"!=typeof t)throw new ReferenceError("Expected listener to be a function.");return this._nextListeners[e]===this._currentListeners[e]&&(this._nextListeners[e]=this._currentListeners[e].slice()),this._nextListeners[e].push(t),function(e,t){this._nextListeners[e]===this._currentListeners[e]&&isArrayType(this._currentListeners[e])&&(this._nextListeners[e]=this._currentListeners[e].slice());if(isArrayType(this._nextListeners[e])){var n=this._nextListeners[e].indexOf(t);this._nextListeners[e].splice(n,1)}}.bind(this,e,t)},a.prototype.clear=function(){this._data=[],this._keys=[],this._currentListeners={},this._nextListeners={}};var s=new THashTable;return{load:function(e,t,n,r){if(r&&r.isBuild)n(null);else{var i,o=e.toLowerCase();s.HasItem(o)||(i=new a(e),s.SetItem(o,i)),n(s.GetItem(o))}}}}),define("SystemInfo",[],function(){return window.systemInfo=window.systemInfo||{},{save:function e(t,n){if(isStringType(t)&&0<t.length&&isDefinedType(n))if(Object.keys(window.systemInfo).length<1){var r={};r[t]=n,e(r)}else window.systemInfo[t]=n;else isObjectType(t)&&(window.systemInfo=t)},get:function(e,t){return 0<Object.keys(window.systemInfo).length&&void 0!==window.systemInfo[e]?window.systemInfo[e]:t}}}),define("GridSelectionModule",["require","knockout"],function(e){var i=e("knockout");return{apply:function(e,n,r){e.HasSelections=i.computed(function(){return null!==i.utils.arrayFirst(n(),function(e){return 1==e.isChecked()})}),e.CheckAll=i.computed({read:function(){var e;return e=r?n().filter(r):n(),null===i.utils.arrayFirst(e,function(e){return!1===e.isChecked()})&&0<e.length},write:function(t){i.utils.arrayForEach(n(),function(e){!r||r(e)?e.isChecked(t):e.isChecked(!1)})}}),e.CheckedItems=i.computed(function(){return i.utils.arrayFilter(n(),function(e){return!0===e.isChecked()})}),e.IsSelectAllVisible=i.computed(function(){return!e.CheckAll()||0===n().length}),e.IsProcessing=i.observable(!1)}}}),define("fxnet/uilayer/Modules/HtmlToCanvas",[],function(){return{convert:window.html2canvas}}),define("fxnet/uilayer/Modules/DomHelper",[],function(){return{NodeExists:function(e,t){if(!isNullOrUndefined(t.idList)&&t.idList.contains(e.id))return!0;if(!isNullOrUndefined(t.tagList)&&Object.keys(t.tagList).contains(e.tagName)){var n=t.tagList[e.tagName];if(isNullOrUndefined(n)||function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=e[n[r]];if(i&&t[n[r]].contains(i))return!0}return!1}(e,n))return!0}return!1}}}),define("fxnet/uilayer/Modules/WithdrawalCommon",["require","knockout","initConfiguration","ViewModelsManager","SymbolsManager"],function(e){var n=e("knockout"),t=e("initConfiguration"),r=e("ViewModelsManager"),i=e("SymbolsManager");return new function(){var e=t.WithdrawalConfiguration;return{getSymbolIdOrDefault:function(t,e){return 0<e.length?null!==n.utils.arrayFirst(e,function(e){return e.SymbolID===t})?t:e[0].SymbolID:null},getCurrenciesFromWrapper:function(e){return n.utils.arrayMap(e,function(e){return{SymbolID:e.Value,SymbolName:i.GetTranslatedSymbolById(e.Value)}})},goToDefaultPage:function(){r.VManager.SwitchViewVisible(e.stepLoadFailRedirectView,{})}}}}),define("fxnet/Devices/Mobile/Modules/PostLoginAlertController",["require","knockout","dalCommon","AlertsManager","StatesManager","Customer","ViewsManager","Dictionary","environmentData","StateObject!PostLoginAlerts"],function(e){var c=e("knockout"),A=e("dalCommon"),d=e("AlertsManager"),p=e("StatesManager"),f=e("Customer"),h=e("ViewsManager"),m=e("Dictionary"),g=e("environmentData"),v=e("StateObject!PostLoginAlerts"),y=[];return new function(){var e,t={},n=c.observable(0),r=0,i=1,o=0,a=function(){p.States.ExposureAlert.subscribe(function(e){if(e==eCSFlagStates.Active){var t=d.GetAlert(PostClientStatesLoginsAlerts.ExposureAlert);d.UpdateAlert(PostClientStatesLoginsAlerts.ExposureAlert),t.popCounter(t.popCounter()+1),t.popCounter()<2&&d.PopAlert(PostClientStatesLoginsAlerts.ExposureAlert)}}),p.States.ExposureCoverageAlert.subscribe(function(e){if(e==eCSFlagStates.Active){var t=d.GetAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert);d.UpdateAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert),t.popCounter(t.popCounter()+1),t.popCounter()<2&&d.PopAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert)}}),p.States.MarketState.subscribe(function(e){e==eCSFlagStates.NotActive&&(d.UpdateAlert(PostClientStatesLoginsAlerts.MarketState),d.PopAlert(PostClientStatesLoginsAlerts.MarketState))}),p.States.SystemMode.subscribe(function(e){if(!f.prop.isQA)switch(e){case 2:d.UpdateAlert(PostClientStatesLoginsAlerts.SystemModeApplicationClosing),d.PopAlert(PostClientStatesLoginsAlerts.SystemModeApplicationClosing);break;case 3:d.UpdateAlert(PostClientStatesLoginsAlerts.SystemMode),d.PopAlert(PostClientStatesLoginsAlerts.SystemMode)}})},s=function(){p.States.IsDemo.subscribe(function(e){g.switchToPlatform===ePlatformSwitch.Demo&&e==i&&(d.UpdateAlert(PostPortfoliosLoginsAlerts.IsDemo),d.PopAlert(PostPortfoliosLoginsAlerts.IsDemo))}),p.States.IsActive.subscribe(function(){g.switchToPlatform===ePlatformSwitch.Real&&f.prop.hasActiveDemo&&(d.UpdateAlert(PostPortfoliosLoginsAlerts.IsReal),d.PopAlert(PostPortfoliosLoginsAlerts.IsReal))}),t.displayAmlAlert.subscribe(function(e){!0===e&&h.SwitchViewVisible(eForms.Aml,{})}),t.displayCddKycAlert.subscribe(function(e){!0===e&&h.SwitchViewVisible(eForms.ClientQuestionnaire,{})})},l=function(){p.States.Forbidden.subscribe(function(){f.isAuthenticated()&&(d.UpdateAlert(AlertTypes.ServerResponseAlert,m.GetItem("GenericAlert"),m.GetItem("Forbidden"),null),d.PopAlert(AlertTypes.ServerResponseAlert))}),p.States.ServerErrorStatus.subscribe(function(e){if(e==eErrorSeverity.critical||f.isAuthenticated())switch(e){case eErrorSeverity.critical:A.Logout(eLoginLogoutReason.mobile_postLoginAlertController_serverError);break;case eErrorSeverity.high:d.UpdateAlert(AlertTypes.SessionEndedAlert,m.GetItem("sessionEndedLogoutAlertTitle"),m.GetItem("sessionEndedLogout"),{onCloseAction:function(){A.Logout(eLoginLogoutReason.alert_exitApp)}}),d.PopAlert(AlertTypes.SessionEndedAlert);break;case eErrorSeverity.medium:d.UpdateAlert(AlertTypes.SessionEndedAlert,m.GetItem("sessionEndedAlertTitle"),m.GetItem("sessionEnded"),null),d.PopAlert(AlertTypes.SessionEndedAlert)}})},u=function(){t.displayCddKycAlert=c.computed(function(){return(!0===p.States.IsCddStatusNotComplete()||!0===p.States.IsKycStatusRequired()||!0===p.States.IsKycReviewStatusRequired())&&n()===o&&!0===p.States.IsActiveButNotSinceTradingBonus()},e),t.displayActiveAlert=c.computed(function(){return p.States.IsActive()==r},e),t.displayAmlAlert=c.computed(function(){return 1==p.States.IsAmlRestricted()&&0==p.States.IsCddStatusNotComplete()&&1==p.States.IsActiveButNotSinceTradingBonus()&&n()==o},e)};return{Init:function(){e=this,u(),a(),s(),l(),y.push(v.subscribe("SetAlertsBehaviorMode",function(e){n(e)}))},dispose:function(){y.forEach(function(e){e()})}}}}),define("fxnet/uilayer/viewmodels/SeamlessPermissionsBase",["require","Customer","Dictionary"],function(s){var l=s("Customer"),i=s("Dictionary");return function(){function r(){return!0===l.prop.isSeamless}function o(e,t,n){return!!r()&&(l.prop.isDemo?t.indexOf(e)<0&&n.indexOf(e)<0:t.indexOf(e)<0)}function a(e,t){return!!r()&&-1!==t.indexOf(e)}return{CheckSeamless:r,IsFormRestricted:o,IsActionRestricted:function(e,t,n){return!!r()&&(!0===l.prop.isDemo?-1!==n.indexOf(e):-1!==t.indexOf(e))},RegisterLeadType:function(e,t,n){var r="";e&&e===eForms.Deposit&&(r="&"+registerParams.traderFrom+"="+eFormActions.deposit),isNullOrUndefined(t)||(t.toLowerCase()===eFormActions.newDeal.toLowerCase()?r="&"+registerParams.traderFrom+"="+eFormActions.newDeal:t.toLowerCase()===eFormActions.newLimit.toLowerCase()&&(r="&"+registerParams.traderFrom+"="+eFormActions.newLimit)),n&&n.register&&(r+="&"+n.register),s(["ViewsManager"],function(e){window.location.href=i.GetItem("SeamlessRegisterLink")+"&saprocess=&trader_viewid="+e.Activeform().type+r})},GetMessage:function(e){var t;switch(e){case eForms.Deposit:t=i.GetItem("SeamlessRegisterDeposit");break;case eForms.Withdrawal:t=i.GetItem("SeamlessRegisterWithdrawal");break;case eForms.ClientQuestionnaire:t=i.GetItem("SeamlessRegisterQuestionnaire");break;default:t=i.GetItem("SeamlessRegister")}return t},IsFormVisibleRestricted:a,RedirectToAllowedForm:function(t,n,r){var i=$viewModelsManager.VManager.Activeform().type;s(["ViewsManager"],function(e){(o(i,t,n)||a(i,r))&&e.SwitchViewVisible(l.prop.mainPage)})}}}}),define("fxnet/Devices/Mobile/Modules/SeamlessPermissionsModule",["require","Dictionary","SeamlessPermissionsBase"],function(u){var c=u("Dictionary");return new(extendClass(u("SeamlessPermissionsBase"),function(){var o=this.parent,a=[eForms.Quotes,eForms.OpenDeals,eForms.Limits,eForms.ClosedDeals,eForms.ClosedDealsFilter,eForms.Balance,eForms.Wallet,eForms.NetExposure,eForms.InternalContactUs,eForms.Menu,eForms.Charts,eForms.EconomicCalendar,eForms.EconomicCalendarFilter,eForms.Transaction,eForms.EducationalTutorials,eForms.UserFlowMap],s=[eForms.OpenDeals,eForms.Limits,eForms.ClosedDeals,eForms.ClosedDealDetails,eForms.EditClosingLimit,eForms.EditLimit,eForms.CloseDeal,eForms.ClosedDealsFilter,eForms.ContractRollover,eForms.AccountCardRecords,eForms.CashBack,eForms.Balance],t=["newDeal","newLimit","signals","logout","addFavorite"],n=["signals","logout"],l=[eForms.EducationalTutorials];return{CheckSeamless:o.CheckSeamless,PopAlert:function(e,t,n){var r=o.GetMessage(e),i={cancelButtonCallback:function(){o.RedirectToAllowedForm(a,s,l)},okButtonCaption:c.GetItem("RegisterForFree"),okButtonCallback:function(){o.RegisterLeadType(e,t,n)}};u(["AlertsManager"],function(e){e.UpdateAlert(AlertTypes.GeneralOkCancelAlert,c.GetItem("PleaseNote"),r,null,i),e.PopAlert(AlertTypes.GeneralOkCancelAlert)})},IsFormRestricted:function(e){return o.IsFormRestricted(e,a,s)},IsActionRestricted:function(e){return o.IsActionRestricted(e,t,n)},RegisterLeadType:o.RegisterLeadType,IsFormVisibleRestricted:function(e){return o.IsFormVisibleRestricted(e,l)}}}))}),define("fxnet/Devices/Mobile/Modules/DepositConfirmationActions",["require","Dictionary","AlertsManager"],function(e){var t=e("AlertsManager"),n=e("Dictionary");return new function(){return{OpenConfirmation:function(e){t.UpdateAlert(AlertTypes.DepositConfirmationSignatureAlert,n.GetItem("lblDepositConfirmationTitle"),"",null,{uploadStringImage:e}),t.PopAlert(AlertTypes.DepositConfirmationSignatureAlert)},CloseConfirmation:function(){t.GetAlert(AlertTypes.DepositConfirmationSignatureAlert).hide()}}}}),define("WalletModule",["require","knockout","ViewModelBase","walletSettings","Customer","CustomerProfileManager","ClientStateHolderManager","PortfolioStaticManager","DialogViewModel","Dictionary","StateObject!DealerParams"],function(e){var g=e("knockout"),v=e("DialogViewModel"),y=e("walletSettings"),w=e("Customer"),b=e("CustomerProfileManager"),C=e("ClientStateHolderManager"),S=e("PortfolioStaticManager"),E=e("Dictionary"),D=e("StateObject!DealerParams");return window.$walletModule=new function(){var n={},r={},t=new TDelegate,e=function(){C.OnChange.Add(d),S.OnChange.Add(p)},i=function(){C.OnChange.Remove(d),S.OnChange.Remove(p)},o=function(){n.isMaintenanceMargin=0<w.prop.maintenanceMarginPercentage,n.userName=w.prop.userName,n.accountNumber=w.prop.accountNumber;var e=C.CSHolder;n.maintenanceMargin=u(e.maintenanceMargin,function(){return n.isMaintenanceMargin}),n.openPLSign=g.observable(),n.equity=u(e.equity,function(){return!0}),n.accountBalance=u(e.accountBalance,function(){return!0}),n.openPL=u(e.openPL,function(){return!0}),n.netExposure=u(e.netExposure,function(){return!0}),n.exposureCoverage=u(e.exposureCoverage,function(){return!0}),n.totalEquity=g.observable(e.totalEquity),n.isValidExposureCoverage=g.observable(a(e.exposureCoverage)),n.usedMargin=u(e.usedMargin,function(){return r.isAdvancedView()||!isNullOrUndefined(y)&&y.isVisibleUsedMargin}),n.availableMargin=u(e.availableMargin,function(){return!0}),n.availableMarginNoComma=g.observable(),n.marginUtilizationPercentage=u(e.marginUtilizationPercentage,function(){return r.isAdvancedView()}),n.marginUtilizationStatus=g.observable(e.marginUtilizationStatus),n.marginLevel=u(l(e),function(e){var t=toNumeric("NA");return r.isAdvancedView()&&t!==e&&0<e});var t=S.Portfolio;n.maxExposure=u(t.maxExposure,function(){return r.isAdvancedView()}),n.securities=u(t.securities,function(e){return 0<toNumeric(e)&&r.isAdvancedView()}),n.tradingBonus=u(t.tradingBonus,function(e){return 0<toNumeric(e)}),n.pendingBonus=u(t.pendingBonus,function(e){return 0<toNumeric(e)}),n.pendingWithdrawals=u(t.pendingWithdrawals,function(e){return 0<toNumeric(e)}),n.pendingBonusType=g.observable(t.pendingBonusType),n.showCashBack=f,n.showExposureSummary=h,n.showExposureSummary.disabled=g.observable(!1),n.showDetailedMarginStatus=m,n.isAdvancedView=r.isAdvancedView,!0===w.prop.abTestings.configuration["account-hub-map"]?n.showFinancialSummaryDetails=g.observable($statesManager.States.IsActive()||w.prop.customerType===eCustomerType.TradingBonus):n.showFinancialSummaryDetails=g.observable(!0)},a=function(e){return!!(isNullOrUndefined(w)||isNullOrUndefined(w.prop)||isNullOrUndefined(w.prop.minPctEQXP)||isNullOrUndefined(e))||toNumeric(e)>toNumeric(w.prop.minPctEQXP)},s=function(){n.bonusAmount=g.computed(function(){return window.$bonusManager.bonus().amountBase?window.$bonusManager.bonus().amountBase:0})},l=function(e){var t=toNumeric(e.usedMargin),n=toNumeric(e.totalEquity),r=toNumeric("NA");return r===t||r===n||0===t||0===n?r:toNumeric(n/t)},u=function(e,t){var n=g.observable(e);return{value:n,toNumeric:g.computed(function(){return toNumeric(n())}),visibility:g.computed(function(){return t(n())}).extend({notify:"always"})}},c=function(){!isNullOrUndefined(y)&&y.useAdvancedView?r.isAdvancedView=g.observable(!1):r.isAdvancedView=g.observable(!0),r.setAdvancedView=A},A=function(e){r.isAdvancedView(e);var t=b.ProfileCustomer();t.advancedWalletView=e?1:0,b.ProfileCustomer(t)},d=function(){var e=C.CSHolder;n.maintenanceMargin.value(e.maintenanceMargin),n.openPLSign(e.openPL.sign()),n.openPL.value(e.openPL),n.equity.value(e.equity),n.accountBalance.value(e.accountBalance),n.netExposure.value(e.netExposure),n.exposureCoverage.value(e.exposureCoverage),n.totalEquity(e.totalEquity),n.isValidExposureCoverage(a(e.exposureCoverage)),n.usedMargin.value(e.usedMargin),n.availableMargin.value(e.availableMargin),n.availableMarginNoComma(e.availableMargin.sign()),n.marginUtilizationPercentage.value(e.marginUtilizationPercentage),n.marginUtilizationStatus(e.marginUtilizationStatus),n.marginLevel.value(l(e)),!0===w.prop.abTestings.configuration["account-hub-map"]&&n.showFinancialSummaryDetails($statesManager.States.IsActive()||w.prop.customerType===eCustomerType.TradingBonus)},p=function(){var e=S.Portfolio;n.maxExposure.value(e.maxExposure),n.securities.value(e.securities),n.tradingBonus.value(e.tradingBonus),n.pendingBonus.value(e.pendingBonus),n.pendingWithdrawals.value(e.pendingWithdrawals),n.pendingBonusType(e.pendingBonusType),n.pendingBonusType()===ePendingBonusType.cashBack||isNullOrUndefined(y)||y.supressDialogs||isNullOrUndefined(v)||!v.isOpen()||v.getCurrentView()!==eViewTypes.vCashBack||v.close()},f=function(e){n.pendingBonusType()===ePendingBonusType.cashBack&&(e&&e.tradingEvent&&g.postbox.publish("trading-event",e.tradingEvent),t.Invoke(eDialog.CashBackDialog,{title:E.GetItem("lblCashBackTitle"),dialogClass:"cashback fx-dialog",width:850},eViewTypes.vCashBack,n.bonusAmount()))},h=function(e){t.Invoke(eDialog.NetExposuresSummaryDialog,{title:e.title,dialogClass:"netexposure fx-dialog"},eViewTypes.vNetExposure)},m=function(e){t.Invoke(eDialog.MarginStatus,{title:E.GetItem("MarginStatus"),width:800},eViewTypes.vMarginStatus),e&&g.postbox.publish("trading-event",e)};return{Init:function(){c(),o(),s(),v&&t.Add(function(e,t,n,r){v.open(e,t,n,r)})},WalletInfo:n,ViewProperties:r,OpenInDialog:t,InitEvents:function(){e(),d(),p(),r.isAdvancedView(!(!D.get(eDealerParams.DealerAdvancedWalletView)&&!b.ProfileCustomer().advancedWalletView))},Dispose:function(){i()}}}}),define("viewModels/WalletViewModel",["require","knockout","KoComponentViewModel","WalletModule"],function(e){var r=e("WalletModule"),t=extendClass(e("KoComponentViewModel"),function(){var e=this,t=this.parent,n=this.Data;return{Data:n,Init:function(){t.init.call(e),n.WalletInfo=r.WalletInfo,n.ViewProperties=r.ViewProperties,r.Init(),r.InitEvents()},dispose:function(){r.Dispose(),t.dispose.call(e)}}});return{viewModel:{createViewModel:function(){var e=new t;return e.Init(),e}}}}),define("ViewModelBase",["require"],function(e){return{setSettings:function(e,t,n){t=t||{},isDefinedType(n)?e.settings=n:e.settings={},Object.assign(e.settings,t)},getSettings:function(e){return e.settings}}});var QuotesViewModel=function(){var s,a,r=[],t=[],i={},l=clone(require("ViewModelBase")),n=require("Dictionary"),o=require("FavoriteInstrumentsManager"),u=require("InstrumentTranslationsManager"),c=require("PermissionsModule"),A=new TDelegate,d=function(){i.selectedPresetId=ko.observable(),i.isCashBackIconVisible=ko.observable(0<toNumeric($portfolioManager.Portfolio.pendingBonus)&&$portfolioManager.Portfolio.pendingBonusType===ePendingBonusType.cashBack),i.isMarketClosed=$statesManager.States.IsMarketClosed,i.isAmlRestricted=$statesManager.States.IsAmlRestricted,i.alertOfInactiveInstrument=f},p=function(t){var e;t&&(i.selectedPresetId(t.Id),e=t.Id===ePresetType.PresetCustomized?$instrumentsManager.GetCustomizedUiOrder():$instrumentsManager.GetPresetInstruments(t.Id),t.Order!==ePresetsOrder.None&&t.Clear(),t.QuotesCollection.Keys.count()<1&&B(e||[],t).then(function(e){t.AddRange(e),t.TemporaryQuotesCollection.length=0}).done())},f=function(e){var t=String.format(n.GetItem("InstrumentInactiveOnLoad"),e);AlertsManager.UpdateAlert(AlertTypes.ServerResponseAlert,null,t,""),AlertsManager.PopAlert(AlertTypes.ServerResponseAlert)},h=function(e,t,n){window.componentsLoaded()?(ko.postbox.publish("instrument-trade",{instrumentName:u.Long(e.id)}),!$customer.prop.brokerAllowLimitsOnNoRates||e.isActiveQuote()&&!i.isMarketClosed()?g(e.id,t,n):v(e.id,t,n)):f(e.ccyPair)},m=function(e){A.Invoke(eDialog.TransactionSwitcher,{title:"",customTitle:"TransactionDropDown",width:700,dragStart:function(){ko.postbox.publish("new-deal-dragged",{})},persistent:!1,dialogClass:"deal-slip"},eViewTypes.vTransactionSwitcher,e)},g=function(e,t,n){var r={instrumentId:e,orderDir:t,tab:n,transactionType:eTransactionSwitcher.NewDeal};m(r)},v=function(e,t,n){var r={instrumentId:e,orderDir:t,tab:n,transactionType:eTransactionSwitcher.NewLimit};m(r)},y=function(e,t){var n={instrumentId:e.id,isActiveQuote:!isNullOrUndefined(e)&&e.state()!==eQuoteStates.NotActive,orderDir:null===t?eOrderDir.None:t};$viewModelsManager.VManager.SwitchViewVisible(eForms.Transaction,n)},w=function(){$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vQuotes).state.subscribe(function(e){switch(e){case eViewState.Start:$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vQuotes).previousState()!==eViewState.Update&&b();break;case eViewState.Update:E(),$viewModelsManager.VManager.ChangeViewState(eViewTypes.vQuotes,eViewState.Start);break;case eViewState.Stop:C()}})},b=function(){r.push(a.Data.SelectedPreset.subscribe(p));var e=i.selectedPresetId()||$initialDataManager.prop.initialScreen.screenId||ePresetType.PresetCustomized,t=$viewModelsManager.VManager.GetViewArgsByKeyName(eViewTypes.vQuotes,"presetToSelect")||e,n=a.Data.SelectedPreset();n&&n.Id===t?p(n):a.SelectPreset(t),S(),k()},C=function(){e(),function(){if(0<r.length)for(var e=0;e<r.length;e++)r[e].dispose();r.length=0}(),function(){if(0<t.length)for(var e=0;e<t.length;e++)t[e].dispose();t.length=0}(),a.Reset()},S=function(){$quotesManager.OnChange.Add(F),$instrumentsManager.OnEnhancedInstrumentsChange.Add(N),$portfolioManager.OnChange.Add(k)},e=function(){$quotesManager.OnChange.Remove(F),$instrumentsManager.OnEnhancedInstrumentsChange.Remove(N),$portfolioManager.OnChange.Remove(k)},E=function(){var e=$viewModelsManager.VManager.GetViewArgsByKeyName(eViewTypes.vQuotes,"presetToSelect");void 0!==e&&a.SelectPreset(e)},D=function(e){for(var t=(new Date).getTime(),n=l.getSettings(s).minRowsToDisplay,r=Math.max(e.length,n)-e.length,i=e.length-1,o=0;o<r;o++){var a={id:String.format("empty{0}",t++),rowId:++i,isFake:!0};e.push(a)}return e},B=function(e,t){var n,r,i,o=0,a=e.length,s=[];for(n=0;n<a;n++)(r=$instrumentsManager.GetInstrument(e[n][eQuotesUIOrder.InstrumentID]))&&(T(++o,i={isFake:!1},r,t),U(i),s.push(i));if(t.TemporaryQuotesCollection=s,t.Order===ePresetsOrder.None)return Q(s).then(D);var l=s.map(function(e){return!!e.isFake||e.hasData.promise});return Q.all(l).then(function(){return M(s,t.Order)}).then(D)},T=function(e,t,n,r){t.hasData=Q.defer(),t.rowId=e,t.instrumentId=n.id,t.DecimalDigit=n.DecimalDigit,t.PipDigit=n.PipDigit,t.id=n.id,t.amountGroupId=n.amountGroupId,t.factor=n.factor,t.isTradable=n.isTradable,t.baseSymbolName=n.baseSymbolName,t.otherSymbolName=n.otherSymbolName,t.baseSymbolId=n.baseSymbol,t.otherSymbolId=n.otherSymbol,t.signal=n.hasSignal,t.alertInactiveQuote=I,t.bidPips=ko.observable(),t.bid10K=ko.observable(),t.bid100K=ko.observable(),t.askPips=ko.observable(),t.ask10K=ko.observable(),t.ask100K=ko.observable(),t.state=ko.observable(""),t.isActiveQuote=ko.observable(""),t.bid=ko.observable(""),t.ask=ko.observable(""),t.prevBid=ko.observable(""),t.prevAsk=ko.observable(""),t.open=ko.observable(""),t.close=ko.observable(""),t.high=ko.observable(""),t.low=ko.observable(""),t.change=ko.observable(""),t.changePips=ko.observable(""),t.time=ko.observable(""),t.orderDir=ko.observable(""),t.isSingleInstrument=n.isFuture||n.isShare||n.instrumentTypeId==eInstrumentType.Commodities&&n.assetTypeId==eAssetType.Forex,t.isIndiceInstrument=n.instrumentTypeId==eInstrumentType.Indices,t.isFavoriteHelper=ko.observable(0).extend({notify:"always"}),t.isFavorite=ko.pureComputed(function(){return-1<this.isFavoriteHelper()&&r.isSelected()&&o.IsFavoriteInstrument(this.id)},t),t.weightedVolumeFactor=ko.observable(n.weightedVolumeFactor),t.onToggleFavoriteClick=debounce(function(){c.CheckActionAllowed("addFavorite",!0)&&(t.isFavorite()?(o.RemoveFavoriteInstrument(t.id,function(e){t.isFavoriteHelper(1)}),ko.postbox.publish("favorite-instrument-update",{instrumentId:t.id,isRemoveInstrument:!0})):(o.AddFavoriteInstrument(t.id,function(e){t.isFavoriteHelper(1)}),ko.postbox.publish("favorite-instrument-update",{instrumentId:t.id,isAddInstrument:!0})))}),t.isCashBackIconVisible=ko.pureComputed(function(){return 1<this.weightedVolumeFactor()&&i.isCashBackIconVisible()},t),t.isAvailable=ko.pureComputed(function(){return!i.isMarketClosed()&&this.isActiveQuote()},t),t.isStock=ko.observable(n.isStock),t.isUp=ko.pureComputed(function(){return this.state()===eQuoteStates.Up},t).extend({notify:"always"}),t.isDown=ko.pureComputed(function(){return this.state()===eQuoteStates.Down},t).extend({notify:"always"}),t.notChanged=ko.pureComputed(function(){return this.state()===eQuoteStates.NotChanged},t).extend({notify:"always"}),t.formattedChange=ko.pureComputed(function(){return Format.toSignedPercent(this.change(),"")},t),t.onClick=function(){y(t,eOrderDir.None)},t.onBuyClick=function(){y(t,eOrderDir.Buy)},t.onSellClick=function(){y(t,t.isStock()?eOrderDir.None:eOrderDir.Sell)},t.choose=function(){t.onChoiceClick()},t.onChoiceClick=function(){h(t,eOrderDir.None)},t.onAskClick=function(){h(t,eOrderDir.Buy)},t.onBidClick=function(){h(t,t.isStock()?eOrderDir.None:eOrderDir.Sell)},t.onSignalClick=function(e){h(e,eOrderDir.None,e.signal?eNewDealTool.Signals:null)},t.hasPriceAlerts=ko.observable(!1),t.onPriceAlertClick=function(e){var t,n,r,i;t=e.instrumentId,n=eOrderDir.None,i={instrumentId:t,orderDir:n,tab:r,transactionType:eTransactionSwitcher.NewPriceAlert},A.Invoke(eDialog.NewPriceAlert,{title:"",customTitle:"TransactionDropDown",width:700,dragStart:function(){ko.postbox.publish("new-deal-dragged",{})},persistent:!1,dialogClass:"deal-slip"},eViewTypes.vNewPriceAlert,i)}},I=function(e){var t=String.format("Instrument {0} is currently inactive",e);return AlertsManager.UpdateAlert(AlertTypes.ServerResponseAlert,null,t,""),AlertsManager.PopAlert(AlertTypes.ServerResponseAlert),!1},F=function(e){var t,n,r=a.Data.SelectedPreset();if(r)for(var i=0,o=e.length;i<o;i++)t=e[i],(n=r.QuotesCollection.Get(t)||r.TemporaryQuotesCollection.find(function(e,t){return t.id===e}.bind(null,t)))&&!n.isFake&&U(n)},x=function(e,t){return e.change()-t.change()},_=function(e,t){return t.change()-e.change()},M=function(e,o){if(e=e||[],o)return(e=e.filter(function(e){return!e.isFake&&(r=o,i=e.change(),r===ePresetsOrder.Descending&&0<=i||(t=o,n=e.change(),t===ePresetsOrder.Ascending&&n<0));var t,n,r,i})).sort(o===ePresetsOrder.Ascending?x:_)},N=debounce(function(){for(var e=0,t=a.Data.Presets().length;e<t;e++){var n=a.Data.Presets()[e];!n||n.QuotesCollection.Keys.count()<1||n.QuotesCollection.Keys.ForEach(function(e,t){if(!t.isFake){var n=$instrumentsManager.GetInstrument(t.instrumentId);t.weightedVolumeFactor(n.weightedVolumeFactor)}})}}),k=debounce(function(){i.isCashBackIconVisible(0<toNumeric($portfolioManager.Portfolio.pendingBonus)&&$portfolioManager.Portfolio.pendingBonusType===ePendingBonusType.cashBack)}),U=function(e){if(e&&e.id&&!e.isFake){var t=e.id,n=$quotesManager.Quotes.GetItem(t);n&&(e.state(n.state),e.isActiveQuote(n.state!==eQuoteStates.NotActive),e.prevAsk(e.ask()),e.prevBid(e.bid()),e.bid(n.bid),e.ask(n.ask),e.open(n.open),e.close(n.close),e.high(n.highBid),e.low(n.lowAsk),e.change(n.change),e.changePips(Format.toRate(n.changePips,!0,t)),e.time(n.tradeTime),e.hasData.resolve(!0))}};return{Init:function(e){s=this,a=$viewModelsManager.VmQuotesPreset,l.setSettings(s,e),w(),d()},Start:b,Stop:C,Presets:a,ViewProperties:i,OpenInDialog:A}},SubMenuModel=function(){var e=ko.observable(!1);return{isActive:e,show:function(){e(!0)},hide:function(){e(!1)}}},MenuViewModel=function(e){var r=new SubMenuModel,i=new SubMenuModel,o=new SubMenuModel,a=new SubMenuModel,s=new SubMenuModel,l=new SubMenuModel,t=function(){$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vMenu).visible.subscribe(function(e){e?n():u()})},n=function(){},u=function(){},c=ko.pureComputed(function(){return $statesManager.States.CddStatus()!==eCDDStatus.NotRequired&&!$customer.prop.isDemo}),A=function(e,t,n){n&&ko.postbox.publish("action-source",n),$viewModelsManager.VManager.RedirectToForm(e,t||{}),r.hide(),i.hide(),o.hide(),a.hide(),s.hide(),l.hide()};return{Init:function(){t()},tradingPermissions:{},simpleVisible:function(e){return(!isDefinedType(window.DialogViewModel)||window.DialogViewModel.getCurrentView()!=e)&&$viewModelsManager.VManager.GetActiveFormViewProperties(e).visible},tradesVisbile:function(){return ko.computed(function(){return $viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vOpenDeals).visible()||$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vClosedDealsSummaries).visible()||$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vLimits).visible()})},toolsVisible:function(){return ko.computed(function(){return $viewModelsManager.VManager.ActiveFormType()==eForms.AdvinionChart||$viewModelsManager.VManager.ActiveFormType()==eForms.TradingSignals})},educationVisible:function(){return ko.computed(function(){return $viewModelsManager.VManager.ActiveFormType()==eForms.Tutorials||$viewModelsManager.VManager.ActiveFormType()==eForms.EducationalTutorials})},forexAndCfdVisible:function(){return ko.computed(function(){return $viewModelsManager.VManager.ActiveFormType()==$customer.prop.mainPage||$viewModelsManager.VManager.ActiveFormType()==eForms.Deals})},reportsVisible:function(){return ko.computed(function(){return $viewModelsManager.VManager.ActiveFormType()==eForms.Statement||$viewModelsManager.VManager.ActiveFormType()==eForms.ActivityLog||$viewModelsManager.VManager.ActiveFormType()==eForms.TransactionsReport})},fundsVisible:function(){return ko.computed(function(){return $viewModelsManager.VManager.ActiveFormType()==eForms.Deposit||$viewModelsManager.VManager.ActiveFormType()==eForms.Withdrawal})},clientQuestionnaireVisible:c,forexCfdMenu:r,toolsMenu:i,educationMenu:o,fundsMenu:a,reportsMenu:s,tradingMenu:l,EducationMenuClick:function(e,t){e&&t||(e&&A(eForms.Tutorials),t&&A(eForms.EducationalTutorials))},PriceAlertMenuClick:function(){ko.postbox.publish("price-alerts-menu-view"),A(eForms.PriceAlerts,null,"HeaderMenu")},SwitchView:A}};define("QuotesPresetViewModel",["ViewModelBase","PresetCollectionBuilder","PresetCategoryBuilder","PresetsManager","FavoriteInstrumentsManager","InitialDataManager","CustomerProfileManager","InstrumentsManager","InstrumentTranslationsManager","ViewsManager","FxNet/Common/Constants/Collections/PresetsDefinitions"],function(){return function(){var n={},a={},r=clone(require("ViewModelBase")),o=require("PresetCollectionBuilder"),s=require("PresetCategoryBuilder"),l=require("PresetsManager"),t=require("FavoriteInstrumentsManager"),u=require("InitialDataManager"),i=require("CustomerProfileManager"),p=require("InstrumentsManager"),f=require("InstrumentTranslationsManager"),c=require("ViewsManager"),A=-1,d=2,h=ko.observable([]),m=ko.observable(!1),g=require("FxNet/Common/Constants/Collections/PresetsDefinitions"),v=ko.observable(!1);function y(){var e,t,A,d,n,r=a.SelectedId()||u.prop.initialScreen.screenId,i=l.GetAvailableScreens();e=i,(t=o.NewCollection(g,e)).forEach(function(e){e.Select=B}),a.Presets(t),B(r),A=p.GetInstrumentIds(),d=p.GetPresetInstruments(),n=(n=A.map(function(t){var e=[];for(var n in d)if(d.hasOwnProperty(n)){var r=d[n];0<=r.findIndex(function(e){return e[0]===t})&&e.push(n)}if(0===e.length)return null;var i=e.find(w)||e[e.length-1],o=p.GetInstrument(t),a=T(i),s=f.Short(t),l=f.Long(t),u=f.GetFullTextLatinized(t),c=f.GetTranslatedInstrumentById(t);return l.length<2&&m(!0),{id:t,baseSymbolId:o.baseSymbol,otherSymbolId:o.otherSymbol,shortTranslation:s,value:l,fullText:u,category:Dictionary.GetItem(a.CategoryNameKey)+" - "+a.Label,presetId:a.Id,instrumentName:l,symbolName:c.baseSymbolName,fullName:f.GetTooltipByInstrumentId(t),ccyOrder:A.indexOf(t)}})).filter(function(e){return null!==e}),h(n)}function w(e){for(var t=parseInt(e),n=0;n<g.length;n++)if(0<=g[n].searchPresetIds.indexOf(t))return!0;return!1}function b(e,t){return!isNullOrUndefined(e)&&!isNullOrUndefined(t)&&(t=t.filter(function(e){return!1===function(e){for(var t=parseInt(e),n=0;n<g.length;n++)if(t===g[n].presets.PresetCustomized)return!0;return!1}(e.Id)}),Object.keys(e).length===t.length)}function C(e){var t=a.SelectedId()||u.prop.initialScreen.screenId,n=a.Presets();if(function(e){for(var t=parseInt(e),n=0;n<g.length;n++)if(0<=g[n].ascOrderPresetIds.indexOf(t)||0<=g[n].descOrderPresetIds.indexOf(t)||t===g[n].presets.PresetMostPopularCurrencies||t===g[n].presets.CurrenciesHot)return!0;return!1}(t)||!1===b(e,n))y();else{var r,i,o=n.find(function(e){return e.Id===t});!1===isNullOrUndefined(o)&&(r=o.QuotesCollection.Values().filter(function(e){return!e.isFake})),!1===isNullOrUndefined(e)&&(i=e[t]),!1===isNullOrUndefined(i)&&!1===isNullOrUndefined(r)&&!1===function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<t.length;n++)if(t[n][0]!==e[n].instrumentId)return!1;return!0}(r,i)&&y()}}function S(e){return e.Key}function E(e,t){return t.Key===e}function D(e){e.Id===A&&(e.isSelected()||(a.Presets().forEach(function(e){e.Id!==A&&(e.isSelected(!1),e.OnOrderUpdate.Flush())}),r.getSettings(n).areQuotesVisible&&function(e){var t;t=e.Id==ePresetType.PresetCustomized?p.GetCustomizedUiOrder():p.GetPresetInstruments(e.Id);t&&(a.isSearch()||p.SetQuotesUIOrder(t),r.getSettings(n).areQuotesVisible||c.SwitchViewVisible(eForms.Quotes,{presetToSelect:e.Id}));ko.postbox.publish("quotes-ui-order-loaded")}(e),e.isSelected(!0),e.OnOrderUpdate.Add(function(e){t.ChangeUIOrder(e,!0)}),ko.postbox.publish("preset-changed",e.Name),i.LastSelectedPresetId(e.Id)))}function B(t){t=Number(t),v(0===t);var e=a.Presets().find(function(e){return e.Id===t});e&&(A=t,D(e))}function T(t){return a.Presets().find(function(e){return e.Id==t})}return{Init:function(e){r.setSettings(n,e),a.Presets=ko.observableArray([]),a.SelectedId=ko.observable(""),a.isSearch=ko.observable(!1),a.SelectedPreset=ko.pureComputed(function(){var e=a.Presets().find(function(e){return e.isSelected()});return e?a.SelectedId(e.Id):a.SelectedId(""),e}),a.Categories=ko.computed(function(){var e=a.Presets().map(function(e){return{instrumentType:e.InstrumentType,presetOrder:e.PresetOrder}}),t=function(e){for(var t,n=e.filter(function(t,e,n){var r=n.find(function(e){return e.instrumentType===t.instrumentType});return n.indexOf(r)===e}).sort(function(e,t){return e.presetOrder-t.presetOrder}),r=[],i=0;i<n.length;i++){var o=a.Presets().filter(function(e,t){return t.InstrumentType===e}.bind(null,n[i].instrumentType));(t=s.NewCategory(o)).SelectedPreset.subscribe(function(e){B(e)}),r.push(t)}return r}(e);return t.length>d?t:function(e){for(var t=[],n=e.map(S),r=0;r<g.length;r++){var i,o=g[r].categoryName;i=n.contains(o)?e.find(E.bind(null,o)):s.NewCategory([],o),t.push(i)}return t}(t)}),a.SelectedCategory=ko.computed(function(){var e=a.Categories().find(function(e){return e.isSelected()});return e}),ko.postbox.subscribe("swipePreset",function(e){var t=a.Categories(),n=t.indexOf(a.SelectedCategory());"left-to-right"===e&&(void 0!==t[n-1]?t[n-1].Select():(ko.postbox.publish("search-presets"),a.isSearch(!0))),"right-to-left"===e&&void 0!==t[n+1]&&(a.isSearch()?t[0].Select():t[n+1].Select(),a.isSearch(!1))}),p.OnFavoritesPresetChanged.Add(function(){var e=a.Presets().find(function(e){return e.Id==ePresetType.PresetCustomized});e&&e.Update()}),l.OnPresetsUpdated.Add(C),y()},Reset:function(){A=-1,a.Presets().forEach(function(e){e.isSelected(!1)})},Data:a,SearchInstrumentsObservable:h,SingleCharSearch:m,GetCurrentPresetName:function(){var e=a.SelectedPreset();return e||(e=a.Presets().find(function(e){return u.prop.initialScreen.screenId===e.Id})),e.Name},GetPreset:T,SelectPreset:B,IsSearchPreset:w,EditFavoriteVisible:v}}});var MarginStatusViewModel=function(e){var t,c=new ObservableHashTable("InstrumentID"),r={},i={},n=clone(e),o=function(){r.CustomerCcy=$customer.prop.defaultCcy(),r.Equity=ko.observable(0),r.TotalEquity=ko.observable(0),r.Securities=ko.observable(0),r.TradingBonus=ko.observable(0);var t=ko.observable(0),n=ko.observable(0);i.TotalUsedMargin=ko.computed({read:function(){var n=0;return ko.utils.arrayForEach(c.Values(),function(e){var t=toNumeric(e.UsedMargin());t&&(n+=t)}),n},write:function(e){t(e)}}),i.TotalMarginUtilization=ko.computed({read:function(){var n=0;return ko.utils.arrayForEach(c.Values(),function(e){var t=toNumeric(e.MarginUtilizationPercentage());t&&(n+=t)}),n},write:function(e){n(e)}})},a=function(){$instrumentVolumeManager.InstrumentVolumes.ForEach(function(e,t){c.Add(A(t))}),i.TotalUsedMargin(0),i.TotalMarginUtilization(0),u(),d(),$instrumentVolumeManager.OnChange.Add(l),$csHolderManager.OnChange.Add(u),$portfolioManager.OnChange.Add(d)},s=function(){$instrumentVolumeManager.OnChange.Remove(l),$csHolderManager.OnChange.Remove(u),$portfolioManager.OnChange.Remove(d),c.Clear()},A=function(e){var t={};for(var n in e)t[n]=ko.observable(e[n]);return t},l=function(e){for(var t=0;t<e.removedItems.length;t++){var n=e.removedItems[t];c.Remove(n)}for(var r=0,i=e.editedItems.length;r<i;r++){var o=e.editedItems[r];c.Update(o,$instrumentVolumeManager.InstrumentVolumes.GetItem(o))}for(var a=0,s=e.newItems.length;a<s;a++){var l=e.newItems[a],u=$instrumentVolumeManager.InstrumentVolumes.GetItem(l);u&&c.Add(A(u))}},u=function(){r.Equity(toNumeric($csHolderManager.CSHolder.equity)),r.TotalEquity(toNumeric($csHolderManager.CSHolder.totalEquity))},d=function(){r.Securities(toNumeric($portfolioManager.Portfolio.securities)),r.TradingBonus(toNumeric($portfolioManager.Portfolio.tradingBonus))},p=function(){$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vMarginStatus).state.subscribe(function(e){switch(e){case eViewState.Start:a();break;case eViewState.Stop:s()}})};return{Init:function(e){t=this,n.setSettings(t,e),o(),p()},Collection:c.Values,WalletInfo:r,Totals:i}},PendingWithdrawalViewModel=function(e,t,r){var n,i=new ObservableHashTable("withdrawalID"),o=new ObservableHashTable("withdrawalID"),a=ko.observable(""),s=ko.observable(!0),l=ko.observable(""),u={},c=clone(e),A=function(){u.hasRecords=ko.computed(function(){return 0<i.Values().length||0<o.Values().length})},d=function(){dalWithdrawal.getAllPendingWithdrawalsByAccount(v)},p=function(){$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vPendingWithdrawal).state.subscribe(function(e){switch(e){case eViewState.Start:h();break;case eViewState.Stop:f();break;case eViewState.Refresh:m(),$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vPendingWithdrawal).state(eViewState.Initial)}})},f=function(){i.Clear(),o.Clear()},h=function(){if($customer.prop.isDemo)return $viewModelsManager.VManager.SwitchViewVisible($customer.prop.mainPage,{}),void setTimeout(function(){$(window).trigger("statechange")},100);t&&a(t.Portfolio.pendingWithdrawals),d()},m=function(){d()},g=function(e){a(e.pendingWithdrawals)},v=function(e){var t=JSONHelper.STR2JSON("PendingWithdrawalViewModel/onLoadPendingWithdrawalsComplete",e,eErrorSeverity.medium);t&&y(t.PendingWithdrawals)},y=function(e){if(e)for(var t=0,n=e.length;t<n;t++){var r=w(e[t]);if(r)switch(r.statusID){case eWithdrawalStatus.pendingWithdrawal:i.Add(r);break;case eWithdrawalStatus.processingWithdrawal:o.Add(r)}}},w=function(e){return{onCancelPendingWithdrawalEnable:ko.observable(!0),withdrawalID:e[eWithdrawalView.withdrawalID],actionID:e[eWithdrawalView.actionID],datetime:(n=SplitDateTime(e[eWithdrawalView.requestDate]),String.format("{0} {1}:{2}:{3}",n.date,n.hour,n.min,n.sec)),date:SplitDateTime(e[eWithdrawalView.requestDate]).date,time:(t=SplitDateTime(e[eWithdrawalView.requestDate]),String.format("{0}:{1}:{2}",t.hour,t.min,t.sec)),ccy:$symbolsManager.GetTranslatedSymbolById(e[eWithdrawalView.symbolID]),amount:e[eWithdrawalView.amount],status:Dictionary.GetItem("WithdrawalStatus"+e[eWithdrawalView.withdrawalStatus]),statusID:e[eWithdrawalView.withdrawalStatus],onCancelPendingWithdrawal:function(){b(e)},onCancelProcessingWithdrawal:function(){C(e)}};var t,n},b=function(e){var t=i.Get(e[eWithdrawalView.withdrawalID]);t&&t.onCancelPendingWithdrawalEnable(!1),dalWithdrawal.cancelPendingWithdrawal(e,S)},C=function(t){var e=i.Get(t[eWithdrawalView.withdrawalID]);e&&e.onCancelPendingWithdrawalEnable(!1),dalWithdrawal.cancelPendingWithdrawal(t,function(){var e={msgKey:"CancelProcessWithdrawal"};E(t,e)})},S=function(e,t){var n=JSONHelper.STR2JSON("PendingWithdrawalViewModel/onCancelComplete",t);(n=n||{}).msgKey=1==n.status?"SuccessCancelPendingWithdrawal":"FaildCancelPendingWithdrawal",1==n.status&&i.Remove(e[eWithdrawalView.withdrawalID]);var r={};u.hasRecords()||(r.redirectToView=$customer.prop.mainPage),E(e,n,r),ko.postbox.publish(eTopic.onCancelPendingRedrawal),1==n.status&&u.hasRecords()&&(f(),m())},E=function(e,t,n){t.itemId=e[eWithdrawalView.withdrawalID],t.ccy=$symbolsManager.GetTranslatedSymbolById(e[eWithdrawalView.symbolID]),t.amount=e[eWithdrawalView.amount],r&&r.ShowMessageResult([t],null,null,n)};return{Init:function(e){n=this,c.setSettings(n,e),r&&r.Init({},i),p(),l($customer.prop.defaultCcy()),t&&t.OnChange.Add(g),A()},PendingWithdrawals:i.Values,ProcessWithdrawals:o.Values,WithdrawalInfo:u,CancelPendingWithdrawal:b,CancelProcessingWithdrawal:C,TotalAmountPendingWithdrawal:a,DefaultCcy:l,IsPendingWithdrawalGridVisible:s,TogglePendingWithdrawalGrid:function(){s(!s())}}};function OpenDealsViewModelBase(){return{getValueDate:function(e){var t=$instrumentsManager.GetInstrument(e.instrumentID);if(t.isShare){var n=t.getCorporateActionDate();if(n)return e.valueDate?{isValueDateEmpty:!1,date:str2Date(e.valueDate,"d/m/y H:M")<str2Date(n,"d/m/y H:M")?e.valueDate:n}:{isValueDateEmpty:!0,date:n}}return e.valueDate?{isValueDateEmpty:!1,date:e.valueDate}:{isValueDateEmpty:!0,date:null}}}}var AccountMarketViewModel=function(){var e=ko.observable(!1),t=ko.observable(!1),n=ko.observable(!1),r=ko.observable(!1);function i(e){t(e)}return{Init:function(){i(1===$customerProfileManager.ProfileCustomer().advancedWalletView),$customerProfileManager.ProfileCustomer.subscribe(function(e){var t=1===e.advancedWalletView;i(t)})},QuotesIsAdvanced:e,AccountSummaryIsAdvanced:t,IsCollapsed:n,UseTransitions:r,CollapsedToggle:function(){n(!n())}}};function BalanceViewModel(e,a){var t,n,r={},i=clone(e),o=new function(){var t=this;t.SymbolId=ko.observable(),t.OriginalActionCategory=ko.observable("All"),t.ActionCategory=ko.computed(function(){var e=t.OriginalActionCategory()||"All";switch(e.toLowerCase()){case"all":e=eAccountingActionsCategory.All;break;case"deposits":e=eAccountingActionsCategory.Deposits;break;case"withdrawals":e=eAccountingActionsCategory.Withdrawals;break;case"pl":e=eAccountingActionsCategory.DealPL;break;case"overnightfinancing":e=eAccountingActionsCategory.OvernightFinancing;break;case"contractrollover":e=eAccountingActionsCategory.ContractRollover;break;case"dividend":e=eAccountingActionsCategory.Dividend;break;case"general":e=eAccountingActionsCategory.General}return e}),t.From=ko.observable((new Date).AddWeeks(-1).ExtractDate()),t.To=ko.observable((new Date).ExtractDate()),t.Position=ko.observable(""),t.Page=ko.observable(1),t.PageSize=20,t.Currencies=ko.observableArray()},s={idField:"actionNumber",columns:[{name:"rowNumber",transform:function(e,t){return t}},{name:"actionNumber",dataIndex:eAccountingAction.actionID},{name:"date",dataIndex:eAccountingAction.date},{name:"credit",dataIndex:eAccountingAction.credit},{name:"debit",dataIndex:eAccountingAction.debit},{name:"symbolName",transform:function(e,t,n,r){return $symbolsManager.GetTranslatedSymbolById(r[eAccountingAction.symbolID])}},{name:"creditNoComma",transform:function(e,t,n,r,i){return i.credit.sign()}},{name:"debitNoComma",transform:function(e,t,n,r,i){return i.debit.sign()}},{name:"debitCredit",transform:function(e,t,n,r,i){return 0<i.debit.cleanComma()?"-"+i.debit.cleanComma():0<i.credit.cleanComma()?i.credit.cleanComma():"0.00"}},{name:"type",transform:function(e,t,n,r){return Dictionary.GetItem("acctype"+r[eAccountingAction.actionTypeID])}},{name:"isEditable",transform:function(e,t,n,r){var i=!1,o=r[eAccountingAction.posNum];return a.Deals.ForEach(function(e,t){if(t.positionNumber==o)return!(i=!0)}),!i}},{name:"balance",dataIndex:eAccountingAction.balance},{name:"comment",dataIndex:eAccountingAction.comment},{name:"positionNumber",dataIndex:eAccountingAction.posNum}],pageSizes:20,statusField:"status",totalField:"totalItems",dataField:"actions",pagination:{pagesPerPage:5,pageIndexField:"Page",pageSizeField:"PageSize"},Filter:o,DAL:{reference:dalAccountingActions.LoadAccountingActions,callerName:"StatementControl/onLoadComplete",errorSeverity:eErrorSeverity.medium,onLoad:function(e){r.showBalanceColumn(0!==o.SymbolId())}}},l=new ObservableDataSet(s),u=function(){o.Position=o.Position.extend({toNumericLength:{ranges:[{from:0,to:Number.MAX_SAFE_INTEGER,decimalDigits:0}]}})},c=function(){r.showBalanceColumn=ko.observable()},A=function(){$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vBalance).state.subscribe(function(e){switch(e){case eViewState.Start:d();break;case eViewState.Stop:p();break;case eViewState.Refresh:l.Load(),$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vBalance).state(eViewState.Initial)}})},d=function(){n=l.HasRecords.subscribe(function(e){ko.postbox.publish("printableDataAvailable",{dataAvailable:e,viewType:$viewModelsManager.VManager.ActiveFormType(),viewModel:"BalanceViewModel"})}),dalAccountingActions.GetAccountSymbols(h)},p=function(){l.Clean(),n&&(n.dispose(),n=null),f()},f=function(){o.SymbolId($customer.prop.baseCcyId()),o.OriginalActionCategory("All"),o.From((new Date).AddWeeks(-1).ExtractDate()),o.To((new Date).ExtractDate()),o.Position(""),i.getSettings(t).pageSize&&(o.PageSize=i.getSettings(t).pageSize)},h=function(e){var t=JSONHelper.STR2JSON("StatementControl/onLoadCCYComplete",e,eErrorSeverity.low);if(t){var n=[];n.push({name:Dictionary.GetItem("All"),value:eAccountingActionsCategory.All});for(var r=0,i=t.length;r<i;r++)n.push({name:$symbolsManager.GetTranslatedSymbolById(t[r]),value:t[r]});o.Currencies(n)}f(),l.ApplyFilter()},m=ko.computed(function(){return!l.IsLoadingData()},t);return{Init:function(e){t=this,i.setSettings(t,e),c(),u(),A(),f(),l.Init()},ViewInfo:r,BalanceInfo:l.DataRows,GetNextBalance:l.Paging.ShowMore(),VisibleShowMore:l.Paging.HasNextPage,DataSet:l,Filter:o,EnableApplyButton:m,ApplyFilter:function(){m()&&l.ApplyFilter()},HasRecords:l.HasRecords,DsColumns:s}}define("FxNet/UILayer/ViewModels/ClosedDealDetailsViewModel",["StateObject!ClosedDeals"],function(u){return function(t){var n={},r=new CollectionNavigateManager,e=function(){$viewModelsManager.VManager.GetActiveFormViewProperties(eViewTypes.vClosedDealDetails).visible.subscribe(function(e){e?i():o()})},i=function(){l($viewModelsManager.VManager.GetViewArgsByKeyName(eViewTypes.vClosedDealDetails,"selectedDeal")),a()},o=function(){$vmHelpers.CleanKoObservableSimpleObject(n),u.update(eStateObjectTopics.ClosedDealsUseFilters,!0)},a=function(){var e=$viewModelsManager.VManager.GetViewArgs(eViewTypes.vClosedDealDetails);r.Init(e.closedDeals,e.selectedIndex,n)},s=function(){n.orderID=ko.observable(""),n.positionNumber=ko.observable(""),n.instrumentID=ko.observable(""),n.buyAmount=ko.observable(""),n.sellAmount=ko.observable(""),n.orderDir=ko.observable(""),n.dealAmount=ko.observable(""),n.dealType=ko.observable(""),n.valueDate=ko.observable(""),n.executionTime=ko.observable(""),n.positionStart=ko.observable(""),n.forwardPips=ko.observable(""),n.dealRate=ko.observable(""),n.orderRateOpen=ko.observable(""),n.orderRateClosed=ko.observable(""),n.plSign=ko.observable(""),n.pl=ko.observable(""),n.originalPosNum=ko.observable(""),n.buySymbol=ko.observable(""),n.sellSymbol=ko.observable(""),n.plSymbol=ko.observable(""),n.rowNumber=ko.observable(""),n.isPlNotLikeDefaultCcy=ko.observable(""),n.plCCY=ko.observable(""),n.plCCYAsNumber=ko.observable(""),n.isFirst=ko.observable(),n.isLast=ko.observable(),n.adj=ko.observable(),n.isStock=ko.observable(!1),n.hasAdditionalPL=ko.observable(),n.commission=ko.observable(""),n.spreadDiscount=ko.observable(""),n.grossPL=ko.observable(""),n.hasZeroSpread=ko.observable(!1),n.hasSpreadDiscount=ko.observable(!1)},l=function(e){n.customerCcyName=$customer.prop.defaultCcy(),n.orderID(e.orderID),n.positionNumber(e.positionNumber),n.instrumentID(e.instrumentID),n.buyAmount(e.buyAmount),n.sellAmount(e.sellAmount),n.orderDir(e.orderDir),n.dealAmount(e.dealAmount),n.dealType(e.dealType),n.valueDate(e.valueDate),n.executionTime(e.executionTimeFormatted),n.positionStart(e.positionStartFormatted),n.forwardPips(e.forwardPips),n.dealRate(e.dealRate),n.orderRateOpen(e.orderRateOpen),n.orderRateClosed(e.orderRateClosed),n.plSign(e.plSign),n.pl(e.pl),n.originalPosNum(e.originalPosNum),n.buySymbol(e.buySymbol),n.sellSymbol(e.sellSymbol),n.plSymbol(e.plSymbol),n.rowNumber(e.rowNumber),n.isPlNotLikeDefaultCcy(n.customerCcyName!=e.plSymbol),n.plCCY(e.plCCY),n.plCCYAsNumber(e.plCCYAsNumber),n.adj(e.adj),n.isStock(e.isStock),n.hasAdditionalPL(e.hasAdditionalPL),n.commission(e.commission),n.spreadDiscount(e.spreadDiscount),n.grossPL(e.grossPL),n.hasZeroSpread(t.CustomerDealPermit()===eDealPermit.ZeroSpread),n.hasSpreadDiscount(t.HasSpreadDiscount())};return{Init:function(){s(),e()},Data:n,UpdateObject:function(e){l(e)},Navigate:r}}});var NetExposureViewModel=function(){var t={},o=new ObservableHashTable("symbolId"),e=function(){$netExposureManager.OnChange.Add(n),$csHolderManager.OnChange.Add(r)},n=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.status!==eStatus.Removed)if(o.Get(n.symbolId)){var r={accountSymbolAmount:n.accountSymbolAmount,amount:n.amount};o.Update(n.symbolId,r)}else o.Add((i=n,{accountSymbolAmount:ko.observable(i.accountSymbolAmount),status:i.status,amount:ko.observable(i.amount),symbolId:ko.observable(i.symbolId),symbolName:ko.observable($symbolsManager.GetTranslatedSymbolById(i.symbolId))}));else o.Remove(n.symbolId)}var i},r=function(){var e=$csHolderManager.CSHolder;t.netExposure(toNumeric(e.netExposure))},i=function(){var e=$csHolderManager.CSHolder;t.netExposure=ko.observable(toNumeric(e.netExposure)),t.displayedInAccountCurrency=ko.observable(!1)};return{Init:function(){this,i(),e()},NetExposureCollection:o.Values,NetExposureInfo:t}};define("QuotesSubscriber",["require","knockout","QuotesManager"],function(e){var A=e("knockout"),s=e("QuotesManager");return function(){var i=new ObservableHashTable("instrumentID"),e=!1,t=function(){s.OnChange.Add(a)},n=function(){s.OnChange.Remove(a)},o=function(e,t,n,r,i,o,a,s,l,u){var c={instrumentID:e,bid:A.observable(t),ask:A.observable(n),open:A.observable(r),close:A.observable(i),high:A.observable(o),low:A.observable(a),change:A.observable(Format.toPercent(s)),dataTime:A.observable(l),state:A.observable(u),midRate:A.observable(Format.toMidRate(t,n)),time:A.observable(Format.toTime(l))};return c.rateDirIsUp=A.pureComputed(function(){return this.state()==eQuoteStates.Up},c),c.rateDirIsDown=A.pureComputed(function(){return this.state()==eQuoteStates.Down},c),c.isInactive=A.pureComputed(function(){return this.state()==eQuoteStates.NotActive},c),c},r=function(e){var t=i.Get(e);return t||(function(e){var t=s.Quotes.GetItem(e);if(t){var n=o(t.id,t.bid,t.ask,t.open,t.close,t.high,t.low,t.change,t.tradeTime,t.state);return i.Add(n)}var r=o(e,0,0,0,0,0,0,0,"00:00:00",eQuoteStates.NotActive);i.Add(r)}(e),t=i.Get(e)),t},a=function(e){if(e)for(var t=0;t<e.length;t++){var n=s.Quotes.GetItem(e[t]),r={instrumentID:n.id,bid:n.bid,ask:n.ask,open:n.open,close:n.close,high:n.high,low:n.low,change:Format.toPercent(n.change),dataTime:n.tradeTime,state:n.state,midRate:Format.toMidRate(n.bid,n.ask),time:Format.toTime(n.tradeTime)};i.Update(e[t],r)}};return{Start:function(){e||(t(),e=!0)},Stop:function(){e&&(n(),i.Clear(),e=!1)},GetOrderRate:function(e,t){var n=r(e);return t==eOrderDir.Buy?n.ask:n.bid},GetQuote:r,RemoveQuoteSubscription:function(e){var t=i.Get(e);return t&&i.Remove(t),t},Values:i.Values}}}),define("ComplianceBeforeDeposit",["require","knockout","StatesManager","PopUpManager","AmlPopupManager","FxNet/DataAccessLayer/dalCompliance","Dictionary","LoadDictionaryContent!client_questionnaire"],function(e){var r=e("knockout"),n=e("StatesManager"),i=e("PopUpManager"),t=e("AmlPopupManager"),o=e("FxNet/DataAccessLayer/dalCompliance"),a=e("Dictionary"),s=a.GetItem("ClientQuestionnaireTitle","client_questionnaire");return{isCddBeforeDeposit:function(){return"1"===a.GetItem("preDepositRequired")&&(n.States.IsCddStatusNotComplete()||n.States.IsKycStatusRequired()||n.States.IsKycReviewStatusRequired())},showMifidPopupBeforeDeposit:function(){if("1"!==a.GetItem("showCompliancePageBeforeDeposit"))return!1;var e,t=AlertsManager.GetAlert(AlertTypes.ClientKnowledgeQuestionnaire);switch(n.States.KycReviewStatus()){case eKYCReviewStatus.Review:e=KnowledgeAlertTypes.Review;break;case eKYCReviewStatus.Tested:e=KnowledgeAlertTypes.Tested;break;case eKYCReviewStatus.Inappropriate:e=KnowledgeAlertTypes.Inappropriate;break;case eKYCReviewStatus.Unsuitable:e=KnowledgeAlertTypes.Unsuitable;break;default:e=null}return null!==e&&(t.popAlert(function(){return!0},e),!0)},isMoveToCddFullNoPopupBeforeDeposit:function(){return"1"===a.GetItem("showCompliancePageBeforeDeposit")&&(n.States.IsCddStatusNotComplete()||n.States.IsKycStatusRequired()||n.States.IsKycReviewStatusRequired())},openCdd:function(e,t){o.logUserShouldCompleteCdd(e),i.OpenAsPopup(eViewTypes.vClientQuestionnaire,{dialogClass:"deal-slip PopupClientQuestionnaire",title:s});var n=r.postbox.subscribe("thankyou-continue-clicked",function(){t(),n.dispose()})},isKycStatusFailCannotDeposit:function(){return n.States.KycStatus()===eKYCStatus.Failed&&n.States.KycReviewStatus()===eKYCReviewStatus.Appropriate},showKycWarningAlert:function(){AlertsManager.GetAlert(AlertTypes.ClientQuestionnaire).popAlert().done()},isAmlRestricted:function(){return n.States.AmlStatus()===eAMLStatus.Restricted},showAmlPopup:function(){t.show()}}}),define("BaseOrder",["require","knockout","Dictionary","Customer","QuotesManager","StatesManager","InstrumentsManager","InstrumentTranslationsManager","ViewsManager","MinEquityAlert"],function(e){var u=e("knockout"),g=e("Dictionary"),c=e("Customer"),A=e("QuotesManager"),v=e("StatesManager"),y=e("InstrumentsManager"),w=e("InstrumentTranslationsManager"),b=e("MinEquityAlert"),r=e("ViewsManager");return function(){var o,n={},d=function(){r.SwitchViewVisible(eForms.Aml,{})};function p(){var e={},t=u.toJS(o);e.instrumentId=t.selectedInstrument,e.tab=t.initialToolTab,e.transactionType=t.PageName&&t.PageName===eDealPage.NewLimitViewModel?eTransactionSwitcher.NewLimit:eTransactionSwitcher.NewDeal,e.orderDir=t.orderDir,e.showTools=t.showTools,e.selectedDealAmount=t.selectedDealAmount,r.RedirectToForm(eForms.ClientQuestionnaire,{from:{form:r.ActiveFormType(),viewArgs:e}})}function a(e){return e&&1==e.isFuture&&c.prop.futureStatus==eTradingPermissions.Required?eTradingAgreement.Needed:eTradingAgreement.NotNeeded}function f(e,t,n,r){AlertsManager.UpdateAlert(e,t,"",n,r),AlertsManager.PopAlert(e)}function h(e,t,n){n=extendType(n,{serverResponses:t}),AlertsManager.UpdateAlert(e,"","",[],n),AlertsManager.PopAlert(e)}function i(e,t,n,r){var i=[],o=0,a=r||{},s=AlertTypes.ServerResponseAlert;extendType(r,{callerId:t,instrument:n});for(var l=0,u=e.length;l<u;l++)switch(e[l].msgKey){case"SuccessPriceAlertAdd":case"OrderError20":case"OrderError22":return void h(AlertTypes.PriceAlertServerResponseAlert,e,r);case"SuccessLimitEdit":case"SuccessLimitDelete":case"SuccessLimitAdd":return void h(AlertTypes.LimitsServerResponseAlert,e,r);case"SuccessPriceAlertDelete":case"OrderError23":return void h(AlertTypes.PriceAlertClosedServerResponseAlert,e,r);case"SuccessDealAdd":return void h(AlertTypes.DealAddServerResponseAlert,e,r);case"SuccessDealClose":return void h(AlertTypes.DealsClosedServerResponseAlert,e,r);case"OrderError2":case"OrderError3":case"OrderError12":i[o++]=String.format("{0} \n",g.GetItem(e[l].msgKey)),a={};break;case"OrderError13":return void b.Show(e[l],n?w.Long(n.id):null,!1);case"OrderError105":return void AlertsManager.PopAlert(PostPortfoliosLoginsAlerts.IsActive);case"OrderError121":return void p();case"OrderError107":case"OrderError115":return void d();case"OrderError106":return void(v.States.KycStatus()===eKYCStatus.Failed&&v.States.KycReviewStatus()===eKYCReviewStatus.Appropriate?(s=AlertTypes.ClientQuestionnaire,AlertsManager.GetAlert(AlertTypes.ClientQuestionnaire).popAlert().done()):p());case"OrderError116":case"OrderError120":var c=e[l].arguments.pop(-1),A=w.Short(c);A&&(e[l].arguments[0]=A),i[o++]=m(e[l]),a={};break;case"SuccessCancelPendingWithdrawal":case"CancelProcessWithdrawal":i[o++]=String.format(g.GetItem(e[l].msgKey),e[l].itemId,e[l].amount,e[l].ccy);break;case"FaildCancelPendingWithdrawal":i[o++]=g.GetItem(e[l].msgKey);break;default:if(eOrderActionType[t]==eOrderActionType.CloseDeal&&"ServerError"!==e[l].msgKey)return void h(AlertTypes.DealsClosedServerResponseAlert,e,r);i[o++]=m(e[l]),a={}}f(s,"",i,a)}function m(e){var t=g.GetItem(e.msgKey||"InternalError"),n=e.arguments;return isNullOrUndefined(n)?t:String.format(t,n)}function s(){!0===v.States.fxDenied()&&(AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,null,g.GetItem("OrderError102"),""),1==v.States.ExposureCoverageAlert()&&(AlertsManager.GetAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert),AlertsManager.UpdateAlert(PostClientStatesLoginsAlerts.ExposureCoverageAlert)),(!0===c.prop.isPending||c.prop.isLive)&&AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,null,g.GetItem("OrderError102"),""),v.States.FolderTypeId()===parseInt(eFolderType.TradingBonus)&&AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,null,g.GetItem("TradingBonusMessage"),""),!0===c.prop.isDemo&&!0===c.prop.isAccountExpired&&AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,null,g.GetItem("DemoExpiredMessage"),""),!0===v.States.isIntDebit()&&AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,null,g.GetItem("OnlineTradingDisabled"),""),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert))}function l(e){return e.status==eResult.Error||"ServerError"===e.status}return{Init:function(e,t){o=t,function(e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])}(e)},CheckTradingAgreement:a,ShowMessageResult:i,ShowAlert:f,OnActionReturn:function(e,t,n,r){i(e,t,n,r)},LimitValidate:function(e,t){var n,r=y.GetInstrument(e),i=a(r);return 1==v.States.fxDenied()?(s(),!1):i!=eTradingAgreement.NotNeeded?(n=String.format(g.GetItem("rcFuturesRedirect"),r.ccyPair),AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,"",n,""),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert),!1):o.orderDir()==eOrderDir.None?(n=g.GetItem("limitOrderDirEmpty"),AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,"",n,""),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert),!1):o.openLimit()?isNumber(o.openLimit())?!!isEmptyValue(t)||(n=t,AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,"",null,n),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert),!1):(n=g.GetItem("limitLevelInvalid"),AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,"",n,""),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert),!1):(n=g.GetItem("limitLevelEmpty"),AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,"",n,""),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert),!1)},ValidateOnlineTradingUser:s,LimitValidateQuote:function(e){var t,n=y.GetInstrument(e),r=A.Quotes.GetItem(e);return!(!c.prop.brokerAllowLimitsOnNoRates&&r&&r.state==eQuoteStates.NotActive&&(t=String.format("{0} - "+g.GetItem("InstrumentInactive"),n.ccyPair),AlertsManager.UpdateAlert(AlertTypes.SimpleClientAlert,"",t,""),AlertsManager.PopAlert(AlertTypes.SimpleClientAlert),1))},ResultStatusSuccess:function(e){for(var t=0,n=e.length;t<n;t++)if(l(e[t]))return!1;return!0},RaiseErrorEvent:function(e,t,n){for(var r=0;r<e.length;r++)l(e[r])&&(n.type="server",n.reason=e[r].msgKey,isEmptyValue(t)||u.postbox.publish(t,n))}}}}),define("PaymentSelectionBehaviors",["require","knockout","environmentData","Customer","Dictionary","ViewsManager","AlertsManager"],function(e){var i=e("knockout"),o=e("environmentData"),t=e("Customer"),a=e("Dictionary"),s=e("ViewsManager"),l=e("AlertsManager"),u=function(){var e=o.paymentBehaviorConfig;e&&0<e.length&&e.forEach(function(e){e.ShowInMobile&&(e.ViewType&&s.ChangeViewState(eViewTypes[e.ViewType],eViewState.Stop),e.SubViews&&e.SubViews.forEach(function(e){e.ViewType&&s.ChangeViewState(eViewTypes[e.ViewType],eViewState.Stop)}))})},n=function(e){return e.find(function(e){return e.methodID===eDepositingActionType.SafechargePPP})?e.filter(function(e){return e.methodID!==eDepositingActionType.Regular}):e};return{Stop:u,ShowSelectedBehavior:function(t,n){u();var e=o.paymentBehaviorConfig.filter(function(e){return e.Id.toString()===t.toString()});if(e[0].SubViews){var r=e[0].SubViews.filter(function(e){return e.ViewId===n});s.ChangeViewState(eViewTypes[r[0].ViewType],eViewState.Start),i.postbox.publish("deposit-type-changed",{depositType:r[0].DepositType})}else e&&0<e.length?(s.ChangeViewState(eViewTypes[e[0].ViewType],eViewState.Start),i.postbox.publish("deposit-type-changed",{depositType:e[0].DepositType})):(l.UpdateAlert(AlertTypes.ServerResponseAlert,null,a.GetItem("DepositNoPaymentMethods"),null,{redirectToView:eForms.Quotes}),l.PopAlert(AlertTypes.ServerResponseAlert))},GetDefaultInstructions:function(){return[]},FilterAvailablePayments:function(e){return n(e).filter(function(t){var e=o.paymentBehaviorConfig.filter(function(e){return e.Id.toString()===t.methodID.toString()});return e&&0<e.length})},CheckMissingCustomerInformation:function(){t.prop.hasMissingInformation?(i.postbox.publish("trading-event","agreement-view"),s.ChangeViewState(eViewTypes.vMissingCustomerInformation,eViewState.Start)):s.ChangeViewState(eViewTypes.vMissingCustomerInformation,eViewState.Stop)},OnCustomerSuccessfullUpdate:function(){i.postbox.publish("trading-event","agreement-success"),s.ChangeViewState(eViewTypes.vMissingCustomerInformation,eViewState.Stop)},CloseMissingDetailsDialog:function(){}}}),define("currentAppFolder/Configuration/config",{componentsToPreload:["fx-component-main-menu","fx-component-transaction-switcher","fx-component-new-deal-slip","fx-component-new-limit","fx-component-deal-tools","fx-component-chart-tool","fx-component-market-info-tool","fx-component-instrument-info-tool","fx-component-signals-tool","fx-upload-documents-page","fx-trading-signals","fx-economic-calendar","fx-component-live-cash-back","fx-component-open-deals-grid"]});var InitConfiguration={ApplicationConfiguration:{applicationType:window.eApplicationTypes.Mobile,doubleTabListenInterval:500},NewDealConfiguration:{showTools:!0,onSuccessRedirectTo:eForms.OpenDeals,setlimitsConfiguration:{defaultTab:eSetLimitsTabs.NoTabs,parentView:eViewTypes.vNewDeal},dealAmountPrefixKey:"dealAmountLabel_",profileKeyForDefaultTab:"defaultTab",currentRateDirectionSwitch:!1,chart:{direction:eChartDirection.Same,allowDragLine:!0,keys:{stopLoss:"chartline_StopLoss",takeProfit:"chartline_TakeProfit",currentRate:"chartline_CurrentRate"}}},NewLimitConfiguration:{showTools:!0,onSuccessRedirectTo:eForms.Limits,setlimitsConfiguration:{defaultTab:eSetLimitsTabs.NoTabs,parentView:eViewTypes.vNewLimit},dealAmountPrefixKey:"dealAmountLabel_",profileKeyForDefaultTab:"defaultTab",currentRateDirectionSwitch:!1,chart:{direction:eChartDirection.Same,allowDragLine:!0,keys:{stopLoss:"chartline_IfDoneStopLoss",takeProfit:"chartline_IfDoneTakeProfit",currentRate:"chartline_CurrentRate",limitLevel:"chartline_LimitLevel"}}},EditLimitSettingsConfiguration:{setlimitsConfiguration:{defaultTab:eSetLimitsTabs.NoTabs},profileKeyForDefaultTab:"editLimitTab"},CloseDealSettingsConfiguration:{profileKeyForDefaultTab:"closeDealTab",currentRateDirectionSwitch:!0,chart:{direction:eChartDirection.Opposite,allowDragLine:!1,keys:{stopLoss:"chartline_StopLoss",takeProfit:"chartline_TakeProfit",currentRate:"chartline_ClosingRate",openRate:"chartline_OpenRate"}}},EditClosingLimitConfiguration:{setlimitsConfiguration:{defaultTab:eSetLimitsTabs.Rate},profileKeyForDefaultTab:"editClosingLimitTab",redirectToOpenDeals:!0,currentRateDirectionSwitch:!0,chart:{direction:eChartDirection.Opposite,allowDragLine:!0,keys:{stopLoss:"chartline_StopLoss",takeProfit:"chartline_TakeProfit",currentRate:"chartline_ClosingRate",openRate:"chartline_OpenRate"}}},ActiveLimitsConfiguration:{defaultLimitMode:eLimitMode.OpenDeal},LimitsConfiguration:{defaultLimitType:eLimitsType.Active},OpenDealsConfiguration:{closeSelected:!0},MarketInfoConfiguration:{hubname:"sentimentsHub"},WithdrawalConfiguration:{withdrawalRequestSuccessRedirectToView:eForms.Wallet,stepLoadFailRedirectView:eForms.Quotes,wizardConfig:{defaultForm:eViewTypes.vWithdrawal,defaultStep:eWithdrawalSteps.setAmount,useBrowserHistory:!0,steps:{1:{component:"fx-component-withdrawal-amount",previousStep:{label:"lblBack",valid:!0,visible:!1},nextStep:{label:"lblContinue",valid:!1,visible:!0}},2:{component:"fx-component-withdrawal-method",previousStep:{label:"lblBack",valid:!0,visible:!0},nextStep:{label:"lblContinue",valid:!1,visible:!0}},3:{component:"fx-component-withdrawal-setbankdetails",previousStep:{label:"lblBack",valid:!0,visible:!0},nextStep:{label:"lblContinue",valid:!0,visible:!0}},5:{component:"fx-component-withdrawal-setapproval",previousStep:{label:"lblBack",valid:!0,visible:!0},nextStep:{label:"lblApprove",valid:!0,visible:!0}}}}},PendingWithdrawalConfiguration:{},FavoriteInstrumentsConfiguration:{favoriteInstrumentsLimit:50},QuotesPresetConfiguration:{areQuotesVisible:!0},WalletConfiguration:{formatConditionalVolume:!0,useAdvancedView:!1,isVisibleUsedMargin:!0,supressDialogs:!0},BalanceConfiguration:{pageSize:20},ClosedDealsConfiguration:{pageSize:20,threshold:2e3},AccountCardRecordsConfiguration:{pageSize:20},GTMConfiguration:{gtmContentKey:"googleTagManagerId",disabledGTMToken:"#"},EconomicCalendarConfiguration:{hubname:"econoCalendarHub",eventsMaxImportance:3,contentKeySection:"ec",contentKeyFilterPrefix:"lbl",mobilePageSize:10,defaultDateTab:eDateFilter.ThisWeek},SignalsConfiguration:{pageSize:10},ContractRolloverConfiguration:{defaultPage:1,pageSize:100},AdvinionChartConfiguration:{rootPath:UrlResolver.getStaticJSPath("Advinion"),cssLoaderPath:UrlResolver.getAssetsPath()+"/Skins/Mobile/AllBrokers/Default/chart-customization.css"},UploadDocumentsConfiguration:{interWindowsCommunicationLimit:3e4,uploadFrameReloadTimeout:1e4,uploadFrameRetryCount:3},AmlConfiguration:{countriesWithDisabledUpload:["Hungary"],countriesWithVideoId:["Hungary"],countriesWithDisabledAlternativeSend:["Hungary"]},ThankYouConfiguration:{brokersThatShouldShowAmlNotice:["3"]},MarketInfoSectionsConfiguration:{tsArea:!0,miArea:!1,hlArea:!1,iiArea:!1},DepositConfirmationConfiguration:{excludeList:{idList:["ClearAction","SendActionContainer","DisableOverlay"],tagList:{IFRAME:null,LINK:{rel:["dns-prefetch","preconnect","prefetch","manifest"]}}}}};define("DialogViewModel",[],function(){return window.DialogViewModel=void 0,window.DialogViewModel}),define("currentAppFolder/Configuration/mobilePatches",[],function(){var e,n=navigator.userAgent.toLowerCase(),t=n.match(/(iphone|ipod|ipad|android)/)||"",r={device:{iphone:0<=t.indexOf("iphone"),ipad:0<=t.indexOf("ipad"),ipod:0<=t.indexOf("ipod"),android:0<=t.indexOf("android")},type:{galaxy:n.match(/gt\-(i\d\d\d\d)/)?n.match(/gt\-(i\d\d\d\d)/)[1]:"",nexus:n.match(/nexus (\d)/)?n.match(/nexus (\d)/)[1]:""},system:{ios:n.match(/iphone os (\d+)/)?n.match(/iphone os (\d+)/)[1]:"",height:$(window).height(),android_4_3:n.match(/android 4.3/)||"",android_4_2:n.match(/android 4.2/)||""},browser:{opera:n.match(/opera/)||"",safari:n.match(/safari/)||"",firefox:n.match(/firefox/)||"",chrome:n.match(/chrome/)||""},check:{}};(r.check.apple=n.match(/iphone|ipod|ipad/)||"",r.check.ios_chrome=r.check.apple&&0<n.indexOf("crios"),r.check.s2_default=r.device.android&&"i9100"==r.type.galaxy&&r.browser.safari&&n.match(/version\//),r.browser.android_default=r.device.android&&r.browser.safari&&n.match(/version\//),window.addEventListener("orientationchange",i,!1),r.device.android&&r.browser.firefox&&"matchMedia"in window)&&window.matchMedia("(orientation: portrait)").addListener(function(e){0==$("#main").find("input:focus").length&&(i(),e.matches?document.querySelector("body").classList.remove("landscape"):document.querySelector("body").classList.add("landscape"))});function i(){void 0!==e&&clearTimeout(e),r.check.apple?(s(),o(),Browser.forceRepaintIosRotate()):(e=setTimeout(a,2e3),window.scrollTo(0,1))}function o(){var e;0==(e=window.orientation)?document.querySelector("body").classList.remove("landscape"):90!=e&&-90!=e||document.querySelector("body").classList.add("landscape")}function a(){s()}function s(){var e=$(window).height();if(r.device.iphone){var t=e-window.outerHeight;e=e+=t<47||t<-136?65:4}else r.device.ipad||window.outerHeight-window.innerHeight<=254||0<n.indexOf("gt-i9300")||r.browser.opera||(e+=55);$("#splash_page").css("height",e+"px"),l()}function l(){setTimeout(function(){window.scrollTo(0,1)},100)}return window.mobile=r,window.mobilePatches={startFunctions:function(){var e,t,n;s(),r.check.s2_default&&(e=!1,t=window.innerHeight,(n=$("#main")).on("input[type=text] , input[type=number]","focus",function(){window.addEventListener("resize",function(){window.orientation=window.orientation||0,e=window.innerHeight<t,90!=window.orientation&&-90!=window.orientation||n.removeClass("input-focus"),e&&0==window.orientation?n.addClass("input-focus"):n.removeClass("input-focus")},!1),n.off("input[type=text] , input[type=number]","focus")})),r.browser.android_default&&"i9300"==r.type.galaxy&&$("#main").addClass("input-write"),l(),o()},delayedFooter:a}}),define("Containers",[],function(){var t,n={},r=new THashTable,e=[eViewTypes.vMissingCustomerInformation];n[eUIVersion.Default]=function(){r.SetItem(eForms.Quotes,{mappedViews:[eViewTypes.vQuotes,eViewTypes.vMenu,eViewTypes.vMarketClosed,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vQuotesPreset]}),r.SetItem(eForms.OpenDeals,{mappedViews:[eViewTypes.vOpenDeals,eViewTypes.vMenu,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.Limits,{mappedViews:[eViewTypes.vLimits,eViewTypes.vMenu,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.ClosedDeals,{mappedViews:[eViewTypes.vClosedDealsSummaries,eViewTypes.vMenu,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.ClosedDealsFilter,{mappedViews:[eViewTypes.vClosedDealsFilter,eViewTypes.vPopupHeader]}),r.SetItem(eForms.ContractRollover,{mappedViews:[eViewTypes.vContractRollover,eViewTypes.vPopupHeader]}),r.SetItem(eForms.AccountCardRecords,{mappedViews:[eViewTypes.vAccountCardRecords,eViewTypes.vPopupHeader]}),r.SetItem(eForms.AccountCardRecordsCosts,{mappedViews:[eViewTypes.vAccountCardRecords,eViewTypes.vPopupHeader]}),r.SetItem(eForms.Wallet,{mappedViews:[eViewTypes.vWallet,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.Transaction,{mappedViews:[eViewTypes.vTransactionSwitcher,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.NewPriceAlert,{mappedViews:[eViewTypes.vNewPriceAlert,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.ClosedDealDetails,{mappedViews:[eViewTypes.vClosedDealDetails,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.Balance,{mappedViews:[eViewTypes.vBalance,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.NetExposure,{mappedViews:[eViewTypes.vNetExposure,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.CashBack,{mappedViews:[eViewTypes.vCashBack,eViewTypes.vPopupHeader]}),r.SetItem(eForms.Withdrawal,{mappedViews:[eViewTypes.vWithdrawal,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.EditFavoriteInstruments,{mappedViews:[eViewTypes.vEditFavoriteInstruments,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.EditClosingLimit,{mappedViews:[eViewTypes.vEditClosingLimit,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.CloseDeal,{mappedViews:[eViewTypes.vCloseDeal,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.InternalContactUs,{mappedViews:[eViewTypes.vInternalContactUs,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.PendingWithdrawal,{mappedViews:[eViewTypes.vPendingWithdrawal,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.EditLimit,{mappedViews:[eViewTypes.vEditLimit,eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.Menu,{mappedViews:[eViewTypes.vMenu]}),r.SetItem(eForms.Deposit,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vPaymentTypes,eViewTypes.vMenu]}),r.SetItem(eForms.DepositSuccess,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vDepositSuccessThankYou]}),r.SetItem(eForms.DepositPending,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vDepositPendingThankYou]}),r.SetItem(eForms.ConcretePaymentForm,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vConcretePaymentForm]}),r.SetItem(eForms.Charts,{mappedViews:[eViewTypes.vCharts]}),r.SetItem(eForms.AddInstrument,{mappedViews:[eViewTypes.vAddInstrument,eViewTypes.vTradingSummery]}),r.SetItem(eForms.ThirdParty,{mappedViews:[eViewTypes.vThirdParty]}),r.SetItem(eForms.Aml,{mappedViews:[eViewTypes.vAmlStatus,eViewTypes.vPopupHeader]}),r.SetItem(eForms.ClientQuestionnaire,{mappedViews:[eViewTypes.vClientQuestionnaire,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.ChangePassword,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vChangePassword]}),r.SetItem(eForms.UploadDocuments,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vUploadDocuments]}),r.SetItem(eForms.TradingSignals,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vTradingSignals]}),r.SetItem(eForms.EconomicCalendar,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vEconomicCalendar]}),r.SetItem(eForms.EconomicCalendarFilter,{mappedViews:[eViewTypes.vPopupHeader,eViewTypes.vEconomicCalendar,eViewTypes.vEconomicCalendarFilter]}),r.SetItem(eForms.EducationalTutorials,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vEducationalTutorialsSwitcher]}),r.SetItem(eForms.TradingSignalDetails,{mappedViews:[eViewTypes.vDynamicHeader,eViewTypes.vTradingSummery,eViewTypes.vTradingSignalDetails]}),r.SetItem(eForms.SignalsDisclaimer,{mappedViews:[eViewTypes.vPopupHeader,eViewTypes.vSignalsDisclaimer]}),r.SetItem(eForms.NotificationsSettings,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vNotificationsSettings]}),r.SetItem(eForms.WithdrawalBankDetails,{mappedViews:[eViewTypes.vWithdrawalBankDetails,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.WithdrawalCCDetails,{mappedViews:[eViewTypes.vWithdrawalCCDetails,eViewTypes.vDynamicHeader]}),r.SetItem(eForms.HelpDepositThankYou,{mappedViews:[eViewTypes.vHelpDepositThankYou,eViewTypes.vPopupHeader]}),r.SetItem(eForms.HelpUploadDocuments,{mappedViews:[eViewTypes.vHelpUploadDocuments,eViewTypes.vPopupHeader]}),r.SetItem(eForms.EducationalTutorialsAccess,{mappedViews:[eViewTypes.vPopupHeader,eViewTypes.vEducationalTutorialsAccess]}),r.SetItem(eForms.LoginOptions,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vLoginOptions]}),r.SetItem(eForms.PriceAlerts,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vPriceAlerts]}),r.SetItem(eForms.WireTransfer,{mappedViews:[eViewTypes.vWireTransfer]}),r.SetItem(eForms.WireTransferSuccess,{mappedViews:[eViewTypes.vTradingSummery,eViewTypes.vDynamicHeader,eViewTypes.vWireTransferSuccess]}),r.SetItem(eForms.UserFlowMap,{mappedViews:[eViewTypes.vUserFlowMap]}),r.SetItem(eForms.LanguageSettings,{mappedViews:[eViewTypes.vDynamicHeader,eViewTypes.vLanguageSettings]}),r.SetItem(eForms.PersonalInformation,{mappedViews:[eViewTypes.vDynamicHeader,eViewTypes.vPersonalInformation]})};return{Init:function(e){r.Clear(),void 0===n[e]&&(e=eUIVersion.Default),n[e](),t=e},IndependentViews:e,Forms:r,MainForm:eForms.Quotes,UiVersion:function(){return t}}}),define("PlugInConfiguration",["require","knockout","jquery","CookieHandler","Logger","Customer","ViewModelsManager","KoComponentLoader","PaymentsConfiguration","currentAppFolder/Configuration/mobilePatches","AdvinionChartsManager","advinionChartSettings","customBindings/common","customBindings/mobile"],function(n){var t,r=n("knockout"),i=n("jquery"),o=n("CookieHandler"),a=n("Logger"),s=n("ViewModelsManager"),l=n("PaymentsConfiguration"),u=n("currentAppFolder/Configuration/mobilePatches");return t="LoadDictionaryContent!deals_DealMarketInfoTool",{AdvinionChartsInit:function(){var e=n("AdvinionChartsManager"),t=n("advinionChartSettings");e.Init(t)},AdjustCulture:function(){if("undefined"!=typeof Globalize){var e={numberFormat:{}};e.numberFormat[","]="",Globalize.addCultureInfo("noThousandsSeparator","default",e)}return!0},RegisterComponents:function(e){e=e||{},r.components.register("fx-component-new-pricealert",{deps:["customBindings/SpinnerField"],viewModel:{require:"viewModels/NewPriceAlertViewModel"},template:{require:"text!partial-views/mobile-limits-newpricealert.html"}}),r.components.register("fx-instrument-price-alert",{viewModel:{require:"viewModels/InstrumentPriceAlertViewModel"},template:{require:"text!mobileHtml/statichtml/instrument-price-alert.html"}}),r.components.register("fx-component-spinner",{template:{element:"fx-template-spinner"}}),r.components.register("fx-open-question",{deps:["LoadDictionaryContent!client_questionnaire"],viewModel:{require:"viewModels/questionnaire/question/open-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/open-question.html"}}),r.components.register("fx-phone-number-question",{viewModel:{require:"viewModels/questionnaire/question/phone-number-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/phone-number-question.html"}}),r.components.register("fx-overridable-question",{viewModel:{require:"viewModels/questionnaire/question/overridable-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/open-question.html"}}),r.components.register("fx-radio-question",{viewModel:{require:"viewModels/questionnaire/question/radio-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/radio-question.html"}}),r.components.register("fx-select-question",{viewModel:{require:"viewModels/questionnaire/question/select-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/select-question.html"}}),r.components.register("fx-radiolist-question",{viewModel:{require:"viewModels/questionnaire/question/radio-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/radiolist-question.html"}}),r.components.register("fx-search-question",{deps:["customBindings/AutocompleteBinding"],viewModel:{require:"viewModels/questionnaire/question/search-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/search-question.html"}}),r.components.register("fx-date-question",{deps:["LoadDictionaryContent!client_questionnaire"],viewModel:{require:"viewModels/questionnaire/question/date-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/date-question.html"}}),r.components.register("fx-checkbox-question",{viewModel:{require:"viewModels/questionnaire/question/checkbox-question"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/checkbox-question.html"}}),r.components.register("fx-questionnaire",{viewModel:{require:"viewModels/questionnaire/question/questionnaire"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/questionnaire.html"}}),r.components.register("fx-progress-bar-a",{deps:["LoadDictionaryContent!client_questionnaire"],viewModel:{require:"viewModels/questionnaire/progress-bar-a"},template:{require:"text!mobileHtml/statichtml/questionnaire/progress-bar-a.html"}}),r.components.register("fx-progress-title",{deps:["LoadDictionaryContent!client_questionnaire"],viewModel:{require:"viewModels/questionnaire/progress-title"},template:{require:"text!mobileHtml/statichtml/questionnaire/progress-title-a.html"}}),r.components.register("fx-client-questionnaire",{deps:["LoadDictionaryContent!client_questionnaire"],viewModel:{require:"viewModels/questionnaire/client-questionnaire"},template:{require:"text!mobileHtml/statichtml/questionnaire/client-questionnaire.html"}}),r.components.register("fx-tooltip",{viewModel:{require:"viewModels/questionnaire/tool-tip"},template:{require:"text!mobileHtml/statichtml/questionnaire/tool-tip.html"}}),r.components.register("fx-welcome-client-questionnaire",{viewModel:{require:"viewModels/questionnaire/welcome-client-questionnaire"},template:{require:"text!mobileHtml/statichtml/questionnaire/welcome-client-questionnaire.html"}}),r.components.register("fx-thankyou-client-questionnaire",{deps:["LoadDictionaryContent!client_questionnaire"],viewModel:{require:"viewModels/questionnaire/thankyou-client-questionnaire"},template:{require:"text!mobileHtml/statichtml/questionnaire/thankyou-client-questionnaire.html"}}),r.components.register("fx-unsuccessful-client-questionnaire",{deps:["LoadDictionaryContent!client_questionnaire"],viewModel:{require:"viewModels/questionnaire/unsuccessful-client-questionnaire"},template:{require:"text!mobileHtml/statichtml/questionnaire/unsuccessful-client-questionnaire.html"}}),r.components.register("fx-question-validation-balloon",{template:{require:"text!mobileHtml/statichtml/questionnaire/question/question-validation-balloon.html"}}),r.components.register("fx-question-tooltip-balloon",{viewModel:{require:"viewModels/questionnaire/question-tooltip-balloon"},template:{require:"text!mobileHtml/statichtml/questionnaire/question/question-tooltip-balloon.html"}}),r.components.register("fx-customer-activation",{viewModel:{require:"viewModels/MissingCustomerInformationViewModel"},template:{require:"text!partial-views/mobile-customer-mobilemissinginformation.html"}}),r.components.register("fx-upload-documents-page",{deps:["LoadDictionaryContent!FAQUPLOADDOCUMENTS","LoadDictionaryContent!compliance_UploadDocuments","LoadDictionaryContent!Tooltip","LoadDictionaryContent!Category","LoadDictionaryContent!Status","LoadDictionaryContent!UploadDocumentsStatusPopUpMessages"],viewModel:{require:"viewModels/UploadDocumentsViewModel"},template:{require:"text!mobileHtml/statichtml/compliance/upload-documents.html"}}),r.components.register("fx-component-change-password",{viewModel:{require:"viewModels/ChangePasswordViewModel"},template:{require:"text!account/changepasswordpartial?SuppressExpirationMessage=true&refresh="+Date.now()}}),r.components.register("fx-trading-signals",{deps:["LoadDictionaryContent!customerTools_TradingSignalDetails"],viewModel:{require:"mobileViewModels/SignalsViewModel"},template:{require:"text!partial-views/mobile-customertools-tradingsignals.html"}}),r.components.register("fx-trading-signal-details",{viewModel:{require:"mobileViewModels/SignalDetailsViewModel"},template:{require:"text!partial-views/mobile-customertools-tradingsignaldetails.html"}}),r.components.register("fx-trading-signals-detail-page",{deps:["LoadDictionaryContent!customerTools_TradingSignalDetails"],viewModel:{require:"mobileViewModels/SignalDetailsViewModel"},template:{require:"text!mobileHtml/statichtml/Signals/trading-signals-detail.html"}}),r.components.register("fx-signal-details",{template:{element:"fx-template-signal-details"}}),r.components.register("fx-component-dealsignalstool-disclaimer",{template:{require:"text!mobileHtml/statichtml/deals/DealSignalsDisclaimer.html"},deps:["LoadDictionaryContent!deals_DealSignalsTool"]}),r.components.register("fx-economic-calendar",{viewModel:{require:"mobileViewModels/EconomicCalendarViewModel"},template:{require:"text!partial-views/mobile-customertools-economiccalendar.html"}}),r.components.register("fx-economic-calendar-filter",{viewModel:{require:"mobileViewModels/EconomicCalendarFilterViewModel"},template:{require:"text!partial-views/mobile-customertools-economiccalendarfilter.html"}}),r.components.register("fx-educational-tutorials-switcher",{viewModel:{require:"mobileViewModels/EducationalTutorialsSwitcherViewModel"},template:{require:"text!partial-views/mobile-customertools-educationaltutorialsswitcher.html"}}),r.components.register("fx-educational-tutorials",{viewModel:{require:"mobileViewModels/EducationalTutorialsViewModel"},template:{require:"text!partial-views/mobile-customertools-educationaltutorials.html"}}),r.components.register("fx-component-educational-tutorial-access",{deps:["LoadDictionaryContent!accessRequest"],viewModel:{require:"viewModels/AccessRequestViewModel"},template:{require:"text!partial-views/mobile-customertools-educationaltutorialsaccess.html"}}),r.components.register("fx-aml-status-page",{viewModel:{require:"viewModels/AmlViewModel"},template:{require:"text!partial-views/mobile-compliance-amlstatus.html"}}),r.components.register("fx-popup-header",{deps:["LoadDictionaryContent!partialViews_vMobilePopupHeader"],viewModel:{require:"mobileViewModels/PopupHeaderViewModel"},template:{require:"text!mobileViews/popup-header.html"}}),r.components.register("fx-component-cash-back",{viewModel:{require:"viewModels/CashBackViewModel"},template:{require:"text!partial-views/mobile-deals-cashback.html"}}),r.components.register("fx-component-live-cash-back",{viewModel:{require:"viewModels/BonusViewModel"},template:{require:"text!partial-views/mobile-deals-livecashback.html"}}),r.components.register("fx-component-spread-discount",{viewModel:{require:"viewModels/BonusViewModel"},template:{require:"text!partial-views/mobile-deals-spreaddiscount.html"},synchronous:!0}),r.components.register("fx-component-market-closed-view",{viewModel:{require:"viewModels/MarketClosedViewModel"},template:{require:"text!partial-views/mobile-deals-marketclosed.html"}}),r.components.register("fx-component-transaction-switcher",{viewModel:{require:"mobileViewModels/TransactionSwitcherViewModel"},template:{require:"text!partial-views/mobile-deals-transactionswitcher.html"}}),r.components.register("fx-component-new-limit",{deps:["LoadDictionaryContent!deals_NewLimit","customBindings/SpinnerField"],viewModel:{require:"mobileViewModels/NewLimitViewModel"},template:{require:"text!partial-views/mobile-deals-newlimit.html"}}),r.components.register("fx-component-edit-limit",{deps:["LoadDictionaryContent!deals_EditLimit","customBindings/SpinnerField"],viewModel:{require:"mobileViewModels/EditLimitViewModel"},template:{require:"text!partial-views/mobile-deals-editlimit.html"}}),r.components.register("fx-component-new-deal-slip",{deps:["LoadDictionaryContent!deals_NewDeal","customBindings/SpinnerField"],viewModel:{require:"mobileViewModels/NewDealSlipViewModel"},template:{require:"text!partial-views/mobile-deals-newdeal.html"}}),r.components.register("fx-component-require-margin-text",{viewModel:{require:"viewModels/Deals/DealMarginViewModel"},template:{require:"text!partial-views/mobile-deals-requiremargin.html"}}),r.components.register("fx-component-converted-amount-text",{viewModel:{require:"viewModels/Deals/ConvertedAmountViewModel"},template:{require:"text!partial-views/mobile-deals-convertedamount.html"}}),r.components.register("fx-component-deal-tools",{viewModel:{require:"mobileViewModels/DealToolsViewModel"},template:{require:"text!partial-views/mobile-deals-dealtools.html"}}),r.components.register("fx-component-chart-tool",{viewModel:{require:"mobileViewModels/ChartToolViewModel"},template:{require:"text!partial-views/mobile-deals-dealcharttool.html"}}),r.components.register("fx-component-market-info-tool",{deps:[t],viewModel:{require:"mobileViewModels/MarketInfoToolViewModel"},template:{require:"text!partial-views/mobile-deals-dealmarketinfotool.html"}}),r.components.register("fx-component-signals-tool",{viewModel:{require:"mobileViewModels/SignalDetailsViewModel"},template:{require:"text!mobileHtml/statichtml/deals/dealsignalstool.html"},deps:["LoadDictionaryContent!deals_DealSignalsTool"]}),r.components.register("fx-component-instrument-info-tool",{deps:[t],viewModel:{require:"viewModels/Deals/InstrumentInfoViewModel"},template:{require:"text!partial-views/mobile-deals-instrumentinfotool.html"}}),r.components.register("fx-component-market-info-rates",{deps:[t],viewModel:{require:"viewModels/Deals/MarketInfoRatesViewModel"},template:{require:"text!mobileHtml/statichtml/deals/market-info-rates.html"}}),r.components.register("fx-component-rate-range-indicator",{deps:[t],viewModel:{require:"viewModels/Deals/RateRangeIndicatorViewModel"},template:{require:"text!mobileHtml/statichtml/deals/rate-range-indicator.html"}}),r.components.register("fx-component-close-deal",{viewModel:{require:"mobileViewModels/CloseDealViewModel"},template:{require:"text!partial-views/mobile-deals-closedeal.html"}}),r.components.register("fx-component-edit-closing-limit",{deps:["customBindings/SpinnerField"],viewModel:{require:"mobileViewModels/EditClosingLimitViewModel"},template:{require:"text!partial-views/mobile-deals-editclosinglimit.html"}}),r.components.register("fx-schedule-group",{deps:["LoadDictionaryContent!schedulegrouphtml"],viewModel:{require:"viewModels/Deals/ScheduleGroupViewModel"},template:{require:"text!html/statichtml/deals/schedule-group.html"}}),r.components.register("fx-component-dynamic-header",{viewModel:{require:"mobileViewModels/DynamicHeaderViewModel"},template:{element:"fx-template-dynamic-header"}}),r.components.register("fx-component-main-menu",{viewModel:{require:"mobileViewModels/MainMenuViewModel"},template:{element:"fx-template-main-menu"}}),r.components.register("fx-component-d3",{viewModel:{instance:s},template:{element:"fx-template-d3"}}),r.components.register("fx-component-trading-summary",{deps:["LoadDictionaryContent!account_hub_mobile"],viewModel:{require:"viewModels/TradingSummaryViewModel"},template:{element:"fx-template-trading-summary"}}),r.components.register("fx-component-pending-withdrawal",{viewModel:{instance:s},template:{element:"fx-template-pending-withdrawal"}}),r.components.register("fx-component-balance",{viewModel:{instance:s},template:{element:"fx-template-balance"}}),r.components.register("fx-component-net-exposure",{viewModel:{instance:s},template:{element:"fx-template-net-exposure"}}),r.components.register("fx-component-wallet",{viewModel:{require:"viewModels/WalletViewModel"},template:{require:"text!mobileHtml/statichtml/AcccountSummaryWallet.html"},deps:["LoadDictionaryContent!views_vMobileWallet"]}),r.components.register("fx-component-quotes",{viewModel:{instance:s},template:{element:"fx-template-quotes"}}),r.components.register("fx-component-rate-details",{viewModel:{instance:s},template:{element:"fx-template-rate-details"}}),r.components.register("fx-component-closed-deal-details",{viewModel:{instance:s},template:{element:"fx-template-closed-deal-details"}}),r.components.register("fx-component-add-instrument",{viewModel:{instance:s},template:{element:"fx-template-add-instrument"}}),r.components.register("fx-component-validation-templates",{viewModel:{instance:s},template:{element:"fx-template-validation-templates"}}),r.components.register("fx-component-menu",{viewModel:{instance:s},template:{element:"fx-template-menu"}}),r.components.register("fx-component-contact",{template:{require:"text!partial-views/mobile-account-contactus.html"}}),r.components.register("fx-component-internal-contactus",{template:{require:"text!partial-views/mobile-account-internalcontactus.html"}}),r.components.register("fx-component-edit-favorite-instruments",{viewModel:{require:"mobileViewModels/EditFavoriteInstrumentsViewModel"},template:{require:"text!mobileHtml/statichtml/EditFavoriteInstruments.html"}}),r.components.register("fx-component-open-deals-grid",{deps:["LoadDictionaryContent!views_vMobileOpenDeals"],viewModel:{require:"mobileViewModels/OpenDealsViewModel"},template:{require:"text!partial-views/mobile-deals-opendeals.html"}}),r.components.register("fx-component-limits-grid",{deps:["LoadDictionaryContent!views_vMobileLimits"],viewModel:{require:"mobileViewModels/LimitsViewModel"},template:{require:"text!partial-views/mobile-deals-limits.html"}}),r.components.register("fx-component-closed-deals",{deps:["LoadDictionaryContent!views_vMobileClosedDeals"],viewModel:{require:"mobileViewModels/ClosedDealsViewModel"},template:{element:"fx-template-closed-deals"}}),r.components.register("fx-component-price-alerts-grid",{viewModel:{require:"mobileViewModels/PriceAlertsViewModel"},template:{require:"text!partial-views/mobile-limits-pricealerts.html"}}),r.components.register("fx-component-closed-deals-filter",{viewModel:{require:"mobileViewModels/ClosedDealsFilterViewModel"},template:{require:"text!partial-views/mobile-deals-closeddealsfilter.html"}}),r.components.register("fx-component-contract-rollover",{viewModel:{require:"mobileViewModels/ContractRolloverViewModel"},template:{require:"text!partial-views/mobile-deals-contractrollover.html"}}),r.components.register("fx-component-account-card-records",{deps:["LoadDictionaryContent!deals_AccountCardRecords"],viewModel:{require:"mobileViewModels/AccountCardRecordsViewModel"},template:{require:"text!partial-views/mobile-deals-accountcardrecords.html"}}),r.components.register("fx-notifications-settings",{viewModel:{require:"viewModels/NotificationsSettingsViewModel"},template:{require:"text!partial-views/mobile-compliance-notificationssettings.html"},deps:["LoadDictionaryContent!compliance_NotificationsSettings"]}),r.components.register("fx-login-options",{deps:["LoadDictionaryContent!loginOptions"],viewModel:{require:"mobileViewModels/LoginOptionsViewModel"},template:{require:"text!mobileViews/login-options.html"}}),r.components.register("fx-component-demo-deposit-icon",{viewModel:{require:"viewModels/demoDeposit/demo-deposit-icon"},template:{require:"text!mobileHtml/statichtml/demoDeposit/demo-deposit-icon.html"}}),r.components.register("fx-component-deposit-confirmation",{deps:["LoadDictionaryContent!compliance_DepositConfirmation"],viewModel:{require:"viewModels/deposit/DepositConfirmationViewModel"},template:{require:"text!mobileHtml/statichtml/deposit/deposit-confirmation.html"}}),r.components.register("fx-component-electronic-signature",{viewModel:{require:"viewModels/deposit/ElectronicSignatureViewModel"},template:{require:"text!mobileHtml/statichtml/deposit/electronic-signature.html"}}),r.components.register("fx-component-demo-banner-openclosedeal",{viewModel:{require:"viewModels/DemoBannerViewModel"},template:{require:"text!mobileHtml/statichtml/demoaccount-banner.html"}}),r.components.register("fx-component-withdrawal-wrapper",{deps:["LoadDictionaryContent!navigationWizard"],template:{require:"text!mobileHtml/statichtml/withdrawal-wrapper.html"}}),e.withdrawalWizard&&(r.components.register("fx-component-navigation-wizard",{viewModel:{require:"viewModels/NavigationWizardViewModel"},template:{require:"text!mobileHtml/statichtml/navigation-wizard.html"}}),r.components.register("fx-component-withdrawal-amount",{deps:["LoadDictionaryContent!views_vMobileWithdrawal"],viewModel:{require:"viewModels/Withdrawal/Wizard/WithdrawalSetAmountViewModel"},template:{require:"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setamount.html"}}),r.components.register("fx-component-withdrawal-method",{deps:["LoadDictionaryContent!views_vMobileWithdrawal"],viewModel:{require:"viewModels/Withdrawal/Wizard/WithdrawalSetMethodViewModel"},template:{require:"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setmethod.html"}}),r.components.register("fx-component-withdrawal-setbankdetails",{deps:["LoadDictionaryContent!views_vMobileWithdrawal"],viewModel:{require:"viewModels/Withdrawal/Wizard/WithdrawalSetbankdetailsViewModel"},template:{require:"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setbankdetails.html"}}),r.components.register("fx-component-withdrawal-setapproval",{deps:["LoadDictionaryContent!views_vMobileWithdrawal"],viewModel:{require:"viewModels/Withdrawal/Wizard/WithdrawalSetApprovalViewModel"},template:{require:"text!mobileHtml/statichtml/withdrawal/wizard/withdrawal-setapproval.html"}})),r.components.register("fx-component-withdrawal",{viewModel:{require:"viewModels/Withdrawal/WithdrawalViewModel"},template:{require:"text!partial-views/mobile-withdrawal-withdrawal.html"}}),r.components.register("fx-component-withdrawalbankdetails",{viewModel:{require:"viewModels/Withdrawal/WithdrawalBankDetailsViewModel"},template:{require:"text!partial-views/mobile-withdrawal-withdrawalbankdetails.html"}}),r.components.register("fx-component-withdrawal-ccdetails",{viewModel:{require:"viewModels/Withdrawal/WithdrawalCreditCardDetailsViewModel"},template:{require:"text!partial-views/mobile-withdrawal-withdrawalcreditcarddetails.html"}}),r.components.register("fx-component-main-grid-instrument-search",{deps:["customBindings/AutocompleteBinding"],viewModel:{require:"mobileViewModels/MainGridInstrumentSearchViewModel"},template:{require:"text!mobileHtml/statichtml/MainGridInstrumentSearch.html"}}),r.components.register("fx-component-favorites-instrument-search",{deps:["customBindings/AutocompleteBinding"],viewModel:{require:"mobileViewModels/FavoritesInstrumentSearchViewModel"},template:{require:"text!mobileHtml/statichtml/FavoritesInstrumentSearch.html"}}),r.components.register("fx-component-closed-deals-instrument-search",{deps:["customBindings/AutocompleteBinding"],viewModel:{require:"mobileViewModels/ClosedDealsInstrumentSearchViewModel"},template:{require:"text!mobileHtml/statichtml/ClosedDealsInstrumentSearch.html"}}),r.components.register("fx-component-positions-tabs",{viewModel:{instance:s},template:{require:"text!mobileHtml/statichtml/deals/DealTabs.html"}}),r.components.register("fx-component-question-mark",{viewModel:{require:"mobileViewModels/QuestionMarkViewModel"},template:{require:"text!mobileHtml/statichtml/content/questionmark.html"}}),r.components.register("fx-component-help",{viewModel:{require:"mobileViewModels/HelpViewModel"},template:{require:"text!mobileHtml/statichtml/content/Help.html"}}),r.components.register("faq",{viewModel:{require:"viewModels/Content/FaqQuestionViewModel"},template:{require:"text!mobileHtml/statichtml/content/content-faq-question.html"}}),r.components.register("fx-component-faq",{viewModel:{require:"viewModels/questionnaire/FaqViewModel"},template:{require:"text!mobileHtml/statichtml/content/faq.html"}}),r.components.register("fx-component-support",{viewModel:{require:"viewModels/questionnaire/SupportViewModel"},template:{require:"text!mobileHtml/statichtml/questionnaire/support.html"}}),r.components.register("fx-component-amount-spinner",{viewModel:{require:"viewModels/fields/AmountSpinnerFieldViewModel"},template:{require:"text!mobileHtml/statichtml/AmountSpinnerField.html"}}),r.components.register("fx-component-low-margin-spinner",{viewModel:{require:"viewModels/fields/LowMarginSpinnerViewModel"},template:{require:"text!mobileHtml/statichtml/LowMarginSpinnerField.html"}}),r.components.register("fx-component-search-country",{deps:["customBindings/AutocompleteBinding","LoadDictionaryContent!country_names"],viewModel:{require:"mobileViewModels/SearchCountryViewModel"},template:{require:"text!mobileHtml/statichtml/SearchCountry.html"}}),r.components.register("fx-component-wire-transfer-success",{viewModel:{require:"mobileViewModels/Deposit/WireTransferSuccessViewModel"},template:{require:"text!mobileHtml/statichtml/deposit/wire-transfer-success.html"}}),r.components.register("fx-component-access-request-signals-details",{deps:["LoadDictionaryContent!accessRequest"],viewModel:{require:"viewModels/AccessRequestViewModel"},template:{require:"text!mobileHtml/statichtml/Signals/SignalDetailsAccessRequest.html"}}),r.components.register("fx-component-access-request-signals",{deps:["LoadDictionaryContent!accessRequest"],viewModel:{require:"viewModels/AccessRequestViewModel"},template:{require:"text!mobileHtml/statichtml/Signals/SignalsAccessRequest.html"}}),r.components.register("fx-tutorials-request-access",{deps:["LoadDictionaryContent!accessRequest"],viewModel:{require:"viewModels/AccessRequestViewModel"},template:{require:"text!mobileHtml/statichtml/Tutorials/TutorialsRequestAcess.html"}}),r.components.register("fx-component-account-header",{deps:["LoadDictionaryContent!account_hub_mobile"],viewModel:{require:"viewModels/accounthub/AccountHeaderViewModel"},template:{require:"text!mobileHtml/statichtml/AccountHub/AccountHeader.html"}}),!0===e["account-hub-map"]&&r.components.register("fx-account-userflow",{deps:["LoadDictionaryContent!account_hub_mobile"],viewModel:{require:"mobileViewModels/account/UserFlowViewModel"},template:{require:"text!mobileHtml/statichtml/account/UserFlowView.html"}}),r.components.register("fx-component-languge-settings",{viewModel:{require:"viewModels/account/LanguageSettingsViewModel"},template:{require:"text!partial-views/mobile-account-changelanguage.html"}}),r.components.register("fx-component-personal-details",{deps:["LoadDictionaryContent!country_names"],viewModel:{require:"viewModels/PersonalDetailsViewModel"},template:{require:"text!partial-views/mobile-customer-PersonalDetailsPartial.html"}}),r.components.register("fx-instrument-notavailable",{viewModel:{require:"viewModels/InstrumentNotAvailableViewModel"},template:{require:"text!mobileHtml/statichtml/instrument-notavailable.html"}}),l.registerDepositComponents(e)},RegisterContentTemplateComponents:function(){r.components.register("phone",{template:{require:"text!mobileHtml/statichtml/content/content-phone.html"},viewModel:{createViewModel:function(e,t){return{number:t.templateNodes[0].data}}}})},BindKO:function(e){isDefinedType(e)||(e=document.body),r.cleanNode(e);try{r.applyBindingsWithValidation(s,e,{registerExtenders:!0,messagesOnModified:!0,insertMessages:!1,parseInputAttributes:!0,decorateElement:!0,messageTemplate:null,errorElementClass:"validationElement"})}catch(e){a.log("PlugInConfiguration.bindKO",e.message,"",eErrorSeverity.warning)}},AdjustHtml:function(){var e="";try{i("#footer").offset()&&(e=Math.abs(i(window).height()-i("#footer").offset().top-i("#footer").height()))}catch(e){}(mobile.device.android&&"number"==typeof e&&7<e||mobile.browser.opera)&&setTimeout(u.delayedFooter,1e3),i(document).on(eAppEvents.formChangeEvent,function(){i(document).scrollTop(0),i(document).trigger(eAppEvents.formChangedEvent)})},AddPixel:function(){var e=o.ReadCookie("LinksForPixel");if(e){var t=e.split(","),n=new Image;t.forEach(function(e){""!=e&&(n.src=e)}),o.EraseCookie("LinksForPixel")}},ExposeUI:function(){},UpdateSccmTrackingData:function(e){window.trackingData&&window.trackingData.updateScmmData(e)}}}),define("fxnet/Devices/mobile/Configuration/PaymentsConfiguration",["require","knockout","environmentData","initConfiguration","managers/PopupInAlertManager"],function(e){var a=e("knockout"),o=e("initConfiguration"),s=e("environmentData"),l=e("managers/PopupInAlertManager");function u(e){return[].concatUnique(e).concatUnique(["payments_general"])}return{registerDepositComponents:function(){var e,t,n,r,i;e={prepare3rdPartyView:PopupInNewWindowManager,formToDisplayForSuccessfulPayments:eForms.DepositSuccess,formToDisplayForPendingPayments:eForms.DepositPending,supportLastPaymentCategory:!1,redirectToLastPaymentOnLoad:!0,viewTypeForExistingCC:"genericcreditcard",getClaimsTimeoutInMiliseconds:3e4,missingPaymentsRedirect:eForms.Quotes},t={prepare3rdPartyView:PopupInNewWindowManager,formToDisplayForSuccessfulPayments:eForms.DepositSuccess,formToDisplayForPendingPayments:eForms.DepositPending},n=Object.assign({},e,{prepare3rdPartyView:l}),r={prepare3rdPartyView:PopupInNewWindowManager,formToDisplayForSuccessfulPayments:eForms.DepositSuccess,formToDisplayForPendingPayments:eForms.DepositPending,currencySortPropertyName:"name"},i={formToDisplayForSuccessfulPayments:eForms.WireTransferSuccess,formToDisplayForPendingPayments:eForms.Deals,formToDisplayForFailedPayments:eForms.RegularWireTransfer},o.PaymentsConfiguration=e,o.PaymentInNewWindowConfiguration=t,o.PaymentWithCCConfiguration=e,o.SafeChargeCashierPaymentConfiguration=r,o.AstropayConfiguration=t,o.AstropayCardConfiguration=e,o.RisingSuAPMConfiguration=n,o.WireTransferConfiguration=i,s.paymentBehaviorConfig&&s.paymentBehaviorConfig.forEach(function(r){if(r.ShowInMobile&&!r.SkipComponentGeneration){var i="viewModels/Payments/{0}ViewModel",o="mobileViewModels/{0}ViewModel";if(r.SubViews)r.SubViews.forEach(function(e){var t={},n=String.format("fx-payment-{0}-{1}",e.Name.toLowerCase(),e.ViewId.toLowerCase());t.viewModel={require:String.format(e.MobileName?o:i,e.MobileName||e.ViewModel||e.Name)},r.Templates?t.template={require:"text!FxNet/Devices/Mobile/UILayer/Views/Deposit/PaymentTemplates.html"}:t.template={require:String.format("text!partial-views/mobile-payments-{0}.html",e.ControllerAction)},t.deps=u(r.Resources||[]).map(function(e){return"LoadDictionaryContent!"+e}),a.components.register(n,t)});else{r.MobileName&&(i=o);var e={},t=String.format("fx-payment-{0}",r.Name.toLowerCase());e.viewModel={require:String.format(i,r.MobileName||r.ViewModel||r.Name)},r.Templates?e.template={require:"text!FxNet/Devices/Mobile/UILayer/Views/Deposit/PaymentTemplates.html"}:e.template={require:String.format("text!partial-views/mobile-payments-{0}.html",r.ControllerAction||r.Name.toLowerCase())},e.deps=u(r.Resources||[]).map(function(e){return"LoadDictionaryContent!"+e}),a.components.register(t,e)}}}),a.components.register("fx-componet-creditcard-regular-note",{template:{require:"text!mobileHtml/statichtml/creditcard/creditcard-regular-note.html"},deps:["LoadDictionaryContent!views_vMobilePaymentTypes"]}),a.components.register("fx-componet-ecopayz-note",{template:{require:"text!mobileHtml/statichtml/creditcard/ecopayz-note.html"},deps:["LoadDictionaryContent!payment_ewallet"]}),a.components.register("fx-deposit-notice",{viewModel:{require:"viewModels/Payments/NoticeViewModel"},template:{require:"text!partial-views/mobile-payments-deposit-notice.html"}}),a.components.register("fx-component-payment-types",{template:{require:"text!mobileHtml/statichtml/Deposit/PaymentTypes.html"}}),a.components.register("fx-concrete-payments",{viewModel:{require:"viewModels/Payments/ConcretePaymentsViewModel"},template:{require:"text!mobileHtml/statichtml/Deposit/Payments.html"},deps:["LoadDictionaryContent!payments_concreteView_mobile","LoadDictionaryContent!FAQDEPOSIT"]}),a.components.register("fx-concrete-payments-form",{viewModel:{require:"viewModels/Payments/ConcretePaymentFormViewModel"},template:{require:"text!mobileHtml/statichtml/Deposit/PaymentsForm.html"},deps:["LoadDictionaryContent!payments_concreteView_mobile","LoadDictionaryContent!FAQDEPOSIT"]}),a.components.register("fx-component-deposit-success-thankyou",{viewModel:{require:"viewModels/deposit/ThankYouViewModel"},template:{require:"text!mobileHtml/statichtml/Deposit/thankyou-success.html"},deps:["LoadDictionaryContent!FAQDEPOSITTHANKYOU","LoadDictionaryContent!deposit_thankyou","LoadDictionaryContent!deposit_thankyou_success"]}),a.components.register("fx-component-deposit-pending-thankyou",{viewModel:{require:"viewModels/deposit/ThankYouViewModel"},template:{require:"text!mobileHtml/statichtml/Deposit/thankyou-pending.html"},deps:["LoadDictionaryContent!FAQDEPOSITTHANKYOU","LoadDictionaryContent!deposit_thankyou","LoadDictionaryContent!deposit_thankyou_pending"]}),a.components.register("fx-concrete-payment-subtitle",{viewModel:{require:"viewModels/Payments/ConcretePaymentSubtitleViewModel"},template:{require:"text!partial-views/mobile-payments-deposit-subtitle.html"}})}}}),define("FxNet",["require","knockout","fxnet/UILayer/UILayerHelpers/KOExtensions","Q","Preloader","ActivitySupervisor","PlugInConfiguration","StatesManager","PostLoginAlertController","InitialDataManager","RetentionManager","Customer","CustomerProfileManager","PerformanceDataCollector","ViewModelsManager","CacheManager","InstrumentsManager","DealsAmountsManager","NotificationManager","PresetsManager","FxNet/LogicLayer/GeneralManager/SessionSupervisor","PermissionsModule","StateObject!Csm","SystemInfo","GTMConfiguration","environmentData","tracking/loggers/fxtracking.lib"],function(e){var t=e("knockout"),n=e("Q"),r=e("Preloader"),i=e("PerformanceDataCollector"),o=e("ActivitySupervisor"),a=e("PlugInConfiguration"),s=e("StatesManager"),l=e("PostLoginAlertController"),u=e("InitialDataManager"),c=e("Customer"),A=e("CustomerProfileManager"),d=e("RetentionManager"),p=e("ViewModelsManager"),f=e("RegistrationManager"),h=e("CacheManager"),m=e("InstrumentsManager"),g=e("DealsAmountsManager"),v=e("NotificationManager"),y=e("PresetsManager"),w=e("FxNet/LogicLayer/GeneralManager/SessionSupervisor"),b=e("PermissionsModule"),C=e("StateObject!Csm"),S=e("SystemInfo"),E=e("GTMConfiguration"),D=e("environmentData"),B=e("tracking/loggers/fxtracking.lib"),T=t.observable(!1),I=t.observable(!1),F=t.observable(!1),x=n.defer(),_=n.defer(),M=StorageFactory(StorageFactory.eStorageType.local),N=StorageFactory(StorageFactory.eStorageType.session),k=t.observable(!1);function U(){i.registerEventTimestamp(eFxNetEvents.CacheLoadStart),h.LoadData().then(function(){i.registerEventTimestamp(eFxNetEvents.CacheLoadEnd),F(!0),_.resolve()}).done()}function P(){return n.fcall(function(){if(i.registerEventTimestamp(eFxNetEvents.UiLayerStart),b.CheckPermissions("gtm")){window.trackingData=new TrackingData(c,p,s,S),window.trackingData.init(),window.trackingEventsCollector=new TrackingEventsCollector(new TrackingEvents(new TrackingEventRaiser),window.trackingData,!1),window.trackingEventsCollector.init(),window.tradingEventsHandler=new TradingEventsHandler,window.tradingEventsHandler.init();var e=Dictionary.GetItem(E.gtmContentKey);B.init(e,c.prop.abTestings.configuration,D.biServiceURL)}d.UpdateToken().then(function(e){b.CheckPermissions("apiIM")?(d.SubscribeToInteractiveMessage(e),w.Start(),a.UpdateSccmTrackingData(e)):w.Start()}).done(),o.Start(),p.Init(A.GetUiVersion(),c.prop.startUpForm)}).then(function(){i.registerEventTimestamp(eFxNetEvents.UiLayerEnd)})}function Q(){i.registerEventTimestamp(eFxNetEvents.SplashScreenRemoved),T(!0),a.AdjustHtml(),a.AddPixel(),a.ExposeUI(),I(!0)}return C.set(eStateObjectTopics.CsmOutOfDate,!1),window.FxNet={Init:function(){i.registerEventTimestamp(eFxNetEvents.Init),u.OnTimestamp.Add(function(e){i.registerEventTimestamp(e)}),u.OnInitialScreens.Add(function(e){y.SetAvailableScreens(e)}),h.Init(),s.Init(),l.Init(),C.subscribe(eStateObjectTopics.CsmOutOfDate,function(e){k(e)}),m.OnUiOrderChanged.Add(f.Update),f.OnRegistrationListChanged.Add(h.Register),v.OnInstrumentsUpdated.Add(m.UpdateInstruments),v.OnMinDealAmountsUpdated.Add(m.ResetInstrumentsDealAmounts),y.OnPresetsUpdated.Add(m.SetPresetIntruments),g.Init(),a.AdvinionChartsInit(),a.AdjustCulture(),a.RegisterContentTemplateComponents(),i.registerEventTimestamp(eFxNetEvents.Start);var e=u.LoadData().then(function(){b.Init(),a.RegisterComponents(c.prop.abTestings.configuration),i.registerEventTimestamp(eFxNetEvents.ApplyBindingsStart),a.BindKO(),i.registerEventTimestamp(eFxNetEvents.ApplyBindingsEnd),y.Start()});return n.all([_.promise,x.promise]).then(function(){t.postbox.publish("ui-loaded")}).done(),n.all([function(){i.registerEventTimestamp(eFxNetEvents.WaitHtmlStart);var t=n.defer();return t.promise.then(function(){i.registerEventTimestamp(eFxNetEvents.WaitHtmlEnd)}),function e(){r.DataObjects.htmlReady?t.resolve():r.SetHtmlLoadEvent(e)}(),t.promise}(),e]).then(P).then(U).then(Q)},IsLoaded:T,CsmOutOfDate:k,IsVisible:I,IsCacheLoaded:F,UiRenderedPromise:x.promise,UiAfterRender:function(){i.registerEventTimestamp(eFxNetEvents.ExposeUi),x.resolve()},ViewModelsManager:p,exposeUI:Q,hideUI:function(){},LocalStorage:M,SessionStorage:N}}),define("startAll",["require","knockout","Q","FxNet","ErrorManager","KoComponentLoader","currentAppFolder/Configuration/mobilePatches","currentAppFolder/Configuration/config","LoadDictionaryContent!contentdata"],function(e){var t=e("knockout"),i=e("Q"),n=e("currentAppFolder/Configuration/mobilePatches"),o=e("KoComponentLoader"),a=e("FxNet"),s=e("ErrorManager"),r=e("currentAppFolder/Configuration/config");return function(r){window.onerror=s.onException,requirejs.onError=s.onRequireError,window.componentsLoaded=t.observable(!1),o.Register(),a.Init().then(n.startFunctions).then(function(){for(var e=[],t=0,n=r.length;t<n;t++)o.Exists(r[t])&&e.push(o.Preload(r[t]));return i.all(e).then(function(){window.componentsLoaded(!0)})}).done()}.bind(null,r.componentsToPreload||[])}),define("requireConfig",["require","environmentData","UrlResolver"],function(e){var t=e("environmentData"),n=e("UrlResolver"),r=t.jsCdnPath||"",i=n.getApplicationRelativePath(),o=n.getStaticFilePath(),a="v="+(t.version||window.version||"");return requirejs.config({onNodeCreated:function(e){e.setAttribute("crossorigin","anonymous")},urlArgs:a,baseUrl:n.combine(r,i,"scripts"),config:{text:{useXhr:function(){return!0}}},shim:{"assets/js/jquery.validator":{deps:["jquery"],exports:"$.validator.unobtrusive"}},map:{"*":{"jquery-ui/datepicker":"mock-jquery-ui-datepicker",dalCommon:"fxnet/dataaccesslayer/dalcommon",FingerprintTools:"../scripts/global/native/FingerprintTools",LastLoginMethod:"../scripts/global/devices/native/LastLoginMethod",PaymentsConfiguration:"fxnet/Devices/mobile/Configuration/PaymentsConfiguration",StatesManager:"fxnet/LogicLayer/GeneralManager/StatesManager",PermissionsModule:"fxnet/uilayer/Modules/PermissionsModule",SeamlessPermissionsModule:"fxnet/Devices/Mobile/Modules/SeamlessPermissionsModule",SeamlessPermissionsBase:"fxnet/uilayer/viewmodels/SeamlessPermissionsBase",PostLoginAlertController:"fxnet/Devices/Mobile/Modules/PostLoginAlertController",Customer:"fxnet/LogicLayer/InitialDataManagers/Customer",DepositConfirmationActions:"fxnet/Devices/Mobile/Modules/DepositConfirmationActions",WithdrawalCommon:"fxnet/uilayer/Modules/WithdrawalCommon"}},paths:{"partial-views":o,controllers:i,viewModels:"fxnet/uilayer/viewmodels",customBindings:"fxnet/uilayer/uilayerhelpers/customkobindings",mobileViews:"fxnet/devices/mobile/uilayer/views",mobileViewModels:"fxnet/devices/mobile/uilayer/viewmodels",html:n.combine(o,"scripts/fxnet/uilayer/viewmodels"),mobileHtml:n.combine(o,"scripts/fxnet/devices/mobile/uilayer/views"),pciPath:t.pciPath,currentAppFolder:"fxnet/devices/mobile",assets:n.combine(r,i,"assets",t.version),handlers:"fxnet/common/utils/handlers"},waitSeconds:0})}),require(["requireConfig","startAll"],function(e,t){"function"==typeof t&&t()});var cDepositMessageKeys={confirmation:"depConfirmation",succeeded:"depSucceeded",succeededTitle:"depSucceededTitle",changeGeneratedPasswordAfterFirstDeposit:"ChangeGeneratedPasswordAfterFirstDeposit",minDeposit:"depMinDeposit",maxDeposit:"depMaxDeposit",clearerMaxRangeDeposit:"depMaxDepositRange",maxCCAllowed:"depMaxCCAllowed",invalidCardType:"depInvalidCardType",refundableClearer:"depRefundableClearer",minMaxBlocked:"depMinMaxBlocked",maxCardTypeUSDAmount:"depMaxCardTypeUSDAmount",creditCardExpired:"depCreditCardExpired",whiteListValidation:"depWhiteListValidation",meikoPayMaxAmount:"depMeikoPayMaxAmount",depositFailed:"depDepositFailed",requestPended:"depRequestPended",unableProcessRequest:"depUnableProcessRequest",unsupportedCardType:"depUnsupportedCardType",d3secureNotAllowed:"d3secure",noSupportedClearers:"noSupportedClearers",notEnrolledCard:"notEnrolledCard",notice3DSecureDeposit:"notice3DSecureDeposit",d3SecureMissed:"depD3SecureMissed",removeCCMessage:"depRemoveCCMessage",serverError:"ServerError",moneyBookersDepositRequestCancelled:"depMBDepositRequestCancelled",cancelledByUser:"depCancelledByUser",pendingDepositRequest:"depPendingDepositRequest"},cDepositMessageKeyPrefixes={succeededAdditionalWithDescriptor:"depSucceededAdditionalWithDescriptor_",succeededAdditional:"depSucceededAdditional_",ccBinCountryBlacklistWithCountryId:"depCCBinCountryBlacklist_countryId_"},cDepositMessageTitleKeys={failedDepositMinimumDeposit:"FailedDeposit_MinimumDeposit",failedDepositExpiryDate:"FailedDeposit_ExpiryDate",failedDepositDoubleCheck:"FailedDeposit_DoubleCheck",failedDepositSorry:"FailedDeposit_Sorry"},cEmptyGuid="00000000-0000-0000-0000-000000000000";function CustomerValidators(){var t=[],n="passwordnotinblacklist",r="passwordnotcustomerfullname";return{addValidationBlackList:function(){$.validator.unobtrusive.adapters.add(n,["param"],function(e){e.rules[n]=!0,e.messages[n]=e.message}),$.validator.addMethod(n,function(e){return!t||!t.length||-1===t.indexOf(e)}),$.get(function(){var e="";if(UrlResolver.getAssetsPath)e=UrlResolver.combine(UrlResolver.getAssetsPath(),"Account","PasswordsBlacklist.js");else{var t=UrlResolver.getVersion();e=t?Model.CdnPath+Model.jsVirtualPath+"/assets/"+t+"/Account/PasswordsBlacklist.js":Model.jsVirtualPath+"/Account/PasswordsBlacklist"}return e}()).then(function(e){$.isArray(e)&&(t=e)}).done()},addValidationCustomerFullName:function(){if(window.$customer){customer=window.$customer;var t={firstName:customer.prop.firstName,lastName:customer.prop.lastName,combinations:[customer.prop.firstName+customer.prop.lastName,customer.prop.firstName+" "+customer.prop.lastName,customer.prop.lastName+customer.prop.firstName,customer.prop.lastName+" "+customer.prop.firstName]};$.validator.unobtrusive.adapters.add(r,["param"],function(e){e.rules[r]=!0,e.messages[r]=e.message}),$.validator.addMethod(r,function(e){return e!==t.firstName&&e!==t.lastName&&-1===t.combinations.indexOf(e)})}}}}
//# sourceMappingURL=mobilemain.js.map