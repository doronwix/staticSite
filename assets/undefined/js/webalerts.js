define("AlertsManager",["require","AlertFactory"],function(t){var e=function(){var a=new(t("AlertFactory")),r={},n=ko.observable(0),i=new TDelegate,o=[],s=[AlertTypes.MaxIdleTimeAlert,AlertTypes.DoubleLoginAlert,AlertTypes.SessionEndedAlert];function l(){o.pop()}var e=ko.computed(function(){return 0<n()});e.subscribe(function(e){e?$("body").addClass("mobilePopupVisible"):$("body").removeClass("mobilePopupVisible")});var u=function(e){var t=r[e];return t||(t=a.CreateAlert(e))&&(r[e]=t).visible.subscribe(function(e){n(e?n()+1:n()-1)}),r[e]},c=function(e){var t,r=u(e);if(r&&!r.visible()){if(0<=s.indexOf(e)){if(t=e,!(s.indexOf(t)>Math.max.apply(Math,o)))return;r.onCloseAction.Remove(l),r.onCloseAction.Add(l),o.push(s.indexOf(e))}r.show(),i.Invoke(e,r)}},p=function(e,t,r,n,i,o){var s=u(e);s&&a.UpdateAlert(s,e,t,r,n,i,o)};return{HasAlert:e,PopAlert:c,GetAlert:u,UpdateAlert:p,ShowAlert:function(e,t,r,n,i,o){p(e,t,r,n,i,o),c(e)},OnShowAlert:i}}();return window.AlertsManager=e}),define("AlertFactory",["require","ExitAlert","BonusAlert","ServerResponseAlert","CloseDealConfirmaionAlert","MaxIdleTimeAlertWrapper","DoubleLoginAlertWrapper","MinEquityAlertWrapper","GeneralOkCancelAlert","GeneralOkAlert","ClientStateAlertExposureAlert","ClientStateAlertExposureCoverageAlert","ClientStateAlertSystemMode","ClientStateAlertApplicationClosing","ClientStateAlertApplicationShutDown","PortfolioAlertIsReal","PortfolioAlertIsDemo","PortfolioAlertIsActive","PortfolioAlertKycStatus","QuestionnaireValidationAlert","CddQuestionnaireAlert","SignalsDisclaimerAlert","SimpleClientAlert","KnowledgeQuestionnaireAlert","GeneralCancelableAlert","DealsClosedServerResponseAlert","DealAddServerResponseAlert","LimitsServerResponseAlert","RemoveCreditCardConfirmationAlert","MultipleDealsClosedConfirmation","DepositSuccessAlert","ContactUsCTAAlert","TradingConfirmationRetryAlert","PriceAlertServerResponseAlert","PriceAlertClosedServerResponseAlert","RequestAccessAlert","SessionEndedAlert"],function(e){var r=e("ExitAlert"),n=e("BonusAlert"),i=e("ServerResponseAlert"),o=e("CloseDealConfirmaionAlert"),s=e("MaxIdleTimeAlertWrapper"),a=e("DoubleLoginAlertWrapper"),l=e("MinEquityAlertWrapper"),c=e("GeneralOkCancelAlert"),p=e("GeneralOkAlert"),m=e("ClientStateAlertExposureAlert"),A=e("ClientStateAlertExposureCoverageAlert"),d=e("ClientStateAlertSystemMode"),f=e("ClientStateAlertApplicationClosing"),b=e("ClientStateAlertApplicationShutDown"),g=e("PortfolioAlertIsReal"),v=e("PortfolioAlertIsDemo"),y=e("PortfolioAlertIsActive"),C=e("PortfolioAlertKycStatus"),I=e("QuestionnaireValidationAlert"),D=e("CddQuestionnaireAlert"),S=e("SignalsDisclaimerAlert"),h=e("SimpleClientAlert"),w=e("KnowledgeQuestionnaireAlert"),T=e("GeneralCancelableAlert"),k=e("DealsClosedServerResponseAlert"),G=e("DealAddServerResponseAlert"),R=e("LimitsServerResponseAlert"),M=e("PriceAlertServerResponseAlert"),L=e("RemoveCreditCardConfirmationAlert"),P=e("MultipleDealsClosedConfirmation"),B=e("DepositSuccessAlert"),V=e("ContactUsCTAAlert"),x=e("TradingConfirmationRetryAlert"),q=e("PriceAlertClosedServerResponseAlert"),E=e("RequestAccessAlert"),N=e("SessionEndedAlert");return function(){var u=function(e,t){return t?e:e.replace(/\\r\\n|\\n|\\r/gm,"<br />").replace(/(\r\n|\n|\r)/gm,"<br />")};return{CreateAlert:function(e){var t;switch(e){case AlertTypes.ExitAlert:t=new r;break;case AlertTypes.BonusAlert:t=new n;break;case AlertTypes.ServerResponseAlert:t=new i;break;case AlertTypes.SimpleClientAlert:t=new h;break;case AlertTypes.CloseDealAlert:t=new o;break;case AlertTypes.MaxIdleTimeAlert:t=new s;break;case AlertTypes.DoubleLoginAlert:t=new a;break;case AlertTypes.MinEquityAlert:t=new l;break;case AlertTypes.GeneralOkCancelAlert:t=new c;break;case AlertTypes.GeneralOkAlert:case AlertTypes.DepositConfirmationEmailSentAlert:t=new p;break;case PostClientStatesLoginsAlerts.ExposureAlert:t=new m;break;case PostClientStatesLoginsAlerts.ExposureCoverageAlert:t=new A;break;case PostClientStatesLoginsAlerts.SystemMode:t=new d;break;case PostClientStatesLoginsAlerts.SystemModeApplicationClosing:t=new f;break;case PostClientStatesLoginsAlerts.SystemModeApplicationShutDown:t=new b;break;case PostPortfoliosLoginsAlerts.IsActive:t=new y;break;case PostPortfoliosLoginsAlerts.IsDemo:t=new v;break;case PostPortfoliosLoginsAlerts.IsReal:t=new g;break;case PostPortfoliosLoginsAlerts.KycStatus:t=new C;break;case AlertTypes.ClientQuestionnaire:t=new I;break;case AlertTypes.ClientKnowledgeQuestionnaire:t=new w;break;case AlertTypes.CddClientQuestionnaire:t=new D;break;case AlertTypes.SignalsDisclaimerAlert:t=new S;break;case AlertTypes.GeneralCancelableAlert:t=new T;break;case AlertTypes.DealsClosedServerResponseAlert:t=new k;break;case AlertTypes.DealAddServerResponseAlert:t=new G;break;case AlertTypes.LimitsServerResponseAlert:t=new R;break;case AlertTypes.RemoveCreditCardConfirmationAlert:t=new L;break;case AlertTypes.MultipleDealsClosedConfirmation:t=new P;break;case AlertTypes.DepositSuccessAlert:t=new B;break;case AlertTypes.ContactUsCTAAlert:t=new V;break;case AlertTypes.TradingConfirmationRetryAlert:t=new x;break;case AlertTypes.MultiplePriceAlertsClosedConfirmation:t=new P;break;case AlertTypes.PriceAlertClosedServerResponseAlert:t=new q;break;case AlertTypes.PriceAlertServerResponseAlert:t=new M;break;case AlertTypes.RequestAccessVideoLessonsAlert:case AlertTypes.RequestAccessTutorialsAlert:t=new E;break;case AlertTypes.SessionEndedAlert:t=new N}return t&&(t.Init(),t=t.GetAlert),t},UpdateAlert:function(e,t,r,n,i,o,s){if(e.messages.removeAll(),r&&e.title(r),null===r&&e.setDefaultTitle(),n){try{if(isArrayType(n))for(var a=0;a<n.length;a++)n[a]=u(n[a],s);else n=u(n,s)}catch(e){}e.body(n)}if(i)for(;0<i.length;){var l=i.shift();l=u(l,s),e.messages.push(l)}return e.properties=o||{},e}}}}),define("AlertBase",["require","knockout","DialogViewModel","PortfolioStaticManager","Dictionary"],function(m){var A=m("knockout"),d=m("PortfolioStaticManager"),f=m("DialogViewModel"),b=m("Dictionary");return function(){var e=b.GetItem("GenericAlert"),n=A.observable(!1),t=A.observable(e),r=A.observable(""),i=A.observableArray([]),o=A.observable(!1),s=A.observable(""),a=A.observableArray([]),l=new TDelegate,u=A.observable(),c=null,p=function(e){(e=e||this).visible(!1),null!==c&&(clearTimeout(c),c=null),l.Invoke()};return{alertName:"AlertBase",theme:u,visible:n,caller:s,title:t,setDefaultTitle:function(){this.title(e)},icon:"",body:r,messages:i,properties:{},DisableThisAlertByCookie:o,NeedToCreateCookie:!0,cookieName:"",buttons:a,buttonProperties:function(e,t,r){return{text:e,onclick:t,css_Class:r}},injectDepositButtons:function(e){var t=this;t.buttons.removeAll();var r=function(){f.close()};$customer.prop.isDemo||(t.buttons.push(new t.buttonProperties(b.GetItem("DepositeNow"),function(){t.visible(!1),r(),m(["ViewModelsManager"],function(e){A.postbox.publish("action-source","InsufficientAvailableMarginPopUp"),e.VManager.RedirectToForm(eForms.Deposit,{})})},"btnDeposit")),0<d.Portfolio.pendingWithdrawals.sign()&&t.buttons.push(new t.buttonProperties(b.GetItem("ViewCancel"),function(){t.visible(!1),r(),m(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(eForms.Withdrawal)})},"btnPending disable"))),e||t.buttons.push(new t.buttonProperties(b.GetItem("NotNow"),function(){t.visible(!1)},"btnCancel colored"))},prepareForShow:function(){},hide:function(){n()&&n(!1)},show:function(){if(this.theme(this.properties.theme),this.prepareForShow&&this.prepareForShow(),n(!0),isDefinedType(this.properties.closeTimeout)){var e=this;t=function(){p(e)},r=this.properties.closeTimeout,null!==c&&clearTimeout(c),c=setTimeout(t,r)}var t,r},onCloseAction:l,onClose:p}}}),define("CloseDealConfirmaionAlert",["require","AlertBase","knockout","Dictionary"],function(e){var n=e("AlertBase"),i=e("Dictionary"),o=e("knockout");return function(){var r=new n,e={spotRate:o.observable(0)},t=function(){r.buttons.removeAll(),r.buttons.push(new r.buttonProperties(i.GetItem("ok"),function(){var e=r.properties.deal;if(isDefinedType(r.properties.caller)&&r.caller(r.properties.caller),e){var t=o.toJS(e);r.visible(!1),dalOrder.CloseDeals([t],r.caller().OnCloseDealReturn)}},"btnOk"),new r.buttonProperties(i.GetItem("cancel"),function(){r.visible(!1)},"btnCancel colored"))};return{Init:function(){r.alertName="CloseDealConfirmaionAlert",r.visible(!1),r.properties=e,t()},GetAlert:r}}}),define("SimpleClientAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnOk"))};return{Init:function(){e.alertName="SimpleClientAlert",e.visible(!1),t()},GetAlert:e}}}),define("ServerResponseAlert",["require","AlertBase","dalCommon","Dictionary"],function(i){var t=i("AlertBase"),o=i("dalCommon"),r=i("Dictionary");return function(){var n=new t,e=function(){n.buttons.removeAll();var e=n.hide=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),n.body(""),n.title(""),n.messages.removeAll(),isEmptyValue(t)||("exit"===t?o.Logout(eLoginLogoutReason.serverResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(r.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="ServerResponseAlert",n.visible(!1),e()},GetAlert:n}}}),define("DoubleLoginAlert",["require","AlertsManager","Customer","dalCommon"],function(e){var t,r=e("Customer"),n=e("dalCommon");return{Show:function(){r.isAutologin()||(t=setTimeout(function(){n.Logout(eLoginLogoutReason.web_doubleLogin1)},18e4)),e(["AlertsManager"],function(){AlertsManager.UpdateAlert(AlertTypes.DoubleLoginAlert),AlertsManager.PopAlert(AlertTypes.DoubleLoginAlert)})},LogoutTimer:t}}),define("DoubleLoginAlertWrapper",["require","AlertBase","knockout","Dictionary","Customer","DoubleLoginAlert","dalCommon"],function(e){var a=e("AlertBase"),l=e("Customer"),u=e("DoubleLoginAlert"),c=e("Dictionary"),p=e("dalCommon");return function(){var e=new a,t=!1,r=l.isAutologin()?c.GetItem("loginDoubleLogin")+" "+c.GetItem("loginDoubleLogin_Qus2"):c.GetItem("loginDoubleLogin"),n=function(){u.LogoutTimer&&clearTimeout(u.LogoutTimer)},i=function(){t||(t=!0,n(),p.Exit(eLoginLogoutReason.web_doubleLogin3))},o=function(){n(),window.location="Account/Login/?reason="+eLoginLogoutReason.web_doubleLogin2},s=function(){e.buttons.removeAll(),e.hide=i,e.onCloseAction.Add(i),l.isAutologin()?(e.buttons.push(new e.buttonProperties(c.GetItem("doubleLoginReconnect"),o,"btnLogin")),e.buttons.push(new e.buttonProperties(c.GetItem("exit"),i,"btnOk"))):e.buttons.push(new e.buttonProperties(c.GetItem("doubleLoginReconnect"),i,"btnOk"))};return{Init:function(){e.alertName="DoubleLoginAlert",e.visible(!1),e.body=r,e.title=c.GetItem("loginDoubleLoginTitle"),s()},GetAlert:e}}}),define("ExitAlert",["require","AlertBase","Dictionary","dalCommon"],function(o){return function(){var e=o("AlertBase"),t=o("Dictionary"),r=o("dalCommon"),n=new e,i=function(){n.buttons.removeAll(),n.buttons.push(new n.buttonProperties(t.GetItem("cancel"),function(){n.hide()},"btnCancel colored"),new n.buttonProperties(t.GetItem("ok"),function(){r.Logout(eLoginLogoutReason.web_exitAlert)},"btnOk"))};return{Init:function(){n.alertName="ExitAlert",n.visible(!1),n.body(t.GetItem("areyousurelogout")),n.title(t.GetItem("areyousurelogoutTitle")),i()},GetAlert:n}}}),define("SignalsDisclaimerAlert",["require","AlertBase","knockout","jquery"],function(e){var r=e("AlertBase"),n=e("jquery"),i=e("knockout");return function(){var e=new r,t={prepareForShow:function(){e.alertName="SignalsDisclaimerAlert",e.body(Dictionary.GetItem("LitContent","controls_ctlsignalcompliance")),e.title(Dictionary.GetItem("LitTitle","controls_ctlsignalcompliance")),e.checked=i.observable(!1),e.lblChecked=Dictionary.GetItem("ChkAgree","controls_ctlsignalcompliance"),e.isSetComplianceDate=i.observable(!1),e.buttons([new e.buttonProperties(Dictionary.GetItem("BtnContinue","controls_ctlsignalcompliance"),function(){e.checked()&&(CookieHandler.CreateCookie("TsComplianceDate",(new Date).toDateString(),(new Date).AddMonths(12)),e.isSetComplianceDate(!0),e.visible(!1))},"disclaimer-button-continue"),new e.buttonProperties(Dictionary.GetItem("BtnClose","controls_ctlsignalcompliance"),function(){e.visible(!1)},"disclaimer-button-close")])}};return{Init:function(){n.extend(e,t)},GetAlert:e}}}),define("MinEquityAlert",["require","Dictionary","PortfolioStaticManager"],function(e){var l,c=e("Dictionary"),p=e("PortfolioStaticManager");return l=function(e,t,r){var n,i;n=e.maxAllowedAmount,i=e.amountToDeposit;var o,s=c.GetItem("MarginTipAlertContent"),a=c.GetItem("MarginTipInfoContent_MaxSize"),l=c.GetItem(0<p.Portfolio.pendingWithdrawals.sign()&&!r?"MarginTipInfoContent_Fund_Withdrawal":"MarginTipInfoContent_Fund"),u=null;return o=n,!isEmptyValue(t)&&0<o&&(u=String.format(a,n,t)),{alertText:s,infoMaxSizeText:u,infoFundText:String.format(l,"","",i,$customer.prop.defaultCcy())}},{Show:function(e,t){var r=l(e,t);AlertsManager.UpdateAlert(AlertTypes.MinEquityAlert,"","","",r,!0),AlertsManager.PopAlert(AlertTypes.MinEquityAlert)},GetAlertContent:function(e,t,r){for(var n,i=["alertText","infoMaxSizeText","infoFundText"],o="",s=l(e,t,r),a=0;a<i.length;a++)o+=(n=i[a],s&&s.hasOwnProperty(n)&&s[n]&&s[n].length?s[i[a]]+"\n":"");return o}}}),define("MinEquityAlertWrapper",["require","AlertBase","knockout","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary"),i=e("knockout");return function(){var e=new r,t=function(){e.injectDepositButtons(!0),e.marginTipAlert(e.properties.alertText),e.marginTipInfoMaxSize(e.properties.infoMaxSizeText),e.marginTipInfoFund(e.properties.infoFundText)};return{GetAlert:e,Init:function(){e.alertName="MinEquityAlert",e.title(n.GetItem("MarginTipTitle")),e.marginTipAlert=i.observable(""),e.marginTipInfoMaxSize=i.observable(""),e.marginTipInfoFund=i.observable(""),e.visible(!1),e.prepareForShow=t}}}}),define("BonusAlert",["require","knockout","AlertBase","Dictionary"],function(i){return function(){var e=i("knockout"),t=i("Dictionary"),r=new(i("AlertBase")),n=function(){r.buttons.removeAll(),r.buttons.push(new r.buttonProperties(t.GetItem("ok"),function(){r.visible(!1)},"btnOk"))};return{Init:function(){r.alertName="BonusAlert",r.body=e.observable(String.format(t.GetItem("pendingbonustext"),"","","")),r.title(t.GetItem("pendingbonustexttitle")),n()},GetAlert:r}}}),define("MaxIdleTimeAlert",["require","AlertsManager"],function(e){var t=e("AlertsManager");return{Show:function(){t.UpdateAlert(AlertTypes.MaxIdleTimeAlert),t.PopAlert(AlertTypes.MaxIdleTimeAlert)}}}),define("MaxIdleTimeAlertWrapper",["require","AlertBase","knockout","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary"),i=e("knockout");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("exit"),function(){e.onClose(),ActivitySupervisor.Exit()},"Exit colored"),new e.buttonProperties(n.GetItem("stay"),function(){e.onClose(),ActivitySupervisor.UpdateStay()},"Stay"))};return{Init:function(){e.alertName="MaxIdleTimeAlert",e.visible(!1),e.body=i.observable(n.GetItem("MaxIdleTimeAlert")),e.title=n.GetItem("maxIdleTimeAlertTitle"),t()},GetAlert:e}}}),define("GeneralOkCancelAlert",["require","AlertBase","Dictionary","jquery"],function(e){var n=e("AlertBase"),i=e("Dictionary"),o=e("jquery");return function(){var e=new n,t=function(){r()},r=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(e.properties.okButtonCaption||i.GetItem("proceed"),function(){e.visible(!1),o.isFunction(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btnOk")),1==!e.properties.hideCancelButton&&e.buttons.push(new e.buttonProperties(e.properties.cancelButtonCaption||i.GetItem("cancel"),function(){e.visible(!1),o.isFunction(e.properties.cancelButtonCallback)&&e.properties.cancelButtonCallback()},"btnCancel colored"))};return{Init:function(){e.alertName="GeneralOkCancelAlert",e.visible(!1),e.prepareForShow=t,r()},GetAlert:e}}}),define("GeneralOkAlert",["require","AlertBase","knockout","Dictionary"],function(e){var i=e("AlertBase"),o=e("Dictionary");return function(){var e=new i,t=function(){r()},r=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(e.properties.okButtonCaption||o.GetItem("ok"),function(){e.visible(!1),jQuery.isFunction(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btnOk"))},n=function(){e.visible(!1),jQuery.isFunction(e.properties.onClose)&&e.properties.onClose()};return{Init:function(){e.alertName="GeneralOkAlert",e.visible(!1),e.onClose=n,e.prepareForShow=t,r()},GetAlert:e}}}),define("GeneralCancelableAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll()};return{Init:function(){e.setDefaultTitle=function(){},e.alertName="GeneralCancelableAlert",e.visible(!1),e.title(n.GetItem("msgtype240")||n.GetItem("GenericAlert")),t()},GetAlert:e}}}),define("CddQuestionnaireAlert",["require","AlertBase","Dictionary"],function(n){var i=n("AlertBase"),o=n("Dictionary");return function(){var e=new i,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(o.GetItem("btnCompleteQuestionnaire"),function(){e.visible(!1),r(),n(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(eForms.ClientQuestionnaire)})},"btnCancel colored"))},r=function(){DialogViewModel.close()};return{Init:function(){e.alertName="CddClientQuestionnaire",e.visible(!1),e.body(o.GetItem("cddNOtCompleteTryOpenDeal")),e.title(o.GetItem("lblImportent")),t()},GetAlert:e}}}),define("DepositSuccessAlert",["require","AlertBase","dalCommon","Dictionary"],function(i){var t=i("AlertBase"),o=i("dalCommon"),r=i("Dictionary");return function(){var n=new t,e=function(){n.buttons.removeAll();var e=n.hide=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?o.Logout(eLoginLogoutReason.serverResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(r.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="DepositSuccessAlert",n.visible(!1),e()},GetAlert:n}}}),define("ContactUsCTAAlert",["require","AlertBase","Dictionary","LoadDictionaryContent!tokens"],function(e){var t=e("AlertBase"),r=e("Dictionary");return function(){var e=new t;return e.lnkCallBack=r.GetItem("@@PHONE_COMPLIANCE@@","tokens"),e.lnkEmailResponse=r.GetItem("@@EMAIL_COMPLIANCE@@","tokens"),e.title=r.GetItem("lblContactUsTitle"),{Init:function(){e.alertName="ContactUsCTAAlert",e.visible(!1)},GetAlert:e}}}),define("ClientStateAlertExposureAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnOk"))};return{Init:function(){e.alertName="ClientStateAlertExposureAlert",e.body(n.GetItem("OrderError12")),t()},GetAlert:e}}}),define("ClientStateAlertExposureCoverageAlert",["require","AlertBase","knockout","Dictionary","Customer","PortfolioStaticManager"],function(e){var n=e("AlertBase"),i=e("knockout"),o=e("Dictionary"),s=e("PortfolioStaticManager"),a=e("Customer");return function(){var e=new n,t=function(){0<a.prop.maintenanceMarginPercentage&&e.title(o.GetItem("exposureCoverageTitle")),e.body(r()),e.injectDepositButtons(!0)},r=function(){var e,t=a.prop.minPctEQXP,r=a.prop.LiquidationPercentage,n=0<a.prop.maintenanceMarginPercentage,i=0<s.Portfolio.pendingWithdrawals.sign();return n?(e=o.GetItem("MARGIN_DEPOSIT_WHEN_MARGIN_MAINTENANCE"),i&&(e+=o.GetItem("MARGIN_DEPOSIT_2B"))):(e=String.format(o.GetItem("MARGIN_DEPOSIT_1"),t)+"<br />",0<r&&(e+=String.format(o.GetItem("MARGIN_DEPOSIT_11"),r)+"<br />"),e+=i?o.GetItem("MARGIN_DEPOSIT_1B"):o.GetItem("MARGIN_DEPOSIT_1A")),e};return{Init:function(){e.alertName="ClientStateAlertExposureCoverageAlert",e.popCounter=i.observable(0),e.prepareForShow=t},GetAlert:e}}}),define("ClientStateAlertSystemMode",["require","AlertBase","Dictionary","dalCommon"],function(e){var r=e("AlertBase"),n=e("Dictionary"),i=e("dalCommon");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1),i.Logout(eLoginLogoutReason.clientStateError)},"btnOk"))};return{Init:function(){e.alertName="ClientStateAlertSystemMode",e.body(n.GetItem("maintenanceAlertContent")),e.title(n.GetItem("maintenanceAlertContentTitle")),t()},GetAlert:e}}}),define("ClientStateAlertApplicationShutDown",["require","AlertBase","dalCommon","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary"),i=e("dalCommon");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1),i.Logout(eLoginLogoutReason.clientStateError)},"btnOk"))};return{Init:function(){e.alertName="ClientStateAlertApplicationShutDown",e.body(n.GetItem("statusApplicationShutdown")),e.title(n.GetItem("statusApplicationShutdownTitle")),t()},GetAlert:e}}}),define("ClientStateAlertApplicationClosing",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnOk"))};return{Init:function(){e.alertName="ClientStateAlertSystemModeApplicationClosing",e.body(n.GetItem("statusApplicationClosing")),e.title(n.GetItem("statusApplicationClosingTitle")),t()},GetAlert:e}}}),define("PortfolioAlertIsActive",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.injectDepositButtons()};return{Init:function(){e.alertName="PortfolioAlertIsActive",e.visible(!1),e.body(n.GetItem("OrderError105")),e.title(n.GetItem("rcCustomerPendingTitle")),e.prepareForShow=t},GetAlert:e}}}),define("PortfolioAlertIsDemo",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="PortfolioAlertIsDemo",e.visible(!1),e.body(n.GetItem("demoLoginAlertWeb")),e.title(n.GetItem("demoLoginAlertTitle")),t()},GetAlert:e}}}),define("PortfolioAlertIsReal",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="PortfolioAlertIsReal",e.visible(!1),e.body(n.GetItem("realLoginAlert")),e.title(n.GetItem("realLoginAlertTitle")),t()},GetAlert:e}}}),define("PortfolioAlertKycStatus",["require","AlertBase","Dictionary"],function(n){var i=n("AlertBase"),o=n("Dictionary");return function(){var e=new i,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(o.GetItem("btnCompleteQuestionnaire"),function(){e.visible(!1),r(),n(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(eForms.ClientQuestionnaire)})},"btnCancel colored"))},r=function(){DialogViewModel.close()};return{Init:function(){e.alertName="PortfolioAlertKycStatus",e.visible(!1),e.body(o.GetItem("lblP1")),e.title(o.GetItem("lblImportent")),t()},GetAlert:e}}}),define("RequestAccessAlert",["require","knockout","AlertBase","FxNet/DataAccessLayer/dalCompliance","StateObject!RequestAccess","LoadDictionaryContent!EducationalTutorials","LoadDictionaryContent!financial_tutorials"],function(e){var a=e("knockout"),l=e("AlertBase"),u=e("FxNet/DataAccessLayer/dalCompliance"),c=e("StateObject!RequestAccess");return function(){var t,r=new l,e=function(){r.isRequestSubmitted=a.observable(!1)},n=function(){if(t=r.properties.stateAccessRequestKey,c.containsKey(t)){var e=c.get(t);r.isRequestSubmitted(e===eAccessRequestStatus.RequestSubmitted),r.isRequestSubmitted()&&r.title(Dictionary.GetItem("lblRequestSubmittedTitle","accessRequest"))}else c.set(t,eAccessRequestStatus.RequestNotSubmitted)};var i=function(){u.sendRequestAccess(r.properties.requestAccessType).then(function(e){e===eOperationStatus.Success&&(r.isRequestSubmitted(!0),c.update(t,eAccessRequestStatus.RequestSubmitted),r.title(Dictionary.GetItem("lblRequestSubmittedTitle","accessRequest")))}).fail(function(){r.hide()})},o=function(){r.hide()};function s(){this.onClickRequestAccess=i,this.onClickOk=o,e(),n()}return{Init:function(){r.alertName="RequestAccessAlert",r.visible(!1),r.prepareForShow=s},GetAlert:r}}}),define("DealsClosedServerResponseAlert",["require","AlertBase","Dictionary","InstrumentsManager","dalCommon"],function(i){var r=i("AlertBase"),m=i("InstrumentsManager"),A=i("Dictionary"),o=i("dalCommon");return function(){var n=new r,e=function(){this.dataRecords=this.properties.serverResponses,this.title(A.GetItem(this.dataRecords.length<=1?"CloseDeal":"CloseDeals"));for(var e=0;e<this.dataRecords.length;e++){var t=this.dataRecords[e],r=this.properties.requestData.find(function(e){return e.positionNumber==t.itemId}),n=m.GetInstrument(t.instrumentId?t.instrumentId:r?r.instrumentID:"");if(t.status!==eResult.Success)switch(t.result){case"OrderError116":case"OrderError120":t.arguments=JSON.parse(t.responseArgumentsJson);var i=t.arguments.pop(),o=$instrumentTranslationsManager.Long(i);o&&(t.arguments[0]=o),n=$instrumentsManager.GetInstrument(i),t.msgKey=t.result,t.message=(a=t,u=l=void 0,l=A.GetItem(a.msgKey||"InternalError"),u=a.arguments,isNullOrUndefined(u)?l:String.format(l,u));break;default:var s=!isStringType(t.result)||A.ValueIsEmpty(t.result)?"InternalError":t.result;t.message=A.GetItem(s)}extendType(t,{amount:t.usdValue,openedRate:r?r.dealRate||r.orderRate:"",instrumentId:n?n.id:"",closingRate:r?t.rateCalc:"",pl:t.plAccountCcy,orderDir:t.direction?"1closed":"0closed",baseSymbolId:n?n.baseSymbol:"",otherSymbolId:n?n.otherSymbol:""})}var a,l,u,c=objectFirst(this.dataRecords,function(e){return 1==e.status});this.plTotal=c?c.bulkPlAccountCcy:"0",this.rowsValid=this.dataRecords.reduce(function(e,t){return e+t.status},0);var p=this.dataRecords.filter(function(e){return 1==e.status}).length;this.dataRecords.length<=1?0<p?this.body(A.GetItem("YourDealWasClosedSuccessfully")):this.body(A.GetItem("YourDealWasNotClosedSuccessfully")):this.body(String.format(A.GetItem("countOfYourDealsWhereClosedSuccessfully"),p))},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?o.Logout(eLoginLogoutReason.dealsClosedServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(A.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="DealsClosedServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("MultipleDealsClosedConfirmation",["require","AlertBase","InstrumentsManager","Dictionary"],function(e){var t=e("AlertBase"),i=e("Dictionary"),o=e("InstrumentsManager");return function(){var r=new t;function n(e){var t=o.GetInstrument(e);return{instrumentId:t.id,baseSymbolId:t.baseSymbol,otherSymbolId:t.otherSymbol}}function e(){var e,t=this;this.selectedData=this.properties.selectedData||[],e=this.properties.selectedData[0].mode&&this.properties.selectedData[0].mode===eLimitMode.PriceAlert?"hideMultiplePriceAlertsCloseAlert":"hideMultipleDealsCloseAlert",this.getInstrumentData=n,this.confirmationCloseDeal=function(){r.hideConfirmation()&&CookieHandler.CreateCookie(e,r.hideConfirmation(),(new Date).AddMonths(12)),r.visible(!1),t.properties.confirmationCloseDeal()}}return{Init:function(){r.alertName="MultipleDealsClosedConfirmation",r.visible(!1),r.prepareForShow=e,r.hideConfirmation=ko.observable(!1),r.lblChecked=i.GetItem("dontshowagain")},GetAlert:r}}}),define("DealAddServerResponseAlert",["require","AlertBase","FxNet/LogicLayer/Deal/DealLifeCycle","Dictionary"],function(i){var r=i("AlertBase"),u=i("FxNet/LogicLayer/Deal/DealLifeCycle"),c=i("Dictionary");return function(){var n=new r,e=function(){this.resourceName="alerts_deals",this.title(c.GetItem("OpenDeal")),this.messages.removeAll();for(var e,t,r,n,i,o=this.properties.serverResponses,s=0;s<o.length;s++){var a=o[s],l=$instrumentsManager.GetInstrument(a.instrumentId);e=a,t=this.properties,r=this.messages,n=void 0,n=t.instrument,i=e.arguments&&0<e.arguments.length?e.arguments[0]:null,n&&n.isFuture?u.futuresIsRolloverDateSignificant_AfterDeal(n.assetTypeId,n.getInstrumentRolloverDate(),i)&&r.push(String.format(c.GetItem("FutureSuccess"),n.eventDate)):n&&n.isShare&&(u.sharesIsCorporateActionDateSignificant_AfterDeal(n.assetTypeId,n.getCorporateActionDate(),i)?r.push(String.format(c.GetItem("shareSuccessHasDate"),n.getCorporateActionDate())):u.sharesIsDividendDateSignificant_AfterDeal(n.assetTypeId,n.getInstrumentDividendDate(),n.getCorporateActionDate(),i)?r.push(String.format(c.GetItem("ShareDividendSuccess"),n.getInstrumentDividendDate())):r.push(String.format(c.GetItem("ShareSuccess2"),$instrumentTranslationsManager.Long(n.id)))),extendType(a,{dealAmount:a.usdValue,openedRate:a.rateCalc,orderDir:a.direction?"1closed":"0closed",pl:"",baseSymbolId:l?l.baseSymbol:"",otherSymbolId:l?l.otherSymbol:""})}this.body(c.GetItem("SuccessDealOpen")),this.dataRecords=o},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.dealAddServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(c.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="DealAddServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("LimitsServerResponseAlert",["require","AlertBase","FxNet/LogicLayer/Deal/DealLifeCycle","Dictionary","InstrumentsManager"],function(i){var r=i("AlertBase"),d=i("FxNet/LogicLayer/Deal/DealLifeCycle"),f=i("Dictionary"),b=i("InstrumentsManager");return function(){var n=new r,e=function(){var e=this.properties.serverResponses;if((this.dataRecords=e)&&e.length){var t,r,n,i,o,s,a,l,u,c,p=e[0],m=b.GetInstrument(p.instrumentId),A=this.properties.requestData;switch(extendType(p,{limitAmount:A.amount,limitLevel:p.limLevel,orderDir:p.direction?"1":"0",baseSymbolId:m?m.baseSymbol:"",otherSymbolId:m?m.otherSymbol:"",messages:[],type:isDefinedType(A.type)?A.type:p.type,mode:isDefinedType(A.mode)?A.mode:p.mode,action:isDefinedType(A.action)?A.action:p.action,removedIfDoneSLRate:A.removedIfDoneSLRate,removedIfDoneTPRate:A.removedIfDoneTPRate}),this.messages.removeAll(),p.msgKey){case"SuccessLimitAdd":this.title(f.GetItem(p.type==eLimitType.None?"NewLimit":"AddLimit")),this.body(f.GetItem("YourLimitWasAddedSuccessfully")),s=p,a=this.properties,l=this.messages,u=a.instrument,c=s.arguments&&0<s.arguments.length?s.arguments[0]:null,isEmptyValue(c)&&!isEmptyValue(a.valueDate)&&(c=a.valueDate),u&&u.isFuture?d.futuresIsRolloverDateSignificant_AfterDeal(u.assetTypeId,u.getInstrumentRolloverDate(),c)&&l.push(String.format(f.GetItem("FutureSuccess"),u.eventDate)):u&&u.isShare&&(d.sharesIsCorporateActionDateSignificant_AfterDeal(u.assetTypeId,u.getCorporateActionDate(),c)?l.push(String.format(f.GetItem("shareSuccessHasDate"),u.getCorporateActionDate())):d.sharesIsDividendDateSignificant_AfterDeal(u.assetTypeId,u.getInstrumentDividendDate(),u.getCorporateActionDate(),c)?l.push(String.format(f.GetItem("ShareDividendSuccess"),u.getInstrumentDividendDate())):l.push(String.format(f.GetItem("ShareSuccess2"),$instrumentTranslationsManager.Long(u.id))));break;case"SuccessLimitEdit":this.title(f.GetItem(p.type==eLimitType.None?"UpdateLimit":"EditStopLossTakeProfit")),this.body(f.GetItem(p.type==eLimitType.None?"YourLimitWasUpdatedSuccessfully":"YourStopLossTakeProfitWasUpdated")),t=p,r=this.properties,n=this.messages,i=r.instrument,o=t.arguments&&0<t.arguments.length?t.arguments[0]:null,isEmptyValue(o)&&!isEmptyValue(r.valueDate)&&(o=r.valueDate),i&&i.isFuture?d.futuresIsRolloverDateSignificant_AfterDeal(i.assetTypeId,i.getInstrumentRolloverDate(),o)&&n.push(String.format(f.GetItem("FutureSuccess"),i.eventDate)):i&&i.isShare&&(d.sharesIsCorporateActionDateSignificant_AfterDeal(i.assetTypeId,i.getCorporateActionDate(),o)?n.push(String.format(f.GetItem("shareSuccessHasDate"),i.getCorporateActionDate())):d.sharesIsDividendDateSignificant_AfterDeal(i.assetTypeId,i.getInstrumentDividendDate(),i.getCorporateActionDate(),o)?n.push(String.format(f.GetItem("ShareDividendSuccess"),i.getInstrumentDividendDate())):n.push(String.format(f.GetItem("ShareSuccess2"),$instrumentTranslationsManager.Long(i.id))));break;case"SuccessLimitDelete":this.title(f.GetItem("RemoveLimit")),this.body(f.GetItem("YourLimitWasRemoveddSuccessfully"))}}},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.limitsServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(f.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="LimitsServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("RemoveCreditCardConfirmationAlert",["require","AlertBase"],function(e){var r=e("AlertBase");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(Dictionary.GetItem(e.properties.cancelButtonCaption||"cancel"),function(){e.visible(!1),isFunctionType(e.properties.cancelButtonCallback)&&e.properties.cancelButtonCallback()},"btnCancel colored"),new e.buttonProperties(Dictionary.GetItem(e.properties.okButtonCaption||"proceed"),function(){e.visible(!1),isFunctionType(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btnOk"))}return{Init:function(){e.alertName="RemoveCreditCardConfirmationAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("QuestionnaireValidationAlert",["require","AlertBase","Dictionary","FxNet/DataAccessLayer/dalKycClientQuestionnaire","StatesManager","Customer"],function(e){var t=e("AlertBase"),a=e("Dictionary"),l=e("FxNet/DataAccessLayer/dalKycClientQuestionnaire"),u=e("StatesManager"),r=e("Customer");return function(){var i=t.call(this),o={title:"lblImportent",messages:["KYC_Failed_p1","KYC_Failed_p2","KYC_Failed_p3","KYC_Failed_p4"],buttons:["btnIAmAware","btnIAmExit"]},s=window.PopUpManager;return i.goToTradingView=function(){e(["ViewModelsManager"],function(e){return e.VManager.SwitchViewVisible(r.prop.startUpForm)})},i.goToDepositView=function(){e(["ViewModelsManager"],function(e){return e.VManager.RedirectToForm(eForms.Deposit)})},i.defer=Q.defer(),i.alertName="ClientQuestionnaire",i.visible(!1),i.Init=function(){},i.redirectAfterResponseAlert=function(){return r.prop.customerType===eCustomerType.TradingBonus||"1"!==a.GetItem("preDepositRequired")?void i.goToTradingView():void i.goToDepositView()},i.popAlert=function(){var e,t,r=i.buttonProperties,n=[];for(i.buttons.removeAll(),i.buttons.push(r(a.GetItem(o.buttons[0]),function(){!function(){if(!window.require)throw new Error("KYC: logic error: compliance dal must be called after require is loaded");i.visible(!1),l.postCustomerFailedAware(function(e){1===e.status&&!0===e.result&&(u.States.KycStatus(eKYCStatus.FailedAware),i.defer.resolve())})}(),$statesManager.States.KycStatus(eKYCStatus.FailedAware)})),i.buttons.push(r(a.GetItem(o.buttons[1]),function(){"1"!==a.GetItem("preDepositRequired")?i.visible(!1):(i.visible(!1),s.ClosePopup()),i.defer.resolve()})),e=0,t=o.messages.length;e<t;e++)n.push(a.GetItem(o.messages[e]));return AlertsManager.UpdateAlert(AlertTypes.ClientQuestionnaire,a.GetItem(o.title),void 0,n),AlertsManager.PopAlert(AlertTypes.ClientQuestionnaire),i.defer.promise},i.GetAlert=i}}),define("KnowledgeQuestionnaireAlert",["require","AlertBase","Dictionary"],function(e){var t=e("AlertBase"),l=e("Dictionary");return function(){var s=t.call(this),a={titles:["pleaseNoteTitle","tradingKnowledgeTitle","tradingKnowledgeTitle","tradingKnowledgeTitle","questionnaireTitle"],messages:[["KYC_Knowledge_Retry_p1"],["KYC_Knowledge_Review_p1"],["KYC_Knowledge_Tested_p1"],["KYC_Knowledge_Inappropriate_p1"],["KYC_Knowledge_Unsuitable_p1"]],buttons:["btnRetry","btnContinue","btnRetry","btnContinue","btnContinue"]};return s.alertName="ClientKnowledgeQuestionnaire",s.visible(!1),s.Init=function(){},s.popAlert=function(e,t){var r,n,i=s.buttonProperties,o=[];for(s.buttons.removeAll(),s.buttons.push(i(l.GetItem(a.buttons[t]),function(){s.visible(!1),e()})),r=0,n=a.messages[t].length;r<n;r++)o.push(l.GetItem(a.messages[t][r]));AlertsManager.UpdateAlert(AlertTypes.ClientKnowledgeQuestionnaire,l.GetItem(a.titles[t]),"",o),AlertsManager.PopAlert(AlertTypes.ClientKnowledgeQuestionnaire)},s.GetAlert=s}}),define("TradingConfirmationRetryAlert",["require","AlertBase"],function(e){var r=e("AlertBase");return function(){var t=new r,e=function(){var e=this;this.selectedData=this.properties.selectedData,this.confirmationCloseDeal=function(){t.visible(!1),e.properties&&e.properties.hasOwnProperty("tradingEnabledRetry")&&"function"==typeof e.properties.tradingEnabledRetry&&e.properties.tradingEnabledRetry(e.properties.requestData)}};return{Init:function(){t.alertName="TradingConfirmationRetryAlert",t.visible(!1),t.prepareForShow=e},GetAlert:t}}}),define("PriceAlertClosedServerResponseAlert",["require","AlertBase","Dictionary","InstrumentsManager"],function(i){var r=i("AlertBase"),o=i("InstrumentsManager"),s=i("Dictionary");return function(){var n=new r,e=function(){this.dataRecords=this.properties.serverResponses,this.title(s.GetItem(this.dataRecords.length<=1?"RemovePriceAlert":"RemovePriceAlerts"));for(var e=0;e<this.dataRecords.length;e++){var t=this.dataRecords[e],r=this.properties.find(function(e){return e.orderID==t.itemId}),n=o.GetInstrument(t.instrumentId?t.instrumentId:r?r.instrumentID:"");t.status!==eResult.Success&&1<this.dataRecords.length&&(t.message=s.GetItem(t.result)),extendType(t,{baseSymbolId:n?n.baseSymbol:"",otherSymbolId:n?n.otherSymbol:"",orderDir:r.orderDir,orderRate:r.orderRate,entryTime:r.entryTime})}var i=this.dataRecords.filter(function(e){return e.status==eResult.Success}).length;1===this.dataRecords.length?1===i?this.body(s.GetItem("YourPriceAlertWasClosedSuccessfully")):(t.status=1,this.body(s.GetItem("YourPriceAlertWasNotClosedSuccessfully"))):this.body(String.format(s.GetItem("countOfYourPriceAlertsWhereClosedSuccessfully"),i))},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.PriceAlertClosedServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(s.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="PriceAlertClosedServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("PriceAlertServerResponseAlert",["require","AlertBase","FxNet/LogicLayer/Deal/DealLifeCycle","Dictionary","InstrumentsManager"],function(i){var r=i("AlertBase"),o=i("Dictionary"),s=i("InstrumentsManager");return function(){var n=new r,e=function(){var e=this.properties.serverResponses;if((this.dataRecords=e)&&e.length){var t=e[0],r=s.GetInstrument(t.instrumentId),n=this.properties.requestData;switch(extendType(t,{limitLevel:t.limLevel,orderDir:t.direction?"1":"0",baseSymbolId:r?r.baseSymbol:"",otherSymbolId:r?r.otherSymbol:"",messages:[],type:isDefinedType(n.type)?n.type:t.type,mode:isDefinedType(n.mode)?n.mode:t.mode,action:isDefinedType(n.action)?n.action:t.action}),this.messages.removeAll(),t.msgKey){case"OrderError20":this.title(o.GetItem("pleaseNote")),this.body(""),this.messages.push(String.format(o.GetItem("priceAlertExceedAmount"),environmentData.maxPriceAlertsCount)),this.dataRecords.pop();break;case"OrderError22":this.title(o.GetItem("newPriceAlert")),this.body(""),this.messages.push(String.format(o.GetItem("generalPriceAlertFailure"),environmentData.maxPriceAlertsCount)),this.dataRecords.pop();break;default:this.title(o.GetItem("priceAlertSet")),this.body(o.GetItem("priceAlertSetSuccessfully")),this.messages.push(o.GetItem("priceAlertNotificationsEnableNote"))}}},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";"mobile"!==CookieHandler.ReadCookie("ViewMode").toLowerCase()||isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.limitsServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(o.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="PriceAlertServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("SessionEndedAlert",["AlertBase","dalCommon","Dictionary"],function(n,e,i){return function(){var e=new n;function t(){isFunctionType(e.properties.onCloseAction)&&e.properties.onCloseAction()}function r(){e.onClose()}return{Init:function(){e.alertName="SessionEndedAlert",e.visible(!1),e.onCloseAction.Add(t),e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(i.GetItem("sessionEndedReconnectBtn"),r,"btnOk"))},GetAlert:e}}});
//# sourceMappingURL=webalerts.js.map