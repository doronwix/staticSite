function ProChart_Loader(){var t,u,v,p,q;function w(i){var t=".min";a.init.minifier||(t=""),m=a.init.rootpath+(0==a.init.corepath.length?"/ChartCore/js/6.7.0":a.init.corepath),x.push({key:"requirejs",url:a.init.rootpath+"/ChartUI/js.common/loader/requirejs/require"+t+".js?"+a.init.requirejs_version}),$.when(y(),z()).done(function(t,e){if(1==a.init.getrequirejs)A(i);else switch(n=requirejs,i){case"default":l();break;case"combine":case"combinecompact":r();break;default:l()}})}function A(c){void 0===c&&(c="default");var b=x[0].url;if(a.navigator.XMLHttpRequest()){var d=new XMLHttpRequest,e=$.Deferred();d.open("get",b),d.typeofcloader=c,d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status||304==d.status){var t=d.responseText;switch(eval.call(null,t),n=requirejs,d.typeofcloader){case"default":l();break;case"combine":case"combinecompact":r();break;default:l()}e.resolve(t)}else console.log("Error"+d.status)},d.send()}else $.ajax({url:x[0].url,contentType:"application/javascript",async:!0,global:!0,cache:!0,typeofcloader:c,dataType:"script",type:"get",success:function(a){switch(void 0!==a&&eval(a),n=requirejs,this.typeofcloader){case"default":l();break;case"combine":case"combinecompact":r();break;default:l()}},error:function(){return null}})}function l(){if(void 0!==n&&null!=n){var e=".min";a.init.minifier||(e="");var r=0==a.init.cache?"?"+Math.floor(102320*Math.random()+1):"",i="v"+p+"k"+q,o="c"+t+"b"+u;window.GlobProchartObject.versionbuild.guiversion=i,window.GlobProchartObject.versionbuild.coreversion=o;for(var l=v,c=(i={coreinit:m+"/core.chart.init"+e+".js"+(r=""==r?"?"+i:r+i)+o,corelogic:m+"/core.logic"+e+".js"+r+o},1);c<=l;c++)i["core"+c]=m+"/core.module"+c+e+".js"+r+o;if(1==a.init.onlyliteload&&(a.guiinit.trade=!1,a.guiinit.menu=!1,a.guiinit.toolbox=!1,a.guiinit.zoom=!1,a.guiinit.system=!1,a.guiinit.header=!0,a.guiinit.indicators=!1,a.guiinit.toolbar=!1,a.guiinit.draw=!1,a.guiinit.community=!1,a.guiinit.messages=!1,a.guiinit.signals=!1),o={"jquery.ui":a.init.rootpath+"/ChartUI/js.common/jquery.ui.1.10.3/jquery-ui"+e+".js"+r,"jquery.draggable":a.init.rootpath+"/ChartUI/js.common/utils/prochart.jquery.draggable"+e+".js"+r,panels:a.init.rootpath+"/ChartUI/gui/panels/prochart.gui.panels"+e+".js"+r,floatingpanels:a.init.rootpath+"/ChartUI/gui/panels/prochart.gui.floatingpanels"+e+".js"+r,"activity.indicator":a.init.rootpath+"/ChartUI/js.common/activity.indicator/activity-indicator"+e+".js"+r,splitter_horizontal:a.init.rootpath+"/ChartUI/js.common/utils/prochart.splitter.horizontal"+e+".js"+r,drags:a.init.rootpath+"/ChartUI/js.common/utils/prochart.drags"+e+".js"+r,"jquery.resize":a.init.rootpath+"/ChartUI/js.common/detect.resize/prochart.jquery.resize"+e+".js"+r,localization:a.init.rootpath+"/ChartUI/localization/prochart.gui.localization"+e+".js"+r,init:a.init.rootpath+"/ChartUI/init/prochart.init"+e+".js"+r,action:a.init.rootpath+"/ChartUI/actions/prochart.gui.actions"+e+".js"+r,header:a.init.rootpath+"/ChartUI/gui/header/prochart.gui.header"+e+".js"+r,alert:a.init.rootpath+"/ChartUI/gui/alert/prochart.gui.alert"+e+".js"+r,msg:a.init.rootpath+"/ChartUI/gui/alert/prochart.gui.msg"+e+".js"+r,menu:a.init.rootpath+"/ChartUI/gui/menu/prochart.gui.menu"+e+".js"+r,community:a.init.rootpath+"/ChartUI/gui/community/prochart.gui.community"+e+".js"+r,messages:a.init.rootpath+"/ChartUI/gui/msg/prochart.gui.messages"+e+".js"+r,signals:a.init.rootpath+"/ChartUI/gui/signals/prochart.gui.signals"+e+".js"+r,compare:a.init.rootpath+"/ChartUI/gui/ta/prochart.gui.compare"+e+".js"+r,indicators:a.init.rootpath+"/ChartUI/gui/indicators/prochart.gui.indicators"+e+".js"+r,system:a.init.rootpath+"/ChartUI/gui/systems/prochart.gui.systems"+e+".js"+r,props:a.init.rootpath+"/ChartUI/gui/props/prochart.gui.props"+e+".js"+r,customerkey:m+"/CustomerKey"+e+".js"+r,trade:a.init.rootpath+"/ChartUI/gui/trade/prochart.gui.trade"+e+".js"+r,color:a.init.rootpath+"/ChartUI/gui/color/spectrum"+e+".js"+r,utils_numeric:a.init.rootpath+"/ChartUI/js.common/utils/prochart.jquery.numeric"+e+".js"+r,utils_cache:a.init.rootpath+"/ChartUI/js.common/utils/prochart.jquery.cache"+e+".js"+r,utils_station:a.init.rootpath+"/ChartUI/js.common/utils/prochart.station"+e+".js"+r,utils_common:a.init.rootpath+"/ChartUI/js.common/utils/prochart.common.utils"+e+".js"+r,utils_hoverintent:a.init.rootpath+"/ChartUI/js.common/utils/prochart.jquery.hoverIntent"+e+".js"+r,leked:a.init.rootpath+"/ChartCore/js/prochart.leked"+e+".js"+r,hook_lz:a.init.rootpath+"/ChartCore/js/lzstring"+e+".js"+r,hook_event:a.init.rootpath+"/ChartCore/js/hookevent"+e+".js"+r,draw:a.init.rootpath+"/ChartUI/gui/draw/prochart.gui.draw"+e+".js"+r,zoom:a.init.rootpath+"/ChartUI/gui/zoom/prochart.gui.zoom"+e+".js"+r,"prochart.class":a.init.rootpath+"/ChartUI/init/prochart.class"+e+".js"+r,patterns:a.init.rootpath+"/ChartUI/gui/patterns/prochart.patterns"+e+".js"+r,layout:a.init.rootpath+"/ChartUI/layouts/prochart.gui.layout"+e+".js"+r,"templates.sys":a.init.rootpath+"/ChartUI/layouts/prochart.templates.sys.min.js"+r,preload:a.init.rootpath+"/ChartUI/preload/prochart.gui.preload"+e+".js"+r,"init.adv":a.init.rootpath+"/ChartUI/init/prochart.init.adv.min.js"+r,toolbaradv:a.init.rootpath+"/ChartUI/gui/toolbar/prochart.gui.toolbar.adv"+e+".js"+r,"toolbaradv.svg":a.init.rootpath+"/ChartUI/gui/toolbar/prochart.gui.toolbar.svg"+e+".js"+r,api:a.init.rootpath+"/ChartAPI/prochart.api"+e+".js"+r,global:a.init.rootpath+"/ChartAPI/prochart.api.global"+e+".js"+r,"api.events":a.init.rootpath+"/ChartAPI/prochart.api.events"+e+".js"+r,"api.init":a.init.rootpath+"/ChartAPI/prochart.api.init"+e+".js"+r,"api.actions":a.init.rootpath+"/ChartAPI/prochart.api.actions"+e+".js"+r,"api.commondata":a.init.rootpath+"/ChartAPI/prochart.api.commondata"+e+".js"+r,"api.bi":a.init.rootpath+"/ChartAPI/prochart.api.bi"+e+".js"+r,"api.props":a.init.rootpath+"/ChartAPI/prochart.api.props"+e+".js"+r,"api.localstorage":a.init.rootpath+"/ChartAPI/prochart.api.localstorage"+e+".js"+r,"api.header":a.init.rootpath+"/ChartUI/gui/header/prochart.api.header"+e+".js"+r,"api.layout":a.init.rootpath+"/ChartUI/layouts/prochart.api.layout"+e+".js"+r,"api.menu":a.init.rootpath+"/ChartUI/gui/menu/prochart.api.menu"+e+".js"+r,"api.zoom":a.init.rootpath+"/ChartUI/gui/zoom/prochart.api.zoom"+e+".js"+r,"api.toolbar":a.init.rootpath+"/ChartUI/gui/toolbar/prochart.api.toolbar"+e+".js"+r,"api.chart":a.init.rootpath+"/ChartUI/gui/chart/prochart.api.chart"+e+".js"+r,"api.panels":a.init.rootpath+"/ChartUI/gui/panels/prochart.api.panels"+e+".js"+r,"api.alert":a.init.rootpath+"/ChartUI/gui/alert/prochart.api.alert"+e+".js"+r,tradingcentral:a.init.rootpath+"/ChartUI/gui/signals/prochart.gui.tradingcentral"+e+".js"+r,sigmainvest:a.init.rootpath+"/ChartUI/gui/signals/prochart.gui.sigmainvest"+e+".js"+r,plugs:a.init.rootpath+"/Plugs/prochart.gui.plugs"+e+".js"+r},l={"jquery.ui.css":a.init.rootpath+"/ChartUI/css/jquery-ui.custom"+e+".css"+r,"main.css":a.init.rootpath+"/ChartUI/css/prochart.main"+e+".css"+r,"jquery.css":a.init.rootpath+"/ChartUI/css/prochart.jquery"+e+".css"+r,"dialogs.css":a.init.rootpath+"/ChartUI/css/prochart.dialogs"+e+".css"+r,"chart.css":a.init.rootpath+"/ChartUI/css/prochart.chart"+e+".css"+r,"color.css":a.init.rootpath+"/ChartUI/css/spectrum"+e+".css"+r,"plugs.css":a.init.rootpath+"/Plugs/plugs"+e+".css"+r,"zoom.css":a.init.rootpath+"/ChartUI/gui/zoom/js.library/iThing2"+e+".css"+r,"iconchart.css":a.init.rootpath+"/ChartUI/css/prochart.iconchart"+e+".css"+r},0==a.guiinit.trade&&delete o.trade,0==a.guiinit.toolbox&&delete o.toolbox,0==a.guiinit.menu&&delete o.menu,0==a.guiinit.toolbar&&delete o.toolbar,0==a.guiinit.zoom&&(delete o.zoom,delete o.zoom_slider,delete o["zoom.css"]),0==a.guiinit.system&&delete o.system,0==a.guiinit.draw&&delete o.draw,0==a.guiinit.props&&delete o.props,0==a.guiinit.header&&delete o.header,0==a.guiinit.indicators&&delete o.indicators,0==a.guiinit.community&&delete o.community,0==a.guiinit.compare&&delete o.compare,0==a.guiinit.messages&&delete o.messages,0==a.guiinit.indicators&0==a.guiinit.draw&0==a.guiinit.props&&(delete o.color,delete o["dialogs.css"],delete o["color.css"]),o.touch=a.init.rootpath+"/ChartUI/js.common/touch/touch.surface"+e+".js"+r,window.JSON||(o.json2=a.init.rootpath+"/ChartUI/js.common/jons2/jons2"+e+".js"+r),0==a.init.layoutcss.length)l["layout1.css"]=a.init.rootpath+"/ChartUI/layouts/layout1/layout"+e+".css"+r;else for(c=0;c<a.init.layoutcss.length;c++)l["layout"+c+".css"]=a.init.rootpath+"/ChartUI/layouts/"+a.init.layoutcss[c]+"/layout"+e+".css"+r;for(c=0;c<a.init.loadertemplates.length;c++){var d=(h=a.init.loadertemplates[c]).template,h=h.layout;if(void 0!==d&&void 0!==h){var g=a.init.rootpath+"/ChartUI/layouts/"+h+"/templates/"+d+"/template"+e+".css"+r;s(l,g)||(l[h+"_"+d]=g)}}for(c=0;c<a.init.loaderjs.length;c++)s(o,e=a.init.loaderjs[c])||(o["js.temp"+c]=e);for(e=0;e<a.init.loadercss.length;e++)s(l,r=a.init.loadercss[e])||(l["css.temp."+e]=r);for(e=0;e<a.init.loaderremovefrom.length;e++)void 0!==o[(r=a.init.loaderremovefrom[e]).key]&&delete o[r.key];for(e=0;e<a.init.loaderremovefrom.length;e++)void 0!==o[r=a.init.loaderremovefrom[e]]&&delete o[r];for(e=Object.keys(l),r=0;r<e.length;r++)c=e[r],(d=document.createElement("link")).type="text/css",d.rel="stylesheet",d.href=l[c],document.getElementsByTagName("head")[0].appendChild(d);for(l={},e=Object.keys(i),r=0;r<e.length;r++)void 0===i[c=e[r]]&&console.log(c),l[c]=i[c];for(i=Object.keys(o),e=0;e<i.length;e++)void 0===o[r=i[e]]&&console.log(r),l[r]=o[r];requirejs.config({paths:l,shim:{core1:{deps:["core2"]},core4:{deps:["core1"]},core3:{deps:["core1"]},core7:{deps:["core1"]}}}),o=Object.keys(l),require(o,function(){"function"==typeof a.LoaderInitComplete&&$(document).ready(function(){a.LoaderInitComplete()})})}}function r(){if(void 0!==n&&null!=n){var e=".min";a.init.minifier||(e="");var r=0==a.init.cache?"?"+Math.floor(3100*Math.random()+1):"",i="v"+p+"k"+q,o="c"+t+"b"+u;window.GlobProchartObject.versionbuild.guiversion=i,window.GlobProchartObject.versionbuild.coreversion=o;r=""==r?"?"+i:r+i,o={"core.combine":(0==a.init.corecombine_folder_path.length?m:a.init.corecombine_folder_path)+"/"+(0==a.init.corecombine_file_name.length?"core.combine"+e+".js":a.init.corecombine_file_name)+r+o};var l="";if(a.init.gzip&&(l=".gz"),i={"jquery.ui":a.init.rootpath+"/ChartUI/js.common/jquery.ui.1.10.3/jquery-ui"+e+".js"+r,"gui.js.combine":(0==a.init.guicombine_folder_path.length?a.init.rootpath+"/ChartUI/init":a.init.objectLoader.init.guicombine_folder_path)+"/"+(0==a.init.guicombine_file_name.length?"gui.combine"+e+".js":a.init.guicombine_file_name)+r},l={"gui.css.combine":a.init.rootpath+"/ChartUI/css/gui.combine"+e+".css"+l+r},0==a.init.layoutcss.length)l["layout1.css"]=a.init.rootpath+"/ChartUI/layouts/layout1/layout"+e+".css"+r;else for(var c=0;c<a.init.layoutcss.length;c++)l["layout"+c+".css"]=a.init.rootpath+"/ChartUI/layouts/"+a.init.layoutcss[c]+"/layout"+e+".css"+r;for(c=0;c<a.init.loadertemplates.length;c++){var d=(h=a.init.loadertemplates[c]).template,h=h.layout;if(void 0!==d&&void 0!==h){var g=a.init.rootpath+"/ChartUI/layouts/"+h+"/templates/"+d+"/template"+e+".css"+r;s(l,g)||(l[h+"_"+d]=g)}}for(e=0;e<a.init.loaderjs.length;e++)s(i,r=a.init.loaderjs[e])||(i["js.temp"+e]=r);for(e=0;e<a.init.loadercss.length;e++)s(i,r=a.init.loadercss[e])||(l["css.temp."+e]=r);for(e=0;e<a.init.loaderremovefrom.length;e++)void 0!==i[(r=a.init.loaderremovefrom[e]).key]&&delete i[r.key];for(e=Object.keys(l),r=0;r<e.length;r++)c=e[r],(d=document.createElement("link")).type="text/css",d.rel="stylesheet",d.href=l[c],document.getElementsByTagName("head")[0].appendChild(d);for(l={},e=Object.keys(o),r=0;r<e.length;r++)void 0===o[c=e[r]]&&console.log(c),l[c]=o[c];for(o=Object.keys(i),e=0;e<o.length;e++)void 0===i[r=o[e]]&&console.log(r),l[r]=i[r];requirejs.config({paths:l}),i=Object.keys(l),require(i,function(){"function"==typeof a.LoaderInitComplete&&$(document).ready(function(){a.LoaderInitComplete()})})}}function s(t,e){for(var a in t)if(t[a]==e)return!0;return!1}function z(){var t=""==a.init.timeupdateVersiongui?"?"+(new Date).getTime():"?"+a.init.timeupdateVersiongui,e=(t=a.init.rootpath+"/ChartUI/version/prochart.version.json.js"+t,$.Deferred());if(a.navigator.XMLHttpRequest()){var r=new XMLHttpRequest;r.open("get",t),r.onreadystatechange=function(){if(4==r.readyState&&(200==r.status||304==r.status)){var t=$.parseJSON(r.responseText);$.parseJSON(r.responseText),p=t.guiversionbuild,q=t.customerversion,e.resolve(t)}},r.send()}else $.ajax({url:t,dataType:"json",data:{},type:"get",async:!0,error:function(t,e){q=p="0"}}).done(function(t){p=t.guiversionbuild,q=t.customerversion,e.resolve(t)});return e.promise()}function y(){var e=""==a.init.timeupdateVersioncore?"?"+(new Date).getTime():"?"+a.init.timeupdateVersioncore;e=m+"/version/prochart.version.json.js"+e;$.support.cors=!0;var r=$.Deferred();if(a.navigator.XMLHttpRequest()){var i=new XMLHttpRequest;i.open("get",e),i.onreadystatechange=function(){if(4==i.readyState&&(200==i.status||304==i.status)){var e=$.parseJSON(i.responseText);$.parseJSON(i.responseText),t=e.guiversionbuild,u=e.customerversion,v=e.files,r.resolve(e)}},i.send()}else $.ajax({type:"GET",url:e,processData:!0,data:{},async:!0,dataType:"json",error:function(t,e){}}).done(function(e){t=e.guiversionbuild,u=e.customerversion,v=e.files,r.resolve(e)});return r.promise()}var a={LoaderInit:function(t){$.support.cors=!0,jQuery.support.cors=!0,w("default")},LoaderInitCombine:function(){$.support.cors=!0,jQuery.support.cors=!0,w("combine")},LoaderInitCombineCompact:function(){$.support.cors=!0,jQuery.support.cors=!0,w("combine")},LoaderInitComplete:null,init:{rootpath:"",corepath:"",minifier:!0,loadercss:[],loaderjs:[],loadertemplates:[],yepnope_errorTimeout:12e4,cache:!0,onlyliteload:!1,layoutcss:[],loaderreplacepath:[],loaderremovefrom:[],timeupdateVersiongui:"",timeupdateVersioncore:"",gzip:!1,getrequirejs:!0,requirejs_version:"2.3.5",corecombine_folder_path:"",corecombine_file_name:"",guicombine_folder_path:"",guicombine_file_name:""}};void 0===window.GlobProchartObject&&(window.GlobProchartObject={},Object.defineProperty(window.GlobProchartObject,"versionbuild",{value:{},writable:!1,configurable:!1}),Object.defineProperty(window.GlobProchartObject.versionbuild,"guiversion",{value:null,writable:!0,configurable:!1}),Object.defineProperty(window.GlobProchartObject.versionbuild,"guiversionbuild",{value:null,writable:!0,configurable:!1}),Object.defineProperty(window.GlobProchartObject.versionbuild,"guicustomerversion",{value:null,writable:!0,configurable:!1}),Object.defineProperty(window.GlobProchartObject.versionbuild,"coreversion",{value:null,writable:!0,configurable:!1}),Object.defineProperty(window.GlobProchartObject.versionbuild,"coreversionbuild",{value:null,writable:!0,configurable:!1}),Object.defineProperty(window.GlobProchartObject.versionbuild,"corecustomerversion",{value:null,writable:!0,configurable:!1}),Object.defineProperty(window.GlobProchartObject.versionbuild,"corefiles",{value:null,writable:!0,configurable:!1})),u=t="pr",v=0,q=p="pr";var n=null;Object.defineProperty(a,"versionbuild",{value:{},writable:!1,configurable:!1}),Object.defineProperties(a.versionbuild,{guiversion:{get:function(){return window.GlobProchartObject.versionbuild.guiversion}},coreversion:{get:function(){return window.GlobProchartObject.versionbuild.coreversion}}}),a.guiinit={trade:!0,menu:!0,toolbox:!0,toolbar:!0,zoom:!0,system:!0,draw:!0,color:!0,header:!0,indicators:!0,props:!0,community:!0,compare:!0,signals:!0,messages:!0,versionIE:10},a.navigator={properties:{detectIE:!1,xdrMinIE:10,alvaysXMLHttpRequest:!1},XMLHttpRequest:function(){return"Microsoft Internet Explorer"==navigator.appName&&"XMLHttpRequest"in window&&null!==window.XMLHttpRequest&&a.navigator.properties.detectIE<=a.navigator.properties.xdrMinIE||a.navigator.properties.alvaysXMLHttpRequest}};var x=[],m="",ia,ja;return a.navigator.properties.detectIE=(ia=window.navigator.userAgent,ja=ia.indexOf("MSIE "),0<ja?parseInt(ia.substring(ja+5,ia.indexOf(".",ja)),10):0<ia.indexOf("Trident/")?(ja=ia.indexOf("rv:"),parseInt(ia.substring(ja+3,ia.indexOf(".",ja)),10)):0<(ja=ia.indexOf("Edge/"))&&parseInt(ia.substring(ja+5,ia.indexOf(".",ja)),10)),a}define("dalCharts",["require","ErrorManager"],function(t){var a=t("ErrorManager");return new function(){function i(t,e){throw a.onError(t,"",eErrorSeverity.high),e}function n(t){var e=JSONHelper.STR2JSON("dalCharts:analyzeResponse",t);if(isNullType(e)||"ServerError"===e.status)throw new Error("Cannot get chart data");return e.result||e}return{GetCandles:function(t){var e;(e=t)&&e.instrumentId&&!isEmptyValue(e.periodId)&&e.numCandles&&!isEmptyValue(e.rateType)||i("TDALChartsData/getCandles","Missing parameter values"),isNumberType(e.instrumentId)&&isNumberType(e.periodId)&&isNumberType(e.numCandles)||i("TDALChartsData/getCandles","Invalid parameter values");var a=new TAjaxer,r=urlEncode({instrumentId:t.instrumentId,periodId:t.periodId,numCandles:t.numCandles,rateType:t.rateType,fromDate:t.fromDate,toDate:t.toDate});return a.promises.get("TDALChartsData/getCandles","FeedsHistory/GetCandles",r,null,null,1,2).then(n).fail(function(t){i("TDALChartsData/getCandles",t)})},GetTicks:function(t){var e;(e=t)&&e.instrumentId&&e.numTicks&&!isEmptyValue(e.rateType)||i("TDALChartsData/getTicks","Missing parameter values"),isNumberType(e.instrumentId)&&isNumberType(e.numTicks)||i("TDALChartsData/getTicks","Invalid parameter values");var a=new TAjaxer,r=urlEncode({instrumentId:t.instrumentId,numTicks:t.numTicks,rateType:t.rateType,fromDate:t.fromDate,toDate:t.toDate});return a.promises.get("TDALChartsData/getTicks","FeedsHistory/GetTicks",r).then(n).fail(function(t){i("TDALChartsData/getTicks",t)})},GetPeriods:function(){return(new TAjaxer).promises.get("TDALChartsData/getPeriods","FeedsHistory/GetCandlePeriods").then(n).fail(function(t){i("TDALChartsData/getPeriods",t)})}}}}),define("advinion-chart-pivot-library",[],function(){return function(l,t){var u,c=[],d=null,p=null,h=null,m=null,g=l.chart,b=g.Shapes,f=g.LocalizationManager.gui,C="",e=t?t.onClearView:null,a=t?t.onRenderTC:null;this.PerformTCLogicOnData=function(t,e,a,r,i,n,o,s,l,u){var c=t.pivot;if(c.res1==c.pivot?(c.res1=0,c.direction=-1,c.target=c.sup1,c.failure=c.res2):c.sup1==c.pivot?(c.sup1=0,c.direction=1,c.target=c.res1,c.failure=c.sup2):c.direction=0,null!=s||null!=l){var d={};(t.rsi=d).direction=c.direction,d.parameter1=14,d.parameter2=9,d.valueA=0,d.valueB=0,d.dateA=0,d.dateB=0,d.type=null!=s?"oversold":"overbought"}if(null!=e||null!=a||null!=r){var p={};(t.sma=p).direction=c.direction,null!=r?(p.parameter1=20,p.parameter2=50,p.parameter3=0,1==r?p.type="crossover":-1==r&&(p.type="crossunder")):null!=e?(p.parameter1=20,p.parameter2=0,p.parameter3=0,1==e?p.type="crossover":-1==e&&(p.type="crossunder")):null!=a&&(p.parameter1=50,p.parameter2=0,p.parameter3=0,1==a?p.type="crossover":-1==a&&(p.type="crossunder")),p.valueA=0,p.valueB=0,p.valueC=0,p.valueD=0,p.valueE=0,p.valueF=0,p.dateA=0,p.dateB=0,p.type=null!=s?"oversold":"overbought"}if(null!=i||null!=n){var h={};(t.macd=h).direction=c.direction,h.parameter1=12,h.parameter2=26,h.parameter3=9,h.valueA=0,h.valueB=0,h.dateA=0,h.dateB=0,1==i?h.type="upsidemomentum":-1==i&&(h.type="downsidemomentum"),1==n?h.type="crossover":-1==n&&(h.type="crossunder")}if(null!=o){var m={};(t.bbands=m).direction=c.direction,m.parameter1=20,m.parameter2=2,m.valueA=0,m.valueB=0,m.dateA=0,m.dateB=0,m.type=-1==o?"crossdown":"crossup"}},this.GetCleanDataObject=function(){return{source:"",type:"signals",subtype:"",target:"",data:[{rsi:null,created:0,bbands:null,symbol:"EUR/USD",symbolname:"EUR/USD",timescale:"1m",precision:0,gap:null,cspattern:null,pivot:{direction:1,res1:0,res2:0,res3:0,sup1:0,sup2:0,sup3:0,pivot:0,valueA:0,valueB:0,valueC:0,dateA:0,dateB:0,dateC:0,targetdate:0,target:0,failure:0},timezone:"0",sma:null}],story:""}},this.ClearView=function(){for(var t=0;t<c.length;t++)b.DeleteHLine("price",c[t]);c=[],b.DeleteLine("price",d),b.DeleteLine("price",null),b.DeleteLabel("price",null),b.DeleteLabel("price",null),b.DeleteLine("price",p),b.DeleteLine("price",h),b.DeleteVRange("price",m),g.AddInViewValues("price","showallpoints",[]),null!=C&&""!=C&&g.DeleteExtrenalLegend(C),e&&e()},this.RenderTC=function(t,e){this.RenderPivot(t,e),a&&a()},this.RenderPivot=function(t,e){if(null!=e&&null!=t&&(this.ClearView(),objPivot=e.pivot,0!=objPivot.target||0!=objPivot.failure)){var a,r,i;strSymbol=e.symbol,strSymbolName=e.symbolname,strTimeScale=e.timescale.toUpperCase(),lngLastDate4History=0,lngHistorySize=1e3,u=[];for(var n=1;n<=3;n++)a="sup"+n,i=t.configuration.pivotlines["support"+n],0!=objPivot[a]&&(r=f.returnLocalizationString("signals.tradingcentral.lines."+a,a),c.push(b.AddHLine("price",objPivot[a],r,i.lineColor,i.lineWidth,i.dashStyle,i.labelColor,i.font,i.alignment,i.hPadding,i.margins,i.inPriceRange,i.labelBKColor)),r=f.returnLocalizationString("signals.tradingcentral.outOfRangeLabel."+a,a),b.UpdateShape("price",c[c.length-1],["outOfRangeAxisMarker",i.outOfRangeAxisMarker,"outOfRangeBoxColor",i.outOfRangeBoxColor,"outOfRangeTextColor",i.outOfRangeTextColor,"outOfRangeLabel",r,"boxColor",i.boxColor,"boxTextColor",i.boxTextColor],!1),u.push(objPivot[a])),a="res"+n,i=t.configuration.pivotlines["resistance"+n],0!=objPivot[a]&&(r=f.returnLocalizationString("signals.tradingcentral.lines."+a,a),c.push(b.AddHLine("price",objPivot[a],r,i.lineColor,i.lineWidth,i.dashStyle,i.labelColor,i.font,i.alignment,i.hPadding,i.margins,i.inPriceRange,i.labelBKColor)),r=f.returnLocalizationString("signals.tradingcentral.outOfRangeLabel."+a,a),b.UpdateShape("price",c[c.length-1],["outOfRangeAxisMarker",i.outOfRangeAxisMarker,"outOfRangeBoxColor",i.outOfRangeBoxColor,"outOfRangeTextColor",i.outOfRangeTextColor,"outOfRangeLabel",r,"boxColor",i.boxColor,"boxTextColor",i.boxTextColor],!1),u.push(objPivot[a]));if(0!=objPivot.pivot&&(a="pivot",i=t.configuration.pivotlines.pivot,r=f.returnLocalizationString("signals.tradingcentral.lines."+a,a),c.push(b.AddHLine("price",objPivot[a],r,i.lineColor,i.lineWidth,i.dashStyle,i.labelColor,i.font,i.alignment,i.hPadding,i.margins,i.inPriceRange,i.labelBKColor)),r=f.returnLocalizationString("signals.tradingcentral.outOfRangeLabel."+a,a),b.UpdateShape("price",c[c.length-1],["outOfRangeAxisMarker",i.outOfRangeAxisMarker,"outOfRangeBoxColor",i.outOfRangeBoxColor,"outOfRangeTextColor",i.outOfRangeTextColor,"outOfRangeLabel",r,"boxColor",i.boxColor,"boxTextColor",i.boxTextColor],!1),u.push(objPivot.pivot)),i=t.configuration.pivotlines.target,d=b.AddLine("price",objPivot.dateC,objPivot.valueC,objPivot.targetdate,objPivot.target,i.lineColor,2,[],!0),b.UpdateShape("price",d,["drawArrow",!0,"arrowHeadSize",i.arrowHeadSize]),h=b.AddLine("price",objPivot.dateA,objPivot.valueA,objPivot.dateB,objPivot.valueB,"black",2,[],!0),p=b.AddLine("price",objPivot.dateB,objPivot.valueB,objPivot.dateC,objPivot.valueC,"black",2,[],!0),objCSPat=e.cspattern,null!=objCSPat&&(m=b.AddVRange("price",objCSPat.valueA,objCSPat.valueB,"rgba(51,153,255,0.4)",!1,[2,10,2,10]),l.chart.Shapes.UpdateShape("price",m,["limitfromdate",objCSPat.dateA,"limittodate",objCSPat.dateB,"borderColor","rgba(0,51,102,0.4)","borderWidth",2])),objSMA=e.sma,objRSI=e.rsi,objBBands=e.bbands,objMACD=e.macd,null!=objSMA){var o=l.chart.AddStudyExtended("sma",[[objSMA.parameter1]],null),s=l.chart.GetStudyStyle(o);s.stroke="purple",s.strokeWidth=2,o=l.chart.AddStudyExtended("sma",[[objSMA.parameter2]],null),(s=l.chart.GetStudyStyle(o)).stroke="red",s.strokeWidth=2,o=l.chart.AddStudyExtended("sma",[[objSMA.parameter3]],null),(s=l.chart.GetStudyStyle(o)).stroke="orange",s.strokeWidth=2}null!=objRSI&&(o=l.chart.AddStudyExtended("rsi",[[objRSI.parameter1],[objRSI.parameter2]],null)),null!=objBBands&&(o=l.chart.AddStudyExtended("bbands",[[objBBands.parameter1],[objBBands.parameter2]],null)),null!=objMACD&&(o=l.chart.AddStudyExtended("bbands",[[objMACD.parameter1],[objMACD.parameter2],[objMACD.parameter3]],null)),function(t,e){var a={uid:"",closeBtn:!0,editIdx:"",colors:[],captions:[],values:null,type:"signals.tc",sources:null,params:null,visible:!0,name:"TC"},r=null!=e.pivot.term?e.pivot.term.toLowerCase():"st";a.captions.push(f.returnLocalizationString("signals.tradingcentral.legend."+r,"TC"));var i=t.configuration.legend;a.colors.push(i.color),C=g.GetGUID(),a.uid=C,a.editIdx=g.GetGUID(),g.AddExtrenalLegend(C,a)}(t,e)}}}}),define("AdvinionChartInitializer",["require","UrlResolver"],function(t){var u=t("UrlResolver");return new function(){var s={white:"rgba(255,255,255,1)",transparentGray:"rgba(247,247,247,0.8)",transparentWhite:"rgba(255,255,255,0.8)",black:"rgba(0,0,0,1)"},t=[5,2],e=[],a=[2,0,0,0],r=s.transparentWhite,i="bold 10px Verdana",n="left",o={};o[eChartPriceLineType.CurrentRate]={panelId:"price",lineColor:"rgba(3,165,217,1)",lineWidth:1,dashStyle:t,labelColor:"rgba(3,165,217,1)",labelfont:i,labelAlignment:n,horizontalPadding:2,margin:a,inPriceRange:!1,labelBackgroundColor:r,boxColor:"rgba(0,183,241,1)",boxTextColor:s.white,allowDragLine:!1},o[eChartPriceLineType.LimitLevel]={panelId:"price",lineColor:"rgba(150,150,150,1)",lineWidth:1,dashStyle:t,labelColor:"rgba(150,150,150,1)",labelfont:i,labelAlignment:n,horizontalPadding:2,margin:a,inPriceRange:!1,labelBackgroundColor:r,boxColor:"rgba(150,150,150,1)",boxTextColor:s.white,allowDragLine:!0},o[eChartPriceLineType.StopLoss]={panelId:"price",lineColor:"rgba(246,87,86,1)",lineWidth:1,dashStyle:e,labelColor:"rgba(246,87,86,1)",labelfont:i,labelAlignment:n,horizontalPadding:2,margin:a,inPriceRange:!1,labelBackgroundColor:r,boxColor:"rgba(251,138,142,1)",boxTextColor:s.black,allowDragLine:!0},o[eChartPriceLineType.TakeProfit]={panelId:"price",lineColor:"rgba(93,185,92,1)",lineWidth:1,dashStyle:e,labelColor:"rgba(93,185,92,1)",labelfont:i,labelAlignment:n,horizontalPadding:2,margin:a,inPriceRange:!1,labelBackgroundColor:r,boxColor:"rgba(172,224,133,1)",boxTextColor:s.black,allowDragLine:!0},o[eChartPriceLineType.OpenRate]={panelId:"price",lineColor:"rgba(150,150,150,1)",lineWidth:1,dashStyle:t,labelColor:"rgba(150,150,150,1)",labelfont:i,labelAlignment:n,horizontalPadding:2,margin:a,inPriceRange:!1,labelBackgroundColor:r,boxColor:"rgba(150,150,150,1)",boxTextColor:s.white,allowDragLine:!1};var l={rootPath:u.getStaticJSPath("Advinion"),dataFeedSettings:{instrumentsNumber:10,comparisonInstrumentsNumber:10,requestTimeout:500,searchInstrumentsNumber:1e3,TickMinutes:"2",RateValueMode:"mid"},dateFormatSettings:{realtime:"DD/MM/YYYY HH:mm:ss",minutes:"DD/MM/YYYY HH:mm:ss",hours:"DD/MM/YYYY HH:mm:ss",eod:"DD/MM/YYYY",datebarYear:"YYYY",datebarMonthDay:"DD/MM/YYYY",datebarDay:"DD",datebarFull:"DD/MM/YYYY",datebarHoursMinutes:"HH:mm",datebarMonth:"MM",datebarHoursMinutesSeconds:"HH:mm:ss"},priceLines:o,getPriceBoxSettings:function(t,e){return["outOfRangeAxisMarker",!0,"outOfRangeBoxColor",o[t].boxColor,"outOfRangeTextColor",o[t].boxTextColor,"outOfRangeLabel",e,"boxColor",o[t].boxColor,"boxTextColor",o[t].boxTextColor]},languages:[{id:"ar",name:"العربية",dir:"rtl"},{id:"he",name:"עברית",dir:"rtl"},{id:"it",name:"Italiano",dir:"ltr"},{id:"fr",name:"Français",dir:"ltr"},{id:"ru",name:"Русский",dir:"ltr"},{id:"pt",name:"Português",dir:"ltr"},{id:"nl",name:"Nederlands",dir:"ltr"},{id:"es",name:"Español",dir:"ltr"},{id:"tr",name:"Türk",dir:"ltr"},{id:"ja",name:"日本人",dir:"ltr"},{id:"de",name:"Deutsch",dir:"ltr"},{id:"pl",name:"Polski",dir:"ltr"},{id:"gr",name:"ελληνικά",dir:"ltr"},{id:"ro",name:"Română",dir:"ltr"},{id:"en",name:"English",dir:"ltr"},{id:"zh",name:"中文",dir:"ltr"},{id:"cs",name:"Čeština",dir:"ltr"},{id:"hu",name:"Magyar",dir:"ltr"},{id:"id",name:"Bahasa Indonesia",dir:"ltr"},{id:"ms",name:"Bahasa Melayu",dir:"ltr"},{id:"sv",name:"Svenska",dir:"ltr"},{id:"tl",name:"Filipino",dir:"ltr"},{id:"hi",name:"हिंदी",dir:"ltr"},{id:"ko",name:"한국어",dir:"ltr"}],timeframes:[{n:"tick",id:eChartTimeFramesIds.tick,f:1,t1:"t",t2:""},{n:"1 Minute",id:eChartTimeFramesIds["1 Minute"],f:1,t1:"1",t2:"m"},{n:"5 Minutes",id:eChartTimeFramesIds["5 Mintes"],f:1,t1:"5",t2:"m"},{n:"10 Minutes",id:eChartTimeFramesIds["10 Minutes"],f:1,t1:"10",t2:"m"},{n:"15 Minutes",id:eChartTimeFramesIds["15 Minutes"],f:1,t1:"15",t2:"m"},{n:"30 Minutes",id:eChartTimeFramesIds["30 Minutes"],f:1,t1:"30",t2:"m"},{n:"1 Hour",id:eChartTimeFramesIds["1 Hour"],f:1,t1:"1",t2:"h"},{n:"2 Hours",id:eChartTimeFramesIds["2 Hours"],f:1,t1:"2",t2:"h"},{n:"4 Hours",id:eChartTimeFramesIds["4 Hours"],f:1,t1:"4",t2:"h"},{n:"5 Hours",id:eChartTimeFramesIds["5 Hours"],f:1,t1:"5",t2:"h"},{n:"6 Hours",id:eChartTimeFramesIds["6 Hours"],f:1,t1:"6",t2:"h"},{n:"7 Hours",id:eChartTimeFramesIds["7 Hours"],f:1,t1:"7",t2:"h"},{n:"8 Hours",id:eChartTimeFramesIds["8 Hours"],f:1,t1:"8",t2:"h"},{n:"9 Hours",id:eChartTimeFramesIds["9 Hours"],f:1,t1:"9",t2:"h"},{n:"10 Hours",id:eChartTimeFramesIds["10 Hours"],f:1,t1:"10",t2:"h"},{n:"12 Hours",id:eChartTimeFramesIds["12 Hours"],f:1,t1:"12",t2:"h"},{n:"14 Hours",id:eChartTimeFramesIds["14 Hours"],f:1,t1:"14",t2:"h"},{n:"1 Day",id:eChartTimeFramesIds["1 Day"],f:1,t1:"D",t2:""},{n:"1 Week",id:eChartTimeFramesIds["1 Week"],f:1,t1:"W",t2:""},{n:"1 Month",id:eChartTimeFramesIds["1 Month"],f:1,t1:"M",t2:""},{n:"3 Months",id:eChartTimeFramesIds["3 Months"],f:1,t1:"3",t2:"M"},{n:"6 Months",id:eChartTimeFramesIds["6 Months"],f:1,t1:"6",t2:"M"},{n:"1 Year",id:eChartTimeFramesIds["1 Year"],f:1,t1:"Y",t2:""}]};return{getStartSettings:function(t,e){var a,r,i,n,o=null;switch(t){case eChartInstanceType.newDealSlip:i=e,n={isMobile:function(){return!1},ChartLayoutContainer:"#dealChartContainer",ParentRelativeObjectID:"dealChartContainer",Template:eChartCustomTemplates.web,Layout:"layout99",CustomLayoutFile:"ChartUI/LayoutScripts/webNewDealSlipLayout.js",SelectedInstrumentId:i.instrumentId,OrderDirection:i.orderDir,chart:{DefaultTimeScale:eChartTimeFramesIds["1 Minute"],ShowBarData:"true",PriceChartType:"candlesticks",WaterMark:!1,TimeZone:0,ExtraData:eChartTimeFramesIds["5 Mintes"],LineLastCloseMarkRadius:0,AlignToLeft:!1,MaximumBars:500,HistoryCandlesCount:500,NumberOfVisibleBars:100,TwoFingersPriceSlide:null},actions:{showMajors:!0,showCompares:!0,setLastUpdateEvent:!1,enableShowUserPosition:!1,setOpenOptionToolbar:!1,isExpirationRequired:!1},appiinit_indicators:[],tracking:{eventName:i.tracking.eventName},events:{onDialogAddStudy:emptyFn},api:{props:{chart:{gui:{zoom:{}}}}}},o=n=Object.assign({},l,n);break;case eChartInstanceType.newDealMobile:a=e,r={isMobile:function(){return!0},enableCrosshairMode:!0,ChartLayoutContainer:"#chartContainer",ParentRelativeObjectID:"chartContainer",Template:eChartCustomTemplates.mobile,Layout:"layout99",CustomLayoutFile:"ChartUI/LayoutScripts/mobileNewDealSlipLayout.js",SelectedInstrumentId:a.instrumentId,OrderDirection:a.orderDir,chart:{DefaultTimeScale:eChartTimeFramesIds["1 Minute"],ShowBarData:"true",PriceChartType:"candlesticks",WaterMark:!1,TimeZone:0,ExtraData:eChartTimeFramesIds["5 Mintes"],LineLastCloseMarkRadius:0,AlignToLeft:!1,MaximumBars:500,HistoryCandlesCount:500,NumberOfVisibleBars:100,TwoFingersPriceSlide:!0},actions:{showMajors:!0,showCompares:!0,setLastUpdateEvent:!1,enableShowUserPosition:!1,setOpenOptionToolbar:!1,isExpirationRequired:!1},appiinit_indicators:[],tracking:{eventName:"deal-slip-chart-interaction"},events:{onDialogAddStudy:function(t,e){e&&e.dialog("close")}},api:{props:{chart:{gui:{zoom:{interval_font_size:11,interval_font_bold:!1}}}}}},(r=Object.assign({},l,r)).priceLines[eChartPriceLineType.CurrentRate].labelBackgroundColor=s.transparentGray,r.priceLines[eChartPriceLineType.LimitLevel].labelBackgroundColor=s.transparentGray,r.priceLines[eChartPriceLineType.OpenRate].labelBackgroundColor=s.transparentGray,r.priceLines[eChartPriceLineType.StopLoss].labelBackgroundColor=s.transparentGray,r.priceLines[eChartPriceLineType.TakeProfit].labelBackgroundColor=s.transparentGray,o=r;break;default:ErrorManager.onError("/AdvinionChartInitializer","Invalid chart type for the start settings",eErrorSeverity.high)}return o}}}}),define("AdvinionChartsManager",["require","Q"],function(t){var i=t("Q");return function(){var t=i.defer(),e=null,a=ko.observable(!1);function r(){isFunctionType(window.ProChart_InitLayout)?(t.resolve(),a(!0)):(t.reject(),Logger.log("AdvinionChartsManager","ProChart_Loader: Fail Load/Init chart",null,eErrorSeverity.critical))}return{Init:function(t){t=t||{},(e=ProChart_Loader()).init.rootpath=t.rootPath,e.init.loadercss.push(t.cssLoaderPath),e.navigator.properties.xdrMinIE=11,e.init.timeupdateVersioncore="time456",e.init.timeupdateVersiongui="time456",e.init.loaderremovefrom.push({key:"jquery.ui"}),e.init.getrequirejs=!1,e.LoaderInitComplete=r,e.init.cache=!0,e.LoaderInitCombine()},IsChartManagerLoaded:a,IsLoaded:t.promise,ServerPeriods:null}}()}),define("AdvinionChartWrapper",["require","knockout","KoComponentViewModel","Q","AdvinionChartsManager","AdvinionChartInitializer","AdvinionLanguagesMapper","TradingChartsManager","ChartStudySettings","ChartZoomSettingsManager","ChartLayoutSettings","Dictionary","RegistrationManager","InstrumentTranslationsManager","LoadDictionaryContent!charts_resources","Logger","StateObject!Transaction","InstrumentsManager","advinion-chart-pivot-library","Customer","CookieHandler"],function(t){var Q=t("knockout"),e=t("KoComponentViewModel"),$=t("Q"),X=t("AdvinionChartsManager"),J=t("AdvinionChartInitializer"),K=t("AdvinionLanguagesMapper"),Z=t("TradingChartsManager"),tt=t("ChartStudySettings"),et=t("ChartLayoutSettings"),at=t("ChartZoomSettingsManager"),rt=t("RegistrationManager"),it=t("InstrumentTranslationsManager"),nt=t("InstrumentsManager"),ot=t("Dictionary"),st=t("Logger"),lt=t("StateObject!Transaction"),ut=t("advinion-chart-pivot-library"),ct=t("Customer"),dt=t("CookieHandler"),pt="GetRecentHistory",ht="GetMultiRT",mt="GetSymbolsByGroup",gt="FindSymbols",bt="GetHistoryByDates";return tt.Init(),extendClass(e,function(){var o=this,e=this.parent,r=this.Data,y={},t=$.defer(),S=t.promise,I={},i=null,a=null,n=null,s=null,l=null,T={},u=createGuid(),c={chartDisposed:"Chart disposed",chartNotLoaded:"Chart not loaded"},d="rejected";function j(){}function p(){st.log("AdvinionChartWrapper","advinionChartsManager not loadded!",null,eErrorSeverity.critical),t.reject(c.chartNotLoaded)}function h(t){Q.postbox.publish(eFxNetEvents.ChartInit),(y=ProChart_InitLayout(I.startSettings.ChartLayoutContainer,I.startSettings.Layout,I.startSettings.Template,isEmptyValue(I.additionalStartArgs.containerSuffix)?"singlechart-stationkey":"fourcharts-stationkey",1)).ExtraData=I.ExtraData={startSettings:I.startSettings,additionalStartArgs:I.additionalStartArgs,historyCandlesCount:I.startSettings.chart.HistoryCandlesCount};var e,a,r=C();r&&(I.ExtraData.TimeScale=r.TimeScale),y.api.props.chart.gui.legend.font_darklight_auto=!1,y.api.props.chart.gui.legend.font_darklight_percent=0,y.api.props.chart.gui.favorites.compares=tt.ComparesFavorites()||[],y.api.props.chart.gui.favorites.indicators=tt.IndicatorsFavorites()||[],y.api.props.chart.gui.zoom.interval_font_size=I.startSettings.api.props.chart.gui.zoom.interval_font_size||y.api.props.chart.gui.zoom.interval_font_size,y.api.props.chart.gui.zoom.interval_font_bold=I.startSettings.api.props.chart.gui.zoom.interval_font_bold||y.api.props.chart.gui.zoom.interval_font_bold,y.guiinit.rootpath=I.startSettings.rootPath,y.apiinit.customLayoutFile=y.guiinit.rootpath+"/"+I.startSettings.CustomLayoutFile,y.navigator.properties.alvaysXMLHttpRequest=!0,y.navigator.properties.xdrMinIE=11,y.apiinit.timeupdateVersiongui="time456",y.apiinit.savedIndicatorsSetting=tt.GetSettings()||[],y.apiinit.localization.languages=I.startSettings.languages,y.apiinit.timeframes=(e=I.startSettings.timeframes,a=t,e.filter(function(e){var t=a.find(function(t){return t.id.toLowerCase()===e.id.toLowerCase()});return isDefinedType(t)})),y.gui.init.localizationlang=K.getChartLanguage(),y.events.layout.readyComplete=G,y.events.layout.initComplete=U,y.events.layout.onPreloadStart=B,y.events.layout.onPreloadFinished=q,y.events.chart.createComplete=z,y.events.chart.onCanSaveTA=O,y.events.chart.onCanLoadTA=v,y.events.chart.onChangeComparesFavorites=tt.ComparesFavorites,y.events.chart.onChangeIndicatorsFavorites=tt.IndicatorsFavorites,y.events.study.onChangeDefaultSettings=m,y.events.study.onDialogAddStudy=I.startSettings.events.onDialogAddStudy,y.events.onDetectMobileMode=I.startSettings.isMobile,y.gui.loadLayout(),function(){if(!isObjectType(y.bi))return;if(y.bi.stop(),y.bi.clear(),!isObjectType(I.startSettings.tracking))return;var t=!1;isStringType(I.startSettings.tracking.eventName)&&(t=!0,y.events.bi.onGetBI=function(t){Q.postbox.publish(I.startSettings.tracking.eventName,{element:t[0].title})});t&&y.bi.start(1)}()}function m(){tt.SetSettings.apply(null,arguments),y.apiactions.common.closeDialog()}function g(t){switch(t){case"menu-compareform":0<tt.ComparesFavorites().length?y.apiactions.ta.openCompareSmart():y.apiactions.ta.openCompareSearch();break;case"menu-indicatorform":0<tt.IndicatorsFavorites().length?y.apiactions.indicators.openWizardFavorites():y.apiactions.indicators.openWizardSmart();break;case"tc-signals-button":R(null,!0);break;default:I.additionalStartArgs.toggleDealSlipViewCallback.apply(this,arguments)}}function b(){y.chart&&y.chart.symbols&&y.chart.symbols.GetSymbolsByGroup({guiparent:null,guigroup:"majors"},"majors")}function D(t){t&&0<t.length&&x(eChartPriceLineType.CurrentRate,t[t.length-1].close,I.additionalStartArgs.currentRateKey)}function L(e,a,t){var r={timeFrame:t.strTimeFrame,instrumentId:t.strSymbol,orderDir:I.ExtraData.additionalStartArgs.orderDir,historyLength:I.ExtraData.historyCandlesCount,fromDate:t.strFromDate,toDate:t.strToDate};I.isLoadingHistory=!0,T={},A(eChartPriceLineType.CurrentRate),Q.postbox.publish(eFxNetEvents.ChartGetHistoryRequest),Z.GetRecentHistory(r).then(function(t){Q.postbox.publish(eFxNetEvents.ChartGetHistoryResponse),t&&(t.data=isEmptyValue(t.data)?[]:t.data,y&&y.chart&&isFunctionType(y.chart.Push)&&S&&isFunctionType(S.inspect)&&S.inspect().state!==d&&y.chart.Push(e,a,pt,t),D(t.data),function(t){var e=o.priceLines[t];if(!e)return;A(t),x(t,e.rate,e.contentKey)}(eChartPriceLineType.LimitLevel))}).finally(function(){I.isLoadingHistory=!1}).done(),E(t.strSymbol)}function P(t,e,a){if(1!=I.isLoadingHistory){var r=I.ExtraData.additionalStartArgs.orderDir,i=a.strSymbols,n=a.strSeparator,o=i.toString().split(n),s=Z.GetMultiRT(u,o,r);if(!isEmptyType(s)){var l=[];0<(l=a.strTimeFrame===eChartTimeFramesIds.tick?function(t){for(var e=[],a=0;a<t.length;a++){var r=t[a].data[0].ask,i=t[a].id;T[i]!=r&&(T[i]=r,e.push(t[a]))}return e}(s):s).length&&S.then(function(){y.chart.Push(t,e,ht,l)}).fail(j).done(),s[0].data&&0<s[0].data.length&&x(eChartPriceLineType.CurrentRate,s[0].data[0].ask,I.additionalStartArgs.currentRateKey),Q.postbox.publish("GetMultiRT")}}}function f(t,e,a,r){var i,n,o,s,l,u,c,d,p,h,m,g,b,f,C,v;if(y&&y.chart)switch(a){case pt:L(t,e,r);break;case ht:P(t,e,r);break;case mt:h=t,m=e,g=r.strGroup,b=m.UI.instrumentId,f=I.startSettings.comparisonInstrumentsNumber,C=I.startSettings.instrumentsNumber,v=Z.GetSymbolsByGroup(g,b,f,C),S.then(function(){y.chart.Push(h,m,mt,v)}).fail(j).done();break;case gt:l=t,c=r,d="dialogcompares"===(u=e).UI.guiparent,p=Z.FindSymbols(c.strText,I.startSettings.searchInstrumentsNumber,d),S.then(function(){y.chart.Push(l,u,gt,p)}).fail(j).done();break;case bt:i=t,n=e,s={timeFrame:(o=r).strTimeFrame,instrumentId:o.strSymbol,orderDir:I.ExtraData.additionalStartArgs.orderDir,historyLength:I.ExtraData.historyCandlesCount,fromDate:o.strFromDate,toDate:o.strToDate},T={},Q.postbox.publish(eFxNetEvents.ChartGetHistoryRequest),Z.GetRecentHistory(s).then(function(t){Q.postbox.publish(eFxNetEvents.ChartGetHistoryResponse),S.then(function(){t&&!isEmptyValue(t.data)?(y.chart.Push(i,n,bt,t),D(t.data)):(y.chart.Push(i,n,bt,null),I.ExtraData.additionalStartArgs.isLoadingData(!1))}).fail(j).done()}).fail(j).done(),E(o.strSymbol)}}function C(){var t=I.additionalStartArgs.containerSuffix,e=et.GetSettings(t);return isNullOrUndefined(e)?null:e.chartSettings||e}function v(){y.events.chart.onCanLoadTA=null;var t=C();t&&y.chart.SetTAObject(t,!0,!0),Q.postbox.publish(eFxNetEvents.ChartStartComplete),Q.postbox.publish("chart-performance",{event:"chart-start-completed",chartType:I.additionalStartArgs.chartInstanceType,instrument:y.chart.SymbolName}),y.events.chart.onChangeTimeframe=O,y.events.chart.onPriceTypeChange=O,y.events.chart.onChangeSymbol=F}function x(e,a,r){a&&0!=a?S.then(function(){var t=I.startSettings.priceLines[e];!function(t,e,a,r){var i=I.startSettings.getPriceBoxSettings(t,ot.GetItem(r+"_Short",eResourcesNames.ChartsResources));if(o.priceLines[t])return y.chart.Shapes.UpdateShape(a.panelId,o.priceLines[t].id,["value",e],!0),o.priceLines[t].rate=e;var n=y.chart.Shapes.AddHLine(a.panelId,e,ot.GetItem(r,eResourcesNames.ChartsResources),a.lineColor,a.lineWidth,a.dashStyle,a.labelColor,a.labelfont,a.labelAlignment,a.horizontalPadding,a.margin,a.inPriceRange,a.labelBackgroundColor);o.priceLines[t]={id:n,rate:e,contentKey:r,lineType:t},y.chart.Shapes.UpdateShape(a.panelId,o.priceLines[t].id,i,!0),a.allowDragLine&&I.additionalStartArgs.allowDragLine&&y.chart.Shapes.UpdateShape(a.panelId,o.priceLines[t].id,["movewithmouse",!0,"callback",M])}(e,a,t,r)}).fail(j).done():A(e)}function M(t,e){var a=objectFirst(o.priceLines,function(t){return t.id===e});a&&s(a.lineType,t)}function A(e){S.then(function(){var t=I.startSettings.priceLines[e];o.priceLines[e]&&(y.chart.Shapes.DeleteHLine(t.panelId,o.priceLines[e].id),delete o.priceLines[e])}).fail(j).done()}o.priceLines={},et.Init();var w=!1;function k(){y.tradingCentral.api.hide()}function R(t,e){var a=nt.GetInstrument(y.chart.GetSymbol().id);if(!(a.hasSignal&&a.signalName&&null!==dt.ReadCookie("TsComplianceDate")&&ct.prop.AreSignalsAllowed))return k(),void r["tc-chart-signals"](Object.assign(r["tc-chart-signals"](),{disabled:!0}));r["tc-chart-signals"](Object.assign(r["tc-chart-signals"](),{disabled:!1})),(w=isBooleanType(t)?t:!w)?function(t){y.pivotLib||(y.pivotLib=new ut(y,{onClearView:function(){r["tc-chart-signals"](Object.assign(r["tc-chart-signals"](),{active:!1})),w=!1,null!==lt.get("showChartSignals")&&lt.update("showChartSignals",w)},onRenderTC:function(){r["tc-chart-signals"](Object.assign(r["tc-chart-signals"](),{active:!0})),w=!0,null!==lt.get("showChartSignals")&&lt.update("showChartSignals",w)}})),y.tradingCentral.init.styleConfigpath=y.guiinit.rootpath+"/ChartSignals/tc/tradingcentral.config.js";var e="/webpl3/Handlers/TradingSignals/TradingSignals.ashx?methodName=GetChartTradingSignal&symbol="+t.signalName.trim();y.tradingCentral.api.render(e)}(a):k(),e&&Q.postbox.publish(I.startSettings.tracking.eventName,{element:w?eFxNetEvents.Trading_Central_Added:eFxNetEvents.Trading_Central_Removed})}function F(t,e){R(w),O({instrumentId:e.id})}function O(t){var e;y.chart&&y.chart.GetTAObject&&(""===I.additionalStartArgs.containerSuffix?e=H():((e=et.GetSettings(I.additionalStartArgs.containerSuffix)).chartSettings=H(),t&&t.instrumentId&&(e.instrumentId=t.instrumentId)),et.UpdateSettings(I.additionalStartArgs.containerSuffix,e))}function H(){if(!y.chart.GetTAObject)return null;var t=!1,e=!0,a=!0,r=!0,i=!0;return y.chart.GetTAObject(t,e,a,r,i)}function E(t){rt.Update(eRegistrationListName.SingleQuote,t)}function G(){var t=tt.IndicatorsFavorites();y.apiinit.indicators=isArrayType(t)&&t.length?t:I.ExtraData.startSettings.appiinit_indicators,y.apiinit.parentRelativeObjectID=I.ExtraData.startSettings.ParentRelativeObjectID}function U(){var t,e=Z.GetDefaultInstrument(I.startSettings.SelectedInstrumentId);isEmptyType(e)?t=I.startSettings.SelectedInstrumentId:(t=e.id,y.chart.Precision=e.DecimalDigit),y.chart.TwoFingersPriceSlide=I.startSettings.chart.TwoFingersPriceSlide,y.chart.Symbol=t,y.chart.SymbolName=it.Long(t),y.chart.Name=y.chart.SymbolName,y.chart.AlignToLeft=I.startSettings.chart.AlignToLeft;var a=C();y.chart.TimeScale=a&&a.TimeScale||I.startSettings.chart.DefaultTimeScale,y.chart.BigValuesFormat=null,y.chart.TimeZone=I.startSettings.chart.TimeZone,y.chart.ShowBarData=I.startSettings.chart.ShowBarData,y.chart.PriceChartType=I.startSettings.chart.PriceChartType,y.chart.WaterMark=I.startSettings.chart.WaterMark,y.chart.RequestTimeout=I.startSettings.dataFeedSettings.requestTimeout,y.chart.WaterMarkOnSnapshot=!1,y.chart.StudiesToLoad=[],y.chart.LineLastCloseMarkRadius=I.startSettings.chart.LineLastCloseMarkRadius,y.chart.DateFormat=I.startSettings.dateFormatSettings,y.chart.vAxis.boxWidth=70,y.chart.vAxis.hidePriceMarker=!0,y.chart.vAxis.hideCutLabel=!0,l.Start(y),y.chart.JSPush={enableHistory:!0,enableRT:!0,enableSymbols:!0,enableStudies:!0,enableTemplates:!0,funcFetchData:f},i(),Q.postbox.publish(eFxNetEvents.ChartInitComplete)}function z(){a(),y.events.toolbar.onCustomButtonClick=g,I.startSettings.enableCrosshairMode&&y.chart.SetCrosshairMode(!0),S.then(R.bind(null,lt.get("showChartSignals")||!1)).fail(j).done()}function B(){Q.postbox.publish(eFxNetEvents.ChartStart),I.ExtraData.additionalStartArgs.isLoadingData(!0)}function _(){I.ExtraData.additionalStartArgs.isLoadingData(!1),t.resolve()}function q(){n(),l.IsZoomRestored.then(_).done()}var N=debounce(function(){var t=document.getElementById(I.startSettings.ParentRelativeObjectID);t&&y.api.layout.changeSize(t.offsetWidth,t.offsetHeight)},100);function V(t){switch(t.element){case"expand-button":y.chart.EnableTwoFingersPriceSlide(!1);break;case"collapse-button":y.chart.EnableTwoFingersPriceSlide(!0)}}function W(){o.subscribeTo(tt.ComparesFavorites,function(t){y.api.props.chart.gui.favorites.compares=t}),o.subscribeTo(tt.IndicatorsFavorites,function(t){y.api.props.chart.gui.favorites.indicators=t}),I.startSettings.chart.TwoFingersPriceSlide&&o.addDisposable(Q.postbox.subscribe("deal-slip-chart-interaction",V))}function Y(){O(),y.events.chart.onCanSaveTA=null,y.events.chart.onCanLoadTA=null,y.events.chart.onChangeTimeframe=null,y.events.chart.onPriceTypeChange=null,y.events.chart.onChangeSymbol=null,y.chart.JSPush=null,y.chart.CleanUp(y),y=null}return{init:function(t){r["tc-chart-signals"]=Q.observable({disabled:!0,active:!1}),e.init.call(o,t),l=new at(t.additionalStartArgs.containerSuffix),I.additionalStartArgs=t.additionalStartArgs||{},I.additionalStartArgs.isLoadingData=I.additionalStartArgs.isLoadingData||emptyFn,I.startSettings=J.getStartSettings(t.additionalStartArgs.instanceType,t.additionalStartArgs),I.startSettings.ChartLayoutContainer=I.startSettings.ChartLayoutContainer+t.additionalStartArgs.containerSuffix,I.startSettings.ParentRelativeObjectID=I.startSettings.ParentRelativeObjectID+t.additionalStartArgs.containerSuffix,i=t.onExtraInitComplete||emptyFn,a=t.onExtraCreateComplete||emptyFn,n=t.onExtraPreloadFinished||emptyFn,s=t.additionalStartArgs.onPriceLineDragged||emptyFn,Z.subscribe(u),X.IsLoaded.then(Z.GetTimeScalesAsync).then(h).then(W).fail(p).done(),S.then(b).fail(j).done()},dispose:function(){y.chart&&y.chart.StopRTRequests&&y.chart.StopRTRequests(),Z.unsubscribe(u),l&&l.Dispose(),S.then(Y).fail(j).finally(function(){e.dispose.call(o)}).done(),t.reject(c.chartDisposed)},Data:r,ChangeSymbol:function(a,r){S.then(function(){var t,e=Z.GetAdvinionInstrument(a);t=r,I.ExtraData.additionalStartArgs.orderDir=isDefinedType(t)?t:I.ExtraData.additionalStartArgs.orderDir,y.chart.ChangeSymbol(e)}).fail(j).done()},DeletePriceLine:A,DrawPriceLine:x,ResizeChart:N,ChangeMode:function(t){S.then(function(){y.api.layout.changeMode(t)}).fail(j).done()}}})}),define("AdvinionDataAdapter",["require","Q","AdvinionChartsManager","AdvinionDataObjectsMapper","QuotesManager","QuotesSubscriber","dalCharts"],function(t){var u=t("Q"),c=t("AdvinionChartsManager"),d=t("AdvinionDataObjectsMapper"),p=t("QuotesManager"),h=t("QuotesSubscriber"),m=t("dalCharts");return function(){var r=new h,a=[{databaseValue:eChartPeriod.Ticks,chartValue:eChartTimeFramesIds.tick},{databaseValue:eChartPeriod.OneMinute,chartValue:eChartTimeFramesIds["1 Minute"]},{databaseValue:eChartPeriod.FiveMinutes,chartValue:eChartTimeFramesIds["5 Mintes"]},{databaseValue:eChartPeriod.FifteenMinutes,chartValue:eChartTimeFramesIds["15 Minutes"]},{databaseValue:eChartPeriod.ThirtyMinutes,chartValue:eChartTimeFramesIds["30 Minutes"]},{databaseValue:eChartPeriod.OneHour,chartValue:eChartTimeFramesIds["1 Hour"]},{databaseValue:eChartPeriod.TwoHours,chartValue:eChartTimeFramesIds["2 Hours"]},{databaseValue:eChartPeriod.FourHours,chartValue:eChartTimeFramesIds["4 Hours"]},{databaseValue:eChartPeriod.SixHours,chartValue:eChartTimeFramesIds["6 Hours"]},{databaseValue:eChartPeriod.TwelveHours,chartValue:eChartTimeFramesIds["12 Hours"]},{databaseValue:eChartPeriod.OneDay,chartValue:eChartTimeFramesIds["1 Day"]},{databaseValue:eChartPeriod.OneWeek,chartValue:eChartTimeFramesIds["1 Week"]},{databaseValue:eChartPeriod.OneMonth,chartValue:eChartTimeFramesIds["1 Month"]}];function t(e){var t=a.filter(function(t){return t.chartValue==e});if(0==t.length)throw new Error("The specified time scale was not found ("+e+").");return t[0].databaseValue}function e(e){var t=a.filter(function(t){return t.databaseValue==e});if(0==t.length)throw new Error("The specified time scale period was not found ("+e+").");return t[0].chartValue}function i(t){return{f:1,id:e(t.periodID),n:t.periodName}}function n(t){c.ServerPeriods=t.map(i)}function o(){return u(c.ServerPeriods)}function s(t){return t.filter(function(t){return t.periodID!=eChartPeriod.TenSeconds})}function l(t,e){var a=r.GetQuote(t);return{value:e===eOrderDir.Sell?a.bid():a.ask(),isInactive:a.isInactive()}}return r.Start(),d.init(r),{getDatabasePeriod:t,getChartTimeScale:e,getHistoryRates:function(a){function e(t){var e=d.mapRecentHistoryObject(a.instrumentId,t.map(d.mapCandleObject));return e&&e.data&&function(t,e,a){if(t&&e&&0!==e.length){var r=e[e.length-1];if(r&&!r.close){var i=l(t,a).value,n=Number(i);if(!i||!n||isNaN(n))throw new Error("Quote data unavailable for instrument: "+t);r.high<n&&(r.high=n),r.low>n&&(r.low=n),r.close=n}}}(a.instrumentId,e.data,a.orderDir),e}var r={instrumentId:a.instrumentId,rateType:a.orderDir===eOrderDir.Sell?eChartRateType.Bid:eChartRateType.Ask,periodId:t(a.timeFrame),fromDate:d.mapAdvinonFromDate(a.fromDate),toDate:d.mapAdvinonToDate(a.toDate),numCandles:a.historyLength},i=u.defer();function n(){if(p.Quotes.GetItem(a.instrumentId)){p.OnChange.Remove(n);var t=m.GetCandles(r).then(e);i.resolve(t)}}return p.OnChange.Add(n),n(),i.promise},getHistoryTicks:function(e){var t={instrumentId:e.instrumentId,rateType:e.orderDir===eOrderDir.Sell?eChartRateType.Bid:eChartRateType.Ask,fromDate:d.mapAdvinonFromDate(e.fromDate),toDate:d.mapAdvinonToDate(e.toDate),numTicks:e.historyLength};return m.GetTicks(t).then(function(t){return d.mapRecentHistoryObject(e.instrumentId,t.map(d.mapTickObject))})},getTimeScalesAsync:function(){return isEmptyValue(c.ServerPeriods)?m.GetPeriods().then(s).then(n).then(o):o()},getMapper:function(){return d},getQuoteData:l,unsubscribeFromQuote:function(t){r.RemoveQuoteSubscription(t)}}}()}),define("AdvinionDataObjectsMapper",["require","CacheManager","InstrumentTranslationsManager"],function(t){var d=t("CacheManager"),p=t("InstrumentTranslationsManager");return new function(){var a="advinion",s=/[\D]/g,l="20",u="19",r={};function e(t){var e,a,r,i=t.split(s);a=2,(r=i)[e=0]=r.splice(a,1,r[e])[0];var n=i[0],o=(new Date).getFullYear();return i[0]=parseInt(l+n)>o?u+n:l+n,i.join(" ")}function i(){var t=new Date(d.ServerTime().getTime()),e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return 1==a.toString().length&&(a="0"+a),1==r.toString().length&&(r="0"+r),1==i.toString().length&&(i="0"+i),1==n.toString().length&&(n="0"+n),1==o.toString().length&&(o="0"+o),e+"-"+a+"-"+r+" "+i+":"+n+":"+o}function n(t){return p.Long(t)}function o(t){return p.GetTooltipByInstrumentId(t)}function c(t,e){return isEmptyType(t)||!isStringType(t)?null:t.replace(/[-: ]/g,"")+e}return{init:function(t){r=t},dispose:function(){},mapTickObject:function(t){return{open:Number(t[eTickHistoryProperites.rate]),close:Number(t[eTickHistoryProperites.rate]),low:Number(t[eTickHistoryProperites.rate]),high:Number(t[eTickHistoryProperites.rate]),ask:0,bid:0,other:0,date:e(t[eTickHistoryProperites.date])}},mapCandleObject:function(t){return{open:Number(t[eCandleHistoryProperites.open]),close:Number(t[eCandleHistoryProperites.close]),low:Number(t[eCandleHistoryProperites.low]),high:Number(t[eCandleHistoryProperites.high]),ask:0,bid:0,other:0,date:e(t[eCandleHistoryProperites.date])}},mapSymbol:function(t){return{exchangeId:a,marketId:t.instrumentTypeId,countryId:"",id:t.id,name:n(t.id),description:o(t.id),precision:t.DecimalDigit,timescales:null,defaultTimescale:null}},mapComparisonSymbol:function(t){return{name:n(t.id),id:t.id,description:o(t.id)}},mapMultiRTObject:function(t,e){var a=i();return{id:t,lastTimeStamp:a,data:[{ask:e,bid:e,other:0,date:a}]}},mapRecentHistoryObject:function(t,e){return{id:t,lastTimeStamp:i(),data:e}},mapSymbolLite:function(t){var e=r.GetQuote(t);return{exchangeId:a,marketId:eInstrumentType.Shares,countryId:"",id:t,name:n(t),description:n(t),precision:lenAfterDelimeter(e.midRate()),timescales:null,defaultTimescale:null}},mapFormatedDate:function(t){return t.getFullYear()+"-"+("00"+(t.getMonth()+1)).slice(-2)+"-"+("00"+t.getDate()).slice(-2)+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)+":"+("00"+t.getSeconds()).slice(-2)},mapAdvinonFromDate:function(t){return c(t,"000")},mapAdvinonToDate:function(t){return c(t,"999")}}}}),define("AdvinionLanguagesMapper",["require","CookieHandler"],function(t){var r=t("CookieHandler");return function(){var e={Arabic:"ar",Hebrew:"he",Italian:"it",Francais:"fr",Russian:"ru",Portuguese:"pt",Dutch:"nl",Spanish:"es",Turkish:"tr",Japanese:"ja",German:"de",Polish:"pl",Greek:"el",Romanian:"ro",English:"en",Chinese:"zh",Czech:"cs",Hungarian:"hu",Indonesian:"id",Malay:"ms",Swedish:"en",Filipino:"en",Hindi:"en",Korean:"en"};function a(){return e.English}return{getChartLanguage:function(){var t=r.ReadCookie("Language");return t&&e.hasOwnProperty(t)?e[t]:a()},getDefaultLanguage:a}}()}),define("DealSlipChart",["require","knockout","AdvinionChartWrapper"],function(t){var u=t("knockout"),e=t("AdvinionChartWrapper");return extendClass(e,function(){var e=this,a=this.parent,r=a.Data,i={},t=[];function n(){t.push(u.postbox.subscribe("chart-container-resized",a.ResizeChart))}function o(t){a.ChangeMode(t?eChartMode.Expanded:eChartMode.Collapsed)}function s(){o(i.additionalStartArgs.isExpandedMode||i.additionalStartArgs.isFullScreen)}function l(){a.ResizeChart()}return{init:function(t){t=extendType(t,{onExtraInitComplete:s,onExtraCreateComplete:n,onExtraPreloadFinished:l}),i=t,a.init.call(e,t),r.chartId=t.additionalStartArgs.containerSuffix},dispose:function(){for(;0<t.length;)t.pop().dispose();a.dispose.call(e)},Data:r,ChangeSymbol:a.ChangeSymbol,ChangeOrderDir:a.ChangeOrderDir,DrawPriceLine:a.DrawPriceLine,DeletePriceLine:a.DeletePriceLine,ChangeMode:o}})}),define("NewDealMobileChart",["require","knockout","AdvinionChartWrapper"],function(t){var o=t("knockout"),e=t("AdvinionChartWrapper");return extendClass(e,function(){var e=this,a=this.parent,t=a.Data,r=[];function i(){r.push(o.postbox.subscribe("chart-container-resized",a.ResizeChart)),r.push(o.postbox.subscribe("orientation-change",a.ResizeChart))}function n(){a.ResizeChart()}return{init:function(t){t=$.extend(t,{onExtraInitComplete:emptyFn,onExtraCreateComplete:i,onExtraPreloadFinished:n}),a.init.call(e,t)},dispose:function(){for(;0<r.length;)r.pop().dispose();a.dispose.call(e)},Data:t,ChangeSymbol:a.ChangeSymbol,ChangeOrderDir:a.ChangeOrderDir,DrawPriceLine:a.DrawPriceLine,DeletePriceLine:a.DeletePriceLine}})}),define("TradingChartsManager",["require","AdvinionDataAdapter","InstrumentsManager","InstrumentTranslationsManager","Customer","Dictionary"],function(t){var l=t("AdvinionDataAdapter"),u=t("InstrumentsManager"),c=t("InstrumentTranslationsManager"),v=t("Customer"),y=t("Dictionary"),s="majors",e=eChartTimeFramesIds.tick;return function(){var n={};function i(t,e){var a=n[t],r=Object.keys(n);n[t]=e;var i=[];r.forEach(function(t){i=i.concat(n[t])}),a.filter(function(t){return i.indexOf(t)<0}).forEach(l.unsubscribeFromQuote)}function C(t,e,n){var o=latinizeString(e).toLowerCase(),s=[];return u.ForeachInstrument(function(t,e){var a,r,i;a=e,r=n,((i=o)===String.empty||c.GetFullTextLatinized(a.id).toLowerCase().containsNotEmpty(i)&&(r===eInstrumentType.Mixed||a.instrumentTypeId===r))&&s.push(l.getMapper().mapSymbol(e))}),s.sort(function(t,e){return t.name.localeCompare(e.name)}),s.slice(0,t)}return{subscribe:function(t){n[t]||(n[t]=[])},unsubscribe:function(t){n[t]&&(i(t,[]),delete n[t])},GetSymbolsByGroup:function(t,e,a,r){var i=t===s,n=u.GetFavoriteInstruments(i?a:r),o=0<n.length?n:u.GetMainMostPopularInstruments();return{data:(o=o.filter(function(t){return!i||t.id!==e})).map(l.getMapper().mapSymbol)}},GetRecentHistory:function(t){return t.timeFrame===e?l.getHistoryTicks(t):l.getHistoryRates(t)},GetMultiRT:function(t,e,a){if(!n[t])return null;i(t,e);var r=function(t,e){for(var a=[],r=0;r<t.length;r++){var i=parseInt(t[r]),n=l.getQuoteData(i,e);n.isInactive||a.push(l.getMapper().mapMultiRTObject(i,n.value))}return a}(e,a);return 0===r.length?null:r},FindSymbols:function(t,e,a){var r,i,n,o,s,l,u,c,d,p,h,m,g,b,f={data:[(r=t,i=e,{categoryId:eInstrumentType.Mixed,categoryLabel:y.GetItem("All"),categoryDescription:y.GetItem("AllInstruments"),symbols:C(i,r,eInstrumentType.Mixed)})]};return a||(f.data.push((g=t,b=e,{categoryId:eInstrumentType.Currencies,categoryLabel:y.GetItem("PresetCurrenciesTab"),categoryDescription:y.GetItem("PresetCurrenciesTab"),symbols:C(b,g,eInstrumentType.Currencies)})),f.data.push((h=t,m=e,{categoryId:eInstrumentType.Commodities,categoryLabel:y.GetItem("PresetCommoditiesTab"),categoryDescription:y.GetItem("PresetCommoditiesTab"),symbols:C(m,h,eInstrumentType.Commodities)})),f.data.push((d=t,p=e,{categoryId:eInstrumentType.Crypto,categoryLabel:y.GetItem("PresetCryptoTab"),categoryDescription:y.GetItem("PresetCryptoTab"),symbols:C(p,d,eInstrumentType.Crypto)})),v.prop.futureStatus!=eTradingPermissions.Blocked&&f.data.push((u=t,c=e,{categoryId:eInstrumentType.Indices,categoryLabel:y.GetItem("PresetIndicesTab"),categoryDescription:y.GetItem("PresetIndicesTab"),symbols:C(c,u,eInstrumentType.Indices)})),v.prop.shareStatus!=eTradingPermissions.Blocked&&(f.data.push((s=t,l=e,{categoryId:eInstrumentType.Shares,categoryLabel:y.GetItem("PresetSharesTab"),categoryDescription:y.GetItem("PresetSharesTab"),symbols:C(l,s,eInstrumentType.Shares)})),f.data.push((n=t,o=e,{categoryId:eInstrumentType.ETF,categoryLabel:y.GetItem("PresetETFTab"),categoryDescription:y.GetItem("PresetETFTab"),symbols:C(o,n,eInstrumentType.ETF)})))),f},GetTimeScalesAsync:l.getTimeScalesAsync,GetDefaultInstrument:function(t){var e;if(!(e=isEmptyValue(t)?u.GetFavoriteInstruments(1)[0]:u.GetInstrument(t))){var a=u.GetUserDefaultInstrumentId();e=u.GetInstrument(a)}return e},GetAdvinionInstrument:function(t){var e=u.GetInstrument(t);return isEmptyType(e)?l.getMapper().mapSymbolLite(t):l.getMapper().mapSymbol(e)}}}()});
//# sourceMappingURL=advinioncharts.js.map