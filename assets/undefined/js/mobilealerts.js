define("AlertsManager",["require","AlertFactory"],function(t){var e=function(){var a=new(t("AlertFactory")),r={},n=ko.observable(0),i=new TDelegate,o=[],s=[AlertTypes.MaxIdleTimeAlert,AlertTypes.DoubleLoginAlert,AlertTypes.SessionEndedAlert];function l(){o.pop()}var e=ko.computed(function(){return 0<n()});e.subscribe(function(e){e?$("body").addClass("mobilePopupVisible"):$("body").removeClass("mobilePopupVisible")});var u=function(e){var t=r[e];return t||(t=a.CreateAlert(e))&&(r[e]=t).visible.subscribe(function(e){n(e?n()+1:n()-1)}),r[e]},c=function(e){var t,r=u(e);if(r&&!r.visible()){if(0<=s.indexOf(e)){if(t=e,!(s.indexOf(t)>Math.max.apply(Math,o)))return;r.onCloseAction.Remove(l),r.onCloseAction.Add(l),o.push(s.indexOf(e))}r.show(),i.Invoke(e,r)}},p=function(e,t,r,n,i,o){var s=u(e);s&&a.UpdateAlert(s,e,t,r,n,i,o)};return{HasAlert:e,PopAlert:c,GetAlert:u,UpdateAlert:p,ShowAlert:function(e,t,r,n,i,o){p(e,t,r,n,i,o),c(e)},OnShowAlert:i}}();return window.AlertsManager=e}),define("AlertFactory",["require","ExitAlert","BonusAlert","CloseDealConfirmaionAlert","ClosePositionsConfirmation","ServerResponseAlert","SimpleClientAlert","MaxIdleTimeAlertWrapper","DoubleLoginAlertWrapper","ExposureCoverageAlert","MinEquityAlertWrapper","GeneralOkCancelAlert","GeneralOkAlert","ClientStateAlertExposureAlert","ClientStateAlertExposureCoverageAlert","ClientStateAlertSystemMode","ClientStateAlertApplicationClosing","PortfolioAlertAmlStatus","PortfolioAlertIsActive","PortfolioAlertIsDemo","PortfolioAlertIsReal","PortfolioAlertKycStatus","PortfolioAlertCddStatus","QuestionnaireValidationAlert","CddQuestionnaireAlert","FingerprintLoginActivatedAlert","ScanFingerprintLoginOptionConfirmationAlert","AddFingerprintLoginOptionConfirmationAlert","RemoveFingerprintLoginOptionConfirmationAlert","MultipleDealsClosedConfirmation","RemoveCreditCardConfirmationAlert","LimitsServerResponseAlert","DealAddServerResponseAlert","DealsClosedServerResponseAlert","GeneralCancelableAlert","PopupClientQuestionnaireAlert","KnowledgeQuestionnaireAlert","DeviceNotSupportFingerprintAlert","DepositSuccessAlert","HelpAlert","DepositConfirmationEmailSentAlert","PriceAlertServerResponseAlert","PriceAlertClosedServerResponseAlert","IframeAlert","SessionEndedAlert","DepositConfirmationSignatureAlert"],function(e){var r=e("ExitAlert"),n=e("BonusAlert"),i=e("CloseDealConfirmaionAlert"),o=e("ClosePositionsConfirmation"),s=e("ServerResponseAlert"),a=e("SimpleClientAlert"),l=e("MaxIdleTimeAlertWrapper"),u=e("DoubleLoginAlertWrapper"),c=e("ExposureCoverageAlert"),p=e("MinEquityAlertWrapper"),A=e("GeneralOkCancelAlert"),m=e("GeneralOkAlert"),d=e("ClientStateAlertExposureAlert"),f=e("ClientStateAlertExposureCoverageAlert"),b=e("ClientStateAlertSystemMode"),v=e("ClientStateAlertApplicationClosing"),g=e("PortfolioAlertAmlStatus"),C=e("PortfolioAlertIsActive"),y=e("PortfolioAlertIsDemo"),I=e("PortfolioAlertIsReal"),D=e("PortfolioAlertKycStatus"),h=e("PortfolioAlertCddStatus"),w=e("QuestionnaireValidationAlert"),S=e("CddQuestionnaireAlert"),k=e("FingerprintLoginActivatedAlert"),G=e("ScanFingerprintLoginOptionConfirmationAlert"),T=e("AddFingerprintLoginOptionConfirmationAlert"),B=e("RemoveFingerprintLoginOptionConfirmationAlert"),P=e("MultipleDealsClosedConfirmation"),L=e("RemoveCreditCardConfirmationAlert"),R=e("LimitsServerResponseAlert"),M=e("PriceAlertServerResponseAlert"),F=e("DealAddServerResponseAlert"),V=e("DealsClosedServerResponseAlert"),E=e("GeneralCancelableAlert"),N=e("PopupClientQuestionnaireAlert"),x=e("KnowledgeQuestionnaireAlert"),O=e("DeviceNotSupportFingerprintAlert"),q=e("DepositSuccessAlert"),_=e("HelpAlert"),K=e("IframeAlert"),Q=e("DepositConfirmationEmailSentAlert"),W=e("PriceAlertClosedServerResponseAlert"),Y=e("SessionEndedAlert"),U=e("DepositConfirmationSignatureAlert");return function(){return{CreateAlert:function(e){var t;switch(e){case AlertTypes.ExitAlert:t=new r;break;case AlertTypes.BonusAlert:t=new n;break;case AlertTypes.CloseDealAlert:t=new i;break;case AlertTypes.ClosePositionsConfirmation:t=new o;break;case AlertTypes.ServerResponseAlert:t=new s;break;case AlertTypes.SimpleClientAlert:t=new a;break;case AlertTypes.MaxIdleTimeAlert:t=new l;break;case AlertTypes.DoubleLoginAlert:t=new u;break;case AlertTypes.ExposureCoverageAlert:t=new c;break;case AlertTypes.MinEquityAlert:t=new p;break;case AlertTypes.GeneralOkCancelAlert:t=new A;break;case AlertTypes.GeneralOkAlert:t=new m;break;case PostClientStatesLoginsAlerts.ExposureAlert:t=new d;break;case PostClientStatesLoginsAlerts.ExposureCoverageAlert:t=new f;break;case PostClientStatesLoginsAlerts.SystemMode:t=new b;break;case PostClientStatesLoginsAlerts.SystemModeApplicationClosing:t=new v;break;case PostPortfoliosLoginsAlerts.AmlStatus:t=new g;break;case PostPortfoliosLoginsAlerts.IsActive:t=new C;break;case PostPortfoliosLoginsAlerts.IsDemo:t=new y;break;case PostPortfoliosLoginsAlerts.IsReal:t=new I;break;case PostPortfoliosLoginsAlerts.KycStatus:t=new D;break;case PostPortfoliosLoginsAlerts.CddStatus:t=new h;break;case AlertTypes.ClientQuestionnaire:t=new w;break;case AlertTypes.ClientKnowledgeQuestionnaire:t=new x;break;case AlertTypes.CddClientQuestionnaire:t=new S;break;case AlertTypes.PopupClientQuestionnaire:t=new N;break;case AlertTypes.GeneralCancelableAlert:t=new E;break;case AlertTypes.DealsClosedServerResponseAlert:t=new V;break;case AlertTypes.DealAddServerResponseAlert:t=new F;break;case AlertTypes.LimitsServerResponseAlert:t=new R;break;case AlertTypes.RemoveCreditCardConfirmationAlert:t=new L;break;case AlertTypes.MultipleDealsClosedConfirmation:t=new P;break;case AlertTypes.RemoveFingerprintLoginOptionConfirmationAlert:t=new B;break;case AlertTypes.AddFingerprintLoginOptionConfirmationAlert:t=new T;break;case AlertTypes.ScanFingerprintLoginOptionConfirmationAlert:t=new G;break;case AlertTypes.FingerprintLoginActivatedAlert:t=new k;break;case AlertTypes.DeviceNotSupportFingerprintAlert:t=new O;break;case AlertTypes.DepositSuccessAlert:t=new q;break;case AlertTypes.HelpAlert:t=new _;break;case AlertTypes.DepositConfirmationEmailSentAlert:t=new Q;break;case AlertTypes.PriceAlertServerResponseAlert:t=new M;break;case AlertTypes.MultiplePriceAlertsClosedConfirmation:t=new P;break;case AlertTypes.PriceAlertClosedServerResponseAlert:t=new W;break;case AlertTypes.IframeAlert:t=new K;break;case AlertTypes.SessionEndedAlert:t=new Y;break;case AlertTypes.DepositConfirmationSignatureAlert:t=new U}return t&&(t.Init(),t=t.GetAlert),t},UpdateAlert:function(e,t,r,n,i,o){if(e.messages.removeAll(),r&&e.title(r),(n||""===n)&&e.body(n),i)for(;0<i.length;)e.messages.push(i.shift());return e.properties=o||{},e}}}}),define("AlertBase",["require","knockout","Dictionary","Customer","PortfolioStaticManager"],function(c){var p=c("knockout"),A=c("Dictionary"),m=c("Customer"),d=c("PortfolioStaticManager");return function(){var e=p.observable(!1),t=p.observable(""),r=p.observable(""),n=p.observableArray([]),i=p.observable(!1),o=p.observable(""),s=p.observableArray([]),a=p.observableArray([]),l=p.observable(),u=new TDelegate;return{alertName:"AlertBase",theme:l,visible:e,caller:o,title:t,icon:"",body:r,messages:n,properties:{},DisableThisAlertByCookie:i,NeedToCreateCookie:!0,cookieName:"",buttons:s,buttonProperties:function(e,t,r,n){return{text:e,onclick:t,css_Class:r,idprop:n}},links:a,linkProperties:function(e,t,r){return{text:e,onclick:t,css_Class:r}},injectDepositButtons:function(){var t=this;t.buttons.removeAll(),t.links.removeAll(),m.prop.isDemo||(0<d.Portfolio.pendingWithdrawals.sign()&&t.buttons.push(new t.buttonProperties(A.GetItem("ViewCancel"),function(){t.visible(!1),c(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(eForms.PendingWithdrawal)})},"Pending")),t.buttons.push(new t.buttonProperties(A.GetItem("DepositeNow"),function(){c(["ViewModelsManager"],function(e){p.postbox.publish("action-source","InsufficientAvailableMarginPopUp"),Browser.isChromeOnIOS()?(e.VManager.RedirectToForm(eForms.Deposit),t.visible(!1)):(t.visible(!1),e.VManager.RedirectToForm(eForms.Deposit))})},"Deposite"))),t.links.push(new t.linkProperties(A.GetItem("NotNow"),function(){Browser.isChromeOnIOS()&&c(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(m.prop.mainPage,{})}),t.visible(!1)},"NotNow"))},addRedirectButton:function(e,t){var n=this;n.buttons.push(new n.buttonProperties(e,function(){var t,r,e=n.properties;isEmptyValue(e.redirectToView)||(t=e.redirectToView),r=isEmptyValue(e.redirectToViewArgs)?"":e.redirectToViewArgs,n.visible(!1),e.enableButton&&e.enableButton(!0),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.alert_exitApp):c(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))},t))},prepareForShow:function(){},hide:function(){e()&&e(!1)},show:function(){this.theme(this.properties.theme),this.prepareForShow&&this.prepareForShow(),this.visible(!0)},onCloseAction:u,onClose:function(e){(e=e||this).visible(!1),u.Invoke()}}}}),define("CloseDealConfirmaionAlert",["require","AlertBase","Dictionary","InstrumentsManager"],function(e){var n=e("AlertBase"),i=e("InstrumentsManager"),o=e("Dictionary");return function(){var t=new n;function r(e){var t=i.GetInstrument(e);return{instrumentId:t.id,baseSymbolId:t.baseSymbolId,otherSymbolId:t.otherSymbolId}}var e=function(){var e=this;this.selectedData=this.properties.selectedData,this.getInstrumentData=r,this.confirmationCloseDeal=function(){t.hideConfirmation()&&CookieHandler.CreateCookie("hideMultipleDealsCloseAlert",t.hideConfirmation(),(new Date).AddMonths(12)),t.visible(!1),e.properties.confirmationCloseDeal()}};return{Init:function(){t.alertName="CloseDealConfirmaionAlert",t.visible(!1),t.prepareForShow=e,t.hideConfirmation=ko.observable(!1),t.dontshowagain=o.GetItem("dontshowagain"),t.title(o.GetItem("CloseDeal")),t.body(o.GetItem("closeSingleDealAlert"))},GetAlert:t}}}),define("ClosePositionsConfirmation",["require","AlertBase"],function(e){var n=e("AlertBase");return function(){var e=new n,t={},r=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(Dictionary.GetItem("ok"),function(){e.visible(!1)},"btnOk"))};return{Init:function(){e.alertName="ClosePositionsConfirmation",e.visible(!1),e.properties=t,r()},GetAlert:e}}}),define("SimpleClientAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="SimpleClientAlert",e.visible(!1),t()},GetAlert:e}}}),define("ServerResponseAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.addRedirectButton(n.GetItem("ok"),"btnCancel")};return{Init:function(){e.alertName="ServerResponseAlert",e.visible(!1),t()},GetAlert:e}}}),define("DoubleLoginAlert",["require","AlertsManager","Customer","dalCommon"],function(e){var t,r=e("AlertsManager"),n=e("dalCommon"),i=e("Customer");return{Show:function(){i.isAutologin()||(t=setTimeout(function(){n.Logout(eLoginLogoutReason.mobile_doubleLogin1)},18e4)),r.UpdateAlert(AlertTypes.DoubleLoginAlert),r.PopAlert(AlertTypes.DoubleLoginAlert)},LogoutTimer:t}}),define("DoubleLoginAlertWrapper",["require","AlertBase","Customer","dalCommon","Dictionary"],function(e){var a=e("AlertBase"),l=e("dalCommon"),u=e("Customer"),c=e("Dictionary");return function(){var e=new a,t=!1,r=u.isAutologin()?c.GetItem("loginDoubleLogin")+" "+c.GetItem("loginDoubleLogin_Qus2"):c.GetItem("loginDoubleLogin"),n=function(){e.buttons.removeAll(),e.hide=o,u.isAutologin()?(e.buttons.push(new e.buttonProperties(c.GetItem("doubleLoginReconnect"),i,"Login")),e.buttons.push(new e.buttonProperties(c.GetItem("exit"),o,"Exit"))):e.buttons.push(new e.buttonProperties(c.GetItem("doubleLoginReconnect"),o,"Exit"))},i=function(){s(),window.location="Account/Login/?reason="+eLoginLogoutReason.mobile_doubleLogin2},o=function(){t||(t=!0,s(),l.Exit(eLoginLogoutReason.mobile_doubleLogin3))},s=function(){isDefinedType(DoubleLoginAlert.LogoutTimer)&&clearTimeout(DoubleLoginAlert.LogoutTimer)};return{Init:function(){e.alertName="DoubleLoginAlert",e.visible(!1),e.body(r),n()},GetAlert:e}}}),define("MaxIdleTimeAlert",["require","AlertsManager"],function(e){var t;return t=e("AlertsManager"),{Show:function(){t.UpdateAlert(AlertTypes.MaxIdleTimeAlert),t.PopAlert(AlertTypes.MaxIdleTimeAlert)}}}),define("MaxIdleTimeAlertWrapper",["require","AlertBase"],function(e){var r=e("AlertBase");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(Dictionary.GetItem("exit"),function(){e.onClose(),ActivitySupervisor.Exit()},"Exit"),new e.buttonProperties(Dictionary.GetItem("stay"),function(){e.onClose(),ActivitySupervisor.UpdateStay()},"Stay"))};return{Init:function(){e.alertName="MaxIdleTimeAlert",e.visible(!1),e.body(Dictionary.GetItem("MaxIdleTimeAlert")),e.title=Dictionary.GetItem("maxIdleTimeAlertTitle"),t()},GetAlert:e}}}),define("MinEquityAlert",["require","Dictionary","PortfolioStaticManager"],function(e){var r,a=e("Dictionary"),l=e("PortfolioStaticManager");return r=function(e,t){var r,n,i=a.GetItem("MarginTipInfoContent_MaxSize"),o=(r=t,n=e.maxAllowedAmount,!isEmptyValue(r)&&0<n?String.format(i,e.maxAllowedAmount,t):""),s=0<l.Portfolio.pendingWithdrawals.sign()?a.GetItem("MarginTipInfoContent_Fund_Withdrawal"):a.GetItem("MarginTipInfoContent_Fund");return[o,String.format(s,"","",e.amountToDeposit,$customer.prop.defaultCcy())].filter(function(e){return!isNullOrUndefined(e)&&!isEmptyValue(e)})},{Show:function(e,t){AlertsManager.UpdateAlert(AlertTypes.MinEquityAlert,"",a.GetItem(e.msgKey),r(e,t),null,!0),AlertsManager.PopAlert(AlertTypes.MinEquityAlert)}}}),define("MinEquityAlertWrapper",["require","AlertBase"],function(e){var r=e("AlertBase");return function(){var e=new r,t=function(){e.injectDepositButtons()};return{GetAlert:e,Init:function(){e.alertName="MinEquityAlert",e.visible(!1),e.prepareForShow=t}}}}),define("ExposureCoverageAlert",["require","AlertBase","Dictionary","Customer"],function(r){var n=r("AlertBase"),i=r("Dictionary"),o=r("Customer");return function(){var e=new n,t=function(){e.buttons.removeAll(),o.prop.isDemo||e.buttons.push(new e.buttonProperties(i.GetItem("btnAcctype1"),function(){r(["ViewModelsManager"],function(e){e.VManager.RedirectToForm(eForms.Deposit)}),e.visible(!1)},"btnOk")),e.buttons.push(new e.buttonProperties(i.GetItem("cancel"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.name="ExposureCoverageAlert",e.visible(!1),e.body(i.GetItem("lowMarginAlert")),t()},GetAlert:e}}}),define("BonusAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnOk"))};return{Init:function(){e.alertName="BonusAlert",e.visible(!1),e.body(String.format(n.GetItem("pendingbonustext"),"","","")),t()},GetAlert:e}}}),define("ExitAlert",["require","AlertBase","dalCommon","Dictionary"],function(e){var r=e("AlertBase"),n=e("dalCommon"),i=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(i.GetItem("ok"),function(){n.Logout(eLoginLogoutReason.mobile_exitAlert)},"Ok"),new e.buttonProperties(i.GetItem("cancel"),function(){e.hide()},"Cancel"))};return{Init:function(){e.alertName="ExitAlert",e.visible(!1),e.body(i.GetItem("areyousurelogout")),t()},GetAlert:e}}}),define("CddQuestionnaireAlert",["require","AlertBase","Dictionary"],function(n){var i=n("AlertBase"),o=n("Dictionary");return function(){var e=new i,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(o.GetItem("btnCompleteQuestionnaire"),function(){e.visible(!1),r(),n(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(eForms.ClientQuestionnaire)})},"btnCancel"))},r=function(){isDefinedType(DialogViewModel)&&DialogViewModel.close()};return{Init:function(){e.alertName="CddClientQuestionnaire",e.visible(!1),e.body(o.GetItem("cddNOtCompleteTryOpenDeal")),e.title(o.GetItem("lblImportent")),t()},GetAlert:e}}}),define("PopupClientQuestionnaireAlert",["require","AlertBase","Dictionary"],function(e){var t=e("AlertBase"),r=e("Dictionary");return function(){var e=new t;return{Init:function(){e.alertName="PopupClientQuestionnaire",e.visible(!1),e.title(r.GetItem("lblImportent"))},GetAlert:e}}}),define("GeneralOkCancelAlert",["require","AlertBase","Dictionary"],function(e){var n=e("AlertBase"),i=e("Dictionary");return function(){var e=new n,t=function(){r()},r=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(e.properties.okButtonCaption||i.GetItem("proceed"),function(){e.visible(!1),jQuery.isFunction(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btnOk"),new e.buttonProperties(e.properties.cancelButtonCaption||i.GetItem("cancel"),function(){e.visible(!1),jQuery.isFunction(e.properties.cancelButtonCallback)&&e.properties.cancelButtonCallback()},"btnCancel"))};return{Init:function(){e.alertName="GeneralOkCancelAlert",e.visible(!1),e.prepareForShow=t,r()},GetAlert:e}}}),define("GeneralOkAlert",["require","AlertBase","Dictionary"],function(e){var i=e("AlertBase"),o=e("Dictionary");return function(){var e=new i,t=function(){r()},r=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(e.properties.okButtonCaption||o.GetItem("ok"),function(){e.visible(!1),jQuery.isFunction(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btnOk"))},n=function(){e.visible(!1),jQuery.isFunction(e.properties.onClose)&&e.properties.onClose()};return{Init:function(){e.alertName="GeneralOkAlert",e.visible(!1),e.onClose=n,e.prepareForShow=t,r()},GetAlert:e}}}),define("GeneralCancelableAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnOk"))};return{Init:function(){e.setDefaultTitle=function(){},e.alertName="GeneralCancelableAlert",e.visible(!1),e.title(n.GetItem("msgtype240")||n.GetItem("GenericAlert")),t()},GetAlert:e}}}),define("RemoveCreditCardConfirmationAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem(e.properties.okButtonCaption||"proceed"),function(){e.visible(!1),isFunctionType(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btnOk"),new e.buttonProperties(n.GetItem(e.properties.cancelButtonCaption||"cancel"),function(){e.visible(!1),isFunctionType(e.properties.cancelButtonCallback)&&e.properties.cancelButtonCallback()},"btnCancel"))}return{Init:function(){e.alertName="RemoveCreditCardConfirmationAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("RemoveFingerprintLoginOptionConfirmationAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem(e.properties.okButtonCaption||"depConfirmRemoveCC"),function(){e.visible(!1),isFunctionType(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btnOk"),new e.buttonProperties(n.GetItem(e.properties.cancelButtonCaption||"depCancelRemoveCC"),function(){e.visible(!1),isFunctionType(e.properties.cancelButtonCallback)&&e.properties.cancelButtonCallback()},"btnCancel"))}return{Init:function(){e.alertName="RemoveFingerprintLoginOptionConfirmationAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("AddFingerprintLoginOptionConfirmationAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("cancel"),function(){e.visible(!1),isFunctionType(e.properties.cancelButtonCallback)&&e.properties.cancelButtonCallback()},"btn gray left","fingerprint_close"),new e.buttonProperties(n.GetItem("btnContinue"),function(){e.visible(!1),isFunctionType(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btn right","fingerprint_continue"))}return{Init:function(){e.alertName="AddFingerprintLoginOptionConfirmationAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("ScanFingerprintLoginOptionConfirmationAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("cancel"),function(){e.visible(!1),isFunctionType(e.properties.cancelButtonCallback)&&e.properties.cancelButtonCallback()},"btnCancel"))}return{Init:function(){e.alertName="ScanFingerprintLoginOptionConfirmationAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("FingerprintLoginActivatedAlert",["require","AlertBase"],function(e){var r=e("AlertBase");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(Dictionary.GetItem("ok"),function(){e.visible(!1),isFunctionType(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btn"))}return{Init:function(){e.alertName="FingerprintLoginActivatedAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("DeviceNotSupportFingerprintAlert",["require","AlertBase"],function(e){var r=e("AlertBase");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(Dictionary.GetItem("ok"),function(){e.visible(!1),isFunctionType(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btn"))}return{Init:function(){e.alertName="DeviceNotSupportFingerprintAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("DepositSuccessAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.addRedirectButton(n.GetItem("ok"),"btnCancel")};return{Init:function(){e.alertName="DepositSuccessAlert",e.visible(!1),t()},GetAlert:e}}}),define("HelpAlert",["require","AlertBase"],function(e){var t=e("AlertBase");return function(){var e=new t;return{Init:function(){e.alertName="HelpAlert",e.visible(!1)},GetAlert:e}}}),define("IframeAlert",["require","AlertBase"],function(e){var r=e("AlertBase");return function(){var e=new r,t=function(){this.onClose=function(){e.visible(!1),isFunctionType(this.properties.onCloseCallback)&&this.properties.onCloseCallback()}};return{Init:function(){e.alertName="IframeAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("DepositConfirmationEmailSentAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r;function t(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1),isFunctionType(e.properties.okButtonCallback)&&e.properties.okButtonCallback()},"btn"))}return{Init:function(){e.alertName="DepositConfirmationEmailSentAlert",e.visible(!1),e.prepareForShow=t},GetAlert:e}}}),define("ClientStateAlertExposureAlert",["require","AlertBase","Dictionary","knockout"],function(e){var r=e("AlertBase"),n=e("knockout"),i=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties("Ok",function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="ClientStateAlertExposureAlert",e.visible(!1),e.body(i.GetItem("OrderError12")),e.popCounter=n.observable(0),t()},GetAlert:e}}}),define("ClientStateAlertExposureCoverageAlert",["require","AlertBase","knockout","Dictionary","Customer"],function(e){var n=e("AlertBase"),i=e("Customer"),o=e("knockout"),s=e("Dictionary");return function(){var t=new n,r=function(){t.injectDepositButtons()};return{Init:function(){var e=0<i.prop.maintenanceMarginPercentage;t.alertName="ClientStateAlertExposureCoverageAlert",t.visible(!1),t.body(s.GetItem(e?"lowMarginCallAlert2":"lowMarginCallAlert")),t.popCounter=o.observable(0),t.prepareForShow=r},GetAlert:t}}}),define("ClientStateAlertSystemMode",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties("Ok",function(){e.visible(!1),dalCommon.Logout(eLoginLogoutReason.clientStateError)},"btnCancel"))};return{Init:function(){e.alertName="ClientStateAlertSystemMode",e.visible(!1),e.body(n.GetItem("maintenanceAlertContent")),t()},GetAlert:e}}}),define("ClientStateAlertApplicationClosing",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties("Ok",function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="ClientStateAlertApplicationClosing",e.visible(!1),e.body(n.GetItem("statusApplicationClosing")),t()},GetAlert:e}}}),define("PortfolioAlertAmlStatus",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="PortfolioAlertAmlStatus",e.visible(!1),e.body(n.GetItem("AmlAlertContent")),t()},GetAlert:e}}}),define("PortfolioAlertIsActive",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.injectDepositButtons()};return{Init:function(){e.alertName="PortfolioAlertIsActive",e.visible(!1),e.body(n.GetItem("OrderError105")),e.prepareForShow=t},GetAlert:e}}}),define("PortfolioAlertIsDemo",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="PortfolioAlertIsDemo",e.visible(!1),e.body(n.GetItem("demoLoginAlert")),e.title(n.GetItem("demoLoginAlertTitle")),t()},GetAlert:e}}}),define("PortfolioAlertIsReal",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="PortfolioAlertIsReal",e.visible(!1),e.body(n.GetItem("realLoginAlert")),e.title(n.GetItem("realLoginAlertTitle")),t()},GetAlert:e}}}),define("PortfolioAlertKycStatus",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="PortfolioAlertKycStatus",e.visible(!1),e.body(n.GetItem("OrderError106")),t()},GetAlert:e}}}),define("PortfolioAlertCddStatus",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r,t=function(){e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(n.GetItem("ok"),function(){e.visible(!1)},"btnCancel"))};return{Init:function(){e.alertName="PortfolioAlertCddStatus",e.visible(!1),e.body(n.GetItem("CddAlertContent")),t()},GetAlert:e}}}),define("DealsClosedServerResponseAlert",["require","AlertBase","Dictionary","InstrumentsManager","dalCommon"],function(i){var r=i("AlertBase"),A=i("InstrumentsManager"),m=i("Dictionary"),o=i("dalCommon");return function(){var n=new r,e=function(){this.dataRecords=this.properties.serverResponses,this.title(m.GetItem(this.dataRecords.length<=1?"CloseDeal":"CloseDeals"));for(var e=0;e<this.dataRecords.length;e++){var t=this.dataRecords[e],r=this.properties.requestData.find(function(e){return e.positionNumber==t.itemId}),n=A.GetInstrument(t.instrumentId?t.instrumentId:r?r.instrumentID:"");if(t.status!==eResult.Success)switch(t.result){case"OrderError116":case"OrderError120":t.arguments=JSON.parse(t.responseArgumentsJson);var i=t.arguments.pop(),o=$instrumentTranslationsManager.Long(i);o&&(t.arguments[0]=o),n=$instrumentsManager.GetInstrument(i),t.msgKey=t.result,t.message=(a=t,u=l=void 0,l=m.GetItem(a.msgKey||"InternalError"),u=a.arguments,isNullOrUndefined(u)?l:String.format(l,u));break;default:var s=!isStringType(t.result)||m.ValueIsEmpty(t.result)?"InternalError":t.result;t.message=m.GetItem(s)}extendType(t,{amount:t.usdValue,openedRate:r?r.dealRate||r.orderRate:"",instrumentId:n?n.id:"",closingRate:r?t.rateCalc:"",pl:t.plAccountCcy,orderDir:t.direction?"1closed":"0closed",baseSymbolId:n?n.baseSymbol:"",otherSymbolId:n?n.otherSymbol:""})}var a,l,u,c=objectFirst(this.dataRecords,function(e){return 1==e.status});this.plTotal=c?c.bulkPlAccountCcy:"0",this.rowsValid=this.dataRecords.reduce(function(e,t){return e+t.status},0);var p=this.dataRecords.filter(function(e){return 1==e.status}).length;this.dataRecords.length<=1?0<p?this.body(m.GetItem("YourDealWasClosedSuccessfully")):this.body(m.GetItem("YourDealWasNotClosedSuccessfully")):this.body(String.format(m.GetItem("countOfYourDealsWhereClosedSuccessfully"),p))},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?o.Logout(eLoginLogoutReason.dealsClosedServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(m.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="DealsClosedServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("MultipleDealsClosedConfirmation",["require","AlertBase","InstrumentsManager","Dictionary"],function(e){var t=e("AlertBase"),i=e("Dictionary"),o=e("InstrumentsManager");return function(){var r=new t;function n(e){var t=o.GetInstrument(e);return{instrumentId:t.id,baseSymbolId:t.baseSymbol,otherSymbolId:t.otherSymbol}}function e(){var e,t=this;this.selectedData=this.properties.selectedData||[],e=this.properties.selectedData[0].mode&&this.properties.selectedData[0].mode===eLimitMode.PriceAlert?"hideMultiplePriceAlertsCloseAlert":"hideMultipleDealsCloseAlert",this.getInstrumentData=n,this.confirmationCloseDeal=function(){r.hideConfirmation()&&CookieHandler.CreateCookie(e,r.hideConfirmation(),(new Date).AddMonths(12)),r.visible(!1),t.properties.confirmationCloseDeal()}}return{Init:function(){r.alertName="MultipleDealsClosedConfirmation",r.visible(!1),r.prepareForShow=e,r.hideConfirmation=ko.observable(!1),r.lblChecked=i.GetItem("dontshowagain")},GetAlert:r}}}),define("DealAddServerResponseAlert",["require","AlertBase","FxNet/LogicLayer/Deal/DealLifeCycle","Dictionary"],function(i){var r=i("AlertBase"),u=i("FxNet/LogicLayer/Deal/DealLifeCycle"),c=i("Dictionary");return function(){var n=new r,e=function(){this.resourceName="alerts_deals",this.title(c.GetItem("OpenDeal")),this.messages.removeAll();for(var e,t,r,n,i,o=this.properties.serverResponses,s=0;s<o.length;s++){var a=o[s],l=$instrumentsManager.GetInstrument(a.instrumentId);e=a,t=this.properties,r=this.messages,n=void 0,n=t.instrument,i=e.arguments&&0<e.arguments.length?e.arguments[0]:null,n&&n.isFuture?u.futuresIsRolloverDateSignificant_AfterDeal(n.assetTypeId,n.getInstrumentRolloverDate(),i)&&r.push(String.format(c.GetItem("FutureSuccess"),n.eventDate)):n&&n.isShare&&(u.sharesIsCorporateActionDateSignificant_AfterDeal(n.assetTypeId,n.getCorporateActionDate(),i)?r.push(String.format(c.GetItem("shareSuccessHasDate"),n.getCorporateActionDate())):u.sharesIsDividendDateSignificant_AfterDeal(n.assetTypeId,n.getInstrumentDividendDate(),n.getCorporateActionDate(),i)?r.push(String.format(c.GetItem("ShareDividendSuccess"),n.getInstrumentDividendDate())):r.push(String.format(c.GetItem("ShareSuccess2"),$instrumentTranslationsManager.Long(n.id)))),extendType(a,{dealAmount:a.usdValue,openedRate:a.rateCalc,orderDir:a.direction?"1closed":"0closed",pl:"",baseSymbolId:l?l.baseSymbol:"",otherSymbolId:l?l.otherSymbol:""})}this.body(c.GetItem("SuccessDealOpen")),this.dataRecords=o},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.dealAddServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(c.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="DealAddServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("LimitsServerResponseAlert",["require","AlertBase","FxNet/LogicLayer/Deal/DealLifeCycle","Dictionary","InstrumentsManager"],function(i){var r=i("AlertBase"),d=i("FxNet/LogicLayer/Deal/DealLifeCycle"),f=i("Dictionary"),b=i("InstrumentsManager");return function(){var n=new r,e=function(){var e=this.properties.serverResponses;if((this.dataRecords=e)&&e.length){var t,r,n,i,o,s,a,l,u,c,p=e[0],A=b.GetInstrument(p.instrumentId),m=this.properties.requestData;switch(extendType(p,{limitAmount:m.amount,limitLevel:p.limLevel,orderDir:p.direction?"1":"0",baseSymbolId:A?A.baseSymbol:"",otherSymbolId:A?A.otherSymbol:"",messages:[],type:isDefinedType(m.type)?m.type:p.type,mode:isDefinedType(m.mode)?m.mode:p.mode,action:isDefinedType(m.action)?m.action:p.action,removedIfDoneSLRate:m.removedIfDoneSLRate,removedIfDoneTPRate:m.removedIfDoneTPRate}),this.messages.removeAll(),p.msgKey){case"SuccessLimitAdd":this.title(f.GetItem(p.type==eLimitType.None?"NewLimit":"AddLimit")),this.body(f.GetItem("YourLimitWasAddedSuccessfully")),s=p,a=this.properties,l=this.messages,u=a.instrument,c=s.arguments&&0<s.arguments.length?s.arguments[0]:null,isEmptyValue(c)&&!isEmptyValue(a.valueDate)&&(c=a.valueDate),u&&u.isFuture?d.futuresIsRolloverDateSignificant_AfterDeal(u.assetTypeId,u.getInstrumentRolloverDate(),c)&&l.push(String.format(f.GetItem("FutureSuccess"),u.eventDate)):u&&u.isShare&&(d.sharesIsCorporateActionDateSignificant_AfterDeal(u.assetTypeId,u.getCorporateActionDate(),c)?l.push(String.format(f.GetItem("shareSuccessHasDate"),u.getCorporateActionDate())):d.sharesIsDividendDateSignificant_AfterDeal(u.assetTypeId,u.getInstrumentDividendDate(),u.getCorporateActionDate(),c)?l.push(String.format(f.GetItem("ShareDividendSuccess"),u.getInstrumentDividendDate())):l.push(String.format(f.GetItem("ShareSuccess2"),$instrumentTranslationsManager.Long(u.id))));break;case"SuccessLimitEdit":this.title(f.GetItem(p.type==eLimitType.None?"UpdateLimit":"EditStopLossTakeProfit")),this.body(f.GetItem(p.type==eLimitType.None?"YourLimitWasUpdatedSuccessfully":"YourStopLossTakeProfitWasUpdated")),t=p,r=this.properties,n=this.messages,i=r.instrument,o=t.arguments&&0<t.arguments.length?t.arguments[0]:null,isEmptyValue(o)&&!isEmptyValue(r.valueDate)&&(o=r.valueDate),i&&i.isFuture?d.futuresIsRolloverDateSignificant_AfterDeal(i.assetTypeId,i.getInstrumentRolloverDate(),o)&&n.push(String.format(f.GetItem("FutureSuccess"),i.eventDate)):i&&i.isShare&&(d.sharesIsCorporateActionDateSignificant_AfterDeal(i.assetTypeId,i.getCorporateActionDate(),o)?n.push(String.format(f.GetItem("shareSuccessHasDate"),i.getCorporateActionDate())):d.sharesIsDividendDateSignificant_AfterDeal(i.assetTypeId,i.getInstrumentDividendDate(),i.getCorporateActionDate(),o)?n.push(String.format(f.GetItem("ShareDividendSuccess"),i.getInstrumentDividendDate())):n.push(String.format(f.GetItem("ShareSuccess2"),$instrumentTranslationsManager.Long(i.id))));break;case"SuccessLimitDelete":this.title(f.GetItem("RemoveLimit")),this.body(f.GetItem("YourLimitWasRemoveddSuccessfully"))}}},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.limitsServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(f.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="LimitsServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("QuestionnaireValidationAlert",["require","AlertBase","Dictionary","FxNet/DataAccessLayer/dalKycClientQuestionnaire","StatesManager","Customer"],function(e){var t=e("AlertBase"),a=e("Dictionary"),l=e("FxNet/DataAccessLayer/dalKycClientQuestionnaire"),u=e("StatesManager"),r=e("Customer");return function(){var i=t.call(this),o={title:"lblImportent",messages:["KYC_Failed_p1","KYC_Failed_p2","KYC_Failed_p3","KYC_Failed_p4"],buttons:["btnIAmAware","btnIAmExit"]},s=window.PopUpManager;return i.goToTradingView=function(){e(["ViewModelsManager"],function(e){return e.VManager.SwitchViewVisible(r.prop.startUpForm)})},i.goToDepositView=function(){e(["ViewModelsManager"],function(e){return e.VManager.RedirectToForm(eForms.Deposit)})},i.defer=Q.defer(),i.alertName="ClientQuestionnaire",i.visible(!1),i.Init=function(){},i.redirectAfterResponseAlert=function(){return r.prop.customerType===eCustomerType.TradingBonus||"1"!==a.GetItem("preDepositRequired")?void i.goToTradingView():void i.goToDepositView()},i.popAlert=function(){var e,t,r=i.buttonProperties,n=[];for(i.buttons.removeAll(),i.buttons.push(r(a.GetItem(o.buttons[0]),function(){!function(){if(!window.require)throw new Error("KYC: logic error: compliance dal must be called after require is loaded");i.visible(!1),l.postCustomerFailedAware(function(e){1===e.status&&!0===e.result&&(u.States.KycStatus(eKYCStatus.FailedAware),i.defer.resolve())})}(),$statesManager.States.KycStatus(eKYCStatus.FailedAware)})),i.buttons.push(r(a.GetItem(o.buttons[1]),function(){"1"!==a.GetItem("preDepositRequired")?i.visible(!1):(i.visible(!1),s.ClosePopup()),i.defer.resolve()})),e=0,t=o.messages.length;e<t;e++)n.push(a.GetItem(o.messages[e]));return AlertsManager.UpdateAlert(AlertTypes.ClientQuestionnaire,a.GetItem(o.title),void 0,n),AlertsManager.PopAlert(AlertTypes.ClientQuestionnaire),i.defer.promise},i.GetAlert=i}}),define("KnowledgeQuestionnaireAlert",["require","AlertBase","Dictionary"],function(e){var t=e("AlertBase"),l=e("Dictionary");return function(){var s=t.call(this),a={titles:["pleaseNoteTitle","tradingKnowledgeTitle","tradingKnowledgeTitle","tradingKnowledgeTitle","questionnaireTitle"],messages:[["KYC_Knowledge_Retry_p1"],["KYC_Knowledge_Review_p1"],["KYC_Knowledge_Tested_p1"],["KYC_Knowledge_Inappropriate_p1"],["KYC_Knowledge_Unsuitable_p1"]],buttons:["btnRetry","btnContinue","btnRetry","btnContinue","btnContinue"]};return s.alertName="ClientKnowledgeQuestionnaire",s.visible(!1),s.Init=function(){},s.popAlert=function(e,t){var r,n,i=s.buttonProperties,o=[];for(s.buttons.removeAll(),s.buttons.push(i(l.GetItem(a.buttons[t]),function(){s.visible(!1),e()})),r=0,n=a.messages[t].length;r<n;r++)o.push(l.GetItem(a.messages[t][r]));AlertsManager.UpdateAlert(AlertTypes.ClientKnowledgeQuestionnaire,l.GetItem(a.titles[t]),"",o),AlertsManager.PopAlert(AlertTypes.ClientKnowledgeQuestionnaire)},s.GetAlert=s}}),define("PriceAlertServerResponseAlert",["require","AlertBase","FxNet/LogicLayer/Deal/DealLifeCycle","Dictionary","InstrumentsManager"],function(i){var r=i("AlertBase"),o=i("Dictionary"),s=i("InstrumentsManager");return function(){var n=new r,e=function(){var e=this.properties.serverResponses;if((this.dataRecords=e)&&e.length){var t=e[0],r=s.GetInstrument(t.instrumentId),n=this.properties.requestData;switch(extendType(t,{limitLevel:t.limLevel,orderDir:t.direction?"1":"0",baseSymbolId:r?r.baseSymbol:"",otherSymbolId:r?r.otherSymbol:"",messages:[],type:isDefinedType(n.type)?n.type:t.type,mode:isDefinedType(n.mode)?n.mode:t.mode,action:isDefinedType(n.action)?n.action:t.action}),this.messages.removeAll(),t.msgKey){case"OrderError20":this.title(o.GetItem("pleaseNote")),this.body(""),this.messages.push(String.format(o.GetItem("priceAlertExceedAmount"),environmentData.maxPriceAlertsCount)),this.dataRecords.pop();break;case"OrderError22":this.title(o.GetItem("newPriceAlert")),this.body(""),this.messages.push(String.format(o.GetItem("generalPriceAlertFailure"),environmentData.maxPriceAlertsCount)),this.dataRecords.pop();break;default:this.title(o.GetItem("priceAlertSet")),this.body(o.GetItem("priceAlertSetSuccessfully")),this.messages.push(o.GetItem("priceAlertNotificationsEnableNote"))}}},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";"mobile"!==CookieHandler.ReadCookie("ViewMode").toLowerCase()||isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.limitsServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(o.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="PriceAlertServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("PriceAlertClosedServerResponseAlert",["require","AlertBase","Dictionary","InstrumentsManager"],function(i){var r=i("AlertBase"),o=i("InstrumentsManager"),s=i("Dictionary");return function(){var n=new r,e=function(){this.dataRecords=this.properties.serverResponses,this.title(s.GetItem(this.dataRecords.length<=1?"RemovePriceAlert":"RemovePriceAlerts"));for(var e=0;e<this.dataRecords.length;e++){var t=this.dataRecords[e],r=this.properties.find(function(e){return e.orderID==t.itemId}),n=o.GetInstrument(t.instrumentId?t.instrumentId:r?r.instrumentID:"");t.status!==eResult.Success&&1<this.dataRecords.length&&(t.message=s.GetItem(t.result)),extendType(t,{baseSymbolId:n?n.baseSymbol:"",otherSymbolId:n?n.otherSymbol:"",orderDir:r.orderDir,orderRate:r.orderRate,entryTime:r.entryTime})}var i=this.dataRecords.filter(function(e){return e.status==eResult.Success}).length;1===this.dataRecords.length?1===i?this.body(s.GetItem("YourPriceAlertWasClosedSuccessfully")):(t.status=1,this.body(s.GetItem("YourPriceAlertWasNotClosedSuccessfully"))):this.body(String.format(s.GetItem("countOfYourPriceAlertsWhereClosedSuccessfully"),i))},t=function(){n.buttons.removeAll();var e=n.onBack=function(){var t,r=n.properties.redirectToViewArgs||"";isEmptyValue(n.properties.redirectToView)||(t=n.properties.redirectToView),isFunctionType(n.properties.okButtonCallback)&&n.properties.okButtonCallback(),n.visible(!1),isEmptyValue(t)||("exit"===t?dalCommon.Logout(eLoginLogoutReason.PriceAlertClosedServerResponseAlert_exit):i(["ViewModelsManager"],function(e){e.VManager.SwitchViewVisible(t,r)}))};n.buttons.push(new n.buttonProperties(s.GetItem("ok"),e,"btnOk"))};return{Init:function(){n.alertName="PriceAlertClosedServerResponseAlert",n.visible(!1),n.prepareForShow=e,t()},GetAlert:n}}}),define("SessionEndedAlert",["AlertBase","dalCommon","Dictionary"],function(n,e,i){return function(){var e=new n;function t(){isFunctionType(e.properties.onCloseAction)&&e.properties.onCloseAction()}function r(){e.onClose()}return{Init:function(){e.alertName="SessionEndedAlert",e.visible(!1),e.onCloseAction.Add(t),e.buttons.removeAll(),e.buttons.push(new e.buttonProperties(i.GetItem("sessionEndedReconnectBtn"),r,"btnOk"))},GetAlert:e}}}),define("DepositConfirmationSignatureAlert",["require","AlertBase","Dictionary"],function(e){var r=e("AlertBase"),n=e("Dictionary");return function(){var e=new r;function t(){this.uploadStringImage=this.properties.uploadStringImage}return{Init:function(){e.alertName="DepositConfirmationSignatureAlert",e.visible(!1),e.prepareForShow=t,e.title(n.GetItem("CloseDeal"))},GetAlert:e}}});
//# sourceMappingURL=mobilealerts.js.map