!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var t="undefined"!=typeof window?window:self,n=t.Q;t.Q=e(),t.Q.noConflict=function(){return t.Q=n,this}}}(function(){"use strict";var s=!1;try{throw new Error}catch(e){s=!!e.stack}function t(){}var o,e,n,r,i,a,u,c,l,p=D(),f=(i=r={task:void 0,next:null},u=void 0,c=a=!1,l=[],f=function(e){i=i.next={task:e,domain:c&&process.domain,next:null},a||(a=!0,u())},u="object"==typeof process&&"[object process]"===process.toString()&&process.nextTick?(c=!0,function(){process.nextTick(d)}):"function"==typeof setImmediate?"undefined"!=typeof window?setImmediate.bind(window,d):function(){setImmediate(d)}:"undefined"!=typeof MessageChannel?((e=new MessageChannel).port1.onmessage=function(){u=n,(e.port1.onmessage=d)()},n=function(){e.port2.postMessage(0)},function(){setTimeout(d,0),n()}):function(){setTimeout(d,0)},f.runAfter=function(e){l.push(e),a||(a=!0,u())},f);function d(){for(var e,t;r.next;)e=(r=r.next).task,r.task=void 0,(t=r.domain)&&(r.domain=void 0,t.enter()),h(e,t);for(;l.length;)h(e=l.pop());a=!1}function h(e,t){try{e()}catch(e){if(c)throw t&&t.exit(),setTimeout(d,0),t&&t.enter(),e;setTimeout(function(){throw e},0)}t&&t.exit()}var m=Function.call;function g(e){return function(){return m.apply(e,arguments)}}var v,y=g(Array.prototype.slice),w=g(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),b=g(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),x=g(Array.prototype.map||function(r,i){var o=this,a=[];return w(o,function(e,t,n){a.push(r.call(i,t,n,o))},void 0),a}),k=Object.create||function(e){function t(){}return t.prototype=e,new t},S=g(Object.prototype.hasOwnProperty),E=Object.keys||function(e){var t,n=[];for(t in e)S(e,t)&&n.push(t);return n},R=g(Object.prototype.toString);v="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var j="From previous event:";function T(e,t){if(s&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(j)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);t=n.join("\n"+j+"\n");e.stack=function(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];!function(e){var t=P(e);if(!t)return!1;e=t[0],t=t[1];return e===o&&p<=t&&t<=ee}(i)&&!function(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}(i)&&i&&n.push(i)}return n.join("\n")}(t)}}function P(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(t)return[t[1],Number(t[2])];e=/.*@(.+):(\d+)$/.exec(e);return e?[e[1],Number(e[2])]:void 0}function D(){if(s)try{throw new Error}catch(e){var t=e.stack.split("\n"),t=P(0<t[0].indexOf("@")?t[1]:t[2]);if(!t)return;return o=t[0],t[1]}}function A(e){return e instanceof I?e:_(e)?(t=e,n=C(),A.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}}),n.promise):J(e);var t,n}function C(){var i,o=[],a=[],e=k(C.prototype),t=k(I.prototype);if(t.promiseDispatch=function(e,t,n){var r=y(arguments);o?(o.push(r),"when"===t&&n[1]&&a.push(n[1])):A.nextTick(function(){i.promiseDispatch.apply(i,r)})},t.valueOf=function(){if(o)return t;var e=L(i);return U(e)&&(i=e),e},t.inspect=function(){return i?i.inspect():{state:"pending"}},A.longStackSupport&&s)try{throw new Error}catch(e){t.stack=e.stack.substring(e.stack.indexOf("\n")+1)}function n(n){i=n,t.source=n,w(o,function(e,t){A.nextTick(function(){n.promiseDispatch.apply(n,t)})},void 0),a=o=void 0}return e.promise=t,e.resolve=function(e){i||n(A(e))},e.fulfill=function(e){i||n(J(e))},e.reject=function(e){i||n($(e))},e.notify=function(n){i||w(a,function(e,t){A.nextTick(function(){t(n)})},void 0)},e}function M(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=C();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function q(i){return M(function(e,t){for(var n=0,r=i.length;n<r;n++)A(i[n]).then(e,t)})}function I(i,o,t){void 0===o&&(o=function(e){return $(new Error("Promise does not support operation: "+e))}),void 0===t&&(t=function(){return{state:"unknown"}});var e,a=k(I.prototype);return a.promiseDispatch=function(e,t,n){var r;try{r=i[t]?i[t].apply(a,n):o.call(a,t,n)}catch(e){r=$(e)}e&&e(r)},(a.inspect=t)&&("rejected"===(e=t()).state&&(a.exception=e.reason),a.valueOf=function(){var e=t();return"pending"===e.state||"rejected"===e.state?a:e.value}),a}function O(e,t,n,r){return A(e).then(t,n,r)}function L(e){if(U(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function U(e){return e instanceof I}function _(e){return(t=e)===Object(t)&&"function"==typeof e.then;var t}(A.resolve=A).nextTick=f,A.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(A.longStackSupport=!0),(A.defer=C).prototype.makeNodeResolver=function(){var n=this;return function(e,t){e?n.reject(e):2<arguments.length?n.resolve(y(arguments,1)):n.resolve(t)}},A.Promise=M,(A.promise=M).race=q,M.all=K,M.reject=$,(M.resolve=A).passByCopy=function(e){return e},I.prototype.passByCopy=function(){return this},A.join=function(e,t){return A(e).join(t)},I.prototype.join=function(e){return A([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},A.race=q,I.prototype.race=function(){return this.then(A.race)},(A.makePromise=I).prototype.toString=function(){return"[object Promise]"},I.prototype.then=function(t,n,i){var r=this,o=C(),a=!1;return A.nextTick(function(){r.promiseDispatch(function(e){a||(a=!0,o.resolve(function(e){try{return"function"==typeof t?t(e):e}catch(e){return $(e)}}(e)))},"when",[function(e){a||(a=!0,o.resolve(function(e){if("function"==typeof n){T(e,r);try{return n(e)}catch(e){return $(e)}}return $(e)}(e)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,n,r=!1;try{n=e,t="function"==typeof i?i(n):n}catch(e){if(r=!0,!A.onerror)throw e;A.onerror(e)}r||o.notify(t)}]),o.promise},A.tap=function(e,t){return A(e).tap(t)},I.prototype.tap=function(t){return t=A(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},A.when=O,I.prototype.thenResolve=function(e){return this.then(function(){return e})},A.thenResolve=function(e,t){return A(e).thenResolve(t)},I.prototype.thenReject=function(e){return this.then(function(){throw e})},A.thenReject=function(e,t){return A(e).thenReject(t)},A.nearer=L,A.isPromise=U,A.isPromiseAlike=_,A.isPending=function(e){return U(e)&&"pending"===e.inspect().state},I.prototype.isPending=function(){return"pending"===this.inspect().state},A.isFulfilled=function(e){return!U(e)||"fulfilled"===e.inspect().state},I.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},A.isRejected=function(e){return U(e)&&"rejected"===e.inspect().state},I.prototype.isRejected=function(){return"rejected"===this.inspect().state};var B,F,V,N=[],H=[],Q=[],z=!0;function X(){N.length=0,H.length=0,z=z||!0}function $(r){var e,t,n=I({when:function(e){var t,n;return e&&(t=this,!z||-1!==(n=b(H,t))&&("object"==typeof process&&"function"==typeof process.emit&&A.nextTick.runAfter(function(){var e=b(Q,t);-1!==e&&(process.emit("rejectionHandled",N[n],t),Q.splice(e,1))}),H.splice(n,1),N.splice(n,1))),e?e(r):this}},function(){return this},function(){return{state:"rejected",reason:r}});return e=n,t=r,z&&("object"==typeof process&&"function"==typeof process.emit&&A.nextTick.runAfter(function(){-1!==b(H,e)&&(process.emit("unhandledRejection",t,e),Q.push(e))}),H.push(e),t&&void 0!==t.stack?N.push(t.stack):N.push("(no stack) "+t)),n}function J(n){return I({when:function(){return n},get:function(e){return n[e]},set:function(e,t){n[e]=t},delete:function(e){delete n[e]},post:function(e,t){return null==e?n.apply(void 0,t):n[e].apply(n,t)},apply:function(e,t){return n.apply(e,t)},keys:function(){return E(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function W(e,t,n){return A(e).spread(t,n)}function G(e,t,n){return A(e).dispatch(t,n)}function K(e){return O(e,function(i){var o=0,a=C();return w(i,function(e,t,n){var r;U(t)&&"fulfilled"===(r=t.inspect()).state?i[n]=r.value:(++o,O(t,function(e){i[n]=e,0==--o&&a.resolve(i)},a.reject,function(e){a.notify({index:n,value:e})}))},void 0),0===o&&a.resolve(i),a.promise})}function Y(i){if(0===i.length)return A.resolve();var o=A.defer(),a=0;return w(i,function(e,t,n){var r=i[n];a++,O(r,function(e){o.resolve(e)},function(){0==--a&&o.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))},function(e){o.notify({index:n,value:e})})},void 0),o.promise}function Z(e){return O(e,function(e){return e=x(e,A),O(K(x(e,function(e){return O(e,t,t)})),function(){return e})})}A.resetUnhandledRejections=X,A.getUnhandledReasons=function(){return N.slice()},A.stopUnhandledRejectionTracking=function(){X(),z=!1},X(),A.reject=$,A.fulfill=J,A.master=function(n){return I({isDef:function(){}},function(e,t){return G(n,e,t)},function(){return A(n).inspect()})},A.spread=W,I.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},A.async=function(t){return function(){function e(e,t){var n;if("undefined"==typeof StopIteration){try{n=r[e](t)}catch(e){return $(e)}return n.done?A(n.value):O(n.value,i,o)}try{n=r[e](t)}catch(e){return function(e){return"[object StopIteration]"===R(e)||e instanceof v}(e)?A(e.value):$(e)}return O(n,i,o)}var r=t.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}},A.spawn=function(e){A.done(A.async(e)())},A.return=function(e){throw new v(e)},A.promised=function(n){return function(){return W([this,K(arguments)],function(e,t){return n.apply(e,t)})}},A.dispatch=G,I.prototype.dispatch=function(e,t){var n=this,r=C();return A.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},A.get=function(e,t){return A(e).dispatch("get",[t])},I.prototype.get=function(e){return this.dispatch("get",[e])},A.set=function(e,t,n){return A(e).dispatch("set",[t,n])},I.prototype.set=function(e,t){return this.dispatch("set",[e,t])},A.del=A.delete=function(e,t){return A(e).dispatch("delete",[t])},I.prototype.del=I.prototype.delete=function(e){return this.dispatch("delete",[e])},A.mapply=A.post=function(e,t,n){return A(e).dispatch("post",[t,n])},I.prototype.mapply=I.prototype.post=function(e,t){return this.dispatch("post",[e,t])},A.send=A.mcall=A.invoke=function(e,t){return A(e).dispatch("post",[t,y(arguments,2)])},I.prototype.send=I.prototype.mcall=I.prototype.invoke=function(e){return this.dispatch("post",[e,y(arguments,1)])},A.fapply=function(e,t){return A(e).dispatch("apply",[void 0,t])},I.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},A.try=A.fcall=function(e){return A(e).dispatch("apply",[void 0,y(arguments,1)])},I.prototype.fcall=function(){return this.dispatch("apply",[void 0,y(arguments)])},A.fbind=function(e){var t=A(e),n=y(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(y(arguments))])}},I.prototype.fbind=function(){var e=this,t=y(arguments);return function(){return e.dispatch("apply",[this,t.concat(y(arguments))])}},A.keys=function(e){return A(e).dispatch("keys",[])},I.prototype.keys=function(){return this.dispatch("keys",[])},A.all=K,I.prototype.all=function(){return K(this)},A.any=Y,I.prototype.any=function(){return Y(this)},A.allResolved=(B=Z,F="allResolved",V="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(F+" is deprecated, use "+V+" instead.",new Error("").stack),B.apply(B,arguments)}),I.prototype.allResolved=function(){return Z(this)},A.allSettled=function(e){return A(e).allSettled()},I.prototype.allSettled=function(){return this.then(function(e){return K(x(e,function(e){function t(){return e.inspect()}return(e=A(e)).then(t,t)}))})},A.fail=A.catch=function(e,t){return A(e).then(void 0,t)},I.prototype.fail=I.prototype.catch=function(e){return this.then(void 0,e)},A.progress=function(e,t){return A(e).then(void 0,void 0,t)},I.prototype.progress=function(e){return this.then(void 0,void 0,e)},A.fin=A.finally=function(e,t){return A(e).finally(t)},I.prototype.fin=I.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Can't apply finally callback");return t=A(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},A.done=function(e,t,n,r){return A(e).done(t,n,r)},I.prototype.done=function(e,t,n){var r=function(e){A.nextTick(function(){if(T(e,i),!A.onerror)throw e;A.onerror(e)})},i=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},A.timeout=function(e,t,n){return A(e).timeout(t,n)},I.prototype.timeout=function(e,t){var n=C(),r=setTimeout(function(){t&&"string"!=typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},A.delay=function(e,t){return void 0===t&&(t=e,e=void 0),A(e).delay(t)},I.prototype.delay=function(n){return this.then(function(e){var t=C();return setTimeout(function(){t.resolve(e)},n),t.promise})},A.nfapply=function(e,t){return A(e).nfapply(t)},I.prototype.nfapply=function(e){var t=C(),e=y(e);return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},A.nfcall=function(e){var t=y(arguments,1);return A(e).nfapply(t)},I.prototype.nfcall=function(){var e=y(arguments),t=C();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},A.nfbind=A.denodeify=function(n){var r=y(arguments,1);return function(){var e=r.concat(y(arguments)),t=C();return e.push(t.makeNodeResolver()),A(n).fapply(e).fail(t.reject),t.promise}},I.prototype.nfbind=I.prototype.denodeify=function(){var e=y(arguments);return e.unshift(this),A.denodeify.apply(void 0,e)},A.nbind=function(n,r){var i=y(arguments,2);return function(){var e=i.concat(y(arguments)),t=C();return e.push(t.makeNodeResolver()),A(function(){return n.apply(r,arguments)}).fapply(e).fail(t.reject),t.promise}},I.prototype.nbind=function(){var e=y(arguments,0);return e.unshift(this),A.nbind.apply(void 0,e)},A.nmapply=A.npost=function(e,t,n){return A(e).npost(t,n)},I.prototype.nmapply=I.prototype.npost=function(e,t){var n=y(t||[]),t=C();return n.push(t.makeNodeResolver()),this.dispatch("post",[e,n]).fail(t.reject),t.promise},A.nsend=A.nmcall=A.ninvoke=function(e,t){var n=y(arguments,2),r=C();return n.push(r.makeNodeResolver()),A(e).dispatch("post",[t,n]).fail(r.reject),r.promise},I.prototype.nsend=I.prototype.nmcall=I.prototype.ninvoke=function(e){var t=y(arguments,1),n=C();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},A.nodeify=function(e,t){return A(e).nodeify(t)},I.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){A.nextTick(function(){t(null,e)})},function(e){A.nextTick(function(){t(e)})})},A.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ee=D();return A});var UrlResolver=function(){function r(){return(document.cookie.match(/(^|; )DB=([\d]+)B/i)||"")[2]||"0"}var e=null,n={memoizedValues:{},getVersion:function(){return this.memoizedValues.version?this.memoizedValues.version:this.memoizedValues.version=(document.cookie.match(/(^|; )Version=([^;]+)/i)||"")[2]||""},getLanguage:function(){return this.memoizedValues.language?this.memoizedValues.language:this.memoizedValues.language=(document.cookie.match(/(^|; )Language=([^;]+)/i)||"")[2]||""},getLanguageId:function(){return this.memoizedValues.languageId?this.memoizedValues.languageId:this.memoizedValues.languageId=(document.cookie.match(/(^|; )LID=([^;]*)/i)||"")[2]||""},getCdnPath:function(){return this.memoizedValues.cdnPath?this.memoizedValues.cdnPath:this.memoizedValues.cdnPath=(document.cookie.match(/(^|; )CDN=([^;]*)/i)||"")[2]||""},getApplicationType:function(){return this.memoizedValues.applicationType?this.memoizedValues.applicationType:"mobile"===((document.cookie.match(/(^|; )ViewMode=([^;]*)/i)||0)[2]||"").toLowerCase()?this.memoizedValues.applicationType="mobile":this.memoizedValues.applicationType="web"},getBroker:function(){return null===e&&(e=(document.cookie.match(/(^|; )B=([\d]+)B\|/i)||"")[2]||""),e},getFolderForInstruments:function(){return"DM"===(document.cookie.match(/(^|; )B=.*\|(DM)\|/i)||"")[2]?(document.cookie.match(/(^|; )B=.*\|([\d]+)RF\|/i)||"")[2]||"0":this.getFolder()},getFolder:function(){return(document.cookie.match(/(^|; )B=.*\|([\d]+)F\|/i)||"")[2]||""},getFuturesPermission:function(){return(document.cookie.match(/(^|; )B=.*\|([\w]+)FP\|/i)||"")[2]||""},getSharesPermission:function(){return(document.cookie.match(/(^|; )B=.*\|([\w]+)SP\|/i)||"")[2]||""},getShowTestInstruments:function(){return(document.cookie.match(/(^|; )B=.*\|([\w]+)TST\|/i)||"")[2]||""},getInstrumentsVersion:function(){return(document.cookie.match(/(^|; )B=.*\|([\d]+)\-VER\|/i)||"")[2]||""},getVersionHash:function(){return(document.cookie.match(/(^|; )B=.*\|([\w]+)\-H\|/i)||"")[2]||""},getDealAmountsVersion:function(){return(document.cookie.match(/(^|; )B=.*\|([\d]+)\-DVER\|/i)||"")[2]||""},getDealAmountsHash:function(){return(document.cookie.match(/(^|; )B=.*\|([\w]+)\-DH\|/i)||"")[2]||""},getMinDealsVersion:function(){return(document.cookie.match(/(^|; )B=.*\|([\d]+)\-MVER\|/i)||"")[2]||""},getMinDealGroupId:function(){return(document.cookie.match(/(^|; )MinDealGroupId=([^;]*)/i)||"")[2]||""},getMinDealsHash:function(){return(document.cookie.match(/(^|; )B=.*\|([\w]+)\-MH/i)||"")[2]||""},getIsAutoLogin:function(){return(document.cookie.match(/(^|; )B=.*\|([\d]+)\-AL/i)||"")[2]||""},getApplicationRelativePath:function(){return this.memoizedValues.getApplicationRelativePath?this.memoizedValues.getApplicationRelativePath:this.memoizedValues.getApplicationRelativePath=window.location.pathname.substring(0,window.location.pathname.indexOf("/",1)).toLowerCase()},getStaticPath:function(){return this.combine(this.getCdnPath(),this.getApplicationRelativePath())},getAssetsPath:function(){return this.combine(this.getStaticPath(),"assets",this.getVersion())},getOriginJSPath:function(e){return this.combine("assets",this.getVersion(),"js",e||"")},getStaticJSPath:function(e){return this.combine(this.getAssetsPath(),"js",e||"")},getStaticJSActionPath:function(e,t){return this.combine(this.getAssetsPath(),e,t+".js")},getImagePath:function(e,t,n){e=e||"";t=!0===t?this.getLanguage():"Default",n=!0===n?"Broker"+r():"AllBrokers";return this.combine(this.getAssetsPath(),"skins",this.getApplicationType(),n,t,"img",e)},getImageSharedPath:function(e){return e=e||"",this.combine(this.getAssetsPath(),"skins","Shared","svg",e)},getStaticParams:function(){var e=window.location.host,t=this.getApplicationType(),n=this.getBroker(),r=this.getLanguageId();return this.combine(e,t,n,r)},getStaticFilePath:function(){return this.combine(this.getStaticPath(),this.getStaticParams())},getStaticResourcePath:function(e){return this.combine(this.getStaticPath(),this.getStaticParams(),this.getVersion(),e+".js")},getContentPath:function(e){return this.combine(this.getStaticPath(),this.getStaticParams(),this.getVersion(),r(),e+".js")},getHostName:function(e){e=e.match(/:\/\/([^\/]*)/i);return null!=e&&1<e.length&&"string"==typeof e[1]&&0<e[1].length?e[1]:null},getRedirectPath:function(){return"Account/Redirect"},getRedirectUrl:function(e,t){return this.combine(this.getApplicationRelativePath(),this.getRedirectPath(),e,t?"?"+t:String.empty)},getInstrumentsUrl:function(e,t){var n="Instruments/";return n+="fu"+this.getFuturesPermission(),n+="-s"+this.getSharesPermission(),n+="-fo"+this.getFolderForInstruments(),n+="-br"+this.getBroker(),n+="-tst"+this.getShowTestInstruments(),n+="-v"+(e||this.getInstrumentsVersion()),n+="-h"+(t||this.getVersionHash())},getInstrumentsFromOriginUrl:function(){var e="InitialData/InstrumentsFromOrigin";return e+="?futuresPermission="+this.getFuturesPermission(),e+="&stocksPermission="+this.getSharesPermission(),e+="&folderId="+this.getFolderForInstruments(),e+="&brokerId="+this.getBroker(),e+="&includeTestInstruments="+this.getShowTestInstruments()},getMinDealAmountsUrl:function(e,t,n){var r="MinDealAmounts/";return r+="g"+e,r+="-v"+(t||this.getMinDealsVersion()),r+="-h"+(n||this.getMinDealsHash())},getDealAmountsUrl:function(e,t){var n="DealAmounts/";return n+="v"+(e||this.getDealAmountsVersion()),n+="-h"+(t||this.getDealAmountsHash())},getStaticInitialDataInstrumentsUrl:function(e,t){return this.combine(this.getAssetsPath(),"InitialData",this.getInstrumentsUrl(e,t)+".js")},getStaticInitialDataDealAmountsUrl:function(e,t){return this.combine(this.getAssetsPath(),"InitialData",this.getDealAmountsUrl(e,t)+".js")},getStaticInitialDataMinDealAmountsUrl:function(e,t,n){return this.combine(this.getAssetsPath(),"InitialData",this.getMinDealAmountsUrl(e,t,n)+".js")},isCors:function(e){e=this.getHostName(e);return null!==e&&""!==e},combine:function(){var e=[].slice.call(arguments,0).filter(function(e){return null!=e&&""!==e}).join("/");return e=(e=(e=(e=e.replace(/:\/(?=[^\/])/g,"://")).replace(/([^:\s\%\3\A])\/+/g,"$1/")).replace(/\/(\?|&|#[^!]|$)/g,"$1")).replace(/(\?.+)\?/g,"$1&")},getHashParameters:function(){var e={connectionToken:"",jwtToken:"",dealerCurrency:null,dealerAdvancedWalletView:null,CSMPushEnabled:""};if(window.location.hash&&-1<window.location.hash.indexOf("$")){for(var t=window.location.hash.slice(1).split("$"),n=0;n<t.length;n++)-1!==t[n].indexOf("ct=")&&(e.connectionToken=t[n].substring(3,t[n].length)),-1!==t[n].indexOf("jt=")&&(e.jwtToken=t[n].substring(3,t[n].length)),-1!==t[n].indexOf("dc=")&&(e.dealerCurrency=parseInt(t[n].substring(3,t[n].length))),-1!==t[n].indexOf("av=")&&(e.dealerAdvancedWalletView=parseInt(t[n].substring(3,t[n].length))),-1!==t[n].indexOf("en=")&&(e.CSMPushEnabled=t[n].substring(3,t[n].length));window.location.hash=""}return e},getContentStyleBrokerId:function(){return(document.cookie.match(/(^|; )CS=([^;]*)/i)||"")[2]||""},rndKey:"rnd",regexRndKey:/[?|&]rnd=0.\d+/g,rndMaxValue:9007199254740991,getRndKeyValue:function(){return n.rndKey+"=0."+Math.floor(Math.random()*n.rndMaxValue)},getUrlWithRndKeyValue:function(e){var t=(e=e.replace(n.regexRndKey,"")).indexOf("?")<0?"?":"&";return e=e+t+n.getRndKeyValue()},getChatBotResourcesPath:function(){return UrlResolver.getStaticJSPath()+"/fx-chatbot/"}};return n}(),eLoginLogoutReason={userDemand:777e4,doubleLogin:7770001,FxDenied:7770002,appClose:7770003,idleTime:7770004,clientStateError:7770005,serverError:7770006,webTrader_filepathNotAccessible:7770007,webTrader_noViewModeCookie:7770008,webTrader_noVersionCookie:7770009,webTrader_noBrokerCookie:7770010,webTrader_unsupportedError:7770011,mobileTrader_filepathNotAccessible:7770012,mobileTrader_noViewModeCookie:7770013,mobileTrader_noVersionCookie:7770014,mobileTrader_noBrokerCookie:7770015,mobileTrader_unsupportedError:7770016,preloaderError_noVersion:7770017,preloaderError_noBroker:7770018,preloaderError_noLanguage:7770019,preloaderError_noStaticParams:7770020,preloaderError_ajaxHttp:7770021,preloaderError_other:7770022,preloaderError_jsonParse:7770051,errorManager_httpError:7770023,alert_exitApp:7770024,web_exitAlert:7770025,mobile_exitAlert:7770026,web_postLoginAlertController_serverError:7770027,mobile_postLoginAlertController_serverError:7770028,serverResponseAlert_exit:7770029,initialDataManager_dataError:7770030,initialDataManager_symbolsDataError:7770031,dealAddServerResponseAlert_exit:7770032,dealsClosed_serverResponseAlert_exit:7770033,limitsServerResponseAlert_exit:7770034,activitySupervisor_updateAsStay:7770035,activitySupervisor_exit:7770036,activitySupervisor_logout:7770037,sessionSupervisor_keepAliveHttpContextRequired:7770038,sessionSupervisor_keepAliveCompleteError:7770039,web_doubleLogin1:7770040,web_doubleLogin2:7770041,web_doubleLogin3:7770042,mobile_doubleLogin1:7770043,mobile_doubleLogin2:7770044,mobile_doubleLogin3:7770045,web_registrationFailed:7770046,mobile_registrationFailed:7770047,forgotPasswordLogin:7770048,confirmLogin:7770049,mobileTrader_nocontentStyleBrokerCookie:7770050,changePassword_NoToken:7770108};function AjaxError(e,t,n,r){this.httpStatus=e,this.message=t,this.requestUrl=n,this.responseSnippet=encodeURI(r),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack}function StorageFactory(e){var n={},r=StorageFactory.isSupported(e),i=function(){if(r)switch(e){case StorageFactory.eStorageType.session:return window.sessionStorage;case StorageFactory.eStorageType.local:default:return window.localStorage}}();return{getItem:function(e){return r?i.getItem(e):n[e]||null},setItem:function(e,t){r?i.setItem(e,t):n[e]=t},removeItem:function(e){r?i.removeItem(e):delete n[e]},clear:function(){r?i.clear():n={}},key:function(e){return r?i.key(e):Object.keys(n)[e]||null}}}function Loader(){return{get:function(t,n,e,r){n=n||function(){};var i=new XMLHttpRequest;r&&(t+=t.indexOf("?")<0?"?":"&",t+=UrlResolver.getRndKeyValue()),i.onreadystatechange=function(){var e;4===this.readyState&&(e=i.getAllResponseHeaders?i.getAllResponseHeaders():"",200<=this.status&&this.status<400?n(null,this.responseText||""):401===this.status?n(new AjaxError(this.status,"unauthorized",t,this.responseText.substring(0,20))):403===this.status?n(new AjaxError(this.status,"forbidden",t,this.responseText.substring(0,20))):420===this.status?n(new AjaxError(this.status,"invalid_version",t,this.responseText.substring(0,20))):417===this.status?n(new AjaxError(this.status,"double_request",t,this.responseText.substring(0,20))):0===this.status?n(new AjaxError(0,"abortresponse headers: "+e,t)):n(new AjaxError(this.status,"unknown",t,this.responseText.substring(0,20))))},i.open("GET",t,!0),UrlResolver.isCors(t)||(e&&i.setRequestHeader("Content-Type",e),i.setRequestHeader("X-Requested-With","XMLHttpRequest")),i.send()}}}AjaxError.prototype=Object.create(Error.prototype),AjaxError.prototype.constructor=AjaxError,AjaxError.prototype.toString=function(){return this.httpStatus+" "+this.message+(this.requestUrl?" "+this.requestUrl:"")+(this.responseSnippet?" "+this.responseSnippet:"")},AjaxError.fromXHR=function(e,t,n){return t+="; xhr (statusText: "+e.statusText+", responseType: "+(""===e.responseType?"text":e.responseType)+", status:"+e.status+")",new AjaxError(e.status,t,n)},StorageFactory.isSupported=function(e){try{var t=null;switch(e){case StorageFactory.eStorageType.session:t=window.sessionStorage;break;case StorageFactory.eStorageType.local:default:t=window.localStorage}var n="__tst_strg_key__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return!1}},StorageFactory.eStorageType={local:0,session:1};var Preloader=function(){var t,n,r,i,e,s,o,a=!1,u={htmlReady:!1,initialDataReady:!1,initialData:{}},c={start:Date.now(),end:0,getDuration:function(){return c.end-c.start},htmlStart:0,htmlEnd:0,getHtmlDuration:function(){return c.htmlEnd-c.htmlStart},initialDataStart:0,initialDataEnd:0,jsResourceFailureStart:0,jsResourceFailureEnd:0,getInitialDataDuration:function(){return c.initialDataEnd-c.initialDataStart},getSocketConnectionDuration:function(){var e=c.sockets.connectionComplete-c.sockets.connectionStart;return e<0?0:e},getSocketFromCompleteConnectionToFirstFrame:function(){var e=c.sockets.firstFrame-c.sockets.connectionComplete;return e<0?0:e},getSocketFromCompleteConnectionToFirstQuote:function(){var e=c.sockets.firstQuote-c.sockets.connectionComplete;return e<0?0:e},sockets:{connectionStart:0,connectionComplete:0,firstFrame:0,firstQuote:0}},l=UrlResolver.getLanguage().toLowerCase(),p=UrlResolver.getCdnPath(),f=UrlResolver.getApplicationRelativePath(),d=UrlResolver.getApplicationType(),h=UrlResolver.getContentStyleBrokerId(),m=UrlResolver.getBroker(),g=(document.cookie.match(/(^|; )MinDealGroupId=([^;]*)/i)||"")[2]||"",v=UrlResolver.getHashParameters(),y=UrlResolver.getStaticParams();function w(){var e="mobile"===d?[D(),S().then(E),x(window.environmentData.Title),P(window.environmentData.Icons||[]),j(),A()]:window.isScmmBackOffice?[D(),S(),x(window.environmentData.Title),k(window.environmentData.Labels),P(window.environmentData.Icons||[]),void T(UrlResolver.combine(UrlResolver.getAssetsPath(),"Skins/Shared/backoffice/scmm/scmm.css")),A()]:[D(),S(),x(window.environmentData.Title),k(window.environmentData.Labels),P(window.environmentData.Icons||[]),(e="."+(window.ApplicationTheme||"light|false").split("|")[0],void T(UrlResolver.combine(UrlResolver.getAssetsPath(),"skins/web/allbrokers/default/jquery"+e+".css"))),j(),A()];return Q.all(e).fail(function(e){e instanceof AjaxError&&(401===e.httpStatus||403===e.httpStatus||420===e.httpStatus||424===e.httpStatus)?C(eLoginLogoutReason.preloaderError_ajaxHttp,"login",e.toString()):C(eLoginLogoutReason.preloaderError_other,"logout",e.toString())}).finally(function(){c.end=Date.now()}).done()}function b(t){try{return JSON.parse(t)}catch(e){var n=JSON.stringify({error:"JSONHelper.STR2JSON threw an exception",name:e.name,message:e.message,str:t.substr(0,2500),stack:e.stack},null,4);C(eLoginLogoutReason.preloaderError_jsonParse,"logout",n)}}function x(e){e&&(window.document.title=e)}function k(e){if(e){var t,n,r=document.getElementById("splash_page");if(r){for(n in e)e.hasOwnProperty(n)&&(t=document.getElementById(n))&&(t.innerHTML=e[n]);window.environmentData.switchToPlatform&&(t=document.getElementById("lblSplashText"))&&("demo"===window.environmentData.switchToPlatform?t.innerHTML=e.lblSplashTextDemo||"%Your demo account is loading...":t.innerHTML=e.lblSplashTextReal||"%Your real money account is loading..."),r.style.display=""}}}function S(){return Q.Promise(function(e,t){var n=window.environmentData.isDesktop?"main-built.desktop.js":"mobile"===d?"main-built.mobile.js":"main-built.web.js";R(UrlResolver.getStaticJSPath(n),e,t)})}function E(){return Q.Promise(function(e,t){var n;if(new RegExp("(^|; )NativeIosApp=true","i").test(document.cookie))n="nativeiosmain.js";else{if(!new RegExp("(^|; )NativeAndroidApp=true","i").test(document.cookie))return void e();n="nativeandroidmain.js"}R(UrlResolver.getStaticJSPath(n),e,t)})}function R(r,e,i){var t=document.createElement("script");t.src=r,t.type="text/javascript",t.crossOrigin="anonymous",t.onerror=function(t){var e,n;e=r,n=Q.defer(),c.jsResourceFailureStart=Date.now(),s.get(e,function(e){c.jsResourceFailureEnd=Date.now(),e?n.resolve("retry script loading failed with status "+e.httpStatus+". Snippet: "+e.responseSnippet+". Duration: "+(c.jsResourceFailureEnd-c.jsResourceFailureStart)+"ms."):n.resolve("retry script loading successful. Duration: "+c.jsResourceFailureEnd-c.jsResourceFailureStart)}),n.promise.then(function(e){e=new URIError("The script "+t.target.src+" is not accessible. Retry result: "+e);if("function"!=typeof i)throw e;i(e)})},"function"==typeof e&&(t.onload=e),document.body.appendChild(t)}function j(){var e="."+(window.ApplicationTheme||"light|false").split("|")[0];T(UrlResolver.combine(UrlResolver.getAssetsPath(),"skins",d,"broker"+h,l,"style"+e+".css"))}function T(e){var t,n;e&&(t=document.getElementsByTagName("head")[0],(n=document.createElement("link")).rel="stylesheet",n.href=e,t.appendChild(n))}function P(e){for(var t,n=document.getElementsByTagName("head")[0],r=0;r<e.length;r++)e[r]&&e[r].href&&((t=document.createElement("link")).rel=e[r].rel||"icon",t.href=e[r].href,t.type=e[r].type||"image/png",n.appendChild(t))}function D(){var e,r=this,i=Q.defer(),o=[{type:"Main",url:(e="GetData",UrlResolver.combine(f,"InitialData",e)),nocache:!0},{type:"Countries",url:M("Countries")},{type:"Symbols",url:M("Symbols")},{type:"Instruments",url:M(UrlResolver.getInstrumentsUrl())}];function a(e,t,n){try{if(t&&424===t.httpStatus)return void s.get(UrlResolver.getInstrumentsFromOriginUrl(),a.bind(r,"Instruments"),"application/json; charset=utf-8",!0);if(t)throw t;u.initialData[e]=b(n),function(){for(var e=0;e<o.length;e++)if(void 0===u.initialData[o[e].type])return;c.initialDataEnd=Date.now(),u.initialDataReady=!0,i.resolve("initialDataReady")}()}catch(e){i.reject(e)}}c.initialDataStart=Date.now();for(var t=0;t<o.length;t++)s.get(o[t].url,a.bind(r,o[t].type),"application/json; charset=utf-8",o[t].nocache);return i.promise.then(function(e){return"function"==typeof n&&n(),e})}function A(){var r=Q.defer(),e=UrlResolver.combine(UrlResolver.getStaticPath(),UrlResolver.getStaticParams(),g,i,"main.html");return c.htmlStart=Date.now(),s.get(e,function(e,t){try{if(e)throw e;var n=document.getElementById("mainTemplate");n&&(n.innerHTML=t,u.htmlReady=!0),r.resolve("htmlReady")}catch(e){r.reject(e)}finally{c.htmlEnd=Date.now()}}),r.promise.then(function(e){return"function"==typeof t&&t(),e})}function C(e,t,n){var r;a||(a=!0,n&&(r=n)&&((n=new Date).setTime(n.getTime()+6e4),document.cookie="loginReason="+encodeURIComponent(r)+";Expires="+n.toUTCString()+"; path=/"),window.location.replace(UrlResolver.combine(f,"account",t,"?reason="+e)))}function M(e){return UrlResolver.combine(UrlResolver.getAssetsPath(),"InitialData",e+".js")}return window.addEventListener("beforeunload",function(){a=!0},!1),Q.longStackSupport=!0,Q.onerror=function(e){if("function"==typeof window.onerror&&e&&e.message)return void window.onerror(e.message,"",0,0,e);throw e},i=e=UrlResolver.getVersion(),document.cookie="loginReason=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",i?h?l?y?m?(s=new Loader,o=Q.defer(),s.get(function(){return UrlResolver.combine(UrlResolver.getStaticPath(),UrlResolver.getStaticParams(),"initialdata-environmentdata-"+d+".js?v="+i)}(),function(e,t){try{if(e)throw e;window.environmentData=function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(b(t),window.environmentData),void 0!==window.isDesktop&&(window.environmentData.isDesktop=!0),window.environmentData.version=window.version=i=UrlResolver.getVersion(),window.environmentData.jsCdnPath=p,window.environmentData.jsImgPath=UrlResolver.getImagePath("",!1,!0),window.environmentData.isReady=!0,window.environmentData.dealerCurrency=v.dealerCurrency,window.environmentData.dealerAdvancedWalletView=v.dealerAdvancedWalletView,/to=real/.test(location.search)?window.environmentData.switchToPlatform="real":/to=demo/.test(location.search)&&(window.environmentData.switchToPlatform="demo"),window.systemInfo={config:{}},o.resolve("environmentDataReady")}catch(e){o.reject(e)}},"application/json; charset=utf-8"),o.promise.then(function(e){return"function"==typeof r&&r(),e}).then(function(){return UrlResolver.getVersion()===e}).then(function(e){e?window.isScmmBackOffice||window.environmentData.isDesktop?w():SocketConnection.init(window.environmentData.CSMPushServiceUrl,s,c,v).then(w).catch(w).done():window.location.assign(window.location.href.split("?")[0]+"?v="+i)}).done()):C(eLoginLogoutReason.preloaderError_noBroker,"login","Broker"):C(eLoginLogoutReason.preloaderError_noStaticParams,"login","StaticParams"):C(eLoginLogoutReason.preloaderError_noLanguage,"login","Language"):C(eLoginLogoutReason.mobileTrader_nocontentStyleBrokerCookie,"login","StyleBroker"):C(eLoginLogoutReason.preloaderError_noVersion,"login","Version"),{SetInitialDataLoadEvent:function(e){n=e},SetHtmlLoadEvent:function(e){t=e},SetEnvironmentDataCallback:function(e){r=e},DataObjects:u,Timestamps:c}}(),requirejs,require,define;!function(global,setTimeout){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e)for(var n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}function eachReverse(e,t){if(e)for(var n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));--n);}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){for(var n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(n,e,r,i){return e&&eachProp(e,function(e,t){!r&&hasProp(n,t)||(!i||"object"!=typeof e||!e||isArray(e)||isFunction(e)||e instanceof RegExp?n[t]=e:(n[t]||(n[t]={}),mixin(n[t],e,r,i)))}),n}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){t=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o=defContextName;return isArray(e)||"string"==typeof e||(i=e,isArray(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(o=i.context),r=(r=getOwn(contexts,o))||(contexts[o]=req.s.newContext(o)),i&&r.configure(i),r.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require=require||req,req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(t){req[t]=function(){var e=contexts[defContextName];return e.require[t].apply(e,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(t,n,r){var e,i=t&&t.config||{};if(isBrowser)return(e=req.createNode(i,n,r)).setAttribute("data-requirecontext",t.contextName),e.setAttribute("data-requiremodule",n),!e.attachEvent||e.attachEvent.toString&&e.attachEvent.toString().indexOf("[native code")<0||isOpera?(e.addEventListener("load",t.onScriptLoad,!1),e.addEventListener("error",t.onScriptError,!1)):(useInteractive=!0,e.attachEvent("onreadystatechange",t.onScriptLoad)),e.src=r,i.onNodeCreated&&i.onNodeCreated(e,i,n,r),currentlyAddingScript=e,baseElement?head.insertBefore(e,baseElement):head.appendChild(e),currentlyAddingScript=null,e;if(isWebWorker)try{setTimeout(function(){},0),importScripts(r),t.completeLoad(n)}catch(e){t.onError(makeError("importscripts","importScripts failed for "+n+" at "+r,e,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head=head||e.parentNode,dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,n,t){var r,i;"string"!=typeof e&&(t=n,n=e,e=null),isArray(n)||(t=n,n=null),!n&&isFunction(t)&&(n=[],t.length&&(t.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,t){n.push(t)}),n=(1===t.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e=e||r.getAttribute("data-requiremodule"),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,n,t]),i.defQueueMap[e]=!0):globalDefQueue.push([e,n,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(u){var t,e,f,c,n,m={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},l={},p={},r={},d=[],h={},i={},g={},v=1,y=1;function w(e,t,n){var r,i,o,a,s,u,c,l,p,f=t&&t.split("/"),d=m.map,h=d&&d["*"];if(e&&(t=(e=e.split("/")).length-1,m.nodeIdCompat&&jsSuffixRegExp.test(e[t])&&(e[t]=e[t].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),function(e){for(var t,n=0;n<e.length;n++)"."===(t=e[n])?(e.splice(n,1),--n):".."===t&&(0===n||1===n&&".."===e[2]||".."===e[n-1]||0<n&&(e.splice(n-1,2),n-=2))}(e),e=e.join("/")),n&&d&&(f||h)){e:for(o=(i=e.split("/")).length;0<o;--o){if(s=i.slice(0,o).join("/"),f)for(a=f.length;0<a;--a)if(r=(r=getOwn(d,f.slice(0,a).join("/")))&&getOwn(r,s)){u=r,c=o;break e}!l&&h&&getOwn(h,s)&&(l=getOwn(h,s),p=o)}!u&&l&&(u=l,c=p),u&&(i.splice(0,c,u),e=i.join("/"))}return getOwn(m.pkgs,e)||e}function b(t){isBrowser&&each(scripts(),function(e){if(e.getAttribute("data-requiremodule")===t&&e.getAttribute("data-requirecontext")===f.contextName)return e.parentNode.removeChild(e),!0})}function x(e){var t=getOwn(m.paths,e);return t&&isArray(t)&&1<t.length&&(t.shift(),f.require.undef(e),f.makeRequire(null,{skipMap:!0})([e]),1)}function k(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e,t,n,r){var i,o,a,s=null,u=t?t.name:null,c=e,l=!0,p="";return e||(l=!1,e="_@r"+(v+=1)),s=(a=k(e))[0],e=a[1],s&&(s=w(s,u,r),o=getOwn(h,s)),e&&(s?p=n?e:o&&o.normalize?o.normalize(e,function(e){return w(e,u,r)}):-1===e.indexOf("!")?w(e,u,r):e:(s=(a=k(p=w(e,u,r)))[0],p=a[1],n=!0,i=f.nameToUrl(p))),{prefix:s,name:p,parentMap:t,unnormalized:!!(n=!s||o||n?"":"_unnormalized"+(y+=1)),url:i,originalName:c,isDefine:l,id:(s?s+"!"+p:p)+n}}function E(e){var t=e.id;return getOwn(l,t)||(l[t]=new f.Module(e))}function R(e,t,n){var r=e.id,i=getOwn(l,r);!hasProp(h,r)||i&&!i.defineEmitComplete?(i=E(e)).error&&"error"===t?n(i.error):i.on(t,n):"defined"===t&&n(h[r])}function j(t,e){var n=t.requireModules,r=!1;e?e(t):(each(n,function(e){e=getOwn(l,e);e&&(e.error=t,e.events.error&&(r=!0,e.emit("error",t)))}),r||req.onError(t))}function T(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(f.defQueueMap[t]=!0),d.push(e)}),globalDefQueue=[])}function P(e){delete l[e],delete p[e]}function D(){var r,e=1e3*m.waitSeconds,i=e&&f.startTime+e<(new Date).getTime(),o=[],a=[],s=!1,u=!0;if(!t){if(t=!0,eachProp(p,function(e){var t=e.map,n=t.id;if(e.enabled&&(t.isDefine||a.push(e),!e.error))if(!e.inited&&i)x(n)?s=r=!0:(o.push(n),b(n));else if(!e.inited&&e.fetched&&t.isDefine&&(s=!0,!t.prefix))return u=!1}),i&&o.length)return(e=makeError("timeout","Load timeout for modules: "+o,null,o)).contextName=f.contextName,j(e),0;u&&each(a,function(e){!function r(i,o,a){var e=i.map.id;i.error?i.emit("error",i.error):(o[e]=!0,each(i.depMaps,function(e,t){var n=e.id,e=getOwn(l,n);!e||i.depMatched[t]||a[n]||(getOwn(o,n)?(i.defineDep(t,h[n]),i.check()):r(e,o,a))}),a[e]=!0)}(e,{},{})}),i&&!r||!s||!isBrowser&&!isWebWorker||n||(n=setTimeout(function(){n=0,D()},50)),t=!1}}function a(e){hasProp(h,e[0])||E(S(e[0],null,!0)).init(e[1],e[2])}function o(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function s(e){e=e.currentTarget||e.srcElement;return o(e,f.onScriptLoad,"load","onreadystatechange"),o(e,f.onScriptError,"error"),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function A(){var e;for(T();d.length;){if(null===(e=d.shift())[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1])),0;a(e)}f.defQueueMap={}}return c={require:function(e){return e.require?e.require:e.require=f.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?h[e.map.id]=e.exports:e.exports=h[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(m.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},(e=function(e){this.events=getOwn(r,e.id)||{},this.map=e,this.shim=getOwn(m.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,--this.depCount,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,f.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();f.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;i[e]||(i[e]=!0,f.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var t,e,n,r=this.map.id,i=this.depExports,o=this.exports,a=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(a)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{o=f.execCb(r,a,i,o)}catch(e){t=e}else o=f.execCb(r,a,i,o);if(this.map.isDefine&&void 0===o&&((e=this.module)?o=e.exports:this.usingExports&&(o=this.exports)),t)return t.requireMap=this.map,t.requireModules=this.map.isDefine?[this.map.id]:null,t.requireType=this.map.isDefine?"define":"require",j(this.error=t)}else o=a;this.exports=o,this.map.isDefine&&!this.ignore&&(h[r]=o,req.onResourceLoad&&(n=[],each(this.depMaps,function(e){n.push(e.normalizedMap||e)}),req.onResourceLoad(f,this.map,n))),P(r),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(f.defQueueMap,r)||this.fetch()}},callPlugin:function(){var s=this.map,u=s.id,e=S(s.prefix);this.depMaps.push(e),R(e,"defined",bind(this,function(e){var o,t,n=getOwn(g,this.map.id),r=this.map.name,i=this.map.parentMap?this.map.parentMap.name:null,a=f.makeRequire(s.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(e.normalize&&(r=e.normalize(r,function(e){return w(e,i,!0)})||""),R(t=S(s.prefix+"!"+r,this.map.parentMap,!0),"defined",bind(this,function(e){this.map.normalizedMap=t,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((r=getOwn(l,t.id))&&(this.depMaps.push(t),this.events.error&&r.on("error",bind(this,function(e){this.emit("error",e)})),r.enable()))):n?(this.map.url=f.nameToUrl(n),void this.load()):((o=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})})).error=bind(this,function(e){this.inited=!0,(this.error=e).requireModules=[u],eachProp(l,function(e){0===e.map.id.indexOf(u+"_unnormalized")&&P(e.map.id)}),j(e)}),o.fromText=bind(this,function(e,t){var n=s.name,r=S(n),i=useInteractive;t&&(e=t),i&&(useInteractive=!1),E(r),hasProp(m.config,u)&&(m.config[n]=m.config[u]);try{req.exec(e)}catch(e){return j(makeError("fromtexteval","fromText eval for "+u+" failed: "+e,e,[u]))}i&&(useInteractive=!0),this.depMaps.push(r),f.completeLoad(n),a([n],o)}),void e.load(s.name,a,o,m))})),f.enable(e,this),this.pluginMaps[e.id]=e},enable:function(){(p[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r;if("string"==typeof e){if(e=S(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,r=getOwn(c,e.id))return void(this.depExports[t]=r(this));this.depCount+=1,R(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?R(e,"error",bind(this,this.errback)):this.events.error&&R(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=l[n],hasProp(c,n)||!r||r.enabled||f.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(l,e.id);t&&!t.enabled&&f.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){(this.events[e]||(this.events[e]=[])).push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},(f={config:m,contextName:u,registry:l,defined:h,urlFetched:i,defQueue:d,defQueueMap:{},Module:e,makeModuleMap:S,nextTick:req.nextTick,onError:j,configure:function(e){var n;e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs&&(n=e.urlArgs,e.urlArgs=function(e,t){return(-1===t.indexOf("?")?"?":"&")+n});var r=m.shim,i={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){i[t]?(m[t]||(m[t]={}),mixin(m[t],e,!0,!0)):m[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(g[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=f.makeShimExports(e)),r[t]=e}),m.shim=r),e.packages&&each(e.packages,function(e){var t=(e="string"==typeof e?{name:e}:e).name;e.location&&(m.paths[t]=e.location),m.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(l,function(e,t){e.inited||e.map.unnormalized||(e.map=S(t,null,!0))}),(e.deps||e.callback)&&f.require(e.deps||[],e.callback)},makeShimExports:function(t){return function(){var e;return t.init&&(e=t.init.apply(global,arguments)),e||t.exports&&getGlobal(t.exports)}},makeRequire:function(o,a){function s(e,t,n){var r,i;return a.enableBuildCallback&&t&&isFunction(t)&&(t.__requireJsBuild=!0),"string"==typeof e?isFunction(t)?j(makeError("requireargs","Invalid require call"),n):o&&hasProp(c,e)?c[e](l[o.id]):req.get?req.get(f,e,o,s):(r=S(e,o,!1,!0).id,hasProp(h,r)?h[r]:j(makeError("notloaded",'Module name "'+r+'" has not been loaded yet for context: '+u+(o?"":". Use require([])")))):(A(),f.nextTick(function(){A(),(i=E(S(null,o))).skipMap=a.skipMap,i.init(e,t,n,{enabled:!0}),D()}),s)}return a=a||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var t,n=e.lastIndexOf("."),r=e.split("/")[0];return-1!==n&&(!("."===r||".."===r)||1<n)&&(t=e.substring(n,e.length),e=e.substring(0,n)),f.nameToUrl(w(e,o&&o.id,!0),t,!0)},defined:function(e){return hasProp(h,S(e,o,!1,!0).id)},specified:function(e){return e=S(e,o,!1,!0).id,hasProp(h,e)||hasProp(l,e)}}),o||(s.undef=function(n){T();var e=S(n,o,!0),t=getOwn(l,n);t.undefed=!0,b(n),delete h[n],delete i[e.url],delete r[n],eachReverse(d,function(e,t){e[0]===n&&d.splice(t,1)}),delete f.defQueueMap[n],t&&(t.events.defined&&(r[n]=t.events),P(n))}),s},enable:function(e){getOwn(l,e.id)&&E(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(m.shim,e)||{},o=i.exports;for(T();d.length;){if(null===(n=d.shift())[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);a(n)}if(f.defQueueMap={},r=getOwn(l,e),!t&&!hasProp(h,e)&&r&&!r.inited){if(!(!m.enforceDefine||o&&getGlobal(o)))return x(e)?void 0:j(makeError("nodefine","No define call for "+e,null,[e]));a([e,i.deps||[],i.exportsFn])}D()},nameToUrl:function(e,t,n){var r,i,o,a,s,u=getOwn(m.pkgs,e);if(u&&(e=u),u=getOwn(g,e))return f.nameToUrl(u,t,n);if(req.jsExtRegExp.test(e))a=e+(t||"");else{for(r=m.paths,o=(i=e.split("/")).length;0<o;--o)if(s=getOwn(r,i.slice(0,o).join("/"))){isArray(s)&&(s=s[0]),i.splice(0,o,s);break}a=i.join("/"),a=("/"===(a+=t||(/^data\:|^blob\:|\?/.test(a)||n?"":".js")).charAt(0)||a.match(/^[\w\+\.\-]+:/)?"":m.baseUrl)+a}return m.urlArgs&&!/^blob\:/.test(a)?a+m.urlArgs(e,a):a},load:function(e,t){req.load(f,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){"load"!==e.type&&!readyRegExp.test((e.currentTarget||e.srcElement).readyState)||(interactiveScript=null,e=s(e),f.completeLoad(e.id))},onScriptError:function(e){var n=s(e);if(!x(n.id)){var r=[];return eachProp(l,function(e,t){0!==t.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===n.id)return r.push(t),!0})}),j(makeError("scripterror",'Script error for "'+n.id+(r.length?'", needed by: '+r.join(", "):'"'),e,[n.id]))}}}).require=f.makeRequire(),f}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("text",["module"],function(e){"use strict";var u,i,a,s,c,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],n=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,p=l&&location.protocol&&location.protocol.replace(/\:/,""),f=l&&location.hostname,d=l&&(location.port||void 0),h={},m=e.config&&e.config()||{};function g(e,t){return void 0===e||""===e?t:e}return u={version:"2.0.16",strip:function(e){var t;return e?(t=(e=e.replace(n,"")).match(o))&&(e=t[1]):e="",e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(e){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,r=!1,i=e.lastIndexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!o||1<i)?(t=e.substring(0,i),n=e.substring(i+1)):t=e,-1!==(i=(e=n||t).indexOf("!"))&&(r="strip"===e.substring(i+1),e=e.substring(0,i),n?n=e:t=e),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,n,r){var i,o=u.xdRegExp.exec(e);return!o||(i=o[2],o=(e=(e=o[3]).split(":"))[1],e=e[0],(!i||i===t)&&(!e||e.toLowerCase()===n.toLowerCase())&&(!o&&!e||function(e,t,n,r){if(t===r)return!0;if(e===n){if("http"===e)return g(t,"80")===g(r,"80");if("https"===e)return g(t,"443")===g(r,"443")}return!1}(i,o,t,r)))},finishLoad:function(e,t,n,r){n=t?u.strip(n):n,m.isBuild&&(h[e]=n),r(n)},load:function(t,e,n,r){var i,o,a;r&&r.isBuild&&!r.inlineText?n():(m.isBuild=r&&r.isBuild,o=(i=u.parseName(t)).moduleName+(i.ext?"."+i.ext:""),a=e.toUrl(o),r=m.useXhr||u.useXhr,0!==a.indexOf("empty:")?!l||r(a,p,f,d)?u.get(a,function(e){u.finishLoad(t,i.strip,e,n)},function(e){n.error&&n.error(e)}):e([o],function(e){u.finishLoad(i.moduleName+"."+i.ext,i.strip,e,n)},function(e){n.error&&n.error(e)}):n())},write:function(e,t,n,r){var i;h.hasOwnProperty(t)&&(i=u.jsEscape(h[t]),n.asModule(e+"!"+t,"define(function () { return '"+i+"';});\n"))},writeFile:function(n,e,t,r,i){var o=u.parseName(e),e=o.ext?"."+o.ext:"",a=o.moduleName+e,s=t.toUrl(o.moduleName+e)+".js";u.load(a,t,function(e){function t(e){return r(s,e)}t.asModule=function(e,t){return r.asModule(e,s,t)},u.write(n,a,t,i)},i)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(i=require.nodeRequire("fs"),u.get=function(e,t,n){try{var r=i.readFileSync(e,"utf8");"\ufeff"===r[0]&&(r=r.substring(1)),t(r)}catch(e){n&&n(e)}}):"xhr"===m.env||!m.env&&u.createXhr()?u.get=function(n,r,i,e){var t,o=u.createXhr();if(o.open("GET",n,!0),e)for(t in e)e.hasOwnProperty(t)&&o.setRequestHeader(t.toLowerCase(),e[t]);m.onXhr&&m.onXhr(o,n),o.onreadystatechange=function(e){var t;4===o.readyState&&(399<(t=o.status||0)&&t<600?((t=new Error(n+" HTTP status: "+t)).xhr=o,i&&i(t)):r(o.responseText),m.onXhrComplete&&m.onXhrComplete(o,n))},o.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?u.get=function(e,t){var n,r,e=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(e),"utf-8")),a="";try{for(n=new java.lang.StringBuffer,(r=o.readLine())&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=o.readLine());)n.append(i),n.append(r);a=String(n.toString())}finally{o.close()}t(a)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,s=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),c="@mozilla.org/windows-registry-key;1"in a,u.get=function(e,t){var n,r,i,o={};c&&(e=e.replace(/\//g,"\\")),i=new FileUtils.File(e);try{(n=a["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream)).init(i,1,0,!1),(r=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream)).init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),t(o.value)}catch(e){throw new Error((i&&i.path||"")+": "+e)}}),u});
//# sourceMappingURL=preloader.desktop.js.map