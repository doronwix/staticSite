!function(m){m.fn.numeric=function(e,t){"boolean"==typeof e&&(e={decimal:e}),void 0===(e=e||{}).negative&&(e.negative=!0);var n=!1===e.decimal?"":e.decimal||".",i=!0===e.negative;t="function"==typeof t?t:function(){};return this.data("numeric.decimal",n).data("numeric.negative",i).data("numeric.callback",t).keypress(m.fn.numeric.keypress).keyup(m.fn.numeric.keyup).blur(m.fn.numeric.blur)},m.fn.numeric.keypress=function(e){var t=m.data(this,"numeric.decimal"),n=m.data(this,"numeric.negative"),i=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(13==i&&"input"==this.nodeName.toLowerCase())return!0;if(13==i)return!1;var s=!1;if(e.ctrlKey&&97==i||e.ctrlKey&&65==i)return!0;if(e.ctrlKey&&120==i||e.ctrlKey&&88==i)return!0;if(e.ctrlKey&&99==i||e.ctrlKey&&67==i)return!0;if(e.ctrlKey&&122==i||e.ctrlKey&&90==i)return!0;if(e.ctrlKey&&118==i||e.ctrlKey&&86==i||e.shiftKey&&45==i)return!0;if(i<48||57<i){if(0!=this.value.indexOf("-")&&n&&45==i&&(0==this.value.length||0==m.fn.getSelectionStart(this)))return!0;t&&i==t.charCodeAt(0)&&-1!=this.value.indexOf(t)&&(s=!1),8!=i&&9!=i&&13!=i&&35!=i&&36!=i&&37!=i&&39!=i&&46!=i?s=!1:void 0!==e.charCode&&(e.keyCode==e.which&&0!=e.which?(s=!0,46==e.which&&(s=!1)):0!=e.keyCode&&0==e.charCode&&0==e.which&&(s=!0)),t&&i==t.charCodeAt(0)&&(s=-1==this.value.indexOf(t))}else s=!0;return s},m.fn.numeric.keyup=function(e){var t=this.value;if(0<t.length){var n=m.fn.getSelectionStart(this),i=m.data(this,"numeric.decimal"),s=m.data(this,"numeric.negative");if(""!=i){var a=t.indexOf(i);0==a&&(this.value="0"+t),1==a&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1)),t=this.value}for(var o=[0,1,2,3,4,5,6,7,8,9,"-",i],r=t.length,l=r-1;0<=l;l--){var u=t.charAt(l);0!=l&&"-"==u?t=t.substring(0,l)+t.substring(l+1):0!=l||s||"-"!=u||(t=t.substring(1));for(var d=!1,c=0;c<o.length;c++)if(u==o[c]){d=!0;break}d&&" "!=u||(t=t.substring(0,l)+t.substring(l+1))}var p=t.indexOf(i);if(0<p)for(l=r-1;p<l;l--){(u=t.charAt(l))==i&&(t=t.substring(0,l)+t.substring(l+1))}this.value=t,m.fn.setSelection(this,n)}},m.fn.numeric.blur=function(){var e=m.data(this,"numeric.decimal"),t=m.data(this,"numeric.callback"),n=this.value;""!=n&&(new RegExp("^\\d+$|\\d*"+e+"\\d+").exec(n)||t.apply(this))},m.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",m.fn.numeric.keypress).unbind("keyup",m.fn.numeric.keyup).unbind("blur",m.fn.numeric.blur)},m.fn.getSelectionStart=function(e){if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}try{return e.selectionStart}catch(e){return 0}},m.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t[0]),n.moveEnd("character",t[1]),n.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(e){}}}}(jQuery),define("FxSpinnerWidget",["require","jquery","jquery-ui"],function(e){var t=e("jquery");return t.widget("fx.fxspinner",t.ui.spinner,{_events:{blur:function(e){this.cancelBlur?delete this.cancelBlur:(this._stop(),this._value(this.element.val(),!0),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))}}})}),define("FxAutocompleteWidget",["require","jquery","knockout","FavoriteInstrumentsManager","InstrumentsSearchModule","InstrumentsManager"],function(e){var o=e("knockout"),c=e("jquery"),p=e("FavoriteInstrumentsManager"),t=e("InstrumentsSearchModule"),m=e("InstrumentsManager");return c.widget("fx.fxautocomplete",c.ui.autocomplete,{_create:function(){var s=this.options.source;this.selectedObservable=this.options.selected,this.hideDelay=this.options.hideDelay||0,this.customCloseButton=this.options.customCloseButton||!1,this.contentMaxHeight=this.options.contentMaxHeight||-1,this.showIcons=this.options.showIcons||!1,this.isEditFavoritesView=this.options.isEditFavoritesView,this.searchResultPostBoxTopic=this.options.searchResultPostBoxTopic,this.noResultMatch={category:"",value:this.options.noResultText||"",id:-1},this.hasCategories=void 0===this.options.hasCategories||!!this.options.hasCategories,this.itemImageClassProperty=this.options.itemImageClassProperty||!1,this.itemImageClassPrefix=this.options.itemImageClassPrefix||"",this.expression=this.options.matchFromBeginning?"^":"",this.renderInstruments=void 0===this.options.renderInstruments,this.renderInstruments&&(this.hasCategories=!1,this.showIcons=!0);this.renderInstruments?(this.instrumentsSearchInstance=new t(s),this._setOption("source",function(e,t){var n=this.instrumentsSearchInstance.typingSearch(e.term);n.length||n.push(this.noResultMatch),t(n)})):this._setOption("source",function(e,t){var n=new RegExp(this.expression+c.ui.autocomplete.escapeRegex(latinizeString(e.term)),"i"),i=c.grep(o.toJS(s),function(e){var t=!1;return isStringType(e.fullText)&&(t=n.test(e.fullText)),isStringType(e.text)&&(t=t||n.test(e.text)),t});i.length||i.push(this.noResultMatch),t(i)}),this._setOption("focus",function(e){e.preventDefault()}),this._super(),this.registerEvents(),this.options.hasInitialValue&&this.selectedObservable()&&c(this.element).val(this.selectedObservable().value)},_destroy:function(){this.instrumentsSearchInstance&&(this.instrumentsSearchInstance.dispose(),this.instrumentsSearchInstance=null)},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),c(t).css("top",0),t.show().removeClass("custom-autocomplete-hidden").addClass("custom-autocomplete-visible"),this._resizeMenu(),t.position(c.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),0<this.contentMaxHeight&&(c(t).height()<this.contentMaxHeight?c(this.options.appendTo).height(c(t).height()):c(this.options.appendTo).height(this.contentMaxHeight)),c(t).animate({scrollTop:0},0)},_close:function(e){var t=this;t.menu.element.is(":visible")&&(t.menu.element.removeClass("custom-autocomplete-visible").addClass("custom-autocomplete-hidden"),setTimeout(function(){t.menu.element.hide(),t.menu.blur(),t.isNewMenu=!0,t._trigger("close",e),0<t.contentMaxHeight&&c(t.options.appendTo).height(t.contentMaxHeight)},t.hideDelay)),this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!1})},registerEvents:function(){var s=this,a=c(s.element);s.customCloseButton?s.customCloseButton.on("click",function(){a.val("").change(),s.menu.element.hide(),s._trigger("close"),this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!1})}):a.blur(function(){a.val("").change()}),s._on(s.menu.element,{menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=c(t.item).find(".icon-star-full");this.options.keepTextAfterSelect&&n.id!==this.noResultMatch.id||a.val("").change(),n.isGroup||s.selectedObservable(n),0<i.length&&c(i).toggleClass("favorite")}}),s._on(s.element,{keydown:function(e){var t=c.ui.keyCode,n=s.menu.active;switch(e.keyCode){case t.UP:(isNullOrUndefined(n)||n.hasClass("autocomplete-group"))&&s._keyEvent("previous",e);break;case t.DOWN:(isNullOrUndefined(n)||n.hasClass("autocomplete-group"))&&s._keyEvent("next",e)}},keyup:function(e){var t=c.ui.keyCode;switch(e.keyCode){case t.BACKSPACE:case t.DELETE:s.options.hideDropDownWhenNotEnoughLetters&&c(s.element).val().length<s.options.minLength&&c(s.options.appendTo).hide()}}})},options:{minLength:2},_renderMenu:function(e,t){this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!0}),this.hasCategories?this._renderItemsWithCategories(e,t):this._renderItems(e,t)},_renderItems:function(n,e){var i=this;c.each(e,function(e,t){i._renderItemData(n,t)})},_renderItemsWithCategories:function(i,s){var a=this,n=[];c.each(s,function(e,t){-1===n.indexOf(t.category)&&n.push(t.category)}),c.each(n,function(e,n){if(1!==s.length||-1!==s[0].id){var t={label:n,isGroup:!0,category:""};a._renderItemData(i,t)}c.each(s,function(e,t){t.category===n&&a._renderItemData(i,t)})})},_renderItem:function(e,t){return this.renderInstruments?this._renderInstrumentItem(e,t):this._renderOtherItem(e,t)},_renderOtherItem:function(e,t){var n=new RegExp(this.expression+"("+c.ui.autocomplete.escapeRegex(this.term)+")","gi"),i=c("<li>"),s=t.label.replace(n,"<b class='bold'>$1</b>");if(this.itemImageClassProperty&&t[this.itemImageClassProperty]){var a="list-flag "+this.itemImageClassPrefix+t[this.itemImageClassProperty];c("<i/>",{class:a}).appendTo(i)}return c("<span/>",{class:"text-holder"}).html(s).appendTo(i),this.selectedObservable()&&this.selectedObservable().id===t.id&&(i=i.addClass("selected")),i.appendTo(e)},_renderInstrumentItem:function(e,t){var n=new RegExp("("+c.ui.autocomplete.escapeRegex(this.term)+")","gi"),i=c("<li>"),s=t.label.replace(n,"<b class='bold'>$1</b>");if(t.isGroup||(s="<div class='text-holder instrument-name found-results'>"+s+'<br /><span class="category-name">'+t.category+"</span></div>"+(this.isEditFavoritesView?"":"<div class='text-holder'><span class='tick'></span></div>")),t.isGroup&&i.addClass("autocomplete-group"),-1===t.id&&i.addClass("noresults"),this.showIcons){var a=c("<div>").addClass("instr-wrapper"),o=c("<div>").addClass("instr-symbol"),r=c("<span>").addClass("icon-star-full"),l=c("<span>").addClass("default"),u=c("<i>").addClass("base currency _"+t.baseSymbolId),d=c("<i>").addClass("other currency _"+t.otherSymbolId);p.IsFavoriteInstrument(t.id)&&r.addClass("favorite"),this.showIcons&&!t.isGroup&&-1!==t.id&&(l[0].innerText=m.GetInstrumentFirstChar(t.id),s=a.append(o.addClass("instr-"+t.id).append(u.append(l)).append(d)).prop("outerHTML")+s,this.isEditFavoritesView&&(s+=r.prop("outerHTML")))}return this.selectedObservable()&&this.selectedObservable().id===t.id&&!t.isGroup&&(i=i.addClass("selected")),i.html(s).appendTo(e)}})}),define("customBindings/AutocompleteBinding",["require","jquery","knockout","FxAutocompleteWidget"],function(e){var m=e("knockout"),f=e("jquery");m.bindingHandlers.autocomplete={init:function(o,e){var t,n,r=e(),i=r.elementType,s=r.minLength,l=f("."+r.autocompleteWrapperClass),a=l.find("."+r.predefinedOptionsListClass),u=r.searchPostBoxTopic,d=r.selectPostBoxTopic;function c(){var e=f(r.appendTo).find("ul:visible").outerHeight(),t=Math.min(e,r.contentMaxHeight||180)+1;f(r.appendTo).css("height",t+"px")}function p(){var e=l.parent().find(".customized"),t=l.find(".closeButton");f(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,showIcons:r.showIcons,hasInitialValue:r.hasInitialValue,keepTextAfterSelect:r.keepTextAfterSelect,hideDropDownWhenNotEnoughLetters:r.hideDropDownWhenNotEnoughLetters,customCloseButton:t,isEditFavoritesView:r.isEditFavoritesView,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,matchFromBeginning:r.matchFromBeginning,renderInstruments:r.renderInstruments,noResultText:r.noResultText,searchResultPostBoxTopic:r.searchResultPostBoxTopic,minLength:s,open:function(){e.hide(),f(r.appendTo).show()},select:function(e,t){m.postbox.publish("search-interaction",{Instrument:{id:t.item.id}}),r.hideDropDownAfterSelect&&f(r.appendTo).hide()},close:function(){e.show()},search:function(e,t){m.postbox.publish("search",{Characters:e.target.value})}})}switch(t=r.selected.subscribe(function(e){e&&isDefinedType(e.id)&&(r.elementToFocusOnChange&&setTimeout(function(e){f(e).focus()},100,r.elementToFocusOnChange+e.id),e.hideDropDown||("input.mobile"!==i&&l.toggle(),f(r.triggerFrom).toggleClass("focus")))}),i){case"select":f(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,contentMaxHeight:r.contentMaxHeight,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,renderInstruments:r.renderInstruments,noResultText:r.noResultText,matchFromBeginning:r.matchFromBeginning,select:function(e,t){m.postbox.publish("deal-slip-search-interaction",{Instrument:{id:t.item.id}}),d&&m.postbox.publish(d,t.item.id)},search:function(e,t){m.postbox.publish("deal-slip-search",{Characters:e.target.value}),c()},open:function(){f(".ui-autocomplete").off("menufocus hover mouseover mouseenter"),a.hide(),u&&m.postbox.publish(u)},close:function(e,t){a.show(),u&&m.postbox.publish(u)},minLength:s}),l.uniqueId(),f(document).on("click."+l.attr("id"),function(e){f(e.target).closest(l).length||f(e.target).is(l)||f(e.target).is(f(r.triggerFrom))||f(e.target).is(f(r.triggerFrom).find("span"))||!l.is(":visible")||(l.hide(),f(r.triggerFrom).toggleClass("focus"))}),f(r.triggerFrom).mousedown(function(e){e.preventDefault(),l.toggle(),0===s&&f(o).fxautocomplete("instance").search(""),f(r.triggerFrom).focus().toggleClass("focus")}).focus(function(){var e,t,n,i,s,a;c(),e=f(window).height(),t=f(window).scrollTop(),n=l.outerHeight(),i=f(o).offset().top,s=f("#"+r.relativeFieldId).outerHeight(),a=l.find(".ui-autocomplete-input"),e+t<i+s+n?(l.css("bottom",s+"px"),a.appendTo(l)):(l.css("bottom",""),a.prependTo(l)),u&&m.postbox.publish(u)});break;case"input":f(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,contentMaxHeight:r.contentMaxHeight,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,renderInstruments:r.renderInstruments,noResultText:r.noResultText,matchFromBeginning:r.matchFromBeginning,minLength:r.minLength,select:function(e,t){m.postbox.publish("search-interaction",{Instrument:{id:t.item.id}})},close:function(e,t){f(r.appendTo).hide()},search:function(e,t){f(r.appendTo).show(),f(r.appendTo).closest("div:visible").find(".jspPane").css("top",0),m.postbox.publish("search",{Characters:e.target.value})},open:function(){u&&m.postbox.publish(u)}});break;case"input.mobile":p(),"function"==typeof r.source&&(n=r.source.subscribe(function(){f(o).fxautocomplete("destroy"),p()}));break;default:f(o).fxautocomplete({source:r.source,selected:r.selected})}m.utils.domNodeDisposal.addDisposeCallback(o,function(){f(document).off("click."+l.attr("id")),void 0!==f(o).fxautocomplete("instance")&&f(o).fxautocomplete("destroy"),t&&t.dispose(),n&&n.dispose()})}}}),define("customBindings/common",["require","knockout","jquery","jquery-ui"],function(e){var t,n,i,f=e("knockout"),v=e("jquery");f.bindingHandlers.balloon={init:function(n,e){var i=f.utils.unwrapObservable(e())||{},s=v(n);s.uniqueId();var t=s.attr("id");s.attr("title")||s.attr("title","***missingTitleAttr"),"click"===i.closeEvent&&(s.on("mouseout focusout",function(e){e.stopImmediatePropagation()}),v(document).on("click.outsideBallon."+t,function(){s.data("uiTooltipOpen")&&a(s)})),"safari"===Browser.getBrowserName().toLowerCase()&&(i.tooltipClass+=" safari"),v.extend(i.position,{using:function(e,t){(v("[aria-describedby]").each(function(e,t){n!==t&&a(v(t))}),s.tooltip("open"),"click"===i.closeEvent&&s.on("tooltipopen",function(e){var t=this;v("#"+this.getAttribute("aria-describedby")).on("click",function(){a(v(t))})}),v(this).css(e),t&&t.target&&t.target.element&&v(t.target.element).hasClass("customTooltipPurpose"))?v(this).offset().top>v(t.target.element).offset().top?v(t.target.element).addClass("customTooltipPurposeBottom"):v(t.target.element).removeClass("customTooltipPurposeBottom"):v("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}});var a=function(e){isObjectType(e)&&(isFunctionType(e.removeClass)&&e.removeClass("toolTipButtonTrigered"),isFunctionType(e.tooltip)&&!isNullOrUndefined(e.data("ui-tooltip"))&&e.tooltip("close"))};s.tooltip(i,{show:!1,hide:!1,content:function(){return i.contentKey?i.resourceName?Dictionary.GetItem(i.contentKey,i.resourceName):Dictionary.GetItem(i.contentKey):v(this).attr("title")}}),"click"===i.closeEvent&&s.on("mouseenter focusin",function(){v(this).addClass("toolTipButtonTrigered")}),s.on("click.balloon",function(){s.blur().tooltip("open"),"click"===i.closeEvent&&s.on("tooltipopen",function(e){v("#"+this.getAttribute("aria-describedby")).on("click",function(){a(s)})}),i.timeout&&0<i.timeout&&(clearTimeout(s._closeTooltipTimer),s._closeTooltipTimer=setTimeout(function(e){a(e)},i.timeout,s))}),f.utils.domNodeDisposal.addDisposeCallback(n,function(e){clearTimeout(e._closeTooltipTimer),v(e).off(".balloon"),v(e).tooltip("destroy"),v(document).off("click.outsideBallon."+t)})}},f.bindingHandlers.dictionaryBinding={init:function(e,t,n,i,s){var a,o=f.utils.unwrapObservable(t()),r=n(),l=(r.prefix||"")+o+(r.suffix||""),u=r.resourceName,d=v(e);l&&(a=u?Dictionary.GetItem(l,u):Dictionary.GetItem(l),d.html(a))},update:function(e,t,n,i,s){var a,o=f.utils.unwrapObservable(t()),r=n(),l=(r.prefix||"")+o+(r.suffix||""),u=r.resourceName,d=v(e);l&&(a=u?Dictionary.GetItem(l,u):Dictionary.GetItem(l),d.html(a))}},f.bindingHandlers.hidden={update:function(e,t){var n=f.utils.unwrapObservable(t());f.bindingHandlers.visible.update(e,function(){return!n})}},f.bindingHandlers.visibility={update:function(e,t){f.utils.unwrapObservable(t())?v(e).css("visibility","visible"):v(e).css("visibility","hidden")}},f.bindingHandlers.instrumentName={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=a===Number.MAX_SAFE_INTEGER?Dictionary.GetItem("All_Instruments"):$instrumentTranslationsManager.Long(a),r=v(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)}},f.bindingHandlers.nonRtlText={update:function(e,t){var n=f.utils.unwrapObservable(t());n&&isStringType(n)&&n.isRtlText()?e.classList.remove("ltr"):e.classList.add("ltr"),e.innerHTML=n}},f.bindingHandlers.instrumentShortName={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$instrumentTranslationsManager.Short(a),r=v(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$instrumentTranslationsManager.Short(a),r=v(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)}},f.bindingHandlers.symbolName={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$symbolsManager.GetTranslatedSymbolById(a);v(e).html(o)},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$symbolsManager.GetTranslatedSymbolById(a);v(e).html(o)}},f.bindingHandlers.numberWithCurrencySymbol={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=Format.toNumberWithCurrency(n.value,n);v(e).html(i)},update:function(e,t){var n=f.utils.unwrapObservable(t()),i=Format.toNumberWithCurrency(n.value,n);v(e).html(i)}},f.bindingHandlers.roundM={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=formatRoundM(a.toString());v(e).text(o)}}},f.bindingHandlers.roundMBasedOnThreshold={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=formatRoundMBasedOnThreshold(a.toString());v(e).text(o)}}},f.bindingHandlers.roundK={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=formatNumber(a.toString(),"K");v(e).text(o)}}},f.bindingHandlers.kAmount={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=Format.toKAmount(a.toString(),"K");v(e).text(o)}}},f.bindingHandlers.amount={init:t=function(e,t){var n=f.utils.unwrapObservable(t()),i=v(e).is("input"),s="NA"!==Format.toAmount(n)?Format.toAmount(n):n;i?v(e).val(s):v(e).text(s)},update:t},f.bindingHandlers.roundAmount={init:n=function(e,t){var n=f.utils.unwrapObservable(t()),i=v(e).is("input"),s=n;""!==n&&"NA"!==n&&(s=parseFloat(n),s=isNaN(s)?"":Math.ceil(Math.abs(s))),i?v(e).val(s):v(e).text(s)},update:n},f.bindingHandlers.limitAmount={init:i=function(e,t){var n=f.utils.unwrapObservable(t()),i=v(e).is("input"),s=Format.toAmount(n);"NA"===s&&(s=0),i?v(e).val(s):v(e).text(formatNumberWithThousandsSeparator(s))},update:i},f.bindingHandlers.toHumanReadableNumericFormat={init:function(e,t){var n=f.utils.unwrapObservable(t());v(e).text(isEmptyValue(n)?"":Format.toFixedAmount(n))},update:function(e,t){var n=f.utils.unwrapObservable(t());v(e).text(isEmptyValue(n)?"":Format.toFixedAmount(n))}},f.bindingHandlers.round={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=0;isEmptyValue(n)||(i=Format.toFixedAmount(n)),v(e).text(i)}},f.bindingHandlers.percentage={init:function(e,t){var n=f.utils.unwrapObservable(t());v(e).is("input")&&n?v(e).val(Format.toPercent(n)):v(e).text(Format.toPercent(n))},update:function(e,t){var n=f.utils.unwrapObservable(t());v(e).is("input")&&n?v(e).val(Format.toPercent(n)):v(e).text(Format.toPercent(n))}},f.bindingHandlers.smallFont={update:function(e,t,n){var i=f.utils.unwrapObservable(t()),s=n.get("smallFontThreshold")||5;i&&((n.get("roundM")?formatRoundM(i.toString()):i.toString()).length>s?v(e).addClass("small-font"):v(e).removeClass("small-font"))}},f.bindingHandlers.dateFormatShortDayAndMonth={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractDate()),s=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractTime()),a=i.day+"/"+i.month.replace(/^0+/,"")+" "+s.hour+":"+s.min;v(e).text(a)}},f.bindingHandlers.dateFormatShortDayMonthYear={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractDate()),s=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractTime()),a=i.day+"/"+i.month+"/"+i.year.substr(2,2)+" "+s.hour+":"+s.min;v(e).text(a)}},f.bindingHandlers.dateFormatLongDateWithTime={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=str2Date(n,"d/m/Y H:M").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});v(e).text(i)}},f.bindingHandlers.addDotInRange={init:function(o,e,t,n,r){var i,s,l,a=e();s=a.subscribe(function(e){l=e},null,"beforeChange"),i=a.subscribe(function(e){if(mobile.check.s2_default&&e&&-1==e.indexOf(".")&&!(5<=e.length)&&"NA"!=e&&(!l||l.indexOf(".")!=l.length-1||e!=l.substring(0,l.length-1))){for(var t=[],n=v(o).attr("data-range").split(","),i=0;i<n.length;i++){var s=n[i];s&&s in r.$data&&t.push(r.$data[s])}if(0<t.length){var a=Format.addDotInRange(this.target(),t,l);this.target(a)}}}),f.utils.domNodeDisposal.addDisposeCallback(o,function(){s&&(s.dispose(),s=null),i&&(i.dispose(),i=null),o=null})}},f.bindingHandlers.clearQuoteColor={update:function(e,t,n,i,s){clearTimeout(e.clearQuoteColorTimer),e.clearQuoteColorTimer=setTimeout(function(e){v(e).removeClass("green red up down")},1e3,e)}},f.bindingHandlers.timeComponent={update:function(e,t,n){var i=(f.utils.unwrapObservable(t())||"").split(" ")[1];i&&v(e).html(i)}},f.bindingHandlers.formattedText={update:function(e,t,n,i,s){var a,o,r="originalFormatText",l=v(e),u=n();if(l.attr(r)?o=l.attr(r):(o=u.contentKey?Dictionary.GetItem(u.contentKey,u.resourceName):u.encodeHTML?l.html():l.text(),l.attr(r,o)),a=u.formatPattern?o.replace(u.formatPattern,f.utils.unwrapObservable(t())):String.format(o,f.utils.unwrapObservable(t())),u.name&&f.postbox.publish(u.name+"-text-formatted"),isDefinedType(u.useAttr))return l.attr(u.useAttr,a),void l.html("");u.encodeHTML?(l.children().each(function(e,t){f.removeNode(t)}),l.html(a),f.applyBindingsToDescendants(s,e)):l.text(a)}},f.bindingHandlers.injectTemplate={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,s){for(var a=v(e),o=n(),r=o.encodeHTML?a.html():a.text(),l=r,u=f.utils.unwrapObservable(t()),d=0;d<u.length;d++){var c=new RegExp("\\{%"+d+"%\\}","gm");l=r.replace(c,"\x3c!-- ko template: { name: '"+u[d]+"' } --\x3e\x3c!-- /ko --\x3e")}o.encodeHTML?(a.children().each(function(e,t){f.removeNode(t)}),a.html(l),f.applyBindingsToDescendants(s,e)):a.text(l)}},f.bindingHandlers.showDate={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t())||{},o=v(e),r={value:"",date:!0,time:{hour:!1,min:!1,sec:!1}},l="";if(isPrimitiveType(a))r.value=a;else if(isDateType(a)){var u=new Date(a);r.value=u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()}else r=v.extend(r,a);if(isEmpty(r.value))o.html("");else{var d=SplitDateTime(r.value);r.date&&(l+=d.date),!1!==r.time&&(!0===r.time?l+=" "+d.time:(r.time.hour&&(l+=" "+d.hour),r.time.min&&(l+=":"+d.min),r.time.sec&&(l+=":"+d.sec))),o.html(l)}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t())||{},o=v(e),r={value:"",date:!0,time:{hour:!1,min:!1,sec:!1}},l="";if(isPrimitiveType(a))r.value=a;else if(isDateType(a)){var u=new Date(a);r.value=u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()}else r=v.extend(r,a);if(isEmpty(r.value))o.html("");else{var d=SplitDateTime(r.value);r.date&&(l+=d.date),!1!==r.time&&(!0===r.time?l+=" "+d.time:(r.time.hour&&(l+=" "+d.hour),r.time.min&&(l+=":"+d.min),r.time.sec&&(l+=":"+d.sec))),o.html(l)}}},f.bindingHandlers.valueDateText={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t())||{},o=v(e),r=(a.valueDate.isValueDateEmpty?Dictionary.GetItem("Daily")+" ":"")+(isEmptyValue(a.valueDate.date)?"":SplitDateTime(a.valueDate.date).date+(a.showHour?" "+SplitDateTime(a.valueDate.date).time:""));o.html(r)}},f.bindingHandlers.showFwPips={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=toNumeric(a).toFixed(1);0<=o&&(o="+"+o),v(e).html(o)},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=toNumeric(a).toFixed(1);0<=o&&(o="+"+o),v(e).html(o)}},f.bindingHandlers.trendFromSignalSign={init:function(e,t,n){var i,s,a=v(e),o=n(),r=isNullOrUndefined(o.pre)?"(":o.pre,l=isNullOrUndefined(o.post)?")":o.post,u=toNumeric(f.utils.unwrapObservable(t()));"NA"!==toNumeric(u)?a.text(r+(0===(i=u)?"=":0<(s=i)?"+"+s:"-"+s)+l):a.text("")}},f.bindingHandlers.imageFromSignalSign={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=v(e);switch(n){case eSignalTrendsValues.StrongSell:i.addClass(eSignalTrendsImageClasses.South);break;case eSignalTrendsValues.Sell:i.addClass(eSignalTrendsImageClasses.SouthEast);break;case eSignalTrendsValues.Neutral:i.addClass(eSignalTrendsImageClasses.East);break;case eSignalTrendsValues.Buy:i.addClass(eSignalTrendsImageClasses.NorthEast);break;case eSignalTrendsValues.StrongBuy:i.addClass(eSignalTrendsImageClasses.North);break;default:i.addClass(eSignalTrendsImageClasses.None)}}},f.bindingHandlers.styleFromSignalSign={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=v(e);switch(n){case eSignalTrendsValues.Buy:case eSignalTrendsValues.StrongBuy:i.addClass(eSignalTrendsColorClasses.Green);break;case eSignalTrendsValues.Sell:case eSignalTrendsValues.StrongSell:i.addClass(eSignalTrendsColorClasses.Red);break;default:i.addClass(eSignalTrendsColorClasses.Neutral)}}},f.bindingHandlers.toppedPercentage={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=0;isEmptyValue(n)||(i=100<n?">100%":Format.toPercent(n)),v(e).text(i)}},f.bindingHandlers.toFixed={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a);if(r){var l=Math.pow(10,o),u=Math.round(r*l)/l;isNaN(u)?v(e).text(""):v(e).text(u)}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a);if(r){var l=Math.pow(10,o),u=Math.round(r*l)/l;isNaN(u)?v(e).text(""):v(e).text(u)}}},f.bindingHandlers.toFixedAmount={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){var l=Math.pow(10,o),u=Math.round(r*l)/l;v(e).text(Format.toFixedAmount(u))}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){var l=Math.pow(10,o),u=Math.round(r*l)/l;v(e).text(Format.toFixedAmount(u))}}},f.bindingHandlers.toFixedAmountWithoutRounding={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){if(0<o){var l=Math.pow(10,o);r=Math.round(r*l)/l}v(e).text(Format.toNumberWithThousandsSeparator(r))}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){if(0<o){var l=Math.pow(10,o);r=Math.round(r*l)/l}v(e).text(Format.toNumberWithThousandsSeparator(r))}}},f.bindingHandlers.iframeElement={init:function(e,t){var n=v(e)[0].contentWindow;t()(n)}},f.bindingHandlers.logger={update:function(e,t,n){var i=f.utils.domData.get(e,"_ko_logger")||0,s=f.toJS(t()||n());f.utils.domData.set(e,"_ko_logger",++i),window.console&&console.log&&console.log(i,e,s)}},f.bindingHandlers.htmlToString={update:function(e,t){v(e).text(v("<div>"+t()+"</div>").text())}},f.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},f.virtualElements.allowedBindings.stopBinding=!0,f.bindingHandlers.isProcessing={init:function(e){"DIV"===e.tagName&&v(e).hasClass("button")||(e.initialText=v(e).text())},update:function(e,t){var n=f.unwrap(t());n.switchText&&n.showProcessIcon?v(e).text(Dictionary.GetItem("risk_processing")):v(e).text(e.initialText),n.showProcessIcon?v(e).addClass("js_processing"):v(e).removeClass("js_processing")}},f.bindingHandlers.progressBar={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=f.utils.unwrapObservable(n.minimumValue),s=f.utils.unwrapObservable(n.maximumValue),a=f.utils.unwrapObservable(n.currentValue),o=f.utils.unwrapObservable(n.currencyId),r=toNumeric(a/(s-i)*100),l=n.simpleProgressBar||!1;if(r=Math.min(r,100),l){var u=v("<div>").addClass("current-value").css({width:r+"%"});v(e).append(u)}else{v(e).append(v("<span>").addClass("minimum-value direction-ltr").html(Format.toNumberWithCurrency(i,{maximumFractionDigits:0,currencyId:o})));var d=v("<div>").addClass("cash-progress-bar"),c=v("<div>").addClass("current-value").css({width:r+"%"}),p=v("<div>").addClass("bubble direction-ltr").html(Format.toNumberWithCurrency(a,{currencyId:o}));85<r&&p.addClass("reversed"),c.append(p),d.append(c),v(e).append(d),v(e).append(v("<span>").addClass("maximum-value direction-ltr").html(Format.toNumberWithCurrency(s,{currencyId:o}))),v(e).find(".minimum-value").width(v(e).find(".minimum-value").width()),v(e).find(".maximum-value").width(v(e).find(".maximum-value").width())}},update:function(e,t){var n=f.utils.unwrapObservable(t()),i=toNumeric(f.utils.unwrapObservable(n.minimumValue)),s=toNumeric(f.utils.unwrapObservable(n.maximumValue)),a=toNumeric(f.utils.unwrapObservable(n.currentValue)),o=f.utils.unwrapObservable(n.currencyId),r=toNumeric(a/(s-i)*100);r=Math.min(r,100),v(e).find(".minimum-value").html(Format.toNumberWithCurrency(i,{maximumFractionDigits:0,currencyId:o})),v(e).find(".maximum-value").html(Format.toNumberWithCurrency(s,{currencyId:o})),v(e).find(".current-value").css({width:r+"%"}),v(e).find(".bubble").html(Format.toNumberWithCurrency(a,{currencyId:o})),85<r&&v(e).find(".bubble").addClass("reversed"),v(e).find(".minimum-value, .maximum-value").addClass("text-positioned")}},f.bindingHandlers.html5InputsProxy={init:function(t,e){var n=e(),i=f.utils.unwrapObservable(n),s=n.subscribe(function(e){e!==t.value&&(t.value=e)});function a(e){t.validity.valid&&!t.validity.badInput&&n()!==t.value&&n(t.value)}t.value=i,t.addEventListener("keyup",a),f.utils.domNodeDisposal.addDisposeCallback(t,function(e){s&&(s.dispose(),s=null),e.removeEventListener("keyup",a,!1)})}},f.bindingHandlers.ratesClasses={init:function(t,e){var n=f.utils.unwrapObservable(e())||{};if(!n.disabled){n.rateObservable.extend({notify:"always"}),n.lastClass=f.observable("");var i=n.rateObservable.subscribe(function(e){if(isFunctionType(n.showInput)&&n.showInput())return this.lastClass(""),void f.applyBindingsToNode(t,{css:n.lastClass});switch(e){case eQuoteStates.Up:this.lastClass(this.lastClass()===this.up[0]?this.up[1]:this.up[0]);break;case eQuoteStates.Down:this.lastClass(this.lastClass()===this.down[0]?this.down[1]:this.down[0]);break;case eQuoteStates.NotChanged:this.lastClass(this.notChanged);break;default:this.lastClass("")}},n);f.applyBindingsToNode(t,{css:n.lastClass}),f.utils.domNodeDisposal.addDisposeCallback(t,function(){i&&(i.dispose(),i=null)})}}},f.bindingHandlers.attrIf={update:function(i,s,a){var e=f.utils.unwrapObservable(s())||{};f.utils.objectForEach(e,function(e,t){var n=f.utils.unwrapObservable(t);null!=n&&""!==n&&f.bindingHandlers.attr.update(i,s,a)})}},f.bindingHandlers["data-automation"]={init:function(e,t){var n=f.utils.unwrapObservable(t());n&&(e.setAttribute("data-automation",n),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){e.removeAttribute("data-automation")}))}},f.bindingHandlers.progressBarAutoResize={update:function(o){function e(){setTimeout(function(){var e=v(".progress-steps ul"),t=e.innerWidth(),n=e.find("li:first-child div").innerWidth()/2+20,i=e.find("li:visible:last div").innerWidth()/2+20,s=t-(n+i)+"px",a=LanguageHelper.IsRtlLanguage()?"0 "+n+"px 0 "+i+"px":"0 "+i+"px 0 "+n+"px";v(o).css({width:s,margin:a})},200)}e(),v(window).on("resize.progressBarAutoResize",e),f.utils.domNodeDisposal.addDisposeCallback(o,function(){v(window).off("resize.progressBarAutoResize",e)})}},f.bindingHandlers.placeholder={init:function(s,e){var t=f.unwrap(e()),a=t.onFocus||"",o=t.onBlur||"",n=function(e,t){var n=e.ownerDocument;if("activeElement"in n){var i;try{i=n.activeElement}catch(e){i=n.body}t=i===e}s.setAttribute("placeholder",t?a:o)},i=n.bind(null,s,!0),r=n.bind(null,s,!1);f.utils.registerEventHandler(s,"focus",i),f.utils.registerEventHandler(s,"blur",r),r()}},f.bindingHandlers.cssIfValue={init:function(e,t,n,i,s){var a=t()||{},o=a.classElementId||e.id,r=a.valueElementId||e.id,l=a.className,u=document.getElementById(o)||e,d=document.getElementById(r)||e,c=f.observable(!1);if(!isEmptyValue(l)){c(!isEmptyValue(d.value)),v(d).on("change keyup",m);var p={};p[l]=c,f.applyBindingsToNode(u,{css:p},s),f.utils.domNodeDisposal.addDisposeCallback(d,function(e){v(e).off("change keyup",m),c=null})}function m(){c(!isEmptyValue(d.value))}}},f.bindingHandlers.scrollHere={update:function(e,t){if(f.utils.unwrapObservable(t())){var n=e.getBoundingClientRect();n.top<0&&window.scrollBy(0,n.top)}}},f.bindingHandlers.riseOnScroll={update:function(n,e){if("fixed"===v(n).css("position")){var t=e()||{},i=t.minTop,s=t.initialTop;v(window).scroll(function(){var e=v(window).scrollTop(),t=s-e;t<=i&&(t=i),v(n).css("top",t+"px")})}}},f.bindingHandlers.setFocusToId={init:function(e,t){v(e).on("click",function(){var e="#"+t();v(e).focus()})}},f.bindingHandlers.specificUploadButton={init:function(e){!Browser.isChrome()&&Browser.isChromeOnIOS()||e.parentElement.classList.add("specific")},update:function(e,t){!Browser.isChrome()&&Browser.isChromeOnIOS()||(f.utils.unwrapObservable(t())?e.classList.add("enabled"):e.classList.remove("enabled"))}};var o=function(e){var t=v(e).find(".right-arrow"),n=v(e).find(".left-arrow"),i=v(e).find(".arrow-navigation-list"),s=v(e),a="hidden",o=".list-item";function r(){return i.scrollLeft()<=0}function l(){var e=i.scrollLeft(),t=i.width();return i.get(0).scrollWidth-e-t==0}function u(){var e=s.width();e&&i.width(e)}function d(){var e=i.find(o),t=0;return e.each(function(){t+=v(this).width()}),t}return{isScrollRightEnd:l,setArrowsVisibleOnInit:function(){s.width()<d()?(n.removeClass(a),t.removeClass(a),u()):(t.addClass(a),n.addClass(a))},setArrowsVisibleOnResize:function(){s.width()<=d()?(l()?t.addClass(a):t.removeClass(a),r()?n.addClass(a):n.removeClass(a)):(t.addClass(a),n.addClass(a))},setListWidth:u,scrollToActiveItem:function(){i.find(o).each(function(){var e=v(this).find(".active")[0];isNullOrUndefined(e)||i.animate({scrollLeft:v(this).position().left},300,function(){l()?t.addClass(a):r()&&n.addClass(a)})})},registerEvents:function(){t.on("click",function(){var e=i.scrollLeft();i.animate({scrollLeft:e+100},300,function(){l()&&t.addClass(a),n.removeClass(a)})}),n.on("click",function(){var e=i.scrollLeft();i.animate({scrollLeft:e-100},300,function(){t.removeClass(a),r()&&n.addClass(a)})})},unregisterEvents:function(){n.off("click"),t.off("click")},isListWidthEmpty:function(){var e=s.width(),t=d();return 0===e&&0===t}}};f.bindingHandlers.arrowList={init:function(e,t,n,i){var s,a=new o(e);i.Data.itemsRendered=f.observable(!1),i.Data.itemsRendered.subscribe(function(e){e&&(s=setInterval(function(){a.isListWidthEmpty()||(a.setArrowsVisibleOnInit(),a.scrollToActiveItem(),i.Data.itemsRendered(!1),clearInterval(s),setTimeout(function(){a.setArrowsVisibleOnInit(),a.scrollToActiveItem()},1e3))}))}),a.registerEvents(),v(window).resize(function(){a.setListWidth(),a.setArrowsVisibleOnResize()}),f.utils.domNodeDisposal.addDisposeCallback(e,function(){a.unregisterEvents(),clearInterval(s)})}},f.bindingHandlers.renderArrowListItem={update:function(e,t){var n=f.unwrap(t()),i=n.length;n.index()===i-1&&n.itemsRendered(!0)}},f.bindingHandlers.stickTextToTop={update:function(e,t){var n=getComputedStyle(e).fontSize,i=t();f.unwrap(i)||(n=parseInt(n.slice(0,n.length-2)),0<v(e).innerHeight()&&(e.style.marginTop=-(Math.round(v(e).innerHeight()/n)-1)*Math.round(n/2)+"px"))}},f.bindingHandlers.electronicSignature={init:function(n,e,t,i){var s=function(){n.setAttribute("width",n.parentElement.clientWidth),n.setAttribute("height",n.parentElement.clientHeight)},a=function(){var e=n.getAttribute("width"),t=n.getAttribute("height");e==n.parentElement.clientWidth&&t==n.parentElement.clientHeight||(s(),i.ClearSignature())};s(),i.InitCanvas(n),window.addEventListener("resize",a),f.utils.domNodeDisposal.addDisposeCallback(n,function(){window.removeEventListener("resize",a)})}},f.bindingHandlers.elementToImage={init:function(e,t,n,i){i.setPrintSettings(e,function(){return 0!==window.pageYOffset?-window.pageYOffset:0})}},f.bindingHandlers.showIntrumentNotAvailable={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=v(e);n.isAvailable?i.addClass("instrument-available"):i.addClass("instrument-unavailable")},update:function(e,t){var n=f.utils.unwrapObservable(t()),i=n.instrData,s=v(e),a=v("."+n.dealContainerClass),o=v(".instrument-unavailable-wrapper"),r="deal-container-instrument-notavailable",l="instrument-available",u="instrument-unavailable";i.isAvailable?i.isChanged?(s.css({height:"auto"}),o.show(),s.addClass(l),s.removeClass(u),a.removeClass(r)):(s.css({height:s.height()+"px"}),o.hide()):(o.show(),a.addClass(r),s.addClass(u),s.removeClass(l))}}}),define("customBindings/NumericField",["require","knockout","jquery"],function(e){var s=e("knockout"),a=e("jquery");s.bindingHandlers.numericField={init:function(e,t){var n=s.utils.unwrapObservable(t()),i=a.extend({negative:!0},n);a(e).numeric(i),s.utils.domNodeDisposal.addDisposeCallback(e,function(e){a(e).removeNumeric()})}}}),define("customBindings/SpinnerField",["require","knockout","jquery","jquery-ui","FxSpinnerWidget"],function(e){var C=e("knockout"),y=e("jquery");C.bindingHandlers.closingLimitSpinner={init:function(n,e,u){var d,i,s,a,o,r,l,c,t=u().spinnerOptions||{},p=e(),m=u().spinnerOptions.startSpinFrom;if((d=t.input?0===t.input.indexOf("#")?y(t.input):y(n).find(t.input):y(n)).length){i=d.attr("id")||d.attr("name")||"";var f=function(){if(a){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if("NA"!==p()||e!==eStartSpinFrom.Above)if(isNaN(t)&&e===eStartSpinFrom.Below)a.toggleClass("active",!0);else Number(p())<=u().spinnerOptions.min()?a.toggleClass("active",!1):a.toggleClass("active",!0);else a.toggleClass("active",!1)}},v=function(){if(s){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if(isNaN(t)&&e===eStartSpinFrom.Below)s.toggleClass("active",!1);else{var n=Number(p());u().spinnerOptions.max()<=n?s.toggleClass("active",!1):s.toggleClass("active",!0)}}},h=function(){v(),f()};d.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),culture:C.toJS(t.culture),incremental:!0,create:function(){var e=u().spinnerOptions.min,t=u().spinnerOptions.max;(s=y(n).find(".ui-spinner-button.ui-spinner-up")).length&&(s.addClass("increment active"),i&&s.attr("id",i.concat("BtnIncrement"))),(a=y(n).find(".ui-spinner-button.ui-spinner-down")).length&&(a.addClass("decrement active"),i&&a.attr("id",i.concat("BtnDecrement"))),h(),o=p.subscribe(function(){h()}),r=e.subscribe(f),l=t.subscribe(v),c=m.subscribe(h)},spin:function(e,t){if(isNullOrUndefined(d))return!1;e.preventDefault();var n,i=d.fxspinner("value"),s=u().spinnerOptions.min(),a=u().spinnerOptions.max(),o=u().spinnerOptions.startSpinFrom(),r=t.value>i?"up":"down",l=parseFloat(p());if(o===eStartSpinFrom.None)return p(""),!1;if(isNaN(l)&&o===eStartSpinFrom.Below)return p(a),d.fxspinner("value",a),!1;if(isNaN(l)&&o===eStartSpinFrom.Above)return p(s),d.fxspinner("value",s),!1;if("up"===r&&t.value<s)return p(s),d.fxspinner("value",s),!1;if("down"===r&&t.value>a)return p(a),d.fxspinner("value",a),!1;"function"==typeof p.isIncremental&&p.isIncremental()?("up"===r&&(n=p.increment(!0)),"down"===r&&(n=p.decrement(!0)),!isNaN(n)&&n<s&&(n=s),!isNaN(n)&&a<n&&(n=a),!isNaN(n)&&s<=n&&n<=a&&(p(n),d.fxspinner("value",n))):t.value>=s&&t.value<=a&&i!=t.value&&(p(t.value),d.fxspinner("value",t.value));return!1}}),C.utils.domNodeDisposal.addDisposeCallback(n,function(){o&&o.dispose(),r&&r.dispose(),l&&l.dispose(),c&&c.dispose(),!isNullOrUndefined(d)&&d.length&&(d.fxspinner("destroy"),d=null),s=a=null})}},update:function(e,t,n){var i,s=C.toJS(n().spinnerOptions)||{};if((i=s.input?0===s.input.indexOf("#")?y(s.input):y(e).find(s.input):y(e)).length){var a={},o=i.fxspinner("option","step"),r=i.fxspinner("option","numberFormat"),l=!1;o!=s.step&&(l=!0,a.step=s.step),r!=s.numberFormat&&(l=!0,a.numberFormat=s.numberFormat),l&&i.fxspinner("option",a)}}},C.bindingHandlers.openLimitSpinner={init:function(n,e,d){var i,s,a,o,r,t=d().spinnerOptions||{},c=0===t.input.indexOf("#")?y(t.input):y(n).find(t.input),l=c.attr("id"),p=e();if(c.length){var u=function(){if(s){var e=parseFloat(p());if(isNaN(e))s.toggleClass("active",!0);else Number(p())<=d().spinnerOptions.min1()?s.toggleClass("active",!1):s.toggleClass("active",!0)}},m=function(){if(i){var e=Number(p());d().spinnerOptions.max2()<=e?i.toggleClass("active",!1):i.toggleClass("active",!0)}};c.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),incremental:!0,culture:C.toJS(t.culture),create:function(){var e=d().spinnerOptions.min1,t=d().spinnerOptions.max2;(i=y(n).find(".ui-spinner-button.ui-spinner-up")).length&&(i.addClass("increment active"),i.attr("id",l.concat("BtnIncrement"))),(s=y(n).find(".ui-spinner-button.ui-spinner-down")).length&&(s.addClass("decrement active"),s.attr("id",l.concat("BtnDecrement"))),a=p.subscribe(function(){m(),u()}),o=e.subscribe(u),r=t.subscribe(m)},spin:function(e,t){if(isNullOrUndefined(c))return!1;e.preventDefault();var n=c.fxspinner("value"),i=d(),s=i.spinnerOptions.min1(),a=i.spinnerOptions.max1(),o=i.spinnerOptions.min2(),r=i.spinnerOptions.max2(),l=t.value>n?"up":"down",u=parseFloat(p());return"up"===l&&(isNaN(u)||t.value<s)?(p(o),c.fxspinner("value",o)):"up"===l&&t.value>a&&t.value<o?(p(o),c.fxspinner("value",o)):"down"===l&&(isNaN(u)||t.value>r)?(p(a),c.fxspinner("value",a)):"down"===l&&t.value>a&&t.value<o?(p(a),c.fxspinner("value",a)):t.value>=s&&t.value<=r&&n!=t.value&&(p(t.value),c.fxspinner("value",t.value)),!1}}),C.utils.domNodeDisposal.addDisposeCallback(n,function(){a&&a.dispose(),o&&o.dispose(),r&&r.dispose(),!isNullOrUndefined(c)&&c.length&&(c.fxspinner("destroy"),c=null),i=s=null})}},update:function(e,t,n){var i,s=C.toJS(n().spinnerOptions)||{};if((i=s.input?0===s.input.indexOf("#")?y(s.input):y(e).find(s.input):y(e)).length){var a={},o=i.fxspinner("option","step"),r=i.fxspinner("option","numberFormat"),l=!1;o!=s.step&&(l=!0,a.step=s.step),r!=s.numberFormat&&(l=!0,a.numberFormat=s.numberFormat),l&&i.fxspinner("option",a)}}},C.bindingHandlers.amountSpinner={init:function(n,e,u){var d,i,s,a,o,r,l,c,t=u().spinnerOptions||{},p=e(),m=u().spinnerOptions.startSpinFrom;if((d=t.input?0===t.input.indexOf("#")?y(t.input):y(n).find(t.input):y(n)).length){i=d.attr("id")||d.attr("name")||"";var f=function(){if(a){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if("NA"!==p()||e!==eStartSpinFrom.Above)if(isNaN(t)&&e===eStartSpinFrom.Below)a.toggleClass("active",!0);else Number(p())<=u().spinnerOptions.min()?a.toggleClass("active",!1):a.toggleClass("active",!0);else a.toggleClass("active",!1)}},v=function(){if(s){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if(isNaN(t)&&e===eStartSpinFrom.Below)s.toggleClass("active",!1);else{var n=Number(p());u().spinnerOptions.max()<=n?s.toggleClass("active",!1):s.toggleClass("active",!0)}}},h=function(){v(),f()};d.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),incremental:!0,create:function(){var e=u().spinnerOptions.min,t=u().spinnerOptions.max;(s=y(n).find(".ui-spinner-button.ui-spinner-up")).length&&(s.addClass("increment active"),i&&s.attr("id",i.concat("BtnIncrement"))),(a=y(n).find(".ui-spinner-button.ui-spinner-down")).length&&(a.addClass("decrement active"),i&&a.attr("id",i.concat("BtnDecrement"))),h(),o=p.subscribe(function(){h()}),r=e.subscribe(f),l=t.subscribe(v),c=m.subscribe(h)},spin:function(e,t){if(isNullOrUndefined(d))return!1;e.preventDefault();var n,i=d.fxspinner("value"),s=u().spinnerOptions.min(),a=u().spinnerOptions.max(),o=u().spinnerOptions.startSpinFrom(),r=t.value>i?"up":"down",l=parseFloat(p());if(isNaN(l)&&o===eStartSpinFrom.Below)return p(a),d.fxspinner("value",a),!1;if(isNaN(l)&&o===eStartSpinFrom.Above)return p(s),d.fxspinner("value",s),!1;if("up"===r&&t.value<s)return p(s),d.fxspinner("value",s),!1;if("down"===r&&t.value>a)return p(a),d.fxspinner("value",a),!1;"function"==typeof p.isIncremental&&p.isIncremental()?("up"===r&&(n=p.increment(!0)),"down"===r&&(n=p.decrement(!0)),!isNaN(n)&&n<s&&(n=s),!isNaN(n)&&a<n&&(n=a),!isNaN(n)&&s<=n&&n<=a&&(p(n),d.fxspinner("value",n))):t.value>=s&&t.value<=a&&i!=t.value&&(p(t.value),d.fxspinner("value",t.value));return!1}}),C.utils.domNodeDisposal.addDisposeCallback(n,function(){o&&o.dispose(),r&&r.dispose(),l&&l.dispose(),c&&c.dispose(),!isNullOrUndefined(d)&&d.length&&(d.fxspinner("destroy"),d=null),s=a=null})}},update:function(e,t,n){var i,s=C.utils.unwrapObservable(t()),a=isStringType(s)&&""!==s?Globalize.parseFloat(s):s,o=C.toJS(n().spinnerOptions)||{};if((i=o.input?0===o.input.indexOf("#")?y(o.input):y(e).find(o.input):y(e)).length){var r={},l=i.fxspinner("option","step"),u=i.fxspinner("option","numberFormat"),d=!1;if(l!=o.step&&(d=!0,r.step=o.step),u!=o.numberFormat&&(d=!0,r.numberFormat=o.numberFormat),d&&i.fxspinner("option",r),!isEmptyValue(a)){var c=i.fxspinner("option","numberFormat"),p=i.val(),m=Globalize.format(a,c);p!==m&&i.get(0)!==document.activeElement&&(clearTimeout(i.updateValueTimer),i.updateValueTimer=setTimeout(function(e,t){e.fxspinner("instance")&&(e.fxspinner("value",t),isNaN(parseFloat(t))?e.val(""):e.val(t),e.trigger("blur"))},10,i,m))}}}},C.bindingHandlers.lowMarginSpinner={init:function(i,e,u){var d,s,a,o,r,l,c,p,m,t=u().spinnerOptions||{},f=e(),v=u().spinnerOptions.startSpinFrom;if((d=t.input?0===t.input.indexOf("#")?y(t.input):y(i).find(t.input):y(i)).length){s=d.attr("id")||d.attr("name")||"";var h=function(){if(o&&u().spinnerOptions.enabled()){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(f());if("NA"!==f()||e!==eStartSpinFrom.Above)if(isNaN(t)&&e===eStartSpinFrom.Below)o.toggleClass("active",!0);else Number(f())<=u().spinnerOptions.min()?o.toggleClass("active",!1):o.toggleClass("active",!0);else o.toggleClass("active",!1)}},g=function(){if(a&&u().spinnerOptions.enabled()){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(f());if(isNaN(t)&&e===eStartSpinFrom.Below)a.toggleClass("active",!1);else{var n=Number(f());u().spinnerOptions.max()<=n?a.toggleClass("active",!1):a.toggleClass("active",!0)}}},b=function(){g(),h()},w=function(e){a&&(a.toggleClass("active",e),a.toggleClass("disabled",!e)),o&&(o.toggleClass("active",e),o.toggleClass("disabled",!e))};d.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),incremental:!0,create:function(){var e=u().spinnerOptions.min,t=u().spinnerOptions.max,n=u().spinnerOptions.enabled;(a=y(i).find(".ui-spinner-button.ui-spinner-up")).length&&(a.addClass("increment"),s&&a.attr("id",s.concat("BtnIncrement")),n()?a.addClass("active"):a.addClass("disabled")),(o=y(i).find(".ui-spinner-button.ui-spinner-down")).length&&(o.addClass("decrement"),s&&o.attr("id",s.concat("BtnDecrement")),n()?o.addClass("active"):o.addClass("disabled")),b(),r=f.subscribe(function(){b()}),l=e.subscribe(h),c=t.subscribe(g),p=v.subscribe(b),m=n.subscribe(w)},spin:function(e,t){if(isNullOrUndefined(d))return!1;e.preventDefault();var n,i=d.fxspinner("value"),s=u().spinnerOptions.min(),a=u().spinnerOptions.max(),o=u().spinnerOptions.startSpinFrom(),r=t.value>i?"up":"down",l=parseFloat(f());if(isNaN(l)&&o===eStartSpinFrom.Below)return f(a),d.fxspinner("value",a),!1;if(isNaN(l)&&o===eStartSpinFrom.Above)return f(s),d.fxspinner("value",s),!1;if("up"===r&&t.value<s)return f(s),d.fxspinner("value",s),!1;if("down"===r&&t.value>a)return f(a),d.fxspinner("value",a),!1;"function"==typeof f.isIncremental&&f.isIncremental()?("up"===r&&(n=f.increment(!0)),"down"===r&&(n=f.decrement(!0)),!isNaN(n)&&n<s&&(n=s),!isNaN(n)&&a<n&&(n=a),!isNaN(n)&&s<=n&&n<=a&&(f(n),d.fxspinner("value",n))):t.value>=s&&t.value<=a&&i!=t.value&&(f(t.value),d.fxspinner("value",t.value));return!1}}),C.utils.domNodeDisposal.addDisposeCallback(i,function(){r&&r.dispose(),l&&l.dispose(),c&&c.dispose(),p&&p.dispose(),!isNullOrUndefined(d)&&d.length&&(d.fxspinner("destroy"),d=null),m&&m.dispose(),a=o=null})}},update:function(e,t,n){var i,s=C.utils.unwrapObservable(t()),a=isStringType(s)&&""!==s?Globalize.parseFloat(s):s,o=C.toJS(n().spinnerOptions)||{};if((i=o.input?0===o.input.indexOf("#")?y(o.input):y(e).find(o.input):y(e)).length){var r={},l=i.fxspinner("option","step"),u=i.fxspinner("option","numberFormat"),d=!1;if(l!=o.step&&(d=!0,r.step=o.step),u!=o.numberFormat&&(d=!0,r.numberFormat=o.numberFormat),d&&i.fxspinner("option",r),!isEmptyValue(a)){var c=i.fxspinner("option","numberFormat"),p=i.val(),m=Globalize.format(a,c);p!==m&&i.get(0)!==document.activeElement&&(clearTimeout(i.updateValueTimer),i.updateValueTimer=setTimeout(function(e,t){e.fxspinner("instance")&&(e.fxspinner("value",t),e.val(t),e.trigger("blur"))},10,i,m))}}}}}),define("customBindings/PrintBinding",["require","PrintExportManager"],function(e){var s=e("PrintExportManager");ko.bindingHandlers.printing={init:function(t){var n="fx-is-printing";var i=s.IsPrintingNow.subscribe(function(e){e?t.classList.add(n):t.classList.remove(n)});ko.utils.domNodeDisposal.addDisposeCallback(t,function(e){i&&i.dispose()})}}}),define("customBindings/web",["require","knockout","jquery","jquery-ui"],function(e){var f=e("knockout"),m=e("jquery");f.bindingHandlers.showSpinner={update:function(e,t,n,i,s){m(e).css("position","relative"),f.utils.unwrapObservable(t())?Spinner.show(e):Spinner.hide()}},f.bindingHandlers.setDialogPos={init:function(e){f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".setDialogPos")})},update:function(e,t){var n=f.utils.unwrapObservable(t()),i={dialogPosition:null,parentIsCollapsed:null,parentTopElement:null,topOffset:0,parentLeftElement:null,leftOffset:0,RTLoffset:0};m.extend(i,n),m(e).on("click.setDialogPos",function(){var e=-1,t=-1;i.parentIsCollapsed()||(0<m(i.parentTopElement).length&&(e=m(i.parentTopElement).offset().top-m("#TradingsControls").offset().top+i.topOffset),0<m(i.parentLeftElement).length&&(t=m(i.parentLeftElement).offset().left-m("#TradingsControls").offset().left+i.leftOffset));var n={top:e,left:t,offset:i.RTLoffset};i.dialogPosition(n)})}},f.bindingHandlers.dialog={init:function(e,t,n){var i=n(),s=f.utils.unwrapObservable(i.dialogInstance),a=f.utils.unwrapObservable(t())||{},o=f.utils.unwrapObservable(s.element)||!1,r=m(o).parent(),l=m(e).find(".dialogContainer"),u=eAppEvents.formChangedEvent+"."+s.name;m(document).on(u,function(){m.data(e,"ui-dialog")&&l.dialog("option","position",a.position||{})}),f.utils.extend(a,{open:function(){},beforeClose:function(e,t){if(s){if(e.keyCode===m.ui.keyCode.ESCAPE)return e.preventDefault(),e.stopPropagation(),setTimeout(function(){s.close()},10),!1;s.close()}}}),l.append(o),l.dialog(a);var d=l.data("uiDialog");m(e).data("dialogElementId",d.element.prop("id")),d._title=function(e){if("function"==typeof this.options.title){var t=this.options.title();t.on("mousedown",function(e){e.stopPropagation()}),e.append(t)}else e.html(this.options.title)},f.utils.domNodeDisposal.addDisposeCallback(e,function(){m(document).off(u),r.append(o),r=o=null,l.dialog("destroy"),e=s=l=null})},update:function(e,t,n){var i=n(),s=f.utils.unwrapObservable(i.dialogInstance),a=f.utils.unwrapObservable(s.openTimeout),o=f.utils.unwrapObservable(s.getOptions())||{},r=f.utils.unwrapObservable(s.element)||!1,l=LanguageHelper.IsRtlLanguage(),u=m("#"+m(e).data("dialogElementId")),d=u.parent();o.open=function(){var e;if(m(s.element).css("visibility","visible"),isDefinedType(o.appendTo)||(o.appendTo="body",isDefinedType(o.useDialogPosition)||isDefinedType(o.useDefaultPosition)||(o.useDialogPosition=!0)),o.useDialogPosition?function(){if(o.left&&0<o.left){var e=o.left;l&&(e=e-d.width()+o.offset),d.position({my:"left+"+e+" top+"+(o.top+window.pageYOffset),at:"left top",of:o.appendTo})}m("body > .ui-widget-overlay").css("position","fixed")}():o.useDefaultPosition?(d.draggable({containment:o.appendTo}),d.position({my:"center",at:"center",of:o.appendTo})):(e=d.height()>m(window).height(),d.position({my:"top",at:"top",of:o.appendTo}),!o.appendTo||e?(d.draggable({containment:"document"}),m("body > .ui-widget-overlay").css("position","fixed")):(d.draggable({containment:o.appendTo}),m(".ui-widget-overlay").css("position","absolute"))),0<=d.position().top||(d.css("top","0"),d.draggable({containment:"document"})),o.customTitle){u.dialog("option","title",function(e,t){return m(e).find("#"+t)}.bind(null,r,o.customTitle));var t=u.dialog("option","beforeClose");u.dialog("option","beforeClose",function(){m("#"+o.customTitle).remove(),t.apply(null,arguments)})}u[0].contains(document.activeElement)||m("select:visible:first, div:visible:first",u).focus()},setTimeout(function(e,t){e.hasClass("ui-dialog-content")&&(e.dialog("option",t),e.dialog("open"))},a,u,o)}},f.bindingHandlers.componentLoaded={init:function(e,t,n,i,s){f.postbox.publish(t().appEvent,t().params)}},f.bindingHandlers.alternateRows={init:function(e,t,n,i,s){var a=n(),o=a.evenClass,r=a.oddClass,l=a.everyRows||1,u=m(e),d=[];f.utils.unwrapObservable(t()),u.children("*").addClass(r).removeClass(o);for(var c=l;0<c;c--){var p=2*l+"n";c<l&&(p+="-"+(l-c)),d.push(":nth-child("+p+")")}u.children(d.join(",")).addClass(o).removeClass(r)},update:function(e,t,n){var i=n(),s=i.evenClass,a=i.oddClass,o=i.everyRows||1,r=m(e),l=[];f.utils.unwrapObservable(t()),r.children("*").addClass(a).removeClass(s);for(var u=o;0<u;u--){var d=2*o+"n";u<o&&(d+="-"+(o-u)),l.push(":nth-child("+d+")")}r.children(l.join(",")).addClass(s).removeClass(a)}},f.bindingHandlers.datepicker={init:function(e,n,t){var i=t().datepickeroptions||{};m.extend(i,{dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0}),m(e).datepicker(i),m(e).on("change.datepicker",function(){var e=n(),t=m(this).datepicker("getDate");e(m.datepicker.formatDate("dd/mm/yy",t)),m(this).blur()}),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".datepicker"),m(e).datepicker("destroy")})},update:function(e,t){var n=f.utils.unwrapObservable(t()),i=m.datepicker.parseDate("dd/mm/yy",n);i-m(e).datepicker("getDate")!=0&&m(e).datepicker("setDate",i)}},f.bindingHandlers.datepickerbutton={init:function(e,n,t){var i=t(),s=i.field||"",a=i.customClass||"",o=i.customLabel||"",r=null,l="dd/mm/yy",u=i.datepickeroptions||{};if(isEmptyValue(s)||(r=document.getElementById(s)),r&&!m(r).hasClass("hasDatepicker")){var d=new Date(0),c={beforeShow:function(){return 500<=new Date-d},onClose:function(){d=new Date}};u=m.extend({changeMonth:!0,changeYear:!0,dateFormat:l,firstDay:1},c,u),m(r).datepicker(u),m(r).datepicker("option","onSelect",function(){var e=n(),t=m(this).datepicker("getDate");e(m.datepicker.formatDate(l,t)),m(this).datepicker("hide")}),m(r).datepicker("option",{onChangeMonthYear:function(e,t,n){p(n.input,m("#ui-datepicker-div"))},beforeShow:function(e,t){p(t.input,m("#ui-datepicker-div"))},orientation:"bottom"}),m(e).on("click.datepickerbutton",function(){m(r).datepicker("widget").is(":visible")||m(r).datepicker("show")}),setTimeout(function(e,t){p(e,t)},0,e,m("#ui-datepicker-div")),m(r).on("change.datepickerbutton",function(){var e=n(),t=m(this).datepicker("getDate");e(m.datepicker.formatDate(l,t)),m(this).blur()}),f.utils.domNodeDisposal.addDisposeCallback(r,function(e){m(e).off(".datepickerbutton"),m(r).off(".datepickerbutton"),m(r).datepicker("destroy"),r=null})}function p(e,t){t.removeClass("positioned"),setTimeout(function(e,t){a&&0===m("#ui-datepicker-div .content-wrapper").length&&t.addClass(a).wrapInner(m("<div>").addClass("content-wrapper")),o&&0===m("#ui-datepicker-div label").length&&t.prepend(m("<label>").html(o)),t.wrapInner(m("<div>").addClass("wrapper")),t.addClass("positioned"),m(e).offset().top>=t.offset().top?(t.removeClass("above-input below-input").addClass("above-input"),m("#ui-datepicker-div .wrapper").removeClass("above-input below-input").addClass("above-input")):(t.removeClass("above-input below-input").addClass("below-input"),m("#ui-datepicker-div .wrapper").removeClass("above-input below-input").addClass("below-input"))},0,e,t)}},update:function(e,t,n){var i=n(),s=i.field||"",a=null,o=i.datepickeroptions||{};if(isEmptyValue(s)||(a=document.getElementById(s)),m(a).datepicker(o),a&&m(a).hasClass("hasDatepicker")){var r=f.utils.unwrapObservable(t()),l=m(a).datepicker("getDate"),u=r&&m.datepicker.parseDate("dd/mm/yy",r);u-l!=0&&m(a).datepicker("setDate",u)}}},f.bindingHandlers.slideUp={init:function(e,t){var n=f.utils.unwrapObservable(t());m(e).toggle(!n)},update:function(e,t,n){var i=f.utils.unwrapObservable(t()),s=n(),a=s.duration||"slow",o="function"==typeof s.slideUpCompleted?s.slideUpCompleted:function(){},r=f.utils.unwrapObservable(a);r?!0===r&&(r=400):r=0,i?m(e).slideUp(r,o):m(e).slideDown(r,o)}},f.bindingHandlers.loadBannerHtml={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o={html:"",applyKoBindings:!1,loadedHtmlHandler:function(e){return e},htmlAttachedHandler:function(){}};m.extend(o,a);var r=o.loadedHtmlHandler(o.html);if(m(e).html(r),o.htmlAttachedHandler(),o.applyKoBindings){var l=m(e).children()[0];f.applyBindings($viewModelsManager,l)}}},f.bindingHandlers.windowPopupOpen={init:function(e){m(e).on("click.windowPopup",function(e){return window.open(m(this).attr("href"),"tsHelp","height=710px,width=1000px,scrollbars=yes,resizable=1,location=no,center=yes,titlebar=no"),!1}),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".windowPopup")})}},f.bindingHandlers.loadHtml={update:function(e,t,n,i,s){var a=m(e),o=f.utils.unwrapObservable(t()),r={url:null,applyKoBindings:!1,loadedHtmlHandler:function(e){return e},htmlAttachedHandler:function(){},noCache:!1,isStaticFile:!1};m.extend(r,o),r.noCache&&(r.url+=-1<r.url.indexOf("?")?"&":"?",r.url+=(new Date).getTime()),!0===r.isStaticFile?r.url=UrlResolver.combine(UrlResolver.getStaticFilePath(),r.url):r.url=UrlResolver.combine(UrlResolver.getApplicationRelativePath(),r.url),m.get(r.url,function(e){if(isNullOrUndefined(r)||isNullOrUndefined(a))return!1;var t=r.loadedHtmlHandler(e);if(a.html(t),r.htmlAttachedHandler(),r.applyKoBindings){var n=a.children()[0];f.applyBindings($viewModelsManager,n)}}),f.utils.domNodeDisposal.addDisposeCallback(e,function(){a=r=null})}},f.bindingHandlers.appendElementWhen={update:function(e,t,n,i,s){var a,o,r=f.unwrap(t()),l=f.unwrap(r.trigger());(a=m((r=r||{}).elementSelector)).length&&(r.originalCssClass&&a.toggleClass(r.originalCssClass,!l),r.appendedCssClass&&a.toggleClass(r.appendedCssClass,l),l?(o=a.parent(),(a=a.detach()).appendTo(e),a.data("originalParent",o)):(o=a.data("originalParent"))&&o.length&&(a.removeData("originalParent"),(a=a.detach()).appendTo(o)))}},f.bindingHandlers.toggle={init:function(e,t,n,i,s){var a=t()||{},o=m(e),r=m("#"+a.targetElement),l=a.observable.subscribe(function(e){e?(o.removeClass(a.offClass).addClass(a.onClass),r.show()):(o.removeClass(a.onClass).addClass(a.offClass),r.hide())});f.utils.domNodeDisposal.addDisposeCallback(e,function(e){l&&(l.dispose(),l=null),o=r=null})}},f.bindingHandlers.timedToggle={init:function(t,e){var n,i=e()||{},s=i.observable.subscribe(function(e){isDefinedType(n)||(n=e),e!==n&&n&&(m(t).removeClass(i.defaultClass).addClass(i.timedClass),n=e,setTimeout(function(e){m(e).removeClass(i.timedClass).addClass(i.defaultClass)},i.timeout,t))});f.utils.domNodeDisposal.addDisposeCallback(t,function(e){s&&(s.dispose(),s=null),i=null})}},f.bindingHandlers.trigger={init:function(e,t){var n=f.utils.unwrapObservable(t());if(!isFunctionType(n))throw new TypeError("Please provide a function to execute when the element is triggered!");m(e).on("click.trigger",n).on("keypress.trigger",function(e){(e.which==cKeyCode.CtrlEnter||e.which==cKeyCode.Enter)&&n()}),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".trigger")})}},f.bindingHandlers.keypressTrigger={init:function(e,t){var n=f.utils.unwrapObservable(t());if(!isFunctionType(n))throw new TypeError("Please provide a function to execute when the element is triggered!");m(e).on("keypress.keypressTrigger",function(e){(e.which==cKeyCode.CtrlEnter||e.which==cKeyCode.Enter)&&n()}),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".keypressTrigger")})}},f.bindingHandlers.draggable={init:function(e,t,n,i,s){var a=t()||{},o=n(),r={scroll:!1,containment:m(".alert-overlay")};o&&o.dragStopAutoHeight&&(r.stop=function(){e.style&&e.style.height&&"auto"!==e.style.height&&(e.style.height="auto")}),r=m.extend(r,a),m(e).draggable(r),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).draggable("destroy")})}},f.bindingHandlers.toolTip={init:function(e){var t=LanguageHelper.IsRtlLanguage();m(e).tooltip({autoShow:!1,tooltipClass:"file_filter",position:{my:t?"right-40 center":"left+20 center",at:"right center",using:function(e,t){m(this).css(e),m("<div>").addClass("arrow").appendTo(this)}}}),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).tooltip("destroy")})}},f.bindingHandlers.fadeVisible={init:function(e,t){var n=f.unwrap(t());m(e).toggle(n)},update:function(e,t){f.unwrap(t())?m(e).fadeIn():m(e).fadeOut()}},f.bindingHandlers.tokenReplace={init:function(e,t,n,i,s){var a=m(e),o=a.text(),r="g",l=f.utils.unwrapObservable(t())||{},u={token:"",replace:"",ignoreCase:!1};m.extend(u,l),!0===u.ignoreCase&&(r+="i");var d=new RegExp(escapeRe(u.token),r);a.text(o.replace(d,u.replace))},update:function(e,t,n,i,s){var a=m(e),o=a.text(),r="g",l=f.utils.unwrapObservable(t())||{},u={token:"",replace:"",ignoreCase:!1};m.extend(u,l),!0===u.ignoreCase&&(r+="i");var d=new RegExp(escapeRe(u.token),r);a.text(o.replace(d,u.replace))}},f.bindingHandlers.otmDisplay={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());m(e).text(Math.round(a)+" %")}},f.bindingHandlers.jScrollPane={init:function(i,e){var n,t=f.utils.unwrapObservable(e()),s=t.postBoxTopic;function a(e){var t=m.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";m(".jspContainer",i).unbind(t);var n={wheelDeltaX:(isDefinedType(e.wheelDeltaX)?e.wheelDeltaX:e.deltaX)*m.fn.jScrollPane.defaults.mouseWheelSpeed,wheelDeltaY:(isDefinedType(e.wheelDeltaY)?-e.wheelDeltaY:e.deltaY)*m.fn.jScrollPane.defaults.mouseWheelSpeed};m(i).data("jsp").scrollBy(n.wheelDeltaX,n.wheelDeltaY,!1),e.preventDefault()}(t=m.extend({},{autoReinitialise:!1,autoReinitialiseDelay:200,verticalDragMinHeight:20,reinitialiseDelay:150},t)).reinitialiseDelay=Math.max(t.reinitialiseDelay,200),s&&(n=f.postbox.subscribe(s,function(){setTimeout(function(e,t){var n=m(e).data("jsp");if(n)try{n.reinitialise()}catch(e){throw e.message="ko.bindingHandlers.jScrollPane ko.postbox.subscribe setTimeout jscroll.reinitialise,  original message: "+e.message+JSON.stringify(t,null,4),e}},t.reinitialiseDelay,i,{postBoxTopic:s,options:t,page:location.href})})),m(i).jScrollPane(t),i.querySelector(".jspContainer").addEventListener("wheel",a,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1}),f.utils.domNodeDisposal.addDisposeCallback(i,function(e){n&&(n.dispose(),n=null),e.querySelector(".jspContainer").removeEventListener("wheel",a,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1});var t=m(e).data("jsp");t&&t.destroy(),i=null})},update:function(e,t){var n=t();n.postBoxTopic&&f.postbox.publish(n.postBoxTopic)}},f.bindingHandlers.scrollWithFixedhead={init:function(i,e){var t=f.utils.unwrapObservable(e()),n=m("#"+t.targetElement),s=n.width()-16,a=n.attr("class");if(!(t.showIfMoreThan&&t.length<=t.showIfMoreThan)){n.find("th").each(function(){m(this).css({width:m(this).outerWidth()+"px"})});var o="<div class='clone-wrapper'><table style='width: "+s+"px' class='"+a+" clone'><thead>"+n.find("thead").clone().addClass("static").html()+"</thead></table></div>";m(i).prepend(o),setTimeout(function(){m(n).find("thead").remove()},50),setTimeout(function(e){m(e).find(".scroll").jScrollPane({showArrows:!0})},0,i),setTimeout(function(e){e.querySelector(".jspContainer").addEventListener("wheel",r,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1})},0,i),f.utils.domNodeDisposal.addDisposeCallback(i,function(e){e.querySelector(".jspContainer").removeEventListener("wheel",r,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1});var t=m(".scroll",e).data("jsp");t&&t.destroy()})}function r(e){var t=m.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";m(".jspContainer",i).unbind(t);var n={wheelDeltaX:(isDefinedType(e.wheelDeltaX)?e.wheelDeltaX:e.deltaX)*m.fn.jScrollPane.defaults.mouseWheelSpeed,wheelDeltaY:(isDefinedType(e.wheelDeltaY)?-e.wheelDeltaY:e.deltaY)*m.fn.jScrollPane.defaults.mouseWheelSpeed};m(".scroll",i).data("jsp").scrollBy(n.wheelDeltaX,n.wheelDeltaY,!1),e.preventDefault()}}},f.bindingHandlers.ddDropdown={update:function(e,t,n,i,s){var a=t(),o=m(e);a.isInitDDdropdown?o.msDropdown({roundedBorder:!1,height:300,zIndex:99999,roundedCorner:!1}):o.msDropdown().data("dd").destroy()}},f.bindingHandlers.gridHeightCalculator={init:function(e,t){var n=t();m(e).css({height:n.rowCount*n.rowHeight+"px","background-color":"rgba(0, 0, 0, 0)"})}},f.bindingHandlers.tabs={init:function(e){m(e).find(".tabs").tabs(),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).find(".tabs").tabs("destroy")})}},f.bindingHandlers.resetPaymentDiv={update:function(e,t){var n=t();(n()||0===n())&&m("#concretePayments").length&&m("#paymentTypesContainer").appendTo("#concretePayments")}},f.bindingHandlers.paymentDivWithIntercalation={init:function(e,t){var n=t();f.toJS(n.missingInfo)||m("#paymentTypesContainer").hide()},update:function(e,t){var n=t(),i=f.utils.unwrapObservable(n.disableAutoScrolling);if(!n.payment())return m("#paymentTypesContainer").hide(),void(!i&&0<m("#concretePayments div.card-wrap:visible").length&&window.scrollTo(0,m("#concretePayments div.card-wrap:visible").last().offset().top));var s=n.getPaymentId(n.payment),a=m("#"+s).offset().top,o=null;m("#concretePayments div.card-wrap:visible").each(function(e,t){var n=m(t);n.offset().top===a&&(o=n)}),o&&o.after(m("#paymentTypesContainer")),m("#paymentTypesContainer").show(),i||window.scrollTo(0,a)}},f.bindingHandlers.customSelect={init:function(e,t,n){var i,s,a,o=m(e),r=f.utils.unwrapObservable(t())||{},l=n().value,u=n().customSelectOptions||{};u.refreshWhenObservableValueChanges&&l&&f.isObservable(l)&&(s=l.subscribe(function(){setTimeout(function(){jcf.refresh(o)},0)})),r.onReady&&f.isObservable(r.onReady)&&(i=r.onReady.subscribe(function(e){e&&jcf.refresh(o)})),jcf.replace(o,"Select",u);var d=n()||{};d.disable&&f.isObservable(d.disable)&&(a=d.disable.subscribe(function(){jcf.refresh(o)})),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){i&&(i.dispose(),i=null),s&&(s.dispose(),s=null),a&&(a.dispose(),a=null),jcf.destroy(m(e)),o=null})}},f.bindingHandlers.nonRtlOptions={init:function(e){var t=LanguageHelper.IsRtlLanguage(),n=e.options;if(t&&e.options&&e.options.length)for(var i=0;i<n.length;i++){var s=n[i];s.text&&!s.text.isRtlText()&&(s.innerHTML='<span class="ltr">'+s.innerHTML+"</span>")}}},f.bindingHandlers.dealSlipToggle={init:function(i,e){var s=e(),a=s.trakingEventName,t=s.isFullScreen.subscribe(function(e){var t=m(document.body),n=0<m(i).closest(".advinion-chart").length&&m(i).closest(".advinion-chart").is(":visible")?m(i).closest(".advinion-chart"):m(i).closest(".deal-slip");m(document.body).off("keydown.dealSlipToggle"),n.toggleClass("fullscreen").toggleClass("expanded"),t.toggleClass("chartpage-fullscreen"),e&&m(document.body).on("keydown.dealSlipToggle",function(e){e.keyCode===m.ui.keyCode.ESCAPE&&s.isFullScreen()&&(HistoryManager.Back(),e.preventDefault(),e.stopPropagation())}),f.postbox.publish(a,{element:"expand-button"})},s);f.utils.domNodeDisposal.addDisposeCallback(i,function(){m(i).closest(".deal-slip").off(".dealSlipToggle"),m(document.body).keydown=s.keydownHandler,m(document.body).off("keydown.dealSlipToggle"),t&&(t.dispose(),t=null)})}},f.bindingHandlers.createChartUsingCanvas={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=n.risePercent,s=n.fallPercent,a=n.isDisable,o=LanguageHelper.IsRtlLanguage(),r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);var l=110*(o?1:0),u=e.height/2,d=o?.5*Math.PI:1.5*Math.PI,c=o?(.5+s)*Math.PI:(1.5+i)*Math.PI;r.beginPath(),r.arc(l,u,75,d,c,!1),r.lineWidth=35,r.strokeStyle=a?"#ccc":o?"red":"green",r.stroke();var p=c,m=o?1.5*Math.PI:.5*Math.PI;r.beginPath(),r.arc(l,u,75,p,m,!1),r.lineWidth=35,r.strokeStyle=a?"#ccc":o?"#4dac4c":"#ec4443",r.stroke()}},f.bindingHandlers.triggerEventOnWindowResize={init:function(e,t){var s=f.utils.unwrapObservable(t()),a=0,o=0;function n(e){var t=!1,n=m(e).width(),i=m(e).height();a!==n&&(a=n,t=!0),o!==i&&(o=i,t=!0),t&&f.postbox.publish(s.eventName,{width:n,height:i})}m(window).on("resize.triggerEventOnWindowResize",n.bind(window,e)),f.utils.domNodeDisposal.addDisposeCallback(e,function(){m(window).off("resize.triggerEventOnWindowResize",n)})}},f.bindingHandlers.toggleElement={update:function(e,t){f.utils.unwrapObservable(t())?m(e).hide():m(e).show()}},f.bindingHandlers.tileLayoutSelector={update:function(e,t){var n,i=f.utils.unwrapObservable(t()),s="click.tileLayoutSelector."+(i.id||"0");function a(){i.layoutExpanded()&&(i.layoutExpanded(!1),m(document).unbind(s))}f.isObservable(i.layoutExpanded)&&(n=i.layoutExpanded.subscribe(function(e){e?m(document).bind(s,a):m(document).unbind(s)}),f.utils.domNodeDisposal.addDisposeCallback(e,function(){n&&isFunctionType(n.dispose)&&(n.dispose(),n=null),m(document).unbind(s)}))}},f.bindingHandlers.addSpanToLastWord={init:function(e){var t=m(e).html(),n=m(e).text().trim(),i=n.substring(n.lastIndexOf(" ")+1),s='<span class="inline-block">'+i;t=t.replace(i,s)+"</span>",m(e).html(t)}},f.bindingHandlers.disableEnterKey={init:function(e){var t="keypress."+m(e).attr("id");m(e).on(t,function(e){e.keyCode===m.ui.keyCode.ENTER&&e.preventDefault()}),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(t)})}},f.bindingHandlers.hoverOnClick={init:function(e){m(e).on("touchstart.hoverOnClick",function(){m(this).trigger("click")}),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".hoverOnClick")})}},f.bindingHandlers.accordion={init:function(n,e,t,i,s){var a=t();function o(){m(".accordion-section").removeClass("active"),m(".accordion-section-content").slideUp(300).removeClass("open")}m(n).click(function(e){var t=m(this).attr("for");m(this).is(".active")?o():(o(),f.postbox.publish(a.openEventName,f.dataFor(this.parentElement.parentElement)),m(this).addClass("active"),m(n).find("#"+t).slideDown(300).addClass("open")),e.preventDefault()})}},f.bindingHandlers.menu={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()).css;m(e).click(function(e){m("."+a).removeClass("activeMenu"),m(this).is(".activeMenu")||m(this).addClass("activeMenu"),e.preventDefault()})}}}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("adjustUiPerDevice",[],t):e.adjustUiPerDevice=t()}("undefined"!=typeof self?self:this,function(){return function(e){}});
//# sourceMappingURL=webcustombindings.js.map