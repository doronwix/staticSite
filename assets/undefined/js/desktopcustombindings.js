!function(m){m.fn.numeric=function(e,t){"boolean"==typeof e&&(e={decimal:e}),void 0===(e=e||{}).negative&&(e.negative=!0);var n=!1===e.decimal?"":e.decimal||".",i=!0===e.negative;t="function"==typeof t?t:function(){};return this.data("numeric.decimal",n).data("numeric.negative",i).data("numeric.callback",t).keypress(m.fn.numeric.keypress).keyup(m.fn.numeric.keyup).blur(m.fn.numeric.blur)},m.fn.numeric.keypress=function(e){var t=m.data(this,"numeric.decimal"),n=m.data(this,"numeric.negative"),i=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(13==i&&"input"==this.nodeName.toLowerCase())return!0;if(13==i)return!1;var a=!1;if(e.ctrlKey&&97==i||e.ctrlKey&&65==i)return!0;if(e.ctrlKey&&120==i||e.ctrlKey&&88==i)return!0;if(e.ctrlKey&&99==i||e.ctrlKey&&67==i)return!0;if(e.ctrlKey&&122==i||e.ctrlKey&&90==i)return!0;if(e.ctrlKey&&118==i||e.ctrlKey&&86==i||e.shiftKey&&45==i)return!0;if(i<48||57<i){if(0!=this.value.indexOf("-")&&n&&45==i&&(0==this.value.length||0==m.fn.getSelectionStart(this)))return!0;t&&i==t.charCodeAt(0)&&-1!=this.value.indexOf(t)&&(a=!1),8!=i&&9!=i&&13!=i&&35!=i&&36!=i&&37!=i&&39!=i&&46!=i?a=!1:void 0!==e.charCode&&(e.keyCode==e.which&&0!=e.which?(a=!0,46==e.which&&(a=!1)):0!=e.keyCode&&0==e.charCode&&0==e.which&&(a=!0)),t&&i==t.charCodeAt(0)&&(a=-1==this.value.indexOf(t))}else a=!0;return a},m.fn.numeric.keyup=function(e){var t=this.value;if(0<t.length){var n=m.fn.getSelectionStart(this),i=m.data(this,"numeric.decimal"),a=m.data(this,"numeric.negative");if(""!=i){var s=t.indexOf(i);0==s&&(this.value="0"+t),1==s&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1)),t=this.value}for(var o=[0,1,2,3,4,5,6,7,8,9,"-",i],r=t.length,l=r-1;0<=l;l--){var u=t.charAt(l);0!=l&&"-"==u?t=t.substring(0,l)+t.substring(l+1):0!=l||a||"-"!=u||(t=t.substring(1));for(var d=!1,c=0;c<o.length;c++)if(u==o[c]){d=!0;break}d&&" "!=u||(t=t.substring(0,l)+t.substring(l+1))}var p=t.indexOf(i);if(0<p)for(l=r-1;p<l;l--){(u=t.charAt(l))==i&&(t=t.substring(0,l)+t.substring(l+1))}this.value=t,m.fn.setSelection(this,n)}},m.fn.numeric.blur=function(){var e=m.data(this,"numeric.decimal"),t=m.data(this,"numeric.callback"),n=this.value;""!=n&&(new RegExp("^\\d+$|\\d*"+e+"\\d+").exec(n)||t.apply(this))},m.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",m.fn.numeric.keypress).unbind("keyup",m.fn.numeric.keyup).unbind("blur",m.fn.numeric.blur)},m.fn.getSelectionStart=function(e){if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}try{return e.selectionStart}catch(e){return 0}},m.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t[0]),n.moveEnd("character",t[1]),n.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(e){}}}}(jQuery),define("FxAutocompleteWidget",["require","jquery","knockout","FavoriteInstrumentsManager","InstrumentsSearchModule","InstrumentsManager"],function(e){var o=e("knockout"),c=e("jquery"),p=e("FavoriteInstrumentsManager"),t=e("InstrumentsSearchModule"),m=e("InstrumentsManager");return c.widget("fx.fxautocomplete",c.ui.autocomplete,{_create:function(){var a=this.options.source;this.selectedObservable=this.options.selected,this.hideDelay=this.options.hideDelay||0,this.customCloseButton=this.options.customCloseButton||!1,this.contentMaxHeight=this.options.contentMaxHeight||-1,this.showIcons=this.options.showIcons||!1,this.isEditFavoritesView=this.options.isEditFavoritesView,this.searchResultPostBoxTopic=this.options.searchResultPostBoxTopic,this.noResultMatch={category:"",value:this.options.noResultText||"",id:-1},this.hasCategories=void 0===this.options.hasCategories||!!this.options.hasCategories,this.itemImageClassProperty=this.options.itemImageClassProperty||!1,this.itemImageClassPrefix=this.options.itemImageClassPrefix||"",this.expression=this.options.matchFromBeginning?"^":"",this.renderInstruments=void 0===this.options.renderInstruments,this.renderInstruments&&(this.hasCategories=!1,this.showIcons=!0);this.renderInstruments?(this.instrumentsSearchInstance=new t(a),this._setOption("source",function(e,t){var n=this.instrumentsSearchInstance.typingSearch(e.term);n.length||n.push(this.noResultMatch),t(n)})):this._setOption("source",function(e,t){var n=new RegExp(this.expression+c.ui.autocomplete.escapeRegex(latinizeString(e.term)),"i"),i=c.grep(o.toJS(a),function(e){var t=!1;return isStringType(e.fullText)&&(t=n.test(e.fullText)),isStringType(e.text)&&(t=t||n.test(e.text)),t});i.length||i.push(this.noResultMatch),t(i)}),this._setOption("focus",function(e){e.preventDefault()}),this._super(),this.registerEvents(),this.options.hasInitialValue&&this.selectedObservable()&&c(this.element).val(this.selectedObservable().value)},_destroy:function(){this.instrumentsSearchInstance&&(this.instrumentsSearchInstance.dispose(),this.instrumentsSearchInstance=null)},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),c(t).css("top",0),t.show().removeClass("custom-autocomplete-hidden").addClass("custom-autocomplete-visible"),this._resizeMenu(),t.position(c.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),0<this.contentMaxHeight&&(c(t).height()<this.contentMaxHeight?c(this.options.appendTo).height(c(t).height()):c(this.options.appendTo).height(this.contentMaxHeight)),c(t).animate({scrollTop:0},0)},_close:function(e){var t=this;t.menu.element.is(":visible")&&(t.menu.element.removeClass("custom-autocomplete-visible").addClass("custom-autocomplete-hidden"),setTimeout(function(){t.menu.element.hide(),t.menu.blur(),t.isNewMenu=!0,t._trigger("close",e),0<t.contentMaxHeight&&c(t.options.appendTo).height(t.contentMaxHeight)},t.hideDelay)),this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!1})},registerEvents:function(){var a=this,s=c(a.element);a.customCloseButton?a.customCloseButton.on("click",function(){s.val("").change(),a.menu.element.hide(),a._trigger("close"),this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!1})}):s.blur(function(){s.val("").change()}),a._on(a.menu.element,{menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=c(t.item).find(".icon-star-full");this.options.keepTextAfterSelect&&n.id!==this.noResultMatch.id||s.val("").change(),n.isGroup||a.selectedObservable(n),0<i.length&&c(i).toggleClass("favorite")}}),a._on(a.element,{keydown:function(e){var t=c.ui.keyCode,n=a.menu.active;switch(e.keyCode){case t.UP:(isNullOrUndefined(n)||n.hasClass("autocomplete-group"))&&a._keyEvent("previous",e);break;case t.DOWN:(isNullOrUndefined(n)||n.hasClass("autocomplete-group"))&&a._keyEvent("next",e)}},keyup:function(e){var t=c.ui.keyCode;switch(e.keyCode){case t.BACKSPACE:case t.DELETE:a.options.hideDropDownWhenNotEnoughLetters&&c(a.element).val().length<a.options.minLength&&c(a.options.appendTo).hide()}}})},options:{minLength:2},_renderMenu:function(e,t){this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!0}),this.hasCategories?this._renderItemsWithCategories(e,t):this._renderItems(e,t)},_renderItems:function(n,e){var i=this;c.each(e,function(e,t){i._renderItemData(n,t)})},_renderItemsWithCategories:function(i,a){var s=this,n=[];c.each(a,function(e,t){-1===n.indexOf(t.category)&&n.push(t.category)}),c.each(n,function(e,n){if(1!==a.length||-1!==a[0].id){var t={label:n,isGroup:!0,category:""};s._renderItemData(i,t)}c.each(a,function(e,t){t.category===n&&s._renderItemData(i,t)})})},_renderItem:function(e,t){return this.renderInstruments?this._renderInstrumentItem(e,t):this._renderOtherItem(e,t)},_renderOtherItem:function(e,t){var n=new RegExp(this.expression+"("+c.ui.autocomplete.escapeRegex(this.term)+")","gi"),i=c("<li>"),a=t.label.replace(n,"<b class='bold'>$1</b>");if(this.itemImageClassProperty&&t[this.itemImageClassProperty]){var s="list-flag "+this.itemImageClassPrefix+t[this.itemImageClassProperty];c("<i/>",{class:s}).appendTo(i)}return c("<span/>",{class:"text-holder"}).html(a).appendTo(i),this.selectedObservable()&&this.selectedObservable().id===t.id&&(i=i.addClass("selected")),i.appendTo(e)},_renderInstrumentItem:function(e,t){var n=new RegExp("("+c.ui.autocomplete.escapeRegex(this.term)+")","gi"),i=c("<li>"),a=t.label.replace(n,"<b class='bold'>$1</b>");if(t.isGroup||(a="<div class='text-holder instrument-name found-results'>"+a+'<br /><span class="category-name">'+t.category+"</span></div>"+(this.isEditFavoritesView?"":"<div class='text-holder'><span class='tick'></span></div>")),t.isGroup&&i.addClass("autocomplete-group"),-1===t.id&&i.addClass("noresults"),this.showIcons){var s=c("<div>").addClass("instr-wrapper"),o=c("<div>").addClass("instr-symbol"),r=c("<span>").addClass("icon-star-full"),l=c("<span>").addClass("default"),u=c("<i>").addClass("base currency _"+t.baseSymbolId),d=c("<i>").addClass("other currency _"+t.otherSymbolId);p.IsFavoriteInstrument(t.id)&&r.addClass("favorite"),this.showIcons&&!t.isGroup&&-1!==t.id&&(l[0].innerText=m.GetInstrumentFirstChar(t.id),a=s.append(o.addClass("instr-"+t.id).append(u.append(l)).append(d)).prop("outerHTML")+a,this.isEditFavoritesView&&(a+=r.prop("outerHTML")))}return this.selectedObservable()&&this.selectedObservable().id===t.id&&!t.isGroup&&(i=i.addClass("selected")),i.html(a).appendTo(e)}})}),define("customBindings/AutocompleteBinding",["require","jquery","knockout","FxAutocompleteWidget"],function(e){var m=e("knockout"),h=e("jquery");m.bindingHandlers.autocomplete={init:function(o,e){var t,n,r=e(),i=r.elementType,a=r.minLength,l=h("."+r.autocompleteWrapperClass),s=l.find("."+r.predefinedOptionsListClass),u=r.searchPostBoxTopic,d=r.selectPostBoxTopic;function c(){var e=h(r.appendTo).find("ul:visible").outerHeight(),t=Math.min(e,r.contentMaxHeight||180)+1;h(r.appendTo).css("height",t+"px")}function p(){var e=l.parent().find(".customized"),t=l.find(".closeButton");h(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,showIcons:r.showIcons,hasInitialValue:r.hasInitialValue,keepTextAfterSelect:r.keepTextAfterSelect,hideDropDownWhenNotEnoughLetters:r.hideDropDownWhenNotEnoughLetters,customCloseButton:t,isEditFavoritesView:r.isEditFavoritesView,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,matchFromBeginning:r.matchFromBeginning,renderInstruments:r.renderInstruments,noResultText:r.noResultText,searchResultPostBoxTopic:r.searchResultPostBoxTopic,minLength:a,open:function(){e.hide(),h(r.appendTo).show()},select:function(e,t){m.postbox.publish("search-interaction",{Instrument:{id:t.item.id}}),r.hideDropDownAfterSelect&&h(r.appendTo).hide()},close:function(){e.show()},search:function(e,t){m.postbox.publish("search",{Characters:e.target.value})}})}switch(t=r.selected.subscribe(function(e){e&&isDefinedType(e.id)&&(r.elementToFocusOnChange&&setTimeout(function(e){h(e).focus()},100,r.elementToFocusOnChange+e.id),e.hideDropDown||("input.mobile"!==i&&l.toggle(),h(r.triggerFrom).toggleClass("focus")))}),i){case"select":h(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,contentMaxHeight:r.contentMaxHeight,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,renderInstruments:r.renderInstruments,noResultText:r.noResultText,matchFromBeginning:r.matchFromBeginning,select:function(e,t){m.postbox.publish("deal-slip-search-interaction",{Instrument:{id:t.item.id}}),d&&m.postbox.publish(d,t.item.id)},search:function(e,t){m.postbox.publish("deal-slip-search",{Characters:e.target.value}),c()},open:function(){h(".ui-autocomplete").off("menufocus hover mouseover mouseenter"),s.hide(),u&&m.postbox.publish(u)},close:function(e,t){s.show(),u&&m.postbox.publish(u)},minLength:a}),l.uniqueId(),h(document).on("click."+l.attr("id"),function(e){h(e.target).closest(l).length||h(e.target).is(l)||h(e.target).is(h(r.triggerFrom))||h(e.target).is(h(r.triggerFrom).find("span"))||!l.is(":visible")||(l.hide(),h(r.triggerFrom).toggleClass("focus"))}),h(r.triggerFrom).mousedown(function(e){e.preventDefault(),l.toggle(),0===a&&h(o).fxautocomplete("instance").search(""),h(r.triggerFrom).focus().toggleClass("focus")}).focus(function(){var e,t,n,i,a,s;c(),e=h(window).height(),t=h(window).scrollTop(),n=l.outerHeight(),i=h(o).offset().top,a=h("#"+r.relativeFieldId).outerHeight(),s=l.find(".ui-autocomplete-input"),e+t<i+a+n?(l.css("bottom",a+"px"),s.appendTo(l)):(l.css("bottom",""),s.prependTo(l)),u&&m.postbox.publish(u)});break;case"input":h(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,contentMaxHeight:r.contentMaxHeight,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,renderInstruments:r.renderInstruments,noResultText:r.noResultText,matchFromBeginning:r.matchFromBeginning,minLength:r.minLength,select:function(e,t){m.postbox.publish("search-interaction",{Instrument:{id:t.item.id}})},close:function(e,t){h(r.appendTo).hide()},search:function(e,t){h(r.appendTo).show(),h(r.appendTo).closest("div:visible").find(".jspPane").css("top",0),m.postbox.publish("search",{Characters:e.target.value})},open:function(){u&&m.postbox.publish(u)}});break;case"input.mobile":p(),"function"==typeof r.source&&(n=r.source.subscribe(function(){h(o).fxautocomplete("destroy"),p()}));break;default:h(o).fxautocomplete({source:r.source,selected:r.selected})}m.utils.domNodeDisposal.addDisposeCallback(o,function(){h(document).off("click."+l.attr("id")),void 0!==h(o).fxautocomplete("instance")&&h(o).fxautocomplete("destroy"),t&&t.dispose(),n&&n.dispose()})}}}),define("customBindings/NumericField",["require","knockout","jquery"],function(e){var a=e("knockout"),s=e("jquery");a.bindingHandlers.numericField={init:function(e,t){var n=a.utils.unwrapObservable(t()),i=s.extend({negative:!0},n);s(e).numeric(i),a.utils.domNodeDisposal.addDisposeCallback(e,function(e){s(e).removeNumeric()})}}}),define("customBindings/common",["require","knockout","jquery","jquery-ui"],function(e){var t,n,i,h=e("knockout"),f=e("jquery");h.bindingHandlers.balloon={init:function(n,e){var i=h.utils.unwrapObservable(e())||{},a=f(n);a.uniqueId();var t=a.attr("id");a.attr("title")||a.attr("title","***missingTitleAttr"),"click"===i.closeEvent&&(a.on("mouseout focusout",function(e){e.stopImmediatePropagation()}),f(document).on("click.outsideBallon."+t,function(){a.data("uiTooltipOpen")&&s(a)})),"safari"===Browser.getBrowserName().toLowerCase()&&(i.tooltipClass+=" safari"),f.extend(i.position,{using:function(e,t){(f("[aria-describedby]").each(function(e,t){n!==t&&s(f(t))}),a.tooltip("open"),"click"===i.closeEvent&&a.on("tooltipopen",function(e){var t=this;f("#"+this.getAttribute("aria-describedby")).on("click",function(){s(f(t))})}),f(this).css(e),t&&t.target&&t.target.element&&f(t.target.element).hasClass("customTooltipPurpose"))?f(this).offset().top>f(t.target.element).offset().top?f(t.target.element).addClass("customTooltipPurposeBottom"):f(t.target.element).removeClass("customTooltipPurposeBottom"):f("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}});var s=function(e){isObjectType(e)&&(isFunctionType(e.removeClass)&&e.removeClass("toolTipButtonTrigered"),isFunctionType(e.tooltip)&&!isNullOrUndefined(e.data("ui-tooltip"))&&e.tooltip("close"))};a.tooltip(i,{show:!1,hide:!1,content:function(){return i.contentKey?i.resourceName?Dictionary.GetItem(i.contentKey,i.resourceName):Dictionary.GetItem(i.contentKey):f(this).attr("title")}}),"click"===i.closeEvent&&a.on("mouseenter focusin",function(){f(this).addClass("toolTipButtonTrigered")}),a.on("click.balloon",function(){a.blur().tooltip("open"),"click"===i.closeEvent&&a.on("tooltipopen",function(e){f("#"+this.getAttribute("aria-describedby")).on("click",function(){s(a)})}),i.timeout&&0<i.timeout&&(clearTimeout(a._closeTooltipTimer),a._closeTooltipTimer=setTimeout(function(e){s(e)},i.timeout,a))}),h.utils.domNodeDisposal.addDisposeCallback(n,function(e){clearTimeout(e._closeTooltipTimer),f(e).off(".balloon"),f(e).tooltip("destroy"),f(document).off("click.outsideBallon."+t)})}},h.bindingHandlers.dictionaryBinding={init:function(e,t,n,i,a){var s,o=h.utils.unwrapObservable(t()),r=n(),l=(r.prefix||"")+o+(r.suffix||""),u=r.resourceName,d=f(e);l&&(s=u?Dictionary.GetItem(l,u):Dictionary.GetItem(l),d.html(s))},update:function(e,t,n,i,a){var s,o=h.utils.unwrapObservable(t()),r=n(),l=(r.prefix||"")+o+(r.suffix||""),u=r.resourceName,d=f(e);l&&(s=u?Dictionary.GetItem(l,u):Dictionary.GetItem(l),d.html(s))}},h.bindingHandlers.hidden={update:function(e,t){var n=h.utils.unwrapObservable(t());h.bindingHandlers.visible.update(e,function(){return!n})}},h.bindingHandlers.visibility={update:function(e,t){h.utils.unwrapObservable(t())?f(e).css("visibility","visible"):f(e).css("visibility","hidden")}},h.bindingHandlers.instrumentName={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=s===Number.MAX_SAFE_INTEGER?Dictionary.GetItem("All_Instruments"):$instrumentTranslationsManager.Long(s),r=f(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)}},h.bindingHandlers.nonRtlText={update:function(e,t){var n=h.utils.unwrapObservable(t());n&&isStringType(n)&&n.isRtlText()?e.classList.remove("ltr"):e.classList.add("ltr"),e.innerHTML=n}},h.bindingHandlers.instrumentShortName={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=$instrumentTranslationsManager.Short(s),r=f(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)},update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=$instrumentTranslationsManager.Short(s),r=f(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)}},h.bindingHandlers.symbolName={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=$symbolsManager.GetTranslatedSymbolById(s);f(e).html(o)},update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=$symbolsManager.GetTranslatedSymbolById(s);f(e).html(o)}},h.bindingHandlers.numberWithCurrencySymbol={init:function(e,t){var n=h.utils.unwrapObservable(t()),i=Format.toNumberWithCurrency(n.value,n);f(e).html(i)},update:function(e,t){var n=h.utils.unwrapObservable(t()),i=Format.toNumberWithCurrency(n.value,n);f(e).html(i)}},h.bindingHandlers.roundM={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t());if(s){var o=formatRoundM(s.toString());f(e).text(o)}}},h.bindingHandlers.roundMBasedOnThreshold={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t());if(s){var o=formatRoundMBasedOnThreshold(s.toString());f(e).text(o)}}},h.bindingHandlers.roundK={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t());if(s){var o=formatNumber(s.toString(),"K");f(e).text(o)}}},h.bindingHandlers.kAmount={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t());if(s){var o=Format.toKAmount(s.toString(),"K");f(e).text(o)}}},h.bindingHandlers.amount={init:t=function(e,t){var n=h.utils.unwrapObservable(t()),i=f(e).is("input"),a="NA"!==Format.toAmount(n)?Format.toAmount(n):n;i?f(e).val(a):f(e).text(a)},update:t},h.bindingHandlers.roundAmount={init:n=function(e,t){var n=h.utils.unwrapObservable(t()),i=f(e).is("input"),a=n;""!==n&&"NA"!==n&&(a=parseFloat(n),a=isNaN(a)?"":Math.ceil(Math.abs(a))),i?f(e).val(a):f(e).text(a)},update:n},h.bindingHandlers.limitAmount={init:i=function(e,t){var n=h.utils.unwrapObservable(t()),i=f(e).is("input"),a=Format.toAmount(n);"NA"===a&&(a=0),i?f(e).val(a):f(e).text(formatNumberWithThousandsSeparator(a))},update:i},h.bindingHandlers.toHumanReadableNumericFormat={init:function(e,t){var n=h.utils.unwrapObservable(t());f(e).text(isEmptyValue(n)?"":Format.toFixedAmount(n))},update:function(e,t){var n=h.utils.unwrapObservable(t());f(e).text(isEmptyValue(n)?"":Format.toFixedAmount(n))}},h.bindingHandlers.round={update:function(e,t){var n=h.utils.unwrapObservable(t()),i=0;isEmptyValue(n)||(i=Format.toFixedAmount(n)),f(e).text(i)}},h.bindingHandlers.percentage={init:function(e,t){var n=h.utils.unwrapObservable(t());f(e).is("input")&&n?f(e).val(Format.toPercent(n)):f(e).text(Format.toPercent(n))},update:function(e,t){var n=h.utils.unwrapObservable(t());f(e).is("input")&&n?f(e).val(Format.toPercent(n)):f(e).text(Format.toPercent(n))}},h.bindingHandlers.smallFont={update:function(e,t,n){var i=h.utils.unwrapObservable(t()),a=n.get("smallFontThreshold")||5;i&&((n.get("roundM")?formatRoundM(i.toString()):i.toString()).length>a?f(e).addClass("small-font"):f(e).removeClass("small-font"))}},h.bindingHandlers.dateFormatShortDayAndMonth={update:function(e,t){var n=h.utils.unwrapObservable(t()),i=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractDate()),a=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractTime()),s=i.day+"/"+i.month.replace(/^0+/,"")+" "+a.hour+":"+a.min;f(e).text(s)}},h.bindingHandlers.dateFormatShortDayMonthYear={update:function(e,t){var n=h.utils.unwrapObservable(t()),i=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractDate()),a=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractTime()),s=i.day+"/"+i.month+"/"+i.year.substr(2,2)+" "+a.hour+":"+a.min;f(e).text(s)}},h.bindingHandlers.dateFormatLongDateWithTime={update:function(e,t){var n=h.utils.unwrapObservable(t()),i=str2Date(n,"d/m/Y H:M").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});f(e).text(i)}},h.bindingHandlers.addDotInRange={init:function(o,e,t,n,r){var i,a,l,s=e();a=s.subscribe(function(e){l=e},null,"beforeChange"),i=s.subscribe(function(e){if(mobile.check.s2_default&&e&&-1==e.indexOf(".")&&!(5<=e.length)&&"NA"!=e&&(!l||l.indexOf(".")!=l.length-1||e!=l.substring(0,l.length-1))){for(var t=[],n=f(o).attr("data-range").split(","),i=0;i<n.length;i++){var a=n[i];a&&a in r.$data&&t.push(r.$data[a])}if(0<t.length){var s=Format.addDotInRange(this.target(),t,l);this.target(s)}}}),h.utils.domNodeDisposal.addDisposeCallback(o,function(){a&&(a.dispose(),a=null),i&&(i.dispose(),i=null),o=null})}},h.bindingHandlers.clearQuoteColor={update:function(e,t,n,i,a){clearTimeout(e.clearQuoteColorTimer),e.clearQuoteColorTimer=setTimeout(function(e){f(e).removeClass("green red up down")},1e3,e)}},h.bindingHandlers.timeComponent={update:function(e,t,n){var i=(h.utils.unwrapObservable(t())||"").split(" ")[1];i&&f(e).html(i)}},h.bindingHandlers.formattedText={update:function(e,t,n,i,a){var s,o,r="originalFormatText",l=f(e),u=n();if(l.attr(r)?o=l.attr(r):(o=u.contentKey?Dictionary.GetItem(u.contentKey,u.resourceName):u.encodeHTML?l.html():l.text(),l.attr(r,o)),s=u.formatPattern?o.replace(u.formatPattern,h.utils.unwrapObservable(t())):String.format(o,h.utils.unwrapObservable(t())),u.name&&h.postbox.publish(u.name+"-text-formatted"),isDefinedType(u.useAttr))return l.attr(u.useAttr,s),void l.html("");u.encodeHTML?(l.children().each(function(e,t){h.removeNode(t)}),l.html(s),h.applyBindingsToDescendants(a,e)):l.text(s)}},h.bindingHandlers.injectTemplate={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,a){for(var s=f(e),o=n(),r=o.encodeHTML?s.html():s.text(),l=r,u=h.utils.unwrapObservable(t()),d=0;d<u.length;d++){var c=new RegExp("\\{%"+d+"%\\}","gm");l=r.replace(c,"\x3c!-- ko template: { name: '"+u[d]+"' } --\x3e\x3c!-- /ko --\x3e")}o.encodeHTML?(s.children().each(function(e,t){h.removeNode(t)}),s.html(l),h.applyBindingsToDescendants(a,e)):s.text(l)}},h.bindingHandlers.showDate={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t())||{},o=f(e),r={value:"",date:!0,time:{hour:!1,min:!1,sec:!1}},l="";if(isPrimitiveType(s))r.value=s;else if(isDateType(s)){var u=new Date(s);r.value=u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()}else r=f.extend(r,s);if(isEmpty(r.value))o.html("");else{var d=SplitDateTime(r.value);r.date&&(l+=d.date),!1!==r.time&&(!0===r.time?l+=" "+d.time:(r.time.hour&&(l+=" "+d.hour),r.time.min&&(l+=":"+d.min),r.time.sec&&(l+=":"+d.sec))),o.html(l)}},update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t())||{},o=f(e),r={value:"",date:!0,time:{hour:!1,min:!1,sec:!1}},l="";if(isPrimitiveType(s))r.value=s;else if(isDateType(s)){var u=new Date(s);r.value=u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()}else r=f.extend(r,s);if(isEmpty(r.value))o.html("");else{var d=SplitDateTime(r.value);r.date&&(l+=d.date),!1!==r.time&&(!0===r.time?l+=" "+d.time:(r.time.hour&&(l+=" "+d.hour),r.time.min&&(l+=":"+d.min),r.time.sec&&(l+=":"+d.sec))),o.html(l)}}},h.bindingHandlers.valueDateText={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t())||{},o=f(e),r=(s.valueDate.isValueDateEmpty?Dictionary.GetItem("Daily")+" ":"")+(isEmptyValue(s.valueDate.date)?"":SplitDateTime(s.valueDate.date).date+(s.showHour?" "+SplitDateTime(s.valueDate.date).time:""));o.html(r)}},h.bindingHandlers.showFwPips={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=toNumeric(s).toFixed(1);0<=o&&(o="+"+o),f(e).html(o)},update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=toNumeric(s).toFixed(1);0<=o&&(o="+"+o),f(e).html(o)}},h.bindingHandlers.trendFromSignalSign={init:function(e,t,n){var i,a,s=f(e),o=n(),r=isNullOrUndefined(o.pre)?"(":o.pre,l=isNullOrUndefined(o.post)?")":o.post,u=toNumeric(h.utils.unwrapObservable(t()));"NA"!==toNumeric(u)?s.text(r+(0===(i=u)?"=":0<(a=i)?"+"+a:"-"+a)+l):s.text("")}},h.bindingHandlers.imageFromSignalSign={init:function(e,t){var n=h.utils.unwrapObservable(t()),i=f(e);switch(n){case eSignalTrendsValues.StrongSell:i.addClass(eSignalTrendsImageClasses.South);break;case eSignalTrendsValues.Sell:i.addClass(eSignalTrendsImageClasses.SouthEast);break;case eSignalTrendsValues.Neutral:i.addClass(eSignalTrendsImageClasses.East);break;case eSignalTrendsValues.Buy:i.addClass(eSignalTrendsImageClasses.NorthEast);break;case eSignalTrendsValues.StrongBuy:i.addClass(eSignalTrendsImageClasses.North);break;default:i.addClass(eSignalTrendsImageClasses.None)}}},h.bindingHandlers.styleFromSignalSign={init:function(e,t){var n=h.utils.unwrapObservable(t()),i=f(e);switch(n){case eSignalTrendsValues.Buy:case eSignalTrendsValues.StrongBuy:i.addClass(eSignalTrendsColorClasses.Green);break;case eSignalTrendsValues.Sell:case eSignalTrendsValues.StrongSell:i.addClass(eSignalTrendsColorClasses.Red);break;default:i.addClass(eSignalTrendsColorClasses.Neutral)}}},h.bindingHandlers.toppedPercentage={update:function(e,t){var n=h.utils.unwrapObservable(t()),i=0;isEmptyValue(n)||(i=100<n?">100%":Format.toPercent(n)),f(e).text(i)}},h.bindingHandlers.toFixed={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(s);if(r){var l=Math.pow(10,o),u=Math.round(r*l)/l;isNaN(u)?f(e).text(""):f(e).text(u)}},update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(s);if(r){var l=Math.pow(10,o),u=Math.round(r*l)/l;isNaN(u)?f(e).text(""):f(e).text(u)}}},h.bindingHandlers.toFixedAmount={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(s)||0;if(!isNaN(r)){var l=Math.pow(10,o),u=Math.round(r*l)/l;f(e).text(Format.toFixedAmount(u))}},update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(s)||0;if(!isNaN(r)){var l=Math.pow(10,o),u=Math.round(r*l)/l;f(e).text(Format.toFixedAmount(u))}}},h.bindingHandlers.toFixedAmountWithoutRounding={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(s)||0;if(!isNaN(r)){if(0<o){var l=Math.pow(10,o);r=Math.round(r*l)/l}f(e).text(Format.toNumberWithThousandsSeparator(r))}},update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(s)||0;if(!isNaN(r)){if(0<o){var l=Math.pow(10,o);r=Math.round(r*l)/l}f(e).text(Format.toNumberWithThousandsSeparator(r))}}},h.bindingHandlers.iframeElement={init:function(e,t){var n=f(e)[0].contentWindow;t()(n)}},h.bindingHandlers.logger={update:function(e,t,n){var i=h.utils.domData.get(e,"_ko_logger")||0,a=h.toJS(t()||n());h.utils.domData.set(e,"_ko_logger",++i),window.console&&console.log&&console.log(i,e,a)}},h.bindingHandlers.htmlToString={update:function(e,t){f(e).text(f("<div>"+t()+"</div>").text())}},h.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},h.virtualElements.allowedBindings.stopBinding=!0,h.bindingHandlers.isProcessing={init:function(e){"DIV"===e.tagName&&f(e).hasClass("button")||(e.initialText=f(e).text())},update:function(e,t){var n=h.unwrap(t());n.switchText&&n.showProcessIcon?f(e).text(Dictionary.GetItem("risk_processing")):f(e).text(e.initialText),n.showProcessIcon?f(e).addClass("js_processing"):f(e).removeClass("js_processing")}},h.bindingHandlers.progressBar={init:function(e,t){var n=h.utils.unwrapObservable(t()),i=h.utils.unwrapObservable(n.minimumValue),a=h.utils.unwrapObservable(n.maximumValue),s=h.utils.unwrapObservable(n.currentValue),o=h.utils.unwrapObservable(n.currencyId),r=toNumeric(s/(a-i)*100),l=n.simpleProgressBar||!1;if(r=Math.min(r,100),l){var u=f("<div>").addClass("current-value").css({width:r+"%"});f(e).append(u)}else{f(e).append(f("<span>").addClass("minimum-value direction-ltr").html(Format.toNumberWithCurrency(i,{maximumFractionDigits:0,currencyId:o})));var d=f("<div>").addClass("cash-progress-bar"),c=f("<div>").addClass("current-value").css({width:r+"%"}),p=f("<div>").addClass("bubble direction-ltr").html(Format.toNumberWithCurrency(s,{currencyId:o}));85<r&&p.addClass("reversed"),c.append(p),d.append(c),f(e).append(d),f(e).append(f("<span>").addClass("maximum-value direction-ltr").html(Format.toNumberWithCurrency(a,{currencyId:o}))),f(e).find(".minimum-value").width(f(e).find(".minimum-value").width()),f(e).find(".maximum-value").width(f(e).find(".maximum-value").width())}},update:function(e,t){var n=h.utils.unwrapObservable(t()),i=toNumeric(h.utils.unwrapObservable(n.minimumValue)),a=toNumeric(h.utils.unwrapObservable(n.maximumValue)),s=toNumeric(h.utils.unwrapObservable(n.currentValue)),o=h.utils.unwrapObservable(n.currencyId),r=toNumeric(s/(a-i)*100);r=Math.min(r,100),f(e).find(".minimum-value").html(Format.toNumberWithCurrency(i,{maximumFractionDigits:0,currencyId:o})),f(e).find(".maximum-value").html(Format.toNumberWithCurrency(a,{currencyId:o})),f(e).find(".current-value").css({width:r+"%"}),f(e).find(".bubble").html(Format.toNumberWithCurrency(s,{currencyId:o})),85<r&&f(e).find(".bubble").addClass("reversed"),f(e).find(".minimum-value, .maximum-value").addClass("text-positioned")}},h.bindingHandlers.html5InputsProxy={init:function(t,e){var n=e(),i=h.utils.unwrapObservable(n),a=n.subscribe(function(e){e!==t.value&&(t.value=e)});function s(e){t.validity.valid&&!t.validity.badInput&&n()!==t.value&&n(t.value)}t.value=i,t.addEventListener("keyup",s),h.utils.domNodeDisposal.addDisposeCallback(t,function(e){a&&(a.dispose(),a=null),e.removeEventListener("keyup",s,!1)})}},h.bindingHandlers.ratesClasses={init:function(t,e){var n=h.utils.unwrapObservable(e())||{};if(!n.disabled){n.rateObservable.extend({notify:"always"}),n.lastClass=h.observable("");var i=n.rateObservable.subscribe(function(e){if(isFunctionType(n.showInput)&&n.showInput())return this.lastClass(""),void h.applyBindingsToNode(t,{css:n.lastClass});switch(e){case eQuoteStates.Up:this.lastClass(this.lastClass()===this.up[0]?this.up[1]:this.up[0]);break;case eQuoteStates.Down:this.lastClass(this.lastClass()===this.down[0]?this.down[1]:this.down[0]);break;case eQuoteStates.NotChanged:this.lastClass(this.notChanged);break;default:this.lastClass("")}},n);h.applyBindingsToNode(t,{css:n.lastClass}),h.utils.domNodeDisposal.addDisposeCallback(t,function(){i&&(i.dispose(),i=null)})}}},h.bindingHandlers.attrIf={update:function(i,a,s){var e=h.utils.unwrapObservable(a())||{};h.utils.objectForEach(e,function(e,t){var n=h.utils.unwrapObservable(t);null!=n&&""!==n&&h.bindingHandlers.attr.update(i,a,s)})}},h.bindingHandlers["data-automation"]={init:function(e,t){var n=h.utils.unwrapObservable(t());n&&(e.setAttribute("data-automation",n),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){e.removeAttribute("data-automation")}))}},h.bindingHandlers.progressBarAutoResize={update:function(o){function e(){setTimeout(function(){var e=f(".progress-steps ul"),t=e.innerWidth(),n=e.find("li:first-child div").innerWidth()/2+20,i=e.find("li:visible:last div").innerWidth()/2+20,a=t-(n+i)+"px",s=LanguageHelper.IsRtlLanguage()?"0 "+n+"px 0 "+i+"px":"0 "+i+"px 0 "+n+"px";f(o).css({width:a,margin:s})},200)}e(),f(window).on("resize.progressBarAutoResize",e),h.utils.domNodeDisposal.addDisposeCallback(o,function(){f(window).off("resize.progressBarAutoResize",e)})}},h.bindingHandlers.placeholder={init:function(a,e){var t=h.unwrap(e()),s=t.onFocus||"",o=t.onBlur||"",n=function(e,t){var n=e.ownerDocument;if("activeElement"in n){var i;try{i=n.activeElement}catch(e){i=n.body}t=i===e}a.setAttribute("placeholder",t?s:o)},i=n.bind(null,a,!0),r=n.bind(null,a,!1);h.utils.registerEventHandler(a,"focus",i),h.utils.registerEventHandler(a,"blur",r),r()}},h.bindingHandlers.cssIfValue={init:function(e,t,n,i,a){var s=t()||{},o=s.classElementId||e.id,r=s.valueElementId||e.id,l=s.className,u=document.getElementById(o)||e,d=document.getElementById(r)||e,c=h.observable(!1);if(!isEmptyValue(l)){c(!isEmptyValue(d.value)),f(d).on("change keyup",m);var p={};p[l]=c,h.applyBindingsToNode(u,{css:p},a),h.utils.domNodeDisposal.addDisposeCallback(d,function(e){f(e).off("change keyup",m),c=null})}function m(){c(!isEmptyValue(d.value))}}},h.bindingHandlers.scrollHere={update:function(e,t){if(h.utils.unwrapObservable(t())){var n=e.getBoundingClientRect();n.top<0&&window.scrollBy(0,n.top)}}},h.bindingHandlers.riseOnScroll={update:function(n,e){if("fixed"===f(n).css("position")){var t=e()||{},i=t.minTop,a=t.initialTop;f(window).scroll(function(){var e=f(window).scrollTop(),t=a-e;t<=i&&(t=i),f(n).css("top",t+"px")})}}},h.bindingHandlers.setFocusToId={init:function(e,t){f(e).on("click",function(){var e="#"+t();f(e).focus()})}},h.bindingHandlers.specificUploadButton={init:function(e){!Browser.isChrome()&&Browser.isChromeOnIOS()||e.parentElement.classList.add("specific")},update:function(e,t){!Browser.isChrome()&&Browser.isChromeOnIOS()||(h.utils.unwrapObservable(t())?e.classList.add("enabled"):e.classList.remove("enabled"))}};var o=function(e){var t=f(e).find(".right-arrow"),n=f(e).find(".left-arrow"),i=f(e).find(".arrow-navigation-list"),a=f(e),s="hidden",o=".list-item";function r(){return i.scrollLeft()<=0}function l(){var e=i.scrollLeft(),t=i.width();return i.get(0).scrollWidth-e-t==0}function u(){var e=a.width();e&&i.width(e)}function d(){var e=i.find(o),t=0;return e.each(function(){t+=f(this).width()}),t}return{isScrollRightEnd:l,setArrowsVisibleOnInit:function(){a.width()<d()?(n.removeClass(s),t.removeClass(s),u()):(t.addClass(s),n.addClass(s))},setArrowsVisibleOnResize:function(){a.width()<=d()?(l()?t.addClass(s):t.removeClass(s),r()?n.addClass(s):n.removeClass(s)):(t.addClass(s),n.addClass(s))},setListWidth:u,scrollToActiveItem:function(){i.find(o).each(function(){var e=f(this).find(".active")[0];isNullOrUndefined(e)||i.animate({scrollLeft:f(this).position().left},300,function(){l()?t.addClass(s):r()&&n.addClass(s)})})},registerEvents:function(){t.on("click",function(){var e=i.scrollLeft();i.animate({scrollLeft:e+100},300,function(){l()&&t.addClass(s),n.removeClass(s)})}),n.on("click",function(){var e=i.scrollLeft();i.animate({scrollLeft:e-100},300,function(){t.removeClass(s),r()&&n.addClass(s)})})},unregisterEvents:function(){n.off("click"),t.off("click")},isListWidthEmpty:function(){var e=a.width(),t=d();return 0===e&&0===t}}};h.bindingHandlers.arrowList={init:function(e,t,n,i){var a,s=new o(e);i.Data.itemsRendered=h.observable(!1),i.Data.itemsRendered.subscribe(function(e){e&&(a=setInterval(function(){s.isListWidthEmpty()||(s.setArrowsVisibleOnInit(),s.scrollToActiveItem(),i.Data.itemsRendered(!1),clearInterval(a),setTimeout(function(){s.setArrowsVisibleOnInit(),s.scrollToActiveItem()},1e3))}))}),s.registerEvents(),f(window).resize(function(){s.setListWidth(),s.setArrowsVisibleOnResize()}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){s.unregisterEvents(),clearInterval(a)})}},h.bindingHandlers.renderArrowListItem={update:function(e,t){var n=h.unwrap(t()),i=n.length;n.index()===i-1&&n.itemsRendered(!0)}},h.bindingHandlers.stickTextToTop={update:function(e,t){var n=getComputedStyle(e).fontSize,i=t();h.unwrap(i)||(n=parseInt(n.slice(0,n.length-2)),0<f(e).innerHeight()&&(e.style.marginTop=-(Math.round(f(e).innerHeight()/n)-1)*Math.round(n/2)+"px"))}},h.bindingHandlers.electronicSignature={init:function(n,e,t,i){var a=function(){n.setAttribute("width",n.parentElement.clientWidth),n.setAttribute("height",n.parentElement.clientHeight)},s=function(){var e=n.getAttribute("width"),t=n.getAttribute("height");e==n.parentElement.clientWidth&&t==n.parentElement.clientHeight||(a(),i.ClearSignature())};a(),i.InitCanvas(n),window.addEventListener("resize",s),h.utils.domNodeDisposal.addDisposeCallback(n,function(){window.removeEventListener("resize",s)})}},h.bindingHandlers.elementToImage={init:function(e,t,n,i){i.setPrintSettings(e,function(){return 0!==window.pageYOffset?-window.pageYOffset:0})}},h.bindingHandlers.showIntrumentNotAvailable={init:function(e,t){var n=h.utils.unwrapObservable(t()),i=f(e);n.isAvailable?i.addClass("instrument-available"):i.addClass("instrument-unavailable")},update:function(e,t){var n=h.utils.unwrapObservable(t()),i=n.instrData,a=f(e),s=f("."+n.dealContainerClass),o=f(".instrument-unavailable-wrapper"),r="deal-container-instrument-notavailable",l="instrument-available",u="instrument-unavailable";i.isAvailable?i.isChanged?(a.css({height:"auto"}),o.show(),a.addClass(l),a.removeClass(u),s.removeClass(r)):(a.css({height:a.height()+"px"}),o.hide()):(o.show(),s.addClass(r),a.addClass(u),a.removeClass(l))}}}),define("customBindings/web",["require","knockout","jquery","jquery-ui"],function(e){var h=e("knockout"),m=e("jquery");h.bindingHandlers.showSpinner={update:function(e,t,n,i,a){m(e).css("position","relative"),h.utils.unwrapObservable(t())?Spinner.show(e):Spinner.hide()}},h.bindingHandlers.setDialogPos={init:function(e){h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".setDialogPos")})},update:function(e,t){var n=h.utils.unwrapObservable(t()),i={dialogPosition:null,parentIsCollapsed:null,parentTopElement:null,topOffset:0,parentLeftElement:null,leftOffset:0,RTLoffset:0};m.extend(i,n),m(e).on("click.setDialogPos",function(){var e=-1,t=-1;i.parentIsCollapsed()||(0<m(i.parentTopElement).length&&(e=m(i.parentTopElement).offset().top-m("#TradingsControls").offset().top+i.topOffset),0<m(i.parentLeftElement).length&&(t=m(i.parentLeftElement).offset().left-m("#TradingsControls").offset().left+i.leftOffset));var n={top:e,left:t,offset:i.RTLoffset};i.dialogPosition(n)})}},h.bindingHandlers.dialog={init:function(e,t,n){var i=n(),a=h.utils.unwrapObservable(i.dialogInstance),s=h.utils.unwrapObservable(t())||{},o=h.utils.unwrapObservable(a.element)||!1,r=m(o).parent(),l=m(e).find(".dialogContainer"),u=eAppEvents.formChangedEvent+"."+a.name;m(document).on(u,function(){m.data(e,"ui-dialog")&&l.dialog("option","position",s.position||{})}),h.utils.extend(s,{open:function(){},beforeClose:function(e,t){if(a){if(e.keyCode===m.ui.keyCode.ESCAPE)return e.preventDefault(),e.stopPropagation(),setTimeout(function(){a.close()},10),!1;a.close()}}}),l.append(o),l.dialog(s);var d=l.data("uiDialog");m(e).data("dialogElementId",d.element.prop("id")),d._title=function(e){if("function"==typeof this.options.title){var t=this.options.title();t.on("mousedown",function(e){e.stopPropagation()}),e.append(t)}else e.html(this.options.title)},h.utils.domNodeDisposal.addDisposeCallback(e,function(){m(document).off(u),r.append(o),r=o=null,l.dialog("destroy"),e=a=l=null})},update:function(e,t,n){var i=n(),a=h.utils.unwrapObservable(i.dialogInstance),s=h.utils.unwrapObservable(a.openTimeout),o=h.utils.unwrapObservable(a.getOptions())||{},r=h.utils.unwrapObservable(a.element)||!1,l=LanguageHelper.IsRtlLanguage(),u=m("#"+m(e).data("dialogElementId")),d=u.parent();o.open=function(){var e;if(m(a.element).css("visibility","visible"),isDefinedType(o.appendTo)||(o.appendTo="body",isDefinedType(o.useDialogPosition)||isDefinedType(o.useDefaultPosition)||(o.useDialogPosition=!0)),o.useDialogPosition?function(){if(o.left&&0<o.left){var e=o.left;l&&(e=e-d.width()+o.offset),d.position({my:"left+"+e+" top+"+(o.top+window.pageYOffset),at:"left top",of:o.appendTo})}m("body > .ui-widget-overlay").css("position","fixed")}():o.useDefaultPosition?(d.draggable({containment:o.appendTo}),d.position({my:"center",at:"center",of:o.appendTo})):(e=d.height()>m(window).height(),d.position({my:"top",at:"top",of:o.appendTo}),!o.appendTo||e?(d.draggable({containment:"document"}),m("body > .ui-widget-overlay").css("position","fixed")):(d.draggable({containment:o.appendTo}),m(".ui-widget-overlay").css("position","absolute"))),0<=d.position().top||(d.css("top","0"),d.draggable({containment:"document"})),o.customTitle){u.dialog("option","title",function(e,t){return m(e).find("#"+t)}.bind(null,r,o.customTitle));var t=u.dialog("option","beforeClose");u.dialog("option","beforeClose",function(){m("#"+o.customTitle).remove(),t.apply(null,arguments)})}u[0].contains(document.activeElement)||m("select:visible:first, div:visible:first",u).focus()},setTimeout(function(e,t){e.hasClass("ui-dialog-content")&&(e.dialog("option",t),e.dialog("open"))},s,u,o)}},h.bindingHandlers.componentLoaded={init:function(e,t,n,i,a){h.postbox.publish(t().appEvent,t().params)}},h.bindingHandlers.alternateRows={init:function(e,t,n,i,a){var s=n(),o=s.evenClass,r=s.oddClass,l=s.everyRows||1,u=m(e),d=[];h.utils.unwrapObservable(t()),u.children("*").addClass(r).removeClass(o);for(var c=l;0<c;c--){var p=2*l+"n";c<l&&(p+="-"+(l-c)),d.push(":nth-child("+p+")")}u.children(d.join(",")).addClass(o).removeClass(r)},update:function(e,t,n){var i=n(),a=i.evenClass,s=i.oddClass,o=i.everyRows||1,r=m(e),l=[];h.utils.unwrapObservable(t()),r.children("*").addClass(s).removeClass(a);for(var u=o;0<u;u--){var d=2*o+"n";u<o&&(d+="-"+(o-u)),l.push(":nth-child("+d+")")}r.children(l.join(",")).addClass(a).removeClass(s)}},h.bindingHandlers.datepicker={init:function(e,n,t){var i=t().datepickeroptions||{};m.extend(i,{dateFormat:"dd/mm/yy",changeMonth:!0,changeYear:!0}),m(e).datepicker(i),m(e).on("change.datepicker",function(){var e=n(),t=m(this).datepicker("getDate");e(m.datepicker.formatDate("dd/mm/yy",t)),m(this).blur()}),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".datepicker"),m(e).datepicker("destroy")})},update:function(e,t){var n=h.utils.unwrapObservable(t()),i=m.datepicker.parseDate("dd/mm/yy",n);i-m(e).datepicker("getDate")!=0&&m(e).datepicker("setDate",i)}},h.bindingHandlers.datepickerbutton={init:function(e,n,t){var i=t(),a=i.field||"",s=i.customClass||"",o=i.customLabel||"",r=null,l="dd/mm/yy",u=i.datepickeroptions||{};if(isEmptyValue(a)||(r=document.getElementById(a)),r&&!m(r).hasClass("hasDatepicker")){var d=new Date(0),c={beforeShow:function(){return 500<=new Date-d},onClose:function(){d=new Date}};u=m.extend({changeMonth:!0,changeYear:!0,dateFormat:l,firstDay:1},c,u),m(r).datepicker(u),m(r).datepicker("option","onSelect",function(){var e=n(),t=m(this).datepicker("getDate");e(m.datepicker.formatDate(l,t)),m(this).datepicker("hide")}),m(r).datepicker("option",{onChangeMonthYear:function(e,t,n){p(n.input,m("#ui-datepicker-div"))},beforeShow:function(e,t){p(t.input,m("#ui-datepicker-div"))},orientation:"bottom"}),m(e).on("click.datepickerbutton",function(){m(r).datepicker("widget").is(":visible")||m(r).datepicker("show")}),setTimeout(function(e,t){p(e,t)},0,e,m("#ui-datepicker-div")),m(r).on("change.datepickerbutton",function(){var e=n(),t=m(this).datepicker("getDate");e(m.datepicker.formatDate(l,t)),m(this).blur()}),h.utils.domNodeDisposal.addDisposeCallback(r,function(e){m(e).off(".datepickerbutton"),m(r).off(".datepickerbutton"),m(r).datepicker("destroy"),r=null})}function p(e,t){t.removeClass("positioned"),setTimeout(function(e,t){s&&0===m("#ui-datepicker-div .content-wrapper").length&&t.addClass(s).wrapInner(m("<div>").addClass("content-wrapper")),o&&0===m("#ui-datepicker-div label").length&&t.prepend(m("<label>").html(o)),t.wrapInner(m("<div>").addClass("wrapper")),t.addClass("positioned"),m(e).offset().top>=t.offset().top?(t.removeClass("above-input below-input").addClass("above-input"),m("#ui-datepicker-div .wrapper").removeClass("above-input below-input").addClass("above-input")):(t.removeClass("above-input below-input").addClass("below-input"),m("#ui-datepicker-div .wrapper").removeClass("above-input below-input").addClass("below-input"))},0,e,t)}},update:function(e,t,n){var i=n(),a=i.field||"",s=null,o=i.datepickeroptions||{};if(isEmptyValue(a)||(s=document.getElementById(a)),m(s).datepicker(o),s&&m(s).hasClass("hasDatepicker")){var r=h.utils.unwrapObservable(t()),l=m(s).datepicker("getDate"),u=r&&m.datepicker.parseDate("dd/mm/yy",r);u-l!=0&&m(s).datepicker("setDate",u)}}},h.bindingHandlers.slideUp={init:function(e,t){var n=h.utils.unwrapObservable(t());m(e).toggle(!n)},update:function(e,t,n){var i=h.utils.unwrapObservable(t()),a=n(),s=a.duration||"slow",o="function"==typeof a.slideUpCompleted?a.slideUpCompleted:function(){},r=h.utils.unwrapObservable(s);r?!0===r&&(r=400):r=0,i?m(e).slideUp(r,o):m(e).slideDown(r,o)}},h.bindingHandlers.loadBannerHtml={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()),o={html:"",applyKoBindings:!1,loadedHtmlHandler:function(e){return e},htmlAttachedHandler:function(){}};m.extend(o,s);var r=o.loadedHtmlHandler(o.html);if(m(e).html(r),o.htmlAttachedHandler(),o.applyKoBindings){var l=m(e).children()[0];h.applyBindings($viewModelsManager,l)}}},h.bindingHandlers.windowPopupOpen={init:function(e){m(e).on("click.windowPopup",function(e){return window.open(m(this).attr("href"),"tsHelp","height=710px,width=1000px,scrollbars=yes,resizable=1,location=no,center=yes,titlebar=no"),!1}),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".windowPopup")})}},h.bindingHandlers.loadHtml={update:function(e,t,n,i,a){var s=m(e),o=h.utils.unwrapObservable(t()),r={url:null,applyKoBindings:!1,loadedHtmlHandler:function(e){return e},htmlAttachedHandler:function(){},noCache:!1,isStaticFile:!1};m.extend(r,o),r.noCache&&(r.url+=-1<r.url.indexOf("?")?"&":"?",r.url+=(new Date).getTime()),!0===r.isStaticFile?r.url=UrlResolver.combine(UrlResolver.getStaticFilePath(),r.url):r.url=UrlResolver.combine(UrlResolver.getApplicationRelativePath(),r.url),m.get(r.url,function(e){if(isNullOrUndefined(r)||isNullOrUndefined(s))return!1;var t=r.loadedHtmlHandler(e);if(s.html(t),r.htmlAttachedHandler(),r.applyKoBindings){var n=s.children()[0];h.applyBindings($viewModelsManager,n)}}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){s=r=null})}},h.bindingHandlers.appendElementWhen={update:function(e,t,n,i,a){var s,o,r=h.unwrap(t()),l=h.unwrap(r.trigger());(s=m((r=r||{}).elementSelector)).length&&(r.originalCssClass&&s.toggleClass(r.originalCssClass,!l),r.appendedCssClass&&s.toggleClass(r.appendedCssClass,l),l?(o=s.parent(),(s=s.detach()).appendTo(e),s.data("originalParent",o)):(o=s.data("originalParent"))&&o.length&&(s.removeData("originalParent"),(s=s.detach()).appendTo(o)))}},h.bindingHandlers.toggle={init:function(e,t,n,i,a){var s=t()||{},o=m(e),r=m("#"+s.targetElement),l=s.observable.subscribe(function(e){e?(o.removeClass(s.offClass).addClass(s.onClass),r.show()):(o.removeClass(s.onClass).addClass(s.offClass),r.hide())});h.utils.domNodeDisposal.addDisposeCallback(e,function(e){l&&(l.dispose(),l=null),o=r=null})}},h.bindingHandlers.timedToggle={init:function(t,e){var n,i=e()||{},a=i.observable.subscribe(function(e){isDefinedType(n)||(n=e),e!==n&&n&&(m(t).removeClass(i.defaultClass).addClass(i.timedClass),n=e,setTimeout(function(e){m(e).removeClass(i.timedClass).addClass(i.defaultClass)},i.timeout,t))});h.utils.domNodeDisposal.addDisposeCallback(t,function(e){a&&(a.dispose(),a=null),i=null})}},h.bindingHandlers.trigger={init:function(e,t){var n=h.utils.unwrapObservable(t());if(!isFunctionType(n))throw new TypeError("Please provide a function to execute when the element is triggered!");m(e).on("click.trigger",n).on("keypress.trigger",function(e){(e.which==cKeyCode.CtrlEnter||e.which==cKeyCode.Enter)&&n()}),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".trigger")})}},h.bindingHandlers.keypressTrigger={init:function(e,t){var n=h.utils.unwrapObservable(t());if(!isFunctionType(n))throw new TypeError("Please provide a function to execute when the element is triggered!");m(e).on("keypress.keypressTrigger",function(e){(e.which==cKeyCode.CtrlEnter||e.which==cKeyCode.Enter)&&n()}),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".keypressTrigger")})}},h.bindingHandlers.draggable={init:function(e,t,n,i,a){var s=t()||{},o=n(),r={scroll:!1,containment:m(".alert-overlay")};o&&o.dragStopAutoHeight&&(r.stop=function(){e.style&&e.style.height&&"auto"!==e.style.height&&(e.style.height="auto")}),r=m.extend(r,s),m(e).draggable(r),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).draggable("destroy")})}},h.bindingHandlers.toolTip={init:function(e){var t=LanguageHelper.IsRtlLanguage();m(e).tooltip({autoShow:!1,tooltipClass:"file_filter",position:{my:t?"right-40 center":"left+20 center",at:"right center",using:function(e,t){m(this).css(e),m("<div>").addClass("arrow").appendTo(this)}}}),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).tooltip("destroy")})}},h.bindingHandlers.fadeVisible={init:function(e,t){var n=h.unwrap(t());m(e).toggle(n)},update:function(e,t){h.unwrap(t())?m(e).fadeIn():m(e).fadeOut()}},h.bindingHandlers.tokenReplace={init:function(e,t,n,i,a){var s=m(e),o=s.text(),r="g",l=h.utils.unwrapObservable(t())||{},u={token:"",replace:"",ignoreCase:!1};m.extend(u,l),!0===u.ignoreCase&&(r+="i");var d=new RegExp(escapeRe(u.token),r);s.text(o.replace(d,u.replace))},update:function(e,t,n,i,a){var s=m(e),o=s.text(),r="g",l=h.utils.unwrapObservable(t())||{},u={token:"",replace:"",ignoreCase:!1};m.extend(u,l),!0===u.ignoreCase&&(r+="i");var d=new RegExp(escapeRe(u.token),r);s.text(o.replace(d,u.replace))}},h.bindingHandlers.otmDisplay={update:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t());m(e).text(Math.round(s)+" %")}},h.bindingHandlers.jScrollPane={init:function(i,e){var n,t=h.utils.unwrapObservable(e()),a=t.postBoxTopic;function s(e){var t=m.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";m(".jspContainer",i).unbind(t);var n={wheelDeltaX:(isDefinedType(e.wheelDeltaX)?e.wheelDeltaX:e.deltaX)*m.fn.jScrollPane.defaults.mouseWheelSpeed,wheelDeltaY:(isDefinedType(e.wheelDeltaY)?-e.wheelDeltaY:e.deltaY)*m.fn.jScrollPane.defaults.mouseWheelSpeed};m(i).data("jsp").scrollBy(n.wheelDeltaX,n.wheelDeltaY,!1),e.preventDefault()}(t=m.extend({},{autoReinitialise:!1,autoReinitialiseDelay:200,verticalDragMinHeight:20,reinitialiseDelay:150},t)).reinitialiseDelay=Math.max(t.reinitialiseDelay,200),a&&(n=h.postbox.subscribe(a,function(){setTimeout(function(e,t){var n=m(e).data("jsp");if(n)try{n.reinitialise()}catch(e){throw e.message="ko.bindingHandlers.jScrollPane ko.postbox.subscribe setTimeout jscroll.reinitialise,  original message: "+e.message+JSON.stringify(t,null,4),e}},t.reinitialiseDelay,i,{postBoxTopic:a,options:t,page:location.href})})),m(i).jScrollPane(t),i.querySelector(".jspContainer").addEventListener("wheel",s,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1}),h.utils.domNodeDisposal.addDisposeCallback(i,function(e){n&&(n.dispose(),n=null),e.querySelector(".jspContainer").removeEventListener("wheel",s,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1});var t=m(e).data("jsp");t&&t.destroy(),i=null})},update:function(e,t){var n=t();n.postBoxTopic&&h.postbox.publish(n.postBoxTopic)}},h.bindingHandlers.scrollWithFixedhead={init:function(i,e){var t=h.utils.unwrapObservable(e()),n=m("#"+t.targetElement),a=n.width()-16,s=n.attr("class");if(!(t.showIfMoreThan&&t.length<=t.showIfMoreThan)){n.find("th").each(function(){m(this).css({width:m(this).outerWidth()+"px"})});var o="<div class='clone-wrapper'><table style='width: "+a+"px' class='"+s+" clone'><thead>"+n.find("thead").clone().addClass("static").html()+"</thead></table></div>";m(i).prepend(o),setTimeout(function(){m(n).find("thead").remove()},50),setTimeout(function(e){m(e).find(".scroll").jScrollPane({showArrows:!0})},0,i),setTimeout(function(e){e.querySelector(".jspContainer").addEventListener("wheel",r,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1})},0,i),h.utils.domNodeDisposal.addDisposeCallback(i,function(e){e.querySelector(".jspContainer").removeEventListener("wheel",r,!Browser.isPassiveEventListenersSupported()||{capture:!0,passive:!1});var t=m(".scroll",e).data("jsp");t&&t.destroy()})}function r(e){var t=m.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";m(".jspContainer",i).unbind(t);var n={wheelDeltaX:(isDefinedType(e.wheelDeltaX)?e.wheelDeltaX:e.deltaX)*m.fn.jScrollPane.defaults.mouseWheelSpeed,wheelDeltaY:(isDefinedType(e.wheelDeltaY)?-e.wheelDeltaY:e.deltaY)*m.fn.jScrollPane.defaults.mouseWheelSpeed};m(".scroll",i).data("jsp").scrollBy(n.wheelDeltaX,n.wheelDeltaY,!1),e.preventDefault()}}},h.bindingHandlers.ddDropdown={update:function(e,t,n,i,a){var s=t(),o=m(e);s.isInitDDdropdown?o.msDropdown({roundedBorder:!1,height:300,zIndex:99999,roundedCorner:!1}):o.msDropdown().data("dd").destroy()}},h.bindingHandlers.gridHeightCalculator={init:function(e,t){var n=t();m(e).css({height:n.rowCount*n.rowHeight+"px","background-color":"rgba(0, 0, 0, 0)"})}},h.bindingHandlers.tabs={init:function(e){m(e).find(".tabs").tabs(),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).find(".tabs").tabs("destroy")})}},h.bindingHandlers.resetPaymentDiv={update:function(e,t){var n=t();(n()||0===n())&&m("#concretePayments").length&&m("#paymentTypesContainer").appendTo("#concretePayments")}},h.bindingHandlers.paymentDivWithIntercalation={init:function(e,t){var n=t();h.toJS(n.missingInfo)||m("#paymentTypesContainer").hide()},update:function(e,t){var n=t(),i=h.utils.unwrapObservable(n.disableAutoScrolling);if(!n.payment())return m("#paymentTypesContainer").hide(),void(!i&&0<m("#concretePayments div.card-wrap:visible").length&&window.scrollTo(0,m("#concretePayments div.card-wrap:visible").last().offset().top));var a=n.getPaymentId(n.payment),s=m("#"+a).offset().top,o=null;m("#concretePayments div.card-wrap:visible").each(function(e,t){var n=m(t);n.offset().top===s&&(o=n)}),o&&o.after(m("#paymentTypesContainer")),m("#paymentTypesContainer").show(),i||window.scrollTo(0,s)}},h.bindingHandlers.customSelect={init:function(e,t,n){var i,a,s,o=m(e),r=h.utils.unwrapObservable(t())||{},l=n().value,u=n().customSelectOptions||{};u.refreshWhenObservableValueChanges&&l&&h.isObservable(l)&&(a=l.subscribe(function(){setTimeout(function(){jcf.refresh(o)},0)})),r.onReady&&h.isObservable(r.onReady)&&(i=r.onReady.subscribe(function(e){e&&jcf.refresh(o)})),jcf.replace(o,"Select",u);var d=n()||{};d.disable&&h.isObservable(d.disable)&&(s=d.disable.subscribe(function(){jcf.refresh(o)})),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){i&&(i.dispose(),i=null),a&&(a.dispose(),a=null),s&&(s.dispose(),s=null),jcf.destroy(m(e)),o=null})}},h.bindingHandlers.nonRtlOptions={init:function(e){var t=LanguageHelper.IsRtlLanguage(),n=e.options;if(t&&e.options&&e.options.length)for(var i=0;i<n.length;i++){var a=n[i];a.text&&!a.text.isRtlText()&&(a.innerHTML='<span class="ltr">'+a.innerHTML+"</span>")}}},h.bindingHandlers.dealSlipToggle={init:function(i,e){var a=e(),s=a.trakingEventName,t=a.isFullScreen.subscribe(function(e){var t=m(document.body),n=0<m(i).closest(".advinion-chart").length&&m(i).closest(".advinion-chart").is(":visible")?m(i).closest(".advinion-chart"):m(i).closest(".deal-slip");m(document.body).off("keydown.dealSlipToggle"),n.toggleClass("fullscreen").toggleClass("expanded"),t.toggleClass("chartpage-fullscreen"),e&&m(document.body).on("keydown.dealSlipToggle",function(e){e.keyCode===m.ui.keyCode.ESCAPE&&a.isFullScreen()&&(HistoryManager.Back(),e.preventDefault(),e.stopPropagation())}),h.postbox.publish(s,{element:"expand-button"})},a);h.utils.domNodeDisposal.addDisposeCallback(i,function(){m(i).closest(".deal-slip").off(".dealSlipToggle"),m(document.body).keydown=a.keydownHandler,m(document.body).off("keydown.dealSlipToggle"),t&&(t.dispose(),t=null)})}},h.bindingHandlers.createChartUsingCanvas={update:function(e,t){var n=h.utils.unwrapObservable(t()),i=n.risePercent,a=n.fallPercent,s=n.isDisable,o=LanguageHelper.IsRtlLanguage(),r=e.getContext("2d");r.clearRect(0,0,e.width,e.height);var l=110*(o?1:0),u=e.height/2,d=o?.5*Math.PI:1.5*Math.PI,c=o?(.5+a)*Math.PI:(1.5+i)*Math.PI;r.beginPath(),r.arc(l,u,75,d,c,!1),r.lineWidth=35,r.strokeStyle=s?"#ccc":o?"red":"green",r.stroke();var p=c,m=o?1.5*Math.PI:.5*Math.PI;r.beginPath(),r.arc(l,u,75,p,m,!1),r.lineWidth=35,r.strokeStyle=s?"#ccc":o?"#4dac4c":"#ec4443",r.stroke()}},h.bindingHandlers.triggerEventOnWindowResize={init:function(e,t){var a=h.utils.unwrapObservable(t()),s=0,o=0;function n(e){var t=!1,n=m(e).width(),i=m(e).height();s!==n&&(s=n,t=!0),o!==i&&(o=i,t=!0),t&&h.postbox.publish(a.eventName,{width:n,height:i})}m(window).on("resize.triggerEventOnWindowResize",n.bind(window,e)),h.utils.domNodeDisposal.addDisposeCallback(e,function(){m(window).off("resize.triggerEventOnWindowResize",n)})}},h.bindingHandlers.toggleElement={update:function(e,t){h.utils.unwrapObservable(t())?m(e).hide():m(e).show()}},h.bindingHandlers.tileLayoutSelector={update:function(e,t){var n,i=h.utils.unwrapObservable(t()),a="click.tileLayoutSelector."+(i.id||"0");function s(){i.layoutExpanded()&&(i.layoutExpanded(!1),m(document).unbind(a))}h.isObservable(i.layoutExpanded)&&(n=i.layoutExpanded.subscribe(function(e){e?m(document).bind(a,s):m(document).unbind(a)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){n&&isFunctionType(n.dispose)&&(n.dispose(),n=null),m(document).unbind(a)}))}},h.bindingHandlers.addSpanToLastWord={init:function(e){var t=m(e).html(),n=m(e).text().trim(),i=n.substring(n.lastIndexOf(" ")+1),a='<span class="inline-block">'+i;t=t.replace(i,a)+"</span>",m(e).html(t)}},h.bindingHandlers.disableEnterKey={init:function(e){var t="keypress."+m(e).attr("id");m(e).on(t,function(e){e.keyCode===m.ui.keyCode.ENTER&&e.preventDefault()}),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(t)})}},h.bindingHandlers.hoverOnClick={init:function(e){m(e).on("touchstart.hoverOnClick",function(){m(this).trigger("click")}),h.utils.domNodeDisposal.addDisposeCallback(e,function(e){m(e).off(".hoverOnClick")})}},h.bindingHandlers.accordion={init:function(n,e,t,i,a){var s=t();function o(){m(".accordion-section").removeClass("active"),m(".accordion-section-content").slideUp(300).removeClass("open")}m(n).click(function(e){var t=m(this).attr("for");m(this).is(".active")?o():(o(),h.postbox.publish(s.openEventName,h.dataFor(this.parentElement.parentElement)),m(this).addClass("active"),m(n).find("#"+t).slideDown(300).addClass("open")),e.preventDefault()})}},h.bindingHandlers.menu={init:function(e,t,n,i,a){var s=h.utils.unwrapObservable(t()).css;m(e).click(function(e){m("."+s).removeClass("activeMenu"),m(this).is(".activeMenu")||m(this).addClass("activeMenu"),e.preventDefault()})}}});
//# sourceMappingURL=desktopcustombindings.js.map