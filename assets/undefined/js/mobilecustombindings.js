!function(m){m.fn.numeric=function(e,t){"boolean"==typeof e&&(e={decimal:e}),void 0===(e=e||{}).negative&&(e.negative=!0);var n=!1===e.decimal?"":e.decimal||".",i=!0===e.negative;t="function"==typeof t?t:function(){};return this.data("numeric.decimal",n).data("numeric.negative",i).data("numeric.callback",t).keypress(m.fn.numeric.keypress).keyup(m.fn.numeric.keyup).blur(m.fn.numeric.blur)},m.fn.numeric.keypress=function(e){var t=m.data(this,"numeric.decimal"),n=m.data(this,"numeric.negative"),i=e.charCode?e.charCode:e.keyCode?e.keyCode:0;if(13==i&&"input"==this.nodeName.toLowerCase())return!0;if(13==i)return!1;var s=!1;if(e.ctrlKey&&97==i||e.ctrlKey&&65==i)return!0;if(e.ctrlKey&&120==i||e.ctrlKey&&88==i)return!0;if(e.ctrlKey&&99==i||e.ctrlKey&&67==i)return!0;if(e.ctrlKey&&122==i||e.ctrlKey&&90==i)return!0;if(e.ctrlKey&&118==i||e.ctrlKey&&86==i||e.shiftKey&&45==i)return!0;if(i<48||57<i){if(0!=this.value.indexOf("-")&&n&&45==i&&(0==this.value.length||0==m.fn.getSelectionStart(this)))return!0;t&&i==t.charCodeAt(0)&&-1!=this.value.indexOf(t)&&(s=!1),8!=i&&9!=i&&13!=i&&35!=i&&36!=i&&37!=i&&39!=i&&46!=i?s=!1:void 0!==e.charCode&&(e.keyCode==e.which&&0!=e.which?(s=!0,46==e.which&&(s=!1)):0!=e.keyCode&&0==e.charCode&&0==e.which&&(s=!0)),t&&i==t.charCodeAt(0)&&(s=-1==this.value.indexOf(t))}else s=!0;return s},m.fn.numeric.keyup=function(e){var t=this.value;if(0<t.length){var n=m.fn.getSelectionStart(this),i=m.data(this,"numeric.decimal"),s=m.data(this,"numeric.negative");if(""!=i){var a=t.indexOf(i);0==a&&(this.value="0"+t),1==a&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1)),t=this.value}for(var o=[0,1,2,3,4,5,6,7,8,9,"-",i],r=t.length,l=r-1;0<=l;l--){var u=t.charAt(l);0!=l&&"-"==u?t=t.substring(0,l)+t.substring(l+1):0!=l||s||"-"!=u||(t=t.substring(1));for(var d=!1,c=0;c<o.length;c++)if(u==o[c]){d=!0;break}d&&" "!=u||(t=t.substring(0,l)+t.substring(l+1))}var p=t.indexOf(i);if(0<p)for(l=r-1;p<l;l--){(u=t.charAt(l))==i&&(t=t.substring(0,l)+t.substring(l+1))}this.value=t,m.fn.setSelection(this,n)}},m.fn.numeric.blur=function(){var e=m.data(this,"numeric.decimal"),t=m.data(this,"numeric.callback"),n=this.value;""!=n&&(new RegExp("^\\d+$|\\d*"+e+"\\d+").exec(n)||t.apply(this))},m.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",m.fn.numeric.keypress).unbind("keyup",m.fn.numeric.keyup).unbind("blur",m.fn.numeric.blur)},m.fn.getSelectionStart=function(e){if(e.createTextRange&&document.selection){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}try{return e.selectionStart}catch(e){return 0}},m.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t[0]),n.moveEnd("character",t[1]),n.select()}else{e.focus();try{e.setSelectionRange&&e.setSelectionRange(t[0],t[1])}catch(e){}}}}(jQuery),define("FxSpinnerWidget",["require","jquery","jquery-ui"],function(e){var t=e("jquery");return t.widget("fx.fxspinner",t.ui.spinner,{_events:{blur:function(e){this._delay(function(){0<this.element.parent().find(document.activeElement).length||(this._stop(),this._value(this.element.val(),!0),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e))})},mousewheel:function(e){e.preventDefault()},"mousedown .ui-spinner-button":function(e){e.preventDefault(),!1!==this._start(e)&&(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),t(e.currentTarget).focus())},"touchstart .ui-spinner-button":function(e){e.preventDefault(),!1!==this._start(e)&&(this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),t(e.currentTarget).focus())},"touchend .ui-spinner-button":function(e){e.preventDefault(),this._stop(e)},"touchenter .ui-spinner-button":function(e){if(e.preventDefault(),t(e.currentTarget).hasClass("ui-state-active")){if(!1===this._start(e))return!1;this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e),t(e.currentTarget).focus()}},"touchleave .ui-spinner-button":function(e){e.preventDefault(),this._stop(e)}}})}),define("FxAutocompleteWidget",["require","jquery","knockout","FavoriteInstrumentsManager","InstrumentsSearchModule","InstrumentsManager"],function(e){var o=e("knockout"),c=e("jquery"),p=e("FavoriteInstrumentsManager"),t=e("InstrumentsSearchModule"),m=e("InstrumentsManager");return c.widget("fx.fxautocomplete",c.ui.autocomplete,{_create:function(){var s=this.options.source;this.selectedObservable=this.options.selected,this.hideDelay=this.options.hideDelay||0,this.customCloseButton=this.options.customCloseButton||!1,this.contentMaxHeight=this.options.contentMaxHeight||-1,this.showIcons=this.options.showIcons||!1,this.isEditFavoritesView=this.options.isEditFavoritesView,this.searchResultPostBoxTopic=this.options.searchResultPostBoxTopic,this.noResultMatch={category:"",value:this.options.noResultText||"",id:-1},this.hasCategories=void 0===this.options.hasCategories||!!this.options.hasCategories,this.itemImageClassProperty=this.options.itemImageClassProperty||!1,this.itemImageClassPrefix=this.options.itemImageClassPrefix||"",this.expression=this.options.matchFromBeginning?"^":"",this.renderInstruments=void 0===this.options.renderInstruments,this.renderInstruments&&(this.hasCategories=!1,this.showIcons=!0);this.renderInstruments?(this.instrumentsSearchInstance=new t(s),this._setOption("source",function(e,t){var n=this.instrumentsSearchInstance.typingSearch(e.term);n.length||n.push(this.noResultMatch),t(n)})):this._setOption("source",function(e,t){var n=new RegExp(this.expression+c.ui.autocomplete.escapeRegex(latinizeString(e.term)),"i"),i=c.grep(o.toJS(s),function(e){var t=!1;return isStringType(e.fullText)&&(t=n.test(e.fullText)),isStringType(e.text)&&(t=t||n.test(e.text)),t});i.length||i.push(this.noResultMatch),t(i)}),this._setOption("focus",function(e){e.preventDefault()}),this._super(),this.registerEvents(),this.options.hasInitialValue&&this.selectedObservable()&&c(this.element).val(this.selectedObservable().value)},_destroy:function(){this.instrumentsSearchInstance&&(this.instrumentsSearchInstance.dispose(),this.instrumentsSearchInstance=null)},_suggest:function(e){var t=this.menu.element.empty();this._renderMenu(t,e),this.isNewMenu=!0,this.menu.refresh(),c(t).css("top",0),t.show().removeClass("custom-autocomplete-hidden").addClass("custom-autocomplete-visible"),this._resizeMenu(),t.position(c.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),0<this.contentMaxHeight&&(c(t).height()<this.contentMaxHeight?c(this.options.appendTo).height(c(t).height()):c(this.options.appendTo).height(this.contentMaxHeight)),c(t).animate({scrollTop:0},0)},_close:function(e){var t=this;t.menu.element.is(":visible")&&(t.menu.element.removeClass("custom-autocomplete-visible").addClass("custom-autocomplete-hidden"),setTimeout(function(){t.menu.element.hide(),t.menu.blur(),t.isNewMenu=!0,t._trigger("close",e),0<t.contentMaxHeight&&c(t.options.appendTo).height(t.contentMaxHeight)},t.hideDelay)),this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!1})},registerEvents:function(){var s=this,a=c(s.element);s.customCloseButton?s.customCloseButton.on("click",function(){a.val("").change(),s.menu.element.hide(),s._trigger("close"),this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!1})}):a.blur(function(){a.val("").change()}),s._on(s.menu.element,{menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),i=c(t.item).find(".icon-star-full");this.options.keepTextAfterSelect&&n.id!==this.noResultMatch.id||a.val("").change(),n.isGroup||s.selectedObservable(n),0<i.length&&c(i).toggleClass("favorite")}}),s._on(s.element,{keydown:function(e){var t=c.ui.keyCode,n=s.menu.active;switch(e.keyCode){case t.UP:(isNullOrUndefined(n)||n.hasClass("autocomplete-group"))&&s._keyEvent("previous",e);break;case t.DOWN:(isNullOrUndefined(n)||n.hasClass("autocomplete-group"))&&s._keyEvent("next",e)}},keyup:function(e){var t=c.ui.keyCode;switch(e.keyCode){case t.BACKSPACE:case t.DELETE:s.options.hideDropDownWhenNotEnoughLetters&&c(s.element).val().length<s.options.minLength&&c(s.options.appendTo).hide()}}})},options:{minLength:2},_renderMenu:function(e,t){this.searchResultPostBoxTopic&&o.postbox.publish(this.searchResultPostBoxTopic,{hasResults:!0}),this.hasCategories?this._renderItemsWithCategories(e,t):this._renderItems(e,t)},_renderItems:function(n,e){var i=this;c.each(e,function(e,t){i._renderItemData(n,t)})},_renderItemsWithCategories:function(i,s){var a=this,n=[];c.each(s,function(e,t){-1===n.indexOf(t.category)&&n.push(t.category)}),c.each(n,function(e,n){if(1!==s.length||-1!==s[0].id){var t={label:n,isGroup:!0,category:""};a._renderItemData(i,t)}c.each(s,function(e,t){t.category===n&&a._renderItemData(i,t)})})},_renderItem:function(e,t){return this.renderInstruments?this._renderInstrumentItem(e,t):this._renderOtherItem(e,t)},_renderOtherItem:function(e,t){var n=new RegExp(this.expression+"("+c.ui.autocomplete.escapeRegex(this.term)+")","gi"),i=c("<li>"),s=t.label.replace(n,"<b class='bold'>$1</b>");if(this.itemImageClassProperty&&t[this.itemImageClassProperty]){var a="list-flag "+this.itemImageClassPrefix+t[this.itemImageClassProperty];c("<i/>",{class:a}).appendTo(i)}return c("<span/>",{class:"text-holder"}).html(s).appendTo(i),this.selectedObservable()&&this.selectedObservable().id===t.id&&(i=i.addClass("selected")),i.appendTo(e)},_renderInstrumentItem:function(e,t){var n=new RegExp("("+c.ui.autocomplete.escapeRegex(this.term)+")","gi"),i=c("<li>"),s=t.label.replace(n,"<b class='bold'>$1</b>");if(t.isGroup||(s="<div class='text-holder instrument-name found-results'>"+s+'<br /><span class="category-name">'+t.category+"</span></div>"+(this.isEditFavoritesView?"":"<div class='text-holder'><span class='tick'></span></div>")),t.isGroup&&i.addClass("autocomplete-group"),-1===t.id&&i.addClass("noresults"),this.showIcons){var a=c("<div>").addClass("instr-wrapper"),o=c("<div>").addClass("instr-symbol"),r=c("<span>").addClass("icon-star-full"),l=c("<span>").addClass("default"),u=c("<i>").addClass("base currency _"+t.baseSymbolId),d=c("<i>").addClass("other currency _"+t.otherSymbolId);p.IsFavoriteInstrument(t.id)&&r.addClass("favorite"),this.showIcons&&!t.isGroup&&-1!==t.id&&(l[0].innerText=m.GetInstrumentFirstChar(t.id),s=a.append(o.addClass("instr-"+t.id).append(u.append(l)).append(d)).prop("outerHTML")+s,this.isEditFavoritesView&&(s+=r.prop("outerHTML")))}return this.selectedObservable()&&this.selectedObservable().id===t.id&&!t.isGroup&&(i=i.addClass("selected")),i.html(s).appendTo(e)}})}),define("customBindings/AutocompleteBinding",["require","jquery","knockout","FxAutocompleteWidget"],function(e){var m=e("knockout"),f=e("jquery");m.bindingHandlers.autocomplete={init:function(o,e){var t,n,r=e(),i=r.elementType,s=r.minLength,l=f("."+r.autocompleteWrapperClass),a=l.find("."+r.predefinedOptionsListClass),u=r.searchPostBoxTopic,d=r.selectPostBoxTopic;function c(){var e=f(r.appendTo).find("ul:visible").outerHeight(),t=Math.min(e,r.contentMaxHeight||180)+1;f(r.appendTo).css("height",t+"px")}function p(){var e=l.parent().find(".customized"),t=l.find(".closeButton");f(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,showIcons:r.showIcons,hasInitialValue:r.hasInitialValue,keepTextAfterSelect:r.keepTextAfterSelect,hideDropDownWhenNotEnoughLetters:r.hideDropDownWhenNotEnoughLetters,customCloseButton:t,isEditFavoritesView:r.isEditFavoritesView,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,matchFromBeginning:r.matchFromBeginning,renderInstruments:r.renderInstruments,noResultText:r.noResultText,searchResultPostBoxTopic:r.searchResultPostBoxTopic,minLength:s,open:function(){e.hide(),f(r.appendTo).show()},select:function(e,t){m.postbox.publish("search-interaction",{Instrument:{id:t.item.id}}),r.hideDropDownAfterSelect&&f(r.appendTo).hide()},close:function(){e.show()},search:function(e,t){m.postbox.publish("search",{Characters:e.target.value})}})}switch(t=r.selected.subscribe(function(e){e&&isDefinedType(e.id)&&(r.elementToFocusOnChange&&setTimeout(function(e){f(e).focus()},100,r.elementToFocusOnChange+e.id),e.hideDropDown||("input.mobile"!==i&&l.toggle(),f(r.triggerFrom).toggleClass("focus")))}),i){case"select":f(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,contentMaxHeight:r.contentMaxHeight,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,renderInstruments:r.renderInstruments,noResultText:r.noResultText,matchFromBeginning:r.matchFromBeginning,select:function(e,t){m.postbox.publish("deal-slip-search-interaction",{Instrument:{id:t.item.id}}),d&&m.postbox.publish(d,t.item.id)},search:function(e,t){m.postbox.publish("deal-slip-search",{Characters:e.target.value}),c()},open:function(){f(".ui-autocomplete").off("menufocus hover mouseover mouseenter"),a.hide(),u&&m.postbox.publish(u)},close:function(e,t){a.show(),u&&m.postbox.publish(u)},minLength:s}),l.uniqueId(),f(document).on("click."+l.attr("id"),function(e){f(e.target).closest(l).length||f(e.target).is(l)||f(e.target).is(f(r.triggerFrom))||f(e.target).is(f(r.triggerFrom).find("span"))||!l.is(":visible")||(l.hide(),f(r.triggerFrom).toggleClass("focus"))}),f(r.triggerFrom).mousedown(function(e){e.preventDefault(),l.toggle(),0===s&&f(o).fxautocomplete("instance").search(""),f(r.triggerFrom).focus().toggleClass("focus")}).focus(function(){var e,t,n,i,s,a;c(),e=f(window).height(),t=f(window).scrollTop(),n=l.outerHeight(),i=f(o).offset().top,s=f("#"+r.relativeFieldId).outerHeight(),a=l.find(".ui-autocomplete-input"),e+t<i+s+n?(l.css("bottom",s+"px"),a.appendTo(l)):(l.css("bottom",""),a.prependTo(l)),u&&m.postbox.publish(u)});break;case"input":f(o).fxautocomplete({source:r.source,selected:r.selected,appendTo:r.appendTo,contentMaxHeight:r.contentMaxHeight,hasCategories:r.hasCategories,itemImageClassProperty:r.itemImageClassProperty,itemImageClassPrefix:r.itemImageClassPrefix,renderInstruments:r.renderInstruments,noResultText:r.noResultText,matchFromBeginning:r.matchFromBeginning,minLength:r.minLength,select:function(e,t){m.postbox.publish("search-interaction",{Instrument:{id:t.item.id}})},close:function(e,t){f(r.appendTo).hide()},search:function(e,t){f(r.appendTo).show(),f(r.appendTo).closest("div:visible").find(".jspPane").css("top",0),m.postbox.publish("search",{Characters:e.target.value})},open:function(){u&&m.postbox.publish(u)}});break;case"input.mobile":p(),"function"==typeof r.source&&(n=r.source.subscribe(function(){f(o).fxautocomplete("destroy"),p()}));break;default:f(o).fxautocomplete({source:r.source,selected:r.selected})}m.utils.domNodeDisposal.addDisposeCallback(o,function(){f(document).off("click."+l.attr("id")),void 0!==f(o).fxautocomplete("instance")&&f(o).fxautocomplete("destroy"),t&&t.dispose(),n&&n.dispose()})}}}),define("customBindings/DatePickerRangerBinding",["require","knockout","jquery","vendor/jquery.mobile.datepicker","vendor/jquery.datepicker.extension.range"],function(e){var u=e("knockout"),d=e("jquery");u.bindingHandlers.datePickerRange={init:function(i,e){var s=u.utils.unwrapObservable(e()),t=s.startDate()||"-1w",n=s.endDate()||"now",a=s.maxDate||"now",o=1,r=0;d(i).datepicker({dateFormat:"dd/mm/yy",range:"period",numberOfMonths:1,showOtherMonths:!0,onSelect:function(e,t,n){d(s.startDateInput).val(n.startDateText),d(s.endDateInput).val(n.endDateText),s.startDate(n.startDateText),s.endDate(n.endDateText),n.step===o&&(d(".focus").removeClass("focus"),d(s.endDateInput).addClass("focus")),n.step===r&&(d(".focus").removeClass("focus"),d(i).toggle())}}),d(i).datepicker("option","maxDate",a),d(i).datepicker("setDate",[t,n]),d(s.startDateControl).on("click",function(){d(this).hasClass("focus")?d(i).toggle():d(i).show(),d(".focus").removeClass("focus"),d(this).addClass("focus"),d(i).removeClass("end").addClass("start")}),d(s.endDateControl).on("click",function(){d(this).hasClass("focus")?d(i).toggle():d(i).show(),d(".focus").removeClass("focus"),d(this).addClass("focus"),d(i).removeClass("start").addClass("end")});var l=d(i).datepicker("widget").data("datepickerExtensionRange");l.startDateText&&d(s.startDateInput).val(l.startDateText),l.endDateText&&d(s.endDateInput).val(l.endDateText)}}}),define("customBindings/InfiniteScrollBinding",["require","knockout","jquery"],function(e){var l=e("knockout"),u=e("jquery");l.bindingHandlers.scrollInfinite={updating:!0,init:function(e,t,n){var i=this;i.updating=!0,l.utils.domNodeDisposal.addDisposeCallback(e,function(){u(window).off("scroll.ko.scrollHandler"),i.updating=!1})},update:function(e,t,n){var i=n().scrollOptions,s=i.offset?i.offset:"0",a=i.loadFunc,o=l.utils.unwrapObservable(t()),r=this;o?(e.style.display="",u(window).on("scroll.ko.scrollHandler",function(){u(window).scrollTop()>=u(document).height()-u(window).height()-s?r.updating&&(a(),r.updating=!1):r.updating=!0})):(u(window).off("scroll.ko.scrollHandler"),r.updating=!1)}}}),define("customBindings/common",["require","knockout","jquery","jquery-ui"],function(e){var t,n,i,f=e("knockout"),h=e("jquery");f.bindingHandlers.balloon={init:function(n,e){var i=f.utils.unwrapObservable(e())||{},s=h(n);s.uniqueId();var t=s.attr("id");s.attr("title")||s.attr("title","***missingTitleAttr"),"click"===i.closeEvent&&(s.on("mouseout focusout",function(e){e.stopImmediatePropagation()}),h(document).on("click.outsideBallon."+t,function(){s.data("uiTooltipOpen")&&a(s)})),"safari"===Browser.getBrowserName().toLowerCase()&&(i.tooltipClass+=" safari"),h.extend(i.position,{using:function(e,t){(h("[aria-describedby]").each(function(e,t){n!==t&&a(h(t))}),s.tooltip("open"),"click"===i.closeEvent&&s.on("tooltipopen",function(e){var t=this;h("#"+this.getAttribute("aria-describedby")).on("click",function(){a(h(t))})}),h(this).css(e),t&&t.target&&t.target.element&&h(t.target.element).hasClass("customTooltipPurpose"))?h(this).offset().top>h(t.target.element).offset().top?h(t.target.element).addClass("customTooltipPurposeBottom"):h(t.target.element).removeClass("customTooltipPurposeBottom"):h("<div>").addClass("arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}});var a=function(e){isObjectType(e)&&(isFunctionType(e.removeClass)&&e.removeClass("toolTipButtonTrigered"),isFunctionType(e.tooltip)&&!isNullOrUndefined(e.data("ui-tooltip"))&&e.tooltip("close"))};s.tooltip(i,{show:!1,hide:!1,content:function(){return i.contentKey?i.resourceName?Dictionary.GetItem(i.contentKey,i.resourceName):Dictionary.GetItem(i.contentKey):h(this).attr("title")}}),"click"===i.closeEvent&&s.on("mouseenter focusin",function(){h(this).addClass("toolTipButtonTrigered")}),s.on("click.balloon",function(){s.blur().tooltip("open"),"click"===i.closeEvent&&s.on("tooltipopen",function(e){h("#"+this.getAttribute("aria-describedby")).on("click",function(){a(s)})}),i.timeout&&0<i.timeout&&(clearTimeout(s._closeTooltipTimer),s._closeTooltipTimer=setTimeout(function(e){a(e)},i.timeout,s))}),f.utils.domNodeDisposal.addDisposeCallback(n,function(e){clearTimeout(e._closeTooltipTimer),h(e).off(".balloon"),h(e).tooltip("destroy"),h(document).off("click.outsideBallon."+t)})}},f.bindingHandlers.dictionaryBinding={init:function(e,t,n,i,s){var a,o=f.utils.unwrapObservable(t()),r=n(),l=(r.prefix||"")+o+(r.suffix||""),u=r.resourceName,d=h(e);l&&(a=u?Dictionary.GetItem(l,u):Dictionary.GetItem(l),d.html(a))},update:function(e,t,n,i,s){var a,o=f.utils.unwrapObservable(t()),r=n(),l=(r.prefix||"")+o+(r.suffix||""),u=r.resourceName,d=h(e);l&&(a=u?Dictionary.GetItem(l,u):Dictionary.GetItem(l),d.html(a))}},f.bindingHandlers.hidden={update:function(e,t){var n=f.utils.unwrapObservable(t());f.bindingHandlers.visible.update(e,function(){return!n})}},f.bindingHandlers.visibility={update:function(e,t){f.utils.unwrapObservable(t())?h(e).css("visibility","visible"):h(e).css("visibility","hidden")}},f.bindingHandlers.instrumentName={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=a===Number.MAX_SAFE_INTEGER?Dictionary.GetItem("All_Instruments"):$instrumentTranslationsManager.Long(a),r=h(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)}},f.bindingHandlers.nonRtlText={update:function(e,t){var n=f.utils.unwrapObservable(t());n&&isStringType(n)&&n.isRtlText()?e.classList.remove("ltr"):e.classList.add("ltr"),e.innerHTML=n}},f.bindingHandlers.instrumentShortName={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$instrumentTranslationsManager.Short(a),r=h(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$instrumentTranslationsManager.Short(a),r=h(e);o&&o.isRtlText()?r.removeClass("ltr"):r.addClass("ltr"),r.html(o)}},f.bindingHandlers.symbolName={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$symbolsManager.GetTranslatedSymbolById(a);h(e).html(o)},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=$symbolsManager.GetTranslatedSymbolById(a);h(e).html(o)}},f.bindingHandlers.numberWithCurrencySymbol={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=Format.toNumberWithCurrency(n.value,n);h(e).html(i)},update:function(e,t){var n=f.utils.unwrapObservable(t()),i=Format.toNumberWithCurrency(n.value,n);h(e).html(i)}},f.bindingHandlers.roundM={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=formatRoundM(a.toString());h(e).text(o)}}},f.bindingHandlers.roundMBasedOnThreshold={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=formatRoundMBasedOnThreshold(a.toString());h(e).text(o)}}},f.bindingHandlers.roundK={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=formatNumber(a.toString(),"K");h(e).text(o)}}},f.bindingHandlers.kAmount={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t());if(a){var o=Format.toKAmount(a.toString(),"K");h(e).text(o)}}},f.bindingHandlers.amount={init:t=function(e,t){var n=f.utils.unwrapObservable(t()),i=h(e).is("input"),s="NA"!==Format.toAmount(n)?Format.toAmount(n):n;i?h(e).val(s):h(e).text(s)},update:t},f.bindingHandlers.roundAmount={init:n=function(e,t){var n=f.utils.unwrapObservable(t()),i=h(e).is("input"),s=n;""!==n&&"NA"!==n&&(s=parseFloat(n),s=isNaN(s)?"":Math.ceil(Math.abs(s))),i?h(e).val(s):h(e).text(s)},update:n},f.bindingHandlers.limitAmount={init:i=function(e,t){var n=f.utils.unwrapObservable(t()),i=h(e).is("input"),s=Format.toAmount(n);"NA"===s&&(s=0),i?h(e).val(s):h(e).text(formatNumberWithThousandsSeparator(s))},update:i},f.bindingHandlers.toHumanReadableNumericFormat={init:function(e,t){var n=f.utils.unwrapObservable(t());h(e).text(isEmptyValue(n)?"":Format.toFixedAmount(n))},update:function(e,t){var n=f.utils.unwrapObservable(t());h(e).text(isEmptyValue(n)?"":Format.toFixedAmount(n))}},f.bindingHandlers.round={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=0;isEmptyValue(n)||(i=Format.toFixedAmount(n)),h(e).text(i)}},f.bindingHandlers.percentage={init:function(e,t){var n=f.utils.unwrapObservable(t());h(e).is("input")&&n?h(e).val(Format.toPercent(n)):h(e).text(Format.toPercent(n))},update:function(e,t){var n=f.utils.unwrapObservable(t());h(e).is("input")&&n?h(e).val(Format.toPercent(n)):h(e).text(Format.toPercent(n))}},f.bindingHandlers.smallFont={update:function(e,t,n){var i=f.utils.unwrapObservable(t()),s=n.get("smallFontThreshold")||5;i&&((n.get("roundM")?formatRoundM(i.toString()):i.toString()).length>s?h(e).addClass("small-font"):h(e).removeClass("small-font"))}},f.bindingHandlers.dateFormatShortDayAndMonth={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractDate()),s=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractTime()),a=i.day+"/"+i.month.replace(/^0+/,"")+" "+s.hour+":"+s.min;h(e).text(a)}},f.bindingHandlers.dateFormatShortDayMonthYear={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractDate()),s=SplitDateTime(str2Date(n,"d/m/Y H:M").ExtractTime()),a=i.day+"/"+i.month+"/"+i.year.substr(2,2)+" "+s.hour+":"+s.min;h(e).text(a)}},f.bindingHandlers.dateFormatLongDateWithTime={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=str2Date(n,"d/m/Y H:M").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});h(e).text(i)}},f.bindingHandlers.addDotInRange={init:function(o,e,t,n,r){var i,s,l,a=e();s=a.subscribe(function(e){l=e},null,"beforeChange"),i=a.subscribe(function(e){if(mobile.check.s2_default&&e&&-1==e.indexOf(".")&&!(5<=e.length)&&"NA"!=e&&(!l||l.indexOf(".")!=l.length-1||e!=l.substring(0,l.length-1))){for(var t=[],n=h(o).attr("data-range").split(","),i=0;i<n.length;i++){var s=n[i];s&&s in r.$data&&t.push(r.$data[s])}if(0<t.length){var a=Format.addDotInRange(this.target(),t,l);this.target(a)}}}),f.utils.domNodeDisposal.addDisposeCallback(o,function(){s&&(s.dispose(),s=null),i&&(i.dispose(),i=null),o=null})}},f.bindingHandlers.clearQuoteColor={update:function(e,t,n,i,s){clearTimeout(e.clearQuoteColorTimer),e.clearQuoteColorTimer=setTimeout(function(e){h(e).removeClass("green red up down")},1e3,e)}},f.bindingHandlers.timeComponent={update:function(e,t,n){var i=(f.utils.unwrapObservable(t())||"").split(" ")[1];i&&h(e).html(i)}},f.bindingHandlers.formattedText={update:function(e,t,n,i,s){var a,o,r="originalFormatText",l=h(e),u=n();if(l.attr(r)?o=l.attr(r):(o=u.contentKey?Dictionary.GetItem(u.contentKey,u.resourceName):u.encodeHTML?l.html():l.text(),l.attr(r,o)),a=u.formatPattern?o.replace(u.formatPattern,f.utils.unwrapObservable(t())):String.format(o,f.utils.unwrapObservable(t())),u.name&&f.postbox.publish(u.name+"-text-formatted"),isDefinedType(u.useAttr))return l.attr(u.useAttr,a),void l.html("");u.encodeHTML?(l.children().each(function(e,t){f.removeNode(t)}),l.html(a),f.applyBindingsToDescendants(s,e)):l.text(a)}},f.bindingHandlers.injectTemplate={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,i,s){for(var a=h(e),o=n(),r=o.encodeHTML?a.html():a.text(),l=r,u=f.utils.unwrapObservable(t()),d=0;d<u.length;d++){var c=new RegExp("\\{%"+d+"%\\}","gm");l=r.replace(c,"\x3c!-- ko template: { name: '"+u[d]+"' } --\x3e\x3c!-- /ko --\x3e")}o.encodeHTML?(a.children().each(function(e,t){f.removeNode(t)}),a.html(l),f.applyBindingsToDescendants(s,e)):a.text(l)}},f.bindingHandlers.showDate={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t())||{},o=h(e),r={value:"",date:!0,time:{hour:!1,min:!1,sec:!1}},l="";if(isPrimitiveType(a))r.value=a;else if(isDateType(a)){var u=new Date(a);r.value=u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()}else r=h.extend(r,a);if(isEmpty(r.value))o.html("");else{var d=SplitDateTime(r.value);r.date&&(l+=d.date),!1!==r.time&&(!0===r.time?l+=" "+d.time:(r.time.hour&&(l+=" "+d.hour),r.time.min&&(l+=":"+d.min),r.time.sec&&(l+=":"+d.sec))),o.html(l)}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t())||{},o=h(e),r={value:"",date:!0,time:{hour:!1,min:!1,sec:!1}},l="";if(isPrimitiveType(a))r.value=a;else if(isDateType(a)){var u=new Date(a);r.value=u.getDate()+"/"+(u.getMonth()+1)+"/"+u.getFullYear()+" "+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds()}else r=h.extend(r,a);if(isEmpty(r.value))o.html("");else{var d=SplitDateTime(r.value);r.date&&(l+=d.date),!1!==r.time&&(!0===r.time?l+=" "+d.time:(r.time.hour&&(l+=" "+d.hour),r.time.min&&(l+=":"+d.min),r.time.sec&&(l+=":"+d.sec))),o.html(l)}}},f.bindingHandlers.valueDateText={update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t())||{},o=h(e),r=(a.valueDate.isValueDateEmpty?Dictionary.GetItem("Daily")+" ":"")+(isEmptyValue(a.valueDate.date)?"":SplitDateTime(a.valueDate.date).date+(a.showHour?" "+SplitDateTime(a.valueDate.date).time:""));o.html(r)}},f.bindingHandlers.showFwPips={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=toNumeric(a).toFixed(1);0<=o&&(o="+"+o),h(e).html(o)},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=toNumeric(a).toFixed(1);0<=o&&(o="+"+o),h(e).html(o)}},f.bindingHandlers.trendFromSignalSign={init:function(e,t,n){var i,s,a=h(e),o=n(),r=isNullOrUndefined(o.pre)?"(":o.pre,l=isNullOrUndefined(o.post)?")":o.post,u=toNumeric(f.utils.unwrapObservable(t()));"NA"!==toNumeric(u)?a.text(r+(0===(i=u)?"=":0<(s=i)?"+"+s:"-"+s)+l):a.text("")}},f.bindingHandlers.imageFromSignalSign={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=h(e);switch(n){case eSignalTrendsValues.StrongSell:i.addClass(eSignalTrendsImageClasses.South);break;case eSignalTrendsValues.Sell:i.addClass(eSignalTrendsImageClasses.SouthEast);break;case eSignalTrendsValues.Neutral:i.addClass(eSignalTrendsImageClasses.East);break;case eSignalTrendsValues.Buy:i.addClass(eSignalTrendsImageClasses.NorthEast);break;case eSignalTrendsValues.StrongBuy:i.addClass(eSignalTrendsImageClasses.North);break;default:i.addClass(eSignalTrendsImageClasses.None)}}},f.bindingHandlers.styleFromSignalSign={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=h(e);switch(n){case eSignalTrendsValues.Buy:case eSignalTrendsValues.StrongBuy:i.addClass(eSignalTrendsColorClasses.Green);break;case eSignalTrendsValues.Sell:case eSignalTrendsValues.StrongSell:i.addClass(eSignalTrendsColorClasses.Red);break;default:i.addClass(eSignalTrendsColorClasses.Neutral)}}},f.bindingHandlers.toppedPercentage={update:function(e,t){var n=f.utils.unwrapObservable(t()),i=0;isEmptyValue(n)||(i=100<n?">100%":Format.toPercent(n)),h(e).text(i)}},f.bindingHandlers.toFixed={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a);if(r){var l=Math.pow(10,o),u=Math.round(r*l)/l;isNaN(u)?h(e).text(""):h(e).text(u)}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a);if(r){var l=Math.pow(10,o),u=Math.round(r*l)/l;isNaN(u)?h(e).text(""):h(e).text(u)}}},f.bindingHandlers.toFixedAmount={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){var l=Math.pow(10,o),u=Math.round(r*l)/l;h(e).text(Format.toFixedAmount(u))}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){var l=Math.pow(10,o),u=Math.round(r*l)/l;h(e).text(Format.toFixedAmount(u))}}},f.bindingHandlers.toFixedAmountWithoutRounding={init:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){if(0<o){var l=Math.pow(10,o);r=Math.round(r*l)/l}h(e).text(Format.toNumberWithThousandsSeparator(r))}},update:function(e,t,n,i,s){var a=f.utils.unwrapObservable(t()),o=n().decimals||0,r=toNumeric(a)||0;if(!isNaN(r)){if(0<o){var l=Math.pow(10,o);r=Math.round(r*l)/l}h(e).text(Format.toNumberWithThousandsSeparator(r))}}},f.bindingHandlers.iframeElement={init:function(e,t){var n=h(e)[0].contentWindow;t()(n)}},f.bindingHandlers.logger={update:function(e,t,n){var i=f.utils.domData.get(e,"_ko_logger")||0,s=f.toJS(t()||n());f.utils.domData.set(e,"_ko_logger",++i),window.console&&console.log&&console.log(i,e,s)}},f.bindingHandlers.htmlToString={update:function(e,t){h(e).text(h("<div>"+t()+"</div>").text())}},f.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},f.virtualElements.allowedBindings.stopBinding=!0,f.bindingHandlers.isProcessing={init:function(e){"DIV"===e.tagName&&h(e).hasClass("button")||(e.initialText=h(e).text())},update:function(e,t){var n=f.unwrap(t());n.switchText&&n.showProcessIcon?h(e).text(Dictionary.GetItem("risk_processing")):h(e).text(e.initialText),n.showProcessIcon?h(e).addClass("js_processing"):h(e).removeClass("js_processing")}},f.bindingHandlers.progressBar={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=f.utils.unwrapObservable(n.minimumValue),s=f.utils.unwrapObservable(n.maximumValue),a=f.utils.unwrapObservable(n.currentValue),o=f.utils.unwrapObservable(n.currencyId),r=toNumeric(a/(s-i)*100),l=n.simpleProgressBar||!1;if(r=Math.min(r,100),l){var u=h("<div>").addClass("current-value").css({width:r+"%"});h(e).append(u)}else{h(e).append(h("<span>").addClass("minimum-value direction-ltr").html(Format.toNumberWithCurrency(i,{maximumFractionDigits:0,currencyId:o})));var d=h("<div>").addClass("cash-progress-bar"),c=h("<div>").addClass("current-value").css({width:r+"%"}),p=h("<div>").addClass("bubble direction-ltr").html(Format.toNumberWithCurrency(a,{currencyId:o}));85<r&&p.addClass("reversed"),c.append(p),d.append(c),h(e).append(d),h(e).append(h("<span>").addClass("maximum-value direction-ltr").html(Format.toNumberWithCurrency(s,{currencyId:o}))),h(e).find(".minimum-value").width(h(e).find(".minimum-value").width()),h(e).find(".maximum-value").width(h(e).find(".maximum-value").width())}},update:function(e,t){var n=f.utils.unwrapObservable(t()),i=toNumeric(f.utils.unwrapObservable(n.minimumValue)),s=toNumeric(f.utils.unwrapObservable(n.maximumValue)),a=toNumeric(f.utils.unwrapObservable(n.currentValue)),o=f.utils.unwrapObservable(n.currencyId),r=toNumeric(a/(s-i)*100);r=Math.min(r,100),h(e).find(".minimum-value").html(Format.toNumberWithCurrency(i,{maximumFractionDigits:0,currencyId:o})),h(e).find(".maximum-value").html(Format.toNumberWithCurrency(s,{currencyId:o})),h(e).find(".current-value").css({width:r+"%"}),h(e).find(".bubble").html(Format.toNumberWithCurrency(a,{currencyId:o})),85<r&&h(e).find(".bubble").addClass("reversed"),h(e).find(".minimum-value, .maximum-value").addClass("text-positioned")}},f.bindingHandlers.html5InputsProxy={init:function(t,e){var n=e(),i=f.utils.unwrapObservable(n),s=n.subscribe(function(e){e!==t.value&&(t.value=e)});function a(e){t.validity.valid&&!t.validity.badInput&&n()!==t.value&&n(t.value)}t.value=i,t.addEventListener("keyup",a),f.utils.domNodeDisposal.addDisposeCallback(t,function(e){s&&(s.dispose(),s=null),e.removeEventListener("keyup",a,!1)})}},f.bindingHandlers.ratesClasses={init:function(t,e){var n=f.utils.unwrapObservable(e())||{};if(!n.disabled){n.rateObservable.extend({notify:"always"}),n.lastClass=f.observable("");var i=n.rateObservable.subscribe(function(e){if(isFunctionType(n.showInput)&&n.showInput())return this.lastClass(""),void f.applyBindingsToNode(t,{css:n.lastClass});switch(e){case eQuoteStates.Up:this.lastClass(this.lastClass()===this.up[0]?this.up[1]:this.up[0]);break;case eQuoteStates.Down:this.lastClass(this.lastClass()===this.down[0]?this.down[1]:this.down[0]);break;case eQuoteStates.NotChanged:this.lastClass(this.notChanged);break;default:this.lastClass("")}},n);f.applyBindingsToNode(t,{css:n.lastClass}),f.utils.domNodeDisposal.addDisposeCallback(t,function(){i&&(i.dispose(),i=null)})}}},f.bindingHandlers.attrIf={update:function(i,s,a){var e=f.utils.unwrapObservable(s())||{};f.utils.objectForEach(e,function(e,t){var n=f.utils.unwrapObservable(t);null!=n&&""!==n&&f.bindingHandlers.attr.update(i,s,a)})}},f.bindingHandlers["data-automation"]={init:function(e,t){var n=f.utils.unwrapObservable(t());n&&(e.setAttribute("data-automation",n),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){e.removeAttribute("data-automation")}))}},f.bindingHandlers.progressBarAutoResize={update:function(o){function e(){setTimeout(function(){var e=h(".progress-steps ul"),t=e.innerWidth(),n=e.find("li:first-child div").innerWidth()/2+20,i=e.find("li:visible:last div").innerWidth()/2+20,s=t-(n+i)+"px",a=LanguageHelper.IsRtlLanguage()?"0 "+n+"px 0 "+i+"px":"0 "+i+"px 0 "+n+"px";h(o).css({width:s,margin:a})},200)}e(),h(window).on("resize.progressBarAutoResize",e),f.utils.domNodeDisposal.addDisposeCallback(o,function(){h(window).off("resize.progressBarAutoResize",e)})}},f.bindingHandlers.placeholder={init:function(s,e){var t=f.unwrap(e()),a=t.onFocus||"",o=t.onBlur||"",n=function(e,t){var n=e.ownerDocument;if("activeElement"in n){var i;try{i=n.activeElement}catch(e){i=n.body}t=i===e}s.setAttribute("placeholder",t?a:o)},i=n.bind(null,s,!0),r=n.bind(null,s,!1);f.utils.registerEventHandler(s,"focus",i),f.utils.registerEventHandler(s,"blur",r),r()}},f.bindingHandlers.cssIfValue={init:function(e,t,n,i,s){var a=t()||{},o=a.classElementId||e.id,r=a.valueElementId||e.id,l=a.className,u=document.getElementById(o)||e,d=document.getElementById(r)||e,c=f.observable(!1);if(!isEmptyValue(l)){c(!isEmptyValue(d.value)),h(d).on("change keyup",m);var p={};p[l]=c,f.applyBindingsToNode(u,{css:p},s),f.utils.domNodeDisposal.addDisposeCallback(d,function(e){h(e).off("change keyup",m),c=null})}function m(){c(!isEmptyValue(d.value))}}},f.bindingHandlers.scrollHere={update:function(e,t){if(f.utils.unwrapObservable(t())){var n=e.getBoundingClientRect();n.top<0&&window.scrollBy(0,n.top)}}},f.bindingHandlers.riseOnScroll={update:function(n,e){if("fixed"===h(n).css("position")){var t=e()||{},i=t.minTop,s=t.initialTop;h(window).scroll(function(){var e=h(window).scrollTop(),t=s-e;t<=i&&(t=i),h(n).css("top",t+"px")})}}},f.bindingHandlers.setFocusToId={init:function(e,t){h(e).on("click",function(){var e="#"+t();h(e).focus()})}},f.bindingHandlers.specificUploadButton={init:function(e){!Browser.isChrome()&&Browser.isChromeOnIOS()||e.parentElement.classList.add("specific")},update:function(e,t){!Browser.isChrome()&&Browser.isChromeOnIOS()||(f.utils.unwrapObservable(t())?e.classList.add("enabled"):e.classList.remove("enabled"))}};var o=function(e){var t=h(e).find(".right-arrow"),n=h(e).find(".left-arrow"),i=h(e).find(".arrow-navigation-list"),s=h(e),a="hidden",o=".list-item";function r(){return i.scrollLeft()<=0}function l(){var e=i.scrollLeft(),t=i.width();return i.get(0).scrollWidth-e-t==0}function u(){var e=s.width();e&&i.width(e)}function d(){var e=i.find(o),t=0;return e.each(function(){t+=h(this).width()}),t}return{isScrollRightEnd:l,setArrowsVisibleOnInit:function(){s.width()<d()?(n.removeClass(a),t.removeClass(a),u()):(t.addClass(a),n.addClass(a))},setArrowsVisibleOnResize:function(){s.width()<=d()?(l()?t.addClass(a):t.removeClass(a),r()?n.addClass(a):n.removeClass(a)):(t.addClass(a),n.addClass(a))},setListWidth:u,scrollToActiveItem:function(){i.find(o).each(function(){var e=h(this).find(".active")[0];isNullOrUndefined(e)||i.animate({scrollLeft:h(this).position().left},300,function(){l()?t.addClass(a):r()&&n.addClass(a)})})},registerEvents:function(){t.on("click",function(){var e=i.scrollLeft();i.animate({scrollLeft:e+100},300,function(){l()&&t.addClass(a),n.removeClass(a)})}),n.on("click",function(){var e=i.scrollLeft();i.animate({scrollLeft:e-100},300,function(){t.removeClass(a),r()&&n.addClass(a)})})},unregisterEvents:function(){n.off("click"),t.off("click")},isListWidthEmpty:function(){var e=s.width(),t=d();return 0===e&&0===t}}};f.bindingHandlers.arrowList={init:function(e,t,n,i){var s,a=new o(e);i.Data.itemsRendered=f.observable(!1),i.Data.itemsRendered.subscribe(function(e){e&&(s=setInterval(function(){a.isListWidthEmpty()||(a.setArrowsVisibleOnInit(),a.scrollToActiveItem(),i.Data.itemsRendered(!1),clearInterval(s),setTimeout(function(){a.setArrowsVisibleOnInit(),a.scrollToActiveItem()},1e3))}))}),a.registerEvents(),h(window).resize(function(){a.setListWidth(),a.setArrowsVisibleOnResize()}),f.utils.domNodeDisposal.addDisposeCallback(e,function(){a.unregisterEvents(),clearInterval(s)})}},f.bindingHandlers.renderArrowListItem={update:function(e,t){var n=f.unwrap(t()),i=n.length;n.index()===i-1&&n.itemsRendered(!0)}},f.bindingHandlers.stickTextToTop={update:function(e,t){var n=getComputedStyle(e).fontSize,i=t();f.unwrap(i)||(n=parseInt(n.slice(0,n.length-2)),0<h(e).innerHeight()&&(e.style.marginTop=-(Math.round(h(e).innerHeight()/n)-1)*Math.round(n/2)+"px"))}},f.bindingHandlers.electronicSignature={init:function(n,e,t,i){var s=function(){n.setAttribute("width",n.parentElement.clientWidth),n.setAttribute("height",n.parentElement.clientHeight)},a=function(){var e=n.getAttribute("width"),t=n.getAttribute("height");e==n.parentElement.clientWidth&&t==n.parentElement.clientHeight||(s(),i.ClearSignature())};s(),i.InitCanvas(n),window.addEventListener("resize",a),f.utils.domNodeDisposal.addDisposeCallback(n,function(){window.removeEventListener("resize",a)})}},f.bindingHandlers.elementToImage={init:function(e,t,n,i){i.setPrintSettings(e,function(){return 0!==window.pageYOffset?-window.pageYOffset:0})}},f.bindingHandlers.showIntrumentNotAvailable={init:function(e,t){var n=f.utils.unwrapObservable(t()),i=h(e);n.isAvailable?i.addClass("instrument-available"):i.addClass("instrument-unavailable")},update:function(e,t){var n=f.utils.unwrapObservable(t()),i=n.instrData,s=h(e),a=h("."+n.dealContainerClass),o=h(".instrument-unavailable-wrapper"),r="deal-container-instrument-notavailable",l="instrument-available",u="instrument-unavailable";i.isAvailable?i.isChanged?(s.css({height:"auto"}),o.show(),s.addClass(l),s.removeClass(u),a.removeClass(r)):(s.css({height:s.height()+"px"}),o.hide()):(o.show(),a.addClass(r),s.addClass(u),s.removeClass(l))}}}),define("customBindings/NumericField",["require","knockout","jquery"],function(e){var s=e("knockout"),a=e("jquery");s.bindingHandlers.numericField={init:function(e,t){var n=s.utils.unwrapObservable(t()),i=a.extend({negative:!0},n);a(e).numeric(i),s.utils.domNodeDisposal.addDisposeCallback(e,function(e){a(e).removeNumeric()})}}}),define("customBindings/SpinnerField",["require","knockout","jquery","jquery-ui","FxSpinnerWidget"],function(e){var C=e("knockout"),x=e("jquery");C.bindingHandlers.closingLimitSpinner={init:function(n,e,u){var d,i,s,a,o,r,l,c,t=u().spinnerOptions||{},p=e(),m=u().spinnerOptions.startSpinFrom;if((d=t.input?0===t.input.indexOf("#")?x(t.input):x(n).find(t.input):x(n)).length){i=d.attr("id")||d.attr("name")||"";var f=function(){if(a){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if("NA"!==p()||e!==eStartSpinFrom.Above)if(isNaN(t)&&e===eStartSpinFrom.Below)a.toggleClass("active",!0);else Number(p())<=u().spinnerOptions.min()?a.toggleClass("active",!1):a.toggleClass("active",!0);else a.toggleClass("active",!1)}},h=function(){if(s){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if(isNaN(t)&&e===eStartSpinFrom.Below)s.toggleClass("active",!1);else{var n=Number(p());u().spinnerOptions.max()<=n?s.toggleClass("active",!1):s.toggleClass("active",!0)}}},v=function(){h(),f()};d.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),culture:C.toJS(t.culture),incremental:!0,create:function(){var e=u().spinnerOptions.min,t=u().spinnerOptions.max;(s=x(n).find(".ui-spinner-button.ui-spinner-up")).length&&(s.addClass("increment active"),i&&s.attr("id",i.concat("BtnIncrement"))),(a=x(n).find(".ui-spinner-button.ui-spinner-down")).length&&(a.addClass("decrement active"),i&&a.attr("id",i.concat("BtnDecrement"))),v(),o=p.subscribe(function(){v()}),r=e.subscribe(f),l=t.subscribe(h),c=m.subscribe(v)},spin:function(e,t){if(isNullOrUndefined(d))return!1;e.preventDefault();var n,i=d.fxspinner("value"),s=u().spinnerOptions.min(),a=u().spinnerOptions.max(),o=u().spinnerOptions.startSpinFrom(),r=t.value>i?"up":"down",l=parseFloat(p());if(o===eStartSpinFrom.None)return p(""),!1;if(isNaN(l)&&o===eStartSpinFrom.Below)return p(a),d.fxspinner("value",a),!1;if(isNaN(l)&&o===eStartSpinFrom.Above)return p(s),d.fxspinner("value",s),!1;if("up"===r&&t.value<s)return p(s),d.fxspinner("value",s),!1;if("down"===r&&t.value>a)return p(a),d.fxspinner("value",a),!1;"function"==typeof p.isIncremental&&p.isIncremental()?("up"===r&&(n=p.increment(!0)),"down"===r&&(n=p.decrement(!0)),!isNaN(n)&&n<s&&(n=s),!isNaN(n)&&a<n&&(n=a),!isNaN(n)&&s<=n&&n<=a&&(p(n),d.fxspinner("value",n))):t.value>=s&&t.value<=a&&i!=t.value&&(p(t.value),d.fxspinner("value",t.value));return!1}}),C.utils.domNodeDisposal.addDisposeCallback(n,function(){o&&o.dispose(),r&&r.dispose(),l&&l.dispose(),c&&c.dispose(),!isNullOrUndefined(d)&&d.length&&(d.fxspinner("destroy"),d=null),s=a=null})}},update:function(e,t,n){var i,s=C.toJS(n().spinnerOptions)||{};if((i=s.input?0===s.input.indexOf("#")?x(s.input):x(e).find(s.input):x(e)).length){var a={},o=i.fxspinner("option","step"),r=i.fxspinner("option","numberFormat"),l=!1;o!=s.step&&(l=!0,a.step=s.step),r!=s.numberFormat&&(l=!0,a.numberFormat=s.numberFormat),l&&i.fxspinner("option",a)}}},C.bindingHandlers.openLimitSpinner={init:function(n,e,d){var i,s,a,o,r,t=d().spinnerOptions||{},c=0===t.input.indexOf("#")?x(t.input):x(n).find(t.input),l=c.attr("id"),p=e();if(c.length){var u=function(){if(s){var e=parseFloat(p());if(isNaN(e))s.toggleClass("active",!0);else Number(p())<=d().spinnerOptions.min1()?s.toggleClass("active",!1):s.toggleClass("active",!0)}},m=function(){if(i){var e=Number(p());d().spinnerOptions.max2()<=e?i.toggleClass("active",!1):i.toggleClass("active",!0)}};c.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),incremental:!0,culture:C.toJS(t.culture),create:function(){var e=d().spinnerOptions.min1,t=d().spinnerOptions.max2;(i=x(n).find(".ui-spinner-button.ui-spinner-up")).length&&(i.addClass("increment active"),i.attr("id",l.concat("BtnIncrement"))),(s=x(n).find(".ui-spinner-button.ui-spinner-down")).length&&(s.addClass("decrement active"),s.attr("id",l.concat("BtnDecrement"))),a=p.subscribe(function(){m(),u()}),o=e.subscribe(u),r=t.subscribe(m)},spin:function(e,t){if(isNullOrUndefined(c))return!1;e.preventDefault();var n=c.fxspinner("value"),i=d(),s=i.spinnerOptions.min1(),a=i.spinnerOptions.max1(),o=i.spinnerOptions.min2(),r=i.spinnerOptions.max2(),l=t.value>n?"up":"down",u=parseFloat(p());return"up"===l&&(isNaN(u)||t.value<s)?(p(o),c.fxspinner("value",o)):"up"===l&&t.value>a&&t.value<o?(p(o),c.fxspinner("value",o)):"down"===l&&(isNaN(u)||t.value>r)?(p(a),c.fxspinner("value",a)):"down"===l&&t.value>a&&t.value<o?(p(a),c.fxspinner("value",a)):t.value>=s&&t.value<=r&&n!=t.value&&(p(t.value),c.fxspinner("value",t.value)),!1}}),C.utils.domNodeDisposal.addDisposeCallback(n,function(){a&&a.dispose(),o&&o.dispose(),r&&r.dispose(),!isNullOrUndefined(c)&&c.length&&(c.fxspinner("destroy"),c=null),i=s=null})}},update:function(e,t,n){var i,s=C.toJS(n().spinnerOptions)||{};if((i=s.input?0===s.input.indexOf("#")?x(s.input):x(e).find(s.input):x(e)).length){var a={},o=i.fxspinner("option","step"),r=i.fxspinner("option","numberFormat"),l=!1;o!=s.step&&(l=!0,a.step=s.step),r!=s.numberFormat&&(l=!0,a.numberFormat=s.numberFormat),l&&i.fxspinner("option",a)}}},C.bindingHandlers.amountSpinner={init:function(n,e,u){var d,i,s,a,o,r,l,c,t=u().spinnerOptions||{},p=e(),m=u().spinnerOptions.startSpinFrom;if((d=t.input?0===t.input.indexOf("#")?x(t.input):x(n).find(t.input):x(n)).length){i=d.attr("id")||d.attr("name")||"";var f=function(){if(a){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if("NA"!==p()||e!==eStartSpinFrom.Above)if(isNaN(t)&&e===eStartSpinFrom.Below)a.toggleClass("active",!0);else Number(p())<=u().spinnerOptions.min()?a.toggleClass("active",!1):a.toggleClass("active",!0);else a.toggleClass("active",!1)}},h=function(){if(s){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(p());if(isNaN(t)&&e===eStartSpinFrom.Below)s.toggleClass("active",!1);else{var n=Number(p());u().spinnerOptions.max()<=n?s.toggleClass("active",!1):s.toggleClass("active",!0)}}},v=function(){h(),f()};d.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),incremental:!0,create:function(){var e=u().spinnerOptions.min,t=u().spinnerOptions.max;(s=x(n).find(".ui-spinner-button.ui-spinner-up")).length&&(s.addClass("increment active"),i&&s.attr("id",i.concat("BtnIncrement"))),(a=x(n).find(".ui-spinner-button.ui-spinner-down")).length&&(a.addClass("decrement active"),i&&a.attr("id",i.concat("BtnDecrement"))),v(),o=p.subscribe(function(){v()}),r=e.subscribe(f),l=t.subscribe(h),c=m.subscribe(v)},spin:function(e,t){if(isNullOrUndefined(d))return!1;e.preventDefault();var n,i=d.fxspinner("value"),s=u().spinnerOptions.min(),a=u().spinnerOptions.max(),o=u().spinnerOptions.startSpinFrom(),r=t.value>i?"up":"down",l=parseFloat(p());if(isNaN(l)&&o===eStartSpinFrom.Below)return p(a),d.fxspinner("value",a),!1;if(isNaN(l)&&o===eStartSpinFrom.Above)return p(s),d.fxspinner("value",s),!1;if("up"===r&&t.value<s)return p(s),d.fxspinner("value",s),!1;if("down"===r&&t.value>a)return p(a),d.fxspinner("value",a),!1;"function"==typeof p.isIncremental&&p.isIncremental()?("up"===r&&(n=p.increment(!0)),"down"===r&&(n=p.decrement(!0)),!isNaN(n)&&n<s&&(n=s),!isNaN(n)&&a<n&&(n=a),!isNaN(n)&&s<=n&&n<=a&&(p(n),d.fxspinner("value",n))):t.value>=s&&t.value<=a&&i!=t.value&&(p(t.value),d.fxspinner("value",t.value));return!1}}),C.utils.domNodeDisposal.addDisposeCallback(n,function(){o&&o.dispose(),r&&r.dispose(),l&&l.dispose(),c&&c.dispose(),!isNullOrUndefined(d)&&d.length&&(d.fxspinner("destroy"),d=null),s=a=null})}},update:function(e,t,n){var i,s=C.utils.unwrapObservable(t()),a=isStringType(s)&&""!==s?Globalize.parseFloat(s):s,o=C.toJS(n().spinnerOptions)||{};if((i=o.input?0===o.input.indexOf("#")?x(o.input):x(e).find(o.input):x(e)).length){var r={},l=i.fxspinner("option","step"),u=i.fxspinner("option","numberFormat"),d=!1;if(l!=o.step&&(d=!0,r.step=o.step),u!=o.numberFormat&&(d=!0,r.numberFormat=o.numberFormat),d&&i.fxspinner("option",r),!isEmptyValue(a)){var c=i.fxspinner("option","numberFormat"),p=i.val(),m=Globalize.format(a,c);p!==m&&i.get(0)!==document.activeElement&&(clearTimeout(i.updateValueTimer),i.updateValueTimer=setTimeout(function(e,t){e.fxspinner("instance")&&(e.fxspinner("value",t),isNaN(parseFloat(t))?e.val(""):e.val(t),e.trigger("blur"))},10,i,m))}}}},C.bindingHandlers.lowMarginSpinner={init:function(i,e,u){var d,s,a,o,r,l,c,p,m,t=u().spinnerOptions||{},f=e(),h=u().spinnerOptions.startSpinFrom;if((d=t.input?0===t.input.indexOf("#")?x(t.input):x(i).find(t.input):x(i)).length){s=d.attr("id")||d.attr("name")||"";var v=function(){if(o&&u().spinnerOptions.enabled()){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(f());if("NA"!==f()||e!==eStartSpinFrom.Above)if(isNaN(t)&&e===eStartSpinFrom.Below)o.toggleClass("active",!0);else Number(f())<=u().spinnerOptions.min()?o.toggleClass("active",!1):o.toggleClass("active",!0);else o.toggleClass("active",!1)}},b=function(){if(a&&u().spinnerOptions.enabled()){var e=u().spinnerOptions.startSpinFrom(),t=parseFloat(f());if(isNaN(t)&&e===eStartSpinFrom.Below)a.toggleClass("active",!1);else{var n=Number(f());u().spinnerOptions.max()<=n?a.toggleClass("active",!1):a.toggleClass("active",!0)}}},g=function(){b(),v()},w=function(e){a&&(a.toggleClass("active",e),a.toggleClass("disabled",!e)),o&&(o.toggleClass("active",e),o.toggleClass("disabled",!e))};d.fxspinner({step:C.toJS(t.step),page:C.toJS(t.page),numberFormat:C.toJS(t.numberFormat),incremental:!0,create:function(){var e=u().spinnerOptions.min,t=u().spinnerOptions.max,n=u().spinnerOptions.enabled;(a=x(i).find(".ui-spinner-button.ui-spinner-up")).length&&(a.addClass("increment"),s&&a.attr("id",s.concat("BtnIncrement")),n()?a.addClass("active"):a.addClass("disabled")),(o=x(i).find(".ui-spinner-button.ui-spinner-down")).length&&(o.addClass("decrement"),s&&o.attr("id",s.concat("BtnDecrement")),n()?o.addClass("active"):o.addClass("disabled")),g(),r=f.subscribe(function(){g()}),l=e.subscribe(v),c=t.subscribe(b),p=h.subscribe(g),m=n.subscribe(w)},spin:function(e,t){if(isNullOrUndefined(d))return!1;e.preventDefault();var n,i=d.fxspinner("value"),s=u().spinnerOptions.min(),a=u().spinnerOptions.max(),o=u().spinnerOptions.startSpinFrom(),r=t.value>i?"up":"down",l=parseFloat(f());if(isNaN(l)&&o===eStartSpinFrom.Below)return f(a),d.fxspinner("value",a),!1;if(isNaN(l)&&o===eStartSpinFrom.Above)return f(s),d.fxspinner("value",s),!1;if("up"===r&&t.value<s)return f(s),d.fxspinner("value",s),!1;if("down"===r&&t.value>a)return f(a),d.fxspinner("value",a),!1;"function"==typeof f.isIncremental&&f.isIncremental()?("up"===r&&(n=f.increment(!0)),"down"===r&&(n=f.decrement(!0)),!isNaN(n)&&n<s&&(n=s),!isNaN(n)&&a<n&&(n=a),!isNaN(n)&&s<=n&&n<=a&&(f(n),d.fxspinner("value",n))):t.value>=s&&t.value<=a&&i!=t.value&&(f(t.value),d.fxspinner("value",t.value));return!1}}),C.utils.domNodeDisposal.addDisposeCallback(i,function(){r&&r.dispose(),l&&l.dispose(),c&&c.dispose(),p&&p.dispose(),!isNullOrUndefined(d)&&d.length&&(d.fxspinner("destroy"),d=null),m&&m.dispose(),a=o=null})}},update:function(e,t,n){var i,s=C.utils.unwrapObservable(t()),a=isStringType(s)&&""!==s?Globalize.parseFloat(s):s,o=C.toJS(n().spinnerOptions)||{};if((i=o.input?0===o.input.indexOf("#")?x(o.input):x(e).find(o.input):x(e)).length){var r={},l=i.fxspinner("option","step"),u=i.fxspinner("option","numberFormat"),d=!1;if(l!=o.step&&(d=!0,r.step=o.step),u!=o.numberFormat&&(d=!0,r.numberFormat=o.numberFormat),d&&i.fxspinner("option",r),!isEmptyValue(a)){var c=i.fxspinner("option","numberFormat"),p=i.val(),m=Globalize.format(a,c);p!==m&&i.get(0)!==document.activeElement&&(clearTimeout(i.updateValueTimer),i.updateValueTimer=setTimeout(function(e,t){e.fxspinner("instance")&&(e.fxspinner("value",t),e.val(t),e.trigger("blur"))},10,i,m))}}}}}),define("customBindings/SwipeTabs",["knockout"],function(n){n.bindingHandlers.swipeTabs={init:function(e,t){var i=n.utils.unwrapObservable(t());i&&(swipe(e,150,function(e,t){var n;t<e&&"function"==typeof i.toRight&&(n=i.toRight()),e<t&&"function"==typeof i.toLeft&&(n=i.toLeft()),n&&window.scrollTo(0,1)}),n.utils.domNodeDisposal.addDisposeCallback(e,function(e){swipeDestroy(e)}))}}}),define("customBindings/mobile",["require","knockout","jquery","jquery-ui","keyboard-status"],function(e){var c=e("knockout"),p=e("jquery");c.bindingHandlers.setArrows={init:function(t,e){var n=c.utils.unwrapObservable(e());function i(e){var t,n,i=e.clientWidth,s=p(e).find(".right-arrow"),a=p(e).find(".left-arrow"),o=e.scrollWidth,r="Safari"!==Browser.getBrowserName()?e.scrollLeft:(t=p(e),n=t.scrollLeft(),LanguageHelper.IsRtlLanguage()&&(n=Math.abs(n),p.browser.webkit&&(n=t[0].scrollWidth-t[0].clientWidth-n)),n),l=p(e).height();i<o?(s.height(l),a.height(l),s.removeClass("arrow-hidden"),0<r&&a.removeClass("arrow-hidden"),0!==r||a.hasClass("arrow-hidden")||a.addClass("arrow-hidden"),0!==r&&o-(i+r)<=2&&!s.addClass("arrow-hidden")&&s.addClass("arrow-hidden")):(a.addClass("arrow-hidden"),s.addClass("arrow-hidden"))}var s=function(e){switch(window.orientation){case 90:var t=p(e).find(".right-arrow"),n=p(e).find(".left-arrow");n.hasClass("arrow-hidden")||n.addClass("arrow-hidden"),t.hasClass("arrow-hidden")||t.addClass("arrow-hidden");break;default:setTimeout(i,0,e)}}.bind(this,t),a=null;n&&n.elementsObservable&&(a=n.elementsObservable.subscribe(function(e){setTimeout(i,0,t)})),p(window).on("orientationchange.setArrows",s),p(t).on("scroll.setArrows",function(){i(this)}),setTimeout(i,0,t),setTimeout(function(e){var t=p(e).find(".right-arrow"),n=p(e).find(".left-arrow");t.on("click",function(){(LanguageHelper.IsRtlLanguage()?p(e).find(".list-item.active").prev(".list-item").find("a"):p(e).find(".list-item.active").next(".list-item").find("a")).click()}),n.on("click",function(){(LanguageHelper.IsRtlLanguage()?p(e).find(".list-item.active").next(".list-item").find("a"):p(e).find(".list-item.active").prev(".list-item").find("a")).click()})},0,t),c.utils.domNodeDisposal.addDisposeCallback(t,function(e){p(e).off(".setArrows"),p(window).off("orientationchange.setArrows",s),p(e).find(".right-arrow, .left-arrow").off("click"),a&&(a.dispose(),a=null),s=null})}},c.bindingHandlers.ScrollToElement={init:function(e){c.utils.domNodeDisposal.addDisposeCallback(e,function(e){clearTimeout(e.ScrollToElementTimer)})},update:function(d,e){c.utils.unwrapObservable(e())&&(clearTimeout(d.ScrollToElementTimer),d.ScrollToElementTimer=setTimeout(function(e){var t=e.parentNode,n=p(t).find(".left-arrow").outerWidth()||0,i=p(t).find(".right-arrow").outerWidth()||0,s=p(t).scrollLeft(),a=p(t).outerWidth(),o=p(d).outerWidth(!0),r=p(e).position().left,l=r+o,u=r<s+n;a-i<l?p(t).animate({scrollLeft:s+(l-(a-i)),duration:200}):u&&p(t).animate({scrollLeft:s+r-n,duration:200})},100,d))}},c.bindingHandlers.toogleChartViewMode={init:function(e){p(e).on("click.toogleChartViewMode",function(){p("#dealChartMobileContainer").hasClass("fullscreen")?(p("#dealChartMobileContainer").removeClass("fullscreen"),p("#toogleViewButton").removeClass("collapse-button").addClass("expand-button"),c.postbox.publish("deal-slip-chart-interaction",{element:"collapse-button"})):(p("#dealChartMobileContainer").addClass("fullscreen"),p("#toogleViewButton").removeClass("expand-button").addClass("collapse-button"),c.postbox.publish("deal-slip-chart-interaction",{element:"expand-button"})),c.postbox.publish("chart-container-resized")}),c.utils.domNodeDisposal.addDisposeCallback(e,function(e){p(e).off(".toogleChartViewMode")})}},c.bindingHandlers.resetScroll={init:function(e,t,n,i,s){t();c.utils.domNodeDisposal.addDisposeCallback(e,function(e){clearTimeout(e.resetScrollTimer)})},update:function(e,t,n,i,s){window.scrollTo(0,1),mobile&&mobile.browser.opera&&mobilePatches&&"function"==typeof mobilePatches.delayedFooter&&(clearTimeout(e.resetScrollTimer),e.resetScrollTimer=setTimeout(mobilePatches.delayedFooter,400))}},c.bindingHandlers.ttFadeIn={init:function(n,e){var t=c.utils.unwrapObservable(e()),i=t.tt_data_id,s=t.hasTooltipOverlay,a=t.noflip;p(n).on("click.ttFadeIn",function(e){e.stopPropagation(),p(".tooltips").css("display","none"),p(".tActive").removeClass("tActive"),p(n).addClass("tActive"),p("#"+i).fadeIn();var t=p(window).scrollTop();!(p(n).offset().top-t+p("#"+i).outerHeight()+20<p(window).height())&&a?(p(n).addClass("flippedTrigger"),p("#"+i).addClass("flipped")):(p(n).removeClass("flippedTrigger"),p("#"+i).removeClass("flipped")),s&&(p("body").addClass("mobilePopupVisible"),p(".tooltip-overlay").addClass("visible"))}),c.utils.domNodeDisposal.addDisposeCallback(n,function(e){p(e).off(".ttFadeIn")})}},c.bindingHandlers.ttFadeOut={init:function(e,t){var n=c.utils.unwrapObservable(t()),i=n.tt_icon_id,s=n.tt_data_id,a=n.hasTooltipOverlay;p(e).on("click.ttFadeOut",function(e){e.stopPropagation(),p("#"+i).removeClass("active"),p(p("#"+s)[0]).prev().removeClass("tActive"),p("#"+s).fadeOut(),a&&(p("body").removeClass("mobilePopupVisible"),p(".tooltip-overlay").removeClass("visible"))}),c.utils.domNodeDisposal.addDisposeCallback(e,function(e){p(e).off(".ttFadeOut")})}},c.bindingHandlers.ttTriggerFadeOut={init:function(t,e){var n=c.utils.unwrapObservable(e()).targetSelector||"i.close";p(t).on("click.ttTriggerFadeOut",function(e){p(n,t).trigger("click.ttFadeOut")}),c.utils.domNodeDisposal.addDisposeCallback(t,function(e){p(e).off(".ttTriggerFadeOut")})}},c.bindingHandlers.tooltipHandle={init:function(o,e){var r=c.utils.unwrapObservable(e()),l="tooltip-indicator";p(o).on("click",function(){var e=p(o),t=p("#"+r),n=p("."+l),i=p(".tooltip-content"),s=-1!==e[0].className.indexOf(l),a="none"!==t.css("display");n.removeClass("opened"),i.hide(),s&&!a&&(e.addClass("opened"),t.show())}),c.utils.domNodeDisposal.addDisposeCallback(o,function(e){p(e).off(".tooltipHandle")})}},c.bindingHandlers.ajustMobileFontSize={update:function(e,t,n,i,s){var a=e.innerText,o=p(e);if((o.html(a),isFunctionType(window.matchMedia))&&window.matchMedia("screen and (max-width: 360px)").matches){var r=o.parent().width(),l=simulatedContentStringLegth(a,o.css("font"));l<r&&o.addClass("medium_font"),1<l/r&&o.addClass("small_font")}}},c.bindingHandlers.AlertCustomHeightAdjustments={update:function(e){var t=p(e),n=p(window).height()-t.find(".alert-box .heading").outerHeight(!0)-t.find(".alert-box footer").outerHeight(!0);t.find("article").css({"min-height":n+"px"})}},c.bindingHandlers.triggerEventOnOrientationChange={init:function(e,t){var n=c.utils.unwrapObservable(t());function i(){c.postbox.publish("orientation-change",n)}window.addEventListener("orientationchange",i),c.utils.domNodeDisposal.addDisposeCallback(e,function(){window.removeEventListener("orientationchange",i)})}},c.bindingHandlers.toggleMobileMenu={init:function(o){function e(){var e=p("<div>").addClass("menu-visible-content-hover").on("click",o,function(e){p(e.data).trigger("click")}),t=p("#header"),n=p("#footer"),i=p("#main-menu"),s=p("#main"),a=p("#main-menu .menu-list");s.css({position:"fixed"}),i.toggleClass("menu-expanded"),s.toggleClass("content-unslided content-slided"),t.toggleClass("content-slided"),n.toggleClass("content-slided"),a.animate({scrollTop:0},0),s.hasClass("content-slided")?s.append(e):(p(".menu-visible-content-hover").remove(),setTimeout(function(e){e.css({position:"absolute"})},250,s))}p(o).on("click.toggleMobileMenu",e),p(window).on("orientationchange.toggleMobileMenu",function(){p("#main").hasClass("content-slided")&&e()}),c.utils.domNodeDisposal.addDisposeCallback(o,function(e){p(e).off(".toggleMobileMenu"),p(window).off("orientationchange.toggleMobileMenu")})}},c.bindingHandlers.virtualKeyboardBehavior={init:function(e){p(e).on("focus.virtualKeyboardBehavior",function(){p("#footer").css({display:"none"})}).on("blur.virtualKeyboardBehavior",function(){p("#footer").css({display:"block"})}),c.utils.domNodeDisposal.addDisposeCallback(e,function(e){p(e).off("focus.virtualKeyboardBehavior","blur.virtualKeyboardBehavior")})}},c.bindingHandlers.hideFooter={init:function(e,t){var n=t(),i=c.computed(function(){n.isPaymentButtonVisible()?p("#footer").hide():p("#footer").show()});c.utils.domNodeDisposal.addDisposeCallback(e,function(){i.dispose()})}},c.bindingHandlers.menuSwipe={init:function(e){swipe(e,65,function(e,t){var n=LanguageHelper.IsRtlLanguage();(n&&t<e||!n&&e<t)&&p("#main-menu .close-button").trigger("click")}),c.utils.domNodeDisposal.addDisposeCallback(e,function(e){swipeDestroy(e)})}},c.bindingHandlers.mainGridSticky={init:function(t,e){var n,i=c.utils.unwrapObservable(e()),s=p(i.referenceElementId).outerHeight(),a=Browser.getiosDevices(),o=Browser.isSafariMobile()&&(a.older.iphSeSimilar||a.notch.iphXSimilar||a.notch.iphXr||a.notch.iphXsMax),r=function(e){p(t).find(".fixed-wrap, .head-bg").css("visibility",e?"visible":"hidden")};function l(e){e?p(t).addClass("fixed-to").find(".fixed-wrap, .head-bg").css("top",s):p(t).removeClass("fixed-to")}p(window).on("scroll.mainGridSticky touchmove.mainGridSticky",function(){var e;s=p(i.referenceElementId).outerHeight(),e=p(window).scrollTop(),l(Math.floor(p(t).offset().top)-s<=e),o&&(n||r(!1),clearTimeout(n),n=setTimeout(function(){r(!(n=null))}))}),c.utils.domNodeDisposal.addDisposeCallback(t,function(){clearTimeout(n),p(window).off(".mainGridSticky")})}},c.bindingHandlers.stickyElement={init:function(o,e){var r,l=c.utils.unwrapObservable(e()),u=p(l.referenceElementId).outerHeight();!function(){var i=p(o).offset(),s=!1;function a(e){l.usePlaceHolder?p(o).parent().css("height",e?r:""):p(o).closest("table").css("margin-top",e?p(o).css("height"):"")}p(window).on("scroll.stickyElement touchmove.stickyElement",function(){var t,e=p(o),n=p(window).scrollTop();s||(r=p(o).parent().css("height"),i=p(o).offset(),u=p(l.referenceElementId).outerHeight(),s=!0),n>=Math.ceil(i.top)-u?(l.preserveTableSize&&(t=p(e).find("th"),p.each(t,function(e){p(t[e]).width(p(t[e]).width())})),e.addClass("fixed header-clone").css("top",u),a(!0)):(e.removeClass("fixed header-clone").css("top",""),a())}).on("orientationchange.stickyElement",function(){u=p(l.referenceElementId).outerHeight()})}(),c.utils.domNodeDisposal.addDisposeCallback(o,function(e){p(window).off(".stickyElement"),p(e).removeClass("fixed header-clone").css("top",""),p(e).closest("table").css("margin-top","")})}},c.bindingHandlers.scrollToTab={init:function(e){p(e).on("click",function(e){e.preventDefault(),e.stopPropagation();var t=p(this).offset().top-p("#header").height();setTimeout(function(){p("body").animate({scrollTop:t},500)},50)}),c.utils.domNodeDisposal.addDisposeCallback(e,function(e){p(e).off("click")})}},c.bindingHandlers.scrollToItem={init:function(e,t){c.utils.unwrapObservable(t())&&setTimeout(function(e){e.scrollIntoView({inline:"center"})},50,e)}},c.bindingHandlers.tel={init:function(e,t){var n=c.utils.unwrapObservable(t());p(e).attr("href","tel:"+n)}},c.bindingHandlers.removeOnClick={init:function(e,t){var n,i,s=c.utils.unwrapObservable(t()),a=s.callback;n=s.parent?p(e).closest(s.parent):s.child?p(e).find(s.child):p(e),p(e).on("click.removeOnClick",function(){n.addClass("remove"),clearTimeout(i),i=setTimeout(function(e,t){e.remove(),isFunctionType(t)&&t()},300,n,a)}),c.utils.domNodeDisposal.addDisposeCallback(e,function(e){p(e).off(".removeOnClick"),clearTimeout(i),n=s=null})}},c.bindingHandlers.addWindowFocusEventListener={init:function(e,t){var n=c.utils.unwrapObservable(t());p(window).on("focus.addWindowFocusEventListener",n.onFocus),c.utils.domNodeDisposal.addDisposeCallback(e,function(){p(window).off("focus.addWindowFocusEventListener"),n=null})}},c.bindingHandlers.accordion={init:function(n,e,t,i,s){var a=t();function o(){p(".accordion-section").removeClass("active"),p(".accordion-section-content").slideUp(300).removeClass("open")}p(n).click(function(e){var t=p(this).attr("for");p(this).is(".active")?o():(o(),c.postbox.publish(a.openEventName,c.dataFor(this.parentElement.parentElement)),p(this).addClass("active"),p(n).find("#"+t).slideDown(300).addClass("open")),e.preventDefault()})}},c.bindingHandlers.expand={init:function(e,t,n,i,s){var a=n(),o=a.isOpen,r=a.toggleHandler,l=p(e).find(".accordion-section-faq").first(),u=p(e);function d(){var e=u.attr("for");u.addClass("active"),u.find("#"+e).slideDown(300).addClass("open")}function c(){var e=u.attr("for");u.removeClass("active"),u.find("#"+e).slideUp(300).removeClass("open")}o?d():c(),l.on("click",function(e){if(!isNullOrUndefined(r)&&isFunctionType(r)){var t=!u.is(".active");r(t)}u.is(".active")?c():d(),e.preventDefault()})}},c.bindingHandlers.tutorialPlayer={init:function(t,e){var n=c.utils.unwrapObservable(e()),i=n.playerVisible.subscribe(function(e){e||(document.body.classList.remove("mobilePopupVisible"),t.querySelector("iframe").remove())});t.querySelector(".close").addEventListener("click",function(){n.playerVisible(!1)}),c.utils.domNodeDisposal.addDisposeCallback(t,function(){document.body.classList.remove("mobilePopupVisible"),i&&(i.dispose(),i=null)})},update:function(e,t){var n=c.utils.unwrapObservable(t());if(""!==n.path()){var i=document.createElement("iframe");i.setAttribute("src",n.path()),i.classList.add("no-border"),i.setAttribute("id","EducationalTutorialsIframe"),e.appendChild(i),n.playerVisible(!0),window.scrollTo(0,1),document.body.classList.add("mobilePopupVisible")}}},c.bindingHandlers.nonRtlOptions={init:function(e){var t=LanguageHelper.IsRtlLanguage(),n=e.options;if(t&&e.options&&e.options.length)for(var i=0;i<n.length;i++){var s=n[i];s.text&&!s.text.isRtlText()?s.classList.add("ltr"):s.classList.remove("ltr")}}}}),define("keyboard-status",["knockout"],function(n){var e,s=n.observable(),t=-1,i=-1;function a(){e=window.matchMedia("(orientation: portrait)").matches?(t=Math.max(t,screen.height),i=Math.max(i,screen.width),t):(t=Math.max(t,screen.width),i=Math.max(i,screen.height))}function o(){return.33<=Math.abs((e-window.innerHeight)/e)}window.matchMedia&&(a(),s(o()),window.addEventListener("resize",function(){a(),s()!==o()&&s(o())}),n.bindingHandlers["kyb-status"]={update:function(i,e){var t=s.subscribe(function(e){var t=e?"kybOn":"kybOff",n=e?"kybOff":"kybOn";i.classList.remove(n),i.classList.add(t)});n.utils.domNodeDisposal.addDisposeCallback(i,function(e){t&&(t.dispose(),t=null)})}})}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("adjustUiPerDevice",[],t):e.adjustUiPerDevice=t()}("undefined"!=typeof self?self:this,function(){function t(){var e,t=document.querySelectorAll("[data-ios]");for(e=0;e<t.length;e++){var n=t[e].getAttribute("data-ios");"adjustTop"==n?(t[e].style.top=0,t[e].style.position="absolute"):"adjustBottom"==n&&(t[e].style.position="relative",t[e].style.display="none")}}function n(){var e,t=document.querySelectorAll("[data-ios]");for(e=0;e<t.length;e++){var n=t[e].getAttribute("data-ios");"adjustTop"==n?(t[e].style.top=0,t[e].style.position="fixed"):"adjustBottom"==n&&(t[e].style.position="fixed",t[e].style.display="")}}return function(e){null!==e&&(1!=e?0!=e?(e.onfocus=t,e.onblur=n):n():t())}});
//# sourceMappingURL=mobilecustombindings.js.map