{
  "requestUrl": "/webpl3/assets/20201230110628/js/scripts/fxnet/uilayer/viewmodels/Payments/ConcretePaymentBehavior.js?v=20201230110628",
  "contentType": "application/javascript",
  "method": "GET",
  "statusCode": 200,
  "data": "ï»¿/* globals eConcretePaymentDataState */\r\ndefine(\r\n    'viewmodels/Payments/ConcretePaymentBehavior',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'handlers/general',\r\n        'deviceviewmodels/PaymentSelectionBehaviors',\r\n        'StateObject!PaymentType',\r\n        'enums/enums'\r\n    ],\r\n    function (require) {\r\n        var ko = require('knockout'),\r\n            general = require('handlers/general'),\r\n            PaymentSelectionBehaviors = require('deviceviewmodels/PaymentSelectionBehaviors'),\r\n            paymentTypeStateObject = require('StateObject!PaymentType');\r\n\r\n        paymentTypeStateObject.set(eConcretePaymentDataState.Pending);\r\n        paymentTypeStateObject.set(eConcretePaymentDataState.Success);\r\n        \r\n        function ConcretePaymentBehavior() {\r\n            function getPaymentConfigData(payment) {\r\n                if (!payment.paymentData || !JSONHelper.IsValid(payment.paymentData)) {\r\n                    return {};\r\n                }\r\n\r\n                return JSONHelper.STR2JSON(\"ConcretePaymentBehavior:ConcretePaymentBehavior\", payment.paymentData);\r\n            }\r\n\r\n            function publishPaymentInfo(configData, payment, paymentImageClass, country, allowedCreditCards) {\r\n                var concretePaymentInfo = {\r\n                    paymentData: configData.paymentData || payment.paymentData,\r\n                    paymentCountry: country,\r\n                    concretePaymentType: payment.id,\r\n                    paymentCurrencies: payment.currencies,\r\n                    paymentType: payment.paymentType,\r\n                    paymentImageClass: paymentImageClass,\r\n                    originalPaymentName: payment.originalPaymentName || payment.name,\r\n                    subtitleContentKey: payment.subtitleContentKey,\r\n                    allowedCreditCards: allowedCreditCards,\r\n                    isCcBinFromEea: payment.isCcBinFromEea\r\n                };\r\n\r\n                ko.postbox.publish(ePostboxTopic.ConcretePaymentData, concretePaymentInfo);\r\n\r\n                paymentTypeStateObject.update(eConcretePaymentDataState.Pending, concretePaymentInfo);\r\n                paymentTypeStateObject.update(eConcretePaymentDataState.Success, concretePaymentInfo);\r\n            }\r\n\r\n            function showPaymentView(payment, country, paymentImageClass, allowedCreditCards) {\r\n                if (general.isNullOrUndefined(payment) || general.isNullOrUndefined(payment.paymentType)) {\r\n                    return;\r\n                }\r\n\r\n                var configData = getPaymentConfigData(payment);\r\n\r\n                if (general.isNullOrUndefined(configData)) {\r\n                    configData = {};\r\n                }\r\n\r\n                var viewType = configData.viewType;\r\n\r\n                PaymentSelectionBehaviors.ShowSelectedBehavior(payment.paymentType, viewType);\r\n                PaymentSelectionBehaviors.CheckMissingCustomerInformation();\r\n\r\n                publishPaymentInfo(configData, payment, paymentImageClass, country, allowedCreditCards);\r\n            }\r\n\r\n            return {\r\n                showPaymentView: showPaymentView\r\n            };\r\n        }\r\n\r\n        return ConcretePaymentBehavior;\r\n    }\r\n);",
  "isBase64": false
}