{
  "requestUrl": "/webpl3/assets/20201230110628/js/scripts/fxnet/uilayer/viewmodels/SortStateViewModel.js?v=20201230110628",
  "contentType": "application/javascript",
  "method": "GET",
  "statusCode": 200,
  "data": "ï»¿define(\r\n    'viewmodels/SortStateViewModel',\r\n    [\r\n        'knockout',\r\n        'handlers/general',\r\n        'helpers/KoComponentViewModel'\r\n    ],\r\n    function (ko, general, koComponentViewModel) {\r\n        var SortStateViewModel = general.extendClass(koComponentViewModel, function (params) {\r\n            var self = this,\r\n                parent = this.parent,\r\n                sortPropertiesObs = params.sortPropertiesObs,\r\n                sortProperty = params.sortProperty,\r\n                setSorting = params.setSorting || function () { },\r\n                sortDir = ko.observable(\"\"),\r\n                defaultAsc = params.defaultAsc || false; /* desc => asc => none*/\r\n\r\n            function init() {\r\n                parent.init.call(self);\r\n\r\n                self.parent.subscribeTo(params.sortPropertiesObs, function sortSubscription(newValue) {\r\n                    if (newValue.sortProperty === sortProperty) {\r\n                        syncSortStatus(newValue.asc);\r\n                    } else {\r\n                        syncSortStatus();\r\n                    }\r\n                }, self);\r\n\r\n                syncSortStatus(sortPropertiesObs().sortProperty === sortProperty ? sortPropertiesObs().asc : null);\r\n            }\r\n            \r\n            function syncSortStatus(asc) {\r\n                var sortDirection = '';\r\n\r\n                if (general.isBooleanType(asc)) {\r\n                    sortDirection = asc ? 'up' : 'down';\r\n                } \r\n\r\n                sortDir(sortDirection);\r\n            }\r\n\r\n            function onChangeSort(asc) {\r\n                setSorting(true, sortProperty, asc);\r\n            }\r\n\r\n            function changeSort() {\r\n                var currentIsAsc = sortPropertiesObs().sortProperty === sortProperty ? sortPropertiesObs().asc : null;\r\n\r\n                if (!general.isBooleanType(currentIsAsc)) {\r\n                    onChangeSort(defaultAsc);\r\n                    return;\r\n                }\r\n\r\n                onChangeSort(!currentIsAsc);\r\n            }\r\n\r\n            init();\r\n\r\n            return {\r\n                sortDir: sortDir,\r\n                changeSort: changeSort\r\n            }\r\n        });\r\n\r\n        var createViewModel = function (params) {\r\n            var viewModel = new SortStateViewModel(params);\r\n            viewModel.init();\r\n\r\n            return viewModel;\r\n        };\r\n\r\n        return {\r\n            viewModel: { createViewModel: createViewModel }\r\n        };\r\n    }\r\n);",
  "isBase64": false
}