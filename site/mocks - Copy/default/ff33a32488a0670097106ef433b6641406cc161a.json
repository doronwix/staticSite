{
  "requestUrl": "/webpl3/assets/20201230110628/js/scripts/fxnet/uilayer/viewmodels/limits/ExpirationDateSelectorModel.js?v=20201230110628",
  "contentType": "application/javascript",
  "method": "GET",
  "statusCode": 200,
  "data": "ï»¿define(\r\n    'viewmodels/limits/ExpirationDateSelectorModel',\r\n    [\r\n        'require',\r\n        'knockout',\r\n        'handlers/general',\r\n        'Dictionary',\r\n        'viewmodels/dialogs/DialogViewModel'\r\n    ],\r\n    function(require) {\r\n        var ko = require('knockout'),\r\n            general = require('handlers/general'),\r\n            Dictionary = require('Dictionary'),\r\n            DialogViewModel = require('viewmodels/dialogs/DialogViewModel');\r\n\r\n        function ExpirationDateSelectorModel(customSettings) {\r\n            var observableObject = {};\r\n\r\n            var settings = {\r\n                title: Dictionary.GetItem(\"EditLimitExpirationDate\",'dialogsTitles',' '),\r\n                width: 420,\r\n                dialogClass: \"fx-dialog expPopup\",\r\n                onCloseCallback: function() { onDateDialogClosed(); }\r\n            };\r\n\r\n            ko.utils.extend(settings, customSettings || {});\r\n\r\n            var init = function() {\r\n                setDefaultObservables();\r\n                setSubscribers();\r\n            };\r\n\r\n            var setDefaultObservables = function() {\r\n                observableObject.isGoodTillCancel = ko.observable(true);\r\n                observableObject.expirationDateValue = ko.observable(\"\");\r\n            };\r\n\r\n            var setSubscribers = function() {\r\n                observableObject.isGoodTillCancel.subscribe(function() {\r\n                    onOptionChanged();\r\n                });\r\n            };\r\n\r\n            var resetObservables = function() {\r\n                observableObject.isGoodTillCancel(true);\r\n                observableObject.expirationDateValue(\"\");\r\n            }\r\n\r\n            var onOptionChanged = function() {\r\n                if (isGoodTillCancelChecked()) {\r\n                    return;\r\n                } else {\r\n                    openSelectDateDialog();\r\n                }\r\n            };\r\n\r\n            var openSelectDateDialog = function() {\r\n                if (general.isDefinedType(DialogViewModel)) {\r\n                    DialogViewModel.open(eDialog.EditLimitExpirationDate, settings, eViewTypes.vEditLimitExpirationDate);\r\n                }\r\n            };\r\n\r\n            var onDateDialogClosed = function() {\r\n                if (general.isEmpty(observableObject.expirationDateValue())) {\r\n                    observableObject.isGoodTillCancel(true);\r\n                }\r\n            };\r\n\r\n            var updateSelectedDateUI = function(expirationDateValue) {\r\n                observableObject.expirationDateValue(expirationDateValue);\r\n                observableObject.isGoodTillCancel(false);\r\n            };\r\n\r\n            var isGoodTillCancelChecked = function() {\r\n                return observableObject.isGoodTillCancel() === true;\r\n            };\r\n\r\n            return {\r\n                Init: init,\r\n                Data: observableObject,\r\n                IsGoodTillCancelChecked: isGoodTillCancelChecked,\r\n                OnOptionChanged: onOptionChanged,\r\n                UpdateSelectedDateUI: updateSelectedDateUI,\r\n                ResetObservables: resetObservables\r\n            };\r\n        }\r\n\r\n        return ExpirationDateSelectorModel;\r\n    }\r\n);",
  "isBase64": false
}