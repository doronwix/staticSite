function ProChart_InitDraw(ea){function N(a,c){v=fa(c.ShapeType);"undefined"!=typeof e.preloadobj&&e.preloadobj.startPreload();try{switch(c.ShapeType){case "polygon":case "rect":case "ellipse":case "triangle":case "shape":case "circle":case "sketch":case "arc":O(c);break;case "fibfan":case "ganfan":b=c;w("fan",v);ga(e.patterns.draw.fanform);break;case "fibtimezones":case "fibtimeextension":P(c);break;case "cycleline":Q(c);break;case "gansquare":R(c);break;case "fibretrace":case "fibextension":S(c);
break;case "fibarc":T(c);break;case "fork":U(c);break;case "linearreg":V(c);break;case "arrow":case "line":W(c);break;case "parallel":X(c);break;case "text":Y(c);break;case "hline":case "measure":case "vline":Z(c);break;default:u()}}catch(d){u()}}function fa(a){function b(a,c){return"undefined"!=typeof e.localizationobj?e.localizationobj.gui.returnLocalizationString(a,c):c}var d="";switch(a){case "polygon":d=b("dialogs.titles."+a,"Polygon");break;case "rect":d=b("dialogs.titles."+a,"Rectangle");break;
case "ellipse":d=b("dialogs.titles."+a,"Ellipse");break;case "triangle":d=b("dialogs.titles."+a,"Triangle");break;case "circle":d=b("dialogs.titles."+a,"Circle");break;case "sketch":d=b("dialogs.titles."+a,"Sketch");break;case "arc":d=b("dialogs.titles."+a,"Acr");break;case "fibfan":d=b("dialogs.titles."+a,"Fan");break;case "ganfan":d=b("dialogs.titles."+a,"Gann Fan");break;case "fibtimeextension":d=b("dialogs.titles."+a,"Fibo Time Zone Extension ");break;case "fibtimezones":d=b("dialogs.titles."+
a,"Fibo Time Zone");break;case "cycleline":d=b("dialogs.titles."+a,"Circle Line");break;case "gansquare":d=b("dialogs.titles."+a,"Gan Square");break;case "fibretrace":d=b("dialogs.titles."+a,"Fib Retracement");break;case "fibextension":d=b("dialogs.titles."+a,"Fib Extension");break;case "fibarc":d=b("dialogs.titles."+a,"Fib Arcs");break;case "fork":d=b("dialogs.titles."+a,"Pitchfork");break;case "linearreg":d=b("dialogs.titles."+a,"Regression Trend");break;case "arrow":d=b("dialogs.titles."+a,"Arrow");
break;case "line":d=b("dialogs.titles."+a,"Line");break;case "parallel":d=b("dialogs.titles."+a,"Parallel Channel");break;case "text":d=b("dialogs.titles."+a,"Text Label");break;case "hline":d=b("dialogs.titles."+a,"Horizontal Line");break;case "measure":d=b("dialogs.titles."+a,"Measure Line");break;case "vline":d=b("dialogs.titles."+a,"Vertical Line")}return d}function V(a){b=a;w("shape",v);var c=e.patterns.draw.linearregform;a=b;$("#chart-dialog").html(c);try{var d=$("#tbody-levels"),k=e.patterns.draw.linereg_trendline.replace(/%border_style_pattern%/g,
e.patterns.draw.border_style);$(d).append(k);0==b.Levels.length&&(b.Levels.push(0),b.Levels.push(0),b.Levels.push(0));var g=a.MainLineStyle;z(g,"#trendline-width","#color-trendline","#line-select-trendline");A(g,"#trendline-width","#color-trendline","#line-select-trendline");var h=e.patterns.draw.linereg_levels,k=[];k.push({name:"topline",caption:"Top Line"});k.push({name:"middleline",caption:"Middle Line"});k.push({name:"bottomline",caption:"Bottom Line"});for(g=0;3>g;g++){var p=h.replace(/%order%/g,
g).replace(/%levelindex%/g,g).replace(/%linename%/g,k[g].name).replace(/%border_style_pattern%/g,e.patterns.draw.border_style).replace(/%linecaption%/g,k[g].caption);$(d).append(p);var l=a.LevelsStyle["level"+g],m=a.LevelFillsStyle["level"+g];C(l,"#slider-5-level-"+g);D(l,m,"#color-background-level-"+g);E(l,"#line-select-level-"+g);!1==a.LevelsView[g]&&($("#control-background-level-"+g).prop("checked",!1),$("#slider-5-level-"+g).slider("disable"),$("#color-background-level-"+g).spectrum("disable"),
$("#input-level-"+g).prop("disabled",!0),$("#line-select-level-"+g).prop("disabled",!0))}F(a.MainLineStyle,"#slider-100",a.LevelFillsStyle);G("#control-background","#slider-100");!0!=a.MainLineStyle.viewFill&&($("#control-background").prop("checked",!1),$("#slider-100").slider("disable"));x(a.Coordinations,a.TimeScale,a);y();$("#chart-dialog").dialog("open")}catch(H){u()}}function O(a){b=a;w("shape",v);a=e.patterns.draw.shapeform;$("#chart-dialog").html(a);try{var c=b.MainLineStyle;z(c,"#border-width",
"#color-border","#linedesign-select");aa(c,"#control-background","#color-background","#slider-100");A(c,"#border-width","#color-border","#linedesign-select");ba(c,"#control-background","#color-background","#slider-100");x(b.Coordinations,b.TimeScale,b);y();$("#chart-dialog").dialog("open")}catch(d){u()}}function W(a){b=a;w("line",v);a=e.patterns.draw.lineform;$("#chart-dialog").html(a);try{var c=b.MainLineStyle;z(c,"#line-width","#line-color","#linedesign-select");A(c,"#line-width","#line-color",
"#linedesign-select");ca(b,"#line-extendleft","#line-extendright");x(b.Coordinations,b.TimeScale,b);y();$("#chart-dialog").dialog("open")}catch(d){u()}}function Q(a){b=a;w("circleline",v);a=e.patterns.draw.circlelineform;$("#chart-dialog").html(a);try{var c=b.MainLineStyle;z(c,"#line-width","#line-color","#linedesign-select");A(c,"#line-width","#line-color","#linedesign-select");x(b.Coordinations,b.TimeScale,b);y();$("#chart-dialog").dialog("open")}catch(d){u()}}function P(a){b=a;w("timezone",v);
a=e.patterns.draw.timezoneform;$("#chart-dialog").html(a);try{var c=b.MainLineStyle;z(c,"#line-width","#line-color","#linedesign-select");A(c,"#line-width","#line-color","#linedesign-select");x(b.Coordinations,b.TimeScale,b);B(b);y();$("#chart-dialog").dialog("open")}catch(d){u()}}function X(a){b=a;w("parallel",v);a=e.patterns.draw.parallelform;$("#chart-dialog").html(a);try{var c=b.MainLineStyle,d=b.MainLineStyle;z(c,"#line-width","#line-color","#linedesign-select");aa(d,"#control-background","#color-background",
"#slider-100");A(c,"#line-width","#line-color","#linedesign-select");ba(d,"#control-background","#color-background","#slider-100");ca(b,"#line-extendleft","#line-extendright");x(b.Coordinations,b.TimeScale,b);y();$("#chart-dialog").dialog("open")}catch(k){u()}}function Z(a){b=a;w("line",v);a=e.patterns.draw.vlineform;$("#chart-dialog").html(a);try{var c=b.MainLineStyle;z(c,"#line-width","#line-color","#linedesign-select");A(c,"#line-width","#line-color","#linedesign-select");x(b.Coordinations,b.TimeScale,
b);switch(b.ShapeType){case "hline":var d=$("#tbody-coordinates td");$(d[2]).css("display","none");$(d[3]).css("display","none");$(d[4]).css("display","none");break;case "vline":var k=$("#tbody-coordinates td");$(k[0]).css("display","none");$(k[1]).css("display","none")}B(b);y();$("#chart-dialog").dialog("open")}catch(g){u()}}function Y(a){b=a;w("text",v);ha(e.patterns.draw.textform)}function ha(a){$("#chart-dialog").html(a);try{$("#input-text").val(b.Label),$("#input-text").on("change",function(){b.Label=
$(this).val();b.Refresh()}),B(b),x(b.Coordinations,b.TimeScale,b),y(),$("#chart-dialog").dialog("open")}catch(c){u()}}function ga(a){$("#chart-dialog").html(a);try{var c=e.patterns.draw.fan.replace(/%border_style_pattern%/g,e.patterns.draw.border_style),d=b.Levels,k=$("#tbody-levels");if(null!=d)for(a=0;a<d.length;a++){var g=c.replace(/%order%/g,a).replace(/%levelindex%/g,a).replace(/%input-value%/g,d[a]).replace(/%border_style_pattern%/g,e.patterns.draw.border_style);$(k).append(g);var h=b.LevelsStyle["level"+
a],p=b.LevelFillsStyle["level"+a];C(h,"#slider-5-level-"+a);D(h,p,"#color-background-level-"+a);E(h,"#line-select-level-"+a);!1==b.LevelsView[a]&&($("#control-background-level-"+a).prop("checked",!1),$("#slider-5-level-"+a).slider("disable"),$("#color-background-level-"+a).spectrum("disable"),$("#input-level-"+a).prop("disabled",!0),$("#line-select-level-"+a).prop("disabled",!0))}F(b.MainLineStyle,"#slider-100",b.LevelFillsStyle);!0!=b.MainLineStyle.viewFill&&($("#control-background").prop("checked",
!1),$("#slider-100").slider("disable"));!0!=b.LabelsStyle.view&&$("#control-labels").prop("checked",!1);I();$(".control-background-level").on("click",function(a){a=$(".control-background-level").index(this);$(this).is(":checked")?($("#slider-5-level-"+a).slider("enable"),$("#color-background-level-"+a).spectrum("enable"),$("#input-level-"+a).prop("disabled",!1),$("#line-select-level-"+a).prop("disabled",!1),b.LevelsView[a]=!0):($("#slider-5-level-"+a).slider("disable"),$("#color-background-level-"+
a).spectrum("disable"),$("#input-level-"+a).prop("disabled",!0),$("#line-select-level-"+a).prop("disabled",!0),b.LevelsView[a]=!1);b.Refresh()});G("#control-background","#slider-100");$(".class-input-level").on("change",function(){var a=$(".class-input-level").index(this);""!=$(this).val()&&$.isNumeric($(this).val())&&($(this).attr("prevvalue",$(this).val()),d[a]=$(this).val(),b.Refresh())});$(".class-input-level").on("keydown",function(a){13==a.keyCode&&(a=$(".class-input-level").index(this),""!=
$(this).val()&&$.isNumeric($(this).val())&&(d[a]=$(this).val(),b.Refresh()))});x(b.Coordinations,b.TimeScale,b);B(b);y();$("#chart-dialog").dialog("open")}catch(l){u()}}function R(a){b=a;w("square",v);a=e.patterns.draw.squareform;$("#chart-dialog").html(a);try{var c=$("#tbody-levels"),d=e.patterns.draw.square_trendline.replace(/%border_style_pattern%/g,e.patterns.draw.border_style);$(c).append(d);var k=b.MainLineStyle;z(k,"#trendline-width","#color-trendline","#line-select-trendline");A(k,"#trendline-width",
"#color-trendline","#line-select-trendline");var g=e.patterns.draw.square_levels,h=b.Levels;if(null!=h)for(d=0;d<h.length;d++){var p=g.replace(/%order%/g,d).replace(/%levelindex%/g,d).replace(/%border_style_pattern%/g,e.patterns.draw.border_style).replace(/%input-value%/g,h[d]);$(c).append(p);var l=b.LevelsStyle["level"+d],m=b.LevelsStyle["level"+d];C(l,"#slider-5-level-"+d);D(l,m,"#color-background-level-"+d);E(l,"#line-select-level-"+d)}x(b.Coordinations,b.TimeScale,b);B(b);y();$("#chart-dialog").dialog("open")}catch(H){u()}}
function T(a){b=a;w("fiboarc",v);ia(e.patterns.draw.fiboform)}function ia(a){$("#chart-dialog").html(a);try{var c=$("#tbody-levels"),d=e.patterns.draw.fiboarc_trendline.replace(/%border_style_pattern%/g,e.patterns.draw.border_style);$(c).append(d);var k=b.MainLineStyle;z(k,"#trendline-width","#color-trendline","#line-select-trendline");A(k,"#trendline-width","#color-trendline","#line-select-trendline");var g=e.patterns.draw.fiboarc_levels.replace(/%border_style_pattern%/g,e.patterns.draw.border_style),
h=b.Levels;if(null!=h)for(a=0;a<h.length;a++){var p=g.replace(/%order%/g,a).replace(/%levelindex%/g,a).replace(/%border_style_pattern%/g,e.patterns.draw.border_style).replace(/%input-value%/g,h[a]);$(c).append(p);var l=b.LevelsStyle["level"+a],m=b.LevelFillsStyle["level"+a];C(l,"#slider-5-level-"+a);D(l,m,"#color-background-level-"+a);E(l,"#line-select-level-"+a);!1==b.LevelsView[a]&&($("#control-background-level-"+a).prop("checked",!1),$("#slider-5-level-"+a).slider("disable"),$("#color-background-level-"+
a).spectrum("disable"),$("#input-level-"+a).prop("disabled",!0),$("#line-select-level-"+a).prop("disabled",!0))}F(b.MainLineStyle,"#slider-100",b.LevelFillsStyle);!0!=b.MainLineStyle.viewFill&&($("#control-background").prop("checked",!1),$("#slider-100").slider("disable"));!0!=b.LabelsStyle.view&&$("#control-labels").prop("checked",!1);I();$(".control-background-level").on("click",function(a){a=$(".control-background-level").index(this);$(this).is(":checked")?($("#slider-5-level-"+a).slider("enable"),
$("#color-background-level-"+a).spectrum("enable"),$("#input-level-"+a).prop("disabled",!1),$("#line-select-level-"+a).prop("disabled",!1),b.LevelsView[a]=!0):($("#slider-5-level-"+a).slider("disable"),$("#color-background-level-"+a).spectrum("disable"),$("#input-level-"+a).prop("disabled",!0),$("#line-select-level-"+a).prop("disabled",!0),b.LevelsView[a]=!1);b.Refresh()});G("#control-background","#slider-100");$(".class-input-level").on("change",function(){var a=$(".class-input-level").index(this);
""!=$(this).val()&&$.isNumeric($(this).val())&&($(this).attr("prevvalue",$(this).val()),h[a]=$(this).val(),b.Refresh())});$(".class-input-level").on("keydown",function(a){13==a.keyCode&&(a=$(".class-input-level").index(this),""!=$(this).val()&&$.isNumeric($(this).val())&&(h[a]=$(this).val(),b.Refresh()))});x(b.Coordinations,b.TimeScale,b);B(b);y();$("#chart-dialog").dialog("open")}catch(H){u()}}function S(a){b=a;a=!1==e.guiinit.cache?"?"+e.version.gui.name+(new Date).getTime():"?"+e.version.gui.name;
w("gannfan",v);a=e.guiinit.rootpath+"/ChartUI/gui/draw/fibo.htm"+a;if(e.navigator.XMLHttpRequest()){var c=new XMLHttpRequest,d=$.Deferred();c.open("get",a);c.onload=function(){var a=c.responseText;da($(a).find("#dlg-fibo"));d.resolve(a)};c.send();return d}return $.ajax({type:"GET",async:!0,dataType:"html",url:a,success:function(a){da($(a).find("#dlg-fibo"))}})}function da(a){$("#chart-dialog").html(a);try{var c=$("#tbody-levels"),d=e.patterns.draw.fibo_trendline.replace(/%border_style_pattern%/g,
e.patterns.draw.border_style);$(c).append(d);var k=b.MainLineStyle;z(k,"#trendline-width","#color-trendline","#line-select-trendline");A(k,"#trendline-width","#color-trendline","#line-select-trendline");var g=e.patterns.draw.fibo_levels.replace(/%border_style_pattern%/g,e.patterns.draw.border_style),h=b.Levels;if(null!=h)for(a=0;a<h.length;a++){var p=g.replace(/%order%/g,a).replace(/%levelindex%/g,a).replace(/%border_style_pattern%/g,e.patterns.draw.border_style).replace(/%input-value%/g,h[a]);$(c).append(p);
var l=b.LevelsStyle["level"+a],m=b.LevelFillsStyle["level"+a];C(l,"#slider-5-level-"+a);D(l,m,"#color-background-level-"+a);E(l,"#line-select-level-"+a);!1==b.LevelsView[a]&&($("#control-background-level-"+a).prop("checked",!1),$("#slider-5-level-"+a).slider("disable"),$("#color-background-level-"+a).spectrum("disable"),$("#input-level-"+a).prop("disabled",!0),$("#line-select-level-"+a).prop("disabled",!0))}F(b.MainLineStyle,"#slider-100",b.LevelFillsStyle);!0!=b.MainLineStyle.viewFill&&($("#control-background").prop("checked",
!1),$("#slider-100").slider("disable"));!0!=b.LabelsStyle.view&&$("#control-labels").prop("checked",!1);I();$(".control-background-level").on("click",function(a){a=$(".control-background-level").index(this);$(this).is(":checked")?($("#slider-5-level-"+a).slider("enable"),$("#color-background-level-"+a).spectrum("enable"),$("#input-level-"+a).prop("disabled",!1),$("#line-select-level-"+a).prop("disabled",!1),b.LevelsView[a]=!0):($("#slider-5-level-"+a).slider("disable"),$("#color-background-level-"+
a).spectrum("disable"),$("#input-level-"+a).prop("disabled",!0),$("#line-select-level-"+a).prop("disabled",!0),b.LevelsView[a]=!1);b.Refresh()});G("#control-background","#slider-100");$(".class-input-level").on("change",function(){var a=$(".class-input-level").index(this);""!=$(this).val()&&$.isNumeric($(this).val())&&($(this).attr("prevvalue",$(this).val()),h[a]=$(this).val(),b.Refresh())});$(".class-input-level").on("keydown",function(a){13==a.keyCode&&(a=$(".class-input-level").index(this),""!=
$(this).val()&&$.isNumeric($(this).val())&&(h[a]=$(this).val(),objshapeinfo.Refresh()))});x(b.Coordinations,b.TimeScale,b);B(b);y();$("#chart-dialog").dialog("open")}catch(H){u()}}function U(a){b=a;w("gannfan",v);ja(e.patterns.draw.forkform)}function ja(a){var c=b;$("#chart-dialog").html(a);try{var d=$("#tbody-levels"),k=e.patterns.draw.fork_trendline.replace(/%border_style_pattern%/g,e.patterns.draw.border_style);$(d).append(k);var g=c.MainLineStyle;z(g,"#median-width","#color-median","#line-select-median");
A(g,"#median-width","#color-median","#line-select-median");var h=e.patterns.draw.fork_levels,p=c.Levels;if(null!=p)for(a=0;a<p.length;a++){var l=h.replace(/%order%/g,a).replace(/%levelindex%/g,a).replace(/%border_style_pattern%/g,e.patterns.draw.border_style).replace(/%input-value%/g,p[a]);$(d).append(l);var m=c.LevelsStyle["level"+a],H=c.LevelFillsStyle["level"+a];C(m,"#slider-5-level-"+a);D(m,H,"#color-background-level-"+a);E(m,"#line-select-level-"+a);!1==c.LevelsView[a]&&($("#control-background-level-"+
a).prop("checked",!1),$("#slider-5-level-"+a).slider("disable"),$("#color-background-level-"+a).spectrum("disable"),$("#input-level-"+a).prop("disabled",!0),$("#line-select-level-"+a).prop("disabled",!0))}F(c.MainLineStyle,"#slider-100",c.LevelFillsStyle);!0!=c.MainLineStyle.viewFill&&($("#control-background").prop("checked",!1),$("#slider-100").slider("disable"));I();$(".control-background-level").on("click",function(a){a=$(this).is(":checked");var c=$(".control-background-level").index(this);a?
($("#slider-5-level-"+c).slider("enable"),$("#color-background-level-"+c).spectrum("enable"),$("#input-level-"+c).prop("disabled",!1),$("#line-select-level-"+c).prop("disabled",!1),b.LevelsView[c]=!0):($("#slider-5-level-"+c).slider("disable"),$("#color-background-level-"+c).spectrum("disable"),$("#input-level-"+c).prop("disabled",!0),$("#line-select-level-"+c).prop("disabled",!0),b.LevelsView[c]=!1);b.Refresh()});G("#control-background","#slider-100");$(".class-input-level").on("change",function(){var a=
$(".class-input-level").index(this);""!=$(this).val()&&$.isNumeric($(this).val())&&($(this).attr("prevvalue",$(this).val()),p[a]=$(this).val(),c.Refresh())});$(".class-input-level").on("keydown",function(a){13==a.keyCode&&(a=$(".class-input-level").index(this),""!=$(this).val()&&$.isNumeric($(this).val())&&(p[a]=$(this).val(),c.Refresh()))});x(c.Coordinations,c.TimeScale,c);y();$("#chart-dialog").dialog("open")}catch(v){u()}}function B(a){a=a.LabelsStyle;var c=e.commonutils.func.parseColorString(a.backgroundColor),
d="rgb(%r%, %g%, %b%)".replace("%r%",c[0]).replace("%g%",c[1]).replace("%b%",c[2]),c=c[3];J($("#background-labelcolor"),d);J($("#color-font"),a.fill);$("#label-bk-coloropacity").slider({min:0,max:100});$("#label-bk-coloropacity .gradient").css("background-image","linear-gradient(to left, #000 0%, transparent 100% )");c*=100;$("#label-bk-coloropacity").slider("option","value",c);!0!=a.viewBackground&&($("#label-background").prop("checked",!1),$("#label-bk-coloropacity").slider("disable"),$("#background-labelcolor").spectrum("disable"));
switch("bold"==a.fontWeight){case !0:$("#button_fontbold").removeClass("active").addClass("active");break;case !1:$("#button_fontbold").removeClass("active")}switch("italic"==a.fontStyle){case !0:$("#button_fontitalic").removeClass("active").addClass("active");break;case !1:$("#button_fontitalic").removeClass("active")}$("#dialog-fontsize-select").val(a.fontSize);$("#dialog-fontname-select").val(a.fontName);$("#button_fontbold").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?
b.LabelsStyle.fontWeight="bold":b.LabelsStyle.fontWeight="normal";b.Refresh()});$("#button_fontitalic").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?b.LabelsStyle.fontStyle="italic":b.LabelsStyle.fontStyle="normal";b.Refresh()});$("#dialog-fontsize-select").on("change",function(){b.LabelsStyle.fontSize=$(this).val();b.Refresh()});$("#dialog-fontname-select").on("change",function(){b.LabelsStyle.fontName=$(this).val();b.Refresh()});$("#label-background").on("click",
function(a){$(this).is(":checked")?($("#label-bk-coloropacity").slider("enable"),$("#background-labelcolor").spectrum("enable"),b.LabelsStyle.viewBackground=!0):($("#label-bk-coloropacity").slider("disable"),$("#background-labelcolor").spectrum("disable"),b.LabelsStyle.viewBackground=!1);b.Refresh()});$("#label-bk-coloropacity").on("slide slidechange",function(){var a=$(this).slider("option","value")/100,c=e.commonutils.func.parseColorString(b.LabelsStyle.backgroundColor),a="rgba(%r%, %g%, %b%, %o%)".replace("%r%",
c[0]).replace("%g%",c[1]).replace("%b%",c[2]).replace("%o%",a);b.LabelsStyle.backgroundColor=a;b.Refresh()});$("#control-labels").on("click",function(a){$(this).is(":checked")?b.LabelsStyle.view=!0:b.LabelsStyle.view=!1;b.Refresh()});$("#color-font").on("change",function(){var a=$(this).spectrum("get").toHexString(),a=e.commonutils.func.parseColorString(a),a="rgba(%r%, %g%, %b%, %o%)".replace("%r%",a[0]).replace("%g%",a[1]).replace("%b%",a[2]).replace("%o%","1");b.LabelsStyle.fill=a;b.Refresh()});
$("#background-labelcolor").on("change",function(){var a=$(this).spectrum("get").toHexString(),c=e.commonutils.func.parseColorString(b.LabelsStyle.backgroundColor)[3],a=e.commonutils.func.parseColorString(a),c="rgba(%r%, %g%, %b%, %o%)".replace("%r%",a[0]).replace("%g%",a[1]).replace("%b%",a[2]).replace("%o%",c);b.LabelsStyle.backgroundColor=c;b.Refresh()})}function x(a,b,d){var k=$("#tbody-coordinates"),g=e.patterns.draw.coordinates,h=/%id%/g,p=/%pricevalue%/g,l=/%datevalue%/g;K=[];if(null!=a)for(var m=
0;m<a.length;m++){var u=g.replace(h,m).replace(p,a[m].yData).replace(l,e.chart.formatDate(a[m].xData));K.push(a[m].xData);$(k).append(u);$("#date-spinner-"+m).spinner({spin:function(g,k){$(this).attr("id").toString().replace("-spinner","");var h=$(this).attr("idx"),p=$("#date-"+h),n=K[h];$(this).spinner("value");var f=0;if($(this).val()>k.value)f=-1;else if($(this).val()<k.value)f=1;else return;var n=n.replace(/-/g,"-").replace(/:/g,"-").replace(/ /g,"-").split("-"),l=parseInt(n[0]),m=parseInt(n[1])-
1,q=parseInt(n[2]),r=parseInt(n[3]),s=parseInt(n[4]),t=parseInt(n[5]),n=new Date(l,m,q,r,s,t);switch(b){case "tick":case "Tick":case "TICK":case "1T":case "1t":f*=1;case "1m":case "1M":n=new Date(l,m,q,r,s+1*f,t);break;case "5m":case "5M":f*=5;n=new Date(l,m,q,r,s+f,t);break;case "10M":case "10m":f*=10;n=new Date(l,m,q,r,s+f,t);break;case "15M":case "15m":f*=15;n=new Date(l,m,q,r,s+f,t);break;case "30M":case "30m":f*=30;n=new Date(l,m,q,r,s+f,t);break;case "60M":case "60m":f*=1;n=new Date(l,m,q,r+
f,s,t);break;case "2H":case "2h":f*=2;n=new Date(l,m,q,r+f,s,t);break;case "4H":case "4h":f*=4;n=new Date(l,m,q,r+f,s,t);break;case "6H":case "6h":f*=6;n=new Date(l,m,q,r+f,s,t);break;case "8H":case "8h":f*=8;n=new Date(l,m,q,r+f,s,t);break;case "10H":case "10h":f*=10;n=new Date(l,m,q,r+f,s,t);break;case "12H":case "12h":f*=12;n=new Date(l,m,q,r+f,s,t);break;case "14H":case "14h":f*=14;n=new Date(l,m,q,r+f,s,t);break;case "1D":case "1d":f*=1;n=new Date(l,m,q+f,r,s,t);break;case "1W":case "1w":f*=
7;n=new Date(l,m,q+f,r,s,t);break;case "1MON":case "1mon":case "1N":case "1n":f*=1;n=new Date(l,m+f,q,r,s,t);break;case "1Q":case "1q":case "3N":case "3n":f*=3;n=new Date(l,m+f,q,r,s,t);break;case "6MON":case "6mon":case "6N":case "6n":f*=6;n=new Date(l,m+f,q,r,s,t);break;case "1Y":case "1y":f*=1,n=new Date(l+f,m,q,r,s,t)}f=n.getFullYear().toString();l=("0"+(n.getMonth()+1).toString()).slice(-2);m=("0"+n.getDate().toString()).slice(-2);q=("0"+n.getHours().toString()).slice(-2);r=("0"+n.getMinutes().toString()).slice(-2);
n=("0"+n.getSeconds().toString()).slice(-2);n=f+"-"+l+"-"+m+" "+q+":"+r+":"+n;p.val(e.chart.formatDate(n));K[h]=n;a[h].xData=n;d.Refresh()}})}$(".inputprice").on("change",function(){var b=$(".inputprice").index(this);""!=$(this).val()&&$.isNumeric($(this).val())&&($(this).attr("prevvalue",$(this).val()),a[b].yData=$(this).val(),d.Refresh())});$(".inputprice").on("keydown",function(b){13==b.keyCode&&(b=$(".inputprice").index(this),""!=$(this).val()&&$.isNumeric($(this).val())&&(a[b].yData=$(this).val(),
d.Refresh()))});I()}function w(a,b){function d(a){$(a).find(".spectrum-color").each(function(){$(this).spectrum("destroy")})}function k(a){var b=e.patterns.common.eye_orange.replace(/%icon-source%/g,L.icon_source).replace(/%icon-prefix%/g,L.icon_prefix);$(a).find(".ui-dialog-buttonset").prepend(b).on("click",function(){var a=$(".chart-ui-dialog.draw-dialog").css("opacity"),a=1==a?.5:1,b=1==a?"":2;$(".chart-ui-dialog.draw-dialog").css("opacity",a);$(this).css("opacity",b)})}$('<div id="chart-dialog" title="'+
b+'"></div>').insertAfter("body");var g="Close",h="";"undefined"!=typeof e.localizationobj&&(g=e.localizationobj.gui.returnLocalizationString("dialogs.common.button-close","Close"));"undefined"!=typeof e.init.TemplateName&&(h=e.init.TemplateName);var p="";"rtl"==e.localizationobj.gui.returnCurrentLanguage().direction&&(p="dir-rtl");$("#chart-dialog").dialog({dialogClass:"chart-ui-dialog draw-dialog "+h+" "+p,draggable:!0,autoOpen:!1,resizable:!1,closeOnEscape:!0,width:"auto",modal:!0,open:function(a,
b){k($(this).parent());$(".ui-widget-overlay").last().addClass("chart-ui-widget-overlay");if(e.api.props){var c=e.api.props.chart.gui.layout.zindex_dialog;$(".chart-ui-widget-overlay").css({"z-index":c});$(".chart-ui-dialog").css({"z-index":c})}"undefined"!=typeof e.localizationobj&&e.localizationobj.gui.updateFromDataLang($(this).parent());$(".ui-widget-overlay").bind("click",function(){$("#chart-dialog").dialog("close")});u()},close:function(a,b){d($(this).parent());$("#chart-dialog").remove();
$("div.chart-ui-dialog.draw-dialog  adv-buttons."+L.icon_prefix+"eye-orange").off().remove();$("div.chart-ui-dialog.draw-dialog").off().remove();$(this).off().empty().remove();return!1},buttons:[{id:"btn-dialogs-close",text:g,click:function(){$(this).dialog("close")}}]})}function J(a,b,d){$(a).spectrum({color:b,showPalette:!0,showPaletteOnly:!1,clickoutFiresChange:!1,showButtons:!1,palette:["rgb(0, 0, 0);{rgb(66, 66, 66);{rgb(101, 101, 101);{rgb(152, 152, 152);{rgb(182, 182, 182);{rgb(203, 203, 203);{rgb(216, 216, 216);{rgb(238, 238, 238);{rgb(242, 242, 242);{rgb(255, 255, 255);".split("{"),
"rgb(151, 0, 0);{rgb(255, 0, 0);{rgb(255, 152, 0);{rgb(255, 255, 0);{rgb(0, 255, 0);{rgb(0, 255, 255);{rgb(73, 133, 231);{rgb(0, 0, 255);{rgb(152, 0, 255);{rgb(255, 0, 255);".split("{"),"rgb(230, 184, 175);{rgb(244, 204, 204);{rgb(252, 229, 205);{rgb(255, 242, 204);{rgb(217, 234, 211);{rgb(208, 224, 227);{rgb(201, 218, 248);{rgb(207, 226, 243);{rgb(217, 210, 233);{rgb(234, 209, 220);".split("{"),"rgb(221, 126, 107);{rgb(234, 153, 153);{rgb(249, 203, 156);{rgb(255, 229, 153);{rgb(182, 215, 168);{rgb(162, 196, 201);{rgb(164, 194, 244);{rgb(159, 197, 232);{rgb(180, 167, 214);{rgb(213, 166, 189);".split("{"),
"rgb(204, 65, 37);{rgb(224, 102, 102);{rgb(246, 178, 107);{rgb(255, 217, 102);{rgb(147, 196, 125);{rgb(118, 165, 175);{rgb(109, 158, 235);{rgb(111, 168, 220);{rgb(142, 124, 195);{rgb(194, 123, 160);".split("{"),"rgb(166, 28, 0);{rgb(204, 0, 0);{rgb(230, 145, 56);{rgb(241, 194, 50);{rgb(106, 168, 79);{rgb(69, 129, 142);{rgb(60, 120, 216);{rgb(61, 133, 198);{rgb(103, 78, 167);{rgb(166, 77, 121);".split("{"),"rgb(133, 32, 12);{rgb(153, 0, 0);{rgb(180, 95, 6);{rgb(191, 144, 0);{rgb(56, 118, 29);{rgb(19, 79, 92);{rgb(17, 85, 204);{rgb(11, 83, 148);{rgb(53, 28, 117);{rgb(116, 27, 71);".split("{"),
"rgb(91, 15, 0);{rgb(102, 0, 0);{rgb(120, 63, 4);{rgb(127, 96, 0);{rgb(39, 78, 19);{rgb(12, 52, 61);{rgb(28, 69, 135);{rgb(7, 55, 99);{rgb(32, 18, 77);{rgb(76, 17, 48);".split("{")]})}function y(){$(".properties-tabs").delegate("a","click",function(){var a=$(this).index();$(".main-properties").each(function(){$(this).css("display","none")});$(".properties-tabs-label").each(function(){$(this).removeClass("active")});$(".main-properties").eq(a).css("display","block");$(this).addClass("active")})}function I(){$(".chart-ui-dialog .onlynumeric").prochart_numeric()}
function z(a,b,d,k,g,h){"undefined"==typeof g&&(g=1);"undefined"==typeof h&&(h=6);var p=e.commonutils.func.parseColorString(a.stroke),p="rgb(%r%, %g%, %b%)".replace("%r%",p[0]).replace("%g%",p[1]).replace("%b%",p[2]);J($(d),p);d=a.strokeWidth;$(b).slider({min:g,max:h});$(b).slider("option","value",d);a=a.dashArray;repx=/px/g;"undefined"!=typeof a&&$(k).val(a)}function aa(a,b,d,k){var g=e.commonutils.func.parseColorString(a.fill),g="rgb(%r%, %g%, %b%)".replace("%r%",g[0]).replace("%g%",g[1]).replace("%b%",
g[2]);J($(d),g,k+" div.gradient");$(k+" div.gradient").css("background-image","linear-gradient(to left, "+g+" 0%, transparent 100% )");$(k).slider({min:0,max:100});g=a.fillOpacity;g*=100;$(k).slider("option","value",g);!0!=a.viewFill?($(b).prop("checked",!1),$(d).spectrum("disable"),$(k).slider("disable")):($(b).prop("checked",!0),$(d).spectrum("enable"),$(k).slider("enable"))}function A(a,c,d,e){$(d).on("change",function(){$(this).spectrum("get").toHexString();var a=$(this).spectrum("get").toRgb(),
a="rgba(%r%, %g%, %b%, %a%)".replace("%r%",a.r).replace("%g%",a.g).replace("%b%",a.b).replace("%a%",1);b.MainLineStyle.stroke=a;b.MainLineStyle.strokeOpacity=0;b.Refresh()});$(c).on("slidechange",function(){var c=$(this).slider("option","value");a.strokeWidth=c;b.Refresh()});$(e).on("change",function(){var a=$(this).val();b.MainLineStyle.dashArray=a;b.Refresh()})}function ba(a,c,d,k){$(d).on("change",function(){var c=$(this).spectrum("get").toHexString(),d=$(this).spectrum("get").toRgb();$(k+" div.gradient").css("background-image",
"linear-gradient(to left, "+c+" 0%, transparent 100% )");c="rgba(%r%, %g%, %b%, %a%)".replace("%r%",d.r).replace("%g%",d.g).replace("%b%",d.b).replace("%a%",a.fillOpacity);a.fill=c;b.Refresh()});$(k).on("slide slidechange",function(){var c=$(this).slider("option","value")/100;b.MainLineStyle.fillOpacity=c;c=e.commonutils.func.parseColorString(b.MainLineStyle.fill);c="rgba(%r%, %g%, %b%, %a%)".replace("%r%",c[0]).replace("%g%",c[1]).replace("%b%",c[2]).replace("%a%",a.fillOpacity);b.MainLineStyle.fill=
c;b.Refresh()});$(c).on("click",function(a){$(this).is(":checked")?($(k).slider("enable"),$(d).spectrum("enable"),$(d).trigger("change"),b.MainLineStyle.viewFill=!0):($(k).slider("disable"),$(d).spectrum("disable"),b.MainLineStyle.viewFill=!1);b.Refresh()})}function ca(a,c,d){null!=a.Settings&&(!0!=a.Settings.ExtendLeft&&$(c).prop("checked",!1),!0!=a.Settings.ExtendRight&&$(d).prop("checked",!1));$(d).on("click",function(c){c=$(this).is(":checked");null==a.Settings&&(a.Settings={});b.Settings.ExtendRight=
c;b.Refresh()});$(c).on("click",function(a){a=$(this).is(":checked");b.Settings.ExtendLeft=a;b.Refresh()})}function C(a,c){var d=a.strokeWidth;$(c).slider({min:1,max:6});$(c).slider("option","value",d);$(c).on("slidechange",function(){var c=$(this).slider("option","value");a.strokeWidth=c;b.Refresh()})}function D(a,c,d){c=a.stroke;a=e.commonutils.func.parseColorString(a.stroke);"rgb(%r%, %g%, %b%)".replace("%r%",a[0]).replace("%g%",a[1]).replace("%b%",a[2]);J($(d),c);$(d).on("change",function(){var a=
$(d).attr("levelindex"),c=$(this).spectrum("get").toHexString(),h=1;null!=b.LevelFillsStyle&&(h=e.commonutils.func.parseColorString(b.LevelFillsStyle["level"+a].fill)[3]);var c=e.commonutils.func.parseColorString(c),p="rgba(%r%, %g%, %b% ,%o%)".replace("%r%",c[0]).replace("%g%",c[1]).replace("%b%",c[2]).replace("%o%",1);b.LevelsStyle["level"+a].stroke=p;h="rgba(%r%, %g%, %b%, %o%)".replace("%r%",c[0]).replace("%g%",c[1]).replace("%b%",c[2]).replace("%o%",h);null!=b.LevelFillsStyle&&(b.LevelFillsStyle["level"+
a].fill=h);b.Refresh()})}function E(a,c){var d=a.dashArray;"undefined"!=typeof d&&$(c).val(d);$(c).on("change",function(){var a=$(c).attr("levelindex");d=$(this).val();b.LevelsStyle["level"+a].dashArray=d;b.Refresh()})}function F(a,c,d){$(c).slider({min:0,max:100});$(c+" div.gradient").css("background-image","linear-gradient(to left, #000 0%, transparent 100% )");a=a.fillOpacity;"undefined"!=typeof a&&(a*=100,$(c).slider("option","value",a));$(c).on("slide slidechange",function(){var a=$(this).slider("option",
"value")/100;$(d).css("fill-opacity",a);for(var c=b.Levels.length,h=0;h<c;h++){var p=b.LevelFillsStyle["level"+h];"undefined"!=typeof p&&(p=e.commonutils.func.parseColorString(p.fill),p="rgba(%r%, %g%, %b%, %o%)".replace("%r%",p[0]).replace("%g%",p[1]).replace("%b%",p[2]).replace("%o%",a),b.LevelFillsStyle["level"+h].fill=p)}b.MainLineStyle.fillOpacity=a;b.Refresh()})}function G(a,c){$(a).on("click",function(a){a=0;$(this).is(":checked")?($(c).slider("enable"),a=$(c).slider("option","value")/100,
b.MainLineStyle.viewFill=!0):($(c).slider("disable"),a=0,b.MainLineStyle.viewFill=!1);for(var k=b.Levels.length,g=0;g<k;g++){var h=b.LevelFillsStyle["level"+g];"undefined"!=typeof h&&(h=e.commonutils.func.parseColorString(h.fill),h="rgba(%r%, %g%, %b%, %o%)".replace("%r%",h[0]).replace("%g%",h[1]).replace("%b%",h[2]).replace("%o%",a),b.LevelFillsStyle["level"+g].fill=h)}b.Refresh()})}function u(){"undefined"!=typeof e.preloadobj&&e.preloadobj.endPreload()}var M={},e=ea,b=null,v="",K=[];e.api.debug.getLogger("prochart.gui.draw");
var L=e.api.layout.getbuttonStyle();e.drawobj=M;M.gui={openDialog:N,drawShape:O,drawTimezone:P,drawCircleLine:Q,drawSquare:R,drawFibo:S,drawFiboArc:T,drawFork:U,drawLinereg:V,drawLine:W,drawParallel:X,drawText:Y,drawVHLine:Z};e.chart.UI.funcOnShapeDblClicked=N;return M};
