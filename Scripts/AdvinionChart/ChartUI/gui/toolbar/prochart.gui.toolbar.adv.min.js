function ProChart_InitToolbarAdv(T){function D(c){var a="";if("undefined"!=typeof c.buttonalign)switch(c.buttonalign){case "left":a+=" fl-l";break;case "right":a+=" fl-r"}return a}function U(c){var a="",b=[];"undefined"!=typeof l.chart.TimeFrame&&(l.chart.TimeFrame.toUpperCase(),l.chart.TimeFrame.toLowerCase());c=c.toolbars;for(var d=0;d<c.length;d++){var f=c[d],m=l.commonutils.func.returnShortUniqID(),k="",e="";f.guiid=m;"undefined"!=typeof f.location&&(k=k+" loc-"+f.location);e=m;"undefined"!=typeof f.id&&
(e=f.id);var h="";"undefined"!=typeof f.style&&(h=f.style);m=l.patterns.toolbar.toolbar.replace(E,"").replace(/%style%/g,h).replace(/%css%/g,k).replace(/%tid%/g,e).replace(/%id%/g,m);k="";void 0!=f.more&&(k=l.patterns.toolbar.toolbar_more);var n="",e=void 0;void 0!=f.more&&"undefined"!=typeof f.more.closebyclick&&!0==f.more.closebyclick&&(e=" tlb-more-a-closebyclick");h="a-bottom";void 0!=f.more&&"undefined"!=typeof f.more.possition&&(h="a-"+f.more.possition);n=l.api.layout.getbuttonStyle();k=k.replace(/%icon-source%/g,
n.icon_source).replace(/%icon-more%/g,n.icon_prefix+"icon-more").replace(/%css-more-items%/g," "+h);k="";for(h=0;h<f.items.length;h++)switch(n=f.items[h],V.debug(n.type),n.type){case "button-group-charttype":n=G({morecssclosebyclick:e,item:n,toolbarobj:f});m=m.replace(/%html%/g,n.toolbar+"%html%");void 0!=f.more&&(k=k.replace(/%html%/g,n.toolbarmore+"%html%"));break;case "button-group-indicator":n=H({morecssclosebyclick:e,item:n,toolbarobj:f});m=m.replace(/%html%/g,n.toolbar+"%html%");void 0!=f.more&&
(k=k.replace(/%html%/g,n.toolbarmore+"%html%"));break;case "button-group-timeframe":n=I({morecssclosebyclick:e,item:n,toolbarobj:f});m=m.replace(/%html%/g,n.toolbar+"%html%");void 0!=f.more&&(k=k.replace(/%html%/g,n.toolbarmore+"%html%"));break;case "caption":n=J({item:n,toolbarobj:f});m=m.replace(/%html%/g,n+"%html%");break;case "space":n=K({item:n,toolbarobj:f});m=m.replace(/%html%/g,n+"%html%");break;case "button":n=L({morecssclosebyclick:e,item:n,toolbarobj:f});m=m.replace(/%html%/g,n.button+
"%html%");void 0!=f.more&&(k=k.replace(/%html%/g,n.buttonmore+"%html%"));break;case "button-custom":n=W({morecssclosebyclick:e,item:n,toolbarobj:f});m=m.replace(/%html%/g,n.button+"%html%");void 0!=f.more&&(k=k.replace(/%html%/g,n.buttonmore+"%html%"));break;case "item":n=M({item:n,morecssclosebyclick:e,toolbarobj:f});m=m.replace(/%html%/g,n.button+"%html%");void 0!=f.more&&(k=k.replace(/%html%/g,n.buttonmore+"%html%"));break;case "button-group":n=N({item:n,toolbarobj:f}),m=m.replace(/%html%/g,n.toolbargroup+
"%html%"),Z(b,n.eventsInGroup),void 0!=f.more&&(k=k.replace(/%html%/g,n.toolbarmore+"%html%"))}void 0!=f.more&&(k=k.replace(/%html%/g,""));m=m.replace(/\n|\r/g,"").replace(/%html%/g,k);if(f.parent&&$.prochartcache.get(g.parent,"#"+f.parent)){f=$.prochartcache.get(g.parent,"#"+f.parent);f.append(m);var t={};$.prochartcache.update(f,".tlb-more-item");$.prochartcache.get(f,".tlb-more-item")&&$.prochartcache.get(f,".tlb-more-item").each(function(){var a=$(this).find("button").attr("tid");null==t[a]?t[a]=
!0:$(this).remove()})}a+=m}return{returnstring:a,additionaEvents:b}}function Z(c,a){if(a)for(var b=0;b<a.length;b++)c.push(a[b])}function aa(){"undefined"!=typeof l.chart.TimeFrame&&(l.chart.TimeFrame.toUpperCase(),l.chart.TimeFrame.toLowerCase());for(var c=l.currenlayout.toolbars,a=0;a<c.length;a++){var b=c[a],d=l.commonutils.func.returnShortUniqID(),f="",m="";b.guiid=d;"undefined"!=typeof b.location&&(f=f+" loc-"+b.location);m=d;"undefined"!=typeof b.id&&(m=b.id);var k="";"undefined"!=typeof b.style&&
(k=b.style);d=l.patterns.toolbar.toolbar.replace(E,"").replace(/%style%/g,k).replace(/%css%/g,f).replace(/%tid%/g,m).replace(/%id%/g,d);f="";void 0!=b.more&&(f=l.patterns.toolbar.toolbar_more);var e="",m=void 0;void 0!=b.more&&"undefined"!=typeof b.more.closebyclick&&!0==b.more.closebyclick&&(m=" tlb-more-a-closebyclick");k="a-bottom";void 0!=b.more&&"undefined"!=typeof b.more.possition&&(k="a-"+b.more.possition);e=l.api.layout.getbuttonStyle();f=f.replace(/%icon-source%/g,e.icon_source).replace(/%icon-more%/g,
e.icon_prefix+"icon-more").replace(/%css-more-items%/g," "+k);for(k=0;k<b.items.length;k++)switch(e=b.items[k],V.debug(e.type),e.type){case "button-group-charttype":e=G({morecssclosebyclick:m,item:e,toolbarobj:b});d=d.replace(/%html%/g,e.toolbar+"%html%");void 0!=b.more&&(f=f.replace(/%html%/g,e.toolbarmore+"%html%"));break;case "button-group-indicator":e=H({morecssclosebyclick:m,item:e,toolbarobj:b});d=d.replace(/%html%/g,e.toolbar+"%html%");void 0!=b.more&&(f=f.replace(/%html%/g,e.toolbarmore+"%html%"));
break;case "button-group-timeframe":e=I({morecssclosebyclick:m,item:e,toolbarobj:b});d=d.replace(/%html%/g,e.toolbar+"%html%");void 0!=b.more&&(f=f.replace(/%html%/g,e.toolbarmore+"%html%"));break;case "caption":e=J({item:e,toolbarobj:b});d=d.replace(/%html%/g,e+"%html%");break;case "space":e=K({item:e,toolbarobj:b});d=d.replace(/%html%/g,e+"%html%");break;case "button":e=L({item:e,morecssclosebyclick:m,toolbarobj:b});d=d.replace(/%html%/g,e.button+"%html%");void 0!=b.more&&(f=f.replace(/%html%/g,
e.buttonmore+"%html%"));break;case "button-custom":e=W({item:e,morecssclosebyclick:m,toolbarobj:b});d=d.replace(/%html%/g,e.button+"%html%");void 0!=b.more&&(f=f.replace(/%html%/g,e.buttonmore+"%html%"));break;case "item":e=M({morecssclosebyclick:m,item:e});d=d.replace(/%html%/g,e.button+"%html%");void 0!=b.more&&(f=f.replace(/%html%/g,e.buttonmore+"%html%"));break;case "button-group":e=N({item:e,toolbarobj:b}),d=d.replace(/%html%/g,e.toolbargroup+"%html%"),void 0!=b.more&&(f=f.replace(/%html%/g,
e.toolbarmore+"%html%"))}void 0!=b.more&&(f=f.replace(/%html%/g,""));d=d.replace(/\n|\r/g,"").replace(/%html%/g,f);if(b.parent&&$.prochartcache.get(g.parent,"#"+b.parent)){b=$.prochartcache.get(g.parent,"#"+b.parent);b.append(d);var h={};$.prochartcache.update(b,".tlb-more-item");$.prochartcache.get(b,".tlb-more-item")&&$.prochartcache.get(b,".tlb-more-item").each(function(){var a=$(this).find("button").attr("tid");null==h[a]?h[a]=!0:$(this).remove()})}}if($.prochartcache.get(g.parent,"button.change-typechart"))$.prochartcache.get(g.parent,
"button.change-typechart").on("click",function(){var a=$(this).attr("tid");$.prochartcache.get(g.parent,"button.change-typechart")&&$.prochartcache.get(g.parent,"button.change-typechart").removeClass("button-selected");"undefined"!=typeof l.chart.ChangePriceType&&(l.chart.ChangePriceType(a),!0==l.bi.status&&l.bi.addt2BI("change price type: "+a));$(this).hasClass("tlb-a-closebyclick")&&B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&C($(this));
$(this).addClass("button-selected");return!1});if($.prochartcache.get(g.parent,"button.change-timeframe"))$.prochartcache.get(g.parent,"button.change-timeframe").on("click",function(){var a=$(this).attr("tid");$.prochartcache.get(g.parent,"button.change-timeframe")&&$.prochartcache.get(g.parent,"button.change-timeframe").removeClass("button-selected");"undefined"!=typeof l.chart.ChangeTimeScale&&(l.chart.ChangeTimeScale(a),!0==l.bi.status&&l.bi.addt2BI("change timescale: "+a));$(this).hasClass("tlb-a-closebyclick")&&
B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&C($(this));$(this).addClass("button-selected");return!1});if($.prochartcache.get(g.parent,"button.button-action"))$.prochartcache.get(g.parent,"button.button-action").on("click",function(){var a=$(this).attr("tid");if("undefined"!=typeof a&&"undefined"!=typeof l.actions){var c=$(this).attr("action");"undefined"!=typeof c&&""!=c?l.actions.action(c,a):l.actions.action(a);$(this).hasClass("tlb-a-closebyclick")&&
B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&C($(this))}return!1});if($.prochartcache.get(g.parent,"button.button-action-custom"))$.prochartcache.get(g.parent,"button.button-action-custom").on("click",function(){var a=$(this).attr("tid");if("undefined"!=typeof a&&"undefined"!=typeof l.actions){if(typeof l.events.toolbar.onCustomButtonClick==typeof Function)l.events.toolbar.onCustomButtonClick(a);$(this).hasClass("tlb-a-closebyclick")&&
B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&C($(this))}return!1});if($.prochartcache.get(g.parent,"button.button-more"))$.prochartcache.get(g.parent,"button.button-more").on("click",function(){"none"==$(this).parent().find(".tlb-more-items").css("display")?($.prochartcache.get(g.parent,".tlb-button-groups")&&$.prochartcache.get(g.parent,".tlb-button-groups").css("display","none"),$.prochartcache.get(g.parent,".tlb-more-items")&&$.prochartcache.get(g.parent,
".tlb-more-items").css("display","none"),P($(this)),"undefined"!=typeof l.menuobj&&l.menuobj.gui.hidemenus()):z($(this))});if($.prochartcache.get(g.parent,"button.button-group"))$.prochartcache.get(g.parent,"button.button-group").on("click",function(){"none"==$(this).parent().find(">.tlb-button-groups").css("display")?($(this).parent().find(">.tlb-button-groups").css("visibility","hidden").css("display","block"),$.prochartcache.get(g.parent,">.tlb-button-groups")&&$.prochartcache.get(g.parent,">.tlb-button-groups").css("display",
"none"),$.prochartcache.get(g.parent,".tlb-more-items")&&$.prochartcache.get(g.parent,".tlb-more-items").css("display","none"),1>=$(this).parents(".tlb-item-group").length&&$.prochartcache.get(g.parent,".tlb-button-groups")&&$.prochartcache.get(g.parent,".tlb-button-groups").css("display","none"),$(this).closest("ul").find("li >.tlb-button-groups").css("display","none"),$.prochartcache.get(l.toolbaradvobj.parent,"button.button-group")&&$.prochartcache.get(l.toolbaradvobj.parent,"button.button-group").removeClass("highlightedIconGroup"),
$(this).parents(".tlb-item-group").each(function(){$(this).find(">.button-group").addClass("highlightedIconGroup")}),O($(this).parent()),"undefined"!=typeof l.menuobj&&l.menuobj.gui.hidemenus()):Q($(this).parent());"undefined"!=typeof l.menuobj&&l.menuobj.gui.hidemenus()});F()}function H(){var c="",a="",b=objargs.item,d="";objargs.cssoptions&&(d=objargs.cssoptions);var f="";objargs.morecssclosebyclick&&(f=objargs.morecssclosebyclick);var m="";b.csstyle&&(m='style="'+b.csstyle+'"');var k="";b.callback&&
(k=k+' callbackfamily="'+b.callback+'"');b.callbackarg&&(k=k+' callbackarg="'+JSON.stringify(b.callbackarg).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');for(var b=l.init.indicators,e=0;e<b.length;e++)var h=b[e],n=l.patterns.toolbar.item_noicon.replace(/%id%/g,h.id).replace(/%localization%/g,h.localize).replace(/%css%/g,"undefined"!=typeof h.css?h.css+d:d).replace(/%icon%/g,"undefined"!=typeof h.icon?h.icon:"").replace(/%action%/g,"undefined"!=typeof h.action?
h.action:"add-indicator").replace(/%csstyle%/g,m).replace(/%attributes%/g,k).replace(/%caption%/g,h.d),c=c+n,h=l.patterns.toolbar.toolbar_more_item.replace(/%id%/g,h.id).replace(/%localization%/g,h.localize).replace(/%css%/g,"undefined"!=typeof h.css?h.css+" button-action "+f:" button-action "+f).replace(/%icon%/g,"undefined"!=typeof h.icon&&""!=h.icon?h.icon:"no-icon").replace(/%caption%/g,h.caption),a=a+h;return{toolbar:c,toolbarmore:a}}function G(c){var a="",b="",d="";"undefined"!=typeof l.chart.PriceChartType&&
(d=l.chart.PriceChartType);var f=c.item,m="";c.cssoptions&&(m=c.cssoptions);var k="";c.morecssclosebyclick&&(k=c.morecssclosebyclick);c="icon-button";var e="";try{if("undefined"!=typeof l.currenlayout.buttontype)switch(l.currenlayout.buttontype){case "icon":c="icon-button";break;case "fonticon":c="font-icon";e="iconfont-";break;default:c="icon-button"}}catch(h){}var n="";f.csstyle&&(n='style="'+f.csstyle+'"');var g="";f.callback&&(g=g+' callbackfamily="'+f.callback+'"');f.callbackarg&&(g=g+' callbackarg="'+
JSON.stringify(f.callbackarg).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');for(var f=l.init.charttype,p=0;p<f.length;p++)var r=f[p],q=l.patterns.toolbar.button_charttype.replace(/%icon-source%/g,c).replace(E,"").replace(/%id%/g,r.id).replace(/%css%/g,"undefined"!=typeof r.css?r.css+m:m).replace(/%icon%/g,e+r.id).replace(/%caption%/g,r.n).replace(/%hide%/g,1==r.f?"":"hideobj").replace(/%csstyle%/g,n).replace(/%attributes%/g,g).replace(/%selected%/g,null==
d||r.id!=d?"":"button-selected"),a=a+q,q=l.patterns.toolbar.toolbar_more_item.replace(E,"").replace(/%icon-source%/g,c).replace(/%id%/g,r.id).replace(/%css%/g,("undefined"!=typeof r.css?r.css+k:k)+"  change-typechart "+(1==r.f?"":"hideobj")).replace(/%icon%/g,e+r.id).replace(/%caption%/g,r.n).replace(/%localization%/g,"menu.charttype."+r.id).replace(/%selected%/g,null==d||r.id!=d?"":"button-selected"),b=b+q;return{toolbar:a,toolbarmore:b}}function X(c){var a="",b="",d="",f=c.item;l.chart.PriceChartType&&
(d=l.chart.PriceChartType);var m="";c.cssoptions&&(m=c.cssoptions);var k="";c.morecssclosebyclick&&(k=c.morecssclosebyclick);c=l.init.charttype;for(var e=0;e<c.length;e++){var h=c[e],n="";null!=d&&h.id==d&&(n+=" button-selected ");0==h.f&&(n+="hideobj ");var n=n+" change-typechart "+m,g="icon-button",p="";try{if("undefined"!=typeof l.currenlayout.buttontype)switch(l.currenlayout.buttontype){case "icon":g="icon-button";break;case "fonticon":g="font-icon";p="iconfont-";break;default:g="icon-button"}}catch(r){}n=
l.patterns.toolbar.item.replace(/%icon-source%/g,g).replace(/%id%/g,h.id).replace(/%localization%/g,"menu.charttype."+h.id).replace(/%css%/g,n).replace(/%icon%/g,p+h.id).replace(/%action%/g,"undefined"!=typeof f.action?f.action:"").replace(/%caption%/g,h.n);a+=n;n=l.patterns.toolbar.toolbar_more_item.replace(/%icon-source%/g,g).replace(E,"").replace(/%id%/g,h.id).replace(/%css%/g,("undefined"!=typeof h.css?h.css+k:k)+"  change-typechart "+(1==h.f?"":"hideobj")).replace(/%icon%/g,p+h.id).replace(/%caption%/g,
h.n).replace(/%localization%/g,"menu.charttype."+h.id).replace(/%selected%/g,null==d||h.id!=d?"":"button-selected");b+=n}return{toolbar:a,toolbarmore:b}}function I(c){var a=c.item,b="",d="",f="",m="",k="";c.cssoptions&&(k=c.cssoptions);var e="";c.morecssclosebyclick&&(e=c.morecssclosebyclick);"undefined"!=typeof l.chart.TimeFrame&&(f=l.chart.TimeFrame.toUpperCase(),m=l.chart.TimeFrame.toLowerCase());c=!1;"undefined"!=typeof a&&"undefined"!=typeof a.captionview&&(c=a.captionview,!0==c&&(k+=" onlycaption-view onlycaption-timeframe"));
var h=!1;"undefined"!=typeof a&&"undefined"!=typeof a.viewall&&(h=a.viewall);for(var n=l.init.timeframe,g=0;g<n.length;g++){var p=n[g],r="",q=l.api.timeframes.getTimeframeView(),u="icon-button",w="";try{if("undefined"!=typeof l.currenlayout.buttontype)switch(l.currenlayout.buttontype){case "icon":u="icon-button";break;case "fonticon":u="font-icon";w="iconfont-";break;default:u="icon-button"}}catch(v){}var A="";a.csstyle&&(A='style="'+a.csstyle+'"');var x="";a.callback&&(x=x+' callbackfamily="'+a.callback+
'"');a.callbackarg&&(x=x+' callbackarg="'+JSON.stringify(a.callbackarg).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');switch(q){case "icon":r=l.patterns.toolbar.button_timeframe.replace(/%icon-source%/g,u).replace(/%id%/g,p.id).replace(/%caption%/g,p.n).replace(/%icon%/g,w+R(p.id)).replace(/%hide%/g,1==p.f||!0==h?"":"hideobj").replace(/%css%/g,"undefined"==typeof p.css?k+" timeframe-icon-type":p.css+k+" timeframe-icon-type").replace(/%csstyle%/g,A).replace(/%attributes%/g,
x).replace(/%selected%/g,p.id==f||p.id==m?"button-selected":"");y.icons[p.id]=l.patterns.toolbar.button_timeframe_inner.replace(/%icon%/g,w+R(p.id));break;case "text":r=l.patterns.toolbar.button_timeframe_text.replace(/%id%/g,p.id).replace(/%caption%/g,p.n).replace(/%caption2%/g,!0==c?p.n:"").replace(/%title1%/g,!0==c?"":p.t1).replace(/%title2%/g,!0==c?"":p.t2).replace(/%hide%/g,1==p.f||!0==h?"":"hideobj").replace(/%csstyle%/g,A).replace(/%attributes%/g,x).replace(/%css%/g,"undefined"==typeof p.css?
k+(!0!=c?" timeframe-text-type":"timeframe-caption-type"):p.css+k+(!0!=c?" timeframe-text-type":"timeframe-caption-type")).replace(/%selected%/g,p.id==f||p.id==m?"button-selected":""),!0==c?y.captions[p.id]=l.patterns.toolbar.button_timeframe_text_inner.replace(/%caption2%/g,!0==c?p.n:"").replace(/%title1%/g,!0==c?"":p.t1).replace(/%title2%/g,!0==c?"":p.t2):y.texts[p.id]=l.patterns.toolbar.button_timeframe_text_inner.replace(/%caption2%/g,!0==c?p.n:"").replace(/%title1%/g,!0==c?"":p.t1).replace(/%title2%/g,
!0==c?"":p.t2)}b+=r;switch(q){case "icon":r=l.patterns.toolbar.toolbar_more_item.replace(/%icon-source%/g,u).replace(/%id%/g,p.id).replace(/%caption%/g,p.n).replace(/%localization%/g,"menu.timescale."+p.id).replace(/%css%/g," change-timeframe "+(1==p.f?"":"hideobj")).replace(/%css%/g,"undefined"==typeof p.css?e:p.css+e).replace(/%icon%/g,w+R(p.id)).replace(/%selected%/g,p.id==f||p.id==m?"button-selected":"");break;case "text":r=l.patterns.toolbar.toolbar_more_item_timeframe_text.replace(/%id%/g,p.id).replace(/%caption%/g,
p.n).replace(/%localization%/g,"menu.timescale."+p.id).replace(/%title1%/g,p.t1).replace(/%title2%/g,p.t2).replace(/%css%/g," change-timeframe "+(1==p.f?"":"hideobj")).replace(/%css%/g,"undefined"==typeof p.css?e:p.css+e).replace(/%selected%/g,p.id==f||p.id==m?"button-selected":"")}d+=r}return{toolbar:b,toolbarmore:d}}function L(c){var a=c.item,b="";c.cssoptions&&(b=c.cssoptions);var d="";c.morecssclosebyclick&&(d=c.morecssclosebyclick);c="icon-button";var f="";try{if("undefined"!=typeof l.currenlayout.buttontype)switch(l.currenlayout.buttontype){case "icon":c=
"icon-button";break;case "fonticon":c="font-icon";f="iconfont-";break;default:c="icon-button"}}catch(m){}var k=a.id;"undefined"!=typeof a.action&&"eval"==a.action&&"undefined"!=typeof a.evaldata&&""!=a.evaldata&&(k=l.actions.addEvelCode(a.evaldata));var e=l.patterns.toolbar.button;a.svg&&(e=e.replace(l.patterns.toolbar.replace_icon_source,l.toolbaradvobj.svg.gui.svgiconsGetItem(a)));var h="";a.callback&&(h=h+' callbackfamily="'+a.callback+'"');a.callbackarg&&(h=h+' callbackarg="'+JSON.stringify(a.callbackarg).replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');var n="";a.csstyle&&(n='style="'+a.csstyle+'"');b=e.replace(/%icon-source%/g,c).replace(/%li-class%/g,D(a)).replace(/%id%/g,k).replace(/%localization%/g,a.localize).replace(/%action%/g,"undefined"!=typeof a.action?a.action:"").replace(/%css%/g,"undefined"!=typeof a.css?a.css+b:b).replace(/%icon%/g,"undefined"!=typeof a.icon?f+a.icon:"").replace(/%attributes%/g,h).replace(/%csstyle%/g,n).replace(/%caption%/g,a.caption);
a=l.patterns.toolbar.toolbar_more_item.replace(/%icon-source%/g,c).replace(/%id%/g,k).replace(/%localization%/g,a.localize).replace(/%action%/g,"undefined"!=typeof a.action?a.action:"").replace(/%css%/g,"undefined"!=typeof a.css?a.css+" button-action "+d:" button-action"+d).replace(/%icon%/g,"undefined"!=typeof a.icon?f+a.icon:"").replace(/%caption%/g,a.caption);return{button:b,buttonmore:a}}function W(c){var a=c.item,b="";c.cssoptions&&(b=c.cssoptions);var d="";c.orecssclosebyclick&&(d=c.morecssclosebyclick);
c="icon-button";var f="";try{if("undefined"!=typeof l.currenlayout.buttontype)switch(l.currenlayout.buttontype){case "icon":c="icon-button";break;case "fonticon":c="font-icon";f="iconfont-";break;default:c="icon-button"}}catch(m){}var k="";a.csstyle&&(k='style="'+a.csstyle+'"');var e="";a.callback&&(e=e+' callbackfamily="'+a.callback+'"');a.callbackarg&&(e=e+' callbackarg="'+JSON.stringify(a.callbackarg).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');b=
l.patterns.toolbar.button_custom.replace(/%li-class%/g,D(a)).replace(/%icon-source%/g,c).replace(/%id%/g,a.id).replace(/%localization%/g,a.localize).replace(/%css%/g,"undefined"!=typeof a.css?a.css+b:b).replace(/%icon%/g,"undefined"!=typeof a.icon?f+a.icon:"").replace(/%csstyle%/g,k).replace(/%attributes%/g,e).replace(/%caption%/g,a.caption);a=l.patterns.toolbar.toolbar_more_item.replace(/%icon-source%/g,c).replace(/%id%/g,a.id).replace(/%localization%/g,a.localize).replace(/%css%/g,"undefined"!=
typeof a.css?a.css+" button-action-custom "+d:" button-action-custom"+d).replace(/%icon%/g,"undefined"!=typeof a.icon?f+a.icon:"").replace(/%caption%/g,a.caption);return{button:b,buttonmore:a}}function M(c){var a=c.item,b="";c.cssoptions&&(b=c.cssoptions);var d="";c.morecssclosebyclick&&(d=c.morecssclosebyclick);var f=l.patterns.toolbar.item;"undefined"!=typeof a.icon&&""==a.icon&&(f=l.patterns.toolbar.item_noicon);c="icon-button";var m="";try{if("undefined"!=typeof l.currenlayout.buttontype)switch(l.currenlayout.buttontype){case "icon":c=
"icon-button";break;case "fonticon":c="font-icon";m="iconfont-";break;default:c="icon-button"}}catch(k){}var e=a.id;"undefined"!=typeof a.action&&"eval"==a.action&&"undefined"!=typeof a.evaldata&&""!=a.evaldata&&(e=l.actions.addEvelCode(a.evaldata));var h="";a.csstyle&&(h='style="'+a.csstyle+'"');var n="";a.callback&&(n=n+' callbackfamily="'+a.callback+'"');a.callbackarg&&(n=n+' callbackarg="'+JSON.stringify(a.callbackarg).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,
"&quot;")+'"');b=f.replace(/%icon-source%/g,c).replace(/%li-class%/g,D(a)).replace(/%id%/g,e).replace(/%localization%/g,a.localize).replace(/%css%/g,"undefined"!=typeof a.css?a.css+b:b).replace(/%icon%/g,"undefined"!=typeof a.icon?m+a.icon:"").replace(/%action%/g,"undefined"!=typeof a.action?a.action:"").replace(/%csstyle%/g,h).replace(/%attributes%/g,n).replace(/%caption%/g,a.caption);a=l.patterns.toolbar.toolbar_more_item.replace(/%icon-source%/g,c).replace(/%id%/g,e).replace(/%action%/g,"undefined"!=
typeof a.action?a.action:"").replace(/%localization%/g,a.localize).replace(/%css%/g,"undefined"!=typeof a.css?a.css+" button-action "+d:" button-action "+d).replace(/%icon%/g,"undefined"!=typeof a.icon&&""!=a.icon?m+a.icon:"no-icon").replace(/%caption%/g,a.caption);return{button:b,buttonmore:a}}function K(c){c=c.item;var a="";"undefined"!=typeof c.location&&(a=a+" loc-"+c.location);var b="";c.csstyle&&(b='style="'+c.csstyle+'"');return l.patterns.toolbar.space.replace(/%li-class%/g,D(c)).replace(/%id%/g,
"undefined"!=typeof c.id?c.id:"").replace(/%csstlb%/g,a).replace(/%css%/g,"undefined"!=typeof c.css?c.css:"").replace(/%csstyle%/g,b).replace(/%caption%/g,"undefined"!=typeof c.caption?c.caption:"")}function J(c){c=c.item;var a="";c.csstyle&&(a='style="'+c.csstyle+'"');return l.patterns.toolbar.caption.replace(/%li-class%/g,D(c)).replace(/%id%/g,c.id).replace(/%localization%/g,c.localize).replace(/%css%/g,"undefined"!=typeof c.css?c.css:"").replace(/%icon%/g,"undefined"!=typeof c.icon?c.icon:"").replace(/%csstyle%/g,
a).replace(/%caption%/g,c.caption)}function N(c){var a=c.item;c=c.toolbarobj;var b=[],d="",d="%html%",f="a-top";switch(a.group.possition){case "top":f="a-top";break;case "bottom":f="a-bottom";break;case "left":f="a-left";break;case "right":f="a-right"}var m="a-menu";switch(a.group.type){case "menu":m="a-menu";break;case "tooltip":m="a-tooltip";break;case "window":m="a-window"}var k="";"undefined"!=typeof a.group.closebyclick&&!0==a.group.closebyclick&&(k+=" tlb-a-closebyclick");"undefined"!=typeof a.group.changegroupicon&&
!0==a.group.changegroupicon&&(k+=" tlb-a-changeicongroup");var e="";"undefined"!=typeof a.css&&(e=a.css);"undefined"!=typeof a.group.grouptype&&(e=e+" group-button-"+a.group.grouptype);g.gui.groupproperties.add({id:a.id,group:a.group});var h="icon";"undefined"!=typeof a.group.viewtype&&(h=a.group.viewtype);var n="";"undefined"!=typeof a.style&&(n=a.style);var t="";"window"==a.group.type&&a.group.size&&(a.group.size.width&&(t=t+"width:"+a.group.size.width+"px;"),a.group.size.height&&(t=t+"height:"+
a.group.size.height+"px;"),a.group.size.minwidth&&(t=t+"min-width:"+a.group.size.minwidth+"px;"),a.group.size.minheight&&(t=t+"min-height:"+a.group.size.minheight+"px;"),a.group.size.maxwidth&&(t=t+"max-width:"+a.group.size.maxwidth+"px;"),a.group.size.maxheight&&(t=t+"max-height:"+a.group.size.maxheight+"px;"));var p="";a.group.customdata&&(p=p+' groupData="'+ +JSON.stringify(a.group.customdata).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');var r=!1;
"undefined"!=typeof a&&"undefined"!=typeof a.captionview&&(r=a.captionview,!0==r&&(e+=" onlycaption-view"));l.api.timeframes.getTimeframeView();var q="",u="icon-button",w="";try{if("undefined"!=typeof l.currenlayout.buttontype)switch(l.currenlayout.buttontype){case "icon":u="icon-button";break;case "fonticon":u="font-icon";w="iconfont-";break;default:u="icon-button"}}catch(v){}"timescale"==a.group.grouptype&&("icon"==h?e+=" timeframe-icon-type ":"text"==h&&(e=!0==r?e+" timeframe-caption-type ":e+
" timeframe-text-type "));a.innergroupid=l.commonutils.func.returnShortUniqID();r="";if(a.group.resizepossible){for(var A=["left_top","left_bottom","right_top","right_bottom"],x=0;x<A.length;x++)if(a.group.resizepossible[A[x]]){var z=l.commonutils.func.returnShortUniqID(),s="",y={};a.group.size&&(a.group.size.minwidth&&(y.minwidth=a.group.size.minwidth),a.group.size.minheight&&(y.minheight=a.group.size.minheight));a.group.resizepossible.callback&&(s=s+' callbackfamily="'+a.group.resizepossible.callback+
'"',s=s+' callbackarg="'+JSON.stringify({eventname:A[x],type:"resize",confines:y,groupid:a.id,guiid:a.innergroupid}).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');r+=l.patterns.toolbar.group_corner.replace(/%id%/g,z).replace(/%attributes%/g,s).replace(/%class%/g,"group-resizer-"+A[x])}a.group.resizepossible.callback&&b.push({callback:a.group.resizepossible.callback,type:"resize"})}switch(h){case "icon":q=l.patterns.toolbar.toolbar_button_group;a.svg&&
(q=q.replace(l.patterns.toolbar.replace_icon_source,l.toolbaradvobj.svg.gui.svgiconsGetItem(a)));q=q.replace(E,"").replace(/%li-class%/g,D(a)).replace(/%icon-source%/g,u).replace(/%localization%/g,a.localize).replace(/%css%/g,e).replace(/%style%/g,n).replace(/%groupstyle%/g,t).replace(/%cssgroupUL%/g,a.group.cssUl?a.group.cssUl:"").replace(/%icon%/g,"undefined"!=typeof a.icon?w+a.icon:"").replace(/%cssgroup%/g,a.group.css+""+f+" "+m).replace(/%caption%/g,a.caption).replace(/%groupattributes%/g,p).replace(/%innergroupid%/g,
a.innergroupid).replace(/%resizepossible%/g,r).replace(/%id%/g,a.id);break;case "text":q=l.patterns.toolbar.toolbar_button_group_text.replace(E,"").replace(/%li-class%/g,D(a)).replace(/%localization%/g,a.localize).replace(/%css%/g,e).replace(/%style%/g,n).replace(/%groupstyle%/g,t).replace(/%title1%/g,"undefined"!=typeof a.title1?a.title1:"").replace(/%title2%/g,"undefined"!=typeof a.title2?a.title2:"").replace(/%cssgroup%/g,a.group.css+""+f+" "+m).replace(/%caption%/g,a.caption).replace(/%groupattributes%/g,
p).replace(/%cssgroupUL%/g,a.group.cssUl?a.group.cssUl:"").replace(/%innergroupid%/g,a.innergroupid).replace(/%resizepossible%/g,r).replace(/%id%/g,a.id)}for(f=0;f<a.items.length;f++)switch(m=a.items[f],e="",m.type){case "button-group-charttype":e=G({cssoptions:k,item:m,toolbarobj:c});q=q.replace(/%html%/g,e.toolbar+"%html%");d=d.replace(/%html%/g,e.toolbarmore+"%html%");break;case "menu-group-charttype":e=X({item:m,cssoptions:k,toolbarobj:c});q=q.replace(/%html%/g,e.toolbar+"%html%");d=d.replace(/%html%/g,
e.toolbarmore+"%html%");break;case "button-group-indicator":e=H({cssoptions:k,item:m,toolbarobj:c});q=q.replace(/%html%/g,e.toolbar+"%html%");d=d.replace(/%html%/g,e.toolbarmore+"%html%");break;case "item":e=M({item:m,cssoptions:k,toolbarobj:c});q=q.replace(/%html%/g,e.button+"%html%");d=d.replace(/%html%/g,e.buttonmore+"%html%");break;case "item-container":e="";m.csstyle&&(e='style="'+m.csstyle+'"');n="";m.callback&&(n=n+' callbackfamily="'+m.callback+'"');m.callbackarg&&(n=n+' callbackarg="'+JSON.stringify(m.callbackarg).replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');e=l.patterns.toolbar.item_container.replace(/%tid%/g,m.id).replace(/%cssclass%/g,m.cssclass?m.cssclass:"").replace(/%csstyle%/g,e).replace(/%attributes%/g,n);n="";if(m.items)for(t=0;t<m.items.length;t++)switch(p=null,m.items[t].type){case "toolbars":p=U({toolbars:m.items[t].items});n+=p.returnstring;break;case "custom":m.items[t].patternname&&(p=l.patterns.gui.returnPatterByPath(m.items[t].patternname),n+=p)}e=e.replace(/%html%/g,
n);e={button:e,buttonmore:""};q=q.replace(/%html%/g,e.button+"%html%");d=d.replace(/%html%/g,e.buttonmore+"%html%");break;case "button-group-timeframe":e=I({item:m,cssoptions:k,toolbarobj:c});q=q.replace(/%html%/g,e.toolbar+"%html%");d=d.replace(/%html%/g,e.toolbarmore+"%html%");break;case "caption":m=J({item:m,toolbarobj:c});q=q.replace(/%html%/g,m+"%html%");break;case "space":m=K({item:m});q=q.replace(/%html%/g,m+"%html%");break;case "button":e=L({item:m,cssoptions:k,toolbarobj:c});q=q.replace(/%html%/g,
e.button+"%html%");d=d.replace(/%html%/g,e.buttonmore+"%html%");break;case "button-group":e=N({item:m,toolbarobj:c}),q=q.replace(/%html%/g,e.toolbargroup+"%html%"),d=d.replace(/%html%/g,e.toolbarmore+"%html%")}q=q.replace(/%html%/g,"");d=d.replace(/%html%/g,"");return{toolbargroup:q,toolbarmore:d,innergroupid:a.innergroupid,eventsInGroup:b}}function ba(){$.prochartcache.get(g.parent,".toolbar-adv",".tlb-item-group")&&$.prochartcache.get(g.parent,".toolbar-adv",".tlb-item-group").each(function(){var c=
$(this);"block"==c.find(".tlb-button-groups").css("display")&&O(c)})}function ca(){$.prochartcache.get(g.parent,".toolbar-adv",".tlb-more")&&$.prochartcache.get(g.parent,".toolbar-adv",".tlb-more").each(function(){var c=$(this),a=$(this).find("button.button-more");"block"==c.find(".tlb-more-items").css("display")&&P(a)})}function O(c){var a=c.find(">.button-group"),b=$(a).attr("tid");!0!=$(a).hasClass("highlightedIconGroup")&&$(a).addClass("highlightedIconGroup");for(var a=null,d=0;d<g.gui.groupproperties.length;d++)if(g.gui.groupproperties[d].id==
b){a=g.gui.groupproperties[d].group;break}if(null!=a)switch(a.type){case "window":var b=a,a=c.find(">.tlb-button-groups"),d=a.find(">.tlb-array"),f=c.find(">.button-group");a.css("visibility","hidden").css("display","block");var m=c.closest(".htmlchart"),k=0,k=0,e=2,h=c=0,n=0,t="",p;"undefined"!=typeof b.spacey&&(e=b.spacey);h=f.outerWidth();c=f.outerHeight();n=parseInt(d.css("border-bottom-width"),10);t=f.offset().left-m.offset().left;p=m.outerWidth()-t;f=f.offset().top-m.offset().top;m=m.outerHeight()-
f;k=a.width();switch(b.possition){case "bottom":a.css({top:"30px"});a.hasClass("a-top")&&a.removeClass("a-top").addClass("a-bottom");break;case "top":a.css({bottom:"30px"});a.hasClass("a-bottom")&&a.removeClass("a-bottom").addClass("a-top");break;case "right":a.css({left:"30px"});a.hasClass("a-left")&&a.removeClass("a-left").addClass("a-right");break;case "left":a.css({right:"30px"}),a.hasClass("a-right")&&a.removeClass("a-right").addClass("a-left")}b.real_properties||(b.real_properties={});b.real_properties.possition=
b.possition;a.find(".tlb-button-groups-ul").css({"max-height":"",overflow:""});var r=l.init.chartcontainer;r.offset();r.outerHeight(!0);a.outerHeight(!0);a.height();a.find(".loc-horizontal > span.toolbar-adv-space").css("width",0);a.find(".toolbar-adv-label ").css("width",0);r={};switch(b.possition){case "bottom":r.top=c+e+"px";r.bottom="auto";break;case "top":r.top="auto";r.bottom=c+e+"px";break;case "right":r.right="auto";r.left=h+e+"px";r.top="0px";r.bottom="auto";break;case "left":r.right=h+e+
"px",r.left="auto",r.top="0px",r.bottom="auto"}a.css(r);"undefined"==typeof b.alignh&&(b.alignh="auto");"undefined"==typeof b.alignv&&(b.alignv="auto");var e={},q={};if("top"==b.possition||"bottom"==b.possition)switch(t="auto"==b.alignh?t+h/2>k/2&&p+h/2>k/2?"center":t+h/2>k?"left":p+h/2>k?"right":"center":b.alignh,b.real_properties.align=t,t){case "left":e.right="0px";e.left="auto";q.right="5px";q.left="auto";a.css(e);d.css(q);break;case "right":e.left="0px";e.right="auto";q.left="5px";q.right="auto";
a.css(e);d.css(q);break;case "center":e.right=-parseInt(k/2-h/2)+"px",e.left="auto",q.left=k/2-n+"px",q.right="auto",a.css(e),d.css(q)}if("left"==b.possition||"right"==b.possition)switch(k=a.outerHeight(),t="auto"==b.alignv?f>k/2&&m>k/2?"center":f>k?"top":m>k?"bottom":"top":b.alignv,t){case "top":e.bottom="auto";e.top="0px";q.top="5px";q.bottom="auto";a.css(e);d.css(q);break;case "bottom":e.top="auto";e.bottom="0px";q.bottom="5px";q.top="auto";a.css(e);d.css(q);break;case "center":e.top=-parseInt(k/
2-c/2)+"px",e.bottom="auto",q.top=k/2-n+"px",q.bottom="auto",a.css(e),d.css(q)}d={opacity:1};switch(b.possition){case "top":a.css({bottom:"15px",top:"auto"});d.bottom=r.bottom;break;case "bottom":d.top=r.top;a.css({top:"15px",bottom:"auto"});break;case "right":a.css({left:"15px",right:"auto"});d.left=r.left;break;case "left":a.css({right:"15px",left:"auto"}),d.right=r.right}a.css("display","none").css("opacity",0).css("visibility","");a.show().animate(d,200);break;case "menu":da(c,a);break;case "tooltip":ea(c,
a)}}function Q(c){var a=c.find(">.button-group"),b=$(a).attr("tid");$(a).removeClass("highlightedIconGroup");c.find(".highlightedIconGroup").removeClass("highlightedIconGroup");for(var a=null,d=0;d<g.gui.groupproperties.length;d++)if(g.gui.groupproperties[d].id==b){a=g.gui.groupproperties[d].group;break}if(null!=a)switch(a.type){case "window":fa(c,a);break;case "menu":ga(c,a);break;case "tooltip":ha(c,a)}}function B(c){c=c.closest(".tlb-item-group");Q(c)}function C(c){var a=c.closest(".tlb-item-group").find("> .button-group"),
b=c.attr("data-localize"),d=c.attr("title");a.attr("data-localize",b).attr("title",d);c.hasClass("caption-button")?(c=c.find(">span").attr("class"),a.find(">span").attr("class",c)):a.html(c.html())}function ea(c,a){var b=c.find(">.tlb-button-groups"),d=b.find(" > ul"),f=b.find(">.tlb-array"),m=c.find(">.button-group");b.css("visibility","hidden").css("display","block");var k=c.closest(".htmlchart"),e=0,h=0,n=2,l=0,g=0,r=0,h=1,q="",u;"undefined"!=typeof a.spacey&&(n=a.spacey);"undefined"!=typeof a.columns&&
(h=a.columns);g=m.outerWidth(!0);l=m.outerHeight(!0);r=parseInt(f.css("border-bottom-width"),10);q=m.offset().left-k.offset().left;u=k.outerWidth()-q;var m=m.offset().top-k.offset().top,k=k.outerHeight()-m,w=0;b.find(">ul").children().each(function(){w<$(this).outerWidth(!0)&&(w=$(this).outerWidth(!0));e+=$(this).outerWidth(!0)});b.find(">ul").children();0!=h&&(e=w*h);var h=b.outerHeight(),v={};v.width=e+"px";switch(a.possition){case "bottom":v.top=l+n+"px";v.bottom="auto";break;case "top":v.top=
"auto";v.bottom=l+n+"px";break;case "right":v.right="auto";v.left=g+n+"px";v.top="0px";v.bottom="auto";break;case "left":v.right=g+n+"px",v.left="auto",v.top="0px",v.bottom="auto"}b.css(v);d.css({width:v.width});"undefined"==typeof a.alignh&&(a.alignh="auto");"undefined"==typeof a.alignv&&(a.alignv="auto");d={};n={};if("top"==a.possition||"bottom"==a.possition)switch(q="auto"==a.alignh?q>e/2&&u>e/2?"center":q>e?"left":u>e?"right":"left":a.alignh,q){case "left":d.right="0px";d.left="auto";n.right=
"5px";n.left="auto";b.css(d);f.css(n);break;case "right":d.left="0px";d.right="auto";n.left="5px";n.right="auto";b.css(d);f.css(n);break;case "center":d.right=-parseInt(e/2-g/2)+"px",d.left="auto",n.left=e/2-r+"px",n.right="auto",b.css(d),f.css(n)}if("left"==a.possition||"right"==a.possition)switch(h=b.outerHeight(),q="auto"==a.alignv?m>h/2&&k>h/2?"center":m>h?"top":k>h?"bottom":"top":a.alignv,q){case "top":d.bottom="auto";d.top="0px";n.top="5px";n.bottom="auto";b.css(d);f.css(n);break;case "bottom":d.top=
"auto";d.bottom="0px";n.bottom="5px";n.top="auto";b.css(d);f.css(n);break;case "center":d.top=-parseInt(h/2-l/2)+"px",d.bottom="auto",n.top=h/2-r+"px",n.bottom="auto",b.css(d),f.css(n)}f={opacity:1};b.css("display","none").css("opacity",0).css("visibility","");switch(a.possition){case "top":b.css({bottom:"15px",top:"auto"});f.bottom=v.bottom;break;case "bottom":b.css({top:"15px",bottom:"auto"});f.top=v.top;break;case "right":b.css({left:"15px",right:"auto"});f.left=v.left;break;case "left":b.css({right:"15px",
left:"auto"}),f.right=v.right}b.show().animate(f,200)}function ha(c,a){var b=c.find(">.tlb-button-groups"),d={opacity:0};switch(a.possition){case "top":d.bottom="15";break;case "bottom":d.top="15";break;case "right":d.left=15;break;case "left":d.right=15}b.animate(d,200,function(){b.css("display","none")})}function ga(c,a){var b=c.find(">.tlb-button-groups"),d={opacity:0};switch(a.possition){case "top":d.bottom="15";break;case "bottom":d.top="15";break;case "right":d.left=15;break;case "left":d.right=
15}b.animate(d,200,function(){b.css("display","none")})}function fa(c,a){var b=c.find(">.tlb-button-groups"),d={opacity:0};switch(a.possition){case "top":d.bottom="15";break;case "bottom":d.top="15";break;case "right":d.left=15;break;case "left":d.right=15}b.animate(d,200,function(){b.css("display","none")})}function da(c,a){var b=c.find(">.tlb-button-groups"),d=b.find(">.tlb-array"),f=c.find(">.button-group");b.css("visibility","hidden").css("display","block");var m=c.closest(".htmlchart"),k=0,e=
0,h=2,n=0,g=e=0,p=0,k=1,r="",q,u;"undefined"!=typeof a.spacey&&(h=a.spacey);"undefined"!=typeof a.columns&&(k=a.columns);e=f.outerWidth();n=f.outerHeight();g=parseInt(d.css("border-bottom-width"),10);r=f.offset().left-m.offset().left;q=m.outerWidth()-r;var f=f.offset().top-m.offset().top,m=m.outerHeight()-f,w=0,v=0,A=0,x=0,y=0;(p=a.size&&a.size.width?a.size.width:null)?x=w=p:(b.find("ul button").each(function(){$(this).css({width:"auto","min-width":0});v=$(this).width();A=$(this).outerWidth(!0);v>
w&&(w=v,x=A)}),b.find("ul .toolbar-adv-label").each(function(){v=$(this).width();A=$(this).outerWidth(!0);y=A-v}));p=w;k*=x;switch(a.possition){case "bottom":b.css({top:"30px"});b.hasClass("a-top")&&b.removeClass("a-top").addClass("a-bottom");break;case "top":b.css({bottom:"30px"});b.hasClass("a-bottom")&&b.removeClass("a-bottom").addClass("a-top");break;case "right":b.css({left:"30px"});b.hasClass("a-left")&&b.removeClass("a-left").addClass("a-right");break;case "left":b.css({right:"30px"}),b.hasClass("a-right")&&
b.removeClass("a-right").addClass("a-left")}var s=b.find(".tlb-button-groups-ul");s.css({"max-height":"",overflow:""});u=0;u=l.init.chartcontainer;u=u.offset().top+u.outerHeight(!0);var z=b.outerHeight(!0)-b.height();u=a.size&&a.size.maxheight?a.size.maxheight:"top"==a.possition?s.offset().top-5-z:u-s.offset().top-5-z;b.css({width:k+"px"});s.css({"max-height":u+"px",overflow:"auto"});b.find("button").css("width",p);b.find(".loc-horizontal > span.toolbar-adv-space").css("width",p);b.find(".toolbar-adv-label ").css("width",
p-y);s.hasScrollBar()&&(k+=s.widthScrollBar(),b.css({width:k+"px"}));p={};switch(a.possition){case "bottom":p.top=n+h+"px";p.bottom="auto";break;case "top":p.top="auto";p.bottom=n+h+"px";break;case "right":p.right="auto";p.left=e+h+"px";p.top="0px";p.bottom="auto";break;case "left":p.right=e+h+"px",p.left="auto",p.top="0px",p.bottom="auto"}b.css(p);"undefined"==typeof a.alignh&&(a.alignh="auto");"undefined"==typeof a.alignv&&(a.alignv="auto");h={};s={};if("top"==a.possition||"bottom"==a.possition)switch(r=
"auto"==a.alignh?r+e/2>k/2&&q+e/2>k/2?"center":r+e/2>k?"left":q+e/2>k?"right":"center":a.alignh,r){case "left":h.right="0px";h.left="auto";s.right="5px";s.left="auto";b.css(h);d.css(s);break;case "right":h.left="0px";h.right="auto";s.left="5px";s.right="auto";b.css(h);d.css(s);break;case "center":h.right=-parseInt(k/2-e/2)+"px",h.left="auto",s.left=k/2-g+"px",s.right="auto",b.css(h),d.css(s)}if("left"==a.possition||"right"==a.possition)switch(e=b.outerHeight(),r="auto"==a.alignv?f>e/2&&m>e/2?"center":
f>e?"top":m>e?"bottom":"top":a.alignv,r){case "top":h.bottom="auto";h.top="0px";s.top="5px";s.bottom="auto";b.css(h);d.css(s);break;case "bottom":h.top="auto";h.bottom="0px";s.bottom="5px";s.top="auto";b.css(h);d.css(s);break;case "center":h.top=-parseInt(e/2-n/2)+"px",h.bottom="auto",s.top=e/2-g+"px",s.bottom="auto",b.css(h),d.css(s)}d={opacity:1};switch(a.possition){case "top":b.css({bottom:"15px",top:"auto"});d.bottom=p.bottom;break;case "bottom":d.top=p.top;b.css({top:"15px",bottom:"auto"});break;
case "right":b.css({left:"15px",right:"auto"});d.left=p.left;break;case "left":b.css({right:"15px",left:"auto"}),d.right=p.right}b.css("display","none").css("opacity",0).css("visibility","");b.show().animate(d,200)}function P(c){var a=c.closest(".toolbar-adv"),b=a.attr("tid"),b=S(b).more,d=a.find(".tlb-more-items");d.css("visibility","hidden").css("display","block");var f=a.closest(".htmlchart"),a=d.find(".tlb-array"),m=0,k=0,e=2,h=2,n=0,g=k=0,p=0,m=1,r="",q,u,w;"undefined"!=typeof b.spacey&&(e=b.spacey);
"undefined"!=typeof b.spacex&&(h=b.spacex);"undefined"!=typeof b.columns&&(m=b.columns);k=c.outerWidth();n=c.outerHeight();g=parseInt(a.css("border-bottom-width"),10);r=c.offset().left-f.offset().left;q=f.outerWidth()-r;u=c.offset().top-f.offset().top;var f=f.outerHeight()-u,v=0,A=0,x=0,y=0;d.find("ul button ").each(function(){$(this).css({width:"auto","min-width":0});A=$(this).outerWidth();x=$(this).outerWidth(!0);A>v&&(v=A,y=x)});p=v;m*=y;d.css("width",m);switch(b.possition){case "bottom":d.css({top:"30px"});
break;case "top":d.css({bottom:"30px"});break;case "right":d.css({left:"30px"});break;case "left":d.css({right:"30px"})}var s=d.find(".tlb-button-groups-ul");s.css({"max-height":"",overflow:"",display:"block"});w=0;w=l.init.chartcontainer;var z=w.offset().top+w.outerHeight(!0),B=d.outerHeight(!0)-d.height();w=b.alignv&&"bottom"==b.alignv?Math.abs(w.offset().top-c.offset().top-5-B):z-s.offset().top-5-B;d.css({width:m+"px"});s.css({"max-height":w+"px",overflow:"auto"});d.find("button").css({width:p});
s.hasScrollBar()&&(m+=s.widthScrollBar(),d.css({width:m+"px"}));c={};"undefined"==typeof b.possition&&(b.possition="bottom");switch(b.possition){case "bottom":c.top=n+e+"px";c.bottom="auto";break;case "top":c.top="auto";c.bottom=n+e+"px";break;case "right":c.right="auto";c.left=k+h+"px";c.top="0px";c.bottom="auto";break;case "left":c.right=k+h+"px",c.left="auto",c.top="0px",c.bottom="auto"}d.css(c);"undefined"==typeof b.alignh&&(b.alignh="auto");"undefined"==typeof b.alignv&&(b.alignv="auto");e={};
h={};if("top"==b.possition||"bottom"==b.possition)switch(r="auto"==b.alignh?r>m/2&&q>m/2?"center":r>m?"left":q>m?"right":"left":b.alignh,r){case "left":e.right="0px";e.left="auto";h.right="5px";h.left="auto";d.css(e);a.css(h);break;case "right":e.left="0px";e.right="auto";h.left="5px";h.right="auto";d.css(e);a.css(h);break;case "center":e.right=-parseInt(m/2-k/2)+"px",e.left="auto",h.left=m/2-g+"px",h.right="auto",d.css(e),a.css(h)}if("left"==b.possition||"right"==b.possition)switch(k=d.outerHeight(),
r="auto"==b.alignv?u>k/2&&f>k/2?"center":u>k?"top":f>k?"bottom":"top":b.alignv,r){case "top":e.bottom="auto";e.top="0px";h.top="5px";h.bottom="auto";d.css(e);a.css(h);break;case "bottom":e.top="auto";e.bottom="0px";h.bottom="5px";h.top="auto";d.css(e);a.css(h);break;case "center":e.top=-parseInt(k/2-n/2)+"px",e.bottom="auto",h.top=k/2-g+"px",h.bottom="auto",d.css(e),a.css(h)}d.find(" >ul").css({width:m});d.find(" >ul >li").css({width:p,overflow:"hidden"});a={opacity:1};d.css("display","none").css("opacity",
0).css("visibility","");switch(b.possition){case "top":d.css({bottom:"15px",top:"auto"});a.bottom=c.bottom;break;case "bottom":d.css({top:"15px",bottom:"auto"});a.top=c.top;break;case "right":d.css({left:"15px",right:"auto"});a.left=c.left;break;case "left":d.css({right:"15px",left:"auto"}),a.right=c.right}d.show().animate(a,200)}function z(c){c=c.closest(".toolbar-adv");var a=c.attr("tid"),a=S(a).more,b=c.find(".tlb-more-items");"undefined"==typeof a.possition&&(a.possition="bottom");c={opacity:0};
switch(a.possition){case "top":c.bottom="15";break;case "bottom":c.top="15";break;case "right":c.left=15;break;case "left":c.right=15}b.animate(c,200,function(){b.css("display","none")})}function ia(c,a){$(g.parent).find(".toolbar-adv").each(function(){"rtl"==a?$(this).hasClass("dir-rtl")||$(this).addClass("dir-rtl"):$(this).removeClass("dir-rtl")})}function F(){$.prochartcache.get(g.parent,".toolbar-adv")&&$.prochartcache.get(g.parent,".toolbar-adv").each(function(c){c=$.prochartcache.get($(this));
var a=c.attr("tid"),a=S(a);if(null!=a)switch(a.location){case "vertical":ja(c,a);break;case "horizontal":Y(c,a);default:Y(c,a)}})}function Y(c,a){for(var b=[],d=c.children(),f=0,m=d.length;f<m;f++){var k=$(d[f]),e;e=k;e=e.hasClass("tlb-caption")?"tlb-caption":e.hasClass("tlb-item")?"tlb-item":e.hasClass("tlb-space")?"tlb-space":e.hasClass("tlb-more")?"tlb-more":"none";var h=!0;k.find(">").hasClass("hideobj")&&(h=!1);"tlb-more"==e&&(h=!1);b.push({li:k,width:k.outerWidth(!0),type:e,show:h})}f=c.width();
e=0;h=a.more;d=!1;"undefined"==typeof h&&(h={captionview:!0,spaceview:!0},d=!0);for(var m=!1,k=d?0:l.apiinit.fn.get("toolbar","iconMoreSizeWidth"),n=0,g=b.length;n<g;n++)d=b[n],e+=d.width;n=e>f&&!1==h.captionview;e=e>f&&!1==h.captionview;h=0;for(g=b.length;h<g;h++)switch(d=b[h],d.type){case "tlb-caption":d.show=n?!1:!0;break;case "tlb-space":d.show=e?!1:!0}h=e=0;for(n=b.length;h<n;h++)d=b[h],d.show&&(e+=d.width);e>f&&(m=!0,f-=k);e=k=0;for(h=b.length;e<h;e++)d=b[e],d.show&&(k+=d.width,k>f&&(d.show=
!1)),"tlb-more"==d.type&&m&&(d.show=!0);f=0;for(m=b.length;f<m;f++)d=b[f],d.tid="tlb-item"==d.type?d.li.find("> button").attr("tid"):null;m=c.find(".tlb-more-item button");f=[];d=0;for(k=m.length;d<k;d++)e=$(m[d]),h=e.attr("tid"),f.push({item:e,tid:h,show:!1});k=0;for(e=b.length;k<e;k++)if(d=b[k],"tlb-item"==d.type&&!1==d.show)for(h=0,n=f.length;h<n;h++)if(f[h].tid==d.tid){f[h].show=!0;break}k=c.parent();$(document.createDocumentFragment()).append(c);e=0;for(h=b.length;e<h;e++)d=b[e],d.show?$(d.li).removeClass("hide-tlb-item"):
$(d.li).addClass("hide-tlb-item");$.prochartcache.get(c,".tlb-more-item")&&$.prochartcache.get(c,".tlb-more-item").addClass("hide-more-item");b=0;for(d=m.length;b<d;b++)!0==f[b].show&&f[b].item.parent().removeClass("hide-more-item");k.append(c)}function ja(c,a){function b(a){$(a).addClass("hide-tlb-item");var b=$(a).find("button").attr("tid");$.prochartcache.get(c,".tlb-more-item button[tid^='"+b+"']")&&$.prochartcache.get(c,".tlb-more-item button[tid^='"+b+"']").parent().removeClass("hide-more-item");
$(a).hasClass("tlb-item-group")&&f(a)}function d(a){$(a).removeClass("hide-tlb-item");var b=$(a).find("button").attr("tid");$.prochartcache.get(c,".tlb-more-item button[tid^='"+b+"']")&&$.prochartcache.get(c,".tlb-more-item button[tid^='"+b+"']").parent().addClass("hide-more-item");$(a).hasClass("tlb-item-group")&&m(a)}function f(a){$(a).find(".tlb-item").each(function(){var a=$(this).find("button").attr("tid");$.prochartcache.get(c,".tlb-more-item button[tid^='"+a+"']")&&$.prochartcache.get(c,".tlb-more-item button[tid^='"+
a+"']").parent().removeClass("hide-more-item")})}function m(a){$(a).find(".tlb-item").each(function(){var a=$(this).find("button").attr("tid");$.prochartcache.get(c,".tlb-more-item button[tid^='"+a+"']")&&$.prochartcache.get(c,".tlb-more-item button[tid^='"+a+"']").parent().addClass("hide-more-item")})}var k=c.parent().outerWidth(),e=c.parent().outerHeight();if("undefined"==typeof k||null==k)k=c.width();if("undefined"==typeof e||null==e)e=c.height();var h=0,n=0,g=0,p=null,r=0,q=a.more,u=!1;"undefined"==
typeof q&&(q={captionview:!0,spaceview:!0},u=!0);var w=l.apiinit.fn.get("toolbar","iconMoreSizeWidth");!0==u&&(w=0);c.find("> .tlb-item, > .tlb-caption, > .tlb-space").each(function(){h+=$(this).outerHeight(!0);n+=$(this).outerWidth(!0);n>k&&(n=0)});n=0;h>e&&!1==q.captionview?$.prochartcache.get(c,"> .tlb-caption")&&$.prochartcache.get(c,"> .tlb-caption").addClass("hide-tlb-item"):$.prochartcache.get(c,"> .tlb-caption")&&$.prochartcache.get(c,"> .tlb-caption").removeClass("hide-tlb-item");h>e&&!1==
q.spaceview?$.prochartcache.get(c,"> .tlb-space")&&$.prochartcache.get(c,"> .tlb-space").addClass("hide-tlb-item"):$.prochartcache.get(c,"> .tlb-space")&&$.prochartcache.get(c,"> .tlb-space").removeClass("hide-tlb-item");$.prochartcache.get(c,"> .tlb-item, > .tlb-caption, > .tlb-space")&&$.prochartcache.get(c,"> .tlb-item, > .tlb-caption, > .tlb-space").each(function(){$(this).hasClass("tlb-caption")&&(h>e&&!1==q.captionview?$(this).addClass("hide-tlb-item"):(g+=$(this).outerHeight(!0),n=0,$(this).removeClass("hide-tlb-item").css("width",
k)));$(this).hasClass("tlb-space")&&($(this).hasClass("loc-horizontal")?!1==q.spaceview?$(this).addClass("hide-tlb-item").css("width",k):(g+=$(this).outerHeight(!0),n=0,g>e?$(this).addClass("hide-tlb-item").css("width",k):$(this).removeClass("hide-tlb-item").css("width",k)):h>e&&!1==q.spaceview?$(this).addClass("hide-tlb-item"):(n+=$(this).outerWidth(!0),n>e-w?$(this).addClass("hide-tlb-item"):$(this).removeClass("hide-tlb-item")));$(this).hasClass("tlb-item")&&(g+$(this).outerHeight(!0)>e&&(b(this),
r=1),g+$(this).outerHeight(!0)<=e&&(n+=$(this).outerWidth(!0),n<k?(0==n&&(g+=$(this).outerHeight(!0)),p=this,g+=$(this).outerHeight(!0),d(this)):(n=$(this).outerWidth(!0),g>e?(b(this),r=1):(p=this,g+=$(this).outerHeight(!0),d(this)))))});null!=p&&1==r&&!1==u?(b(p),c.find(".tlb-more").css("display","block").insertAfter(p)):c.find(".tlb-more").css("display","none")}function R(c){if("undefined"==typeof c||null==c)return"";for(var a=0;a<l.init.timeclassmirror.length;a++)if(l.init.timeclassmirror[a].time==
c.toLowerCase()||l.init.timeclassmirror[a].time==c.toUpperCase())return l.init.timeclassmirror[a].css;return""}function S(c){for(var a=l.currenlayout.toolbars,b=0;b<a.length;b++){var d=a[b];if(d.id==c)return d}return null}var g={},l=T;l.toolbaradvobj=g;l.toolbaradvobj.svg=ProChart_InitSvgToolbar(T);g.mycache={};var E=/=""/g,V=l.api.debug.getLogger("prochart.gui.toolbar");g.gui={viewToolbarTop:function(c){!1==l.guiinit.cache&&(new Date).getTime();g.parent=c;aa();"undefined"!=typeof l.localizationobj&&
l.localizationobj.gui.updateFromDataLang(c)},viewTimeFrameButton:function(c,a){var b=$.prochartcache.get(g.parent,".tlb-item button[tid^='"+c+"']"),d=$.prochartcache.get(g.parent,".tlb-more-item button[tid^='"+c+"']");if(b||d){switch(a){case "1":case 1:b&&b.removeClass("hideobj");d&&d.removeClass("hideobj");break;case 0:case "0":b&&b.addClass("hideobj"),d&&d.addClass("hideobj")}F()}},viewTimeFrameButtons:function(c){if(0!=c.length){for(var a=0;a<c.length;a++){var b=c[a],d=$.prochartcache.get(g.parent,
".tlb-item button[tid^='"+b.id+"']"),f=$.prochartcache.get(g.parent,".tlb-more-item button[tid^='"+b.id+"']");if(d||f)switch(b.f){case "1":case 1:d&&d.removeClass("hideobj");f&&f.removeClass("hideobj");break;case 0:case "0":d&&d.addClass("hideobj"),f&&f.addClass("hideobj")}}F()}},selectedTimeFrameButton:function(c){if("undefined"!=typeof c&&"null"!=c){$.prochartcache.get(g.parent,".change-timeframe")&&$.prochartcache.get(g.parent,".change-timeframe").removeClass("button-selected");var a=$.prochartcache.get(g.parent,
".change-timeframe[tid|='"+c+"']");a&&a.addClass("button-selected");$.prochartcache.get(g.parent,".group-button-timescale")&&$.prochartcache.get(g.parent,".group-button-timescale").each(function(){var a=$(this);a.hasClass("timeframe-text-type")?y.texts.hasOwnProperty(c)&&a.html(y.texts[c]):a.hasClass("timeframe-icon-type")?y.icons.hasOwnProperty(c)&&a.html(y.icons[c]):a.hasClass("timeframe-caption-type")&&y.captions.hasOwnProperty(c)&&a.html(y.captions[c]);try{l.localizationobj.gui.setLocalizationForElement(a)}catch(d){}})}},
selectedChartTypeButton:function(c){if("undefined"!=typeof c&&"null"!=c){$.prochartcache.get(g.parent,".change-typechart")&&$.prochartcache.get(g.parent,".change-typechart").removeClass("button-selected");var a=$.prochartcache.get(g.parent,".change-typechart[tid^='"+c+"']");a&&a.addClass("button-selected");$.prochartcache.get(g.parent,".group-button-charttype")&&a&&$.prochartcache.get(g.parent,".group-button-charttype").each(function(){a.hasClass("caption-button")?($(this).attr("data-localize",a.attr("data-localize")),
$(this).attr("title",a.attr("title")),$(this).find(">span").attr("class",a.find(">span").attr("class"))):$(this).html(a.html())})}},viewTypeChartButton:function(c,a){var b=$.prochartcache.get(g.parent,".tlb-item button[tid|='"+c+"']"),d=$.prochartcache.get(g.parent,".tlb-more-item button[tid|='"+c+"']");if(b||d){switch(a){case 1:b&&b.removeClass("hideobj");d&&d.removeClass("hideobj");break;case 0:b&&b.addClass("hideobj"),d&&d.addClass("hideobj")}F()}},viewTypeChartButtons:function(c){if(0!=c.length){for(var a=
0;a<c.length;a++){var b=c[a],d=$.prochartcache.get(g.parent,".tlb-item button[tid|='"+b.id+"']"),f=$.prochartcache.get(g.parent,".tlb-more-item button[tid|='"+b.id+"']");if(d||f)switch(b.f){case 1:case "1":d&&d.removeClass("hideobj");f&&f.removeClass("hideobj");break;case 0:case "0":d&&d.addClass("hideobj"),f&&f.addClass("hideobj")}}F()}},updateTimesScale:function(c){"undefined"!=typeof c&&null!=c&&("undefined"!=typeof c.timescales&&null!=c.timescales?($.prochartcache.get(g.parent,".change-timeframe")&&
$.prochartcache.get(g.parent,".change-timeframe").addClass("disabled"),c.timescales.forEach(function(a){$.prochartcache.get(g.parent,'.change-timeframe[tid="'+a+'"]')&&$.prochartcache.get(g.parent,'.change-timeframe[tid="'+a+'"]').removeClass("disabled")})):$.prochartcache.get(g.parent,".change-timeframe")&&$.prochartcache.get(g.parent,".change-timeframe").removeClass("disabled"))},adjustSize:F,changeLocalization:function(c,a){F();ia(c,a);ba();ca()},hideopengroup:function(){$.prochartcache.get(g.parent,
".tlb-button-groups")&&$.prochartcache.get(g.parent,".tlb-button-groups").css("display","none");$.prochartcache.get(g.parent,".tlb-more-items")&&$.prochartcache.get(g.parent,".tlb-more-items").css("display","none")},showGroup:O,changeIcon:function(c,a){$.prochartcache.get(g.parent,"button.icon-button","> span."+c)&&$.prochartcache.get(g.parent,"button.icon-button","> span."+c).removeClass(c).addClass(a)},changeDatalocalize:function(c,a){if($.prochartcache.get(g.parent,"button[tid='"+c+"']")){var b=
""!=a?l.localizationobj.gui.returnLocalizationString(a):"";$.prochartcache.get(g.parent,"button[tid='"+c+"']").attr("data-localize",a).attr("title",b)}}};Object.defineProperty(g.gui,"insertToolbar",{value:U,writable:!1,configurable:!1});Object.defineProperty(g.gui,"insertToolbarEvents",{value:function(c,a){var b="."+c.type;if(a)for(var d=0;d<a.length;d++){var f=a[d];$.prochartcache.get(g.parent,b,'[callbackfamily="'+f.callback+'"]')&&$.prochartcache.get(g.parent,b,'[callbackfamily="'+f.callback+'"]').each(function(){var a=
$(this),c=$(this).attr("callbackfamily"),b=null;if(c){var b={id:a.id,status:"resize"},d=$(this).attr("callbackarg");d&&(b.callbackarg=jQuery.parseJSON(d))}a.prochartdrags({groupitem:function(){if(b&&b.callbackarg&&b.callbackarg.groupid)for(var a=b.callbackarg.groupid,c=0;c<g.gui.groupproperties.length;c++){var d=g.gui.groupproperties[c];if(d.id==a)return d}return null}(),typename:b&&b.callbackarg&&b.callbackarg.eventname?b.callbackarg.eventname:null,confines:b&&b.callbackarg&&b.callbackarg.confines?
b.callbackarg.confines:null,started:function(){l.chart.LockMouseEvents(!0);b.status="started";l.events.multicallback.runCallback(c,b)},resizing:function(a){b&&(b.position={top:a.top,left:a.left,deltaY:a.deltaY,deltaX:a.deltaX,grouppropes:a.grouppropes});b.status="resizing";l.events.multicallback.runCallback(c,b)},completed:function(){l.chart.LockMouseEvents(!1);b.status="completed";l.events.multicallback.runCallback(c,b)}})})}if($.prochartcache.get(g.parent,b,"button.change-typechart"))$.prochartcache.get(g.parent,
b,"button.change-typechart").on("click",function(){var a=$(this).attr("tid");$.prochartcache.get(g.parent,b,"button.change-typechart")&&$.prochartcache.get(g.parent,b,"button.change-typechart").removeClass("button-selected");"undefined"!=typeof l.chart.ChangePriceType&&(l.chart.ChangePriceType(a),!0==l.bi.status&&l.bi.addt2BI("change price type: "+a));$(this).hasClass("tlb-a-closebyclick")&&B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&
C($(this));$(this).addClass("button-selected");return!1});if($.prochartcache.get(g.parent,b,"button.change-timeframe"))$.prochartcache.get(g.parent,b,"button.change-timeframe").on("click",function(){var a=$(this).attr("tid");$.prochartcache.get(g.parent,b,"button.change-timeframe")&&$.prochartcache.get(g.parent,b,"button.change-timeframe").removeClass("button-selected");"undefined"!=typeof l.chart.ChangeTimeScale&&(l.chart.ChangeTimeScale(a),!0==l.bi.status&&l.bi.addt2BI("change timescale: "+a));
$(this).hasClass("tlb-a-closebyclick")&&B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&C($(this));$(this).addClass("button-selected");return!1});if($.prochartcache.get(g.parent,b,"button.button-action"))$.prochartcache.get(g.parent,b,"button.button-action").on("click",function(){var a=$(this).attr("tid");if("undefined"!=typeof a&&"undefined"!=typeof l.actions){var b=$(this).attr("action");"undefined"!=typeof b&&""!=b?l.actions.action(b,
a):l.actions.action(a);if(b=$(this).attr("callbackfamily")){var a={id:a},c=$(this).attr("callbackarg");c&&(a.callbackarg=jQuery.parseJSON(c));l.events.multicallback.runCallback(b,a)}$(this).hasClass("tlb-a-closebyclick")&&B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&C($(this))}return!1});if($.prochartcache.get(g.parent,b,"button.button-action-custom"))$.prochartcache.get(g.parent,b,"button.button-action-custom").on("click",function(){var a=
$(this).attr("tid");if("undefined"!=typeof a&&"undefined"!=typeof l.actions){if(typeof l.events.toolbar.onCustomButtonClick==typeof Function)l.events.toolbar.onCustomButtonClick(a);$(this).hasClass("tlb-a-closebyclick")&&B($(this));$(this).hasClass("tlb-more-a-closebyclick")&&z($(this));$(this).hasClass("tlb-a-changeicongroup")&&C($(this))}return!1});if($.prochartcache.get(g.parent,b,"button.button-more"))$.prochartcache.get(g.parent,b,"button.button-more").on("click",function(){"none"==$(this).parent().find(".tlb-more-items").css("display")?
($.prochartcache.get(g.parent,b,".tlb-button-groups")&&$.prochartcache.get(g.parent,b,".tlb-button-groups").css("display","none"),$.prochartcache.get(g.parent,b,".tlb-more-items")&&$.prochartcache.get(g.parent,b,".tlb-more-items").css("display","none"),P($(this)),"undefined"!=typeof l.menuobj&&l.menuobj.gui.hidemenus()):z($(this))});if($.prochartcache.get(g.parent,b,"button.button-group"))$.prochartcache.get(g.parent,b,"button.button-group").on("click",function(){"none"==$(this).parent().find(">.tlb-button-groups").css("display")?
($(this).parent().find(">.tlb-button-groups").css("visibility","hidden").css("display","block"),$.prochartcache.get(g.parent,b,">.tlb-button-groups")&&$.prochartcache.get(g.parent,b,">.tlb-button-groups").css("display","none"),$.prochartcache.get(g.parent,b,".tlb-more-items")&&$.prochartcache.get(g.parent,".tlb-more-items").css("display","none"),1>=$(this).parents(".tlb-item-group").length&&$.prochartcache.get(g.parent,b,".tlb-button-groups")&&$.prochartcache.get(g.parent,b,".tlb-button-groups").css("display",
"none"),$(this).closest("ul").find("li >.tlb-button-groups").css("display","none"),$.prochartcache.get(l.toolbaradvobj.parent,b,"button.button-group")&&$.prochartcache.get(l.toolbaradvobj.parent,b,"button.button-group").removeClass("highlightedIconGroup"),$(this).parents(".tlb-item-group").each(function(){$(this).find(">.button-group").addClass("highlightedIconGroup")}),O($(this).parent()),"undefined"!=typeof l.menuobj&&l.menuobj.gui.hidemenus()):Q($(this).parent());"undefined"!=typeof l.menuobj&&
l.menuobj.gui.hidemenus()})},writable:!1,configurable:!1});Object.defineProperty(g.gui,"insertItems2Group",{value:function(c){for(var a="%html%",b=0;b<c.items.length;b++){var d=c.items[b],f="";switch(d.type){case "button-group-charttype":f=G({cssoptions:"",item:d});a=a.replace(/%html%/g,f.toolbar+"%html%");break;case "menu-group-charttype":f=X({item:d,cssoptions:""});a=a.replace(/%html%/g,f.toolbar+"%html%");break;case "button-group-indicator":f=H({cssoptions:"",item:d});a=a.replace(/%html%/g,f.toolbar+
"%html%");break;case "item":f=M({item:d,cssoptions:""});a=a.replace(/%html%/g,f.button+"%html%");break;case "button-group-timeframe":f=I({item:d,cssoptions:""});a=a.replace(/%html%/g,f.toolbar+"%html%");break;case "caption":d=J({item:d});a=a.replace(/%html%/g,d+"%html%");break;case "space":d=K({item:d});a=a.replace(/%html%/g,d+"%html%");break;case "button":f=L({item:d,cssoptions:""});a=a.replace(/%html%/g,f.button+"%html%");break;case "button-group":f=N({item:d});a=a.replace(/%html%/g,f.toolbargroup+
"%html%");break;case "custom-item":f=d.pattern;if(d.values)for(var g=0;g<d.values.length;g++)f=f.replace(d.values[g].key,d.values[g].val);g="";d.callback&&(g=g+' callbackfamily="'+d.callback+'"');d.callbackarg&&(g=g+' callbackarg="'+JSON.stringify(d.callbackarg).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');f=f.replace(/%attribute%/g,g);f={item:f};a=a.replace(/%html%/g,f.item+"%html%")}}return a=a.replace(/%html%/g,"")},writable:!1,configurable:!1});Object.defineProperty(g.gui,
"updatePartEvents",{value:function(c){$.prochartcache.update(c);if($.prochartcache.get(c))$.prochartcache.get(c).off("click").on("click",function(){var a=$(this).attr("callbackfamily");if(a){var b={id:1},c=$(this).attr("callbackarg");c&&(b.callbackarg=jQuery.parseJSON(c));l.events.multicallback.runCallback(a,b)}})},writable:!1,configurable:!1});Object.defineProperty(g.gui,"groupproperties",{value:[],writable:!1,configurable:!1});Object.defineProperty(g.gui.groupproperties,"add",{value:function(c){g.gui.groupproperties.push(c)}});
var y={icons:{},captions:{},texts:{}};return g};
