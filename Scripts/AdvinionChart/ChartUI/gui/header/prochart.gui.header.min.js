function ProChart_InitHeader(M){function N(){for(var a=c.currenlayout.headers,h=0;h<a.length;h++)for(var b=a[h],e=0;e<b.items.length;e++){var g=b.items[e];if("undefined"!=typeof g.relativeobject){var k=O(g.relativeobject);null!=k&&(k=$("#"+k.guiid),k.attr("relobj",g.guiid),k.resize(function(a){var h={top:0,left:0,width:0,heigh:0},c={top:0,left:0};"Microsoft Internet Explorer"==navigator.appName&&"XMLHttpRequest"in window&&null!==window.XMLHttpRequest?(c=$(a.srcElement).position(),h.top=c.top,h.left=
c.left,h.width=$(a.srcElement).width(),h.height=$(a.srcElement).height()):(c=$(this).position(),h.top=c.top,h.left=c.left,h.width="undefined"!=typeof $(this).outerWidth()?$(this).outerWidth():$(this).width(),h.height="undefined"!=typeof $(this).outerHeight()?$(this).outerHeight():$(this).height());"Microsoft Internet Explorer"==navigator.appName&&"XMLHttpRequest"in window&&null!==window.XMLHttpRequest?D($(a.srcElement).attr("relobj"),h):D($(this).attr("relobj"),h)}))}}}function D(a,h){for(var b=c.currenlayout.headers,
e=0;e<b.length;e++)for(var g=b[e],k=0;k<g.items.length;k++){var d=g.items[k];if(d.guiid==a){var b=$(f.parent).find("#"+a),e=d,g=h,k={top:top,left:0,right:0,bottom:0},l=0,p=0;"undefined"!=typeof e.possition.left&&(k.left=t(e.possition.left,"px"),"undefined"!=typeof e.relativepossition&&"right"==e.relativepossition&&(l=g.width+g.left,k.left=t(e.possition.left,"px",l)));"undefined"!=typeof e.possition.right&&(k.right=t(e.possition.right,"px",l),"undefined"!=typeof e.relativepossition&&"left"==e.relativepossition&&
(l=g.left,k.right=t(e.possition.right,"px",l)));"undefined"!=typeof e.possition.top&&(k.top=t(e.possition.top,"px",p),"undefined"!=typeof e.relativepossition&&"bottom"==e.relativepossition&&(p=g.heigh+g.top,k.top=t(e.possition.top,"px",p)));"undefined"!=typeof e.possition.bottom&&(k.bottom=t(e.possition.bottom,"px",p),"undefined"!=typeof e.relativepossition&&"top"==e.relativepossition&&(p=g.bottom,k.bottom=t(e.possition.bottom,"px",p)));e=k;g=["top","right","bottom","left"];for(k=0;k<g.length;k++)"undefined"!=
typeof d.possition[g[k]]&&b.css(g[k],e[g[k]]);return}}}function O(a){for(var h=c.currenlayout.headers,b=0;b<h.length;b++)for(var e=h[b],g=0;g<e.items.length;g++){var k=e.items[g];if(k.type==a||"undefined"!=typeof k.id&&k.id==a)return k}return null}function E(){if(null!=b.pfilter.markets&&"undefined"!=typeof c.init.markets){b.pfilter.markets.html("");var a=c.patterns.header.search_properties_filter_values.replace(/%id%/g,"").replace(/%name%/g,c.localizationobj.gui.returnLocalizationString("search.filter-markets-all",
"All")).replace(/%desc%/g,"All markets");b.pfilter.markets.append(a);c.init.markets.forEach(function(a){a=c.patterns.header.search_properties_filter_values.replace(/%id%/g,a.id).replace(/%name%/g,a.name).replace(/%desc%/g,a.description);b.pfilter.markets.append(a)})}$(b.pfilterlabel.markets).off("click").on("click",function(a){a.stopPropagation();$(b.pfilter.markets).is(":visible")?w():(w(),$(b.pfilter.markets).css("display","block"),$(b.pfilter.markets).parent().children(".filter-up-range").css("display",
"block"),u("markets"))});$(b.pfilter.markets).find("li a").off("click").on("click",function(a){q.market=$(this).attr("idx");a=$(this).html();$(b.pfilterlabel.markets).html(a);u("markets");A({guiparent:"header"},q.exchange,q.market,q.country,q.text,q.top,q.pageindex)})}function u(a){var h=$(b.pfilterlabel[a]).offset().left,c=$(b.pfilterlabel[a]).outerWidth(),e=$(b.pfilterlabel[a]).parent().offset().left;$(b.pfilter[a]).parent().children(".filter-up-range").css("left",parseInt(h-e)+"px");$(b.pfilter[a]).css("left",
parseInt(h-e-30)+"px");$(b.pfilter[a]).parent().children(".filter-down-point").css("left",parseInt(h-e+c+3)+"px")}function F(){if(null!=b.pfilter.exchanges&&"undefined"!=typeof c.init.exchanges){b.pfilter.exchanges.html("");var a=c.patterns.header.search_properties_filter_values.replace(/%id%/g,"").replace(/%name%/g,c.localizationobj.gui.returnLocalizationString("search.filter-exchanges-all","All")).replace(/%desc%/g,"All exchanges");b.pfilter.exchanges.append(a);c.init.exchanges.forEach(function(a){a=
c.patterns.header.search_properties_filter_values.replace(/%id%/g,a.id).replace(/%name%/g,a.name).replace(/%desc%/g,a.description);b.pfilter.exchanges.append(a)})}$(b.pfilterlabel.exchanges).off("click").on("click",function(a){a.stopPropagation();$(b.pfilter.exchanges).is(":visible")?w():(w(),$(b.pfilter.exchanges).css("display","block"),$(b.pfilter.exchanges).parent().children(".filter-up-range").css("display","block"),u("exchanges"))});$(b.pfilter.exchanges).find("li a").off("click").on("click",
function(a){q.exchange=$(this).attr("idx");a=$(this).html();$(b.pfilterlabel.exchanges).html(a);u("exchanges");A({guiparent:"header"},q.exchange,q.market,q.country,q.text,q.top,q.pageindex)})}function G(){if(null!=b.pfilter.countries&&"undefined"!=typeof c.init.countries){b.pfilter.countries.html("");var a=c.patterns.header.search_properties_filter_values.replace(/%id%/g,"").replace(/%name%/g,c.localizationobj.gui.returnLocalizationString("search.filter-countries-all","All")).replace(/%desc%/g,"All countries");
b.pfilter.countries.append(a);c.init.countries.forEach(function(a){a=c.patterns.header.search_properties_filter_values.replace(/%id%/g,a.id).replace(/%name%/g,a.name).replace(/%desc%/g,a.description);b.pfilter.countries.append(a)})}$(b.pfilterlabel.countries).off("click").on("click",function(a){a.stopPropagation();$(b.pfilter.countries).is(":visible")?w():(w(),$(b.pfilter.countries).css("display","block"),$(b.pfilter.countries).parent().children(".filter-up-range").css("display","block"),u("countries"))});
$(b.pfilter.countries).find("li a").off("click").on("click",function(a){q.country=$(this).attr("idx");a=$(this).html();$(b.pfilterlabel.countries).html(a);u("countries");A({guiparent:"header"},q.exchange,q.market,q.country,q.text,q.top,q.pageindex)})}function B(){$.prochartcache.get(f.parent,".chart-header-search")&&$.prochartcache.get(f.parent,".chart-header-search").css("display","none");$.prochartcache.get(f.parent,".chart-header-search-input-text")&&$.prochartcache.get(f.parent,".chart-header-search-input-text").removeClass("search-open");
$.prochartcache.get("body")&&$.prochartcache.get("body").off("click",B);$.prochartcache.get(f.parent,".chart-header-search-input-text")&&$.prochartcache.get(f.parent,".chart-header-search-input-text").off("keyup");$.prochartcache.get(f.parent,".chart-header-search-output")&&$.prochartcache.get(f.parent,".chart-header-search-output").css("display","none");w()}function w(a){null!=b.pfilter.markets&&($(b.pfilter.markets).css("display","none"),$(b.pfilter.markets).parent().children(".filter-up-range").css("display",
"none"));null!=b.pfilter.exchanges&&($(b.pfilter.exchanges).css("display","none"),$(b.pfilter.exchanges).parent().children(".filter-up-range").css("display","none"));null!=b.pfilter.countries&&($(b.pfilter.countries).css("display","none"),$(b.pfilter.countries).parent().children(".filter-up-range").css("display","none"))}function P(a){$(f.parent).find(".chart-header-search").on("click",function(a){w();a.stopPropagation()})}function Q(){$(f.parent).find(".chart-header-search-input-text").on("keyup",
function(a){if(27==a.which)B();else{var h=$(this).val();null!=C&&clearTimeout(C);C=setTimeout(function(){var a=h;5<=c.api.debug.level&&console.log("Run search");"undefined"==typeof a&&(a="");null!=b.pmain&&b.pmain.html("");null!=b.ptab&&b.ptab.html("");$(f.parent).find(".chart-header-search-output").css("display","block");q.text=a;A({guiparent:"header"},q.exchange,q.market,q.country,q.text,q.top,q.pageindex);clearTimeout(C)},c.apiinit.searchDelay)}})}function R(){for(var a=c.currenlayout.headers,
h=0;h<a.length;h++)for(var b=a[h],e=0;e<b.items.length;e++){var g=b.items[e];if("searchsymbol"==g.type)try{if(!1==g.search)return}catch(k){}}$(f.parent).find(".symbol-title,.search-symbolics").bind("click",function(a){var c=$(f.parent).find(".chart-header-search");0<c.length&&("block"==c.css("display")?B():H(a))})}function H(a){$(f.parent).find(".symbol-title").html();$(f.parent).find(".chart-header-search").css("display","block");$(f.parent).find(".chart-header-search-input-text").select().focus().addClass("search-open");
"undefined"!=typeof a&&a.stopPropagation();P();if($.prochartcache.get("body"))$.prochartcache.get("body").on("click",B);Q()}function A(a,h,b,e,g,k,d){if("undefined"!=typeof c.chart.symbols){if("undefined"!=typeof c.preloadobj){var l=$(f.parent).find(".chart-search-preload");c.preloadobj.startPreloadinobject(l,null,"small")}c.chart.symbols.FindSymbols(a,h,b,e,g,k,d)}}function S(a){"undefined"!=typeof c.preloadobj&&"undefined"!=typeof a.html()&&c.preloadobj.endPreloadinobject(a)}function I(a){if("undefined"!=
typeof y)for(var c=0;c<y.length;c++)if(y[c].id==a)return y[c];return null}function r(a,h){if("undefined"!=typeof c.localizationobj)return c.localizationobj.gui.returnLocalizationString(a,h)}function J(a){switch(c.api.timeframes.getTimeframeView()){case "icon":var h=r("menu.timescale.1min","1 minute");switch(a){case "tick":case "Tick":case "TICK":case "1T":case "1t":h=r("menu.timescale.1T","tick");break;case "1M":case "1m":h=r("menu.timescale.1M","1 minute");break;case "5M":case "5m":h=r("menu.timescale.5M",
"5 minute");break;case "10M":case "10m":h=r("menu.timescale.10M","10 minutes");break;case "15M":case "15m":h=r("menu.timescale.15M","15 minutes");break;case "30M":case "30m":h=r("menu.timescale.30M","30 minutes");break;case "60M":case "60m":h=r("menu.timescale.60M","Hourly");break;case "2H":case "2h":h=r("menu.timescale.2H",'2 Hours"');break;case "4H":case "4h":h=r("menu.timescale.4H","4 Hours");break;case "6H":case "6h":h=r("menu.timescale.6H","6 Hours");break;case "8H":case "8h":h=r("menu.timescale.8H",
"8 Hours");break;case "10H":case "10h":h=r("menu.timescale.10H","10 Hours");break;case "12H":case "12h":h=r("menu.timescale.12H","12 Hours");break;case "14H":case "14h":h=r("menu.timescale.14H","14 Hours");break;case "1D":case "1d":h=r("menu.timescale.1D","Daily");break;case "1W":case "1w":h=r("menu.timescale.1W","Weekly");break;case "1MON":case "1mon":case "1N":case "1n":h=r("menu.timescale.1N","Monthly");break;case "1Q":case "1q":case "3N":case "3n":h=r("menu.timescale.3N","3 Months");break;case "6MON":case "6mon":case "6N":case "6n":h=
r("menu.timescale.6N","6 Months");break;case "1Y":case "1y":h=r("menu.timescale.1Y","Year")}return h;case "text":return h=c.api.timeframes.getCaptionbyID(a),r("menu.timescale."+a,h)}return""}function K(a){return"undefined"!=typeof a&&null!=a?"menu.timescale."+a.toUpperCase():"menu.timescale.5M"}function x(a,c){var b="",b="undefined"==typeof a.position?b+"position :absolute;":b+"position :"+a.position+"; ",e="px";"undefined"!=typeof c&&null!=c&&(e=c);"undefined"!=typeof a.display&&(b=b+"display :"+
a.display+";");"undefined"!=typeof a.left&&(b=b+"left :"+t(a.left,e)+"; ");"undefined"!=typeof a.right&&(b=b+"right :"+t(a.right,e)+"; ");"undefined"!=typeof a.top&&(b=b+"top :"+t(a.top,e)+"; ");"undefined"!=typeof a.bottom&&(b=b+"bottom :"+t(a.bottom,e)+"; ");"undefined"!=typeof a.width&&(b=b+"width :"+t(a.width,e)+"; ");"undefined"!=typeof a.height&&(b=b+"height :"+t(a.height,e)+"; ");"undefined"!=typeof a.view&&!0!=a.view&&(b+="display : none; ");return 0<b.length?'style="'+b+'"':null}function t(a,
b,c){return"auto"==a.toString().toLowerCase()||"inherit"==a.toString().toLowerCase()?a:"undefined"!=typeof c?a+c+b:a+b}function s(a){return"undefined"==typeof a||null==a}var c=M,f={};c.header=f;var L=0,y=[],v=/=""/g;c.api.debug.getLogger("prochart.gui.header");var C=null,b={pmain:null,ptab:null,p:null,parpreload:null,pfilter:[{markets:null},{exchanges:null},{countries:null}],pfilterlabel:[{markets:null},{exchanges:null},{countries:null}],templates:[]},q={text:"",market:"",exchange:"",country:"",pageindex:0,
top:15};f.gui={viewHeader:function(a){f.parent=a;for(var h=c.currenlayout.headers,z=0;z<h.length;z++){var e=h[z],g=c.commonutils.func.returnShortUniqID(),k="",d="";e.guiid=g;"undefined"!=typeof e.location&&(k=k+" loc-"+e.location);d=g;"undefined"!=typeof e.id&&(d=e.id);g=c.patterns.header.containter.replace(v,"").replace(/%css%/g,k).replace(/%tid%/g,d).replace(/%id%/g,g);d="";for(k=0;k<e.items.length;k++)switch(d=e.items[k],d.type){case "searchbutton":var l=c.commonutils.func.returnShortUniqID();
d.guiid=l;var p=c.api.layout.getbuttonStyle(),p=c.patterns.header.searchbutton.replace(v,"").replace(/%icon-source%/g,p.icon_source).replace(/%font-icon%/g,""==p.icon_prefix?"":p.icon_prefix+"search-symbolics").replace(/%id%/g,l).replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});d.possition.fns=[];for(var m="right left width height top bottom".split(" "),n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],actions:["$('#"+
l+"').css('"+m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%");break;case "symboltitle":l=c.commonutils.func.returnShortUniqID();d.guiid=l;p=c.patterns.header.symboltitle.replace(v,"").replace(/%id%/g,l).replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});d.possition.fns=[];m="right left width height top bottom".split(" ");for(n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],
actions:["$('#"+l+"').css('"+m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%");break;case "searchsymbol":l=c.commonutils.func.returnShortUniqID();d.guiid=l;p=c.patterns.header.symbolsearch.replace(v,"").replace(/%id%/g,l).replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});d.possition.fns=[];m="right left width height top bottom".split(" ");for(n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],
actions:["$('#"+l+"').css('"+m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%");break;case "timeframe":l=c.commonutils.func.returnShortUniqID();d.guiid=l;p=c.patterns.header.timeframe.replace(v,"").replace(/%id%/g,l).replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});d.possition.fns=[];m="right left width height top bottom".split(" ");for(n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],
actions:["$('#"+l+"').css('"+m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%");break;case "communic":l=c.commonutils.func.returnShortUniqID();d.guiid=l;p=c.api.layout.getbuttonStyle();p=c.patterns.header.communic.replace(v,"").replace(/%id%/g,l).replace(/%icon-source%/g,p.icon_source).replace(/%font-icon%/g,""==p.icon_prefix?"":p.icon_prefix+"header-communic").replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",actions:["$('#"+
l+"').css('display',%value%?'block':'none')"]});d.possition.fns=[];m="right left width height top bottom".split(" ");for(n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],actions:["$('#"+l+"').css('"+m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%");break;case "lastupdate":l=c.commonutils.func.returnShortUniqID();d.guiid=l;p=c.patterns.header.lastupdate.replace(v,"").replace(/%id%/g,l).replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",
actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});d.possition.fns=[];m="right left width height top bottom".split(" ");for(n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],actions:["$('#"+l+"').css('"+m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%");break;case "htmlcontainer":l=c.commonutils.func.returnShortUniqID();"undefined"!=typeof d.id&&""!=d.id&&(l=d.id);d.guiid=l;"undefined"==typeof d.content&&(d.content="");p="";
"undefined"!=typeof d.css&&(p=d.css);p=c.patterns.header.htmlcontainer.replace(v,"").replace(/%html%/g,d.content).replace(/%id%/g,l).replace(/%css%/g,p).replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});d.fns.push({prop:"content",actions:["$('#"+l+"').html('%value%')"]});d.possition.fns=[];m="right left width height top bottom".split(" ");for(n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],actions:["$('#"+l+"').css('"+
m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%");break;case "toolbar":l=c.commonutils.func.returnShortUniqID();d.guiid=l;p=c.patterns.header.toolbar.replace(v,"").replace(/%id%/g,l).replace(/%style%/g,x(d.possition));d.fns=[];d.fns.push({prop:"view",actions:["$('#"+l+"').css('display',%value%?'block':'none')"]});d.possition.fns=[];m="right left width height top bottom".split(" ");for(n=0;n<m.length;n++)d.possition.fns.push({prop:m[n],actions:["$('#"+
l+"').css('"+m[n]+"',isNaN('%value%')?'auto': '%value%' + 'px' )"]});d={header:p};g=g.replace(/%html%/g,d.header+"%html%")}g=g.replace(/%html%/g,"");$.prochartcache.get(f.parent,"#"+e.parent)&&$.prochartcache.get(f.parent,"#"+e.parent).append(g);for(g=0;g<e.items.length;g++)switch(k=e.items[g],k.type){case "toolbar":if("undefined"!=typeof c.currenlayout.toolbars&&null!=c.currenlayout.toolbars)for(d=0;d<c.currenlayout.toolbars.length;d++)if(l=c.currenlayout.toolbars[d],l.id==k.id){l.parent=k.guiid;
break}}}h=J(c.chart.TimeFrame);z=K(c.chart.TimeFrame);e=c.chart.Symbol;"undefined"!=c.chart.SymbolName&&null!=c.chart.SymbolName&&(e=c.chart.SymbolName);$(f.parent).find(".symbol-title").html(e);$(f.parent).find(".header-timeframe").attr("data-localize",z).html(h);"undefined"!=typeof c.localizationobj&&c.localizationobj.gui.updateFromDataLang(a);R();b.pmain=$.prochartcache.get(f.parent,".search-main-properties-tabs");b.ptab=$.prochartcache.get(f.parent,".search-properties-tabs-labels");b.p=$.prochartcache.get(f.parent,
".chart-header-search-output");b.parpreload=$.prochartcache.get(f.parent,".chart-search-preload");if(a=$.prochartcache.get(f.parent,'.search-properties-filter[idx="markets"] ul'))b.pfilter.markets=a;if(a=$.prochartcache.get(f.parent,'.search-properties-filter[idx="markets"] a.action-change-value'))b.pfilterlabel.markets=a;if(a=$.prochartcache.get(f.parent,'.search-properties-filter[idx="exchanges"] ul'))b.pfilter.exchanges=a;if(a=$.prochartcache.get(f.parent,'.search-properties-filter[idx="exchanges"] a.action-change-value'))b.pfilterlabel.exchanges=
a;if(a=$.prochartcache.get(f.parent,'.search-properties-filter[idx="countries"] ul'))b.pfilter.countries=a;if(a=$.prochartcache.get(f.parent,'.search-properties-filter[idx="countries"] a.action-change-value'))b.pfilterlabel.countries=a;(a=$.prochartcache.get(f.parent,"#template-search-output-list"))?(b.templates.push(a.html()),a.remove()):b.templates.push(null);(a=$.prochartcache.get(f.parent,"#template-search-properties-tabs-label"))?(b.templates.push(a.html()),a.remove()):b.templates.push(null);
(a=$.prochartcache.get(f.parent,"#template-search-main-properties"))?(b.templates.push(a.html()),a.remove()):b.templates.push(null);(a=$.prochartcache.get(f.parent,"#template-search-notfound"))?(b.templates.push(a.html()),a.remove()):b.templates.push(null);(a=$.prochartcache.get(f.parent,"#template-search-properties-filter-values"))?(b.templates.push(a.html()),a.remove()):b.templates.push(null);E();F();G();N()},onChangeSymbol:function(a,b){"undefined"!=typeof b&&null!=b&&$.prochartcache.get(f.parent,
".symbol-title")&&$.prochartcache.get(f.parent,".symbol-title").html(b.name)},onChangeTimeframe:function(a,b){if("undefined"!=typeof f.parent){var c=J(b),e=K(b);$.prochartcache.get(f.parent,".header-timeframe")&&$.prochartcache.get(f.parent,".header-timeframe").attr("data-localize",e).html(c)}},onLastUpdateChange:function(a,b){$.prochartcache.get(f.parent,".header-lastupdate")&&$.prochartcache.get(f.parent,".header-lastupdate").html(b)},onCommunication:function(a,b){switch(b){case !0:$.prochartcache.get(f.parent,
".header-communic")&&$.prochartcache.get(f.parent,".header-communic").addClass("ComOn").removeClass("ComOff");break;case !1:$.prochartcache.get(f.parent,".header-communic")&&$.prochartcache.get(f.parent,".header-communic").addClass("ComOff").removeClass("ComOn")}},changeLocalization:function(){},findSymbols:A,callbackonFindSymbols:function(a,h,q){5<=c.api.debug.level&&console.log(q);null!=b.pmain&&b.pmain.html("");null!=b.ptab&&b.ptab.html("");u("markets");u("countries");u("exchanges");a=q.data;y=
[];q.data.forEach(function(a){y=y.concat(a.symbols)});var e=0,g=c.api.layout.getbuttonStyle();a.forEach(function(a){var d=a.categoryId,h=a.categoryLabel,f=a.categoryDescription,m=e==L?"active":"";e+=1;h=c.patterns.header.search_properties_tabs_label.replace(/%groupactive%/g,m).replace(/%groupid%/g,d).replace(/%groupname%/g,h).replace(/%groupnesc%/g,f);b.ptab.append(h);m=c.patterns.header.search_main_properties.replace(/%groupid%/g,d).replace(/%groupactive%/g,m);b.pmain.append(m);d=$(b.pmain).find('[idx="'+
d+'"] .search-output-list');0==a.symbols.length&&"undefined"!=typeof d.html()&&d.append(c.patterns.header.search_notfound);for(m=0;m<a.symbols.length;m++){var h=a.symbols[m],f=h.id,n=h.description,q=h.name,f=c.patterns.header.search_output_list.replace(/%icon-source%/g,g.icon_source).replace(/%itemid%/g,f).replace(/%caption%/g,n).replace(/%name%/g,q);h="undefined"!=typeof c.init.majors&&null!=c.init.gui.majorsReturn(h.id)?!0:!1;f=h?f.replace(/%status-favorite%/g,g.icon_prefix+"startenabled-icon"):
f.replace(/%status-favorite%/g,g.icon_prefix+"stardisabled-icon");"undefined"!=typeof d.html()&&d.append(f)}});$(b.ptab).find(".search-properties-tabs-label").off("click").on("click",function(a){a=$(this).parents(".chart-header-search-output");var b=$(a).find("a.search-properties-tabs-label").index(this);L=b;$(a).find(".search-main-properties").each(function(){$(this).removeClass("active")});$(a).find(".search-properties-tabs-label").each(function(){$(this).removeClass("active")});$(a).find(".search-main-properties").eq(b).addClass("active");
$(this).addClass("active")});$(b.pmain).find("li > a").off("click").off("click").on("click",function(){var a=$(this).parent().attr("idx");"undefined"!=typeof c.chart.ChangeSymbol&&(B(),a=I(a),5<=c.api.debug.level&&console.log(a),c.chart.ChangeSymbol(a))});$(b.pmain).find("li button.star-button").off("click").on("click",function(a){a.stopPropagation();a=$(this).parent().attr("idx");var b=c.api.layout.getbuttonStyle();$(this).hasClass(b.icon_prefix+"stardisabled-icon")?($(this).addClass(b.icon_prefix+
"startenabled-icon").removeClass(b.icon_prefix+"stardisabled-icon"),a=I(a),"undefined"!=typeof c.init.majors&&c.init.gui.majorsAddObj(a),"undefined"!=typeof c.menuobj&&c.menuobj.gui.updateMajorFavorites()):($(this).removeClass(b.icon_prefix+"startenabled-icon").addClass(b.icon_prefix+"stardisabled-icon"),"undefined"!=typeof c.init.majors&&(c.init.gui.majorsRemove(a),"undefined"!=typeof c.menuobj&&c.menuobj.gui.updateMajorFavorites()))});$(b.pmain).find("li").off("click").on("click",function(){var a=
$(this).attr("n");"undefined"!=typeof a&&$(f.parent).find(".chart-header-search-input-text").val(a)});S(b.parpreload);return null},marketsUpdate:E,exchangesUpdate:F,countriesUpdate:G,openSearch:H};f.api={removeItem:function(a,b){a=s(a)?"header1":a;if("undefined"==typeof b)return!1;if("undefined"!=typeof c.currenlayout.headers)for(var f=c.currenlayout.headers,e=0;e<f.length;e++){var g=f[e];if(g.id==a)for(var k=0;k<g.items.length;k++)if(g.items[k].type==b)return!0}return!1},addItem:function(a,b,f){a=
s(a)?"header1":a;if("undefined"==typeof b.type)return!1;"undefined"!=typeof f&&(f=!1);if("undefined"!=typeof c.currenlayout.headers)for(var e=c.currenlayout.headers,g=0;g<e.length;g++){var k=e[g];if(k.id==a){for(a=0;a<k.items.length;a++)if(k.items[a].type==b.type){if(!1==f)return!1;k.items.slice(a,1);break}k.items.push(b);return!0}}return!1},updateItem:function(a,b){s(a);return!1},changeItemPossition:function(){},viewItem:function(){},addHtmlContainer:function(a,b,f,e,g,k,d,l,p,m){a=s(a)?"header1":
a;b=s(b)?c.commonutils.func.returnShortUniqID():b;f=s(f)?"":f;s(e);g=s(g)?"auto":g;k=s(k)?"auto":k;d=s(d)?"auto":d;l=s(l)?"auto":l;p=s(p)?"auto":p;m=s(m)?"auto":m;if("undefined"!=typeof c.currenlayout.headers){e=c.currenlayout.headers;for(var n=0;n<e.length;n++){var q=e[n];if(q.id==a){q.items.push({type:"htmlcontainer",id:b,view:!0,content:f,possition:{height:g,width:k,right:d,left:l,top:p,bottom:m}});break}}}},removeHtmlContainer:function(a,b){a=s(a)?"header1":a;if(s(b))return!1;if("undefined"!=
typeof c.currenlayout.headers)for(var f=c.currenlayout.headers,e=0;e<f.length;e++){var g=f[e];if(g.id==a)for(var k=0;k<g.items.length;k++)if(g.items[k].id==b)return g.items.splice(e,1),!0}return!1},updateHtmlContainer:function(a,b,f,e,g,k,d,l,p,m){a=s(a)?"header1":a;if(s(b))return!1;if("undefined"!=typeof c.currenlayout.headers)for(var n=c.currenlayout.headers,q=0;q<n.length;q++){var r=n[q];if(r.id==a)for(var t=0;t<r.items.length;t++)if(r.items[t].id==b)return a=r.items[t],s(f)||(a.content=f),s(e)||
(a.view=e),s(g)||(a.possition.height=g),s(k)||(a.possition.width=k),s(d)||(a.possition.right=d),s(l)||(a.possition.left=l),s(p)||(a.possition.top=p),s(m)||(a.possition.bottom=m),!0}return!1}};return f};
