function ProChart_InitTrade(n){function p(c,d){function e(a){$(a).find(".ui-dialog-buttonset").prepend('<button class="chart-button adv-buttons eye-orange " type="button" title="" ></button>').on("click",function(){var a=$(".chart-ui-dialog.trade-dialog").css("opacity"),a=1==a?.5:1,c=1==a?"":2;$(".chart-ui-dialog.trade-dialog").css("opacity",a);$(this).css("opacity",c)})}$('<div id="chart-dialog" title="'+d+'"><div id="trade-inner" class="dialog_level"></div></div>').insertAfter("body");var f="Apply Order",
h="Cancel",k="Delete Order",l="";"undefined"!=typeof b.localizationobj&&(h=b.localizationobj.gui.returnLocalizationString("dialogs.common.button-cancel","Cancel"),f=b.localizationobj.gui.returnLocalizationString("dialogs.common.button-applyorder","Apply Order"),k=b.localizationobj.gui.returnLocalizationString("dialogs.common.button-deleteorder","Delete Order"));"undefined"!=typeof b.init.TemplateName&&(l=b.init.TemplateName);var m="";"rtl"==b.localizationobj.gui.returnCurrentLanguage().direction&&
(m="dir-rtl");$("#chart-dialog").dialog({dialogClass:"chart-ui-dialog trade-dialog "+l+" "+m,draggable:!0,autoOpen:!1,resizable:!1,closeOnEscape:!0,width:"auto",modal:!0,open:function(a,c){e($(this).parent());$(".ui-widget-overlay").last().addClass("chart-ui-widget-overlay");if(b.api.props){var d=b.api.props.chart.gui.layout.zindex_dialog;$(".chart-ui-widget-overlay").css({"z-index":d});$(".chart-ui-dialog").css({"z-index":d})}"undefined"!=typeof b.localizationobj&&b.localizationobj.gui.updateFromDataLang($(this).parent());
$(".ui-widget-overlay").bind("click",function(){$("#chart-dialog").dialog("close")})},close:function(c,d){b.chart.TradeOrders.EndOrderEdit();""==a.strUID&&a.Cancel();g.TradeOrders.Refresh();$(".chart-ui-dialog.trade-dialog").off();$(".chart-ui-dialog.trade-dialog  adv-buttons.eye-orange").off().remove();$("#chart-dialog").remove()},buttons:[{id:"btn-order-apply",text:f,click:function(){a.fValue=parseFloat($("#in-tradevalue").val());a.fStopLoss=parseFloat($("#in-stoploss").val());a.fTakeProfit=parseFloat($("#in-tekeprofit").val());
a.strDescription=$("#input-text").val();g.TradeOrders.Confirm(a);$(this).dialog("close")}},{id:"btn-order-delete",text:k,click:function(){g.TradeOrders.Delete(a);$(this).dialog("close")}},{id:"btn-order-cancel",text:h,click:function(){$(this).dialog("close")}}]})}function q(){$(".properties-tabs").delegate("a","click",function(){var a=$(this).parents(".dialog_level"),b=$(a).find(".properties-tabs a").index(this);$(a).find(".main-properties").each(function(){$(this).css("display","none")});$(a).find(".properties-tabs-label").each(function(){$(this).removeClass("active")});
$(a).find(".main-properties").eq(b).css("display","block");$(this).addClass("active")})}var e={},b=n;b.api.debug.getLogger("prochart.gui.trade");var f="",a=null,g=null;b.tradeobj=e;e.gui={openTradeDialog:function(c,d,e){f="%ordertype% (%ordervalue% ; %stoploss% ; %takeprofit% ) %ordersymbol% ".replace("%ordertype%",d.strOrder.toUpperCase()).replace("%ordervalue%",d.fValue).replace("%stoploss%",d.fStopLoss).replace("%ordersymbol%",d.strSymbol).replace("%takeprofit%",d.fTakeProfit);a=d;g=e;p("trade",
f);c=b.patterns.trade.form;$("#chart-dialog #trade-inner").html(c);$("#order-type").html(a.strOrder.toUpperCase());$("#order-symbol").html(a.strSymbol);$("#order-status").html(a.strStatus);$("#order-id").html(a.strUID);switch(a.strOrder){case "buy":$("#order-type").addClass("orderbuy").removeClass("ordersell").attr("data-localize","dialogs.trade.trade-buy");break;case "sell":$("#order-type").addClass("ordersell").removeClass("orderbuy").attr("data-localize","dialogs.trade.trade-sell")}c=$("#in-tradevalue");
$(c).val(a.fValue);c=$("#in-stoploss");$(c).val(a.fStopLoss);c=$("#in-tekeprofit");$(c).val(a.fTakeProfit);c=$("#input-text");$(c).val(a.strDescription);""==a.strUID&&$("#btn-order-delete").css("display","none");q();$(".chart-ui-dialog .onlynumeric").prochart_numeric();$("#chart-dialog").dialog("open")}};return e};
