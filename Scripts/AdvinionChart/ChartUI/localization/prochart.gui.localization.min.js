function ProChart_InitLocalization(B,w,k){function x(a,c,b){var e=$.Deferred();c=f.guiinit.rootpath+c+"/localization";var l=!1==y?"?"+f.version.gui.name+(new Date).getTime():"?"+f.version.gui.name;a=c+"/prochart-"+a+".js"+l;if(f.navigator.XMLHttpRequest()){var h=new XMLHttpRequest;h.objectname=b;h.timeout=500;h.open("get",a);h.onload=function(){var a=$.parseJSON(h.responseText);d.dataLang[h.objectname]=a;e.resolve(a)};h.send()}else $.ajax({url:a,timeout:500,contentType:"application/javascript",dataType:"json",
objectname:b,async:!0}).done(function(a){d.dataLang[this.objectname]=a;e.resolve(a)}).fail(function(a,b){p.error(a,b)});return e.promise()}function z(){$("#layout"+f.init.uuid).find("[data-localize]").each(function(){var a,c,b;a=$(this);c=$(this).attr("data-localize");b=g(d.dataLang,c);null!=b&&(a.is("input")?m(a,c,b):a.is("img")?q(a,c,b):a.is("button")?t(a,c,b):a.is("optgroup")?a.attr("label",b):$.isPlainObject(b)||u(a,c,b))})}function t(a,c,b){v(a.attr("title"))||a.attr("title",b);a.hasClass("ui-button")?
a.find("span").html(b):0<a.has("span").length?(a.hasClass("icon-button")||a.hasClass("no-icon-button"))&&a.hasClass("caption-button")&&(c=a.find("span")[0].outerHTML+b,a.html(c)):0<a.has("b").length?a.hasClass("no-icon-button")&&(a.hasClass("onlycaption-timeframe")||a.hasClass("onlycaption-view"))&&(p.debug("Elem Button:",a.text()),c=a.find("b")[0].outerHTML+b,a.html(c)):v(a.html())||a.html(b)}function u(a,c,b){0<$(a).has("span").length?(a.hasClass("icon-item")||a.hasClass("no-icon-item"))&&a.hasClass("caption-item")&&
(c=a.find("span")[0].outerHTML+b,a.html(c),p.debug("Elem plain:",a[0].outerHTML)):v(a.html())||a.html(b)}function m(a,c,b){c=$.isPlainObject(b)?b.value:b;return a.is("[placeholder]")?a.attr("placeholder",c):a.val(c)}function q(a,c,b){A(a,"alt",b);return A(a,"src",b)}function A(a,c,b){b=g(c,b);if(null!=b)return a.attr(c,b)}function g(a,c){if(!a)return null;var b=c.split(".");return 1==b.length?a[b[0]]:"undefined"!=typeof a[b[0]]?g(a[b[0]],b.slice(1).join(".")):null}function v(a){return!a||0===a.replace(/^\s+|\s+$/g,
"").length}var f=B,y=f.guiinit.cache,p=f.api.debug.getLogger("prochart.gui.localization"),d={dataLang:null,lang:"",funcOnChangeLocalication:null};f.localizationobj=d;d.lang="undefined"!=typeof w?w:f.gui.init.localizationlang;var r=[];d.gui={changeLocalization:function(a){var c="ltr";"undefined"==typeof a?a=""!=d.lang?d.lang:"en":f.gui.init.localizationlang=a;for(var b=0;b<f.gui.init.localization.length;b++){var e=f.gui.init.localization[b];if(e.id==a){"undefined"!=typeof e.dir&&(c=e.dir);break}}if(a!=
d.lang||null==d.dataLang){var b=a,e=f.guiinit.rootpath+"/ChartUI/localization",l=$.Deferred(),h=!1==y?"?"+f.version.gui.name+(new Date).getTime():"?"+f.version.gui.name,g=e+"/prochart-"+b+".js",g=g+h,n=function(b){d.dataLang=b;b=d.lang=a;for(var e=0;e<r.length;e++)x(b,r[e].source,r[e].key);z();"function"==typeof d.funcOnChangeLocalication&&d.funcOnChangeLocalication(a,c)},m=function(a){try{window.GlobProchartObject[g]=a}catch(b){}if("undefined"!=typeof k){var c=prochartstation.get(k,"languagejs");
if(null!=c){for(var d=0;d<c.length;d++){var e=c[d];if("function"==typeof e["function"])e["function"](a);e.deferred.resolve()}prochartstation.del(k,"languagejs")}}};try{if("undefined"!=typeof window.GlobProchartObject[g])return n(window.GlobProchartObject[g]),l.resolve()}catch(q){}if("undefined"!=typeof k)if(null==prochartstation.get(k,"languagejs"))prochartstation.set(k,"languagejs",[]);else return b={deferred:l,"function":n},prochartstation.get(k,"languagejs").push(b),l.promise();if(f.navigator.XMLHttpRequest()){var s=
new XMLHttpRequest;s.open("get",g);s.onload=function(){var a=$.parseJSON(s.responseText);n(a);m(a);l.resolve(a)};s.send()}else $.ajax({url:g,dataType:"json",type:"GET",async:!0}).done(function(b){d.dataLang=b;d.lang=a;n(b);m(b);l.resolve(b)}).fail(function(a,b){p.error(a,b);prochartstation.del(k,"languagejs")});return l.promise()}z();"function"==typeof d.funcOnChangeLocalication&&d.funcOnChangeLocalication(a,c)},returnLocalizationString:function(a,c){return null!=a&&null!=d.dataLang&&null!=g(d.dataLang,
a)?g(d.dataLang,a):c},updateFromDataLang:function(a){$(a).find("[data-localize]").each(function(){var a,b,e;a=$(this);b=a.data("localize");if(0<b.length){b||(b=a.attr("rel").match(/localize\[(.*?)\]/)[1]);e=g(d.dataLang,b);var f=!0;"undefined"==typeof e&&(f=!1);null==e&&(f=!1);!0==f&&(a.is("input")?m(a,b,e):a.is("img")?q(a,b,e):a.is("button")?t(a,b,e):a.is("optgroup")?a.attr("label",e):$.isPlainObject(e)||u(a,b,e))}})},addPluginSource:function(a,c){r.push({key:a,source:c});null!=d.dataLang&&"undefined"==
typeof d.dataLang[a]&&x(d.lang,c,a)},returnCurrentLanguage:function(){var a="en";""!=d.lang&&(a=d.lang);for(var c="ltr",b=0;b<f.gui.init.localization.length;b++){var e=f.gui.init.localization[b];if(e.id==a){"undefined"!=typeof e.dir&&(c=e.dir);break}}return{lang:a,direction:c}},setLocalizationForElement:function(a){var c,b;c=a.attr("data-localize");b=g(d.dataLang,c);null!=b&&(a.is("input")?m(a,c,b):a.is("img")?q(a,c,b):a.is("button")?t(a,c,b):a.is("optgroup")?a.attr("label",b):$.isPlainObject(b)||
u(a,c,b))}};return d};
